var h9e=Object.defineProperty;var p9e=(e,t,n)=>t in e?h9e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var m9e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ul=(e,t,n)=>(p9e(e,typeof t!="symbol"?t+"":t,n),n);var tun=m9e((yln,die)=>{function g9e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ko=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ho(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function mye(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var gye={exports:{}},xM={},yye={exports:{}},Dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AI=Symbol.for("react.element"),y9e=Symbol.for("react.portal"),v9e=Symbol.for("react.fragment"),b9e=Symbol.for("react.strict_mode"),_9e=Symbol.for("react.profiler"),w9e=Symbol.for("react.provider"),E9e=Symbol.for("react.context"),x9e=Symbol.for("react.forward_ref"),S9e=Symbol.for("react.suspense"),T9e=Symbol.for("react.memo"),C9e=Symbol.for("react.lazy"),Nie=Symbol.iterator;function A9e(e){return e===null||typeof e!="object"?null:(e=Nie&&e[Nie]||e["@@iterator"],typeof e=="function"?e:null)}var vye={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bye=Object.assign,_ye={};function Ix(e,t,n){this.props=e,this.context=t,this.refs=_ye,this.updater=n||vye}Ix.prototype.isReactComponent={};Ix.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ix.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function wye(){}wye.prototype=Ix.prototype;function Sq(e,t,n){this.props=e,this.context=t,this.refs=_ye,this.updater=n||vye}var Tq=Sq.prototype=new wye;Tq.constructor=Sq;bye(Tq,Ix.prototype);Tq.isPureReactComponent=!0;var Pie=Array.isArray,Eye=Object.prototype.hasOwnProperty,Cq={current:null},xye={key:!0,ref:!0,__self:!0,__source:!0};function Sye(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Eye.call(t,r)&&!xye.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:AI,type:e,key:s,ref:o,props:i,_owner:Cq.current}}function I9e(e,t){return{$$typeof:AI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Aq(e){return typeof e=="object"&&e!==null&&e.$$typeof===AI}function k9e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Oie=/\/+/g;function G5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?k9e(""+e.key):t.toString(36)}function SP(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case AI:case y9e:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+G5(o,0):r,Pie(i)?(n="",e!=null&&(n=e.replace(Oie,"$&/")+"/"),SP(i,t,n,"",function(l){return l})):i!=null&&(Aq(i)&&(i=I9e(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Oie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Pie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+G5(s,a);o+=SP(s,t,n,u,i)}else if(u=A9e(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+G5(s,a++),o+=SP(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function PR(e,t,n){if(e==null)return e;var r=[],i=0;return SP(e,r,"","",function(s){return t.call(n,s,i++)}),r}function R9e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var iu={current:null},TP={transition:null},N9e={ReactCurrentDispatcher:iu,ReactCurrentBatchConfig:TP,ReactCurrentOwner:Cq};function Tye(){throw Error("act(...) is not supported in production builds of React.")}Dn.Children={map:PR,forEach:function(e,t,n){PR(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return PR(e,function(){t++}),t},toArray:function(e){return PR(e,function(t){return t})||[]},only:function(e){if(!Aq(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Dn.Component=Ix;Dn.Fragment=v9e;Dn.Profiler=_9e;Dn.PureComponent=Sq;Dn.StrictMode=b9e;Dn.Suspense=S9e;Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N9e;Dn.act=Tye;Dn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=bye({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Cq.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Eye.call(t,u)&&!xye.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:AI,type:e.type,key:i,ref:s,props:r,_owner:o}};Dn.createContext=function(e){return e={$$typeof:E9e,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:w9e,_context:e},e.Consumer=e};Dn.createElement=Sye;Dn.createFactory=function(e){var t=Sye.bind(null,e);return t.type=e,t};Dn.createRef=function(){return{current:null}};Dn.forwardRef=function(e){return{$$typeof:x9e,render:e}};Dn.isValidElement=Aq;Dn.lazy=function(e){return{$$typeof:C9e,_payload:{_status:-1,_result:e},_init:R9e}};Dn.memo=function(e,t){return{$$typeof:T9e,type:e,compare:t===void 0?null:t}};Dn.startTransition=function(e){var t=TP.transition;TP.transition={};try{e()}finally{TP.transition=t}};Dn.unstable_act=Tye;Dn.useCallback=function(e,t){return iu.current.useCallback(e,t)};Dn.useContext=function(e){return iu.current.useContext(e)};Dn.useDebugValue=function(){};Dn.useDeferredValue=function(e){return iu.current.useDeferredValue(e)};Dn.useEffect=function(e,t){return iu.current.useEffect(e,t)};Dn.useId=function(){return iu.current.useId()};Dn.useImperativeHandle=function(e,t,n){return iu.current.useImperativeHandle(e,t,n)};Dn.useInsertionEffect=function(e,t){return iu.current.useInsertionEffect(e,t)};Dn.useLayoutEffect=function(e,t){return iu.current.useLayoutEffect(e,t)};Dn.useMemo=function(e,t){return iu.current.useMemo(e,t)};Dn.useReducer=function(e,t,n){return iu.current.useReducer(e,t,n)};Dn.useRef=function(e){return iu.current.useRef(e)};Dn.useState=function(e){return iu.current.useState(e)};Dn.useSyncExternalStore=function(e,t,n){return iu.current.useSyncExternalStore(e,t,n)};Dn.useTransition=function(){return iu.current.useTransition()};Dn.version="18.3.1";yye.exports=Dn;var I=yye.exports;const Nr=Ho(I),Cye=g9e({__proto__:null,default:Nr},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P9e=I,O9e=Symbol.for("react.element"),D9e=Symbol.for("react.fragment"),$9e=Object.prototype.hasOwnProperty,M9e=P9e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L9e={key:!0,ref:!0,__self:!0,__source:!0};function Aye(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)$9e.call(t,r)&&!L9e.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:O9e,type:e,key:s,ref:o,props:i,_owner:M9e.current}}xM.Fragment=D9e;xM.jsx=Aye;xM.jsxs=Aye;gye.exports=xM;var w=gye.exports,BB={},Iye={exports:{}},ql={},kye={exports:{}},Rye={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,V){var D=U.length;U.push(V);e:for(;0<D;){var z=D-1>>>1,W=U[z];if(0<i(W,V))U[z]=V,U[D]=W,D=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var V=U[0],D=U.pop();if(D!==V){U[0]=D;e:for(var z=0,W=U.length,F=W>>>1;z<F;){var H=2*(z+1)-1,G=U[H],ee=H+1,le=U[ee];if(0>i(G,D))ee<W&&0>i(le,G)?(U[z]=le,U[ee]=D,z=ee):(U[z]=G,U[H]=D,z=H);else if(ee<W&&0>i(le,D))U[z]=le,U[ee]=D,z=ee;else break e}}return V}function i(U,V){var D=U.sortIndex-V.sortIndex;return D!==0?D:U.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var V=n(l);V!==null;){if(V.callback===null)r(l);else if(V.startTime<=U)r(l),V.sortIndex=V.expirationTime,t(u,V);else break;V=n(l)}}function _(U){if(m=!1,b(U),!p)if(n(u)!==null)p=!0,j(x);else{var V=n(l);V!==null&&B(_,V.startTime-U)}}function x(U,V){p=!1,m&&(m=!1,y(T),T=-1),h=!0;var D=d;try{for(b(V),f=n(u);f!==null&&(!(f.expirationTime>V)||U&&!R());){var z=f.callback;if(typeof z=="function"){f.callback=null,d=f.priorityLevel;var W=z(f.expirationTime<=V);V=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(V)}else r(u);f=n(u)}if(f!==null)var F=!0;else{var H=n(l);H!==null&&B(_,H.startTime-V),F=!1}return F}finally{f=null,d=D,h=!1}}var S=!1,E=null,T=-1,A=5,k=-1;function R(){return!(e.unstable_now()-k<A)}function $(){if(E!==null){var U=e.unstable_now();k=U;var V=!0;try{V=E(!0,U)}finally{V?P():(S=!1,E=null)}}else S=!1}var P;if(typeof v=="function")P=function(){v($)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,M=O.port2;O.port1.onmessage=$,P=function(){M.postMessage(null)}}else P=function(){g($,0)};function j(U){E=U,S||(S=!0,P())}function B(U,V){T=g(function(){U(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,j(x))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var V=3;break;default:V=d}var D=d;d=V;try{return U()}finally{d=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,V){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var D=d;d=U;try{return V()}finally{d=D}},e.unstable_scheduleCallback=function(U,V,D){var z=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?z+D:z):D=z,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,U={id:c++,callback:V,priorityLevel:U,startTime:D,expirationTime:W,sortIndex:-1},D>z?(U.sortIndex=D,t(l,U),n(u)===null&&U===n(l)&&(m?(y(T),T=-1):m=!0,B(_,D-z))):(U.sortIndex=W,t(u,U),p||h||(p=!0,j(x))),U},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(U){var V=d;return function(){var D=d;d=V;try{return U.apply(this,arguments)}finally{d=D}}}})(Rye);kye.exports=Rye;var F9e=kye.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j9e=I,Pl=F9e;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nye=new Set,U2={};function Sb(e,t){fE(e,t),fE(e+"Capture",t)}function fE(e,t){for(U2[e]=t,e=0;e<t.length;e++)Nye.add(t[e])}var bm=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),UB=Object.prototype.hasOwnProperty,B9e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Die={},$ie={};function U9e(e){return UB.call($ie,e)?!0:UB.call(Die,e)?!1:B9e.test(e)?$ie[e]=!0:(Die[e]=!0,!1)}function z9e(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function V9e(e,t,n,r){if(t===null||typeof t>"u"||z9e(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function su(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Fo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fo[e]=new su(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fo[t]=new su(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fo[e]=new su(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fo[e]=new su(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fo[e]=new su(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fo[e]=new su(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fo[e]=new su(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fo[e]=new su(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fo[e]=new su(e,5,!1,e.toLowerCase(),null,!1,!1)});var Iq=/[\-:]([a-z])/g;function kq(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Iq,kq);Fo[t]=new su(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Iq,kq);Fo[t]=new su(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Iq,kq);Fo[t]=new su(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fo[e]=new su(e,1,!1,e.toLowerCase(),null,!1,!1)});Fo.xlinkHref=new su("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fo[e]=new su(e,1,!1,e.toLowerCase(),null,!0,!0)});function Rq(e,t,n,r){var i=Fo.hasOwnProperty(t)?Fo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(V9e(t,n,i,r)&&(n=null),r||i===null?U9e(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Gm=j9e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,OR=Symbol.for("react.element"),Q_=Symbol.for("react.portal"),J_=Symbol.for("react.fragment"),Nq=Symbol.for("react.strict_mode"),zB=Symbol.for("react.profiler"),Pye=Symbol.for("react.provider"),Oye=Symbol.for("react.context"),Pq=Symbol.for("react.forward_ref"),VB=Symbol.for("react.suspense"),HB=Symbol.for("react.suspense_list"),Oq=Symbol.for("react.memo"),$g=Symbol.for("react.lazy"),Dye=Symbol.for("react.offscreen"),Mie=Symbol.iterator;function JS(e){return e===null||typeof e!="object"?null:(e=Mie&&e[Mie]||e["@@iterator"],typeof e=="function"?e:null)}var Li=Object.assign,Y5;function QT(e){if(Y5===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Y5=t&&t[1]||""}return`
`+Y5+e}var K5=!1;function X5(e,t){if(!e||K5)return"";K5=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{K5=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?QT(e):""}function H9e(e){switch(e.tag){case 5:return QT(e.type);case 16:return QT("Lazy");case 13:return QT("Suspense");case 19:return QT("SuspenseList");case 0:case 2:case 15:return e=X5(e.type,!1),e;case 11:return e=X5(e.type.render,!1),e;case 1:return e=X5(e.type,!0),e;default:return""}}function qB(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case J_:return"Fragment";case Q_:return"Portal";case zB:return"Profiler";case Nq:return"StrictMode";case VB:return"Suspense";case HB:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Oye:return(e.displayName||"Context")+".Consumer";case Pye:return(e._context.displayName||"Context")+".Provider";case Pq:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Oq:return t=e.displayName||null,t!==null?t:qB(e.type)||"Memo";case $g:t=e._payload,e=e._init;try{return qB(e(t))}catch{}}return null}function q9e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qB(t);case 8:return t===Nq?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function U0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $ye(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function W9e(e){var t=$ye(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function DR(e){e._valueTracker||(e._valueTracker=W9e(e))}function Mye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$ye(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function HO(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function WB(e,t){var n=t.checked;return Li({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Lie(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=U0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Lye(e,t){t=t.checked,t!=null&&Rq(e,"checked",t,!1)}function GB(e,t){Lye(e,t);var n=U0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?YB(e,t.type,n):t.hasOwnProperty("defaultValue")&&YB(e,t.type,U0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Fie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function YB(e,t,n){(t!=="number"||HO(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var JT=Array.isArray;function Sw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+U0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function KB(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return Li({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function jie(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(et(92));if(JT(n)){if(1<n.length)throw Error(et(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:U0(n)}}function Fye(e,t){var n=U0(t.value),r=U0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Bie(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jye(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function XB(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jye(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $R,Bye=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($R=$R||document.createElement("div"),$R.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$R.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function z2(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var zC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},G9e=["Webkit","ms","Moz","O"];Object.keys(zC).forEach(function(e){G9e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),zC[t]=zC[e]})});function Uye(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||zC.hasOwnProperty(e)&&zC[e]?(""+t).trim():t+"px"}function zye(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Uye(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Y9e=Li({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function QB(e,t){if(t){if(Y9e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function JB(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ZB=null;function Dq(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var e7=null,Tw=null,Cw=null;function Uie(e){if(e=RI(e)){if(typeof e7!="function")throw Error(et(280));var t=e.stateNode;t&&(t=IM(t),e7(e.stateNode,e.type,t))}}function Vye(e){Tw?Cw?Cw.push(e):Cw=[e]:Tw=e}function Hye(){if(Tw){var e=Tw,t=Cw;if(Cw=Tw=null,Uie(e),t)for(e=0;e<t.length;e++)Uie(t[e])}}function qye(e,t){return e(t)}function Wye(){}var Q5=!1;function Gye(e,t,n){if(Q5)return e(t,n);Q5=!0;try{return qye(e,t,n)}finally{Q5=!1,(Tw!==null||Cw!==null)&&(Wye(),Hye())}}function V2(e,t){var n=e.stateNode;if(n===null)return null;var r=IM(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(et(231,t,typeof n));return n}var t7=!1;if(bm)try{var ZS={};Object.defineProperty(ZS,"passive",{get:function(){t7=!0}}),window.addEventListener("test",ZS,ZS),window.removeEventListener("test",ZS,ZS)}catch{t7=!1}function K9e(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var VC=!1,qO=null,WO=!1,n7=null,X9e={onError:function(e){VC=!0,qO=e}};function Q9e(e,t,n,r,i,s,o,a,u){VC=!1,qO=null,K9e.apply(X9e,arguments)}function J9e(e,t,n,r,i,s,o,a,u){if(Q9e.apply(this,arguments),VC){if(VC){var l=qO;VC=!1,qO=null}else throw Error(et(198));WO||(WO=!0,n7=l)}}function Tb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Yye(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function zie(e){if(Tb(e)!==e)throw Error(et(188))}function Z9e(e){var t=e.alternate;if(!t){if(t=Tb(e),t===null)throw Error(et(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return zie(i),e;if(s===r)return zie(i),t;s=s.sibling}throw Error(et(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(et(189))}}if(n.alternate!==r)throw Error(et(190))}if(n.tag!==3)throw Error(et(188));return n.stateNode.current===n?e:t}function Kye(e){return e=Z9e(e),e!==null?Xye(e):null}function Xye(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Xye(e);if(t!==null)return t;e=e.sibling}return null}var Qye=Pl.unstable_scheduleCallback,Vie=Pl.unstable_cancelCallback,eje=Pl.unstable_shouldYield,tje=Pl.unstable_requestPaint,us=Pl.unstable_now,nje=Pl.unstable_getCurrentPriorityLevel,$q=Pl.unstable_ImmediatePriority,Jye=Pl.unstable_UserBlockingPriority,GO=Pl.unstable_NormalPriority,rje=Pl.unstable_LowPriority,Zye=Pl.unstable_IdlePriority,SM=null,fh=null;function ije(e){if(fh&&typeof fh.onCommitFiberRoot=="function")try{fh.onCommitFiberRoot(SM,e,void 0,(e.current.flags&128)===128)}catch{}}var Ff=Math.clz32?Math.clz32:aje,sje=Math.log,oje=Math.LN2;function aje(e){return e>>>=0,e===0?32:31-(sje(e)/oje|0)|0}var MR=64,LR=4194304;function ZT(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function YO(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ZT(a):(s&=o,s!==0&&(r=ZT(s)))}else o=n&~i,o!==0?r=ZT(o):s!==0&&(r=ZT(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ff(t),i=1<<n,r|=e[n],t&=~i;return r}function uje(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lje(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Ff(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=uje(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function r7(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function eve(){var e=MR;return MR<<=1,!(MR&4194240)&&(MR=64),e}function J5(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function II(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ff(t),e[t]=n}function cje(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ff(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Mq(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ff(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Or=0;function tve(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var nve,Lq,rve,ive,sve,i7=!1,FR=[],g0=null,y0=null,v0=null,H2=new Map,q2=new Map,Hg=[],fje="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hie(e,t){switch(e){case"focusin":case"focusout":g0=null;break;case"dragenter":case"dragleave":y0=null;break;case"mouseover":case"mouseout":v0=null;break;case"pointerover":case"pointerout":H2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":q2.delete(t.pointerId)}}function eT(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=RI(t),t!==null&&Lq(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function dje(e,t,n,r,i){switch(t){case"focusin":return g0=eT(g0,e,t,n,r,i),!0;case"dragenter":return y0=eT(y0,e,t,n,r,i),!0;case"mouseover":return v0=eT(v0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return H2.set(s,eT(H2.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,q2.set(s,eT(q2.get(s)||null,e,t,n,r,i)),!0}return!1}function ove(e){var t=Kv(e.target);if(t!==null){var n=Tb(t);if(n!==null){if(t=n.tag,t===13){if(t=Yye(n),t!==null){e.blockedOn=t,sve(e.priority,function(){rve(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function CP(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=s7(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ZB=r,n.target.dispatchEvent(r),ZB=null}else return t=RI(n),t!==null&&Lq(t),e.blockedOn=n,!1;t.shift()}return!0}function qie(e,t,n){CP(e)&&n.delete(t)}function hje(){i7=!1,g0!==null&&CP(g0)&&(g0=null),y0!==null&&CP(y0)&&(y0=null),v0!==null&&CP(v0)&&(v0=null),H2.forEach(qie),q2.forEach(qie)}function tT(e,t){e.blockedOn===t&&(e.blockedOn=null,i7||(i7=!0,Pl.unstable_scheduleCallback(Pl.unstable_NormalPriority,hje)))}function W2(e){function t(i){return tT(i,e)}if(0<FR.length){tT(FR[0],e);for(var n=1;n<FR.length;n++){var r=FR[n];r.blockedOn===e&&(r.blockedOn=null)}}for(g0!==null&&tT(g0,e),y0!==null&&tT(y0,e),v0!==null&&tT(v0,e),H2.forEach(t),q2.forEach(t),n=0;n<Hg.length;n++)r=Hg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Hg.length&&(n=Hg[0],n.blockedOn===null);)ove(n),n.blockedOn===null&&Hg.shift()}var Aw=Gm.ReactCurrentBatchConfig,KO=!0;function pje(e,t,n,r){var i=Or,s=Aw.transition;Aw.transition=null;try{Or=1,Fq(e,t,n,r)}finally{Or=i,Aw.transition=s}}function mje(e,t,n,r){var i=Or,s=Aw.transition;Aw.transition=null;try{Or=4,Fq(e,t,n,r)}finally{Or=i,Aw.transition=s}}function Fq(e,t,n,r){if(KO){var i=s7(e,t,n,r);if(i===null)u8(e,t,r,XO,n),Hie(e,r);else if(dje(i,e,t,n,r))r.stopPropagation();else if(Hie(e,r),t&4&&-1<fje.indexOf(e)){for(;i!==null;){var s=RI(i);if(s!==null&&nve(s),s=s7(e,t,n,r),s===null&&u8(e,t,r,XO,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else u8(e,t,r,null,n)}}var XO=null;function s7(e,t,n,r){if(XO=null,e=Dq(r),e=Kv(e),e!==null)if(t=Tb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Yye(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return XO=e,null}function ave(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nje()){case $q:return 1;case Jye:return 4;case GO:case rje:return 16;case Zye:return 536870912;default:return 16}default:return 16}}var t0=null,jq=null,AP=null;function uve(){if(AP)return AP;var e,t=jq,n=t.length,r,i="value"in t0?t0.value:t0.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return AP=i.slice(e,1<r?1-r:void 0)}function IP(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function jR(){return!0}function Wie(){return!1}function Wl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jR:Wie,this.isPropagationStopped=Wie,this}return Li(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jR)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jR)},persist:function(){},isPersistent:jR}),t}var kx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bq=Wl(kx),kI=Li({},kx,{view:0,detail:0}),gje=Wl(kI),Z5,e8,nT,TM=Li({},kI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uq,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nT&&(nT&&e.type==="mousemove"?(Z5=e.screenX-nT.screenX,e8=e.screenY-nT.screenY):e8=Z5=0,nT=e),Z5)},movementY:function(e){return"movementY"in e?e.movementY:e8}}),Gie=Wl(TM),yje=Li({},TM,{dataTransfer:0}),vje=Wl(yje),bje=Li({},kI,{relatedTarget:0}),t8=Wl(bje),_je=Li({},kx,{animationName:0,elapsedTime:0,pseudoElement:0}),wje=Wl(_je),Eje=Li({},kx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xje=Wl(Eje),Sje=Li({},kx,{data:0}),Yie=Wl(Sje),Tje={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cje={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Aje={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ije(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Aje[e])?!!t[e]:!1}function Uq(){return Ije}var kje=Li({},kI,{key:function(e){if(e.key){var t=Tje[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=IP(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cje[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uq,charCode:function(e){return e.type==="keypress"?IP(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?IP(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rje=Wl(kje),Nje=Li({},TM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kie=Wl(Nje),Pje=Li({},kI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uq}),Oje=Wl(Pje),Dje=Li({},kx,{propertyName:0,elapsedTime:0,pseudoElement:0}),$je=Wl(Dje),Mje=Li({},TM,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lje=Wl(Mje),Fje=[9,13,27,32],zq=bm&&"CompositionEvent"in window,HC=null;bm&&"documentMode"in document&&(HC=document.documentMode);var jje=bm&&"TextEvent"in window&&!HC,lve=bm&&(!zq||HC&&8<HC&&11>=HC),Xie=" ",Qie=!1;function cve(e,t){switch(e){case"keyup":return Fje.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fve(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Z_=!1;function Bje(e,t){switch(e){case"compositionend":return fve(t);case"keypress":return t.which!==32?null:(Qie=!0,Xie);case"textInput":return e=t.data,e===Xie&&Qie?null:e;default:return null}}function Uje(e,t){if(Z_)return e==="compositionend"||!zq&&cve(e,t)?(e=uve(),AP=jq=t0=null,Z_=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lve&&t.locale!=="ko"?null:t.data;default:return null}}var zje={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jie(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zje[e.type]:t==="textarea"}function dve(e,t,n,r){Vye(r),t=QO(t,"onChange"),0<t.length&&(n=new Bq("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qC=null,G2=null;function Vje(e){xve(e,0)}function CM(e){var t=nw(e);if(Mye(t))return e}function Hje(e,t){if(e==="change")return t}var hve=!1;if(bm){var n8;if(bm){var r8="oninput"in document;if(!r8){var Zie=document.createElement("div");Zie.setAttribute("oninput","return;"),r8=typeof Zie.oninput=="function"}n8=r8}else n8=!1;hve=n8&&(!document.documentMode||9<document.documentMode)}function ese(){qC&&(qC.detachEvent("onpropertychange",pve),G2=qC=null)}function pve(e){if(e.propertyName==="value"&&CM(G2)){var t=[];dve(t,G2,e,Dq(e)),Gye(Vje,t)}}function qje(e,t,n){e==="focusin"?(ese(),qC=t,G2=n,qC.attachEvent("onpropertychange",pve)):e==="focusout"&&ese()}function Wje(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return CM(G2)}function Gje(e,t){if(e==="click")return CM(t)}function Yje(e,t){if(e==="input"||e==="change")return CM(t)}function Kje(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kf=typeof Object.is=="function"?Object.is:Kje;function Y2(e,t){if(Kf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!UB.call(t,i)||!Kf(e[i],t[i]))return!1}return!0}function tse(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nse(e,t){var n=tse(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tse(n)}}function mve(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?mve(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gve(){for(var e=window,t=HO();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=HO(e.document)}return t}function Vq(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Xje(e){var t=gve(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&mve(n.ownerDocument.documentElement,n)){if(r!==null&&Vq(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=nse(n,s);var o=nse(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qje=bm&&"documentMode"in document&&11>=document.documentMode,ew=null,o7=null,WC=null,a7=!1;function rse(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;a7||ew==null||ew!==HO(r)||(r=ew,"selectionStart"in r&&Vq(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),WC&&Y2(WC,r)||(WC=r,r=QO(o7,"onSelect"),0<r.length&&(t=new Bq("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ew)))}function BR(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var tw={animationend:BR("Animation","AnimationEnd"),animationiteration:BR("Animation","AnimationIteration"),animationstart:BR("Animation","AnimationStart"),transitionend:BR("Transition","TransitionEnd")},i8={},yve={};bm&&(yve=document.createElement("div").style,"AnimationEvent"in window||(delete tw.animationend.animation,delete tw.animationiteration.animation,delete tw.animationstart.animation),"TransitionEvent"in window||delete tw.transitionend.transition);function AM(e){if(i8[e])return i8[e];if(!tw[e])return e;var t=tw[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in yve)return i8[e]=t[n];return e}var vve=AM("animationend"),bve=AM("animationiteration"),_ve=AM("animationstart"),wve=AM("transitionend"),Eve=new Map,ise="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cy(e,t){Eve.set(e,t),Sb(t,[e])}for(var s8=0;s8<ise.length;s8++){var o8=ise[s8],Jje=o8.toLowerCase(),Zje=o8[0].toUpperCase()+o8.slice(1);Cy(Jje,"on"+Zje)}Cy(vve,"onAnimationEnd");Cy(bve,"onAnimationIteration");Cy(_ve,"onAnimationStart");Cy("dblclick","onDoubleClick");Cy("focusin","onFocus");Cy("focusout","onBlur");Cy(wve,"onTransitionEnd");fE("onMouseEnter",["mouseout","mouseover"]);fE("onMouseLeave",["mouseout","mouseover"]);fE("onPointerEnter",["pointerout","pointerover"]);fE("onPointerLeave",["pointerout","pointerover"]);Sb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sb("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eBe=new Set("cancel close invalid load scroll toggle".split(" ").concat(eC));function sse(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,J9e(r,t,void 0,e),e.currentTarget=null}function xve(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;sse(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;sse(i,a,l),s=u}}}if(WO)throw e=n7,WO=!1,n7=null,e}function fi(e,t){var n=t[d7];n===void 0&&(n=t[d7]=new Set);var r=e+"__bubble";n.has(r)||(Sve(t,e,2,!1),n.add(r))}function a8(e,t,n){var r=0;t&&(r|=4),Sve(n,e,r,t)}var UR="_reactListening"+Math.random().toString(36).slice(2);function K2(e){if(!e[UR]){e[UR]=!0,Nye.forEach(function(n){n!=="selectionchange"&&(eBe.has(n)||a8(n,!1,e),a8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[UR]||(t[UR]=!0,a8("selectionchange",!1,t))}}function Sve(e,t,n,r){switch(ave(t)){case 1:var i=pje;break;case 4:i=mje;break;default:i=Fq}n=i.bind(null,t,n,e),i=void 0,!t7||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function u8(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Kv(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Gye(function(){var l=s,c=Dq(n),f=[];e:{var d=Eve.get(e);if(d!==void 0){var h=Bq,p=e;switch(e){case"keypress":if(IP(n)===0)break e;case"keydown":case"keyup":h=Rje;break;case"focusin":p="focus",h=t8;break;case"focusout":p="blur",h=t8;break;case"beforeblur":case"afterblur":h=t8;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Gie;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=vje;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Oje;break;case vve:case bve:case _ve:h=wje;break;case wve:h=$je;break;case"scroll":h=gje;break;case"wheel":h=Lje;break;case"copy":case"cut":case"paste":h=xje;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Kie}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,y!==null&&(_=V2(v,y),_!=null&&m.push(X2(v,_,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==ZB&&(p=n.relatedTarget||n.fromElement)&&(Kv(p)||p[_m]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Kv(p):null,p!==null&&(g=Tb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=Gie,_="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=Kie,_="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:nw(h),b=p==null?d:nw(p),d=new m(_,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,_=null,Kv(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,_=m),g=_,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=d_(b))v++;for(b=0,_=y;_;_=d_(_))b++;for(;0<v-b;)m=d_(m),v--;for(;0<b-v;)y=d_(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=d_(m),y=d_(y)}m=null}else m=null;h!==null&&ose(f,d,h,m,!1),p!==null&&g!==null&&ose(f,g,p,m,!0)}}e:{if(d=l?nw(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var x=Hje;else if(Jie(d))if(hve)x=Yje;else{x=Wje;var S=qje}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=Gje);if(x&&(x=x(e,l))){dve(f,x,n,c);break e}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&YB(d,"number",d.value)}switch(S=l?nw(l):window,e){case"focusin":(Jie(S)||S.contentEditable==="true")&&(ew=S,o7=l,WC=null);break;case"focusout":WC=o7=ew=null;break;case"mousedown":a7=!0;break;case"contextmenu":case"mouseup":case"dragend":a7=!1,rse(f,n,c);break;case"selectionchange":if(Qje)break;case"keydown":case"keyup":rse(f,n,c)}var E;if(zq)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Z_?cve(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(lve&&n.locale!=="ko"&&(Z_||T!=="onCompositionStart"?T==="onCompositionEnd"&&Z_&&(E=uve()):(t0=c,jq="value"in t0?t0.value:t0.textContent,Z_=!0)),S=QO(l,T),0<S.length&&(T=new Yie(T,e,null,n,c),f.push({event:T,listeners:S}),E?T.data=E:(E=fve(n),E!==null&&(T.data=E)))),(E=jje?Bje(e,n):Uje(e,n))&&(l=QO(l,"onBeforeInput"),0<l.length&&(c=new Yie("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=E))}xve(f,t)})}function X2(e,t,n){return{instance:e,listener:t,currentTarget:n}}function QO(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=V2(e,n),s!=null&&r.unshift(X2(e,s,i)),s=V2(e,t),s!=null&&r.push(X2(e,s,i))),e=e.return}return r}function d_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ose(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=V2(n,s),u!=null&&o.unshift(X2(n,u,a))):i||(u=V2(n,s),u!=null&&o.push(X2(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var tBe=/\r\n?/g,nBe=/\u0000|\uFFFD/g;function ase(e){return(typeof e=="string"?e:""+e).replace(tBe,`
`).replace(nBe,"")}function zR(e,t,n){if(t=ase(t),ase(e)!==t&&n)throw Error(et(425))}function JO(){}var u7=null,l7=null;function c7(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var f7=typeof setTimeout=="function"?setTimeout:void 0,rBe=typeof clearTimeout=="function"?clearTimeout:void 0,use=typeof Promise=="function"?Promise:void 0,iBe=typeof queueMicrotask=="function"?queueMicrotask:typeof use<"u"?function(e){return use.resolve(null).then(e).catch(sBe)}:f7;function sBe(e){setTimeout(function(){throw e})}function l8(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),W2(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);W2(t)}function b0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function lse(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Rx=Math.random().toString(36).slice(2),Hd="__reactFiber$"+Rx,Q2="__reactProps$"+Rx,_m="__reactContainer$"+Rx,d7="__reactEvents$"+Rx,oBe="__reactListeners$"+Rx,aBe="__reactHandles$"+Rx;function Kv(e){var t=e[Hd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_m]||n[Hd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=lse(e);e!==null;){if(n=e[Hd])return n;e=lse(e)}return t}e=n,n=e.parentNode}return null}function RI(e){return e=e[Hd]||e[_m],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nw(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function IM(e){return e[Q2]||null}var h7=[],rw=-1;function Ay(e){return{current:e}}function yi(e){0>rw||(e.current=h7[rw],h7[rw]=null,rw--)}function si(e,t){rw++,h7[rw]=e.current,e.current=t}var z0={},xa=Ay(z0),Lu=Ay(!1),O1=z0;function dE(e,t){var n=e.type.contextTypes;if(!n)return z0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Fu(e){return e=e.childContextTypes,e!=null}function ZO(){yi(Lu),yi(xa)}function cse(e,t,n){if(xa.current!==z0)throw Error(et(168));si(xa,t),si(Lu,n)}function Tve(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(et(108,q9e(e)||"Unknown",i));return Li({},n,r)}function eD(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||z0,O1=xa.current,si(xa,e),si(Lu,Lu.current),!0}function fse(e,t,n){var r=e.stateNode;if(!r)throw Error(et(169));n?(e=Tve(e,t,O1),r.__reactInternalMemoizedMergedChildContext=e,yi(Lu),yi(xa),si(xa,e)):yi(Lu),si(Lu,n)}var Fp=null,kM=!1,c8=!1;function Cve(e){Fp===null?Fp=[e]:Fp.push(e)}function uBe(e){kM=!0,Cve(e)}function Iy(){if(!c8&&Fp!==null){c8=!0;var e=0,t=Or;try{var n=Fp;for(Or=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Fp=null,kM=!1}catch(i){throw Fp!==null&&(Fp=Fp.slice(e+1)),Qye($q,Iy),i}finally{Or=t,c8=!1}}return null}var iw=[],sw=0,tD=null,nD=0,uc=[],lc=0,D1=null,Kp=1,Xp="";function Ev(e,t){iw[sw++]=nD,iw[sw++]=tD,tD=e,nD=t}function Ave(e,t,n){uc[lc++]=Kp,uc[lc++]=Xp,uc[lc++]=D1,D1=e;var r=Kp;e=Xp;var i=32-Ff(r)-1;r&=~(1<<i),n+=1;var s=32-Ff(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Kp=1<<32-Ff(t)+i|n<<i|r,Xp=s+e}else Kp=1<<s|n<<i|r,Xp=e}function Hq(e){e.return!==null&&(Ev(e,1),Ave(e,1,0))}function qq(e){for(;e===tD;)tD=iw[--sw],iw[sw]=null,nD=iw[--sw],iw[sw]=null;for(;e===D1;)D1=uc[--lc],uc[lc]=null,Xp=uc[--lc],uc[lc]=null,Kp=uc[--lc],uc[lc]=null}var Il=null,wl=null,Si=!1,xf=null;function Ive(e,t){var n=gc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function dse(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Il=e,wl=b0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Il=e,wl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=D1!==null?{id:Kp,overflow:Xp}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=gc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Il=e,wl=null,!0):!1;default:return!1}}function p7(e){return(e.mode&1)!==0&&(e.flags&128)===0}function m7(e){if(Si){var t=wl;if(t){var n=t;if(!dse(e,t)){if(p7(e))throw Error(et(418));t=b0(n.nextSibling);var r=Il;t&&dse(e,t)?Ive(r,n):(e.flags=e.flags&-4097|2,Si=!1,Il=e)}}else{if(p7(e))throw Error(et(418));e.flags=e.flags&-4097|2,Si=!1,Il=e}}}function hse(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Il=e}function VR(e){if(e!==Il)return!1;if(!Si)return hse(e),Si=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!c7(e.type,e.memoizedProps)),t&&(t=wl)){if(p7(e))throw kve(),Error(et(418));for(;t;)Ive(e,t),t=b0(t.nextSibling)}if(hse(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){wl=b0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}wl=null}}else wl=Il?b0(e.stateNode.nextSibling):null;return!0}function kve(){for(var e=wl;e;)e=b0(e.nextSibling)}function hE(){wl=Il=null,Si=!1}function Wq(e){xf===null?xf=[e]:xf.push(e)}var lBe=Gm.ReactCurrentBatchConfig;function rT(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(et(309));var r=n.stateNode}if(!r)throw Error(et(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(et(284));if(!n._owner)throw Error(et(290,e))}return e}function HR(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pse(e){var t=e._init;return t(e._payload)}function Rve(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=x0(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,_){return v===null||v.tag!==6?(v=y8(b,y.mode,_),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,_){var x=b.type;return x===J_?c(y,v,b.props.children,_,b.key):v!==null&&(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===$g&&pse(x)===v.type)?(_=i(v,b.props),_.ref=rT(y,v,b),_.return=y,_):(_=$P(b.type,b.key,b.props,null,y.mode,_),_.ref=rT(y,v,b),_.return=y,_)}function l(y,v,b,_){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=v8(b,y.mode,_),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,_,x){return v===null||v.tag!==7?(v=y1(b,y.mode,_,x),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=y8(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case OR:return b=$P(v.type,v.key,v.props,null,y.mode,b),b.ref=rT(y,null,v),b.return=y,b;case Q_:return v=v8(v,y.mode,b),v.return=y,v;case $g:var _=v._init;return f(y,_(v._payload),b)}if(JT(v)||JS(v))return v=y1(v,y.mode,b,null),v.return=y,v;HR(y,v)}return null}function d(y,v,b,_){var x=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return x!==null?null:a(y,v,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case OR:return b.key===x?u(y,v,b,_):null;case Q_:return b.key===x?l(y,v,b,_):null;case $g:return x=b._init,d(y,v,x(b._payload),_)}if(JT(b)||JS(b))return x!==null?null:c(y,v,b,_,null);HR(y,b)}return null}function h(y,v,b,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(b)||null,a(v,y,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case OR:return y=y.get(_.key===null?b:_.key)||null,u(v,y,_,x);case Q_:return y=y.get(_.key===null?b:_.key)||null,l(v,y,_,x);case $g:var S=_._init;return h(y,v,b,S(_._payload),x)}if(JT(_)||JS(_))return y=y.get(b)||null,c(v,y,_,x,null);HR(v,_)}return null}function p(y,v,b,_){for(var x=null,S=null,E=v,T=v=0,A=null;E!==null&&T<b.length;T++){E.index>T?(A=E,E=null):A=E.sibling;var k=d(y,E,b[T],_);if(k===null){E===null&&(E=A);break}e&&E&&k.alternate===null&&t(y,E),v=s(k,v,T),S===null?x=k:S.sibling=k,S=k,E=A}if(T===b.length)return n(y,E),Si&&Ev(y,T),x;if(E===null){for(;T<b.length;T++)E=f(y,b[T],_),E!==null&&(v=s(E,v,T),S===null?x=E:S.sibling=E,S=E);return Si&&Ev(y,T),x}for(E=r(y,E);T<b.length;T++)A=h(E,y,T,b[T],_),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?T:A.key),v=s(A,v,T),S===null?x=A:S.sibling=A,S=A);return e&&E.forEach(function(R){return t(y,R)}),Si&&Ev(y,T),x}function m(y,v,b,_){var x=JS(b);if(typeof x!="function")throw Error(et(150));if(b=x.call(b),b==null)throw Error(et(151));for(var S=x=null,E=v,T=v=0,A=null,k=b.next();E!==null&&!k.done;T++,k=b.next()){E.index>T?(A=E,E=null):A=E.sibling;var R=d(y,E,k.value,_);if(R===null){E===null&&(E=A);break}e&&E&&R.alternate===null&&t(y,E),v=s(R,v,T),S===null?x=R:S.sibling=R,S=R,E=A}if(k.done)return n(y,E),Si&&Ev(y,T),x;if(E===null){for(;!k.done;T++,k=b.next())k=f(y,k.value,_),k!==null&&(v=s(k,v,T),S===null?x=k:S.sibling=k,S=k);return Si&&Ev(y,T),x}for(E=r(y,E);!k.done;T++,k=b.next())k=h(E,y,T,k.value,_),k!==null&&(e&&k.alternate!==null&&E.delete(k.key===null?T:k.key),v=s(k,v,T),S===null?x=k:S.sibling=k,S=k);return e&&E.forEach(function($){return t(y,$)}),Si&&Ev(y,T),x}function g(y,v,b,_){if(typeof b=="object"&&b!==null&&b.type===J_&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case OR:e:{for(var x=b.key,S=v;S!==null;){if(S.key===x){if(x=b.type,x===J_){if(S.tag===7){n(y,S.sibling),v=i(S,b.props.children),v.return=y,y=v;break e}}else if(S.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===$g&&pse(x)===S.type){n(y,S.sibling),v=i(S,b.props),v.ref=rT(y,S,b),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}b.type===J_?(v=y1(b.props.children,y.mode,_,b.key),v.return=y,y=v):(_=$P(b.type,b.key,b.props,null,y.mode,_),_.ref=rT(y,v,b),_.return=y,y=_)}return o(y);case Q_:e:{for(S=b.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=v8(b,y.mode,_),v.return=y,y=v}return o(y);case $g:return S=b._init,g(y,v,S(b._payload),_)}if(JT(b))return p(y,v,b,_);if(JS(b))return m(y,v,b,_);HR(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=y8(b,y.mode,_),v.return=y,y=v),o(y)):n(y,v)}return g}var pE=Rve(!0),Nve=Rve(!1),rD=Ay(null),iD=null,ow=null,Gq=null;function Yq(){Gq=ow=iD=null}function Kq(e){var t=rD.current;yi(rD),e._currentValue=t}function g7(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Iw(e,t){iD=e,Gq=ow=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nu=!0),e.firstContext=null)}function Rc(e){var t=e._currentValue;if(Gq!==e)if(e={context:e,memoizedValue:t,next:null},ow===null){if(iD===null)throw Error(et(308));ow=e,iD.dependencies={lanes:0,firstContext:e}}else ow=ow.next=e;return t}var Xv=null;function Xq(e){Xv===null?Xv=[e]:Xv.push(e)}function Pve(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Xq(t)):(n.next=i.next,i.next=n),t.interleaved=n,wm(e,r)}function wm(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mg=!1;function Qq(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ove(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function am(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,or&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,wm(e,n)}return i=r.interleaved,i===null?(t.next=t,Xq(r)):(t.next=i.next,i.next=t),r.interleaved=t,wm(e,n)}function kP(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Mq(e,n)}}function mse(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sD(e,t,n,r){var i=e.updateQueue;Mg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Li({},f,d);break e;case 2:Mg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);M1|=o,e.lanes=o,e.memoizedState=f}}function gse(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(et(191,i));i.call(r)}}}var NI={},dh=Ay(NI),J2=Ay(NI),Z2=Ay(NI);function Qv(e){if(e===NI)throw Error(et(174));return e}function Jq(e,t){switch(si(Z2,t),si(J2,e),si(dh,NI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:XB(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=XB(t,e)}yi(dh),si(dh,t)}function mE(){yi(dh),yi(J2),yi(Z2)}function Dve(e){Qv(Z2.current);var t=Qv(dh.current),n=XB(t,e.type);t!==n&&(si(J2,e),si(dh,n))}function Zq(e){J2.current===e&&(yi(dh),yi(J2))}var Pi=Ay(0);function oD(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var f8=[];function eW(){for(var e=0;e<f8.length;e++)f8[e]._workInProgressVersionPrimary=null;f8.length=0}var RP=Gm.ReactCurrentDispatcher,d8=Gm.ReactCurrentBatchConfig,$1=0,Di=null,Cs=null,Ks=null,aD=!1,GC=!1,eA=0,cBe=0;function Jo(){throw Error(et(321))}function tW(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kf(e[n],t[n]))return!1;return!0}function nW(e,t,n,r,i,s){if($1=s,Di=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,RP.current=e===null||e.memoizedState===null?pBe:mBe,e=n(r,i),GC){s=0;do{if(GC=!1,eA=0,25<=s)throw Error(et(301));s+=1,Ks=Cs=null,t.updateQueue=null,RP.current=gBe,e=n(r,i)}while(GC)}if(RP.current=uD,t=Cs!==null&&Cs.next!==null,$1=0,Ks=Cs=Di=null,aD=!1,t)throw Error(et(300));return e}function rW(){var e=eA!==0;return eA=0,e}function Pd(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ks===null?Di.memoizedState=Ks=e:Ks=Ks.next=e,Ks}function Nc(){if(Cs===null){var e=Di.alternate;e=e!==null?e.memoizedState:null}else e=Cs.next;var t=Ks===null?Di.memoizedState:Ks.next;if(t!==null)Ks=t,Cs=e;else{if(e===null)throw Error(et(310));Cs=e,e={memoizedState:Cs.memoizedState,baseState:Cs.baseState,baseQueue:Cs.baseQueue,queue:Cs.queue,next:null},Ks===null?Di.memoizedState=Ks=e:Ks=Ks.next=e}return Ks}function tA(e,t){return typeof t=="function"?t(e):t}function h8(e){var t=Nc(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=Cs,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if(($1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Di.lanes|=c,M1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Kf(r,t.memoizedState)||(Nu=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Di.lanes|=s,M1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function p8(e){var t=Nc(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Kf(s,t.memoizedState)||(Nu=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function $ve(){}function Mve(e,t){var n=Di,r=Nc(),i=t(),s=!Kf(r.memoizedState,i);if(s&&(r.memoizedState=i,Nu=!0),r=r.queue,iW(jve.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ks!==null&&Ks.memoizedState.tag&1){if(n.flags|=2048,nA(9,Fve.bind(null,n,r,i,t),void 0,null),so===null)throw Error(et(349));$1&30||Lve(n,t,i)}return i}function Lve(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Di.updateQueue,t===null?(t={lastEffect:null,stores:null},Di.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Fve(e,t,n,r){t.value=n,t.getSnapshot=r,Bve(t)&&Uve(e)}function jve(e,t,n){return n(function(){Bve(t)&&Uve(e)})}function Bve(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kf(e,n)}catch{return!0}}function Uve(e){var t=wm(e,1);t!==null&&jf(t,e,1,-1)}function yse(e){var t=Pd();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tA,lastRenderedState:e},t.queue=e,e=e.dispatch=hBe.bind(null,Di,e),[t.memoizedState,e]}function nA(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Di.updateQueue,t===null?(t={lastEffect:null,stores:null},Di.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function zve(){return Nc().memoizedState}function NP(e,t,n,r){var i=Pd();Di.flags|=e,i.memoizedState=nA(1|t,n,void 0,r===void 0?null:r)}function RM(e,t,n,r){var i=Nc();r=r===void 0?null:r;var s=void 0;if(Cs!==null){var o=Cs.memoizedState;if(s=o.destroy,r!==null&&tW(r,o.deps)){i.memoizedState=nA(t,n,s,r);return}}Di.flags|=e,i.memoizedState=nA(1|t,n,s,r)}function vse(e,t){return NP(8390656,8,e,t)}function iW(e,t){return RM(2048,8,e,t)}function Vve(e,t){return RM(4,2,e,t)}function Hve(e,t){return RM(4,4,e,t)}function qve(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wve(e,t,n){return n=n!=null?n.concat([e]):null,RM(4,4,qve.bind(null,t,e),n)}function sW(){}function Gve(e,t){var n=Nc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tW(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yve(e,t){var n=Nc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tW(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Kve(e,t,n){return $1&21?(Kf(n,t)||(n=eve(),Di.lanes|=n,M1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nu=!0),e.memoizedState=n)}function fBe(e,t){var n=Or;Or=n!==0&&4>n?n:4,e(!0);var r=d8.transition;d8.transition={};try{e(!1),t()}finally{Or=n,d8.transition=r}}function Xve(){return Nc().memoizedState}function dBe(e,t,n){var r=E0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qve(e))Jve(t,n);else if(n=Pve(e,t,n,r),n!==null){var i=Ga();jf(n,e,r,i),Zve(n,t,r)}}function hBe(e,t,n){var r=E0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qve(e))Jve(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Kf(a,o)){var u=t.interleaved;u===null?(i.next=i,Xq(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=Pve(e,t,i,r),n!==null&&(i=Ga(),jf(n,e,r,i),Zve(n,t,r))}}function Qve(e){var t=e.alternate;return e===Di||t!==null&&t===Di}function Jve(e,t){GC=aD=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zve(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Mq(e,n)}}var uD={readContext:Rc,useCallback:Jo,useContext:Jo,useEffect:Jo,useImperativeHandle:Jo,useInsertionEffect:Jo,useLayoutEffect:Jo,useMemo:Jo,useReducer:Jo,useRef:Jo,useState:Jo,useDebugValue:Jo,useDeferredValue:Jo,useTransition:Jo,useMutableSource:Jo,useSyncExternalStore:Jo,useId:Jo,unstable_isNewReconciler:!1},pBe={readContext:Rc,useCallback:function(e,t){return Pd().memoizedState=[e,t===void 0?null:t],e},useContext:Rc,useEffect:vse,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,NP(4194308,4,qve.bind(null,t,e),n)},useLayoutEffect:function(e,t){return NP(4194308,4,e,t)},useInsertionEffect:function(e,t){return NP(4,2,e,t)},useMemo:function(e,t){var n=Pd();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Pd();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=dBe.bind(null,Di,e),[r.memoizedState,e]},useRef:function(e){var t=Pd();return e={current:e},t.memoizedState=e},useState:yse,useDebugValue:sW,useDeferredValue:function(e){return Pd().memoizedState=e},useTransition:function(){var e=yse(!1),t=e[0];return e=fBe.bind(null,e[1]),Pd().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Di,i=Pd();if(Si){if(n===void 0)throw Error(et(407));n=n()}else{if(n=t(),so===null)throw Error(et(349));$1&30||Lve(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,vse(jve.bind(null,r,s,e),[e]),r.flags|=2048,nA(9,Fve.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Pd(),t=so.identifierPrefix;if(Si){var n=Xp,r=Kp;n=(r&~(1<<32-Ff(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=eA++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=cBe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mBe={readContext:Rc,useCallback:Gve,useContext:Rc,useEffect:iW,useImperativeHandle:Wve,useInsertionEffect:Vve,useLayoutEffect:Hve,useMemo:Yve,useReducer:h8,useRef:zve,useState:function(){return h8(tA)},useDebugValue:sW,useDeferredValue:function(e){var t=Nc();return Kve(t,Cs.memoizedState,e)},useTransition:function(){var e=h8(tA)[0],t=Nc().memoizedState;return[e,t]},useMutableSource:$ve,useSyncExternalStore:Mve,useId:Xve,unstable_isNewReconciler:!1},gBe={readContext:Rc,useCallback:Gve,useContext:Rc,useEffect:iW,useImperativeHandle:Wve,useInsertionEffect:Vve,useLayoutEffect:Hve,useMemo:Yve,useReducer:p8,useRef:zve,useState:function(){return p8(tA)},useDebugValue:sW,useDeferredValue:function(e){var t=Nc();return Cs===null?t.memoizedState=e:Kve(t,Cs.memoizedState,e)},useTransition:function(){var e=p8(tA)[0],t=Nc().memoizedState;return[e,t]},useMutableSource:$ve,useSyncExternalStore:Mve,useId:Xve,unstable_isNewReconciler:!1};function yf(e,t){if(e&&e.defaultProps){t=Li({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function y7(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Li({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var NM={isMounted:function(e){return(e=e._reactInternals)?Tb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ga(),i=E0(e),s=am(r,i);s.payload=t,n!=null&&(s.callback=n),t=_0(e,s,i),t!==null&&(jf(t,e,i,r),kP(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ga(),i=E0(e),s=am(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=_0(e,s,i),t!==null&&(jf(t,e,i,r),kP(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ga(),r=E0(e),i=am(n,r);i.tag=2,t!=null&&(i.callback=t),t=_0(e,i,r),t!==null&&(jf(t,e,r,n),kP(t,e,r))}};function bse(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Y2(n,r)||!Y2(i,s):!0}function e1e(e,t,n){var r=!1,i=z0,s=t.contextType;return typeof s=="object"&&s!==null?s=Rc(s):(i=Fu(t)?O1:xa.current,r=t.contextTypes,s=(r=r!=null)?dE(e,i):z0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=NM,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function _se(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&NM.enqueueReplaceState(t,t.state,null)}function v7(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Qq(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Rc(s):(s=Fu(t)?O1:xa.current,i.context=dE(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(y7(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&NM.enqueueReplaceState(i,i.state,null),sD(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function gE(e,t){try{var n="",r=t;do n+=H9e(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function m8(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function b7(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var yBe=typeof WeakMap=="function"?WeakMap:Map;function t1e(e,t,n){n=am(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){cD||(cD=!0,k7=r),b7(e,t)},n}function n1e(e,t,n){n=am(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){b7(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){b7(e,t),typeof r!="function"&&(w0===null?w0=new Set([this]):w0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function wse(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new yBe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=NBe.bind(null,e,t,n),t.then(e,e))}function Ese(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function xse(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=am(-1,1),t.tag=2,_0(n,t,1))),n.lanes|=1),e)}var vBe=Gm.ReactCurrentOwner,Nu=!1;function Fa(e,t,n,r){t.child=e===null?Nve(t,null,n,r):pE(t,e.child,n,r)}function Sse(e,t,n,r,i){n=n.render;var s=t.ref;return Iw(t,i),r=nW(e,t,n,r,s,i),n=rW(),e!==null&&!Nu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Em(e,t,i)):(Si&&n&&Hq(t),t.flags|=1,Fa(e,t,r,i),t.child)}function Tse(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!hW(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,r1e(e,t,s,r,i)):(e=$P(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Y2,n(o,r)&&e.ref===t.ref)return Em(e,t,i)}return t.flags|=1,e=x0(s,r),e.ref=t.ref,e.return=t,t.child=e}function r1e(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Y2(s,r)&&e.ref===t.ref)if(Nu=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Nu=!0);else return t.lanes=e.lanes,Em(e,t,i)}return _7(e,t,n,r,i)}function i1e(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},si(uw,hl),hl|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,si(uw,hl),hl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,si(uw,hl),hl|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,si(uw,hl),hl|=r;return Fa(e,t,i,n),t.child}function s1e(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _7(e,t,n,r,i){var s=Fu(n)?O1:xa.current;return s=dE(t,s),Iw(t,i),n=nW(e,t,n,r,s,i),r=rW(),e!==null&&!Nu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Em(e,t,i)):(Si&&r&&Hq(t),t.flags|=1,Fa(e,t,n,i),t.child)}function Cse(e,t,n,r,i){if(Fu(n)){var s=!0;eD(t)}else s=!1;if(Iw(t,i),t.stateNode===null)PP(e,t),e1e(t,n,r),v7(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Rc(l):(l=Fu(n)?O1:xa.current,l=dE(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&_se(t,o,r,l),Mg=!1;var d=t.memoizedState;o.state=d,sD(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Lu.current||Mg?(typeof c=="function"&&(y7(t,n,c,r),u=t.memoizedState),(a=Mg||bse(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ove(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:yf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Rc(u):(u=Fu(n)?O1:xa.current,u=dE(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&_se(t,o,r,u),Mg=!1,d=t.memoizedState,o.state=d,sD(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Lu.current||Mg?(typeof h=="function"&&(y7(t,n,h,r),p=t.memoizedState),(l=Mg||bse(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return w7(e,t,n,r,s,i)}function w7(e,t,n,r,i,s){s1e(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&fse(t,n,!1),Em(e,t,s);r=t.stateNode,vBe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=pE(t,e.child,null,s),t.child=pE(t,null,a,s)):Fa(e,t,a,s),t.memoizedState=r.state,i&&fse(t,n,!0),t.child}function o1e(e){var t=e.stateNode;t.pendingContext?cse(e,t.pendingContext,t.pendingContext!==t.context):t.context&&cse(e,t.context,!1),Jq(e,t.containerInfo)}function Ase(e,t,n,r,i){return hE(),Wq(i),t.flags|=256,Fa(e,t,n,r),t.child}var E7={dehydrated:null,treeContext:null,retryLane:0};function x7(e){return{baseLanes:e,cachePool:null,transitions:null}}function a1e(e,t,n){var r=t.pendingProps,i=Pi.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),si(Pi,i&1),e===null)return m7(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=DM(o,r,0,null),e=y1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=x7(n),t.memoizedState=E7,e):oW(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return bBe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=x0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=x0(a,s):(s=y1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?x7(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=E7,r}return s=e.child,e=s.sibling,r=x0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function oW(e,t){return t=DM({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function qR(e,t,n,r){return r!==null&&Wq(r),pE(t,e.child,null,n),e=oW(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function bBe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=m8(Error(et(422))),qR(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=DM({mode:"visible",children:r.children},i,0,null),s=y1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&pE(t,e.child,null,o),t.child.memoizedState=x7(o),t.memoizedState=E7,s);if(!(t.mode&1))return qR(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(et(419)),r=m8(s,r,void 0),qR(e,t,o,r)}if(a=(o&e.childLanes)!==0,Nu||a){if(r=so,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,wm(e,i),jf(r,e,i,-1))}return dW(),r=m8(Error(et(421))),qR(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=PBe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,wl=b0(i.nextSibling),Il=t,Si=!0,xf=null,e!==null&&(uc[lc++]=Kp,uc[lc++]=Xp,uc[lc++]=D1,Kp=e.id,Xp=e.overflow,D1=t),t=oW(t,r.children),t.flags|=4096,t)}function Ise(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),g7(e.return,t,n)}function g8(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function u1e(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Fa(e,t,r.children,n),r=Pi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ise(e,n,t);else if(e.tag===19)Ise(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(si(Pi,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&oD(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),g8(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&oD(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}g8(t,!0,n,null,s);break;case"together":g8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function PP(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Em(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),M1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,n=x0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=x0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _Be(e,t,n){switch(t.tag){case 3:o1e(t),hE();break;case 5:Dve(t);break;case 1:Fu(t.type)&&eD(t);break;case 4:Jq(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;si(rD,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(si(Pi,Pi.current&1),t.flags|=128,null):n&t.child.childLanes?a1e(e,t,n):(si(Pi,Pi.current&1),e=Em(e,t,n),e!==null?e.sibling:null);si(Pi,Pi.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return u1e(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),si(Pi,Pi.current),r)break;return null;case 22:case 23:return t.lanes=0,i1e(e,t,n)}return Em(e,t,n)}var l1e,S7,c1e,f1e;l1e=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};S7=function(){};c1e=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qv(dh.current);var s=null;switch(n){case"input":i=WB(e,i),r=WB(e,r),s=[];break;case"select":i=Li({},i,{value:void 0}),r=Li({},r,{value:void 0}),s=[];break;case"textarea":i=KB(e,i),r=KB(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=JO)}QB(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(U2.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(U2.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&fi("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};f1e=function(e,t,n,r){n!==r&&(t.flags|=4)};function iT(e,t){if(!Si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function wBe(e,t,n){var r=t.pendingProps;switch(qq(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zo(t),null;case 1:return Fu(t.type)&&ZO(),Zo(t),null;case 3:return r=t.stateNode,mE(),yi(Lu),yi(xa),eW(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(VR(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,xf!==null&&(P7(xf),xf=null))),S7(e,t),Zo(t),null;case 5:Zq(t);var i=Qv(Z2.current);if(n=t.type,e!==null&&t.stateNode!=null)c1e(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(et(166));return Zo(t),null}if(e=Qv(dh.current),VR(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Hd]=t,r[Q2]=s,e=(t.mode&1)!==0,n){case"dialog":fi("cancel",r),fi("close",r);break;case"iframe":case"object":case"embed":fi("load",r);break;case"video":case"audio":for(i=0;i<eC.length;i++)fi(eC[i],r);break;case"source":fi("error",r);break;case"img":case"image":case"link":fi("error",r),fi("load",r);break;case"details":fi("toggle",r);break;case"input":Lie(r,s),fi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},fi("invalid",r);break;case"textarea":jie(r,s),fi("invalid",r)}QB(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&zR(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&zR(r.textContent,a,e),i=["children",""+a]):U2.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&fi("scroll",r)}switch(n){case"input":DR(r),Fie(r,s,!0);break;case"textarea":DR(r),Bie(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=JO)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jye(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Hd]=t,e[Q2]=r,l1e(e,t,!1,!1),t.stateNode=e;e:{switch(o=JB(n,r),n){case"dialog":fi("cancel",e),fi("close",e),i=r;break;case"iframe":case"object":case"embed":fi("load",e),i=r;break;case"video":case"audio":for(i=0;i<eC.length;i++)fi(eC[i],e);i=r;break;case"source":fi("error",e),i=r;break;case"img":case"image":case"link":fi("error",e),fi("load",e),i=r;break;case"details":fi("toggle",e),i=r;break;case"input":Lie(e,r),i=WB(e,r),fi("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Li({},r,{value:void 0}),fi("invalid",e);break;case"textarea":jie(e,r),i=KB(e,r),fi("invalid",e);break;default:i=r}QB(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?zye(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Bye(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&z2(e,u):typeof u=="number"&&z2(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(U2.hasOwnProperty(s)?u!=null&&s==="onScroll"&&fi("scroll",e):u!=null&&Rq(e,s,u,o))}switch(n){case"input":DR(e),Fie(e,r,!1);break;case"textarea":DR(e),Bie(e);break;case"option":r.value!=null&&e.setAttribute("value",""+U0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Sw(e,!!r.multiple,s,!1):r.defaultValue!=null&&Sw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=JO)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zo(t),null;case 6:if(e&&t.stateNode!=null)f1e(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(et(166));if(n=Qv(Z2.current),Qv(dh.current),VR(t)){if(r=t.stateNode,n=t.memoizedProps,r[Hd]=t,(s=r.nodeValue!==n)&&(e=Il,e!==null))switch(e.tag){case 3:zR(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zR(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hd]=t,t.stateNode=r}return Zo(t),null;case 13:if(yi(Pi),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Si&&wl!==null&&t.mode&1&&!(t.flags&128))kve(),hE(),t.flags|=98560,s=!1;else if(s=VR(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(et(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(et(317));s[Hd]=t}else hE(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zo(t),s=!1}else xf!==null&&(P7(xf),xf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Pi.current&1?Ps===0&&(Ps=3):dW())),t.updateQueue!==null&&(t.flags|=4),Zo(t),null);case 4:return mE(),S7(e,t),e===null&&K2(t.stateNode.containerInfo),Zo(t),null;case 10:return Kq(t.type._context),Zo(t),null;case 17:return Fu(t.type)&&ZO(),Zo(t),null;case 19:if(yi(Pi),s=t.memoizedState,s===null)return Zo(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)iT(s,!1);else{if(Ps!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=oD(e),o!==null){for(t.flags|=128,iT(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return si(Pi,Pi.current&1|2),t.child}e=e.sibling}s.tail!==null&&us()>yE&&(t.flags|=128,r=!0,iT(s,!1),t.lanes=4194304)}else{if(!r)if(e=oD(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),iT(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Si)return Zo(t),null}else 2*us()-s.renderingStartTime>yE&&n!==1073741824&&(t.flags|=128,r=!0,iT(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=us(),t.sibling=null,n=Pi.current,si(Pi,r?n&1|2:n&1),t):(Zo(t),null);case 22:case 23:return fW(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?hl&1073741824&&(Zo(t),t.subtreeFlags&6&&(t.flags|=8192)):Zo(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function EBe(e,t){switch(qq(t),t.tag){case 1:return Fu(t.type)&&ZO(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mE(),yi(Lu),yi(xa),eW(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zq(t),null;case 13:if(yi(Pi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));hE()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yi(Pi),null;case 4:return mE(),null;case 10:return Kq(t.type._context),null;case 22:case 23:return fW(),null;case 24:return null;default:return null}}var WR=!1,fa=!1,xBe=typeof WeakSet=="function"?WeakSet:Set,Et=null;function aw(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Wi(e,t,r)}else n.current=null}function T7(e,t,n){try{n()}catch(r){Wi(e,t,r)}}var kse=!1;function SBe(e,t){if(u7=KO,e=gve(),Vq(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(l7={focusedElem:e,selectionRange:n},KO=!1,Et=t;Et!==null;)if(t=Et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Et=e;else for(;Et!==null;){t=Et;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:yf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(_){Wi(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Et=e;break}Et=t.return}return p=kse,kse=!1,p}function YC(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&T7(t,n,s)}i=i.next}while(i!==r)}}function PM(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function C7(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function d1e(e){var t=e.alternate;t!==null&&(e.alternate=null,d1e(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Hd],delete t[Q2],delete t[d7],delete t[oBe],delete t[aBe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function h1e(e){return e.tag===5||e.tag===3||e.tag===4}function Rse(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||h1e(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function A7(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=JO));else if(r!==4&&(e=e.child,e!==null))for(A7(e,t,n),e=e.sibling;e!==null;)A7(e,t,n),e=e.sibling}function I7(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(I7(e,t,n),e=e.sibling;e!==null;)I7(e,t,n),e=e.sibling}var wo=null,bf=!1;function vg(e,t,n){for(n=n.child;n!==null;)p1e(e,t,n),n=n.sibling}function p1e(e,t,n){if(fh&&typeof fh.onCommitFiberUnmount=="function")try{fh.onCommitFiberUnmount(SM,n)}catch{}switch(n.tag){case 5:fa||aw(n,t);case 6:var r=wo,i=bf;wo=null,vg(e,t,n),wo=r,bf=i,wo!==null&&(bf?(e=wo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):wo.removeChild(n.stateNode));break;case 18:wo!==null&&(bf?(e=wo,n=n.stateNode,e.nodeType===8?l8(e.parentNode,n):e.nodeType===1&&l8(e,n),W2(e)):l8(wo,n.stateNode));break;case 4:r=wo,i=bf,wo=n.stateNode.containerInfo,bf=!0,vg(e,t,n),wo=r,bf=i;break;case 0:case 11:case 14:case 15:if(!fa&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&T7(n,t,o),i=i.next}while(i!==r)}vg(e,t,n);break;case 1:if(!fa&&(aw(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Wi(n,t,a)}vg(e,t,n);break;case 21:vg(e,t,n);break;case 22:n.mode&1?(fa=(r=fa)||n.memoizedState!==null,vg(e,t,n),fa=r):vg(e,t,n);break;default:vg(e,t,n)}}function Nse(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new xBe),t.forEach(function(r){var i=OBe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function uf(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:wo=a.stateNode,bf=!1;break e;case 3:wo=a.stateNode.containerInfo,bf=!0;break e;case 4:wo=a.stateNode.containerInfo,bf=!0;break e}a=a.return}if(wo===null)throw Error(et(160));p1e(s,o,i),wo=null,bf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Wi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)m1e(t,e),t=t.sibling}function m1e(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(uf(t,e),xd(e),r&4){try{YC(3,e,e.return),PM(3,e)}catch(m){Wi(e,e.return,m)}try{YC(5,e,e.return)}catch(m){Wi(e,e.return,m)}}break;case 1:uf(t,e),xd(e),r&512&&n!==null&&aw(n,n.return);break;case 5:if(uf(t,e),xd(e),r&512&&n!==null&&aw(n,n.return),e.flags&32){var i=e.stateNode;try{z2(i,"")}catch(m){Wi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Lye(i,s),JB(a,o);var l=JB(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?zye(i,f):c==="dangerouslySetInnerHTML"?Bye(i,f):c==="children"?z2(i,f):Rq(i,c,f,l)}switch(a){case"input":GB(i,s);break;case"textarea":Fye(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Sw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Sw(i,!!s.multiple,s.defaultValue,!0):Sw(i,!!s.multiple,s.multiple?[]:"",!1))}i[Q2]=s}catch(m){Wi(e,e.return,m)}}break;case 6:if(uf(t,e),xd(e),r&4){if(e.stateNode===null)throw Error(et(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Wi(e,e.return,m)}}break;case 3:if(uf(t,e),xd(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{W2(t.containerInfo)}catch(m){Wi(e,e.return,m)}break;case 4:uf(t,e),xd(e);break;case 13:uf(t,e),xd(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(lW=us())),r&4&&Nse(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(fa=(l=fa)||c,uf(t,e),fa=l):uf(t,e),xd(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Et=e,c=e.child;c!==null;){for(f=Et=c;Et!==null;){switch(d=Et,h=d.child,d.tag){case 0:case 11:case 14:case 15:YC(4,d,d.return);break;case 1:aw(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Wi(r,n,m)}}break;case 5:aw(d,d.return);break;case 22:if(d.memoizedState!==null){Ose(f);continue}}h!==null?(h.return=d,Et=h):Ose(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Uye("display",o))}catch(m){Wi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Wi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:uf(t,e),xd(e),r&4&&Nse(e);break;case 21:break;default:uf(t,e),xd(e)}}function xd(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(h1e(n)){var r=n;break e}n=n.return}throw Error(et(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(z2(i,""),r.flags&=-33);var s=Rse(e);I7(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Rse(e);A7(e,a,o);break;default:throw Error(et(161))}}catch(u){Wi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function TBe(e,t,n){Et=e,g1e(e)}function g1e(e,t,n){for(var r=(e.mode&1)!==0;Et!==null;){var i=Et,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||WR;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||fa;a=WR;var l=fa;if(WR=o,(fa=u)&&!l)for(Et=i;Et!==null;)o=Et,u=o.child,o.tag===22&&o.memoizedState!==null?Dse(i):u!==null?(u.return=o,Et=u):Dse(i);for(;s!==null;)Et=s,g1e(s),s=s.sibling;Et=i,WR=a,fa=l}Pse(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Et=s):Pse(e)}}function Pse(e){for(;Et!==null;){var t=Et;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:fa||PM(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!fa)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&gse(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}gse(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&W2(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}fa||t.flags&512&&C7(t)}catch(d){Wi(t,t.return,d)}}if(t===e){Et=null;break}if(n=t.sibling,n!==null){n.return=t.return,Et=n;break}Et=t.return}}function Ose(e){for(;Et!==null;){var t=Et;if(t===e){Et=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Et=n;break}Et=t.return}}function Dse(e){for(;Et!==null;){var t=Et;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{PM(4,t)}catch(u){Wi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Wi(t,i,u)}}var s=t.return;try{C7(t)}catch(u){Wi(t,s,u)}break;case 5:var o=t.return;try{C7(t)}catch(u){Wi(t,o,u)}}}catch(u){Wi(t,t.return,u)}if(t===e){Et=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Et=a;break}Et=t.return}}var CBe=Math.ceil,lD=Gm.ReactCurrentDispatcher,aW=Gm.ReactCurrentOwner,Sc=Gm.ReactCurrentBatchConfig,or=0,so=null,ws=null,Po=0,hl=0,uw=Ay(0),Ps=0,rA=null,M1=0,OM=0,uW=0,KC=null,xu=null,lW=0,yE=1/0,Op=null,cD=!1,k7=null,w0=null,GR=!1,n0=null,fD=0,XC=0,R7=null,OP=-1,DP=0;function Ga(){return or&6?us():OP!==-1?OP:OP=us()}function E0(e){return e.mode&1?or&2&&Po!==0?Po&-Po:lBe.transition!==null?(DP===0&&(DP=eve()),DP):(e=Or,e!==0||(e=window.event,e=e===void 0?16:ave(e.type)),e):1}function jf(e,t,n,r){if(50<XC)throw XC=0,R7=null,Error(et(185));II(e,n,r),(!(or&2)||e!==so)&&(e===so&&(!(or&2)&&(OM|=n),Ps===4&&qg(e,Po)),ju(e,r),n===1&&or===0&&!(t.mode&1)&&(yE=us()+500,kM&&Iy()))}function ju(e,t){var n=e.callbackNode;lje(e,t);var r=YO(e,e===so?Po:0);if(r===0)n!==null&&Vie(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Vie(n),t===1)e.tag===0?uBe($se.bind(null,e)):Cve($se.bind(null,e)),iBe(function(){!(or&6)&&Iy()}),n=null;else{switch(tve(r)){case 1:n=$q;break;case 4:n=Jye;break;case 16:n=GO;break;case 536870912:n=Zye;break;default:n=GO}n=S1e(n,y1e.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function y1e(e,t){if(OP=-1,DP=0,or&6)throw Error(et(327));var n=e.callbackNode;if(kw()&&e.callbackNode!==n)return null;var r=YO(e,e===so?Po:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=dD(e,r);else{t=r;var i=or;or|=2;var s=b1e();(so!==e||Po!==t)&&(Op=null,yE=us()+500,g1(e,t));do try{kBe();break}catch(a){v1e(e,a)}while(!0);Yq(),lD.current=s,or=i,ws!==null?t=0:(so=null,Po=0,t=Ps)}if(t!==0){if(t===2&&(i=r7(e),i!==0&&(r=i,t=N7(e,i))),t===1)throw n=rA,g1(e,0),qg(e,r),ju(e,us()),n;if(t===6)qg(e,r);else{if(i=e.current.alternate,!(r&30)&&!ABe(i)&&(t=dD(e,r),t===2&&(s=r7(e),s!==0&&(r=s,t=N7(e,s))),t===1))throw n=rA,g1(e,0),qg(e,r),ju(e,us()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(et(345));case 2:xv(e,xu,Op);break;case 3:if(qg(e,r),(r&130023424)===r&&(t=lW+500-us(),10<t)){if(YO(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ga(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=f7(xv.bind(null,e,xu,Op),t);break}xv(e,xu,Op);break;case 4:if(qg(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Ff(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=us()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CBe(r/1960))-r,10<r){e.timeoutHandle=f7(xv.bind(null,e,xu,Op),r);break}xv(e,xu,Op);break;case 5:xv(e,xu,Op);break;default:throw Error(et(329))}}}return ju(e,us()),e.callbackNode===n?y1e.bind(null,e):null}function N7(e,t){var n=KC;return e.current.memoizedState.isDehydrated&&(g1(e,t).flags|=256),e=dD(e,t),e!==2&&(t=xu,xu=n,t!==null&&P7(t)),e}function P7(e){xu===null?xu=e:xu.push.apply(xu,e)}function ABe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Kf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qg(e,t){for(t&=~uW,t&=~OM,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ff(t),r=1<<n;e[n]=-1,t&=~r}}function $se(e){if(or&6)throw Error(et(327));kw();var t=YO(e,0);if(!(t&1))return ju(e,us()),null;var n=dD(e,t);if(e.tag!==0&&n===2){var r=r7(e);r!==0&&(t=r,n=N7(e,r))}if(n===1)throw n=rA,g1(e,0),qg(e,t),ju(e,us()),n;if(n===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xv(e,xu,Op),ju(e,us()),null}function cW(e,t){var n=or;or|=1;try{return e(t)}finally{or=n,or===0&&(yE=us()+500,kM&&Iy())}}function L1(e){n0!==null&&n0.tag===0&&!(or&6)&&kw();var t=or;or|=1;var n=Sc.transition,r=Or;try{if(Sc.transition=null,Or=1,e)return e()}finally{Or=r,Sc.transition=n,or=t,!(or&6)&&Iy()}}function fW(){hl=uw.current,yi(uw)}function g1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,rBe(n)),ws!==null)for(n=ws.return;n!==null;){var r=n;switch(qq(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ZO();break;case 3:mE(),yi(Lu),yi(xa),eW();break;case 5:Zq(r);break;case 4:mE();break;case 13:yi(Pi);break;case 19:yi(Pi);break;case 10:Kq(r.type._context);break;case 22:case 23:fW()}n=n.return}if(so=e,ws=e=x0(e.current,null),Po=hl=t,Ps=0,rA=null,uW=OM=M1=0,xu=KC=null,Xv!==null){for(t=0;t<Xv.length;t++)if(n=Xv[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Xv=null}return e}function v1e(e,t){do{var n=ws;try{if(Yq(),RP.current=uD,aD){for(var r=Di.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}aD=!1}if($1=0,Ks=Cs=Di=null,GC=!1,eA=0,aW.current=null,n===null||n.return===null){Ps=1,rA=t,ws=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Po,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Ese(o);if(h!==null){h.flags&=-257,xse(h,o,a,s,t),h.mode&1&&wse(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){wse(s,l,t),dW();break e}u=Error(et(426))}}else if(Si&&a.mode&1){var g=Ese(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),xse(g,o,a,s,t),Wq(gE(u,a));break e}}s=u=gE(u,a),Ps!==4&&(Ps=2),KC===null?KC=[s]:KC.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=t1e(s,u,t);mse(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(w0===null||!w0.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var _=n1e(s,a,t);mse(s,_);break e}}s=s.return}while(s!==null)}w1e(n)}catch(x){t=x,ws===n&&n!==null&&(ws=n=n.return);continue}break}while(!0)}function b1e(){var e=lD.current;return lD.current=uD,e===null?uD:e}function dW(){(Ps===0||Ps===3||Ps===2)&&(Ps=4),so===null||!(M1&268435455)&&!(OM&268435455)||qg(so,Po)}function dD(e,t){var n=or;or|=2;var r=b1e();(so!==e||Po!==t)&&(Op=null,g1(e,t));do try{IBe();break}catch(i){v1e(e,i)}while(!0);if(Yq(),or=n,lD.current=r,ws!==null)throw Error(et(261));return so=null,Po=0,Ps}function IBe(){for(;ws!==null;)_1e(ws)}function kBe(){for(;ws!==null&&!eje();)_1e(ws)}function _1e(e){var t=x1e(e.alternate,e,hl);e.memoizedProps=e.pendingProps,t===null?w1e(e):ws=t,aW.current=null}function w1e(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=EBe(n,t),n!==null){n.flags&=32767,ws=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ps=6,ws=null;return}}else if(n=wBe(n,t,hl),n!==null){ws=n;return}if(t=t.sibling,t!==null){ws=t;return}ws=t=e}while(t!==null);Ps===0&&(Ps=5)}function xv(e,t,n){var r=Or,i=Sc.transition;try{Sc.transition=null,Or=1,RBe(e,t,n,r)}finally{Sc.transition=i,Or=r}return null}function RBe(e,t,n,r){do kw();while(n0!==null);if(or&6)throw Error(et(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(cje(e,s),e===so&&(ws=so=null,Po=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||GR||(GR=!0,S1e(GO,function(){return kw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Sc.transition,Sc.transition=null;var o=Or;Or=1;var a=or;or|=4,aW.current=null,SBe(e,n),m1e(n,e),Xje(l7),KO=!!u7,l7=u7=null,e.current=n,TBe(n),tje(),or=a,Or=o,Sc.transition=s}else e.current=n;if(GR&&(GR=!1,n0=e,fD=i),s=e.pendingLanes,s===0&&(w0=null),ije(n.stateNode),ju(e,us()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(cD)throw cD=!1,e=k7,k7=null,e;return fD&1&&e.tag!==0&&kw(),s=e.pendingLanes,s&1?e===R7?XC++:(XC=0,R7=e):XC=0,Iy(),null}function kw(){if(n0!==null){var e=tve(fD),t=Sc.transition,n=Or;try{if(Sc.transition=null,Or=16>e?16:e,n0===null)var r=!1;else{if(e=n0,n0=null,fD=0,or&6)throw Error(et(331));var i=or;for(or|=4,Et=e.current;Et!==null;){var s=Et,o=s.child;if(Et.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Et=l;Et!==null;){var c=Et;switch(c.tag){case 0:case 11:case 15:YC(8,c,s)}var f=c.child;if(f!==null)f.return=c,Et=f;else for(;Et!==null;){c=Et;var d=c.sibling,h=c.return;if(d1e(c),c===l){Et=null;break}if(d!==null){d.return=h,Et=d;break}Et=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Et=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Et=o;else e:for(;Et!==null;){if(s=Et,s.flags&2048)switch(s.tag){case 0:case 11:case 15:YC(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Et=y;break e}Et=s.return}}var v=e.current;for(Et=v;Et!==null;){o=Et;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Et=b;else e:for(o=v;Et!==null;){if(a=Et,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:PM(9,a)}}catch(x){Wi(a,a.return,x)}if(a===o){Et=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Et=_;break e}Et=a.return}}if(or=i,Iy(),fh&&typeof fh.onPostCommitFiberRoot=="function")try{fh.onPostCommitFiberRoot(SM,e)}catch{}r=!0}return r}finally{Or=n,Sc.transition=t}}return!1}function Mse(e,t,n){t=gE(n,t),t=t1e(e,t,1),e=_0(e,t,1),t=Ga(),e!==null&&(II(e,1,t),ju(e,t))}function Wi(e,t,n){if(e.tag===3)Mse(e,e,n);else for(;t!==null;){if(t.tag===3){Mse(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(w0===null||!w0.has(r))){e=gE(n,e),e=n1e(t,e,1),t=_0(t,e,1),e=Ga(),t!==null&&(II(t,1,e),ju(t,e));break}}t=t.return}}function NBe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ga(),e.pingedLanes|=e.suspendedLanes&n,so===e&&(Po&n)===n&&(Ps===4||Ps===3&&(Po&130023424)===Po&&500>us()-lW?g1(e,0):uW|=n),ju(e,t)}function E1e(e,t){t===0&&(e.mode&1?(t=LR,LR<<=1,!(LR&130023424)&&(LR=4194304)):t=1);var n=Ga();e=wm(e,t),e!==null&&(II(e,t,n),ju(e,n))}function PBe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),E1e(e,n)}function OBe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(et(314))}r!==null&&r.delete(t),E1e(e,n)}var x1e;x1e=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Lu.current)Nu=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Nu=!1,_Be(e,t,n);Nu=!!(e.flags&131072)}else Nu=!1,Si&&t.flags&1048576&&Ave(t,nD,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;PP(e,t),e=t.pendingProps;var i=dE(t,xa.current);Iw(t,n),i=nW(null,t,r,e,i,n);var s=rW();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fu(r)?(s=!0,eD(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qq(t),i.updater=NM,t.stateNode=i,i._reactInternals=t,v7(t,r,e,n),t=w7(null,t,r,!0,s,n)):(t.tag=0,Si&&s&&Hq(t),Fa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(PP(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=$Be(r),e=yf(r,e),i){case 0:t=_7(null,t,r,e,n);break e;case 1:t=Cse(null,t,r,e,n);break e;case 11:t=Sse(null,t,r,e,n);break e;case 14:t=Tse(null,t,r,yf(r.type,e),n);break e}throw Error(et(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yf(r,i),_7(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yf(r,i),Cse(e,t,r,i,n);case 3:e:{if(o1e(t),e===null)throw Error(et(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Ove(e,t),sD(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=gE(Error(et(423)),t),t=Ase(e,t,r,n,i);break e}else if(r!==i){i=gE(Error(et(424)),t),t=Ase(e,t,r,n,i);break e}else for(wl=b0(t.stateNode.containerInfo.firstChild),Il=t,Si=!0,xf=null,n=Nve(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hE(),r===i){t=Em(e,t,n);break e}Fa(e,t,r,n)}t=t.child}return t;case 5:return Dve(t),e===null&&m7(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,c7(r,i)?o=null:s!==null&&c7(r,s)&&(t.flags|=32),s1e(e,t),Fa(e,t,o,n),t.child;case 6:return e===null&&m7(t),null;case 13:return a1e(e,t,n);case 4:return Jq(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=pE(t,null,r,n):Fa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yf(r,i),Sse(e,t,r,i,n);case 7:return Fa(e,t,t.pendingProps,n),t.child;case 8:return Fa(e,t,t.pendingProps.children,n),t.child;case 12:return Fa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,si(rD,r._currentValue),r._currentValue=o,s!==null)if(Kf(s.value,o)){if(s.children===i.children&&!Lu.current){t=Em(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=am(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),g7(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(et(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),g7(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Fa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Iw(t,n),i=Rc(i),r=r(i),t.flags|=1,Fa(e,t,r,n),t.child;case 14:return r=t.type,i=yf(r,t.pendingProps),i=yf(r.type,i),Tse(e,t,r,i,n);case 15:return r1e(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yf(r,i),PP(e,t),t.tag=1,Fu(r)?(e=!0,eD(t)):e=!1,Iw(t,n),e1e(t,r,i),v7(t,r,i,n),w7(null,t,r,!0,e,n);case 19:return u1e(e,t,n);case 22:return i1e(e,t,n)}throw Error(et(156,t.tag))};function S1e(e,t){return Qye(e,t)}function DBe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gc(e,t,n,r){return new DBe(e,t,n,r)}function hW(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $Be(e){if(typeof e=="function")return hW(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pq)return 11;if(e===Oq)return 14}return 2}function x0(e,t){var n=e.alternate;return n===null?(n=gc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function $P(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")hW(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case J_:return y1(n.children,i,s,t);case Nq:o=8,i|=8;break;case zB:return e=gc(12,n,t,i|2),e.elementType=zB,e.lanes=s,e;case VB:return e=gc(13,n,t,i),e.elementType=VB,e.lanes=s,e;case HB:return e=gc(19,n,t,i),e.elementType=HB,e.lanes=s,e;case Dye:return DM(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Pye:o=10;break e;case Oye:o=9;break e;case Pq:o=11;break e;case Oq:o=14;break e;case $g:o=16,r=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=gc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function y1(e,t,n,r){return e=gc(7,e,r,t),e.lanes=n,e}function DM(e,t,n,r){return e=gc(22,e,r,t),e.elementType=Dye,e.lanes=n,e.stateNode={isHidden:!1},e}function y8(e,t,n){return e=gc(6,e,null,t),e.lanes=n,e}function v8(e,t,n){return t=gc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function MBe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=J5(0),this.expirationTimes=J5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J5(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function pW(e,t,n,r,i,s,o,a,u){return e=new MBe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=gc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qq(s),e}function LBe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q_,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function T1e(e){if(!e)return z0;e=e._reactInternals;e:{if(Tb(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var n=e.type;if(Fu(n))return Tve(e,n,t)}return t}function C1e(e,t,n,r,i,s,o,a,u){return e=pW(n,r,!0,e,i,s,o,a,u),e.context=T1e(null),n=e.current,r=Ga(),i=E0(n),s=am(r,i),s.callback=t??null,_0(n,s,i),e.current.lanes=i,II(e,i,r),ju(e,r),e}function $M(e,t,n,r){var i=t.current,s=Ga(),o=E0(i);return n=T1e(n),t.context===null?t.context=n:t.pendingContext=n,t=am(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=_0(i,t,o),e!==null&&(jf(e,i,o,s),kP(e,i,o)),o}function hD(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Lse(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function mW(e,t){Lse(e,t),(e=e.alternate)&&Lse(e,t)}function FBe(){return null}var A1e=typeof reportError=="function"?reportError:function(e){console.error(e)};function gW(e){this._internalRoot=e}MM.prototype.render=gW.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));$M(e,t,null,null)};MM.prototype.unmount=gW.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;L1(function(){$M(null,e,null,null)}),t[_m]=null}};function MM(e){this._internalRoot=e}MM.prototype.unstable_scheduleHydration=function(e){if(e){var t=ive();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Hg.length&&t!==0&&t<Hg[n].priority;n++);Hg.splice(n,0,e),n===0&&ove(e)}};function yW(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function LM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fse(){}function jBe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=hD(o);s.call(l)}}var o=C1e(t,r,e,0,null,!1,!1,"",Fse);return e._reactRootContainer=o,e[_m]=o.current,K2(e.nodeType===8?e.parentNode:e),L1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=hD(u);a.call(l)}}var u=pW(e,0,!1,null,null,!1,!1,"",Fse);return e._reactRootContainer=u,e[_m]=u.current,K2(e.nodeType===8?e.parentNode:e),L1(function(){$M(t,u,n,r)}),u}function FM(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=hD(o);a.call(u)}}$M(t,o,e,i)}else o=jBe(n,t,e,i,r);return hD(o)}nve=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ZT(t.pendingLanes);n!==0&&(Mq(t,n|1),ju(t,us()),!(or&6)&&(yE=us()+500,Iy()))}break;case 13:L1(function(){var r=wm(e,1);if(r!==null){var i=Ga();jf(r,e,1,i)}}),mW(e,1)}};Lq=function(e){if(e.tag===13){var t=wm(e,134217728);if(t!==null){var n=Ga();jf(t,e,134217728,n)}mW(e,134217728)}};rve=function(e){if(e.tag===13){var t=E0(e),n=wm(e,t);if(n!==null){var r=Ga();jf(n,e,t,r)}mW(e,t)}};ive=function(){return Or};sve=function(e,t){var n=Or;try{return Or=e,t()}finally{Or=n}};e7=function(e,t,n){switch(t){case"input":if(GB(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=IM(r);if(!i)throw Error(et(90));Mye(r),GB(r,i)}}}break;case"textarea":Fye(e,n);break;case"select":t=n.value,t!=null&&Sw(e,!!n.multiple,t,!1)}};qye=cW;Wye=L1;var BBe={usingClientEntryPoint:!1,Events:[RI,nw,IM,Vye,Hye,cW]},sT={findFiberByHostInstance:Kv,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UBe={bundleType:sT.bundleType,version:sT.version,rendererPackageName:sT.rendererPackageName,rendererConfig:sT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Kye(e),e===null?null:e.stateNode},findFiberByHostInstance:sT.findFiberByHostInstance||FBe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var YR=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!YR.isDisabled&&YR.supportsFiber)try{SM=YR.inject(UBe),fh=YR}catch{}}ql.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BBe;ql.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yW(t))throw Error(et(200));return LBe(e,t,null,n)};ql.createRoot=function(e,t){if(!yW(e))throw Error(et(299));var n=!1,r="",i=A1e;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=pW(e,1,!1,null,null,n,!1,r,i),e[_m]=t.current,K2(e.nodeType===8?e.parentNode:e),new gW(t)};ql.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=Kye(t),e=e===null?null:e.stateNode,e};ql.flushSync=function(e){return L1(e)};ql.hydrate=function(e,t,n){if(!LM(t))throw Error(et(200));return FM(null,e,t,!0,n)};ql.hydrateRoot=function(e,t,n){if(!yW(e))throw Error(et(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=A1e;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=C1e(t,null,e,1,n??null,i,!1,s,o),e[_m]=t.current,K2(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new MM(t)};ql.render=function(e,t,n){if(!LM(t))throw Error(et(200));return FM(null,e,t,!1,n)};ql.unmountComponentAtNode=function(e){if(!LM(e))throw Error(et(40));return e._reactRootContainer?(L1(function(){FM(null,null,e,!1,function(){e._reactRootContainer=null,e[_m]=null})}),!0):!1};ql.unstable_batchedUpdates=cW;ql.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!LM(n))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return FM(e,t,n,!1,r)};ql.version="18.3.1-next-f1338f8080-20240426";function I1e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(I1e)}catch(e){console.error(e)}}I1e(),Iye.exports=ql;var PI=Iye.exports;const zBe=Ho(PI);var jse=PI;BB.createRoot=jse.createRoot,BB.hydrateRoot=jse.hydrateRoot;var qd=function(){return qd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},qd.apply(this,arguments)};function OI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Vp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Bse(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function VBe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Wn(e){return this instanceof Wn?(this.v=e,this):new Wn(e)}function Jv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Wn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function b8(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Wn(e[i](o)),done:!1}:s?s(o):o}:s}}function QC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Bse=="function"?Bse(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var MP="right-scroll-bar-position",LP="width-before-scroll-bar",HBe="with-scroll-bars-hidden",qBe="--removed-body-scroll-bar-size";function _8(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function WBe(e,t){var n=I.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var GBe=typeof window<"u"?I.useLayoutEffect:I.useEffect,Use=new WeakMap;function YBe(e,t){var n=WBe(null,function(r){return e.forEach(function(i){return _8(i,r)})});return GBe(function(){var r=Use.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||_8(a,null)}),s.forEach(function(a){i.has(a)||_8(a,o)})}Use.set(n,e)},[e]),n}function KBe(e){return e}function XBe(e,t){t===void 0&&(t=KBe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function QBe(e){e===void 0&&(e={});var t=XBe(null);return t.options=qd({async:!0,ssr:!1},e),t}var k1e=function(e){var t=e.sideCar,n=OI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,qd({},n))};k1e.isSideCarExport=!0;function JBe(e,t){return e.useMedium(t),k1e}var R1e=QBe(),w8=function(){},jM=I.forwardRef(function(e,t){var n=I.useRef(null),r=I.useState({onScrollCapture:w8,onWheelCapture:w8,onTouchMoveCapture:w8}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=OI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=d,x=YBe([n,t]),S=qd(qd({},b),i);return I.createElement(I.Fragment,null,c&&I.createElement(_,{sideCar:R1e,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?I.cloneElement(I.Children.only(a),qd(qd({},S),{ref:x})):I.createElement(y,qd({},S,{className:u,ref:x}),a))});jM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};jM.classNames={fullWidth:LP,zeroRight:MP};var ZBe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function e7e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=ZBe();return t&&e.setAttribute("nonce",t),e}function t7e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function n7e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var r7e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=e7e())&&(t7e(t,n),n7e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},i7e=function(){var e=r7e();return function(t,n){I.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},N1e=function(){var e=i7e(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},s7e={left:0,top:0,right:0,gap:0},E8=function(e){return parseInt(e||"",10)||0},o7e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[E8(n),E8(r),E8(i)]},a7e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return s7e;var t=o7e(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},u7e=N1e(),Rw="data-scroll-locked",l7e=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(HBe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Rw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(MP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(LP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(MP," .").concat(MP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(LP," .").concat(LP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Rw,`] {
    `).concat(qBe,": ").concat(a,`px;
  }
`)},zse=function(){var e=parseInt(document.body.getAttribute(Rw)||"0",10);return isFinite(e)?e:0},c7e=function(){I.useEffect(function(){return document.body.setAttribute(Rw,(zse()+1).toString()),function(){var e=zse()-1;e<=0?document.body.removeAttribute(Rw):document.body.setAttribute(Rw,e.toString())}},[])},f7e=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;c7e();var s=I.useMemo(function(){return a7e(i)},[i]);return I.createElement(u7e,{styles:l7e(s,!t,i,n?"":"!important")})},O7=!1;if(typeof window<"u")try{var KR=Object.defineProperty({},"passive",{get:function(){return O7=!0,!0}});window.addEventListener("test",KR,KR),window.removeEventListener("test",KR,KR)}catch{O7=!1}var h_=O7?{passive:!1}:!1,d7e=function(e){return e.tagName==="TEXTAREA"},P1e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!d7e(e)&&n[t]==="visible")},h7e=function(e){return P1e(e,"overflowY")},p7e=function(e){return P1e(e,"overflowX")},Vse=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=O1e(e,r);if(i){var s=D1e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},m7e=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},g7e=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},O1e=function(e,t){return e==="v"?h7e(t):p7e(t)},D1e=function(e,t){return e==="v"?m7e(t):g7e(t)},y7e=function(e,t){return e==="h"&&t==="rtl"?-1:1},v7e=function(e,t,n,r,i){var s=y7e(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=D1e(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&O1e(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},XR=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Hse=function(e){return[e.deltaX,e.deltaY]},qse=function(e){return e&&"current"in e?e.current:e},b7e=function(e,t){return e[0]===t[0]&&e[1]===t[1]},_7e=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},w7e=0,p_=[];function E7e(e){var t=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),i=I.useState(w7e++)[0],s=I.useState(N1e)[0],o=I.useRef(e);I.useEffect(function(){o.current=e},[e]),I.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=VBe([e.lockRef.current],(e.shards||[]).map(qse),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=I.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=XR(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],_="deltaY"in m?m.deltaY:v[1]-y[1],x,S=m.target,E=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in m&&E==="h"&&S.type==="range")return!1;var T=Vse(E,S);if(!T)return!0;if(T?x=E:(x=E==="v"?"h":"v",T=Vse(E,S)),!T)return!1;if(!r.current&&"changedTouches"in m&&(b||_)&&(r.current=x),!x)return!0;var A=r.current||x;return v7e(A,g,m,A==="h"?b:_,!0)},[]),u=I.useCallback(function(m){var g=m;if(!(!p_.length||p_[p_.length-1]!==s)){var y="deltaY"in g?Hse(g):XR(g),v=t.current.filter(function(x){return x.name===g.type&&(x.target===g.target||g.target===x.shadowParent)&&b7e(x.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(qse).filter(Boolean).filter(function(x){return x.contains(g.target)}),_=b.length>0?a(g,b[0]):!o.current.noIsolation;_&&g.cancelable&&g.preventDefault()}}},[]),l=I.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:x7e(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(_){return _!==b})},1)},[]),c=I.useCallback(function(m){n.current=XR(m),r.current=void 0},[]),f=I.useCallback(function(m){l(m.type,Hse(m),m.target,a(m,e.lockRef.current))},[]),d=I.useCallback(function(m){l(m.type,XR(m),m.target,a(m,e.lockRef.current))},[]);I.useEffect(function(){return p_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,h_),document.addEventListener("touchmove",u,h_),document.addEventListener("touchstart",c,h_),function(){p_=p_.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,h_),document.removeEventListener("touchmove",u,h_),document.removeEventListener("touchstart",c,h_)}},[]);var h=e.removeScrollBar,p=e.inert;return I.createElement(I.Fragment,null,p?I.createElement(s,{styles:_7e(i)}):null,h?I.createElement(f7e,{gapMode:e.gapMode}):null)}function x7e(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const S7e=JBe(R1e,E7e);var BM=I.forwardRef(function(e,t){return I.createElement(jM,qd({},e,{ref:t,sideCar:S7e}))});BM.classNames=jM.classNames;function $i(e){return Object.keys(e)}function x8(e){return e&&typeof e=="object"&&!Array.isArray(e)}function vW(e,t){const n={...e},r=t;return x8(e)&&x8(t)&&Object.keys(t).forEach(i=>{x8(r[i])&&i in e?n[i]=vW(n[i],r[i]):n[i]=r[i]}),n}function T7e(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function C7e(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function D7(e){const t=C7e(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function S8(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function $1e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?S8(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?S8(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?S8(s):s}}return r}return n}const Ee=$1e("rem",{shouldScale:!0}),pD=$1e("em");function Nx(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function M1e(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function ky(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==I.Fragment:!1}function Ia(e){const t=I.createContext(null);return[({children:i,value:s})=>w.jsx(t.Provider,{value:s,children:i}),()=>{const i=I.useContext(t);if(i===null)throw new Error(e);return i}]}function Cb(e=null){const t=I.createContext(e);return[({children:i,value:s})=>w.jsx(t.Provider,{value:s,children:i}),()=>I.useContext(t)]}function Wse(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function mD(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function A7e(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function I7e(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function k7e(e,t,n){return mD(e,n)===mD(t,n)}function L1e({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=mD(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>k7e(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=I7e(l,u,r),f=A7e(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const R7e={app:100,modal:200,popover:300,overlay:400,max:9999};function Vc(e){return R7e[e]}const N7e=()=>{};function P7e(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||N7e:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function un(e,t="size",n=!0){if(e!==void 0)return M1e(e)?n?Ee(e):e:`var(--${t}-${e})`}function Ol(e){return un(e,"mantine-spacing")}function ci(e){return e===void 0?"var(--mantine-radius-default)":un(e,"mantine-radius")}function oo(e){return un(e,"mantine-font-size")}function F1e(e){return un(e,"mantine-line-height",!1)}function bW(e){if(e)return un(e,"mantine-shadow",!1)}function Qp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function _W(e,t){return e in t.breakpoints?D7(t.breakpoints[e]):D7(e)}function gD(e,t){const n=e.map(r=>({value:r,px:_W(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function tC(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function O7e(e,t,n){var r;return n?Array.from(((r=mD(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function D7e(){const[e,t]=I.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function yc(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function JC(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Wg(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function UM(e,t){const n=Wg(e),r=I.useRef(0);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),I.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const Gse=["mousedown","touchstart"];function $7e(e,t,n){const r=I.useRef();return I.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Gse).forEach(s=>document.addEventListener(s,i)),()=>{(t||Gse).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function M7e(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function L7e(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function F7e(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=I.useState(n?t:L7e(e)),s=I.useRef();return I.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),M7e(s.current,o=>i(o.matches))},[e]),r}const Ab=typeof document<"u"?I.useLayoutEffect:I.useEffect;function Xf(e,t){const n=I.useRef(!1);I.useEffect(()=>()=>{n.current=!1},[]),I.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function j1e({opened:e,shouldReturnFocus:t=!0}){const n=I.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Xf(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function j7e(e,t="body > :not(script)"){const n=JC(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const B7e=/input|select|textarea|button|object/,B1e="a, input, select, textarea, button, object, [tabindex]";function U7e(e){return e.style.display==="none"}function z7e(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(U7e(n))return!1;n=n.parentNode}return!0}function U1e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function $7(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(U1e(e));return(B7e.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&z7e(e)}function z1e(e){const t=U1e(e);return(Number.isNaN(t)||t>=0)&&$7(e)}function V7e(e){return Array.from(e.querySelectorAll(B1e)).filter(z1e)}function H7e(e,t){const n=V7e(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function q7e(e=!0){const t=I.useRef(),n=I.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(B1e));o=a.find(z1e)||a.find($7)||null,!o&&$7(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=I.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=j7e(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return I.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&H7e(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const W7e=Nr.useId||(()=>{});function G7e(){const e=W7e();return e?`mantine-${e.replace(/:/g,"")}`:""}function nl(e){const t=G7e(),[n,r]=I.useState(t);return Ab(()=>{r(JC())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function V1e(e,t,n){I.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function wW(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Y7e(...e){return t=>{e.forEach(n=>wW(n,t))}}function ns(...e){return I.useCallback(Y7e(...e),e)}function H1e(e){return{x:yc(e.x,0,1),y:yc(e.y,0,1)}}function zM(e,t,n="ltr"){const r=I.useRef(null),i=I.useRef(!1),s=I.useRef(!1),o=I.useRef(0),[a,u]=I.useState(!1);return I.useEffect(()=>{i.current=!0},[]),I.useEffect(()=>{var v,b;const l=({x:_,y:x})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const S=r.current.getBoundingClientRect();if(S.width&&S.height){const E=yc((_-S.left)/S.width,0,1);e({x:n==="ltr"?E:1-E,y:yc((x-S.top)/S.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=_=>{d(),_.preventDefault(),m(_)},m=_=>l({x:_.clientX,y:_.clientY}),g=_=>{_.cancelable&&_.preventDefault(),d(),y(_)},y=_=>{_.cancelable&&_.preventDefault(),l({x:_.changedTouches[0].clientX,y:_.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function jo({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=I.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function q1e(e,t){return F7e("(prefers-reduced-motion: reduce)",e,t)}const K7e={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Bf(e){const t=I.useRef(0),n=I.useRef(null),[r,i]=I.useState(K7e),s=I.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return I.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function X7e(e){const[t,{width:n,height:r}]=Bf(e);return{ref:t,width:n,height:r}}function nC(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=I.useState(e),o=I.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=I.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=I.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function Q7e(e,t,n={autoInvoke:!1}){const r=I.useRef(null),i=I.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=I.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return I.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function J7e(e,t,n){const r=I.useRef(),i=I.useRef(null);return I.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function Z7e(){const[e,t]=I.useState(!1);return I.useEffect(()=>t(!0),[]),e}function eUe(e,t){const n=Wg(e),r=I.useRef(),i=I.useRef(),s=I.useRef(!0),o=I.useRef(t),a=I.useRef(-1),u=()=>window.clearTimeout(a.current),l=I.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=I.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=I.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return I.useEffect(()=>{o.current=t},[t]),[f,u]}function tUe(e,t){const[n,r]=I.useState(e),[i,s]=eUe(r,t);return I.useEffect(()=>s,[]),[n,i]}function nUe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function rUe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Ab(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>nUe(`${e}:${String(r)}`,i[0])}return[t,n]}var iUe={};function W1e(){return typeof process<"u"&&iUe?"production":"development"}function G1e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=G1e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Zi(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=G1e(e))&&(r&&(r+=" "),r+=t);return r}const sUe={};function oUe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Zi(t[r],i):t[r]=i})}),t}function VM({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||sUe);return oUe(s)}function yD({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const Y1e=I.createContext(null);function Ry(){const e=I.useContext(Y1e);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function aUe(){return Ry().cssVariablesResolver}function uUe(){return Ry().classNamesPrefix}function EW(){return Ry().getStyleNonce}function lUe(){return Ry().withStaticClasses}function cUe(){return Ry().headless}function fUe(){var e;return(e=Ry().stylesTransform)==null?void 0:e.sx}function dUe(){var e;return(e=Ry().stylesTransform)==null?void 0:e.styles}function hUe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function pUe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function mUe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function gUe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function xW(e){return hUe(e)?pUe(e):e.startsWith("rgb")?mUe(e):e.startsWith("hsl")?gUe(e):{r:0,g:0,b:0,a:1}}function QR(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=xW(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function iA(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function T8(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function yUe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function vUe(e){if(e.startsWith("oklch("))return(yUe(e)||0)/100;const{r:t,g:n,b:r}=xW(e),i=t/255,s=n/255,o=r/255,a=T8(i),u=T8(s),l=T8(o);return .2126*a+.7152*u+.0722*l}function oT(e,t=.179){return e.startsWith("var(")?!1:vUe(e)>t}function Xh({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:oT(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:oT(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:oT(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][iA(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:oT(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:oT(e,t.luminanceThreshold),shade:s,variable:void 0}}function ai(e,t){const n=Xh({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function M7(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=ai(n.from,t),i=ai(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Od(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=xW(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const m_=Od,bUe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Xh({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ee(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Ee(1)} solid transparent`}:{background:e,hover:QR(e,.1),color:a,border:`${Ee(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ee(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Od(a,.1),hover:Od(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ee(1)} solid transparent`}}return{background:Od(e,.1),hover:Od(e,.12),color:e,border:`${Ee(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ee(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Od(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ee(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Od(e,.05),color:e,border:`${Ee(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ee(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Od(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ee(1)} solid transparent`}}return{background:"transparent",hover:Od(e,.12),color:e,border:`${Ee(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ee(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ee(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ee(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:QR(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ee(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:QR(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ee(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:QR(t.white,.01),color:e,border:`${Ee(1)} solid transparent`}:n==="gradient"?{background:M7(r,t),hover:M7(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ee(1)} solid var(--mantine-color-default-border)`}:{}},_Ue={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Yse="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",SW={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:_Ue,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:bUe,autoContrast:!1,luminanceThreshold:.3,fontFamily:Yse,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Yse,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ee(34),lineHeight:"1.3"},h2:{fontSize:Ee(26),lineHeight:"1.35"},h3:{fontSize:Ee(22),lineHeight:"1.4"},h4:{fontSize:Ee(18),lineHeight:"1.45"},h5:{fontSize:Ee(16),lineHeight:"1.5"},h6:{fontSize:Ee(14),lineHeight:"1.5"}}},fontSizes:{xs:Ee(12),sm:Ee(14),md:Ee(16),lg:Ee(18),xl:Ee(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ee(2),sm:Ee(4),md:Ee(8),lg:Ee(16),xl:Ee(32)},spacing:{xs:Ee(10),sm:Ee(12),md:Ee(16),lg:Ee(20),xl:Ee(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ee(1)} ${Ee(3)} rgba(0, 0, 0, 0.05), 0 ${Ee(1)} ${Ee(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ee(1)} ${Ee(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ee(10)} ${Ee(15)} ${Ee(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ee(7)} ${Ee(7)} ${Ee(-5)}`,md:`0 ${Ee(1)} ${Ee(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ee(20)} ${Ee(25)} ${Ee(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ee(10)} ${Ee(10)} ${Ee(-5)}`,lg:`0 ${Ee(1)} ${Ee(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ee(28)} ${Ee(23)} ${Ee(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ee(12)} ${Ee(12)} ${Ee(-7)}`,xl:`0 ${Ee(1)} ${Ee(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ee(36)} ${Ee(28)} ${Ee(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ee(17)} ${Ee(17)} ${Ee(-7)}`},other:{},components:{}};function Kse(e){return e==="auto"||e==="dark"||e==="light"}function wUe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Kse(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Kse(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const EUe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Xse="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function C8(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Qse(e){if(!(e.primaryColor in e.colors))throw new Error(EUe);if(typeof e.primaryShade=="object"&&(!C8(e.primaryShade.dark)||!C8(e.primaryShade.light)))throw new Error(Xse);if(typeof e.primaryShade=="number"&&!C8(e.primaryShade))throw new Error(Xse)}function xUe(e,t){var r;if(!t)return Qse(e),e;const n=vW(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Qse(n),n}const TW=I.createContext(null),SUe=()=>I.useContext(TW)||SW;function js(){const e=I.useContext(TW);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function K1e({theme:e,children:t,inherit:n=!0}){const r=SUe(),i=I.useMemo(()=>xUe(n?r:SW,e),[e,r,n]);return w.jsx(TW.Provider,{value:i,children:t})}K1e.displayName="@mantine/core/MantineThemeProvider";function TUe(){const e=js(),t=EW(),n=$i(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=D7(e.breakpoints[i]),a=s?`${o-.1}px`:pD(o-.1),u=s?`${o}px`:pD(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return w.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function A8(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function I8(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function CUe(e,t){const n=A8(e.variables),r=n?I8(t,n):"",i=A8(e.dark),s=i?I8(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=A8(e.light),a=o?I8(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function Ny({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Xh({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Jse(e,t){return Ny({color:e.colors[e.primaryColor][iA(e,t)],theme:e,autoContrast:null})}function JR({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=iA(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:m_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:m_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:m_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=iA(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:m_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:m_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:m_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function AUe(e){return Array.isArray(e)?e:Array(10).fill(e)}function IUe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function g_(e,t,n){$i(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const X1e=e=>{const t=iA(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ee(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Jse(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Jse(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};g_(r.variables,e.breakpoints,"breakpoint"),g_(r.variables,e.spacing,"spacing"),g_(r.variables,e.fontSizes,"font-size"),g_(r.variables,e.lineHeights,"line-height"),g_(r.variables,e.shadows,"shadow"),g_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),$i(e.colors).forEach(s=>{const o=e.colors[s];if(IUe(o)){Object.assign(r.light,JR({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,JR({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,JR({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,JR({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return $i(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function kUe({theme:e,generator:t}){const n=X1e(e),r=t==null?void 0:t(e);return r?vW(n,r):n}const k8=X1e(SW);function RUe(e){const t={variables:{},light:{},dark:{}};return $i(e.variables).forEach(n=>{k8.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),$i(e.light).forEach(n=>{k8.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),$i(e.dark).forEach(n=>{k8.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function NUe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function Q1e({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=js(),r=EW(),i=aUe(),s=kUe({theme:n,generator:i}),o=e===":root"&&t,a=o?RUe(s):s,u=CUe(a,e);return u?w.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":NUe(e)}`}}):null}Q1e.displayName="@mantine/CssVariables";function PUe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function y_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function OUe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=I.useRef(),[s,o]=I.useState(()=>e.get(t)),a=r||s,u=I.useCallback(c=>{r||(y_(c,n),o(c),e.set(c))},[e.set,a,r]),l=I.useCallback(()=>{o(t),y_(t,n),e.clear()},[e.clear,t]);return I.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),Ab(()=>{y_(e.get(t),n)},[]),I.useEffect(()=>{var f;if(r)return y_(r,n),()=>{};r===void 0&&y_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&y_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function DUe({respectReducedMotion:e,getRootElement:t}){Ab(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}PUe();function J1e({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=wUe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=OUe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return DUe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),w.jsx(Y1e.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:w.jsxs(K1e,{theme:e,children:[o&&w.jsx(Q1e,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&w.jsx(TUe,{}),t]})})}J1e.displayName="@mantine/core/MantineProvider";function Ym({classNames:e,styles:t,props:n,stylesCtx:r}){const i=js();return{resolvedClassNames:VM({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:yD({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const $Ue={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function MUe({theme:e,options:t,unstyled:n}){return Zi((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||$Ue[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function LUe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return VM({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Zse({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return VM({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function FUe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function jUe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function BUe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function UUe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=VM({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function zUe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function VUe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Zi(MUe({theme:e,options:t,unstyled:a||h}),UUe({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),zUe({options:t,classes:o,selector:r,unstyled:a}),Zse({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),Zse({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),LUe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),FUe({rootSelector:l,selector:r,className:u}),jUe({selector:r,classes:o,unstyled:a||h}),d&&!h&&BUe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function HUe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return yD({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function L7({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...L7({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function qUe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Nx(n[r])}}),t),{})}function WUe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=qUe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function GUe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&HUe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&yD({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&yD({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...WUe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?L7({style:u,theme:e}):null,...L7({style:r==null?void 0:r.style,theme:e})}}function YUe({props:e,stylesCtx:t,themeName:n}){var o;const r=js(),i=(o=dUe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function mt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=js(),h=uUe(),p=lUe(),m=cUe(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=YUe({props:n,stylesCtx:r,themeName:g});return(b,_)=>({className:VUe({theme:d,options:_,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([_==null?void 0:_.styles,l])}),style:GUe({theme:d,themeName:g,selector:b,options:_,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function Px(e,t){return typeof e=="boolean"?e:t.autoContrast}function xe(e,t,n){var o;const r=js(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Nx(n)}}function R8(e){return $i(e).reduce((t,n)=>e[n]!==void 0?`${t}${T7e(n)}:${e[n]};`:t,"").trim()}function KUe({selector:e,styles:t,media:n,container:r}){const i=t?R8(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${R8(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${R8(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function DI(e){const t=EW();return w.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:KUe(e)}})}function Ox(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:_,c:x,opacity:S,ff:E,fz:T,fw:A,lts:k,ta:R,lh:$,fs:P,tt:O,td:M,w:j,miw:B,maw:U,h:V,mih:D,mah:z,bgsz:W,bgp:F,bgr:H,bga:G,pos:ee,top:le,left:de,bottom:he,right:ye,inset:Ce,display:ve,flex:Ye,hiddenFrom:Ue,visibleFrom:pt,lightHidden:rt,darkHidden:be,sx:Ae,...Ve}=e;return{styleProps:Nx({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:_,c:x,opacity:S,ff:E,fz:T,fw:A,lts:k,ta:R,lh:$,fs:P,tt:O,td:M,w:j,miw:B,maw:U,h:V,mih:D,mah:z,bgsz:W,bgp:F,bgr:H,bga:G,pos:ee,top:le,left:de,bottom:he,right:ye,inset:Ce,display:ve,flex:Ye,hiddenFrom:Ue,visibleFrom:pt,lightHidden:rt,darkHidden:be,sx:Ae}),rest:Ve}}const XUe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function CW(e,t){const n=Xh({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function QUe(e,t){const n=Xh({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:CW(e,t)}function JUe(e,t){if(typeof e=="number")return Ee(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Ee(n)}`;return r&&(s+=` ${r}`),AUe.length>0&&(s+=` ${CW(i.join(" "),t)}`),s.trim()}return e}const eoe={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function ZUe(e){return typeof e=="string"&&e in eoe?eoe[e]:e}const eze=["h1","h2","h3","h4","h5","h6"];function tze(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&eze.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ee(e):e}function nze(e){return e}const rze=["h1","h2","h3","h4","h5","h6"];function ize(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&rze.includes(e)?`var(--mantine-${e}-line-height)`:e}function sze(e){return typeof e=="number"?Ee(e):e}function oze(e,t){if(typeof e=="number")return Ee(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ee(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const N8={color:CW,textColor:QUe,fontSize:tze,spacing:oze,identity:nze,size:sze,lineHeight:ize,fontFamily:ZUe,border:JUe};function toe(e){return e.replace("(min-width: ","").replace("em)","")}function aze({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(toe(i))-Number(toe(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function uze(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function lze(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function cze(e){return typeof e=="object"&&e!==null?$i(e).filter(t=>t!=="base"):[]}function fze(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function Z1e({styleProps:e,data:t,theme:n}){return aze($i(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=lze(e[i]);if(!uze(e[i]))return o.forEach(l=>{r.inlineStyles[l]=N8[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=cze(e[i]);return o.forEach(l=>{a&&(r.styles[l]=N8[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:N8[s.type](fze(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function HM(){return`__m__-${I.useId().replace(/:/g,"")}`}function ebe(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...ebe(r,t)}),{}):typeof e=="function"?e(t):e??{}}function tbe(e){return e.startsWith("data-")?e:`data-${e}`}function dze(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[tbe(n)]=e[n]),t},{})}function nbe(e){return e?typeof e=="string"?{[tbe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...nbe(n)}),{}):dze(e):null}function F7(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...F7(r,t)}),{}):typeof e=="function"?e(t):e??{}}function hze({theme:e,style:t,vars:n,styleProps:r}){const i=F7(t,e),s=F7(n,e);return{...i,...s,...r}}const rbe=I.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var T;const m=js(),g=e||"div",{styleProps:y,rest:v}=Ox(h),b=fUe(),_=(T=b==null?void 0:b())==null?void 0:T(y.sx),x=HM(),S=Z1e({styleProps:y,theme:m,data:XUe}),E={ref:p,style:hze({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:Zi(r,_,{[x]:S.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":M1e(o)?void 0:o||void 0,size:d,...nbe(s),...v};return w.jsxs(w.Fragment,{children:[S.hasResponsiveStyles&&w.jsx(DI,{selector:`.${x}`,styles:S.styles,media:S.media}),typeof f=="function"?f(E):w.jsx(g,{...E})]})});rbe.displayName="@mantine/core/Box";const Ne=rbe;function ibe(e){return e}function je(e){const t=I.forwardRef(e);return t.extend=ibe,t}function Bs(e){const t=I.forwardRef(e);return t.extend=ibe,t}const pze=I.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Qh(){return I.useContext(pze)}const[mze,Hc]=Ia("ScrollArea.Root component was not found in tree");function vE(e,t){const n=Wg(t);Ab(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const gze=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Hc(),[s,o]=I.useState(0),[a,u]=I.useState(0),l=!!(s&&a);return vE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),vE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?w.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),yze=I.forwardRef((e,t)=>{const n=Hc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?w.jsx(gze,{...e,ref:t}):null}),vze={scrollHideDelay:1e3,type:"hover"},sbe=I.forwardRef((e,t)=>{const n=xe("ScrollAreaRoot",vze,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=I.useState(null),[l,c]=I.useState(null),[f,d]=I.useState(null),[h,p]=I.useState(null),[m,g]=I.useState(null),[y,v]=I.useState(0),[b,_]=I.useState(0),[x,S]=I.useState(!1),[E,T]=I.useState(!1),A=ns(t,k=>u(k));return w.jsx(mze,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:x,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:E,onScrollbarYEnabledChange:T,onCornerWidthChange:v,onCornerHeightChange:_},children:w.jsx(Ne,{...o,ref:A,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});sbe.displayName="@mantine/core/ScrollAreaRoot";function obe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function qM(e){const t=obe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function abe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function bze(e,[t,n]){return Math.min(n,Math.max(t,e))}function noe(e,t,n="ltr"){const r=qM(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=bze(e,u);return abe([0,o],[0,a])(l)}function _ze(e,t,n,r="ltr"){const i=qM(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return abe([u,l],f)(e)}function ube(e,t){return e>0&&e<t}function vD(e){return e?parseInt(e,10):0}function v1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[wze,lbe]=Ia("ScrollAreaScrollbar was not found in tree"),cbe=I.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Hc(),[h,p]=I.useState(null),m=ns(t,T=>p(T)),g=I.useRef(null),y=I.useRef(""),{viewport:v}=d,b=n.content-n.viewport,_=Wg(l),x=Wg(a),S=UM(c,10),E=T=>{if(g.current){const A=T.clientX-g.current.left,k=T.clientY-g.current.top;u({x:A,y:k})}};return I.useEffect(()=>{const T=A=>{const k=A.target;(h==null?void 0:h.contains(k))&&_(A,b)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[v,h,b,_]),I.useEffect(x,[n,x]),vE(h,S),vE(d.content,S),w.jsx(wze,{value:{scrollbar:h,hasThumb:r,onThumbChange:Wg(i),onThumbPointerUp:Wg(s),onThumbPositionChange:x,onThumbPointerDown:Wg(o)},children:w.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:v1(e.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",E(T))}),onPointerMove:v1(e.onPointerMove,E),onPointerUp:v1(e.onPointerUp,T=>{const A=T.target;A.hasPointerCapture(T.pointerId)&&A.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),Eze=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Hc(),[a,u]=I.useState(),l=I.useRef(null),c=ns(t,l,o.onScrollbarXChange);return I.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),w.jsx(cbe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${qM(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),ube(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:vD(a.paddingLeft),paddingEnd:vD(a.paddingRight)}})}})}),xze=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Hc(),[a,u]=I.useState(),l=I.useRef(null),c=ns(t,l,o.onScrollbarYChange);return I.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),w.jsx(cbe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${qM(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),ube(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:vD(a.paddingTop),paddingEnd:vD(a.paddingBottom)}})}})}),AW=I.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Qh(),s=Hc(),o=I.useRef(null),a=I.useRef(0),[u,l]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=obe(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>_ze(h,a.current,u,p);return n==="horizontal"?w.jsx(Eze,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=noe(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?w.jsx(xze,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=noe(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),fbe=I.forwardRef((e,t)=>{const n=Hc(),{forceMount:r,...i}=e,[s,o]=I.useState(!1),a=e.orientation==="horizontal",u=UM(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return vE(n.viewport,u),vE(n.content,u),r||s?w.jsx(AW,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),Sze=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Hc(),[s,o]=I.useState(!1);return I.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?w.jsx(fbe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),Tze=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Hc(),s=e.orientation==="horizontal",[o,a]=I.useState("hidden"),u=UM(()=>a("idle"),100);return I.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),I.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?w.jsx(AW,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:v1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:v1(e.onPointerLeave,()=>a("idle"))}):null}),roe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Hc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return I.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?w.jsx(Sze,{...r,ref:t,forceMount:n}):i.type==="scroll"?w.jsx(Tze,{...r,ref:t,forceMount:n}):i.type==="auto"?w.jsx(fbe,{...r,ref:t,forceMount:n}):i.type==="always"?w.jsx(AW,{...r,ref:t}):null});function Cze(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Aze=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Hc(),s=lbe(),{onThumbPositionChange:o}=s,a=ns(t,c=>s.onThumbChange(c)),u=I.useRef(),l=UM(()=>{u.current&&(u.current(),u.current=void 0)},100);return I.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=Cze(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),w.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:v1(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:v1(e.onPointerUp,s.onThumbPointerUp)})}),ioe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=lbe();return n||i.hasThumb?w.jsx(Aze,{ref:t,...r}):null}),dbe=I.forwardRef(({children:e,style:t,...n},r)=>{const i=Hc(),s=ns(r,i.onViewportChange);return w.jsx(Ne,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:w.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});dbe.displayName="@mantine/core/ScrollAreaViewport";var IW={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const hbe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},Ize=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Ee(t)}}),Dx=je((e,t)=>{const n=xe("ScrollArea",hbe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,_]=I.useState(!1),x=mt({name:"ScrollArea",props:n,classes:IW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Ize});return w.jsxs(sbe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...x("root"),...v,children:[w.jsx(dbe,{...d,...x("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:S=>{var E;(E=d==null?void 0:d.onScroll)==null||E.call(d,S),p==null||p({x:S.currentTarget.scrollLeft,y:S.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&w.jsx(roe,{...x("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),children:w.jsx(ioe,{...x("thumb")})}),(y==="xy"||y==="y")&&w.jsx(roe,{...x("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),children:w.jsx(ioe,{...x("thumb")})}),w.jsx(yze,{...x("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});Dx.displayName="@mantine/core/ScrollArea";const kW=je((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=xe("ScrollAreaAutosize",hbe,e);return w.jsx(Ne,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:w.jsx(Ne,{style:{display:"flex",flexDirection:"column",flex:1},children:w.jsx(Dx,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});Dx.classes=IW;kW.displayName="@mantine/core/ScrollAreaAutosize";kW.classes=IW;Dx.Autosize=kW;var pbe={root:"m_87cf2631"};const kze={__staticSelector:"UnstyledButton"},ao=Bs((e,t)=>{const n=xe("UnstyledButton",kze,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=mt({name:s,props:n,classes:pbe,className:r,style:l,classNames:a,styles:u,unstyled:o});return w.jsx(Ne,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});ao.classes=pbe;ao.displayName="@mantine/core/UnstyledButton";var mbe={root:"m_515a97f8"};const Rze={},RW=je((e,t)=>{const n=xe("VisuallyHidden",Rze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=mt({name:"VisuallyHidden",classes:mbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return w.jsx(Ne,{component:"span",ref:t,...c("root"),...l})});RW.classes=mbe;RW.displayName="@mantine/core/VisuallyHidden";var gbe={root:"m_1b7284a3"};const Nze={},Pze=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:ci(t),"--paper-shadow":bW(n)}}),WM=Bs((e,t)=>{const n=xe("Paper",Nze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=mt({name:"Paper",props:n,classes:gbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Pze});return w.jsx(Ne,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});WM.classes=gbe;WM.displayName="@mantine/core/Paper";function $x(e){return ybe(e)?(e.nodeName||"").toLowerCase():"#document"}function Bu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Km(e){var t;return(t=(ybe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ybe(e){return e instanceof Node||e instanceof Bu(e).Node}function Ti(e){return e instanceof Element||e instanceof Bu(e).Element}function Dl(e){return e instanceof HTMLElement||e instanceof Bu(e).HTMLElement}function j7(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Bu(e).ShadowRoot}function $I(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Pc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Oze(e){return["table","td","th"].includes($x(e))}function NW(e){const t=PW(),n=Pc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Dze(e){let t=xm(e);for(;Dl(t)&&!V0(t);){if(NW(t))return t;t=xm(t)}return null}function PW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function V0(e){return["html","body","#document"].includes($x(e))}function Pc(e){return Bu(e).getComputedStyle(e)}function GM(e){return Ti(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function xm(e){if($x(e)==="html")return e;const t=e.assignedSlot||e.parentNode||j7(e)&&e.host||Km(e);return j7(t)?t.host:t}function vbe(e){const t=xm(e);return V0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Dl(t)&&$I(t)?t:vbe(t)}function um(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=vbe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Bu(i);return s?t.concat(o,o.visualViewport||[],$I(i)?i:[],o.frameElement&&n?um(o.frameElement):[]):t.concat(i,um(i,[],n))}function soe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function sA(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&j7(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function bbe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function _be(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function $ze(e){return Fze()?!1:!ooe()&&e.width===0&&e.height===0||ooe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Mze(){return/apple/i.test(navigator.vendor)}function ooe(){const e=/android/i;return e.test(bbe())||e.test(_be())}function Lze(){return bbe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Fze(){return _be().includes("jsdom/")}function B7(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function jze(e){return"nativeEvent"in e}function Bze(e){return e.matches("html,body")}function Zv(e){return(e==null?void 0:e.ownerDocument)||document}function P8(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function j_(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Uze="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function zze(e){return Dl(e)&&e.matches(Uze)}const El=Math.min,da=Math.max,bD=Math.round,ZR=Math.floor,H0=e=>({x:e,y:e}),Vze={left:"right",right:"left",bottom:"top",top:"bottom"},Hze={start:"end",end:"start"};function U7(e,t,n){return da(e,El(t,n))}function Sm(e,t){return typeof e=="function"?e(t):e}function Qf(e){return e.split("-")[0]}function Mx(e){return e.split("-")[1]}function OW(e){return e==="x"?"y":"x"}function DW(e){return e==="y"?"height":"width"}function Ib(e){return["top","bottom"].includes(Qf(e))?"y":"x"}function $W(e){return OW(Ib(e))}function qze(e,t,n){n===void 0&&(n=!1);const r=Mx(e),i=$W(e),s=DW(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=_D(o)),[o,_D(o)]}function Wze(e){const t=_D(e);return[z7(e),t,z7(t)]}function z7(e){return e.replace(/start|end/g,t=>Hze[t])}function Gze(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function Yze(e,t,n,r){const i=Mx(e);let s=Gze(Qf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(z7)))),s}function _D(e){return e.replace(/left|right|bottom|top/g,t=>Vze[t])}function Kze(e){return{top:0,right:0,bottom:0,left:0,...e}}function MW(e){return typeof e!="number"?Kze(e):{top:e,right:e,bottom:e,left:e}}function bE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function aoe(e,t,n){let{reference:r,floating:i}=e;const s=Ib(t),o=$W(t),a=DW(o),u=Qf(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Mx(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const Xze=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=aoe(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:_,reset:x}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],..._}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(l=x.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):x.rects),{x:c,y:f}=aoe(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function LW(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Sm(t,e),p=MW(h),g=a[d?f==="floating"?"reference":"floating":f],y=bE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},x=bE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-x.top+p.top)/_.y,bottom:(x.bottom-y.bottom+p.bottom)/_.y,left:(y.left-x.left+p.left)/_.x,right:(x.right-y.right+p.right)/_.x}}const Qze=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=Sm(e,t)||{};if(l==null)return{};const f=MW(c),d={x:n,y:r},h=$W(i),p=DW(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",_=s.reference[p]+s.reference[h]-d[h]-s.floating[p],x=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let E=S?S[b]:0;(!E||!await(o.isElement==null?void 0:o.isElement(S)))&&(E=a.floating[b]||s.floating[p]);const T=_/2-x/2,A=E/2-m[p]/2-1,k=El(f[y],A),R=El(f[v],A),$=k,P=E-m[p]-R,O=E/2-m[p]/2+T,M=U7($,O,P),j=!u.arrow&&Mx(i)!=null&&O!==M&&s.reference[p]/2-(O<$?k:R)-m[p]/2<0,B=j?O<$?O-$:O-P:0;return{[h]:d[h]+B,data:{[h]:M,centerOffset:O-M-B,...j&&{alignmentOffset:B}},reset:j}}}),Jze=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Sm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Qf(i),v=Qf(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),_=d||(v||!m?[_D(a)]:Wze(a));!d&&p!=="none"&&_.push(...Yze(a,m,p,b));const x=[a,..._],S=await LW(t,g),E=[];let T=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&E.push(S[y]),f){const $=qze(i,o,b);E.push(S[$[0]],S[$[1]])}if(T=[...T,{placement:i,overflows:E}],!E.every($=>$<=0)){var A,k;const $=(((A=s.flip)==null?void 0:A.index)||0)+1,P=x[$];if(P)return{data:{index:$,overflows:T},reset:{placement:P}};let O=(k=T.filter(M=>M.overflows[0]<=0).sort((M,j)=>M.overflows[1]-j.overflows[1])[0])==null?void 0:k.placement;if(!O)switch(h){case"bestFit":{var R;const M=(R=T.map(j=>[j.placement,j.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((j,B)=>j[1]-B[1])[0])==null?void 0:R[0];M&&(O=M);break}case"initialPlacement":O=a;break}if(i!==O)return{reset:{placement:O}}}return{}}}};function wbe(e){const t=El(...e.map(s=>s.left)),n=El(...e.map(s=>s.top)),r=da(...e.map(s=>s.right)),i=da(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function Zze(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>bE(wbe(i)))}const eVe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=Sm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=Zze(c),d=bE(wbe(c)),h=MW(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(Ib(n)==="y"){const k=f[0],R=f[f.length-1],$=Qf(n)==="top",P=k.top,O=R.bottom,M=$?k.left:R.left,j=$?k.right:R.right,B=j-M,U=O-P;return{top:P,bottom:O,left:M,right:j,width:B,height:U,x:M,y:P}}const g=Qf(n)==="left",y=da(...f.map(k=>k.right)),v=El(...f.map(k=>k.left)),b=f.filter(k=>g?k.left===v:k.right===y),_=b[0].top,x=b[b.length-1].bottom,S=v,E=y,T=E-S,A=x-_;return{top:_,bottom:x,left:S,right:E,width:T,height:A,x:S,y:_}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function tVe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Qf(n),a=Mx(n),u=Ib(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=Sm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const nVe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await tVe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},rVe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=Sm(e,t),l={x:n,y:r},c=await LW(t,u),f=Ib(Qf(i)),d=OW(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=U7(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=U7(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},iVe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=Sm(e,t),c={x:n,y:r},f=Ib(i),d=OW(f);let h=c[d],p=c[f];const m=Sm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",_=s.reference[d]-s.floating[b]+g.mainAxis,x=s.reference[d]+s.reference[b]-g.mainAxis;h<_?h=_:h>x&&(h=x)}if(l){var y,v;const b=d==="y"?"width":"height",_=["top","left"].includes(Qf(i)),x=s.reference[f]-s.floating[b]+(_&&((y=o.offset)==null?void 0:y[f])||0)+(_?0:g.crossAxis),S=s.reference[f]+s.reference[b]+(_?0:((v=o.offset)==null?void 0:v[f])||0)-(_?g.crossAxis:0);p<x?p=x:p>S&&(p=S)}return{[d]:h,[f]:p}}}},sVe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Sm(e,t),u=await LW(t,a),l=Qf(n),c=Mx(n),f=Ib(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=El(h-u[p],g),b=El(d-u[m],y),_=!t.middlewareData.shift;let x=v,S=b;if(f?S=c||_?El(b,y):y:x=c||_?El(v,g):g,_&&!c){const T=da(u.left,0),A=da(u.right,0),k=da(u.top,0),R=da(u.bottom,0);f?S=d-2*(T!==0||A!==0?T+A:da(u.left,u.right)):x=h-2*(k!==0||R!==0?k+R:da(u.top,u.bottom))}await o({...t,availableWidth:S,availableHeight:x});const E=await i.getDimensions(s.floating);return d!==E.width||h!==E.height?{reset:{rects:!0}}:{}}}};function Ebe(e){const t=Pc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Dl(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=bD(n)!==s||bD(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function FW(e){return Ti(e)?e:e.contextElement}function Nw(e){const t=FW(e);if(!Dl(t))return H0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Ebe(t);let o=(s?bD(n.width):n.width)/r,a=(s?bD(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const oVe=H0(0);function xbe(e){const t=Bu(e);return!PW()||!t.visualViewport?oVe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function aVe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Bu(e)?!1:t}function F1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=FW(e);let o=H0(1);t&&(r?Ti(r)&&(o=Nw(r)):o=Nw(e));const a=aVe(s,n,r)?xbe(s):H0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Bu(s),h=r&&Ti(r)?Bu(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=Nw(m),y=m.getBoundingClientRect(),v=Pc(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,_=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=_,p=Bu(m),m=p.frameElement}}return bE({width:c,height:f,x:u,y:l})}const uVe=[":popover-open",":modal"];function jW(e){return uVe.some(t=>{try{return e.matches(t)}catch{return!1}})}function lVe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Km(r),a=t?jW(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=H0(1);const c=H0(0),f=Dl(r);if((f||!f&&!s)&&(($x(r)!=="body"||$I(o))&&(u=GM(r)),Dl(r))){const d=F1(r);l=Nw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function cVe(e){return Array.from(e.getClientRects())}function Sbe(e){return F1(Km(e)).left+GM(e).scrollLeft}function fVe(e){const t=Km(e),n=GM(e),r=e.ownerDocument.body,i=da(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=da(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Sbe(e);const a=-n.scrollTop;return Pc(r).direction==="rtl"&&(o+=da(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function dVe(e,t){const n=Bu(e),r=Km(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=PW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function hVe(e,t){const n=F1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Dl(e)?Nw(e):H0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function uoe(e,t,n){let r;if(t==="viewport")r=dVe(e,n);else if(t==="document")r=fVe(Km(e));else if(Ti(t))r=hVe(t,n);else{const i=xbe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return bE(r)}function Tbe(e,t){const n=xm(e);return n===t||!Ti(n)||V0(n)?!1:Pc(n).position==="fixed"||Tbe(n,t)}function pVe(e,t){const n=t.get(e);if(n)return n;let r=um(e,[],!1).filter(a=>Ti(a)&&$x(a)!=="body"),i=null;const s=Pc(e).position==="fixed";let o=s?xm(e):e;for(;Ti(o)&&!V0(o);){const a=Pc(o),u=NW(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||$I(o)&&!u&&Tbe(e,o))?r=r.filter(c=>c!==o):i=a,o=xm(o)}return t.set(e,r),r}function mVe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?jW(t)?[]:pVe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=uoe(t,c,i);return l.top=da(f.top,l.top),l.right=El(f.right,l.right),l.bottom=El(f.bottom,l.bottom),l.left=da(f.left,l.left),l},uoe(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function gVe(e){const{width:t,height:n}=Ebe(e);return{width:t,height:n}}function yVe(e,t,n){const r=Dl(t),i=Km(t),s=n==="fixed",o=F1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=H0(0);if(r||!r&&!s)if(($x(t)!=="body"||$I(i))&&(a=GM(t)),r){const f=F1(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=Sbe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function O8(e){return Pc(e).position==="static"}function loe(e,t){return!Dl(e)||Pc(e).position==="fixed"?null:t?t(e):e.offsetParent}function Cbe(e,t){const n=Bu(e);if(jW(e))return n;if(!Dl(e)){let i=xm(e);for(;i&&!V0(i);){if(Ti(i)&&!O8(i))return i;i=xm(i)}return n}let r=loe(e,t);for(;r&&Oze(r)&&O8(r);)r=loe(r,t);return r&&V0(r)&&O8(r)&&!NW(r)?n:r||Dze(e)||n}const vVe=async function(e){const t=this.getOffsetParent||Cbe,n=this.getDimensions,r=await n(e.floating);return{reference:yVe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function bVe(e){return Pc(e).direction==="rtl"}const _Ve={convertOffsetParentRelativeRectToViewportRelativeRect:lVe,getDocumentElement:Km,getClippingRect:mVe,getOffsetParent:Cbe,getElementRects:vVe,getClientRects:cVe,getDimensions:gVe,getScale:Nw,isElement:Ti,isRTL:bVe};function wVe(e,t){let n=null,r;const i=Km(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=ZR(c),p=ZR(i.clientWidth-(l+f)),m=ZR(i.clientHeight-(c+d)),g=ZR(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:da(0,El(1,u))||1};let b=!0;function _(x){const S=x[0].intersectionRatio;if(S!==u){if(!b)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(_,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(_,v)}n.observe(e)}return o(!0),s}function EVe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=FW(e),c=i||s?[...l?um(l):[],...um(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?wVe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?F1(e):null;u&&g();function g(){const y=F1(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const xVe=nVe,SVe=rVe,TVe=Jze,CVe=sVe,coe=Qze,AVe=eVe,IVe=iVe,kVe=(e,t,n)=>{const r=new Map,i={platform:_Ve,...n},s={...i.platform,_c:r};return Xze(e,t,{...i,platform:s})};var FP=typeof document<"u"?I.useLayoutEffect:I.useEffect;function wD(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!wD(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!wD(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Abe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function foe(e,t){const n=Abe(e);return Math.round(t*n)/n}function doe(e){const t=I.useRef(e);return FP(()=>{t.current=e}),t}function RVe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=I.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=I.useState(r);wD(d,r)||h(r);const[p,m]=I.useState(null),[g,y]=I.useState(null),v=I.useCallback(B=>{B!==S.current&&(S.current=B,m(B))},[]),b=I.useCallback(B=>{B!==E.current&&(E.current=B,y(B))},[]),_=s||p,x=o||g,S=I.useRef(null),E=I.useRef(null),T=I.useRef(c),A=u!=null,k=doe(u),R=doe(i),$=I.useCallback(()=>{if(!S.current||!E.current)return;const B={placement:t,strategy:n,middleware:d};R.current&&(B.platform=R.current),kVe(S.current,E.current,B).then(U=>{const V={...U,isPositioned:!0};P.current&&!wD(T.current,V)&&(T.current=V,PI.flushSync(()=>{f(V)}))})},[d,t,n,R]);FP(()=>{l===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const P=I.useRef(!1);FP(()=>(P.current=!0,()=>{P.current=!1}),[]),FP(()=>{if(_&&(S.current=_),x&&(E.current=x),_&&x){if(k.current)return k.current(_,x,$);$()}},[_,x,$,k,A]);const O=I.useMemo(()=>({reference:S,floating:E,setReference:v,setFloating:b}),[v,b]),M=I.useMemo(()=>({reference:_,floating:x}),[_,x]),j=I.useMemo(()=>{const B={position:n,left:0,top:0};if(!M.floating)return B;const U=foe(M.floating,c.x),V=foe(M.floating,c.y);return a?{...B,transform:"translate("+U+"px, "+V+"px)",...Abe(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:V}},[n,a,M.floating,c.x,c.y]);return I.useMemo(()=>({...c,update:$,refs:O,elements:M,floatingStyles:j}),[c,$,O,M,j])}const NVe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?coe({element:r.current,padding:i}).fn(n):{}:r?coe({element:r,padding:i}).fn(n):{}}}},Ibe=(e,t)=>({...xVe(e),options:[e,t]}),BW=(e,t)=>({...SVe(e),options:[e,t]}),hoe=(e,t)=>({...IVe(e),options:[e,t]}),V7=(e,t)=>({...TVe(e),options:[e,t]}),PVe=(e,t)=>({...CVe(e),options:[e,t]}),H7=(e,t)=>({...AVe(e),options:[e,t]}),kbe=(e,t)=>({...NVe(e),options:[e,t]}),Rbe={...Cye},OVe=Rbe.useInsertionEffect,DVe=OVe||(e=>e());function Gg(e){const t=I.useRef(()=>{});return DVe(()=>{t.current=e}),I.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var hh=typeof document<"u"?I.useLayoutEffect:I.useEffect;let poe=!1,$Ve=0;const moe=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+$Ve++;function MVe(){const[e,t]=I.useState(()=>poe?moe():void 0);return hh(()=>{e==null&&t(moe())},[]),I.useEffect(()=>{poe=!0},[]),e}const LVe=Rbe.useId,Nbe=LVe||MVe;function FVe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const jVe=I.createContext(null),BVe=I.createContext(null),UW=()=>{var e;return((e=I.useContext(jVe))==null?void 0:e.id)||null},zW=()=>I.useContext(BVe);function VW(e){return"data-floating-ui-"+e}function goe(e){const t=I.useRef(e);return hh(()=>{t.current=e}),t}const yoe=VW("safe-polygon");function jP(e,t,n){return n&&!B7(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function UVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=zW(),m=UW(),g=goe(c),y=goe(l),v=I.useRef(),b=I.useRef(-1),_=I.useRef(),x=I.useRef(-1),S=I.useRef(!0),E=I.useRef(!1),T=I.useRef(()=>{}),A=I.useCallback(()=>{var P;const O=(P=i.current.openEvent)==null?void 0:P.type;return(O==null?void 0:O.includes("mouse"))&&O!=="mousedown"},[i]);I.useEffect(()=>{if(!u)return;function P(O){let{open:M}=O;M||(clearTimeout(b.current),clearTimeout(x.current),S.current=!0)}return s.on("openchange",P),()=>{s.off("openchange",P)}},[u,s]),I.useEffect(()=>{if(!u||!g.current||!n)return;function P(M){A()&&r(!1,M,"hover")}const O=Zv(a).documentElement;return O.addEventListener("mouseleave",P),()=>{O.removeEventListener("mouseleave",P)}},[a,n,r,u,g,A]);const k=I.useCallback(function(P,O,M){O===void 0&&(O=!0),M===void 0&&(M="hover");const j=jP(y.current,"close",v.current);j&&!_.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,P,M),j)):O&&(clearTimeout(b.current),r(!1,P,M))},[y,r]),R=Gg(()=>{T.current(),_.current=void 0}),$=Gg(()=>{if(E.current){const P=Zv(a).body;P.style.pointerEvents="",P.removeAttribute(yoe),E.current=!1}});return I.useEffect(()=>{if(!u)return;function P(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function O(B){if(clearTimeout(b.current),S.current=!1,f&&!B7(v.current)||d>0&&!jP(y.current,"open"))return;const U=jP(y.current,"open",v.current);U?b.current=window.setTimeout(()=>{r(!0,B,"hover")},U):r(!0,B,"hover")}function M(B){if(P())return;T.current();const U=Zv(a);if(clearTimeout(x.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),_.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){$(),R(),k(B,!0,"safe-polygon")}});const D=_.current;U.addEventListener("mousemove",D),T.current=()=>{U.removeEventListener("mousemove",D)};return}(v.current==="touch"?!sA(a,B.relatedTarget):!0)&&k(B)}function j(B){P()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){$(),R(),k(B)}})(B))}if(Ti(o)){const B=o;return n&&B.addEventListener("mouseleave",j),a==null||a.addEventListener("mouseleave",j),h&&B.addEventListener("mousemove",O,{once:!0}),B.addEventListener("mouseenter",O),B.addEventListener("mouseleave",M),()=>{n&&B.removeEventListener("mouseleave",j),a==null||a.removeEventListener("mouseleave",j),h&&B.removeEventListener("mousemove",O),B.removeEventListener("mouseenter",O),B.removeEventListener("mouseleave",M)}}},[o,a,u,e,f,d,h,k,R,$,r,n,p,y,g,i]),hh(()=>{var P;if(u&&n&&(P=g.current)!=null&&P.__options.blockPointerEvents&&A()){const M=Zv(a).body;if(M.setAttribute(yoe,""),M.style.pointerEvents="none",E.current=!0,Ti(o)&&a){var O;const j=o,B=p==null||(O=p.nodesRef.current.find(U=>U.id===m))==null||(O=O.context)==null?void 0:O.elements.floating;return B&&(B.style.pointerEvents=""),j.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{j.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,A]),hh(()=>{n||(v.current=void 0,R(),$())},[n,R,$]),I.useEffect(()=>()=>{R(),clearTimeout(b.current),clearTimeout(x.current),$()},[u,o,R,$]),I.useMemo(()=>{if(!u)return{};function P(O){v.current=O.pointerType}return{reference:{onPointerDown:P,onPointerEnter:P,onMouseMove(O){function M(){S.current||r(!0,O.nativeEvent,"hover")}f&&!B7(v.current)||n||d===0||(clearTimeout(x.current),v.current==="touch"?M():x.current=window.setTimeout(M,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(O){k(O.nativeEvent,!1)}}}},[u,f,n,d,r,k])}const q7=()=>{},Pbe=I.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:q7,setState:q7,isInstantPhase:!1}),Obe=()=>I.useContext(Pbe);function zVe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=I.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=I.useRef(null),a=I.useCallback(u=>{s({currentId:u})},[]);return hh(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),I.createElement(Pbe.Provider,{value:I.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function VVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=Obe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return hh(()=>{u&&(f({delay:{open:1,close:jP(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),hh(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),hh(()=>{l===q7||!n||l(o)},[n,l,o]),a}function D8(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const HVe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},qVe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},voe=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function WVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=zW(),v=Gg(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,_=I.useRef(!1),x=I.useRef(!1),{escapeKey:S,outsidePress:E}=voe(m),{escapeKey:T,outsidePress:A}=voe(g),k=Gg(O=>{var M;if(!n||!u||!l||O.key!=="Escape")return;const j=(M=a.current.floatingContext)==null?void 0:M.nodeId,B=y?D8(y.nodesRef.current,j):[];if(!S&&(O.stopPropagation(),B.length>0)){let U=!0;if(B.forEach(V=>{var D;if((D=V.context)!=null&&D.open&&!V.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,jze(O)?O.nativeEvent:O,"escape-key")}),R=Gg(O=>{var M;const j=()=>{var B;k(O),(B=j_(O))==null||B.removeEventListener("keydown",j)};(M=j_(O))==null||M.addEventListener("keydown",j)}),$=Gg(O=>{var M;const j=_.current;_.current=!1;const B=x.current;if(x.current=!1,f==="click"&&B||j||typeof b=="function"&&!b(O))return;const U=j_(O),V="["+VW("inert")+"]",D=Zv(o).querySelectorAll(V);let z=Ti(U)?U:null;for(;z&&!V0(z);){const G=xm(z);if(V0(G)||!Ti(G))break;z=G}if(D.length&&Ti(U)&&!Bze(U)&&!sA(U,o)&&Array.from(D).every(G=>!sA(z,G)))return;if(Dl(U)&&o){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,ee=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let le=ee&&O.offsetX>U.clientWidth;if(ee&&Pc(U).direction==="rtl"&&(le=O.offsetX<=U.offsetWidth-U.clientWidth),le||G&&O.offsetY>U.clientHeight)return}const W=(M=a.current.floatingContext)==null?void 0:M.nodeId,F=y&&D8(y.nodesRef.current,W).some(G=>{var ee;return P8(O,(ee=G.context)==null?void 0:ee.elements.floating)});if(P8(O,o)||P8(O,s)||F)return;const H=y?D8(y.nodesRef.current,W):[];if(H.length>0){let G=!0;if(H.forEach(ee=>{var le;if((le=ee.context)!=null&&le.open&&!ee.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,O,"outside-press")}),P=Gg(O=>{var M;const j=()=>{var B;$(O),(B=j_(O))==null||B.removeEventListener(f,j)};(M=j_(O))==null||M.addEventListener(f,j)});return I.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=S,a.current.__outsidePressBubbles=E;function O(B){r(!1,B,"ancestor-scroll")}const M=Zv(o);l&&M.addEventListener("keydown",T?R:k,T),b&&M.addEventListener(f,A?P:$,A);let j=[];return p&&(Ti(s)&&(j=um(s)),Ti(o)&&(j=j.concat(um(o))),!Ti(i)&&i&&i.contextElement&&(j=j.concat(um(i.contextElement)))),j=j.filter(B=>{var U;return B!==((U=M.defaultView)==null?void 0:U.visualViewport)}),j.forEach(B=>{B.addEventListener("scroll",O,{passive:!0})}),()=>{l&&M.removeEventListener("keydown",T?R:k,T),b&&M.removeEventListener(f,A?P:$,A),j.forEach(B=>{B.removeEventListener("scroll",O)})}},[a,o,s,i,l,b,f,n,r,p,u,S,E,k,T,R,$,A,P]),I.useEffect(()=>{_.current=!1},[b,f]),I.useMemo(()=>u?{reference:{onKeyDown:k,[HVe[h]]:O=>{d&&r(!1,O.nativeEvent,"reference-press")}},floating:{onKeyDown:k,onMouseDown(){x.current=!0},onMouseUp(){x.current=!0},[qVe[f]]:()=>{_.current=!0}}}:{},[u,d,f,h,r,k])}function GVe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Nbe(),s=I.useRef({}),[o]=I.useState(()=>FVe()),a=UW()!=null,[u,l]=I.useState(r.reference),c=Gg((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=I.useMemo(()=>({setPositionReference:l}),[]),d=I.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return I.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function HW(e){e===void 0&&(e={});const{nodeId:t}=e,n=GVe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=I.useState(null),[a,u]=I.useState(null),c=(i==null?void 0:i.reference)||s,f=I.useRef(null),d=zW();hh(()=>{c&&(f.current=c)},[c]);const h=RVe({...e,elements:{...i,...a&&{reference:a}}}),p=I.useCallback(b=>{const _=Ti(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(_),h.refs.setReference(_)},[h.refs]),m=I.useCallback(b=>{(Ti(b)||b===null)&&(f.current=b,o(b)),(Ti(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!Ti(b))&&h.refs.setReference(b)},[h.refs]),g=I.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=I.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=I.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return hh(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(_=>_.id===t);b&&(b.context=v)}),I.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function YVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=I.useRef(!1),c=I.useRef(),f=I.useRef(!0);return I.useEffect(()=>{if(!a)return;const d=Bu(o);function h(){!n&&Dl(o)&&o===soe(Zv(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),I.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),I.useEffect(()=>()=>{clearTimeout(c.current)},[]),I.useMemo(()=>a?{reference:{onPointerDown(d){$ze(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=j_(d.nativeEvent);if(u&&Ti(h))try{if(Mze()&&Lze())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!zze(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Ti(h)&&h.hasAttribute(VW("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=soe(o?o.ownerDocument:document);!h&&g===o||sA((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||sA(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const boe="active",_oe="selected";function $8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[boe]:o,[_oe]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[boe,_oe].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function KVe(e){e===void 0&&(e=[]);const t=e,n=I.useCallback(s=>$8(s,e,"reference"),t),r=I.useCallback(s=>$8(s,e,"floating"),t),i=I.useCallback(s=>$8(s,e,"item"),e.map(s=>s==null?void 0:s.item));return I.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const XVe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function QVe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=XVe.get(o))!=null?n:o,u=Nbe(),c=UW()!=null;return I.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function Dbe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function woe(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Eoe(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const JVe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function ZVe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Ee(t),height:Ee(t),transform:"rotate(45deg)",position:"absolute",[JVe[u]]:Ee(r)},f=Ee(-t/2);return u==="left"?{...c,...woe(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...woe(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Eoe(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Eoe(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const qW=I.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Qh();return s?w.jsx("div",{...l,ref:c,style:{...u,...ZVe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});qW.displayName="@mantine/core/FloatingArrow";const[eHe,$be]=Ia("Popover component was not found in the tree");function YM({children:e,active:t=!0,refProp:n="ref"}){const r=q7e(t),i=ns(r,e==null?void 0:e.ref);return ky(e)?I.cloneElement(e,{[n]:i}):e}function Mbe(e){return w.jsx(RW,{tabIndex:-1,"data-autofocus":!0,...e})}YM.displayName="@mantine/core/FocusTrap";Mbe.displayName="@mantine/core/FocusTrapInitialFocus";YM.InitialFocus=Mbe;function tHe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const nHe={},Lbe=I.forwardRef((e,t)=>{const{children:n,target:r,...i}=xe("Portal",nHe,e),[s,o]=I.useState(!1),a=I.useRef(null);return Ab(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:tHe(i),wW(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:PI.createPortal(w.jsx(w.Fragment,{children:n}),a.current)});Lbe.displayName="@mantine/core/Portal";function MI({withinPortal:e=!0,children:t,...n}){return e?w.jsx(Lbe,{...n,children:t}):w.jsx(w.Fragment,{children:t})}MI.displayName="@mantine/core/OptionalPortal";const aT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Ee(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),eN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ee(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ee(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ee(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ee(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ee(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ee(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ee(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ee(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...aT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...aT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...aT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...aT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...aT("top"),common:{transformOrigin:"top right"}}},xoe={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function rHe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in eN?{transitionProperty:eN[e].transitionProperty,...i,...eN[e].common,...eN[e][xoe[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[xoe[t]]}}function iHe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=js(),l=q1e(),c=u.respectReducedMotion?l:!1,[f,d]=I.useState(c?0:e),[h,p]=I.useState(r?"entered":"exited"),m=I.useRef(-1),g=I.useRef(-1),y=v=>{const b=v?i:s,_=v?o:a;window.clearTimeout(m.current);const x=c?0:v?e:t;d(x),x===0?(typeof b=="function"&&b(),typeof _=="function"&&_(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{zBe.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof _=="function"&&_(),p(v?"entered":"exited")},x)})})};return Xf(()=>{y(r)},[r]),I.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function Xm({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=iHe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?w.jsx(w.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:w.jsx(w.Fragment,{children:s(rHe({transition:t,duration:f,state:d,timingFunction:h}))})}Xm.displayName="@mantine/core/Transition";var Fbe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const sHe={},WW=je((e,t)=>{var g,y,v,b;const n=xe("PopoverDropdown",sHe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=$be(),h=j1e({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=ns(t,d.floating);return d.disabled?null:w.jsx(MI,{...d.portalProps,withinPortal:d.withinPortal,children:w.jsx(Xm,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:_=>w.jsx(YM,{active:d.trapFocus,children:w.jsxs(Ne,{...p,...f,variant:u,ref:m,onKeyDownCapture:P7e(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{..._,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Ee(d.width)},i]}),children:[o,w.jsx(qW,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});WW.classes=Fbe;WW.displayName="@mantine/core/PopoverDropdown";const oHe={refProp:"ref",popupType:"dialog"},jbe=je((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=xe("PopoverTarget",oHe,e);if(!ky(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=$be(),u=ns(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return I.cloneElement(n,{...o,...l,...a.targetProps,className:Zi(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});jbe.displayName="@mantine/core/PopoverTarget";function Bbe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=I.useState(0);I.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return EVe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),Xf(()=>{t.update()},r),Xf(()=>{s(o=>o+1)},[e])}function aHe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function uHe(e,t){const n=aHe(e.middlewares),r=[Ibe(e.offset)];return n.shift&&r.push(BW(typeof n.shift=="boolean"?{limiter:hoe(),padding:5}:{limiter:hoe(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?V7():V7(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?H7():H7(n.inline)),r.push(kbe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(PVe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function lHe(e){const[t,n]=jo({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=HW({strategy:e.strategy,placement:e.position,middleware:uHe(e,()=>s)});return Bbe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),Xf(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),Xf(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const cHe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Vc("popover"),__staticSelector:"Popover",width:"max-content"},fHe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:ci(t),"--popover-shadow":bW(n)}});function lr(e){var be,Ae,Ve,ut,Nt,qe;const t=xe("Popover",cHe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:_,portalProps:x,closeOnEscape:S,clickOutsideEvents:E,trapFocus:T,onClose:A,onOpen:k,onChange:R,zIndex:$,radius:P,shadow:O,id:M,defaultOpened:j,__staticSelector:B,withRoles:U,disabled:V,returnFocus:D,variant:z,keepMounted:W,vars:F,floatingStrategy:H,...G}=t,ee=mt({name:B,props:t,classes:Fbe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:F,varsResolver:fHe}),le=I.useRef(null),[de,he]=I.useState(null),[ye,Ce]=I.useState(null),{dir:ve}=Qh(),Ye=nl(M),Ue=lHe({middlewares:c,width:l,position:Dbe(ve,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:le,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:j,onChange:R,onOpen:k,onClose:A,strategy:H});$7e(()=>b&&Ue.onClose(),E,[de,ye]);const pt=I.useCallback(me=>{he(me),Ue.floating.refs.setReference(me)},[Ue.floating.refs.setReference]),rt=I.useCallback(me=>{Ce(me),Ue.floating.refs.setFloating(me)},[Ue.floating.refs.setFloating]);return w.jsx(eHe,{value:{returnFocus:D,disabled:V,controlled:Ue.controlled,reference:pt,floating:rt,x:Ue.floating.x,y:Ue.floating.y,arrowX:(Ve=(Ae=(be=Ue.floating)==null?void 0:be.middlewareData)==null?void 0:Ae.arrow)==null?void 0:Ve.x,arrowY:(qe=(Nt=(ut=Ue.floating)==null?void 0:ut.middlewareData)==null?void 0:Nt.arrow)==null?void 0:qe.y,opened:Ue.opened,arrowRef:le,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ue.floating.placement,trapFocus:T,withinPortal:_,portalProps:x,zIndex:$,radius:P,shadow:O,closeOnEscape:S,onClose:Ue.onClose,onToggle:Ue.onToggle,getTargetId:()=>`${Ye}-target`,getDropdownId:()=>`${Ye}-dropdown`,withRoles:U,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:z,keepMounted:W,getStyles:ee},children:n})}lr.Target=jbe;lr.Dropdown=WW;lr.displayName="@mantine/core/Popover";lr.extend=e=>e;var Nf={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const dHe=I.forwardRef(({className:e,...t},n)=>w.jsxs(Ne,{component:"span",className:Zi(Nf.barsLoader,e),...t,ref:n,children:[w.jsx("span",{className:Nf.bar}),w.jsx("span",{className:Nf.bar}),w.jsx("span",{className:Nf.bar})]})),hHe=I.forwardRef(({className:e,...t},n)=>w.jsxs(Ne,{component:"span",className:Zi(Nf.dotsLoader,e),...t,ref:n,children:[w.jsx("span",{className:Nf.dot}),w.jsx("span",{className:Nf.dot}),w.jsx("span",{className:Nf.dot})]})),pHe=I.forwardRef(({className:e,...t},n)=>w.jsx(Ne,{component:"span",className:Zi(Nf.ovalLoader,e),...t,ref:n})),Ube={bars:dHe,oval:pHe,dots:hHe},mHe={loaders:Ube,type:"oval"},gHe=(e,{size:t,color:n})=>({root:{"--loader-size":un(t,"loader-size"),"--loader-color":n?ai(n,e):void 0}}),Oc=je((e,t)=>{const n=xe("Loader",mHe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=mt({name:"Loader",props:n,classes:Nf,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:gHe});return p?w.jsx(Ne,{...g("root"),ref:t,...m,children:p}):w.jsx(Ne,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});Oc.defaultLoaders=Ube;Oc.classes=Nf;Oc.displayName="@mantine/core/Loader";var KM={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Soe={orientation:"horizontal"},yHe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Ee(t)}}),GW=je((e,t)=>{const n=xe("ActionIconGroup",Soe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ActionIconGroup",Soe,e),p=mt({name:"ActionIconGroup",props:n,classes:KM,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:yHe,rootSelector:"group"});return w.jsx(Ne,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});GW.classes=KM;GW.displayName="@mantine/core/ActionIconGroup";const vHe={},bHe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":un(t,"ai-size"),"--ai-radius":n===void 0?void 0:ci(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Tm=Bs((e,t)=>{const n=xe("ActionIcon",vHe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:_,mod:x,...S}=n,E=mt({name:["ActionIcon",p],props:n,className:r,style:u,classes:KM,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:bHe});return w.jsxs(ao,{...E("root",{active:!v&&!l&&!b}),...S,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},x],children:[w.jsx(Xm,{mounted:!!l,transition:"slide-down",duration:150,children:T=>w.jsx(Ne,{component:"span",...E("loader",{style:T}),"aria-hidden":!0,children:w.jsx(Oc,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),w.jsx(Ne,{component:"span",mod:{loading:l},...E("icon"),children:y})]})});Tm.classes=KM;Tm.displayName="@mantine/core/ActionIcon";Tm.Group=GW;const zbe=I.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>w.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:w.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));zbe.displayName="@mantine/core/CloseIcon";var Vbe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const _He={variant:"subtle"},wHe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":un(t,"cb-size"),"--cb-radius":n===void 0?void 0:ci(n),"--cb-icon-size":Ee(r)}}),kb=Bs((e,t)=>{const n=xe("CloseButton",_He,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=mt({name:"CloseButton",props:n,className:a,style:l,classes:Vbe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:wHe});return w.jsxs(ao,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||w.jsx(zbe,{}),i]})});kb.classes=Vbe;kb.displayName="@mantine/core/CloseButton";function EHe(e){return I.Children.toArray(e).filter(Boolean)}var Hbe={root:"m_4081bf90"};const xHe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},SHe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Ol(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Zn=je((e,t)=>{const n=xe("Group",xHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,_=EHe(u),x=_.length,S=Ol(l??"md"),T={childWidth:`calc(${100/x}% - (${S} - ${S} / ${x}))`},A=mt({name:"Group",props:n,stylesCtx:T,className:i,style:s,classes:Hbe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:SHe});return w.jsx(Ne,{...A("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:_})});Zn.classes=Hbe;Zn.displayName="@mantine/core/Group";var qbe={root:"m_9814e45f"};const THe={zIndex:Vc("modal")},CHe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Od(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Ee(i)})`:void 0,"--overlay-radius":s===void 0?void 0:ci(s),"--overlay-z-index":o==null?void 0:o.toString()}}),oA=Bs((e,t)=>{const n=xe("Overlay",THe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,_=mt({name:"Overlay",props:n,classes:qbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:CHe});return w.jsx(Ne,{ref:t,..._("root"),mod:[{center:c,fixed:l},v],...b,children:f})});oA.classes=qbe;oA.displayName="@mantine/core/Overlay";const[AHe,Qm]=Ia("ModalBase component was not found in tree");function IHe({opened:e,transitionDuration:t}){const[n,r]=I.useState(e),i=I.useRef(),o=q1e()?0:t;return I.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function kHe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=nl(e),[u,l]=I.useState(!1),[c,f]=I.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=IHe({opened:n,transitionDuration:d});return V1e("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),j1e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Wbe=I.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},_)=>{const{_id:x,titleMounted:S,bodyMounted:E,shouldLockScroll:T,setTitleMounted:A,setBodyMounted:k}=kHe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return w.jsx(MI,{...c,withinPortal:l,children:w.jsx(AHe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${x}-title`,getBodyId:()=>`${x}-body`,titleMounted:S,bodyMounted:E,setTitleMounted:A,setBodyMounted:k,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:w.jsx(BM,{enabled:T&&f,...v,children:w.jsx(Ne,{ref:_,...b,__vars:{...g,"--mb-z-index":(h||Vc("modal")).toString(),"--mb-shadow":bW(p),"--mb-padding":Ol(m)},children:d})})})})});function RHe(){const e=Qm();return I.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var _E={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const YW=I.forwardRef(({className:e,...t},n)=>{const r=RHe(),i=Qm();return w.jsx(Ne,{ref:n,...t,id:r,className:Zi({[_E.body]:!i.unstyled},e)})});YW.displayName="@mantine/core/ModalBaseBody";const KW=I.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Qm();return w.jsx(kb,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Zi({[_E.close]:!i.unstyled},e),unstyled:i.unstyled})});KW.displayName="@mantine/core/ModalBaseCloseButton";const Gbe=I.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Qm();return w.jsx(Xm,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>w.jsx("div",{...n,className:Zi({[_E.inner]:!a.unstyled},n.className),children:w.jsx(YM,{active:a.opened&&a.trapFocus,children:w.jsx(WM,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Zi({[_E.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),XW=I.forwardRef(({className:e,...t},n)=>{const r=Qm();return w.jsx(Ne,{component:"header",ref:n,className:Zi({[_E.header]:!r.unstyled},e),...t})});XW.displayName="@mantine/core/ModalBaseHeader";const NHe={duration:200,timingFunction:"ease",transition:"fade"};function PHe(e){const t=Qm();return{...NHe,...t.transitionProps,...e}}const QW=I.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Qm(),o=PHe(t);return w.jsx(Xm,{mounted:s.opened,...o,transition:"fade",children:a=>w.jsx(oA,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});QW.displayName="@mantine/core/ModalBaseOverlay";function OHe(){const e=Qm();return I.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const JW=I.forwardRef(({className:e,...t},n)=>{const r=OHe(),i=Qm();return w.jsx(Ne,{component:"h2",ref:n,className:Zi({[_E.title]:!i.unstyled},e),...t,id:r})});JW.displayName="@mantine/core/ModalBaseTitle";function Ybe({children:e}){return w.jsx(w.Fragment,{children:e})}const[DHe,Lx]=Cb({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var qc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Toe={},$He=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${oo(t)} - ${Ee(2)})`}}),XM=je((e,t)=>{const n=xe("InputDescription",Toe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=xe("InputDescription",Toe,n),p=Lx(),m=mt({name:["InputWrapper",c],props:n,classes:qc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:$He}),g=f&&(p==null?void 0:p.getStyles)||m;return w.jsx(Ne,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});XM.classes=qc;XM.displayName="@mantine/core/InputDescription";const MHe={},LHe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${oo(t)} - ${Ee(2)})`}}),QM=je((e,t)=>{const n=xe("InputError",MHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=mt({name:["InputWrapper",c],props:n,classes:qc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:LHe}),m=Lx(),g=f&&(m==null?void 0:m.getStyles)||p;return w.jsx(Ne,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});QM.classes=qc;QM.displayName="@mantine/core/InputError";const Coe={labelElement:"label"},FHe=(e,{size:t})=>({label:{"--input-label-size":oo(t),"--input-asterisk-color":void 0}}),JM=je((e,t)=>{const n=xe("InputLabel",Coe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=xe("InputLabel",Coe,n),b=mt({name:["InputWrapper",m],props:n,classes:qc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:FHe}),_=Lx(),x=(_==null?void 0:_.getStyles)||b;return w.jsxs(Ne,{...x("label",_!=null&&_.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:S=>{h==null||h(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,f&&w.jsx("span",{...x("required"),"aria-hidden":!0,children:" *"})]})});JM.classes=qc;JM.displayName="@mantine/core/InputLabel";const Aoe={},ZW=je((e,t)=>{const n=xe("InputPlaceholder",Aoe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=xe("InputPlaceholder",Aoe,n),p=mt({name:["InputPlaceholder",l],props:n,classes:qc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return w.jsx(Ne,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});ZW.classes=qc;ZW.displayName="@mantine/core/InputPlaceholder";function jHe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const BHe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},UHe=(e,{size:t})=>({label:{"--input-label-size":oo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${oo(t)} - ${Ee(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${oo(t)} - ${Ee(2)})`}}),eG=je((e,t)=>{const n=xe("InputWrapper",BHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:_,children:x,withAsterisk:S,id:E,required:T,__stylesApiProps:A,mod:k,...R}=n,$=mt({name:["InputWrapper",f],props:A||n,classes:qc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:UHe}),P={size:l,variant:c,__staticSelector:f},O=nl(E),M=typeof S=="boolean"?S:T,j=(b==null?void 0:b.id)||`${O}-error`,B=(v==null?void 0:v.id)||`${O}-description`,U=O,V=!!m&&typeof m!="boolean",D=!!g,z=`${V?j:""} ${D?B:""}`,W=z.trim().length>0?z.trim():void 0,F=(y==null?void 0:y.id)||`${O}-label`,H=p&&w.jsx(JM,{labelElement:_,id:F,htmlFor:U,required:M,...P,...y,children:p},"label"),G=D&&w.jsx(XM,{...v,...P,size:(v==null?void 0:v.size)||P.size,id:(v==null?void 0:v.id)||B,children:g},"description"),ee=w.jsx(I.Fragment,{children:d(x)},"input"),le=V&&I.createElement(QM,{...b,...P,size:(b==null?void 0:b.size)||P.size,key:"error",id:(b==null?void 0:b.id)||j},m),de=h.map(he=>{switch(he){case"label":return H;case"input":return ee;case"description":return G;case"error":return le;default:return null}});return w.jsx(DHe,{value:{getStyles:$,describedBy:W,inputId:U,labelId:F,...jHe(h,{hasDescription:D,hasError:V})},children:w.jsx(Ne,{ref:t,variant:c,size:l,mod:[{error:!!m},k],...$("root"),...R,children:de})})});eG.classes=qc;eG.displayName="@mantine/core/InputWrapper";const zHe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},VHe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":un(t.size,"input-height"),"--input-fz":oo(t.size),"--input-radius":t.radius===void 0?void 0:ci(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ee(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ee(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?un(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Mi=Bs((e,t)=>{const n=xe("Input",zHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:_,rightSectionPointerEvents:x,leftSectionPointerEvents:S,variant:E,vars:T,pointer:A,multiline:k,radius:R,id:$,withAria:P,withErrorStyles:O,mod:M,inputSize:j,...B}=n,{styleProps:U,rest:V}=Ox(B),D=Lx(),z={offsetBottom:D==null?void 0:D.offsetBottom,offsetTop:D==null?void 0:D.offsetTop},W=mt({name:["Input",l],props:c||n,classes:qc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:T,varsResolver:VHe}),F=P?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":D==null?void 0:D.describedBy,id:(D==null?void 0:D.inputId)||$}:{};return w.jsxs(Ne,{...W("wrapper"),...U,...d,mod:[{error:!!h&&O,pointer:A,disabled:p,multiline:k,"data-with-right-section":!!v,"data-with-left-section":!!m},M],variant:E,size:f,children:[m&&w.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),w.jsx(Ne,{component:"input",...V,...F,ref:t,required:u,mod:{disabled:p,error:!!h&&O},variant:E,__size:j,...W("input")}),v&&w.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});Mi.classes=qc;Mi.Wrapper=eG;Mi.Label=JM;Mi.Error=QM;Mi.Description=XM;Mi.Placeholder=ZW;Mi.displayName="@mantine/core/Input";function Kbe(e,t,n){const r=xe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:_,inputContainer:x,inputWrapperOrder:S,withAsterisk:E,variant:T,vars:A,mod:k,...R}=r,{styleProps:$,rest:P}=Ox(R),O={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:_,inputContainer:x,inputWrapperOrder:S,withAsterisk:E,variant:T,id:v,mod:k,...y};return{...P,classNames:u,styles:l,unstyled:f,wrapperProps:{...O,...$},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:T,id:v}}}const HHe={__staticSelector:"InputBase",withAria:!0},Wc=Bs((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=Kbe("InputBase",HHe,e);return w.jsx(Mi.Wrapper,{...r,children:w.jsx(Mi,{...n,...i,ref:t})})});Wc.classes={...Mi.classes,...Mi.Wrapper.classes};Wc.displayName="@mantine/core/InputBase";const qHe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Xbe={root:"m_8bffd616"};const WHe={},ii=Bs((e,t)=>{const n=xe("Flex",WHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=mt({name:"Flex",classes:Xbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=js(),b=HM(),_=Z1e({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:qHe});return w.jsxs(w.Fragment,{children:[_.hasResponsiveStyles&&w.jsx(DI,{selector:`.${b}`,styles:_.styles,media:_.media}),w.jsx(Ne,{ref:t,...y("root",{className:b,style:Nx(_.inlineStyles)}),...g})]})});ii.classes=Xbe;ii.displayName="@mantine/core/Flex";function GHe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function YHe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=I.useRef(),[s,o]=I.useState(!1),[a,u]=I.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=I.useRef(),d=I.useRef();return I.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),I.useEffect(()=>{if(t){const h=p=>{GHe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),Q7e(()=>{W1e()!=="test"&&o(!0)},20,{autoInvoke:!0}),J7e(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var Qbe={root:"m_96b553a6"};const KHe={},XHe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),tG=je((e,t)=>{const n=xe("FloatingIndicator",KHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=mt({name:"FloatingIndicator",classes:Qbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:XHe}),g=I.useRef(null),{initialized:y,hidden:v}=YHe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=ns(t,g);return!l||!c?null:w.jsx(Ne,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});tG.displayName="@mantine/core/FloatingIndicator";tG.classes=Qbe;function W7({style:e,size:t=16,...n}){return w.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Ee(t),height:Ee(t),display:"block"},...n,children:w.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}W7.displayName="@mantine/core/AccordionChevron";var Jbe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const QHe={},JHe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:ci(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},nG=je((e,t)=>{const n=xe("Alert",QHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,..._}=n,x=mt({name:"Alert",classes:Jbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:JHe}),S=nl(h),E=f&&`${S}-title`||void 0,T=`${S}-body`;return w.jsx(Ne,{id:S,...x("root",{variant:v}),variant:v,ref:t,..._,role:"alert","aria-describedby":T,"aria-labelledby":E,children:w.jsxs("div",{...x("wrapper"),children:[p&&w.jsx("div",{...x("icon"),children:p}),w.jsxs("div",{...x("body"),children:[f&&w.jsx("div",{...x("title"),"data-with-close-button":m||void 0,children:w.jsx("span",{id:E,...x("label"),children:f})}),d&&w.jsx("div",{id:T,...x("message"),"data-variant":v,children:d})]}),m&&w.jsx(kb,{...x("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});nG.classes=Jbe;nG.displayName="@mantine/core/Alert";var Zbe={root:"m_b6d8b162"};function ZHe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const eqe={inherit:!1},tqe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":oo(i),"--text-lh":F1e(i),"--text-gradient":t==="gradient"?M7(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?ai(s,e):void 0}}),xt=Bs((e,t)=>{const n=xe("Text",eqe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,_=mt({name:["Text",l],props:n,classes:Zbe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:tqe});return w.jsx(Ne,{..._("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":ZHe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});xt.classes=Zbe;xt.displayName="@mantine/core/Text";var e_e={root:"m_849cf0da"};const nqe={underline:"hover"},Rb=Bs((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=xe("Anchor",nqe,e);return w.jsx(xt,{component:"a",ref:t,className:Zi({[e_e.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Rb.classes=e_e;Rb.displayName="@mantine/core/Anchor";const[rqe,Fx]=Ia("AppShell was not found in tree");var Py={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const iqe={},rG=je((e,t)=>{const n=xe("AppShellAside",iqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Fx();return h.disabled?null:w.jsx(Ne,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});rG.classes=Py;rG.displayName="@mantine/core/AppShellAside";const sqe={},iG=je((e,t)=>{var p;const n=xe("AppShellFooter",sqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Fx();return h.disabled?null:w.jsx(Ne,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Zi({[BM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});iG.classes=Py;iG.displayName="@mantine/core/AppShellFooter";const oqe={},sG=je((e,t)=>{var p;const n=xe("AppShellHeader",oqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Fx();return h.disabled?null:w.jsx(Ne,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Zi({[BM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});sG.classes=Py;sG.displayName="@mantine/core/AppShellHeader";const aqe={},oG=je((e,t)=>{const n=xe("AppShellMain",aqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Fx();return w.jsx(Ne,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});oG.classes=Py;oG.displayName="@mantine/core/AppShellMain";function LI(e){return typeof e=="object"?e.base:e}function FI(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function jI(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function uqe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),FI(s)){const f=Ee(LI(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(jI(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Ee(s.base),e["--app-shell-aside-offset"]=Ee(s.base)),$i(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Ee(s[f]),t[f]["--app-shell-aside-offset"]=Ee(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=_W(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function lqe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(FI(r)){const o=Ee(LI(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}jI(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Ee(r.base),s&&(e["--app-shell-footer-offset"]=Ee(r.base))),$i(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Ee(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Ee(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function cqe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(FI(r)){const o=Ee(LI(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}jI(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Ee(r.base),s&&(e["--app-shell-header-offset"]=Ee(r.base))),$i(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Ee(r[o]),s&&(t[o]["--app-shell-header-offset"]=Ee(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function fqe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),FI(s)){const f=Ee(LI(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(jI(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Ee(s.base),e["--app-shell-navbar-offset"]=Ee(s.base)),$i(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Ee(s[f]),t[f]["--app-shell-navbar-offset"]=Ee(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=_W(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function M8(e){return Number(e)===0?"0px":Ol(e)}function dqe({padding:e,baseStyles:t,minMediaStyles:n}){FI(e)&&(t["--app-shell-padding"]=M8(LI(e))),jI(e)&&(e.base&&(t["--app-shell-padding"]=M8(e.base)),$i(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=M8(e[r]))}))}function hqe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};fqe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),uqe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),cqe({baseStyles:u,minMediaStyles:o,header:t}),lqe({baseStyles:u,minMediaStyles:o,footer:n}),dqe({baseStyles:u,minMediaStyles:o,padding:i});const l=gD($i(o),s).map(d=>({query:`(min-width: ${pD(d.px)})`,styles:o[d.value]})),c=gD($i(a),s).map(d=>({query:`(max-width: ${pD(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function pqe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=js(),o=Ry(),{media:a,baseStyles:u}=hqe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return w.jsx(DI,{media:a,styles:u,selector:o.cssVariablesSelector})}const mqe={},aG=je((e,t)=>{const n=xe("AppShellNavbar",mqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Fx();return h.disabled?null:w.jsx(Ne,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});aG.classes=Py;aG.displayName="@mantine/core/AppShellNavbar";const gqe={},uG=Bs((e,t)=>{const n=xe("AppShellSection",gqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=Fx();return w.jsx(Ne,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});uG.classes=Py;uG.displayName="@mantine/core/AppShellSection";function yqe({transitionDuration:e,disabled:t}){const[n,r]=I.useState(!0),i=I.useRef(),s=I.useRef();return V1e("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),Ab(()=>{I.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const vqe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Vc("app")},bqe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),cs=je((e,t)=>{const n=xe("AppShell",vqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:_,mod:x,...S}=n,E=mt({name:"AppShell",classes:Py,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bqe}),T=yqe({disabled:y,transitionDuration:d});return w.jsxs(rqe,{value:{getStyles:E,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:_},children:[w.jsx(pqe,{navbar:l,header:p,aside:v,footer:b,padding:f}),w.jsx(Ne,{ref:t,...E("root"),mod:[{resizing:T,layout:g,disabled:y},x],...S})]})});cs.classes=Py;cs.displayName="@mantine/core/AppShell";cs.Navbar=aG;cs.Header=sG;cs.Main=oG;cs.Aside=rG;cs.Footer=iG;cs.Section=uG;function t_e(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>t_e(t))}:e}function n_e(e){return e?e.map(t=>t_e(t)):[]}function lG(e){return e.reduce((t,n)=>"group"in n?{...t,...lG(n.items)}:(t[n.value]=n,t),{})}var qu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const _qe={error:null},wqe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":un(t,"combobox-chevron-size")}}),cG=je((e,t)=>{const n=xe("ComboboxChevron",_qe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=mt({name:"ComboboxChevron",classes:qu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:wqe,rootSelector:"chevron"});return w.jsx(Ne,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:w.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});cG.classes=qu;cG.displayName="@mantine/core/ComboboxChevron";const[Eqe,Gc]=Ia("Combobox component was not found in tree"),r_e=I.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>w.jsx(kb,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));r_e.displayName="@mantine/core/ComboboxClearButton";const xqe={},fG=je((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=xe("ComboboxDropdown",xqe,e),u=Gc();return w.jsx(lr.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});fG.classes=qu;fG.displayName="@mantine/core/ComboboxDropdown";const Sqe={refProp:"ref"},i_e=je((e,t)=>{const{children:n,refProp:r}=xe("ComboboxDropdownTarget",Sqe,e);if(Gc(),!ky(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return w.jsx(lr.Target,{ref:t,refProp:r,children:n})});i_e.displayName="@mantine/core/ComboboxDropdownTarget";const Tqe={},dG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxEmpty",Tqe,e),u=Gc();return w.jsx(Ne,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});dG.classes=qu;dG.displayName="@mantine/core/ComboboxEmpty";function hG({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Gc(),[a,u]=I.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const Cqe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},s_e=je((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxEventsTarget",Cqe,e);if(!ky(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Gc(),f=hG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return I.cloneElement(n,{...f,...l,[r]:ns(t,c.store.targetRef,n==null?void 0:n.ref)})});s_e.displayName="@mantine/core/ComboboxEventsTarget";const Aqe={},pG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxFooter",Aqe,e),u=Gc();return w.jsx(Ne,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});pG.classes=qu;pG.displayName="@mantine/core/ComboboxFooter";const Iqe={},mG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=xe("ComboboxGroup",Iqe,e),c=Gc();return w.jsxs(Ne,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&w.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});mG.classes=qu;mG.displayName="@mantine/core/ComboboxGroup";const kqe={},gG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxHeader",kqe,e),u=Gc();return w.jsx(Ne,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});gG.classes=qu;gG.displayName="@mantine/core/ComboboxHeader";function o_e({value:e,valuesDivider:t=",",...n}){return w.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}o_e.displayName="@mantine/core/ComboboxHiddenInput";const Rqe={},yG=je((e,t)=>{const n=xe("ComboboxOption",Rqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Gc(),v=I.useId(),b=l||v;return w.jsx(Ne,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:_=>{var x;h?_.preventDefault():((x=y.onOptionSubmit)==null||x.call(y,n.value,n),u==null||u(_))},onMouseDown:_=>{_.preventDefault(),f==null||f(_)},onMouseOver:_=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(_)}})});yG.classes=qu;yG.displayName="@mantine/core/ComboboxOption";const Nqe={},vG=je((e,t)=>{const n=xe("ComboboxOptions",Nqe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Gc(),d=nl(a);return I.useEffect(()=>{f.store.setListId(d)},[d]),w.jsx(Ne,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});vG.classes=qu;vG.displayName="@mantine/core/ComboboxOptions";const Pqe={withAriaAttributes:!0,withKeyboardNavigation:!0},bG=je((e,t)=>{const n=xe("ComboboxSearch",Pqe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Gc(),h=d.getStyles("search"),p=hG({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return w.jsx(Mi,{ref:ns(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});bG.classes=qu;bG.displayName="@mantine/core/ComboboxSearch";const Oqe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},a_e=je((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxTarget",Oqe,e);if(!ky(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Gc(),f=hG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=I.cloneElement(n,{...f,...l});return w.jsx(lr.Target,{ref:ns(t,c.store.targetRef),children:d})});a_e.displayName="@mantine/core/ComboboxTarget";function Dqe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function $qe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Mqe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function ZM({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=jo({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=I.useRef(null),c=I.useRef(-1),f=I.useRef(null),d=I.useRef(null),h=I.useRef(-1),p=I.useRef(-1),m=I.useRef(-1),g=I.useCallback((j="unknown")=>{a||(u(!0),i==null||i(j))},[u,i,a]),y=I.useCallback((j="unknown")=>{a&&(u(!1),r==null||r(j))},[u,r,a]),v=I.useCallback((j="unknown")=>{a?y(j):g(j)},[y,g,a]),b=I.useCallback(()=>{const j=document.querySelector(`#${l.current} [data-combobox-selected]`);j==null||j.removeAttribute("data-combobox-selected"),j==null||j.removeAttribute("aria-selected")},[]),_=I.useCallback(j=>{const B=document.getElementById(l.current),U=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!U)return null;const V=j>=U.length?0:j<0?U.length-1:j;return c.current=V,U!=null&&U[V]&&!U[V].hasAttribute("data-combobox-disabled")?(b(),U[V].setAttribute("data-combobox-selected","true"),U[V].setAttribute("aria-selected","true"),U[V].scrollIntoView({block:"nearest",behavior:o}),U[V].id):null},[o,b]),x=I.useCallback(()=>{const j=document.querySelector(`#${l.current} [data-combobox-active]`);if(j){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=Array.from(B).findIndex(V=>V===j);return _(U)}return _(0)},[_]),S=I.useCallback(()=>_($qe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[_,s]),E=I.useCallback(()=>_(Dqe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[_,s]),T=I.useCallback(()=>_(Mqe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[_]),A=I.useCallback((j="selected",B)=>{m.current=window.setTimeout(()=>{var D;const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),V=Array.from(U).findIndex(z=>z.hasAttribute(`data-combobox-${j}`));c.current=V,B!=null&&B.scrollIntoView&&((D=U[V])==null||D.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=I.useCallback(()=>{c.current=-1,b()},[b]),R=I.useCallback(()=>{const j=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=j==null?void 0:j[c.current];B==null||B.click()},[]),$=I.useCallback(j=>{l.current=j},[]),P=I.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),O=I.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),M=I.useCallback(()=>c.current,[]);return I.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:M,selectOption:_,selectFirstOption:T,selectActiveOption:x,selectNextOption:S,selectPreviousOption:E,resetSelectedOption:k,updateSelectedOptionIndex:A,listId:l.current,setListId:$,clickSelectedOption:R,searchRef:f,focusSearchInput:P,targetRef:d,focusTarget:O}}const Lqe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},Fqe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":oo(t),"--combobox-option-padding":un(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Ee(n),"--combobox-option-fz":oo(t),"--combobox-option-padding":un(t,"combobox-option-padding")}});function bn(e){const t=xe("Combobox",Lqe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=ZM(),y=o||g,v=mt({name:h||"Combobox",classes:qu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:Fqe}),b=()=>{l==null||l(),y.closeDropdown()};return w.jsx(Eqe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:w.jsx(lr,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const jqe=e=>e;bn.extend=jqe;bn.classes=qu;bn.displayName="@mantine/core/Combobox";bn.Target=a_e;bn.Dropdown=fG;bn.Options=vG;bn.Option=yG;bn.Search=bG;bn.Empty=dG;bn.Chevron=cG;bn.Footer=pG;bn.Header=gG;bn.EventsTarget=s_e;bn.DropdownTarget=i_e;bn.Group=mG;bn.ClearButton=r_e;bn.HiddenInput=o_e;var u_e={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Bqe=u_e,_G=I.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,..._},x)=>{const S=mt({name:e,props:t,className:n,style:y,classes:u_e,classNames:r,styles:i,unstyled:s});return w.jsx(Ne,{...S("root"),ref:x,__vars:{"--label-fz":oo(d),"--label-lh":un(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,..._,children:w.jsxs(Ne,{component:p,htmlFor:p==="label"?l:void 0,...S("body"),children:[o,w.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&w.jsx(Ne,{component:m,htmlFor:m==="label"?l:void 0,...S("label"),"data-disabled":c||void 0,children:a}),u&&w.jsx(Mi.Description,{size:d,__inheritStyles:!1,...S("description"),children:u}),f&&typeof f!="boolean"&&w.jsx(Mi.Error,{size:d,__inheritStyles:!1,...S("error"),children:f})]})]})})});_G.displayName="@mantine/core/InlineInput";const l_e=I.createContext(null),Uqe=l_e.Provider,c_e=()=>I.useContext(l_e),[zqe,Vqe]=Cb();var f_e={card:"m_26775b0a"};const Hqe={withBorder:!0},qqe=(e,{radius:t})=>({card:{"--card-radius":ci(t)}}),wG=je((e,t)=>{const n=xe("CheckboxCard",Hqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=mt({name:"CheckboxCard",classes:f_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qqe,rootSelector:"card"}),g=c_e(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return w.jsx(zqe,{value:{checked:y},children:w.jsx(ao,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});wG.displayName="@mantine/core/CheckboxCard";wG.classes=f_e;function d_e({children:e,role:t}){const n=Lx();return n?w.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):w.jsx(w.Fragment,{children:e})}const Wqe={},EG=je((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("CheckboxGroup",Wqe,e),[c,f]=jo({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return w.jsx(Uqe,{value:{value:c,onChange:d,size:s},children:w.jsx(Mi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:w.jsx(d_e,{role:"group",children:a})})})});EG.classes=Mi.Wrapper.classes;EG.displayName="@mantine/core/CheckboxGroup";function h_e({size:e,style:t,...n}){const r=e!==void 0?{width:Ee(e),height:Ee(e),...t}:t;return w.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:w.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function p_e({indeterminate:e,...t}){return e?w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:w.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):w.jsx(h_e,{...t})}var m_e={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const Gqe={icon:p_e},Yqe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Xh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":un(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:ci(t),"--checkbox-color":s==="outline"?u:ai(n,e),"--checkbox-icon-color":i?ai(i,e):Px(o,e)?Ny({color:n,theme:e,autoContrast:o}):void 0}}},xG=je((e,t)=>{const n=xe("CheckboxIndicator",Gqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,_=l,x=mt({name:"CheckboxIndicator",classes:m_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Yqe,rootSelector:"indicator"}),S=Vqe(),E=typeof m=="boolean"||typeof c=="boolean"?m||c:(S==null?void 0:S.checked)||!1;return w.jsx(Ne,{ref:t,...x("indicator",{variant:y}),variant:y,mod:[{checked:E,disabled:v},g],...b,children:w.jsx(_,{indeterminate:c,...x("icon")})})});xG.displayName="@mantine/core/CheckboxIndicator";xG.classes=m_e;var g_e={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const Kqe={labelPosition:"right",icon:p_e},Xqe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Xh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":un(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:ci(t),"--checkbox-color":s==="outline"?u:ai(n,e),"--checkbox-icon-color":i?ai(i,e):Px(o,e)?Ny({color:n,theme:e,autoContrast:o}):void 0}}},Cm=je((e,t)=>{const n=xe("Checkbox",Kqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:_,variant:x,indeterminate:S,icon:E,rootRef:T,iconColor:A,onChange:k,autoContrast:R,mod:$,...P}=n,O=c_e(),M=d||(O==null?void 0:O.size),j=E,B=mt({name:"Checkbox",props:n,classes:g_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Xqe}),{styleProps:U,rest:V}=Ox(P),D=nl(f),z=O?{checked:O.value.includes(V.value),onChange:W=>{O.onChange(W),k==null||k(W)}}:{};return w.jsx(_G,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:D,size:M,labelPosition:y,label:c,description:v,error:b,disabled:_,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||g||void 0,variant:x,ref:T,mod:$,...U,...p,children:w.jsxs(Ne,{...B("inner"),mod:{"data-label-position":y},children:[w.jsx(Ne,{component:"input",id:D,ref:t,checked:g,disabled:_,mod:{error:!!b,indeterminate:S},...B("input",{focusable:!0,variant:x}),onChange:k,...V,...z,type:"checkbox"}),w.jsx(j,{indeterminate:S,...B("icon")})]})})});Cm.classes={...g_e,...Bqe};Cm.displayName="@mantine/core/Checkbox";Cm.Group=EG;Cm.Indicator=xG;Cm.Card=wG;function wE(e){return"group"in e}function y_e({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;wE(o)&&i.push({group:o.group,items:y_e({options:o.items,search:t,limit:n-i.length})}),wE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function Qqe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function v_e(e,t=new Set){if(Array.isArray(e))for(const n of e)if(wE(n))v_e(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function Jqe(e,t){return Array.isArray(e)?e.includes(t):e===t}function b_e({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!wE(e)){const a=Jqe(n,e.value),u=t&&a&&w.jsx(h_e,{className:qu.optionsDropdownCheckIcon}),l=w.jsxs(w.Fragment,{children:[r==="left"&&u,w.jsx("span",{children:e.label}),r==="right"&&u]});return w.jsx(bn.Option,{value:e.value,disabled:e.disabled,className:Zi({[qu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>w.jsx(b_e,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return w.jsx(bn.Group,{label:e.group,children:o})}function __e({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){v_e(e);const b=typeof i=="string"?(r||y_e)({options:e,search:u?i:"",limit:s??1/0}):e,_=Qqe(b),x=b.map(S=>w.jsx(b_e,{data:S,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},wE(S)?S.group:S.value));return w.jsx(bn.Dropdown,{hidden:t||n&&_,children:w.jsxs(bn.Options,{labelledBy:p,"aria-label":y,children:[a?w.jsx(Dx.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:x}):x,_&&d&&w.jsx(bn.Empty,{children:d})]})})}var w_e={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const Zqe={},eWe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":un(s,"badge-height"),"--badge-padding-x":un(s,"badge-padding-x"),"--badge-fz":un(s,"badge-fz"),"--badge-radius":t===void 0?void 0:ci(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?ai(n,e):void 0}}},Pw=Bs((e,t)=>{const n=xe("Badge",Zqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,..._}=n,x=mt({name:"Badge",props:n,classes:w_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eWe});return w.jsxs(Ne,{variant:m,mod:[{block:g,circle:v},b],...x("root",{variant:m}),ref:t,..._,children:[d&&w.jsx("span",{...x("section"),"data-position":"left",children:d}),w.jsx("span",{...x("label"),children:p}),h&&w.jsx("span",{...x("section"),"data-position":"right",children:h})]})});Pw.classes=w_e;Pw.displayName="@mantine/core/Badge";var E_e={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const tWe={},nWe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?ai(t,e):void 0,"--burger-size":un(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),SG=je((e,t)=>{const n=xe("Burger",tWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=mt({name:"Burger",classes:E_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nWe});return w.jsxs(ao,{...p("root"),ref:t,...h,children:[w.jsx(Ne,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});SG.classes=E_e;SG.displayName="@mantine/core/Burger";var eL={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Ioe={orientation:"horizontal"},rWe=(e,{borderWidth:t})=>({group:{"--button-border-width":Ee(t)}}),TG=je((e,t)=>{const n=xe("ButtonGroup",Ioe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ButtonGroup",Ioe,e),p=mt({name:"ButtonGroup",props:n,classes:eL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:rWe,rootSelector:"group"});return w.jsx(Ne,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});TG.classes=eL;TG.displayName="@mantine/core/ButtonGroup";const iWe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ee(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},sWe={},oWe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":un(s,"button-height"),"--button-padding-x":un(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?oo(s.replace("compact-","")):oo(s),"--button-radius":t===void 0?void 0:ci(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},sr=Bs((e,t)=>{const n=xe("Button",sWe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":_,autoContrast:x,mod:S,...E}=n,T=mt({name:"Button",props:n,classes:eL,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:oWe}),A=!!l,k=!!c;return w.jsxs(ao,{ref:t,...T("root",{active:!a&&!p&&!_}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||_,loading:p,block:f,"with-left-section":A,"with-right-section":k},S],...E,children:[w.jsx(Xm,{mounted:!!p,transition:iWe,duration:150,children:R=>w.jsx(Ne,{component:"span",...T("loader",{style:R}),"aria-hidden":!0,children:w.jsx(Oc,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),w.jsxs("span",{...T("inner"),children:[l&&w.jsx(Ne,{component:"span",...T("section"),mod:{position:"left"},children:l}),w.jsx(Ne,{component:"span",mod:{loading:p},...T("label"),children:u}),c&&w.jsx(Ne,{component:"span",...T("section"),mod:{position:"right"},children:c})]})]})});sr.classes=eL;sr.displayName="@mantine/core/Button";sr.Group=TG;const[aWe,uWe]=Ia("Card component was not found in tree");var CG={root:"m_e615b15f",section:"m_599a2148"};const lWe={},tL=Bs((e,t)=>{const n=xe("CardSection",lWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=uWe();return w.jsx(Ne,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});tL.classes=CG;tL.displayName="@mantine/core/CardSection";const cWe={},fWe=(e,{padding:t})=>({root:{"--card-padding":Ol(t)}}),Nb=Bs((e,t)=>{const n=xe("Card",cWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=mt({name:"Card",props:n,classes:CG,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fWe}),h=I.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===tL?I.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return w.jsx(aWe,{value:{getStyles:d},children:w.jsx(WM,{ref:t,unstyled:a,...d("root"),...f,children:p})})});Nb.classes=CG;Nb.displayName="@mantine/core/Card";Nb.Section=tL;var x_e={root:"m_4451eb3a"};const dWe={},Bo=Bs((e,t)=>{const n=xe("Center",dWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=mt({name:"Center",props:n,classes:x_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return w.jsx(Ne,{ref:t,mod:[{inline:l},c],...d("root"),...f})});Bo.classes=x_e;Bo.displayName="@mantine/core/Center";var S_e={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const koe={withShadow:!0},hWe=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:ci(t),"--cs-size":Ee(n)}}),Ih=Bs((e,t)=>{const n=xe("ColorSwatch",koe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,size:c,radius:f,withShadow:d,children:h,variant:p,...m}=xe("ColorSwatch",koe,n),g=mt({name:"ColorSwatch",props:n,classes:S_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hWe});return w.jsxs(Ne,{ref:t,variant:p,size:c,...g("root",{focusable:!0}),...m,children:[w.jsx("span",{...g("alphaOverlay")}),d&&w.jsx("span",{...g("shadowOverlay")}),w.jsx("span",{...g("colorOverlay",{style:{backgroundColor:l}})}),w.jsx("span",{...g("childrenOverlay"),children:h})]})});Ih.classes=S_e;Ih.displayName="@mantine/core/ColorSwatch";const[pWe,AG]=Cb(null),IG=I.forwardRef(({position:e,...t},n)=>w.jsx(Ne,{ref:n,__vars:{"--thumb-y-offset":`${e.y*100}%`,"--thumb-x-offset":`${e.x*100}%`},...t}));IG.displayName="@mantine/core/ColorPickerThumb";var kG={wrapper:"m_fee9c77",preview:"m_9dddfbac",body:"m_bffecc3e",sliders:"m_3283bb96",thumb:"m_40d572ba",swatch:"m_d8ee6fd8",swatches:"m_5711e686",saturation:"m_202a296e",saturationOverlay:"m_11b3db02",slider:"m_d856d47d",sliderOverlay:"m_8f327113"};const mWe={},RG=je((e,t)=>{var U;const n=xe("ColorSlider",mWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onChange:l,onChangeEnd:c,maxValue:f,round:d,size:h="md",focusable:p=!0,value:m,overlays:g,thumbColor:y="transparent",onScrubStart:v,onScrubEnd:b,__staticSelector:_="ColorPicker",...x}=n,S=mt({name:_,classes:kG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a}),T=((U=AG())==null?void 0:U.getStyles)||S,A=js(),[k,R]=I.useState({y:0,x:m/f}),$=I.useRef(k),P=V=>d?Math.round(V*f):V*f,{ref:O}=zM(({x:V,y:D})=>{$.current={x:V,y:D},l==null||l(P(V))},{onScrubEnd:()=>{const{x:V}=$.current;c==null||c(P(V)),b==null||b()},onScrubStart:v});Xf(()=>{R({y:0,x:m/f})},[m]);const M=(V,D)=>{V.preventDefault();const z=H1e(D);l==null||l(P(z.x)),c==null||c(P(z.x))},j=V=>{switch(V.key){case"ArrowRight":{M(V,{x:k.x+.05,y:k.y});break}case"ArrowLeft":{M(V,{x:k.x-.05,y:k.y});break}}},B=g.map((V,D)=>I.createElement("div",{...T("sliderOverlay"),style:V,key:D}));return w.jsxs(Ne,{...x,ref:ns(O,t),...T("slider"),role:"slider","aria-valuenow":m,"aria-valuemax":f,"aria-valuemin":0,tabIndex:p?0:-1,onKeyDown:j,"data-focus-ring":A.focusRing,__vars:{"--cp-thumb-size":`var(--cp-thumb-size-${h})`},children:[B,w.jsx(IG,{position:k,...T("thumb",{style:{top:Ee(1),background:y}})})]})});RG.displayName="@mantine/core/ColorSlider";function vc(e,t=0,n=10**t){return Math.round(n*e)/n}function gWe({h:e,s:t,l:n,a:r}){const i=t*((n<50?n:100-n)/100);return{h:e,s:i>0?2*i/(n+i)*100:0,v:n+i,a:r}}const yWe={grad:360/400,turn:360,rad:360/(Math.PI*2)};function vWe(e,t="deg"){return Number(e)*(yWe[t]||1)}const bWe=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function Roe(e){const t=bWe.exec(e);return t?gWe({h:vWe(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}}function G7({r:e,g:t,b:n,a:r}){const i=Math.max(e,t,n),s=i-Math.min(e,t,n),o=s?i===e?(t-n)/s:i===t?2+(n-e)/s:4+(e-t)/s:0;return{h:vc(60*(o<0?o+6:o),3),s:vc(i?s/i*100:0,3),v:vc(i/255*100,3),a:r}}function Y7(e){const t=e[0]==="#"?e.slice(1):e;return t.length===3?G7({r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:1}):G7({r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:1})}function _We(e){const t=e[0]==="#"?e.slice(1):e,n=o=>vc(parseInt(o,16)/255,3);if(t.length===4){const o=t.slice(0,3),a=n(t[3]+t[3]);return{...Y7(o),a}}const r=t.slice(0,6),i=n(t.slice(6,8));return{...Y7(r),a:i}}const wWe=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function Noe(e){const t=wWe.exec(e);return t?G7({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}}const T_e={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},EWe={hex:Y7,hexa:_We,rgb:Noe,rgba:Noe,hsl:Roe,hsla:Roe};function xWe(e){for(const[,t]of Object.entries(T_e))if(t.test(e))return!0;return!1}function tN(e){if(typeof e!="string")return{h:0,s:0,v:0,a:1};if(e==="transparent")return{h:0,s:0,v:0,a:0};const t=e.trim();for(const[n,r]of Object.entries(T_e))if(r.test(t))return EWe[n](t);return{h:0,s:0,v:0,a:1}}const SWe={},C_e=I.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=xe("AlphaSlider",SWe,e);return w.jsx(RG,{...o,ref:t,value:n,onChange:a=>r==null?void 0:r(vc(a,2)),onChangeEnd:a=>i==null?void 0:i(vc(a,2)),maxValue:1,round:!1,"data-alpha":!0,overlays:[{backgroundImage:"linear-gradient(45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(-45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--slider-checkers) 75%), linear-gradient(-45deg, var(--mantine-color-body) 75%, var(--slider-checkers) 75%)",backgroundSize:`${Ee(8)} ${Ee(8)}`,backgroundPosition:`0 0, 0 ${Ee(4)}, ${Ee(4)} ${Ee(-4)}, ${Ee(-4)} 0`},{backgroundImage:`linear-gradient(90deg, transparent, ${s})`},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${Ee(1)} inset, rgb(0, 0, 0, .15) 0 0 ${Ee(4)} inset`}]})});C_e.displayName="@mantine/core/AlphaSlider";function A_e({h:e,s:t,v:n,a:r}){const i=e/360*6,s=t/100,o=n/100,a=Math.floor(i),u=o*(1-s),l=o*(1-(i-a)*s),c=o*(1-(1-i+a)*s),f=a%6;return{r:vc([o,l,u,u,c,o][f]*255),g:vc([c,o,o,l,u,u][f]*255),b:vc([u,u,c,o,o,l][f]*255),a:vc(r,2)}}function Poe(e,t){const{r:n,g:r,b:i,a:s}=A_e(e);return t?`rgba(${n}, ${r}, ${i}, ${vc(s,2)})`:`rgb(${n}, ${r}, ${i})`}function Ooe({h:e,s:t,v:n,a:r},i){const s=(200-t)*n/100,o={h:Math.round(e),s:Math.round(s>0&&s<200?t*n/100/(s<=100?s:200-s)*100:0),l:Math.round(s/2)};return i?`hsla(${o.h}, ${o.s}%, ${o.l}%, ${vc(r,2)})`:`hsl(${o.h}, ${o.s}%, ${o.l}%)`}function BP(e){const t=e.toString(16);return t.length<2?`0${t}`:t}function I_e(e){const{r:t,g:n,b:r}=A_e(e);return`#${BP(t)}${BP(n)}${BP(r)}`}function TWe(e){const t=Math.round(e.a*255);return`${I_e(e)}${BP(t)}`}const L8={hex:I_e,hexa:e=>TWe(e),rgb:e=>Poe(e,!1),rgba:e=>Poe(e,!0),hsl:e=>Ooe(e,!1),hsla:e=>Ooe(e,!0)};function Ig(e,t){return t?e in L8?L8[e](t):L8.hex(t):"#000000"}const k_e=I.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=xe("HueSlider",{},e);return w.jsx(RG,{...o,ref:t,value:n,onChange:r,onChangeEnd:i,maxValue:360,thumbColor:`hsl(${n}, 100%, 50%)`,round:!0,"data-hue":!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${Ee(1)} inset, rgb(0, 0, 0, .15) 0 0 ${Ee(4)} inset`}]})});k_e.displayName="@mantine/core/HueSlider";function R_e({className:e,onChange:t,onChangeEnd:n,value:r,saturationLabel:i,focusable:s=!0,size:o,color:a,onScrubStart:u,onScrubEnd:l,...c}){const{getStyles:f}=AG(),[d,h]=I.useState({x:r.s/100,y:1-r.v/100}),p=I.useRef(d),{ref:m}=zM(({x:v,y:b})=>{p.current={x:v,y:b},t({s:Math.round(v*100),v:Math.round((1-b)*100)})},{onScrubEnd:()=>{const{x:v,y:b}=p.current;n({s:Math.round(v*100),v:Math.round((1-b)*100)}),l==null||l()},onScrubStart:u});I.useEffect(()=>{h({x:r.s/100,y:1-r.v/100})},[r.s,r.v]);const g=(v,b)=>{v.preventDefault();const _=H1e(b);t({s:Math.round(_.x*100),v:Math.round((1-_.y)*100)}),n({s:Math.round(_.x*100),v:Math.round((1-_.y)*100)})},y=v=>{switch(v.key){case"ArrowUp":{g(v,{y:d.y-.05,x:d.x});break}case"ArrowDown":{g(v,{y:d.y+.05,x:d.x});break}case"ArrowRight":{g(v,{x:d.x+.05,y:d.y});break}case"ArrowLeft":{g(v,{x:d.x-.05,y:d.y});break}}};return w.jsxs(Ne,{...f("saturation"),ref:m,...c,role:"slider","aria-label":i,"aria-valuenow":d.x,"aria-valuetext":Ig("rgba",r),tabIndex:s?0:-1,onKeyDown:y,children:[w.jsx("div",{...f("saturationOverlay",{style:{backgroundColor:`hsl(${r.h}, 100%, 50%)`}})}),w.jsx("div",{...f("saturationOverlay",{style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}})}),w.jsx("div",{...f("saturationOverlay",{style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}})}),w.jsx(IG,{position:d,...f("thumb",{style:{backgroundColor:a}})})]})}R_e.displayName="@mantine/core/Saturation";const N_e=I.forwardRef(({className:e,datatype:t,setValue:n,onChangeEnd:r,size:i,focusable:s,data:o,swatchesPerRow:a,...u},l)=>{const c=AG(),f=o.map((d,h)=>I.createElement(Ih,{...c.getStyles("swatch"),unstyled:c.unstyled,component:"button",type:"button",color:d,key:h,radius:"sm",onClick:()=>{n(d),r==null||r(d)},"aria-label":d,tabIndex:s?0:-1,"data-swatch":!0}));return w.jsx(Ne,{...c.getStyles("swatches"),ref:l,...u,children:f})});N_e.displayName="@mantine/core/Swatches";const CWe={swatchesPerRow:7,withPicker:!0,focusable:!0,size:"md",__staticSelector:"ColorPicker"},AWe=(e,{size:t,swatchesPerRow:n})=>({wrapper:{"--cp-preview-size":un(t,"cp-preview-size"),"--cp-width":un(t,"cp-width"),"--cp-body-spacing":Ol(t),"--cp-swatch-size":`${100/n}%`,"--cp-thumb-size":un(t,"cp-thumb-size"),"--cp-saturation-height":un(t,"cp-saturation-height")}}),NG=je((e,t)=>{const n=xe("ColorPicker",CWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,format:l,value:c,defaultValue:f,onChange:d,onChangeEnd:h,withPicker:p,size:m,saturationLabel:g,hueLabel:y,alphaLabel:v,focusable:b,swatches:_,swatchesPerRow:x,fullWidth:S,onColorSwatchClick:E,__staticSelector:T,mod:A,...k}=n,R=mt({name:T,props:n,classes:kG,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"wrapper",vars:u,varsResolver:AWe}),$=I.useRef(l),P=I.useRef(),O=I.useRef(-1),M=I.useRef(!1),j=l==="hexa"||l==="rgba"||l==="hsla",[B,U,V]=jo({value:c,defaultValue:f,finalValue:"#FFFFFF",onChange:d}),[D,z]=I.useState(tN(B)),W=()=>{window.clearTimeout(O.current),M.current=!0},F=()=>{window.clearTimeout(O.current),O.current=window.setTimeout(()=>{M.current=!1},200)},H=G=>{z(ee=>{const le={...ee,...G};return P.current=Ig($.current,le),le}),U(P.current)};return Xf(()=>{xWe(c)&&!M.current&&z(tN(c))},[c]),Xf(()=>{$.current=l,U(Ig(l,D))},[l]),w.jsx(pWe,{value:{getStyles:R,unstyled:a},children:w.jsxs(Ne,{ref:t,...R("wrapper"),size:m,mod:[{"full-width":S},A],...k,children:[p&&w.jsxs(w.Fragment,{children:[w.jsx(R_e,{value:D,onChange:H,onChangeEnd:({s:G,v:ee})=>h==null?void 0:h(Ig($.current,{...D,s:G,v:ee})),color:B,size:m,focusable:b,saturationLabel:g,onScrubStart:W,onScrubEnd:F}),w.jsxs("div",{...R("body"),children:[w.jsxs("div",{...R("sliders"),children:[w.jsx(k_e,{value:D.h,onChange:G=>H({h:G}),onChangeEnd:G=>h==null?void 0:h(Ig($.current,{...D,h:G})),size:m,focusable:b,"aria-label":y,onScrubStart:W,onScrubEnd:F}),j&&w.jsx(C_e,{value:D.a,onChange:G=>H({a:G}),onChangeEnd:G=>{h==null||h(Ig($.current,{...D,a:G}))},size:m,color:Ig("hex",D),focusable:b,"aria-label":v,onScrubStart:W,onScrubEnd:F})]}),j&&w.jsx(Ih,{color:B,radius:"sm",size:"var(--cp-preview-size)",...R("preview")})]})]}),Array.isArray(_)&&w.jsx(N_e,{data:_,swatchesPerRow:x,focusable:b,setValue:U,onChangeEnd:G=>{const ee=Ig(l,tN(G));E==null||E(ee),h==null||h(ee),V||z(tN(G))}})]})})});NG.classes=kG;NG.displayName="@mantine/core/ColorPicker";var P_e={root:"m_7485cace"};const IWe={},kWe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:un(t,"container-size")}}),Jh=je((e,t)=>{const n=xe("Container",IWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=mt({name:"Container",classes:P_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kWe});return w.jsx(Ne,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Jh.classes=P_e;Jh.displayName="@mantine/core/Container";var O_e={root:"m_3eebeb36",label:"m_9e365f20"};const RWe={orientation:"horizontal"},NWe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?ai(t,e):void 0,"--divider-border-style":n,"--divider-size":un(r,"divider-size")}}),nL=je((e,t)=>{const n=xe("Divider",RWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=mt({name:"Divider",classes:O_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:NWe});return w.jsx(Ne,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&w.jsx(Ne,{component:"span",mod:{position:d},...m("label"),children:f})})});nL.classes=O_e;nL.displayName="@mantine/core/Divider";const[PWe,jx]=Ia("Drawer component was not found in tree");var Jm={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const OWe={},rL=je((e,t)=>{const n=xe("DrawerBody",OWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=jx();return w.jsx(YW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});rL.classes=Jm;rL.displayName="@mantine/core/DrawerBody";const DWe={},iL=je((e,t)=>{const n=xe("DrawerCloseButton",DWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=jx();return w.jsx(KW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});iL.classes=Jm;iL.displayName="@mantine/core/DrawerCloseButton";const $We={},sL=je((e,t)=>{const n=xe("DrawerContent",$We,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=jx(),d=f.scrollAreaComponent||Ybe;return w.jsx(Gbe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:w.jsx(d,{style:{height:"100vh"},children:u})})});sL.classes=Jm;sL.displayName="@mantine/core/DrawerContent";const MWe={},oL=je((e,t)=>{const n=xe("DrawerHeader",MWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=jx();return w.jsx(XW,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});oL.classes=Jm;oL.displayName="@mantine/core/DrawerHeader";const LWe={},aL=je((e,t)=>{const n=xe("DrawerOverlay",LWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=jx();return w.jsx(QW,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});aL.classes=Jm;aL.displayName="@mantine/core/DrawerOverlay";function FWe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function jWe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const BWe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},UWe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},zWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Vc("modal"),position:"left"},VWe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":un(n,"drawer-size"),"--drawer-flex":jWe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":FWe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Ee(r)}}),uL=je((e,t)=>{const n=xe("DrawerRoot",zWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Qh(),m=mt({name:"Drawer",classes:Jm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:VWe}),g=(p==="rtl"?UWe:BWe)[c];return w.jsx(PWe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:w.jsx(Wbe,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});uL.classes=Jm;uL.displayName="@mantine/core/DrawerRoot";const HWe={},lL=je((e,t)=>{const n=xe("DrawerTitle",HWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=jx();return w.jsx(JW,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});lL.classes=Jm;lL.displayName="@mantine/core/DrawerTitle";const qWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Vc("modal"),withOverlay:!0,withCloseButton:!0},Zh=je((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=xe("Drawer",qWe,e),l=!!n||s;return w.jsxs(uL,{ref:t,...u,children:[r&&w.jsx(aL,{...i}),w.jsxs(sL,{children:[l&&w.jsxs(oL,{children:[n&&w.jsx(lL,{children:n}),s&&w.jsx(iL,{...o})]}),w.jsx(rL,{children:a})]})]})});Zh.classes=Jm;Zh.displayName="@mantine/core/Drawer";Zh.Root=uL;Zh.Overlay=aL;Zh.Content=sL;Zh.Body=rL;Zh.Header=oL;Zh.Title=lL;Zh.CloseButton=iL;function WWe({open:e,close:t,openDelay:n,closeDelay:r}){const i=I.useRef(-1),s=I.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return I.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[GWe,D_e]=Ia("Grid component was not found in tree"),K7=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Doe=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":K7(e,t),$oe=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Moe=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function YWe({span:e,order:t,offset:n,selector:r}){var d;const i=js(),s=D_e(),a=tC(e)===void 0?12:tC(e),u=Nx({"--col-order":(d=tC(t))==null?void 0:d.toString(),"--col-flex-grow":$oe(a,s.grow),"--col-flex-basis":K7(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Doe(a,s.columns,s.grow),"--col-offset":Moe(tC(n),s.columns)}),l=$i(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=$oe(e[p],s.grow),h[p]["--col-flex-basis"]=K7(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Doe(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Moe(n[p],s.columns)),h},{}),f=gD($i(l),i).filter(h=>$i(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return w.jsx(DI,{styles:u,media:f,selector:r})}var PG={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const KWe={span:12},OG=je((e,t)=>{const n=xe("GridCol",KWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=D_e(),h=HM();return w.jsxs(w.Fragment,{children:[w.jsx(YWe,{selector:`.${h}`,span:u,order:l,offset:c}),w.jsx(Ne,{ref:t,...d.getStyles("col",{className:Zi(i,h),style:s,classNames:r,styles:o}),...f})]})});OG.classes=PG;OG.displayName="@mantine/core/GridCol";function XWe({gutter:e,selector:t}){const n=js(),r=Nx({"--grid-gutter":Ol(tC(e))}),i=$i(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=Ol(e[u])),a),{}),o=gD($i(i),n).filter(a=>$i(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return w.jsx(DI,{styles:r,media:o,selector:t})}const QWe={gutter:"md",grow:!1,columns:12},JWe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),bc=je((e,t)=>{const n=xe("Grid",QWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=mt({name:"Grid",classes:PG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:JWe}),y=HM();return w.jsxs(GWe,{value:{getStyles:g,grow:l,columns:f},children:[w.jsx(XWe,{selector:`.${y}`,...n}),w.jsx(Ne,{ref:t,...g("root",{className:y}),...m,children:w.jsx("div",{...g("inner"),children:p})})]})});bc.classes=PG;bc.displayName="@mantine/core/Grid";bc.Col=OG;var $_e={root:"m_9e117634"};const ZWe={},eGe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:ci(t),"--image-object-fit":n}}),Oy=Bs((e,t)=>{const n=xe("Image",ZWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=I.useState(!c);I.useEffect(()=>y(!c),[c]);const v=mt({name:"Image",classes:$_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eGe});return g&&h?w.jsx(Ne,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):w.jsx(Ne,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});Oy.classes=$_e;Oy.displayName="@mantine/core/Image";function X7(){return X7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X7.apply(null,arguments)}function tGe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var nGe=I.useLayoutEffect,rGe=function(t){var n=I.useRef(t);return nGe(function(){n.current=t}),n},Loe=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},iGe=function(t,n){var r=I.useRef();return I.useCallback(function(i){t.current=i,r.current&&Loe(r.current,null),r.current=n,n&&Loe(n,i)},[n])},Foe={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},sGe=function(t){Object.keys(Foe).forEach(function(n){t.style.setProperty(n,Foe[n],"important")})},joe=sGe,Oa=null,Boe=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function oGe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Oa||(Oa=document.createElement("textarea"),Oa.setAttribute("tabindex","-1"),Oa.setAttribute("aria-hidden","true"),joe(Oa)),Oa.parentNode===null&&document.body.appendChild(Oa);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Oa.style[h]=o[h]}),joe(Oa),Oa.value=t;var u=Boe(Oa,e);Oa.value=t,u=Boe(Oa,e),Oa.value="x";var l=Oa.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Uoe=function(){},aGe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},uGe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],lGe=!!document.documentElement.currentStyle,cGe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=aGe(uGe,n),i=r.boxSizing;if(i==="")return null;lGe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},fGe=cGe;function M_e(e,t,n){var r=rGe(n);I.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var dGe=function(t){M_e(window,"resize",t)},hGe=function(t){M_e(document.fonts,"loadingdone",t)},pGe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],mGe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Uoe:o,u=t.onHeightChange,l=u===void 0?Uoe:u,c=tGe(t,pGe),f=c.value!==void 0,d=I.useRef(null),h=iGe(d,n),p=I.useRef(0),m=I.useRef(),g=function(){var b=d.current,_=r&&m.current?m.current:fGe(b);if(_){m.current=_;var x=oGe(_,b.value||b.placeholder||"x",s,i),S=x[0],E=x[1];p.current!==S&&(p.current=S,b.style.setProperty("height",S+"px","important"),l(S,{rowHeight:E}))}},y=function(b){f||g(),a(b)};return I.useLayoutEffect(g),dGe(g),hGe(g),I.createElement("textarea",X7({},c,{onChange:y,ref:h}))},gGe=I.forwardRef(mGe);const yGe={},DG=je((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=xe("Textarea",yGe,e),u=n&&W1e()!=="test",l=u?{maxRows:r,minRows:i}:{};return w.jsx(Wc,{component:u?gGe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});DG.classes=Wc.classes;DG.displayName="@mantine/core/Textarea";const[vGe,bGe]=Ia("List component was not found in tree");var $G={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const _Ge={},MG=je((e,t)=>{const n=xe("ListItem",_Ge,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=bGe(),h=u||d.icon,p={classNames:r,styles:o};return w.jsx(Ne,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:w.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&w.jsx("span",{...d.getStyles("itemIcon",p),children:h}),w.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});MG.classes=$G;MG.displayName="@mantine/core/ListItem";const wGe={type:"unordered"},EGe=(e,{size:t,spacing:n})=>({root:{"--list-fz":oo(t),"--list-lh":F1e(t),"--list-spacing":Ol(n)}}),S0=je((e,t)=>{const n=xe("List",wGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=mt({name:"List",classes:$G,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EGe});return w.jsx(vGe,{value:{center:p,icon:d,getStyles:v},children:w.jsx(Ne,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});S0.classes=$G;S0.displayName="@mantine/core/List";S0.Item=MG;var L_e={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const zoe={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Vc("overlay")},xGe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),ep=je((e,t)=>{const n=xe("LoadingOverlay",zoe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=js(),g=mt({name:"LoadingOverlay",classes:L_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xGe}),y={...zoe.overlayProps,...f};return w.jsx(Xm,{transition:"fade",...l,mounted:!!d,children:v=>w.jsxs(Ne,{...g("root",{style:v}),ref:t,...p,children:[w.jsx(Oc,{...g("loader"),unstyled:a,...c}),w.jsx(oA,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),w.jsx(oA,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});ep.classes=L_e;ep.displayName="@mantine/core/LoadingOverlay";const[SGe,BI]=Ia("Menu component was not found in the tree");var Bx={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const TGe={},LG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuDivider",TGe,e),u=BI();return w.jsx(Ne,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});LG.classes=Bx;LG.displayName="@mantine/core/MenuDivider";const CGe={},FG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=xe("MenuDropdown",CGe,e),f=I.useRef(null),d=BI(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=Qp(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=Qp(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return w.jsxs(lr.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:ns(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[w.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});FG.classes=Bx;FG.displayName="@mantine/core/MenuDropdown";const AGe={},jG=Bs((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=xe("MenuItem",AGe,e),p=BI(),m=js(),{dir:g}=Qh(),y=I.useRef(),v=p.getItemIndex(y.current),b=h,_=Qp(b.onMouseLeave,()=>p.setHovered(-1)),x=Qp(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),S=Qp(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),E=Qp(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),T=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,A=a?Xh({color:a,theme:m}):null;return w.jsxs(ao,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:E,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:ns(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:x,onMouseLeave:_,onClick:S,onKeyDown:L1e({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":A!=null&&A.isThemeColor&&(A==null?void 0:A.shade)===void 0?`var(--mantine-color-${A.color}-6)`:T==null?void 0:T.color,"--menu-item-hover":T==null?void 0:T.hover},children:[l&&w.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&w.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&w.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});jG.classes=Bx;jG.displayName="@mantine/core/MenuItem";const IGe={},BG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuLabel",IGe,e),u=BI();return w.jsx(Ne,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});BG.classes=Bx;BG.displayName="@mantine/core/MenuLabel";const kGe={refProp:"ref"},F_e=I.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=xe("MenuTarget",kGe,e);if(!ky(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=BI(),o=Qp(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=Qp(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=Qp(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return w.jsx(lr.Target,{refProp:r,popupType:"menu",ref:t,...i,children:I.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});F_e.displayName="@mantine/core/MenuTarget";const RGe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Su(e){const t=xe("Menu",RGe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:_,keepMounted:x,...S}=t,E=mt({name:"Menu",classes:Bx,props:t,classNames:m,styles:g,unstyled:y}),[T,{setHovered:A,resetHovered:k}]=D7e(),[R,$]=jo({value:s,defaultValue:o,finalValue:!1,onChange:u}),[P,O]=I.useState(!1),M=()=>{$(!1),O(!1),R&&(i==null||i())},j=()=>{$(!0),!R&&(r==null||r())},B=()=>{R?M():j()},{openDropdown:U,closeDropdown:V}=WWe({open:j,close:M,closeDelay:p,openDelay:h}),D=F=>O7e("[data-menu-item]","[data-menu-dropdown]",F),{resolvedClassNames:z,resolvedStyles:W}=Ym({classNames:m,styles:g,props:t});return Xf(()=>{k()},[R]),w.jsx(SGe,{value:{getStyles:E,opened:R,toggleDropdown:B,getItemIndex:D,hovered:T,setHovered:A,openedViaClick:P,setOpenedViaClick:O,closeOnItemClick:l,closeDropdown:d==="click"?M:V,openDropdown:d==="click"?j:U,closeDropdownImmediately:M,loop:c,trigger:d,unstyled:y,menuItemTabIndex:_},children:w.jsx(lr,{...S,opened:R,onChange:B,defaultOpened:o,trapFocus:x?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:W,unstyled:y,variant:v,keepMounted:x,children:n})})}Su.extend=e=>e;Su.classes=Bx;Su.displayName="@mantine/core/Menu";Su.Item=jG;Su.Label=BG;Su.Dropdown=FG;Su.Target=F_e;Su.Divider=LG;const[NGe,Ux]=Ia("Modal component was not found in tree");var Zm={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const PGe={},cL=je((e,t)=>{const n=xe("ModalBody",PGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ux();return w.jsx(YW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});cL.classes=Zm;cL.displayName="@mantine/core/ModalBody";const OGe={},fL=je((e,t)=>{const n=xe("ModalCloseButton",OGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ux();return w.jsx(KW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});fL.classes=Zm;fL.displayName="@mantine/core/ModalCloseButton";const DGe={},dL=je((e,t)=>{const n=xe("ModalContent",DGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=Ux(),f=c.scrollAreaComponent||Ybe;return w.jsx(Gbe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:w.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Ee(c.yOffset)} * 2))`},children:u})})});dL.classes=Zm;dL.displayName="@mantine/core/ModalContent";const $Ge={},hL=je((e,t)=>{const n=xe("ModalHeader",$Ge,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ux();return w.jsx(XW,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});hL.classes=Zm;hL.displayName="@mantine/core/ModalHeader";const MGe={},pL=je((e,t)=>{const n=xe("ModalOverlay",MGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ux();return w.jsx(QW,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});pL.classes=Zm;pL.displayName="@mantine/core/ModalOverlay";const LGe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Vc("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},FGe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:ci(t),"--modal-size":un(n,"modal-size"),"--modal-y-offset":Ee(r),"--modal-x-offset":Ee(i)}}),mL=je((e,t)=>{const n=xe("ModalRoot",LGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=mt({name:m,classes:Zm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:FGe});return w.jsx(NGe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:w.jsx(Wbe,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});mL.classes=Zm;mL.displayName="@mantine/core/ModalRoot";const jGe={},gL=je((e,t)=>{const n=xe("ModalTitle",jGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ux();return w.jsx(JW,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});gL.classes=Zm;gL.displayName="@mantine/core/ModalTitle";const BGe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Vc("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Oo=je((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=xe("Modal",BGe,e),c=!!n||s;return w.jsxs(mL,{ref:t,radius:u,...l,children:[r&&w.jsx(pL,{...i}),w.jsxs(dL,{radius:u,children:[c&&w.jsxs(hL,{children:[n&&w.jsx(gL,{children:n}),s&&w.jsx(fL,{...o})]}),w.jsx(cL,{children:a})]})]})});Oo.classes=Zm;Oo.displayName="@mantine/core/Modal";Oo.Root=mL;Oo.Overlay=pL;Oo.Content=dL;Oo.Body=cL;Oo.Header=hL;Oo.Title=gL;Oo.CloseButton=fL;const[UGe,UG]=Cb(),[zGe,VGe]=Cb();var yL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const HGe={},qGe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?un(t):un(n,"pg-gap")}}),zG=je((e,t)=>{const n=xe("PillGroup",HGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=UG(),h=(d==null?void 0:d.size)||l||void 0,p=mt({name:"PillGroup",classes:yL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qGe,stylesCtx:{size:h},rootSelector:"group"});return w.jsx(zGe,{value:{size:h,disabled:c},children:w.jsx(Ne,{ref:t,size:h,...p("group"),...f})})});zG.classes=yL;zG.displayName="@mantine/core/PillGroup";const WGe={variant:"default"},GGe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":un(n,"pill-fz"),"--pill-height":un(n,"pill-height"),"--pill-radius":t===void 0?void 0:ci(t)}}),j1=je((e,t)=>{const n=xe("Pill",WGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=VGe(),_=UG(),x=m||(b==null?void 0:b.size)||void 0,S=(_==null?void 0:_.variant)==="filled"?"contrast":l||"default",E=mt({name:"Pill",classes:yL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:GGe,stylesCtx:{size:x}});return w.jsxs(Ne,{component:"span",ref:t,variant:S,size:x,...E("root",{variant:S}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[w.jsx("span",{...E("label"),children:c}),f&&w.jsx(kb,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...E("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:T=>{var A;T.preventDefault(),T.stopPropagation(),(A=h==null?void 0:h.onMouseDown)==null||A.call(h,T)},onClick:T=>{var A;T.stopPropagation(),d==null||d(),(A=h==null?void 0:h.onClick)==null||A.call(h,T)}})]})});j1.classes=yL;j1.displayName="@mantine/core/Pill";j1.Group=zG;var j_e={field:"m_45c4369d"};const YGe={type:"visible"},VG=je((e,t)=>{const n=xe("PillsInputField",YGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=UG(),g=Lx(),y=mt({name:"PillsInputField",classes:j_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return w.jsx(Ne,{component:"input",ref:ns(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});VG.classes=j_e;VG.displayName="@mantine/core/PillsInputField";const KGe={},EE=je((e,t)=>{const n=xe("PillsInput",KGe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=I.useRef();return w.jsx(UGe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:w.jsx(Wc,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});EE.displayName="@mantine/core/PillsInput";EE.Field=VG;function XGe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(wE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const QGe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},HG=je((e,t)=>{const n=xe("MultiSelect",QGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:_,onOptionSubmit:x,comboboxProps:S,filter:E,limit:T,withScrollArea:A,maxDropdownHeight:k,searchValue:R,defaultSearchValue:$,onSearchChange:P,readOnly:O,disabled:M,onFocus:j,onBlur:B,onPaste:U,radius:V,rightSection:D,rightSectionWidth:z,rightSectionPointerEvents:W,rightSectionProps:F,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:ee,leftSectionProps:le,inputContainer:de,inputWrapperOrder:he,withAsterisk:ye,labelProps:Ce,descriptionProps:ve,errorProps:Ye,wrapperProps:Ue,description:pt,label:rt,error:be,maxValues:Ae,searchable:Ve,nothingFoundMessage:ut,withCheckIcon:Nt,checkIconPosition:qe,hidePickedOptions:me,withErrorStyles:ct,name:gt,form:wt,id:pe,clearable:Ie,clearButtonProps:Ke,hiddenInputProps:yt,placeholder:Vt,hiddenInputValuesDivider:er,required:Vn,mod:$n,renderOption:gn,onRemove:gr,onClear:Qt,scrollAreaProps:qr,...Zr}=n,ji=nl(pe),Cn=n_e(m),Bi=lG(Cn),Tr=ZM({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Tr.resetSelectedOption()}}),{styleProps:gs,rest:{type:bp,autoComplete:ol,..._d}}=Ox(Zr),[wr,ki]=jo({value:c,defaultValue:f,finalValue:[],onChange:d}),[ei,cu]=jo({value:R,defaultValue:$,finalValue:"",onChange:P}),Ra=mt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Na,resolvedStyles:oe}=Ym({props:n,styles:o,classNames:r}),te=st=>{h==null||h(st),st.key===" "&&!Ve&&(st.preventDefault(),Tr.toggleDropdown()),st.key==="Backspace"&&ei.length===0&&wr.length>0&&(gr==null||gr(wr[wr.length-1]),ki(wr.slice(0,wr.length-1)))},ae=wr.map((st,St)=>{var qt,Pn;return w.jsx(j1,{withRemoveButton:!O&&!((qt=Bi[st])!=null&&qt.disabled),onRemove:()=>{ki(wr.filter(Mn=>st!==Mn)),gr==null||gr(st)},unstyled:a,disabled:M,...Ra("pill"),children:((Pn=Bi[st])==null?void 0:Pn.label)||st},`${st}-${St}`)});I.useEffect(()=>{_&&Tr.selectFirstOption()},[_,wr]);const Te=Ie&&wr.length>0&&!M&&!O&&w.jsx(bn.ClearButton,{size:l,...Ke,onClear:()=>{Qt==null||Qt(),ki([]),cu("")}}),Se=XGe({data:Cn,value:wr});return w.jsxs(w.Fragment,{children:[w.jsxs(bn,{store:Tr,classNames:Na,styles:oe,unstyled:a,size:l,readOnly:O,__staticSelector:"MultiSelect",onOptionSubmit:st=>{x==null||x(st),cu(""),Tr.updateSelectedOptionIndex("selected"),wr.includes(Bi[st].value)?(ki(wr.filter(St=>St!==Bi[st].value)),gr==null||gr(Bi[st].value)):wr.length<Ae&&ki([...wr,Bi[st].value])},...S,children:[w.jsx(bn.DropdownTarget,{children:w.jsx(EE,{...gs,__staticSelector:"MultiSelect",classNames:Na,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:M,radius:V,rightSection:D||Te||w.jsx(bn.Chevron,{size:l,error:be,unstyled:a}),rightSectionPointerEvents:W||(Te?"all":"none"),rightSectionWidth:z,rightSectionProps:F,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:ee,leftSectionProps:le,inputContainer:de,inputWrapperOrder:he,withAsterisk:ye,labelProps:Ce,descriptionProps:ve,errorProps:Ye,wrapperProps:Ue,description:pt,label:rt,error:be,multiline:!0,withErrorStyles:ct,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Te?"all":"none"),multiline:!0},pointer:!Ve,onClick:()=>Ve?Tr.openDropdown():Tr.toggleDropdown(),"data-expanded":Tr.dropdownOpened||void 0,id:ji,required:Vn,mod:$n,children:w.jsxs(j1.Group,{disabled:M,unstyled:a,...Ra("pillsList"),children:[ae,w.jsx(bn.EventsTarget,{autoComplete:ol,children:w.jsx(EE.Field,{..._d,ref:t,id:ji,placeholder:Vt,type:!Ve&&!Vt?"hidden":"visible",...Ra("inputField"),unstyled:a,onFocus:st=>{j==null||j(st),Ve&&Tr.openDropdown()},onBlur:st=>{B==null||B(st),Tr.closeDropdown(),cu("")},onKeyDown:te,value:ei,onChange:st=>{cu(st.currentTarget.value),Ve&&Tr.openDropdown(),_&&Tr.selectFirstOption()},disabled:M,readOnly:O||!Ve,pointer:!Ve})})]})})}),w.jsx(__e,{data:me?Se:Cn,hidden:O||M,filter:E,search:ei,limit:T,hiddenWhenEmpty:!Ve||!ut||me&&Se.length===0&&ei.trim().length===0,withScrollArea:A,maxDropdownHeight:k,filterOptions:Ve,value:wr,checkIconPosition:qe,withCheckIcon:Nt,nothingFoundMessage:ut,unstyled:a,labelId:rt?`${ji}-label`:void 0,"aria-label":rt?void 0:Zr["aria-label"],renderOption:gn,scrollAreaProps:qr})]}),w.jsx(bn.HiddenInput,{name:gt,valuesDivider:er,value:wr,form:wt,disabled:M,...yt})]})});HG.classes={...Wc.classes,...bn.classes};HG.displayName="@mantine/core/MultiSelect";function B_e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var aA;(function(e){e.event="event",e.props="prop"})(aA||(aA={}));function Yg(){}function JGe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function uA(e){return!!(e||"").match(/\d/)}function Ow(e){return e==null}function ZGe(e){return typeof e=="number"&&isNaN(e)}function U_e(e){return Ow(e)||ZGe(e)||typeof e=="number"&&!isFinite(e)}function z_e(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function eYe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function tYe(e,t,n){var r=eYe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function nYe(e){var t=I.useRef(e);t.current=e;var n=I.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function qG(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function rYe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function V_e(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Voe(e,t){return Array(t+1).join(e)}function H_e(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Voe("0",Math.abs(o))+i:o>=a?i=i+Voe("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Hoe(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=qG(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=V_e(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function $v(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var q_e=JGe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),iYe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function sYe(e,t,n){return Math.min(Math.max(e,t),n)}function F8(e){return Math.max(e.selectionStart,e.selectionEnd)}function oYe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function aYe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function uYe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function lYe(e,t,n,r,i,s,o){o===void 0&&(o=uYe);var a=i.findIndex(function(_){return _}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function qoe(e,t,n,r){var i=e.length;if(t=sYe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function cYe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(uA(e[n])||uA(e[n-1]));return t}function W_e(e,t,n,r,i,s){s===void 0&&(s=Yg);var o=nYe(function(p,m){var g,y;return U_e(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?H_e(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=I.useState(function(){return o(Ow(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;Ow(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return I.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function fYe(e){return e.replace(/[^0-9]/g,"")}function dYe(e){return e}function hYe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=dYe);var a=e.removeFormatting;a===void 0&&(a=fYe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Yg);var h=e.onKeyDown;h===void 0&&(h=Yg);var p=e.onMouseUp;p===void 0&&(p=Yg);var m=e.onFocus;m===void 0&&(m=Yg);var g=e.onBlur;g===void 0&&(g=Yg);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=cYe);var b=e.isValidInputCharacter;b===void 0&&(b=uA);var _=e.isCharacterSame,x=B_e(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=W_e(y,u,!!l,o,a,c),E=S[0],T=E.formattedValue,A=E.numAsString,k=S[1],R=I.useRef(),$=I.useRef({formattedValue:T,numAsString:A}),P=function(be,Ae){$.current={formattedValue:be.formattedValue,numAsString:be.value},k(be,Ae)},O=I.useState(!1),M=O[0],j=O[1],B=I.useRef(null),U=I.useRef({setCaretTimeout:null,focusTimeout:null});I.useEffect(function(){return j(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var V=o,D=function(be,Ae){var Ve=parseFloat(Ae);return{formattedValue:be,value:Ae,floatValue:isNaN(Ve)?void 0:Ve}},z=function(be,Ae,Ve){be.selectionStart===0&&be.selectionEnd===be.value.length||($v(be,Ae),U.current.setCaretTimeout=setTimeout(function(){be.value===Ve&&be.selectionStart!==Ae&&$v(be,Ae)},0))},W=function(be,Ae,Ve){return qoe(be,Ae,v(be),Ve)},F=function(be,Ae,Ve){var ut=v(Ae),Nt=lYe(Ae,T,be,Ve,ut,b,_);return Nt=qoe(Ae,Nt,ut),Nt},H=function(be){var Ae=be.formattedValue;Ae===void 0&&(Ae="");var Ve=be.input,ut=be.source,Nt=be.event,qe=be.numAsString,me;if(Ve){var ct=be.inputValue||Ve.value,gt=F8(Ve);Ve.value=Ae,me=F(ct,Ae,gt),me!==void 0&&z(Ve,me,Ae)}Ae!==T&&P(D(Ae,qe),{event:Nt,source:ut})};I.useEffect(function(){var be=$.current,Ae=be.formattedValue,Ve=be.numAsString;(T!==Ae||A!==Ve)&&P(D(T,A),{event:void 0,source:aA.props})},[T,A]);var G=B.current?F8(B.current):void 0,ee=typeof window<"u"?I.useLayoutEffect:I.useEffect;ee(function(){var be=B.current;if(T!==$.current.formattedValue&&be){var Ae=F($.current.formattedValue,T,G);be.value=T,z(be,Ae,T)}},[T]);var le=function(be,Ae,Ve){var ut=Ae.target,Nt=R.current?iYe(R.current,ut.selectionEnd):q_e(T,be),qe=Object.assign(Object.assign({},Nt),{lastValue:T}),me=a(be,qe),ct=V(me);if(me=a(ct,void 0),f&&!f(D(ct,me))){var gt=Ae.target,wt=F8(gt),pe=F(be,T,wt);return gt.value=T,z(gt,pe,T),!1}return H({formattedValue:ct,numAsString:me,inputValue:be,event:Ae,source:Ve,input:Ae.target}),!0},de=function(be,Ae){Ae===void 0&&(Ae=0);var Ve=be.selectionStart,ut=be.selectionEnd;R.current={selectionStart:Ve,selectionEnd:ut+Ae}},he=function(be){var Ae=be.target,Ve=Ae.value,ut=le(Ve,be,aA.event);ut&&d(be),R.current=void 0},ye=function(be){var Ae=be.target,Ve=be.key,ut=Ae.selectionStart,Nt=Ae.selectionEnd,qe=Ae.value;qe===void 0&&(qe="");var me;Ve==="ArrowLeft"||Ve==="Backspace"?me=Math.max(ut-1,0):Ve==="ArrowRight"?me=Math.min(ut+1,qe.length):Ve==="Delete"&&(me=ut);var ct=0;Ve==="Delete"&&ut===Nt&&(ct=1);var gt=Ve==="ArrowLeft"||Ve==="ArrowRight";if(me===void 0||ut!==Nt&&!gt){h(be),de(Ae,ct);return}var wt=me;if(gt){var pe=Ve==="ArrowLeft"?"left":"right";wt=W(qe,me,pe),wt!==me&&be.preventDefault()}else Ve==="Delete"&&!b(qe[me])?wt=W(qe,me,"right"):Ve==="Backspace"&&!b(qe[me])&&(wt=W(qe,me,"left"));wt!==me&&z(Ae,wt,qe),h(be),de(Ae,ct)},Ce=function(be){var Ae=be.target,Ve=function(){var ut=Ae.selectionStart,Nt=Ae.selectionEnd,qe=Ae.value;if(qe===void 0&&(qe=""),ut===Nt){var me=W(qe,ut);me!==ut&&z(Ae,me,qe)}};Ve(),requestAnimationFrame(function(){Ve()}),p(be),de(Ae)},ve=function(be){be.persist&&be.persist();var Ae=be.target,Ve=be.currentTarget;B.current=Ae,U.current.focusTimeout=setTimeout(function(){var ut=Ae.selectionStart,Nt=Ae.selectionEnd,qe=Ae.value;qe===void 0&&(qe="");var me=W(qe,ut);me!==ut&&!(ut===0&&Nt===qe.length)&&z(Ae,me,qe),m(Object.assign(Object.assign({},be),{currentTarget:Ve}))},0)},Ye=function(be){B.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(be)},Ue=M&&oYe()?"numeric":void 0,pt=Object.assign({inputMode:Ue},x,{type:t,value:T,onChange:he,onKeyDown:ye,onMouseUp:Ce,onFocus:ve,onBlur:Ye});if(n==="text")return i?Nr.createElement(Nr.Fragment,null,i(T,x)||null):Nr.createElement("span",Object.assign({},x,{ref:s}),T);if(r){var rt=r;return Nr.createElement(rt,Object.assign({},pt,{ref:s}))}return Nr.createElement("input",Object.assign({},pt,{ref:s}))}function Woe(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=vL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=qG(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=V_e(p,n,!!r)),l&&(h=tYe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function vL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function pYe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function mYe(e,t){return new RegExp("(^-)|[0-9]|"+z_e(e),"g")}function gYe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function yYe(e,t,n){var r;t===void 0&&(t=aYe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=vL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(uA(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,U,V){var D=!1,z=!1;s.startsWith("-")?D=!1:B.startsWith("--")?(D=!1,z=!0):o.startsWith("-")&&B.length===o.length?D=!1:B[0]==="-"&&(D=!0);var W=D?1:0;return z&&(W=2),W&&(B=B.substring(W),U-=W,V-=W),{value:B,start:U,end:V,hasNegation:D}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var _=y(t.lastValue,u.start,u.end),x=_.start,S=_.end,E=_.value,T=e.substring(c,f);e.length&&E.length&&(x>E.length-o.length||S<s.length)&&!(T&&o.startsWith(T))&&(e=E);var A=0;e.startsWith(s)?A+=s.length:c<s.length&&(A=c),e=e.substring(A),f-=A;var k=e.length,R=e.length-o.length;e.endsWith(o)?k=R:(f>R||f>e.length-o.length)&&(k=f),e=e.substring(0,k),e=pYe(b?"-"+e:e,i),e=(e.match(mYe(p))||[]).join("");var $=e.indexOf(p);e=e.replace(new RegExp(z_e(p),"g"),function(B,U){return U===$?".":""});var P=qG(e,i),O=P.beforeDecimal,M=P.afterDecimal,j=P.addNegation;return l.end-l.start<u.end-u.start&&O===""&&m&&!parseFloat(M)&&(e=j?"-":""),e}function vYe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function bYe(e){var t=vL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function _Ye(e){e=bYe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Yg);var s=e.onBlur;s===void 0&&(s=Yg);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=B_e(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=vL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(j){return Woe(j,e)},b=function(j,B){return yYe(j,B,e)},_=Ow(f)?c:f,x=d??gYe(_,l,t);Ow(f)?Ow(c)||(x=x||typeof c=="number"):x=x||typeof f=="number";var S=function(j){return U_e(j)?j:(typeof j=="number"&&(j=H_e(j)),x&&typeof a=="number"?Hoe(j,a,!!u):j)},E=W_e(S(f),S(c),!!x,v,b,h),T=E[0],A=T.numAsString,k=T.formattedValue,R=E[1],$=function(j){var B=j.target,U=j.key,V=B.selectionStart,D=B.selectionEnd,z=B.value;if(z===void 0&&(z=""),(U==="Backspace"||U==="Delete")&&D<l.length){j.preventDefault();return}if(V!==D){i(j);return}U==="Backspace"&&z[0]==="-"&&V===l.length+1&&n&&$v(B,1),a&&u&&(U==="Backspace"&&z[V-1]===g?($v(B,V-1),j.preventDefault()):U==="Delete"&&z[V]===g&&j.preventDefault()),y!=null&&y.includes(U)&&z[V]===g&&$v(B,V+1);var W=o===!0?",":o;U==="Backspace"&&z[V-1]===W&&$v(B,V-1),U==="Delete"&&z[V]===W&&$v(B,V+1),i(j)},P=function(j){var B=A;if(B.match(/\d/g)||(B=""),r||(B=rYe(B)),u&&a&&(B=Hoe(B,a,u)),B!==A){var U=Woe(B,e);R({formattedValue:U,value:B,floatValue:parseFloat(B)},{event:j,source:aA.event})}s(j)},O=function(j){return j===g?!0:uA(j)},M=function(j){var B=j.currentValue,U=j.lastValue,V=j.formattedValue,D=j.currentValueIndex,z=j.formattedValueIndex,W=B[D],F=V[z],H=q_e(U,B),G=H.to;return D>=G.start&&D<G.end&&y&&y.includes(W)&&F===g?!0:W===F};return Object.assign(Object.assign({},p),{value:k,valueIsNumericString:!1,isValidInputCharacter:O,isCharacterSame:M,onValueChange:R,format:v,removeFormatting:b,getCaretBoundary:function(j){return vYe(j,e)},onKeyDown:$,onBlur:P})}function wYe(e){var t=_Ye(e);return Nr.createElement(hYe,Object.assign({},t))}function Goe({direction:e,style:t,...n}){return w.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:w.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var Q7={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const EYe=/^(0\.0*|-0(\.0*)?)$/,xYe=/^-?0\d+(\.\d+)?\.?$/;function SYe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function Yoe(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const TYe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},CYe=(e,{size:t})=>({controls:{"--ni-chevron-size":un(t,"ni-chevron-size")}}),WG=je((e,t)=>{const n=xe("NumberInput",TYe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:_,decimalScale:x,onKeyDown:S,onKeyDownCapture:E,handlersRef:T,startValue:A,disabled:k,rightSectionPointerEvents:R,allowNegative:$,readOnly:P,size:O,rightSectionWidth:M,stepHoldInterval:j,stepHoldDelay:B,allowLeadingZeros:U,withKeyboardEvents:V,trimLeadingZeroesOnBlur:D,...z}=n,W=mt({name:"NumberInput",classes:Q7,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:CYe}),{resolvedClassNames:F,resolvedStyles:H}=Ym({classNames:i,styles:s,props:n}),[G,ee]=jo({value:c,defaultValue:f,onChange:u}),le=B!==void 0&&j!==void 0,de=I.useRef(null),he=I.useRef(null),ye=I.useRef(0),Ce=(me,ct)=>{ct.source==="event"&&ee(SYe(me.floatValue)&&!EYe.test(me.value)&&!(U&&xYe.test(me.value))?me.floatValue:me.value),l==null||l(me,ct)},ve=me=>{const ct=String(me).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ct?Math.max(0,(ct[1]?ct[1].length:0)-(ct[2]?+ct[2]:0)):0},Ye=me=>{de.current&&typeof me<"u"&&de.current.setSelectionRange(me,me)},Ue=I.useRef();Ue.current=()=>{let me;const ct=ve(G),gt=ve(p),wt=Math.max(ct,gt),pe=10**wt;if(typeof G!="number"||Number.isNaN(G))me=yc(A,h,d);else if(d!==void 0){const Ke=(Math.round(G*pe)+Math.round(p*pe))/pe;me=Ke<=d?Ke:d}else me=(Math.round(G*pe)+Math.round(p*pe))/pe;const Ie=me.toFixed(wt);ee(parseFloat(Ie)),l==null||l({floatValue:parseFloat(Ie),formattedValue:Ie,value:Ie},{source:"increment"}),setTimeout(()=>{var Ke;return Ye((Ke=de.current)==null?void 0:Ke.value.length)},0)};const pt=I.useRef();pt.current=()=>{let me;const ct=h!==void 0?h:$?Number.MIN_SAFE_INTEGER:0,gt=ve(G),wt=ve(p),pe=Math.max(gt,wt),Ie=10**pe;if(typeof G!="number"||Number.isNaN(G))me=yc(A,ct,d);else{const yt=(Math.round(G*Ie)-Math.round(p*Ie))/Ie;me=ct!==void 0&&yt<ct?ct:yt}const Ke=me.toFixed(pe);ee(parseFloat(Ke)),l==null||l({floatValue:parseFloat(Ke),formattedValue:Ke,value:Ke},{source:"decrement"}),setTimeout(()=>{var yt;return Ye((yt=de.current)==null?void 0:yt.value.length)},0)};const rt=me=>{S==null||S(me),!(P||!V)&&(me.key==="ArrowUp"&&(me.preventDefault(),Ue.current()),me.key==="ArrowDown"&&(me.preventDefault(),pt.current()))},be=me=>{if(E==null||E(me),me.key==="Backspace"){const ct=de.current;ct.selectionStart===0&&ct.selectionStart===ct.selectionEnd&&(me.preventDefault(),window.setTimeout(()=>Ye(0),0))}};wW(T,{increment:Ue.current,decrement:pt.current});const Ae=me=>{me?Ue.current():pt.current(),ye.current+=1},Ve=me=>{if(Ae(me),le){const ct=typeof j=="number"?j:j(ye.current);he.current=window.setTimeout(()=>Ve(me),ct)}},ut=(me,ct)=>{var gt;me.preventDefault(),(gt=de.current)==null||gt.focus(),Ae(ct),le&&(he.current=window.setTimeout(()=>Ve(ct),B))},Nt=()=>{he.current&&window.clearTimeout(he.current),he.current=null,ye.current=0},qe=w.jsxs("div",{...W("controls"),children:[w.jsx(ao,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:me=>me.preventDefault(),onPointerDown:me=>{ut(me,!0)},onPointerUp:Nt,onPointerLeave:Nt,children:w.jsx(Goe,{direction:"up"})}),w.jsx(ao,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:me=>me.preventDefault(),onPointerDown:me=>{ut(me,!1)},onPointerUp:Nt,onPointerLeave:Nt,children:w.jsx(Goe,{direction:"down"})})]});return w.jsx(Wc,{component:wYe,allowNegative:$,className:Zi(Q7.root,r),size:O,...z,readOnly:P,disabled:k,value:G,getInputRef:ns(t,de),onValueChange:Ce,rightSection:m||P?g:g||qe,classNames:F,styles:H,unstyled:o,__staticSelector:"NumberInput",decimalScale:_?x:0,onKeyDown:rt,onKeyDownCapture:be,rightSectionPointerEvents:R??(k?"none":void 0),rightSectionWidth:M??`var(--ni-right-section-width-${O||"sm"})`,allowLeadingZeros:U,onBlur:me=>{if(b==null||b(me),v==="blur"&&typeof G=="number"&&yc(G,h,d)!==G&&ee(yc(G,h,d)),D&&typeof G=="string"){const ct=G.replace(/^0+/,""),gt=parseFloat(ct);ee(Number.isNaN(gt)?ct:gt)}},isAllowed:me=>v==="strict"?y?y(me)&&Yoe(me.floatValue,h,d):Yoe(me.floatValue,h,d):y?y(me):!0})});WG.classes={...Wc.classes,...Q7};WG.displayName="@mantine/core/NumberInput";const[AYe,G_e]=Ia("Progress.Root component was not found in tree");var UI={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const IYe={},GG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ProgressLabel",IYe,e),u=G_e();return w.jsx(Ne,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});GG.classes=UI;GG.displayName="@mantine/core/ProgressLabel";const kYe={},RYe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":un(t,"progress-size"),"--progress-radius":n===void 0?void 0:ci(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),bL=je((e,t)=>{const n=xe("ProgressRoot",kYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=mt({name:"Progress",classes:UI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:RYe});return w.jsx(AYe,{value:{getStyles:d,autoContrast:l},children:w.jsx(Ne,{ref:t,...d("root"),...f})})});bL.classes=UI;bL.displayName="@mantine/core/ProgressRoot";const NYe={withAria:!0},_L=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=xe("ProgressSection",NYe,e),p=G_e(),m=js(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return w.jsx(Ne,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":ai(l,m),"--progress-label-color":Px(p.autoContrast,m)?Ny({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});_L.classes=UI;_L.displayName="@mantine/core/ProgressSection";const PYe={},zx=je((e,t)=>{const n=xe("Progress",PYe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Ym({classNames:i,styles:s,props:n});return w.jsx(bL,{ref:t,classNames:d,styles:h,vars:o,...f,children:w.jsx(_L,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});zx.classes=UI;zx.displayName="@mantine/core/Progress";zx.Section=_L;zx.Root=bL;zx.Label=GG;const[OYe,Y_e]=Cb(),[DYe,$Ye]=Cb();var K_e={card:"m_9dc8ae12"};const MYe={withBorder:!0},LYe=(e,{radius:t})=>({card:{"--card-radius":ci(t)}}),YG=je((e,t)=>{const n=xe("RadioCard",MYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=mt({name:"RadioCard",classes:K_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:LYe,rootSelector:"card"}),{dir:v}=Qh(),b=Y_e(),_=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,x=p||(b==null?void 0:b.name),S=E=>{if(m==null||m(E),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(E.nativeEvent.code)){E.preventDefault();const T=Array.from(document.querySelectorAll(`[role="radio"][name="${x||"__mantine"}"]`)),A=T.findIndex($=>$===E.target),k=A+1>=T.length?0:A+1,R=A-1<0?T.length-1:A-1;E.nativeEvent.code==="ArrowDown"&&(T[k].focus(),T[k].click()),E.nativeEvent.code==="ArrowUp"&&(T[R].focus(),T[R].click()),E.nativeEvent.code==="ArrowLeft"&&(T[v==="ltr"?R:k].focus(),T[v==="ltr"?R:k].click()),E.nativeEvent.code==="ArrowRight"&&(T[v==="ltr"?k:R].focus(),T[v==="ltr"?k:R].click())}};return w.jsx(DYe,{value:{checked:_},children:w.jsx(ao,{ref:t,mod:[{"with-border":f,checked:_},c],...y("card"),...g,role:"radio","aria-checked":_,name:x,onClick:E=>{h==null||h(E),b==null||b.onChange(d||"")},onKeyDown:S})})});YG.displayName="@mantine/core/RadioCard";YG.classes=K_e;const FYe={},KG=je((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=xe("RadioGroup",FYe,e),f=nl(u),[d,h]=jo({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return w.jsx(OYe,{value:{value:d,onChange:p,size:s,name:f},children:w.jsx(Mi.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:w.jsx(d_e,{role:"radiogroup",children:a})})})});KG.classes=Mi.Wrapper.classes;KG.displayName="@mantine/core/RadioGroup";function X_e({size:e,style:t,...n}){return w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Ee(e),height:Ee(e),...t},"aria-hidden":!0,...n,children:w.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var Q_e={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const jYe={icon:X_e},BYe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Xh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":un(r,"radio-size"),"--radio-radius":t===void 0?void 0:ci(t),"--radio-color":s==="outline"?u:ai(n,e),"--radio-icon-size":un(r,"radio-icon-size"),"--radio-icon-color":i?ai(i,e):Px(o,e)?Ny({color:n,theme:e,autoContrast:o}):void 0}}},XG=je((e,t)=>{const n=xe("RadioIndicator",jYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,_=mt({name:"RadioIndicator",classes:Q_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:BYe,rootSelector:"indicator"}),x=$Ye(),S=typeof p=="boolean"?p:(x==null?void 0:x.checked)||!1;return w.jsx(Ne,{ref:t,..._("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:w.jsx(b,{..._("icon")})})});XG.displayName="@mantine/core/RadioIndicator";XG.classes=Q_e;var J_e={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const UYe={labelPosition:"right"},zYe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Xh({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":un(t,"radio-size"),"--radio-radius":n===void 0?void 0:ci(n),"--radio-color":s==="outline"?u:ai(r,e),"--radio-icon-color":i?ai(i,e):Px(o,e)?Ny({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":un(t,"radio-icon-size")}}},B1=je((e,t)=>{const n=xe("Radio",UYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:_=X_e,rootRef:x,iconColor:S,onChange:E,mod:T,...A}=n,k=mt({name:"Radio",classes:J_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zYe}),R=Y_e(),$=(R==null?void 0:R.size)??c,P=n.size?c:$,{styleProps:O,rest:M}=Ox(A),j=nl(l),B=R?{checked:R.value===M.value,name:M.name??R.name,onChange:U=>{R.onChange(U),E==null||E(U)}}:{};return w.jsx(_G,{...k("root"),__staticSelector:"Radio",__stylesApiProps:n,id:j,size:P,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:x,mod:T,...O,...b,children:w.jsxs(Ne,{...k("inner"),mod:{"label-position":d},children:[w.jsx(Ne,{...k("radio",{focusable:!0,variant:y}),onChange:E,...M,...B,component:"input",mod:{error:!!p},ref:t,id:j,disabled:v,type:"radio"}),w.jsx(_,{...k("icon"),"aria-hidden":!0})]})})});B1.classes=J_e;B1.displayName="@mantine/core/Radio";B1.Group=KG;B1.Card=YG;B1.Indicator=XG;const VYe={duration:100,transition:"fade"};function HYe(e,t){return{...VYe,...t,...e}}function qYe({offset:e,position:t}){const[n,r]=I.useState(!1),i=I.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=HW({placement:t,middleware:[BW({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=I.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return I.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=um(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var wL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const WYe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Vc("popover")},GYe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:ci(t),"--tooltip-bg":n?ai(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),QG=je((e,t)=>{const n=xe("TooltipFloating",WYe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:_,portalProps:x,...S}=n,E=js(),T=mt({name:"TooltipFloating",props:n,classes:wL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:_,varsResolver:GYe}),{handleMouseMove:A,x:k,y:R,opened:$,boundaryRef:P,floating:O,setOpened:M}=qYe({offset:p,position:m});if(!ky(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const j=ns(P,r.ref,t),B=V=>{var D,z;(z=(D=r.props).onMouseEnter)==null||z.call(D,V),A(V),M(!0)},U=V=>{var D,z;(z=(D=r.props).onMouseLeave)==null||z.call(D,V),M(!1)};return w.jsxs(w.Fragment,{children:[w.jsx(MI,{...x,withinPortal:s,children:w.jsx(Ne,{...S,...T("tooltip",{style:{...ebe(o,E),zIndex:y,display:!v&&$?"block":"none",top:(R&&Math.round(R))??"",left:(k&&Math.round(k))??""}}),variant:b,ref:O,mod:{multiline:g},children:h})}),I.cloneElement(r,{...r.props,[i]:j,onMouseEnter:B,onMouseLeave:U})]})});QG.classes=wL;QG.displayName="@mantine/core/TooltipFloating";const Z_e=I.createContext(!1),YYe=Z_e.Provider,KYe=()=>I.useContext(Z_e),XYe={openDelay:0,closeDelay:0};function ewe(e){const{openDelay:t,closeDelay:n,children:r}=xe("TooltipGroup",XYe,e);return w.jsx(YYe,{value:!0,children:w.jsx(zVe,{delay:{open:t,close:n},children:r})})}ewe.displayName="@mantine/core/TooltipGroup";function QYe(e){var S,E,T;const[t,n]=I.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=KYe(),o=nl(),{delay:a,currentId:u,setCurrentId:l}=Obe(),c=I.useCallback(A=>{n(A),A&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=HW({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[Ibe(e.offset),BW({padding:8}),V7(),kbe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[H7()]:[]]}),{getReferenceProps:b,getFloatingProps:_}=KVe([UVe(h,{enabled:(S=e.events)==null?void 0:S.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((E=e.events)!=null&&E.touch)}),YVe(h,{enabled:(T=e.events)==null?void 0:T.focus,visibleOnly:!0}),QVe(h,{role:"tooltip"}),WVe(h,{enabled:typeof e.opened>"u"}),VVe(h,{id:o})]);Bbe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),Xf(()=>{var A;(A=e.onPositionChange)==null||A.call(e,g)},[g]);const x=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:_,getReferenceProps:b,isGroupPhase:x,opened:i,placement:g}}const Koe={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Vc("popover"),positionDependencies:[]},JYe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:ci(t),"--tooltip-bg":n?ai(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Tc=je((e,t)=>{const n=xe("Tooltip",Koe,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:_,arrowOffset:x,arrowRadius:S,arrowPosition:E,offset:T,transitionProps:A,multiline:k,events:R,zIndex:$,disabled:P,positionDependencies:O,onClick:M,onMouseEnter:j,onMouseLeave:B,inline:U,variant:V,keepMounted:D,vars:z,portalProps:W,mod:F,floatingStrategy:H,...G}=xe("Tooltip",Koe,n),{dir:ee}=Qh(),le=I.useRef(null),de=QYe({position:Dbe(ee,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:R,arrowRef:le,arrowOffset:x,offset:typeof T=="number"?T+(b?_/2:0):T,positionDependencies:[...O,r],inline:U,strategy:H}),he=mt({name:"Tooltip",props:n,classes:wL,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:z,varsResolver:JYe});if(!ky(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ye=ns(de.reference,r.ref,t),Ce=HYe(A,{duration:100,transition:"fade"});return w.jsxs(w.Fragment,{children:[w.jsx(MI,{...W,withinPortal:f,children:w.jsx(Xm,{...Ce,keepMounted:D,mounted:!P&&!!de.opened,duration:de.isGroupPhase?10:Ce.duration,children:ve=>w.jsxs(Ne,{...G,variant:V,mod:[{multiline:k},F],...de.getFloatingProps({ref:de.floating,className:he("tooltip").className,style:{...he("tooltip").style,...ve,zIndex:$,top:de.y??0,left:de.x??0}}),children:[o,w.jsx(qW,{ref:le,arrowX:de.arrowX,arrowY:de.arrowY,visible:b,position:de.placement,arrowSize:_,arrowOffset:x,arrowRadius:S,arrowPosition:E,...he("arrow")})]})})}),I.cloneElement(r,de.getReferenceProps({onClick:M,onMouseEnter:j,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ye,className:Zi(v,r.props.className),...r.props}))]})});Tc.classes=wL;Tc.displayName="@mantine/core/Tooltip";Tc.Floating=QG;Tc.Group=ewe;var twe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const ZYe={withItemsBorders:!0},eKe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:ci(t),"--sc-color":n?ai(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":un(i,"sc-padding"),"--sc-font-size":oo(i)}}),EL=je((e,t)=>{var ee,le;const n=xe("SegmentedControl",ZYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:_,transitionDuration:x,transitionTimingFunction:S,variant:E,autoContrast:T,withItemsBorders:A,mod:k,...R}=n,$=mt({name:"SegmentedControl",props:n,classes:twe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eKe}),P=js(),O=l.map(de=>typeof de=="string"?{label:de,value:de}:de),M=Z7e(),[j,B]=I.useState(null),[U,V]=I.useState({}),D=(de,he)=>{U[he]=de,V(U)},[z,W]=jo({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ee=O.find(de=>!de.disabled))==null?void 0:ee.value)??((le=l[0])==null?void 0:le.value)??null:null,onChange:d}),F=nl(p),H=O.map(de=>I.createElement(Ne,{...$("control"),mod:{active:z===de.value,orientation:v},key:de.value},I.createElement("input",{...$("input"),disabled:m||de.disabled,type:"radio",name:F,value:de.value,id:`${F}-${de.value}`,checked:z===de.value,onChange:()=>!g&&W(de.value),"data-focus-ring":P.focusRing,key:`${de.value}-input`}),I.createElement(Ne,{component:"label",...$("label"),mod:{active:z===de.value&&!(m||de.disabled),disabled:m||de.disabled,"read-only":g},htmlFor:`${F}-${de.value}`,ref:he=>D(he,de.value),__vars:{"--sc-label-color":_!==void 0?Ny({color:_,theme:P,autoContrast:T}):void 0},key:`${de.value}-label`},w.jsx("span",{...$("innerLabel"),children:de.label})))),G=ns(t,de=>B(de));return l.length===0?null:w.jsxs(Ne,{...$("root"),variant:E,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:M,"with-items-borders":A},k],...R,role:"radiogroup",children:[typeof z=="string"&&w.jsx(tG,{target:U[z],parent:j,component:"span",transitionDuration:"var(--sc-transition-duration)",...$("indicator")}),H]})});EL.classes=twe;EL.displayName="@mantine/core/SegmentedControl";const tKe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},ph=je((e,t)=>{const n=xe("Select",tKe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:_,readOnly:x,disabled:S,filter:E,limit:T,withScrollArea:A,maxDropdownHeight:k,size:R,searchable:$,rightSection:P,checkIconPosition:O,withCheckIcon:M,nothingFoundMessage:j,name:B,form:U,searchValue:V,defaultSearchValue:D,onSearchChange:z,allowDeselect:W,error:F,rightSectionPointerEvents:H,id:G,clearable:ee,clearButtonProps:le,hiddenInputProps:de,renderOption:he,onClear:ye,autoComplete:Ce,scrollAreaProps:ve,...Ye}=n,Ue=I.useMemo(()=>n_e(m),[m]),pt=I.useMemo(()=>lG(Ue),[Ue]),rt=nl(G),[be,Ae,Ve]=jo({value:g,defaultValue:y,finalValue:null,onChange:p}),ut=typeof be=="string"?pt[be]:void 0,[Nt,qe]=jo({value:V,defaultValue:D,finalValue:ut?ut.label:"",onChange:z}),me=ZM({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),me.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),me.resetSelectedOption()}}),{resolvedClassNames:ct,resolvedStyles:gt}=Ym({props:n,styles:i,classNames:r});I.useEffect(()=>{v&&me.selectFirstOption()},[v,be]),I.useEffect(()=>{g===null&&qe(""),typeof g=="string"&&ut&&qe(ut.label)},[g,ut]);const wt=ee&&!!be&&!S&&!x&&w.jsx(bn.ClearButton,{size:R,...le,onClear:()=>{Ae(null,null),qe(""),ye==null||ye()}});return w.jsxs(w.Fragment,{children:[w.jsxs(bn,{store:me,__staticSelector:"Select",classNames:ct,styles:gt,unstyled:s,readOnly:x,onOptionSubmit:pe=>{b==null||b(pe);const Ie=W&&pt[pe].value===be?null:pt[pe],Ke=Ie?Ie.value:null;Ae(Ke,Ie),!Ve&&qe(typeof Ke=="string"&&(Ie==null?void 0:Ie.label)||""),me.closeDropdown()},size:R,..._,children:[w.jsx(bn.Target,{targetType:$?"input":"button",autoComplete:Ce,children:w.jsx(Wc,{id:rt,ref:t,rightSection:P||wt||w.jsx(bn.Chevron,{size:R,error:F,unstyled:s}),rightSectionPointerEvents:H||(wt?"all":"none"),...Ye,size:R,__staticSelector:"Select",disabled:S,readOnly:x||!$,value:Nt,onChange:pe=>{qe(pe.currentTarget.value),me.openDropdown(),v&&me.selectFirstOption()},onFocus:pe=>{$&&me.openDropdown(),f==null||f(pe)},onBlur:pe=>{var Ie;$&&me.closeDropdown(),qe(be!=null&&((Ie=pt[be])==null?void 0:Ie.label)||""),d==null||d(pe)},onClick:pe=>{$?me.openDropdown():me.toggleDropdown(),h==null||h(pe)},classNames:ct,styles:gt,unstyled:s,pointer:!$,error:F})}),w.jsx(__e,{data:Ue,hidden:x||S,filter:E,search:Nt,limit:T,hiddenWhenEmpty:!$||!j,withScrollArea:A,maxDropdownHeight:k,filterOptions:$&&(ut==null?void 0:ut.label)!==Nt,value:be,checkIconPosition:O,withCheckIcon:M,nothingFoundMessage:j,unstyled:s,labelId:Ye.label?`${rt}-label`:void 0,"aria-label":Ye.label?void 0:Ye["aria-label"],renderOption:he,scrollAreaProps:ve})]}),w.jsx(bn.HiddenInput,{value:be,name:B,form:U,disabled:S,...de})]})});ph.classes={...Wc.classes,...bn.classes};ph.displayName="@mantine/core/Select";const[nwe,xL]=Ia("SliderProvider was not found in tree"),JG=I.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=xL();return w.jsx(Ne,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});JG.displayName="@mantine/core/SliderRoot";const ED=I.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=xL(),[b,_]=I.useState(!1),x=l||s||b||h&&p;return w.jsxs(Ne,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{_(!0),typeof f=="function"&&f()},onBlur:()=>{_(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,w.jsx(Xm,{mounted:i!=null&&!!x,transition:"fade",duration:0,...u,children:S=>w.jsx("div",{...v("label",{style:S}),children:i})})]})});ED.displayName="@mantine/core/SliderThumb";function xD({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function nKe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function rwe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=xL();if(!e)return null;const u=e.map((l,c)=>I.createElement(Ne,{...a("markWrapper"),__vars:{"--mark-offset":`${xD({value:l.value,min:t,max:n})}%`},key:c},w.jsx(Ne,{...a("mark"),mod:{filled:nKe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&w.jsx("div",{...a("markLabel"),children:l.label})));return w.jsx("div",{children:u})}rwe.displayName="@mantine/core/SliderMarks";function ZG({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=xL();return w.jsx(w.Fragment,{children:w.jsx(Ne,{...u("trackContainer"),mod:{disabled:r},...o,children:w.jsxs(Ne,{...u("track"),mod:{inverted:s,disabled:r},children:[w.jsx(Ne,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,w.jsx(rwe,{...a,offset:i,disabled:r,inverted:s})]})})})}ZG.displayName="@mantine/core/SliderTrack";function J7({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function oc(e,t){return parseFloat(e.toFixed(t))}function iwe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var SL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const rKe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},iKe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":un(t,"slider-size"),"--slider-color":n?ai(n,e):void 0,"--slider-radius":i===void 0?void 0:ci(i),"--slider-thumb-size":r!==void 0?Ee(r):"calc(var(--slider-size) * 2)"}}),TL=je((e,t)=>{const n=xe("Slider",rKe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:_,thumbChildren:x,disabled:S,unstyled:E,scale:T,inverted:A,className:k,style:R,vars:$,hiddenInputProps:P,...O}=n,M=mt({name:"Slider",props:n,classes:SL,classNames:r,className:k,styles:i,style:R,vars:$,varsResolver:iKe,unstyled:E}),{dir:j}=Qh(),[B,U]=I.useState(!1),[V,D]=jo({value:typeof s=="number"?yc(s,l,c):s,defaultValue:typeof h=="number"?yc(h,l,c):h,finalValue:yc(0,l,c),onChange:o}),z=I.useRef(V),W=I.useRef(),F=I.useRef(),H=xD({value:V,min:l,max:c}),G=T(V),ee=typeof g=="function"?g(G):g,le=d??iwe(f),de=I.useCallback(({x:ve})=>{if(!S){const Ye=J7({value:ve,min:l,max:c,step:f,precision:le});D(Ye),z.current=Ye}},[S,l,c,f,le,D]),{ref:he,active:ye}=zM(de,{onScrubEnd:()=>a==null?void 0:a(z.current)},j),Ce=ve=>{var Ye,Ue,pt,rt,be,Ae;if(!S)switch(ve.key){case"ArrowUp":{ve.preventDefault(),(Ye=F.current)==null||Ye.focus();const Ve=oc(Math.min(Math.max(V+f,l),c),le);D(Ve),a==null||a(Ve);break}case"ArrowRight":{ve.preventDefault(),(Ue=F.current)==null||Ue.focus();const Ve=oc(Math.min(Math.max(j==="rtl"?V-f:V+f,l),c),le);D(Ve),a==null||a(Ve);break}case"ArrowDown":{ve.preventDefault(),(pt=F.current)==null||pt.focus();const Ve=oc(Math.min(Math.max(V-f,l),c),le);D(Ve),a==null||a(Ve);break}case"ArrowLeft":{ve.preventDefault(),(rt=F.current)==null||rt.focus();const Ve=oc(Math.min(Math.max(j==="rtl"?V+f:V-f,l),c),le);D(Ve),a==null||a(Ve);break}case"Home":{ve.preventDefault(),(be=F.current)==null||be.focus(),D(l),a==null||a(l);break}case"End":{ve.preventDefault(),(Ae=F.current)==null||Ae.focus(),D(c),a==null||a(c);break}}};return w.jsx(nwe,{value:{getStyles:M},children:w.jsxs(JG,{...O,ref:ns(t,W),onKeyDownCapture:Ce,onMouseDownCapture:()=>{var ve;return(ve=W.current)==null?void 0:ve.focus()},size:u,disabled:S,children:[w.jsx(ZG,{inverted:A,offset:0,filled:H,marks:m,min:l,max:c,value:G,disabled:S,containerProps:{ref:he,onMouseEnter:_?()=>U(!0):void 0,onMouseLeave:_?()=>U(!1):void 0},children:w.jsx(ED,{max:c,min:l,value:G,position:H,dragging:ye,label:ee,ref:F,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:_,isHovered:B,disabled:S,children:x})}),w.jsx("input",{type:"hidden",name:p,value:G,...P})]})})});TL.classes=SL;TL.displayName="@mantine/core/Slider";function sKe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const oKe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":un(t,"slider-size"),"--slider-color":n?ai(n,e):void 0,"--slider-radius":i===void 0?void 0:ci(i),"--slider-thumb-size":r!==void 0?Ee(r):"calc(var(--slider-size) * 2)"}}),aKe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},SD=je((e,t)=>{const n=xe("RangeSlider",aKe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:_,thumbFromLabel:x,thumbToLabel:S,showLabelOnHover:E,thumbChildren:T,disabled:A,unstyled:k,scale:R,inverted:$,className:P,style:O,vars:M,hiddenInputProps:j,...B}=n,U=mt({name:"Slider",props:n,classes:SL,classNames:r,className:P,styles:i,style:O,vars:M,varsResolver:oKe,unstyled:k}),{dir:V}=Qh(),[D,z]=I.useState(-1),[W,F]=I.useState(!1),[H,G]=jo({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ee=I.useRef(H),le=I.useRef([]),de=I.useRef(void 0),he=[xD({value:H[0],min:l,max:c}),xD({value:H[1],min:l,max:c})],ye=p??iwe(h),Ce=qe=>{G(qe),ee.current=qe};I.useEffect(()=>{Array.isArray(s)&&(ee.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const ve=(qe,me,ct)=>{const gt=[...ee.current];gt[me]=qe,me===0&&(qe>gt[1]-(f-1e-9)&&(gt[1]=Math.min(qe+f,c)),qe>(c-(f-1e-9)||l)&&(gt[me]=ee.current[me]),gt[1]-qe>d&&(gt[1]=qe+d)),me===1&&(qe<gt[0]+f&&(gt[0]=Math.max(qe-f,l)),qe<gt[0]+f&&(gt[me]=ee.current[me]),qe-gt[0]>d&&(gt[0]=qe-d)),gt[0]=oc(gt[0],ye),gt[1]=oc(gt[1],ye),Ce(gt),ct&&(a==null||a(ee.current))},Ye=qe=>{if(!A){const me=J7({value:qe,min:l,max:c,step:h,precision:ye});ve(me,de.current,!1)}},{ref:Ue,active:pt}=zM(({x:qe})=>Ye(qe),{onScrubEnd:()=>a==null?void 0:a(ee.current)},V);function rt(qe){de.current=qe}const be=qe=>{Ue.current.focus();const me=Ue.current.getBoundingClientRect(),ct=sKe(qe.nativeEvent),gt=J7({value:ct-me.left,max:c,min:l,step:h,containerWidth:me.width}),wt=Math.abs(H[0]-gt)>Math.abs(H[1]-gt)?1:0,pe=V==="ltr"?wt:wt===1?0:1;de.current=pe},Ae=()=>D!==1&&D!==0?(z(0),0):D,Ve=qe=>{if(!A)switch(qe.key){case"ArrowUp":{qe.preventDefault();const me=Ae();le.current[me].focus(),ve(oc(Math.min(Math.max(ee.current[me]+h,l),c),ye),me,!0);break}case"ArrowRight":{qe.preventDefault();const me=Ae();le.current[me].focus(),ve(oc(Math.min(Math.max(V==="rtl"?ee.current[me]-h:ee.current[me]+h,l),c),ye),me,!0);break}case"ArrowDown":{qe.preventDefault();const me=Ae();le.current[me].focus(),ve(oc(Math.min(Math.max(ee.current[me]-h,l),c),ye),me,!0);break}case"ArrowLeft":{qe.preventDefault();const me=Ae();le.current[me].focus(),ve(oc(Math.min(Math.max(V==="rtl"?ee.current[me]+h:ee.current[me]-h,l),c),ye),me,!0);break}}},ut={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:_,onBlur:()=>z(-1)},Nt=Array.isArray(T);return w.jsx(nwe,{value:{getStyles:U},children:w.jsxs(JG,{...B,size:u,ref:t,disabled:A,children:[w.jsxs(ZG,{offset:he[0],marksOffset:H[0],filled:he[1]-he[0],marks:y,inverted:$,min:l,max:c,value:H[1],disabled:A,containerProps:{ref:Ue,onMouseEnter:E?()=>F(!0):void 0,onMouseLeave:E?()=>F(!1):void 0,onTouchStartCapture:be,onTouchEndCapture:()=>{de.current=-1},onMouseDownCapture:be,onMouseUpCapture:()=>{de.current=-1},onKeyDownCapture:Ve},children:[w.jsx(ED,{...ut,value:R(H[0]),position:he[0],dragging:pt,label:typeof v=="function"?v(oc(R(H[0]),ye)):v,ref:qe=>{le.current[0]=qe},thumbLabel:x,onMouseDown:()=>rt(0),onFocus:()=>z(0),showLabelOnHover:E,isHovered:W,disabled:A,children:Nt?T[0]:T}),w.jsx(ED,{...ut,thumbLabel:S,value:R(H[1]),position:he[1],dragging:pt,label:typeof v=="function"?v(oc(R(H[1]),ye)):v,ref:qe=>{le.current[1]=qe},onMouseDown:()=>rt(1),onFocus:()=>z(1),showLabelOnHover:E,isHovered:W,disabled:A,children:Nt?T[1]:T})]}),w.jsx("input",{type:"hidden",name:`${g}_from`,value:H[0],...j}),w.jsx("input",{type:"hidden",name:`${g}_to`,value:H[1],...j})]})})});SD.classes=SL;SD.displayName="@mantine/core/RangeSlider";const uKe={},b1=je((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=xe("Space",uKe,e);return w.jsx(Ne,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});b1.displayName="@mantine/core/Space";var swe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const lKe={maxHeight:100,initialState:!1},cKe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),eY=je((e,t)=>{const n=xe("Spoiler",lKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=mt({name:"Spoiler",classes:swe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cKe}),b=nl(g),_=`${b}-region`,[x,S]=I.useState(l),{ref:E,height:T}=X7e(),A=x?f:d,k=A!==null&&c<T;return w.jsxs(Ne,{...v("root"),id:b,ref:t,"data-has-spoiler":k||void 0,...y,children:[k&&w.jsx(Rb,{component:"button",type:"button",ref:p,onClick:()=>S(R=>!R),"aria-expanded":x,"aria-controls":_,...v("control"),children:A}),w.jsx("div",{...v("content",{style:{maxHeight:x?T?Ee(T):void 0:Ee(c)}}),"data-reduce-motion":!0,role:"region",id:_,children:w.jsx("div",{ref:E,children:h})})]})});eY.classes=swe;eY.displayName="@mantine/core/Spoiler";var owe={root:"m_6d731127"};const fKe={gap:"md",align:"stretch",justify:"flex-start"},dKe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Ol(t),"--stack-align":n,"--stack-justify":r}}),Oi=je((e,t)=>{const n=xe("Stack",fKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=mt({name:"Stack",props:n,classes:owe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dKe});return w.jsx(Ne,{ref:t,...p("root"),variant:d,...h})});Oi.classes=owe;Oi.displayName="@mantine/core/Stack";const[hKe,pKe]=Ia("Table component was not found in the tree");var zI={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function mKe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Pb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=je((i,s)=>{const o=xe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=pKe();return w.jsx(Ne,{component:e,ref:s,...mKe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=zI,r}const Z7=Pb("th",{columnBorder:!0}),awe=Pb("td",{columnBorder:!0}),UP=Pb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),uwe=Pb("thead",{stickyHeader:!0}),lwe=Pb("tbody"),cwe=Pb("tfoot"),fwe=Pb("caption",{captionSide:!0});function tY({data:e}){return w.jsxs(w.Fragment,{children:[e.caption&&w.jsx(fwe,{children:e.caption}),e.head&&w.jsx(uwe,{children:w.jsx(UP,{children:e.head.map((t,n)=>w.jsx(Z7,{children:t},n))})}),e.body&&w.jsx(lwe,{children:e.body.map((t,n)=>w.jsx(UP,{children:t.map((r,i)=>w.jsx(awe,{children:r},i))},n))}),e.foot&&w.jsx(cwe,{children:w.jsx(UP,{children:e.foot.map((t,n)=>w.jsx(Z7,{children:t},n))})})]})}tY.displayName="@mantine/core/TableDataRenderer";const gKe={type:"scrollarea"},yKe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Ee(t),"--table-overflow":n==="native"?"auto":void 0}}),nY=je((e,t)=>{const n=xe("TableScrollContainer",gKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=mt({name:"TableScrollContainer",classes:zI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yKe,rootSelector:"scrollContainer"});return w.jsx(Ne,{component:f==="scrollarea"?Dx:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:w.jsx("div",{...h("scrollContainerInner"),children:l})})});nY.classes=zI;nY.displayName="@mantine/core/TableScrollContainer";const vKe={withRowBorders:!0,verticalSpacing:7},bKe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Ol(r),"--table-vertical-spacing":Ol(i),"--table-border-color":s?ai(s,e):void 0,"--table-striped-color":u&&o?ai(o,e):void 0,"--table-highlight-on-hover-color":l&&a?ai(a,e):void 0,"--table-sticky-header-offset":f?Ee(c):void 0}}),Gl=je((e,t)=>{const n=xe("Table",vKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:_,variant:x,data:S,children:E,stickyHeader:T,stickyHeaderOffset:A,mod:k,...R}=n,$=mt({name:"Table",props:n,className:i,style:s,classes:zI,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:bKe});return w.jsx(hKe,{value:{getStyles:$,stickyHeader:T,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:w.jsx(Ne,{component:"table",variant:x,ref:t,mod:[{"data-with-table-border":v},k],...$("table"),...R,children:E||!!S&&w.jsx(tY,{data:S})})})});Gl.classes=zI;Gl.displayName="@mantine/core/Table";Gl.Td=awe;Gl.Th=Z7;Gl.Tr=UP;Gl.Thead=uwe;Gl.Tbody=lwe;Gl.Tfoot=cwe;Gl.Caption=fwe;Gl.ScrollContainer=nY;Gl.DataRenderer=tY;const[_Ke,rY]=Ia("Tabs component was not found in the tree");var VI={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const wKe={},iY=je((e,t)=>{const n=xe("TabsList",wKe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=rY();return w.jsx(Ne,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});iY.classes=VI;iY.displayName="@mantine/core/TabsList";const EKe={},sY=je((e,t)=>{const n=xe("TabsPanel",EKe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=rY(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return w.jsx(Ne,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});sY.classes=VI;sY.displayName="@mantine/core/TabsPanel";const xKe={},oY=je((e,t)=>{const n=xe("TabsTab",xKe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=js(),{dir:b}=Qh(),_=rY(),x=a===_.value,S=T=>{_.onChange(_.allowTabDeactivation&&a===_.value?null:a),u==null||u(T)},E={classNames:h,styles:p,props:n};return w.jsxs(ao,{...y,..._.getStyles("tab",{className:r,style:d,variant:_.variant,...E}),disabled:c,unstyled:_.unstyled,variant:_.variant,mod:[{active:x,disabled:c,orientation:_.orientation,inverted:_.inverted,placement:_.orientation==="vertical"&&_.placement},g],ref:t,role:"tab",id:_.getTabId(a),"aria-selected":x,tabIndex:x||_.value===null?0:-1,"aria-controls":_.getPanelId(a),onClick:S,__vars:{"--tabs-color":f?ai(f,v):void 0},onKeyDown:L1e({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:_.activateTabWithKeyboard,loop:_.loop,orientation:_.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&w.jsx("span",{..._.getStyles("tabSection",E),"data-position":"left",children:o}),i&&w.jsx("span",{..._.getStyles("tabLabel",E),children:i}),s&&w.jsx("span",{..._.getStyles("tabSection",E),"data-position":"right",children:s})]})});oY.classes=VI;oY.displayName="@mantine/core/TabsTab";const Xoe="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",SKe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},TKe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":ci(t),"--tabs-color":ai(n,e),"--tabs-text-color":Px(r,e)?Ny({color:n,theme:e,autoContrast:r}):void 0}}),pl=je((e,t)=>{const n=xe("Tabs",SKe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:_,className:x,style:S,vars:E,autoContrast:T,mod:A,...k}=n,R=nl(l),[$,P]=jo({value:i,defaultValue:r,finalValue:null,onChange:s}),O=mt({name:"Tabs",props:n,classes:VI,className:x,style:S,classNames:v,styles:b,unstyled:_,vars:E,varsResolver:TKe});return w.jsx(_Ke,{value:{placement:g,value:$,orientation:o,id:R,loop:u,activateTabWithKeyboard:c,getTabId:Wse(`${R}-tab`,Xoe),getPanelId:Wse(`${R}-panel`,Xoe),onChange:P,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:_,getStyles:O},children:w.jsx(Ne,{ref:t,id:R,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},A],...O("root"),...k,children:a})})});pl.classes=VI;pl.displayName="@mantine/core/Tabs";pl.Tab=oY;pl.Panel=sY;pl.List=iY;const CKe={},Vx=je((e,t)=>{const n=xe("TextInput",CKe,e);return w.jsx(Wc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Vx.classes=Wc.classes;Vx.displayName="@mantine/core/TextInput";const AKe=["h1","h2","h3","h4","h5","h6"];function IKe(e,t){const n=t!==void 0?t:`h${e}`;return AKe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Ee(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var dwe={root:"m_8a5d1357"};const kKe={order:1},RKe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=IKe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},Co=je((e,t)=>{const n=xe("Title",kKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=mt({name:"Title",props:n,classes:dwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:RKe});return[1,2,3,4,5,6].includes(u)?w.jsx(Ne,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});Co.classes=dwe;Co.displayName="@mantine/core/Title";const hwe=I.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),lo=()=>I.useContext(hwe);function NKe({children:e}){const[t,n]=Nr.useState(void 0),r=Nr.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return w.jsx(hwe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lA(){return lA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lA.apply(this,arguments)}var r0;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(r0||(r0={}));const Qoe="popstate";function PKe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return eU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:TD(i)}return DKe(t,n,null,e)}function fs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pwe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function OKe(){return Math.random().toString(36).substr(2,8)}function Joe(e,t){return{usr:e.state,key:e.key,idx:t}}function eU(e,t,n,r){return n===void 0&&(n=null),lA({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Hx(t):t,{state:n,key:t&&t.key||r||OKe()})}function TD(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Hx(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function DKe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=r0.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(lA({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=r0.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=r0.Push;let v=eU(m.location,g,y);l=c()+1;let b=Joe(v,l),_=m.createHref(v);try{o.pushState(b,"",_)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(_)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=r0.Replace;let v=eU(m.location,g,y);l=c();let b=Joe(v,l),_=m.createHref(v);o.replaceState(b,"",_),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:TD(g);return v=v.replace(/ $/,"%20"),fs(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Qoe,f),u=g,()=>{i.removeEventListener(Qoe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var Zoe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Zoe||(Zoe={}));function $Ke(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Hx(t):t,i=aY(r.pathname||"/",n);if(i==null)return null;let s=mwe(e);MKe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=YKe(i);o=qKe(s[a],u)}return o}function mwe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(fs(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=T0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(fs(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),mwe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:VKe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of gwe(s.path))i(s,o,u)}),t}function gwe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=gwe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function MKe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:HKe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const LKe=/^:[\w-]+$/,FKe=3,jKe=2,BKe=1,UKe=10,zKe=-2,eae=e=>e==="*";function VKe(e,t){let n=e.split("/"),r=n.length;return n.some(eae)&&(r+=zKe),t&&(r+=jKe),n.filter(i=>!eae(i)).reduce((i,s)=>i+(LKe.test(s)?FKe:s===""?BKe:UKe),r)}function HKe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function qKe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=WKe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:T0([i,c.pathname]),pathnameBase:JKe(T0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=T0([i,c.pathnameBase]))}return s}function WKe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=GKe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function GKe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),pwe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function YKe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return pwe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function aY(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function KKe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Hx(e):e;return{pathname:n?n.startsWith("/")?n:XKe(n,t):t,search:ZKe(r),hash:eXe(i)}}function XKe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function j8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QKe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function uY(e,t){let n=QKe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function lY(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Hx(e):(i=lA({},e),fs(!i.pathname||!i.pathname.includes("?"),j8("?","pathname","search",i)),fs(!i.pathname||!i.pathname.includes("#"),j8("#","pathname","hash",i)),fs(!i.search||!i.search.includes("#"),j8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=KKe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const T0=e=>e.join("/").replace(/\/\/+/g,"/"),JKe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ZKe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,eXe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function tXe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ywe=["post","put","patch","delete"];new Set(ywe);const nXe=["get",...ywe];new Set(nXe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cA(){return cA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cA.apply(this,arguments)}const cY=I.createContext(null),rXe=I.createContext(null),Dy=I.createContext(null),CL=I.createContext(null),tp=I.createContext({outlet:null,matches:[],isDataRoute:!1}),vwe=I.createContext(null);function bwe(e,t){let{relative:n}=t===void 0?{}:t;qx()||fs(!1);let{basename:r,navigator:i}=I.useContext(Dy),{hash:s,pathname:o,search:a}=wwe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:T0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function qx(){return I.useContext(CL)!=null}function $y(){return qx()||fs(!1),I.useContext(CL).location}function _we(e){I.useContext(Dy).static||I.useLayoutEffect(e)}function Yc(){let{isDataRoute:e}=I.useContext(tp);return e?yXe():iXe()}function iXe(){qx()||fs(!1);let e=I.useContext(cY),{basename:t,future:n,navigator:r}=I.useContext(Dy),{matches:i}=I.useContext(tp),{pathname:s}=$y(),o=JSON.stringify(uY(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return _we(()=>{a.current=!0}),I.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=lY(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:T0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const sXe=I.createContext(null);function oXe(e){let t=I.useContext(tp).outlet;return t&&I.createElement(sXe.Provider,{value:e},t)}function Am(){let{matches:e}=I.useContext(tp),t=e[e.length-1];return t?t.params:{}}function wwe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=I.useContext(Dy),{matches:i}=I.useContext(tp),{pathname:s}=$y(),o=JSON.stringify(uY(i,r.v7_relativeSplatPath));return I.useMemo(()=>lY(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function Ewe(e,t){return aXe(e,t)}function aXe(e,t,n,r){qx()||fs(!1);let{navigator:i}=I.useContext(Dy),{matches:s}=I.useContext(tp),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=$y(),c;if(t){var f;let g=typeof t=="string"?Hx(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||fs(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=$Ke(e,{pathname:h}),m=dXe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:T0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:T0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?I.createElement(CL.Provider,{value:{location:cA({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:r0.Pop}},m):m}function uXe(){let e=gXe(),t=tXe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:i},n):null,null)}const lXe=I.createElement(uXe,null);class cXe extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?I.createElement(tp.Provider,{value:this.props.routeContext},I.createElement(vwe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fXe(e){let{routeContext:t,match:n,children:r}=e,i=I.useContext(cY);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(tp.Provider,{value:t},r)}function dXe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||fs(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||lXe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=I.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,I.createElement(fXe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?I.createElement(cXe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var xwe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(xwe||{}),CD=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(CD||{});function hXe(e){let t=I.useContext(cY);return t||fs(!1),t}function pXe(e){let t=I.useContext(rXe);return t||fs(!1),t}function mXe(e){let t=I.useContext(tp);return t||fs(!1),t}function Swe(e){let t=mXe(),n=t.matches[t.matches.length-1];return n.route.id||fs(!1),n.route.id}function gXe(){var e;let t=I.useContext(vwe),n=pXe(CD.UseRouteError),r=Swe(CD.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function yXe(){let{router:e}=hXe(xwe.UseNavigateStable),t=Swe(CD.UseNavigateStable),n=I.useRef(!1);return _we(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,cA({fromRouteId:t},s)))},[e,t])}function fY(e){let{to:t,replace:n,state:r,relative:i}=e;qx()||fs(!1);let{future:s,static:o}=I.useContext(Dy),{matches:a}=I.useContext(tp),{pathname:u}=$y(),l=Yc(),c=lY(t,uY(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return I.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function vXe(e){return oXe(e.context)}function Np(e){fs(!1)}function bXe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=r0.Pop,navigator:s,static:o=!1,future:a}=e;qx()&&fs(!1);let u=t.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:u,navigator:s,static:o,future:cA({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=Hx(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=I.useMemo(()=>{let g=aY(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:I.createElement(Dy.Provider,{value:l},I.createElement(CL.Provider,{children:n,value:m}))}function _Xe(e){let{children:t,location:n}=e;return Ewe(tU(t),n)}new Promise(()=>{});function tU(e,t){t===void 0&&(t=[]);let n=[];return I.Children.forEach(e,(r,i)=>{if(!I.isValidElement(r))return;let s=[...t,i];if(r.type===I.Fragment){n.push.apply(n,tU(r.props.children,s));return}r.type!==Np&&fs(!1),!r.props.index||!r.props.children||fs(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=tU(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nU(){return nU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nU.apply(this,arguments)}function wXe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function EXe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function xXe(e,t){return e.button===0&&(!t||t==="_self")&&!EXe(e)}function rU(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function SXe(e,t){let n=rU(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const TXe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],CXe="6";try{window.__reactRouterVersion=CXe}catch{}const AXe="startTransition",tae=Cye[AXe];function IXe(e){let{basename:t,children:n,future:r,window:i}=e,s=I.useRef();s.current==null&&(s.current=PKe({window:i,v5Compat:!0}));let o=s.current,[a,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=I.useCallback(f=>{l&&tae?tae(()=>u(f)):u(f)},[u,l]);return I.useLayoutEffect(()=>o.listen(c),[o,c]),I.createElement(bXe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const kXe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RXe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NXe=I.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:l,preventScrollReset:c,unstable_viewTransition:f}=t,d=wXe(t,TXe),{basename:h}=I.useContext(Dy),p,m=!1;if(typeof l=="string"&&RXe.test(l)&&(p=l,kXe))try{let b=new URL(window.location.href),_=l.startsWith("//")?new URL(b.protocol+l):new URL(l),x=aY(_.pathname,h);_.origin===b.origin&&x!=null?l=x+_.search+_.hash:m=!0}catch{}let g=bwe(l,{relative:i}),y=PXe(l,{replace:o,state:a,target:u,preventScrollReset:c,relative:i,unstable_viewTransition:f});function v(b){r&&r(b),b.defaultPrevented||y(b)}return I.createElement("a",nU({},d,{href:p||g,onClick:m||s?r:v,ref:n,target:u}))});var nae;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(nae||(nae={}));var rae;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(rae||(rae={}));function PXe(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=t===void 0?{}:t,u=Yc(),l=$y(),c=wwe(e,{relative:o});return I.useCallback(f=>{if(xXe(f,n)){f.preventDefault();let d=r!==void 0?r:TD(l)===TD(c);u(e,{replace:d,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[l,u,c,r,i,n,e,s,o,a])}function dY(e){let t=I.useRef(rU(e)),n=I.useRef(!1),r=$y(),i=I.useMemo(()=>SXe(r.search,n.current?null:t.current),[r.search]),s=Yc(),o=I.useCallback((a,u)=>{const l=rU(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const hY=I.createContext(null);hY.displayName="@mantine/modals/ModalsContext";function OXe(){const e=I.useContext(hY);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function DXe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=OXe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return w.jsxs(w.Fragment,{children:[l&&w.jsx(Ne,{mb:"md",children:l}),w.jsxs(Zn,{justify:"flex-end",...o,children:[w.jsx(sr,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),w.jsx(sr,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[$Xe,AL]=rUe("mantine-modals");AL("openModal");AL("closeModal");AL("closeAllModals");const MXe=AL("openConfirmModal");function iae(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function LXe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;iae(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{iae(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function FXe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function jXe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=I.useReducer(LXe,{modals:[],current:null}),o=I.useRef(i);o.current=i;const a=I.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=I.useCallback(({modalId:g,...y})=>{const v=g||JC();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=I.useCallback(({modalId:g,...y})=>{const v=g||JC();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=I.useCallback((g,{modalId:y,...v})=>{const b=y||JC();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=I.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);$Xe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:w.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=FXe(g.props);return{modalProps:y,content:w.jsx(DXe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:w.jsx(w.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return w.jsxs(hY.Provider,{value:d,children:[w.jsx(Oo,{zIndex:Vc("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}var Twe={exports:{}},BXe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",UXe=BXe,zXe=UXe;function Cwe(){}function Awe(){}Awe.resetWarningCache=Cwe;var VXe=function(){function e(r,i,s,o,a,u){if(u!==zXe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Awe,resetWarningCache:Cwe};return n.PropTypes=n,n};Twe.exports=VXe();var HXe=Twe.exports;const Ut=Ho(HXe);var qXe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},WXe=Object.defineProperty,GXe=Object.defineProperties,YXe=Object.getOwnPropertyDescriptors,AD=Object.getOwnPropertySymbols,Iwe=Object.prototype.hasOwnProperty,kwe=Object.prototype.propertyIsEnumerable,sae=(e,t,n)=>t in e?WXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oae=(e,t)=>{for(var n in t||(t={}))Iwe.call(t,n)&&sae(e,n,t[n]);if(AD)for(var n of AD(t))kwe.call(t,n)&&sae(e,n,t[n]);return e},KXe=(e,t)=>GXe(e,YXe(t)),XXe=(e,t)=>{var n={};for(var r in e)Iwe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AD)for(var r of AD(e))t.indexOf(r)<0&&kwe.call(e,r)&&(n[r]=e[r]);return n},Ur=(e,t,n)=>{const r=I.forwardRef((i,s)=>{var o=i,{color:a="currentColor",size:u=24,stroke:l=2,children:c}=o,f=XXe(o,["color","size","stroke","children"]);return I.createElement("svg",oae(KXe(oae({ref:s},qXe),{width:u,height:u,stroke:a,strokeWidth:l,className:`tabler-icon tabler-icon-${e}`}),f),[...n.map(([d,h])=>I.createElement(d,h)),...c||[]])});return r.propTypes={color:Ut.string,size:Ut.oneOfType([Ut.string,Ut.number]),stroke:Ut.oneOfType([Ut.string,Ut.number])},r.displayName=`${t}`,r},QXe=Ur("alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),JXe=Ur("alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),ZXe=Ur("arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]),eQe=Ur("arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]),tQe=Ur("at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]),nQe=Ur("brand-google","IconBrandGoogle",[["path",{d:"M20.945 11a9 9 0 1 1 -3.284 -5.997l-2.655 2.392a5.5 5.5 0 1 0 2.119 6.605h-4.125v-3h7.945z",key:"svg-0"}]]),rQe=Ur("chart-bar","IconChartBar",[["path",{d:"M3 12m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M9 8m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M15 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20l14 0",key:"svg-3"}]]),iQe=Ur("chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]),sQe=Ur("chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]),oQe=Ur("check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]),aQe=Ur("database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]),uQe=Ur("dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),lQe=Ur("edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]),cQe=Ur("file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]),fQe=Ur("layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]),dQe=Ur("mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]),hQe=Ur("minus-vertical","IconMinusVertical",[["path",{d:"M12 5v14",key:"svg-0"}]]),pQe=Ur("player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]),Rwe=Ur("plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]),mQe=Ur("progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]),aae=Ur("schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]),gQe=Ur("search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]),yQe=Ur("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),Nwe=Ur("table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]),vQe=Ur("table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]),bQe=Ur("trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]),_Qe=Ur("user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]),Pwe=Ur("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);function pY(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Kc="/ThinkAloud/",uae=["http","https","mailto","tel"];function wQe(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let i=-1;for(;++i<uae.length;){const s=uae[i];if(r===s.length&&t.slice(0,s.length).toLowerCase()===s)return t}return i=t.indexOf("?"),i!==-1&&r>i||(i=t.indexOf("#"),i!==-1&&r>i)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var EQe=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const mY=Ho(EQe);function Dw(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?lae(e.position):"start"in e||"end"in e?lae(e):"line"in e||"column"in e?iU(e):""}function iU(e){return cae(e&&e.line)+":"+cae(e&&e.column)}function lae(e){return iU(e&&e.start)+"-"+iU(e&&e.end)}function cae(e){return e&&typeof e=="number"?e:1}let Xc=class extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=Dw(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}};Xc.prototype.file="";Xc.prototype.name="";Xc.prototype.reason="";Xc.prototype.message="";Xc.prototype.stack="";Xc.prototype.fatal=null;Xc.prototype.column=null;Xc.prototype.line=null;Xc.prototype.source=null;Xc.prototype.ruleId=null;Xc.prototype.position=null;const Dd={basename:xQe,dirname:SQe,extname:TQe,join:CQe,sep:"/"};function xQe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');HI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function SQe(e){if(HI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function TQe(e){HI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function CQe(...e){let t=-1,n;for(;++t<e.length;)HI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":AQe(n)}function AQe(e){HI(e);const t=e.charCodeAt(0)===47;let n=IQe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function IQe(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function HI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const kQe={cwd:RQe};function RQe(){return"/"}function sU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function NQe(e){if(typeof e=="string")e=new URL(e);else if(!sU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return PQe(e)}function PQe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const B8=["history","path","basename","stem","extname","dirname"];let OQe=class{constructor(t){let n;t?typeof t=="string"||DQe(t)?n={value:t}:sU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=kQe.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<B8.length;){const s=B8[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)B8.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){sU(t)&&(t=NQe(t)),z8(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?Dd.dirname(this.path):void 0}set dirname(t){fae(this.basename,"dirname"),this.path=Dd.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?Dd.basename(this.path):void 0}set basename(t){z8(t,"basename"),U8(t,"basename"),this.path=Dd.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?Dd.extname(this.path):void 0}set extname(t){if(U8(t,"extname"),fae(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Dd.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?Dd.basename(this.path,this.extname):void 0}set stem(t){z8(t,"stem"),U8(t,"stem"),this.path=Dd.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t||void 0)}message(t,n,r){const i=new Xc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}};function U8(e,t){if(e&&e.includes(Dd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Dd.sep+"`")}function z8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function fae(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function DQe(e){return mY(e)}function dae(e){if(e)throw e}var zP=Object.prototype.hasOwnProperty,Owe=Object.prototype.toString,hae=Object.defineProperty,pae=Object.getOwnPropertyDescriptor,mae=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Owe.call(t)==="[object Array]"},gae=function(t){if(!t||Owe.call(t)!=="[object Object]")return!1;var n=zP.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&zP.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||zP.call(t,i)},yae=function(t,n){hae&&n.name==="__proto__"?hae(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},vae=function(t,n){if(n==="__proto__")if(zP.call(t,n)){if(pae)return pae(t,n).value}else return;return t[n]},$Qe=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=vae(a,n),i=vae(t,n),a!==i&&(c&&i&&(gae(i)||(s=mae(i)))?(s?(s=!1,o=r&&mae(r)?r:[]):o=r&&gae(r)?r:{},yae(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&yae(a,{name:n,newValue:i}));return a};const bae=Ho($Qe);function oU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function MQe(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?LQe(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function LQe(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}class Qc extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=Dw(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}}Qc.prototype.file="";Qc.prototype.name="";Qc.prototype.reason="";Qc.prototype.message="";Qc.prototype.stack="";Qc.prototype.fatal=null;Qc.prototype.column=null;Qc.prototype.line=null;Qc.prototype.source=null;Qc.prototype.ruleId=null;Qc.prototype.position=null;const $d={basename:FQe,dirname:jQe,extname:BQe,join:UQe,sep:"/"};function FQe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');qI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function jQe(e){if(qI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function BQe(e){qI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function UQe(...e){let t=-1,n;for(;++t<e.length;)qI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":zQe(n)}function zQe(e){qI(e);const t=e.charCodeAt(0)===47;let n=VQe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function VQe(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function qI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const HQe={cwd:qQe};function qQe(){return"/"}function aU(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function WQe(e){if(typeof e=="string")e=new URL(e);else if(!aU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return GQe(e)}function GQe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const V8=["history","path","basename","stem","extname","dirname"];class YQe{constructor(t){let n;t?typeof t=="string"||KQe(t)?n={value:t}:aU(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=HQe.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<V8.length;){const s=V8[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)V8.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){aU(t)&&(t=WQe(t)),q8(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?$d.dirname(this.path):void 0}set dirname(t){_ae(this.basename,"dirname"),this.path=$d.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?$d.basename(this.path):void 0}set basename(t){q8(t,"basename"),H8(t,"basename"),this.path=$d.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?$d.extname(this.path):void 0}set extname(t){if(H8(t,"extname"),_ae(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=$d.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?$d.basename(this.path,this.extname):void 0}set stem(t){q8(t,"stem"),H8(t,"stem"),this.path=$d.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t||void 0)}message(t,n,r){const i=new Qc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}}function H8(e,t){if(e&&e.includes($d.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+$d.sep+"`")}function q8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function _ae(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function KQe(e){return mY(e)}const XQe=$we().freeze(),Dwe={}.hasOwnProperty;function $we(){const e=MQe(),t=[];let n={},r,i=-1;return s.data=o,s.Parser=void 0,s.Compiler=void 0,s.freeze=a,s.attachers=t,s.use=u,s.parse=l,s.stringify=c,s.run=f,s.runSync=d,s.process=h,s.processSync=p,s;function s(){const m=$we();let g=-1;for(;++g<t.length;)m.use(...t[g]);return m.data(bae(!0,{},n)),m}function o(m,g){return typeof m=="string"?arguments.length===2?(Y8("data",r),n[m]=g,s):Dwe.call(n,m)&&n[m]||null:m?(Y8("data",r),n=m,s):n}function a(){if(r)return s;for(;++i<t.length;){const[m,...g]=t[i];if(g[0]===!1)continue;g[0]===!0&&(g[0]=void 0);const y=m.call(s,...g);typeof y=="function"&&e.use(y)}return r=!0,i=Number.POSITIVE_INFINITY,s}function u(m,...g){let y;if(Y8("use",r),m!=null)if(typeof m=="function")x(m,...g);else if(typeof m=="object")Array.isArray(m)?_(m):b(m);else throw new TypeError("Expected usable value, not `"+m+"`");return y&&(n.settings=Object.assign(n.settings||{},y)),s;function v(S){if(typeof S=="function")x(S);else if(typeof S=="object")if(Array.isArray(S)){const[E,...T]=S;x(E,...T)}else b(S);else throw new TypeError("Expected usable value, not `"+S+"`")}function b(S){_(S.plugins),S.settings&&(y=Object.assign(y||{},S.settings))}function _(S){let E=-1;if(S!=null)if(Array.isArray(S))for(;++E<S.length;){const T=S[E];v(T)}else throw new TypeError("Expected a list of plugins, not `"+S+"`")}function x(S,E){let T=-1,A;for(;++T<t.length;)if(t[T][0]===S){A=t[T];break}A?(oU(A[1])&&oU(E)&&(E=bae(!0,A[1],E)),A[1]=E):t.push([...arguments])}}function l(m){s.freeze();const g=uT(m),y=s.Parser;return W8("parse",y),wae(y,"parse")?new y(String(g),g).parse():y(String(g),g)}function c(m,g){s.freeze();const y=uT(g),v=s.Compiler;return G8("stringify",v),Eae(m),wae(v,"compile")?new v(m,y).compile():v(m,y)}function f(m,g,y){if(Eae(m),s.freeze(),!y&&typeof g=="function"&&(y=g,g=void 0),!y)return new Promise(v);v(null,y);function v(b,_){e.run(m,uT(g),x);function x(S,E,T){E=E||m,S?_(S):b?b(E):y(null,E,T)}}}function d(m,g){let y,v;return s.run(m,g,b),xae("runSync","run",v),y;function b(_,x){dae(_),y=x,v=!0}}function h(m,g){if(s.freeze(),W8("process",s.Parser),G8("process",s.Compiler),!g)return new Promise(y);y(null,g);function y(v,b){const _=uT(m);s.run(s.parse(_),_,(S,E,T)=>{if(S||!E||!T)x(S);else{const A=s.stringify(E,T);A==null||(ZQe(A)?T.value=A:T.result=A),x(S,T)}});function x(S,E){S||!E?b(S):v?v(E):g(null,E)}}}function p(m){let g;s.freeze(),W8("processSync",s.Parser),G8("processSync",s.Compiler);const y=uT(m);return s.process(y,v),xae("processSync","process",g),y;function v(b){g=!0,dae(b)}}}function wae(e,t){return typeof e=="function"&&e.prototype&&(QQe(e.prototype)||t in e.prototype)}function QQe(e){let t;for(t in e)if(Dwe.call(e,t))return!0;return!1}function W8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function G8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function Y8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Eae(e){if(!oU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function xae(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function uT(e){return JQe(e)?e:new YQe(e)}function JQe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function ZQe(e){return typeof e=="string"||mY(e)}const eJe={};function tJe(e,t){const n=eJe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Mwe(e,r,i)}function Mwe(e,t,n){if(nJe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Sae(e.children,t,n)}return Array.isArray(e)?Sae(e,t,n):""}function Sae(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Mwe(e[i],t,n);return r.join("")}function nJe(e){return!!(e&&typeof e=="object")}function kh(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function cc(e,t){return e.length>0?(kh(e,e.length,0,t),e):t}const Tae={}.hasOwnProperty;function rJe(e){const t={};let n=-1;for(;++n<e.length;)iJe(t,e[n]);return t}function iJe(e,t){let n;for(n in t){const i=(Tae.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Tae.call(i,o)||(i[o]=[]);const a=s[o];sJe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function sJe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);kh(e,0,0,r)}const oJe=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Wd=My(/[A-Za-z]/),xl=My(/[\dA-Za-z]/),aJe=My(/[#-'*+\--9=?A-Z^-~]/);function uU(e){return e!==null&&(e<32||e===127)}const lU=My(/\d/),uJe=My(/[\dA-Fa-f]/),lJe=My(/[!-/:-@[-`{-~]/);function tn(e){return e!==null&&e<-2}function Uu(e){return e!==null&&(e<0||e===32)}function vr(e){return e===-2||e===-1||e===32}const cJe=My(oJe),fJe=My(/\s/);function My(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function oi(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return vr(u)?(e.enter(n),a(u)):t(u)}function a(u){return vr(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const dJe={tokenize:hJe};function hJe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),oi(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return tn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const pJe={tokenize:mJe},Cae={tokenize:gJe};function mJe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const _=n[r];return t.containerState=_[1],e.attempt(_[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const _=t.events.length;let x=_,S;for(;x--;)if(t.events[x][0]==="exit"&&t.events[x][1].type==="chunkFlow"){S=t.events[x][1].end;break}y(r);let E=_;for(;E<t.events.length;)t.events[E][1].end=Object.assign({},S),E++;return kh(t.events,x+1,0,t.events.slice(_)),t.events.length=E,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Cae,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(Cae,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return tn(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,_){const x=t.sliceStream(b);if(_&&x.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(x),t.parser.lazy[b.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const E=t.events.length;let T=E,A,k;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){if(A){k=t.events[T][1].end;break}A=!0}for(y(r),S=E;S<t.events.length;)t.events[S][1].end=Object.assign({},k),S++;kh(t.events,T+1,0,t.events.slice(E)),t.events.length=S}}function y(b){let _=n.length;for(;_-- >b;){const x=n[_];t.containerState=x[1],x[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function gJe(e,t,n){return oi(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Aae(e){if(e===null||Uu(e)||fJe(e))return 1;if(cJe(e))return 2}function gY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const cU={name:"attention",tokenize:vJe,resolveAll:yJe};function yJe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Iae(f,-u),Iae(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=cc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=cc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=cc(l,gY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=cc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=cc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,kh(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function vJe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Aae(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Aae(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Iae(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const bJe={name:"autolink",tokenize:_Je};function _Je(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Wd(h)?(e.consume(h),o):l(h)}function o(h){return h===43||h===45||h===46||xl(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||xl(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||uU(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):aJe(h)?(e.consume(h),l):n(h)}function c(h){return xl(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||xl(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const IL={tokenize:wJe,partial:!0};function wJe(e,t,n){return r;function r(s){return vr(s)?oi(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||tn(s)?t(s):n(s)}}const Lwe={name:"blockQuote",tokenize:EJe,continuation:{tokenize:xJe},exit:SJe};function EJe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return vr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function xJe(e,t,n){const r=this;return i;function i(o){return vr(o)?oi(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(Lwe,t,n)(o)}}function SJe(e){e.exit("blockQuote")}const Fwe={name:"characterEscape",tokenize:TJe};function TJe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return lJe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const kae=document.createElement("i");function yY(e){const t="&"+e+";";kae.innerHTML=t;const n=kae.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const jwe={name:"characterReference",tokenize:CJe};function CJe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=xl,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=uJe,c):(e.enter("characterReferenceValue"),s=7,o=lU,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===xl&&!yY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const Rae={tokenize:IJe,partial:!0},Nae={name:"codeFenced",tokenize:AJe,concrete:!0};function AJe(e,t,n){const r=this,i={tokenize:x,partial:!0};let s=0,o=0,a;return u;function u(S){return l(S)}function l(S){const E=r.events[r.events.length-1];return s=E&&E[1].type==="linePrefix"?E[2].sliceSerialize(E[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),vr(S)?oi(e,f,"whitespace")(S):f(S))}function f(S){return S===null||tn(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(Rae,m,_)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(S))}function d(S){return S===null||tn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(S)):vr(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),oi(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),d)}function h(S){return S===null||tn(S)?f(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||tn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,_,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&vr(S)?oi(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||tn(S)?e.check(Rae,m,_)(S):(e.enter("codeFlowValue"),b(S))}function b(S){return S===null||tn(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),b)}function _(S){return e.exit("codeFenced"),t(S)}function x(S,E,T){let A=0;return k;function k(M){return S.enter("lineEnding"),S.consume(M),S.exit("lineEnding"),R}function R(M){return S.enter("codeFencedFence"),vr(M)?oi(S,$,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):$(M)}function $(M){return M===a?(S.enter("codeFencedFenceSequence"),P(M)):T(M)}function P(M){return M===a?(A++,S.consume(M),P):A>=o?(S.exit("codeFencedFenceSequence"),vr(M)?oi(S,O,"whitespace")(M):O(M)):T(M)}function O(M){return M===null||tn(M)?(S.exit("codeFencedFence"),E(M)):T(M)}}}function IJe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const K8={name:"codeIndented",tokenize:RJe},kJe={tokenize:NJe,partial:!0};function RJe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),oi(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):tn(l)?e.attempt(kJe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||tn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function NJe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):tn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):oi(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):tn(o)?i(o):n(o)}}const PJe={name:"codeText",tokenize:$Je,resolve:OJe,previous:DJe};function OJe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function DJe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function $Je(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):tn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||tn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}function Bwe(e){const t={};let n=-1,r,i,s,o,a,u,l;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,MJe(e,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=e[s],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},e[i][1].start),a=e.slice(i,n),a.unshift(r),kh(e,i,n-i+1,a))}}return!l}function MJe(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e[++i][1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.unshift([v,v+y.length-1]),kh(e,v,2,y)}for(d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const LJe={tokenize:BJe,resolve:jJe},FJe={tokenize:UJe,partial:!0};function jJe(e){return Bwe(e),e}function BJe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):tn(a)?e.check(FJe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function UJe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),oi(e,s,"linePrefix")}function s(o){if(o===null||tn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Uwe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||uU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||tn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Uu(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||uU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function zwe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):tn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||tn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!vr(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function Vwe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):tn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),oi(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||tn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function ZC(e,t){let n;return r;function r(i){return tn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):vr(i)?oi(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function $w(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const zJe={name:"definition",tokenize:HJe},VJe={tokenize:qJe,partial:!0};function HJe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return zwe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=$w(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Uu(h)?ZC(e,l)(h):l(h)}function l(h){return Uwe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(VJe,f,f)(h)}function f(h){return vr(h)?oi(e,d,"whitespace")(h):d(h)}function d(h){return h===null||tn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function qJe(e,t,n){return r;function r(a){return Uu(a)?ZC(e,i)(a):n(a)}function i(a){return Vwe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return vr(a)?oi(e,o,"whitespace")(a):o(a)}function o(a){return a===null||tn(a)?t(a):n(a)}}const WJe={name:"hardBreakEscape",tokenize:GJe};function GJe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return tn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const YJe={name:"headingAtx",tokenize:XJe,resolve:KJe};function KJe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},kh(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function XJe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Uu(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||tn(c)?(e.exit("atxHeading"),t(c)):vr(c)?oi(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Uu(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const QJe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Pae=["pre","script","style","textarea"],JJe={name:"htmlFlow",tokenize:nZe,resolveTo:tZe,concrete:!0},ZJe={tokenize:iZe,partial:!0},eZe={tokenize:rZe,partial:!0};function tZe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function nZe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(F){return c(F)}function c(F){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(F),f}function f(F){return F===33?(e.consume(F),d):F===47?(e.consume(F),s=!0,m):F===63?(e.consume(F),i=3,r.interrupt?t:D):Wd(F)?(e.consume(F),o=String.fromCharCode(F),g):n(F)}function d(F){return F===45?(e.consume(F),i=2,h):F===91?(e.consume(F),i=5,a=0,p):Wd(F)?(e.consume(F),i=4,r.interrupt?t:D):n(F)}function h(F){return F===45?(e.consume(F),r.interrupt?t:D):n(F)}function p(F){const H="CDATA[";return F===H.charCodeAt(a++)?(e.consume(F),a===H.length?r.interrupt?t:$:p):n(F)}function m(F){return Wd(F)?(e.consume(F),o=String.fromCharCode(F),g):n(F)}function g(F){if(F===null||F===47||F===62||Uu(F)){const H=F===47,G=o.toLowerCase();return!H&&!s&&Pae.includes(G)?(i=1,r.interrupt?t(F):$(F)):QJe.includes(o.toLowerCase())?(i=6,H?(e.consume(F),y):r.interrupt?t(F):$(F)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(F):s?v(F):b(F))}return F===45||xl(F)?(e.consume(F),o+=String.fromCharCode(F),g):n(F)}function y(F){return F===62?(e.consume(F),r.interrupt?t:$):n(F)}function v(F){return vr(F)?(e.consume(F),v):k(F)}function b(F){return F===47?(e.consume(F),k):F===58||F===95||Wd(F)?(e.consume(F),_):vr(F)?(e.consume(F),b):k(F)}function _(F){return F===45||F===46||F===58||F===95||xl(F)?(e.consume(F),_):x(F)}function x(F){return F===61?(e.consume(F),S):vr(F)?(e.consume(F),x):b(F)}function S(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(e.consume(F),u=F,E):vr(F)?(e.consume(F),S):T(F)}function E(F){return F===u?(e.consume(F),u=null,A):F===null||tn(F)?n(F):(e.consume(F),E)}function T(F){return F===null||F===34||F===39||F===47||F===60||F===61||F===62||F===96||Uu(F)?x(F):(e.consume(F),T)}function A(F){return F===47||F===62||vr(F)?b(F):n(F)}function k(F){return F===62?(e.consume(F),R):n(F)}function R(F){return F===null||tn(F)?$(F):vr(F)?(e.consume(F),R):n(F)}function $(F){return F===45&&i===2?(e.consume(F),j):F===60&&i===1?(e.consume(F),B):F===62&&i===4?(e.consume(F),z):F===63&&i===3?(e.consume(F),D):F===93&&i===5?(e.consume(F),V):tn(F)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(ZJe,W,P)(F)):F===null||tn(F)?(e.exit("htmlFlowData"),P(F)):(e.consume(F),$)}function P(F){return e.check(eZe,O,W)(F)}function O(F){return e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),M}function M(F){return F===null||tn(F)?P(F):(e.enter("htmlFlowData"),$(F))}function j(F){return F===45?(e.consume(F),D):$(F)}function B(F){return F===47?(e.consume(F),o="",U):$(F)}function U(F){if(F===62){const H=o.toLowerCase();return Pae.includes(H)?(e.consume(F),z):$(F)}return Wd(F)&&o.length<8?(e.consume(F),o+=String.fromCharCode(F),U):$(F)}function V(F){return F===93?(e.consume(F),D):$(F)}function D(F){return F===62?(e.consume(F),z):F===45&&i===2?(e.consume(F),D):$(F)}function z(F){return F===null||tn(F)?(e.exit("htmlFlowData"),W(F)):(e.consume(F),z)}function W(F){return e.exit("htmlFlow"),t(F)}}function rZe(e,t,n){const r=this;return i;function i(o){return tn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function iZe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(IL,t,n)}}const sZe={name:"htmlText",tokenize:oZe};function oZe(e,t,n){const r=this;let i,s,o;return a;function a(D){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(D),u}function u(D){return D===33?(e.consume(D),l):D===47?(e.consume(D),x):D===63?(e.consume(D),b):Wd(D)?(e.consume(D),T):n(D)}function l(D){return D===45?(e.consume(D),c):D===91?(e.consume(D),s=0,p):Wd(D)?(e.consume(D),v):n(D)}function c(D){return D===45?(e.consume(D),h):n(D)}function f(D){return D===null?n(D):D===45?(e.consume(D),d):tn(D)?(o=f,B(D)):(e.consume(D),f)}function d(D){return D===45?(e.consume(D),h):f(D)}function h(D){return D===62?j(D):D===45?d(D):f(D)}function p(D){const z="CDATA[";return D===z.charCodeAt(s++)?(e.consume(D),s===z.length?m:p):n(D)}function m(D){return D===null?n(D):D===93?(e.consume(D),g):tn(D)?(o=m,B(D)):(e.consume(D),m)}function g(D){return D===93?(e.consume(D),y):m(D)}function y(D){return D===62?j(D):D===93?(e.consume(D),y):m(D)}function v(D){return D===null||D===62?j(D):tn(D)?(o=v,B(D)):(e.consume(D),v)}function b(D){return D===null?n(D):D===63?(e.consume(D),_):tn(D)?(o=b,B(D)):(e.consume(D),b)}function _(D){return D===62?j(D):b(D)}function x(D){return Wd(D)?(e.consume(D),S):n(D)}function S(D){return D===45||xl(D)?(e.consume(D),S):E(D)}function E(D){return tn(D)?(o=E,B(D)):vr(D)?(e.consume(D),E):j(D)}function T(D){return D===45||xl(D)?(e.consume(D),T):D===47||D===62||Uu(D)?A(D):n(D)}function A(D){return D===47?(e.consume(D),j):D===58||D===95||Wd(D)?(e.consume(D),k):tn(D)?(o=A,B(D)):vr(D)?(e.consume(D),A):j(D)}function k(D){return D===45||D===46||D===58||D===95||xl(D)?(e.consume(D),k):R(D)}function R(D){return D===61?(e.consume(D),$):tn(D)?(o=R,B(D)):vr(D)?(e.consume(D),R):A(D)}function $(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(e.consume(D),i=D,P):tn(D)?(o=$,B(D)):vr(D)?(e.consume(D),$):(e.consume(D),O)}function P(D){return D===i?(e.consume(D),i=void 0,M):D===null?n(D):tn(D)?(o=P,B(D)):(e.consume(D),P)}function O(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||Uu(D)?A(D):(e.consume(D),O)}function M(D){return D===47||D===62||Uu(D)?A(D):n(D)}function j(D){return D===62?(e.consume(D),e.exit("htmlTextData"),e.exit("htmlText"),t):n(D)}function B(D){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),U}function U(D){return vr(D)?oi(e,V,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):V(D)}function V(D){return e.enter("htmlTextData"),o(D)}}const vY={name:"labelEnd",tokenize:dZe,resolveTo:fZe,resolveAll:cZe},aZe={tokenize:hZe},uZe={tokenize:pZe},lZe={tokenize:mZe};function cZe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function fZe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=cc(a,e.slice(s+1,s+r+3)),a=cc(a,[["enter",c,t]]),a=cc(a,gY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=cc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=cc(a,e.slice(o+1)),a=cc(a,[["exit",u,t]]),kh(e,s,e.length,a),e}function dZe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes($w(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(aZe,c,o?c:f)(d):d===91?e.attempt(uZe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(lZe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function hZe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Uu(f)?ZC(e,s)(f):s(f)}function s(f){return f===41?c(f):Uwe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Uu(f)?ZC(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?Vwe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Uu(f)?ZC(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function pZe(e,t,n){const r=this;return i;function i(a){return zwe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes($w(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function mZe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const gZe={name:"labelStartImage",tokenize:yZe,resolveAll:vY.resolveAll};function yZe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const vZe={name:"labelStartLink",tokenize:bZe,resolveAll:vY.resolveAll};function bZe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const X8={name:"lineEnding",tokenize:_Ze};function _Ze(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),oi(e,t,"linePrefix")}}const VP={name:"thematicBreak",tokenize:wZe};function wZe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||tn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),vr(l)?oi(e,a,"whitespace")(l):a(l))}}const gu={name:"list",tokenize:SZe,continuation:{tokenize:TZe},exit:AZe},EZe={tokenize:IZe,partial:!0},xZe={tokenize:CZe,partial:!0};function SZe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:lU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(VP,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return lU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(IL,r.interrupt?n:c,e.attempt(EZe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return vr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function TZe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(IL,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,oi(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!vr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(xZe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,oi(e,e.attempt(gu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function CZe(e,t,n){const r=this;return oi(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function AZe(e){e.exit(this.containerState.type)}function IZe(e,t,n){const r=this;return oi(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!vr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Oae={name:"setextUnderline",tokenize:RZe,resolveTo:kZe};function kZe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function RZe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),vr(l)?oi(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||tn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const NZe={tokenize:PZe};function PZe(e){const t=this,n=e.attempt(IL,r,e.attempt(this.parser.constructs.flowInitial,i,oi(e,e.attempt(this.parser.constructs.flow,i,e.attempt(LJe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const OZe={resolveAll:qwe()},DZe=Hwe("string"),$Ze=Hwe("text");function Hwe(e){return{tokenize:t,resolveAll:qwe(e==="text"?MZe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function qwe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function MZe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function LZe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:_,attempt:E(x),check:E(S),interrupt:E(S,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(R){return o=cc(o,R),g(),o[o.length-1]!==null?[]:(T(t,0),l.events=gY(s,l.events,l),l.events)}function d(R,$){return jZe(h(R),$)}function h(R){return FZe(o,R)}function p(){const{line:R,column:$,offset:P,_index:O,_bufferIndex:M}=r;return{line:R,column:$,offset:P,_index:O,_bufferIndex:M}}function m(R){i[R.line]=R.column,k()}function g(){let R;for(;r._index<o.length;){const $=o[r._index];if(typeof $=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<$.length;)y($.charCodeAt(r._bufferIndex));else y($)}}function y(R){c=c(R)}function v(R){tn(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,k()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=R}function b(R,$){const P=$||{};return P.type=R,P.start=p(),l.events.push(["enter",P,l]),a.push(P),P}function _(R){const $=a.pop();return $.end=p(),l.events.push(["exit",$,l]),$}function x(R,$){T(R,$.from)}function S(R,$){$.restore()}function E(R,$){return P;function P(O,M,j){let B,U,V,D;return Array.isArray(O)?W(O):"tokenize"in O?W([O]):z(O);function z(ee){return le;function le(de){const he=de!==null&&ee[de],ye=de!==null&&ee.null,Ce=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return W(Ce)(de)}}function W(ee){return B=ee,U=0,ee.length===0?j:F(ee[U])}function F(ee){return le;function le(de){return D=A(),V=ee,ee.partial||(l.currentConstruct=ee),ee.name&&l.parser.constructs.disable.null.includes(ee.name)?G():ee.tokenize.call($?Object.assign(Object.create(l),$):l,u,H,G)(de)}}function H(ee){return R(V,D),M}function G(ee){return D.restore(),++U<B.length?F(B[U]):j}}}function T(R,$){R.resolveAll&&!s.includes(R)&&s.push(R),R.resolve&&kh(l.events,$,l.events.length-$,R.resolve(l.events.slice($),l)),R.resolveTo&&(l.events=R.resolveTo(l.events,l))}function A(){const R=p(),$=l.previous,P=l.currentConstruct,O=l.events.length,M=Array.from(a);return{restore:j,from:O};function j(){r=R,l.previous=$,l.currentConstruct=P,l.events.length=O,a=M,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function FZe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function jZe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const BZe={42:gu,43:gu,45:gu,48:gu,49:gu,50:gu,51:gu,52:gu,53:gu,54:gu,55:gu,56:gu,57:gu,62:Lwe},UZe={91:zJe},zZe={[-2]:K8,[-1]:K8,32:K8},VZe={35:YJe,42:VP,45:[Oae,VP],60:JJe,61:Oae,95:VP,96:Nae,126:Nae},HZe={38:jwe,92:Fwe},qZe={[-5]:X8,[-4]:X8,[-3]:X8,33:gZe,38:jwe,42:cU,60:[bJe,sZe],91:vZe,92:[WJe,Fwe],93:vY,95:cU,96:PJe},WZe={null:[cU,OZe]},GZe={null:[42,95]},YZe={null:[]},KZe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:GZe,contentInitial:UZe,disable:YZe,document:BZe,flow:VZe,flowInitial:zZe,insideSpan:WZe,string:HZe,text:qZe},Symbol.toStringTag,{value:"Module"}));function XZe(e){const n=rJe([KZe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(dJe),document:i(pJe),flow:i(NZe),string:i(DZe),text:i($Ze)};return r;function i(s){return o;function o(a){return LZe(r,s,a)}}}const Dae=/[\0\t\n\r]/g;function QZe(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+s.toString(o),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Dae.lastIndex=f,l=Dae.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}function JZe(e){for(;!Bwe(e););return e}function Wwe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const ZZe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function eet(e){return e.replace(ZZe,tet)}function tet(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Wwe(n.slice(s?2:1),s?16:10)}return yY(n)||e}const Gwe={}.hasOwnProperty,net=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),ret(n)(JZe(XZe(n).document().write(QZe()(e,t,!0))))};function ret(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(ut),autolinkProtocol:R,autolinkEmail:R,atxHeading:a(rt),blockQuote:a(Ce),characterEscape:R,characterReference:R,codeFenced:a(ve),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:a(ve,u),codeText:a(Ye,u),codeTextData:R,data:R,codeFlowValue:R,definition:a(Ue),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:a(pt),hardBreakEscape:a(be),hardBreakTrailing:a(be),htmlFlow:a(Ae,u),htmlFlowData:R,htmlText:a(Ae,u),htmlTextData:R,image:a(Ve),label:u,link:a(ut),listItem:a(qe),listItemValue:p,listOrdered:a(Nt,h),listUnordered:a(Nt),paragraph:a(me),reference:G,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:a(rt),strong:a(ct),thematicBreak:a(wt)},exit:{atxHeading:c(),atxHeadingSequence:E,autolink:c(),autolinkEmail:ye,autolinkProtocol:he,blockQuote:c(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:le,characterReferenceMarkerNumeric:le,characterReferenceValue:de,codeFenced:c(v),codeFencedFence:y,codeFencedFenceInfo:m,codeFencedFenceMeta:g,codeFlowValue:$,codeIndented:c(b),codeText:c(B),codeTextData:$,data:$,definition:c(),definitionDestinationString:S,definitionLabelString:_,definitionTitleString:x,emphasis:c(),hardBreakEscape:c(O),hardBreakTrailing:c(O),htmlFlow:c(M),htmlFlowData:$,htmlText:c(j),htmlTextData:$,image:c(V),label:z,labelText:D,lineEnding:P,link:c(U),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:ee,resourceDestinationString:W,resourceTitleString:F,resource:H,setextHeading:c(k),setextHeadingLineSequence:A,setextHeadingText:T,strong:c(),thematicBreak:c()}};Ywe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(pe){let Ie={type:"root",children:[]};const Ke={stack:[Ie],tokenStack:[],config:t,enter:l,exit:f,buffer:u,resume:d,setData:s,getData:o},yt=[];let Vt=-1;for(;++Vt<pe.length;)if(pe[Vt][1].type==="listOrdered"||pe[Vt][1].type==="listUnordered")if(pe[Vt][0]==="enter")yt.push(Vt);else{const er=yt.pop();Vt=i(pe,er,Vt)}for(Vt=-1;++Vt<pe.length;){const er=t[pe[Vt][0]];Gwe.call(er,pe[Vt][1].type)&&er[pe[Vt][1].type].call(Object.assign({sliceSerialize:pe[Vt][2].sliceSerialize},Ke),pe[Vt][1])}if(Ke.tokenStack.length>0){const er=Ke.tokenStack[Ke.tokenStack.length-1];(er[1]||$ae).call(Ke,void 0,er[0])}for(Ie.position={start:bg(pe.length>0?pe[0][1].start:{line:1,column:1,offset:0}),end:bg(pe.length>0?pe[pe.length-2][1].end:{line:1,column:1,offset:0})},Vt=-1;++Vt<t.transforms.length;)Ie=t.transforms[Vt](Ie)||Ie;return Ie}function i(pe,Ie,Ke){let yt=Ie-1,Vt=-1,er=!1,Vn,$n,gn,gr;for(;++yt<=Ke;){const Qt=pe[yt];if(Qt[1].type==="listUnordered"||Qt[1].type==="listOrdered"||Qt[1].type==="blockQuote"?(Qt[0]==="enter"?Vt++:Vt--,gr=void 0):Qt[1].type==="lineEndingBlank"?Qt[0]==="enter"&&(Vn&&!gr&&!Vt&&!gn&&(gn=yt),gr=void 0):Qt[1].type==="linePrefix"||Qt[1].type==="listItemValue"||Qt[1].type==="listItemMarker"||Qt[1].type==="listItemPrefix"||Qt[1].type==="listItemPrefixWhitespace"||(gr=void 0),!Vt&&Qt[0]==="enter"&&Qt[1].type==="listItemPrefix"||Vt===-1&&Qt[0]==="exit"&&(Qt[1].type==="listUnordered"||Qt[1].type==="listOrdered")){if(Vn){let qr=yt;for($n=void 0;qr--;){const Zr=pe[qr];if(Zr[1].type==="lineEnding"||Zr[1].type==="lineEndingBlank"){if(Zr[0]==="exit")continue;$n&&(pe[$n][1].type="lineEndingBlank",er=!0),Zr[1].type="lineEnding",$n=qr}else if(!(Zr[1].type==="linePrefix"||Zr[1].type==="blockQuotePrefix"||Zr[1].type==="blockQuotePrefixWhitespace"||Zr[1].type==="blockQuoteMarker"||Zr[1].type==="listItemIndent"))break}gn&&(!$n||gn<$n)&&(Vn._spread=!0),Vn.end=Object.assign({},$n?pe[$n][1].start:Qt[1].end),pe.splice($n||yt,0,["exit",Vn,Qt[2]]),yt++,Ke++}Qt[1].type==="listItemPrefix"&&(Vn={type:"listItem",_spread:!1,start:Object.assign({},Qt[1].start),end:void 0},pe.splice(yt,0,["enter",Vn,Qt[2]]),yt++,Ke++,gn=void 0,gr=!0)}}return pe[Ie][1]._spread=er,Ke}function s(pe,Ie){n[pe]=Ie}function o(pe){return n[pe]}function a(pe,Ie){return Ke;function Ke(yt){l.call(this,pe(yt),yt),Ie&&Ie.call(this,yt)}}function u(){this.stack.push({type:"fragment",children:[]})}function l(pe,Ie,Ke){return this.stack[this.stack.length-1].children.push(pe),this.stack.push(pe),this.tokenStack.push([Ie,Ke]),pe.position={start:bg(Ie.start)},pe}function c(pe){return Ie;function Ie(Ke){pe&&pe.call(this,Ke),f.call(this,Ke)}}function f(pe,Ie){const Ke=this.stack.pop(),yt=this.tokenStack.pop();if(yt)yt[0].type!==pe.type&&(Ie?Ie.call(this,pe,yt[0]):(yt[1]||$ae).call(this,pe,yt[0]));else throw new Error("Cannot close `"+pe.type+"` ("+Dw({start:pe.start,end:pe.end})+"): its not open");return Ke.position.end=bg(pe.end),Ke}function d(){return tJe(this.stack.pop())}function h(){s("expectingFirstListItemValue",!0)}function p(pe){if(o("expectingFirstListItemValue")){const Ie=this.stack[this.stack.length-2];Ie.start=Number.parseInt(this.sliceSerialize(pe),10),s("expectingFirstListItemValue")}}function m(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.lang=pe}function g(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.meta=pe}function y(){o("flowCodeInside")||(this.buffer(),s("flowCodeInside",!0))}function v(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.value=pe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),s("flowCodeInside")}function b(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.value=pe.replace(/(\r?\n|\r)$/g,"")}function _(pe){const Ie=this.resume(),Ke=this.stack[this.stack.length-1];Ke.label=Ie,Ke.identifier=$w(this.sliceSerialize(pe)).toLowerCase()}function x(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.title=pe}function S(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.url=pe}function E(pe){const Ie=this.stack[this.stack.length-1];if(!Ie.depth){const Ke=this.sliceSerialize(pe).length;Ie.depth=Ke}}function T(){s("setextHeadingSlurpLineEnding",!0)}function A(pe){const Ie=this.stack[this.stack.length-1];Ie.depth=this.sliceSerialize(pe).charCodeAt(0)===61?1:2}function k(){s("setextHeadingSlurpLineEnding")}function R(pe){const Ie=this.stack[this.stack.length-1];let Ke=Ie.children[Ie.children.length-1];(!Ke||Ke.type!=="text")&&(Ke=gt(),Ke.position={start:bg(pe.start)},Ie.children.push(Ke)),this.stack.push(Ke)}function $(pe){const Ie=this.stack.pop();Ie.value+=this.sliceSerialize(pe),Ie.position.end=bg(pe.end)}function P(pe){const Ie=this.stack[this.stack.length-1];if(o("atHardBreak")){const Ke=Ie.children[Ie.children.length-1];Ke.position.end=bg(pe.end),s("atHardBreak");return}!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(Ie.type)&&(R.call(this,pe),$.call(this,pe))}function O(){s("atHardBreak",!0)}function M(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.value=pe}function j(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.value=pe}function B(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.value=pe}function U(){const pe=this.stack[this.stack.length-1];if(o("inReference")){const Ie=o("referenceType")||"shortcut";pe.type+="Reference",pe.referenceType=Ie,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;s("referenceType")}function V(){const pe=this.stack[this.stack.length-1];if(o("inReference")){const Ie=o("referenceType")||"shortcut";pe.type+="Reference",pe.referenceType=Ie,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;s("referenceType")}function D(pe){const Ie=this.sliceSerialize(pe),Ke=this.stack[this.stack.length-2];Ke.label=eet(Ie),Ke.identifier=$w(Ie).toLowerCase()}function z(){const pe=this.stack[this.stack.length-1],Ie=this.resume(),Ke=this.stack[this.stack.length-1];if(s("inReference",!0),Ke.type==="link"){const yt=pe.children;Ke.children=yt}else Ke.alt=Ie}function W(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.url=pe}function F(){const pe=this.resume(),Ie=this.stack[this.stack.length-1];Ie.title=pe}function H(){s("inReference")}function G(){s("referenceType","collapsed")}function ee(pe){const Ie=this.resume(),Ke=this.stack[this.stack.length-1];Ke.label=Ie,Ke.identifier=$w(this.sliceSerialize(pe)).toLowerCase(),s("referenceType","full")}function le(pe){s("characterReferenceType",pe.type)}function de(pe){const Ie=this.sliceSerialize(pe),Ke=o("characterReferenceType");let yt;Ke?(yt=Wwe(Ie,Ke==="characterReferenceMarkerNumeric"?10:16),s("characterReferenceType")):yt=yY(Ie);const Vt=this.stack.pop();Vt.value+=yt,Vt.position.end=bg(pe.end)}function he(pe){$.call(this,pe);const Ie=this.stack[this.stack.length-1];Ie.url=this.sliceSerialize(pe)}function ye(pe){$.call(this,pe);const Ie=this.stack[this.stack.length-1];Ie.url="mailto:"+this.sliceSerialize(pe)}function Ce(){return{type:"blockquote",children:[]}}function ve(){return{type:"code",lang:null,meta:null,value:""}}function Ye(){return{type:"inlineCode",value:""}}function Ue(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function pt(){return{type:"emphasis",children:[]}}function rt(){return{type:"heading",depth:void 0,children:[]}}function be(){return{type:"break"}}function Ae(){return{type:"html",value:""}}function Ve(){return{type:"image",title:null,url:"",alt:null}}function ut(){return{type:"link",title:null,url:"",children:[]}}function Nt(pe){return{type:"list",ordered:pe.type==="listOrdered",start:null,spread:pe._spread,children:[]}}function qe(pe){return{type:"listItem",spread:pe._spread,checked:null,children:[]}}function me(){return{type:"paragraph",children:[]}}function ct(){return{type:"strong",children:[]}}function gt(){return{type:"text",value:""}}function wt(){return{type:"thematicBreak"}}}function bg(e){return{line:e.line,column:e.column,offset:e.offset}}function Ywe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Ywe(e,r):iet(e,r)}}function iet(e,t){let n;for(n in t)if(Gwe.call(t,n)){if(n==="canContainEols"){const r=t[n];r&&e[n].push(...r)}else if(n==="transforms"){const r=t[n];r&&e[n].push(...r)}else if(n==="enter"||n==="exit"){const r=t[n];r&&Object.assign(e[n],r)}}}function $ae(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Dw({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Dw({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Dw({start:t.start,end:t.end})+") is still open")}function set(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return net(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}function oet(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function aet(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function uet(e,t){const n=t.value?t.value+`
`:"",r=t.lang?t.lang.match(/^[^ \t]+(?=[ \t]|$)/):null,i={};r&&(i.className=["language-"+r]);let s={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function cet(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function fet(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Wx(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&xl(e.charCodeAt(n+1))&&xl(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Kwe(e,t){const n=String(t.identifier).toUpperCase(),r=Wx(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let s;i===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,s=e.footnoteOrder.length):(e.footnoteCounts[n]++,s=i+1);const o=e.footnoteCounts[n],a={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,a);const u={type:"element",tagName:"sup",properties:{},children:[a]};return e.patch(t,u),e.applyData(t,u)}function det(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const i=String(r);return n[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:t.children}],position:t.position},Kwe(e,{type:"footnoteReference",identifier:i,position:t.position})}function het(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function pet(e,t){if(e.dangerous){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}return null}function Xwe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return{type:"text",value:"!["+t.alt+r};const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function met(e,t){const n=e.definition(t.identifier);if(!n)return Xwe(e,t);const r={src:Wx(n.url||""),alt:t.alt};n.title!==null&&n.title!==void 0&&(r.title=n.title);const i={type:"element",tagName:"img",properties:r,children:[]};return e.patch(t,i),e.applyData(t,i)}function get(e,t){const n={src:Wx(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function yet(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function vet(e,t){const n=e.definition(t.identifier);if(!n)return Xwe(e,t);const r={href:Wx(n.url||"")};n.title!==null&&n.title!==void 0&&(r.title=n.title);const i={type:"element",tagName:"a",properties:r,children:e.all(t)};return e.patch(t,i),e.applyData(t,i)}function bet(e,t){const n={href:Wx(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function _et(e,t,n){const r=e.all(t),i=n?wet(n):Qwe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function wet(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Qwe(n[r])}return t}function Qwe(e){const t=e.spread;return t??e.children.length>1}function Eet(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function xet(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Tet(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Cet(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const bY=Jwe("start"),_Y=Jwe("end");function Aet(e){return{start:bY(e),end:_Y(e)}}function Jwe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function Iet(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=bY(t.children[1]),u=_Y(t.children[t.children.length-1]);a.line&&u.line&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function ket(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(t,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function Ret(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Mae=9,Lae=32;function Net(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Fae(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Fae(t.slice(i),i>0,!1)),s.join("")}function Fae(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Mae||s===Lae;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Mae||s===Lae;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Pet(e,t){const n={type:"text",value:Net(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Oet(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Det={blockquote:oet,break:aet,code:uet,delete:cet,emphasis:fet,footnoteReference:Kwe,footnote:det,heading:het,html:pet,imageReference:met,image:get,inlineCode:yet,linkReference:vet,link:bet,listItem:_et,list:Eet,paragraph:xet,root:Tet,strong:Cet,table:Iet,tableCell:Ret,tableRow:ket,text:Pet,thematicBreak:Oet,toml:nN,yaml:nN,definition:nN,footnoteDefinition:nN};function nN(){return null}const Zwe=function(e){if(e==null)return Fet;if(typeof e=="string")return Let(e);if(typeof e=="object")return Array.isArray(e)?$et(e):Met(e);if(typeof e=="function")return kL(e);throw new Error("Expected function, string, or object as test")};function $et(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Zwe(e[n]);return kL(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].call(this,...i))return!0;return!1}}function Met(e){return kL(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function Let(e){return kL(t);function t(n){return n&&n.type===e}}function kL(e){return t;function t(n,...r){return!!(n&&typeof n=="object"&&"type"in n&&e.call(this,n,...r))}}function Fet(){return!0}const jet=!0,jae=!1,Bet="skip",Uet=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const i=Zwe(t),s=r?-1:1;o(e,void 0,[])();function o(a,u,l){const c=a&&typeof a=="object"?a:{};if(typeof c.type=="string"){const d=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(a.type+(d?"<"+d+">":""))+")"})}return f;function f(){let d=[],h,p,m;if((!t||i(a,u,l[l.length-1]||null))&&(d=zet(n(a,l)),d[0]===jae))return d;if(a.children&&d[0]!==Bet)for(p=(r?a.children.length:-1)+s,m=l.concat(a);p>-1&&p<a.children.length;){if(h=o(a.children[p],p,m)(),h[0]===jae)return h;p=typeof h[1]=="number"?h[1]:p+s}return d}}};function zet(e){return Array.isArray(e)?e:typeof e=="number"?[jet,e]:[e]}const wY=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),Uet(e,t,i,r);function i(s,o){const a=o[o.length-1];return n(s,a?a.children.indexOf(s):null,a)}};function Vet(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const Bae={}.hasOwnProperty;function Het(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return wY(e,"definition",r=>{const i=Uae(r.identifier);i&&!Bae.call(t,i)&&(t[i]=r)}),n;function n(r){const i=Uae(r);return i&&Bae.call(t,i)?t[i]:null}}function Uae(e){return String(e||"").toUpperCase()}const ID={}.hasOwnProperty;function qet(e,t){const n=t||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,o.footnoteLabel=n.footnoteLabel||"Footnotes",o.footnoteLabelTagName=n.footnoteLabelTagName||"h2",o.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},o.footnoteBackLabel=n.footnoteBackLabel||"Back to content",o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,o.handlers={...Det,...n.handlers},o.definition=Het(e),o.footnoteById=i,o.footnoteOrder=[],o.footnoteCounts={},o.patch=Wet,o.applyData=Get,o.one=a,o.all=u,o.wrap=Ket,o.augment=s,wY(e,"footnoteDefinition",l=>{const c=String(l.identifier).toUpperCase();ID.call(i,c)||(i[c]=l)}),o;function s(l,c){if(l&&"data"in l&&l.data){const f=l.data;f.hName&&(c.type!=="element"&&(c={type:"element",tagName:"",properties:{},children:[]}),c.tagName=f.hName),c.type==="element"&&f.hProperties&&(c.properties={...c.properties,...f.hProperties}),"children"in c&&c.children&&f.hChildren&&(c.children=f.hChildren)}if(l){const f="type"in l?l:{position:l};Vet(f)||(c.position={start:bY(f),end:_Y(f)})}return c}function o(l,c,f,d){return Array.isArray(f)&&(d=f,f={}),s(l,{type:"element",tagName:c,properties:f||{},children:d||[]})}function a(l,c){return eEe(o,l,c)}function u(l){return EY(o,l)}}function Wet(e,t){e.position&&(t.position=Aet(e))}function Get(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;typeof r=="string"&&(n.type==="element"?n.tagName=r:n={type:"element",tagName:r,properties:{},children:[]}),n.type==="element"&&s&&(n.properties={...n.properties,...s}),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function eEe(e,t,n){const r=t&&t.type;if(!r)throw new Error("Expected node, got `"+t+"`");return ID.call(e.handlers,r)?e.handlers[r](e,t,n):e.passThrough&&e.passThrough.includes(r)?"children"in t?{...t,children:EY(e,t)}:t:e.unknownHandler?e.unknownHandler(e,t,n):Yet(e,t)}function EY(e,t){const n=[];if("children"in t){const r=t.children;let i=-1;for(;++i<r.length;){const s=eEe(e,r[i],t);if(s){if(i&&r[i-1].type==="break"&&(!Array.isArray(s)&&s.type==="text"&&(s.value=s.value.replace(/^\s+/,"")),!Array.isArray(s)&&s.type==="element")){const o=s.children[0];o&&o.type==="text"&&(o.value=o.value.replace(/^\s+/,""))}Array.isArray(s)?n.push(...s):n.push(s)}}}return n}function Yet(e,t){const n=t.data||{},r="value"in t&&!(ID.call(n,"hProperties")||ID.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:EY(e,t)};return e.patch(t,r),e.applyData(t,r)}function Ket(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Xet(e){const t=[];let n=-1;for(;++n<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[n]];if(!r)continue;const i=e.all(r),s=String(r.identifier).toUpperCase(),o=Wx(s.toLowerCase());let a=0;const u=[];for(;++a<=e.footnoteCounts[s];){const f={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:""}]};a>1&&f.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(a)}]}),u.length>0&&u.push({type:"text",value:" "}),u.push(f)}const l=i[i.length-1];if(l&&l.type==="element"&&l.tagName==="p"){const f=l.children[l.children.length-1];f&&f.type==="text"?f.value+=" ":l.children.push({type:"text",value:" "}),l.children.push(...u)}else i.push(...u);const c={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+o},children:e.wrap(i,!0)};e.patch(r,c),t.push(c)}if(t.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[{type:"text",value:e.footnoteLabel}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(t,!0)},{type:"text",value:`
`}]}}function tEe(e,t){const n=qet(e,t),r=n.one(e,null),i=Xet(n);return i&&r.children.push({type:"text",value:`
`},i),Array.isArray(r)?{type:"root",children:r}:r}const Qet=function(e,t){return e&&"run"in e?Jet(e,t):Zet(e||t)};function Jet(e,t){return(n,r,i)=>{e.run(tEe(n,t),r,s=>{i(s)})}}function Zet(e){return t=>tEe(t,e)}let WI=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};WI.prototype.property={};WI.prototype.normal={};WI.prototype.space=null;function nEe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new WI(n,r,t)}function fA(e){return e.toLowerCase()}let Jc=class{constructor(t,n){this.property=t,this.attribute=n}};Jc.prototype.space=null;Jc.prototype.boolean=!1;Jc.prototype.booleanish=!1;Jc.prototype.overloadedBoolean=!1;Jc.prototype.number=!1;Jc.prototype.commaSeparated=!1;Jc.prototype.spaceSeparated=!1;Jc.prototype.commaOrSpaceSeparated=!1;Jc.prototype.mustUseProperty=!1;Jc.prototype.defined=!1;let ett=0;const yn=Ob(),vs=Ob(),rEe=Ob(),tt=Ob(),ri=Ob(),Mw=Ob(),cl=Ob();function Ob(){return 2**++ett}const fU=Object.freeze(Object.defineProperty({__proto__:null,boolean:yn,booleanish:vs,commaOrSpaceSeparated:cl,commaSeparated:Mw,number:tt,overloadedBoolean:rEe,spaceSeparated:ri},Symbol.toStringTag,{value:"Module"})),Q8=Object.keys(fU);class xY extends Jc{constructor(t,n,r,i){let s=-1;if(super(t,n),zae(this,"space",i),typeof r=="number")for(;++s<Q8.length;){const o=Q8[s];zae(this,Q8[s],(r&fU[o])===fU[o])}}}xY.prototype.defined=!0;function zae(e,t,n){n&&(e[t]=n)}const ttt={}.hasOwnProperty;function Gx(e){const t={},n={};let r;for(r in e.properties)if(ttt.call(e.properties,r)){const i=e.properties[r],s=new xY(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[fA(r)]=r,n[fA(s.attribute)]=r}return new WI(t,n,e.space)}const iEe=Gx({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),sEe=Gx({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function oEe(e,t){return t in e?e[t]:t}function aEe(e,t){return oEe(e,t.toLowerCase())}const uEe=Gx({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:aEe,properties:{xmlns:null,xmlnsXLink:null}}),lEe=Gx({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:vs,ariaAutoComplete:null,ariaBusy:vs,ariaChecked:vs,ariaColCount:tt,ariaColIndex:tt,ariaColSpan:tt,ariaControls:ri,ariaCurrent:null,ariaDescribedBy:ri,ariaDetails:null,ariaDisabled:vs,ariaDropEffect:ri,ariaErrorMessage:null,ariaExpanded:vs,ariaFlowTo:ri,ariaGrabbed:vs,ariaHasPopup:null,ariaHidden:vs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ri,ariaLevel:tt,ariaLive:null,ariaModal:vs,ariaMultiLine:vs,ariaMultiSelectable:vs,ariaOrientation:null,ariaOwns:ri,ariaPlaceholder:null,ariaPosInSet:tt,ariaPressed:vs,ariaReadOnly:vs,ariaRelevant:null,ariaRequired:vs,ariaRoleDescription:ri,ariaRowCount:tt,ariaRowIndex:tt,ariaRowSpan:tt,ariaSelected:vs,ariaSetSize:tt,ariaSort:null,ariaValueMax:tt,ariaValueMin:tt,ariaValueNow:tt,ariaValueText:null,role:null}}),ntt=Gx({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:aEe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Mw,acceptCharset:ri,accessKey:ri,action:null,allow:null,allowFullScreen:yn,allowPaymentRequest:yn,allowUserMedia:yn,alt:null,as:null,async:yn,autoCapitalize:null,autoComplete:ri,autoFocus:yn,autoPlay:yn,blocking:ri,capture:null,charSet:null,checked:yn,cite:null,className:ri,cols:tt,colSpan:null,content:null,contentEditable:vs,controls:yn,controlsList:ri,coords:tt|Mw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:yn,defer:yn,dir:null,dirName:null,disabled:yn,download:rEe,draggable:vs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:yn,formTarget:null,headers:ri,height:tt,hidden:yn,high:tt,href:null,hrefLang:null,htmlFor:ri,httpEquiv:ri,id:null,imageSizes:null,imageSrcSet:null,inert:yn,inputMode:null,integrity:null,is:null,isMap:yn,itemId:null,itemProp:ri,itemRef:ri,itemScope:yn,itemType:ri,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:yn,low:tt,manifest:null,max:null,maxLength:tt,media:null,method:null,min:null,minLength:tt,multiple:yn,muted:yn,name:null,nonce:null,noModule:yn,noValidate:yn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:yn,optimum:tt,pattern:null,ping:ri,placeholder:null,playsInline:yn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:yn,referrerPolicy:null,rel:ri,required:yn,reversed:yn,rows:tt,rowSpan:tt,sandbox:ri,scope:null,scoped:yn,seamless:yn,selected:yn,shadowRootClonable:yn,shadowRootDelegatesFocus:yn,shadowRootMode:null,shape:null,size:tt,sizes:null,slot:null,span:tt,spellCheck:vs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:tt,step:null,style:null,tabIndex:tt,target:null,title:null,translate:null,type:null,typeMustMatch:yn,useMap:null,value:vs,width:tt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ri,axis:null,background:null,bgColor:null,border:tt,borderColor:null,bottomMargin:tt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:yn,declare:yn,event:null,face:null,frame:null,frameBorder:null,hSpace:tt,leftMargin:tt,link:null,longDesc:null,lowSrc:null,marginHeight:tt,marginWidth:tt,noResize:yn,noHref:yn,noShade:yn,noWrap:yn,object:null,profile:null,prompt:null,rev:null,rightMargin:tt,rules:null,scheme:null,scrolling:vs,standby:null,summary:null,text:null,topMargin:tt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:tt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:yn,disableRemotePlayback:yn,prefix:null,property:null,results:tt,security:null,unselectable:null}}),rtt=Gx({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:oEe,properties:{about:cl,accentHeight:tt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:tt,amplitude:tt,arabicForm:null,ascent:tt,attributeName:null,attributeType:null,azimuth:tt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:tt,by:null,calcMode:null,capHeight:tt,className:ri,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:tt,diffuseConstant:tt,direction:null,display:null,dur:null,divisor:tt,dominantBaseline:null,download:yn,dx:null,dy:null,edgeMode:null,editable:null,elevation:tt,enableBackground:null,end:null,event:null,exponent:tt,externalResourcesRequired:null,fill:null,fillOpacity:tt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Mw,g2:Mw,glyphName:Mw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:tt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:tt,horizOriginX:tt,horizOriginY:tt,id:null,ideographic:tt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:tt,k:tt,k1:tt,k2:tt,k3:tt,k4:tt,kernelMatrix:cl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:tt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:tt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:tt,overlineThickness:tt,paintOrder:null,panose1:null,path:null,pathLength:tt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ri,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:tt,pointsAtY:tt,pointsAtZ:tt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:cl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:cl,rev:cl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:cl,requiredFeatures:cl,requiredFonts:cl,requiredFormats:cl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:tt,specularExponent:tt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:tt,strikethroughThickness:tt,string:null,stroke:null,strokeDashArray:cl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:tt,strokeOpacity:tt,strokeWidth:null,style:null,surfaceScale:tt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:cl,tabIndex:tt,tableValues:null,target:null,targetX:tt,targetY:tt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:cl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:tt,underlineThickness:tt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:tt,values:null,vAlphabetic:tt,vMathematical:tt,vectorEffect:null,vHanging:tt,vIdeographic:tt,version:null,vertAdvY:tt,vertOriginX:tt,vertOriginY:tt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:tt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),itt=/^data[-\w.:]+$/i,Vae=/-[a-z]/g,stt=/[A-Z]/g;function RL(e,t){const n=fA(t);let r=t,i=Jc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&itt.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Vae,att);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Vae.test(s)){let o=s.replace(stt,ott);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=xY}return new i(r,t)}function ott(e){return"-"+e.toLowerCase()}function att(e){return e.charAt(1).toUpperCase()}const Hae={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},GI=nEe([sEe,iEe,uEe,lEe,ntt],"html"),Yx=nEe([sEe,iEe,uEe,lEe,rtt],"svg");function utt(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{wY(t,"element",(n,r,i)=>{const s=i;let o;if(e.allowedElements?o=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(o=e.disallowedElements.includes(n.tagName)),!o&&e.allowElement&&typeof r=="number"&&(o=!e.allowElement(n,r,s)),o&&typeof r=="number")return e.unwrapDisallowed&&n.children?s.children.splice(r,1,...n.children):s.children.splice(r,1),r})}}var cEe={exports:{}},Dr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SY=Symbol.for("react.element"),TY=Symbol.for("react.portal"),NL=Symbol.for("react.fragment"),PL=Symbol.for("react.strict_mode"),OL=Symbol.for("react.profiler"),DL=Symbol.for("react.provider"),$L=Symbol.for("react.context"),ltt=Symbol.for("react.server_context"),ML=Symbol.for("react.forward_ref"),LL=Symbol.for("react.suspense"),FL=Symbol.for("react.suspense_list"),jL=Symbol.for("react.memo"),BL=Symbol.for("react.lazy"),ctt=Symbol.for("react.offscreen"),fEe;fEe=Symbol.for("react.module.reference");function Zc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case SY:switch(e=e.type,e){case NL:case OL:case PL:case LL:case FL:return e;default:switch(e=e&&e.$$typeof,e){case ltt:case $L:case ML:case BL:case jL:case DL:return e;default:return t}}case TY:return t}}}Dr.ContextConsumer=$L;Dr.ContextProvider=DL;Dr.Element=SY;Dr.ForwardRef=ML;Dr.Fragment=NL;Dr.Lazy=BL;Dr.Memo=jL;Dr.Portal=TY;Dr.Profiler=OL;Dr.StrictMode=PL;Dr.Suspense=LL;Dr.SuspenseList=FL;Dr.isAsyncMode=function(){return!1};Dr.isConcurrentMode=function(){return!1};Dr.isContextConsumer=function(e){return Zc(e)===$L};Dr.isContextProvider=function(e){return Zc(e)===DL};Dr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===SY};Dr.isForwardRef=function(e){return Zc(e)===ML};Dr.isFragment=function(e){return Zc(e)===NL};Dr.isLazy=function(e){return Zc(e)===BL};Dr.isMemo=function(e){return Zc(e)===jL};Dr.isPortal=function(e){return Zc(e)===TY};Dr.isProfiler=function(e){return Zc(e)===OL};Dr.isStrictMode=function(e){return Zc(e)===PL};Dr.isSuspense=function(e){return Zc(e)===LL};Dr.isSuspenseList=function(e){return Zc(e)===FL};Dr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===NL||e===OL||e===PL||e===LL||e===FL||e===ctt||typeof e=="object"&&e!==null&&(e.$$typeof===BL||e.$$typeof===jL||e.$$typeof===DL||e.$$typeof===$L||e.$$typeof===ML||e.$$typeof===fEe||e.getModuleId!==void 0)};Dr.typeOf=Zc;cEe.exports=Dr;var ftt=cEe.exports;const dtt=Ho(ftt);function htt(e){const t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function qae(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function dEe(e){return e.join(" ").trim()}function Wae(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function hEe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var CY={exports:{}},Gae=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,ptt=/\n/g,mtt=/^\s*/,gtt=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,ytt=/^:\s*/,vtt=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,btt=/^[;\s]*/,_tt=/^\s+|\s+$/g,wtt=`
`,Yae="/",Kae="*",Mv="",Ett="comment",xtt="declaration",Stt=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(ptt);m&&(n+=m.length);var g=p.lastIndexOf(wtt);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(mtt)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(Yae!=e.charAt(0)||Kae!=e.charAt(1))){for(var m=2;Mv!=e.charAt(m)&&(Kae!=e.charAt(m)||Yae!=e.charAt(m+1));)++m;if(m+=2,Mv===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:Ett,comment:g})}}function d(){var p=s(),m=u(gtt);if(m){if(f(),!u(ytt))return a("property missing ':'");var g=u(vtt),y=p({type:xtt,property:Xae(m[0].replace(Gae,Mv)),value:g?Xae(g[0].replace(Gae,Mv)):Mv});return u(btt),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Xae(e){return e?e.replace(_tt,Mv):Mv}var Ttt=Stt;function pEe(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,i=Ttt(e),s=typeof t=="function",o,a,u=0,l=i.length;u<l;u++)r=i[u],o=r.property,a=r.value,s?t(o,a,r):a&&(n||(n={}),n[o]=a);return n}CY.exports=pEe;CY.exports.default=pEe;var Ctt=CY.exports;const Att=Ho(Ctt),dU={}.hasOwnProperty,Itt=new Set(["table","thead","tbody","tfoot","tr"]);function mEe(e,t){const n=[];let r=-1,i;for(;++r<t.children.length;)i=t.children[r],i.type==="element"?n.push(ktt(e,i,r,t)):i.type==="text"?(t.type!=="element"||!Itt.has(t.tagName)||!htt(i))&&n.push(i.value):i.type==="raw"&&!e.options.skipHtml&&n.push(i.value);return n}function ktt(e,t,n,r){const i=e.options,s=i.transformLinkUri===void 0?wQe:i.transformLinkUri,o=e.schema,a=t.tagName,u={};let l=o,c;if(o.space==="html"&&a==="svg"&&(l=Yx,e.schema=l),t.properties)for(c in t.properties)dU.call(t.properties,c)&&Ntt(u,c,t.properties[c],e);(a==="ol"||a==="ul")&&e.listDepth++;const f=mEe(e,t);(a==="ol"||a==="ul")&&e.listDepth--,e.schema=o;const d=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},h=i.components&&dU.call(i.components,a)?i.components[a]:a,p=typeof h=="string"||h===Nr.Fragment;if(!dtt.isValidElementType(h))throw new TypeError(`Component for name \`${a}\` not defined or is not renderable`);if(u.key=n,a==="a"&&i.linkTarget&&(u.target=typeof i.linkTarget=="function"?i.linkTarget(String(u.href||""),t.children,typeof u.title=="string"?u.title:null):i.linkTarget),a==="a"&&s&&(u.href=s(String(u.href||""),t.children,typeof u.title=="string"?u.title:null)),!p&&a==="code"&&r.type==="element"&&r.tagName!=="pre"&&(u.inline=!0),!p&&(a==="h1"||a==="h2"||a==="h3"||a==="h4"||a==="h5"||a==="h6")&&(u.level=Number.parseInt(a.charAt(1),10)),a==="img"&&i.transformImageUri&&(u.src=i.transformImageUri(String(u.src||""),String(u.alt||""),typeof u.title=="string"?u.title:null)),!p&&a==="li"&&r.type==="element"){const m=Rtt(t);u.checked=m&&m.properties?!!m.properties.checked:null,u.index=J8(r,t),u.ordered=r.tagName==="ol"}return!p&&(a==="ol"||a==="ul")&&(u.ordered=a==="ol",u.depth=e.listDepth),(a==="td"||a==="th")&&(u.align&&(u.style||(u.style={}),u.style.textAlign=u.align,delete u.align),p||(u.isHeader=a==="th")),!p&&a==="tr"&&r.type==="element"&&(u.isHeader=r.tagName==="thead"),i.sourcePos&&(u["data-sourcepos"]=Dtt(d)),!p&&i.rawSourcePos&&(u.sourcePosition=t.position),!p&&i.includeElementIndex&&(u.index=J8(r,t),u.siblingCount=J8(r)),p||(u.node=t),f.length>0?Nr.createElement(h,u,f):Nr.createElement(h,u)}function Rtt(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function J8(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function Ntt(e,t,n,r){const i=RL(r.schema,t);let s=n;s==null||s!==s||(Array.isArray(s)&&(s=i.commaSeparated?hEe(s):dEe(s)),i.property==="style"&&typeof s=="string"&&(s=Ptt(s)),i.space&&i.property?e[dU.call(Hae,i.property)?Hae[i.property]:i.property]=s:i.attribute&&(e[i.attribute]=s))}function Ptt(e){const t={};try{Att(e,n)}catch{}return t;function n(r,i){const s=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[s.replace(/-([a-z])/g,Ott)]=i}}function Ott(e,t){return t.toUpperCase()}function Dtt(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const Qae={}.hasOwnProperty,$tt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",rN={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function gEe(e){for(const s in rN)if(Qae.call(rN,s)&&Qae.call(e,s)){const o=rN[s];console.warn(`[react-markdown] Warning: please ${o.to?`use \`${o.to}\` instead of`:"remove"} \`${s}\` (see <${$tt}#${o.id}> for more info)`),delete rN[s]}const t=XQe().use(set).use(e.remarkPlugins||[]).use(Qet,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(utt,e),n=new OQe;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let i=Nr.createElement(Nr.Fragment,{},mEe({options:e,schema:GI,listDepth:0},r));return e.className&&(i=Nr.createElement("div",{className:e.className},i)),i}gEe.propTypes={children:Ut.string,className:Ut.string,allowElement:Ut.func,allowedElements:Ut.arrayOf(Ut.string),disallowedElements:Ut.arrayOf(Ut.string),unwrapDisallowed:Ut.bool,remarkPlugins:Ut.arrayOf(Ut.oneOfType([Ut.object,Ut.func,Ut.arrayOf(Ut.oneOfType([Ut.bool,Ut.string,Ut.object,Ut.func,Ut.arrayOf(Ut.any)]))])),rehypePlugins:Ut.arrayOf(Ut.oneOfType([Ut.object,Ut.func,Ut.arrayOf(Ut.oneOfType([Ut.bool,Ut.string,Ut.object,Ut.func,Ut.arrayOf(Ut.any)]))])),sourcePos:Ut.bool,rawSourcePos:Ut.bool,skipHtml:Ut.bool,includeElementIndex:Ut.bool,transformLinkUri:Ut.oneOfType([Ut.func,Ut.bool]),linkTarget:Ut.oneOfType([Ut.func,Ut.string]),transformImageUri:Ut.func,components:Ut.object};const yEe=-1,UL=0,kD=1,RD=2,AY=3,IY=4,kY=5,RY=6,vEe=7,bEe=8,Jae=typeof self=="object"?self:globalThis,Mtt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case UL:case yEe:return n(o,i);case kD:{const a=n([],i);for(const u of o)a.push(r(u));return a}case RD:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case AY:return n(new Date(o),i);case IY:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case kY:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case RY:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case vEe:{const{name:a,message:u}=o;return n(new Jae[a](u),i)}case bEe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Jae[s](o),i)};return r},Zae=e=>Mtt(new Map,e)(0),v_="",{toString:Ltt}={},{keys:Ftt}=Object,lT=e=>{const t=typeof e;if(t!=="object"||!e)return[UL,t];const n=Ltt.call(e).slice(8,-1);switch(n){case"Array":return[kD,v_];case"Object":return[RD,v_];case"Date":return[AY,v_];case"RegExp":return[IY,v_];case"Map":return[kY,v_];case"Set":return[RY,v_]}return n.includes("Array")?[kD,n]:n.includes("Error")?[vEe,n]:[RD,n]},iN=([e,t])=>e===UL&&(t==="function"||t==="symbol"),jtt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=lT(o);switch(a){case UL:{let c=o;switch(u){case"bigint":a=bEe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([yEe],o)}return i([a,c],o)}case kD:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case RD:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of Ftt(o))(e||!iN(lT(o[d])))&&c.push([s(d),s(o[d])]);return f}case AY:return i([a,o.toISOString()],o);case IY:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case kY:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(iN(lT(d))||iN(lT(h))))&&c.push([s(d),s(h)]);return f}case RY:{const c=[],f=i([a,c],o);for(const d of o)(e||!iN(lT(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},eue=(e,{json:t,lossy:n}={})=>{const r=[];return jtt(!(t||n),!!t,new Map,r)(e),r},tue=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Zae(eue(e,t)):structuredClone(e):(e,t)=>Zae(eue(e,t)),nue=/[#.]/g;function Btt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){nue.lastIndex=i;const a=nue.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Utt=new Set(["button","menu","reset","submit"]),hU={}.hasOwnProperty;function _Ee(e,t,n){const r=n&&qtt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=Btt(s,t),l.tagName=l.tagName.toLowerCase(),r&&hU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),ztt(o,l.tagName)){let c;for(c in o)hU.call(o,c)&&Vtt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)pU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function ztt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Utt.has(e.type.toLowerCase()):!("value"in e)}function Vtt(e,t,n,r){const i=RL(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=qae(r):i.commaSeparated?o=Wae(r):i.commaOrSpaceSeparated?o=qae(Wae(r).join(" ")):o=rue(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Htt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=rue(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function pU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)pU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?pU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function rue(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||fA(n)===fA(t)))return!0}return n}function Htt(e){const t=[];let n;for(n in e)hU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function qtt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Wtt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Gtt=_Ee(GI,"div"),Ytt=_Ee(Yx,"g",Wtt),Z8=/\r?\n|\r/g;function Ktt(e){const t=String(e),n=[];for(Z8.lastIndex=0;Z8.test(t);)n.push(Z8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const e1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},wEe={}.hasOwnProperty,Xtt=Object.prototype;function Qtt(e,t){const n=t||{};return NY({file:n.file||void 0,location:!1,schema:n.space==="svg"?Yx:GI,verbose:n.verbose||!1},e)}function NY(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},HP(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:EEe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=Ktt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},HP(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},HP(e,r,n),n}default:return n=Jtt(e,t),n}}function EEe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=NY(e,t[n]);r.push(i)}return r}function Jtt(e,t){const n=e.schema;e.schema=t.namespaceURI===e1.svg?Yx:GI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;wEe.call(Xtt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?Ytt:Gtt)(t.tagName,i,EEe(e,t.childNodes));if(HP(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&lw(u.startTag),c=u&&u.endTag&&lw(u.endTag),f=NY(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function HP(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Ztt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Ztt(e,t,n){const r=lw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)wEe.call(n.attrs,o)&&(s[RL(e.schema,o).property]=lw(n.attrs[o]));n.startTag;const a=lw(n.startTag),u=n.endTag?lw(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function lw(e){const t=iue({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=iue({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function iue(e){return e.line&&e.column?e:void 0}const sue={}.hasOwnProperty;function xEe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&sue.call(i,e)){const u=String(i[e]);o=sue.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const ent={},tnt={}.hasOwnProperty,SEe=xEe("type",{handlers:{root:rnt,element:unt,text:ont,comment:ant,doctype:snt}});function nnt(e,t){const r=(t||ent).space;return SEe(e,r==="svg"?Yx:GI)}function rnt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=PY(e.children,n,t),Kx(e,n),n}function int(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=PY(e.children,n,t),Kx(e,n),n}function snt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Kx(e,t),t}function ont(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Kx(e,t),t}function ant(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Kx(e,t),t}function unt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Yx);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&tnt.call(e.properties,s)){const u=lnt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:e1[o],childNodes:[],parentNode:null};return a.childNodes=PY(e.children,a,r),Kx(e,a),e.tagName==="template"&&e.content&&(a.content=int(e.content,r)),a}function lnt(e,t,n){const r=RL(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?hEe(n):dEe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=e1[r.space]}return i}function PY(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=SEe(e[r],n);s.parentNode=t,i.push(s)}return i}function Kx(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const cnt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],fnt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),bi="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const hu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function TEe(e){return e>=55296&&e<=57343}function dnt(e){return e>=56320&&e<=57343}function hnt(e,t){return(e-55296)*1024+9216+t}function CEe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function AEe(e){return e>=64976&&e<=65007||fnt.has(e)}var Re;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Re=Re||(Re={}));const pnt=65536;class mnt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=pnt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(dnt(n))return this.pos++,this._addGap(),hnt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Re.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,TEe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){CEe(t)?this._err(Re.controlCharacterInInputStream):AEe(t)&&this._err(Re.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var An;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(An=An||(An={}));function IEe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const kg=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),gnt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var e9;const ynt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),vnt=(e9=String.fromCodePoint)!==null&&e9!==void 0?e9:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function bnt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=ynt.get(e))!==null&&t!==void 0?t:e}var Js;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Js||(Js={}));const _nt=32;var sh;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(sh||(sh={}));function mU(e){return e>=Js.ZERO&&e<=Js.NINE}function wnt(e){return e>=Js.UPPER_A&&e<=Js.UPPER_F||e>=Js.LOWER_A&&e<=Js.LOWER_F}function Ent(e){return e>=Js.UPPER_A&&e<=Js.UPPER_Z||e>=Js.LOWER_A&&e<=Js.LOWER_Z||mU(e)}function xnt(e){return e===Js.EQUALS||Ent(e)}var qs;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(qs||(qs={}));var Lv;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Lv||(Lv={}));class Snt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=qs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Lv.Strict}startEntity(t){this.decodeMode=t,this.state=qs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case qs.EntityStart:return t.charCodeAt(n)===Js.NUM?(this.state=qs.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=qs.NamedEntity,this.stateNamedEntity(t,n));case qs.NumericStart:return this.stateNumericStart(t,n);case qs.NumericDecimal:return this.stateNumericDecimal(t,n);case qs.NumericHex:return this.stateNumericHex(t,n);case qs.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|_nt)===Js.LOWER_X?(this.state=qs.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=qs.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(mU(i)||wnt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(mU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Js.SEMI)this.consumed+=1;else if(this.decodeMode===Lv.Strict)return 0;return this.emitCodePoint(bnt(this.result),this.consumed),this.errors&&(t!==Js.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&sh.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=REe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Lv.Attribute&&(s===0||xnt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&sh.VALUE_LENGTH)>>14,s!==0){if(o===Js.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Lv.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&sh.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~sh.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case qs.NamedEntity:return this.result!==0&&(this.decodeMode!==Lv.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case qs.NumericDecimal:return this.emitNumericEntity(0,2);case qs.NumericHex:return this.emitNumericEntity(0,3);case qs.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case qs.EntityStart:return 0}}}function kEe(e){let t="";const n=new Snt(e,r=>t+=vnt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function REe(e,t,n,r){const i=(t&sh.BRANCH_LENGTH)>>7,s=t&sh.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}kEe(kg);kEe(gnt);var Le;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Le=Le||(Le={}));var C0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(C0=C0||(C0={}));var gl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(gl=gl||(gl={}));var we;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(we=we||(we={}));var N;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(N=N||(N={}));const Tnt=new Map([[we.A,N.A],[we.ADDRESS,N.ADDRESS],[we.ANNOTATION_XML,N.ANNOTATION_XML],[we.APPLET,N.APPLET],[we.AREA,N.AREA],[we.ARTICLE,N.ARTICLE],[we.ASIDE,N.ASIDE],[we.B,N.B],[we.BASE,N.BASE],[we.BASEFONT,N.BASEFONT],[we.BGSOUND,N.BGSOUND],[we.BIG,N.BIG],[we.BLOCKQUOTE,N.BLOCKQUOTE],[we.BODY,N.BODY],[we.BR,N.BR],[we.BUTTON,N.BUTTON],[we.CAPTION,N.CAPTION],[we.CENTER,N.CENTER],[we.CODE,N.CODE],[we.COL,N.COL],[we.COLGROUP,N.COLGROUP],[we.DD,N.DD],[we.DESC,N.DESC],[we.DETAILS,N.DETAILS],[we.DIALOG,N.DIALOG],[we.DIR,N.DIR],[we.DIV,N.DIV],[we.DL,N.DL],[we.DT,N.DT],[we.EM,N.EM],[we.EMBED,N.EMBED],[we.FIELDSET,N.FIELDSET],[we.FIGCAPTION,N.FIGCAPTION],[we.FIGURE,N.FIGURE],[we.FONT,N.FONT],[we.FOOTER,N.FOOTER],[we.FOREIGN_OBJECT,N.FOREIGN_OBJECT],[we.FORM,N.FORM],[we.FRAME,N.FRAME],[we.FRAMESET,N.FRAMESET],[we.H1,N.H1],[we.H2,N.H2],[we.H3,N.H3],[we.H4,N.H4],[we.H5,N.H5],[we.H6,N.H6],[we.HEAD,N.HEAD],[we.HEADER,N.HEADER],[we.HGROUP,N.HGROUP],[we.HR,N.HR],[we.HTML,N.HTML],[we.I,N.I],[we.IMG,N.IMG],[we.IMAGE,N.IMAGE],[we.INPUT,N.INPUT],[we.IFRAME,N.IFRAME],[we.KEYGEN,N.KEYGEN],[we.LABEL,N.LABEL],[we.LI,N.LI],[we.LINK,N.LINK],[we.LISTING,N.LISTING],[we.MAIN,N.MAIN],[we.MALIGNMARK,N.MALIGNMARK],[we.MARQUEE,N.MARQUEE],[we.MATH,N.MATH],[we.MENU,N.MENU],[we.META,N.META],[we.MGLYPH,N.MGLYPH],[we.MI,N.MI],[we.MO,N.MO],[we.MN,N.MN],[we.MS,N.MS],[we.MTEXT,N.MTEXT],[we.NAV,N.NAV],[we.NOBR,N.NOBR],[we.NOFRAMES,N.NOFRAMES],[we.NOEMBED,N.NOEMBED],[we.NOSCRIPT,N.NOSCRIPT],[we.OBJECT,N.OBJECT],[we.OL,N.OL],[we.OPTGROUP,N.OPTGROUP],[we.OPTION,N.OPTION],[we.P,N.P],[we.PARAM,N.PARAM],[we.PLAINTEXT,N.PLAINTEXT],[we.PRE,N.PRE],[we.RB,N.RB],[we.RP,N.RP],[we.RT,N.RT],[we.RTC,N.RTC],[we.RUBY,N.RUBY],[we.S,N.S],[we.SCRIPT,N.SCRIPT],[we.SECTION,N.SECTION],[we.SELECT,N.SELECT],[we.SOURCE,N.SOURCE],[we.SMALL,N.SMALL],[we.SPAN,N.SPAN],[we.STRIKE,N.STRIKE],[we.STRONG,N.STRONG],[we.STYLE,N.STYLE],[we.SUB,N.SUB],[we.SUMMARY,N.SUMMARY],[we.SUP,N.SUP],[we.TABLE,N.TABLE],[we.TBODY,N.TBODY],[we.TEMPLATE,N.TEMPLATE],[we.TEXTAREA,N.TEXTAREA],[we.TFOOT,N.TFOOT],[we.TD,N.TD],[we.TH,N.TH],[we.THEAD,N.THEAD],[we.TITLE,N.TITLE],[we.TR,N.TR],[we.TRACK,N.TRACK],[we.TT,N.TT],[we.U,N.U],[we.UL,N.UL],[we.SVG,N.SVG],[we.VAR,N.VAR],[we.WBR,N.WBR],[we.XMP,N.XMP]]);function Xx(e){var t;return(t=Tnt.get(e))!==null&&t!==void 0?t:N.UNKNOWN}const Qe=N,Cnt={[Le.HTML]:new Set([Qe.ADDRESS,Qe.APPLET,Qe.AREA,Qe.ARTICLE,Qe.ASIDE,Qe.BASE,Qe.BASEFONT,Qe.BGSOUND,Qe.BLOCKQUOTE,Qe.BODY,Qe.BR,Qe.BUTTON,Qe.CAPTION,Qe.CENTER,Qe.COL,Qe.COLGROUP,Qe.DD,Qe.DETAILS,Qe.DIR,Qe.DIV,Qe.DL,Qe.DT,Qe.EMBED,Qe.FIELDSET,Qe.FIGCAPTION,Qe.FIGURE,Qe.FOOTER,Qe.FORM,Qe.FRAME,Qe.FRAMESET,Qe.H1,Qe.H2,Qe.H3,Qe.H4,Qe.H5,Qe.H6,Qe.HEAD,Qe.HEADER,Qe.HGROUP,Qe.HR,Qe.HTML,Qe.IFRAME,Qe.IMG,Qe.INPUT,Qe.LI,Qe.LINK,Qe.LISTING,Qe.MAIN,Qe.MARQUEE,Qe.MENU,Qe.META,Qe.NAV,Qe.NOEMBED,Qe.NOFRAMES,Qe.NOSCRIPT,Qe.OBJECT,Qe.OL,Qe.P,Qe.PARAM,Qe.PLAINTEXT,Qe.PRE,Qe.SCRIPT,Qe.SECTION,Qe.SELECT,Qe.SOURCE,Qe.STYLE,Qe.SUMMARY,Qe.TABLE,Qe.TBODY,Qe.TD,Qe.TEMPLATE,Qe.TEXTAREA,Qe.TFOOT,Qe.TH,Qe.THEAD,Qe.TITLE,Qe.TR,Qe.TRACK,Qe.UL,Qe.WBR,Qe.XMP]),[Le.MATHML]:new Set([Qe.MI,Qe.MO,Qe.MN,Qe.MS,Qe.MTEXT,Qe.ANNOTATION_XML]),[Le.SVG]:new Set([Qe.TITLE,Qe.FOREIGN_OBJECT,Qe.DESC]),[Le.XLINK]:new Set,[Le.XML]:new Set,[Le.XMLNS]:new Set};function NEe(e){return e===Qe.H1||e===Qe.H2||e===Qe.H3||e===Qe.H4||e===Qe.H5||e===Qe.H6}we.STYLE,we.SCRIPT,we.XMP,we.IFRAME,we.NOEMBED,we.NOFRAMES,we.PLAINTEXT;const Ant=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const ls={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function e2(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function rC(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function Int(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function Rg(e){return Int(e)||rC(e)}function gU(e){return Rg(e)||e2(e)}function PEe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function OEe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function knt(e){return e2(e)||PEe(e)||OEe(e)}function sN(e){return e+32}function DEe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function Rnt(e){return e===X.EQUALS_SIGN||gU(e)}function oue(e){return DEe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class Nnt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new mnt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:An.START_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:An.END_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:An.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:An.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(IEe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Re.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Xx(t.tagName),t.type===An.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Re.endTagWithAttributes),t.selfClosing&&this._err(Re.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case An.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case An.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case An.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:An.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=DEe(t)?An.WHITESPACE_CHARACTER:t===X.NULL?An.NULL_CHARACTER:An.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(An.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=kg[0];s>=0&&(s=REe(kg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=kg[s];const a=o&sh.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Rnt(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[kg[s]&~sh.VALUE_LENGTH]:u===1?[kg[++s]]:[kg[++s],kg[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Re.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(bi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(bi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(bi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(bi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Rg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Re.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Re.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Re.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Rg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Re.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(Re.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Re.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.tagName+=bi;break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(rC(t)?sN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Rg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Rg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Rg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(bi);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(bi);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(bi);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Rg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Rg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(hu.SCRIPT,!1)&&oue(this.preprocessor.peek(hu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<hu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this._emitChars(bi);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(bi);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(bi);break}case X.EOF:{this._err(Re.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(hu.SCRIPT,!1)&&oue(this.preprocessor.peek(hu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<hu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Re.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Re.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.currentAttr.name+=bi;break}default:this.currentAttr.name+=String.fromCodePoint(rC(t)?sN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.currentAttr.value+=bi;break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.currentAttr.value+=bi;break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Re.unexpectedNullCharacter),this.currentAttr.value+=bi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Re.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this._err(Re.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Re.eofInTag),this._emitEOFToken();break}default:this._err(Re.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.data+=bi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(hu.DASH_DASH,!0)?(this._createCommentToken(hu.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(hu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(hu.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(hu.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Re.cdataInHtmlContent),this._createCommentToken(hu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Re.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.data+=bi;break}case X.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Re.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Re.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Re.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Re.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(rC(t))this._createDoctypeToken(String.fromCharCode(sN(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Re.unexpectedNullCharacter),this._createDoctypeToken(bi),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.name+=bi;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(rC(t)?sN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(hu.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(hu.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Re.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Re.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Re.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.publicId+=bi;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.publicId+=bi;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Re.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Re.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Re.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Re.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Re.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.systemId+=bi;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Re.unexpectedNullCharacter),n.systemId+=bi;break}case X.GREATER_THAN_SIGN:{this._err(Re.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Re.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Re.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(Re.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Re.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:gU(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){gU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Re.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:e2(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Re.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){knt(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Re.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){PEe(t)?this.charRefCode=this.charRefCode*16+t-55:OEe(t)?this.charRefCode=this.charRefCode*16+t-87:e2(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Re.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){e2(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Re.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Re.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Re.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(TEe(this.charRefCode))this._err(Re.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(AEe(this.charRefCode))this._err(Re.noncharacterCharacterReference);else if(CEe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Re.controlCharacterReference);const n=Ant.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const $Ee=new Set([N.DD,N.DT,N.LI,N.OPTGROUP,N.OPTION,N.P,N.RB,N.RP,N.RT,N.RTC]),aue=new Set([...$Ee,N.CAPTION,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]),oN=new Map([[N.APPLET,Le.HTML],[N.CAPTION,Le.HTML],[N.HTML,Le.HTML],[N.MARQUEE,Le.HTML],[N.OBJECT,Le.HTML],[N.TABLE,Le.HTML],[N.TD,Le.HTML],[N.TEMPLATE,Le.HTML],[N.TH,Le.HTML],[N.ANNOTATION_XML,Le.MATHML],[N.MI,Le.MATHML],[N.MN,Le.MATHML],[N.MO,Le.MATHML],[N.MS,Le.MATHML],[N.MTEXT,Le.MATHML],[N.DESC,Le.SVG],[N.FOREIGN_OBJECT,Le.SVG],[N.TITLE,Le.SVG]]),Pnt=[N.H1,N.H2,N.H3,N.H4,N.H5,N.H6],Ont=[N.TR,N.TEMPLATE,N.HTML],Dnt=[N.TBODY,N.TFOOT,N.THEAD,N.TEMPLATE,N.HTML],$nt=[N.TABLE,N.TEMPLATE,N.HTML],Mnt=[N.TD,N.TH];class Lnt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=N.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===N.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Le.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Le.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Pnt,Le.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Mnt,Le.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo($nt,Le.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Dnt,Le.HTML)}clearBackToTableRowContext(){this.clearBackTo(Ont,Le.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===N.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===N.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if(oN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(NEe(n)&&r===Le.HTML)return!0;if(oN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if((r===N.UL||r===N.OL)&&i===Le.HTML||oN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if(r===N.BUTTON&&i===Le.HTML||oN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Le.HTML){if(r===t)return!0;if(r===N.TABLE||r===N.TEMPLATE||r===N.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Le.HTML){if(n===N.TBODY||n===N.THEAD||n===N.TFOOT)return!0;if(n===N.TABLE||n===N.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Le.HTML){if(r===t)return!0;if(r!==N.OPTION&&r!==N.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;$Ee.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;aue.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&aue.has(this.currentTagId);)this.pop()}}const t9=3;var Sf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Sf=Sf||(Sf={}));const uue={type:Sf.Marker};class Fnt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Sf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<t9)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<t9)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=t9&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(uue)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Sf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Sf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(uue);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Sf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Sf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Sf.Element&&n.element===t)}}function lue(e){return{nodeName:"#text",value:e,parentNode:null}}const B_={createDocument(){return{nodeName:"#document",mode:gl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};B_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(B_.isTextNode(n)){n.value+=t;return}}B_.appendChild(e,lue(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&B_.isTextNode(r)?r.value+=t:B_.insertBefore(e,lue(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},MEe="html",jnt="about:legacy-compat",Bnt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",LEe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Unt=[...LEe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],znt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),FEe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Vnt=[...FEe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function cue(e,t){return t.some(n=>e.startsWith(n))}function Hnt(e){return e.name===MEe&&e.publicId===null&&(e.systemId===null||e.systemId===jnt)}function qnt(e){if(e.name!==MEe)return gl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Bnt)return gl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),znt.has(n))return gl.QUIRKS;let r=t===null?Unt:LEe;if(cue(n,r))return gl.QUIRKS;if(r=t===null?FEe:Vnt,cue(n,r))return gl.LIMITED_QUIRKS}return gl.NO_QUIRKS}const fue={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Wnt="definitionurl",Gnt="definitionURL",Ynt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Knt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Le.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Le.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Le.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Le.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Le.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Le.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Le.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Le.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Le.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Le.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Le.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Le.XMLNS}]]),Xnt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Qnt=new Set([N.B,N.BIG,N.BLOCKQUOTE,N.BODY,N.BR,N.CENTER,N.CODE,N.DD,N.DIV,N.DL,N.DT,N.EM,N.EMBED,N.H1,N.H2,N.H3,N.H4,N.H5,N.H6,N.HEAD,N.HR,N.I,N.IMG,N.LI,N.LISTING,N.MENU,N.META,N.NOBR,N.OL,N.P,N.PRE,N.RUBY,N.S,N.SMALL,N.SPAN,N.STRONG,N.STRIKE,N.SUB,N.SUP,N.TABLE,N.TT,N.U,N.UL,N.VAR]);function Jnt(e){const t=e.tagID;return t===N.FONT&&e.attrs.some(({name:r})=>r===C0.COLOR||r===C0.SIZE||r===C0.FACE)||Qnt.has(t)}function jEe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Wnt){e.attrs[t].name=Gnt;break}}function BEe(e){for(let t=0;t<e.attrs.length;t++){const n=Ynt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function OY(e){for(let t=0;t<e.attrs.length;t++){const n=Knt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Znt(e){const t=Xnt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Xx(e.tagName))}function ert(e,t){return t===Le.MATHML&&(e===N.MI||e===N.MO||e===N.MN||e===N.MS||e===N.MTEXT)}function trt(e,t,n){if(t===Le.MATHML&&e===N.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===C0.ENCODING){const i=n[r].value.toLowerCase();return i===fue.TEXT_HTML||i===fue.APPLICATION_XML}}return t===Le.SVG&&(e===N.FOREIGN_OBJECT||e===N.DESC||e===N.TITLE)}function nrt(e,t,n,r){return(!r||r===Le.HTML)&&trt(e,t,n)||(!r||r===Le.MATHML)&&ert(e,t)}const rrt="hidden",irt=8,srt=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const ort={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},UEe=new Set([N.TABLE,N.TBODY,N.TFOOT,N.THEAD,N.TR]),due={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:B_,onParseError:null};let hue=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...due,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Nnt(this.options,this),this.activeFormattingElements=new Fnt(this.treeAdapter),this.fragmentContextID=r?Xx(this.treeAdapter.getTagName(r)):N.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Lnt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...due,...n};t??(t=r.treeAdapter.createElement(we.TEMPLATE,Le.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Le.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===N.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:ort,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Le.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Le.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=ls.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===we.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Le.HTML))switch(this.fragmentContextID){case N.TITLE:case N.TEXTAREA:{this.tokenizer.state=ls.RCDATA;break}case N.STYLE:case N.XMP:case N.IFRAME:case N.NOEMBED:case N.NOFRAMES:case N.NOSCRIPT:{this.tokenizer.state=ls.RAWTEXT;break}case N.SCRIPT:{this.tokenizer.state=ls.SCRIPT_DATA;break}case N.PLAINTEXT:{this.tokenizer.state=ls.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Le.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Le.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(we.HTML,Le.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,N.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===An.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===N.SVG&&this.treeAdapter.getTagName(n)===we.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Le.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===N.MGLYPH||t.tagID===N.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Le.HTML)}_processToken(t){switch(t.type){case An.CHARACTER:{this.onCharacter(t);break}case An.NULL_CHARACTER:{this.onNullCharacter(t);break}case An.COMMENT:{this.onComment(t);break}case An.DOCTYPE:{this.onDoctype(t);break}case An.START_TAG:{this._processStartTag(t);break}case An.END_TAG:{this.onEndTag(t);break}case An.EOF:{this.onEof(t);break}case An.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return nrt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Sf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(N.P),this.openElements.popUntilTagNamePopped(N.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case N.TR:{this.insertionMode=ie.IN_ROW;return}case N.TBODY:case N.THEAD:case N.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case N.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case N.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case N.TABLE:{this.insertionMode=ie.IN_TABLE;return}case N.BODY:{this.insertionMode=ie.IN_BODY;return}case N.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case N.SELECT:{this._resetInsertionModeForSelect(t);return}case N.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case N.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case N.TD:case N.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case N.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===N.TEMPLATE)break;if(r===N.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return UEe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case N.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Le.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case N.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Cnt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Mit(this,t);return}switch(this.insertionMode){case ie.INITIAL:{cT(this,t);break}case ie.BEFORE_HTML:{t2(this,t);break}case ie.BEFORE_HEAD:{n2(this,t);break}case ie.IN_HEAD:{r2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{i2(this,t);break}case ie.AFTER_HEAD:{s2(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{VEe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{n9(this,t);break}case ie.IN_TABLE_TEXT:{KEe(this,t);break}case ie.IN_COLUMN_GROUP:{ND(this,t);break}case ie.AFTER_BODY:{PD(this,t);break}case ie.AFTER_AFTER_BODY:{qP(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){$it(this,t);return}switch(this.insertionMode){case ie.INITIAL:{cT(this,t);break}case ie.BEFORE_HTML:{t2(this,t);break}case ie.BEFORE_HEAD:{n2(this,t);break}case ie.IN_HEAD:{r2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{i2(this,t);break}case ie.AFTER_HEAD:{s2(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{n9(this,t);break}case ie.IN_COLUMN_GROUP:{ND(this,t);break}case ie.AFTER_BODY:{PD(this,t);break}case ie.AFTER_AFTER_BODY:{qP(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){yU(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{yU(this,t);break}case ie.IN_TABLE_TEXT:{fT(this,t);break}case ie.AFTER_BODY:{hrt(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{prt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{mrt(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Re.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{fT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Re.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Lit(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{cT(this,t);break}case ie.BEFORE_HTML:{grt(this,t);break}case ie.BEFORE_HEAD:{vrt(this,t);break}case ie.IN_HEAD:{ad(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{wrt(this,t);break}case ie.AFTER_HEAD:{xrt(this,t);break}case ie.IN_BODY:{ka(this,t);break}case ie.IN_TABLE:{xE(this,t);break}case ie.IN_TABLE_TEXT:{fT(this,t);break}case ie.IN_CAPTION:{bit(this,t);break}case ie.IN_COLUMN_GROUP:{MY(this,t);break}case ie.IN_TABLE_BODY:{HL(this,t);break}case ie.IN_ROW:{qL(this,t);break}case ie.IN_CELL:{Eit(this,t);break}case ie.IN_SELECT:{JEe(this,t);break}case ie.IN_SELECT_IN_TABLE:{Sit(this,t);break}case ie.IN_TEMPLATE:{Cit(this,t);break}case ie.AFTER_BODY:{Iit(this,t);break}case ie.IN_FRAMESET:{kit(this,t);break}case ie.AFTER_FRAMESET:{Nit(this,t);break}case ie.AFTER_AFTER_BODY:{Oit(this,t);break}case ie.AFTER_AFTER_FRAMESET:{Dit(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Fit(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{cT(this,t);break}case ie.BEFORE_HTML:{yrt(this,t);break}case ie.BEFORE_HEAD:{brt(this,t);break}case ie.IN_HEAD:{_rt(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{Ert(this,t);break}case ie.AFTER_HEAD:{Srt(this,t);break}case ie.IN_BODY:{VL(this,t);break}case ie.TEXT:{lit(this,t);break}case ie.IN_TABLE:{dA(this,t);break}case ie.IN_TABLE_TEXT:{fT(this,t);break}case ie.IN_CAPTION:{_it(this,t);break}case ie.IN_COLUMN_GROUP:{wit(this,t);break}case ie.IN_TABLE_BODY:{vU(this,t);break}case ie.IN_ROW:{QEe(this,t);break}case ie.IN_CELL:{xit(this,t);break}case ie.IN_SELECT:{ZEe(this,t);break}case ie.IN_SELECT_IN_TABLE:{Tit(this,t);break}case ie.IN_TEMPLATE:{Ait(this,t);break}case ie.AFTER_BODY:{txe(this,t);break}case ie.IN_FRAMESET:{Rit(this,t);break}case ie.AFTER_FRAMESET:{Pit(this,t);break}case ie.AFTER_AFTER_BODY:{qP(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{cT(this,t);break}case ie.BEFORE_HTML:{t2(this,t);break}case ie.BEFORE_HEAD:{n2(this,t);break}case ie.IN_HEAD:{r2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{i2(this,t);break}case ie.AFTER_HEAD:{s2(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{GEe(this,t);break}case ie.TEXT:{cit(this,t);break}case ie.IN_TABLE_TEXT:{fT(this,t);break}case ie.IN_TEMPLATE:{exe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{$Y(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{zEe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{n9(this,t);break}case ie.IN_TABLE_TEXT:{YEe(this,t);break}}}};function art(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):WEe(e,t),n}function urt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function lrt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=srt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=crt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function crt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function frt(e,t,n){const r=e.treeAdapter.getTagName(t),i=Xx(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===N.TEMPLATE&&s===Le.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function drt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function DY(e,t){for(let n=0;n<irt;n++){const r=art(e,t);if(!r)break;const i=urt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=lrt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&frt(e,o,s),drt(e,i,r)}}function yU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function hrt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function prt(e,t){e._appendCommentNode(t,e.document)}function $Y(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function mrt(e,t){e._setDocumentType(t);const n=t.forceQuirks?gl.QUIRKS:qnt(t);Hnt(t)||e._err(t,Re.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function cT(e,t){e._err(t,Re.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,gl.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function grt(e,t){t.tagID===N.HTML?(e._insertElement(t,Le.HTML),e.insertionMode=ie.BEFORE_HEAD):t2(e,t)}function yrt(e,t){const n=t.tagID;(n===N.HTML||n===N.HEAD||n===N.BODY||n===N.BR)&&t2(e,t)}function t2(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function vrt(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.HEAD:{e._insertElement(t,Le.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:n2(e,t)}}function brt(e,t){const n=t.tagID;n===N.HEAD||n===N.BODY||n===N.HTML||n===N.BR?n2(e,t):e._err(t,Re.endTagWithoutMatchingOpenElement)}function n2(e,t){e._insertFakeElement(we.HEAD,N.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function ad(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case N.TITLE:{e._switchToTextParsing(t,ls.RCDATA);break}case N.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ls.RAWTEXT):(e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case N.NOFRAMES:case N.STYLE:{e._switchToTextParsing(t,ls.RAWTEXT);break}case N.SCRIPT:{e._switchToTextParsing(t,ls.SCRIPT_DATA);break}case N.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case N.HEAD:{e._err(t,Re.misplacedStartTagForHeadElement);break}default:r2(e,t)}}function _rt(e,t){switch(t.tagID){case N.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case N.BODY:case N.BR:case N.HTML:{r2(e,t);break}case N.TEMPLATE:{Db(e,t);break}default:e._err(t,Re.endTagWithoutMatchingOpenElement)}}function Db(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==N.TEMPLATE&&e._err(t,Re.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Re.endTagWithoutMatchingOpenElement)}function r2(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function wrt(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.BASEFONT:case N.BGSOUND:case N.HEAD:case N.LINK:case N.META:case N.NOFRAMES:case N.STYLE:{ad(e,t);break}case N.NOSCRIPT:{e._err(t,Re.nestedNoscriptInHead);break}default:i2(e,t)}}function Ert(e,t){switch(t.tagID){case N.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case N.BR:{i2(e,t);break}default:e._err(t,Re.endTagWithoutMatchingOpenElement)}}function i2(e,t){const n=t.type===An.EOF?Re.openElementsLeftAfterEof:Re.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function xrt(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.BODY:{e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case N.FRAMESET:{e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_FRAMESET;break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{e._err(t,Re.abandonedHeadElementChild),e.openElements.push(e.headElement,N.HEAD),ad(e,t),e.openElements.remove(e.headElement);break}case N.HEAD:{e._err(t,Re.misplacedStartTagForHeadElement);break}default:s2(e,t)}}function Srt(e,t){switch(t.tagID){case N.BODY:case N.HTML:case N.BR:{s2(e,t);break}case N.TEMPLATE:{Db(e,t);break}default:e._err(t,Re.endTagWithoutMatchingOpenElement)}}function s2(e,t){e._insertFakeElement(we.BODY,N.BODY),e.insertionMode=ie.IN_BODY,zL(e,t)}function zL(e,t){switch(t.type){case An.CHARACTER:{VEe(e,t);break}case An.WHITESPACE_CHARACTER:{zEe(e,t);break}case An.COMMENT:{yU(e,t);break}case An.START_TAG:{ka(e,t);break}case An.END_TAG:{VL(e,t);break}case An.EOF:{GEe(e,t);break}}}function zEe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function VEe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Trt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Crt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Art(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_FRAMESET)}function Irt(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Le.HTML)}function krt(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),NEe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Le.HTML)}function Rrt(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Nrt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Le.HTML),n||(e.formElement=e.openElements.current))}function Prt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===N.LI&&i===N.LI||(n===N.DD||n===N.DT)&&(i===N.DD||i===N.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==N.ADDRESS&&i!==N.DIV&&i!==N.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Le.HTML)}function Ort(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.tokenizer.state=ls.PLAINTEXT}function Drt(e,t){e.openElements.hasInScope(N.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.framesetOk=!1}function $rt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(we.A);n&&(DY(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Mrt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Lrt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(N.NOBR)&&(DY(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Frt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function jrt(e,t){e.treeAdapter.getDocumentMode(e.document)!==gl.QUIRKS&&e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function HEe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Le.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function qEe(e){const t=IEe(e,C0.TYPE);return t!=null&&t.toLowerCase()===rrt}function Brt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Le.HTML),qEe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Urt(e,t){e._appendElement(t,Le.HTML),t.ackSelfClosing=!0}function zrt(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._appendElement(t,Le.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Vrt(e,t){t.tagName=we.IMG,t.tagID=N.IMG,HEe(e,t)}function Hrt(e,t){e._insertElement(t,Le.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ls.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function qrt(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ls.RAWTEXT)}function Wrt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ls.RAWTEXT)}function pue(e,t){e._switchToTextParsing(t,ls.RAWTEXT)}function Grt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function Yrt(e,t){e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML)}function Krt(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Le.HTML)}function Xrt(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(N.RTC),e._insertElement(t,Le.HTML)}function Qrt(e,t){e._reconstructActiveFormattingElements(),jEe(t),OY(t),t.selfClosing?e._appendElement(t,Le.MATHML):e._insertElement(t,Le.MATHML),t.ackSelfClosing=!0}function Jrt(e,t){e._reconstructActiveFormattingElements(),BEe(t),OY(t),t.selfClosing?e._appendElement(t,Le.SVG):e._insertElement(t,Le.SVG),t.ackSelfClosing=!0}function mue(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML)}function ka(e,t){switch(t.tagID){case N.I:case N.S:case N.B:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.SMALL:case N.STRIKE:case N.STRONG:{Mrt(e,t);break}case N.A:{$rt(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{krt(e,t);break}case N.P:case N.DL:case N.OL:case N.UL:case N.DIV:case N.DIR:case N.NAV:case N.MAIN:case N.MENU:case N.ASIDE:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.DETAILS:case N.ADDRESS:case N.ARTICLE:case N.SECTION:case N.SUMMARY:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{Irt(e,t);break}case N.LI:case N.DD:case N.DT:{Prt(e,t);break}case N.BR:case N.IMG:case N.WBR:case N.AREA:case N.EMBED:case N.KEYGEN:{HEe(e,t);break}case N.HR:{zrt(e,t);break}case N.RB:case N.RTC:{Krt(e,t);break}case N.RT:case N.RP:{Xrt(e,t);break}case N.PRE:case N.LISTING:{Rrt(e,t);break}case N.XMP:{qrt(e,t);break}case N.SVG:{Jrt(e,t);break}case N.HTML:{Trt(e,t);break}case N.BASE:case N.LINK:case N.META:case N.STYLE:case N.TITLE:case N.SCRIPT:case N.BGSOUND:case N.BASEFONT:case N.TEMPLATE:{ad(e,t);break}case N.BODY:{Crt(e,t);break}case N.FORM:{Nrt(e,t);break}case N.NOBR:{Lrt(e,t);break}case N.MATH:{Qrt(e,t);break}case N.TABLE:{jrt(e,t);break}case N.INPUT:{Brt(e,t);break}case N.PARAM:case N.TRACK:case N.SOURCE:{Urt(e,t);break}case N.IMAGE:{Vrt(e,t);break}case N.BUTTON:{Drt(e,t);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{Frt(e,t);break}case N.IFRAME:{Wrt(e,t);break}case N.SELECT:{Grt(e,t);break}case N.OPTION:case N.OPTGROUP:{Yrt(e,t);break}case N.NOEMBED:{pue(e,t);break}case N.FRAMESET:{Art(e,t);break}case N.TEXTAREA:{Hrt(e,t);break}case N.NOSCRIPT:{e.options.scriptingEnabled?pue(e,t):mue(e,t);break}case N.PLAINTEXT:{Ort(e,t);break}case N.COL:case N.TH:case N.TD:case N.TR:case N.HEAD:case N.FRAME:case N.TBODY:case N.TFOOT:case N.THEAD:case N.CAPTION:case N.COLGROUP:break;default:mue(e,t)}}function Zrt(e,t){if(e.openElements.hasInScope(N.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function eit(e,t){e.openElements.hasInScope(N.BODY)&&(e.insertionMode=ie.AFTER_BODY,txe(e,t))}function tit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function nit(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(N.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(N.FORM):n&&e.openElements.remove(n))}function rit(e){e.openElements.hasInButtonScope(N.P)||e._insertFakeElement(we.P,N.P),e._closePElement()}function iit(e){e.openElements.hasInListItemScope(N.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(N.LI),e.openElements.popUntilTagNamePopped(N.LI))}function sit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function oit(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function ait(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function uit(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(we.BR,N.BR),e.openElements.pop(),e.framesetOk=!1}function WEe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==N.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function VL(e,t){switch(t.tagID){case N.A:case N.B:case N.I:case N.S:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.NOBR:case N.SMALL:case N.STRIKE:case N.STRONG:{DY(e,t);break}case N.P:{rit(e);break}case N.DL:case N.UL:case N.OL:case N.DIR:case N.DIV:case N.NAV:case N.PRE:case N.MAIN:case N.MENU:case N.ASIDE:case N.BUTTON:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.ADDRESS:case N.ARTICLE:case N.DETAILS:case N.SECTION:case N.SUMMARY:case N.LISTING:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{tit(e,t);break}case N.LI:{iit(e);break}case N.DD:case N.DT:{sit(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{oit(e);break}case N.BR:{uit(e);break}case N.BODY:{Zrt(e,t);break}case N.HTML:{eit(e,t);break}case N.FORM:{nit(e);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{ait(e,t);break}case N.TEMPLATE:{Db(e,t);break}default:WEe(e,t)}}function GEe(e,t){e.tmplInsertionModeStack.length>0?exe(e,t):$Y(e,t)}function lit(e,t){var n;t.tagID===N.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function cit(e,t){e._err(t,Re.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function n9(e,t){if(UEe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case An.CHARACTER:{KEe(e,t);break}case An.WHITESPACE_CHARACTER:{YEe(e,t);break}}else YI(e,t)}function fit(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_CAPTION}function dit(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function hit(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.COLGROUP,N.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,MY(e,t)}function pit(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_TABLE_BODY}function mit(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.TBODY,N.TBODY),e.insertionMode=ie.IN_TABLE_BODY,HL(e,t)}function git(e,t){e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function yit(e,t){qEe(t)?e._appendElement(t,Le.HTML):YI(e,t),t.ackSelfClosing=!0}function vit(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Le.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function xE(e,t){switch(t.tagID){case N.TD:case N.TH:case N.TR:{mit(e,t);break}case N.STYLE:case N.SCRIPT:case N.TEMPLATE:{ad(e,t);break}case N.COL:{hit(e,t);break}case N.FORM:{vit(e,t);break}case N.TABLE:{git(e,t);break}case N.TBODY:case N.TFOOT:case N.THEAD:{pit(e,t);break}case N.INPUT:{yit(e,t);break}case N.CAPTION:{fit(e,t);break}case N.COLGROUP:{dit(e,t);break}default:YI(e,t)}}function dA(e,t){switch(t.tagID){case N.TABLE:{e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode());break}case N.TEMPLATE:{Db(e,t);break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:YI(e,t)}}function YI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,zL(e,t),e.fosterParentingEnabled=n}function YEe(e,t){e.pendingCharacterTokens.push(t)}function KEe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function fT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)YI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const XEe=new Set([N.CAPTION,N.COL,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]);function bit(e,t){const n=t.tagID;XEe.has(n)?e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,xE(e,t)):ka(e,t)}function _it(e,t){const n=t.tagID;switch(n){case N.CAPTION:case N.TABLE:{e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===N.TABLE&&dA(e,t));break}case N.BODY:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:VL(e,t)}}function MY(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.COL:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case N.TEMPLATE:{ad(e,t);break}default:ND(e,t)}}function wit(e,t){switch(t.tagID){case N.COLGROUP:{e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case N.TEMPLATE:{Db(e,t);break}case N.COL:break;default:ND(e,t)}}function ND(e,t){e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function HL(e,t){switch(t.tagID){case N.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_ROW;break}case N.TH:case N.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(we.TR,N.TR),e.insertionMode=ie.IN_ROW,qL(e,t);break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,xE(e,t));break}default:xE(e,t)}}function vU(e,t){const n=t.tagID;switch(t.tagID){case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case N.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,dA(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:case N.TR:break;default:dA(e,t)}}function qL(e,t){switch(t.tagID){case N.TH:case N.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,HL(e,t));break}default:xE(e,t)}}function QEe(e,t){switch(t.tagID){case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case N.TABLE:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,vU(e,t));break}case N.TBODY:case N.TFOOT:case N.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(N.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,vU(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:break;default:dA(e,t)}}function Eit(e,t){const n=t.tagID;XEe.has(n)?(e.openElements.hasInTableScope(N.TD)||e.openElements.hasInTableScope(N.TH))&&(e._closeTableCell(),qL(e,t)):ka(e,t)}function xit(e,t){const n=t.tagID;switch(n){case N.TD:case N.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case N.TABLE:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),QEe(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:break;default:VL(e,t)}}function JEe(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._insertElement(t,Le.HTML);break}case N.OPTGROUP:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Le.HTML);break}case N.INPUT:case N.KEYGEN:case N.TEXTAREA:case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),t.tagID!==N.SELECT&&e._processStartTag(t));break}case N.SCRIPT:case N.TEMPLATE:{ad(e,t);break}}}function ZEe(e,t){switch(t.tagID){case N.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===N.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===N.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop();break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop();break}case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode());break}case N.TEMPLATE:{Db(e,t);break}}}function Sit(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e._processStartTag(t)):JEe(e,t)}function Tit(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e.onEndTag(t)):ZEe(e,t)}function Cit(e,t){switch(t.tagID){case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{ad(e,t);break}case N.CAPTION:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,xE(e,t);break}case N.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,MY(e,t);break}case N.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,HL(e,t);break}case N.TD:case N.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,qL(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,ka(e,t)}}function Ait(e,t){t.tagID===N.TEMPLATE&&Db(e,t)}function exe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):$Y(e,t)}function Iit(e,t){t.tagID===N.HTML?ka(e,t):PD(e,t)}function txe(e,t){var n;if(t.tagID===N.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===N.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else PD(e,t)}function PD(e,t){e.insertionMode=ie.IN_BODY,zL(e,t)}function kit(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.FRAMESET:{e._insertElement(t,Le.HTML);break}case N.FRAME:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case N.NOFRAMES:{ad(e,t);break}}}function Rit(e,t){t.tagID===N.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==N.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function Nit(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.NOFRAMES:{ad(e,t);break}}}function Pit(e,t){t.tagID===N.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function Oit(e,t){t.tagID===N.HTML?ka(e,t):qP(e,t)}function qP(e,t){e.insertionMode=ie.IN_BODY,zL(e,t)}function Dit(e,t){switch(t.tagID){case N.HTML:{ka(e,t);break}case N.NOFRAMES:{ad(e,t);break}}}function $it(e,t){t.chars=bi,e._insertCharacters(t)}function Mit(e,t){e._insertCharacters(t),e.framesetOk=!1}function nxe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Le.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Lit(e,t){if(Jnt(t))nxe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Le.MATHML?jEe(t):r===Le.SVG&&(Znt(t),BEe(t)),OY(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Fit(e,t){if(t.tagID===N.P||t.tagID===N.BR){nxe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Le.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}we.AREA,we.BASE,we.BASEFONT,we.BGSOUND,we.BR,we.COL,we.EMBED,we.FRAME,we.HR,we.IMG,we.INPUT,we.KEYGEN,we.LINK,we.META,we.PARAM,we.SOURCE,we.TRACK,we.WBR;const rxe=ixe("end"),$b=ixe("start");function ixe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}const sxe=function(e){if(e==null)return zit;if(typeof e=="function")return WL(e);if(typeof e=="object")return Array.isArray(e)?jit(e):Bit(e);if(typeof e=="string")return Uit(e);throw new Error("Expected function, string, or object as test")};function jit(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=sxe(e[n]);return WL(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Bit(e){const t=e;return WL(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Uit(e){return WL(t);function t(n){return n&&n.type===e}}function WL(e){return t;function t(n,r,i){return!!(Vit(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function zit(){return!0}function Vit(e){return e!==null&&typeof e=="object"&&"type"in e}const oxe=[],Hit=!0,gue=!1,qit="skip";function Wit(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=sxe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=oxe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=Git(n(u,c)),h[0]===gue))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==qit)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===gue)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Git(e){return Array.isArray(e)?e:typeof e=="number"?[Hit,e]:e==null?oxe:[e]}function Yit(e,t,n,r){let i,s,o;s=t,o=n,i=r,Wit(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const Kit=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),yue={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function axe(e,t){const n=sst(e),r=xEe("type",{handlers:{root:Xit,element:Qit,text:Jit,comment:lxe,doctype:Zit,raw:tst},unknown:nst}),i={parser:n?new hue(yue):hue.getFragmentParser(void 0,yue),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),Qx(i,$b());const s=n?i.parser.document:i.parser.getFragment(),o=Qtt(s,{file:i.options.file});return i.stitches&&Yit(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function uxe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Xit(e,t){uxe(e.children,t)}function Qit(e,t){rst(e,t),uxe(e.children,t),ist(e,t)}function Jit(e,t){const n={type:An.CHARACTER,chars:e.value,location:KI(e)};Qx(t,$b(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Zit(e,t){const n={type:An.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:KI(e)};Qx(t,$b(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function est(e,t){t.stitches=!0;const n=ost(e);if("children"in e&&"children"in n){const r=axe({type:"root",children:e.children},t.options);n.children=r.children}lxe({type:"comment",value:{stitch:n}},t)}function lxe(e,t){const n=e.value,r={type:An.COMMENT,data:n,location:KI(e)};Qx(t,$b(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function tst(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,cxe(t,$b(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function nst(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))est(n,t);else{let r="";throw Kit.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Qx(e,t){cxe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=ls.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function cxe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function rst(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===ls.PLAINTEXT)return;Qx(t,$b(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:e1.html;i===e1.html&&n==="svg"&&(i=e1.svg);const s=nnt({...e,children:[]},{space:i===e1.svg?"svg":"html"}),o={type:An.START_TAG,tagName:n,tagID:Xx(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:KI(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function ist(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&cnt.includes(n)||t.parser.tokenizer.state===ls.PLAINTEXT)return;Qx(t,rxe(e));const r={type:An.END_TAG,tagName:n,tagID:Xx(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:KI(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===ls.RCDATA||t.parser.tokenizer.state===ls.RAWTEXT||t.parser.tokenizer.state===ls.SCRIPT_DATA)&&(t.parser.tokenizer.state=ls.DATA)}function sst(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function KI(e){const t=$b(e)||{line:void 0,column:void 0,offset:void 0},n=rxe(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function ost(e){return"children"in e?tue({...e,children:[]}):tue(e)}function ast(e){return function(t,n){return axe(t,{...e,file:n})}}function Qa({text:e,required:t}){const n={img:({node:i,...s})=>w.jsx(Oy,{...s,h:s.height,w:s.width}),p:({node:i,...s})=>w.jsx(xt,{...s,pb:8}),h1:({node:i,...s})=>w.jsx(Co,{order:1,...s,pb:12}),h2:({node:i,...s})=>w.jsx(Co,{order:2,...s,pb:12}),h3:({node:i,...s})=>w.jsx(Co,{order:3,...s,pb:12}),h4:({node:i,...s})=>w.jsx(Co,{order:4,...s,pb:12}),h5:({node:i,...s})=>w.jsx(Co,{order:5,...s,pb:12}),h6:({node:i,...s})=>w.jsx(Co,{order:6,...s,pb:12}),a:({node:i,...s})=>w.jsx(Rb,{...s}),ul:({node:i,...s})=>w.jsx(S0,{withPadding:!0,...s,pb:8}),ol:({node:i,...s})=>w.jsx(S0,{type:"ordered",withPadding:!0,...s,pb:8})};return w.jsx(gEe,{components:n,rehypePlugins:[ast],children:e+(t?' <span style="color: #fa5252">*</span>':"")})}function fxe({errors:e}){const t=`
      There was an issue loading the study config. Please check the following errors:  

      ${e.map(n=>`- You have an error at ${n.instancePath||"root"}: ${n.message} - ${JSON.stringify(n.params)}  `).join(`
`)}
    `.replace(/\n\s+/g,`
`);return w.jsx(Qa,{text:t})}const ust="https://github.com/revisit-studies/study/tree/main/public/";function lst({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Yc();return w.jsx(cs.Main,{children:w.jsxs(Jh,{size:"xs",px:"xs",children:[w.jsx(Oy,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Kc}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),w.jsx(xt,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=pY(i);return w.jsx(ao,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:w.jsx(Nb,{shadow:"sm",radius:"md",withBorder:!0,children:s.errors?w.jsxs(w.Fragment,{children:[w.jsxs(ii,{align:"center",direction:"row",children:[w.jsx(JXe,{color:"red"}),w.jsx(xt,{fw:"bold",ml:8,color:"red",children:i})]}),w.jsx(fxe,{errors:s.errors})]}):w.jsxs(w.Fragment,{children:[w.jsx(xt,{fw:"bold",children:s.studyMetadata.title}),w.jsx(xt,{c:"dimmed",children:`Authors: ${s.studyMetadata.authors}`}),w.jsx(xt,{c:"dimmed",children:s.studyMetadata.description}),w.jsx(xt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:w.jsxs(Rb,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${ust}${o}`,children:["View source:"," ",o]})})]})})},i)})]})})}var dxe={exports:{}},hxe={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE=I;function cst(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fst=typeof Object.is=="function"?Object.is:cst,dst=SE.useState,hst=SE.useEffect,pst=SE.useLayoutEffect,mst=SE.useDebugValue;function gst(e,t){var n=t(),r=dst({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return pst(function(){i.value=n,i.getSnapshot=t,r9(i)&&s({inst:i})},[e,n,t]),hst(function(){return r9(i)&&s({inst:i}),e(function(){r9(i)&&s({inst:i})})},[e]),mst(n),n}function r9(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!fst(e,n)}catch{return!0}}function yst(e,t){return t()}var vst=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?yst:gst;hxe.useSyncExternalStore=SE.useSyncExternalStore!==void 0?SE.useSyncExternalStore:vst;dxe.exports=hxe;var bst=dxe.exports,pxe={exports:{}},mxe={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GL=I,_st=bst;function wst(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Est=typeof Object.is=="function"?Object.is:wst,xst=_st.useSyncExternalStore,Sst=GL.useRef,Tst=GL.useEffect,Cst=GL.useMemo,Ast=GL.useDebugValue;mxe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Sst(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Cst(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Est(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=xst(e,s[0],s[1]);return Tst(function(){o.hasValue=!0,o.value=a},[a]),Ast(a),a};pxe.exports=mxe;var Ist=pxe.exports;function kst(e){e()}let gxe=kst;const Rst=e=>gxe=e,Nst=()=>gxe,vue=Symbol.for("react-redux-context"),bue=typeof globalThis<"u"?globalThis:{};function Pst(){var e;if(!I.createContext)return{};const t=(e=bue[vue])!=null?e:bue[vue]=new Map;let n=t.get(I.createContext);return n||(n=I.createContext(null),t.set(I.createContext,n)),n}const q0=Pst();function LY(e=q0){return function(){return I.useContext(e)}}const yxe=LY(),Ost=()=>{throw new Error("uSES not initialized!")};let vxe=Ost;const Dst=e=>{vxe=e},$st=(e,t)=>e===t;function Mst(e=q0){const t=e===q0?yxe:LY(e);return function(r,i={}){const{equalityFn:s=$st,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:u,subscription:l,getServerState:c,stabilityCheck:f,noopCheck:d}=t();I.useRef(!0);const h=I.useCallback({[r.name](m){return r(m)}}[r.name],[r,f,o]),p=vxe(l.addNestedSub,u.getState,c||u.getState,h,s);return I.useDebugValue(p),p}}const Lst=Mst();var bxe={exports:{}},$r={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fo=typeof Symbol=="function"&&Symbol.for,FY=fo?Symbol.for("react.element"):60103,jY=fo?Symbol.for("react.portal"):60106,YL=fo?Symbol.for("react.fragment"):60107,KL=fo?Symbol.for("react.strict_mode"):60108,XL=fo?Symbol.for("react.profiler"):60114,QL=fo?Symbol.for("react.provider"):60109,JL=fo?Symbol.for("react.context"):60110,BY=fo?Symbol.for("react.async_mode"):60111,ZL=fo?Symbol.for("react.concurrent_mode"):60111,e6=fo?Symbol.for("react.forward_ref"):60112,t6=fo?Symbol.for("react.suspense"):60113,Fst=fo?Symbol.for("react.suspense_list"):60120,n6=fo?Symbol.for("react.memo"):60115,r6=fo?Symbol.for("react.lazy"):60116,jst=fo?Symbol.for("react.block"):60121,Bst=fo?Symbol.for("react.fundamental"):60117,Ust=fo?Symbol.for("react.responder"):60118,zst=fo?Symbol.for("react.scope"):60119;function Yl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case FY:switch(e=e.type,e){case BY:case ZL:case YL:case XL:case KL:case t6:return e;default:switch(e=e&&e.$$typeof,e){case JL:case e6:case r6:case n6:case QL:return e;default:return t}}case jY:return t}}}function _xe(e){return Yl(e)===ZL}$r.AsyncMode=BY;$r.ConcurrentMode=ZL;$r.ContextConsumer=JL;$r.ContextProvider=QL;$r.Element=FY;$r.ForwardRef=e6;$r.Fragment=YL;$r.Lazy=r6;$r.Memo=n6;$r.Portal=jY;$r.Profiler=XL;$r.StrictMode=KL;$r.Suspense=t6;$r.isAsyncMode=function(e){return _xe(e)||Yl(e)===BY};$r.isConcurrentMode=_xe;$r.isContextConsumer=function(e){return Yl(e)===JL};$r.isContextProvider=function(e){return Yl(e)===QL};$r.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===FY};$r.isForwardRef=function(e){return Yl(e)===e6};$r.isFragment=function(e){return Yl(e)===YL};$r.isLazy=function(e){return Yl(e)===r6};$r.isMemo=function(e){return Yl(e)===n6};$r.isPortal=function(e){return Yl(e)===jY};$r.isProfiler=function(e){return Yl(e)===XL};$r.isStrictMode=function(e){return Yl(e)===KL};$r.isSuspense=function(e){return Yl(e)===t6};$r.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===YL||e===ZL||e===XL||e===KL||e===t6||e===Fst||typeof e=="object"&&e!==null&&(e.$$typeof===r6||e.$$typeof===n6||e.$$typeof===QL||e.$$typeof===JL||e.$$typeof===e6||e.$$typeof===Bst||e.$$typeof===Ust||e.$$typeof===zst||e.$$typeof===jst)};$r.typeOf=Yl;bxe.exports=$r;var Vst=bxe.exports,wxe=Vst,Hst={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},qst={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Exe={};Exe[wxe.ForwardRef]=Hst;Exe[wxe.Memo]=qst;var zr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UY=Symbol.for("react.element"),zY=Symbol.for("react.portal"),i6=Symbol.for("react.fragment"),s6=Symbol.for("react.strict_mode"),o6=Symbol.for("react.profiler"),a6=Symbol.for("react.provider"),u6=Symbol.for("react.context"),Wst=Symbol.for("react.server_context"),l6=Symbol.for("react.forward_ref"),c6=Symbol.for("react.suspense"),f6=Symbol.for("react.suspense_list"),d6=Symbol.for("react.memo"),h6=Symbol.for("react.lazy"),Gst=Symbol.for("react.offscreen"),xxe;xxe=Symbol.for("react.module.reference");function ef(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case UY:switch(e=e.type,e){case i6:case o6:case s6:case c6:case f6:return e;default:switch(e=e&&e.$$typeof,e){case Wst:case u6:case l6:case h6:case d6:case a6:return e;default:return t}}case zY:return t}}}zr.ContextConsumer=u6;zr.ContextProvider=a6;zr.Element=UY;zr.ForwardRef=l6;zr.Fragment=i6;zr.Lazy=h6;zr.Memo=d6;zr.Portal=zY;zr.Profiler=o6;zr.StrictMode=s6;zr.Suspense=c6;zr.SuspenseList=f6;zr.isAsyncMode=function(){return!1};zr.isConcurrentMode=function(){return!1};zr.isContextConsumer=function(e){return ef(e)===u6};zr.isContextProvider=function(e){return ef(e)===a6};zr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===UY};zr.isForwardRef=function(e){return ef(e)===l6};zr.isFragment=function(e){return ef(e)===i6};zr.isLazy=function(e){return ef(e)===h6};zr.isMemo=function(e){return ef(e)===d6};zr.isPortal=function(e){return ef(e)===zY};zr.isProfiler=function(e){return ef(e)===o6};zr.isStrictMode=function(e){return ef(e)===s6};zr.isSuspense=function(e){return ef(e)===c6};zr.isSuspenseList=function(e){return ef(e)===f6};zr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===i6||e===o6||e===s6||e===c6||e===f6||e===Gst||typeof e=="object"&&e!==null&&(e.$$typeof===h6||e.$$typeof===d6||e.$$typeof===a6||e.$$typeof===u6||e.$$typeof===l6||e.$$typeof===xxe||e.getModuleId!==void 0)};zr.typeOf=ef;function Yst(){const e=Nst();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=t;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:t=s,function(){!i||t===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}const _ue={notify(){},get:()=>[]};function Kst(e,t){let n,r=_ue,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Yst())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=_ue)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}const Xst=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Qst=Xst?I.useLayoutEffect:I.useEffect;function Jst({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=I.useMemo(()=>{const l=Kst(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[e,r,i,s]),a=I.useMemo(()=>e.getState(),[e]);Qst(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||q0;return I.createElement(u.Provider,{value:o},n)}function Sxe(e=q0){const t=e===q0?yxe:LY(e);return function(){const{store:r}=t();return r}}const Zst=Sxe();function eot(e=q0){const t=e===q0?Zst:Sxe(e);return function(){return t().dispatch}}const Txe=eot();Dst(Ist.useSyncExternalStoreWithSelector);Rst(PI.unstable_batchedUpdates);function VY(){const{studyId:e}=Am();return`${e}`}function np(){const{index:e}=Am();return parseInt(e||"0",10)}function Cf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function W0(e){return!!e&&!!e[Ei]}function Im(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===lot}(e)||Array.isArray(e)||!!e[Aue]||!!(!((t=e.constructor)===null||t===void 0)&&t[Aue])||HY(e)||qY(e))}function U1(e,t,n){n===void 0&&(n=!1),Jx(e)===0?(n?Object.keys:Fw)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Jx(e){var t=e[Ei];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:HY(e)?2:qY(e)?3:0}function Lw(e,t){return Jx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function tot(e,t){return Jx(e)===2?e.get(t):e[t]}function Cxe(e,t,n){var r=Jx(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Axe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function HY(e){return aot&&e instanceof Map}function qY(e){return uot&&e instanceof Set}function Sv(e){return e.o||e.t}function WY(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=kxe(e);delete t[Ei];for(var n=Fw(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function GY(e,t){return t===void 0&&(t=!1),YY(e)||W0(e)||!Im(e)||(Jx(e)>1&&(e.set=e.add=e.clear=e.delete=not),Object.freeze(e),t&&U1(e,function(n,r){return GY(r,!0)},!0)),e}function not(){Cf(2)}function YY(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function mh(e){var t=EU[e];return t||Cf(18,e),t}function rot(e,t){EU[e]||(EU[e]=t)}function bU(){return hA}function i9(e,t){t&&(mh("Patches"),e.u=[],e.s=[],e.v=t)}function OD(e){_U(e),e.p.forEach(iot),e.p=null}function _U(e){e===hA&&(hA=e.l)}function wue(e){return hA={p:[],l:hA,h:e,m:!0,_:0}}function iot(e){var t=e[Ei];t.i===0||t.i===1?t.j():t.g=!0}function s9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||mh("ES5").S(t,e,r),r?(n[Ei].P&&(OD(t),Cf(4)),Im(e)&&(e=DD(t,e),t.l||$D(t,e)),t.u&&mh("Patches").M(n[Ei].t,e,t.u,t.s)):e=DD(t,n,[]),OD(t),t.u&&t.v(t.u,t.s),e!==Ixe?e:void 0}function DD(e,t,n){if(YY(t))return t;var r=t[Ei];if(!r)return U1(t,function(a,u){return Eue(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return $D(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=WY(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),U1(s,function(a,u){return Eue(e,r,i,a,u,n,o)}),$D(e,i,!1),n&&e.u&&mh("Patches").N(r,n,e.u,e.s)}return r.o}function Eue(e,t,n,r,i,s,o){if(W0(i)){var a=DD(e,i,s&&t&&t.i!==3&&!Lw(t.R,r)?s.concat(r):void 0);if(Cxe(n,r,a),!W0(a))return;e.m=!1}else o&&n.add(i);if(Im(i)&&!YY(i)){if(!e.h.D&&e._<1)return;DD(e,i),t&&t.A.l||$D(e,i)}}function $D(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&GY(t,n)}function o9(e,t){var n=e[Ei];return(n?Sv(n):e)[t]}function xue(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Kg(e){e.P||(e.P=!0,e.l&&Kg(e.l))}function a9(e){e.o||(e.o=WY(e.t))}function wU(e,t,n){var r=HY(t)?mh("MapSet").F(t,n):qY(t)?mh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:bU(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=pA;o&&(u=[a],l=iC);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):mh("ES5").J(t,n);return(n?n.A:bU()).p.push(r),r}function sot(e){return W0(e)||Cf(22,e),function t(n){if(!Im(n))return n;var r,i=n[Ei],s=Jx(n);if(i){if(!i.P&&(i.i<4||!mh("ES5").K(i)))return i.t;i.I=!0,r=Sue(n,s),i.I=!1}else r=Sue(n,s);return U1(r,function(o,a){i&&tot(i.t,o)===a||Cxe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Sue(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return WY(e)}function oot(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[Ei];return pA.get(u,s)},set:function(u){var l=this[Ei];pA.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Ei];if(!a.P)switch(a.i){case 5:r(a)&&Kg(a);break;case 4:n(a)&&Kg(a)}}}function n(s){for(var o=s.t,a=s.k,u=Fw(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Ei){var f=o[c];if(f===void 0&&!Lw(o,c))return!0;var d=a[c],h=d&&d[Ei];if(h?h.t!==f:!Axe(d,f))return!0}}var p=!!o[Ei];return u.length!==Fw(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};rot("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=kxe(f);delete p[Ei];for(var m=Fw(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:bU(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,Ei,{value:l,writable:!0}),u},S:function(s,o,a){a?W0(o)&&o[Ei].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[Ei];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)U1(d,function(b){b!==Ei&&(f[b]!==void 0||Lw(f,b)?h[b]||u(d[b]):(h[b]=!0,Kg(c)))}),U1(f,function(b){d[b]!==void 0||Lw(d,b)||(h[b]=!1,Kg(c))});else if(p===5){if(r(c)&&(Kg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Tue,hA,KY=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",aot=typeof Map<"u",uot=typeof Set<"u",Cue=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Ixe=KY?Symbol.for("immer-nothing"):((Tue={})["immer-nothing"]=!0,Tue),Aue=KY?Symbol.for("immer-draftable"):"__$immer_draftable",Ei=KY?Symbol.for("immer-state"):"__$immer_state",lot=""+Object.prototype.constructor,Fw=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,kxe=Object.getOwnPropertyDescriptors||function(e){var t={};return Fw(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},EU={},pA={get:function(e,t){if(t===Ei)return e;var n=Sv(e);if(!Lw(n,t))return function(i,s,o){var a,u=xue(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Im(r)?r:r===o9(e.t,t)?(a9(e),e.o[t]=wU(e.A.h,r,e)):r},has:function(e,t){return t in Sv(e)},ownKeys:function(e){return Reflect.ownKeys(Sv(e))},set:function(e,t,n){var r=xue(Sv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=o9(Sv(e),t),s=i==null?void 0:i[Ei];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Axe(n,i)&&(n!==void 0||Lw(e.t,t)))return!0;a9(e),Kg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return o9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,a9(e),Kg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Sv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Cf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Cf(12)}},iC={};U1(pA,function(e,t){iC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),iC.deleteProperty=function(e,t){return iC.set.call(this,e,t,void 0)},iC.set=function(e,t,n){return pA.set.call(this,e[0],t,n,e[0])};var cot=function(){function e(n){var r=this;this.O=Cue,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(_){var x;return(x=s).call.apply(x,[g,_].concat(v))})}}var l;if(typeof s!="function"&&Cf(6),o!==void 0&&typeof o!="function"&&Cf(7),Im(i)){var c=wue(r),f=wU(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?OD(c):_U(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return i9(c,o),s9(m,c)},function(m){throw OD(c),m}):(i9(c,o),s9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Ixe&&(l=void 0),r.D&&GY(l,!0),o){var h=[],p=[];mh("Patches").M(i,l,h,p),o(h,p)}return l}Cf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Im(n)||Cf(8),W0(n)&&(n=sot(n));var r=wue(this),i=wU(this,n,void 0);return i[Ei].C=!0,_U(r),i},t.finishDraft=function(n,r){var i=n&&n[Ei],s=i.A;return i9(s,r),s9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Cue&&Cf(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=mh("Patches").$;return W0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),$l=new cot,fot=$l.produce;$l.produceWithPatches.bind($l);$l.setAutoFreeze.bind($l);$l.setUseProxies.bind($l);$l.applyPatches.bind($l);$l.createDraft.bind($l);$l.finishDraft.bind($l);const Rxe=fot;function mA(e){"@babel/helpers - typeof";return mA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mA(e)}function dot(e,t){if(mA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(mA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hot(e){var t=dot(e,"string");return mA(t)=="symbol"?t:t+""}function pot(e,t,n){return(t=hot(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Iue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function kue(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Iue(Object(n),!0).forEach(function(r){pot(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iue(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ua(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Rue=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),u9=function(){return Math.random().toString(36).substring(7).split("").join(".")},MD={INIT:"@@redux/INIT"+u9(),REPLACE:"@@redux/REPLACE"+u9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+u9()}};function mot(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Nxe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ua(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ua(1));return n(Nxe)(e,t)}if(typeof e!="function")throw new Error(ua(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(ua(3));return s}function f(m){if(typeof m!="function")throw new Error(ua(4));if(u)throw new Error(ua(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(ua(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!mot(m))throw new Error(ua(7));if(typeof m.type>"u")throw new Error(ua(8));if(u)throw new Error(ua(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(ua(10));i=m,d({type:MD.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(ua(11));function b(){v.next&&v.next(c())}b();var _=g(b);return{unsubscribe:_}}},m[Rue]=function(){return this},m}return d({type:MD.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Rue]=p,r}function got(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:MD.INIT});if(typeof r>"u")throw new Error(ua(12));if(typeof n(void 0,{type:MD.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ua(13))})}function yot(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{got(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(ua(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function LD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function vot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(ua(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=LD.apply(void 0,a)(i.dispatch),kue(kue({},i),{},{dispatch:s})}}}function Pxe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var xU=Pxe();xU.withExtraArgument=Pxe;var Oxe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),XI=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},z1=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},bot=Object.defineProperty,_ot=Object.defineProperties,wot=Object.getOwnPropertyDescriptors,Nue=Object.getOwnPropertySymbols,Eot=Object.prototype.hasOwnProperty,xot=Object.prototype.propertyIsEnumerable,Pue=function(e,t,n){return t in e?bot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},A0=function(e,t){for(var n in t||(t={}))Eot.call(t,n)&&Pue(e,n,t[n]);if(Nue)for(var r=0,i=Nue(t);r<i.length;r++){var n=i[r];xot.call(t,n)&&Pue(e,n,t[n])}return e},l9=function(e,t){return _ot(e,wot(t))},QI=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},Sot=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?LD:LD.apply(null,arguments)};function Dxe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var Tot=function(e){return e&&typeof e.match=="function"};function gh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return A0(A0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function Cot(e){return Dxe(e)&&"type"in e}var Aot=function(e){Oxe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,z1([void 0],n[0].concat(this)))):new(t.bind.apply(t,z1([void 0],n.concat(this))))},t}(Array),Iot=function(e){Oxe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,z1([void 0],n[0].concat(this)))):new(t.bind.apply(t,z1([void 0],n.concat(this))))},t}(Array);function SU(e){return Im(e)?Rxe(e,function(){}):e}function kot(e){return typeof e=="boolean"}function Rot(){return function(t){return Not(t)}}function Not(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new Aot;return n&&(kot(n)?r.push(xU):r.push(xU.withExtraArgument(n.extraArgument))),r}var Pot=!0;function $xe(e){var t=Rot(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(Dxe(i))h=yot(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=vot.apply(void 0,p),g=LD;u&&(g=Sot(A0({trace:!Pot},typeof u=="object"&&u)));var y=new Iot(m),v=y;Array.isArray(d)?v=z1([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return Nxe(h,c,b)}function Mxe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function Oot(e){return typeof e=="function"}function Dot(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?Mxe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(Oot(e))u=function(){return SU(e())};else{var l=SU(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=z1([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(W0(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Im(p))return Rxe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function $ot(e,t){return e+"/"+t}function Lxe(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:SU(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=$ot(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?gh(d,p):gh(d)});function u(){var c=typeof e.extraReducers=="function"?Mxe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=A0(A0({},d),o);return Dot(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var _=0,x=p;_<x.length;_++){var S=x[_];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var Mot="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Fxe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=Mot[Math.random()*64|0];return t},Lot=["name","message","stack","code"],c9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Oue=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Fot=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=Lot;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=gh(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:l9(A0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=gh(t+"/pending",function(l,c,f){return{payload:void 0,meta:l9(A0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=gh(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||Fot)(l||"Rejected"),meta:l9(A0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):Fxe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return QI(this,null,function(){var v,b,_,x,S,E,T;return XI(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),x=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),Bot(x)?[4,x]:[3,2];case 1:x=A.sent(),A.label=2;case 2:if(x===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(k,R){return p.signal.addEventListener("abort",function(){return R({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(k,R){return new c9(k,R)},fulfillWithValue:function(k,R){return new Oue(k,R)}})).then(function(k){if(k instanceof c9)throw k;return k instanceof Oue?i(k.payload,h,l,k.meta):i(k,h,l)})])];case 3:return _=A.sent(),[3,5];case 4:return E=A.sent(),_=E instanceof c9?o(null,h,l,E.payload,E.meta):o(E,h,l),[3,5];case 5:return T=r&&!r.dispatchConditionRejection&&o.match(_)&&_.meta.condition,T||c(_),[2,_]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(jot)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function jot(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Bot(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Uot=function(e,t){return Tot(e)?e.match(t):e(t)};function Due(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return Uot(r,n)})}}var XY=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},TU=function(){},jxe=function(e,t){return t===void 0&&(t=TU),e.catch(t),e},Bxe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},jw=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},zot="task",Uxe="listener",zxe="completed",QY="cancelled",Vot="task-"+QY,Hot="task-"+zxe,Vxe=Uxe+"-"+QY,qot=Uxe+"-"+zxe,p6=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=zot+" "+QY+" (reason: "+t+")"}return e}(),Bw=function(e){if(e.aborted)throw new p6(e.reason)};function Hxe(e,t){var n=TU;return new Promise(function(r,i){var s=function(){return i(new p6(e.reason))};if(e.aborted){s();return}n=Bxe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=TU})}var Wot=function(e,t){return QI(void 0,null,function(){var n,r;return XI(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof p6?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},FD=function(e){return function(t){return jxe(Hxe(e,t).then(function(n){return Bw(e),n}))}},qxe=function(e){var t=FD(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},Got=Object.assign,$ue={},JI="listenerMiddleware",Yot=function(e,t){var n=function(r){return Bxe(e,function(){return jw(r,e.reason)})};return function(r,i){XY(r,"taskExecutor");var s=new AbortController;n(s);var o=Wot(function(){return QI(void 0,null,function(){var a;return XI(this,function(u){switch(u.label){case 0:return Bw(e),Bw(s.signal),[4,r({pause:FD(s.signal),delay:qxe(s.signal),signal:s.signal})];case 1:return a=u.sent(),Bw(s.signal),[2,a]}})})},function(){return jw(s,Hot)});return i!=null&&i.autoJoin&&t.push(o),{result:FD(e)(o),cancel:function(){jw(s,Vot)}}}},Kot=function(e,t){var n=function(r,i){return QI(void 0,null,function(){var s,o,a,u;return XI(this,function(l){switch(l.label){case 0:Bw(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,Hxe(t,Promise.race(a))];case 2:return u=l.sent(),Bw(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return jxe(n(r,i))}},Wxe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=gh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return XY(s,"options.listener"),{predicate:i,type:t,effect:s}},Xot=function(e){var t=Wxe(e),n=t.type,r=t.predicate,i=t.effect,s=Fxe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},CU=function(e){e.pending.forEach(function(t){jw(t,Vxe)})},Qot=function(e){return function(){e.forEach(CU),e.clear()}},Mue=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},Jot=gh(JI+"/add"),Zot=gh(JI+"/removeAll"),eat=gh(JI+"/remove"),tat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,z1([JI+"/error"],e))};function nat(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?tat:i;XY(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&CU(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=Xot(h)),o(p)},l=function(h){var p=Wxe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var _=typeof m=="string"?b.type===m:b.predicate===y;return _&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&CU(v)),!!v},c=function(h,p,m,g){return QI(t,null,function(){var y,v,b,_;return XI(this,function(x){switch(x.label){case 0:y=new AbortController,v=Kot(u,y.signal),b=[],x.label=1;case 1:return x.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,Got({},m,{getOriginalState:g,condition:function(S,E){return v(S,E).then(Boolean)},take:v,delay:qxe(y.signal),pause:FD(y.signal),extra:r,signal:y.signal,fork:Yot(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,E,T){S!==y&&(jw(S,Vxe),T.delete(S))})}})))];case 2:return x.sent(),[3,6];case 3:return _=x.sent(),_ instanceof p6||Mue(s,_,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return x.sent(),jw(y,qot),h.pending.delete(y),[7];case 6:return[2]}})})},f=Qot(n),d=function(h){return function(p){return function(m){if(!Cot(m))return p(m);if(Jot.match(m))return u(m.payload);if(Zot.match(m)){f();return}if(eat.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===$ue)throw new Error(JI+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),_=Array.from(n.values()),x=0,S=_;x<S.length;x++){var E=S[x],T=!1;try{T=E.predicate(m,b,g)}catch(A){T=!1,Mue(s,A,{raisedBy:"predicate"})}T&&c(E,m,h,y)}}finally{g=$ue}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Lue;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);oot();var di={};function rat(e){return!!(e&&typeof e.then=="function")}function jD(e){return e||(e=0),new Promise(function(t){return setTimeout(t,e)})}function iat(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function m6(){return Math.random().toString(36).substring(2)}var Fue=0,f9=0;function g6(){var e=new Date().getTime();return e===Fue?(f9++,e*1e3+f9):(Fue=e,f9=0,e*1e3)}var ZI=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",sat=g6,oat="native";function aat(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(n){t.messagesCallback&&t.messagesCallback(n.data)},t}function uat(e){e.bc.close(),e.subFns=[]}function lat(e,t){try{return e.bc.postMessage(t,!1),Promise.resolve()}catch(n){return Promise.reject(n)}}function cat(e,t){e.messagesCallback=t}function fat(){if(ZI&&typeof window>"u")return!1;if(typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function dat(){return 150}const hat={create:aat,close:uat,onMessage:cat,postMessage:lat,canBeUsed:fat,type:oat,averageResponseTime:dat,microSeconds:sat};var Gxe=function(){function e(t){this.ttl=t,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(t){return this.set.has(t)},e.prototype.add=function(t){var n=this;this.timeMap.set(t,Yxe()),this.set.add(t),setTimeout(function(){pat(n)},0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function pat(e){for(var t=Yxe()-e.ttl,n=e.set[Symbol.iterator]();;){var r=n.next().value;if(!r)return;var i=e.timeMap.get(r);if(i<t)e.timeMap.delete(r),e.set.delete(r);else return}}function Yxe(){return new Date().getTime()}function y6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return typeof t.webWorkerSupport>"u"&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&typeof e.idb.onclose=="function"&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=1e3*60*2),typeof t.node.useFastPath>"u"&&(t.node.useFastPath=!0),t}var mat=g6,gat="pubkey.broadcast-channel-0-",km="messages",yat="idb";function Kxe(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function vat(e){var t=Kxe(),n=gat+e,r=t.open(n,1);r.onupgradeneeded=function(s){var o=s.target.result;o.createObjectStore(km,{keyPath:"id",autoIncrement:!0})};var i=new Promise(function(s,o){r.onerror=function(a){return o(a)},r.onsuccess=function(){s(r.result)}});return i}function bat(e,t,n){var r=new Date().getTime(),i={uuid:t,time:r,data:n},s=e.transaction([km],"readwrite");return new Promise(function(o,a){s.oncomplete=function(){return o()},s.onerror=function(l){return a(l)};var u=s.objectStore(km);u.add(i)})}function _at(e,t){var n=e.transaction(km).objectStore(km),r=[];function i(){try{var s=IDBKeyRange.bound(t+1,1/0);return n.openCursor(s)}catch{return n.openCursor()}}return new Promise(function(s){i().onsuccess=function(o){var a=o.target.result;a?a.value.id<t+1?a.continue(t+1):(r.push(a.value),a.continue()):s(r)}})}function wat(e,t){var n=e.transaction([km],"readwrite").objectStore(km).delete(t);return new Promise(function(r){n.onsuccess=function(){return r()}})}function Eat(e,t){var n=new Date().getTime()-t,r=e.transaction(km).objectStore(km),i=[];return new Promise(function(s){r.openCursor().onsuccess=function(o){var a=o.target.result;if(a){var u=a.value;if(u.time<n)i.push(u),a.continue();else{s(i);return}}else s(i)}})}function xat(e,t){return Eat(e,t).then(function(n){return Promise.all(n.map(function(r){return wat(e,r.id)}))})}function Sat(e,t){return t=y6(t),vat(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:m6(),eMIs:new Gxe(t.idb.ttl*2),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},Xxe(r),r})}function Xxe(e){e.closed||Qxe(e).then(function(){return jD(e.options.idb.fallbackInterval)}).then(function(){return Xxe(e)})}function Tat(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}function Qxe(e){return e.closed||!e.messagesCallback?Promise.resolve():_at(e.db,e.lastCursorId).then(function(t){var n=t.filter(function(r){return!!r}).map(function(r){return r.id>e.lastCursorId&&(e.lastCursorId=r.id),r}).filter(function(r){return Tat(r,e)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){e.messagesCallback&&(e.eMIs.add(r.id),e.messagesCallback(r.data))}),Promise.resolve()})}function Cat(e){e.closed=!0,e.db.close()}function Aat(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return bat(e.db,e.uuid,t)}).then(function(){iat(0,10)===0&&xat(e.db,e.options.idb.ttl)}),e.writeBlockPromise}function Iat(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,Qxe(e)}function kat(){if(ZI)return!1;var e=Kxe();return!!e}function Rat(e){return e.idb.fallbackInterval*2}const Nat={create:Sat,close:Cat,onMessage:Iat,postMessage:Aat,canBeUsed:kat,type:yat,averageResponseTime:Rat,microSeconds:mat};var Pat=g6,Oat="pubkey.broadcastChannel-",Dat="localstorage";function Jxe(){var e;if(typeof window>"u")return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function Zxe(e){return Oat+e}function $at(e,t){return new Promise(function(n){jD().then(function(){var r=Zxe(e.channelName),i={token:m6(),time:new Date().getTime(),data:t,uuid:e.uuid},s=JSON.stringify(i);Jxe().setItem(r,s);var o=document.createEvent("Event");o.initEvent("storage",!0,!0),o.key=r,o.newValue=s,window.dispatchEvent(o),n()})})}function Mat(e,t){var n=Zxe(e),r=function(s){s.key===n&&t(JSON.parse(s.newValue))};return window.addEventListener("storage",r),r}function Lat(e){window.removeEventListener("storage",e)}function Fat(e,t){if(t=y6(t),!eSe())throw new Error("BroadcastChannel: localstorage cannot be used");var n=m6(),r=new Gxe(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=Mat(e,function(s){i.messagesCallback&&s.uuid!==n&&(!s.token||r.has(s.token)||s.data.time&&s.data.time<i.messagesCallbackTime||(r.add(s.token),i.messagesCallback(s.data)))}),i}function jat(e){Lat(e.listener)}function Bat(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function eSe(){if(ZI)return!1;var e=Jxe();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}function Uat(){var e=120,t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?e*2:e}const zat={create:Fat,close:jat,onMessage:Bat,postMessage:$at,canBeUsed:eSe,type:Dat,averageResponseTime:Uat,microSeconds:Pat};var Vat=g6,Hat="simulate",JY=new Set;function qat(e){var t={name:e,messagesCallback:null};return JY.add(t),t}function Wat(e){JY.delete(e)}function Gat(e,t){return new Promise(function(n){return setTimeout(function(){var r=Array.from(JY);r.filter(function(i){return i.name===e.name}).filter(function(i){return i!==e}).filter(function(i){return!!i.messagesCallback}).forEach(function(i){return i.messagesCallback(t)}),n()},5)})}function Yat(e,t){e.messagesCallback=t}function Kat(){return!0}function Xat(){return 5}const Qat={create:qat,close:Wat,onMessage:Yat,postMessage:Gat,canBeUsed:Kat,type:Hat,averageResponseTime:Xat,microSeconds:Vat};var AU=[hat,Nat,zat];if(ZI){var jue=require("../../src/methods/node.js");typeof jue.canBeUsed=="function"&&AU.push(jue)}function tSe(e){var t=[].concat(e.methods,AU).filter(Boolean);if(e.type){if(e.type==="simulate")return Qat;var n=t.find(function(i){return i.type===e.type});if(n)return n;throw new Error("method-type "+e.type+" not found")}!e.webWorkerSupport&&!ZI&&(t=t.filter(function(i){return i.type!=="idb"}));var r=t.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No useable methode found:"+JSON.stringify(AU.map(function(i){return i.type})))}var ZY=function(t,n){this.name=t,IU&&(n=IU),this.options=y6(n),this.method=tSe(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,eut(this)};ZY._pubkey=!0;function Jat(e){e=y6(e);var t=tSe(e);return t.type==="node"?t.clearNodeFolder().then(function(){return!0}):Promise.resolve(!1)}var IU;function Zat(e){IU=e}ZY.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return Bue(this,"message",t)},postInternal:function(t){return Bue(this,"internal",t)},set onmessage(e){var t=this.method.microSeconds(),n={time:t,fn:e};zue(this,"message",this._onML),e&&typeof e=="function"?(this._onML=n,Uue(this,"message",n)):this._onML=null},addEventListener:function(t,n){var r=this.method.microSeconds(),i={time:r,fn:n};Uue(this,t,i)},removeEventListener:function(t,n){var r=this._addEL[t].find(function(i){return i.fn===n});zue(this,t,r)},close:function(){var t=this;if(!this.closed){this.closed=!0;var n=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(r){return r()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function Bue(e,t,n){var r=e.method.microSeconds(),i={time:r,type:t,data:n},s=e._prepP?e._prepP:Promise.resolve();return s.then(function(){var o=e.method.postMessage(e._state,i);return e._uMP.add(o),o.catch().then(function(){return e._uMP.delete(o)}),o})}function eut(e){var t=e.method.create(e.name,e.options);rat(t)?(e._prepP=t,t.then(function(n){e._state=n})):e._state=t}function nSe(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function Uue(e,t,n){e._addEL[t].push(n),tut(e)}function zue(e,t,n){e._addEL[t]=e._addEL[t].filter(function(r){return r!==n}),nut(e)}function tut(e){if(!e._iL&&nSe(e)){var t=function(i){e._addEL[i.type].forEach(function(s){i.time>=s.time&&s.fn(i.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}function nut(e){if(e._iL&&!nSe(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}const rut=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";function iut(e){if(!(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope)){if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){e()},!0),window.addEventListener("unload",function(){e()},!0)}}const sut={add:iut},rSe={},out=Object.freeze(Object.defineProperty({__proto__:null,default:rSe},Symbol.toStringTag,{value:"Module"}));var aut=rut?rSe:sut,_1=new Set,Vue=!1;function uut(){Vue||(Vue=!0,aut.add(iSe))}function lut(e){if(uut(),typeof e!="function")throw new Error("Listener is no function");_1.add(e);var t={remove:function(){return _1.delete(e)},run:function(){return _1.delete(e),e()}};return t}function iSe(){var e=[];return _1.forEach(function(t){e.push(t()),_1.delete(t)}),Promise.all(e)}function cut(){_1.clear()}function fut(){return _1.size}const dut={add:lut,runAll:iSe,removeAll:cut,getSize:fut};var sSe=function(t,n){this._channel=t,this._options=n,this.isLeader=!1,this.isDead=!1,this.token=m6(),this._isApl=!1,this._reApply=!1,this._unl=[],this._lstns=[],this._invs=[],this._dpL=function(){},this._dpLC=!1};sSe.prototype={applyOnce:function(){var t=this;if(this.isLeader||this.isDead)return Promise.resolve(!1);if(this._isApl)return this._reApply=!0,Promise.resolve(!1);this._isApl=!0;var n=!1,r=function(o){o.context==="leader"&&o.token!=t.token&&(o.action==="apply"&&o.token>t.token&&(n=!0),o.action==="tell"&&(n=!0))};this._channel.addEventListener("internal",r);var i=t1(this,"apply").then(function(){return jD(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):t1(t,"apply")}).then(function(){return jD(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):t1(t)}).then(function(){return oSe(t)}).then(function(){return!0}).catch(function(){return!1}).then(function(s){return t._channel.removeEventListener("internal",r),t._isApl=!1,!s&&t._reApply?(t._reApply=!1,t.applyOnce()):s});return i},awaitLeadership:function(){return this._aLP||(this._aLP=hut(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var t=this;if(!this.isDead)return this.isDead=!0,this._lstns.forEach(function(n){return t._channel.removeEventListener("internal",n)}),this._invs.forEach(function(n){return clearInterval(n)}),this._unl.forEach(function(n){n.remove()}),t1(this,"death")}};function hut(e){return e.isLeader?Promise.resolve():new Promise(function(t){var n=!1;function r(){n||(n=!0,clearInterval(i),e._channel.removeEventListener("internal",s),t(!0))}e.applyOnce().then(function(){e.isLeader&&r()});var i=setInterval(function(){e.applyOnce().then(function(){e.isLeader&&r()})},e._options.fallbackInterval);e._invs.push(i);var s=function(a){a.context==="leader"&&a.action==="death"&&e.applyOnce().then(function(){e.isLeader&&r()})};e._channel.addEventListener("internal",s),e._lstns.push(s)})}function t1(e,t){var n={context:"leader",action:t,token:e.token};return e._channel.postInternal(n)}function oSe(e){e.isLeader=!0;var t=dut.add(function(){return e.die()});e._unl.push(t);var n=function(i){i.context==="leader"&&i.action==="apply"&&t1(e,"tell"),i.context==="leader"&&i.action==="tell"&&!e._dpLC&&(e._dpLC=!0,e._dpL(),t1(e,"tell"))};return e._channel.addEventListener("internal",n),e._lstns.push(n),t1(e,"tell")}function put(e,t){return e||(e={}),e=JSON.parse(JSON.stringify(e)),e.fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}function mut(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=put(t,e);var n=new sSe(e,t);return e._befC.push(function(){return n.die()}),e._leaderElector=n,n}const gut=Object.freeze(Object.defineProperty({__proto__:null,BroadcastChannel:ZY,beLeader:oSe,clearNodeFolder:Jat,createLeaderElection:mut,enforceOptions:Zat},Symbol.toStringTag,{value:"Module"})),yut=mye(gut);var eK,tK;Object.defineProperty(di,"__esModule",{value:!0});di.initMessageListener=tK=di.initStateWithPrevTab=di.withReduxStateSync=di.createReduxStateSync=eK=di.createStateSyncMiddleware=di.WINDOW_STATE_SYNC_ID=di.INIT_MESSAGE_LISTENER=di.RECEIVE_INIT_STATE=di.SEND_INIT_STATE=di.GET_INIT_STATE=void 0;di.generateUuidForAction=lSe;di.isActionAllowed=cSe;di.isActionSynced=Sut;di.MessageListener=fSe;var vut=yut,kU=0,nK=di.GET_INIT_STATE="&_GET_INIT_STATE",rK=di.SEND_INIT_STATE="&_SEND_INIT_STATE",iK=di.RECEIVE_INIT_STATE="&_RECEIVE_INIT_STATE",but=di.INIT_MESSAGE_LISTENER="&_INIT_MESSAGE_LISTENER",RU={channel:"redux_state_sync",predicate:null,blacklist:[],whitelist:[],broadcastChannelOption:void 0,prepareState:function(t){return t},receiveState:function(t,n){return n}},_ut=function(){return{type:nK}},wut=function(){return{type:rK}},Eut=function(t){return{type:iK,payload:t}},xut=function(){return{type:but}};function _g(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function aSe(){return""+_g()+_g()+"-"+_g()+"-"+_g()+"-"+_g()+"-"+_g()+_g()+_g()}var uSe=di.WINDOW_STATE_SYNC_ID=aSe();function lSe(e){var t=e;return t.$uuid=aSe(),t.$wuid=uSe,t}function cSe(e){var t=e.predicate,n=e.blacklist,r=e.whitelist,i=function(){return!0};return t&&typeof t=="function"?i=t:Array.isArray(n)?i=function(o){return n.indexOf(o.type)<0}:Array.isArray(r)&&(i=function(o){return r.indexOf(o.type)>=0}),i}function Sut(e){return!!e.$isSync}function fSe(e){var t=e.channel,n=e.dispatch,r=e.allowed,i=!1,s={};this.handleOnMessage=function(o){o.$wuid!==uSe&&o.type!==iK&&o.$uuid&&o.$uuid!==kU&&(o.type===nK&&!s[o.$wuid]?(s[o.$wuid]=!0,n(wut())):o.type===rK&&!s[o.$wuid]?i||(i=!0,n(Eut(o.payload))):r(o)&&(kU=o.$uuid,n(Object.assign(o,{$isSync:!0}))))},this.messageChannel=t,this.messageChannel.onmessage=this.handleOnMessage}eK=di.createStateSyncMiddleware=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:RU,n=cSe(t),r=new vut.BroadcastChannel(t.channel,t.broadcastChannelOption),i=t.prepareState||RU.prepareState,s=null;return function(o){var a=o.getState,u=o.dispatch;return function(l){return function(c){if(s||(s=new fSe({channel:r,dispatch:u,allowed:n})),c&&!c.$uuid){var f=lSe(c);kU=f.$uuid;try{if(c.type===rK)return a()&&(f.payload=i(a()),r.postMessage(f)),l(c);(n(f)||c.type===nK)&&r.postMessage(f)}catch{console.error("Your browser doesn't support cross tab communication")}}return l(Object.assign(c,{$isSync:typeof c.$isSync>"u"?!1:c.$isSync}))}}}};var Tut=di.createReduxStateSync=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:RU.receiveState;return function(r,i){var s=r;return i.type===iK&&(s=n(r,i.payload)),t(s,i)}};di.withReduxStateSync=Tut;tK=di.initStateWithPrevTab=function(t){var n=t.dispatch;n(_ut())};di.initMessageListener=function(t){var n=t.dispatch;n(xut())};function Cc(e){return Array.isArray(e)?e:e.components.flatMap(t=>typeof t=="string"?t:Cc(t))}function dSe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Cc(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Cc(e).length-1}];r+=1}else{const o=dSe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function hSe(e,t){const n=dSe(e,t,0);return typeof n=="number"?null:n}function pSe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=pSe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Cut(e,t){const n=pSe(e,t,0);return n.found?n.distance:-1}function mSe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...mSe(i,`${t}-${s}`))}),n}async function Aut(e,t,n,r,i,s){const o=Cc(n),a={...o.map(p=>({[p]:{}}))},u=Object.assign({},...o.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...o.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),c={studyId:e,answers:i||a,isRecording:!1,sequence:n,config:t,showStudyBrowser:s,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:u,iframeAnswers:{},iframeProvenance:null,metadata:r,analysisTrialName:null,analysisProvState:null},f=Lxe({name:"storeSlice",initialState:c,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setIframeAnswers:(p,m)=>{p.iframeAnswers=m.payload},setAnalysisTrialName:(p,m)=>{p.analysisTrialName=m.payload},setIframeProvenance:(p,m)=>{p.iframeProvenance=m.payload},updateResponseBlockValidation:(p,{payload:m})=>{p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),p.trialValidation[m.identifier][m.location]={valid:m.status,values:m.values},m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},saveTrialAnswer(p,{payload:m}){const{identifier:g,answer:y,startTime:v,endTime:b,provenanceGraph:_,windowEvents:x}=m;p.answers[g]={answer:y,startTime:v,endTime:b,provenanceGraph:_,windowEvents:x}}}}),d=[eK({})],h=$xe({reducer:f.reducer,preloadedState:c,middleware:d});return tK(h),{store:h,actions:f.actions}}const gSe=I.createContext(null);function Ml(){return I.useContext(gSe).actions}const Dc=Txe,Uo=Lst;function Iut(e){return Uo(t=>{const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function eg(){return Uo(e=>Cc(e.sequence))}var BD={exports:{}};BD.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",_="[object RegExp]",x="[object Set]",S="[object String]",E="[object Undefined]",T="[object WeakMap]",A="[object ArrayBuffer]",k="[object DataView]",R="[object Float32Array]",$="[object Float64Array]",P="[object Int8Array]",O="[object Int16Array]",M="[object Int32Array]",j="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",V="[object Uint32Array]",D=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,F={};F[R]=F[$]=F[P]=F[O]=F[M]=F[j]=F[B]=F[U]=F[V]=!0,F[a]=F[u]=F[A]=F[c]=F[k]=F[f]=F[d]=F[h]=F[m]=F[g]=F[v]=F[_]=F[x]=F[S]=F[T]=!1;var H=typeof ko=="object"&&ko&&ko.Object===Object&&ko,G=typeof self=="object"&&self&&self.Object===Object&&self,ee=H||G||Function("return this")(),le=t&&!t.nodeType&&t,de=le&&!0&&e&&!e.nodeType&&e,he=de&&de.exports===le,ye=he&&H.process,Ce=function(){try{var ne=de&&de.require&&de.require("util").types;return ne||ye&&ye.binding&&ye.binding("util")}catch{}}(),ve=Ce&&Ce.isTypedArray;function Ye(ne,ue,ke){switch(ke.length){case 0:return ne.call(ue);case 1:return ne.call(ue,ke[0]);case 2:return ne.call(ue,ke[0],ke[1]);case 3:return ne.call(ue,ke[0],ke[1],ke[2])}return ne.apply(ue,ke)}function Ue(ne,ue){for(var ke=-1,At=Array(ne);++ke<ne;)At[ke]=ue(ke);return At}function pt(ne){return function(ue){return ne(ue)}}function rt(ne,ue){return ne==null?void 0:ne[ue]}function be(ne,ue){return function(ke){return ne(ue(ke))}}var Ae=Array.prototype,Ve=Function.prototype,ut=Object.prototype,Nt=ee["__core-js_shared__"],qe=Ve.toString,me=ut.hasOwnProperty,ct=function(){var ne=/[^.]+$/.exec(Nt&&Nt.keys&&Nt.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),gt=ut.toString,wt=qe.call(Object),pe=RegExp("^"+qe.call(me).replace(D,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=he?ee.Buffer:void 0,Ke=ee.Symbol,yt=ee.Uint8Array;Ie&&Ie.allocUnsafe;var Vt=be(Object.getPrototypeOf,Object),er=Object.create,Vn=ut.propertyIsEnumerable,$n=Ae.splice,gn=Ke?Ke.toStringTag:void 0,gr=function(){try{var ne=He(Object,"defineProperty");return ne({},"",{}),ne}catch{}}(),Qt=Ie?Ie.isBuffer:void 0,qr=Math.max,Zr=Date.now,ji=He(ee,"Map"),Cn=He(Object,"create"),Bi=function(){function ne(){}return function(ue){if(!xp(ue))return{};if(er)return er(ue);ne.prototype=ue;var ke=new ne;return ne.prototype=void 0,ke}}();function Tr(ne){var ue=-1,ke=ne==null?0:ne.length;for(this.clear();++ue<ke;){var At=ne[ue];this.set(At[0],At[1])}}function gs(){this.__data__=Cn?Cn(null):{},this.size=0}function bp(ne){var ue=this.has(ne)&&delete this.__data__[ne];return this.size-=ue?1:0,ue}function ol(ne){var ue=this.__data__;if(Cn){var ke=ue[ne];return ke===r?void 0:ke}return me.call(ue,ne)?ue[ne]:void 0}function _d(ne){var ue=this.__data__;return Cn?ue[ne]!==void 0:me.call(ue,ne)}function wr(ne,ue){var ke=this.__data__;return this.size+=this.has(ne)?0:1,ke[ne]=Cn&&ue===void 0?r:ue,this}Tr.prototype.clear=gs,Tr.prototype.delete=bp,Tr.prototype.get=ol,Tr.prototype.has=_d,Tr.prototype.set=wr;function ki(ne){var ue=-1,ke=ne==null?0:ne.length;for(this.clear();++ue<ke;){var At=ne[ue];this.set(At[0],At[1])}}function ei(){this.__data__=[],this.size=0}function cu(ne){var ue=this.__data__,ke=Kn(ue,ne);if(ke<0)return!1;var At=ue.length-1;return ke==At?ue.pop():$n.call(ue,ke,1),--this.size,!0}function Ra(ne){var ue=this.__data__,ke=Kn(ue,ne);return ke<0?void 0:ue[ke][1]}function Na(ne){return Kn(this.__data__,ne)>-1}function oe(ne,ue){var ke=this.__data__,At=Kn(ke,ne);return At<0?(++this.size,ke.push([ne,ue])):ke[At][1]=ue,this}ki.prototype.clear=ei,ki.prototype.delete=cu,ki.prototype.get=Ra,ki.prototype.has=Na,ki.prototype.set=oe;function te(ne){var ue=-1,ke=ne==null?0:ne.length;for(this.clear();++ue<ke;){var At=ne[ue];this.set(At[0],At[1])}}function ae(){this.size=0,this.__data__={hash:new Tr,map:new(ji||ki),string:new Tr}}function Te(ne){var ue=ze(this,ne).delete(ne);return this.size-=ue?1:0,ue}function Se(ne){return ze(this,ne).get(ne)}function st(ne){return ze(this,ne).has(ne)}function St(ne,ue){var ke=ze(this,ne),At=ke.size;return ke.set(ne,ue),this.size+=ke.size==At?0:1,this}te.prototype.clear=ae,te.prototype.delete=Te,te.prototype.get=Se,te.prototype.has=st,te.prototype.set=St;function qt(ne){var ue=this.__data__=new ki(ne);this.size=ue.size}function Pn(){this.__data__=new ki,this.size=0}function Mn(ne){var ue=this.__data__,ke=ue.delete(ne);return this.size=ue.size,ke}function pn(ne){return this.__data__.get(ne)}function tr(ne){return this.__data__.has(ne)}function Cr(ne,ue){var ke=this.__data__;if(ke instanceof ki){var At=ke.__data__;if(!ji||At.length<n-1)return At.push([ne,ue]),this.size=++ke.size,this;ke=this.__data__=new te(At)}return ke.set(ne,ue),this.size=ke.size,this}qt.prototype.clear=Pn,qt.prototype.delete=Mn,qt.prototype.get=pn,qt.prototype.has=tr,qt.prototype.set=Cr;function Ht(ne,ue){var ke=wp(ne),At=!ke&&fu(ne),On=!ke&&!At&&Ep(ne),Er=!ke&&!At&&!On&&SR(ne),Gr=ke||At||On||Er,Fn=Gr?Ue(ne.length,String):[],Yr=Fn.length;for(var is in ne)Gr&&(is=="length"||On&&(is=="offset"||is=="parent")||Er&&(is=="buffer"||is=="byteLength"||is=="byteOffset")||_t(is,Yr))||Fn.push(is);return Fn}function nr(ne,ue,ke){(ke!==void 0&&!Jl(ne[ue],ke)||ke===void 0&&!(ue in ne))&&Ri(ne,ue,ke)}function Wr(ne,ue,ke){var At=ne[ue];(!(me.call(ne,ue)&&Jl(At,ke))||ke===void 0&&!(ue in ne))&&Ri(ne,ue,ke)}function Kn(ne,ue){for(var ke=ne.length;ke--;)if(Jl(ne[ke][0],ue))return ke;return-1}function Ri(ne,ue,ke){ue=="__proto__"&&gr?gr(ne,ue,{configurable:!0,enumerable:!0,value:ke,writable:!0}):ne[ue]=ke}var Vs=De();function ti(ne){return ne==null?ne===void 0?E:y:gn&&gn in Object(ne)?We(ne):Yo(ne)}function mo(ne){return du(ne)&&ti(ne)==a}function Ui(ne){if(!xp(ne)||Ln(ne))return!1;var ue=XS(ne)?pe:z;return ue.test(wR(ne))}function zi(ne){return du(ne)&&xR(ne.length)&&!!F[ti(ne)]}function Go(ne){if(!xp(ne))return Ir(ne);var ue=Ar(ne),ke=[];for(var At in ne)At=="constructor"&&(ue||!me.call(ne,At))||ke.push(At);return ke}function Pa(ne,ue,ke,At,On){ne!==ue&&Vs(ue,function(Er,Gr){if(On||(On=new qt),xp(Er))Hs(ne,ue,Gr,ke,Pa,At,On);else{var Fn=At?At(_p(ne,Gr),Er,Gr+"",ne,ue,On):void 0;Fn===void 0&&(Fn=Er),nr(ne,Gr,Fn)}},sv)}function Hs(ne,ue,ke,At,On,Er,Gr){var Fn=_p(ne,ke),Yr=_p(ue,ke),is=Gr.get(Yr);if(is){nr(ne,ke,is);return}var Ko=Er?Er(Fn,Yr,ke+"",ne,ue,Gr):void 0,av=Ko===void 0;if(av){var Sp=wp(Yr),u_=!Sp&&Ep(Yr),l_=!Sp&&!u_&&SR(Yr);Ko=Yr,Sp||u_||l_?wp(Fn)?Ko=Fn:ER(Fn)?Ko=fe(Fn):u_?(av=!1,Ko=Y(Yr)):l_?(av=!1,Ko=Z(Yr)):Ko=[]:V5(Yr)||fu(Yr)?(Ko=Fn,fu(Fn)?Ko=iv(Fn):(!xp(Fn)||XS(Fn))&&(Ko=it(Yr))):av=!1}av&&(Gr.set(Yr,Ko),On(Ko,Yr,At,Er,Gr),Gr.delete(Yr)),nr(ne,ke,Ko)}function Ql(ne,ue){return KS(Ed(ne,ue,yg),ne+"")}var wd=gr?function(ne,ue){return gr(ne,"toString",{configurable:!0,enumerable:!1,value:ov(ue),writable:!0})}:yg;function Y(ne,ue){return ne.slice()}function se(ne){var ue=new ne.constructor(ne.byteLength);return new yt(ue).set(new yt(ne)),ue}function Z(ne,ue){var ke=se(ne.buffer);return new ne.constructor(ke,ne.byteOffset,ne.length)}function fe(ne,ue){var ke=-1,At=ne.length;for(ue||(ue=Array(At));++ke<At;)ue[ke]=ne[ke];return ue}function ge(ne,ue,ke,At){var On=!ke;ke||(ke={});for(var Er=-1,Gr=ue.length;++Er<Gr;){var Fn=ue[Er],Yr=void 0;Yr===void 0&&(Yr=ne[Fn]),On?Ri(ke,Fn,Yr):Wr(ke,Fn,Yr)}return ke}function ce(ne){return Ql(function(ue,ke){var At=-1,On=ke.length,Er=On>1?ke[On-1]:void 0,Gr=On>2?ke[2]:void 0;for(Er=ne.length>3&&typeof Er=="function"?(On--,Er):void 0,Gr&&mn(ke[0],ke[1],Gr)&&(Er=On<3?void 0:Er,On=1),ue=Object(ue);++At<On;){var Fn=ke[At];Fn&&ne(ue,Fn,At,Er)}return ue})}function De(ne){return function(ue,ke,At){for(var On=-1,Er=Object(ue),Gr=At(ue),Fn=Gr.length;Fn--;){var Yr=Gr[++On];if(ke(Er[Yr],Yr,Er)===!1)break}return ue}}function ze(ne,ue){var ke=ne.__data__;return Pt(ue)?ke[typeof ue=="string"?"string":"hash"]:ke.map}function He(ne,ue){var ke=rt(ne,ue);return Ui(ke)?ke:void 0}function We(ne){var ue=me.call(ne,gn),ke=ne[gn];try{ne[gn]=void 0;var At=!0}catch{}var On=gt.call(ne);return At&&(ue?ne[gn]=ke:delete ne[gn]),On}function it(ne){return typeof ne.constructor=="function"&&!Ar(ne)?Bi(Vt(ne)):{}}function _t(ne,ue){var ke=typeof ne;return ue=ue??o,!!ue&&(ke=="number"||ke!="symbol"&&W.test(ne))&&ne>-1&&ne%1==0&&ne<ue}function mn(ne,ue,ke){if(!xp(ke))return!1;var At=typeof ue;return(At=="number"?a_(ke)&&_t(ue,ke.length):At=="string"&&ue in ke)?Jl(ke[ue],ne):!1}function Pt(ne){var ue=typeof ne;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?ne!=="__proto__":ne===null}function Ln(ne){return!!ct&&ct in ne}function Ar(ne){var ue=ne&&ne.constructor,ke=typeof ue=="function"&&ue.prototype||ut;return ne===ke}function Ir(ne){var ue=[];if(ne!=null)for(var ke in Object(ne))ue.push(ke);return ue}function Yo(ne){return gt.call(ne)}function Ed(ne,ue,ke){return ue=qr(ue===void 0?ne.length-1:ue,0),function(){for(var At=arguments,On=-1,Er=qr(At.length-ue,0),Gr=Array(Er);++On<Er;)Gr[On]=At[ue+On];On=-1;for(var Fn=Array(ue+1);++On<ue;)Fn[On]=At[On];return Fn[ue]=ke(Gr),Ye(ne,this,Fn)}}function _p(ne,ue){if(!(ue==="constructor"&&typeof ne[ue]=="function")&&ue!="__proto__")return ne[ue]}var KS=rv(wd);function rv(ne){var ue=0,ke=0;return function(){var At=Zr(),On=s-(At-ke);if(ke=At,On>0){if(++ue>=i)return arguments[0]}else ue=0;return ne.apply(void 0,arguments)}}function wR(ne){if(ne!=null){try{return qe.call(ne)}catch{}try{return ne+""}catch{}}return""}function Jl(ne,ue){return ne===ue||ne!==ne&&ue!==ue}var fu=mo(function(){return arguments}())?mo:function(ne){return du(ne)&&me.call(ne,"callee")&&!Vn.call(ne,"callee")},wp=Array.isArray;function a_(ne){return ne!=null&&xR(ne.length)&&!XS(ne)}function ER(ne){return du(ne)&&a_(ne)}var Ep=Qt||CR;function XS(ne){if(!xp(ne))return!1;var ue=ti(ne);return ue==h||ue==p||ue==l||ue==b}function xR(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=o}function xp(ne){var ue=typeof ne;return ne!=null&&(ue=="object"||ue=="function")}function du(ne){return ne!=null&&typeof ne=="object"}function V5(ne){if(!du(ne)||ti(ne)!=v)return!1;var ue=Vt(ne);if(ue===null)return!0;var ke=me.call(ue,"constructor")&&ue.constructor;return typeof ke=="function"&&ke instanceof ke&&qe.call(ke)==wt}var SR=ve?pt(ve):zi;function iv(ne){return ge(ne,sv(ne))}function sv(ne){return a_(ne)?Ht(ne):Go(ne)}var TR=ce(function(ne,ue,ke){Pa(ne,ue,ke)});function ov(ne){return function(){return ne}}function yg(ne){return ne}function CR(){return!1}e.exports=TR})(BD,BD.exports);var kut=BD.exports;const sK=Ho(kut),dT="@REVISIT_COMMS",Rut={minHeight:"500px",width:"100%",border:0,marginTop:"-50px"};function Nut({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Ml(),r=Dc(),i=Txe(),s=I.useRef(null),o=I.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=np(),u=eg()[a],l=Yc(),c=I.useCallback((f,d)=>{var h,p;(p=(h=s.current)==null?void 0:h.contentWindow)==null||p.postMessage({error:!1,type:`${dT}/${f}`,iframeId:o,message:d},"*")},[s,o]);return I.useEffect(()=>{const f=d=>{const{data:h}=d;if(typeof h=="object"&&o===h.iframeId)switch(h.type){case`${dT}/WINDOW_READY`:e.parameters&&c("STUDY_DATA",e.parameters);break;case`${dT}/READY`:s.current&&(s.current.style.height=`${h.message.documentHeight}px`);break;case`${dT}/ANSWERS`:r(t(h.message));break;case`${dT}/PROVENANCE`:r(n(h.message));break}};return window.addEventListener("message",f),()=>window.removeEventListener("message",f)},[r,a,i,o,l,e,c,t,n]),w.jsx("div",{children:w.jsx("iframe",{ref:s,src:`${Kc}${e.path}?trialid=${u}&id=${o}`,style:Rut})})}const Put={maxWidth:"100%"};function Out({currentConfig:e}){const t={...Put,...e.style};return w.jsx(Oy,{mx:"auto",src:`${Kc}${e.path}`,style:t})}function Dut({columns:e,catColumns:t,onAdd:n,onAddHistogram:r}){const[i,s]=I.useState(!1),[o,a]=I.useState(null),[u,l]=I.useState(null),[c,f]=I.useState(null);return i?w.jsxs(Oi,{children:[w.jsx(ph,{data:e,onChange:d=>a(d),placeholder:"Select X Column"}),w.jsx(ph,{data:e,onChange:d=>l(d),placeholder:"Select Y Column"}),w.jsx(sr,{disabled:!o||!u,onClick:()=>{n(o,u),s(!1)},children:"Create plot"}),w.jsx(ph,{data:t,onChange:d=>f(d),placeholder:"Select X Column"}),w.jsx(sr,{disabled:!c,onClick:()=>{r(c),s(!1)},children:"Add Histogram"})]}):w.jsx(Oi,{children:w.jsx(Tm,{variant:"light",size:150,onClick:()=>s(!0),children:w.jsx(Rwe,{size:50})})})}const $ut=Object.freeze(Object.defineProperty({__proto__:null,AddPlot:Dut},Symbol.toStringTag,{value:"Module"})),ySe=I.createContext(null),oK=({id:e="waveform",children:t})=>Nr.createElement("div",{id:e},t),Mut=["audioRate","audioContext","audioScriptProcessor","autoCenter","backend","backgroundColor","barGap","barHeight","barMinHeight","barRadius","barWidth","closeAudioContext","cursorColor","cursorWidth","fillParent","forceDecode","height","hideScrollbar","interact","loopSelection","maxCanvasWidth","mediaControls","mediaType","minPxPerSec","normalize","partialRender","pixelRatio","progressColor","removeMediaElementOnDestroy","renderer","responsive","scrollParent","skipLength","splitChannels","waveColor","autoCenterRate","autoCenterImmediately","drawingContextAttributes","duration","ignoreSilenceMode","rtl","splitChannelsOptions","vertical","xhr"],Lut=e=>e?Mut.reduce((t,n)=>Object.prototype.hasOwnProperty.call(e,n)?Object.assign(Object.assign({},t),{[n]:e[n]}):t,{}):{};function _s(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let ek=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const Hue={decode:function(e,t){return _s(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function vSe(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(vSe(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function que(e,t,n){const r=vSe(e,t||{});return n==null||n.appendChild(r),r}var Fut=Object.freeze({__proto__:null,createElement:que,default:que});const jut={fetchBlob:function(e,t,n){return _s(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){_s(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>_s(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>_s(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};let But=class extends ek{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){if(this.getSrc()===t)return;this.revokeSrc();const r=n instanceof Blob&&this.canPlayType(n.type)?URL.createObjectURL(n):t;this.media.src=r}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return _s(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}},bSe=class _Se extends ek{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=r=>{const i=this.wrapper.getBoundingClientRect(),s=r.clientX-i.left,o=r.clientY-i.top;return[s/i.width,o/i.height]};this.wrapper.addEventListener("click",r=>{const[i,s]=t(r);this.emit("click",i,s)}),this.wrapper.addEventListener("dblclick",r=>{const[i,s]=t(r);this.emit("dblclick",i,s)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=r/i,a=(r+s)/i;this.emit("scroll",o,a)});const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=x=>{if(x.preventDefault(),x.stopPropagation(),u&&Date.now()-m<a)return;const S=x.clientX,E=x.clientY,T=S-d,A=E-h;if(p||Math.abs(T)>s||Math.abs(A)>s){const k=t.getBoundingClientRect(),{left:R,top:$}=k;p||(r==null||r(d-R,h-$),p=!0),n(T,A,S-R,E-$),d=S,h=E}},y=x=>{if(p){const S=x.clientX,E=x.clientY,T=t.getBoundingClientRect(),{left:A,top:k}=T;i==null||i(S-A,E-k)}l()},v=x=>{x.relatedTarget&&x.relatedTarget!==document.documentElement||y(x)},b=x=>{p&&(x.stopPropagation(),x.preventDefault())},_=x=>{p&&x.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",v),document.addEventListener("pointercancel",v),document.addEventListener("touchmove",_,{passive:!1}),document.addEventListener("click",b,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",v),document.removeEventListener("pointercancel",v),document.removeEventListener("touchmove",_),setTimeout(()=>{document.removeEventListener("click",b,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"});return n.innerHTML=`
      <style>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t;this.subscriptions.forEach(n=>n()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect()}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=window.devicePixelRatio||1,d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,v=0,b=0;for(let _=0;_<=a;_++){const x=Math.round(_*m);if(x>y){const T=Math.round(v*c*i),A=T+Math.round(b*c*i)||1;let k=c-T;n.barAlign==="top"?k=0:n.barAlign==="bottom"&&(k=l-A),r[g](y*(d+h),k,d,A,p),y=x,v=0,b=0}const S=Math.abs(s[_]||0),E=Math.abs(o[_]||0);S>v&&(v=S),E>b&&(b=E)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const y=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,y),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=window.devicePixelRatio||1,l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){return _s(this,void 0,void 0,function*(){const a=window.devicePixelRatio||1,u=r/a;let l=Math.min(_Se.MAX_CANVAS_WIDTH,this.scrollContainer.clientWidth);if(n.barWidth||n.barGap){const p=n.barWidth||.5,m=p+(n.barGap||p/2);l%m!=0&&(l=Math.floor(l/m)*m)}const c=p=>{const m=p*l,g=Math.min(u-m,l),y=t.map(v=>{const b=Math.floor(m/u*v.length),_=Math.floor((m+g)/u*v.length);return v.slice(b,_)});this.renderSingleCanvas(y,n,g,i,m,s,o)},f=Math.ceil(u/l);if(f===1)return void c(0);const d=this.scrollContainer.scrollLeft/u,h=Math.floor(d*f);c(h),c(h+1),yield Promise.all([_s(this,void 0,void 0,function*(){const p=this.createDelay();for(let m=h-1;m>=0;m--)yield p(),c(m)}),_s(this,void 0,void 0,function*(){const p=this.createDelay();for(let m=h+2;m<f;m++)yield p(),c(m)})])})}renderChannel(t,n,r,i){return _s(this,void 0,void 0,function*(){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),yield this.renderMultiCanvas(t,o,r,u,a,l)})}render(t){return _s(this,void 0,void 0,function*(){this.timeouts.forEach(a=>a()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=window.devicePixelRatio||1,r=this.scrollContainer.clientWidth,i=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=i>r;const s=this.options.fillParent&&!this.isScrollable,o=(s?r:i)*n;this.wrapper.style.width=s?"100%":`${i}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render");try{if(this.options.splitChannels)yield Promise.all(Array.from({length:t.numberOfChannels}).map((a,u)=>{var l;const c=Object.assign(Object.assign({},this.options),(l=this.options.splitChannels)===null||l===void 0?void 0:l[u]);return this.renderChannel([t.getChannelData(u)],c,o,u)}));else{const a=[t.getChannelData(0)];t.numberOfChannels>1&&a.push(t.getChannelData(1)),yield this.renderChannel(a,this.options,o,0)}}catch{return}this.emit("rendered")})}reRender(){if(!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return _s(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}};bSe.MAX_CANVAS_WIDTH=4e3;class Uut extends ek{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class Wue extends ek{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return _s(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return _s(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return _s(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const zut={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let NU=class wSe extends But{static create(t){return new wSe(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Wue:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},zut,t),this.timer=new Uut;const r=n?void 0:this.getMediaElement();this.renderer=new bSe(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{this.emit("error",t.error)}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n)=>{const r=this.getDuration();this.emit("scroll",t*r,n*r)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return _s(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=l=>this.emit("loading",l);n=yield jut.fetchBlob(t,u,a)}this.setSrc(t,n);const o=i||this.getDuration()||(yield new Promise(a=>{this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0})}));if(!t&&!n){const a=this.getMediaElement();a instanceof Wue&&(a.duration=o)}if(r)this.decodedData=Hue.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield Hue.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return _s(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return _s(this,void 0,void 0,function*(){try{return yield this.loadAudio("blob",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return _s(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return _s(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};NU.BasePlugin=class extends ek{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},NU.dom=Fut;function Vut(e){return NU.create(e)}function Gue(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const Hut=(e,t)=>{const n=[...e],r=[...t],i=n.filter(o=>r.findIndex(a=>a.name===o.name)===-1),s=r.filter(o=>n.findIndex(a=>a.name===o.name)===-1);return{disabled:i,enabled:s}};var qut=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function ESe(e){var{container:t,plugins:n=[],onMount:r}=e,i=qut(e,["container","plugins","onMount"]);const s=I.useRef([]),[o,a]=I.useState(null);return I.useEffect(()=>{if(!t)return;let u=[];n&&(u=n.map(Gue)),s.current=u;const l=Vut(Object.assign(Object.assign({container:t},i),{plugins:u}));return r==null||r(l),a(l),()=>{l.destroy()}},[t]),I.useEffect(()=>{if(o){const u=n.map(Gue),{disabled:l,enabled:c}=Hut(s.current,u);s.current=u,l.forEach(f=>{f.name&&(o==null||o.destroyPlugin(f.name))}),c.forEach(f=>{f.name&&(o==null||o.addPlugin(f).initPlugin(f.name))})}},[n]),o}function Wut(e){return!!e&&typeof e!="string"&&typeof e!="number"&&typeof e!="boolean"&&"type"in e&&"props"in e}var Gut=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const xSe=e=>{var{children:t,plugins:n=[],onMount:r}=e,i=Gut(e,["children","plugins","onMount"]);const s=I.useMemo(()=>{let a={};return I.Children.forEach(t,u=>{if(typeof u!="object"||u===null||["string","number"].includes(typeof u)||!Wut(u))return;const{props:l,type:c}=u;if(c===oK){const{id:f}=l;a=Lut(l),a=Object.assign(Object.assign({},a),{container:"#"+f})}}),a},[t]),o=ESe(Object.assign(Object.assign({plugins:n,onMount:r},i),s));return Nr.createElement(ySe.Provider,{value:o},t)};xSe.defaultProps={children:null,plugins:[]};function d9(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}let SSe=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},Yut=class extends SSe{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};class Kut extends SSe{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const Xut=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class aK extends Yut{constructor(t){var n,r,i,s;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,renderRecordedAudio:(s=t.renderRecordedAudio)===null||s===void 0||s})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new Kut,this.subscriptions.push(this.timer.on("tick",()=>{const o=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+o,this.emit("record-progress",this.duration)}))}static create(t){return new aK(t||{})}renderMicStream(t){const n=new AudioContext,r=n.createMediaStreamSource(t),i=n.createAnalyser();r.connect(i);const s=i.frequencyBinCount,o=new Float32Array(s);let a;const u=Math.floor((this.options.scrollingWaveformWindow||0)*n.sampleRate),l=()=>{var c;if(this.isWaveformPaused)return void(a=requestAnimationFrame(l));if(i.getFloatTimeDomainData(o),this.options.scrollingWaveform){const d=Math.min(u,this.dataWindow?this.dataWindow.length+s:s),h=new Float32Array(u);if(this.dataWindow){const p=Math.max(0,u-this.dataWindow.length);h.set(this.dataWindow.slice(-d+s),p)}h.set(o,u-s),this.dataWindow=h}else this.dataWindow=o;const f=this.options.scrollingWaveformWindow;this.wavesurfer&&((c=this.originalOptions)!==null&&c!==void 0||(this.originalOptions={cursorWidth:this.wavesurfer.options.cursorWidth,interact:this.wavesurfer.options.interact}),this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[this.dataWindow],f)),a=requestAnimationFrame(l)};return l(),{onDestroy:()=>{cancelAnimationFrame(a),r==null||r.disconnect(),n==null||n.close()},onEnd:()=>{this.isWaveformPaused=!0,cancelAnimationFrame(a),this.stopMic()}}}startMic(t){return d9(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return d9(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||Xut.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return d9(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.options.cursorWidth=this.originalOptions.cursorWidth,this.wavesurfer.options.interact=this.originalOptions.interact,delete this.originalOptions)}}function TSe({width:e=70,height:t=50}){const n=I.useRef(null),r=I.useCallback(i=>{n.current=i,n.current&&(n.current.registerPlugin(aK.create({scrollingWaveform:!0,renderRecordedAudio:!1})).startRecording(),n.current.setOptions({height:50,waveColor:"#FA5252"}))},[]);return w.jsx(Ne,{style:{width:`${e}px`,height:`${t}px`},children:w.jsx(xSe,{onMount:r,children:w.jsx(oK,{id:"waveform"})})})}function Yue({parameters:e,setAnswer:t}){return I.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{new MediaRecorder(r).start();const s=new AudioContext,o=s.createMediaStreamSource(r),a=s.createAnalyser();a.minDecibels=-45,o.connect(a);const u=a.frequencyBinCount,l=new Uint8Array(u);let c=!1;const f=()=>{if(!c){a.getByteFrequencyData(l);for(let d=0;d<u;d+=1)l[d]>0&&(c=!0,t({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(f)}};window.requestAnimationFrame(f)})},[t]),w.jsx(Bo,{style:{height:"70%",width:"100%"},children:w.jsxs(Oi,{children:[w.jsx(xt,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),w.jsx(xt,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),w.jsx(xt,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please close it now."}),w.jsx(Bo,{children:w.jsx(TSe,{height:200,width:400})})]})})}const Qut=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:Yue,default:Yue},Symbol.toStringTag,{value:"Module"}));function lm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Jut(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Zx(e){let t,n,r;e.length!==2?(t=lm,n=(a,u)=>lm(e(a),u),r=(a,u)=>e(a)-u):(t=e===lm||e===Jut?e:Zut,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Zut(){return 0}function CSe(e){return e===null?NaN:+e}function*elt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const ASe=Zx(lm),G0=ASe.right,tlt=ASe.left;Zx(CSe).center;function nlt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function rlt(e,t){const n=nlt(e,t);return n&&Math.sqrt(n)}function UD(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Ya{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Kue extends Map{constructor(t,n=RSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(PU(this,t))}has(t){return super.has(PU(this,t))}set(t,n){return super.set(ISe(this,t),n)}delete(t){return super.delete(kSe(this,t))}}class zD extends Set{constructor(t,n=RSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(PU(this,t))}add(t){return super.add(ISe(this,t))}delete(t){return super.delete(kSe(this,t))}}function PU({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function ISe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function kSe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function RSe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ilt(e,t){return Array.from(t,n=>e[n])}function slt(e=lm){if(e===lm)return NSe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function NSe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const olt=Math.sqrt(50),alt=Math.sqrt(10),ult=Math.sqrt(2);function VD(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=olt?10:s>=alt?5:s>=ult?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?VD(e,t,n*2):[a,u,l]}function OU(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?VD(t,e,n):VD(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function DU(e,t,n){return t=+t,e=+e,n=+n,VD(e,t,n)[2]}function Y0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?DU(t,e,n):DU(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Ac(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function $U(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function PSe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?NSe:slt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));PSe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(hT(e,n,t),i(e[r],s)>0&&hT(e,n,r);o<a;){for(hT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?hT(e,n,a):(++a,hT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function hT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function MU(e,t,n){if(e=Float64Array.from(elt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return $U(e);if(t>=1)return Ac(e);var r,i=(r-1)*t,s=Math.floor(i),o=Ac(PSe(e,s).subarray(0,s+1)),a=$U(e.subarray(s+1));return o+(a-o)*(i-s)}}function OSe(e,t,n=CSe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function DSe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function $Se(e,t){return MU(e,.5,t)}function*llt(e){for(const t of e)yield*t}function MSe(e){return Array.from(llt(e))}function Pu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function uK(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function clt(e,...t){e=new zD(e),t=t.map(flt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function flt(e){return e instanceof zD?e:new zD(e)}function dlt(...e){const t=new zD;for(const n of e)for(const r of n)t.add(r);return t}var hlt={value:()=>{}};function v6(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new WP(n)}function WP(e){this._=e}function plt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}WP.prototype=v6.prototype={constructor:WP,on:function(e,t){var n=this._,r=plt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=mlt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Xue(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Xue(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new WP(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function mlt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Xue(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=hlt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var LU="http://www.w3.org/1999/xhtml";const Que={svg:"http://www.w3.org/2000/svg",xhtml:LU,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function b6(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Que.hasOwnProperty(t)?{space:Que[t],local:e}:e}function glt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===LU&&t.documentElement.namespaceURI===LU?t.createElement(e):t.createElementNS(n,e)}}function ylt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function LSe(e){var t=b6(e);return(t.local?ylt:glt)(t)}function vlt(){}function lK(e){return e==null?vlt:function(){return this.querySelector(e)}}function blt(e){typeof e!="function"&&(e=lK(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Ja(r,this._parents)}function FSe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function _lt(){return[]}function jSe(e){return e==null?_lt:function(){return this.querySelectorAll(e)}}function wlt(e){return function(){return FSe(e.apply(this,arguments))}}function Elt(e){typeof e=="function"?e=wlt(e):e=jSe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ja(r,i)}function BSe(e){return function(){return this.matches(e)}}function USe(e){return function(t){return t.matches(e)}}var xlt=Array.prototype.find;function Slt(e){return function(){return xlt.call(this.children,e)}}function Tlt(){return this.firstElementChild}function Clt(e){return this.select(e==null?Tlt:Slt(typeof e=="function"?e:USe(e)))}var Alt=Array.prototype.filter;function Ilt(){return Array.from(this.children)}function klt(e){return function(){return Alt.call(this.children,e)}}function Rlt(e){return this.selectAll(e==null?Ilt:klt(typeof e=="function"?e:USe(e)))}function Nlt(e){typeof e!="function"&&(e=BSe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Ja(r,this._parents)}function zSe(e){return new Array(e.length)}function Plt(){return new Ja(this._enter||this._groups.map(zSe),this._parents)}function HD(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}HD.prototype={constructor:HD,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Olt(e){return function(){return e}}function Dlt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new HD(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function $lt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new HD(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Mlt(e){return e.__data__}function Llt(e,t){if(!arguments.length)return Array.from(this,Mlt);var n=t?$lt:Dlt,r=this._parents,i=this._groups;typeof e!="function"&&(e=Olt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=Flt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,_,x;v<p;++v)if(_=m[v]){for(v>=b&&(b=v+1);!(x=g[b])&&++b<p;);_._next=x||null}}return o=new Ja(o,r),o._enter=a,o._exit=u,o}function Flt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jlt(){return new Ja(this._exit||this._groups.map(zSe),this._parents)}function Blt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Ult(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Ja(a,this._parents)}function zlt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Vlt(e){e||(e=Hlt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Ja(i,this._parents).order()}function Hlt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qlt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Wlt(){return Array.from(this)}function Glt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Ylt(){let e=0;for(const t of this)++e;return e}function Klt(){return!this.node()}function Xlt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Qlt(e){return function(){this.removeAttribute(e)}}function Jlt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Zlt(e,t){return function(){this.setAttribute(e,t)}}function ect(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function tct(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function nct(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function rct(e,t){var n=b6(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Jlt:Qlt:typeof t=="function"?n.local?nct:tct:n.local?ect:Zlt)(n,t))}function VSe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ict(e){return function(){this.style.removeProperty(e)}}function sct(e,t,n){return function(){this.style.setProperty(e,t,n)}}function oct(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function act(e,t,n){return arguments.length>1?this.each((t==null?ict:typeof t=="function"?oct:sct)(e,t,n??"")):TE(this.node(),e)}function TE(e,t){return e.style.getPropertyValue(t)||VSe(e).getComputedStyle(e,null).getPropertyValue(t)}function uct(e){return function(){delete this[e]}}function lct(e,t){return function(){this[e]=t}}function cct(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function fct(e,t){return arguments.length>1?this.each((t==null?uct:typeof t=="function"?cct:lct)(e,t)):this.node()[e]}function HSe(e){return e.trim().split(/^|\s+/)}function cK(e){return e.classList||new qSe(e)}function qSe(e){this._node=e,this._names=HSe(e.getAttribute("class")||"")}qSe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function WSe(e,t){for(var n=cK(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function GSe(e,t){for(var n=cK(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function dct(e){return function(){WSe(this,e)}}function hct(e){return function(){GSe(this,e)}}function pct(e,t){return function(){(t.apply(this,arguments)?WSe:GSe)(this,e)}}function mct(e,t){var n=HSe(e+"");if(arguments.length<2){for(var r=cK(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?pct:t?dct:hct)(n,t))}function gct(){this.textContent=""}function yct(e){return function(){this.textContent=e}}function vct(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function bct(e){return arguments.length?this.each(e==null?gct:(typeof e=="function"?vct:yct)(e)):this.node().textContent}function _ct(){this.innerHTML=""}function wct(e){return function(){this.innerHTML=e}}function Ect(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function xct(e){return arguments.length?this.each(e==null?_ct:(typeof e=="function"?Ect:wct)(e)):this.node().innerHTML}function Sct(){this.nextSibling&&this.parentNode.appendChild(this)}function Tct(){return this.each(Sct)}function Cct(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Act(){return this.each(Cct)}function Ict(e){var t=typeof e=="function"?e:LSe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function kct(){return null}function Rct(e,t){var n=typeof e=="function"?e:LSe(e),r=t==null?kct:typeof t=="function"?t:lK(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Nct(){var e=this.parentNode;e&&e.removeChild(this)}function Pct(){return this.each(Nct)}function Oct(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Dct(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $ct(e){return this.select(e?Dct:Oct)}function Mct(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Lct(e){return function(t){e.call(this,t,this.__data__)}}function Fct(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function jct(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Bct(e,t,n){return function(){var r=this.__on,i,s=Lct(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Uct(e,t,n){var r=Fct(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Bct:jct,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function YSe(e,t,n){var r=VSe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function zct(e,t){return function(){return YSe(this,e,t)}}function Vct(e,t){return function(){return YSe(this,e,t.apply(this,arguments))}}function Hct(e,t){return this.each((typeof t=="function"?Vct:zct)(e,t))}function*qct(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var fK=[null];function Ja(e,t){this._groups=e,this._parents=t}function tk(){return new Ja([[document.documentElement]],fK)}function Wct(){return this}Ja.prototype=tk.prototype={constructor:Ja,select:blt,selectAll:Elt,selectChild:Clt,selectChildren:Rlt,filter:Nlt,data:Llt,enter:Plt,exit:jlt,join:Blt,merge:Ult,selection:Wct,order:zlt,sort:Vlt,call:qlt,nodes:Wlt,node:Glt,size:Ylt,empty:Klt,each:Xlt,attr:rct,style:act,property:fct,classed:mct,text:bct,html:xct,raise:Tct,lower:Act,append:Ict,insert:Rct,remove:Pct,clone:$ct,datum:Mct,on:Uct,dispatch:Hct,[Symbol.iterator]:qct};function xo(e){return typeof e=="string"?new Ja([[document.querySelector(e)]],[document.documentElement]):new Ja([[e]],fK)}function Gct(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Jue(e,t){if(e=Gct(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Yct(e){return typeof e=="string"?new Ja([document.querySelectorAll(e)],[document.documentElement]):new Ja([FSe(e)],fK)}const FU={capture:!0,passive:!1};function jU(e){e.preventDefault(),e.stopImmediatePropagation()}function Kct(e){var t=e.document.documentElement,n=xo(e).on("dragstart.drag",jU,FU);"onselectstart"in t?n.on("selectstart.drag",jU,FU):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Xct(e,t){var n=e.document.documentElement,r=xo(e).on("dragstart.drag",null);t&&(r.on("click.drag",jU,FU),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function eS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function nk(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ly(){}var V1=.7,CE=1/V1,Uw="\\s*([+-]?\\d+)\\s*",gA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qct=/^#([0-9a-f]{3,8})$/,Jct=new RegExp(`^rgb\\(${Uw},${Uw},${Uw}\\)$`),Zct=new RegExp(`^rgb\\(${yh},${yh},${yh}\\)$`),eft=new RegExp(`^rgba\\(${Uw},${Uw},${Uw},${gA}\\)$`),tft=new RegExp(`^rgba\\(${yh},${yh},${yh},${gA}\\)$`),nft=new RegExp(`^hsl\\(${gA},${yh},${yh}\\)$`),rft=new RegExp(`^hsla\\(${gA},${yh},${yh},${gA}\\)$`),Zue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eS(Ly,H1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ele,formatHex:ele,formatHex8:ift,formatHsl:sft,formatRgb:tle,toString:tle});function ele(){return this.rgb().formatHex()}function ift(){return this.rgb().formatHex8()}function sft(){return KSe(this).formatHsl()}function tle(){return this.rgb().formatRgb()}function H1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Qct.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?nle(t):n===3?new eo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?aN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?aN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Jct.exec(e))?new eo(t[1],t[2],t[3],1):(t=Zct.exec(e))?new eo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=eft.exec(e))?aN(t[1],t[2],t[3],t[4]):(t=tft.exec(e))?aN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=nft.exec(e))?sle(t[1],t[2]/100,t[3]/100,1):(t=rft.exec(e))?sle(t[1],t[2]/100,t[3]/100,t[4]):Zue.hasOwnProperty(e)?nle(Zue[e]):e==="transparent"?new eo(NaN,NaN,NaN,0):null}function nle(e){return new eo(e>>16&255,e>>8&255,e&255,1)}function aN(e,t,n,r){return r<=0&&(e=t=n=NaN),new eo(e,t,n,r)}function dK(e){return e instanceof Ly||(e=H1(e)),e?(e=e.rgb(),new eo(e.r,e.g,e.b,e.opacity)):new eo}function K0(e,t,n,r){return arguments.length===1?dK(e):new eo(e,t,n,r??1)}function eo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}eS(eo,K0,nk(Ly,{brighter(e){return e=e==null?CE:Math.pow(CE,e),new eo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?V1:Math.pow(V1,e),new eo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new eo(w1(this.r),w1(this.g),w1(this.b),qD(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rle,formatHex:rle,formatHex8:oft,formatRgb:ile,toString:ile}));function rle(){return`#${n1(this.r)}${n1(this.g)}${n1(this.b)}`}function oft(){return`#${n1(this.r)}${n1(this.g)}${n1(this.b)}${n1((isNaN(this.opacity)?1:this.opacity)*255)}`}function ile(){const e=qD(this.opacity);return`${e===1?"rgb(":"rgba("}${w1(this.r)}, ${w1(this.g)}, ${w1(this.b)}${e===1?")":`, ${e})`}`}function qD(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function w1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function n1(e){return e=w1(e),(e<16?"0":"")+e.toString(16)}function sle(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Af(e,t,n,r)}function KSe(e){if(e instanceof Af)return new Af(e.h,e.s,e.l,e.opacity);if(e instanceof Ly||(e=H1(e)),!e)return new Af;if(e instanceof Af)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Af(o,a,u,e.opacity)}function yA(e,t,n,r){return arguments.length===1?KSe(e):new Af(e,t,n,r??1)}function Af(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}eS(Af,yA,nk(Ly,{brighter(e){return e=e==null?CE:Math.pow(CE,e),new Af(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?V1:Math.pow(V1,e),new Af(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new eo(h9(e>=240?e-240:e+120,i,r),h9(e,i,r),h9(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Af(ole(this.h),uN(this.s),uN(this.l),qD(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qD(this.opacity);return`${e===1?"hsl(":"hsla("}${ole(this.h)}, ${uN(this.s)*100}%, ${uN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ole(e){return e=(e||0)%360,e<0?e+360:e}function uN(e){return Math.max(0,Math.min(1,e||0))}function h9(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const XSe=Math.PI/180,QSe=180/Math.PI,WD=18,JSe=.96422,ZSe=1,eTe=.82521,tTe=4/29,zw=6/29,nTe=3*zw*zw,aft=zw*zw*zw;function rTe(e){if(e instanceof vh)return new vh(e.l,e.a,e.b,e.opacity);if(e instanceof Jp)return iTe(e);e instanceof eo||(e=dK(e));var t=y9(e.r),n=y9(e.g),r=y9(e.b),i=p9((.2225045*t+.7168786*n+.0606169*r)/ZSe),s,o;return t===n&&n===r?s=o=i:(s=p9((.4360747*t+.3850649*n+.1430804*r)/JSe),o=p9((.0139322*t+.0971045*n+.7141733*r)/eTe)),new vh(116*i-16,500*(s-i),200*(i-o),e.opacity)}function GD(e,t,n,r){return arguments.length===1?rTe(e):new vh(e,t,n,r??1)}function vh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}eS(vh,GD,nk(Ly,{brighter(e){return new vh(this.l+WD*(e??1),this.a,this.b,this.opacity)},darker(e){return new vh(this.l-WD*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=JSe*m9(t),e=ZSe*m9(e),n=eTe*m9(n),new eo(g9(3.1338561*t-1.6168667*e-.4906146*n),g9(-.9787684*t+1.9161415*e+.033454*n),g9(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function p9(e){return e>aft?Math.pow(e,1/3):e/nTe+tTe}function m9(e){return e>zw?e*e*e:nTe*(e-tTe)}function g9(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function y9(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function uft(e){if(e instanceof Jp)return new Jp(e.h,e.c,e.l,e.opacity);if(e instanceof vh||(e=rTe(e)),e.a===0&&e.b===0)return new Jp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*QSe;return new Jp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function YD(e,t,n,r){return arguments.length===1?uft(e):new Jp(e,t,n,r??1)}function Jp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function iTe(e){if(isNaN(e.h))return new vh(e.l,0,0,e.opacity);var t=e.h*XSe;return new vh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}eS(Jp,YD,nk(Ly,{brighter(e){return new Jp(this.h,this.c,this.l+WD*(e??1),this.opacity)},darker(e){return new Jp(this.h,this.c,this.l-WD*(e??1),this.opacity)},rgb(){return iTe(this).rgb()}}));var sTe=-.14861,hK=1.78277,pK=-.29227,_6=-.90649,vA=1.97294,ale=vA*_6,ule=vA*hK,lle=hK*pK-_6*sTe;function lft(e){if(e instanceof E1)return new E1(e.h,e.s,e.l,e.opacity);e instanceof eo||(e=dK(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(lle*r+ale*t-ule*n)/(lle+ale-ule),s=r-i,o=(vA*(n-i)-pK*s)/_6,a=Math.sqrt(o*o+s*s)/(vA*i*(1-i)),u=a?Math.atan2(o,s)*QSe-120:NaN;return new E1(u<0?u+360:u,a,i,e.opacity)}function BU(e,t,n,r){return arguments.length===1?lft(e):new E1(e,t,n,r??1)}function E1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}eS(E1,BU,nk(Ly,{brighter(e){return e=e==null?CE:Math.pow(CE,e),new E1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?V1:Math.pow(V1,e),new E1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*XSe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new eo(255*(t+n*(sTe*r+hK*i)),255*(t+n*(pK*r+_6*i)),255*(t+n*(vA*r)),this.opacity)}}));function oTe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function aTe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return oTe((n-r/t)*t,o,i,s,a)}}function uTe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return oTe((n-r/t)*t,i,s,o,a)}}const w6=e=>()=>e;function lTe(e,t){return function(n){return e+n*t}}function cft(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function E6(e,t){var n=t-e;return n?lTe(e,n>180||n<-180?n-360*Math.round(n/360):n):w6(isNaN(e)?t:e)}function fft(e){return(e=+e)==1?to:function(t,n){return n-t?cft(t,n,e):w6(isNaN(t)?n:t)}}function to(e,t){var n=t-e;return n?lTe(e,n):w6(isNaN(e)?t:e)}const bA=function e(t){var n=fft(t);function r(i,s){var o=n((i=K0(i)).r,(s=K0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=to(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function cTe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=K0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var dft=cTe(aTe),hft=cTe(uTe);function mK(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function fTe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function pft(e,t){return(fTe(t)?mK:dTe)(e,t)}function dTe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=tg(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function hTe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function fc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function pTe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=tg(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var UU=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,v9=new RegExp(UU.source,"g");function mft(e){return function(){return e}}function gft(e){return function(t){return e(t)+""}}function gK(e,t){var n=UU.lastIndex=v9.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=UU.exec(e))&&(i=v9.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:fc(r,i)})),n=v9.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?gft(u[0].x):mft(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function tg(e,t){var n=typeof t,r;return t==null||n==="boolean"?w6(t):(n==="number"?fc:n==="string"?(r=H1(t))?(t=r,bA):gK:t instanceof H1?bA:t instanceof Date?hTe:fTe(t)?mK:Array.isArray(t)?dTe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?pTe:fc)(e,t)}function yft(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function vft(e,t){var n=E6(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function rk(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var cle=180/Math.PI,zU={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mTe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*cle,skewX:Math.atan(u)*cle,scaleX:o,scaleY:a}}var lN;function bft(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?zU:mTe(t.a,t.b,t.c,t.d,t.e,t.f)}function _ft(e){return e==null||(lN||(lN=document.createElementNS("http://www.w3.org/2000/svg","g")),lN.setAttribute("transform",e),!(e=lN.transform.baseVal.consolidate()))?zU:(e=e.matrix,mTe(e.a,e.b,e.c,e.d,e.e,e.f))}function gTe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:fc(l,f)},{i:m-2,x:fc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:fc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:fc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:fc(l,f)},{i:m-2,x:fc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var yTe=gTe(bft,"px, ","px)","deg)"),vTe=gTe(_ft,", ",")",")"),wft=1e-12;function fle(e){return((e=Math.exp(e))+1/e)/2}function Eft(e){return((e=Math.exp(e))-1/e)/2}function xft(e){return((e=Math.exp(2*e))-1)/(e+1)}const Sft=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<wft)y=Math.log(d/l)/t,g=function(E){return[a+E*h,u+E*p,l*Math.exp(t*E*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),_=(d*d-l*l-r*m)/(2*d*n*v),x=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(_*_+1)-_);y=(S-x)/t,g=function(E){var T=E*y,A=fle(x),k=l/(n*v)*(A*xft(t*T+x)-Eft(x));return[a+k*h,u+k*p,l*A/fle(t*T+x)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function bTe(e){return function(t,n){var r=e((t=yA(t)).h,(n=yA(n)).h),i=to(t.s,n.s),s=to(t.l,n.l),o=to(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Tft=bTe(E6);var Cft=bTe(to);function Aft(e,t){var n=to((e=GD(e)).l,(t=GD(t)).l),r=to(e.a,t.a),i=to(e.b,t.b),s=to(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function _Te(e){return function(t,n){var r=e((t=YD(t)).h,(n=YD(n)).h),i=to(t.c,n.c),s=to(t.l,n.l),o=to(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Ift=_Te(E6);var kft=_Te(to);function wTe(e){return function t(n){n=+n;function r(i,s){var o=e((i=BU(i)).h,(s=BU(s)).h),a=to(i.s,s.s),u=to(i.l,s.l),l=to(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Rft=wTe(E6);var Nft=wTe(to);function yK(e,t){t===void 0&&(t=e,e=tg);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Pft(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Oft=Object.freeze(Object.defineProperty({__proto__:null,interpolate:tg,interpolateArray:pft,interpolateBasis:aTe,interpolateBasisClosed:uTe,interpolateCubehelix:Rft,interpolateCubehelixLong:Nft,interpolateDate:hTe,interpolateDiscrete:yft,interpolateHcl:Ift,interpolateHclLong:kft,interpolateHsl:Tft,interpolateHslLong:Cft,interpolateHue:vft,interpolateLab:Aft,interpolateNumber:fc,interpolateNumberArray:mK,interpolateObject:pTe,interpolateRgb:bA,interpolateRgbBasis:dft,interpolateRgbBasisClosed:hft,interpolateRound:rk,interpolateString:gK,interpolateTransformCss:yTe,interpolateTransformSvg:vTe,interpolateZoom:Sft,piecewise:yK,quantize:Pft},Symbol.toStringTag,{value:"Module"}));var AE=0,sC=0,pT=0,ETe=1e3,KD,oC,XD=0,q1=0,x6=0,_A=typeof performance=="object"&&performance.now?performance:Date,xTe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function S6(){return q1||(xTe(Dft),q1=_A.now()+x6)}function Dft(){q1=0}function wA(){this._call=this._time=this._next=null}wA.prototype=vK.prototype={constructor:wA,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?S6():+n)+(t==null?0:+t),!this._next&&oC!==this&&(oC?oC._next=this:KD=this,oC=this),this._call=e,this._time=n,VU()},stop:function(){this._call&&(this._call=null,this._time=1/0,VU())}};function vK(e,t,n){var r=new wA;return r.restart(e,t,n),r}function $ft(){S6(),++AE;for(var e=KD,t;e;)(t=q1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--AE}function dle(){q1=(XD=_A.now())+x6,AE=sC=0;try{$ft()}finally{AE=0,Lft(),q1=0}}function Mft(){var e=_A.now(),t=e-XD;t>ETe&&(x6-=t,XD=e)}function Lft(){for(var e,t=KD,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:KD=n);oC=e,VU(r)}function VU(e){if(!AE){sC&&(sC=clearTimeout(sC));var t=e-q1;t>24?(e<1/0&&(sC=setTimeout(dle,e-_A.now()-x6)),pT&&(pT=clearInterval(pT))):(pT||(XD=_A.now(),pT=setInterval(Mft,ETe)),AE=1,xTe(dle))}}function hle(e,t,n){var r=new wA;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Fft(e,t,n){var r=new wA,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?S6():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var jft=v6("start","end","cancel","interrupt"),Bft=[],STe=0,ple=1,HU=2,GP=3,mle=4,qU=5,YP=6;function T6(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Uft(e,n,{name:t,index:r,group:i,on:jft,tween:Bft,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:STe})}function bK(e,t){var n=ud(e,t);if(n.state>STe)throw new Error("too late; already scheduled");return n}function rp(e,t){var n=ud(e,t);if(n.state>GP)throw new Error("too late; already running");return n}function ud(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Uft(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=vK(s,0,n.time);function s(l){n.state=ple,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==ple)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===GP)return hle(o);h.state===mle?(h.state=YP,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=YP,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(hle(function(){n.state===GP&&(n.state=mle,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=HU,n.on.call("start",e,e.__data__,n.index,n.group),n.state===HU){for(n.state=GP,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=qU,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===qU&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=YP,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function WU(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>HU&&r.state<qU,r.state=YP,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function zft(e){return this.each(function(){WU(this,e)})}function Vft(e,t){var n,r;return function(){var i=rp(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Hft(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=rp(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function qft(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ud(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Vft:Hft)(n,e,t))}function _K(e,t,n){var r=e._id;return e.each(function(){var i=rp(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ud(i,r).value[t]}}function TTe(e,t){var n;return(typeof t=="number"?fc:t instanceof H1?bA:(n=H1(t))?(t=n,bA):gK)(e,t)}function Wft(e){return function(){this.removeAttribute(e)}}function Gft(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Yft(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Kft(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Xft(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Qft(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Jft(e,t){var n=b6(e),r=n==="transform"?vTe:TTe;return this.attrTween(e,typeof t=="function"?(n.local?Qft:Xft)(n,r,_K(this,"attr."+e,t)):t==null?(n.local?Gft:Wft)(n):(n.local?Kft:Yft)(n,r,t))}function Zft(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function edt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function tdt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&edt(e,s)),n}return i._value=t,i}function ndt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Zft(e,s)),n}return i._value=t,i}function rdt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=b6(e);return this.tween(n,(r.local?tdt:ndt)(r,t))}function idt(e,t){return function(){bK(this,e).delay=+t.apply(this,arguments)}}function sdt(e,t){return t=+t,function(){bK(this,e).delay=t}}function odt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?idt:sdt)(t,e)):ud(this.node(),t).delay}function adt(e,t){return function(){rp(this,e).duration=+t.apply(this,arguments)}}function udt(e,t){return t=+t,function(){rp(this,e).duration=t}}function ldt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?adt:udt)(t,e)):ud(this.node(),t).duration}function cdt(e,t){if(typeof t!="function")throw new Error;return function(){rp(this,e).ease=t}}function fdt(e){var t=this._id;return arguments.length?this.each(cdt(t,e)):ud(this.node(),t).ease}function ddt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;rp(this,e).ease=n}}function hdt(e){if(typeof e!="function")throw new Error;return this.each(ddt(this._id,e))}function pdt(e){typeof e!="function"&&(e=BSe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Rm(r,this._parents,this._name,this._id)}function mdt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Rm(o,this._parents,this._name,this._id)}function gdt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ydt(e,t,n){var r,i,s=gdt(t)?bK:rp;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function vdt(e,t){var n=this._id;return arguments.length<2?ud(this.node(),n).on.on(e):this.each(ydt(n,e,t))}function bdt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function _dt(){return this.on("end.remove",bdt(this._id))}function wdt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=lK(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,T6(l[d],t,n,d,l,ud(c,n)));return new Rm(s,this._parents,t,n)}function Edt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=jSe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=ud(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&T6(h,t,n,m,d,p);s.push(d),o.push(c)}return new Rm(s,o,t,n)}var xdt=tk.prototype.constructor;function Sdt(){return new xdt(this._groups,this._parents)}function Tdt(e,t){var n,r,i;return function(){var s=TE(this,e),o=(this.style.removeProperty(e),TE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function CTe(e){return function(){this.style.removeProperty(e)}}function Cdt(e,t,n){var r,i=n+"",s;return function(){var o=TE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Adt(e,t,n){var r,i,s;return function(){var o=TE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),TE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function Idt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=rp(this,e),l=u.on,c=u.value[s]==null?a||(a=CTe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function kdt(e,t,n){var r=(e+="")=="transform"?yTe:TTe;return t==null?this.styleTween(e,Tdt(e,r)).on("end.style."+e,CTe(e)):typeof t=="function"?this.styleTween(e,Adt(e,r,_K(this,"style."+e,t))).each(Idt(this._id,e)):this.styleTween(e,Cdt(e,r,t),n).on("end.style."+e,null)}function Rdt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ndt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Rdt(e,o,n)),r}return s._value=t,s}function Pdt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Ndt(e,t,n??""))}function Odt(e){return function(){this.textContent=e}}function Ddt(e){return function(){var t=e(this);this.textContent=t??""}}function $dt(e){return this.tween("text",typeof e=="function"?Ddt(_K(this,"text",e)):Odt(e==null?"":e+""))}function Mdt(e){return function(t){this.textContent=e.call(this,t)}}function Ldt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Mdt(i)),t}return r._value=e,r}function Fdt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ldt(e))}function jdt(){for(var e=this._name,t=this._id,n=ATe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=ud(u,t);T6(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Rm(r,this._parents,e,n)}function Bdt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=rp(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Udt=0;function Rm(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function ATe(){return++Udt}var Tp=tk.prototype;Rm.prototype={constructor:Rm,select:wdt,selectAll:Edt,selectChild:Tp.selectChild,selectChildren:Tp.selectChildren,filter:pdt,merge:mdt,selection:Sdt,transition:jdt,call:Tp.call,nodes:Tp.nodes,node:Tp.node,size:Tp.size,empty:Tp.empty,each:Tp.each,on:vdt,attr:Jft,attrTween:rdt,style:kdt,styleTween:Pdt,text:$dt,textTween:Fdt,remove:_dt,tween:qft,delay:odt,duration:ldt,ease:fdt,easeVarying:hdt,end:Bdt,[Symbol.iterator]:Tp[Symbol.iterator]};function zdt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Vdt={time:null,delay:0,duration:250,ease:zdt};function Hdt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function qdt(e){var t,n;e instanceof Rm?(t=e._id,e=e._name):(t=ATe(),(n=Vdt).time=S6(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&T6(u,e,t,l,o,n||Hdt(u,t));return new Rm(r,this._parents,e,t)}tk.prototype.interrupt=zft;tk.prototype.transition=qdt;const b9=e=>()=>e;function Wdt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Gdt(e){e.stopImmediatePropagation()}function _9(e){e.preventDefault(),e.stopImmediatePropagation()}var gle={name:"drag"},w9={name:"space"},b_={name:"handle"},__={name:"center"};const{abs:yle,max:ea,min:ta}=Math;function vle(e){return[+e[0],+e[1]]}function GU(e){return[vle(e[0]),vle(e[1])]}var KP={name:"x",handles:["w","e"].map(EA),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},XP={name:"y",handles:["n","s"].map(EA),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Ydt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(EA),input:function(e){return e==null?null:GU(e)},output:function(e){return e}},Cp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ble={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},_le={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Kdt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Xdt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function EA(e){return{type:e}}function Qdt(e){return!e.ctrlKey&&!e.button}function Jdt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Zdt(){return navigator.maxTouchPoints||"ontouchstart"in this}function E9(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function eht(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function tht(){return wK(KP)}function nht(){return wK(XP)}function rht(){return wK(Ydt)}function wK(e){var t=Jdt,n=Qdt,r=Zdt,i=!0,s=v6("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([EA("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Cp.overlay).merge(y).each(function(){var b=E9(this).extent;xo(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([EA("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Cp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return Cp[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,_=b.__brush,x=c(b,arguments),S=_.selection,E=e.input(typeof y=="function"?y.apply(this,arguments):y,_.extent),T=tg(S,E);function A(k){_.selection=k===1&&E===null?null:T(k),l.call(b),x.brush()}return S!==null&&E!==null?A:A(1)}):g.each(function(){var b=this,_=arguments,x=b.__brush,S=e.input(typeof y=="function"?y.apply(b,_):y,x.extent),E=c(b,_).beforestart();WU(b),x.selection=S===null?null:S,l.call(b),E.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=xo(this),y=E9(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=xo(this.that).datum();s.call(g,this.that,new Wdt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?gle:i&&g.altKey?__:b_,_=e===XP?null:Kdt[v],x=e===KP?null:Xdt[v],S=E9(y),E=S.extent,T=S.selection,A=E[0][0],k,R,$=E[0][1],P,O,M=E[1][0],j,B,U=E[1][1],V,D,z=0,W=0,F,H=_&&x&&i&&g.shiftKey,G,ee,le=Array.from(g.touches||[g],be=>{const Ae=be.identifier;return be=Jue(be,y),be.point0=be.slice(),be.identifier=Ae,be});WU(y);var de=c(y,arguments,!0).beforestart();if(v==="overlay"){T&&(F=!0);const be=[le[0],le[1]||le[0]];S.selection=T=[[k=e===XP?A:ta(be[0][0],be[1][0]),P=e===KP?$:ta(be[0][1],be[1][1])],[j=e===XP?M:ea(be[0][0],be[1][0]),V=e===KP?U:ea(be[0][1],be[1][1])]],le.length>1&&Ye(g)}else k=T[0][0],P=T[0][1],j=T[1][0],V=T[1][1];R=k,O=P,B=j,D=V;var he=xo(y).attr("pointer-events","none"),ye=he.selectAll(".overlay").attr("cursor",Cp[v]);if(g.touches)de.moved=ve,de.ended=Ue;else{var Ce=xo(g.view).on("mousemove.brush",ve,!0).on("mouseup.brush",Ue,!0);i&&Ce.on("keydown.brush",pt,!0).on("keyup.brush",rt,!0),Kct(g.view)}l.call(y),de.start(g,b.name);function ve(be){for(const Ae of be.changedTouches||[be])for(const Ve of le)Ve.identifier===Ae.identifier&&(Ve.cur=Jue(Ae,y));if(H&&!G&&!ee&&le.length===1){const Ae=le[0];yle(Ae.cur[0]-Ae[0])>yle(Ae.cur[1]-Ae[1])?ee=!0:G=!0}for(const Ae of le)Ae.cur&&(Ae[0]=Ae.cur[0],Ae[1]=Ae.cur[1]);F=!0,_9(be),Ye(be)}function Ye(be){const Ae=le[0],Ve=Ae.point0;var ut;switch(z=Ae[0]-Ve[0],W=Ae[1]-Ve[1],b){case w9:case gle:{_&&(z=ea(A-k,ta(M-j,z)),R=k+z,B=j+z),x&&(W=ea($-P,ta(U-V,W)),O=P+W,D=V+W);break}case b_:{le[1]?(_&&(R=ea(A,ta(M,le[0][0])),B=ea(A,ta(M,le[1][0])),_=1),x&&(O=ea($,ta(U,le[0][1])),D=ea($,ta(U,le[1][1])),x=1)):(_<0?(z=ea(A-k,ta(M-k,z)),R=k+z,B=j):_>0&&(z=ea(A-j,ta(M-j,z)),R=k,B=j+z),x<0?(W=ea($-P,ta(U-P,W)),O=P+W,D=V):x>0&&(W=ea($-V,ta(U-V,W)),O=P,D=V+W));break}case __:{_&&(R=ea(A,ta(M,k-z*_)),B=ea(A,ta(M,j+z*_))),x&&(O=ea($,ta(U,P-W*x)),D=ea($,ta(U,V+W*x)));break}}B<R&&(_*=-1,ut=k,k=j,j=ut,ut=R,R=B,B=ut,v in ble&&ye.attr("cursor",Cp[v=ble[v]])),D<O&&(x*=-1,ut=P,P=V,V=ut,ut=O,O=D,D=ut,v in _le&&ye.attr("cursor",Cp[v=_le[v]])),S.selection&&(T=S.selection),G&&(R=T[0][0],B=T[1][0]),ee&&(O=T[0][1],D=T[1][1]),(T[0][0]!==R||T[0][1]!==O||T[1][0]!==B||T[1][1]!==D)&&(S.selection=[[R,O],[B,D]],l.call(y),de.brush(be,b.name))}function Ue(be){if(Gdt(be),be.touches){if(be.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else Xct(be.view,F),Ce.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);he.attr("pointer-events","all"),ye.attr("cursor",Cp.overlay),S.selection&&(T=S.selection),eht(T)&&(S.selection=null,l.call(y)),de.end(be,b.name)}function pt(be){switch(be.keyCode){case 16:{H=_&&x;break}case 18:{b===b_&&(_&&(j=B-z*_,k=R+z*_),x&&(V=D-W*x,P=O+W*x),b=__,Ye(be));break}case 32:{(b===b_||b===__)&&(_<0?j=B-z:_>0&&(k=R-z),x<0?V=D-W:x>0&&(P=O-W),b=w9,ye.attr("cursor",Cp.selection),Ye(be));break}default:return}_9(be)}function rt(be){switch(be.keyCode){case 16:{H&&(G=ee=H=!1,Ye(be));break}case 18:{b===__&&(_<0?j=B:_>0&&(k=R),x<0?V=D:x>0&&(P=O),b=b_,Ye(be));break}case 32:{b===w9&&(be.altKey?(_&&(j=B-z*_,k=R+z*_),x&&(V=D-W*x,P=O+W*x),b=__):(_<0?j=B:_>0&&(k=R),x<0?V=D:x>0&&(P=O),b=b_),ye.attr("cursor",Cp[v]),Ye(be));break}default:return}_9(be)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=GU(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:b9(GU(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:b9(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:b9(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const YU=Math.PI,KU=2*YU,Tv=1e-6,iht=KU-Tv;function ITe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function sht(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ITe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let EK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ITe:sht(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Tv)if(!(Math.abs(f*u-l*c)>Tv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((YU-Math.acos((m+d-g)/(2*y*v)))/2),_=b/v,x=b/y;Math.abs(_-1)>Tv&&this._append`L${t+_*c},${n+_*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+x*u},${this._y1=n+x*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Tv||Math.abs(this._y1-c)>Tv)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%KU+KU),d>iht?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Tv&&this._append`A${r},${r},0,${+(d>=YU)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function C6(){return new EK}C6.prototype=EK.prototype;const cm=11102230246251565e-32,na=134217729,oht=(3+8*cm)*cm;function x9(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function aht(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function ik(e){return new Float64Array(e)}const uht=(3+16*cm)*cm,lht=(2+12*cm)*cm,cht=(9+64*cm)*cm*cm,w_=ik(4),wle=ik(8),Ele=ik(12),xle=ik(16),Da=ik(4);function fht(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,_,x,S,E,T;const A=e-i,k=n-i,R=t-s,$=r-s;_=A*$,d=na*A,h=d-(d-A),p=A-h,d=na*$,m=d-(d-$),g=$-m,x=p*g-(_-h*m-p*m-h*g),S=R*k,d=na*R,h=d-(d-R),p=R-h,d=na*k,m=d-(d-k),g=k-m,E=p*g-(S-h*m-p*m-h*g),y=x-E,f=x-y,w_[0]=x-(y+f)+(f-E),v=_+y,f=v-_,b=_-(v-f)+(y-f),y=b-S,f=b-y,w_[1]=b-(y+f)+(f-S),T=v+y,f=T-v,w_[2]=v-(T-f)+(y-f),w_[3]=T;let P=aht(4,w_),O=lht*o;if(P>=O||-P>=O||(f=e-A,a=e-(A+f)+(f-i),f=n-k,l=n-(k+f)+(f-i),f=t-R,u=t-(R+f)+(f-s),f=r-$,c=r-($+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(O=cht*o+oht*Math.abs(P),P+=A*c+$*a-(R*l+k*u),P>=O||-P>=O))return P;_=a*$,d=na*a,h=d-(d-a),p=a-h,d=na*$,m=d-(d-$),g=$-m,x=p*g-(_-h*m-p*m-h*g),S=u*k,d=na*u,h=d-(d-u),p=u-h,d=na*k,m=d-(d-k),g=k-m,E=p*g-(S-h*m-p*m-h*g),y=x-E,f=x-y,Da[0]=x-(y+f)+(f-E),v=_+y,f=v-_,b=_-(v-f)+(y-f),y=b-S,f=b-y,Da[1]=b-(y+f)+(f-S),T=v+y,f=T-v,Da[2]=v-(T-f)+(y-f),Da[3]=T;const M=x9(4,w_,4,Da,wle);_=A*c,d=na*A,h=d-(d-A),p=A-h,d=na*c,m=d-(d-c),g=c-m,x=p*g-(_-h*m-p*m-h*g),S=R*l,d=na*R,h=d-(d-R),p=R-h,d=na*l,m=d-(d-l),g=l-m,E=p*g-(S-h*m-p*m-h*g),y=x-E,f=x-y,Da[0]=x-(y+f)+(f-E),v=_+y,f=v-_,b=_-(v-f)+(y-f),y=b-S,f=b-y,Da[1]=b-(y+f)+(f-S),T=v+y,f=T-v,Da[2]=v-(T-f)+(y-f),Da[3]=T;const j=x9(M,wle,4,Da,Ele);_=a*c,d=na*a,h=d-(d-a),p=a-h,d=na*c,m=d-(d-c),g=c-m,x=p*g-(_-h*m-p*m-h*g),S=u*l,d=na*u,h=d-(d-u),p=u-h,d=na*l,m=d-(d-l),g=l-m,E=p*g-(S-h*m-p*m-h*g),y=x-E,f=x-y,Da[0]=x-(y+f)+(f-E),v=_+y,f=v-_,b=_-(v-f)+(y-f),y=b-S,f=b-y,Da[1]=b-(y+f)+(f-S),T=v+y,f=T-v,Da[2]=v-(T-f)+(y-f),Da[3]=T;const B=x9(j,Ele,4,Da,xle);return xle[B-1]}function cN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=uht*l?u:-fht(e,t,n,r,i,s,l)}const Sle=Math.pow(2,-52),fN=new Uint32Array(512);class QD{static from(t,n=ght,r=yht){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new QD(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const k=t[2*A],R=t[2*A+1];k<a&&(a=k),R<u&&(u=R),k>l&&(l=k),R>c&&(c=R),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let A=0,k=1/0;A<o;A++){const R=S9(f,d,t[2*A],t[2*A+1]);R<k&&(h=A,k=R)}const g=t[2*h],y=t[2*h+1];for(let A=0,k=1/0;A<o;A++){if(A===h)continue;const R=S9(g,y,t[2*A],t[2*A+1]);R<k&&R>0&&(p=A,k=R)}let v=t[2*p],b=t[2*p+1],_=1/0;for(let A=0;A<o;A++){if(A===h||A===p)continue;const k=pht(g,y,v,b,t[2*A],t[2*A+1]);k<_&&(m=A,_=k)}let x=t[2*m],S=t[2*m+1];if(_===1/0){for(let R=0;R<o;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];cw(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let k=0;for(let R=0,$=-1/0;R<o;R++){const P=this._ids[R],O=this._dists[P];O>$&&(A[k++]=P,$=O)}this.hull=A.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(cN(g,y,v,b,x,S)<0){const A=p,k=v,R=b;p=m,v=x,b=S,m=A,x=k,S=R}const E=mht(g,y,v,b,x,S);this._cx=E.x,this._cy=E.y;for(let A=0;A<o;A++)this._dists[A]=S9(t[2*A],t[2*A+1],E.x,E.y);cw(this._ids,this._dists,0,o-1),this._hullStart=h;let T=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(x,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let A=0,k,R;A<this._ids.length;A++){const $=this._ids[A],P=t[2*$],O=t[2*$+1];if(A>0&&Math.abs(P-k)<=Sle&&Math.abs(O-R)<=Sle||(k=P,R=O,$===h||$===p||$===m))continue;let M=0;for(let D=0,z=this._hashKey(P,O);D<this._hashSize&&(M=s[(z+D)%this._hashSize],!(M!==-1&&M!==r[M]));D++);M=n[M];let j=M,B;for(;B=r[j],cN(P,O,t[2*j],t[2*j+1],t[2*B],t[2*B+1])>=0;)if(j=B,j===M){j=-1;break}if(j===-1)continue;let U=this._addTriangle(j,$,r[j],-1,-1,i[j]);i[$]=this._legalize(U+2),i[j]=U,T++;let V=r[j];for(;B=r[V],cN(P,O,t[2*V],t[2*V+1],t[2*B],t[2*B+1])<0;)U=this._addTriangle(V,$,B,i[$],-1,i[V]),i[$]=this._legalize(U+2),r[V]=V,T--,V=B;if(j===M)for(;B=n[j],cN(P,O,t[2*B],t[2*B+1],t[2*j],t[2*j+1])<0;)U=this._addTriangle(B,$,j,-1,i[j],i[B]),this._legalize(U+2),i[B]=U,r[j]=j,T--,j=B;this._hullStart=n[$]=j,r[j]=n[V]=$,r[$]=V,s[this._hashKey(P,O)]=$,s[this._hashKey(t[2*j],t[2*j+1])]=j}this.hull=new Uint32Array(T);for(let A=0,k=this._hullStart;A<T;A++)this.hull[A]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(dht(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=fN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(hht(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<fN.length&&(fN[s++]=v)}else{if(s===0)break;t=fN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function dht(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function S9(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function hht(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function pht(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function mht(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function cw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;mT(e,i,s),t[e[n]]>t[e[r]]&&mT(e,n,r),t[e[s]]>t[e[r]]&&mT(e,s,r),t[e[n]]>t[e[s]]&&mT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;mT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(cw(e,t,s,r),cw(e,t,n,o-1)):(cw(e,t,n,o-1),cw(e,t,s,r))}}function mT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function ght(e){return e[0]}function yht(e){return e[1]}const Tle=1e-6;class r1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Tle||Math.abs(this._y1-s)>Tle)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class XU{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let vht=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const _=r[m]*2,x=r[m+1]*2,S=r[m+2]*2,E=t[_],T=t[_+1],A=t[x],k=t[x+1],R=t[S],$=t[S+1],P=A-E,O=k-T,M=R-E,j=$-T,B=(P*j-O*M)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const V of n)s+=t[V*2],o+=t[V*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-E)*j-(o-T)*M);v=(E+R)/2-U*j,b=(T+$)/2+U*M}else{const U=1/B,V=P*P+O*O,D=M*M+j*j;v=E+(j*V-O*D)*U,b=T+(P*D-M*V)*U}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new r1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new r1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new r1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new XU;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const bht=2*Math.PI,E_=Math.pow;function _ht(e){return e[0]}function wht(e){return e[1]}function Eht(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function xht(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class xK{static from(t,n=_ht,r=wht,i){return new xK("length"in t?Sht(t,n,r,i):Float64Array.from(Tht(t,n,r,i)))}constructor(t){this._delaunator=new QD(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Eht(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=xht(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new QD(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new vht(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=E_(n-l[t*2],2)+E_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=E_(n-l[p*2],2)+E_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&E_(n-l[h*2],2)+E_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new r1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new r1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,bht)}return r&&r.value()}renderHull(t){const n=t==null?t=new r1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new XU;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new r1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new XU;return this.renderTriangle(t,n),n.value()}}function Sht(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Tht(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Cle={},T9={},C9=34,gT=10,A9=13;function kTe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Cht(e,t){var n=kTe(e);return function(r,i){return t(n(r),i,e)}}function Ale(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function yu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Aht(e){return e<0?"-"+yu(-e,6):e>9999?"+"+yu(e,6):yu(e,4)}function Iht(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Aht(e.getUTCFullYear())+"-"+yu(e.getUTCMonth()+1,2)+"-"+yu(e.getUTCDate(),2)+(i?"T"+yu(t,2)+":"+yu(n,2)+":"+yu(r,2)+"."+yu(i,3)+"Z":r?"T"+yu(t,2)+":"+yu(n,2)+":"+yu(r,2)+"Z":n||t?"T"+yu(t,2)+":"+yu(n,2)+"Z":"")}function RTe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?Cht(g,d):kTe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===gT&&--p,f.charCodeAt(p-1)===A9&&--p;function _(){if(v)return T9;if(b)return b=!1,Cle;var S,E=m,T;if(f.charCodeAt(E)===C9){for(;m++<p&&f.charCodeAt(m)!==C9||f.charCodeAt(++m)===C9;);return(S=m)>=p?v=!0:(T=f.charCodeAt(m++))===gT?b=!0:T===A9&&(b=!0,f.charCodeAt(m)===gT&&++m),f.slice(E+1,S-1).replace(/""/g,'"')}for(;m<p;){if((T=f.charCodeAt(S=m++))===gT)b=!0;else if(T===A9)b=!0,f.charCodeAt(m)===gT&&++m;else if(T!==n)continue;return f.slice(E,S)}return v=!0,f.slice(E,p)}for(;(y=_())!==T9;){for(var x=[];y!==Cle&&y!==T9;)x.push(y),y=_();d&&(x=d(x,g++))==null||h.push(x)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Ale(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Ale(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Iht(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var kht=RTe(","),Rht=kht.parse;function Nht(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Pht(e,t){return fetch(e,t).then(Nht)}function Oht(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Pht(t,n).then(function(i){return e(i,r)})}}var Dht=Oht(Rht);function $ht(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Mht(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return NTe(this.cover(t,n),t,n,e)}function NTe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function Lht(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)NTe(this,o[n],a[n],e[n]);return this}function Fht(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function jht(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Bht(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ha(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Uht(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Ha(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Ha(h[3],g,y,u,l),new Ha(h[2],o,y,g,l),new Ha(h[1],g,a,u,y),new Ha(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),_=v*v+b*b;if(_<n){var x=Math.sqrt(n=_);i=e-x,s=t-x,c=e+x,f=t+x,r=h.data}}return r}function zht(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function Vht(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Hht(){return this._root}function qht(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Wht(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Ha(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Ha(i,l,c,a,u)),(i=r[2])&&t.push(new Ha(i,s,c,l,u)),(i=r[1])&&t.push(new Ha(i,l,o,a,c)),(i=r[0])&&t.push(new Ha(i,s,o,l,c))}return this}function Ght(e){var t=[],n=[],r;for(this._root&&t.push(new Ha(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Ha(s,o,a,c,f)),(s=i[1])&&t.push(new Ha(s,c,a,u,f)),(s=i[2])&&t.push(new Ha(s,o,f,c,l)),(s=i[3])&&t.push(new Ha(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Yht(e){return e[0]}function Kht(e){return arguments.length?(this._x=e,this):this._x}function Xht(e){return e[1]}function Qht(e){return arguments.length?(this._y=e,this):this._y}function SK(e,t,n){var r=new TK(t??Yht,n??Xht,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function TK(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Ile(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ou=SK.prototype=TK.prototype;ou.copy=function(){var e=new TK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Ile(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Ile(r));return e};ou.add=Mht;ou.addAll=Lht;ou.cover=Fht;ou.data=jht;ou.extent=Bht;ou.find=Uht;ou.remove=zht;ou.removeAll=Vht;ou.root=Hht;ou.size=qht;ou.visit=Wht;ou.visitAfter=Ght;ou.x=Kht;ou.y=Qht;function Wa(e){return function(){return e}}function i0(e){return(e()-.5)*1e-6}function Jht(e){return e.x+e.vx}function Zht(e){return e.y+e.vy}function ept(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Wa(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=SK(t,Jht,Zht).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,_,x,S,E){var T=b.data,A=b.r,k=m+A;if(T){if(T.index>d.index){var R=h-T.x-T.vx,$=p-T.y-T.vy,P=R*R+$*$;P<k*k&&(R===0&&(R=i0(r),P+=R*R),$===0&&($=i0(r),P+=$*$),P=(k-(P=Math.sqrt(P)))/P*i,d.vx+=(R*=P)*(k=(A*=A)/(g+A)),d.vy+=($*=P)*k,T.vx-=R*(k=1-k),T.vy-=$*k)}return}return _>h+k||S<h-k||x>p+k||E<p-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Wa(+l),u(),o):e},o}function tpt(e){return e.index}function kle(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function npt(e){var t=tpt,n=f,r,i=Wa(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,_,x,S,E,T,A,k;b<v;++b)_=e[b],x=_.source,S=_.target,E=S.x+S.vx-x.x-x.vx||i0(l),T=S.y+S.vy-x.y-x.vy||i0(l),A=Math.sqrt(E*E+T*T),A=(A-s[b])/A*g*r[b],E*=A,T*=A,S.vx-=E*(k=u[b]),S.vy-=T*k,x.vx+=E*(k=1-k),x.vy+=T*k}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((x,S)=>[t(x,S,o),x])),_;for(g=0,a=new Array(y);g<v;++g)_=e[g],_.index=g,typeof _.source!="object"&&(_.source=kle(b,_.source)),typeof _.target!="object"&&(_.target=kle(b,_.target)),a[_.source.index]=(a[_.source.index]||0)+1,a[_.target.index]=(a[_.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)_=e[g],u[g]=a[_.source.index]/(a[_.source.index]+a[_.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Wa(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Wa(+g),m(),d):i},d}const rpt=1664525,ipt=1013904223,Rle=4294967296;function spt(){let e=1;return()=>(e=(rpt*e+ipt)%Rle)/Rle}function opt(e){return e.x}function apt(e){return e.y}var upt=10,lpt=Math.PI*(3-Math.sqrt(5));function cpt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=vK(f),l=v6("tick","end"),c=spt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(_){_(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=upt*Math.sqrt(.5+m),b=m*lpt;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,_,x,S,E,T;for(y==null?y=1/0:y*=y,v=0;v<b;++v)E=e[v],_=m-E.x,x=g-E.y,S=_*_+x*x,S<y&&(T=E,y=S);return T},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function fpt(){var e,t,n,r,i=Wa(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=SK(e,opt,apt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,_;if(h.length){for(v=b=_=0;_<4;++_)(m=h[_])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,_=y*y+v*v;if(b*b/u<_)return _<a&&(y===0&&(y=i0(n),_+=y*y),v===0&&(v=i0(n),_+=v*v),_<o&&(_=Math.sqrt(o*_)),t.vx+=y*h.value*r/_,t.vy+=v*h.value*r/_),!0;if(h.length||_>=a)return;(h.data!==t||h.next)&&(y===0&&(y=i0(n),_+=y*y),v===0&&(v=i0(n),_+=v*v),_<o&&(_=Math.sqrt(o*_)));do h.data!==t&&(b=s[h.data.index]*r/_,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Wa(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function dpt(e){var t=Wa(.1),n,r,i;typeof e!="function"&&(e=Wa(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Wa(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Wa(+a),o(),s):e},s}function hpt(e){var t=Wa(.1),n,r,i;typeof e!="function"&&(e=Wa(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Wa(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Wa(+a),o(),s):e},s}function ppt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function JD(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function IE(e){return e=JD(Math.abs(e)),e?e[1]:NaN}function mpt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function gpt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var ypt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function W1(e){if(!(t=ypt.exec(e)))throw new Error("invalid format: "+e);var t;return new CK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}W1.prototype=CK.prototype;function CK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}CK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function vpt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var PTe;function bpt(e,t){var n=JD(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(PTe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+JD(e,Math.max(0,t+s-1))[0]}function Nle(e,t){var n=JD(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ple={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ppt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Nle(e*100,t),r:Nle,s:bpt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ole(e){return e}var Dle=Array.prototype.map,$le=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function OTe(e){var t=e.grouping===void 0||e.thousands===void 0?Ole:mpt(Dle.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Ole:gpt(Dle.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=W1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,_=f.trim,x=f.type;x==="n"?(v=!0,x="g"):Ple[x]||(b===void 0&&(b=12),_=!0,x="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",E=m==="$"?r:/[%p]/.test(x)?o:"",T=Ple[x],A=/[defgprs%]/.test(x);b=b===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function k(R){var $=S,P=E,O,M,j;if(x==="c")P=T(R)+P,R="";else{R=+R;var B=R<0||1/R<0;if(R=isNaN(R)?u:T(Math.abs(R),b),_&&(R=vpt(R)),B&&+R==0&&p!=="+"&&(B=!1),$=(B?p==="("?p:a:p==="-"||p==="("?"":p)+$,P=(x==="s"?$le[8+PTe/3]:"")+P+(B&&p==="("?")":""),A){for(O=-1,M=R.length;++O<M;)if(j=R.charCodeAt(O),48>j||j>57){P=(j===46?i+R.slice(O+1):R.slice(O))+P,R=R.slice(0,O);break}}}v&&!g&&(R=t(R,1/0));var U=$.length+R.length+P.length,V=U<y?new Array(y-U+1).join(d):"";switch(v&&g&&(R=t(V+R,V.length?y-P.length:1/0),V=""),h){case"<":R=$+R+P+V;break;case"=":R=$+V+R+P;break;case"^":R=V.slice(0,U=V.length>>1)+$+R+P+V.slice(U);break;default:R=V+$+R+P;break}return s(R)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=W1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(IE(d)/3)))*3,m=Math.pow(10,-p),g=$le[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var dN,tS,AK;_pt({thousands:",",grouping:[3],currency:["$",""]});function _pt(e){return dN=OTe(e),tS=dN.format,AK=dN.formatPrefix,dN}function DTe(e){return Math.max(0,-IE(Math.abs(e)))}function $Te(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(IE(t)/3)))*3-IE(Math.abs(e)))}function MTe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,IE(t)-IE(e))+1}var jt=1e-6,ZD=1e-12,Rn=Math.PI,Qi=Rn/2,e3=Rn/4,Za=Rn*2,as=180/Rn,In=Rn/180,Gn=Math.abs,nS=Math.atan,$c=Math.atan2,zt=Math.cos,hN=Math.ceil,LTe=Math.exp,QU=Math.hypot,t3=Math.log,I9=Math.pow,Lt=Math.sin,_c=Math.sign||function(e){return e>0?1:e<0?-1:0},eu=Math.sqrt,IK=Math.tan;function FTe(e){return e>1?0:e<-1?Rn:Math.acos(e)}function Wu(e){return e>1?Qi:e<-1?-Qi:Math.asin(e)}function Ro(){}function n3(e,t){e&&Lle.hasOwnProperty(e.type)&&Lle[e.type](e,t)}var Mle={Feature:function(e,t){n3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)n3(n[r].geometry,t)}},Lle={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){JU(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)JU(n[r],t,0)},Polygon:function(e,t){Fle(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Fle(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)n3(n[r],t)}};function JU(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Fle(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)JU(e[n],t,1);t.polygonEnd()}function Hp(e,t){e&&Mle.hasOwnProperty(e.type)?Mle[e.type](e,t):n3(e,t)}var r3=new Ya,i3=new Ya,jTe,BTe,ZU,ez,tz,Rh={point:Ro,lineStart:Ro,lineEnd:Ro,polygonStart:function(){r3=new Ya,Rh.lineStart=wpt,Rh.lineEnd=Ept},polygonEnd:function(){var e=+r3;i3.add(e<0?Za+e:e),this.lineStart=this.lineEnd=this.point=Ro},sphere:function(){i3.add(Za)}};function wpt(){Rh.point=xpt}function Ept(){UTe(jTe,BTe)}function xpt(e,t){Rh.point=UTe,jTe=e,BTe=t,e*=In,t*=In,ZU=e,ez=zt(t=t/2+e3),tz=Lt(t)}function UTe(e,t){e*=In,t*=In,t=t/2+e3;var n=e-ZU,r=n>=0?1:-1,i=r*n,s=zt(t),o=Lt(t),a=tz*o,u=ez*s+a*zt(i),l=a*r*Lt(i);r3.add($c(l,u)),ZU=e,ez=s,tz=o}function Spt(e){return i3=new Ya,Hp(e,Rh),i3*2}function s3(e){return[$c(e[1],e[0]),Wu(e[2])]}function G1(e){var t=e[0],n=e[1],r=zt(n);return[r*zt(t),r*Lt(t),Lt(n)]}function pN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function kE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function k9(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function mN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function o3(e){var t=eu(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ni,Tu,Vi,yl,Cv,zTe,VTe,Vw,o2,Lg,Nm,jp={point:nz,lineStart:jle,lineEnd:Ble,polygonStart:function(){jp.point=qTe,jp.lineStart=Tpt,jp.lineEnd=Cpt,o2=new Ya,Rh.polygonStart()},polygonEnd:function(){Rh.polygonEnd(),jp.point=nz,jp.lineStart=jle,jp.lineEnd=Ble,r3<0?(Ni=-(Vi=180),Tu=-(yl=90)):o2>jt?yl=90:o2<-jt&&(Tu=-90),Nm[0]=Ni,Nm[1]=Vi},sphere:function(){Ni=-(Vi=180),Tu=-(yl=90)}};function nz(e,t){Lg.push(Nm=[Ni=e,Vi=e]),t<Tu&&(Tu=t),t>yl&&(yl=t)}function HTe(e,t){var n=G1([e*In,t*In]);if(Vw){var r=kE(Vw,n),i=[r[1],-r[0],0],s=kE(i,r);o3(s),s=s3(s);var o=e-Cv,a=o>0?1:-1,u=s[0]*as*a,l,c=Gn(o)>180;c^(a*Cv<u&&u<a*e)?(l=s[1]*as,l>yl&&(yl=l)):(u=(u+360)%360-180,c^(a*Cv<u&&u<a*e)?(l=-s[1]*as,l<Tu&&(Tu=l)):(t<Tu&&(Tu=t),t>yl&&(yl=t))),c?e<Cv?ml(Ni,e)>ml(Ni,Vi)&&(Vi=e):ml(e,Vi)>ml(Ni,Vi)&&(Ni=e):Vi>=Ni?(e<Ni&&(Ni=e),e>Vi&&(Vi=e)):e>Cv?ml(Ni,e)>ml(Ni,Vi)&&(Vi=e):ml(e,Vi)>ml(Ni,Vi)&&(Ni=e)}else Lg.push(Nm=[Ni=e,Vi=e]);t<Tu&&(Tu=t),t>yl&&(yl=t),Vw=n,Cv=e}function jle(){jp.point=HTe}function Ble(){Nm[0]=Ni,Nm[1]=Vi,jp.point=nz,Vw=null}function qTe(e,t){if(Vw){var n=e-Cv;o2.add(Gn(n)>180?n+(n>0?360:-360):n)}else zTe=e,VTe=t;Rh.point(e,t),HTe(e,t)}function Tpt(){Rh.lineStart()}function Cpt(){qTe(zTe,VTe),Rh.lineEnd(),Gn(o2)>jt&&(Ni=-(Vi=180)),Nm[0]=Ni,Nm[1]=Vi,Vw=null}function ml(e,t){return(t-=e)<0?t+360:t}function Apt(e,t){return e[0]-t[0]}function Ule(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Ipt(e){var t,n,r,i,s,o,a;if(yl=Vi=-(Ni=Tu=1/0),Lg=[],Hp(e,jp),n=Lg.length){for(Lg.sort(Apt),t=1,r=Lg[0],s=[r];t<n;++t)i=Lg[t],Ule(r,i[0])||Ule(r,i[1])?(ml(r[0],i[1])>ml(r[0],r[1])&&(r[1]=i[1]),ml(i[0],r[1])>ml(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=ml(r[1],i[0]))>o&&(o=a,Ni=i[0],Vi=r[1])}return Lg=Nm=null,Ni===1/0||Tu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ni,Tu],[Vi,yl]]}var aC,a3,u3,l3,c3,f3,d3,h3,rz,iz,sz,WTe,GTe,Ua,za,Va,Pf={sphere:Ro,point:kK,lineStart:zle,lineEnd:Vle,polygonStart:function(){Pf.lineStart=Npt,Pf.lineEnd=Ppt},polygonEnd:function(){Pf.lineStart=zle,Pf.lineEnd=Vle}};function kK(e,t){e*=In,t*=In;var n=zt(t);sk(n*zt(e),n*Lt(e),Lt(t))}function sk(e,t,n){++aC,u3+=(e-u3)/aC,l3+=(t-l3)/aC,c3+=(n-c3)/aC}function zle(){Pf.point=kpt}function kpt(e,t){e*=In,t*=In;var n=zt(t);Ua=n*zt(e),za=n*Lt(e),Va=Lt(t),Pf.point=Rpt,sk(Ua,za,Va)}function Rpt(e,t){e*=In,t*=In;var n=zt(t),r=n*zt(e),i=n*Lt(e),s=Lt(t),o=$c(eu((o=za*s-Va*i)*o+(o=Va*r-Ua*s)*o+(o=Ua*i-za*r)*o),Ua*r+za*i+Va*s);a3+=o,f3+=o*(Ua+(Ua=r)),d3+=o*(za+(za=i)),h3+=o*(Va+(Va=s)),sk(Ua,za,Va)}function Vle(){Pf.point=kK}function Npt(){Pf.point=Opt}function Ppt(){YTe(WTe,GTe),Pf.point=kK}function Opt(e,t){WTe=e,GTe=t,e*=In,t*=In,Pf.point=YTe;var n=zt(t);Ua=n*zt(e),za=n*Lt(e),Va=Lt(t),sk(Ua,za,Va)}function YTe(e,t){e*=In,t*=In;var n=zt(t),r=n*zt(e),i=n*Lt(e),s=Lt(t),o=za*s-Va*i,a=Va*r-Ua*s,u=Ua*i-za*r,l=QU(o,a,u),c=Wu(l),f=l&&-c/l;rz.add(f*o),iz.add(f*a),sz.add(f*u),a3+=c,f3+=c*(Ua+(Ua=r)),d3+=c*(za+(za=i)),h3+=c*(Va+(Va=s)),sk(Ua,za,Va)}function Dpt(e){aC=a3=u3=l3=c3=f3=d3=h3=0,rz=new Ya,iz=new Ya,sz=new Ya,Hp(e,Pf);var t=+rz,n=+iz,r=+sz,i=QU(t,n,r);return i<ZD&&(t=f3,n=d3,r=h3,a3<jt&&(t=u3,n=l3,r=c3),i=QU(t,n,r),i<ZD)?[NaN,NaN]:[$c(n,t)*as,Wu(r/i)*as]}function oz(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function az(e,t){return Gn(e)>Rn&&(e-=Math.round(e/Za)*Za),[e,t]}az.invert=az;function KTe(e,t,n){return(e%=Za)?t||n?oz(qle(e),Wle(t,n)):qle(e):t||n?Wle(t,n):az}function Hle(e){return function(t,n){return t+=e,Gn(t)>Rn&&(t-=Math.round(t/Za)*Za),[t,n]}}function qle(e){var t=Hle(e);return t.invert=Hle(-e),t}function Wle(e,t){var n=zt(e),r=Lt(e),i=zt(t),s=Lt(t);function o(a,u){var l=zt(u),c=zt(a)*l,f=Lt(a)*l,d=Lt(u),h=d*n+c*r;return[$c(f*i-h*s,c*n-d*r),Wu(h*i+f*s)]}return o.invert=function(a,u){var l=zt(u),c=zt(a)*l,f=Lt(a)*l,d=Lt(u),h=d*i-f*s;return[$c(f*i+d*s,c*n+h*r),Wu(h*n-c*r)]},o}function $pt(e){e=KTe(e[0]*In,e[1]*In,e.length>2?e[2]*In:0);function t(n){return n=e(n[0]*In,n[1]*In),n[0]*=as,n[1]*=as,n}return t.invert=function(n){return n=e.invert(n[0]*In,n[1]*In),n[0]*=as,n[1]*=as,n},t}function Mpt(e,t,n,r,i,s){if(n){var o=zt(t),a=Lt(t),u=r*n;i==null?(i=t+r*Za,s=t-u/2):(i=Gle(o,i),s=Gle(o,s),(r>0?i<s:i>s)&&(i+=r*Za));for(var l,c=i;r>0?c>s:c<s;c-=u)l=s3([o,-a*zt(c),-a*Lt(c)]),e.point(l[0],l[1])}}function Gle(e,t){t=G1(t),t[0]-=e,o3(t);var n=FTe(-t[1]);return((-t[2]<0?-n:n)+Za-jt)%Za}function XTe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Ro,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function QP(e,t){return Gn(e[0]-t[0])<jt&&Gn(e[1]-t[1])<jt}function gN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function QTe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(QP(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*jt}s.push(v=new gN(g,p,null,!0)),o.push(v.o=new gN(g,null,v,!1)),s.push(v=new gN(y,p,null,!1)),o.push(v.o=new gN(y,null,v,!0))}}),!!s.length){for(o.sort(t),Yle(s),Yle(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Yle(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function R9(e){return Gn(e[0])<=Rn?e[0]:_c(e[0])*((Gn(e[0])+Rn)%Za-Rn)}function Lpt(e,t){var n=R9(t),r=t[1],i=Lt(r),s=[Lt(n),-zt(n),0],o=0,a=0,u=new Ya;i===1?r=Qi+jt:i===-1&&(r=-Qi-jt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=R9(h),m=h[1]/2+e3,g=Lt(m),y=zt(m),v=0;v<d;++v,p=_,g=S,y=E,h=b){var b=f[v],_=R9(b),x=b[1]/2+e3,S=Lt(x),E=zt(x),T=_-p,A=T>=0?1:-1,k=A*T,R=k>Rn,$=g*S;if(u.add($c($*A*Lt(k),y*E+$*zt(k))),o+=R?T+A*Za:T,R^p>=n^_>=n){var P=kE(G1(h),G1(b));o3(P);var O=kE(s,P);o3(O);var M=(R^T>=0?-1:1)*Wu(O[2]);(r>M||r===M&&(P[0]||P[1]))&&(a+=R^T>=0?1:-1)}}return(o<-jt||o<jt&&u<-ZD)^a&1}function JTe(e,t,n,r){return function(i){var s=t(i),o=XTe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=MSe(c);var _=Lpt(l,r);c.length?(u||(i.polygonStart(),u=!0),QTe(c,jpt,_,n,i)):_&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(_,x){e(_,x)&&i.point(_,x)}function p(_,x){s.point(_,x)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(_,x){f.push([_,x]),a.point(_,x)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var _=a.clean(),x=o.result(),S,E=x.length,T,A,k;if(f.pop(),l.push(f),f=null,!!E){if(_&1){if(A=x[0],(T=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<T;++S)i.point((k=A[S])[0],k[1]);i.lineEnd()}return}E>1&&_&2&&x.push(x.pop().concat(x.shift())),c.push(x.filter(Fpt))}}return d}}function Fpt(e){return e.length>1}function jpt(e,t){return((e=e.x)[0]<0?e[1]-Qi-jt:Qi-e[1])-((t=t.x)[0]<0?t[1]-Qi-jt:Qi-t[1])}const Kle=JTe(function(){return!0},Bpt,zpt,[-Rn,-Qi]);function Bpt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Rn:-Rn,u=Gn(s-t);Gn(u-Rn)<jt?(e.point(t,n=(n+o)/2>0?Qi:-Qi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Rn&&(Gn(t-r)<jt&&(t-=r*jt),Gn(s-a)<jt&&(s-=a*jt),n=Upt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Upt(e,t,n,r){var i,s,o=Lt(e-n);return Gn(o)>jt?nS((Lt(t)*(s=zt(r))*Lt(n)-Lt(r)*(i=zt(t))*Lt(e))/(i*s*o)):(t+r)/2}function zpt(e,t,n,r){var i;if(e==null)i=n*Qi,r.point(-Rn,i),r.point(0,i),r.point(Rn,i),r.point(Rn,0),r.point(Rn,-i),r.point(0,-i),r.point(-Rn,-i),r.point(-Rn,0),r.point(-Rn,i);else if(Gn(e[0]-t[0])>jt){var s=e[0]<t[0]?Rn:-Rn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Vpt(e){var t=zt(e),n=2*In,r=t>0,i=Gn(t)>jt;function s(c,f,d,h){Mpt(h,e,n,d,c,f)}function o(c,f){return zt(c)*zt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,_=o(g,y),x=r?_?0:l(g,y):_?l(g+(g<0?Rn:-Rn),y):0;if(!f&&(p=h=_)&&c.lineStart(),_!==h&&(b=u(f,v),(!b||QP(f,b)||QP(v,b))&&(v[2]=1)),_!==h)m=0,_?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^_){var S;!(x&d)&&(S=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}_&&(!f||!QP(f,v))&&c.point(v[0],v[1]),f=v,h=_,d=x},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=G1(c),p=G1(f),m=[1,0,0],g=kE(h,p),y=pN(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var _=t*y/b,x=-t*v/b,S=kE(m,g),E=mN(m,_),T=mN(g,x);k9(E,T);var A=S,k=pN(E,A),R=pN(A,A),$=k*k-R*(pN(E,E)-1);if(!($<0)){var P=eu($),O=mN(A,(-k-P)/R);if(k9(O,E),O=s3(O),!d)return O;var M=c[0],j=f[0],B=c[1],U=f[1],V;j<M&&(V=M,M=j,j=V);var D=j-M,z=Gn(D-Rn)<jt,W=z||D<jt;if(!z&&U<B&&(V=B,B=U,U=V),W?z?B+U>0^O[1]<(Gn(O[0]-M)<jt?B:U):B<=O[1]&&O[1]<=U:D>Rn^(M<=O[0]&&O[0]<=j)){var F=mN(A,(-k+P)/R);return k9(F,E),[O,s3(F)]}}}function l(c,f){var d=r?e:Rn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return JTe(o,a,s,r?[0,-e]:[-Rn,e-Rn])}function Hpt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var uC=1e9,yN=-uC;function ZTe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Gn(l[0]-e)<jt?c>0?0:3:Gn(l[0]-n)<jt?c>0?2:1:Gn(l[1]-t)<jt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=XTe(),d,h,p,m,g,y,v,b,_,x,S,E={point:T,lineStart:$,lineEnd:P,polygonStart:k,polygonEnd:R};function T(M,j){i(M,j)&&c.point(M,j)}function A(){for(var M=0,j=0,B=h.length;j<B;++j)for(var U=h[j],V=1,D=U.length,z=U[0],W,F,H=z[0],G=z[1];V<D;++V)W=H,F=G,z=U[V],H=z[0],G=z[1],F<=r?G>r&&(H-W)*(r-F)>(G-F)*(e-W)&&++M:G<=r&&(H-W)*(r-F)<(G-F)*(e-W)&&--M;return M}function k(){c=f,d=[],h=[],S=!0}function R(){var M=A(),j=S&&M,B=(d=MSe(d)).length;(j||B)&&(l.polygonStart(),j&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&QTe(d,a,M,s,l),l.polygonEnd()),c=l,d=h=p=null}function $(){E.point=O,h&&h.push(p=[]),x=!0,_=!1,v=b=NaN}function P(){d&&(O(m,g),y&&_&&f.rejoin(),d.push(f.result())),E.point=T,_&&c.lineEnd()}function O(M,j){var B=i(M,j);if(h&&p.push([M,j]),x)m=M,g=j,y=B,x=!1,B&&(c.lineStart(),c.point(M,j));else if(B&&_)c.point(M,j);else{var U=[v=Math.max(yN,Math.min(uC,v)),b=Math.max(yN,Math.min(uC,b))],V=[M=Math.max(yN,Math.min(uC,M)),j=Math.max(yN,Math.min(uC,j))];Hpt(U,V,e,t,n,r)?(_||(c.lineStart(),c.point(U[0],U[1])),c.point(V[0],V[1]),B||c.lineEnd(),S=!1):B&&(c.lineStart(),c.point(M,j),S=!1)}v=M,b=j,_=B}return E}}function Xle(e,t,n){var r=Pu(e,t-jt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Qle(e,t,n){var r=Pu(e,t-jt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function qpt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Pu(hN(r/c)*c,n,c).map(p).concat(Pu(hN(a/f)*f,o,f).map(m)).concat(Pu(hN(t/u)*u,e,u).filter(function(b){return Gn(b%c)>jt}).map(d)).concat(Pu(hN(s/l)*l,i,l).filter(function(b){return Gn(b%f)>jt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=Xle(s,i,90),h=Qle(t,e,g),p=Xle(a,o,90),m=Qle(r,n,g),y):g},y.extentMajor([[-180,-90+jt],[180,90-jt]]).extentMinor([[-180,-80-jt],[180,80+jt]])}const xA=e=>e;var N9=new Ya,uz=new Ya,eCe,tCe,lz,cz,qp={point:Ro,lineStart:Ro,lineEnd:Ro,polygonStart:function(){qp.lineStart=Wpt,qp.lineEnd=Ypt},polygonEnd:function(){qp.lineStart=qp.lineEnd=qp.point=Ro,N9.add(Gn(uz)),uz=new Ya},result:function(){var e=N9/2;return N9=new Ya,e}};function Wpt(){qp.point=Gpt}function Gpt(e,t){qp.point=nCe,eCe=lz=e,tCe=cz=t}function nCe(e,t){uz.add(cz*e-lz*t),lz=e,cz=t}function Ypt(){nCe(eCe,tCe)}var RE=1/0,p3=RE,SA=-RE,m3=SA,g3={point:Kpt,lineStart:Ro,lineEnd:Ro,polygonStart:Ro,polygonEnd:Ro,result:function(){var e=[[RE,p3],[SA,m3]];return SA=m3=-(p3=RE=1/0),e}};function Kpt(e,t){e<RE&&(RE=e),e>SA&&(SA=e),t<p3&&(p3=t),t>m3&&(m3=t)}var fz=0,dz=0,lC=0,y3=0,v3=0,fw=0,hz=0,pz=0,cC=0,rCe,iCe,Gd,Yd,pc={point:Y1,lineStart:Jle,lineEnd:Zle,polygonStart:function(){pc.lineStart=Jpt,pc.lineEnd=Zpt},polygonEnd:function(){pc.point=Y1,pc.lineStart=Jle,pc.lineEnd=Zle},result:function(){var e=cC?[hz/cC,pz/cC]:fw?[y3/fw,v3/fw]:lC?[fz/lC,dz/lC]:[NaN,NaN];return fz=dz=lC=y3=v3=fw=hz=pz=cC=0,e}};function Y1(e,t){fz+=e,dz+=t,++lC}function Jle(){pc.point=Xpt}function Xpt(e,t){pc.point=Qpt,Y1(Gd=e,Yd=t)}function Qpt(e,t){var n=e-Gd,r=t-Yd,i=eu(n*n+r*r);y3+=i*(Gd+e)/2,v3+=i*(Yd+t)/2,fw+=i,Y1(Gd=e,Yd=t)}function Zle(){pc.point=Y1}function Jpt(){pc.point=emt}function Zpt(){sCe(rCe,iCe)}function emt(e,t){pc.point=sCe,Y1(rCe=Gd=e,iCe=Yd=t)}function sCe(e,t){var n=e-Gd,r=t-Yd,i=eu(n*n+r*r);y3+=i*(Gd+e)/2,v3+=i*(Yd+t)/2,fw+=i,i=Yd*e-Gd*t,hz+=i*(Gd+e),pz+=i*(Yd+t),cC+=i*3,Y1(Gd=e,Yd=t)}function oCe(e){this._context=e}oCe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Za);break}}},result:Ro};var mz=new Ya,P9,aCe,uCe,fC,dC,TA={point:Ro,lineStart:function(){TA.point=tmt},lineEnd:function(){P9&&lCe(aCe,uCe),TA.point=Ro},polygonStart:function(){P9=!0},polygonEnd:function(){P9=null},result:function(){var e=+mz;return mz=new Ya,e}};function tmt(e,t){TA.point=lCe,aCe=fC=e,uCe=dC=t}function lCe(e,t){fC-=e,dC-=t,mz.add(eu(fC*fC+dC*dC)),fC=e,dC=t}let ece,b3,tce,nce;class rce{constructor(t){this._append=t==null?cCe:nmt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==tce||this._append!==b3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,tce=r,b3=this._append,nce=this._,this._=i}this._+=nce;break}}}result(){const t=this._;return this._="",t.length?t:null}}function cCe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function nmt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return cCe;if(t!==ece){const n=10**t;ece=t,b3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return b3}function fCe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Hp(a,i(s))),s.result()}return o.area=function(a){return Hp(a,i(qp)),qp.result()},o.measure=function(a){return Hp(a,i(TA)),TA.result()},o.bounds=function(a){return Hp(a,i(g3)),g3.result()},o.centroid=function(a){return Hp(a,i(pc)),pc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,xA):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new rce(n)):new oCe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new rce(n)),o},o.projection(e).digits(n).context(t)}function A6(e){return function(t){var n=new gz;for(var r in e)n[r]=e[r];return n.stream=t,n}}function gz(){}gz.prototype={constructor:gz,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function RK(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Hp(n,e.stream(g3)),t(g3.result()),r!=null&&e.clipExtent(r),e}function I6(e,t,n){return RK(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function NK(e,t,n){return I6(e,[[0,0],t],n)}function PK(e,t,n){return RK(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function OK(e,t,n){return RK(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var ice=16,rmt=zt(30*In);function sce(e,t){return+t?smt(e,t):imt(e)}function imt(e){return A6({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function smt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var _=o+d,x=a+h,S=u+p,E=eu(_*_+x*x+S*S),T=Wu(S/=E),A=Gn(Gn(S)-1)<jt||Gn(s-f)<jt?(s+f)/2:$c(x,_),k=e(A,T),R=k[0],$=k[1],P=R-r,O=$-i,M=v*P-y*O;(M*M/b>t||Gn((y*P+v*O)/b-.5)>.3||o*d+a*h+u*p<rmt)&&(n(r,i,s,o,a,u,R,$,A,_/=E,x/=E,S,m,g),g.point(R,$),n(R,$,A,_,x,S,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:_,polygonStart:function(){r.polygonStart(),g.lineStart=x},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(T,A){T=e(T,A),r.point(T[0],T[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(T,A){var k=G1([T,A]),R=e(T,A);n(f,d,c,h,p,m,f=R[0],d=R[1],c=T,h=k[0],p=k[1],m=k[2],ice,r),r.point(f,d)}function _(){g.point=y,r.lineEnd()}function x(){v(),g.point=S,g.lineEnd=E}function S(T,A){b(i=T,A),s=f,o=d,a=h,u=p,l=m,g.point=b}function E(){n(f,d,c,h,p,m,s,o,i,a,u,l,ice,r),g.lineEnd=_,_()}return g}}var omt=A6({point:function(e,t){this.stream.point(e*In,t*In)}});function amt(e){return A6({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function umt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function oce(e,t,n,r,i,s){if(!s)return umt(e,t,n,r,i);var o=zt(s),a=Lt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function ip(e){return dCe(function(){return e})()}function dCe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Kle,g=null,y,v,b,_=xA,x=.5,S,E,T,A,k;function R(M){return T(M[0]*In,M[1]*In)}function $(M){return M=T.invert(M[0],M[1]),M&&[M[0]*as,M[1]*as]}R.stream=function(M){return A&&k===M?A:A=omt(amt(c)(m(S(_(k=M)))))},R.preclip=function(M){return arguments.length?(m=M,p=void 0,O()):m},R.postclip=function(M){return arguments.length?(_=M,g=y=v=b=null,O()):_},R.clipAngle=function(M){return arguments.length?(m=+M?Vpt(p=M*In):(p=null,Kle),O()):p*as},R.clipExtent=function(M){return arguments.length?(_=M==null?(g=y=v=b=null,xA):ZTe(g=+M[0][0],y=+M[0][1],v=+M[1][0],b=+M[1][1]),O()):g==null?null:[[g,y],[v,b]]},R.scale=function(M){return arguments.length?(n=+M,P()):n},R.translate=function(M){return arguments.length?(r=+M[0],i=+M[1],P()):[r,i]},R.center=function(M){return arguments.length?(s=M[0]%360*In,o=M[1]%360*In,P()):[s*as,o*as]},R.rotate=function(M){return arguments.length?(a=M[0]%360*In,u=M[1]%360*In,l=M.length>2?M[2]%360*In:0,P()):[a*as,u*as,l*as]},R.angle=function(M){return arguments.length?(f=M%360*In,P()):f*as},R.reflectX=function(M){return arguments.length?(d=M?-1:1,P()):d<0},R.reflectY=function(M){return arguments.length?(h=M?-1:1,P()):h<0},R.precision=function(M){return arguments.length?(S=sce(E,x=M*M),O()):eu(x)},R.fitExtent=function(M,j){return I6(R,M,j)},R.fitSize=function(M,j){return NK(R,M,j)},R.fitWidth=function(M,j){return PK(R,M,j)},R.fitHeight=function(M,j){return OK(R,M,j)};function P(){var M=oce(n,0,0,d,h,f).apply(null,t(s,o)),j=oce(n,r-M[0],i-M[1],d,h,f);return c=KTe(a,u,l),E=oz(t,j),T=oz(c,E),S=sce(E,x),O()}function O(){return A=k=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&$,P()}}function DK(e){var t=0,n=Rn/3,r=dCe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*In,n=s[1]*In):[t*as,n*as]},i}function lmt(e){var t=zt(e);function n(r,i){return[r*t,Lt(i)/t]}return n.invert=function(r,i){return[r/t,Wu(i*t)]},n}function cmt(e,t){var n=Lt(e),r=(n+Lt(t))/2;if(Gn(r)<jt)return lmt(e);var i=1+n*(2*r-n),s=eu(i)/r;function o(a,u){var l=eu(i-2*r*Lt(u))/r;return[l*Lt(a*=r),s-l*zt(a)]}return o.invert=function(a,u){var l=s-u,c=$c(a,Gn(l))*_c(l);return l*r<0&&(c-=Rn*_c(a)*_c(l)),[c/r,Wu((i-(a*a+l*l)*r*r)/(2*r))]},o}function _3(){return DK(cmt).scale(155.424).center([0,33.6442])}function hCe(){return _3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function fmt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function dmt(){var e,t,n=hCe(),r,i=_3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=_3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=fmt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+jt,m+.12*h+jt],[p-.214*h-jt,m+.234*h-jt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+jt,m+.166*h+jt],[p-.115*h-jt,m+.234*h-jt]]).stream(l),f()},c.fitExtent=function(d,h){return I6(c,d,h)},c.fitSize=function(d,h){return NK(c,d,h)},c.fitWidth=function(d,h){return PK(c,d,h)},c.fitHeight=function(d,h){return OK(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function pCe(e){return function(t,n){var r=zt(t),i=zt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Lt(t),s*Lt(n)]}}function ok(e){return function(t,n){var r=eu(t*t+n*n),i=e(r),s=Lt(i),o=zt(i);return[$c(t*s,r*o),Wu(r&&n*s/r)]}}var mCe=pCe(function(e){return eu(2/(1+e))});mCe.invert=ok(function(e){return 2*Wu(e/2)});function hmt(){return ip(mCe).scale(124.75).clipAngle(180-.001)}var gCe=pCe(function(e){return(e=FTe(e))&&e/Lt(e)});gCe.invert=ok(function(e){return e});function pmt(){return ip(gCe).scale(79.4188).clipAngle(180-.001)}function k6(e,t){return[e,t3(IK((Qi+t)/2))]}k6.invert=function(e,t){return[e,2*nS(LTe(t))-Qi]};function mmt(){return yCe(k6).scale(961/Za)}function yCe(e){var t=ip(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Rn*r(),d=t($pt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===k6?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function vN(e){return IK((Qi+e)/2)}function gmt(e,t){var n=zt(e),r=e===t?Lt(e):t3(n/zt(t))/t3(vN(t)/vN(e)),i=n*I9(vN(e),r)/r;if(!r)return k6;function s(o,a){i>0?a<-Qi+jt&&(a=-Qi+jt):a>Qi-jt&&(a=Qi-jt);var u=i/I9(vN(a),r);return[u*Lt(r*o),i-u*zt(r*o)]}return s.invert=function(o,a){var u=i-a,l=_c(r)*eu(o*o+u*u),c=$c(o,Gn(u))*_c(u);return u*r<0&&(c-=Rn*_c(o)*_c(u)),[c/r,2*nS(I9(i/l,1/r))-Qi]},s}function ymt(){return DK(gmt).scale(109.5).parallels([30,30])}function w3(e,t){return[e,t]}w3.invert=w3;function vmt(){return ip(w3).scale(152.63)}function bmt(e,t){var n=zt(e),r=e===t?Lt(e):(n-zt(t))/(t-e),i=n/r+e;if(Gn(r)<jt)return w3;function s(o,a){var u=i-a,l=r*o;return[u*Lt(l),i-u*zt(l)]}return s.invert=function(o,a){var u=i-a,l=$c(o,Gn(u))*_c(u);return u*r<0&&(l-=Rn*_c(o)*_c(u)),[l/r,i-_c(r)*eu(o*o+u*u)]},s}function _mt(){return DK(bmt).scale(131.154).center([0,13.9389])}var a2=1.340264,u2=-.081106,l2=893e-6,c2=.003796,E3=eu(3)/2,wmt=12;function vCe(e,t){var n=Wu(E3*Lt(t)),r=n*n,i=r*r*r;return[e*zt(n)/(E3*(a2+3*u2*r+i*(7*l2+9*c2*r))),n*(a2+u2*r+i*(l2+c2*r))]}vCe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<wmt&&(a=n*(a2+u2*r+i*(l2+c2*r))-t,u=a2+3*u2*r+i*(7*l2+9*c2*r),n-=o=a/u,r=n*n,i=r*r*r,!(Gn(o)<ZD));++s);return[E3*e*(a2+3*u2*r+i*(7*l2+9*c2*r))/zt(n),Wu(Lt(n)/E3)]};function Emt(){return ip(vCe).scale(177.158)}function bCe(e,t){var n=zt(t),r=zt(e)*n;return[n*Lt(e)/r,Lt(t)/r]}bCe.invert=ok(nS);function xmt(){return ip(bCe).scale(144.049).clipAngle(60)}function Smt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=A6({point:function(_,x){var S=b([_,x]);this.stream.point(S[0],S[1])}}),m=xA,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(_){var x=_[0]*d,S=_[1]*h;if(s){var E=S*o-x*a;x=x*o+S*a,S=E}return[x+t,S+n]}return b.invert=function(_){var x=_[0]-t,S=_[1]-n;if(s){var E=S*o+x*a;x=x*o-S*a,S=E}return[x/d,S/h]},b.stream=function(_){return g&&y===_?g:g=p(m(y=_))},b.postclip=function(_){return arguments.length?(m=_,u=l=c=f=null,v()):m},b.clipExtent=function(_){return arguments.length?(m=_==null?(u=l=c=f=null,xA):ZTe(u=+_[0][0],l=+_[0][1],c=+_[1][0],f=+_[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(_){return arguments.length?(e=+_,v()):e},b.translate=function(_){return arguments.length?(t=+_[0],n=+_[1],v()):[t,n]},b.angle=function(_){return arguments.length?(s=_%360*In,a=Lt(s),o=zt(s),v()):s*as},b.reflectX=function(_){return arguments.length?(r=_?-1:1,v()):r<0},b.reflectY=function(_){return arguments.length?(i=_?-1:1,v()):i<0},b.fitExtent=function(_,x){return I6(b,_,x)},b.fitSize=function(_,x){return NK(b,_,x)},b.fitWidth=function(_,x){return PK(b,_,x)},b.fitHeight=function(_,x){return OK(b,_,x)},b}function _Ce(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}_Ce.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Gn(i)>jt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Tmt(){return ip(_Ce).scale(175.295)}function wCe(e,t){return[zt(t)*Lt(e),Lt(t)]}wCe.invert=ok(Wu);function Cmt(){return ip(wCe).scale(249.5).clipAngle(90+jt)}function ECe(e,t){var n=zt(t),r=1+zt(e)*n;return[n*Lt(e)/r,Lt(t)/r]}ECe.invert=ok(function(e){return 2*nS(e)});function Amt(){return ip(ECe).scale(250).clipAngle(142)}function xCe(e,t){return[t3(IK((Qi+t)/2)),-e]}xCe.invert=function(e,t){return[-t,2*nS(LTe(e))-Qi]};function Imt(){var e=yCe(xCe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function kmt(e,t){return e.parent===t.parent?1:2}function Rmt(e){return e.reduce(Nmt,0)/e.length}function Nmt(e,t){return e+t.x}function Pmt(e){return 1+e.reduce(Omt,0)}function Omt(e,t){return Math.max(e,t.y)}function Dmt(e){for(var t;t=e.children;)e=t[0];return e}function $mt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Mmt(){var e=kmt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Rmt(h),d.y=Pmt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=Dmt(s),l=$mt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Lmt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Fmt(){return this.eachAfter(Lmt)}function jmt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Bmt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Umt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function zmt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Vmt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Hmt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function qmt(e){for(var t=this,n=Wmt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Wmt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Gmt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Ymt(){return Array.from(this)}function Kmt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Xmt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Qmt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function $K(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=egt)):t===void 0&&(t=Zmt);for(var n=new NE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new NE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(SCe)}function Jmt(){return $K(this).eachBefore(tgt)}function Zmt(e){return e.children}function egt(e){return Array.isArray(e)?e[1]:null}function tgt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function SCe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function NE(e){this.data=e,this.depth=this.height=0,this.parent=null}NE.prototype=$K.prototype={constructor:NE,count:Fmt,each:jmt,eachAfter:Umt,eachBefore:Bmt,find:zmt,sum:Vmt,sort:Hmt,path:qmt,ancestors:Gmt,descendants:Ymt,leaves:Kmt,links:Xmt,copy:Jmt,[Symbol.iterator]:Qmt};function JP(e){return e==null?null:TCe(e)}function TCe(e){if(typeof e!="function")throw new Error;return e}function Fv(){return 0}function U_(e){return function(){return e}}const ngt=1664525,rgt=1013904223,ace=4294967296;function igt(){let e=1;return()=>(e=(ngt*e+rgt)%ace)/ace}function sgt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ogt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function agt(e,t){for(var n=0,r=(e=ogt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&CCe(o,s)?++n:(o=lgt(i=ugt(i,s)),n=0);return o}function ugt(e,t){var n,r;if(O9(t,e))return[t];for(n=0;n<e.length;++n)if(bN(t,e[n])&&O9(hC(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(bN(hC(e[n],e[r]),t)&&bN(hC(e[n],t),e[r])&&bN(hC(e[r],t),e[n])&&O9(ACe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function bN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function CCe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function O9(e,t){for(var n=0;n<t.length;++n)if(!CCe(e,t[n]))return!1;return!0}function lgt(e){switch(e.length){case 1:return cgt(e[0]);case 2:return hC(e[0],e[1]);case 3:return ACe(e[0],e[1],e[2])}}function cgt(e){return{x:e.x,y:e.y,r:e.r}}function hC(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function ACe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,_=v-l*l-c*c+f*f,x=h*p-d*m,S=(p*_-m*b)/(x*2)-r,E=(m*g-p*y)/x,T=(h*b-d*_)/(x*2)-i,A=(d*y-h*g)/x,k=E*E+A*A-1,R=2*(s+S*E+T*A),$=S*S+T*T-s*s,P=-(Math.abs(k)>1e-6?(R+Math.sqrt(R*R-4*k*$))/(2*k):$/R);return{x:r+S+E*P,y:i+T+A*P,r:P}}function uce(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function lce(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function cce(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function _N(e){this._=e,this.next=null,this.previous=null}function fgt(e,t){if(!(s=(e=sgt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;uce(r,n,i=e[2]),n=new _N(n),r=new _N(r),i=new _N(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){uce(n._,r._,i=e[u]),i=new _N(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(lce(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(lce(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=cce(n);(i=i.next)!==r;)(a=cce(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=agt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function dgt(e){return Math.sqrt(e.value)}function hgt(){var e=null,t=1,n=1,r=Fv;function i(s){const o=igt();return s.x=t/2,s.y=n/2,e?s.eachBefore(fce(e)).eachAfter(D9(r,.5,o)).eachBefore(dce(1)):s.eachBefore(fce(dgt)).eachAfter(D9(Fv,1,o)).eachAfter(D9(r,s.r/Math.min(t,n),o)).eachBefore(dce(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=JP(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:U_(+s),i):r},i}function fce(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function D9(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=fgt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function dce(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function ICe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function ak(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function pgt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(ICe),o}function s(o,a){return function(u){u.children&&ak(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var mgt={depth:-1},hce={},$9={};function ggt(e){return e.id}function ygt(e){return e.parentId}function pce(){var e=ggt,t=ygt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((_,x)=>vgt(n(_,x,i))),v=y.map(mce),b=new Set(y).add("");for(const _ of v)b.has(_)||(b.add(_),y.push(_),v.push(mce(_)),s.push($9));o=(_,x)=>y[x],a=(_,x)=>v[x]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new NE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?hce:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===hce)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===$9&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===$9);--y)h.data=null}if(f.parent=mgt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(SCe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=JP(i),r):e},r.parentId=function(i){return arguments.length?(t=JP(i),r):t},r.path=function(i){return arguments.length?(n=JP(i),r):n},r}function vgt(e){e=`${e}`;let t=e.length;return yz(e,t-1)&&!yz(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function mce(e){let t=e.length;if(t<2)return"";for(;--t>1&&!yz(e,t););return e.slice(0,t)}function yz(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function bgt(e,t){return e.parent===t.parent?1:2}function M9(e){var t=e.children;return t?t[0]:e.t}function L9(e){var t=e.children;return t?t[t.length-1]:e.t}function _gt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function wgt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Egt(e,t,n){return e.a.parent===t.parent?e.a:n}function ZP(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}ZP.prototype=Object.create(NE.prototype);function xgt(e){for(var t=new ZP(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new ZP(s[o],o)),i.parent=n;return(t.parent=new ZP(null,0)).children=[t],t}function Sgt(){var e=bgt,t=1,n=1,r=null;function i(l){var c=xgt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){wgt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,_;p=L9(p),d=M9(d),p&&d;)m=M9(m),h=L9(h),h.a=l,_=p.z+v-d.z-g+e(p._,d._),_>0&&(_gt(Egt(p,l,f),l,_),g+=_,y+=_),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!L9(h)&&(h.t=p,h.m+=v-y),d&&!M9(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function R6(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var kCe=(1+Math.sqrt(5))/2;function RCe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,_,x,S;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,x=Math.max(p/h,h/p)/(m*e),S=g*g*x,_=Math.max(v/S,S/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),S=g*g*x,b=Math.max(v/S,S/y),b>_){g-=l;break}_=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?ak(u,n,r,i,m?r+=p*g/m:s):R6(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const NCe=function e(t){function n(r,i,s,o,a){RCe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(kCe);function Tgt(){var e=NCe,t=!1,n=1,r=1,i=[0],s=Fv,o=Fv,a=Fv,u=Fv,l=Fv;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(ICe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=TCe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:U_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:U_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:U_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:U_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:U_(+d),c):l},c}function Cgt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],_=h/2+b,x=f+1,S=d-1;x<S;){var E=x+S>>>1;l[E]<_?x=E+1:S=E}_-l[x-1]<l[x]-_&&f+1<x&&--x;var T=l[x]-b,A=h-T;if(g-p>y-m){var k=h?(p*A+g*T)/h:g;c(f,x,T,p,m,k,y),c(x,d,A,k,m,g,y)}else{var R=h?(m*A+y*T)/h:y;c(f,x,T,p,m,g,R),c(x,d,A,p,R,g,y)}}}function Agt(e,t,n,r,i){(e.depth&1?R6:ak)(e,t,n,r,i)}const Igt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?ak(l,i,s,o,m?s+=(a-s)*l.value/m:a):R6(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=RCe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(kCe);function ld(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Fy(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const vz=Symbol("implicit");function rS(){var e=new Kue,t=[],n=[],r=vz;function i(s){let o=e.get(s);if(o===void 0){if(r!==vz)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Kue;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return rS(t,n).unknown(r)},ld.apply(i,arguments),i}function N6(){var e=rS().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Pu(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return N6(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},ld.apply(f(),arguments)}function kgt(e){return function(){return e}}function bz(e){return+e}var gce=[0,1];function Ou(e){return e}function _z(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:kgt(isNaN(t)?NaN:.5)}function Rgt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Ngt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=_z(i,r),s=n(o,s)):(r=_z(r,i),s=n(s,o)),function(a){return s(r(a))}}function Pgt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=_z(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=G0(e,a,1,r)-1;return s[u](i[u](a))}}function uk(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function P6(){var e=gce,t=gce,n=tg,r,i,s,o=Ou,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Ou&&(o=Rgt(e[0],e[d-1])),a=d>2?Pgt:Ngt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),fc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,bz),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=rk,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Ou,c()):o!==Ou},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function PCe(){return P6()(Ou,Ou)}function OCe(e,t,n,r){var i=Y0(e,t,n),s;switch(r=W1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=$Te(i,o))&&(r.precision=s),AK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=MTe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=DTe(i))&&(r.precision=s-(r.type==="%")*2);break}}return tS(r)}function Mb(e){var t=e.domain;return e.ticks=function(n){var r=t();return OU(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return OCe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=DU(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Nh(){var e=PCe();return e.copy=function(){return uk(e,Nh())},ld.apply(e,arguments),Mb(e)}function DCe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,bz),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return DCe(e).unknown(t)},e=arguments.length?Array.from(e,bz):[0,1],Mb(n)}function $Ce(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function yce(e){return Math.log(e)}function vce(e){return Math.exp(e)}function Ogt(e){return-Math.log(-e)}function Dgt(e){return-Math.exp(-e)}function $gt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Mgt(e){return e===10?$gt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Lgt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function bce(e){return(t,n)=>-e(-t,n)}function MK(e){const t=e(yce,vce),n=t.domain;let r=10,i,s;function o(){return i=Lgt(r),s=Mgt(r),n()[0]<0?(i=bce(i),s=bce(s),e(Ogt,Dgt)):e(yce,vce),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=OU(l,c,g))}else y=OU(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=W1(u)).precision==null&&(u.trim=!0),u=tS(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n($Ce(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function MCe(){const e=MK(P6()).domain([1,10]);return e.copy=()=>uk(e,MCe()).base(e.base()),ld.apply(e,arguments),e}function _ce(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function wce(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function LK(e){var t=1,n=e(_ce(t),wce(t));return n.constant=function(r){return arguments.length?e(_ce(t=+r),wce(t)):t},Mb(n)}function LCe(){var e=LK(P6());return e.copy=function(){return uk(e,LCe()).constant(e.constant())},ld.apply(e,arguments)}function Ece(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Fgt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function jgt(e){return e<0?-e*e:e*e}function FK(e){var t=e(Ou,Ou),n=1;function r(){return n===1?e(Ou,Ou):n===.5?e(Fgt,jgt):e(Ece(n),Ece(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Mb(t)}function jK(){var e=FK(P6());return e.copy=function(){return uk(e,jK()).exponent(e.exponent())},ld.apply(e,arguments),e}function Bgt(){return jK.apply(null,arguments).exponent(.5)}function FCe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=OSe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[G0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(lm),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return FCe().domain(e).range(t).unknown(r)},ld.apply(s,arguments)}function jCe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[G0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return jCe().domain([e,t]).range(i).unknown(s)},ld.apply(Mb(o),arguments)}function BCe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[G0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return BCe().domain(e).range(t).unknown(n)},ld.apply(i,arguments)}const F9=new Date,j9=new Date;function Us(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Us(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(F9.setTime(+s),j9.setTime(+o),e(F9),e(j9),Math.floor(n(F9,j9))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const PE=Us(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);PE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Us(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):PE);PE.range;const Zp=1e3,wc=Zp*60,em=wc*60,Pm=em*24,BK=Pm*7,xce=Pm*30,B9=Pm*365,tm=Us(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Zp)},(e,t)=>(t-e)/Zp,e=>e.getUTCSeconds());tm.range;const O6=Us(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zp)},(e,t)=>{e.setTime(+e+t*wc)},(e,t)=>(t-e)/wc,e=>e.getMinutes());O6.range;const D6=Us(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*wc)},(e,t)=>(t-e)/wc,e=>e.getUTCMinutes());D6.range;const $6=Us(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zp-e.getMinutes()*wc)},(e,t)=>{e.setTime(+e+t*em)},(e,t)=>(t-e)/em,e=>e.getHours());$6.range;const M6=Us(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*em)},(e,t)=>(t-e)/em,e=>e.getUTCHours());M6.range;const fm=Us(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wc)/Pm,e=>e.getDate()-1);fm.range;const I0=Us(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Pm,e=>e.getUTCDate()-1);I0.range;const UCe=Us(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Pm,e=>Math.floor(e/Pm));UCe.range;function Lb(e){return Us(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*wc)/BK)}const iS=Lb(0),x3=Lb(1),Ugt=Lb(2),zgt=Lb(3),OE=Lb(4),Vgt=Lb(5),Hgt=Lb(6);iS.range;x3.range;Ugt.range;zgt.range;OE.range;Vgt.range;Hgt.range;function Fb(e){return Us(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/BK)}const sS=Fb(0),S3=Fb(1),qgt=Fb(2),Wgt=Fb(3),DE=Fb(4),Ggt=Fb(5),Ygt=Fb(6);sS.range;S3.range;qgt.range;Wgt.range;DE.range;Ggt.range;Ygt.range;const CA=Us(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());CA.range;const AA=Us(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());AA.range;const Ph=Us(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ph.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Us(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ph.range;const Oh=Us(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Oh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Us(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Oh.range;function zCe(e,t,n,r,i,s){const o=[[tm,1,Zp],[tm,5,5*Zp],[tm,15,15*Zp],[tm,30,30*Zp],[s,1,wc],[s,5,5*wc],[s,15,15*wc],[s,30,30*wc],[i,1,em],[i,3,3*em],[i,6,6*em],[i,12,12*em],[r,1,Pm],[r,2,2*Pm],[n,1,BK],[t,1,xce],[t,3,3*xce],[e,1,B9]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=Zx(([,,g])=>g).right(o,d);if(h===o.length)return e.every(Y0(l/B9,c/B9,f));if(h===0)return PE.every(Math.max(Y0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[Kgt,Xgt]=zCe(Oh,AA,sS,UCe,M6,D6),[Qgt,Jgt]=zCe(Ph,CA,iS,fm,$6,O6);function U9(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function z9(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function yT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function VCe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=vT(i),c=bT(i),f=vT(s),d=bT(s),h=vT(o),p=bT(o),m=vT(a),g=bT(a),y=vT(u),v=bT(u),b={a:B,A:U,b:V,B:D,c:null,d:kce,e:kce,f:w0t,g:N0t,G:O0t,H:v0t,I:b0t,j:_0t,L:HCe,m:E0t,M:x0t,p:z,q:W,Q:Pce,s:Oce,S:S0t,u:T0t,U:C0t,V:A0t,w:I0t,W:k0t,x:null,X:null,y:R0t,Y:P0t,Z:D0t,"%":Nce},_={a:F,A:H,b:G,B:ee,c:null,d:Rce,e:Rce,f:F0t,g:Y0t,G:X0t,H:$0t,I:M0t,j:L0t,L:WCe,m:j0t,M:B0t,p:le,q:de,Q:Pce,s:Oce,S:U0t,u:z0t,U:V0t,V:H0t,w:q0t,W:W0t,x:null,X:null,y:G0t,Y:K0t,Z:Q0t,"%":Nce},x={a:k,A:R,b:$,B:P,c:O,d:Ace,e:Ace,f:p0t,g:Cce,G:Tce,H:Ice,I:Ice,j:c0t,L:h0t,m:l0t,M:f0t,p:A,q:u0t,Q:g0t,s:y0t,S:d0t,u:r0t,U:i0t,V:s0t,w:n0t,W:o0t,x:M,X:j,y:Cce,Y:Tce,Z:a0t,"%":m0t};b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),_.x=S(n,_),_.X=S(r,_),_.c=S(t,_);function S(he,ye){return function(Ce){var ve=[],Ye=-1,Ue=0,pt=he.length,rt,be,Ae;for(Ce instanceof Date||(Ce=new Date(+Ce));++Ye<pt;)he.charCodeAt(Ye)===37&&(ve.push(he.slice(Ue,Ye)),(be=Sce[rt=he.charAt(++Ye)])!=null?rt=he.charAt(++Ye):be=rt==="e"?" ":"0",(Ae=ye[rt])&&(rt=Ae(Ce,be)),ve.push(rt),Ue=Ye+1);return ve.push(he.slice(Ue,Ye)),ve.join("")}}function E(he,ye){return function(Ce){var ve=yT(1900,void 0,1),Ye=T(ve,he,Ce+="",0),Ue,pt;if(Ye!=Ce.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(ye&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(Ue=z9(yT(ve.y,0,1)),pt=Ue.getUTCDay(),Ue=pt>4||pt===0?S3.ceil(Ue):S3(Ue),Ue=I0.offset(Ue,(ve.V-1)*7),ve.y=Ue.getUTCFullYear(),ve.m=Ue.getUTCMonth(),ve.d=Ue.getUTCDate()+(ve.w+6)%7):(Ue=U9(yT(ve.y,0,1)),pt=Ue.getDay(),Ue=pt>4||pt===0?x3.ceil(Ue):x3(Ue),Ue=fm.offset(Ue,(ve.V-1)*7),ve.y=Ue.getFullYear(),ve.m=Ue.getMonth(),ve.d=Ue.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),pt="Z"in ve?z9(yT(ve.y,0,1)).getUTCDay():U9(yT(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(pt+5)%7:ve.w+ve.U*7-(pt+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,z9(ve)):U9(ve)}}function T(he,ye,Ce,ve){for(var Ye=0,Ue=ye.length,pt=Ce.length,rt,be;Ye<Ue;){if(ve>=pt)return-1;if(rt=ye.charCodeAt(Ye++),rt===37){if(rt=ye.charAt(Ye++),be=x[rt in Sce?ye.charAt(Ye++):rt],!be||(ve=be(he,Ce,ve))<0)return-1}else if(rt!=Ce.charCodeAt(ve++))return-1}return ve}function A(he,ye,Ce){var ve=l.exec(ye.slice(Ce));return ve?(he.p=c.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function k(he,ye,Ce){var ve=h.exec(ye.slice(Ce));return ve?(he.w=p.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function R(he,ye,Ce){var ve=f.exec(ye.slice(Ce));return ve?(he.w=d.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function $(he,ye,Ce){var ve=y.exec(ye.slice(Ce));return ve?(he.m=v.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function P(he,ye,Ce){var ve=m.exec(ye.slice(Ce));return ve?(he.m=g.get(ve[0].toLowerCase()),Ce+ve[0].length):-1}function O(he,ye,Ce){return T(he,t,ye,Ce)}function M(he,ye,Ce){return T(he,n,ye,Ce)}function j(he,ye,Ce){return T(he,r,ye,Ce)}function B(he){return o[he.getDay()]}function U(he){return s[he.getDay()]}function V(he){return u[he.getMonth()]}function D(he){return a[he.getMonth()]}function z(he){return i[+(he.getHours()>=12)]}function W(he){return 1+~~(he.getMonth()/3)}function F(he){return o[he.getUTCDay()]}function H(he){return s[he.getUTCDay()]}function G(he){return u[he.getUTCMonth()]}function ee(he){return a[he.getUTCMonth()]}function le(he){return i[+(he.getUTCHours()>=12)]}function de(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var ye=S(he+="",b);return ye.toString=function(){return he},ye},parse:function(he){var ye=E(he+="",!1);return ye.toString=function(){return he},ye},utcFormat:function(he){var ye=S(he+="",_);return ye.toString=function(){return he},ye},utcParse:function(he){var ye=E(he+="",!0);return ye.toString=function(){return he},ye}}}var Sce={"-":"",_:" ",0:"0"},ho=/^\s*\d+/,Zgt=/^%/,e0t=/[\\^$*+?|[\]().{}]/g;function hr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function t0t(e){return e.replace(e0t,"\\$&")}function vT(e){return new RegExp("^(?:"+e.map(t0t).join("|")+")","i")}function bT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function n0t(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function r0t(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function i0t(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function s0t(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function o0t(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Tce(e,t,n){var r=ho.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Cce(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function a0t(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function u0t(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function l0t(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Ace(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function c0t(e,t,n){var r=ho.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Ice(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function f0t(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function d0t(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function h0t(e,t,n){var r=ho.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function p0t(e,t,n){var r=ho.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function m0t(e,t,n){var r=Zgt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function g0t(e,t,n){var r=ho.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function y0t(e,t,n){var r=ho.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function kce(e,t){return hr(e.getDate(),t,2)}function v0t(e,t){return hr(e.getHours(),t,2)}function b0t(e,t){return hr(e.getHours()%12||12,t,2)}function _0t(e,t){return hr(1+fm.count(Ph(e),e),t,3)}function HCe(e,t){return hr(e.getMilliseconds(),t,3)}function w0t(e,t){return HCe(e,t)+"000"}function E0t(e,t){return hr(e.getMonth()+1,t,2)}function x0t(e,t){return hr(e.getMinutes(),t,2)}function S0t(e,t){return hr(e.getSeconds(),t,2)}function T0t(e){var t=e.getDay();return t===0?7:t}function C0t(e,t){return hr(iS.count(Ph(e)-1,e),t,2)}function qCe(e){var t=e.getDay();return t>=4||t===0?OE(e):OE.ceil(e)}function A0t(e,t){return e=qCe(e),hr(OE.count(Ph(e),e)+(Ph(e).getDay()===4),t,2)}function I0t(e){return e.getDay()}function k0t(e,t){return hr(x3.count(Ph(e)-1,e),t,2)}function R0t(e,t){return hr(e.getFullYear()%100,t,2)}function N0t(e,t){return e=qCe(e),hr(e.getFullYear()%100,t,2)}function P0t(e,t){return hr(e.getFullYear()%1e4,t,4)}function O0t(e,t){var n=e.getDay();return e=n>=4||n===0?OE(e):OE.ceil(e),hr(e.getFullYear()%1e4,t,4)}function D0t(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+hr(t/60|0,"0",2)+hr(t%60,"0",2)}function Rce(e,t){return hr(e.getUTCDate(),t,2)}function $0t(e,t){return hr(e.getUTCHours(),t,2)}function M0t(e,t){return hr(e.getUTCHours()%12||12,t,2)}function L0t(e,t){return hr(1+I0.count(Oh(e),e),t,3)}function WCe(e,t){return hr(e.getUTCMilliseconds(),t,3)}function F0t(e,t){return WCe(e,t)+"000"}function j0t(e,t){return hr(e.getUTCMonth()+1,t,2)}function B0t(e,t){return hr(e.getUTCMinutes(),t,2)}function U0t(e,t){return hr(e.getUTCSeconds(),t,2)}function z0t(e){var t=e.getUTCDay();return t===0?7:t}function V0t(e,t){return hr(sS.count(Oh(e)-1,e),t,2)}function GCe(e){var t=e.getUTCDay();return t>=4||t===0?DE(e):DE.ceil(e)}function H0t(e,t){return e=GCe(e),hr(DE.count(Oh(e),e)+(Oh(e).getUTCDay()===4),t,2)}function q0t(e){return e.getUTCDay()}function W0t(e,t){return hr(S3.count(Oh(e)-1,e),t,2)}function G0t(e,t){return hr(e.getUTCFullYear()%100,t,2)}function Y0t(e,t){return e=GCe(e),hr(e.getUTCFullYear()%100,t,2)}function K0t(e,t){return hr(e.getUTCFullYear()%1e4,t,4)}function X0t(e,t){var n=e.getUTCDay();return e=n>=4||n===0?DE(e):DE.ceil(e),hr(e.getUTCFullYear()%1e4,t,4)}function Q0t(){return"+0000"}function Nce(){return"%"}function Pce(e){return+e}function Oce(e){return Math.floor(+e/1e3)}var x_,UK,YCe,L6,KCe;J0t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function J0t(e){return x_=VCe(e),UK=x_.format,YCe=x_.parse,L6=x_.utcFormat,KCe=x_.utcParse,x_}function Z0t(e){return new Date(e)}function eyt(e){return e instanceof Date?+e:+new Date(+e)}function zK(e,t,n,r,i,s,o,a,u,l){var c=PCe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),_=l("%Y");function x(S){return(u(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?b:_)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,eyt)):d().map(Z0t)},c.ticks=function(S){var E=d();return e(E[0],E[E.length-1],S??10)},c.tickFormat=function(S,E){return E==null?x:l(E)},c.nice=function(S){var E=d();return(!S||typeof S.range!="function")&&(S=t(E[0],E[E.length-1],S??10)),S?d($Ce(E,S)):c},c.copy=function(){return uk(c,zK(e,t,n,r,i,s,o,a,u,l))},c}function XCe(){return ld.apply(zK(Qgt,Jgt,Ph,CA,iS,fm,$6,O6,tm,UK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function tyt(){return ld.apply(zK(Kgt,Xgt,Oh,AA,sS,I0,M6,D6,tm,L6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function F6(){var e=0,t=1,n,r,i,s,o=Ou,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(tg),l.rangeRound=c(rk),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function jy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function VK(){var e=Mb(F6()(Ou));return e.copy=function(){return jy(e,VK())},Fy.apply(e,arguments)}function QCe(){var e=MK(F6()).domain([1,10]);return e.copy=function(){return jy(e,QCe()).base(e.base())},Fy.apply(e,arguments)}function JCe(){var e=LK(F6());return e.copy=function(){return jy(e,JCe()).constant(e.constant())},Fy.apply(e,arguments)}function HK(){var e=FK(F6());return e.copy=function(){return jy(e,HK()).exponent(e.exponent())},Fy.apply(e,arguments)}function nyt(){return HK.apply(null,arguments).exponent(.5)}function j6(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Ou,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=yK(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(tg),h.rangeRound=p(rk),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function ZCe(){var e=Mb(j6()(Ou));return e.copy=function(){return jy(e,ZCe())},Fy.apply(e,arguments)}function e2e(){var e=MK(j6()).domain([.1,1,10]);return e.copy=function(){return jy(e,e2e()).base(e.base())},Fy.apply(e,arguments)}function t2e(){var e=LK(j6());return e.copy=function(){return jy(e,t2e()).constant(e.constant())},Fy.apply(e,arguments)}function qK(){var e=FK(j6());return e.copy=function(){return jy(e,qK()).exponent(e.exponent())},Fy.apply(e,arguments)}function ryt(){return qK.apply(null,arguments).exponent(.5)}function cd(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const iyt=cd("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),syt=cd("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),oyt=cd("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),ayt=cd("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),uyt=cd("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),lyt=cd("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),cyt=cd("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),fyt=cd("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),dyt=cd("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),hyt=cd("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),n2e=cd("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function xr(e){return function(){return e}}const Dce=Math.abs,ra=Math.atan2,lv=Math.cos,pyt=Math.max,V9=Math.min,Sd=Math.sin,i1=Math.sqrt,oa=1e-12,$E=Math.PI,T3=$E/2,r2e=2*$E;function myt(e){return e>1?0:e<-1?$E:Math.acos(e)}function $ce(e){return e>=1?T3:e<=-1?-T3:Math.asin(e)}function B6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new EK(t)}function gyt(e){return e.innerRadius}function yyt(e){return e.outerRadius}function vyt(e){return e.startAngle}function byt(e){return e.endAngle}function _yt(e){return e&&e.padAngle}function wyt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<oa))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function wN(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/i1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,_=v*v+b*b,x=i-s,S=d*m-p*h,E=(b<0?-1:1)*i1(pyt(0,x*x*_-S*S)),T=(S*b-v*E)/_,A=(-S*v-b*E)/_,k=(S*b+v*E)/_,R=(-S*v+b*E)/_,$=T-g,P=A-y,O=k-g,M=R-y;return $*$+P*P>O*O+M*M&&(T=k,A=R),{cx:T,cy:A,x01:-c,y01:-f,x11:T*(i/x-1),y11:A*(i/x-1)}}function Eyt(){var e=gyt,t=yyt,n=xr(0),r=null,i=vyt,s=byt,o=_yt,a=null,u=B6(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-T3,m=s.apply(this,arguments)-T3,g=Dce(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>oa))a.moveTo(0,0);else if(g>r2e-oa)a.moveTo(h*lv(p),h*Sd(p)),a.arc(0,0,h,p,m,!y),d>oa&&(a.moveTo(d*lv(m),d*Sd(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,_=p,x=m,S=g,E=g,T=o.apply(this,arguments)/2,A=T>oa&&(r?+r.apply(this,arguments):i1(d*d+h*h)),k=V9(Dce(h-d)/2,+n.apply(this,arguments)),R=k,$=k,P,O;if(A>oa){var M=$ce(A/d*Sd(T)),j=$ce(A/h*Sd(T));(S-=M*2)>oa?(M*=y?1:-1,_+=M,x-=M):(S=0,_=x=(p+m)/2),(E-=j*2)>oa?(j*=y?1:-1,v+=j,b-=j):(E=0,v=b=(p+m)/2)}var B=h*lv(v),U=h*Sd(v),V=d*lv(x),D=d*Sd(x);if(k>oa){var z=h*lv(b),W=h*Sd(b),F=d*lv(_),H=d*Sd(_),G;if(g<$E)if(G=wyt(B,U,F,H,z,W,V,D)){var ee=B-G[0],le=U-G[1],de=z-G[0],he=W-G[1],ye=1/Sd(myt((ee*de+le*he)/(i1(ee*ee+le*le)*i1(de*de+he*he)))/2),Ce=i1(G[0]*G[0]+G[1]*G[1]);R=V9(k,(d-Ce)/(ye-1)),$=V9(k,(h-Ce)/(ye+1))}else R=$=0}E>oa?$>oa?(P=wN(F,H,B,U,h,$,y),O=wN(z,W,V,D,h,$,y),a.moveTo(P.cx+P.x01,P.cy+P.y01),$<k?a.arc(P.cx,P.cy,$,ra(P.y01,P.x01),ra(O.y01,O.x01),!y):(a.arc(P.cx,P.cy,$,ra(P.y01,P.x01),ra(P.y11,P.x11),!y),a.arc(0,0,h,ra(P.cy+P.y11,P.cx+P.x11),ra(O.cy+O.y11,O.cx+O.x11),!y),a.arc(O.cx,O.cy,$,ra(O.y11,O.x11),ra(O.y01,O.x01),!y))):(a.moveTo(B,U),a.arc(0,0,h,v,b,!y)):a.moveTo(B,U),!(d>oa)||!(S>oa)?a.lineTo(V,D):R>oa?(P=wN(V,D,z,W,d,-R,y),O=wN(B,U,F,H,d,-R,y),a.lineTo(P.cx+P.x01,P.cy+P.y01),R<k?a.arc(P.cx,P.cy,R,ra(P.y01,P.x01),ra(O.y01,O.x01),!y):(a.arc(P.cx,P.cy,R,ra(P.y01,P.x01),ra(P.y11,P.x11),!y),a.arc(0,0,d,ra(P.cy+P.y11,P.cx+P.x11),ra(O.cy+O.y11,O.cx+O.x11),y),a.arc(O.cx,O.cy,R,ra(O.y11,O.x11),ra(O.y01,O.x01),!y))):a.arc(0,0,d,x,_,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-$E/2;return[lv(f)*c,Sd(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:xr(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:xr(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:xr(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:xr(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:xr(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:xr(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:xr(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function i2e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function s2e(e){this._context=e}s2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function WK(e){return new s2e(e)}function o2e(e){return e[0]}function a2e(e){return e[1]}function C3(e,t){var n=xr(!0),r=null,i=WK,s=null,o=B6(a);e=typeof e=="function"?e:e===void 0?o2e:xr(e),t=typeof t=="function"?t:t===void 0?a2e:xr(t);function a(u){var l,c=(u=i2e(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:xr(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:xr(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:xr(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function u2e(e,t,n){var r=null,i=xr(!0),s=null,o=WK,a=null,u=B6(l);e=typeof e=="function"?e:e===void 0?o2e:xr(+e),t=typeof t=="function"?t:xr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?a2e:xr(+n);function l(f){var d,h,p,m=(f=i2e(f)).length,g,y=!1,v,b=new Array(m),_=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],_[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),_[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):_[d]))}if(v)return a=null,v+""||null}function c(){return C3().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:xr(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:xr(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:xr(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:xr(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:xr(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:xr(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:xr(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}const xyt={draw(e,t){const n=i1(t/$E);e.moveTo(n,0),e.arc(0,0,n,0,r2e)}};function Syt(e,t){let n=null,r=B6(i);e=typeof e=="function"?e:xr(e||xyt),t=typeof t=="function"?t:xr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:xr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:xr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function X0(){}function A3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function U6(e){this._context=e}U6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:A3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:A3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wz(e){return new U6(e)}function l2e(e){this._context=e}l2e.prototype={areaStart:X0,areaEnd:X0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:A3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Tyt(e){return new l2e(e)}function c2e(e){this._context=e}c2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:A3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Cyt(e){return new c2e(e)}function f2e(e,t){this._basis=new U6(e),this._beta=t}f2e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Ayt=function e(t){function n(r){return t===1?new U6(r):new f2e(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function I3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function GK(e,t){this._context=e,this._k=(1-t)/6}GK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:I3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:I3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Iyt=function e(t){function n(r){return new GK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function YK(e,t){this._context=e,this._k=(1-t)/6}YK.prototype={areaStart:X0,areaEnd:X0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:I3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const kyt=function e(t){function n(r){return new YK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function KK(e,t){this._context=e,this._k=(1-t)/6}KK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:I3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ryt=function e(t){function n(r){return new KK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function XK(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>oa){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>oa){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function d2e(e,t){this._context=e,this._alpha=t}d2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:XK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Nyt=function e(t){function n(r){return t?new d2e(r,t):new GK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function h2e(e,t){this._context=e,this._alpha=t}h2e.prototype={areaStart:X0,areaEnd:X0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:XK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Pyt=function e(t){function n(r){return t?new h2e(r,t):new YK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function p2e(e,t){this._context=e,this._alpha=t}p2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:XK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Oyt=function e(t){function n(r){return t?new p2e(r,t):new KK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function m2e(e){this._context=e}m2e.prototype={areaStart:X0,areaEnd:X0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Dyt(e){return new m2e(e)}function Mce(e){return e<0?-1:1}function Lce(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Mce(s)+Mce(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Fce(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function H9(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function k3(e){this._context=e}k3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:H9(this,this._t0,Fce(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,H9(this,Fce(this,n=Lce(this,e,t)),n);break;default:H9(this,this._t0,n=Lce(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function g2e(e){this._context=new y2e(e)}(g2e.prototype=Object.create(k3.prototype)).point=function(e,t){k3.prototype.point.call(this,t,e)};function y2e(e){this._context=e}y2e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function $yt(e){return new k3(e)}function Myt(e){return new g2e(e)}function v2e(e){this._context=e}v2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=jce(e),i=jce(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function jce(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Lyt(e){return new v2e(e)}function z6(e,t){this._context=e,this._t=t}z6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Fyt(e){return new z6(e,.5)}function jyt(e){return new z6(e,0)}function Byt(e){return new z6(e,1)}function pC(e,t,n){this.k=e,this.x=t,this.y=n}pC.prototype={constructor:pC,scale:function(e){return e===1?this:new pC(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new pC(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};pC.prototype;function lk({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1,dropdownColumn:u=!1,columnList:l,setColumn:c,stringTicks:f=!1}){const d=I.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),h=I.useCallback(p=>(s?L6("%B"):tS(".2s"))(p),[s]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:120,children:w.jsx(Bo,{children:w.jsx(Zn,{gap:3,children:w.jsx(xt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?w.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:p,offset:m})=>w.jsxs("g",{transform:`translate(${m}, ${n})`,children:[w.jsx("line",{y2:"6",stroke:"currentColor"}),o?w.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,w.jsx("foreignObject",{x:0-d/2,y:10,width:d,height:20,children:w.jsx(Bo,{children:w.jsx(Tc,{withinPortal:!0,label:p,children:w.jsx(xt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:f?p:+p==0?0:h(s?new Date(p):p)})})})})]},`${p}test`))]})}const Uyt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:lk},Symbol.toStringTag,{value:"Module"}));function V6({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=I.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>20?120:u*6},[i]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:w.jsx(Bo,{children:w.jsx(Zn,{gap:3,children:w.jsx(xt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?w.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>w.jsxs("g",{transform:`translate(${n}, ${l})`,children:[w.jsx("line",{x2:"-6",stroke:"currentColor"}),s?w.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,w.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:w.jsx("foreignObject",{width:a,height:20,children:w.jsx(Zn,{style:{width:"100%",height:"100%"},justify:"right",children:w.jsx(xt,{lineClamp:1,style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const zyt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:V6},Symbol.toStringTag,{value:"Module"})),pu={top:15,left:160,right:50,bottom:130};function Ez({barsTable:e,fullTable:t,parameters:n,data:r,setSelection:i}){const[s,{height:o,width:a}]=Bf(),u=I.useMemo(()=>a-pu.left-pu.right,[a]),l=I.useMemo(()=>o-pu.top-pu.bottom,[o]),c=I.useMemo(()=>t==null?void 0:t.groupby(n.category).count(),[]),f=I.useMemo(()=>{const g=Array.from(new Set(r.map(y=>y[n.category])));return rS(n2e).domain(g)},[r,n.category]),d=I.useMemo(()=>c?Nh([pu.left,u+pu.left]).domain([0,Ac(c.objects().map(g=>g.count))]).nice():null,[c,u]),h=I.useMemo(()=>c?N6([pu.top,l+pu.top]).domain(c.array(n.category).sort()).paddingInner(.1):null,[c,l,n.category]),p=I.useMemo(()=>!d||!h||!f||!e?null:e.objects().map((g,y)=>g[n.category]===null||g.count===null?null:w.jsxs("g",{style:{cursor:"pointer"},children:[w.jsx("rect",{onClick:v=>i(r.filter(b=>b[n.category]===g[n.category]).map(b=>b[n.ids]),v),x:pu.left,y:h(g[n.category]),fill:f(g[n.category]),height:h.bandwidth(),width:d(g.count)-pu.left},y),w.jsx("text",{x:d(g.count)+5,y:h(g[n.category])+h.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:g.count})]},y)),[e,f,r,n.category,n.ids,i,d,h]),m=I.useMemo(()=>!d||!h||!f||!c?null:c.objects().map((g,y)=>g[n.category]===null||g.count===null?null:w.jsx("g",{style:{cursor:"pointer"},children:w.jsx("rect",{opacity:.7,onClick:v=>i(r.filter(b=>b[n.category]===g[n.category]).map(b=>b[n.ids]),v),x:pu.left,y:h(g[n.category]),fill:"lightgray",height:h.bandwidth(),width:d(g.count)-pu.left},y)},y)),[f,r,c,n.category,n.ids,i,d,h]);return h&&d?w.jsxs("svg",{ref:s,style:{height:"500px",width:"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[w.jsx(lk,{xScale:d,yRange:h.range(),vertPosition:l+pu.top,showLines:!1,label:"Count",ticks:d.ticks(5).map(g=>({value:g.toString(),offset:d(g)}))}),h?w.jsx(V6,{yScale:h,horizontalPosition:pu.left,xRange:d.range(),label:n.category,ticks:f.domain().map(g=>({value:g,offset:h(g)+h.bandwidth()/2}))}):null,m,p]}):w.jsx(Oc,{})}const Vyt=Object.freeze(Object.defineProperty({__proto__:null,Bar:Ez,default:Ez},Symbol.toStringTag,{value:"Module"})),cr=Array.isArray;function Gu(e){return e!=null?cr(e)?e:[e]:[]}function Hyt(e=0,t=1/0){return`${Bce(e)} < row_number() && row_number() <= ${Bce(t)}`}function Bce(e){return e<0?`count() + ${e}`:e}class b2e{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(Hyt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Gu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function xn(e){throw Error(e)}function tu(e){return typeof e=="number"}function vi(e){return typeof e=="function"}function H6(e,t){const n=Array(e);if(vi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let qyt=class extends b2e{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){xn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){xn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){xn("Not implemented")}getter(t){xn("Not implemented")}objects(t){xn("Not implemented")}object(t){xn("Not implemented")}[Symbol.iterator](){xn("Not implemented")}print(t={}){tu(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=H6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},Wyt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},Gyt=function(e){return e&&vi(e.get)?e:new Wyt(e)};function Om(e){return e instanceof Date}function Sa(e){return e===Object(e)}function R3(e){return e instanceof RegExp}function qo(e){return typeof e=="string"}function Yyt(e,t){const n=r=>xn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Uce(e.entries(),t):Om(e)?n("Date"):R3(e)?n("RegExp"):qo(e)?n():cr(e)?Kyt(e,t):vi(e[Symbol.iterator])?Xyt(e,t):Sa(e)?Uce(Object.entries(e),t):n()}function Uce(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function Kyt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function Xyt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:Qyt}=Object.prototype;function Jf(e,t){return Qyt.call(e,t)}function Kl(e){return e?new zce({...e.data()},e.columnNames()):new zce}class zce{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Jf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ir=void 0,Jyt=Object.getPrototypeOf(Int8Array);function ck(e){return e instanceof Jyt}function s1(e){return cr(e)||ck(e)}function Of(e){return e!=null&&e===e}const _T=e=>s1(e)||qo(e),Zyt={compact:e=>s1(e)?e.filter(t=>Of(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>_T(e)?e.includes(t,n):!1,indexof:(e,t)=>_T(e)?e.indexOf(t):-1,join:(e,t)=>s1(e)?e.join(t):ir,lastindexof:(e,t)=>_T(e)?e.lastIndexOf(t):-1,length:e=>_T(e)?e.length:0,pluck:(e,t)=>s1(e)?e.map(n=>Of(n)?n[t]:ir):ir,reverse:e=>s1(e)?e.slice().reverse():qo(e)?e.split("").reverse().join(""):ir,slice:(e,t,n)=>_T(e)?e.slice(t,n):ir};function evt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function eO(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Td=e=>(e<10?"0":"")+e,tvt=e=>e<0?"-"+eO(-e,6):e>9999?"+"+eO(e,6):eO(e,4);function _2e(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return tvt(e)+"-"+Td(t+1)+"-"+Td(n)+(!u||o?"T"+Td(r)+":"+Td(i)+":"+Td(s)+"."+eO(o,3)+l:s?"T"+Td(r)+":"+Td(i)+":"+Td(s)+l:i||r||!a?"T"+Td(r)+":"+Td(i)+l:"")}function w2e(e,t){return isNaN(e)?"Invalid Date":_2e(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function q6(e,t){return isNaN(e)?"Invalid Date":_2e(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const nvt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function rvt(e){return e.match(nvt)&&!isNaN(Date.parse(e))}function ivt(e,t=Date.parse){return rvt(e)?t(e):e}const E2e=6e4,x2e=864e5,S2e=6048e5,Gi=new Date,Yi=new Date,ss=e=>(Gi.setTime(typeof e=="string"?ivt(e):e),Gi);function svt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function ovt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function avt(e){Yi.setTime(+e),Yi.setHours(0,0,0,0),Gi.setTime(+Yi),Gi.setMonth(0),Gi.setDate(1);const t=(Yi.getTimezoneOffset()-Gi.getTimezoneOffset())*E2e;return Math.floor(1+(Yi-Gi-t)/x2e)}function uvt(e){Yi.setTime(+e),Yi.setUTCHours(0,0,0,0);const t=Date.UTC(Yi.getUTCFullYear(),0,1);return Math.floor(1+(Yi-t)/x2e)}function lvt(e,t){const n=t||0;Yi.setTime(+e),Yi.setDate(Yi.getDate()-(Yi.getDay()+7-n)%7),Yi.setHours(0,0,0,0),Gi.setTime(+e),Gi.setMonth(0),Gi.setDate(1),Gi.setDate(1-(Gi.getDay()+7-n)%7),Gi.setHours(0,0,0,0);const r=(Yi.getTimezoneOffset()-Gi.getTimezoneOffset())*E2e;return Math.floor((1+(Yi-Gi)-r)/S2e)}function cvt(e,t){const n=t||0;return Yi.setTime(+e),Yi.setUTCDate(Yi.getUTCDate()-(Yi.getUTCDay()+7-n)%7),Yi.setUTCHours(0,0,0,0),Gi.setTime(+e),Gi.setUTCMonth(0),Gi.setUTCDate(1),Gi.setUTCDate(1-(Gi.getUTCDay()+7-n)%7),Gi.setUTCHours(0,0,0,0),Math.floor((1+(Yi-Gi))/S2e)}const fvt={format_date:(e,t)=>w2e(ss(e),!t),format_utcdate:(e,t)=>q6(ss(e),!t),timestamp:e=>+ss(e),year:e=>ss(e).getFullYear(),quarter:e=>Math.floor(ss(e).getMonth()/3),month:e=>ss(e).getMonth(),date:e=>ss(e).getDate(),dayofweek:e=>ss(e).getDay(),hours:e=>ss(e).getHours(),minutes:e=>ss(e).getMinutes(),seconds:e=>ss(e).getSeconds(),milliseconds:e=>ss(e).getMilliseconds(),utcyear:e=>ss(e).getUTCFullYear(),utcquarter:e=>Math.floor(ss(e).getUTCMonth()/3),utcmonth:e=>ss(e).getUTCMonth(),utcdate:e=>ss(e).getUTCDate(),utcdayofweek:e=>ss(e).getUTCDay(),utchours:e=>ss(e).getUTCHours(),utcminutes:e=>ss(e).getUTCMinutes(),utcseconds:e=>ss(e).getUTCSeconds(),utcmilliseconds:e=>ss(e).getUTCMilliseconds(),datetime:svt,dayofyear:avt,week:lvt,utcdatetime:ovt,utcdayofyear:uvt,utcweek:cvt,now:Date.now};function QK(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Om(e)||Om(t)?+e==+t:R3(e)&&R3(t)?e+""==t+"":Sa(e)&&Sa(t)?dvt(e,t):!1}function dvt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Vce(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Vce(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!QK(e[o],t[o]))return!1}return!0}function Vce(e,t,n=QK){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const hvt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let pvt=Math.random;function oS(){return pvt()}const mvt={random:oS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function JK(e){return e instanceof Map}function gvt(e){return e instanceof Set}function tO(e){return JK(e)||gvt(e)}function q9(e){return Array.from(e)}const yvt={has:(e,t)=>tO(e)?e.has(t):e!=null?Jf(e,t):!1,keys:e=>JK(e)?q9(e.keys()):e!=null?Object.keys(e):[],values:e=>tO(e)?q9(e.values()):e!=null?Object.values(e):[],entries:e=>tO(e)?q9(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ir};function vvt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Jf(t,e))return t[e];return n!==void 0?n:e}function bvt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const _vt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},dw={bin:evt,equal:QK,recode:vvt,sequence:bvt,...Zyt,...fvt,...hvt,...mvt,...yvt,..._vt};function IA(e){return typeof e=="bigint"}function Dh(e){return e===void 0?e+"":IA(e)?e+"n":JSON.stringify(e)}function vn(e,t=[],n=[]){return new wvt(e,Gu(t),Gu(n))}let wvt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Dh(n)}]`),...this.params.map(Dh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const T2e=e=>vn("any",e),C2e=()=>vn("count"),A2e=e=>vn("array_agg",e),I2e=e=>vn("array_agg_distinct",e),k2e=(e,t)=>vn("map_agg",[e,t]),R2e=(e,t)=>vn("object_agg",[e,t]),N2e=(e,t)=>vn("entries_agg",[e,t]),f2={...dw,row_object:(...e)=>vn("row_object",null,e.flat()),count:C2e,any:T2e,array_agg:A2e,array_agg_distinct:I2e,object_agg:R2e,map_agg:k2e,entries_agg:N2e,valid:e=>vn("valid",e),invalid:e=>vn("invalid",e),distinct:e=>vn("distinct",e),mode:e=>vn("mode",e),sum:e=>vn("sum",e),product:e=>vn("product",e),mean:e=>vn("mean",e),average:e=>vn("average",e),variance:e=>vn("variance",e),variancep:e=>vn("variancep",e),stdev:e=>vn("stdev",e),stdevp:e=>vn("stdevp",e),min:e=>vn("min",e),max:e=>vn("max",e),quantile:(e,t)=>vn("quantile",e,t),median:e=>vn("median",e),covariance:(e,t)=>vn("covariance",[e,t]),covariancep:(e,t)=>vn("covariancep",[e,t]),corr:(e,t)=>vn("corr",[e,t]),bins:(e,t,n,r)=>vn("bins",e,[t,n,r]),row_number:()=>vn("row_number"),rank:()=>vn("rank"),avg_rank:()=>vn("avg_rank"),dense_rank:()=>vn("dense_rank"),percent_rank:()=>vn("percent_rank"),cume_dist:()=>vn("cume_dist"),ntile:e=>vn("ntile",null,e),lag:(e,t,n)=>vn("lag",e,[t,n]),lead:(e,t,n)=>vn("lead",e,[t,n]),first_value:e=>vn("first_value",e),last_value:e=>vn("last_value",e),nth_value:(e,t)=>vn("nth_value",e,t),fill_down:(e,t)=>vn("fill_down",e,t),fill_up:(e,t)=>vn("fill_up",e,t)};function Evt(e,t){e=tO(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function xvt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function Svt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function Tvt(e,t,n,r){const i=r==="map"||r===!0?k2e:r==="entries"?N2e:r==="object"?R2e:xn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=Evt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:A2e(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const Cvt="ArrayPattern",Avt="ArrowFunctionExpression",Ivt="FunctionExpression",k0="Identifier",aS="Literal",P2e="MemberExpression",kvt="ObjectExpression",O2e="ObjectPattern",D2e="Property",fk="Column",Rvt="Constant",Nvt="Dictionary",Pvt="Function",Ovt="Parameter",$2e="Op",ni=(e,t)=>{const n=Dvt[e.type];return n?n(e,t):xn(`Unsupported expression construct: ${e.type}`)},W9=(e,t)=>"("+ni(e.left,t)+" "+e.operator+" "+ni(e.right,t)+")",G9=(e,t)=>"("+Md(e.params,t)+")=>"+ni(e.body,t),Hce=(e,t)=>ni(e.callee,t)+"("+Md(e.arguments,t)+")",Md=(e,t,n=",")=>e.map(r=>ni(r,t)).join(n),M2e=e=>e.computed?`[${Dh(e.name)}]`:`.${e.name}`,qce=(e,t,n)=>{const r=e.table||"";return`data${r}${M2e(e)}.${n}(${t.index}${r})`},Dvt={Constant:e=>e.raw,Column:(e,t)=>qce(e,t,"get"),Dictionary:(e,t)=>qce(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${M2e(e)}`,Op:(e,t)=>`op(${Dh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+ni(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=ni(e.object,t),i=ni(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Hce,NewExpression:(e,t)=>"new "+Hce(e,t),ArrayExpression:(e,t)=>"["+Md(e.elements,t)+"]",AssignmentExpression:W9,BinaryExpression:W9,LogicalExpression:W9,UnaryExpression:(e,t)=>"("+e.operator+ni(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+ni(e.test,t)+"?"+ni(e.consequent,t)+":"+ni(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Md(e.properties,t)+"})",Property:(e,t)=>{const n=ni(e.key,t);return(e.computed?`[${n}]`:n)+":"+ni(e.value,t)},ArrowFunctionExpression:G9,FunctionExpression:G9,FunctionDeclaration:G9,ArrayPattern:(e,t)=>"["+Md(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Md(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Md(e.declarations,t,","),VariableDeclarator:(e,t)=>ni(e.id,t)+"="+ni(e.init,t),SpreadElement:(e,t)=>"..."+ni(e.argument,t),BlockStatement:(e,t)=>"{"+Md(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>ni(e.expression,t),IfStatement:(e,t)=>"if ("+ni(e.test,t)+")"+ni(e.consequent,t)+(e.alternate?" else "+ni(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+ni(e.discriminant,t)+") {"+Md(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+ni(e.test,t):"default")+": "+Md(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+ni(e.argument,t),Program:(e,t)=>ni(e.body[0],t)};function N3(e,t={index:"row"}){return ni(e,t)}function $vt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function ME(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Om(e)?+e:cr(e)||ck(e)?`[${e.map(ME)}]`:R3(e)?e+"":Mvt(e)}function Mvt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${ME(e[r])}`;return t+="}",t}function P3(e,t){const n=e.length;return n===1?(r,i)=>ME(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=ME(a)}return s}}function Lvt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=ME(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=ME(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Bp(){}function Fvt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Ss(e){return e.init=e.init||Bp,e.add=e.add||Bp,e.rem=e.rem||Bp,e}function Wce(e,t){return e.product_v=!1,e.product=t}const L2e={count:{create:()=>Ss({value:e=>e.count}),param:[]},array_agg:{create:()=>Ss({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Ss({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Ss({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Ss({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Ss({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ir}),param:[1]},valid:{create:()=>Ss({value:e=>e.valid}),param:[1]},invalid:{create:()=>Ss({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=Lvt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Ss({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Ss({value:e=>{let t=ir,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ir,add:(e,t)=>IA(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Wce(e,1),value:e=>e.valid?e.product_v?Wce(e,Fvt(e.list.values())):e.product:void 0,add:(e,t)=>IA(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ir,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Ss({value:e=>e.valid?e.mean:ir}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ir,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Ss({value:e=>e.valid>1?e.dev/e.valid:ir}),param:[1],req:["variance"]},stdev:{create:()=>Ss({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ir}),param:[1],req:["variance"]},stdevp:{create:()=>Ss({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ir}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ir,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ir)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ir,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ir)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Ss({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Ss({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ir,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Ss({value:e=>e.valid>1?e.cov/e.valid:ir}),param:[2],req:["covariance"]},corr:{create:()=>Ss({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ir}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Ss({value:i=>$vt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Gce={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Yce={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},F2e={row_number:{create(){return{init:Bp,value:e=>e.index+1}},param:[]},rank:Gce,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Gce.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Yce,ntile:{create(e){e=+e,e>0||xn("ntile num must be greater than zero.");const{init:t,value:n}=Yce.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=ir){return e=+e||1,{init:Bp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=ir){return e=+e||1,{init:Bp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Bp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Bp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||xn("nth_value nth must be greater than zero."),{init:Bp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):ir}}},param:[1,1]},fill_down:{create(e=ir){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Of(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=ir){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=jvt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function jvt(e,t,n){for(const r=e.size;n<r;++n)if(Of(e.value(n,t)))return n;return-1}function ZK(e){return Jf(L2e,e)}function eX(e){return Jf(F2e,e)}function j2e(e){return Jf(dw,e)||e==="row_object"}function B2e(e){return ZK(e)&&L2e[e]}function U2e(e){return eX(e)&&F2e[e]}function wT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const tX={escape:(e,t,n)=>wT(e,t,n),expr:(e,t)=>wT(`(row,data,op)=>${e}`,dw,t),expr2:(e,t)=>wT(`(row0,data0,row,data)=>${e}`,dw,t),join:(e,t)=>wT(`(row1,data1,row2,data2)=>${e}`,dw,t),param:(e,t)=>wT(e,dw,t)},Bvt={"==":1,"!=":1,"===":1,"!==":1};function z2e(e,t,n=0,r,i){if(e.type=fk,e.name=t,e.table=n,i&&r&&vi(r.keyFor)){const s=Bvt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===aS&&Uvt(i,e,s,r.keyFor(s.value))}return e}function Uvt(e,t,n,r){return r<0?(e.type=aS,e.value=!1,e.raw="false"):(t.type=Nvt,n.value=r,n.raw=r+""),!0}function W6(e){return cr(e)?e:JK(e)?e.entries():e?Object.entries(e):[]}const V2e="row_object";function H2e(e,t){e.type=kvt;const n=e.properties=[];for(const r of W6(t)){const[i,s]=cr(r)?r:[r,r];n.push({type:D2e,key:{type:aS,raw:Dh(s)},value:z2e({computed:!0},i)})}return e}function q2e(e){return N3(H2e({},e))}function W2e(e){return tX.expr(q2e(e))}const zvt=new TextDecoder("utf-8"),xz=e=>zvt.decode(e),Vvt=new TextEncoder,nX=e=>Vvt.encode(e),Hvt=e=>typeof e=="boolean",_u=e=>typeof e=="function",By=e=>e!=null&&Object(e)===e,G6=e=>By(e)&&_u(e.then),rX=e=>By(e)&&_u(e[Symbol.iterator]),Y6=e=>By(e)&&_u(e[Symbol.asyncIterator]),qvt=e=>By(e)&&"done"in e&&"value"in e,G2e=e=>"_getDOMStream"in e&&"_getNodeStream"in e,Wvt=e=>By(e)&&_u(e.abort)&&_u(e.getWriter)&&!G2e(e),Gvt=e=>By(e)&&_u(e.end)&&_u(e.write)&&Hvt(e.writable)&&!G2e(e),Yvt=e=>By(e)&&_u(e.clear)&&_u(e.bytes)&&_u(e.position)&&_u(e.setPosition)&&_u(e.capacity)&&_u(e.getBufferIdentifier)&&_u(e.createLong),iX=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Kvt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function O3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function $h(e,t){const n=Kvt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?O3(o,s,a):o=s;break}O3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Gs(e,t){let n=qvt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=nX(n)),n instanceof ArrayBuffer?new e(n):n instanceof iX?new e(n):Yvt(n)?Gs(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const ET=e=>Gs(Int32Array,e),Rr=e=>Gs(Uint8Array,e),Sz=e=>(e.next(),e);function*Xvt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof iX?n(t):rX(t)?t:n(t);return yield*Sz(function*(i){let s=null;do s=i.next(yield Gs(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const Qvt=e=>Xvt(Uint8Array,e);function Y2e(e,t){return Jv(this,arguments,function*(){if(G6(t))return yield Wn(yield Wn(yield*b8(QC(Y2e(e,yield Wn(t))))));const r=function(o){return Jv(this,arguments,function*(){yield yield Wn(yield Wn(o))})},i=function(o){return Jv(this,arguments,function*(){yield Wn(yield*b8(QC(Sz(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof iX?r(t):rX(t)?i(t):Y6(t)?t:r(t);return yield Wn(yield*b8(QC(Sz(function(o){return Jv(this,arguments,function*(){let a=null;do a=yield Wn(o.next(yield yield Wn(Gs(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Wn(new e)})}const Jvt=e=>Y2e(Uint8Array,e);function K2e(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function Zvt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Kce={fromIterable(e){return EN(e1t(e))},fromAsyncIterable(e){return EN(t1t(e))},fromDOMStream(e){return EN(n1t(e))},fromNodeStream(e){return EN(i1t(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},EN=e=>(e.next(),e);function*e1t(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?$h(r,o)[0]:([i,r,a]=$h(r,o),i)}({cmd:s,size:o}=yield null);const l=Qvt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function t1t(e){return Jv(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?$h(i,a)[0]:([s,i,u]=$h(i,a),s)}({cmd:o,size:a}=yield yield Wn(null));const c=Jvt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Wn(c.next()):yield Wn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Wn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Wn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Wn(c.return(new Uint8Array(0))))}return yield Wn(null)})}function n1t(e){return Jv(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?$h(i,a)[0]:([s,i,u]=$h(i,a),s)}({cmd:o,size:a}=yield yield Wn(null));const c=new r1t(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Wn(c.read()):yield Wn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Rr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Wn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Wn(c.cancel(f)))}finally{r===!1?yield Wn(c.cancel()):e.locked&&c.releaseLock()}return yield Wn(null)})}class r1t{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Vp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Vp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Rr(n)),n})}}const Y9=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function i1t(e){return Jv(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?$h(l,a)[0]:([c,l,u]=$h(l,a),c)}if({cmd:o,size:a}=yield yield Wn(null),e.isTTY)return yield yield Wn(new Uint8Array(0)),yield Wn(null);try{n[0]=Y9(e,"end"),n[1]=Y9(e,"error");do{if(n[2]=Y9(e,"readable"),[r,s]=yield Wn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Rr(e.read(a-u)),c.byteLength<a-u&&(c=Rr(e.read()))):c=Rr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Wn(f()));while(a<u)}while(!i)}finally{yield Wn(d(n,r==="error"?s:null))}return yield Wn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var qa;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(qa||(qa={}));var Yu;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Yu||(Yu={}));var Do;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Do||(Do={}));var Mh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Mh||(Mh={}));var Wt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Wt||(Wt={}));var Lh;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Lh||(Lh={}));var Xs;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Xs||(Xs={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var Dp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Dp||(Dp={}));const s1t=void 0;function K1(e){if(e===null)return"null";if(e===s1t)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>K1(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const o1t=Symbol.for("isArrowBigNum");function fd(e,...t){return t.length===0?Object.setPrototypeOf(Gs(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}fd.prototype[o1t]=!0;fd.prototype.toJSON=function(){return`"${RA(this)}"`};fd.prototype.valueOf=function(){return X2e(this)};fd.prototype.toString=function(){return RA(this)};fd.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return X2e(this);case"string":return RA(this);case"default":return a1t(this)}return RA(this)};function Hw(...e){return fd.apply(this,e)}function qw(...e){return fd.apply(this,e)}function kA(...e){return fd.apply(this,e)}Object.setPrototypeOf(Hw.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(qw.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(kA.prototype,Object.create(Uint32Array.prototype));Object.assign(Hw.prototype,fd.prototype,{constructor:Hw,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(qw.prototype,fd.prototype,{constructor:qw,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(kA.prototype,fd.prototype,{constructor:kA,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function X2e(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const RA=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return K9(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return K9(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${K9(t)}`},a1t=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:RA(e);function K9(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class sX{static new(t,n){switch(n){case!0:return new Hw(t);case!1:return new qw(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Hw(t)}return t.byteLength===16?new kA(t):new qw(t)}static signed(t){return new Hw(t)}static unsigned(t){return new qw(t)}static decimal(t){return new kA(t)}constructor(t,n){return sX.new(t,n)}}function Zf(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var Q2e,J2e,Z2e,eAe,tAe,nAe,rAe,iAe,sAe,oAe,aAe,uAe,lAe,cAe,fAe,dAe,hAe,pAe,mAe,gAe;let Sn=class Tz{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return Tz.isUnion(t)&&t.mode===Yu.Dense}static isSparseUnion(t){return Tz.isUnion(t)&&t.mode===Yu.Sparse}get typeId(){return re.NONE}};Q2e=Symbol.toStringTag;Sn[Q2e]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Sn.prototype);let Dm=class extends Sn{toString(){return"Null"}get typeId(){return re.Null}};J2e=Symbol.toStringTag;Dm[J2e]=(e=>e[Symbol.toStringTag]="Null")(Dm.prototype);class nu extends Sn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Z2e=Symbol.toStringTag;nu[Z2e]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(nu.prototype);class oX extends nu{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class aX extends nu{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Q0 extends nu{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class uX extends nu{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class lX extends nu{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class cX extends nu{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class fX extends nu{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class dX extends nu{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(oX.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(aX.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Q0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(uX.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(lX.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(cX.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(fX.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(dX.prototype,"ArrayType",{value:BigUint64Array});class J0 extends Sn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case Do.HALF:return Uint16Array;case Do.SINGLE:return Float32Array;case Do.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}eAe=Symbol.toStringTag;J0[eAe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(J0.prototype);class yAe extends J0{constructor(){super(Do.HALF)}}class hX extends J0{constructor(){super(Do.SINGLE)}}class pX extends J0{constructor(){super(Do.DOUBLE)}}Object.defineProperty(yAe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(hX.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(pX.prototype,"ArrayType",{value:Float64Array});let NA=class extends Sn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};tAe=Symbol.toStringTag;NA[tAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(NA.prototype);let LE=class extends Sn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};nAe=Symbol.toStringTag;LE[nAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(LE.prototype);let PA=class extends Sn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};rAe=Symbol.toStringTag;PA[rAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(PA.prototype);let D3=class extends Sn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};iAe=Symbol.toStringTag;D3[iAe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(D3.prototype);class FE extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${Mh[this.unit]}>`}}sAe=Symbol.toStringTag;FE[sAe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(FE.prototype);class u1t extends FE{constructor(){super(Mh.DAY)}}class l1t extends FE{constructor(){super(Mh.MILLISECOND)}}class $m extends Sn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${Wt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}oAe=Symbol.toStringTag;$m[oAe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))($m.prototype);class c1t extends $m{constructor(){super(Wt.SECOND,32)}}class f1t extends $m{constructor(){super(Wt.MILLISECOND,32)}}class d1t extends $m{constructor(){super(Wt.MICROSECOND,64)}}class h1t extends $m{constructor(){super(Wt.NANOSECOND,64)}}class $3 extends Sn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${Wt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}aAe=Symbol.toStringTag;$3[aAe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))($3.prototype);class jE extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${Lh[this.unit]}>`}}uAe=Symbol.toStringTag;jE[uAe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(jE.prototype);class p1t extends jE{constructor(){super(Lh.DAY_TIME)}}class m1t extends jE{constructor(){super(Lh.YEAR_MONTH)}}let M3=class extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Duration}toString(){return`Duration<${Wt[this.unit]}>`}};lAe=Symbol.toStringTag;M3[lAe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(M3.prototype);let BE=class extends Sn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};cAe=Symbol.toStringTag;BE[cAe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(BE.prototype);class pa extends Sn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}fAe=Symbol.toStringTag;pa[fAe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(pa.prototype);class OA extends Sn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}dAe=Symbol.toStringTag;OA[dAe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(OA.prototype);let L3=class extends Sn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};hAe=Symbol.toStringTag;L3[hAe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(L3.prototype);let UE=class extends Sn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};pAe=Symbol.toStringTag;UE[pAe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(UE.prototype);class DA extends Sn{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}mAe=Symbol.toStringTag;DA[mAe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(DA.prototype);const g1t=(e=>()=>++e)(-1);class Z0 extends Sn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?g1t():Zf(r)}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}gAe=Symbol.toStringTag;Z0[gAe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Z0.prototype);function jd(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class Tn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return y1t(this,t,n)}getVisitFnByTypeId(t,n=!0){return z_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function y1t(e,t,n=!0){return typeof t=="number"?z_(e,t,n):typeof t=="string"&&t in re?z_(e,re[t],n):t&&t instanceof Sn?z_(e,Xce(t),n):t!=null&&t.type&&t.type instanceof Sn?z_(e,Xce(t.type),n):z_(e,re.NONE,n)}function z_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function Xce(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case Do.HALF:return re.Float16;case Do.SINGLE:return re.Float32;case Do.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case Wt.SECOND:return re.TimeSecond;case Wt.MILLISECOND:return re.TimeMillisecond;case Wt.MICROSECOND:return re.TimeMicrosecond;case Wt.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case Wt.SECOND:return re.TimestampSecond;case Wt.MILLISECOND:return re.TimestampMillisecond;case Wt.MICROSECOND:return re.TimestampMicrosecond;case Wt.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case Mh.DAY:return re.DateDay;case Mh.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case Lh.DAY_TIME:return re.IntervalDayTime;case Lh.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case Wt.SECOND:return re.DurationSecond;case Wt.MILLISECOND:return re.DurationMillisecond;case Wt.MICROSECOND:return re.DurationMicrosecond;case Wt.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case Yu.Dense:return re.DenseUnion;case Yu.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}Tn.prototype.visitInt8=null;Tn.prototype.visitInt16=null;Tn.prototype.visitInt32=null;Tn.prototype.visitInt64=null;Tn.prototype.visitUint8=null;Tn.prototype.visitUint16=null;Tn.prototype.visitUint32=null;Tn.prototype.visitUint64=null;Tn.prototype.visitFloat16=null;Tn.prototype.visitFloat32=null;Tn.prototype.visitFloat64=null;Tn.prototype.visitDateDay=null;Tn.prototype.visitDateMillisecond=null;Tn.prototype.visitTimestampSecond=null;Tn.prototype.visitTimestampMillisecond=null;Tn.prototype.visitTimestampMicrosecond=null;Tn.prototype.visitTimestampNanosecond=null;Tn.prototype.visitTimeSecond=null;Tn.prototype.visitTimeMillisecond=null;Tn.prototype.visitTimeMicrosecond=null;Tn.prototype.visitTimeNanosecond=null;Tn.prototype.visitDenseUnion=null;Tn.prototype.visitSparseUnion=null;Tn.prototype.visitIntervalDayTime=null;Tn.prototype.visitIntervalYearMonth=null;Tn.prototype.visitDuration=null;Tn.prototype.visitDurationSecond=null;Tn.prototype.visitDurationMillisecond=null;Tn.prototype.visitDurationMicrosecond=null;Tn.prototype.visitDurationNanosecond=null;const vAe=new Float64Array(1),S_=new Uint32Array(vAe.buffer);function bAe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function _Ae(e){if(e!==e)return 32256;vAe[0]=e;const t=(S_[1]&2147483648)>>16&65535;let n=S_[1]&2146435072,r=0;return n>=1089470464?S_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(S_[1]&1048575)>>10):n<=1056964608?(r=1048576+(S_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(S_[1]&1048575)+512>>10),t|n|r&65535}class Jt extends Tn{}function rn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const v1t=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},mX=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},b1t=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},_1t=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},wAe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},w1t=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},ng=({values:e},t,n)=>{e[t]=n},gX=({values:e},t,n)=>{e[t]=n},EAe=({values:e},t,n)=>{e[t]=_Ae(n)},E1t=(e,t,n)=>{switch(e.type.precision){case Do.HALF:return EAe(e,t,n);case Do.SINGLE:case Do.DOUBLE:return gX(e,t,n)}},yX=({values:e},t,n)=>{v1t(e,t,n.valueOf())},vX=({values:e},t,n)=>{mX(e,t*2,n.valueOf())},xAe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},x1t=({values:e,valueOffsets:t},n,r)=>wAe(e,t,n,r),S1t=({values:e,valueOffsets:t},n,r)=>{wAe(e,t,n,nX(r))},SAe=(e,t,n)=>{e.type.unit===Mh.DAY?yX(e,t,n):vX(e,t,n)},bX=({values:e},t,n)=>mX(e,t*2,n/1e3),_X=({values:e},t,n)=>mX(e,t*2,n),wX=({values:e},t,n)=>b1t(e,t*2,n),EX=({values:e},t,n)=>_1t(e,t*2,n),TAe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return bX(e,t,n);case Wt.MILLISECOND:return _X(e,t,n);case Wt.MICROSECOND:return wX(e,t,n);case Wt.NANOSECOND:return EX(e,t,n)}},xX=({values:e},t,n)=>{e[t]=n},SX=({values:e},t,n)=>{e[t]=n},TX=({values:e},t,n)=>{e[t]=n},CX=({values:e},t,n)=>{e[t]=n},CAe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return xX(e,t,n);case Wt.MILLISECOND:return SX(e,t,n);case Wt.MICROSECOND:return TX(e,t,n);case Wt.NANOSECOND:return CX(e,t,n)}},AAe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},T1t=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Mc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},C1t=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Mc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},A1t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),I1t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),k1t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),R1t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),N1t=(e,t,n)=>{const r=e.type.children.map(s=>Mc.getVisitFn(s.type)),i=n instanceof Map?k1t(t,n):n instanceof fr?I1t(t,n):Array.isArray(n)?A1t(t,n):R1t(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},P1t=(e,t,n)=>{e.type.mode===Yu.Dense?IAe(e,t,n):kAe(e,t,n)},IAe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Mc.visit(i,e.valueOffsets[t],n)},kAe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Mc.visit(i,t,n)},O1t=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},RAe=(e,t,n)=>{e.type.unit===Lh.DAY_TIME?AX(e,t,n):IX(e,t,n)},AX=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},IX=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},kX=({values:e},t,n)=>{e[t]=n},RX=({values:e},t,n)=>{e[t]=n},NX=({values:e},t,n)=>{e[t]=n},PX=({values:e},t,n)=>{e[t]=n},NAe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return kX(e,t,n);case Wt.MILLISECOND:return RX(e,t,n);case Wt.MICROSECOND:return NX(e,t,n);case Wt.NANOSECOND:return PX(e,t,n)}},D1t=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Mc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Jt.prototype.visitBool=rn(w1t);Jt.prototype.visitInt=rn(ng);Jt.prototype.visitInt8=rn(ng);Jt.prototype.visitInt16=rn(ng);Jt.prototype.visitInt32=rn(ng);Jt.prototype.visitInt64=rn(ng);Jt.prototype.visitUint8=rn(ng);Jt.prototype.visitUint16=rn(ng);Jt.prototype.visitUint32=rn(ng);Jt.prototype.visitUint64=rn(ng);Jt.prototype.visitFloat=rn(E1t);Jt.prototype.visitFloat16=rn(EAe);Jt.prototype.visitFloat32=rn(gX);Jt.prototype.visitFloat64=rn(gX);Jt.prototype.visitUtf8=rn(S1t);Jt.prototype.visitBinary=rn(x1t);Jt.prototype.visitFixedSizeBinary=rn(xAe);Jt.prototype.visitDate=rn(SAe);Jt.prototype.visitDateDay=rn(yX);Jt.prototype.visitDateMillisecond=rn(vX);Jt.prototype.visitTimestamp=rn(TAe);Jt.prototype.visitTimestampSecond=rn(bX);Jt.prototype.visitTimestampMillisecond=rn(_X);Jt.prototype.visitTimestampMicrosecond=rn(wX);Jt.prototype.visitTimestampNanosecond=rn(EX);Jt.prototype.visitTime=rn(CAe);Jt.prototype.visitTimeSecond=rn(xX);Jt.prototype.visitTimeMillisecond=rn(SX);Jt.prototype.visitTimeMicrosecond=rn(TX);Jt.prototype.visitTimeNanosecond=rn(CX);Jt.prototype.visitDecimal=rn(AAe);Jt.prototype.visitList=rn(T1t);Jt.prototype.visitStruct=rn(N1t);Jt.prototype.visitUnion=rn(P1t);Jt.prototype.visitDenseUnion=rn(IAe);Jt.prototype.visitSparseUnion=rn(kAe);Jt.prototype.visitDictionary=rn(O1t);Jt.prototype.visitInterval=rn(RAe);Jt.prototype.visitIntervalDayTime=rn(AX);Jt.prototype.visitIntervalYearMonth=rn(IX);Jt.prototype.visitDuration=rn(NAe);Jt.prototype.visitDurationSecond=rn(kX);Jt.prototype.visitDurationMillisecond=rn(RX);Jt.prototype.visitDurationMicrosecond=rn(NX);Jt.prototype.visitDurationNanosecond=rn(PX);Jt.prototype.visitFixedSizeList=rn(D1t);Jt.prototype.visitMap=rn(C1t);const Mc=new Jt,_f=Symbol.for("parent"),Ww=Symbol.for("rowIndex");class OX{constructor(t,n){return this[_f]=t,this[Ww]=n,new Proxy(this,new M1t)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Ww],n=this[_f],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Ku.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${K1(t)}: ${K1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new $1t(this[_f],this[Ww])}}class $1t{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Ku.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(OX.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[_f]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ww]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class M1t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[_f].type.children.map(n=>n.name)}has(t,n){return t[_f].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[_f].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[_f].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Ku.visit(t[_f].children[r],t[Ww]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[_f].type.children.findIndex(s=>s.name===n);return i!==-1?(Mc.visit(t[_f].children[i],t[Ww],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Gt extends Tn{}function Zt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const L1t=(e,t)=>864e5*e[t],DX=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),F1t=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,j1t=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,PAe=e=>new Date(e),B1t=(e,t)=>PAe(L1t(e,t)),U1t=(e,t)=>PAe(DX(e,t)),z1t=(e,t)=>null,OAe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},V1t=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},DAe=({values:e},t)=>B1t(e,t),$Ae=({values:e},t)=>U1t(e,t*2),Uy=({stride:e,values:t},n)=>t[e*n],H1t=({stride:e,values:t},n)=>bAe(t[e*n]),MAe=({values:e},t)=>e[t],q1t=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),W1t=({values:e,valueOffsets:t},n)=>OAe(e,t,n),G1t=({values:e,valueOffsets:t},n)=>{const r=OAe(e,t,n);return r!==null?xz(r):null},Y1t=({values:e},t)=>e[t],K1t=({type:e,values:t},n)=>e.precision!==Do.HALF?t[n]:bAe(t[n]),X1t=(e,t)=>e.type.unit===Mh.DAY?DAe(e,t):$Ae(e,t),LAe=({values:e},t)=>1e3*DX(e,t*2),FAe=({values:e},t)=>DX(e,t*2),jAe=({values:e},t)=>F1t(e,t*2),BAe=({values:e},t)=>j1t(e,t*2),Q1t=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return LAe(e,t);case Wt.MILLISECOND:return FAe(e,t);case Wt.MICROSECOND:return jAe(e,t);case Wt.NANOSECOND:return BAe(e,t)}},UAe=({values:e},t)=>e[t],zAe=({values:e},t)=>e[t],VAe=({values:e},t)=>e[t],HAe=({values:e},t)=>e[t],J1t=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return UAe(e,t);case Wt.MILLISECOND:return zAe(e,t);case Wt.MICROSECOND:return VAe(e,t);case Wt.NANOSECOND:return HAe(e,t)}},Z1t=({values:e,stride:t},n)=>sX.decimal(e.subarray(t*n,t*(n+1))),ebt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new fr([u])},tbt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new K6(o.slice(i,s-i))},nbt=(e,t)=>new OX(e,t),rbt=(e,t)=>e.type.mode===Yu.Dense?qAe(e,t):WAe(e,t),qAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Ku.visit(r,e.valueOffsets[t])},WAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Ku.visit(r,t)},ibt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},sbt=(e,t)=>e.type.unit===Lh.DAY_TIME?GAe(e,t):YAe(e,t),GAe=({values:e},t)=>e.subarray(2*t,2*(t+1)),YAe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},KAe=({values:e},t)=>e[t],XAe=({values:e},t)=>e[t],QAe=({values:e},t)=>e[t],JAe=({values:e},t)=>e[t],obt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return KAe(e,t);case Wt.MILLISECOND:return XAe(e,t);case Wt.MICROSECOND:return QAe(e,t);case Wt.NANOSECOND:return JAe(e,t)}},abt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new fr([s])};Gt.prototype.visitNull=Zt(z1t);Gt.prototype.visitBool=Zt(V1t);Gt.prototype.visitInt=Zt(Y1t);Gt.prototype.visitInt8=Zt(Uy);Gt.prototype.visitInt16=Zt(Uy);Gt.prototype.visitInt32=Zt(Uy);Gt.prototype.visitInt64=Zt(MAe);Gt.prototype.visitUint8=Zt(Uy);Gt.prototype.visitUint16=Zt(Uy);Gt.prototype.visitUint32=Zt(Uy);Gt.prototype.visitUint64=Zt(MAe);Gt.prototype.visitFloat=Zt(K1t);Gt.prototype.visitFloat16=Zt(H1t);Gt.prototype.visitFloat32=Zt(Uy);Gt.prototype.visitFloat64=Zt(Uy);Gt.prototype.visitUtf8=Zt(G1t);Gt.prototype.visitBinary=Zt(W1t);Gt.prototype.visitFixedSizeBinary=Zt(q1t);Gt.prototype.visitDate=Zt(X1t);Gt.prototype.visitDateDay=Zt(DAe);Gt.prototype.visitDateMillisecond=Zt($Ae);Gt.prototype.visitTimestamp=Zt(Q1t);Gt.prototype.visitTimestampSecond=Zt(LAe);Gt.prototype.visitTimestampMillisecond=Zt(FAe);Gt.prototype.visitTimestampMicrosecond=Zt(jAe);Gt.prototype.visitTimestampNanosecond=Zt(BAe);Gt.prototype.visitTime=Zt(J1t);Gt.prototype.visitTimeSecond=Zt(UAe);Gt.prototype.visitTimeMillisecond=Zt(zAe);Gt.prototype.visitTimeMicrosecond=Zt(VAe);Gt.prototype.visitTimeNanosecond=Zt(HAe);Gt.prototype.visitDecimal=Zt(Z1t);Gt.prototype.visitList=Zt(ebt);Gt.prototype.visitStruct=Zt(nbt);Gt.prototype.visitUnion=Zt(rbt);Gt.prototype.visitDenseUnion=Zt(qAe);Gt.prototype.visitSparseUnion=Zt(WAe);Gt.prototype.visitDictionary=Zt(ibt);Gt.prototype.visitInterval=Zt(sbt);Gt.prototype.visitIntervalDayTime=Zt(GAe);Gt.prototype.visitIntervalYearMonth=Zt(YAe);Gt.prototype.visitDuration=Zt(obt);Gt.prototype.visitDurationSecond=Zt(KAe);Gt.prototype.visitDurationMillisecond=Zt(XAe);Gt.prototype.visitDurationMicrosecond=Zt(QAe);Gt.prototype.visitDurationNanosecond=Zt(JAe);Gt.prototype.visitFixedSizeList=Zt(abt);Gt.prototype.visitMap=Zt(tbt);const Ku=new Gt,If=Symbol.for("keys"),Gw=Symbol.for("vals");class K6{constructor(t){return this[If]=new fr([t.children[0]]).memoize(),this[Gw]=t.children[1],new Proxy(this,new lbt)}[Symbol.iterator](){return new ubt(this[If],this[Gw])}get size(){return this[If].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[If],n=this[Gw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Ku.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${K1(t)}: ${K1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class ubt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Ku.visit(this.vals,t)]})}}class lbt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[If].toArray().map(String)}has(t,n){return t[If].includes(n)}getOwnPropertyDescriptor(t,n){if(t[If].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[If].indexOf(n);if(r!==-1){const i=Ku.visit(Reflect.get(t,Gw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[If].indexOf(n);return i!==-1?(Mc.visit(Reflect.get(t,Gw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(K6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[If]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Gw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Qce;function ZAe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Qce=s,s=o,o=Qce),o>i&&(o=i),r?r(e,s,o):[s,o]}const Jce=e=>e!==e;function uS(e){if(typeof e!=="object"||e===null)return Jce(e)?Jce:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?Zvt(e,n):!1:e instanceof Map?fbt(e):Array.isArray(e)?cbt(e):e instanceof fr?dbt(e):hbt(e,!0)}function cbt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=uS(e[n]);return X6(t)}function fbt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=uS(r);return X6(n)}function dbt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=uS(e.get(n));return X6(t)}function hbt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=uS(e[n[i]]);return X6(r,n)}function X6(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return pbt(e,n);case Map:return Zce(e,n,n.keys());case K6:case OX:case Object:case void 0:return Zce(e,n,t||Object.keys(n))}return n instanceof fr?mbt(e,n):!1}}function pbt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function mbt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Zce(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function eIe(e,t,n,r){return(n&1<<r)!==0}function gbt(e,t,n,r){return(n&1<<r)>>r}function F3(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):tIe(new $X(n,e,t,null,eIe)).subarray(0,r)),i}return n}function tIe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class $X{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Cz(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new $X(e,t,n-t,e,gbt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return Cz(e,t,i)+Cz(e,r,n)+ybt(e,i>>3,r-i>>3)}function ybt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=X9(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=X9(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=X9(s.getUint8(i)),i+=1;return r}function X9(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const vbt=-1;class kr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return Sn.isSparseUnion(t)?this.children.some(n=>n.nullable):Sn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(Sn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=vbt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-Cz(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof kr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=jd(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(Sn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===Yu.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(Sn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===Yu.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(F3(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new kr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(F3(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Dp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Dp.TYPE])&&(o[Dp.TYPE]=s.subarray(t,t+n)),(s=o[Dp.OFFSET])&&(o[Dp.OFFSET]=s.subarray(t,t+n+1))||(s=o[Dp.DATA])&&(o[Dp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}kr.prototype.children=Object.freeze([]);class d2 extends Tn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new kr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Gs(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Gs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Gs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.data),s=Rr(t.nullBitmap),o=ET(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.data),s=Rr(t.nullBitmap),o=ET(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Gs(n.ArrayType,t.data),{["length"]:o=s.length/jd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Gs(n.ArrayType,t.data),{["length"]:o=s.length/jd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Gs(n.ArrayType,t.data),{["length"]:o=s.length/jd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Gs(n.ArrayType,t.data),{["length"]:o=s.length/jd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Gs(n.ArrayType,t.data),{["length"]:o=s.length/jd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Rr(t.nullBitmap),o=ET(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Rr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Gs(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(Sn.isSparseUnion(n))return new kr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=ET(t.valueOffsets);return new kr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Gs(n.indices.ArrayType,t.data),{["dictionary"]:o=new fr([new d2().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Gs(n.ArrayType,t.data),{["length"]:o=s.length/jd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Gs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new d2().visit({type:n.valueType})}=t,s=Rr(t.nullBitmap),{["length"]:o=i.length/jd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new d2().visit({type:n.childType})}=t,s=Rr(t.nullBitmap),o=ET(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,void 0,s],[i])}}const bbt=new d2;function ca(e){return bbt.visit(e)}class efe{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function nIe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function rIe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function iIe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function MX(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function LX(e,t){return e.getValid(t)}function Yw(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return MX(r,this._offsets,n,t)}}function sIe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=MX(s,this._offsets,r,n);return t=void 0,o}}function oIe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):MX(s,this._offsets,i,n);return t=void 0,o}}class Yt extends Tn{}function _bt(e,t){return t===null&&e.length>0?0:-1}function wbt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new $X(n,e.offset+(t||0),e.length,n,eIe)){if(!i)return r;++r}return-1}function fn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return wbt(e,n)}const r=Ku.getVisitFn(e),i=uS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function aIe(e,t,n){const r=Ku.getVisitFn(e),i=uS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Yt.prototype.visitNull=_bt;Yt.prototype.visitBool=fn;Yt.prototype.visitInt=fn;Yt.prototype.visitInt8=fn;Yt.prototype.visitInt16=fn;Yt.prototype.visitInt32=fn;Yt.prototype.visitInt64=fn;Yt.prototype.visitUint8=fn;Yt.prototype.visitUint16=fn;Yt.prototype.visitUint32=fn;Yt.prototype.visitUint64=fn;Yt.prototype.visitFloat=fn;Yt.prototype.visitFloat16=fn;Yt.prototype.visitFloat32=fn;Yt.prototype.visitFloat64=fn;Yt.prototype.visitUtf8=fn;Yt.prototype.visitBinary=fn;Yt.prototype.visitFixedSizeBinary=fn;Yt.prototype.visitDate=fn;Yt.prototype.visitDateDay=fn;Yt.prototype.visitDateMillisecond=fn;Yt.prototype.visitTimestamp=fn;Yt.prototype.visitTimestampSecond=fn;Yt.prototype.visitTimestampMillisecond=fn;Yt.prototype.visitTimestampMicrosecond=fn;Yt.prototype.visitTimestampNanosecond=fn;Yt.prototype.visitTime=fn;Yt.prototype.visitTimeSecond=fn;Yt.prototype.visitTimeMillisecond=fn;Yt.prototype.visitTimeMicrosecond=fn;Yt.prototype.visitTimeNanosecond=fn;Yt.prototype.visitDecimal=fn;Yt.prototype.visitList=fn;Yt.prototype.visitStruct=fn;Yt.prototype.visitUnion=fn;Yt.prototype.visitDenseUnion=aIe;Yt.prototype.visitSparseUnion=aIe;Yt.prototype.visitDictionary=fn;Yt.prototype.visitInterval=fn;Yt.prototype.visitIntervalDayTime=fn;Yt.prototype.visitIntervalYearMonth=fn;Yt.prototype.visitDuration=fn;Yt.prototype.visitDurationSecond=fn;Yt.prototype.visitDurationMillisecond=fn;Yt.prototype.visitDurationMicrosecond=fn;Yt.prototype.visitDurationNanosecond=fn;Yt.prototype.visitFixedSizeList=fn;Yt.prototype.visitMap=fn;const j3=new Yt;class Kt extends Tn{}function en(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof nu&&t.bitWidth!==64||t instanceof $m&&t.bitWidth!==64||t instanceof J0&&t.precision!==Do.HALF))return new efe(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new efe(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new Ebt(o)})}class Ebt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Kt.prototype.visitNull=en;Kt.prototype.visitBool=en;Kt.prototype.visitInt=en;Kt.prototype.visitInt8=en;Kt.prototype.visitInt16=en;Kt.prototype.visitInt32=en;Kt.prototype.visitInt64=en;Kt.prototype.visitUint8=en;Kt.prototype.visitUint16=en;Kt.prototype.visitUint32=en;Kt.prototype.visitUint64=en;Kt.prototype.visitFloat=en;Kt.prototype.visitFloat16=en;Kt.prototype.visitFloat32=en;Kt.prototype.visitFloat64=en;Kt.prototype.visitUtf8=en;Kt.prototype.visitBinary=en;Kt.prototype.visitFixedSizeBinary=en;Kt.prototype.visitDate=en;Kt.prototype.visitDateDay=en;Kt.prototype.visitDateMillisecond=en;Kt.prototype.visitTimestamp=en;Kt.prototype.visitTimestampSecond=en;Kt.prototype.visitTimestampMillisecond=en;Kt.prototype.visitTimestampMicrosecond=en;Kt.prototype.visitTimestampNanosecond=en;Kt.prototype.visitTime=en;Kt.prototype.visitTimeSecond=en;Kt.prototype.visitTimeMillisecond=en;Kt.prototype.visitTimeMicrosecond=en;Kt.prototype.visitTimeNanosecond=en;Kt.prototype.visitDecimal=en;Kt.prototype.visitList=en;Kt.prototype.visitStruct=en;Kt.prototype.visitUnion=en;Kt.prototype.visitDenseUnion=en;Kt.prototype.visitSparseUnion=en;Kt.prototype.visitDictionary=en;Kt.prototype.visitInterval=en;Kt.prototype.visitIntervalDayTime=en;Kt.prototype.visitIntervalYearMonth=en;Kt.prototype.visitDuration=en;Kt.prototype.visitDurationSecond=en;Kt.prototype.visitDurationMillisecond=en;Kt.prototype.visitDurationMicrosecond=en;Kt.prototype.visitDurationNanosecond=en;Kt.prototype.visitFixedSizeList=en;Kt.prototype.visitMap=en;const FX=new Kt,xbt=(e,t)=>e+t;class zy extends Tn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Wt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Fh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Fh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const Sbt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Tbt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Cbt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Fh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},Abt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Fh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},Ibt=(e,t)=>e.type.mode===Yu.Dense?uIe(e,t):lIe(e,t),uIe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Fh.visit(t[s],r[i])},lIe=({children:e},t)=>4+Fh.visitMany(e,e.map(()=>t)).reduce(xbt,0);zy.prototype.visitUtf8=Sbt;zy.prototype.visitBinary=Tbt;zy.prototype.visitList=Cbt;zy.prototype.visitFixedSizeList=Abt;zy.prototype.visitUnion=Ibt;zy.prototype.visitDenseUnion=uIe;zy.prototype.visitSparseUnion=lIe;const Fh=new zy;var cIe;const fIe={},dIe={};class fr{constructor(t){var n,r,i;const s=t[0]instanceof fr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof kr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=fIe[o.typeId],f=s[0];this.isValid=d=>LX(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,dIe[o.typeId]),this._offsets=rIe(s);break}this.data=s,this.type=o,this.stride=jd(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return nIe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return FX.visit(this)}concat(...t){return new fr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new fr(ZAe(this,t,n,({data:r,_offsets:i},s,o)=>iIe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new fr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Sn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Sn.isDictionary(this.type)){const t=new B3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new fr(n)}return new B3(this)}unmemoize(){if(Sn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new fr(n)}return this}}cIe=Symbol.toStringTag;fr[cIe]=(e=>{e.type=Sn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=Ku.getVisitFnByTypeId(n),i=Mc.getVisitFnByTypeId(n),s=j3.getVisitFnByTypeId(n),o=Fh.getVisitFnByTypeId(n);fIe[n]={get:r,set:i,indexOf:s,byteLength:o},dIe[n]=Object.create(e,{isValid:{value:Yw(LX)},get:{value:Yw(Ku.getVisitFnByTypeId(n))},set:{value:sIe(Mc.getVisitFnByTypeId(n))},indexOf:{value:oIe(j3.getVisitFnByTypeId(n))},getByteLength:{value:Yw(Fh.getVisitFnByTypeId(n))}})}return"Vector"})(fr.prototype);class B3 extends fr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new B3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new fr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function kbt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${Rbt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function Rbt(e){return typeof e!="bigint"?K1(e):`${K1(e)}n`}const Q9=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,Nbt=(e,t=0)=>e.length>=t?e.subarray(0,t):O3(new e.constructor(t),e,0);class Q6{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?Q9(r*1,this.BYTES_PER_ELEMENT):Q9(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=Q9(t*this.stride,this.BYTES_PER_ELEMENT);const n=Nbt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=O3(new this.ArrayType(t),this.buffer)}}Q6.prototype.offset=0;class dk extends Q6{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class hIe extends dk{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class pIe extends dk{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let rl=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=jd(t),this._nulls=new hIe,n&&n.length>0&&(this._isValid=kbt(n))}toVector(){return new fr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),ca({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};rl.prototype.length=1;rl.prototype.stride=1;rl.prototype.children=null;rl.prototype.finished=!1;rl.prototype.nullValues=null;rl.prototype._isValid=()=>!0;class rg extends rl{constructor(t){super(t),this._values=new dk(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class J6 extends rl{constructor(t){super(t),this._pendingLength=0,this._offsets=new pIe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof K6?n[If].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class Az{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const J9=2,Kd=4,Wp=4,Vr=4,Fg=new Int32Array(2),tfe=new Float32Array(Fg.buffer),nfe=new Float64Array(Fg.buffer),xN=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Iz;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(Iz||(Iz={}));let U3=class mIe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new mIe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Fg[0]=this.readInt32(t),tfe[0]}readFloat64(t){return Fg[xN?0:1]=this.readInt32(t),Fg[xN?1:0]=this.readInt32(t+4),nfe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){tfe[0]=n,this.writeInt32(t,Fg[0])}writeFloat64(t,n){nfe[0]=n,this.writeInt32(t,Fg[xN?0:1]),this.writeInt32(t+4,Fg[xN?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Kd+Wp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Wp;n++)t+=String.fromCharCode(this.readInt8(this.position_+Kd+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Kd;const i=this.bytes_.subarray(t,t+r);return n===Iz.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Kd}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Wp)throw new Error("FlatBuffers: file identifier must be length "+Wp);for(let n=0;n<Wp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Kd+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},gIe=class yIe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=U3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=yIe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=U3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Kd,0),this.writeInt32(this.offset()-t+Kd)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*J9;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=J9;l<s;l+=J9)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Vr:0;if(n){const s=n;if(this.prep(this.minalign,Kd+Wp+i),s.length!=Wp)throw new TypeError("FlatBuffers: file identifier must be length "+Wp);for(let o=Wp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Kd+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Kd,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Is{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Is).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Vr),(n||new Is).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Is.startKeyValue(t),Is.addKey(t,n),Is.addValue(t,r),Is.endKeyValue(t)}}var zE;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(zE||(zE={}));var VE;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(VE||(VE={}));var z3;(function(e){e[e.DenseArray=0]="DenseArray"})(z3||(z3={}));class vl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new vl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Vr),(n||new vl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return vl.startInt(t),vl.addBitWidth(t,n),vl.addIsSigned(t,r),vl.endInt(t)}}class Gp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Gp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Vr),(n||new Gp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new vl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):z3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,z3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class o1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new o1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Vr),(n||new o1).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return o1.startBinary(t),o1.endBinary(t)}}class a1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new a1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Vr),(n||new a1).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return a1.startBool(t),a1.endBool(t)}}var V3;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(V3||(V3={}));let nO=class V_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new V_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Vr),(n||new V_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):V3.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,V3.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return V_.startDate(t),V_.addUnit(t,n),V_.endDate(t)}};class wu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new wu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Vr),(n||new wu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return wu.startDecimal(t),wu.addPrecision(t,n),wu.addScale(t,r),wu.addBitWidth(t,i),wu.endDecimal(t)}}var ey;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(ey||(ey={}));class Xd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Xd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Vr),(n||new Xd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ey.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,ey.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Xd.startDuration(t),Xd.addUnit(t,n),Xd.endDuration(t)}}class Qd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Qd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Vr),(n||new Qd).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Qd.startFixedSizeBinary(t),Qd.addByteWidth(t,n),Qd.endFixedSizeBinary(t)}}class Jd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Jd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Vr),(n||new Jd).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Jd.startFixedSizeList(t),Jd.addListSize(t,n),Jd.endFixedSizeList(t)}}var H3;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(H3||(H3={}));class Zd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Zd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Vr),(n||new Zd).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):H3.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,H3.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Zd.startFloatingPoint(t),Zd.addPrecision(t,n),Zd.endFloatingPoint(t)}}var q3;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(q3||(q3={}));class eh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new eh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Vr),(n||new eh).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):q3.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,q3.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return eh.startInterval(t),eh.addUnit(t,n),eh.endInterval(t)}}class u1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new u1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Vr),(n||new u1).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return u1.startList(t),u1.endList(t)}}let rO=class H_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new H_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Vr),(n||new H_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return H_.startMap(t),H_.addKeysSorted(t,n),H_.endMap(t)}};class l1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new l1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Vr),(n||new l1).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return l1.startNull(t),l1.endNull(t)}}class c1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new c1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Vr),(n||new c1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return c1.startStruct_(t),c1.endStruct_(t)}}let mC=class Av{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Av).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Vr),(n||new Av).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ey.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,ey.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Av.startTime(t),Av.addUnit(t,n),Av.addBitWidth(t,r),Av.endTime(t)}},gC=class Iv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Iv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Vr),(n||new Iv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ey.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,ey.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Iv.startTimestamp(t),Iv.addUnit(t,n),Iv.addTimezone(t,r),Iv.endTimestamp(t)}};var W3;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(W3||(W3={}));let kv=class Rv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Rv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Vr),(n||new Rv).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):W3.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,W3.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Rv.startUnion(t),Rv.addMode(t,n),Rv.addTypeIds(t,r),Rv.endUnion(t)}};class f1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new f1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Vr),(n||new f1).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return f1.startUtf8(t),f1.endUtf8(t)}}var _i;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(_i||(_i={}));let ic=class iO{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new iO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Vr),(n||new iO).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):_i.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Gp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new iO).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Is).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,_i.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Ld=class Pp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Pp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Vr),(n||new Pp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):VE.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new ic).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Is).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,VE.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Pp.startSchema(t),Pp.addEndianness(t,n),Pp.addFields(t,r),Pp.addCustomMetadata(t,i),Pp.addFeatures(t,s),Pp.endSchema(t)}};class dl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new dl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Vr),(n||new dl).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zE.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Ld).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Az).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new Az).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Is).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,zE.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Sr{constructor(t=[],n,r,i=qa.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=Rz(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Sr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Sr(n,this.metadata)}assign(...t){const n=t[0]instanceof Sr?t[0]:Array.isArray(t[0])?new Sr(t[0]):new Sr(t),r=[...this.fields],i=SN(SN(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:SN(SN(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=Rz(s,new Map);return new Sr([...r,...s],i,new Map([...this.dictionaries,...o]))}}Sr.prototype.fields=null;Sr.prototype.metadata=null;Sr.prototype.dictionaries=null;let Fr=class kz{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new kz(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],kz.new(n,r,i,s)}};Fr.prototype.type=null;Fr.prototype.name=null;Fr.prototype.nullable=null;Fr.prototype.metadata=null;function SN(e,t){return new Map([...e||new Map,...t||new Map])}function Rz(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Sn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Rz(s.children,t)}return t}var Pbt=gIe,Obt=U3;class Nz{static decode(t){t=new Obt(Rr(t));const n=dl.getRootAsFooter(t),r=Sr.decode(n.schema(),new Map,n.version());return new Dbt(r,n)}static encode(t){const n=new Pbt,r=Sr.encode(n,t.schema);dl.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())ty.encode(n,o);const i=n.endVector();dl.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())ty.encode(n,o);const s=n.endVector();return dl.startFooter(n),dl.addSchema(n,r),dl.addVersion(n,qa.V5),dl.addRecordBatches(n,i),dl.addDictionaries(n,s),dl.finishFooterBuffer(n,dl.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=qa.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Dbt extends Nz{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return ty.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return ty.decode(n)}return null}}class ty{static decode(t){return new ty(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return Az.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Zf(r),this.bodyLength=Zf(n)}}const TN=Object.freeze({done:!0,value:void 0});class vIe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class $bt extends vIe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Vp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(TN);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Kce.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Kce.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Vp(this,void 0,void 0,function*(){return yield this.abort(t),TN})}return(t){return Vp(this,void 0,void 0,function*(){return yield this.close(),TN})}read(t){return Vp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Vp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(TN)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Z9 extends $bt{write(t){if((t=Rr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?xz(this.toUint8Array(!0)):this.toUint8Array(!1).then(xz)}toUint8Array(t=!1){return t?$h(this._values)[0]:Vp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=QC(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return $h(o,a)[0]})}}class bIe extends J6{constructor(t){super(t),this._values=new Q6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Rr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class Mbt extends rl{constructor(t){super(t),this._values=new hIe}setValue(t,n){this._values.set(t,+n)}}class Z6 extends rg{}Z6.prototype._setValue=SAe;class _Ie extends Z6{}_Ie.prototype._setValue=yX;class wIe extends Z6{}wIe.prototype._setValue=vX;class EIe extends rg{}EIe.prototype._setValue=AAe;class Lbt extends rl{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new Z0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=G3({type:this.type.indices,nullValues:n}),this.dictionary=G3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class xIe extends rg{}xIe.prototype._setValue=xAe;class Fbt extends rl{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new UE(this.type.listSize,new Fr(n,t.type,!0)),r}}class e4 extends rg{setValue(t,n){this._values.set(t,n)}}class jbt extends e4{setValue(t,n){super.setValue(t,_Ae(n))}}class Bbt extends e4{}class Ubt extends e4{}class t4 extends rg{}t4.prototype._setValue=RAe;class SIe extends t4{}SIe.prototype._setValue=AX;class TIe extends t4{}TIe.prototype._setValue=IX;class lS extends rg{}lS.prototype._setValue=NAe;class CIe extends lS{}CIe.prototype._setValue=kX;class AIe extends lS{}AIe.prototype._setValue=RX;class IIe extends lS{}IIe.prototype._setValue=NX;class kIe extends lS{}kIe.prototype._setValue=PX;class ig extends rg{setValue(t,n){this._values.set(t,n)}}class zbt extends ig{}class Vbt extends ig{}class Hbt extends ig{}class qbt extends ig{}class Wbt extends ig{}class Gbt extends ig{}class Ybt extends ig{}class Kbt extends ig{}class Xbt extends J6{constructor(t){super(t),this._offsets=new pIe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new BE(new Fr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class Qbt extends J6{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new DA(new Fr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class Jbt extends rl{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class Zbt extends rl{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new pa([...this.type.children,new Fr(n,t.type,!0)]),r}}class cS extends rg{}cS.prototype._setValue=TAe;class RIe extends cS{}RIe.prototype._setValue=bX;class NIe extends cS{}NIe.prototype._setValue=_X;class PIe extends cS{}PIe.prototype._setValue=wX;class OIe extends cS{}OIe.prototype._setValue=EX;class fS extends rg{}fS.prototype._setValue=CAe;class DIe extends fS{}DIe.prototype._setValue=xX;class $Ie extends fS{}$Ie.prototype._setValue=SX;class MIe extends fS{}MIe.prototype._setValue=TX;class LIe extends fS{}LIe.prototype._setValue=CX;class jX extends rl{constructor(t){super(t),this._typeIds=new dk(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Fr(n,t.type)];return this.type=new OA(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class e_t extends jX{}class t_t extends jX{constructor(t){super(t),this._offsets=new dk(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class FIe extends J6{constructor(t){super(t),this._values=new Q6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,nX(n))}_flushPending(t,n){}}FIe.prototype._flushPending=bIe.prototype._flushPending;class n_t extends Tn{visitNull(){return Jbt}visitBool(){return Mbt}visitInt(){return ig}visitInt8(){return zbt}visitInt16(){return Vbt}visitInt32(){return Hbt}visitInt64(){return qbt}visitUint8(){return Wbt}visitUint16(){return Gbt}visitUint32(){return Ybt}visitUint64(){return Kbt}visitFloat(){return e4}visitFloat16(){return jbt}visitFloat32(){return Bbt}visitFloat64(){return Ubt}visitUtf8(){return FIe}visitBinary(){return bIe}visitFixedSizeBinary(){return xIe}visitDate(){return Z6}visitDateDay(){return _Ie}visitDateMillisecond(){return wIe}visitTimestamp(){return cS}visitTimestampSecond(){return RIe}visitTimestampMillisecond(){return NIe}visitTimestampMicrosecond(){return PIe}visitTimestampNanosecond(){return OIe}visitTime(){return fS}visitTimeSecond(){return DIe}visitTimeMillisecond(){return $Ie}visitTimeMicrosecond(){return MIe}visitTimeNanosecond(){return LIe}visitDecimal(){return EIe}visitList(){return Xbt}visitStruct(){return Zbt}visitUnion(){return jX}visitDenseUnion(){return t_t}visitSparseUnion(){return e_t}visitDictionary(){return Lbt}visitInterval(){return t4}visitIntervalDayTime(){return SIe}visitIntervalYearMonth(){return TIe}visitDuration(){return lS}visitDurationSecond(){return CIe}visitDurationMillisecond(){return AIe}visitDurationMicrosecond(){return IIe}visistDurationNanosecond(){return kIe}visitFixedSizeList(){return Fbt}visitMap(){return Qbt}}const r_t=new n_t;class Xt extends Tn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function au(e,t){return t instanceof e.constructor}function hk(e,t){return e===t||au(e,t)}function sg(e,t){return e===t||au(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function n4(e,t){return e===t||au(e,t)&&e.precision===t.precision}function i_t(e,t){return e===t||au(e,t)&&e.byteWidth===t.byteWidth}function BX(e,t){return e===t||au(e,t)&&e.unit===t.unit}function pk(e,t){return e===t||au(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function mk(e,t){return e===t||au(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function s_t(e,t){return e===t||au(e,t)&&e.children.length===t.children.length&&ny.compareManyFields(e.children,t.children)}function o_t(e,t){return e===t||au(e,t)&&e.children.length===t.children.length&&ny.compareManyFields(e.children,t.children)}function UX(e,t){return e===t||au(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&ny.compareManyFields(e.children,t.children)}function a_t(e,t){return e===t||au(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&ny.visit(e.indices,t.indices)&&ny.visit(e.dictionary,t.dictionary)}function zX(e,t){return e===t||au(e,t)&&e.unit===t.unit}function gk(e,t){return e===t||au(e,t)&&e.unit===t.unit}function u_t(e,t){return e===t||au(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&ny.compareManyFields(e.children,t.children)}function l_t(e,t){return e===t||au(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&ny.compareManyFields(e.children,t.children)}Xt.prototype.visitNull=hk;Xt.prototype.visitBool=hk;Xt.prototype.visitInt=sg;Xt.prototype.visitInt8=sg;Xt.prototype.visitInt16=sg;Xt.prototype.visitInt32=sg;Xt.prototype.visitInt64=sg;Xt.prototype.visitUint8=sg;Xt.prototype.visitUint16=sg;Xt.prototype.visitUint32=sg;Xt.prototype.visitUint64=sg;Xt.prototype.visitFloat=n4;Xt.prototype.visitFloat16=n4;Xt.prototype.visitFloat32=n4;Xt.prototype.visitFloat64=n4;Xt.prototype.visitUtf8=hk;Xt.prototype.visitBinary=hk;Xt.prototype.visitFixedSizeBinary=i_t;Xt.prototype.visitDate=BX;Xt.prototype.visitDateDay=BX;Xt.prototype.visitDateMillisecond=BX;Xt.prototype.visitTimestamp=pk;Xt.prototype.visitTimestampSecond=pk;Xt.prototype.visitTimestampMillisecond=pk;Xt.prototype.visitTimestampMicrosecond=pk;Xt.prototype.visitTimestampNanosecond=pk;Xt.prototype.visitTime=mk;Xt.prototype.visitTimeSecond=mk;Xt.prototype.visitTimeMillisecond=mk;Xt.prototype.visitTimeMicrosecond=mk;Xt.prototype.visitTimeNanosecond=mk;Xt.prototype.visitDecimal=hk;Xt.prototype.visitList=s_t;Xt.prototype.visitStruct=o_t;Xt.prototype.visitUnion=UX;Xt.prototype.visitDenseUnion=UX;Xt.prototype.visitSparseUnion=UX;Xt.prototype.visitDictionary=a_t;Xt.prototype.visitInterval=zX;Xt.prototype.visitIntervalDayTime=zX;Xt.prototype.visitIntervalYearMonth=zX;Xt.prototype.visitDuration=gk;Xt.prototype.visitDurationSecond=gk;Xt.prototype.visitDurationMillisecond=gk;Xt.prototype.visitDurationMicrosecond=gk;Xt.prototype.visitDurationNanosecond=gk;Xt.prototype.visitFixedSizeList=u_t;Xt.prototype.visitMap=l_t;const ny=new Xt;function Pz(e,t){return ny.compareSchemas(e,t)}function G3(e){const t=e.type,n=new(r_t.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(G3(Object.assign(Object.assign({},l),{type:u})))}}return n}function ej(e,t){return c_t(e,t.map(n=>n.data.concat()))}function c_t(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=f_t(n,o,c,t,i),o>0&&(r[s++]=ca({type:new pa(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new bl(e,f))]}function f_t(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:ca({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var jIe;class Cu{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Sr([]),this._offsets=[0],this;let i,s;t[0]instanceof Sr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof bl)return[u];if(u instanceof Cu)return u.batches;if(u instanceof kr){if(u.type instanceof pa)return[new bl(new Sr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new fr([u[h]])),f=new Sr(l.map((h,p)=>new Fr(String(h),c[p].type))),[,d]=ej(f,c);return d.length===0?[new bl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Sr([]),!(i instanceof Sr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof bl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Pz(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??rIe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=nIe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?FX.visit(new fr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Cu(n,r.map(i=>new bl(n,i)))}slice(t,n){const r=this.schema;[t,n]=ZAe({length:this.numRows},t,n);const i=iIe(this.data,this._offsets,t,n);return new Cu(r,i.map(s=>new bl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=ca({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new fr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new fr([ca({type:new Dm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=ej(r,a)}return new Cu(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Cu(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Cu(...ej(s,o))}}jIe=Symbol.toStringTag;Cu[jIe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Yw(LX),e.get=Yw(Ku.getVisitFn(re.Struct)),e.set=sIe(Mc.getVisitFn(re.Struct)),e.indexOf=oIe(j3.getVisitFn(re.Struct)),e.getByteLength=Yw(Fh.getVisitFn(re.Struct)),"Table"))(Cu.prototype);var BIe;let bl=class yC{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Sr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ca({nullCount:0,type:new pa(this.schema.fields),children:this.schema.fields.map(n=>ca({type:n.type,nullCount:0}))})]=t,!(this.data instanceof kr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=rfe(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Fr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Sr(r),a=ca({type:new pa(r),length:s,children:i,nullCount:0});[this.schema,this.data]=rfe(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=UIe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Ku.visit(this.data,t)}set(t,n){return Mc.visit(this.data,t,n)}indexOf(t,n){return j3.visit(this.data,t,n)}getByteLength(t){return Fh.visit(this.data,t)}[Symbol.iterator](){return FX.visit(new fr([this.data]))}toArray(){return[...this]}concat(...t){return new Cu(this.schema,[this,...t])}slice(t,n){const[r]=new fr([this.data]).slice(t,n).data;return new yC(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new fr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new fr([ca({type:new Dm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Sr(s,new Map(this.schema.metadata)),i=ca({type:new pa(s),children:o})}return new yC(r,i)}select(t){const n=this.schema.select(t),r=new pa(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new yC(n,ca({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=ca({type:new pa(n.fields),length:this.numRows,children:r});return new yC(n,i)}};BIe=Symbol.toStringTag;bl[BIe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(bl.prototype);function rfe(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:ca({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),ca({type:new pa(i),length:n,children:s})]}function UIe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])UIe(a.children,l==null?void 0:l.children,n);if(Sn.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class d_t extends bl{constructor(t){const n=t.fields.map(i=>ca({type:i.type})),r=ca({type:new pa(t.fields),nullCount:0,children:n});super(t,r)}}var Y3;(function(e){e[e.BUFFER=0]="BUFFER"})(Y3||(Y3={}));var K3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(K3||(K3={}));class jg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new jg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Vr),(n||new jg).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):K3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Y3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,K3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,Y3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return jg.startBodyCompression(t),jg.addCodec(t,n),jg.addMethod(t,r),jg.endBodyCompression(t)}}let zIe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},VIe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},$p=class Oz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new Oz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Vr),(n||new Oz).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new VIe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new zIe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new jg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},q_=class Dz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Dz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Vr),(n||new Dz).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new $p).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var X3;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(X3||(X3={}));let wg=class Id{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Id).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Vr),(n||new Id).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zE.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):X3.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Is).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,zE.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,X3.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Id.startMessage(t),Id.addVersion(t,n),Id.addHeaderType(t,r),Id.addHeader(t,i),Id.addBodyLength(t,s),Id.addCustomMetadata(t,o),Id.endMessage(t)}};class h_t extends Tn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return l1.startNull(n),l1.endNull(n)}visitInt(t,n){return vl.startInt(n),vl.addBitWidth(n,t.bitWidth),vl.addIsSigned(n,t.isSigned),vl.endInt(n)}visitFloat(t,n){return Zd.startFloatingPoint(n),Zd.addPrecision(n,t.precision),Zd.endFloatingPoint(n)}visitBinary(t,n){return o1.startBinary(n),o1.endBinary(n)}visitBool(t,n){return a1.startBool(n),a1.endBool(n)}visitUtf8(t,n){return f1.startUtf8(n),f1.endUtf8(n)}visitDecimal(t,n){return wu.startDecimal(n),wu.addScale(n,t.scale),wu.addPrecision(n,t.precision),wu.addBitWidth(n,t.bitWidth),wu.endDecimal(n)}visitDate(t,n){return nO.startDate(n),nO.addUnit(n,t.unit),nO.endDate(n)}visitTime(t,n){return mC.startTime(n),mC.addUnit(n,t.unit),mC.addBitWidth(n,t.bitWidth),mC.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return gC.startTimestamp(n),gC.addUnit(n,t.unit),r!==void 0&&gC.addTimezone(n,r),gC.endTimestamp(n)}visitInterval(t,n){return eh.startInterval(n),eh.addUnit(n,t.unit),eh.endInterval(n)}visitDuration(t,n){return Xd.startDuration(n),Xd.addUnit(n,t.unit),Xd.endDuration(n)}visitList(t,n){return u1.startList(n),u1.endList(n)}visitStruct(t,n){return c1.startStruct_(n),c1.endStruct_(n)}visitUnion(t,n){kv.startTypeIdsVector(n,t.typeIds.length);const r=kv.createTypeIdsVector(n,t.typeIds);return kv.startUnion(n),kv.addMode(n,t.mode),kv.addTypeIds(n,r),kv.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Gp.startDictionaryEncoding(n),Gp.addId(n,BigInt(t.id)),Gp.addIsOrdered(n,t.isOrdered),r!==void 0&&Gp.addIndexType(n,r),Gp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Qd.startFixedSizeBinary(n),Qd.addByteWidth(n,t.byteWidth),Qd.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Jd.startFixedSizeList(n),Jd.addListSize(n,t.listSize),Jd.endFixedSizeList(n)}visitMap(t,n){return rO.startMap(n),rO.addKeysSorted(n,t.keysSorted),rO.endMap(n)}}const tj=new h_t;function p_t(e,t=new Map){return new Sr(g_t(e,t),sO(e.metadata),t)}function HIe(e){return new Ll(e.count,qIe(e.columns),WIe(e.columns))}function m_t(e){return new jh(HIe(e.data),e.id,e.isDelta)}function g_t(e,t){return(e.fields||[]).filter(Boolean).map(n=>Fr.fromJSON(n,t))}function ife(e,t){return(e.children||[]).filter(Boolean).map(n=>Fr.fromJSON(n,t))}function qIe(e){return(e||[]).reduce((t,n)=>[...t,new ry(n.count,y_t(n.VALIDITY)),...qIe(n.children)],[])}function WIe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new oh(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new oh(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new oh(t.length,i.OFFSET.length)),i.DATA&&t.push(new oh(t.length,i.DATA.length)),t=WIe(i.children,t)}return t}function y_t(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function v_t(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=ofe(e,ife(e,t)),i=new Fr(e.name,o,e.nullable,sO(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?sfe(r):new Q0,a=new Z0(t.get(n),r,n,s.isOrdered),i=new Fr(e.name,a,e.nullable,sO(e.metadata))):(r=(r=s.indexType)?sfe(r):new Q0,t.set(n,o=ofe(e,ife(e,t))),a=new Z0(o,r,n,s.isOrdered),i=new Fr(e.name,a,e.nullable,sO(e.metadata))),i||null}function sO(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function sfe(e){return new nu(e.isSigned,e.bitWidth)}function ofe(e,t){const n=e.type.name;switch(n){case"NONE":return new Dm;case"null":return new Dm;case"binary":return new NA;case"utf8":return new LE;case"bool":return new PA;case"list":return new BE((t||[])[0]);case"struct":return new pa(t||[]);case"struct_":return new pa(t||[])}switch(n){case"int":{const r=e.type;return new nu(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new J0(Do[r.precision])}case"decimal":{const r=e.type;return new D3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new FE(Mh[r.unit])}case"time":{const r=e.type;return new $m(Wt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new $3(Wt[r.unit],r.timezone)}case"interval":{const r=e.type;return new jE(Lh[r.unit])}case"duration":{const r=e.type;return new M3(Wt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new OA(Yu[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new L3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new UE(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new DA((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var b_t=gIe,__t=U3;class th{static fromJSON(t,n){const r=new th(0,qa.V5,n);return r._createHeader=w_t(t,n),r}static decode(t){t=new __t(Rr(t));const n=wg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new th(r,i,s);return o._createHeader=E_t(n,s),o}static encode(t){const n=new b_t;let r=-1;return t.isSchema()?r=Sr.encode(n,t.header()):t.isRecordBatch()?r=Ll.encode(n,t.header()):t.isDictionaryBatch()&&(r=jh.encode(n,t.header())),wg.startMessage(n),wg.addVersion(n,qa.V5),wg.addHeader(n,r),wg.addHeaderType(n,t.headerType),wg.addBodyLength(n,BigInt(t.bodyLength)),wg.finishMessageBuffer(n,wg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Sr)return new th(0,qa.V5,Xs.Schema,t);if(t instanceof Ll)return new th(n,qa.V5,Xs.RecordBatch,t);if(t instanceof jh)return new th(n,qa.V5,Xs.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Xs.Schema}isRecordBatch(){return this.headerType===Xs.RecordBatch}isDictionaryBatch(){return this.headerType===Xs.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Zf(t)}}class Ll{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Zf(t)}}class jh{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Zf(n)}}class oh{constructor(t,n){this.offset=Zf(t),this.length=Zf(n)}}class ry{constructor(t,n){this.length=Zf(t),this.nullCount=Zf(n)}}function w_t(e,t){return()=>{switch(t){case Xs.Schema:return Sr.fromJSON(e);case Xs.RecordBatch:return Ll.fromJSON(e);case Xs.DictionaryBatch:return jh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Xs[t]}, type: ${t} }`)}}function E_t(e,t){return()=>{switch(t){case Xs.Schema:return Sr.decode(e.header(new Ld),new Map,e.version());case Xs.RecordBatch:return Ll.decode(e.header(new $p),e.version());case Xs.DictionaryBatch:return jh.decode(e.header(new q_),e.version())}throw new Error(`Unrecognized Message type: { name: ${Xs[t]}, type: ${t} }`)}}Fr.encode=O_t;Fr.decode=N_t;Fr.fromJSON=v_t;Sr.encode=P_t;Sr.decode=x_t;Sr.fromJSON=p_t;Ll.encode=D_t;Ll.decode=S_t;Ll.fromJSON=HIe;jh.encode=$_t;jh.decode=T_t;jh.fromJSON=m_t;ry.encode=M_t;ry.decode=A_t;oh.encode=L_t;oh.decode=C_t;function x_t(e,t=new Map,n=qa.V5){const r=R_t(e,t);return new Sr(r,oO(e),t,n)}function S_t(e,t=qa.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Ll(e.length(),I_t(e),k_t(e,t))}function T_t(e,t=qa.V5){return new jh(Ll.decode(e.data(),t),e.id(),e.isDelta())}function C_t(e){return new oh(e.offset(),e.length())}function A_t(e){return new ry(e.length(),e.nullCount())}function I_t(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=ry.decode(n));return t}function k_t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<qa.V4&&(r.bb_pos+=8*(i+1)),n[++s]=oh.decode(r));return n}function R_t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Fr.decode(r,t));return n}function afe(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Fr.decode(r,t));return n}function N_t(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=lfe(e,afe(e,t)),r=new Fr(e.name(),i,e.nullable(),oO(e))):t.has(n=Zf(a.id()))?(s=(s=a.indexType())?ufe(s):new Q0,o=new Z0(t.get(n),s,n,a.isOrdered()),r=new Fr(e.name(),o,e.nullable(),oO(e))):(s=(s=a.indexType())?ufe(s):new Q0,t.set(n,i=lfe(e,afe(e,t))),o=new Z0(i,s,n,a.isOrdered()),r=new Fr(e.name(),o,e.nullable(),oO(e))),r||null}function oO(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function ufe(e){return new nu(e.isSigned(),e.bitWidth())}function lfe(e,t){const n=e.typeType();switch(n){case _i.NONE:return new Dm;case _i.Null:return new Dm;case _i.Binary:return new NA;case _i.Utf8:return new LE;case _i.Bool:return new PA;case _i.List:return new BE((t||[])[0]);case _i.Struct_:return new pa(t||[])}switch(n){case _i.Int:{const r=e.type(new vl);return new nu(r.isSigned(),r.bitWidth())}case _i.FloatingPoint:{const r=e.type(new Zd);return new J0(r.precision())}case _i.Decimal:{const r=e.type(new wu);return new D3(r.scale(),r.precision(),r.bitWidth())}case _i.Date:{const r=e.type(new nO);return new FE(r.unit())}case _i.Time:{const r=e.type(new mC);return new $m(r.unit(),r.bitWidth())}case _i.Timestamp:{const r=e.type(new gC);return new $3(r.unit(),r.timezone())}case _i.Interval:{const r=e.type(new eh);return new jE(r.unit())}case _i.Duration:{const r=e.type(new Xd);return new M3(r.unit())}case _i.Union:{const r=e.type(new kv);return new OA(r.mode(),r.typeIdsArray()||[],t||[])}case _i.FixedSizeBinary:{const r=e.type(new Qd);return new L3(r.byteWidth())}case _i.FixedSizeList:{const r=e.type(new Jd);return new UE(r.listSize(),(t||[])[0])}case _i.Map:{const r=e.type(new rO);return new DA((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${_i[n]}" (${n})`)}function P_t(e,t){const n=t.fields.map(s=>Fr.encode(e,s));Ld.startFieldsVector(e,n.length);const r=Ld.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Ld.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Is.startKeyValue(e),Is.addKey(e,a),Is.addValue(e,u),Is.endKeyValue(e)})):-1;return Ld.startSchema(e),Ld.addFields(e,r),Ld.addEndianness(e,F_t?VE.Little:VE.Big),i!==-1&&Ld.addCustomMetadata(e,i),Ld.endSchema(e)}function O_t(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Sn.isDictionary(s)?(o=s.dictionary.typeId,i=tj.visit(s,e),r=tj.visit(s.dictionary,e)):r=tj.visit(s,e);const a=(s.children||[]).map(c=>Fr.encode(e,c)),u=ic.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?ic.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Is.startKeyValue(e),Is.addKey(e,d),Is.addValue(e,h),Is.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),ic.startField(e),ic.addType(e,r),ic.addTypeType(e,o),ic.addChildren(e,u),ic.addNullable(e,!!t.nullable),n!==-1&&ic.addName(e,n),i!==-1&&ic.addDictionary(e,i),l!==-1&&ic.addCustomMetadata(e,l),ic.endField(e)}function D_t(e,t){const n=t.nodes||[],r=t.buffers||[];$p.startNodesVector(e,n.length);for(const o of n.slice().reverse())ry.encode(e,o);const i=e.endVector();$p.startBuffersVector(e,r.length);for(const o of r.slice().reverse())oh.encode(e,o);const s=e.endVector();return $p.startRecordBatch(e),$p.addLength(e,BigInt(t.length)),$p.addNodes(e,i),$p.addBuffers(e,s),$p.endRecordBatch(e)}function $_t(e,t){const n=Ll.encode(e,t.data);return q_.startDictionaryBatch(e),q_.addId(e,BigInt(t.id)),q_.addIsDelta(e,t.isDelta),q_.addData(e,n),q_.endDictionaryBatch(e)}function M_t(e,t){return VIe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function L_t(e,t){return zIe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const F_t=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),$z="ARROW1",VX=new Uint8Array($z.length);for(let e=0;e<$z.length;e+=1)VX[e]=$z.codePointAt(e);VX.length;class ds extends Tn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof bl?s.data.children:s.data),r=new ds;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof fr)return this.visitMany(t.data),this;const{type:n}=t;if(!Sn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(Sn.isUnion(n))this.nodes.push(new ry(r,0));else{const{nullCount:i}=t;Sn.isNull(n)||Uf.call(this,i<=0?new Uint8Array(0):F3(t.offset,r,t.nullBitmap)),this.nodes.push(new ry(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Uf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new oh(this._byteLength,t)),this._byteLength+=t,this}function j_t(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Uf.call(this,i),n.mode===Yu.Sparse)return Mz.call(this,e);if(n.mode===Yu.Dense){if(e.offset<=0)return Uf.call(this,s),Mz.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Uf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function B_t(e){let t;return e.nullCount>=e.length?Uf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Uf.call(this,F3(e.offset,e.length,t)):Uf.call(this,tIe(e.values))}function og(e){return Uf.call(this,e.values.subarray(0,e.length*e.stride))}function GIe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Uf.call(this,K2e(-i,t+1,r)),Uf.call(this,n.subarray(i,i+o)),this}function HX(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Uf.call(this,K2e(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function Mz(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}ds.prototype.visitBool=B_t;ds.prototype.visitInt=og;ds.prototype.visitFloat=og;ds.prototype.visitUtf8=GIe;ds.prototype.visitBinary=GIe;ds.prototype.visitFixedSizeBinary=og;ds.prototype.visitDate=og;ds.prototype.visitTimestamp=og;ds.prototype.visitTime=og;ds.prototype.visitDecimal=og;ds.prototype.visitList=HX;ds.prototype.visitStruct=Mz;ds.prototype.visitUnion=j_t;ds.prototype.visitInterval=og;ds.prototype.visitDuration=og;ds.prototype.visitFixedSizeList=HX;ds.prototype.visitMap=HX;class YIe extends vIe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Z9,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,By(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return G6(t)?t.then(n=>this.writeAll(n)):Y6(t)?YX(this,t):GX(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Z9?this._sink=t:(this._sink=new Z9,t&&Wvt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Gvt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!Pz(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Cu&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof bl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Pz(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof bl?t instanceof d_t||this._writeRecordBatch(t):t instanceof Cu?this.writeAll(t.batches):rX(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=th.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Xs.RecordBatch?this._recordBatchBlocks.push(new ty(a,t.bodyLength,this._position)):t.headerType===Xs.DictionaryBatch&&this._dictionaryBlocks.push(new ty(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Rr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(th.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(VX)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=ds.assemble(t),o=new Ll(t.numRows,r,i),a=th.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=ds.assemble(new fr([t])),u=new Ll(t.length,s,o),l=new jh(u,n,r),c=th.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class qX extends YIe{static writeAll(t,n){const r=new qX(n);return G6(t)?t.then(i=>r.writeAll(i)):Y6(t)?YX(r,t):GX(r,t)}}class WX extends YIe{static writeAll(t){const n=new WX;return G6(t)?t.then(r=>n.writeAll(r)):Y6(t)?YX(n,t):GX(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=Nz.encode(new Nz(t,qa.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function GX(e,t){let n=t;t instanceof Cu&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function YX(e,t){var n,r,i,s,o,a,u;return Vp(this,void 0,void 0,function*(){try{for(n=!0,r=QC(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function U_t(e,t="stream"){return(t==="stream"?qX:WX).writeAll(e).toUint8Array(!0)}function KX(e,t=1){return(e*t+63&-64||64)/t}function iy(e,t,n=e.BYTES_PER_ELEMENT){return new e(KX(t,n))}function XX(e){return e instanceof kr?e:new kr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function z_t(e){return new fr([XX(e)])}const QX=new TextEncoder;function V_t(e,t,n){const r=QX.encode(n);return e.set(r,t),r.length}function H_t(e,t,n){return QX.encodeInto(n,e.subarray(t)).written}const q_t=QX.encodeInto?H_t:V_t;function cfe(e,t){const n=iy(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function W_t(e,t){const n=iy(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function G_t(e,t){const n=iy(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function Y_t(e,t){const n=iy(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function K_t(e){const t=G3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function X_t(e,t,n){const r=iy(Int32Array,t+1),i=iy(Uint8Array,3*n);let s=0;return{set(o,a){s+=q_t(i,s,o),r[a+1]=s},data:()=>{const o=KX(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function Q_t(e,t){const n=[],r=iy(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:J_t(e.dictionary,n,o)})}}function J_t(e,t,n){const r=X_t(e,t.length,n);return t.forEach(r.set),z_t(r.data())}function Z_t(e,t){const n=iy(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function ewt(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?cfe:null;break;case re.Float:r=e.precision>0?cfe:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?Q_t:null;break;case re.Bool:r=W_t;break;case re.Date:r=e.unit?Y_t:G_t;break}return r==null?K_t(e):n?Z_t(r(e,t),t):r(e,t)}function twt(e,t){const n=e.length,r=KX(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),XX({type:t,length:n,buffers:[null,i]})}function KIe(e,t,n,r,i=!0){const s=ewt(r,e,i);return t(n,s.set),XX(s.data())}function JX(e){if(e instanceof Sn||e==null)return e;switch(e){case re.Binary:return new NA;case re.Bool:return new PA;case re.DateDay:return new u1t;case re.DateMillisecond:case re.Date:return new l1t;case re.Dictionary:return new Z0(new LE,new Q0);case re.Float16:return new yAe;case re.Float32:return new hX;case re.Float64:case re.Float:return new pX;case re.Int8:return new oX;case re.Int16:return new aX;case re.Int32:case re.Int:return new Q0;case re.Int64:return new uX;case re.IntervalDayTime:return new p1t;case re.Interval:case re.IntervalYearMonth:return new m1t;case re.Null:return new Dm;case re.TimeMicrosecond:return new d1t;case re.TimeMillisecond:case re.Time:return new f1t;case re.TimeNanosecond:return new h1t;case re.TimeSecond:return new c1t;case re.Uint8:return new lX;case re.Uint16:return new cX;case re.Uint32:return new fX;case re.Uint64:return new dX;case re.Utf8:return new LE;default:xn(`Unsupported type code: ${Dh(e)}. Use a data type constructor instead?`)}}function nwt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function XIe(e,t){const n=Lz();return e(t,n.add),n}function Lz(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Om(t))++e.dates,nwt(t)&&++e.utcdays;else if(s1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=Lz());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=Lz())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return JX(rwt(e))}};return e}function rwt(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:xn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:xn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Fr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new UE(e.minlen,n):new BE(n)}else if(e.structs===t){const n=e.struct_prof;return new pa(Object.keys(n).map(r=>Fr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;xn("Type inference failure")}}}}function iwt(e,t,n,r,i,s=!0){if(i=JX(i),!i){const o=XIe(r,t);s=o.nulls>0,i=o.type()}return KIe(n,r,t,i,s)}function swt(e,t,n,r,i,s=!0){i=JX(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=owt(o);if(u&&a&&ffe(u.type,i))return u;const l=o.data;if(ck(l)){const c=awt(l);if(a&&c&&ffe(c,i))return twt(l,c);i=i||c,s=!1}if(!i){const c=XIe(r,o);s=c.nulls>0,i=c.type()}return KIe(n,r,o,i,s)}function owt(e){return e instanceof fr?e:e.vector instanceof fr?e.vector:null}function awt(e){const n={Float32Array:hX,Float64Array:pX,Int8Array:oX,Int16Array:aX,Int32Array:Q0,Uint8Array:lX,Uint16Array:cX,Uint32Array:fX,BigInt64Array:uX,BigUint64Array:dX}[e.constructor.name];return n?new n:null}function ffe(e,t){return!e||!t?!0:e.compareTo(t)}function uwt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function lwt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&s1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const cwt=()=>xn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function fwt(){try{return Cu}catch{cwt()}}function QIe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=dwt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&xn("Column length mismatch"),a[l]=c});const u=fwt();return new u(a)}function dwt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=vi(n)?n(e):cr(n)?n:null;if(cr(e))return{dataFrom:iwt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:uwt(e,r,i)};if(hwt(e))return{dataFrom:swt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:lwt(e,r,i)};xn("Unsupported input data type")}function hwt(e){return e&&vi(e.reify)}function pwt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return U_t(QIe(e,r),n)}function mwt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function gwt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&Om(u))++i,mwt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function r4(e,t){return vi(t)?t(e):t||e.columnNames()}function JIe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=gwt(ywt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function ywt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function ZX(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function vwt(e,t={}){const n=r4(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":Om(l)?q6(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return ZX(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function ZIe(e,t={}){if(vi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Om(e))return t.utc?q6(e):w2e(e);{const r=JSON.stringify(e,(s,o)=>ck(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function i4(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function bwt(e,t={}){const n=r4(e,t.columns),{align:r,format:i}=JIe(e,n,t),s=_wt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(ZIe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",_=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${_?` style="${_}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return ZX(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function _wt(e){return i4(e.style,t=>vi(t)?t:()=>t)}function wwt(e,t=!0,n=!1){return e===void 0||e?t:n}const Ewt=e=>Om(e)?q6(e,!0):e;function xwt(e,t={}){const n=wwt(t.schema),r=t.format||{},i=r4(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||Ewt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function Swt(e,t={}){const n=r4(e,t.columns),{align:r,format:i}=JIe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return ZX(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(ZIe(u,i[l]))+"|"}}),a+`
`}function eke(e,t){for(const[n,r]of W6(t))e.set(n,r);return e}function Twt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Mm(e,t,n=new Map){return t=tu(t)?e.columnName(t):t,qo(t)?n.set(t,t):cr(t)?t.forEach(r=>Mm(e,r,n)):vi(t)?Mm(e,t(e),n):Sa(t)?eke(n,t):xn(`Invalid column selection: ${Dh(t)}`),n}function s4(e,t){return e.toObject=t,e}function tke(e){return cr(e)?e.map(tke):e&&e.toObject?e.toObject():e}function HE(){return s4(e=>e.columnNames(),()=>({all:[]}))}function nke(...e){return e=e.flat(),s4(t=>{const n=Mm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:tke(e)}))}function Cwt(e,t){return s4(n=>{let r=tu(e)?e:n.columnIndex(e),i=tu(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function Awt(e){return qo(e)&&(e=RegExp(Twt(e))),s4(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function Iwt(e){return ck(e.data)?e.data.constructor:Array}class nh extends qyt{static from(t,n){return new nh(Yyt(t,n),n)}static new(t,n){if(t instanceof nh)return t;const r={},i=[];for(const[s,o]of W6(t))r[s]=o,i.push(s);return new nh(r,n||i)}constructor(t,n,r,i,s,o){i4(t,Gyt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new nh(t||this._data,n||(t?null:this._names),o,i!==void 0?i:xvt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Kl(r).groupby(r.groups());return t.forEach(s=>{s=nh.new(s),s.numRows()!==n&&xn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):xn(`Unrecognized column: ${t}`)}object(t=0){return dfe(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Mm(this,t.columns||HE()),o=W2e(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),Tvt(this,u,a,n)}return a}*[Symbol.iterator](){const t=dfe(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(Iwt(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=Svt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return QIe(this,t)}toArrowBuffer(t){return pwt(this,t)}toCSV(t){return vwt(this,t)}toHTML(t){return bwt(this,t)}toJSON(t){return xwt(this,t)}toMarkdown(t){return Swt(this,t)}}function dfe(e){let t=e._builder;if(!t){const n=W2e(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class kwt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Qn(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=Rwt[e.type];s&&s(e,t,n)}const CN=(e,t,n)=>{Qn(e.argument,t,n,e)},nj=(e,t,n)=>{Qn(e.left,t,n,e),Qn(e.right,t,n,e)},hfe=(e,t,n)=>{Qn(e.test,t,n,e),Qn(e.consequent,t,n,e),e.alternate&&Qn(e.alternate,t,n,e)},rj=(e,t,n)=>{Fd(e.params,t,n,e),Qn(e.body,t,n,e)},pfe=(e,t,n)=>{Qn(e.callee,t,n,e),Fd(e.arguments,t,n,e)},Fd=(e,t,n,r)=>{e.forEach(i=>Qn(i,t,n,r))},Rwt={TemplateLiteral:(e,t,n)=>{Fd(e.expressions,t,n,e),Fd(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Qn(e.object,t,n,e),Qn(e.property,t,n,e)},CallExpression:pfe,NewExpression:pfe,ArrayExpression:(e,t,n)=>{Fd(e.elements,t,n,e)},AssignmentExpression:nj,AwaitExpression:CN,BinaryExpression:nj,LogicalExpression:nj,UnaryExpression:CN,UpdateExpression:CN,ConditionalExpression:hfe,ObjectExpression:(e,t,n)=>{Fd(e.properties,t,n,e)},Property:(e,t,n)=>{Qn(e.key,t,n,e),Qn(e.value,t,n,e)},ArrowFunctionExpression:rj,FunctionExpression:rj,FunctionDeclaration:rj,VariableDeclaration:(e,t,n)=>{Fd(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Qn(e.id,t,n,e),Qn(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Qn(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Fd(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Qn(e.expression,t,n,e)},IfStatement:hfe,ForStatement:(e,t,n)=>{Qn(e.init,t,n,e),Qn(e.test,t,n,e),Qn(e.update,t,n,e),Qn(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Qn(e.test,t,n,e),Qn(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Qn(e.body,t,n,e),Qn(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Qn(e.discriminant,t,n,e),Fd(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Qn(e.test,t,n,e),Fd(e.consequent,t,n,e)},ReturnStatement:CN,Program:(e,t,n)=>{Qn(e.body[0],t,n,e)}};function rke(e){delete e.start,delete e.end,delete e.optional}function mfe(e){rke(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function Nwt(e){return Qn(e,null,{Column:mfe,Constant:mfe,Default:rke}),e}function Rs(e,t){return t&&t.type===e}function Pwt(e){return Rs(Ivt,e)||Rs(Avt,e)}function Owt(e){return vi(e)?e:()=>e}const Dwt="Escaped functions are not valid as rollup or pivot values.";function $wt(e,t,n){e.aggronly&&xn(Dwt);const r="(row,data)=>fn("+q2e(e.table.columnNames())+",$)";return{escape:tX.escape(r,Owt(t.expr),n)}}var Mwt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],ike=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],Lwt="-----------------------------------------------------------------------------------------------------------------------------------------------------",ske="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",ij={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},sj="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Fwt={5:sj,"5module":sj+" export import",6:sj+" const class extends export import super"},jwt=/^in(stanceof)?$/,Bwt=new RegExp("["+ske+"]"),Uwt=new RegExp("["+ske+Lwt+"]");function Fz(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Lm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&Bwt.test(String.fromCharCode(e)):t===!1?!1:Fz(e,ike)}function qE(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&Uwt.test(String.fromCharCode(e)):t===!1?!1:Fz(e,ike)||Fz(e,Mwt)}var rr=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Zl(e,t){return new rr(e,{beforeExpr:!0,binop:t})}var ec={beforeExpr:!0},mu={startsExpr:!0},eQ={};function Hn(e,t){return t===void 0&&(t={}),t.keyword=e,eQ[e]=new rr(e,t)}var K={num:new rr("num",mu),regexp:new rr("regexp",mu),string:new rr("string",mu),name:new rr("name",mu),privateId:new rr("privateId",mu),eof:new rr("eof"),bracketL:new rr("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new rr("]"),braceL:new rr("{",{beforeExpr:!0,startsExpr:!0}),braceR:new rr("}"),parenL:new rr("(",{beforeExpr:!0,startsExpr:!0}),parenR:new rr(")"),comma:new rr(",",ec),semi:new rr(";",ec),colon:new rr(":",ec),dot:new rr("."),question:new rr("?",ec),questionDot:new rr("?."),arrow:new rr("=>",ec),template:new rr("template"),invalidTemplate:new rr("invalidTemplate"),ellipsis:new rr("...",ec),backQuote:new rr("`",mu),dollarBraceL:new rr("${",{beforeExpr:!0,startsExpr:!0}),eq:new rr("=",{beforeExpr:!0,isAssign:!0}),assign:new rr("_=",{beforeExpr:!0,isAssign:!0}),incDec:new rr("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new rr("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Zl("||",1),logicalAND:Zl("&&",2),bitwiseOR:Zl("|",3),bitwiseXOR:Zl("^",4),bitwiseAND:Zl("&",5),equality:Zl("==/!=/===/!==",6),relational:Zl("</>/<=/>=",7),bitShift:Zl("<</>>/>>>",8),plusMin:new rr("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Zl("%",10),star:Zl("*",10),slash:Zl("/",10),starstar:new rr("**",{beforeExpr:!0}),coalesce:Zl("??",1),_break:Hn("break"),_case:Hn("case",ec),_catch:Hn("catch"),_continue:Hn("continue"),_debugger:Hn("debugger"),_default:Hn("default",ec),_do:Hn("do",{isLoop:!0,beforeExpr:!0}),_else:Hn("else",ec),_finally:Hn("finally"),_for:Hn("for",{isLoop:!0}),_function:Hn("function",mu),_if:Hn("if"),_return:Hn("return",ec),_switch:Hn("switch"),_throw:Hn("throw",ec),_try:Hn("try"),_var:Hn("var"),_const:Hn("const"),_while:Hn("while",{isLoop:!0}),_with:Hn("with"),_new:Hn("new",{beforeExpr:!0,startsExpr:!0}),_this:Hn("this",mu),_super:Hn("super",mu),_class:Hn("class",mu),_extends:Hn("extends",ec),_export:Hn("export"),_import:Hn("import",mu),_null:Hn("null",mu),_true:Hn("true",mu),_false:Hn("false",mu),_in:Hn("in",{beforeExpr:!0,binop:7}),_instanceof:Hn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Hn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Hn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Hn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},tf=/\r\n?|\n|\u2028|\u2029/,zwt=new RegExp(tf.source,"g");function dS(e){return e===10||e===13||e===8232||e===8233}function oke(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(dS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var ake=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,dc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,uke=Object.prototype,Vwt=uke.hasOwnProperty,Hwt=uke.toString,yk=Object.hasOwn||function(e,t){return Vwt.call(e,t)},gfe=Array.isArray||function(e){return Hwt.call(e)==="[object Array]"},yfe=Object.create(null);function s0(e){return yfe[e]||(yfe[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function sy(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var qwt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,$A=function(t,n){this.line=t,this.column=n};$A.prototype.offset=function(t){return new $A(this.line,this.column+t)};var o4=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function lke(e,t){for(var n=1,r=0;;){var i=oke(e,r,t);if(i<0)return new $A(n,t-r);++n,r=i}}var jz={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},vfe=!1;function Wwt(e){var t={};for(var n in jz)t[n]=e&&yk(e,n)?e[n]:jz[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!vfe&&typeof console=="object"&&console.warn&&(vfe=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),gfe(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return gfe(t.onComment)&&(t.onComment=Gwt(t,t.onComment)),t}function Gwt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new o4(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var MA=1,hS=2,tQ=4,cke=8,fke=16,dke=32,nQ=64,hke=128,vk=256,rQ=MA|hS|vk;function iQ(e,t){return hS|(e?tQ:0)|(t?cke:0)}var Q3=0,sQ=1,ag=2,pke=3,mke=4,gke=5,Fs=function(t,n,r){this.options=t=Wwt(t),this.sourceFile=t.sourceFile,this.keywords=s0(Fwt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=ij[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=s0(i);var s=(i?i+" ":"")+ij.strict;this.reservedWordsStrict=s0(s),this.reservedWordsStrictBind=s0(s+" "+ij.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(tf).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(MA),this.regexpState=null,this.privateNameStack=[]},sp={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Fs.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};sp.inFunction.get=function(){return(this.currentVarScope().flags&hS)>0};sp.inGenerator.get=function(){return(this.currentVarScope().flags&cke)>0&&!this.currentVarScope().inClassFieldInit};sp.inAsync.get=function(){return(this.currentVarScope().flags&tQ)>0&&!this.currentVarScope().inClassFieldInit};sp.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&vk)return!1;if(t.flags&hS)return(t.flags&tQ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};sp.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&nQ)>0||n||this.options.allowSuperOutsideMethod};sp.allowDirectSuper.get=function(){return(this.currentThisScope().flags&hke)>0};sp.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};sp.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(hS|vk))>0||n};sp.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&vk)>0};Fs.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Fs.parse=function(t,n){return new this(n,t).parse()};Fs.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Fs.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Fs.prototype,sp);var uu=Fs.prototype,Ywt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;uu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){dc.lastIndex=e,e+=dc.exec(this.input)[0].length;var t=Ywt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){dc.lastIndex=e+t[0].length;var n=dc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||tf.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,dc.lastIndex=e,e+=dc.exec(this.input)[0].length,this.input[e]===";"&&e++}};uu.eat=function(e){return this.type===e?(this.next(),!0):!1};uu.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};uu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};uu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};uu.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||tf.test(this.input.slice(this.lastTokEnd,this.start))};uu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};uu.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};uu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};uu.expect=function(e){this.eat(e)||this.unexpected()};uu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var a4=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};uu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};uu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};uu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};uu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Dt=Fs.prototype;Dt.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var oQ={kind:"loop"},Kwt={kind:"switch"};Dt.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;dc.lastIndex=this.pos;var t=dc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Lm(r,!0)){for(var i=n+1;qE(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!jwt.test(s))return!0}return!1};Dt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;dc.lastIndex=this.pos;var e=dc.exec(this.input),t=this.pos+e[0].length,n;return!tf.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(qE(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Dt.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){dc.lastIndex=this.pos;var o=dc.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Dt.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Dt.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Dt.parseDoStatement=function(e){return this.next(),this.labels.push(oQ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Dt.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(oQ),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new a4,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Dt.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,h2|(n?0:Bz),!1,t)};Dt.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Dt.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Dt.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(Kwt),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Dt.parseThrowStatement=function(e){return this.next(),tf.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var Xwt=[];Dt.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?dke:0),this.checkLValPattern(e,t?mke:ag),this.expect(K.parenR),e};Dt.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Dt.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Dt.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(oQ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Dt.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Dt.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Dt.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Dt.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Dt.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Dt.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Dt.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Dt.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};Dt.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?sQ:ag,!1)};var h2=1,Bz=2,yke=4;Dt.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&Bz&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&h2&&(e.id=t&yke&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&Bz)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?sQ:ag:pke));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(iQ(e.async,e.generator)),t&h2||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&h2?"FunctionDeclaration":"FunctionExpression")};Dt.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Dt.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&Qwt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Dt.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&J3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Dt.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};Dt.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Dt.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&J3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Dt.parseClassField=function(e){if(J3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&J3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Dt.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(vk|nQ);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Dt.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,ag,!1)):(t===!0&&this.unexpected(),e.id=null)};Dt.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};Dt.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Dt.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];yk(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function Qwt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function J3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Dt.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Dt.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Dt.parseExportDeclaration=function(e){return this.parseStatement(null)};Dt.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,h2|yke,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Dt.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),yk(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Dt.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Dt.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Dt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Dt.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Dt.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Dt.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=Xwt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Dt.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,ag),this.finishNode(e,"ImportSpecifier")};Dt.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,ag),this.finishNode(e,"ImportDefaultSpecifier")};Dt.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,ag),this.finishNode(e,"ImportNamespaceSpecifier")};Dt.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};Dt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return qwt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Dt.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Dt.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var nf=Fs.prototype;nf.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};nf.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};nf.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};nf.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};nf.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};nf.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};nf.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};nf.parseBindingListItem=function(e){return e};nf.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};nf.checkLValSimple=function(e,t,n){t===void 0&&(t=Q3);var r=t!==Q3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===ag&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(yk(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==gke&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};nf.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=Q3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};nf.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=Q3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var ff=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Ci={b_stat:new ff("{",!1),b_expr:new ff("{",!0),b_tmpl:new ff("${",!1),p_stat:new ff("(",!1),p_expr:new ff("(",!0),q_tmpl:new ff("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new ff("function",!1),f_expr:new ff("function",!0),f_expr_gen:new ff("function",!0,!1,null,!0),f_gen:new ff("function",!1,!1,null,!0)},pS=Fs.prototype;pS.initialContext=function(){return[Ci.b_stat]};pS.curContext=function(){return this.context[this.context.length-1]};pS.braceIsBlock=function(e){var t=this.curContext();return t===Ci.f_expr||t===Ci.f_stat?!0:e===K.colon&&(t===Ci.b_stat||t===Ci.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?tf.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===Ci.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};pS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};pS.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};pS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Ci.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Ci.b_stat:Ci.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(Ci.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?Ci.p_stat:Ci.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==Ci.p_stat)&&!(e===K._return&&tf.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===Ci.b_stat)?this.context.push(Ci.f_expr):this.context.push(Ci.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===Ci.q_tmpl?this.context.pop():this.context.push(Ci.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===Ci.f_expr?this.context[t]=Ci.f_expr_gen:this.context[t]=Ci.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var ln=Fs.prototype;ln.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};ln.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};ln.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new a4,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};ln.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};ln.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};ln.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};ln.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};ln.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&vke(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function vke(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&vke(e.expression)}ln.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};ln.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};ln.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};ln.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};ln.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new a4,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};ln.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(Ci.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(Ci.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};ln.parseExprAtomDefault=function(){this.unexpected()};ln.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};ln.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};ln.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};ln.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};ln.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};ln.shouldParseArrow=function(e){return!this.canInsertSemicolon()};ln.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new a4,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};ln.parseParenItem=function(e){return e};ln.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var Jwt=[];ln.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=Jwt,this.finishNode(e,"NewExpression")};ln.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};ln.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};ln.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!tf.test(this.input.slice(this.lastTokEnd,this.start))};ln.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};ln.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};ln.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};ln.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};ln.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};ln.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};ln.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(iQ(t,r.generator)|nQ|(n?hke:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};ln.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(iQ(n,!1)|fke),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};ln.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,gke),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};ln.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};ln.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,sQ,t?null:n)}};ln.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};ln.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};ln.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};ln.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};ln.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};ln.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};ln.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var Z3=Fs.prototype;Z3.raise=function(e,t){var n=lke(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};Z3.raiseRecoverable=Z3.raise;Z3.curPosition=function(){if(this.options.locations)return new $A(this.curLine,this.pos-this.lineStart)};var Vy=Fs.prototype,Zwt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Vy.enterScope=function(e){this.scopeStack.push(new Zwt(e))};Vy.exitScope=function(){this.scopeStack.pop()};Vy.treatFunctionsAsVarInScope=function(e){return e.flags&hS||!this.inModule&&e.flags&MA};Vy.declareName=function(e,t,n){var r=!1;if(t===ag){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&MA&&delete this.undefinedExports[e]}else if(t===mke){var s=this.currentScope();s.lexical.push(e)}else if(t===pke){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&dke&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&MA&&delete this.undefinedExports[e],u.flags&rQ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Vy.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Vy.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Vy.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&rQ)return t}};Vy.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&rQ&&!(t.flags&fke))return t}};var u4=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new o4(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},bk=Fs.prototype;bk.startNode=function(){return new u4(this,this.start,this.startLoc)};bk.startNodeAt=function(e,t){return new u4(this,e,t)};function bke(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}bk.finishNode=function(e,t){return bke.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};bk.finishNodeAt=function(e,t,n,r){return bke.call(this,e,t,n,r)};bk.copyNode=function(e){var t=new u4(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var _ke="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",wke=_ke+" Extended_Pictographic",Eke=wke,xke=Eke+" EBase EComp EMod EPres ExtPict",Ske=xke,eEt=Ske,tEt={9:_ke,10:wke,11:Eke,12:xke,13:Ske,14:eEt},nEt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",rEt={9:"",10:"",11:"",12:"",13:"",14:nEt},bfe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Tke="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Cke=Tke+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Ake=Cke+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Ike=Ake+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",kke=Ike+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",iEt=kke+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",sEt={9:Tke,10:Cke,11:Ake,12:Ike,13:kke,14:iEt},Rke={};function oEt(e){var t=Rke[e]={binary:s0(tEt[e]+" "+bfe),binaryOfStrings:s0(rEt[e]),nonBinary:{General_Category:s0(bfe),Script:s0(sEt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var oj=0,_fe=[9,10,11,12,13,14];oj<_fe.length;oj+=1){var aEt=_fe[oj];oEt(aEt)}var Ct=Fs.prototype,op=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Rke[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};op.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};op.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};op.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};op.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};op.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};op.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};op.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};op.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};op.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Ct.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Ct.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Ct.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Ct.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Ct.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Ct.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Ct.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Ct.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Ct.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Ct.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Ct.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Ct.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Ct.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Ct.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Ct.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Ct.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Ct.regexp_eatSyntaxCharacter=function(e){var t=e.current();return Nke(t)?(e.lastIntValue=t,e.advance(),!0):!1};function Nke(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Ct.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!Nke(n);)e.advance();return e.pos!==t};Ct.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Ct.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Ct.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Ct.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=sy(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=sy(e.lastIntValue);return!0}return!1};Ct.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),uEt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function uEt(e){return Lm(e,!0)||e===36||e===95}Ct.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),lEt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function lEt(e){return qE(e,!0)||e===36||e===95||e===8204||e===8205}Ct.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Ct.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Ct.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Ct.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Ct.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Ct.regexp_eatZero=function(e){return e.current()===48&&!l4(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Ct.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Ct.regexp_eatControlLetter=function(e){var t=e.current();return Pke(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function Pke(e){return e>=65&&e<=90||e>=97&&e<=122}Ct.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&cEt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function cEt(e){return e>=0&&e<=1114111}Ct.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Ct.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var Oke=0,Fm=1,mc=2;Ct.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(fEt(t))return e.lastIntValue=-1,e.advance(),Fm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===mc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return Oke};function fEt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Ct.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Fm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return Oke};Ct.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){yk(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Ct.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Fm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return mc;e.raise("Invalid property name")};Ct.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";Dke(t=e.current());)e.lastStringValue+=sy(t),e.advance();return e.lastStringValue!==""};function Dke(e){return Pke(e)||e===95}Ct.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";dEt(t=e.current());)e.lastStringValue+=sy(t),e.advance();return e.lastStringValue!==""};function dEt(e){return Dke(e)||l4(e)}Ct.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Ct.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===mc&&e.raise("Negated character class may contain strings"),!0}return!1};Ct.regexp_classContents=function(e){return e.current()===93?Fm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Fm)};Ct.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Ct.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||Lke(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Ct.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Ct.regexp_classSetExpression=function(e){var t=Fm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===mc&&(t=mc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==mc&&(t=Fm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===mc&&(t=mc)}};Ct.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Ct.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Fm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Ct.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===mc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Ct.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Ct.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===mc&&(t=mc);return t};Ct.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Fm:mc};Ct.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&hEt(n)||pEt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function hEt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function pEt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Ct.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return mEt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function mEt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Ct.regexp_eatClassControlLetter=function(e){var t=e.current();return l4(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Ct.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Ct.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;l4(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function l4(e){return e>=48&&e<=57}Ct.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;$ke(n=e.current());)e.lastIntValue=16*e.lastIntValue+Mke(n),e.advance();return e.pos!==t};function $ke(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Mke(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Ct.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Ct.regexp_eatOctalDigit=function(e){var t=e.current();return Lke(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function Lke(e){return e>=48&&e<=55}Ct.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!$ke(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+Mke(i),e.advance()}return!0};var aQ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new o4(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},zn=Fs.prototype;zn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new aQ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};zn.getToken=function(){return this.next(),new aQ(this)};typeof Symbol<"u"&&(zn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});zn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};zn.readToken=function(e){return Lm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};zn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};zn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=oke(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};zn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!dS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};zn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&ake.test(String.fromCharCode(e)))++this.pos;else break e}}};zn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};zn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};zn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};zn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};zn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};zn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};zn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||tf.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};zn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};zn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};zn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};zn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Lm(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+sy(t)+"'")};zn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+sy(e)+"'")};zn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};zn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(tf.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new op(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};zn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function gEt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function Fke(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}zn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=Fke(this.input.slice(t,this.pos)),++this.pos):Lm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};zn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=Fke(this.input.slice(t,this.pos));return++this.pos,Lm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Lm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=gEt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};zn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};zn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(dS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var jke={};zn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===jke)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};zn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw jke;this.raise(e,t)};zn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(dS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};zn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};zn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return sy(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return dS(t)?"":String.fromCharCode(t)}};zn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};zn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(qE(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Lm:qE)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=sy(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};zn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=eQ[e]),this.finishToken(t,e)};var yEt="8.11.3";Fs.acorn={Parser:Fs,version:yEt,defaultOptions:jz,Position:$A,SourceLocation:o4,getLineInfo:lke,Node:u4,TokenType:rr,tokTypes:K,keywordTypes:eQ,TokContext:ff,tokContexts:Ci,isIdentifierChar:qE,isIdentifierStart:Lm,Token:aQ,isNewLine:dS,lineBreak:tf,lineBreakG:zwt,nonASCIIwhitespace:ake};function vEt(e,t){return Fs.parse(e,t)}const uQ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},bEt={ecmaVersion:11},wfe="$",_Et="d",wEt="d1",EEt="d2",Eo=e=>(t,n)=>n.error(t,e+" not allowed"),xEt=Eo("Aggregate function"),SEt=Eo("Window function"),TEt="Invalid argument",lQ="Invalid column reference",CEt=lQ+" (must be input to an aggregate function)",Bke="Invalid function call",AEt="Invalid member expression",IEt="Invalid operator parameter",kEt="Invalid param reference",REt="Invalid variable reference",NEt="Variable not accessible in operator call",PEt="Unsupported variable declaration",OEt="Unsupported destructuring pattern",Uke="Table expressions do not support closures",zke="Use aq.escape(fn) to use a function as-is (including closures)",DEt="use table.params({ name: value }) to define dynamic parameters",$Et="use aq.addFunction(name, fn) to add new op functions",MEt=`
Note: ${Uke}. ${zke}, or ${DEt}.`,Vke=`
Note: ${Uke}. ${zke}, or ${$Et}.`,LEt=`The ${V2e} method is not valid in multi-table expressions.`;function FEt(e,t){const n=jEt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,Pwt(r)?(UEt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=wEt),e.scope.add(e.tuple2=EEt),e.scope.add(e.$param=wfe)):(e.scope.add(e.tuple=_Et),e.scope.add(e.$param=wfe)),Qn(r,e,cQ),e.root}function jEt(e){try{const t=e.field?BEt(e):cr(e)?Dh(e):e;return vEt(`expr=(${t})`,bEt).body[0].expression.right}catch{xn(`Expression parse error: ${e+""}`)}}function BEt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const cQ={FunctionDeclaration:Eo("Function definitions"),ForStatement:Eo("For loops"),ForOfStatement:Eo("For-of loops"),ForInStatement:Eo("For-in loops"),WhileStatement:Eo("While loops"),DoWhileStatement:Eo("Do-while loops"),AwaitExpression:Eo("Await expressions"),ArrowFunctionExpression:Eo("Function definitions"),AssignmentExpression:Eo("Assignments"),FunctionExpression:Eo("Function definitions"),NewExpression:Eo('Use of "new"'),UpdateExpression:Eo("Update expressions"),VariableDeclarator(e,t){Vz(e.id,t)},Identifier(e,t,n){Wke(e,t,n)&&!t.scope.has(e.name)&&t.error(e,REt,MEt)},CallExpression(e,t){const n=Hke(e.callee),r=B2e(n)||U2e(n);if(r){if((t.join||t.aggregate===!1)&&ZK(n)&&xEt(e,t),(t.join||t.window===!1)&&eX(n)&&SEt(e,t),t.$op=1,t.ast)zz(e,n,t),e.arguments.forEach(i=>Qn(i,t,Uz));else{const i=t.op(zEt(t,r,n,e.arguments));Object.assign(e,{type:$2e,name:i.id})}return t.$op=0,!1}else j2e(n)?zz(e,n,t):t.error(e,Bke,Vke)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Rs(k0,r))return;const{name:s}=r;if(qke(e)&&Rs(k0,i)&&Jf(uQ,i.name)){Kke(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Efe(e,o,t,Gke,n);if(s===t.$param)return Efe(e,o,t,HEt);t.paramsRef.has(s)?LA(e,t.paramsRef.get(s)):t.columnRef.has(s)?Yke(r,s,t,e):Jf(t.params,s)&&LA(r,s)}};function Efe(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Rs(aS,s))a=s.value;else try{Qn(s,n,cQ,e),a=n.param(s)}catch{n.error(e,AEt)}return r(e,a,t,n,i),!1}const Uz={...cQ,VariableDeclarator:Eo("Variable declaration in operator call"),Identifier(e,t,n){Wke(e,t,n)&&t.error(e,NEt)},CallExpression(e,t){const n=Hke(e.callee);j2e(n)?zz(e,n,t):t.error(e,Bke,Vke)}};function UEt(e,t){e.generator&&Eo("Generator functions")(e,t),e.async&&Eo("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(xT(t,n[0],"tuple1",i(1)),r>1&&xT(t,n[1],"tuple2",i(2)),r>2&&xT(t,n[2],"$param",s)):(xT(t,n[0],"tuple",i(0)),r>1&&xT(t,n[1],"$param",s))),t.root=e.body}function xT(e,t,n,r){Rs(k0,t)?(e.scope.add(t.name),e[n]=t.name):Rs(O2e,t)&&t.properties.forEach(i=>{const s=Rs(k0,i.key)?i.key.name:Rs(aS,i.key)?i.key.value:e.error(i,TEt);Rs(k0,i.value)||e.error(i.value,OEt),r(i.value.name,s)})}function zEt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Qn(u,e,Uz),i.push(e.field(u))):l<a?(Qn(u,e,Uz),s.push(e.param(u))):e.error(u,IEt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function Hke(e){return Rs(k0,e)?e.name:Rs(P2e,e)?qke(e)?VEt(e.property.name):e.property.name:null}function qke(e){return Rs(k0,e.object)&&e.object.name==="Math"}function VEt(e){return e==="max"?"greatest":e==="min"?"least":e}function Wke(e,t,n){const{name:r}=e;if(!(Rs(P2e,n)&&n.property===e)){if(!(Rs(D2e,n)&&n.key===e))if(t.paramsRef.has(r))LA(e,t.paramsRef.get(r));else if(t.columnRef.has(r))Yke(e,r,t,n);else if(Jf(t.params,r))LA(e,r);else if(Jf(uQ,r))Kke(e,r);else return!0}}function Gke(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,lQ),r.aggronly&&!r.$op&&r.error(e,CEt),z2e(e,t,n,o,i)}function Yke(e,t,n,r){const[i,s]=n.columnRef.get(t);Gke(e,i,s,n,r)}function HEt(e,t,n,r){r.params&&!Jf(r.params,t)&&r.error(e,kEt),LA(e,t)}function LA(e,t){e.type=Ovt,e.name=t}function Kke(e,t){e.type=Rvt,e.name=t,e.raw=uQ[t]}function zz(e,t,n){if(t===V2e){const r=n.table;r||n.error(e,LEt),H2e(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=tu(s)?r.columnName(s):s;return r.column(o)||n.error(i,lQ),o}):r.columnNames())}else e.callee={type:Pvt,name:t}}function Vz(e,t){Rs(k0,e)?t.scope.add(e.name):Rs(Cvt,e)?e.elements.forEach(n=>Vz(n,t)):Rs(O2e,e)?e.properties.forEach(n=>Vz(n.value,t)):t.error(e.id,PEt)}const qEt={[fk]:1,[$2e]:1};function Xu(e,t={}){const n=t.generate||N3,r=t.compiler||tX,i=GEt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=WEt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Rs(aS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?Nwt(g):f(n(g),i));u.push(y),qEt[g.type]&&y!==g&&Sa(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,_=String(d.spec).slice(v,b);xn(`${g}: "${_}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of W6(e))d.value(m+"",g.escape?$wt(d,g,i):FEt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function WEt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function GEt(e){return(e.table?aj(e.table):e.join?{...aj(e.join[1]),...aj(e.join[0])}:{})||{}}function aj(e){return e&&vi(e.params)?e.params():{}}const Xke="Expr",df="ExprList",Qke="ExprNumber",vC="ExprObject",hw="JoinKeys",e$="JoinValues",sc="Options",fQ="OrderKeys",Ng="SelectionList",jv="TableRef",pw="TableRefList",YEt="Descending",KEt="Query",XEt="Selection",QEt="Verb",JEt="Window";function c4(e,t){return e&&e.expr?new xfe({...e,...t}):new xfe(t,e)}class xfe{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...vi(this.expr)?{func:!0}:{}}}}function ZEt(e){return c4(e,{desc:!0})}function X1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return c4(e,t?{expr:t,...r}:r)}function ext(e,t,n){return c4(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function txt(e){const t=n=>n;return t.toString=()=>e,t}function Sfe(e,t){return t=t&&vi(t.query)?t.query():t,t&&vi(t.evaluate)?t.evaluate(null,e):e(t)}function Jke(e){return Sa(e)&&(cr(e.all)||cr(e.matches)||cr(e.not)||cr(e.range))}function FA(e){return e&&vi(e.toObject)?e.toObject():vi(e)?{expr:String(e),func:!0}:cr(e)?e.map(FA):Sa(e)?i4(e,t=>FA(t)):e}function dQ(e){return cr(e)?e.map(dQ):Sa(e)?cr(e.verbs)?pQ.from(e):cr(e.all)?HE():cr(e.range)?Cwt(...e.range):cr(e.match)?Awt(RegExp(...e.match)):cr(e.not)?nke(e.not.map(FA)):nxt(e):e}function nxt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=X1(n):e.func===!0&&(t=n=txt(n)),Sa(e.window)){const{frame:r,peers:i}=e.window;t=n=ext(n,r,i)}e.desc===!0&&(t=ZEt(n))}return e===t?i4(e,r=>dQ(r)):t}function rxt(e){return cr(e)?e.map(ixt):e}function ixt(e){const t=[];return Gu(e).forEach(n=>{tu(n)?t.push(n):qo(n)?t.push(X1(n,null)):Sa(n)&&n.expr||vi(n)?t.push(n):xn(`Invalid key value: ${n+""}`)}),t}function sxt(e){return cr(e)?e.map(oxt):e}function oxt(e,t){return t<2?Gu(e):e}function axt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(Sa(r)&&!vi(r))for(const i in r)t.push(r[i]);else n=tu(r)?r:qo(r)?X1(n):vi(r)?n:xn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const uxt={[Xke]:nRe,[df]:WE,[Qke]:pxt,[vC]:oy,[hw]:mxt,[e$]:gxt,[fQ]:WE,[Ng]:dxt};function lxt(e,t,n){return t===jv?Tfe(e):t===pw?e.map(Tfe):Zke(FA(e),t,n)}function Zke(e,t,n){return t===sc?e&&cxt(e,n):uxt[t](e)}function cxt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?Zke(i,t[r]):i}return n}function fxt(e,t){return Xu({expr:e},{...t,ast:!0}).exprs[0]}function hQ(e){return{type:fk,name:e}}function eRe(e){return{type:fk,index:e}}function oy(e,t){if(qo(e))return fxt(e,t);if(e.expr){let n;if(e.field===!0?n=hQ(e.expr):e.func===!0&&(n=oy(e.expr,t)),n)return e.desc&&(n={type:YEt,expr:n}),e.window&&(n={type:JEt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...oy(e[n],t),as:n}))}function tRe(e){const t=XEt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:WE(e.not)}:e.range?{type:t,operator:"range",arguments:WE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:xn("Invalid input")}function dxt(e){return Gu(e).map(hxt).flat()}function hxt(e){return Jke(e)?tRe(e):tu(e)?eRe(e):qo(e)?hQ(e):Sa(e)?Object.keys(e).map(t=>({type:fk,name:t,as:e[t]})):xn("Invalid input")}function nRe(e){return Jke(e)?tRe(e):tu(e)?eRe(e):qo(e)?hQ(e):Sa(e)?oy(e):xn("Invalid input")}function WE(e){return Gu(e).map(nRe).flat()}function pxt(e){return tu(e)?e:oy(e)}function mxt(e){return cr(e)?e.map(WE):oy(e,{join:!0})}function gxt(e){return cr(e)?e.map((t,n)=>n<2?WE(t):oy(t,{join:!0})):oy(e,{join:!0})}function Tfe(e){return e&&vi(e.toAST)?e.toAST():e}class rRe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===hw?rxt(a):o===e$?sxt(a):o===fQ?axt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=Hz[t.verb],r=(n.schema||[]).map(({name:i})=>dQ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===jv?Sfe(n,o):s===pw?o.map(a=>Sfe(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=FA(this[n])}),t}toAST(){const t={type:QEt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=lxt(this[n],r,i)}),t}}function Lr(e,t){return Object.assign((...n)=>new rRe(e,t,n),{schema:t})}const Hz={count:Lr("count",[{name:"options",type:sc}]),derive:Lr("derive",[{name:"values",type:vC},{name:"options",type:sc,props:{before:Ng,after:Ng}}]),filter:Lr("filter",[{name:"criteria",type:vC}]),groupby:Lr("groupby",[{name:"keys",type:df}]),orderby:Lr("orderby",[{name:"keys",type:fQ}]),relocate:Lr("relocate",[{name:"columns",type:Ng},{name:"options",type:sc,props:{before:Ng,after:Ng}}]),rename:Lr("rename",[{name:"columns",type:Ng}]),rollup:Lr("rollup",[{name:"values",type:vC}]),sample:Lr("sample",[{name:"size",type:Qke},{name:"options",type:sc,props:{weight:Xke}}]),select:Lr("select",[{name:"columns",type:Ng}]),ungroup:Lr("ungroup"),unorder:Lr("unorder"),reify:Lr("reify"),dedupe:Lr("dedupe",[{name:"keys",type:df,default:[]}]),impute:Lr("impute",[{name:"values",type:vC},{name:"options",type:sc,props:{expand:df}}]),fold:Lr("fold",[{name:"values",type:df},{name:"options",type:sc}]),pivot:Lr("pivot",[{name:"keys",type:df},{name:"values",type:df},{name:"options",type:sc}]),spread:Lr("spread",[{name:"values",type:df},{name:"options",type:sc}]),unroll:Lr("unroll",[{name:"values",type:df},{name:"options",type:sc,props:{drop:df}}]),lookup:Lr("lookup",[{name:"table",type:jv},{name:"on",type:hw},{name:"values",type:df}]),join:Lr("join",[{name:"table",type:jv},{name:"on",type:hw},{name:"values",type:e$},{name:"options",type:sc}]),cross:Lr("cross",[{name:"table",type:jv},{name:"values",type:e$},{name:"options",type:sc}]),semijoin:Lr("semijoin",[{name:"table",type:jv},{name:"on",type:hw}]),antijoin:Lr("antijoin",[{name:"table",type:jv},{name:"on",type:hw}]),concat:Lr("concat",[{name:"tables",type:pw}]),union:Lr("union",[{name:"tables",type:pw}]),intersect:Lr("intersect",[{name:"tables",type:pw}]),except:Lr("except",[{name:"tables",type:pw}])};let pQ=class iRe extends b2e{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new iRe(t.map(rRe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Cfe(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Cfe(this,"toAST",{type:KEt})}};function Cfe(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function yxt(e,t){return new pQ(e._verbs.concat(t),e._params,e._table)}for(const e in Hz){const t=Hz[e];pQ.prototype["__"+e]=function(n,...r){return yxt(n,t(...r))}}function mS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function vxt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function mQ(e,t){const n=Kl();return t.forEach((r,i)=>{const s=qo(r)?r:i;if(s){const o=e.column(i)||xn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function sRe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||xn("relocate requires a before or after option."),i&&s&&xn("relocate accepts only one of the before or after options."),t=Mm(e,t);const o=[...Mm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),mQ(e,u)}function _k(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function gQ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function bxt(e,t=0,n=e.length){let r=n?e[t++]:ir;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function _xt(e,t=0,n=e.length){let r=n?e[t++]:ir;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function AN(e){return IA(e)?e:+e}function wxt(e,t){const n=e.length;if(!n)return ir;if((t=+t)<=0||n<2)return AN(e[0]);if(t>=1)return AN(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=AN(e[i]);return IA(s)?s:s+(AN(e[i+1])-s)*(r-i)}class Ext{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:bxt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:_xt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(gQ)),wxt(this._sorted,t)}}const t$=(e,t,n)=>mS(t,"{"+_k(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function xxt(e,t){const{ops:n,output:r}=Sxt(e,t),i=e[0].fields,s=i.length,o=s===0?yQ:s===1?Txt:s===2?Cxt:xn("Unsupported field count: "+s);return new o(i,n,r,t)}function Sxt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=B2e(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class yQ extends kwt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new Ext),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class Txt extends yQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=t$(n,s,"add"),this._rem=t$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Of(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Of(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class Cxt extends yQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=t$(n,s,"add"),this._rem=t$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Of(i)&&Of(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Of(i)&&Of(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function jb(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=gS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function gS(e,t,n){if(!t.length)return n;const r=oRe(t),i=e.groups(),s=i?i.size:1;return n=n||H6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=uRe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=aRe(e,o);o.write(a,n,0)}),n}function oRe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(xxt(r[i],t));return n}function aRe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function uRe(e,t,n){const{keys:r,size:i}=n,s=H6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function lRe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function cRe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Afe=cRe(gQ);function Axt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?mS(["w","r","k"],"{"+_k(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,_=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Afe.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Afe.right(o,o[p.i1-1])));for(let x=0;x<d;++x){const S=i[x],E=a[x];for(let T=b;T<p.i0;++T)S.rem(E,s[T],e);for(let T=_;T<p.i1;++T)S.add(E,s[T],e);S.write(E,u,l)}return h(p,u,l),u}};return p}const Ixt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),kxt=e=>!!e.peers;function Rxt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=U2e(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function Nxt(e,t,n,r={},i){const s=e.data(),o=Pxt(i,s),a=o.length,u=mS(["r","d","op"],"{"+_k(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=Oxt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function Pxt(e,t){const n={};return e.forEach(r=>{const i=Ixt(r),s=kxt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});ZK(r.name)?a.push(r):u.push(Rxt(r))}),Object.values(n).map(r=>Axt(t,r.frame,r.peers,r.winOps,oRe(r.aggOps,r.frame[0]!=null?-1:1)))}function Oxt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function Dxt(e){return eX(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function vQ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Kl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=$xt(r),c=e.isGrouped()?e.groups().size:1,f=gS(e,u,H6(r.length,()=>Array(c)));return l.length?Nxt(e,a,n,f,l):Mxt(e,a,n,f),e.create(o)}function $xt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(Dxt(s)?n:t).push(s)}return[t,n]}function Mxt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function Lxt(e,t,n={}){const r=vQ(e,Xu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:sRe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function Fxt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const IN=2147483648,jxt=4294967295;class fRe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&IN>>>t}set(t){this._bits[t>>5]|=IN>>>t}clear(t){this._bits[t>>5]&=~(IN>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&jxt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=IN>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function Bxt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new fRe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function Uxt(e,t){const n=Xu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=vQ(e,n,{drop:!0}).column("p");r=s=>i[s]}return Bxt(e,r)}function dRe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=jb(e,r,n),l=Kl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(_=>{if(!a.has(_)){const x=l.add(_,[]);c.has(_)||(f.push(e.column(_)),d.push(x))}}),t.forEach(_=>{a.has(_)||(l.has(_)||l.add(_,[]),h.push(l.data[_]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(_,x)=>{for(let S=0;S<g;++S)d[S].length=m+x,d[S].fill(f[S].get(_),m,m+x)},b=p?(_,x)=>{for(let S=0;S<x;++S)p[_+S]=S}:()=>{};if(y===1){const _=u[0],x=h[0];e.scan((S,E)=>{const T=Gu(_(S,E)),A=Math.min(T.length,s);v(S,A);for(let k=0;k<A;++k)x[m+k]=T[k];b(m,A),m+=A})}else e.scan((_,x)=>{let S=0;const E=u.map(T=>{const A=Gu(T(_,x));return S=Math.min(Math.max(S,A.length),s),A});v(_,S);for(let T=0;T<y;++T){const A=h[T],k=E[T];for(let R=0;R<S;++R)A[m+R]=k[R]}b(m,S),m+=S});return e.create(l.new())}function zxt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=jb(e,r,n);return dRe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function ed(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=tu(o)?t.columnName(o):o,qo(o)?i.set(o,X1(o)):vi(o)?Mm(t,o).forEach(s):Sa(o)?eke(i,o):xn(`Invalid ${e} value: ${o+""}`)};return Gu(n).forEach(s),r.preparse&&r.preparse(i),Xu(i,{table:t,...r})}function Vxt(e,t,n){return zxt(e,ed("fold",e,t),n)}function Ife(e,t,n,r){const i=n&&n.length;return Hxt(i?qxt(e,n,r):e,t,i)}function Hxt(e,{names:t,exprs:n,ops:r},i){const s=jb(e,r,n),o=i?null:Kl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Of(p)?p:d(h)})}),i?e:e.create(o)}function qxt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=P3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Kl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=P3(o.map((p,m)=>g=>g[m])),h=mS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),kfe(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else kfe(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function kfe(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function bQ(e,{names:t,exprs:n,ops:r}){const i=Kl(),s=e.groups();return s&&lRe(i,s),Wxt(t,n,s,gS(e,r),i),e.create(i.new())}function Wxt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function Gxt(e,t,n={}){if(t=Xu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:xn(`Invalid impute column ${Dh(r)}`)),n.expand){const r={preparse:Yxt,aggronly:!0},i=ed("impute",e,n.expand,r),s=bQ(e.ungroup(),i);return Ife(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Ife(e,t)}function Yxt(e){e.forEach((t,n)=>t.field?e.set(n,I2e(t+"")):0)}function Kxt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function hRe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function Xxt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function Qxt(e,t){const n=["i","a","j","b"];return mS(n,"{"+_k(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function Jxt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Kl(),g=Array(p),y=Array(p);for(let _=0;_<r.length;++_)g[_]=m.add(r[_],[]),y[_]=i[_];const v=Qxt(g,y);if((cr(n)?eSt:Zxt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let _=0;_<u;++_)l[_]||v(a[_],o,-1,c);if(s.right)for(let _=0;_<d;++_)h[_]||v(-1,o,f[_],c);return e.create(m.new())}function Zxt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function eSt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(S,E,T,A)=>e(T,A,S,E));const _=Xxt(v,m,g),x=p.length;for(let S=0;S<x;++S){const E=p[S],T=_.get(d(E,f));if(T){const A=T.length;for(let k=0;k<A;++k){const R=T[k];b(E,f,v[R],m),y[R]=1}h[S]=1}}}function n$(e,t,n){const r=new Map;Gu(n).forEach((s,o)=>{s=tu(s)?t.columnName(s):s,qo(s)?r.set(o,X1(s)):vi(s)||Sa(s)&&s.expr?r.set(o,s):xn(`Invalid ${e} key value: ${s+""}`)});const i=Xu(r,{table:t,aggregate:!1,window:!1});return P3(i.exprs,!0)}function tSt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function _Q(e,t,n){if(n)qo(n)?n=[n,n]:cr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=tSt(e.columnNames(),t.columnNames());r.length||xn("Natural join requires shared column names."),n=[r,r]}return n}function pRe(e,t,n,r){return n.length!==r.length&&xn("Mismatched number of join keys"),[n$("join",e,n),n$("join",t,r)]}const nSt={aggregate:!1,window:!1},rSt={...nSt,index:1};function Rfe(e,t,n,r,i={}){n=_Q(e,t,n);const s={join:[e,t]};let o;if(cr(n)){const[a,u]=n.map(Gu);o=pRe(e,t,a,u),r||(r=iSt(e,a,u,i))}else o=Xu({on:n},s).exprs[0],r||(r=[HE(),HE()]);return Jxt(e,t,o,sSt(e,t,r,s,i&&i.suffix),i)}function iSt(e,t,n,r){const i=[];t.forEach((o,a)=>qo(o)&&o===n[a]?i.push(o):0);const s=nke(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${Dh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,HE()]:[HE(),s]}function sSt(e,t,n,r,i=[]){if(cr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=ed("join",e,n[0],r)),u--&&(o=ed("join",t,n[1],rSt)),u--&&(a=Xu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Nfe(s.names,l,i[0]||"_1"),i[1]!==""&&Nfe(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Xu(n,r)}function Nfe(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function oSt(e,t,n,r={}){const i=new fRe(e.totalRows());return(cr(n)?aSt:uSt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function aSt(e,t,n,[r,i]){const s=hRe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function uSt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Pfe(e,t,n,r){n=_Q(e,t,n);const i=cr(n)?pRe(e,t,...n.map(Gu)):Xu({on:n},{join:[e,t]}).exprs[0];return oSt(e,t,i,r)}function lSt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Kl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(ir)));const l=hRe(t,r),c=mS(["lr","rr","data"],"{"+_k(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),jb(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function cSt(e,t,n,r){return n=_Q(e,t,n),lSt(e,t,[n$("lookup",e,n[0]),n$("lookup",t,n[1])],ed("lookup",t,r))}const qz=(e,t)=>e??t;function fSt(e,t,n,r={}){const{keys:i,keyColumn:s}=dSt(e,t,r),o=qz(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>gS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(hSt(n,a,e.groups(),u))}function dSt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=qz(n.sort,!0),s=qz(n.keySeparator,"_"),o=jb(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=gS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function hSt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Kl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&lRe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function pSt(e,t,n,r){return fSt(e,ed("fold",e,t),ed("fold",e,n,{preparse:mSt,aggronly:!0}),r)}function mSt(e){e.forEach((t,n)=>t.field?e.set(n,T2e(t+"")):0)}function gSt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),mQ(e,Mm(e,t,n))}function Ofe(e,t){return bQ(e,Xu(t,{table:e,aggronly:!0,window:!1}))}function ySt(e,t,n,r){return(t?r?bSt:vSt:r?wSt:_St)(e.length,e,n,r)}function vSt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*oS()|0];return t}function bSt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=cRe(gQ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*oS())];return t}function _St(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*oS();s<e&&(t[s|0]=n[i])}return t}function wSt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(oS())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function ESt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=oS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function xSt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):ySt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&ESt(u),e.reify(u)}function SSt(e,t,n={}){return xSt(e,TSt(e,t),CSt(e,n.weight),n)}const mRe=e=>t=>e.get(t)||0;function TSt(e,t){return tu(t)?()=>t:mRe(bQ(e,Xu({size:t},{table:e,window:!1})).column("size"))}function CSt(e,t){return t==null?null:(t=tu(t)?e.columnName(t):t,mRe(qo(t)?e.column(t):vQ(e,Xu({w:t},{table:e}),{drop:!0}).column("w")))}function ASt(e,t){return mQ(e,Mm(e,t))}function ISt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=jb(e,r,n),l=Kl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=kSt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function kSt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Gu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(ir));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function RSt(e,t,n){return ISt(e,ed("spread",e,t),n)}function NSt(e,t){return e.concat(t).dedupe()}function PSt(e,t,n){return dRe(e,ed("unroll",e,t),n&&n.drop?{...n,drop:ed("unroll",e,n.drop).names}:n)}function OSt(e,t){return e.create({groups:DSt(e,t)})}function DSt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=jb(e,r,n);const o=P3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function $St(e,t){return OSt(e,ed("groupby",e,t))}function MSt(e,t){return e.create({order:t})}const LSt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function FSt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Xu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([N3(p,{index:"a",op:o}),N3(p,{index:"b",op:a})])},window:!1}),l=gS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=LSt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function jSt(e,t){return MSt(e,BSt(e,t))}function BSt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(Sa(o)&&!vi(o))for(const a in o)i(o[a]);else i(tu(o)?X1(s,e.columnName(o)):qo(o)?X1(s):vi(o)?s:xn(`Invalid orderby field: ${s+""}`))}),FSt(e,r)}function USt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Kl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>ir};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function zSt(e,t){const n=Kl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?uRe(e,t,r):[aRe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function VSt(e){return e.isGrouped()?e.create({groups:null}):e}function HSt(e){return e.isOrdered()?e.create({order:null}):e}const qSt={__antijoin:(e,t,n)=>Pfe(e,t,n,{anti:!0}),__count:(e,t={})=>Ofe(e,{[t.as||"count"]:C2e()}),__cross:(e,t,n,r)=>Rfe(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:USt,__dedupe:vxt,__derive:Lxt,__except:Fxt,__filter:Uxt,__fold:Vxt,__impute:Gxt,__intersect:Kxt,__join:Rfe,__lookup:cSt,__pivot:pSt,__relocate:sRe,__rename:gSt,__rollup:Ofe,__sample:SSt,__select:ASt,__semijoin:Pfe,__spread:RSt,__union:NSt,__unroll:PSt,__groupby:$St,__orderby:jSt,__ungroup:VSt,__unorder:HSt,__reduce:zSt};Object.assign(nh.prototype,qSt);function WSt(e,t){return nh.new(e,t)}function wQ(e,t){return nh.from(e,t)}function kN(e,t={}){const n=`d[${JSON.stringify(e)}]`,{maxbins:r,nice:i,minstep:s,step:o,offset:a}=t,u=[r,i,s,o];let l=u.length;for(;l&&u[--l]==null;)u.pop();const c=u.length?", "+u.map(f=>f+"").join(", "):"";return`d => op.bin(${n}, ...op.bins(${n}${c}), ${a||0})`}function Bv(e){return c4(e,{escape:!0,toString(){xn("Escaped values can not be serialized.")}})}nh.prototype;function GSt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let RN;const YSt=new Uint8Array(16);function KSt(){if(!RN&&(RN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!RN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return RN(YSt)}const vo=[];for(let e=0;e<256;++e)vo.push((e+256).toString(16).slice(1));function XSt(e,t=0){return(vo[e[t+0]]+vo[e[t+1]]+vo[e[t+2]]+vo[e[t+3]]+"-"+vo[e[t+4]]+vo[e[t+5]]+"-"+vo[e[t+6]]+vo[e[t+7]]+"-"+vo[e[t+8]]+vo[e[t+9]]+"-"+vo[e[t+10]]+vo[e[t+11]]+vo[e[t+12]]+vo[e[t+13]]+vo[e[t+14]]+vo[e[t+15]]).toLowerCase()}const QSt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Dfe={randomUUID:QSt};function $fe(e,t,n){if(Dfe.randomUUID&&!t&&!e)return Dfe.randomUUID();e=e||{};const r=e.random||(e.rng||KSt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,XSt(r)}class bh{static get(){let t=$fe();for(;this.ids.has(t);)t=$fe();return this.ids.set(t,!0),t}}bh.ids=new Map;function zf(e){return"parent"in e}function JSt(e){return!zf(e)}function ZSt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:bh.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:bh.get(),createdOn:Date.now(),val:r}]:[];return{id:bh.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function eTt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:bh.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:bh.get(),createdOn:Date.now(),val:s}]:[];return{id:bh.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Ki(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=lTt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Q1(e){return!!e&&!!e[Fl]}function ay(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===cTt}(e)||Array.isArray(e)||!!e[p2]||!!(!((t=e.constructor)===null||t===void 0)&&t[p2])||f4(e)||d4(e))}function GE(e,t,n){n===void 0&&(n=!1),uy(e)===0?(n?Object.keys:AQ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function uy(e){var t=e[Fl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:f4(e)?2:d4(e)?3:0}function jA(e,t){return uy(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function aO(e,t){return uy(e)===2?e.get(t):e[t]}function gRe(e,t,n){var r=uy(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function tTt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function f4(e){return aTt&&e instanceof Map}function d4(e){return uTt&&e instanceof Set}function Nv(e){return e.o||e.t}function EQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=fTt(e);delete t[Fl];for(var n=AQ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function xQ(e,t){return t===void 0&&(t=!1),SQ(e)||Q1(e)||!ay(e)||(uy(e)>1&&(e.set=e.add=e.clear=e.delete=nTt),Object.freeze(e),t&&GE(e,function(n,r){return xQ(r,!0)},!0)),e}function nTt(){Ki(2)}function SQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function _h(e){var t=Kz[e];return t||Ki(18,e),t}function rTt(e,t){Kz[e]||(Kz[e]=t)}function Mfe(){return{}.NODE_ENV==="production"||YE||Ki(0),YE}function uj(e,t){t&&(_h("Patches"),e.u=[],e.s=[],e.v=t)}function r$(e){Wz(e),e.p.forEach(iTt),e.p=null}function Wz(e){e===YE&&(YE=e.l)}function Lfe(e){return YE={p:[],l:YE,h:e,m:!0,_:0}}function iTt(e){var t=e[Fl];t.i===0||t.i===1?t.j():t.O=!0}function lj(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||_h("ES5").S(t,e,r),r?(n[Fl].P&&(r$(t),Ki(4)),ay(e)&&(e=i$(t,e),t.l||s$(t,e)),t.u&&_h("Patches").M(n[Fl].t,e,t.u,t.s)):e=i$(t,n,[]),r$(t),t.u&&t.v(t.u,t.s),e!==CQ?e:void 0}function i$(e,t,n){if(SQ(t))return t;var r=t[Fl];if(!r)return GE(t,function(s,o){return Ffe(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return s$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=EQ(r.k):r.o;GE(r.i===3?new Set(i):i,function(s,o){return Ffe(e,r,i,s,o,n)}),s$(e,i,!1),n&&e.u&&_h("Patches").R(r,n,e.u,e.s)}return r.o}function Ffe(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Ki(5),Q1(i)){var o=i$(e,i,s&&t&&t.i!==3&&!jA(t.D,r)?s.concat(r):void 0);if(gRe(n,r,o),!Q1(o))return;e.m=!1}if(ay(i)&&!SQ(i)){if(!e.h.F&&e._<1)return;i$(e,i),t&&t.A.l||s$(e,i)}}function s$(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&xQ(t,n)}function cj(e,t){var n=e[Fl];return(n?Nv(n):e)[t]}function jfe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Gz(e){e.P||(e.P=!0,e.l&&Gz(e.l))}function fj(e){e.o||(e.o=EQ(e.t))}function Yz(e,t,n){var r=f4(t)?_h("MapSet").N(t,n):d4(t)?_h("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Mfe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=Xz;o&&(u=[a],l=bC);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):_h("ES5").J(t,n);return(n?n.A:Mfe()).p.push(r),r}function sTt(e){return Q1(e)||Ki(22,e),function t(n){if(!ay(n))return n;var r,i=n[Fl],s=uy(n);if(i){if(!i.P&&(i.i<4||!_h("ES5").K(i)))return i.t;i.I=!0,r=Bfe(n,s),i.I=!1}else r=Bfe(n,s);return GE(r,function(o,a){i&&aO(i.t,o)===a||gRe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Bfe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return EQ(e)}function oTt(){function e(r){if(!ay(r))return r;if(Array.isArray(r))return r.map(e);if(f4(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(d4(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return jA(r,p2)&&(i[p2]=r[p2]),i}function t(r){return Q1(r)?e(r):r}var n="add";rTt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=uy(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Ki(24),typeof u=="function"&&f==="prototype"&&Ki(24),typeof(u=aO(u,f))!="object"&&Ki(15,o.join("/"))}var d=uy(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Ki(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Ki(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;GE(a.D,function(h,p){var m=aO(f,h),g=aO(d,h),y=p?jA(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===CQ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Ufe,YE,TQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",aTt=typeof Map<"u",uTt=typeof Set<"u",zfe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",CQ=TQ?Symbol.for("immer-nothing"):((Ufe={})["immer-nothing"]=!0,Ufe),p2=TQ?Symbol.for("immer-draftable"):"__$immer_draftable",Fl=TQ?Symbol.for("immer-state"):"__$immer_state",lTt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},cTt=""+Object.prototype.constructor,AQ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,fTt=Object.getOwnPropertyDescriptors||function(e){var t={};return AQ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Kz={},Xz={get:function(e,t){if(t===Fl)return e;var n=Nv(e);if(!jA(n,t))return function(i,s,o){var a,u=jfe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!ay(r)?r:r===cj(e.t,t)?(fj(e),e.o[t]=Yz(e.A.h,r,e)):r},has:function(e,t){return t in Nv(e)},ownKeys:function(e){return Reflect.ownKeys(Nv(e))},set:function(e,t,n){var r=jfe(Nv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=cj(Nv(e),t),s=i==null?void 0:i[Fl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(tTt(n,i)&&(n!==void 0||jA(e.t,t)))return!0;fj(e),Gz(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return cj(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,fj(e),Gz(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Nv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Ki(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ki(12)}},bC={};GE(Xz,function(e,t){bC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),bC.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Ki(13),bC.set.call(this,e,t,void 0)},bC.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Ki(14),Xz.set.call(this,e[0],t,n,e[0])};var dTt=function(){function e(n){var r=this;this.g=zfe,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(_){var x;return(x=s).call.apply(x,[g,_].concat(v))})}}var l;if(typeof s!="function"&&Ki(6),o!==void 0&&typeof o!="function"&&Ki(7),ay(i)){var c=Lfe(r),f=Yz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?r$(c):Wz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return uj(c,o),lj(m,c)},function(m){throw r$(c),m}):(uj(c,o),lj(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===CQ&&(l=void 0),r.F&&xQ(l,!0),o){var h=[],p=[];_h("Patches").M(i,l,h,p),o(h,p)}return l}Ki(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){ay(n)||Ki(8),Q1(n)&&(n=sTt(n));var r=Lfe(this),i=Yz(this,n,void 0);return i[Fl].C=!0,Wz(r),i},t.finishDraft=function(n,r){var i=n&&n[Fl];({}).NODE_ENV!=="production"&&(i&&i.C||Ki(9),i.I&&Ki(10));var s=i.A;return uj(s,r),lj(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!zfe&&Ki(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=_h("Patches").$;return Q1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),jl=new dTt,hTt=jl.produce;jl.produceWithPatches.bind(jl);jl.setAutoFreeze.bind(jl);jl.setUseProxies.bind(jl);jl.applyPatches.bind(jl);jl.createDraft.bind(jl);jl.finishDraft.bind(jl);function pTt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=ZSt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return Lxe({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:bh.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:bh.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function mTt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=pTt(e),s=nat();s.startListening({matcher:Due(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Due(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=$xe({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:bh.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var gTt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yTt=Object.prototype.hasOwnProperty;function Qz(e,t){return yTt.call(e,t)}function Jz(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Qz(e,i)&&r.push(i);return r}function Du(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Zz(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Pv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function yRe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function eV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(eV(e[t]))return!0}else if(typeof e=="object"){for(var r=Jz(e),i=r.length,s=0;s<i;s++)if(eV(e[r[s]]))return!0}}return!1}function Vfe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var vRe=function(e){gTt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Vfe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Vfe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Hi=vRe,vTt=Du,mw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=o$(n,this.path);r&&(r=Du(r));var i=x1(n,{op:"remove",path:this.from}).removed;return x1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=o$(n,this.from);return x1(n,{op:"add",path:this.path,value:Du(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:BA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},bTt={add:function(e,t,n){return Zz(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:mw.move,copy:mw.copy,test:mw.test,_get:mw._get};function o$(e,t){if(t=="")return e;var n={op:"_get",path:t};return x1(e,n),n.value}function x1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):a$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=o$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=BA(e,t.value),o.test===!1)throw new Hi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Hi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Du(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=a$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=yRe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!Zz(h))throw new Hi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);Zz(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Hi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=bTt[t.op].call(t,l,h,e);if(o.test===!1)throw new Hi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=mw[t.op].call(t,l,h,e);if(o.test===!1)throw new Hi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Hi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function h4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Hi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Du(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=x1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function _Tt(e,t,n){var r=x1(e,t);if(r.test===!1)throw new Hi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function a$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Hi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(mw[e.op]){if(typeof e.path!="string")throw new Hi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Hi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Hi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Hi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&eV(e.value))throw new Hi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Hi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Hi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=bRe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Hi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Hi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function bRe(e,t,n){try{if(!Array.isArray(e))throw new Hi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)h4(Du(t),Du(e),n||!0);else{n=n||a$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Hi)return i;throw i}}function BA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!BA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!BA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const wTt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Hi,_areEquals:BA,applyOperation:x1,applyPatch:h4,applyReducer:_Tt,deepClone:vTt,getValueByPointer:o$,validate:bRe,validator:a$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var IQ=new WeakMap,ETt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),xTt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function STt(e){return IQ.get(e)}function TTt(e,t){return e.observers.get(t)}function CTt(e,t){e.observers.delete(t.callback)}function ATt(e,t){t.unobserve()}function ITt(e,t){var n=[],r,i=STt(e);if(!i)i=new ETt(e),IQ.set(e,i);else{var s=TTt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Du(e),t){r.callback=t,r.next=null;var o=function(){tV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){tV(r),clearTimeout(r.next),CTt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new xTt(t,r)),r}function tV(e,t){t===void 0&&(t=!1);var n=IQ.get(e.object);kQ(n.value,e.object,e.patches,"",t),e.patches.length&&h4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function kQ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=Jz(t),o=Jz(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(Qz(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?kQ(c,f,n,r+"/"+Pv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Pv(l),value:Du(c)}),n.push({op:"replace",path:r+"/"+Pv(l),value:Du(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Pv(l),value:Du(c)}),n.push({op:"remove",path:r+"/"+Pv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!Qz(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Pv(l),value:Du(t[l])})}}}function _Re(e,t,n){n===void 0&&(n=!1);var r=[];return kQ(e,t,r,"",n),r}const kTt=Object.freeze(Object.defineProperty({__proto__:null,compare:_Re,generate:tV,observe:ITt,unobserve:ATt},Symbol.toStringTag,{value:"Module"}));Object.assign({},wTt,kTt,{JsonPatchError:vRe,deepClone:Du,escapePathComponent:Pv,unescapePathComponent:yRe});var _C=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(_C||{});function uO(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=wRe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=uO(i,t);return h4(a,Du(o),!0,!1).newDocument}function RTt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function nV({registry:e,initialState:t}){let n=!1;const r=GSt(),i=mTt(t);function s(c){return i.backend.nodes[c]}r.listen(_C.TRAVERSAL_START,()=>{n=!0}),r.listen(_C.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return uO(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=uO(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=_Re(y,f);if(RTt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=eTt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=uO(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(_C.TRAVERSAL_START);const f=wRe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);PTt(p,m)?zf(p)&&d.push(...p.sideEffects.undo):zf(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(_C.TRAVERSAL_END)},undo(){const{current:c}=i;return zf(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return ERe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function NTt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;zf(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)zf(r)&&(r=n[r.parent]),zf(i)&&(i=n[i.parent]);return r.id}function wRe(e,t,n){const r=NTt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),zf(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),zf(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function PTt(e,t){if(zf(e)&&e.parent===t.id)return!0;if(zf(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function ERe(e,t){return{...e,children:e.children.map(n=>ERe(t[n],t)),name:`${e.label}`}}oTt();function OTt(e){return e.length===2?hTt(e):e}class UA{static create(){return new UA}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:OTt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),gh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var DTt="Expected a function",Hfe=NaN,$Tt="[object Symbol]",MTt=/^\s+|\s+$/g,LTt=/^[-+]0x[0-9a-f]+$/i,FTt=/^0b[01]+$/i,jTt=/^0o[0-7]+$/i,BTt=parseInt,UTt=typeof ko=="object"&&ko&&ko.Object===Object&&ko,zTt=typeof self=="object"&&self&&self.Object===Object&&self,VTt=UTt||zTt||Function("return this")(),HTt=Object.prototype,qTt=HTt.toString,WTt=Math.max,GTt=Math.min,dj=function(){return VTt.Date.now()};function YTt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(DTt);t=qfe(t)||0,rV(n)&&(c=!!n.leading,f="maxWait"in n,s=f?WTt(qfe(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(S){var E=r,T=i;return r=i=void 0,l=S,o=e.apply(T,E),o}function p(S){return l=S,a=setTimeout(y,t),c?h(S):o}function m(S){var E=S-u,T=S-l,A=t-E;return f?GTt(A,s-T):A}function g(S){var E=S-u,T=S-l;return u===void 0||E>=t||E<0||f&&T>=s}function y(){var S=dj();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,d&&r?h(S):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function _(){return a===void 0?o:v(dj())}function x(){var S=dj(),E=g(S);if(r=arguments,i=this,u=S,E){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return x.cancel=b,x.flush=_,x}function rV(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function KTt(e){return!!e&&typeof e=="object"}function XTt(e){return typeof e=="symbol"||KTt(e)&&qTt.call(e)==$Tt}function qfe(e){if(typeof e=="number")return e;if(XTt(e))return Hfe;if(rV(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=rV(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(MTt,"");var n=FTt.test(e);return n||jTt.test(e)?BTt(e.slice(2),n?2:8):LTt.test(e)?Hfe:+e}var QTt=YTt;const kd=Ho(QTt);function xRe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=I.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=I.useMemo(()=>tS(".2s"),[]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:w.jsx(Bo,{children:w.jsx(Zn,{gap:3,children:w.jsx(xt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),w.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>w.jsxs("g",{transform:`translate(${n}, ${a})`,children:[w.jsx("line",{x2:"-6",stroke:"currentColor"}),w.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),w.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const JTt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:xRe},Symbol.toStringTag,{value:"Module"})),hj=15;function SRe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0,currSelected:a,svgRef:u}){const[l,c]=I.useState([0,0]),[f,d]=I.useState(!1);return I.useEffect(()=>{const h=xo(u.current);if(h){const p=h.node().getBoundingClientRect();h.on("mousemove",m=>{const g=[m.clientX-p.x,m.clientY-p.y];if(c(g),f){const y=i.filter(v=>Math.abs(e(v[r.x])-g[0])<hj&&Math.abs(t(v[r.y])-g[1])<hj);if(m.ctrlKey||m.metaKey||!o){const v=new Set(a);y.forEach(_=>{v.has(_[r.ids])&&v.delete(_[r.ids])});const b=Array.from(v);n([[l[0],l[1]],[l[0],l[1]]],e,t,b.length===0?"clear":"drag",s.id,b)}else{const v=Array.from(new Set([...a,...y.map(b=>b[r.ids])]));v.length>0&&n([[l[0],l[1]],[l[0],l[1]]],e,t,"drag",s.id,v)}}}),h.on("mousedown",m=>{d(!0),m.stopPropagation(),m.preventDefault()}),h.on("mouseup",()=>{d(!1)})}},[l,s.id,a,i,f,o,r,n,u,e,t]),w.jsx("circle",{style:{cursor:f?"pointer":"default",pointerEvents:"none"},r:hj,fill:"darkgray",opacity:.5,cx:s.x1,cy:s.y1})}const ZTt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:SRe},Symbol.toStringTag,{value:"Module"}));function gw(e){const t=I.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return I.useLayoutEffect(()=>{t.current=e}),I.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const Xr={top:15,left:100,right:15,bottom:130};function TRe({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,initialParams:i,data:s,brushedPoints:o,onClose:a,isPaintbrushSelect:u,setIsPaintbrushSelect:l}){const[c,{height:f,width:d}]=Bf(),[h,p]=I.useState(i),[m]=Bf(),[g]=Bf(),y=I.useMemo(()=>d-Xr.left-Xr.right,[d]),v=I.useMemo(()=>f-Xr.top-Xr.bottom,[f]),b=I.useMemo(()=>{const O=Array.from(new Set(s.map(M=>M[h.category])));return rS(n2e).domain(O)},[s,h.category]),{xMin:_,yMin:x,xMax:S,yMax:E}=I.useMemo(()=>{const O=s.map(D=>+D[h.x]).filter(D=>D!==null),[M,j]=UD(O),B=s.map(D=>+D[h.y]).filter(D=>D!==null),[U,V]=UD(B);return{xMin:M,xMax:j,yMin:U,yMax:V}},[s,h.x,h.y]),T=I.useMemo(()=>{const O=S-_;return y<=0?null:h.dataType==="date"?XCe([Xr.left,y+Xr.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Nh([Xr.left,y+Xr.left]).domain([_-O/10,S+O/10]).nice()},[h.dataType,y,S,_]),A=I.useMemo(()=>{const O=E-x;return v<=0?null:Nh([v+Xr.top,Xr.top]).domain([x-O/10,E+O/10]).nice()},[v,E,x]),k=I.useMemo(()=>{if(!T||!A)return()=>null;if(r==="Axis Selection"){const O=tht().extent([[Xr.left,Xr.top+v-5],[Xr.left+y,Xr.top+v+5]]).on("brush end",j=>{j.sourceEvent!==void 0&&n([[j.selection[0],null],[j.selection[1],null]],T,A,j.mode,t.id)}),M=nht().extent([[Xr.left-5,Xr.top],[Xr.left+5,Xr.top+v]]).on("brush end",j=>{j.sourceEvent!==void 0&&n([[null,j.selection[0]],[null,j.selection[1]]],T,A,j.mode,t.id)});return m.current&&g.current&&(xo(g.current).call(M),xo(m.current).call(O),t.hasBrush||(xo(g.current).call(M.move,[A(E),A(x)]),xo(m.current).call(O.move,[T(new Date("2015-01-02")),T(new Date("2015-12-31"))]),n([[T(new Date("2015-01-02")),A(E)],[T(new Date("2015-12-31")),A(x)]],T,A,"drag",t.id))),()=>{xo(g.current).call(M.move,[A(E),A(x)]),xo(m.current).call(O.move,[T(new Date("2015-01-02")),T(new Date("2015-12-31"))]),n([[T(new Date("2015-01-02")),A(E)],[T(new Date("2015-12-31")),A(x)]],T,A,"clear",t.id)}}if(r==="Rectangular Selection"){const O=rht().extent([[Xr.left,Xr.top],[Xr.left+y,Xr.top+v]]).on("brush",M=>{M.sourceEvent!==void 0&&n([[M.selection[0][0],M.selection[0][1]],[M.selection[1][0],M.selection[1][1]]],T,A,M.mode,t.id)}).on("end",M=>{M.selection===null&&M.sourceEvent!==void 0&&(xo(c.current).call(O.move,null),e(null))});return xo(c.current).call(O),()=>{xo(c.current).call(O.move,null),n([[null,null],[null,null]],T,A,"clear",t.id)}}return r==="Slider Selection"?()=>n([[T(_),A(E)],[T(S),A(x)]],T,A,"clear",t.id):r==="Paintbrush Selection"?()=>n([[T(_),A(E)],[T(S),A(x)]],T,A,"clear",t.id,[]):()=>null},[t,r,m,g,v,c,n,y,S,_,T,E,x,A]);I.useEffect(()=>{r==="Slider Selection"&&T&&A&&n([[T(_),A(E)],[T(S),A(x)]],T,A,null,t.id)},[r,S,_,T,E,x,A]);const R=I.useMemo(()=>o.length===0?null:new Set(o),[o]),$=I.useMemo(()=>!T||!A?null:s.filter(O=>h.year?+O.Year===h.year:!0).map((O,M)=>{if(O[h.x]===null||O[h.y]===null)return null;const j=h.dataType==="date"?T(new Date(O[h.x])):T(O[h.x]);return w.jsx(Tc,{withinPortal:!0,label:O[h.ids],children:w.jsx("circle",{opacity:R&&!R.has(O[h.ids])?.3:.7,r:3,fill:R&&!R.has(O[h.ids])?"lightgray":h.hideCat?"gray":b(O[h.category]),cx:j,cy:A(O[h.y])},M)},M)}),[R,b,s,T,A,h]);I.useEffect(()=>{r==="Axis Selection"&&Yct(".handle").style("fill","darkgrey")},[t,r]);const P=gw(O=>{p({...h,year:O?+O:void 0})});return w.jsxs(Oi,{gap:0,children:[w.jsxs(Zn,{mr:Xr.right,style:{justifyContent:"space-between"},children:[h.year?w.jsxs(Oi,{gap:0,children:[w.jsx(xt,{size:"12px",ml:Xr.left,children:h.year}),w.jsx(TL,{min:2008,max:2022,value:h.year,onChange:P,ml:Xr.left,style:{width:"150px"},label:h.year})]}):null,w.jsx(sr,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),k==null||k()},children:"Clear Selection"}),h.brushType==="Paintbrush Selection"?w.jsx(EL,{defaultChecked:!0,value:u?"Select":"De-Select",onChange:O=>l(O==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),w.jsxs(Zn,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[w.jsxs("svg",{id:"scatterSvgBrushStudy",ref:c,style:{height:"500px",width:h.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[T&&A?w.jsxs("g",{children:[w.jsx(xRe,{yScale:A,label:h.y,horizontalPosition:Xr.left,xRange:T.range()}),w.jsx(lk,{xScale:T,yRange:A.range(),isDate:h.dataType==="date",vertPosition:v+Xr.top,label:h.x,ticks:T.ticks(h.brushType==="Axis Selection"?12:5).map(O=>({value:O.toString(),offset:T(O)}))})]}):null,$,w.jsx("g",{id:"brushXRef",ref:m}),w.jsx("g",{id:"brushYRef",ref:g}),T&&A&&r==="Paintbrush Selection"?w.jsx(SRe,{currSelected:o,svgRef:c,brushState:t,setBrushedSpace:n,params:h,data:s.filter(O=>h.year?+O.Year===h.year:!0),isSelect:u,xScale:T,yScale:A}):null]}),r==="Slider Selection"&&T&&A?w.jsxs(Oi,{style:{flexGrow:1},gap:50,children:[w.jsxs(Oi,{gap:0,children:[w.jsx(xt,{children:h.x}),w.jsx(SD,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],labelAlwaysOn:!1,onChange:O=>{n([[T(O[0]),t.y1],[T(O[1]),t.y2]],T,A,"drag",t.id)},style:{width:"300px"},marks:T.ticks(5).map(O=>({value:O,label:O})),value:[T.invert(t.x1),T.invert(t.x2)]})]}),w.jsxs(Oi,{gap:0,children:[w.jsx(xt,{children:h.y}),w.jsx(SD,{minRange:1,label:null,min:A.domain()[0],max:A.domain()[1],onChange:O=>{n([[t.x1,A(O[1])],[t.x2,A(O[0])]],T,A,"drag",t.id)},style:{width:"300px"},marks:A.ticks(5).map(O=>({value:O,label:O})),value:[A.invert(t.y2),A.invert(t.y1)]})]})]}):null]})]})}const eCt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:TRe},Symbol.toStringTag,{value:"Module"})),ll={top:15,left:100,right:15,bottom:130};function CRe({setFilteredTable:e,brushState:t,setSelection:n,brushType:r,initialParams:i,data:s,brushedPoints:o,onClose:a,isPaintbrushSelect:u,dataTable:l}){const[c,{height:f,width:d}]=Bf(),[h,p]=I.useState(i),m=I.useMemo(()=>d-ll.left-ll.right,[d]),g=I.useMemo(()=>f-ll.top-ll.bottom,[f]),y=I.useMemo(()=>h.hideCat?l.groupby(t.xCol).count():l.groupby(t.xCol,"Survived").count(),[t.xCol,l,h.hideCat]),v=I.useMemo(()=>{if(!s)return null;const E=wQ(s);return h.hideCat?E.groupby(t.xCol).count():E.groupby(t.xCol,"Survived").count()},[t.xCol,s,h.hideCat]),b=I.useMemo(()=>y?Nh([ll.top,g+ll.top]).domain([0,Ac(y.objects().map(E=>E.count))].reverse()).nice():null,[y,g]),_=I.useMemo(()=>y?N6([ll.left,m+ll.left]).domain(y.array(t.xCol).sort()).paddingInner(.1):null,[y,m,t.xCol]),x=I.useMemo(()=>!_||!b||!v?null:v.objects().map((E,T)=>w.jsxs("g",{children:[h.hideCat?w.jsx("rect",{onClick:A=>n(l.objects().filter(k=>k[t.xCol]===E[t.xCol]).map(k=>k.Name),A),x:_(E[t.xCol]),y:g-(g-b(E.count)),fill:"gray",width:_.bandwidth(),height:ll.top+g-b(E.count)}):w.jsx("rect",{onClick:A=>n(l.objects().filter(k=>k[t.xCol]===E[t.xCol]&&k.Survived===E.Survived).map(k=>k.Name),A),x:E.Survived==="Yes"?_(E[t.xCol]):_(E[t.xCol])+_.bandwidth()/2,y:g-(g-b(E.count)),fill:E.Survived==="Yes"?"#f28e2c":"#4e79a7",width:_.bandwidth()/2,height:ll.top+g-b(E.count)}),w.jsx("text",{x:_(E[t.xCol])+(h.hideCat?_.bandwidth()/2:E.Survived==="Yes"?_.bandwidth()/4:_.bandwidth()*.75),y:b(E.count)-10,style:{textAnchor:"middle",dominantBaseline:"middle",fontSize:14},children:E.count})]},`${T}fullRects`)),[v,t.xCol,l,g,h.hideCat,n,_,b]),S=I.useMemo(()=>!_||!b||!y?null:y.objects().map((E,T)=>w.jsx("g",{style:{cursor:"pointer"},children:w.jsx("rect",{onClick:A=>n(l.objects().filter(k=>k[t.xCol]===E[t.xCol]&&(h.hideCat?!0:k.Survived===E.Survived)).map(k=>k.Name),A),opacity:.7,x:E.Survived==="Yes"||h.hideCat?_(E[t.xCol]):_(E[t.xCol])+_.bandwidth()/2,fill:"lightgray",width:h.hideCat?_.bandwidth():_.bandwidth()/2,y:g-(g-b(E.count)),height:ll.top+g-b(E.count)})},`${T}survRects`)),[y,t.xCol,l,g,h.hideCat,n,_,b]);return b&&_&&v?w.jsx(Oi,{gap:0,children:w.jsxs("svg",{id:"scatterSvgBrushStudy",ref:c,style:{height:"500px",width:h.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[w.jsx(lk,{xScale:_,yRange:b.range(),vertPosition:g+ll.top,showLines:!1,stringTicks:!0,label:t.xCol,ticks:[...new Set(l.array(t.xCol))].map(E=>({value:E,offset:_(E)+_.bandwidth()/2}))}),b?w.jsx(V6,{label:"Count",yScale:b,horizontalPosition:ll.left,xRange:_.range(),ticks:b.ticks(5).map(E=>({value:E.toString(),offset:b(E)}))}):null,S,x]})}):null}const tCt=Object.freeze(Object.defineProperty({__proto__:null,Histogram:CRe},Symbol.toStringTag,{value:"Module"})),Cd={top:15,left:100,right:15,bottom:130};function ARe({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,initialParams:i,data:s,allData:o,setSelection:a,brushedPoints:u,onClose:l,isPaintbrushSelect:c}){const[f,{height:d,width:h}]=Bf(),[p,m]=I.useState(i),g=I.useMemo(()=>h-Cd.left-Cd.right,[h]),y=I.useMemo(()=>d-Cd.top-Cd.bottom,[d]),v=I.useMemo(()=>Nh([Cd.top,y+Cd.top]).domain([0,Ac(o.map(E=>+E[t.yCol]))].reverse()).nice(),[o,t.yCol,y]),b=I.useMemo(()=>N6([Cd.left,g+Cd.left]).domain([...new Set(o.map(E=>E[t.xCol].toString()))].sort()).paddingInner(.01),[g,o,t.xCol]),_=I.useMemo(()=>wQ(o.map(E=>({...E,Age:+E.Age}))),[o]),x=I.useMemo(()=>new Set(s.map(E=>E[p.ids])),[s,p.ids]),S=I.useMemo(()=>{let E=p.hideCat?_.groupby(t.xCol,{group:kN(t.yCol,{maxbins:20}),group_max:kN(t.yCol,{maxbins:20,offset:1})}):_.groupby(t.xCol,"Survived",{group:kN(t.yCol,{maxbins:20}),group_max:kN(t.yCol,{maxbins:20,offset:1})});E=E.rollup({ids:f2.array_agg(p.ids),count:f2.count()}).orderby("group");const T=E.derive({ids:Bv($=>$.ids.filter(P=>x.has(P))),count:Bv($=>$.ids.filter(P=>x.has(P)).length)}).orderby("group"),A=Nh([0,b.bandwidth()/2]).domain([0,Ac(E.array("count"))]),k=C3($=>A($[1])+b.bandwidth()/2,$=>v($[0])).curve(wz),R=C3($=>b.bandwidth()/2-A($[1]),$=>v($[0])).curve(wz);return w.jsx("g",{children:b.domain().map($=>w.jsx("g",{style:{cursor:"pointer"},children:p.hideCat?w.jsxs("g",{children:[w.jsx("path",{onClick:P=>a(E.objects().filter(O=>O[t.xCol]===$).map(O=>O.ids).flat(),P),opacity:.7,transform:`translate(${b($)}, 0)`,d:`${k(E.objects().filter(P=>P[t.xCol]===$).map(P=>[P.group,P.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),w.jsx("path",{onClick:P=>a(E.objects().filter(O=>O[t.xCol]===$).map(O=>O.ids).flat(),P),opacity:.7,transform:`translate(${b($)}, 0)`,d:`${R(E.objects().filter(P=>P[t.xCol]===$).map(P=>[P.group,P.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),w.jsx("path",{onClick:P=>a(E.objects().filter(O=>O[t.xCol]===$).map(O=>O.ids).flat(),P),transform:`translate(${b($)}, 0)`,d:`${k(T.objects().filter(P=>P[t.xCol]===$).map(P=>[P.group,P.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"gray"}),w.jsx("path",{onClick:P=>a(E.objects().filter(O=>O[t.xCol]===$).map(O=>O.ids).flat(),P),transform:`translate(${b($)}, 0)`,d:`${R(T.objects().filter(P=>P[t.xCol]===$).map(P=>[P.group,P.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"gray"})]}):w.jsxs("g",{children:[w.jsx("path",{onClick:P=>a(E.objects().filter(O=>O[t.xCol]===$&&O.Survived==="Yes").map(O=>O.ids).flat(),P),opacity:.7,transform:`translate(${b($)}, 0)`,d:`${k(E.objects().filter(P=>P[t.xCol]===$&&P.Survived==="Yes").map(P=>[P.group,P.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),w.jsx("path",{onClick:P=>a(E.objects().filter(O=>O[t.xCol]===$&&O.Survived==="No").map(O=>O.ids).flat(),P),opacity:.7,transform:`translate(${b($)}, 0)`,d:`${R(E.objects().filter(P=>P[t.xCol]===$&&P.Survived==="No").map(P=>[P.group,P.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),w.jsx("path",{onClick:P=>a(E.objects().filter(O=>O[t.xCol]===$&&O.Survived==="Yes").map(O=>O.ids).flat(),P),transform:`translate(${b($)}, 0)`,d:`${k(T.objects().filter(P=>P[t.xCol]===$&&P.Survived==="Yes").map(P=>[P.group,P.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"#f28e2c"}),w.jsx("path",{onClick:P=>a(E.objects().filter(O=>O[t.xCol]===$&&O.Survived==="No").map(O=>O.ids).flat(),P),transform:`translate(${b($)}, 0)`,d:`${R(T.objects().filter(P=>P[t.xCol]===$&&P.Survived==="No").map(P=>[P.group,P.count]))}L${b.bandwidth()/2},${v.range()[0]}L${b.bandwidth()/2},${v.range()[1]}Z`,fill:"#4e79a7"})]})},$))})},[t.xCol,t.yCol,x,_,p.hideCat,p.ids,a,b,v]);return w.jsx(Oi,{gap:0,children:w.jsxs("svg",{id:"scatterSvgBrushStudy",ref:f,style:{height:"500px",width:p.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[w.jsx(lk,{xScale:b,yRange:v.range(),vertPosition:y+Cd.top,showLines:!1,stringTicks:!0,label:t.xCol,ticks:b.domain().map(E=>({value:E,offset:b(E)+b.bandwidth()/2}))}),v?w.jsx(V6,{label:t.yCol,yScale:v,horizontalPosition:Cd.left,xRange:b.range(),ticks:v.ticks(5).map(E=>({value:E.toString(),offset:v(E)}))}):null,S]})})}const nCt=Object.freeze(Object.defineProperty({__proto__:null,Violin:ARe},Symbol.toStringTag,{value:"Module"}));function Wfe({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=I.useState(null),[s,o]=I.useState(e.brushState?{...e.brushState,selection:[]}:{0:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,xCol:e.x,yCol:e.y,id:0,type:"scatter"},selection:[]}),[a,u]=I.useState(!0),[l,c]=I.useState(null);I.useEffect(()=>{Dht(`/ThinkAloud/data/${e.dataset}.csv`).then(S=>{c(S)})},[e]);const f=I.useMemo(()=>l?wQ(l):null,[l]);I.useEffect(()=>{if(n){const S=n.all.brush||n.all;o(S);const E=new Set(S.selection);if(f){const T=f.filter(Bv(A=>E.has(A[e.ids])));i(T)}}},[f,e.ids,n]);const{actions:d,trrack:h}=I.useMemo(()=>{const S=UA.create(),E=S.register("brush",($,P)=>($.all={brush:P},$)),T=S.register("brushMove",($,P)=>($.all={brush:P},$)),A=S.register("brushResize",($,P)=>($.all={brush:P},$)),k=S.register("brushClear",($,P)=>($.all={brush:P},$)),R=nV({registry:S,initialState:{all:s}});return{actions:{brush:E,brushMove:T,brushResize:A,clearBrush:k},trrack:R}},[]),p=I.useCallback((S,E)=>{S==="drag"?h.apply("Move Brush",d.brushMove(E)):(S==="handle"||S==="click")&&h.apply("Brush",d.brush(E)),t({status:!0,provenanceGraph:h.graph.backend,answers:{}})},[d,t,h]),m=I.useMemo(()=>kd(p,50,{maxWait:50}),[p]),g=I.useCallback((S,E,T,A,k,R)=>{if(!E||!T)return;const $=s[k],P=E.invert(S[0][0]||$.x1),O=E.invert(S[1][0]||$.x2),M=T.invert(S[1][1]||$.y2),j=T.invert(S[0][1]||$.y1);let B=null;if(A==="clear")B=f;else if(R){const D=new Set(R);B=f.filter(Bv(z=>D.has(z[e.ids])))}else e.brushType==="Axis Selection"?B=f.filter(Bv(D=>new Date(D[e.x])>=new Date(P)&&new Date(D[e.x])<=new Date(O)&&D[e.y]>=M&&D[e.y]<=j)):B=f.filter(Bv(D=>D[e.x]>=P&&D[e.x]<=O&&D[e.y]>=M&&D[e.y]<=j));const U={xCol:$.xCol,yCol:$.yCol,x1:S[0][0]||($==null?void 0:$.x1)||0,x2:S[1][0]||($==null?void 0:$.x2)||0,y1:S[0][1]||($==null?void 0:$.y1)||0,y2:S[1][1]||($==null?void 0:$.y2)||0,hasBrush:A!=="clear",id:k},V=A!=="clear"?B==null?void 0:B.array(e.ids):[];o({...s,[k]:U,selection:V}),A==="drag"||A==="handle"||A==="click"?m(A,{...s,[k]:U,selection:V}):A==="clear"&&h.apply("Clear Brush",d.clearBrush({...s,[k]:U,selection:V})),i(B)},[s,f,e,h,m,d]),y=I.useMemo(()=>r?r==null?void 0:r.groupby(e.category).count():f?f==null?void 0:f.groupby(e.category).count():null,[r,f,e.category]),v=I.useCallback(S=>{i(S)},[]),b=I.useCallback((S,E)=>{const T=new Set(E.ctrlKey||E.metaKey?[...s.selection,...S]:S),A=f.filter(Bv(k=>T.has(k[e.ids])));o({...s,selection:[...T]}),i(A),p("click",{...s,selection:[...T]})},[s,f,p,e.ids]),_=I.useMemo(()=>(f==null?void 0:f.objects())||[],[f]),x=I.useMemo(()=>(r==null?void 0:r.objects())||[],[r]);return l?w.jsxs(Oi,{gap:"xs",children:[w.jsxs(Zn,{children:[w.jsx(sr,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:s.selection.length===0,onClick:()=>{i(null),o({...s,selection:[]})},children:"Clear Selection"}),e.brushType==="Paintbrush Selection"?w.jsx(EL,{defaultChecked:!0,value:a?"Select":"De-Select",onChange:S=>u(S==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:s.selection.length===0}]}):null,e.columns&&!e.hideCat?w.jsxs(w.Fragment,{children:[w.jsx(Ih,{color:"#f28e2c"}),w.jsx(xt,{children:"Survived"}),w.jsx(Ih,{color:"#4e79a7"}),w.jsx(xt,{children:"Died"})]}):null]}),w.jsxs(Zn,{children:[Object.entries(s).map(S=>{const[E,T]=S;return E==="selection"?null:T.type==="histogram"?w.jsx(CRe,{onClose:A=>{const{[A]:k,...R}=s;o(R)},dataTable:f,setSelection:b,brushedPoints:s.selection,data:x.length>0?x:_,initialParams:{...e,x:T.xCol,y:T.yCol},brushType:e.brushType,brushState:T,isPaintbrushSelect:a,setFilteredTable:v},E):T.type==="violin"?w.jsx(ARe,{onClose:A=>{const{[A]:k,...R}=s;o(R)},allData:_,setSelection:b,brushedPoints:s.selection,data:x.length>0?x:_,initialParams:{...e,x:T.xCol,y:T.yCol},brushType:e.brushType,setBrushedSpace:g,brushState:T,isPaintbrushSelect:a,setFilteredTable:v},E):w.jsx(TRe,{onClose:A=>{const{[A]:k,...R}=s;o(R)},brushedPoints:s.selection,data:_,initialParams:{...e,x:T.xCol,y:T.yCol},brushType:e.brushType,setBrushedSpace:g,brushState:T,isPaintbrushSelect:a,setFilteredTable:v,setIsPaintbrushSelect:u},E)}),e.hideCat?null:w.jsx(Ez,{fullTable:f,setSelection:b,data:_,parameters:e,barsTable:y})]})]}):w.jsx(Oc,{})}const rCt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Wfe,default:Wfe},Symbol.toStringTag,{value:"Module"})),iCt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function IRe(e,t){return function(n){return t.map(r=>[r,DSe(n,i=>e(r-i))])}}function kRe(e){return function(t){return Math.abs(t/=e)<=1?.75*(1-t*t)/e:0}}function RRe(e,t){return e*t/(t-1)}function NRe(e,t,n){let r=Math.sqrt(RRe(t,n));return typeof e=="number"&&(r=Math.min(r,e/1.34)),1.06*r*n**-.2}function sCt({values:e,xScale:t,ticks:n}){const r=WSt({values:e}).rollup({variance:f2.variance("values"),q1:f2.quantile("values",.25),q3:f2.quantile("values",.75)}).objects()[0];return IRe(kRe(NRe(r.q3-r.q1,r.variance,e.length)),t.ticks(n))(e)}const oCt=Object.freeze(Object.defineProperty({__proto__:null,kdeCalc:sCt,kernelDensityEstimator:IRe,kernelEpanechnikov:kRe,silvermans:NRe,toSampleVariance:RRe},Symbol.toStringTag,{value:"Module"})),aCt=Object.assign({"../public/ThinkAloud/AddPlot.tsx":$ut,"../public/ThinkAloud/AudioTest.tsx":Qut,"../public/ThinkAloud/Bar.tsx":Vyt,"../public/ThinkAloud/BrushPlot.tsx":rCt,"../public/ThinkAloud/Histogram.tsx":tCt,"../public/ThinkAloud/Paintbrush.tsx":ZTt,"../public/ThinkAloud/Scatter.tsx":eCt,"../public/ThinkAloud/Violin.tsx":nCt,"../public/ThinkAloud/XAxisBar.tsx":Uyt,"../public/ThinkAloud/YAxis.tsx":JTt,"../public/ThinkAloud/YAxisBar.tsx":zyt,"../public/ThinkAloud/types.ts":iCt,"../public/ThinkAloud/useKdeCalc.tsx":oCt});function uCt({currentConfig:e,provState:t}){const n=np(),r=eg()[n],i=`../public/${e.path}`,s=aCt[i].default,o=Dc(),{updateResponseBlockValidation:a,setIframeAnswers:u}=Ml(),l=I.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[o,a,r,n,u]);return w.jsx(I.Suspense,{fallback:w.jsx("div",{children:"Loading..."}),children:w.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})})}function lCt({currentConfig:e}){const[t,n]=I.useState(null);return I.useEffect(()=>{fetch(`${Kc}${e.path}`).then(r=>r.text()).then(r=>n(r))},[e]),t===null?null:w.jsx(Qa,{text:t})}function jm(){return Uo(e=>e.config)}function RQ(){const{answers:e}=Uo(i=>i),t=np(),r=`${eg()[t]}_${t}`;return e[r]}const cCt=mye(out);var fCt=cCt;function dCt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function hCt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function pCt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function mCt(e){return e.__COMMENTS__}function gCt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var p4={EOL:fCt.EOL||`
`,tryParseNumber:dCt,createComment:hCt,removeComment:pCt,getComment:mCt,forceComment:gCt},yCt="3.2.1";function vCt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return Gfe}else if(e.length===0)return Gfe;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return _Ct(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),bCt.bind(null,n)}function bCt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function Gfe(){}function _Ct(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function PRe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}PRe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function ORe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}ORe.description="parse hexadecimal numbers prefixed with 0x";function DRe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}DRe.description="support ISO dates";var NQ={loadDsf:vCt,std:{math:PRe,hex:ORe,date:DRe}},wCt=function(e,t){var n=p4,r=NQ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(O){return O==="{"||O==="}"||O==="["||O==="]"||O===","||O===":"}function d(O){var M,j=0,B=1;for(M=s-1;M>0&&i[M]!==`
`;M--,j++);for(;M>0;M--)i[M]===`
`&&B++;throw new Error(O+" at line "+B+","+j+" >>>"+i.substr(s-j,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(O){return i.charAt(s+O)}function m(O){for(var M="",j=o;h();){if(o===j)return h(),O&&j==="'"&&o==="'"&&M.length===0?(h(),g()):M;if(o==="\\")if(h(),o==="u"){for(var B=0,U=0;U<4;U++){h();var V=o.charCodeAt(0),D;o>="0"&&o<="9"?D=V-48:o>="a"&&o<="f"?D=V-97+10:o>="A"&&o<="F"?D=V-65+10:d("Bad \\u char "+o),B=B*16+D}M+=String.fromCharCode(B)}else if(typeof a[o]=="string")M+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):M+=o}d("Bad string")}function g(){for(var O="",M=0,j=0;;){var B=p(-j-5);if(!B||B===`
`)break;j++}function U(){for(var V=j;o&&o<=" "&&o!==`
`&&V-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)d("Bad multiline string");else if(o==="'"){if(M++,h(),M===3)return O.slice(-1)===`
`&&(O=O.slice(0,-1)),O;continue}else for(;M>0;)O+="'",M--;o===`
`?(O+=`
`,h(),U()):(o!=="\r"&&(O+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var O="",M=s,j=-1;;){if(o===":")return O?j>=0&&j!==O.length&&(s=M+j,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),O;o<=" "?o?j<0&&(j=O.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):O+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var O=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var M=o==="\r"||o===`
`||o==="";if(M||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var j=O[0];switch(j){case"f":if(O.trim()==="false")return!1;break;case"n":if(O.trim()==="null")return null;break;case"t":if(O.trim()==="true")return!0;break;default:if(j==="-"||j>="0"&&j<="9"){var B=n.tryParseNumber(O);if(B!==void 0)return B}}if(M){O=O.trim();var U=l(O);return U!==void 0?U:O}}O+=o}}function _(O,M){var j;for(O--,j=s-2;j>O&&i[j]<=" "&&i[j]!==`
`;j--);i[j]===`
`&&j--,i[j]==="\r"&&j--;var B=i.substr(O,j-O+1);for(j=0;j<B.length;j++)if(B[j]>" "){var U=B.indexOf(`
`);if(U>=0){var V=[B.substr(0,U),B.substr(U+1)];return M&&V[0].trim().length===0&&V.shift(),V}else return[B]}return[]}function x(O){function M(B,U){var V,D,z,W;switch(typeof B){case"string":B.indexOf(U)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(V=0,z=B.length;V<z;V++)W=M(B[V],U)||W;else for(D in B)Object.prototype.hasOwnProperty.call(B,D)&&(W=M(B[D],U)||W)}return W}function j(B){var U=M(O,B);return U?"found '"+B+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return j("}")||j("]")}function S(){var O=[],M,j,B;try{if(u&&(M=n.createComment(O,{a:[]})),h(),j=s,v(),M&&(B=_(j,!0).join(`
`)),o==="]")return h(),M&&(M.e=[B]),O;for(;o;){if(O.push(T()),j=s,v(),o===","&&(h(),j=s,v()),M){var U=_(j);M.a.push([B||"",U[0]||""]),B=U[1]}if(o==="]")return h(),M&&(M.a[M.a.length-1][1]+=B||""),O;v()}d("End of input while parsing an array (missing ']')")}catch(V){throw V.hint=V.hint||x(O),V}}function E(O){var M="",j={},B,U,V;try{if(u&&(B=n.createComment(j,{c:{},o:[]})),O?U=1:(h(),U=s),v(),B&&(V=_(U,!0).join(`
`)),o==="}"&&!O)return B&&(B.e=[V]),h(),j;for(;o;){if(M=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),j[M]=T(),U=s,v(),o===","&&(h(),U=s,v()),B){var D=_(U);B.c[M]=[V||"",D[0]||""],V=D[1],B.o.push(M)}if(o==="}"&&!O)return h(),B&&(B.c[M][1]+=V||""),j;v()}if(O)return j;d("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||x(j),z}}function T(){switch(v(),o){case"{":return E();case"[":return S();case"'":case'"':return m(!0);default:return b()}}function A(O,M){var j=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=M.join(`
`),U=_(j).join(`
`);if(U||B){var V=n.createComment(O,n.getComment(O));V.r=[B,U]}}return O}function k(){v();var O=u?_(1):null;switch(o){case"{":return A(E(),O);case"[":return A(S(),O);default:return A(T(),O)}}function R(){v();var O=u?_(1):null;switch(o){case"{":return A(E(),O);case"[":return A(S(),O)}try{return A(E(!0),O)}catch(M){c();try{return A(T(),O)}catch{throw M}}}if(typeof e!="string")throw new Error("source is not a string");var $=null,P=!0;return t&&typeof t=="object"&&(u=t.keepWsc,$=t.dsf,P=t.legacyRoot!==!1),l=r.loadDsf($,"parse"),i=e,c(),P?R():k()},ECt=function(e,t){var n=p4,r=NQ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var _,x="---\u2028--\uFEFF-",S=new RegExp('[\\\\\\"\0-'+x+"]","g"),E=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+x+"]","g"),T=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+x+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),k={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},R=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,$="",P=0;function O(W,F){return P+=W[0].length+W[1].length-W[2]-W[3],W[0]+F+W[1]}function M(W){return W.replace(S,function(F){var H=k[F];return typeof H=="string"?O(g.esc,H):O(g.uni,("0000"+F.charCodeAt(0).toString(16)).slice(-4))})}function j(W,F,H,G){return W?(E.lastIndex=0,A.lastIndex=0,c||H||E.test(W)||n.tryParseNumber(W,!0)!==void 0||A.test(W)?(S.lastIndex=0,T.lastIndex=0,S.test(W)?!T.test(W)&&!G&&d?B(W,F):O(g.qstr,M(W)):O(g.qstr,W)):O(g.str,W)):O(g.qstr,"")}function B(W,F){var H,G=W.replace(/\r/g,"").split(`
`);if(F+=o,G.length===1)return O(g.mstr,G[0]);var ee=s+F+g.mstr[0];for(H=0;H<G.length;H++)ee+=s,G[H]&&(ee+=F+G[H]);return ee+s+F+g.mstr[1]}function U(W){return W?l||R.test(W)?(S.lastIndex=0,O(g.qkey,S.test(W)?M(W):W)):O(g.key,W):'""'}function V(W,F,H,G){function ee(gn){return gn&&gn[gn[0]==="\r"?1:0]===`
`}function le(gn){return gn&&!ee(gn)}function de(gn,gr,Qt){if(!gn)return"";gn=n.forceComment(gn);var qr,Zr=gn.length;for(qr=0;qr<Zr&&gn[qr]<=" ";qr++);return Qt&&qr>0&&(gn=gn.substr(qr)),qr<Zr?gr+O(g.rem,gn):gn}var he=_(W);if(he!==void 0)return O(g.dsf,he);switch(typeof W){case"string":return j(W,$,F,G);case"number":return isFinite(W)?O(g.num,String(W)):O(g.lit,"null");case"boolean":return O(g.lit,String(W));case"object":if(!W)return O(g.lit,"null");var ye;a&&(ye=n.getComment(W));var Ce=Object.prototype.toString.apply(W)==="[object Array]",ve=$;$+=o;var Ye=s+ve,Ue=s+$,pt=H||u?"":Ye,rt=[],be,Ae=f?[]:null,Ve=c,ut=d,Nt=h?"":g.com[0],qe=0,me,ct,gt,wt,pe,Ie,Ke,yt,Vt;if(Ce){for(me=0,ct=W.length;me<ct;me++){if(be=me<ct-1,ye?(Ie=ye.a[me]||[],Ke=le(Ie[1]),rt.push(de(Ie[0],`
`)+Ue),Ae&&(Ie[0]||Ie[1]||Ke)&&(Ae=null)):rt.push(Ue),P=0,wt=W[me],rt.push(V(wt,ye?Ke:!1,!0)+(be?h:"")),Ae){switch(typeof wt){case"string":P=0,c=!0,d=0,Ae.push(V(wt,!1,!0)+(be?g.com[0]:"")),c=Ve,d=ut;break;case"object":if(wt){Ae=null;break}default:Ae.push(rt[rt.length-1]+(be?Nt:""));break}be&&(P+=g.com[0].length-g.com[2]),qe+=P}ye&&Ie[1]&&rt.push(de(Ie[1],Ke?" ":`
`,Ke))}ct===0?ye&&ye.e&&rt.push(de(ye.e[0],`
`)+Ye):rt.push(Ye),rt.length===0?yt=O(g.arr,""):(yt=pt+O(g.arr,rt.join("")),Ae&&(Vt=Ae.join(" "),Vt.length-qe<=f&&(yt=O(g.arr,Vt))))}else{var er=ye?ye.o.slice():[],Vn=[];for(gt in W)Object.prototype.hasOwnProperty.call(W,gt)&&er.indexOf(gt)<0&&Vn.push(gt);m&&Vn.sort();var $n=er.concat(Vn);for(me=0,ct=$n.length;me<ct;me++)if(be=me<ct-1,gt=$n[me],ye?(Ie=ye.c[gt]||[],Ke=le(Ie[1]),rt.push(de(Ie[0],`
`)+Ue),Ae&&(Ie[0]||Ie[1]||Ke)&&(Ae=null)):rt.push(Ue),P=0,wt=W[gt],pe=V(wt,ye&&Ke),rt.push(U(gt)+g.col[0]+(ee(pe)?"":" ")+pe+(be?h:"")),ye&&Ie[1]&&rt.push(de(Ie[1],Ke?" ":`
`,Ke)),Ae){switch(typeof wt){case"string":P=0,c=!0,d=0,pe=V(wt,!1),c=Ve,d=ut,Ae.push(U(gt)+g.col[0]+" "+pe+(be?g.com[0]:""));break;case"object":if(wt){Ae=null;break}default:Ae.push(rt[rt.length-1]+(be?Nt:""));break}P+=g.col[0].length-g.col[2],be&&(P+=g.com[0].length-g.com[2]),qe+=P}ct===0?ye&&ye.e&&rt.push(de(ye.e[0],`
`)+Ye):rt.push(Ye),rt.length===0?yt=O(g.obj,""):(yt=pt+O(g.obj,rt.join("")),Ae&&(Vt=Ae.join(" "),Vt.length-qe<=f&&(yt=O(g.obj,Vt))))}return $=ve,yt}}_=r.loadDsf(p,"stringify");var D="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&(D=z[0]+`
`),D+=V(e,null,!0,!0),z&&(D+=z[1]||""),D},Kw=p4;function m2(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function iV(e,t){if(!(e===null||typeof e!="object")){var n=Kw.getComment(e);n&&Kw.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Yfe(o.a,r,n.a[r],iV(e[r]))&&(s=!0);!s&&n.e&&(o.e=m2(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];Yfe(o.s,l,n.c[l],iV(e[l]))&&(s=!0)}!s&&n.e&&(o.e=m2(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=m2(n.r[0],n.r[1])),s?o:void 0}}function xCt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function SCt(e,t){var n=[];if(sV(e,t,n,[]),n.length>0){var r=u$(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+xCt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),u$(t,r,1)}}function Yfe(e,t,n,r){var i=m2(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function g2(e,t){var n=m2(t.b,t.a);return n.path=e,n}function y2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(g2(s,o)),y2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(g2(u,l)),y2(l.x,t,u))});e.e&&t.push(g2(n,e.e))}}function sV(e,t,n,r){if(e){if(t===null||typeof t!="object"){y2(e,n,r);return}var i,s=Kw.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],sV(u.x,t[i],n,l)):(n.push(g2(l,u)),y2(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],sV(d.x,t[c],n,f))):d&&(n.push(g2(f,d)),y2(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function u$(e,t,n){var r=Kw.createComment(e,Kw.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Kw.forceComment(t)),r.r[n]||""}var TCt={extract:function(e){return iV(e,!0)},merge:SCt,header:function(e,t){return u$(e,t,0)},footer:function(e,t){return u$(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Kfe=p4,CCt=yCt,Xfe=wCt,Qfe=ECt,ACt=TCt,ICt=NQ,PQ={parse:Xfe,stringify:Qfe,endOfLine:function(){return Kfe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(Kfe.EOL=e)},version:CCt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Xfe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Qfe(e,t)}},comments:ACt,dsf:ICt.std},oV={exports:{}},$Re={},Vf={},KE={},wk={},Nn={},zA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,_)=>`${b}${_}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,_)=>(_ instanceof n&&(b[_.str]=(b[_.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let _=0;for(;_<v.length;)a(b,v[_]),b.push(y[++_]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let _=0;for(;_<v.length;)b.push(s),a(b,v[_]),b.push(s,h(y[++_]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(zA);var aV={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=zA;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(aV);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=zA,n=aV;var r=zA;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=aV;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(H,G){return this}}class o extends s{constructor(H,G,ee){super(),this.varKind=H,this.name=G,this.rhs=ee}render({es5:H,_n:G}){const ee=H?n.varKinds.var:this.varKind,le=this.rhs===void 0?"":` = ${this.rhs}`;return`${ee} ${this.name}${le};`+G}optimizeNames(H,G){if(H[this.name.str])return this.rhs&&(this.rhs=O(this.rhs,H,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(H,G,ee){super(),this.lhs=H,this.rhs=G,this.sideEffects=ee}render({_n:H}){return`${this.lhs} = ${this.rhs};`+H}optimizeNames(H,G){if(!(this.lhs instanceof t.Name&&!H[this.lhs.str]&&!this.sideEffects))return this.rhs=O(this.rhs,H,G),this}get names(){const H=this.lhs instanceof t.Name?{}:{...this.lhs.names};return P(H,this.rhs)}}class u extends a{constructor(H,G,ee,le){super(H,ee,le),this.op=G}render({_n:H}){return`${this.lhs} ${this.op}= ${this.rhs};`+H}}class l extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`${this.label}:`+H}}class c extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`break${this.label?` ${this.label}`:""};`+H}}class f extends s{constructor(H){super(),this.error=H}render({_n:H}){return`throw ${this.error};`+H}get names(){return this.error.names}}class d extends s{constructor(H){super(),this.code=H}render({_n:H}){return`${this.code};`+H}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(H,G){return this.code=O(this.code,H,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(H=[]){super(),this.nodes=H}render(H){return this.nodes.reduce((G,ee)=>G+ee.render(H),"")}optimizeNodes(){const{nodes:H}=this;let G=H.length;for(;G--;){const ee=H[G].optimizeNodes();Array.isArray(ee)?H.splice(G,1,...ee):ee?H[G]=ee:H.splice(G,1)}return H.length>0?this:void 0}optimizeNames(H,G){const{nodes:ee}=this;let le=ee.length;for(;le--;){const de=ee[le];de.optimizeNames(H,G)||(M(H,de.names),ee.splice(le,1))}return ee.length>0?this:void 0}get names(){return this.nodes.reduce((H,G)=>$(H,G.names),{})}}class p extends h{render(H){return"{"+H._n+super.render(H)+"}"+H._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(H,G){super(G),this.condition=H}render(H){let G=`if(${this.condition})`+super.render(H);return this.else&&(G+="else "+this.else.render(H)),G}optimizeNodes(){super.optimizeNodes();const H=this.condition;if(H===!0)return this.nodes;let G=this.else;if(G){const ee=G.optimizeNodes();G=this.else=Array.isArray(ee)?new g(ee):ee}if(G)return H===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(j(H),G instanceof y?[G]:G.nodes);if(!(H===!1||!this.nodes.length))return this}optimizeNames(H,G){var ee;if(this.else=(ee=this.else)===null||ee===void 0?void 0:ee.optimizeNames(H,G),!!(super.optimizeNames(H,G)||this.else))return this.condition=O(this.condition,H,G),this}get names(){const H=super.names;return P(H,this.condition),this.else&&$(H,this.else.names),H}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(H){super(),this.iteration=H}render(H){return`for(${this.iteration})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iteration=O(this.iteration,H,G),this}get names(){return $(super.names,this.iteration.names)}}class _ extends v{constructor(H,G,ee,le){super(),this.varKind=H,this.name=G,this.from=ee,this.to=le}render(H){const G=H.es5?n.varKinds.var:this.varKind,{name:ee,from:le,to:de}=this;return`for(${G} ${ee}=${le}; ${ee}<${de}; ${ee}++)`+super.render(H)}get names(){const H=P(super.names,this.from);return P(H,this.to)}}class x extends v{constructor(H,G,ee,le){super(),this.loop=H,this.varKind=G,this.name=ee,this.iterable=le}render(H){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iterable=O(this.iterable,H,G),this}get names(){return $(super.names,this.iterable.names)}}class S extends p{constructor(H,G,ee){super(),this.name=H,this.args=G,this.async=ee}render(H){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(H)}}S.kind="func";class E extends h{render(H){return"return "+super.render(H)}}E.kind="return";class T extends p{render(H){let G="try"+super.render(H);return this.catch&&(G+=this.catch.render(H)),this.finally&&(G+=this.finally.render(H)),G}optimizeNodes(){var H,G;return super.optimizeNodes(),(H=this.catch)===null||H===void 0||H.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(H,G){var ee,le;return super.optimizeNames(H,G),(ee=this.catch)===null||ee===void 0||ee.optimizeNames(H,G),(le=this.finally)===null||le===void 0||le.optimizeNames(H,G),this}get names(){const H=super.names;return this.catch&&$(H,this.catch.names),this.finally&&$(H,this.finally.names),H}}class A extends p{constructor(H){super(),this.error=H}render(H){return`catch(${this.error})`+super.render(H)}}A.kind="catch";class k extends p{render(H){return"finally"+super.render(H)}}k.kind="finally";class R{constructor(H,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=H,this._scope=new n.Scope({parent:H}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(H){return this._scope.name(H)}scopeName(H){return this._extScope.name(H)}scopeValue(H,G){const ee=this._extScope.value(H,G);return(this._values[ee.prefix]||(this._values[ee.prefix]=new Set)).add(ee),ee}getScopeValue(H,G){return this._extScope.getValue(H,G)}scopeRefs(H){return this._extScope.scopeRefs(H,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(H,G,ee,le){const de=this._scope.toName(G);return ee!==void 0&&le&&(this._constants[de.str]=ee),this._leafNode(new o(H,de,ee)),de}const(H,G,ee){return this._def(n.varKinds.const,H,G,ee)}let(H,G,ee){return this._def(n.varKinds.let,H,G,ee)}var(H,G,ee){return this._def(n.varKinds.var,H,G,ee)}assign(H,G,ee){return this._leafNode(new a(H,G,ee))}add(H,G){return this._leafNode(new u(H,e.operators.ADD,G))}code(H){return typeof H=="function"?H():H!==t.nil&&this._leafNode(new d(H)),this}object(...H){const G=["{"];for(const[ee,le]of H)G.length>1&&G.push(","),G.push(ee),(ee!==le||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,le));return G.push("}"),new t._Code(G)}if(H,G,ee){if(this._blockNode(new y(H)),G&&ee)this.code(G).else().code(ee).endIf();else if(G)this.code(G).endIf();else if(ee)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(H){return this._elseNode(new y(H))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(H,G){return this._blockNode(H),G&&this.code(G).endFor(),this}for(H,G){return this._for(new b(H),G)}forRange(H,G,ee,le,de=this.opts.es5?n.varKinds.var:n.varKinds.let){const he=this._scope.toName(H);return this._for(new _(de,he,G,ee),()=>le(he))}forOf(H,G,ee,le=n.varKinds.const){const de=this._scope.toName(H);if(this.opts.es5){const he=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${he}.length`,ye=>{this.var(de,(0,t._)`${he}[${ye}]`),ee(de)})}return this._for(new x("of",le,de,G),()=>ee(de))}forIn(H,G,ee,le=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(H,(0,t._)`Object.keys(${G})`,ee);const de=this._scope.toName(H);return this._for(new x("in",le,de,G),()=>ee(de))}endFor(){return this._endBlockNode(v)}label(H){return this._leafNode(new l(H))}break(H){return this._leafNode(new c(H))}return(H){const G=new E;if(this._blockNode(G),this.code(H),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(E)}try(H,G,ee){if(!G&&!ee)throw new Error('CodeGen: "try" without "catch" and "finally"');const le=new T;if(this._blockNode(le),this.code(H),G){const de=this.name("e");this._currNode=le.catch=new A(de),G(de)}return ee&&(this._currNode=le.finally=new k,this.code(ee)),this._endBlockNode(A,k)}throw(H){return this._leafNode(new f(H))}block(H,G){return this._blockStarts.push(this._nodes.length),H&&this.code(H).endBlock(G),this}endBlock(H){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const ee=this._nodes.length-G;if(ee<0||H!==void 0&&ee!==H)throw new Error(`CodeGen: wrong number of nodes: ${ee} vs ${H} expected`);return this._nodes.length=G,this}func(H,G=t.nil,ee,le){return this._blockNode(new S(H,G,ee)),le&&this.code(le).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(H=1){for(;H-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(H){return this._currNode.nodes.push(H),this}_blockNode(H){this._currNode.nodes.push(H),this._nodes.push(H)}_endBlockNode(H,G){const ee=this._currNode;if(ee instanceof H||G&&ee instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${H.kind}/${G.kind}`:H.kind}"`)}_elseNode(H){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=H,this}get _root(){return this._nodes[0]}get _currNode(){const H=this._nodes;return H[H.length-1]}set _currNode(H){const G=this._nodes;G[G.length-1]=H}}e.CodeGen=R;function $(F,H){for(const G in H)F[G]=(F[G]||0)+(H[G]||0);return F}function P(F,H){return H instanceof t._CodeOrName?$(F,H.names):F}function O(F,H,G){if(F instanceof t.Name)return ee(F);if(!le(F))return F;return new t._Code(F._items.reduce((de,he)=>(he instanceof t.Name&&(he=ee(he)),he instanceof t._Code?de.push(...he._items):de.push(he),de),[]));function ee(de){const he=G[de.str];return he===void 0||H[de.str]!==1?de:(delete H[de.str],he)}function le(de){return de instanceof t._Code&&de._items.some(he=>he instanceof t.Name&&H[he.str]===1&&G[he.str]!==void 0)}}function M(F,H){for(const G in H)F[G]=(F[G]||0)-(H[G]||0)}function j(F){return typeof F=="boolean"||typeof F=="number"||F===null?!F:(0,t._)`!${W(F)}`}e.not=j;const B=z(e.operators.AND);function U(...F){return F.reduce(B)}e.and=U;const V=z(e.operators.OR);function D(...F){return F.reduce(V)}e.or=D;function z(F){return(H,G)=>H===t.nil?G:G===t.nil?H:(0,t._)`${W(H)} ${F} ${W(G)}`}function W(F){return F instanceof t.Name?F:(0,t._)`(${F})`}})(Nn);var vt={};Object.defineProperty(vt,"__esModule",{value:!0});vt.checkStrictMode=vt.getErrorPath=vt.Type=vt.useFunc=vt.setEvaluated=vt.evaluatedPropsToName=vt.mergeEvaluated=vt.eachItem=vt.unescapeJsonPointer=vt.escapeJsonPointer=vt.escapeFragment=vt.unescapeFragment=vt.schemaRefOrVal=vt.schemaHasRulesButRef=vt.schemaHasRules=vt.checkUnknownRules=vt.alwaysValidSchema=vt.toHash=void 0;const Qr=Nn,kCt=zA;function RCt(e){const t={};for(const n of e)t[n]=!0;return t}vt.toHash=RCt;function NCt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(MRe(e,t),!LRe(t,e.self.RULES.all))}vt.alwaysValidSchema=NCt;function MRe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||BRe(e,`unknown keyword: "${s}"`)}vt.checkUnknownRules=MRe;function LRe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}vt.schemaHasRules=LRe;function PCt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}vt.schemaHasRulesButRef=PCt;function OCt({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Qr._)`${n}`}return(0,Qr._)`${e}${t}${(0,Qr.getProperty)(r)}`}vt.schemaRefOrVal=OCt;function DCt(e){return FRe(decodeURIComponent(e))}vt.unescapeFragment=DCt;function $Ct(e){return encodeURIComponent(OQ(e))}vt.escapeFragment=$Ct;function OQ(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}vt.escapeJsonPointer=OQ;function FRe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}vt.unescapeJsonPointer=FRe;function MCt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}vt.eachItem=MCt;function Jfe({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Qr.Name?(s instanceof Qr.Name?e(i,s,o):t(i,s,o),o):s instanceof Qr.Name?(t(i,o,s),s):n(s,o);return a===Qr.Name&&!(u instanceof Qr.Name)?r(i,u):u}}vt.mergeEvaluated={props:Jfe({mergeNames:(e,t,n)=>e.if((0,Qr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Qr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Qr._)`${n} || {}`).code((0,Qr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Qr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Qr._)`${n} || {}`),DQ(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:jRe}),items:Jfe({mergeNames:(e,t,n)=>e.if((0,Qr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Qr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Qr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Qr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function jRe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Qr._)`{}`);return t!==void 0&&DQ(e,n,t),n}vt.evaluatedPropsToName=jRe;function DQ(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Qr._)`${t}${(0,Qr.getProperty)(r)}`,!0))}vt.setEvaluated=DQ;const Zfe={};function LCt(e,t){return e.scopeValue("func",{ref:t,code:Zfe[t.code]||(Zfe[t.code]=new kCt._Code(t.code))})}vt.useFunc=LCt;var uV;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(uV||(vt.Type=uV={}));function FCt(e,t,n){if(e instanceof Qr.Name){const r=t===uV.Num;return n?r?(0,Qr._)`"[" + ${e} + "]"`:(0,Qr._)`"['" + ${e} + "']"`:r?(0,Qr._)`"/" + ${e}`:(0,Qr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Qr.getProperty)(e).toString():"/"+OQ(e)}vt.getErrorPath=FCt;function BRe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}vt.checkStrictMode=BRe;var ap={};Object.defineProperty(ap,"__esModule",{value:!0});const ia=Nn,jCt={data:new ia.Name("data"),valCxt:new ia.Name("valCxt"),instancePath:new ia.Name("instancePath"),parentData:new ia.Name("parentData"),parentDataProperty:new ia.Name("parentDataProperty"),rootData:new ia.Name("rootData"),dynamicAnchors:new ia.Name("dynamicAnchors"),vErrors:new ia.Name("vErrors"),errors:new ia.Name("errors"),this:new ia.Name("this"),self:new ia.Name("self"),scope:new ia.Name("scope"),json:new ia.Name("json"),jsonPos:new ia.Name("jsonPos"),jsonLen:new ia.Name("jsonLen"),jsonPart:new ia.Name("jsonPart")};ap.default=jCt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Nn,n=vt,r=ap;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:_}=g,{gen:x,compositeRule:S,allErrors:E}=_,T=f(g,y,v);b??(S||E)?u(x,T):l(_,(0,t._)`[${T}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:_,compositeRule:x,allErrors:S}=b,E=f(g,y,v);u(_,E),x||S||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:_,it:x}){if(_===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",_,r.default.errors,E=>{g.const(S,(0,t._)`${r.default.vErrors}[${E}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,x.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${x.errSchemaPath}/${y}`),x.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:_}=g;_.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:_}=g,x=[h(_,v),p(g,v)];return m(g,y,x),b.object(...x)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let _=b?y:(0,t.str)`${y}/${g}`;return v&&(_=(0,t.str)`${_}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,_]}function m(g,{params:y,message:v},b){const{keyword:_,data:x,schemaValue:S,it:E}=g,{opts:T,propertyName:A,topSchemaRef:k,schemaPath:R}=E;b.push([c.keyword,_],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),T.messages&&b.push([c.message,typeof v=="function"?v(g):v]),T.verbose&&b.push([c.schema,S],[c.parentSchema,(0,t._)`${k}${R}`],[r.default.data,x]),A&&b.push([c.propertyName,A])}})(wk);Object.defineProperty(KE,"__esModule",{value:!0});KE.boolOrEmptySchema=KE.topBoolOrEmptySchema=void 0;const BCt=wk,UCt=Nn,zCt=ap,VCt={message:"boolean schema is false"};function HCt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?URe(e,!1):typeof n=="object"&&n.$async===!0?t.return(zCt.default.data):(t.assign((0,UCt._)`${r}.errors`,null),t.return(!0))}KE.topBoolOrEmptySchema=HCt;function qCt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),URe(e)):n.var(t,!0)}KE.boolOrEmptySchema=qCt;function URe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,BCt.reportError)(i,VCt,void 0,t)}var As={},J1={};Object.defineProperty(J1,"__esModule",{value:!0});J1.getRules=J1.isJSONType=void 0;const WCt=["string","number","integer","boolean","null","object","array"],GCt=new Set(WCt);function YCt(e){return typeof e=="string"&&GCt.has(e)}J1.isJSONType=YCt;function KCt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}J1.getRules=KCt;var dm={};Object.defineProperty(dm,"__esModule",{value:!0});dm.shouldUseRule=dm.shouldUseGroup=dm.schemaHasRulesForType=void 0;function XCt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&zRe(e,r)}dm.schemaHasRulesForType=XCt;function zRe(e,t){return t.rules.some(n=>VRe(e,n))}dm.shouldUseGroup=zRe;function VRe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}dm.shouldUseRule=VRe;Object.defineProperty(As,"__esModule",{value:!0});As.reportTypeError=As.checkDataTypes=As.checkDataType=As.coerceAndCheckDataType=As.getJSONTypes=As.getSchemaTypes=As.DataType=void 0;const QCt=J1,JCt=dm,ZCt=wk,En=Nn,HRe=vt;var Xw;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Xw||(As.DataType=Xw={}));function e2t(e){const t=qRe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}As.getSchemaTypes=e2t;function qRe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(QCt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}As.getJSONTypes=qRe;function t2t(e,t){const{gen:n,data:r,opts:i}=e,s=n2t(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,JCt.schemaHasRulesForType)(e,t[0]));if(o){const a=$Q(t,r,i.strictNumbers,Xw.Wrong);n.if(a,()=>{s.length?r2t(e,t,s):MQ(e)})}return o}As.coerceAndCheckDataType=t2t;const WRe=new Set(["string","number","integer","boolean","null"]);function n2t(e,t){return t?e.filter(n=>WRe.has(n)||t==="array"&&n==="array"):[]}function r2t(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,En._)`typeof ${i}`),a=r.let("coerced",(0,En._)`undefined`);s.coerceTypes==="array"&&r.if((0,En._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,En._)`${i}[0]`).assign(o,(0,En._)`typeof ${i}`).if($Q(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,En._)`${a} !== undefined`);for(const l of n)(WRe.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),MQ(e),r.endIf(),r.if((0,En._)`${a} !== undefined`,()=>{r.assign(i,a),i2t(e,a)});function u(l){switch(l){case"string":r.elseIf((0,En._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,En._)`"" + ${i}`).elseIf((0,En._)`${i} === null`).assign(a,(0,En._)`""`);return;case"number":r.elseIf((0,En._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,En._)`+${i}`);return;case"integer":r.elseIf((0,En._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,En._)`+${i}`);return;case"boolean":r.elseIf((0,En._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,En._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,En._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,En._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,En._)`[${i}]`)}}}function i2t({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,En._)`${t} !== undefined`,()=>e.assign((0,En._)`${t}[${n}]`,r))}function lV(e,t,n,r=Xw.Correct){const i=r===Xw.Correct?En.operators.EQ:En.operators.NEQ;let s;switch(e){case"null":return(0,En._)`${t} ${i} null`;case"array":s=(0,En._)`Array.isArray(${t})`;break;case"object":s=(0,En._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,En._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,En._)`typeof ${t} ${i} ${e}`}return r===Xw.Correct?s:(0,En.not)(s);function o(a=En.nil){return(0,En.and)((0,En._)`typeof ${t} == "number"`,a,n?(0,En._)`isFinite(${t})`:En.nil)}}As.checkDataType=lV;function $Q(e,t,n,r){if(e.length===1)return lV(e[0],t,n,r);let i;const s=(0,HRe.toHash)(e);if(s.array&&s.object){const o=(0,En._)`typeof ${t} != "object"`;i=s.null?o:(0,En._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=En.nil;s.number&&delete s.integer;for(const o in s)i=(0,En.and)(i,lV(o,t,n,r));return i}As.checkDataTypes=$Q;const s2t={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,En._)`{type: ${e}}`:(0,En._)`{type: ${t}}`};function MQ(e){const t=o2t(e);(0,ZCt.reportError)(t,s2t)}As.reportTypeError=MQ;function o2t(e){const{gen:t,data:n,schema:r}=e,i=(0,HRe.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var m4={};Object.defineProperty(m4,"__esModule",{value:!0});m4.assignDefaults=void 0;const T_=Nn,a2t=vt;function u2t(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)ede(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>ede(e,s,i.default))}m4.assignDefaults=u2t;function ede(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,T_._)`${s}${(0,T_.getProperty)(t)}`;if(i){(0,a2t.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,T_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,T_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,T_._)`${a} = ${(0,T_.stringify)(n)}`)}var ah={},kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.validateUnion=kn.validateArray=kn.usePattern=kn.callValidateCode=kn.schemaProperties=kn.allSchemaProperties=kn.noPropertyInData=kn.propertyInData=kn.isOwnProperty=kn.hasPropFunc=kn.reportMissingProp=kn.checkMissingProp=kn.checkReportMissingProp=void 0;const hi=Nn,LQ=vt,Eg=ap,l2t=vt;function c2t(e,t){const{gen:n,data:r,it:i}=e;n.if(jQ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,hi._)`${t}`},!0),e.error()})}kn.checkReportMissingProp=c2t;function f2t({gen:e,data:t,it:{opts:n}},r,i){return(0,hi.or)(...r.map(s=>(0,hi.and)(jQ(e,t,s,n.ownProperties),(0,hi._)`${i} = ${s}`)))}kn.checkMissingProp=f2t;function d2t(e,t){e.setParams({missingProperty:t},!0),e.error()}kn.reportMissingProp=d2t;function GRe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,hi._)`Object.prototype.hasOwnProperty`})}kn.hasPropFunc=GRe;function FQ(e,t,n){return(0,hi._)`${GRe(e)}.call(${t}, ${n})`}kn.isOwnProperty=FQ;function h2t(e,t,n,r){const i=(0,hi._)`${t}${(0,hi.getProperty)(n)} !== undefined`;return r?(0,hi._)`${i} && ${FQ(e,t,n)}`:i}kn.propertyInData=h2t;function jQ(e,t,n,r){const i=(0,hi._)`${t}${(0,hi.getProperty)(n)} === undefined`;return r?(0,hi.or)(i,(0,hi.not)(FQ(e,t,n))):i}kn.noPropertyInData=jQ;function YRe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}kn.allSchemaProperties=YRe;function p2t(e,t){return YRe(t).filter(n=>!(0,LQ.alwaysValidSchema)(e,t[n]))}kn.schemaProperties=p2t;function m2t({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,hi._)`${e}, ${t}, ${r}${i}`:t,f=[[Eg.default.instancePath,(0,hi.strConcat)(Eg.default.instancePath,s)],[Eg.default.parentData,o.parentData],[Eg.default.parentDataProperty,o.parentDataProperty],[Eg.default.rootData,Eg.default.rootData]];o.opts.dynamicRef&&f.push([Eg.default.dynamicAnchors,Eg.default.dynamicAnchors]);const d=(0,hi._)`${c}, ${n.object(...f)}`;return u!==hi.nil?(0,hi._)`${a}.call(${u}, ${d})`:(0,hi._)`${a}(${d})`}kn.callValidateCode=m2t;const g2t=(0,hi._)`new RegExp`;function y2t({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,hi._)`${i.code==="new RegExp"?g2t:(0,l2t.useFunc)(e,i)}(${n}, ${r})`})}kn.usePattern=y2t;function v2t(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,hi._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:LQ.Type.Num},s),t.if((0,hi.not)(s),a)})}}kn.validateArray=v2t;function b2t(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,LQ.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,hi._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,hi.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}kn.validateUnion=b2t;Object.defineProperty(ah,"__esModule",{value:!0});ah.validateKeywordUsage=ah.validSchemaType=ah.funcKeywordCode=ah.macroKeywordCode=void 0;const ja=Nn,Uv=ap,_2t=kn,w2t=wk;function E2t(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=KRe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:ja.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}ah.macroKeywordCode=E2t;function x2t(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;T2t(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=KRe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&tde(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&tde(e),g(()=>S2t(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,ja._)`await `),v=>r.assign(f,!1).if((0,ja._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,ja._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,ja._)`${c}.errors`;return r.assign(y,null),m(ja.nil),y}function m(y=t.async?(0,ja._)`await `:ja.nil){const v=u.opts.passContext?Uv.default.this:Uv.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,ja._)`${y}${(0,_2t.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,ja.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}ah.funcKeywordCode=x2t;function tde(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,ja._)`${r.parentData}[${r.parentDataProperty}]`))}function S2t(e,t){const{gen:n}=e;n.if((0,ja._)`Array.isArray(${t})`,()=>{n.assign(Uv.default.vErrors,(0,ja._)`${Uv.default.vErrors} === null ? ${t} : ${Uv.default.vErrors}.concat(${t})`).assign(Uv.default.errors,(0,ja._)`${Uv.default.vErrors}.length`),(0,w2t.extendErrors)(e)},()=>e.error())}function T2t({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function KRe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,ja.stringify)(n)})}function C2t(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}ah.validSchemaType=C2t;function A2t({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}ah.validateKeywordUsage=A2t;var R0={};Object.defineProperty(R0,"__esModule",{value:!0});R0.extendSubschemaMode=R0.extendSubschemaData=R0.getSubschema=void 0;const rh=Nn,XRe=vt;function I2t(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,rh._)`${e.schemaPath}${(0,rh.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,rh._)`${e.schemaPath}${(0,rh.getProperty)(t)}${(0,rh.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,XRe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}R0.getSubschema=I2t;function k2t(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,rh._)`${t.data}${(0,rh.getProperty)(n)}`,!0);u(d),e.errorPath=(0,rh.str)`${l}${(0,XRe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,rh._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof rh.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}R0.extendSubschemaData=k2t;function R2t(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}R0.extendSubschemaMode=R2t;var Ao={},BQ=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const lO=Ho(BQ);var QRe={exports:{}},o0=QRe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};cO(t,r,i,e,"",e)};o0.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};o0.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};o0.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};o0.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function cO(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in o0.arrayKeywords)for(var d=0;d<f.length;d++)cO(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in o0.propsKeywords){if(f&&typeof f=="object")for(var h in f)cO(e,t,n,f[h],i+"/"+c+"/"+N2t(h),s,i,c,r,h)}else(c in o0.keywords||e.allKeys&&!(c in o0.skipKeywords))&&cO(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function N2t(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var P2t=QRe.exports;Object.defineProperty(Ao,"__esModule",{value:!0});Ao.getSchemaRefs=Ao.resolveUrl=Ao.normalizeId=Ao._getFullPath=Ao.getFullPath=Ao.inlineRef=void 0;const O2t=vt,D2t=BQ,$2t=P2t,M2t=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function L2t(e,t=!0){return typeof e=="boolean"?!0:t===!0?!cV(e):t?JRe(e)<=t:!1}Ao.inlineRef=L2t;const F2t=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function cV(e){for(const t in e){if(F2t.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(cV)||typeof n=="object"&&cV(n))return!0}return!1}function JRe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!M2t.has(n)&&(typeof e[n]=="object"&&(0,O2t.eachItem)(e[n],r=>t+=JRe(r)),t===1/0))return 1/0}return t}function ZRe(e,t="",n){n!==!1&&(t=Qw(t));const r=e.parse(t);return eNe(e,r)}Ao.getFullPath=ZRe;function eNe(e,t){return e.serialize(t).split("#")[0]+"#"}Ao._getFullPath=eNe;const j2t=/#\/?$/;function Qw(e){return e?e.replace(j2t,""):""}Ao.normalizeId=Qw;function B2t(e,t,n){return n=Qw(n),e.resolve(t,n)}Ao.resolveUrl=B2t;const U2t=/^[a-z_][-a-z0-9._]*$/i;function z2t(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Qw(e[n]||t),s={"":i},o=ZRe(r,i,!1),a={},u=new Set;return $2t(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const _=this.opts.uriResolver.resolve;if(b=Qw(g?_(g,b):b),u.has(b))throw c(b);u.add(b);let x=this.refs[b];return typeof x=="string"&&(x=this.refs[x]),typeof x=="object"?l(f,x.schema,b):b!==Qw(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!U2t.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!D2t(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Ao.getSchemaRefs=z2t;Object.defineProperty(Vf,"__esModule",{value:!0});Vf.getData=Vf.KeywordCxt=Vf.validateFunctionCode=void 0;const tNe=KE,nde=As,UQ=dm,l$=As,V2t=m4,v2=ah,pj=R0,Ot=Nn,sn=ap,H2t=Ao,hm=vt,ST=wk;function q2t(e){if(iNe(e)&&(sNe(e),rNe(e))){Y2t(e);return}nNe(e,()=>(0,tNe.topBoolOrEmptySchema)(e))}Vf.validateFunctionCode=q2t;function nNe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Ot._)`${sn.default.data}, ${sn.default.valCxt}`,r.$async,()=>{e.code((0,Ot._)`"use strict"; ${rde(n,i)}`),G2t(e,i),e.code(s)}):e.func(t,(0,Ot._)`${sn.default.data}, ${W2t(i)}`,r.$async,()=>e.code(rde(n,i)).code(s))}function W2t(e){return(0,Ot._)`{${sn.default.instancePath}="", ${sn.default.parentData}, ${sn.default.parentDataProperty}, ${sn.default.rootData}=${sn.default.data}${e.dynamicRef?(0,Ot._)`, ${sn.default.dynamicAnchors}={}`:Ot.nil}}={}`}function G2t(e,t){e.if(sn.default.valCxt,()=>{e.var(sn.default.instancePath,(0,Ot._)`${sn.default.valCxt}.${sn.default.instancePath}`),e.var(sn.default.parentData,(0,Ot._)`${sn.default.valCxt}.${sn.default.parentData}`),e.var(sn.default.parentDataProperty,(0,Ot._)`${sn.default.valCxt}.${sn.default.parentDataProperty}`),e.var(sn.default.rootData,(0,Ot._)`${sn.default.valCxt}.${sn.default.rootData}`),t.dynamicRef&&e.var(sn.default.dynamicAnchors,(0,Ot._)`${sn.default.valCxt}.${sn.default.dynamicAnchors}`)},()=>{e.var(sn.default.instancePath,(0,Ot._)`""`),e.var(sn.default.parentData,(0,Ot._)`undefined`),e.var(sn.default.parentDataProperty,(0,Ot._)`undefined`),e.var(sn.default.rootData,sn.default.data),t.dynamicRef&&e.var(sn.default.dynamicAnchors,(0,Ot._)`{}`)})}function Y2t(e){const{schema:t,opts:n,gen:r}=e;nNe(e,()=>{n.$comment&&t.$comment&&aNe(e),Z2t(e),r.let(sn.default.vErrors,null),r.let(sn.default.errors,0),n.unevaluated&&K2t(e),oNe(e),nAt(e)})}function K2t(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Ot._)`${n}.evaluated`),t.if((0,Ot._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Ot._)`${e.evaluated}.props`,(0,Ot._)`undefined`)),t.if((0,Ot._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Ot._)`${e.evaluated}.items`,(0,Ot._)`undefined`))}function rde(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Ot._)`/*# sourceURL=${n} */`:Ot.nil}function X2t(e,t){if(iNe(e)&&(sNe(e),rNe(e))){Q2t(e,t);return}(0,tNe.boolOrEmptySchema)(e,t)}function rNe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function iNe(e){return typeof e.schema!="boolean"}function Q2t(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&aNe(e),eAt(e),tAt(e);const s=r.const("_errs",sn.default.errors);oNe(e,s),r.var(t,(0,Ot._)`${s} === ${sn.default.errors}`)}function sNe(e){(0,hm.checkUnknownRules)(e),J2t(e)}function oNe(e,t){if(e.opts.jtd)return ide(e,[],!1,t);const n=(0,nde.getSchemaTypes)(e.schema),r=(0,nde.coerceAndCheckDataType)(e,n);ide(e,n,!r,t)}function J2t(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,hm.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function Z2t(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,hm.checkStrictMode)(e,"default is ignored in the schema root")}function eAt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,H2t.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function tAt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function aNe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Ot._)`${sn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Ot.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Ot._)`${sn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function nAt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Ot._)`${sn.default.errors} === 0`,()=>t.return(sn.default.data),()=>t.throw((0,Ot._)`new ${i}(${sn.default.vErrors})`)):(t.assign((0,Ot._)`${r}.errors`,sn.default.vErrors),s.unevaluated&&rAt(e),t.return((0,Ot._)`${sn.default.errors} === 0`))}function rAt({gen:e,evaluated:t,props:n,items:r}){n instanceof Ot.Name&&e.assign((0,Ot._)`${t}.props`,n),r instanceof Ot.Name&&e.assign((0,Ot._)`${t}.items`,r)}function ide(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,hm.schemaHasRulesButRef)(s,c))){i.block(()=>cNe(e,"$ref",c.all.$ref.definition));return}u.jtd||iAt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,UQ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,l$.checkDataType)(d.type,o,u.strictNumbers)),sde(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,l$.reportTypeError)(e)),i.endIf()):sde(e,d),a||i.if((0,Ot._)`${sn.default.errors} === ${r||0}`))}}function sde(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,V2t.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,UQ.shouldUseRule)(r,s)&&cNe(e,s.keyword,s.definition,t.type)})}function iAt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(sAt(e,t),e.opts.allowUnionTypes||oAt(e,t),aAt(e,e.dataTypes))}function sAt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{uNe(e.dataTypes,n)||zQ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),lAt(e,t)}}function oAt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&zQ(e,"use allowUnionTypes to allow union type keyword")}function aAt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,UQ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>uAt(t,o))&&zQ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function uAt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function uNe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function lAt(e,t){const n=[];for(const r of e.dataTypes)uNe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function zQ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,hm.checkStrictMode)(e,t,e.opts.strictTypes)}class lNe{constructor(t,n,r){if((0,v2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,hm.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",fNe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,v2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",sn.default.errors))}result(t,n,r){this.failResult((0,Ot.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Ot.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Ot._)`${n} !== undefined && (${(0,Ot.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?ST.reportExtraError:ST.reportError)(this,this.def.error,n)}$dataError(){(0,ST.reportError)(this,this.def.$dataError||ST.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,ST.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Ot.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Ot.nil,n=Ot.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Ot.or)((0,Ot._)`${i} === undefined`,n)),t!==Ot.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Ot.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Ot.or)(o(),a());function o(){if(r.length){if(!(n instanceof Ot.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Ot._)`${(0,l$.checkDataTypes)(u,n,s.opts.strictNumbers,l$.DataType.Wrong)}`}return Ot.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Ot._)`!${u}(${n})`}return Ot.nil}}subschema(t,n){const r=(0,pj.getSubschema)(this.it,t);(0,pj.extendSubschemaData)(r,this.it,t),(0,pj.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return X2t(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=hm.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=hm.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Ot.Name)),!0}}Vf.KeywordCxt=lNe;function cNe(e,t,n,r){const i=new lNe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,v2.funcKeywordCode)(i,n):"macro"in n?(0,v2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,v2.funcKeywordCode)(i,n)}const cAt=/^\/(?:[^~]|~0|~1)*$/,fAt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function fNe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return sn.default.rootData;if(e[0]==="/"){if(!cAt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=sn.default.rootData}else{const l=fAt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Ot._)`${s}${(0,Ot.getProperty)((0,hm.unescapeJsonPointer)(l))}`,o=(0,Ot._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Vf.getData=fNe;var Ek={};Object.defineProperty(Ek,"__esModule",{value:!0});class dAt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Ek.default=dAt;var yS={};Object.defineProperty(yS,"__esModule",{value:!0});const mj=Ao;class hAt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,mj.resolveUrl)(t,n,r),this.missingSchema=(0,mj.normalizeId)((0,mj.getFullPath)(t,this.missingRef))}}yS.default=hAt;var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.resolveSchema=Iu.getCompilingSchema=Iu.resolveRef=Iu.compileSchema=Iu.SchemaEnv=void 0;const lf=Nn,pAt=Ek,cv=ap,kf=Ao,ode=vt,mAt=Vf;class g4{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,kf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Iu.SchemaEnv=g4;function VQ(e){const t=dNe.call(this,e);if(t)return t;const n=(0,kf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new lf.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:pAt.default,code:(0,lf._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:cv.default.data,parentData:cv.default.parentData,parentDataProperty:cv.default.parentDataProperty,dataNames:[cv.default.data],dataPathArr:[lf.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,lf.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:lf.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,lf._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,mAt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(cv.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${cv.default.self}`,`${cv.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof lf.Name?void 0:p,items:m instanceof lf.Name?void 0:m,dynamicProps:p instanceof lf.Name,dynamicItems:m instanceof lf.Name},h.source&&(h.source.evaluated=(0,lf.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Iu.compileSchema=VQ;function gAt(e,t,n){var r;n=(0,kf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=bAt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new g4({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=yAt.call(this,s)}Iu.resolveRef=gAt;function yAt(e){return(0,kf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:VQ.call(this,e)}function dNe(e){for(const t of this._compilations)if(vAt(t,e))return t}Iu.getCompilingSchema=dNe;function vAt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function bAt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||y4.call(this,e,t)}function y4(e,t){const n=this.opts.uriResolver.parse(t),r=(0,kf._getFullPath)(this.opts.uriResolver,n);let i=(0,kf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return gj.call(this,n,e);const s=(0,kf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=y4.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:gj.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||VQ.call(this,o),s===(0,kf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,kf.resolveUrl)(this.opts.uriResolver,i,l)),new g4({schema:a,schemaId:u,root:e,baseId:i})}return gj.call(this,n,o)}}Iu.resolveSchema=y4;const _At=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function gj(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,ode.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!_At.has(a)&&l&&(t=(0,kf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,ode.schemaHasRulesButRef)(n,this.RULES)){const a=(0,kf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=y4.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new g4({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const wAt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",EAt="Meta-schema for $data reference (JSON AnySchema extension proposal)",xAt="object",SAt=["$data"],TAt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},CAt=!1,AAt={$id:wAt,description:EAt,type:xAt,required:SAt,properties:TAt,additionalProperties:CAt};var HQ={},fV={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(ko,function(n){function r(){for(var oe=arguments.length,te=Array(oe),ae=0;ae<oe;ae++)te[ae]=arguments[ae];if(te.length>1){te[0]=te[0].slice(0,-1);for(var Te=te.length-1,Se=1;Se<Te;++Se)te[Se]=te[Se].slice(1,-1);return te[Te]=te[Te].slice(1),te.join("")}else return te[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,te){var ae=oe;if(te)for(var Te in te)ae[Te]=te[Te];return ae}function l(oe){var te="[A-Za-z]",ae="[0-9]",Te=r(ae,"[A-Fa-f]"),Se=i(i("%[EFef]"+Te+"%"+Te+Te+"%"+Te+Te)+"|"+i("%[89A-Fa-f]"+Te+"%"+Te+Te)+"|"+i("%"+Te+Te)),st="[\\:\\/\\?\\#\\[\\]\\@]",St="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",qt=r(st,St),Pn=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Mn=oe?"[\\uE000-\\uF8FF]":"[]",pn=r(te,ae,"[\\-\\.\\_\\~]",Pn);i(te+r(te,ae,"[\\+\\-\\.]")+"*"),i(i(Se+"|"+r(pn,St,"[\\:]"))+"*");var tr=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),Cr=i(tr+"\\."+tr+"\\."+tr+"\\."+tr),Ht=i(Te+"{1,4}"),nr=i(i(Ht+"\\:"+Ht)+"|"+Cr),Wr=i(i(Ht+"\\:")+"{6}"+nr),Kn=i("\\:\\:"+i(Ht+"\\:")+"{5}"+nr),Ri=i(i(Ht)+"?\\:\\:"+i(Ht+"\\:")+"{4}"+nr),Vs=i(i(i(Ht+"\\:")+"{0,1}"+Ht)+"?\\:\\:"+i(Ht+"\\:")+"{3}"+nr),ti=i(i(i(Ht+"\\:")+"{0,2}"+Ht)+"?\\:\\:"+i(Ht+"\\:")+"{2}"+nr),mo=i(i(i(Ht+"\\:")+"{0,3}"+Ht)+"?\\:\\:"+Ht+"\\:"+nr),Ui=i(i(i(Ht+"\\:")+"{0,4}"+Ht)+"?\\:\\:"+nr),zi=i(i(i(Ht+"\\:")+"{0,5}"+Ht)+"?\\:\\:"+Ht),Go=i(i(i(Ht+"\\:")+"{0,6}"+Ht)+"?\\:\\:"),Pa=i([Wr,Kn,Ri,Vs,ti,mo,Ui,zi,Go].join("|")),Hs=i(i(pn+"|"+Se)+"+");i("[vV]"+Te+"+\\."+r(pn,St,"[\\:]")+"+"),i(i(Se+"|"+r(pn,St))+"*");var Ql=i(Se+"|"+r(pn,St,"[\\:\\@]"));return i(i(Se+"|"+r(pn,St,"[\\@]"))+"+"),i(i(Ql+"|"+r("[\\/\\?]",Mn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",te,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",pn,St),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",pn,St),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",pn,St),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",pn,St),"g"),NOT_QUERY:new RegExp(r("[^\\%]",pn,St,"[\\:\\@\\/\\?]",Mn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",pn,St,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",pn,St),"g"),UNRESERVED:new RegExp(pn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",pn,qt),"g"),PCT_ENCODED:new RegExp(Se,"g"),IPV4ADDRESS:new RegExp("^("+Cr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Pa+")"+i(i("\\%25|\\%(?!"+Te+"{2})")+"("+Hs+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(te,ae){var Te=[],Se=!0,st=!1,St=void 0;try{for(var qt=te[Symbol.iterator](),Pn;!(Se=(Pn=qt.next()).done)&&(Te.push(Pn.value),!(ae&&Te.length===ae));Se=!0);}catch(Mn){st=!0,St=Mn}finally{try{!Se&&qt.return&&qt.return()}finally{if(st)throw St}}return Te}return function(te,ae){if(Array.isArray(te))return te;if(Symbol.iterator in Object(te))return oe(te,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var te=0,ae=Array(oe.length);te<oe.length;te++)ae[te]=oe[te];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,b=700,_=72,x=128,S="-",E=/^xn--/,T=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=m-g,$=Math.floor,P=String.fromCharCode;function O(oe){throw new RangeError(k[oe])}function M(oe,te){for(var ae=[],Te=oe.length;Te--;)ae[Te]=te(oe[Te]);return ae}function j(oe,te){var ae=oe.split("@"),Te="";ae.length>1&&(Te=ae[0]+"@",oe=ae[1]),oe=oe.replace(A,".");var Se=oe.split("."),st=M(Se,te).join(".");return Te+st}function B(oe){for(var te=[],ae=0,Te=oe.length;ae<Te;){var Se=oe.charCodeAt(ae++);if(Se>=55296&&Se<=56319&&ae<Te){var st=oe.charCodeAt(ae++);(st&64512)==56320?te.push(((Se&1023)<<10)+(st&1023)+65536):(te.push(Se),ae--)}else te.push(Se)}return te}var U=function(te){return String.fromCodePoint.apply(String,h(te))},V=function(te){return te-48<10?te-22:te-65<26?te-65:te-97<26?te-97:m},D=function(te,ae){return te+22+75*(te<26)-((ae!=0)<<5)},z=function(te,ae,Te){var Se=0;for(te=Te?$(te/b):te>>1,te+=$(te/ae);te>R*y>>1;Se+=m)te=$(te/R);return $(Se+(R+1)*te/(te+v))},W=function(te){var ae=[],Te=te.length,Se=0,st=x,St=_,qt=te.lastIndexOf(S);qt<0&&(qt=0);for(var Pn=0;Pn<qt;++Pn)te.charCodeAt(Pn)>=128&&O("not-basic"),ae.push(te.charCodeAt(Pn));for(var Mn=qt>0?qt+1:0;Mn<Te;){for(var pn=Se,tr=1,Cr=m;;Cr+=m){Mn>=Te&&O("invalid-input");var Ht=V(te.charCodeAt(Mn++));(Ht>=m||Ht>$((p-Se)/tr))&&O("overflow"),Se+=Ht*tr;var nr=Cr<=St?g:Cr>=St+y?y:Cr-St;if(Ht<nr)break;var Wr=m-nr;tr>$(p/Wr)&&O("overflow"),tr*=Wr}var Kn=ae.length+1;St=z(Se-pn,Kn,pn==0),$(Se/Kn)>p-st&&O("overflow"),st+=$(Se/Kn),Se%=Kn,ae.splice(Se++,0,st)}return String.fromCodePoint.apply(String,ae)},F=function(te){var ae=[];te=B(te);var Te=te.length,Se=x,st=0,St=_,qt=!0,Pn=!1,Mn=void 0;try{for(var pn=te[Symbol.iterator](),tr;!(qt=(tr=pn.next()).done);qt=!0){var Cr=tr.value;Cr<128&&ae.push(P(Cr))}}catch(De){Pn=!0,Mn=De}finally{try{!qt&&pn.return&&pn.return()}finally{if(Pn)throw Mn}}var Ht=ae.length,nr=Ht;for(Ht&&ae.push(S);nr<Te;){var Wr=p,Kn=!0,Ri=!1,Vs=void 0;try{for(var ti=te[Symbol.iterator](),mo;!(Kn=(mo=ti.next()).done);Kn=!0){var Ui=mo.value;Ui>=Se&&Ui<Wr&&(Wr=Ui)}}catch(De){Ri=!0,Vs=De}finally{try{!Kn&&ti.return&&ti.return()}finally{if(Ri)throw Vs}}var zi=nr+1;Wr-Se>$((p-st)/zi)&&O("overflow"),st+=(Wr-Se)*zi,Se=Wr;var Go=!0,Pa=!1,Hs=void 0;try{for(var Ql=te[Symbol.iterator](),wd;!(Go=(wd=Ql.next()).done);Go=!0){var Y=wd.value;if(Y<Se&&++st>p&&O("overflow"),Y==Se){for(var se=st,Z=m;;Z+=m){var fe=Z<=St?g:Z>=St+y?y:Z-St;if(se<fe)break;var ge=se-fe,ce=m-fe;ae.push(P(D(fe+ge%ce,0))),se=$(ge/ce)}ae.push(P(D(se,0))),St=z(st,zi,nr==Ht),st=0,++nr}}}catch(De){Pa=!0,Hs=De}finally{try{!Go&&Ql.return&&Ql.return()}finally{if(Pa)throw Hs}}++st,++Se}return ae.join("")},H=function(te){return j(te,function(ae){return E.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(te){return j(te,function(ae){return T.test(ae)?"xn--"+F(ae):ae})},ee={version:"2.1.0",ucs2:{decode:B,encode:U},decode:W,encode:F,toASCII:G,toUnicode:H},le={};function de(oe){var te=oe.charCodeAt(0),ae=void 0;return te<16?ae="%0"+te.toString(16).toUpperCase():te<128?ae="%"+te.toString(16).toUpperCase():te<2048?ae="%"+(te>>6|192).toString(16).toUpperCase()+"%"+(te&63|128).toString(16).toUpperCase():ae="%"+(te>>12|224).toString(16).toUpperCase()+"%"+(te>>6&63|128).toString(16).toUpperCase()+"%"+(te&63|128).toString(16).toUpperCase(),ae}function he(oe){for(var te="",ae=0,Te=oe.length;ae<Te;){var Se=parseInt(oe.substr(ae+1,2),16);if(Se<128)te+=String.fromCharCode(Se),ae+=3;else if(Se>=194&&Se<224){if(Te-ae>=6){var st=parseInt(oe.substr(ae+4,2),16);te+=String.fromCharCode((Se&31)<<6|st&63)}else te+=oe.substr(ae,6);ae+=6}else if(Se>=224){if(Te-ae>=9){var St=parseInt(oe.substr(ae+4,2),16),qt=parseInt(oe.substr(ae+7,2),16);te+=String.fromCharCode((Se&15)<<12|(St&63)<<6|qt&63)}else te+=oe.substr(ae,9);ae+=9}else te+=oe.substr(ae,3),ae+=3}return te}function ye(oe,te){function ae(Te){var Se=he(Te);return Se.match(te.UNRESERVED)?Se:Te}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(te.PCT_ENCODED,ae).toLowerCase().replace(te.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(te.PCT_ENCODED,ae).replace(te.NOT_USERINFO,de).replace(te.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(te.PCT_ENCODED,ae).toLowerCase().replace(te.NOT_HOST,de).replace(te.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(te.PCT_ENCODED,ae).replace(oe.scheme?te.NOT_PATH:te.NOT_PATH_NOSCHEME,de).replace(te.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(te.PCT_ENCODED,ae).replace(te.NOT_QUERY,de).replace(te.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(te.PCT_ENCODED,ae).replace(te.NOT_FRAGMENT,de).replace(te.PCT_ENCODED,o)),oe}function Ce(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function ve(oe,te){var ae=oe.match(te.IPV4ADDRESS)||[],Te=d(ae,2),Se=Te[1];return Se?Se.split(".").map(Ce).join("."):oe}function Ye(oe,te){var ae=oe.match(te.IPV6ADDRESS)||[],Te=d(ae,3),Se=Te[1],st=Te[2];if(Se){for(var St=Se.toLowerCase().split("::").reverse(),qt=d(St,2),Pn=qt[0],Mn=qt[1],pn=Mn?Mn.split(":").map(Ce):[],tr=Pn.split(":").map(Ce),Cr=te.IPV4ADDRESS.test(tr[tr.length-1]),Ht=Cr?7:8,nr=tr.length-Ht,Wr=Array(Ht),Kn=0;Kn<Ht;++Kn)Wr[Kn]=pn[Kn]||tr[nr+Kn]||"";Cr&&(Wr[Ht-1]=ve(Wr[Ht-1],te));var Ri=Wr.reduce(function(zi,Go,Pa){if(!Go||Go==="0"){var Hs=zi[zi.length-1];Hs&&Hs.index+Hs.length===Pa?Hs.length++:zi.push({index:Pa,length:1})}return zi},[]),Vs=Ri.sort(function(zi,Go){return Go.length-zi.length})[0],ti=void 0;if(Vs&&Vs.length>1){var mo=Wr.slice(0,Vs.index),Ui=Wr.slice(Vs.index+Vs.length);ti=mo.join(":")+"::"+Ui.join(":")}else ti=Wr.join(":");return st&&(ti+="%"+st),ti}else return oe}var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,pt="".match(/(){0}/)[1]===void 0;function rt(oe){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Te=te.iri!==!1?f:c;te.reference==="suffix"&&(oe=(te.scheme?te.scheme+":":"")+"//"+oe);var Se=oe.match(Ue);if(Se){pt?(ae.scheme=Se[1],ae.userinfo=Se[3],ae.host=Se[4],ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=Se[7],ae.fragment=Se[8],isNaN(ae.port)&&(ae.port=Se[5])):(ae.scheme=Se[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?Se[3]:void 0,ae.host=oe.indexOf("//")!==-1?Se[4]:void 0,ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=oe.indexOf("?")!==-1?Se[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?Se[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Se[4]:void 0)),ae.host&&(ae.host=Ye(ve(ae.host,Te),Te)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",te.reference&&te.reference!=="suffix"&&te.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+te.reference+" reference.");var st=le[(te.scheme||ae.scheme||"").toLowerCase()];if(!te.unicodeSupport&&(!st||!st.unicodeSupport)){if(ae.host&&(te.domainHost||st&&st.domainHost))try{ae.host=ee.toASCII(ae.host.replace(Te.PCT_ENCODED,he).toLowerCase())}catch(St){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+St}ye(ae,c)}else ye(ae,Te);st&&st.parse&&st.parse(ae,te)}else ae.error=ae.error||"URI can not be parsed.";return ae}function be(oe,te){var ae=te.iri!==!1?f:c,Te=[];return oe.userinfo!==void 0&&(Te.push(oe.userinfo),Te.push("@")),oe.host!==void 0&&Te.push(Ye(ve(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(Se,st,St){return"["+st+(St?"%25"+St:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Te.push(":"),Te.push(String(oe.port))),Te.length?Te.join(""):void 0}var Ae=/^\.\.?\//,Ve=/^\/\.(\/|$)/,ut=/^\/\.\.(\/|$)/,Nt=/^\/?(?:.|\n)*?(?=\/|$)/;function qe(oe){for(var te=[];oe.length;)if(oe.match(Ae))oe=oe.replace(Ae,"");else if(oe.match(Ve))oe=oe.replace(Ve,"/");else if(oe.match(ut))oe=oe.replace(ut,"/"),te.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Nt);if(ae){var Te=ae[0];oe=oe.slice(Te.length),te.push(Te)}else throw new Error("Unexpected dot segment condition")}return te.join("")}function me(oe){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=te.iri?f:c,Te=[],Se=le[(te.scheme||oe.scheme||"").toLowerCase()];if(Se&&Se.serialize&&Se.serialize(oe,te),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(te.domainHost||Se&&Se.domainHost)try{oe.host=te.iri?ee.toUnicode(oe.host):ee.toASCII(oe.host.replace(ae.PCT_ENCODED,he).toLowerCase())}catch(qt){oe.error=oe.error||"Host's domain name can not be converted to "+(te.iri?"Unicode":"ASCII")+" via punycode: "+qt}}ye(oe,ae),te.reference!=="suffix"&&oe.scheme&&(Te.push(oe.scheme),Te.push(":"));var st=be(oe,te);if(st!==void 0&&(te.reference!=="suffix"&&Te.push("//"),Te.push(st),oe.path&&oe.path.charAt(0)!=="/"&&Te.push("/")),oe.path!==void 0){var St=oe.path;!te.absolutePath&&(!Se||!Se.absolutePath)&&(St=qe(St)),st===void 0&&(St=St.replace(/^\/\//,"/%2F")),Te.push(St)}return oe.query!==void 0&&(Te.push("?"),Te.push(oe.query)),oe.fragment!==void 0&&(Te.push("#"),Te.push(oe.fragment)),Te.join("")}function ct(oe,te){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Te=arguments[3],Se={};return Te||(oe=rt(me(oe,ae),ae),te=rt(me(te,ae),ae)),ae=ae||{},!ae.tolerant&&te.scheme?(Se.scheme=te.scheme,Se.userinfo=te.userinfo,Se.host=te.host,Se.port=te.port,Se.path=qe(te.path||""),Se.query=te.query):(te.userinfo!==void 0||te.host!==void 0||te.port!==void 0?(Se.userinfo=te.userinfo,Se.host=te.host,Se.port=te.port,Se.path=qe(te.path||""),Se.query=te.query):(te.path?(te.path.charAt(0)==="/"?Se.path=qe(te.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?Se.path="/"+te.path:oe.path?Se.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+te.path:Se.path=te.path,Se.path=qe(Se.path)),Se.query=te.query):(Se.path=oe.path,te.query!==void 0?Se.query=te.query:Se.query=oe.query),Se.userinfo=oe.userinfo,Se.host=oe.host,Se.port=oe.port),Se.scheme=oe.scheme),Se.fragment=te.fragment,Se}function gt(oe,te,ae){var Te=u({scheme:"null"},ae);return me(ct(rt(oe,Te),rt(te,Te),Te,!0),Te)}function wt(oe,te){return typeof oe=="string"?oe=me(rt(oe,te),te):s(oe)==="object"&&(oe=rt(me(oe,te),te)),oe}function pe(oe,te,ae){return typeof oe=="string"?oe=me(rt(oe,ae),ae):s(oe)==="object"&&(oe=me(oe,ae)),typeof te=="string"?te=me(rt(te,ae),ae):s(te)==="object"&&(te=me(te,ae)),oe===te}function Ie(oe,te){return oe&&oe.toString().replace(!te||!te.iri?c.ESCAPE:f.ESCAPE,de)}function Ke(oe,te){return oe&&oe.toString().replace(!te||!te.iri?c.PCT_ENCODED:f.PCT_ENCODED,he)}var yt={scheme:"http",domainHost:!0,parse:function(te,ae){return te.host||(te.error=te.error||"HTTP URIs must have a host."),te},serialize:function(te,ae){var Te=String(te.scheme).toLowerCase()==="https";return(te.port===(Te?443:80)||te.port==="")&&(te.port=void 0),te.path||(te.path="/"),te}},Vt={scheme:"https",domainHost:yt.domainHost,parse:yt.parse,serialize:yt.serialize};function er(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var Vn={scheme:"ws",domainHost:!0,parse:function(te,ae){var Te=te;return Te.secure=er(Te),Te.resourceName=(Te.path||"/")+(Te.query?"?"+Te.query:""),Te.path=void 0,Te.query=void 0,Te},serialize:function(te,ae){if((te.port===(er(te)?443:80)||te.port==="")&&(te.port=void 0),typeof te.secure=="boolean"&&(te.scheme=te.secure?"wss":"ws",te.secure=void 0),te.resourceName){var Te=te.resourceName.split("?"),Se=d(Te,2),st=Se[0],St=Se[1];te.path=st&&st!=="/"?st:void 0,te.query=St,te.resourceName=void 0}return te.fragment=void 0,te}},$n={scheme:"wss",domainHost:Vn.domainHost,parse:Vn.parse,serialize:Vn.serialize},gn={},gr="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Qt="[0-9A-Fa-f]",qr=i(i("%[EFef]"+Qt+"%"+Qt+Qt+"%"+Qt+Qt)+"|"+i("%[89A-Fa-f]"+Qt+"%"+Qt+Qt)+"|"+i("%"+Qt+Qt)),Zr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",ji="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Cn=r(ji,'[\\"\\\\]'),Bi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Tr=new RegExp(gr,"g"),gs=new RegExp(qr,"g"),bp=new RegExp(r("[^]",Zr,"[\\.]",'[\\"]',Cn),"g"),ol=new RegExp(r("[^]",gr,Bi),"g"),_d=ol;function wr(oe){var te=he(oe);return te.match(Tr)?te:oe}var ki={scheme:"mailto",parse:function(te,ae){var Te=te,Se=Te.to=Te.path?Te.path.split(","):[];if(Te.path=void 0,Te.query){for(var st=!1,St={},qt=Te.query.split("&"),Pn=0,Mn=qt.length;Pn<Mn;++Pn){var pn=qt[Pn].split("=");switch(pn[0]){case"to":for(var tr=pn[1].split(","),Cr=0,Ht=tr.length;Cr<Ht;++Cr)Se.push(tr[Cr]);break;case"subject":Te.subject=Ke(pn[1],ae);break;case"body":Te.body=Ke(pn[1],ae);break;default:st=!0,St[Ke(pn[0],ae)]=Ke(pn[1],ae);break}}st&&(Te.headers=St)}Te.query=void 0;for(var nr=0,Wr=Se.length;nr<Wr;++nr){var Kn=Se[nr].split("@");if(Kn[0]=Ke(Kn[0]),ae.unicodeSupport)Kn[1]=Ke(Kn[1],ae).toLowerCase();else try{Kn[1]=ee.toASCII(Ke(Kn[1],ae).toLowerCase())}catch(Ri){Te.error=Te.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ri}Se[nr]=Kn.join("@")}return Te},serialize:function(te,ae){var Te=te,Se=a(te.to);if(Se){for(var st=0,St=Se.length;st<St;++st){var qt=String(Se[st]),Pn=qt.lastIndexOf("@"),Mn=qt.slice(0,Pn).replace(gs,wr).replace(gs,o).replace(bp,de),pn=qt.slice(Pn+1);try{pn=ae.iri?ee.toUnicode(pn):ee.toASCII(Ke(pn,ae).toLowerCase())}catch(nr){Te.error=Te.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+nr}Se[st]=Mn+"@"+pn}Te.path=Se.join(",")}var tr=te.headers=te.headers||{};te.subject&&(tr.subject=te.subject),te.body&&(tr.body=te.body);var Cr=[];for(var Ht in tr)tr[Ht]!==gn[Ht]&&Cr.push(Ht.replace(gs,wr).replace(gs,o).replace(ol,de)+"="+tr[Ht].replace(gs,wr).replace(gs,o).replace(_d,de));return Cr.length&&(Te.query=Cr.join("&")),Te}},ei=/^([^\:]+)\:(.*)/,cu={scheme:"urn",parse:function(te,ae){var Te=te.path&&te.path.match(ei),Se=te;if(Te){var st=ae.scheme||Se.scheme||"urn",St=Te[1].toLowerCase(),qt=Te[2],Pn=st+":"+(ae.nid||St),Mn=le[Pn];Se.nid=St,Se.nss=qt,Se.path=void 0,Mn&&(Se=Mn.parse(Se,ae))}else Se.error=Se.error||"URN can not be parsed.";return Se},serialize:function(te,ae){var Te=ae.scheme||te.scheme||"urn",Se=te.nid,st=Te+":"+(ae.nid||Se),St=le[st];St&&(te=St.serialize(te,ae));var qt=te,Pn=te.nss;return qt.path=(Se||ae.nid)+":"+Pn,qt}},Ra=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Na={scheme:"urn:uuid",parse:function(te,ae){var Te=te;return Te.uuid=Te.nss,Te.nss=void 0,!ae.tolerant&&(!Te.uuid||!Te.uuid.match(Ra))&&(Te.error=Te.error||"UUID is not valid."),Te},serialize:function(te,ae){var Te=te;return Te.nss=(te.uuid||"").toLowerCase(),Te}};le[yt.scheme]=yt,le[Vt.scheme]=Vt,le[Vn.scheme]=Vn,le[$n.scheme]=$n,le[ki.scheme]=ki,le[cu.scheme]=cu,le[Na.scheme]=Na,n.SCHEMES=le,n.pctEncChar=de,n.pctDecChars=he,n.parse=rt,n.removeDotSegments=qe,n.serialize=me,n.resolveComponents=ct,n.resolve=gt,n.normalize=wt,n.equal=pe,n.escapeComponent=Ie,n.unescapeComponent=Ke,Object.defineProperty(n,"__esModule",{value:!0})})})(fV,fV.exports);var IAt=fV.exports;Object.defineProperty(HQ,"__esModule",{value:!0});const hNe=IAt;hNe.code='require("ajv/dist/runtime/uri").default';HQ.default=hNe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Vf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Nn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Ek,i=yS,s=J1,o=Iu,a=Nn,u=Ao,l=As,c=vt,f=AAt,d=HQ,h=(D,z)=>new RegExp(D,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(D){var z,W,F,H,G,ee,le,de,he,ye,Ce,ve,Ye,Ue,pt,rt,be,Ae,Ve,ut,Nt,qe,me,ct,gt;const wt=D.strict,pe=(z=D.code)===null||z===void 0?void 0:z.optimize,Ie=pe===!0||pe===void 0?1:pe||0,Ke=(F=(W=D.code)===null||W===void 0?void 0:W.regExp)!==null&&F!==void 0?F:h,yt=(H=D.uriResolver)!==null&&H!==void 0?H:d.default;return{strictSchema:(ee=(G=D.strictSchema)!==null&&G!==void 0?G:wt)!==null&&ee!==void 0?ee:!0,strictNumbers:(de=(le=D.strictNumbers)!==null&&le!==void 0?le:wt)!==null&&de!==void 0?de:!0,strictTypes:(ye=(he=D.strictTypes)!==null&&he!==void 0?he:wt)!==null&&ye!==void 0?ye:"log",strictTuples:(ve=(Ce=D.strictTuples)!==null&&Ce!==void 0?Ce:wt)!==null&&ve!==void 0?ve:"log",strictRequired:(Ue=(Ye=D.strictRequired)!==null&&Ye!==void 0?Ye:wt)!==null&&Ue!==void 0?Ue:!1,code:D.code?{...D.code,optimize:Ie,regExp:Ke}:{optimize:Ie,regExp:Ke},loopRequired:(pt=D.loopRequired)!==null&&pt!==void 0?pt:v,loopEnum:(rt=D.loopEnum)!==null&&rt!==void 0?rt:v,meta:(be=D.meta)!==null&&be!==void 0?be:!0,messages:(Ae=D.messages)!==null&&Ae!==void 0?Ae:!0,inlineRefs:(Ve=D.inlineRefs)!==null&&Ve!==void 0?Ve:!0,schemaId:(ut=D.schemaId)!==null&&ut!==void 0?ut:"$id",addUsedSchema:(Nt=D.addUsedSchema)!==null&&Nt!==void 0?Nt:!0,validateSchema:(qe=D.validateSchema)!==null&&qe!==void 0?qe:!0,validateFormats:(me=D.validateFormats)!==null&&me!==void 0?me:!0,unicodeRegExp:(ct=D.unicodeRegExp)!==null&&ct!==void 0?ct:!0,int32range:(gt=D.int32range)!==null&&gt!==void 0?gt:!0,uriResolver:yt}}class _{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,...b(z)};const{es5:W,lines:F}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:F}),this.logger=$(z.logger);const H=z.validateFormats;z.validateFormats=!1,this.RULES=(0,s.getRules)(),x.call(this,g,z,"NOT SUPPORTED"),x.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=k.call(this),z.formats&&T.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&A.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),E.call(this),z.validateFormats=H}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:W,schemaId:F}=this.opts;let H=f;F==="id"&&(H={...f},H.id=H.$id,delete H.$id),W&&z&&this.addMetaSchema(H,H[F],!1)}defaultMeta(){const{meta:z,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[W]||z:void 0}validate(z,W){let F;if(typeof z=="string"){if(F=this.getSchema(z),!F)throw new Error(`no schema with key or ref "${z}"`)}else F=this.compile(z);const H=F(W);return"$async"in F||(this.errors=F.errors),H}compile(z,W){const F=this._addSchema(z,W);return F.validate||this._compileSchemaEnv(F)}compileAsync(z,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:F}=this.opts;return H.call(this,z,W);async function H(ye,Ce){await G.call(this,ye.$schema);const ve=this._addSchema(ye,Ce);return ve.validate||ee.call(this,ve)}async function G(ye){ye&&!this.getSchema(ye)&&await H.call(this,{$ref:ye},!0)}async function ee(ye){try{return this._compileSchemaEnv(ye)}catch(Ce){if(!(Ce instanceof i.default))throw Ce;return le.call(this,Ce),await de.call(this,Ce.missingSchema),ee.call(this,ye)}}function le({missingSchema:ye,missingRef:Ce}){if(this.refs[ye])throw new Error(`AnySchema ${ye} is loaded but ${Ce} cannot be resolved`)}async function de(ye){const Ce=await he.call(this,ye);this.refs[ye]||await G.call(this,Ce.$schema),this.refs[ye]||this.addSchema(Ce,ye,W)}async function he(ye){const Ce=this._loading[ye];if(Ce)return Ce;try{return await(this._loading[ye]=F(ye))}finally{delete this._loading[ye]}}}addSchema(z,W,F,H=this.opts.validateSchema){if(Array.isArray(z)){for(const ee of z)this.addSchema(ee,void 0,F,H);return this}let G;if(typeof z=="object"){const{schemaId:ee}=this.opts;if(G=z[ee],G!==void 0&&typeof G!="string")throw new Error(`schema ${ee} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(z,F,W,H,!0),this}addMetaSchema(z,W,F=this.opts.validateSchema){return this.addSchema(z,W,!0,F),this}validateSchema(z,W){if(typeof z=="boolean")return!0;let F;if(F=z.$schema,F!==void 0&&typeof F!="string")throw new Error("$schema must be a string");if(F=F||this.opts.defaultMeta||this.defaultMeta(),!F)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const H=this.validate(F,z);if(!H&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return H}getSchema(z){let W;for(;typeof(W=S.call(this,z))=="string";)z=W;if(W===void 0){const{schemaId:F}=this.opts,H=new o.SchemaEnv({schema:{},schemaId:F});if(W=o.resolveSchema.call(this,H,z),!W)return;this.refs[z]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=S.call(this,z);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const W=z;this._cache.delete(W);let F=z[this.opts.schemaId];return F&&(F=(0,u.normalizeId)(F),delete this.schemas[F],delete this.refs[F]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const W of z)this.addKeyword(W);return this}addKeyword(z,W){let F;if(typeof z=="string")F=z,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=F);else if(typeof z=="object"&&W===void 0){if(W=z,F=W.keyword,Array.isArray(F)&&!F.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(O.call(this,F,W),!W)return(0,c.eachItem)(F,G=>M.call(this,G)),this;B.call(this,W);const H={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(F,H.type.length===0?G=>M.call(this,G,H):G=>H.type.forEach(ee=>M.call(this,G,H,ee))),this}getKeyword(z){const W=this.RULES.all[z];return typeof W=="object"?W.definition:!!W}removeKeyword(z){const{RULES:W}=this;delete W.keywords[z],delete W.all[z];for(const F of W.rules){const H=F.rules.findIndex(G=>G.keyword===z);H>=0&&F.rules.splice(H,1)}return this}addFormat(z,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[z]=W,this}errorsText(z=this.errors,{separator:W=", ",dataVar:F="data"}={}){return!z||z.length===0?"No errors":z.map(H=>`${F}${H.instancePath} ${H.message}`).reduce((H,G)=>H+W+G)}$dataMetaSchema(z,W){const F=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const H of W){const G=H.split("/").slice(1);let ee=z;for(const le of G)ee=ee[le];for(const le in F){const de=F[le];if(typeof de!="object")continue;const{$data:he}=de.definition,ye=ee[le];he&&ye&&(ee[le]=V(ye))}}return z}_removeAllSchemas(z,W){for(const F in z){const H=z[F];(!W||W.test(F))&&(typeof H=="string"?delete z[F]:H&&!H.meta&&(this._cache.delete(H.schema),delete z[F]))}}_addSchema(z,W,F,H=this.opts.validateSchema,G=this.opts.addUsedSchema){let ee;const{schemaId:le}=this.opts;if(typeof z=="object")ee=z[le];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let de=this._cache.get(z);if(de!==void 0)return de;F=(0,u.normalizeId)(ee||F);const he=u.getSchemaRefs.call(this,z,F);return de=new o.SchemaEnv({schema:z,schemaId:le,meta:W,baseId:F,localRefs:he}),this._cache.set(de.schema,de),G&&!F.startsWith("#")&&(F&&this._checkUnique(F),this.refs[F]=de),H&&this.validateSchema(z,!0),de}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):o.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,z)}finally{this.opts=W}}}_.ValidationError=r.default,_.MissingRefError=i.default,e.default=_;function x(D,z,W,F="error"){for(const H in D){const G=H;G in z&&this.logger[F](`${W}: option ${H}. ${D[G]}`)}}function S(D){return D=(0,u.normalizeId)(D),this.schemas[D]||this.refs[D]}function E(){const D=this.opts.schemas;if(D)if(Array.isArray(D))this.addSchema(D);else for(const z in D)this.addSchema(D[z],z)}function T(){for(const D in this.opts.formats){const z=this.opts.formats[D];z&&this.addFormat(D,z)}}function A(D){if(Array.isArray(D)){this.addVocabulary(D);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in D){const W=D[z];W.keyword||(W.keyword=z),this.addKeyword(W)}}function k(){const D={...this.opts};for(const z of p)delete D[z];return D}const R={log(){},warn(){},error(){}};function $(D){if(D===!1)return R;if(D===void 0)return console;if(D.log&&D.warn&&D.error)return D;throw new Error("logger must implement log, warn and error methods")}const P=/^[a-z_$][a-z0-9_$:-]*$/i;function O(D,z){const{RULES:W}=this;if((0,c.eachItem)(D,F=>{if(W.keywords[F])throw new Error(`Keyword ${F} is already defined`);if(!P.test(F))throw new Error(`Keyword ${F} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function M(D,z,W){var F;const H=z==null?void 0:z.post;if(W&&H)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let ee=H?G.post:G.rules.find(({type:de})=>de===W);if(ee||(ee={type:W,rules:[]},G.rules.push(ee)),G.keywords[D]=!0,!z)return;const le={keyword:D,definition:{...z,type:(0,l.getJSONTypes)(z.type),schemaType:(0,l.getJSONTypes)(z.schemaType)}};z.before?j.call(this,ee,le,z.before):ee.rules.push(le),G.all[D]=le,(F=z.implements)===null||F===void 0||F.forEach(de=>this.addKeyword(de))}function j(D,z,W){const F=D.rules.findIndex(H=>H.keyword===W);F>=0?D.rules.splice(F,0,z):(D.rules.push(z),this.logger.warn(`rule ${W} is not defined`))}function B(D){let{metaSchema:z}=D;z!==void 0&&(D.$data&&this.opts.$data&&(z=V(z)),D.validateSchema=this.compile(z,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function V(D){return{anyOf:[D,U]}}})($Re);var qQ={},WQ={},GQ={};Object.defineProperty(GQ,"__esModule",{value:!0});const kAt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};GQ.default=kAt;var Z1={};Object.defineProperty(Z1,"__esModule",{value:!0});Z1.callRef=Z1.getValidate=void 0;const RAt=yS,ade=kn,vu=Nn,C_=ap,ude=Iu,NN=vt,NAt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=ude.resolveRef.call(u,l,i,n);if(c===void 0)throw new RAt.default(r.opts.uriResolver,i,n);if(c instanceof ude.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return fO(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return fO(e,(0,vu._)`${p}.validate`,l,l.$async)}function d(p){const m=pNe(e,p);fO(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,vu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:vu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function pNe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,vu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}Z1.getValidate=pNe;function fO(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?C_.default.this:vu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,vu._)`await ${(0,ade.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,vu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,ade.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,vu._)`${p}.errors`;i.assign(C_.default.vErrors,(0,vu._)`${C_.default.vErrors} === null ? ${m} : ${C_.default.vErrors}.concat(${m})`),i.assign(C_.default.errors,(0,vu._)`${C_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=NN.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,vu._)`${p}.evaluated.props`);s.props=NN.mergeEvaluated.props(i,y,s.props,vu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=NN.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,vu._)`${p}.evaluated.items`);s.items=NN.mergeEvaluated.items(i,y,s.items,vu.Name)}}}Z1.callRef=fO;Z1.default=NAt;Object.defineProperty(WQ,"__esModule",{value:!0});const PAt=GQ,OAt=Z1,DAt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",PAt.default,OAt.default];WQ.default=DAt;var YQ={},KQ={};Object.defineProperty(KQ,"__esModule",{value:!0});const c$=Nn,xg=c$.operators,f$={maximum:{okStr:"<=",ok:xg.LTE,fail:xg.GT},minimum:{okStr:">=",ok:xg.GTE,fail:xg.LT},exclusiveMaximum:{okStr:"<",ok:xg.LT,fail:xg.GTE},exclusiveMinimum:{okStr:">",ok:xg.GT,fail:xg.LTE}},$At={message:({keyword:e,schemaCode:t})=>(0,c$.str)`must be ${f$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,c$._)`{comparison: ${f$[e].okStr}, limit: ${t}}`},MAt={keyword:Object.keys(f$),type:"number",schemaType:"number",$data:!0,error:$At,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,c$._)`${n} ${f$[t].fail} ${r} || isNaN(${n})`)}};KQ.default=MAt;var XQ={};Object.defineProperty(XQ,"__esModule",{value:!0});const b2=Nn,LAt={message:({schemaCode:e})=>(0,b2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,b2._)`{multipleOf: ${e}}`},FAt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:LAt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,b2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,b2._)`${o} !== parseInt(${o})`;e.fail$data((0,b2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};XQ.default=FAt;var QQ={},JQ={};Object.defineProperty(JQ,"__esModule",{value:!0});function mNe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}JQ.default=mNe;mNe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(QQ,"__esModule",{value:!0});const zv=Nn,jAt=vt,BAt=JQ,UAt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,zv.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,zv._)`{limit: ${e}}`},zAt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:UAt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?zv.operators.GT:zv.operators.LT,o=i.opts.unicode===!1?(0,zv._)`${n}.length`:(0,zv._)`${(0,jAt.useFunc)(e.gen,BAt.default)}(${n})`;e.fail$data((0,zv._)`${o} ${s} ${r}`)}};QQ.default=zAt;var ZQ={};Object.defineProperty(ZQ,"__esModule",{value:!0});const VAt=kn,d$=Nn,HAt={message:({schemaCode:e})=>(0,d$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,d$._)`{pattern: ${e}}`},qAt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:HAt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,d$._)`(new RegExp(${i}, ${o}))`:(0,VAt.usePattern)(e,r);e.fail$data((0,d$._)`!${a}.test(${t})`)}};ZQ.default=qAt;var eJ={};Object.defineProperty(eJ,"__esModule",{value:!0});const _2=Nn,WAt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,_2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,_2._)`{limit: ${e}}`},GAt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:WAt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?_2.operators.GT:_2.operators.LT;e.fail$data((0,_2._)`Object.keys(${n}).length ${i} ${r}`)}};eJ.default=GAt;var tJ={};Object.defineProperty(tJ,"__esModule",{value:!0});const TT=kn,w2=Nn,YAt=vt,KAt={message:({params:{missingProperty:e}})=>(0,w2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,w2._)`{missingProperty: ${e}}`},XAt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:KAt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,YAt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(w2.nil,f);else for(const h of n)(0,TT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,TT.checkMissingProp)(e,n,h)),(0,TT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,TT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,TT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,w2.not)(p),()=>{e.error(),t.break()})},w2.nil)}}};tJ.default=XAt;var nJ={};Object.defineProperty(nJ,"__esModule",{value:!0});const E2=Nn,QAt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,E2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,E2._)`{limit: ${e}}`},JAt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:QAt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?E2.operators.GT:E2.operators.LT;e.fail$data((0,E2._)`${n}.length ${i} ${r}`)}};nJ.default=JAt;var rJ={},xk={};Object.defineProperty(xk,"__esModule",{value:!0});const gNe=BQ;gNe.code='require("ajv/dist/runtime/equal").default';xk.default=gNe;Object.defineProperty(rJ,"__esModule",{value:!0});const yj=As,_o=Nn,ZAt=vt,eIt=xk,tIt={message:({params:{i:e,j:t}})=>(0,_o.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,_o._)`{i: ${e}, j: ${t}}`},nIt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:tIt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,yj.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,_o._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,_o._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,_o._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,yj.checkDataTypes)(l,g,a.opts.strictNumbers,yj.DataType.Wrong),v=t.const("indices",(0,_o._)`{}`);t.for((0,_o._)`;${p}--;`,()=>{t.let(g,(0,_o._)`${n}[${p}]`),t.if(y,(0,_o._)`continue`),l.length>1&&t.if((0,_o._)`typeof ${g} == "string"`,(0,_o._)`${g} += "_"`),t.if((0,_o._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,_o._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,_o._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,ZAt.useFunc)(t,eIt.default),y=t.name("outer");t.label(y).for((0,_o._)`;${p}--;`,()=>t.for((0,_o._)`${m} = ${p}; ${m}--;`,()=>t.if((0,_o._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};rJ.default=nIt;var iJ={};Object.defineProperty(iJ,"__esModule",{value:!0});const dV=Nn,rIt=vt,iIt=xk,sIt={message:"must be equal to constant",params:({schemaCode:e})=>(0,dV._)`{allowedValue: ${e}}`},oIt={keyword:"const",$data:!0,error:sIt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,dV._)`!${(0,rIt.useFunc)(t,iIt.default)}(${n}, ${i})`):e.fail((0,dV._)`${s} !== ${n}`)}};iJ.default=oIt;var sJ={};Object.defineProperty(sJ,"__esModule",{value:!0});const wC=Nn,aIt=vt,uIt=xk,lIt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,wC._)`{allowedValues: ${e}}`},cIt={keyword:"enum",schemaType:"array",$data:!0,error:lIt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,aIt.useFunc)(t,uIt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,wC.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,wC._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,wC._)`${l()}(${n}, ${h}[${p}])`:(0,wC._)`${n} === ${m}`}}};sJ.default=cIt;Object.defineProperty(YQ,"__esModule",{value:!0});const fIt=KQ,dIt=XQ,hIt=QQ,pIt=ZQ,mIt=eJ,gIt=tJ,yIt=nJ,vIt=rJ,bIt=iJ,_It=sJ,wIt=[fIt.default,dIt.default,hIt.default,pIt.default,mIt.default,gIt.default,yIt.default,vIt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},bIt.default,_It.default];YQ.default=wIt;var oJ={},vS={};Object.defineProperty(vS,"__esModule",{value:!0});vS.validateAdditionalItems=void 0;const Vv=Nn,hV=vt,EIt={message:({params:{len:e}})=>(0,Vv.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Vv._)`{limit: ${e}}`},xIt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:EIt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,hV.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}yNe(e,r)}};function yNe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Vv._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Vv._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,hV.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Vv._)`${a} <= ${t.length}`);n.if((0,Vv.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:hV.Type.Num},l),o.allErrors||n.if((0,Vv.not)(l),()=>n.break())})}}vS.validateAdditionalItems=yNe;vS.default=xIt;var aJ={},bS={};Object.defineProperty(bS,"__esModule",{value:!0});bS.validateTuple=void 0;const lde=Nn,dO=vt,SIt=kn,TIt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return vNe(e,"additionalItems",t);n.items=!0,!(0,dO.alwaysValidSchema)(n,t)&&e.ok((0,SIt.validateArray)(e))}};function vNe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=dO.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,lde._)`${s}.length`);n.forEach((f,d)=>{(0,dO.alwaysValidSchema)(a,f)||(r.if((0,lde._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,dO.checkStrictMode)(a,g,d.strictTuples)}}}bS.validateTuple=vNe;bS.default=TIt;Object.defineProperty(aJ,"__esModule",{value:!0});const CIt=bS,AIt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,CIt.validateTuple)(e,"items")};aJ.default=AIt;var uJ={};Object.defineProperty(uJ,"__esModule",{value:!0});const cde=Nn,IIt=vt,kIt=kn,RIt=vS,NIt={message:({params:{len:e}})=>(0,cde.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,cde._)`{limit: ${e}}`},PIt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:NIt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,IIt.alwaysValidSchema)(r,t)&&(i?(0,RIt.validateAdditionalItems)(e,i):e.ok((0,kIt.validateArray)(e)))}};uJ.default=PIt;var lJ={};Object.defineProperty(lJ,"__esModule",{value:!0});const ac=Nn,PN=vt,OIt={message:({params:{min:e,max:t}})=>t===void 0?(0,ac.str)`must contain at least ${e} valid item(s)`:(0,ac.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,ac._)`{minContains: ${e}}`:(0,ac._)`{minContains: ${e}, maxContains: ${t}}`},DIt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:OIt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,ac._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,PN.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,PN.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,PN.alwaysValidSchema)(s,n)){let m=(0,ac._)`${c} >= ${o}`;a!==void 0&&(m=(0,ac._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,ac._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:PN.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,ac._)`${m}++`),a===void 0?t.if((0,ac._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,ac._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,ac._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};lJ.default=DIt;var bNe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Nn,n=vt,r=kn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(bNe);var cJ={};Object.defineProperty(cJ,"__esModule",{value:!0});const _Ne=Nn,$It=vt,MIt={message:"property name must be valid",params:({params:e})=>(0,_Ne._)`{propertyName: ${e.propertyName}}`},LIt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:MIt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,$It.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,_Ne.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};cJ.default=LIt;var v4={};Object.defineProperty(v4,"__esModule",{value:!0});const ON=kn,hf=Nn,FIt=ap,DN=vt,jIt={message:"must NOT have additional properties",params:({params:e})=>(0,hf._)`{additionalProperty: ${e.additionalProperty}}`},BIt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:jIt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,DN.alwaysValidSchema)(o,n))return;const l=(0,ON.allSchemaProperties)(r.properties),c=(0,ON.allSchemaProperties)(r.patternProperties);f(),e.ok((0,hf._)`${s} === ${FIt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,DN.schemaRefOrVal)(o,r.properties,"properties");y=(0,ON.isOwnProperty)(t,v,g)}else l.length?y=(0,hf.or)(...l.map(v=>(0,hf._)`${g} === ${v}`)):y=hf.nil;return c.length&&(y=(0,hf.or)(y,...c.map(v=>(0,hf._)`${(0,ON.usePattern)(e,v)}.test(${g})`))),(0,hf.not)(y)}function h(g){t.code((0,hf._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,DN.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,hf.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,hf.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:DN.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};v4.default=BIt;var fJ={};Object.defineProperty(fJ,"__esModule",{value:!0});const UIt=Vf,fde=kn,vj=vt,dde=v4,zIt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&dde.default.code(new UIt.KeywordCxt(s,dde.default,"additionalProperties"));const o=(0,fde.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=vj.mergeEvaluated.props(t,(0,vj.toHash)(o),s.props));const a=o.filter(f=>!(0,vj.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,fde.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};fJ.default=zIt;var dJ={};Object.defineProperty(dJ,"__esModule",{value:!0});const hde=kn,$N=Nn,pde=vt,mde=vt,VIt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,hde.allSchemaProperties)(n),u=a.filter(m=>(0,pde.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof $N.Name)&&(s.props=(0,mde.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,pde.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,$N._)`${(0,hde.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:mde.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,$N._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,$N.not)(c),()=>t.break())})})}}};dJ.default=VIt;var hJ={};Object.defineProperty(hJ,"__esModule",{value:!0});const HIt=vt,qIt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,HIt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};hJ.default=qIt;var pJ={};Object.defineProperty(pJ,"__esModule",{value:!0});const WIt=kn,GIt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:WIt.validateUnion,error:{message:"must match a schema in anyOf"}};pJ.default=GIt;var mJ={};Object.defineProperty(mJ,"__esModule",{value:!0});const hO=Nn,YIt=vt,KIt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,hO._)`{passingSchemas: ${e.passing}}`},XIt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:KIt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,YIt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,hO._)`${u} && ${o}`).assign(o,!1).assign(a,(0,hO._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,hO.Name)})})}}};mJ.default=XIt;var gJ={};Object.defineProperty(gJ,"__esModule",{value:!0});const QIt=vt,JIt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,QIt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};gJ.default=JIt;var yJ={};Object.defineProperty(yJ,"__esModule",{value:!0});const h$=Nn,wNe=vt,ZIt={message:({params:e})=>(0,h$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,h$._)`{failingKeyword: ${e.ifClause}}`},ekt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:ZIt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,wNe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=gde(r,"then"),s=gde(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,h$.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,h$._)`${c}`):e.setParams({ifClause:c})}}}};function gde(e,t){const n=e.schema[t];return n!==void 0&&!(0,wNe.alwaysValidSchema)(e,n)}yJ.default=ekt;var vJ={};Object.defineProperty(vJ,"__esModule",{value:!0});const tkt=vt,nkt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,tkt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};vJ.default=nkt;Object.defineProperty(oJ,"__esModule",{value:!0});const rkt=vS,ikt=aJ,skt=bS,okt=uJ,akt=lJ,ukt=bNe,lkt=cJ,ckt=v4,fkt=fJ,dkt=dJ,hkt=hJ,pkt=pJ,mkt=mJ,gkt=gJ,ykt=yJ,vkt=vJ;function bkt(e=!1){const t=[hkt.default,pkt.default,mkt.default,gkt.default,ykt.default,vkt.default,lkt.default,ckt.default,ukt.default,fkt.default,dkt.default];return e?t.push(ikt.default,okt.default):t.push(rkt.default,skt.default),t.push(akt.default),t}oJ.default=bkt;var bJ={},_J={};Object.defineProperty(_J,"__esModule",{value:!0});const os=Nn,_kt={message:({schemaCode:e})=>(0,os.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,os._)`{format: ${e}}`},wkt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:_kt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,os._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,os._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,os._)`${m}.type || "string"`).assign(y,(0,os._)`${m}.validate`),()=>n.assign(g,(0,os._)`"string"`).assign(y,m)),e.fail$data((0,os.or)(v(),b()));function v(){return u.strictSchema===!1?os.nil:(0,os._)`${o} && !${y}`}function b(){const _=c.$async?(0,os._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,os._)`${y}(${r})`,x=(0,os._)`(typeof ${y} == "function" ? ${_} : ${y}.test(${r}))`;return(0,os._)`${y} && ${y} !== true && ${g} === ${t} && !${x}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(_());function v(){if(u.strictSchema===!1){f.logger.warn(x());return}throw new Error(x());function x(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(x){const S=x instanceof RegExp?(0,os.regexpCode)(x):u.code.formats?(0,os._)`${u.code.formats}${(0,os.getProperty)(s)}`:void 0,E=n.scopeValue("formats",{key:s,ref:x,code:S});return typeof x=="object"&&!(x instanceof RegExp)?[x.type||"string",x.validate,(0,os._)`${E}.validate`]:["string",x,E]}function _(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,os._)`await ${y}(${r})`}return typeof g=="function"?(0,os._)`${y}(${r})`:(0,os._)`${y}.test(${r})`}}}};_J.default=wkt;Object.defineProperty(bJ,"__esModule",{value:!0});const Ekt=_J,xkt=[Ekt.default];bJ.default=xkt;var XE={};Object.defineProperty(XE,"__esModule",{value:!0});XE.contentVocabulary=XE.metadataVocabulary=void 0;XE.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];XE.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(qQ,"__esModule",{value:!0});const Skt=WQ,Tkt=YQ,Ckt=oJ,Akt=bJ,yde=XE,Ikt=[Skt.default,Tkt.default,(0,Ckt.default)(),Akt.default,yde.metadataVocabulary,yde.contentVocabulary];qQ.default=Ikt;var wJ={},b4={};Object.defineProperty(b4,"__esModule",{value:!0});b4.DiscrError=void 0;var vde;(function(e){e.Tag="tag",e.Mapping="mapping"})(vde||(b4.DiscrError=vde={}));Object.defineProperty(wJ,"__esModule",{value:!0});const W_=Nn,pV=b4,bde=Iu,kkt=yS,Rkt=vt,Nkt={message:({params:{discrError:e,tagName:t}})=>e===pV.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,W_._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},Pkt={keyword:"discriminator",type:"object",schemaType:"object",error:Nkt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,W_._)`${n}${(0,W_.getProperty)(a)}`);t.if((0,W_._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:pV.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,W_._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:pV.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,W_.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let _=0;_<o.length;_++){let x=o[_];if(x!=null&&x.$ref&&!(0,Rkt.schemaHasRulesButRef)(x,s.self.RULES)){const E=x.$ref;if(x=bde.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,E),x instanceof bde.SchemaEnv&&(x=x.schema),x===void 0)throw new kkt.default(s.opts.uriResolver,s.baseId,E)}const S=(h=x==null?void 0:x.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(x)),v(S,_)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:_}){return Array.isArray(_)&&_.includes(a)}function v(_,x){if(_.const)b(_.const,x);else if(_.enum)for(const S of _.enum)b(S,x);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(_,x){if(typeof _!="string"||_ in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[_]=x}}}};wJ.default=Pkt;const Okt="http://json-schema.org/draft-07/schema#",Dkt="http://json-schema.org/draft-07/schema#",$kt="Core schema meta-schema",Mkt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Lkt=["object","boolean"],Fkt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},jkt={$schema:Okt,$id:Dkt,title:$kt,definitions:Mkt,type:Lkt,properties:Fkt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=$Re,r=qQ,i=wJ,s=jkt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Vf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Nn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=Ek;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=yS;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(oV,oV.exports);var Bkt=oV.exports;const ENe=Ho(Bkt),Ukt="#/definitions/StudyConfig",zkt="http://json-schema.org/draft-07/schema#",Vkt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js {   "type": "markdown",   "path": "<study-name>/assets/question.md",   "response": [     {       "id": "response1",       "prompt": "What is 2 + 2?",       "required": true,       "location": "belowStimulus",       "type": "numerical"     }   ]   "correctAnswer": [{     "id": "response1",     "answer": 4   }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},CheckboxResponse:{additionalProperties:!1,description:"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed as checkboxes.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"checkbox",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js {  "order": "random",  "components": [    "component1",    "component2",    "component3"  ] }\n\nThis snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [  ["component2", "component3", "component1"],  ["component1", "component3", "component2"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2", "component3"],  ["component2", "component3", "component1"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2"],  ["component2", "component3"],  ["component3", "component1"],  ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](./Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "check": "block",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "firstLocation": 2,      "spacing": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"dropdown",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"iframe",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js {   "type": "image",   "path": "<study-name>/assets/image.jpg",   "style": {     "maxWidth": "50%"   } }',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "responses",      "to": "end"    }  ]  ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "response",      "responseId": "attentionCheckResponse",      "value": "the right answer",      "to": "end"    }  ]  ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the preset. For example, preset: 5 will render 5 radio buttons, and preset: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.",properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},preset:{description:"The number of options to render.",type:"number"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},type:{const:"likert",type:"string"}},required:["id","location","preset","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"longText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js {   "type": "markdown",   "path": "<study-name>/assets/help.md",   "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumericalResponse:{additionalProperties:!1,description:"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"numerical",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},Option:{additionalProperties:!1,description:"The Option interface is used to define the options for a dropdown, slider, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file. The Option interface is used in the Response interface.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:["string","number"]}},required:["label","value"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js {  "type": "questionnaire",  "response": [    {      "id": "gender",      "prompt": "Gender:",      "required": true,      "location": "belowStimulus",      "type": "checkbox",      "options": [        {          "label": "Man",          "value": "Man"        },        {          "label": "Woman",          "value": "Woman"        },        {          "label": "Genderqueer",          "value": "Genderqueer"        },        {          "label": "Third-gender",          "value": "Third-gender"        },        ... etc.      ]    }  ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:"The RadioResponse interface is used to define the properties of a radio response. RadioResponses render as a radio input with user specified options, and optionally left and right labels.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{type:"string"},type:{const:"radio",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "spacing": "random",      "numInterruptions": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } ```\n\nThe resulting sequence array could be:\n\n```js [  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6],  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6],  ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6],  ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types. ```ts {  parameters: T;  setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ``` parameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js {  type: 'react-component';  path: 'my_study/CoolComponent.tsx';  parameters: {    name: 'Zach';    age: 26;  } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) {    // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0-beta10/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0-beta10/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](./ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "repeatedComponent",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"shortText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"This define the steps in the slider and the extent of the slider.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"slider",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0-beta10/src/parser/StudyConfigSchema.json",  "studyMetadata": {    ...  },  "uiConfig": {    ...  },  "components": {    ...  },  "sequence": {    ...  } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"}]},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\nUsing baseComponents:\n\n```js "baseComponents": { "my-image-component": {   "instructionLocation": "sidebar",   "nextButtonLocation": "sidebar",   "path": "<study-name>/assets/my-image.jpg",   "response": [       {           "id": "my-image-id",           "options": [               {                   "label": "Europe",                   "value": "Europe"               },               {                   "label": "Japan",                   "value": "Japan"               },               {                   "label": "USA",                   "value": "USA"               }           ],           "prompt": "Your Selected Answer:",           "type": "dropdown"       }   ],   "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": {   "baseComponent": "my-image-component",   "description": "Choosing section with largest GDP",   "instruction": "Which region has the largest GDP?" }, "q2": {   "baseComponent": "my-image-component",   "description": "Choosing section with lowest GDP",   "instruction": "Which region has the lowest GDP?" }, "q3": {   "baseComponent": "my-image-component",   "description": "Choosing section with highest exports of Wheat",   "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},recordStudyAudio:{type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},tasksToNotRecordAudio:{items:{type:"string"},type:"array"},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. This data is also included in the data file that is downloaded at the end of the study, to help identify the study and version. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : {  "title": "My New Study",  "version": "pilot",  "authors": [    "Jane Doe",    "John Doe"  ],  "date": "2024-04-01",  "description": "This study is meant to test your patience.",  "organizations": [    "The reVISit Team",    "The Other Team"  ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study, shown on the landing page and attached to participant data. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration ```js uiConfig:{  "contactEmail": "test@test.com",  "helpTextPath": "<study-name>/assets/help.md",  "logoPath": "<study-name>/assets/logo.jpg",  "withProgressBar": true,  "autoDownloadStudy": true  "autoDownloadTime": 5000,  "studyEndMsg": "Thank you for completing this study. You\'re the best!",  "sidebar": true,  "windowEventDebounceTime": 500,  "urlParticipantIdParam": "PROLIFIC_ID",  "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js {  "type": "website",  "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js {  "type": "website",  "path": "<study-name>/website.html",  "parameters": {    "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3]  }  "response": [    {      "id": "barChart",      "prompt": "Your selected answer:",      "required": true,      "location": "belowStimulus",      "type": "iframe"    }  ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script>  Revisit.onDataReceive((data) => {    const barData = data[\'barData\'];    ...  });\n\n // Call out that \'barChart\' needs to match ID in \'response\' object  Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js  const trrack = initializeTrrack({      initialState,      registry  });\n\n ...  Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},Hkt={$ref:Ukt,$schema:zkt,definitions:Vkt},qkt="#/definitions/GlobalConfig",Wkt="http://json-schema.org/draft-07/schema#",Gkt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},adminUsers:{description:"A required property listing out the emails of users who require admin access.",items:{type:"string"},type:"array"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList","adminUsers"],type:"object"}},Ykt={$ref:qkt,$schema:Wkt,definitions:Gkt},xNe=new ENe;xNe.addSchema(Ykt);const _de=xNe.getSchema("#/definitions/GlobalConfig"),SNe=new ENe;SNe.addSchema(Hkt);const wde=SNe.getSchema("#/definitions/StudyConfig");function Kkt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function _4(e){return e.baseComponent!==void 0}function Xkt(e){const t=PQ.parse(e),n=_de(t),r=Kkt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[..._de.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function Qkt(e){const t=[];return[Object.values(e.components).every(r=>{var i;return _4(r)?!!((i=e.baseComponents)!=null&&i[r.baseComponent]):!0}),t]}function TNe(e,t){const n=PQ.parse(e),r=wde(n),i=Qkt(n);if(r&&i[0])return n;const s=[...wde.errors||[]];return console.error(`${t} parsing errors`,s),{...n,errors:s}}function CNe(){const e=np(),{setAlertModal:t}=Ml(),n=Dc();I.useEffect(()=>{(new URLSearchParams(window.location.search).get("admin")||"f")==="t"||(window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))})},[e,t,n])}const Ede=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta"],xde=["participantId","trialId","trialOrder","responseId"];function EJ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function Jkt(e,t,n){const r=(Object.entries(e.answers).length/(Cc(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=t.components[o],l=_4(u)&&u.baseComponent&&t.baseComponents?sK({},t.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(n.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),n.includes("percentComplete")&&(p.percentComplete=r),n.includes("description")&&(p.description=l.description),n.includes("instruction")&&(p.instruction=l.instruction),n.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),n.includes("answer")&&(p.answer=h),n.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return n.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),n.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),n.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),n.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),n.includes("duration")&&(p.duration=c),n.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}function Zkt({opened:e,close:t,filename:n,studyConfig:r,data:i}){const[s,o]=I.useState([...Ede].filter(c=>c!=="meta")),a=I.useMemo(()=>{const c=[...xde,...s],f=c,d=i.map(h=>Jkt(h,r,c)).flat().sort((h,p)=>h!==p?h.participantId.localeCompare(p.participantId):h.trialOrder-p.trialOrder);return{header:f,rows:d}},[i,s,r]),u=I.useCallback(()=>{const c=[a.header.join(","),...a.rows.map(f=>a.header.map(d=>f[d]).join(","))].join(`
`);EJ(c,n)},[n,a.header,a.rows]),l=I.useMemo(()=>{const c=a.rows.length>5?5:a.rows.length,f=c===1?"":"s";return`This is a preview of the first ${f?c:""} row${f} of the CSV. The full CSV contains ${a.rows.length} row${f}.`},[a.rows]);return w.jsxs(Oo,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[w.jsx(HG,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Ede],value:s,onChange:c=>o(c),label:"Included optional columns:",leftSection:w.jsx(fQe,{}),variant:"filled"}),w.jsx(b1,{h:"md"}),w.jsx(Ne,{mih:300,style:{width:"100%",overflow:"scroll"},children:w.jsxs(Gl,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[w.jsx("thead",{children:w.jsx("tr",{children:a.header.map(c=>w.jsx("th",{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(c)?200:void 0},children:w.jsxs(ii,{direction:"row",justify:"space-between",align:"center",children:[c,!xde.includes(c)&&w.jsx(Tm,{onClick:()=>o(s.filter(f=>f!==c)),style:{marginBottom:-3,marginLeft:8},children:w.jsx(Pwe,{size:16})})]})},c))})}),w.jsx("tbody",{children:a.rows.slice(0,5).map((c,f)=>w.jsx("tr",{children:a.header.map(d=>w.jsx("td",{style:{whiteSpace:["description","instruction","participantId"].includes(d)?"normal":"nowrap"},children:c[d]},`${f}-${d}`))},f))})]})}),w.jsx(b1,{h:"sm"}),w.jsx(ii,{justify:"center",fz:"sm",c:"dimmed",children:w.jsx(xt,{children:l})}),w.jsx(b1,{h:"md"}),w.jsxs(Zn,{justify:"right",children:[w.jsx(sr,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),w.jsx(sr,{leftSection:w.jsx(Nwe,{}),onClick:()=>u(),"data-autofocus":!0,children:"Download"})]})]})}function ANe(){const e=jm(),{storageEngine:t}=lo(),{answers:n}=Uo(m=>m),[r,i]=I.useState(!1);I.useEffect(()=>{const m=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(m))},1e3)},[]),CNe();const[s,o]=I.useState(),[a,u]=I.useState(""),l=e.studyMetadata.title.replace(" ","_");I.useEffect(()=>{async function m(){if(t){const g=await t.getCurrentParticipantId(),y=await t.getParticipantData();u(g),o(y)}}m()},[t]);const c=I.useCallback(async()=>{EJ(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=I.useState(Math.floor(d/1e3));return I.useEffect(()=>{if(r){const m=setInterval(()=>{p(g=>g-1)},1e3);return h<=0?(f&&c(),clearInterval(m),()=>clearInterval(m)):()=>clearInterval(m)}return()=>{}},[f,r,h,c]),w.jsx(Bo,{style:{height:"100%"},children:w.jsx(ii,{direction:"column",children:r?w.jsx(xt,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?w.jsx(Qa,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):w.jsxs(w.Fragment,{children:[w.jsx(xt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),w.jsx(b1,{h:"lg"}),w.jsx(Bo,{children:w.jsx(Oc,{color:"blue"})})]})})})}function eRt(e){const{email:t}=e;return w.jsx(Jh,{pt:100,children:w.jsx(Bo,{children:w.jsxs(Co,{order:3,children:["Trial not found, please contact the administrator at"," ",w.jsxs(Rb,{c:"blue",href:`mailto:${t}`,children:[t," "]})]})})})}function QE(e){return structuredClone(e)}const INe=I.createContext(null);function tRt(){const e=I.useContext(INe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function Sde(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function nRt(){const e=np(),t=eg(),r=`${t[e]}_${e}`,{trialValidation:i,sequence:s,answers:o}=Uo(x=>x),a=RQ(),u=Dc(),{saveTrialAnswer:l,setIframeAnswers:c}=Ml(),{storageEngine:f}=lo(),h=!Iut(r),p=a==null?void 0:a.answer,m=Yc(),g=jm(),y=VY(),v=I.useMemo(()=>Date.now(),[]),b=tRt(),_=I.useCallback(()=>{const x=QE(i[r]),S=Object.values(x).reduce((O,M)=>Object.hasOwn(M,"values")?{...O,...M.values}:O,{}),{provenanceGraph:E}=x,T=Date.now(),A=b&&"current"in b&&b.current?b.current.splice(0,b.current.length):[];Object.keys(p||{}).length===0&&(u(l({identifier:r,answer:S,startTime:v,endTime:T,provenanceGraph:E,windowEvents:A})),f&&f.saveAnswer(r,{answer:S,startTime:v,endTime:T,provenanceGraph:E,windowEvents:A}),u(c({})));let k=e+1;const R=hSe(s,e),$=R!==null&&R.some(O=>Object.hasOwn(O.currentBlock,"skip")&&O.currentBlock.skip!==void 0),P={...o,[r]:{answer:S,startTime:v,endTime:T,provenanceGraph:E,windowEvents:A}};$&&[...R.flatMap(M=>M.currentBlock.skip?M.currentBlock.skip.map(j=>({...j,firstIndex:M.firstIndex,lastIndex:M.lastIndex})):[])].some(M=>{let j=!1;const B=Object.fromEntries(Object.entries(P).filter(([V])=>{const D=parseInt(V.slice(V.lastIndexOf("_")+1),10);return D>=M.firstIndex&&D<=e})),U=M.check!=="block"?Object.entries(B).filter(([V])=>V.slice(0,V.lastIndexOf("_"))===M.name):Object.entries(B);if(U.length===0)return!1;if(U.some(([V,D])=>!D))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(M,null,2)}`);if(M.check==="response"||M.check==="responses"){const[V,D]=U[0];M.check==="response"?j=M.value!==D.answer[M.responseId]:j=!Sde(D.answer,V,g.components[V.slice(0,V.lastIndexOf("_"))],g)}else if(M.check==="block"||M.check==="repeatedComponent"){if(U.length<M.value)return!1;const V=U.map(([W,F])=>Sde(F.answer,W,g.components[W.slice(0,W.lastIndexOf("_"))],g)),D=V.filter(W=>W).length,z=V.length-D;j=M.condition==="numCorrect"&&D===M.value||M.condition==="numIncorrect"&&z===M.value}if(j){const V=t.indexOf(M.to),D=V===-1?Cut(s,M.to):-1;return k=V===-1?D:V,!0}return!1}),m(`/${y}/${k}${window.location.search}`)},[i,r,b,p,e,s,o,v,m,y,u,l,f,c,g,t]);return{isNextDisabled:h,goToNextStep:_}}function rRt({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>null,onClick:r}){const{isNextDisabled:i,goToNextStep:s}=nRt(),o=I.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return w.jsx(sr,{type:"submit",disabled:t||i,onClick:o,children:e})}function iRt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const sRt=typeof window<"u"?I.useLayoutEffect:I.useEffect;function yo(e,t){sRt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function oRt(e,t){e&&iRt(e),yo(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),yo(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),yo(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),yo(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),yo(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),yo(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),yo(`mantine-form:${e}:clear-errors`,t.clearErrors),yo(`mantine-form:${e}:reset`,t.reset),yo(`mantine-form:${e}:validate`,t.validate),yo(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),yo(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),yo(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),yo(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),yo(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),yo(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),yo(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),yo(`mantine-form:${e}:reset-touched`,t.resetTouched)}function aRt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function mV(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function uRt(e){const[t,n]=I.useState(mV(e)),r=I.useRef(t),i=I.useCallback(u=>{n(l=>{const c=mV(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=I.useCallback(()=>i({}),[]),o=I.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=I.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function kNe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Tde(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Cde(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=kNe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Tde(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Tde(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function lRt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Ade(e,t,n){typeof n.value=="object"&&(n.value=yw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function yw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(yw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(yw(a),yw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(yw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Ade(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Ade(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function RNe(e){return typeof e!="string"?[]:e.split(".")}function $u(e,t){const n=RNe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function w4(e,t,n){const r=RNe(e);if(r.length===0)return n;const i=yw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function cRt(e,{from:t,to:n},r){const i=$u(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),w4(e,s,r)}function fRt(e,t,n,r){const i=$u(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),w4(e,s,r)}function dRt(e,t,n){const r=$u(e,n);return Array.isArray(r)?w4(e,r.filter((i,s)=>s!==t),n):n}function hRt({$values:e,$errors:t,$status:n}){const r=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>lRt(o,a,u)),e.setValues({values:cRt(o,a,e.refValues.current),updateState:!0})},[]),i=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Cde(o,a,u,-1)),e.setValues({values:dRt(o,a,e.refValues.current),updateState:!0})},[]),s=I.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Cde(o,u,l,1)),e.setValues({values:fRt(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}function MN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function pRt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=I.useState(t),[o,a]=I.useState(e),u=I.useRef(t),l=I.useRef(e),c=I.useCallback(x=>{const S=typeof x=="function"?x(u.current):x;u.current=S,n==="controlled"&&s(S)},[]),f=I.useCallback(x=>{const S=typeof x=="function"?x(l.current):x;l.current=S,n==="controlled"&&a(S)},[]),d=I.useCallback(()=>c({}),[]),h=x=>{const S=x?{...x,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),f({})},p=I.useCallback((x,S)=>{c(E=>MN(E,x)===S?E:{...E,[x]:S})},[]),m=I.useCallback((x,S)=>{f(E=>MN(E,x)===S?E:{...E,[x]:S})},[]),g=I.useCallback(x=>MN(u.current,x),[]),y=I.useCallback(x=>f(S=>{if(typeof x!="string")return S;const E=kNe(x,S);return delete E[x],lO(E,S)?S:E}),[]),v=I.useCallback(x=>{if(x){const E=$u(x,l.current);if(typeof E=="boolean")return E;const T=$u(x,r.refValues.current),A=$u(x,r.valuesSnapshot.current);return!lO(T,A)}return Object.keys(l.current).length>0?MN(l.current):!lO(r.refValues.current,r.valuesSnapshot.current)},[]),b=I.useCallback(()=>l.current,[]),_=I.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:_}}function mRt({initialValues:e,onValuesChange:t,mode:n}){const r=I.useRef(!1),[i,s]=I.useState(e||{}),o=I.useRef(i),a=I.useRef(i),u=I.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,_=y?{...v,...b}:b;o.current=_,g&&s(_),t==null||t(_,v),m==null||m.filter(Boolean).forEach(x=>x({updatedValues:_,previousValues:v}))},[t]),l=I.useCallback(p=>{var y;const m=$u(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=w4(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(_=>_({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=I.useCallback(p=>{a.current=p},[]),f=I.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=I.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=I.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function gRt({$status:e}){const t=I.useRef({}),n=I.useCallback((i,s)=>{I.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=I.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:$u(i,o.previousValues),value:$u(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Ide(e,t){return e?`${e}-${t.toString()}`:t.toString()}function kde(e){const t=mV(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function gV(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=$u(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>gV(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||gV(o,t,a,i)),i},r)}function yV(e,t){return kde(typeof e=="function"?e(t):gV(e,t))}function LN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=yV(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const yRt="__MANTINE_FORM_INDEX__";function Rde(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${yRt}`)):!1:!1}function NNe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=uRt(r),p=mRt({initialValues:n,onValuesChange:l,mode:t}),m=pRt({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=hRt({$values:p,$errors:h,$status:m}),y=gRt({$status:m}),[v,b]=I.useState(0),[_,x]=I.useState({}),S=I.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(D=>D+1)},[]),E=I.useCallback(D=>{p.initialize(D,()=>t==="uncontrolled"&&b(z=>z+1))},[]),T=I.useCallback((D,z,W)=>{const F=Rde(D,a);m.clearFieldDirty(D),m.setFieldTouched(D,!0),!F&&o&&h.clearFieldError(D),p.setFieldValue({path:D,value:z,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(D),F?H=>{const G=LN(D,d,H.updatedValues);G.hasError?h.setFieldError(D,G.error):h.clearFieldError(D)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>x(H=>({...H,[D]:(H[D]||0)+1})):null]})},[l,d]),A=I.useCallback(D=>{const z=p.refValues.current;p.setValues({values:D,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const F=$u(W,p.refValues.current),H=$u(W,z);F!==H&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:z,updatedValues:p.refValues.current}))})},[l,o]),k=I.useCallback(()=>{const D=yV(d,p.refValues.current);return h.setErrors(D.errors),D},[d]),R=I.useCallback(D=>{const z=LN(D,d,p.refValues.current);return z.hasError?h.setFieldError(D,z.error):h.clearFieldError(D),z},[d]),$=(D,{type:z="input",withError:W=!0,withFocus:F=!0,...H}={})=>{const ee={onChange:aRt(le=>T(D,le,{forceUpdate:!1})),"data-path":Ide(e,D)};return W&&(ee.error=h.errorsState[D]),z==="checkbox"?ee[t==="controlled"?"checked":"defaultChecked"]=$u(D,p.refValues.current):ee[t==="controlled"?"value":"defaultValue"]=$u(D,p.refValues.current),F&&(ee.onFocus=()=>m.setFieldTouched(D,!0),ee.onBlur=()=>{if(Rde(D,u)){const le=LN(D,d,p.refValues.current);le.hasError?h.setFieldError(D,le.error):h.clearFieldError(D)}}),Object.assign(ee,f==null?void 0:f({inputProps:ee,field:D,options:{type:z,withError:W,withFocus:F,...H},form:V}))},P=(D,z)=>W=>{W==null||W.preventDefault();const F=k();F.hasErrors?z==null||z(F.errors,p.refValues.current,W):D==null||D(c(p.refValues.current),W)},O=D=>c(D||p.refValues.current),M=I.useCallback(D=>{D.preventDefault(),S()},[]),j=I.useCallback(D=>D?!LN(D,d,p.refValues.current).hasError:!yV(d,p.refValues.current).hasErrors,[d]),B=D=>`${v}-${D}-${_[D]||0}`,U=I.useCallback(D=>document.querySelector(`[data-path="${Ide(e,D)}"]`),[]),V={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:E,setValues:A,setFieldValue:T,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:S,validate:k,validateField:R,getInputProps:$,onSubmit:P,onReset:M,isValid:j,getTransformedValues:O,key:B,getInputNode:U};return oRt(e,V),V}function vRt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function bRt(e){return vRt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const _Rt=new URLSearchParams(window.location.search),wRt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?_Rt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},ERt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function xRt(e,t,n){const[r,i]=I.useState(null),s=NNe({initialValues:wRt(e,n),validate:ERt(e)});return I.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Bb(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function SRt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e;return w.jsx(Cm.Group,{label:w.jsx(Qa,{text:r,required:i}),...n,error:Bb(e,n,s),size:"md",children:w.jsx(Zn,{mt:"lg",children:s.map(o=>w.jsx(Cm,{disabled:t,value:o.value,label:o.label},o.value))})})}function TRt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s,options:o}=e;return w.jsx(ph,{disabled:t,label:w.jsx(Qa,{text:i,required:s}),placeholder:r,data:o,radius:"md",size:"md",...n,error:Bb(e,n,o)})}function CRt({response:e,answer:t}){const{prompt:n}=e;return w.jsxs(w.Fragment,{children:[w.jsx(xt,{fz:"md",fw:500,children:w.jsx(Qa,{text:n})}),w.jsx(S0,{children:Array.isArray(t.value)?t.value.map(r=>w.jsx(S0.Item,{children:r},r)):w.jsx(S0.Item,{children:t.value})})]})}function PNe({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s,leftLabel:o,rightLabel:a}=e;return w.jsx(B1.Group,{my:"md",name:`radioInput${e.id}`,label:w.jsx(Qa,{text:r,required:i}),...n,error:Bb(e,n,s),children:w.jsxs(Zn,{gap:"lg",mt:"lg",children:[o?w.jsx(xt,{style:{textAlign:"center"},children:o}):null,s.map(u=>w.jsx(B1,{disabled:t,value:u.value,label:u.label},u.label)),w.jsx(xt,{children:a})]})},e.id)}function ARt({response:e,disabled:t,answer:n}){const{preset:r}=e,i=[];for(let o=1;o<=+r;o+=1)i.push({label:`${o}`,value:`${o}`});const s={...e,type:"radio",options:i};return w.jsx(PNe,{disabled:t,response:s,answer:n})}function IRt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,min:s,max:o,placeholder:a}=e;return w.jsx(WG,{disabled:t,placeholder:a,label:w.jsx(Qa,{text:r,required:i}),radius:"md",size:"md",min:s,max:o,...n,error:Bb(e,n)})}function kRt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e,o=Bb(e,n);return w.jsx(Mi.Wrapper,{label:w.jsx(Qa,{text:r,required:i}),error:o,size:"md",children:w.jsx(TL,{disabled:t,labelAlwaysOn:!0,style:{marginTop:"5px",marginBottom:"30px"},marks:s,...n,styles:a=>({mark:{width:12,height:12,borderRadius:6,transform:"translateX(-3px) translateY(-2px)"},markFilled:{borderColor:a.colors.blue[6]},markLabel:{fontSize:a.fontSizes.sm,marginBottom:5,marginTop:0},thumb:{height:24,width:24,backgroundColor:a.white,borderWidth:1,boxShadow:a.shadows.sm},label:{top:-4,height:28,lineHeight:28,width:28,padding:0,display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700,color:"orange",backgroundColor:"transparent"}})})})}function RRt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return w.jsx(Vx,{disabled:t,placeholder:r,label:w.jsx(Qa,{text:i,required:s}),radius:"md",size:"md",...n,value:n.value||"",error:Bb(e,n)})}function NRt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return w.jsx(DG,{disabled:t,placeholder:r,label:w.jsx(Qa,{text:i,required:s}),radius:"md",size:"md",...n,value:n.value||"",error:Bb(e,n)})}function PRt({response:e,answer:t,storedAnswer:n}){const r=(n?{value:n}:t)||{value:void 0},i=!!n,[s]=dY(),o=I.useMemo(()=>{if(e.paramCapture){const a=s.get(e.paramCapture);return i||!!a}return i},[i,e.paramCapture,s]);return w.jsxs(Ne,{style:{margin:10,padding:5},children:[e.type==="numerical"&&w.jsx(IRt,{response:e,disabled:o,answer:r}),e.type==="shortText"&&w.jsx(RRt,{response:e,disabled:o,answer:r}),e.type==="longText"&&w.jsx(NRt,{response:e,disabled:o,answer:r}),e.type==="likert"&&w.jsx(ARt,{response:e,disabled:o,answer:r}),e.type==="dropdown"&&w.jsx(TRt,{response:e,disabled:o,answer:r}),e.type==="slider"&&w.jsx(kRt,{response:e,disabled:o,answer:r}),e.type==="radio"&&w.jsx(PNe,{response:e,disabled:o,answer:r}),e.type==="checkbox"&&w.jsx(SRt,{response:e,disabled:o,answer:r}),e.type==="iframe"&&w.jsx(CRt,{response:e,answer:r})]})}function p$({config:e,location:t,status:n,style:r}){var _;const i=np(),s=eg()[i],o=n==null?void 0:n.answer,a=e,u=I.useMemo(()=>{var x;return((x=a==null?void 0:a.response)==null?void 0:x.filter(S=>S.location?S.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=Dc(),{updateResponseBlockValidation:c}=Ml(),f=xRt(u,i,o||{}),[d,h]=I.useState(void 0),[p,m]=I.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Uo(x=>x),v=(a==null?void 0:a.provideFeedback)&&(((_=a==null?void 0:a.correctAnswer)==null?void 0:_.length)||0)>0,b=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return I.useEffect(()=>{const x=u.find(S=>S.type==="iframe");if(g&&x){const S=x.id;f.setValues({...f.values,[S]:g[S]})}},[g]),I.useEffect(()=>{y&&h(y)},[y]),I.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:QE(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),w.jsxs("div",{style:r,children:[u.map(x=>{var S,E;return w.jsx(Nr.Fragment,{children:x.hidden?"":w.jsxs(w.Fragment,{children:[w.jsx(PRt,{storedAnswer:o?o[x.id]:void 0,answer:{...f.getInputProps(x.id,{type:x.type==="checkbox"?"checkbox":"input"})},response:x}),v&&p&&w.jsx(xt,{children:`The correct answer is: ${(E=(S=a.correctAnswer)==null?void 0:S.find(T=>T.id===x.id))==null?void 0:E.answer}`})]})},`${x.id}-${i}`)}),w.jsxs(Zn,{justify:"right",gap:"xs",mt:"xl",children:[v&&b&&w.jsx(sr,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),b&&w.jsx(rRt,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}function bj({provState:e}){var T;const t=jm(),n=lo(),r=np(),i=eg()[r]||"Notfound",s=t.components[i],o=RQ(),a=_4(s)&&t.baseComponents?sK({},(T=t.baseComponents)==null?void 0:T[s.baseComponent],s):s,u=a.instruction||"",{instructionLocation:l}=a,c=t.uiConfig.sidebar&&(l==="sidebar"||l===void 0),[f,d]=I.useState(null),h=Dc(),{setIsRecording:p,setAnalysisTrialName:m}=Ml(),{analysisTrialName:g,analysisProvState:y}=Uo(A=>A),v=Yc(),[b,_]=I.useState(null);I.useEffect(()=>{h(m(i))},[h,m,r,i]),I.useEffect(()=>{r&&g&&i!==g&&v(`../${g}`)},[g,i,r,v]),I.useEffect(()=>{!r||!t||!t.recordStudyAudio||!n.storageEngine||(f&&b&&n.storageEngine.saveAudio(f,b),t.tasksToNotRecordAudio&&t.tasksToNotRecordAudio.includes(i)?(_(null),d(null),h(p(!1))):(navigator.mediaDevices.getUserMedia({audio:!0}).then(k=>{const R=new MediaRecorder(k);R.start(),d(R),h(p(!0))}),_(i)))},[i]),CNe();const{storageEngine:x}=lo(),S=Dc(),{setAlertModal:E}=Ml();return I.useEffect(()=>{(x==null?void 0:x.getEngine())!=="firebase"&&S(E({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[E,x,S]),i==="end"?w.jsx(ANe,{}):i==="Notfound"?w.jsx(eRt,{email:t.uiConfig.contactEmail}):w.jsxs(w.Fragment,{children:[l==="aboveStimulus"&&w.jsx(Qa,{text:u}),w.jsx(p$,{status:o,config:a,location:"aboveStimulus"},`${r}-above-response-block`),w.jsxs(I.Suspense,{fallback:w.jsx("div",{children:"Loading..."}),children:[a.type==="markdown"&&w.jsx(lCt,{currentConfig:a}),a.type==="website"&&w.jsx(Nut,{currentConfig:a}),a.type==="image"&&w.jsx(Out,{currentConfig:a}),a.type==="react-component"&&w.jsx(uCt,{currentConfig:a,provState:y})]},`${r}-stimulus`),(l==="belowStimulus"||l===void 0&&!c)&&w.jsx(Qa,{text:u}),w.jsx(p$,{status:o,config:a,location:"belowStimulus"},`${r}-below-response-block`)]})}function vV(e){const[t]=dY();return w.jsx(fY,{...e,to:{pathname:e.to,search:t.toString()}})}function ORt(e,t=!1){return typeof e=="number"?Nde(e,t):Nde(e.length,t).map(r=>r.map(i=>e[i]))}function Nde(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function ONe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=ONe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function DRt(e,t){const n=QE(e);return ONe(n,t,"root")}function DNe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&DNe(s,t,i,o)})}function $Rt(e){const t=[];return DNe(e,t,"",0),t}function Pde(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return ORt(i.sort(()=>.5-Math.random()),!0)}function MRt(e){const n=$Rt(e.sequence).map(s=>({[s]:Pde(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=DRt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Pde(e,o))})}),i}function $Ne(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>$Ne(n,`${t}-${r}`))}}function LRt(){Uo(n=>n),Ml();const e=np();eg()[e];const t=jm();return Dc(),I.useMemo(()=>{let n=QE(t.sequence);return n=$Ne(n,"root"),n.components.push("end"),n},[t.sequence]),null}var Ode={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MNe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},FRt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},xJ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(MNe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):FRt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new jRt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class jRt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BRt=function(e){const t=MNe(e);return xJ.encodeByteArray(t,!0)},m$=function(e){return BRt(e).replace(/\./g,"")},LNe=function(e){try{return xJ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FNe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const URt=()=>FNe().__FIREBASE_DEFAULTS__,zRt=()=>{if(typeof process>"u"||typeof Ode>"u")return;const e=Ode.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},VRt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&LNe(e[1]);return t&&JSON.parse(t)},E4=()=>{try{return URt()||zRt()||VRt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},jNe=e=>{var t,n;return(n=(t=E4())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},HRt=e=>{const t=jNe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},BNe=()=>{var e;return(e=E4())===null||e===void 0?void 0:e.config},UNe=e=>{var t;return(t=E4())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qRt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[m$(JSON.stringify(n)),m$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WRt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zo())}function GRt(){var e;const t=(e=E4())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YRt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function KRt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XRt(){const e=zo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function QRt(){return!GRt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SJ(){try{return typeof indexedDB=="object"}catch{return!1}}function JRt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZRt="FirebaseError";class up extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=ZRt,Object.setPrototypeOf(this,up.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_S.prototype.create)}}class _S{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?eNt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new up(i,a,r)}}function eNt(e,t){return e.replace(tNt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const tNt=/\{\$([^}]+)}/g;function nNt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function HA(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Dde(s)&&Dde(o)){if(!HA(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Dde(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function rNt(e,t){const n=new iNt(e,t);return n.subscribe.bind(n)}class iNt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");sNt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=_j),i.error===void 0&&(i.error=_j),i.complete===void 0&&(i.complete=_j);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sNt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function _j(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oNt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aNt=1e3,uNt=2,lNt=4*60*60*1e3,cNt=.5;function fNt(e,t=aNt,n=uNt){const r=t*Math.pow(n,e),i=Math.round(cNt*r*(Math.random()-.5)*2);return Math.min(lNt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(e){return e&&e._delegate?e._delegate:e}class Bh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dNt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new VA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(pNt(t))try{this.getOrInitializeService({instanceIdentifier:Ov})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Ov){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ov){return this.instances.has(t)}getOptions(t=Ov){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hNt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ov){return this.component?this.component.multipleInstances?t:Ov:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hNt(e){return e===Ov?void 0:e}function pNt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mNt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new dNt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(qn||(qn={}));const gNt={debug:qn.DEBUG,verbose:qn.VERBOSE,info:qn.INFO,warn:qn.WARN,error:qn.ERROR,silent:qn.SILENT},yNt=qn.INFO,vNt={[qn.DEBUG]:"log",[qn.VERBOSE]:"log",[qn.INFO]:"info",[qn.WARN]:"warn",[qn.ERROR]:"error"},bNt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=vNt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class x4{constructor(t){this.name=t,this._logLevel=yNt,this._logHandler=bNt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in qn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?gNt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,qn.DEBUG,...t),this._logHandler(this,qn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,qn.VERBOSE,...t),this._logHandler(this,qn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,qn.INFO,...t),this._logHandler(this,qn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,qn.WARN,...t),this._logHandler(this,qn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,qn.ERROR,...t),this._logHandler(this,qn.ERROR,...t)}}const _Nt=(e,t)=>t.some(n=>e instanceof n);let $de,Mde;function wNt(){return $de||($de=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ENt(){return Mde||(Mde=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zNe=new WeakMap,bV=new WeakMap,VNe=new WeakMap,wj=new WeakMap,TJ=new WeakMap;function xNt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(N0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&zNe.set(n,e)}).catch(()=>{}),TJ.set(t,e),t}function SNt(e){if(bV.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});bV.set(e,t)}let _V={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return bV.get(e);if(t==="objectStoreNames")return e.objectStoreNames||VNe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return N0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function TNt(e){_V=e(_V)}function CNt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Ej(this),t,...n);return VNe.set(r,t.sort?t.sort():[t]),N0(r)}:ENt().includes(e)?function(...t){return e.apply(Ej(this),t),N0(zNe.get(this))}:function(...t){return N0(e.apply(Ej(this),t))}}function ANt(e){return typeof e=="function"?CNt(e):(e instanceof IDBTransaction&&SNt(e),_Nt(e,wNt())?new Proxy(e,_V):e)}function N0(e){if(e instanceof IDBRequest)return xNt(e);if(wj.has(e))return wj.get(e);const t=ANt(e);return t!==e&&(wj.set(e,t),TJ.set(t,e)),t}const Ej=e=>TJ.get(e);function INt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=N0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(N0(o.result),u.oldVersion,u.newVersion,N0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const kNt=["get","getKey","getAll","getAllKeys","count"],RNt=["put","add","delete","clear"],xj=new Map;function Lde(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(xj.get(t))return xj.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=RNt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||kNt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return xj.set(t,s),s}TNt(e=>({...e,get:(t,n,r)=>Lde(t,n)||e.get(t,n,r),has:(t,n)=>!!Lde(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NNt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PNt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PNt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const wV="@firebase/app",Fde="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=new x4("@firebase/app"),ONt="@firebase/app-compat",DNt="@firebase/analytics-compat",$Nt="@firebase/analytics",MNt="@firebase/app-check-compat",LNt="@firebase/app-check",FNt="@firebase/auth",jNt="@firebase/auth-compat",BNt="@firebase/database",UNt="@firebase/database-compat",zNt="@firebase/functions",VNt="@firebase/functions-compat",HNt="@firebase/installations",qNt="@firebase/installations-compat",WNt="@firebase/messaging",GNt="@firebase/messaging-compat",YNt="@firebase/performance",KNt="@firebase/performance-compat",XNt="@firebase/remote-config",QNt="@firebase/remote-config-compat",JNt="@firebase/storage",ZNt="@firebase/storage-compat",ePt="@firebase/firestore",tPt="@firebase/vertexai-preview",nPt="@firebase/firestore-compat",rPt="firebase",iPt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV="[DEFAULT]",sPt={[wV]:"fire-core",[ONt]:"fire-core-compat",[$Nt]:"fire-analytics",[DNt]:"fire-analytics-compat",[LNt]:"fire-app-check",[MNt]:"fire-app-check-compat",[FNt]:"fire-auth",[jNt]:"fire-auth-compat",[BNt]:"fire-rtdb",[UNt]:"fire-rtdb-compat",[zNt]:"fire-fn",[VNt]:"fire-fn-compat",[HNt]:"fire-iid",[qNt]:"fire-iid-compat",[WNt]:"fire-fcm",[GNt]:"fire-fcm-compat",[YNt]:"fire-perf",[KNt]:"fire-perf-compat",[XNt]:"fire-rc",[QNt]:"fire-rc-compat",[JNt]:"fire-gcs",[ZNt]:"fire-gcs-compat",[ePt]:"fire-fst",[nPt]:"fire-fst-compat",[tPt]:"fire-vertex","fire-js":"fire-js",[rPt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$=new Map,oPt=new Map,xV=new Map;function jde(e,t){try{e.container.addComponent(t)}catch(n){eb.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Bm(e){const t=e.name;if(xV.has(t))return eb.debug(`There were multiple attempts to register component ${t}.`),!1;xV.set(t,e);for(const n of g$.values())jde(n,e);for(const n of oPt.values())jde(n,e);return!0}function wS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function uh(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aPt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},P0=new _S("app","Firebase",aPt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uPt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw P0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=iPt;function HNe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:EV,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw P0.create("bad-app-name",{appName:String(i)});if(n||(n=BNe()),!n)throw P0.create("no-options");const s=g$.get(i);if(s){if(HA(n,s.options)&&HA(r,s.config))return s;throw P0.create("duplicate-app",{appName:i})}const o=new mNt(i);for(const u of xV.values())o.addComponent(u);const a=new uPt(n,r,o);return g$.set(i,a),a}function CJ(e=EV){const t=g$.get(e);if(!t&&e===EV&&BNe())return HNe();if(!t)throw P0.create("no-app",{appName:e});return t}function Hf(e,t,n){var r;let i=(r=sPt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),eb.warn(a.join(" "));return}Bm(new Bh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lPt="firebase-heartbeat-database",cPt=1,qA="firebase-heartbeat-store";let Sj=null;function qNe(){return Sj||(Sj=INt(lPt,cPt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(qA)}catch(n){console.warn(n)}}}}).catch(e=>{throw P0.create("idb-open",{originalErrorMessage:e.message})})),Sj}async function fPt(e){try{const n=(await qNe()).transaction(qA),r=await n.objectStore(qA).get(WNe(e));return await n.done,r}catch(t){if(t instanceof up)eb.warn(t.message);else{const n=P0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});eb.warn(n.message)}}}async function Bde(e,t){try{const r=(await qNe()).transaction(qA,"readwrite");await r.objectStore(qA).put(t,WNe(e)),await r.done}catch(n){if(n instanceof up)eb.warn(n.message);else{const r=P0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});eb.warn(r.message)}}}function WNe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dPt=1024,hPt=30*24*60*60*1e3;class pPt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gPt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ude();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=hPt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ude(),{heartbeatsToSend:r,unsentEntries:i}=mPt(this._heartbeatsCache.heartbeats),s=m$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Ude(){return new Date().toISOString().substring(0,10)}function mPt(e,t=dPt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),zde(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),zde(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class gPt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SJ()?JRt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fPt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Bde(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Bde(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function zde(e){return m$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yPt(e){Bm(new Bh("platform-logger",t=>new NNt(t),"PRIVATE")),Bm(new Bh("heartbeat",t=>new pPt(t),"PRIVATE")),Hf(wV,Fde,e),Hf(wV,Fde,"esm2017"),Hf("fire-js","")}yPt("");function GNe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vPt=GNe,YNe=new _S("auth","Firebase",GNe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=new x4("@firebase/auth");function bPt(e,...t){y$.logLevel<=qn.WARN&&y$.warn(`Auth (${Ub}): ${e}`,...t)}function pO(e,...t){y$.logLevel<=qn.ERROR&&y$.error(`Auth (${Ub}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(e,...t){throw IJ(e,...t)}function qf(e,...t){return IJ(e,...t)}function AJ(e,t,n){const r=Object.assign(Object.assign({},vPt()),{[t]:n});return new _S("auth","Firebase",r).create(t,{appName:e.name})}function O0(e){return AJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _Pt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Uh(e,"argument-error"),AJ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function IJ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return YNe.create(e,...t)}function on(e,t,...n){if(!e)throw IJ(t,...n)}function nm(e){const t="INTERNAL ASSERTION FAILED: "+e;throw pO(t),new Error(t)}function Um(e,t){e||nm(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function wPt(){return Vde()==="http:"||Vde()==="https:"}function Vde(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EPt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wPt()||YRt()||"connection"in navigator)?navigator.onLine:!0}function xPt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(t,n){this.shortDelay=t,this.longDelay=n,Um(n>t,"Short delay should be less than long delay!"),this.isMobile=WRt()||KRt()}get(){return EPt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kJ(e,t){Um(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KNe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;nm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;nm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;nm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SPt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TPt=new Tk(3e4,6e4);function S4(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ES(e,t,n,r,i={}){return XNe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=Sk(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),KNe.fetch()(JNe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function XNe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},SPt),t);try{const i=new CPt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw FN(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw FN(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw FN(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw FN(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw AJ(e,c,l);Uh(e,c)}}catch(i){if(i instanceof up)throw i;Uh(e,"network-request-failed",{message:String(i)})}}async function QNe(e,t,n,r,i={}){const s=await ES(e,t,n,r,i);return"mfaPendingCredential"in s&&Uh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function JNe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?kJ(e.config,i):`${e.config.apiScheme}://${i}`}class CPt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qf(this.auth,"network-request-failed")),TPt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function FN(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=qf(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function APt(e,t){return ES(e,"POST","/v1/accounts:delete",t)}async function ZNe(e,t){return ES(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function IPt(e,t=!1){const n=es(e),r=await n.getIdToken(t),i=RJ(r);on(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:x2(Tj(i.auth_time)),issuedAtTime:x2(Tj(i.iat)),expirationTime:x2(Tj(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Tj(e){return Number(e)*1e3}function RJ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return pO("JWT malformed, contained fewer than 3 sections"),null;try{const i=LNe(n);return i?JSON.parse(i):(pO("Failed to decode base64 JWT payload"),null)}catch(i){return pO("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Hde(e){const t=RJ(e);return on(t,"internal-error"),on(typeof t.exp<"u","internal-error"),on(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof up&&kPt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function kPt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RPt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=x2(this.lastLoginAt),this.creationTime=x2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await WA(e,ZNe(n,{idToken:r}));on(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?ePe(s.providerUserInfo):[],a=PPt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new TV(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function NPt(e){const t=es(e);await v$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function PPt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function ePe(e){return e.map(t=>{var{providerId:n}=t,r=OI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OPt(e,t){const n=await XNe(e,{},async()=>{const r=Sk({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=JNe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",KNe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function DPt(e,t){return ES(e,"POST","/v2/accounts:revokeToken",S4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){on(t.idToken,"internal-error"),on(typeof t.idToken<"u","internal-error"),on(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Hde(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){on(t.length!==0,"internal-error");const n=Hde(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(on(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await OPt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Jw;return r&&(on(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(on(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(on(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Jw,this.toJSON())}_performRefresh(){return nm("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(e,t){on(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class rm{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=OI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RPt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new TV(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await WA(this,this.stsTokenManager.getToken(this.auth,t));return on(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return IPt(this,t)}reload(){return NPt(this)}_assign(t){this!==t&&(on(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new rm(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){on(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await v$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(uh(this.auth.app))return Promise.reject(O0(this.auth));const t=await this.getIdToken();return await WA(this,APt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:_,isAnonymous:x,providerData:S,stsTokenManager:E}=n;on(b&&E,t,"internal-error");const T=Jw.fromJSON(this.name,E);on(typeof b=="string",t,"internal-error"),Sg(f,t.name),Sg(d,t.name),on(typeof _=="boolean",t,"internal-error"),on(typeof x=="boolean",t,"internal-error"),Sg(h,t.name),Sg(p,t.name),Sg(m,t.name),Sg(g,t.name),Sg(y,t.name),Sg(v,t.name);const A=new rm({uid:b,auth:t,email:d,emailVerified:_,displayName:f,isAnonymous:x,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:T,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(A.providerData=S.map(k=>Object.assign({},k))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new Jw;i.updateFromServerResponse(n);const s=new rm({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await v$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];on(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?ePe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Jw;a.updateFromIdToken(r);const u=new rm({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new TV(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qde=new Map;function im(e){Um(e instanceof Function,"Expected a class definition");let t=qde.get(e);return t?(Um(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,qde.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tPe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}tPe.type="NONE";const Wde=tPe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(e,t,n){return`firebase:${e}:${t}:${n}`}class Zw{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=mO(this.userKey,i.apiKey,s),this.fullPersistenceKey=mO("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?rm._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Zw(im(Wde),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||im(Wde);const o=mO(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=rm._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Zw(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Zw(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gde(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(iPe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(nPe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(oPe(t))return"Blackberry";if(aPe(t))return"Webos";if(NJ(t))return"Safari";if((t.includes("chrome/")||rPe(t))&&!t.includes("edge/"))return"Chrome";if(sPe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function nPe(e=zo()){return/firefox\//i.test(e)}function NJ(e=zo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function rPe(e=zo()){return/crios\//i.test(e)}function iPe(e=zo()){return/iemobile/i.test(e)}function sPe(e=zo()){return/android/i.test(e)}function oPe(e=zo()){return/blackberry/i.test(e)}function aPe(e=zo()){return/webos/i.test(e)}function T4(e=zo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function $Pt(e=zo()){var t;return T4(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function MPt(){return XRt()&&document.documentMode===10}function uPe(e=zo()){return T4(e)||sPe(e)||aPe(e)||oPe(e)||/windows phone/i.test(e)||iPe(e)}function LPt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lPe(e,t=[]){let n;switch(e){case"Browser":n=Gde(zo());break;case"Worker":n=`${Gde(zo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ub}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FPt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jPt(e,t={}){return ES(e,"GET","/v2/passwordPolicy",S4(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BPt=6;class UPt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:BPt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zPt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yde(this),this.idTokenSubscription=new Yde(this),this.beforeStateQueue=new FPt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YNe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=im(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Zw.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await ZNe(this,{idToken:t}),r=await rm._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(uh(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return on(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await v$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=xPt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(uh(this.app))return Promise.reject(O0(this));const n=t?es(t):null;return n&&on(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&on(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return uh(this.app)?Promise.reject(O0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return uh(this.app)?Promise.reject(O0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(im(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await jPt(this),n=new UPt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new _S("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await DPt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&im(t)||this._popupRedirectResolver;on(n,this,"argument-error"),this.redirectPersistenceManager=await Zw.create(this,[im(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(on(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return on(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=lPe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&bPt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ck(e){return es(e)}class Yde{constructor(t){this.auth=t,this.observer=null,this.addObserver=rNt(n=>this.observer=n)}get next(){return on(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PJ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VPt(e){PJ=e}function HPt(e){return PJ.loadJS(e)}function qPt(){return PJ.gapiScript}function WPt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GPt(e,t){const n=wS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(HA(s,t??{}))return i;Uh(i,"already-initialized")}return n.initialize({options:t})}function YPt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(im);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function KPt(e,t,n){const r=Ck(e);on(r._canInitEmulator,r,"emulator-config-failed"),on(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=cPe(t),{host:o,port:a}=XPt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),QPt()}function cPe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function XPt(e){const t=cPe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Kde(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Kde(o)}}}function Kde(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function QPt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fPe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return nm("not implemented")}_getIdTokenResponse(t){return nm("not implemented")}_linkToIdToken(t,n){return nm("not implemented")}_getReauthenticationResolver(t){return nm("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eE(e,t){return QNe(e,"POST","/v1/accounts:signInWithIdp",S4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JPt="http://localhost";class tb extends fPe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new tb(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Uh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=OI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new tb(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return eE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,eE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,eE(t,n)}buildRequest(){const t={requestUri:JPt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Sk(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak extends OJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg extends Ak{constructor(){super("facebook.com")}static credential(t){return tb._fromParams({providerId:Xg.PROVIDER_ID,signInMethod:Xg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Xg.credentialFromTaggedObject(t)}static credentialFromError(t){return Xg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Xg.credential(t.oauthAccessToken)}catch{return null}}}Xg.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp extends Ak{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return tb._fromParams({providerId:Yp.PROVIDER_ID,signInMethod:Yp.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Yp.credentialFromTaggedObject(t)}static credentialFromError(t){return Yp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Yp.credential(n,r)}catch{return null}}}Yp.GOOGLE_SIGN_IN_METHOD="google.com";Yp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg extends Ak{constructor(){super("github.com")}static credential(t){return tb._fromParams({providerId:Qg.PROVIDER_ID,signInMethod:Qg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Qg.credentialFromTaggedObject(t)}static credentialFromError(t){return Qg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Qg.credential(t.oauthAccessToken)}catch{return null}}}Qg.GITHUB_SIGN_IN_METHOD="github.com";Qg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg extends Ak{constructor(){super("twitter.com")}static credential(t,n){return tb._fromParams({providerId:Jg.PROVIDER_ID,signInMethod:Jg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Jg.credentialFromTaggedObject(t)}static credentialFromError(t){return Jg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Jg.credential(n,r)}catch{return null}}}Jg.TWITTER_SIGN_IN_METHOD="twitter.com";Jg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZPt(e,t){return QNe(e,"POST","/v1/accounts:signUp",S4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await rm._fromIdTokenResponse(t,r,i),o=Xde(r);return new ly({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Xde(r);return new ly({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Xde(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eOt(e){var t;if(uh(e.app))return Promise.reject(O0(e));const n=Ck(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new ly({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await ZPt(n,{returnSecureToken:!0}),i=await ly._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b$ extends up{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,b$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new b$(t,n,r,i)}}function dPe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?b$._fromErrorAndOperation(e,s,t,r):s})}async function tOt(e,t,n=!1){const r=await WA(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ly._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nOt(e,t,n=!1){const{auth:r}=e;if(uh(r.app))return Promise.reject(O0(r));const i="reauthenticate";try{const s=await WA(e,dPe(r,i,t,e),n);on(s.idToken,r,"internal-error");const o=RJ(s.idToken);on(o,r,"internal-error");const{sub:a}=o;return on(e.uid===a,r,"user-mismatch"),ly._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Uh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rOt(e,t,n=!1){if(uh(e.app))return Promise.reject(O0(e));const r="signIn",i=await dPe(e,r,t),s=await ly._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function iOt(e,t,n,r){return es(e).onIdTokenChanged(t,n,r)}function sOt(e,t,n){return es(e).beforeAuthStateChanged(t,n)}function oOt(e,t,n,r){return es(e).onAuthStateChanged(t,n,r)}function aOt(e){return es(e).signOut()}const _$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hPe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_$,"1"),this.storage.removeItem(_$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uOt(){const e=zo();return NJ(e)||T4(e)}const lOt=1e3,cOt=10;class pPe extends hPe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=uOt()&&LPt(),this.fallbackToPolling=uPe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);MPt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,cOt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},lOt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}pPe.type="LOCAL";const fOt=pPe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mPe extends hPe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}mPe.type="SESSION";const gPe=mPe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dOt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new C4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await dOt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}C4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DJ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hOt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=DJ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(){return window}function pOt(e){wh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yPe(){return typeof wh().WorkerGlobalScope<"u"&&typeof wh().importScripts=="function"}async function mOt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gOt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function yOt(){return yPe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vPe="firebaseLocalStorageDb",vOt=1,w$="firebaseLocalStorage",bPe="fbase_key";class Ik{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function A4(e,t){return e.transaction([w$],t?"readwrite":"readonly").objectStore(w$)}function bOt(){const e=indexedDB.deleteDatabase(vPe);return new Ik(e).toPromise()}function CV(){const e=indexedDB.open(vPe,vOt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(w$,{keyPath:bPe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(w$)?t(r):(r.close(),await bOt(),t(await CV()))})})}async function Qde(e,t,n){const r=A4(e,!0).put({[bPe]:t,value:n});return new Ik(r).toPromise()}async function _Ot(e,t){const n=A4(e,!1).get(t),r=await new Ik(n).toPromise();return r===void 0?null:r.value}function Jde(e,t){const n=A4(e,!0).delete(t);return new Ik(n).toPromise()}const wOt=800,EOt=3;class _Pe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await CV(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>EOt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yPe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=C4._getInstance(yOt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await mOt(),!this.activeServiceWorker)return;this.sender=new hOt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||gOt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await CV();return await Qde(t,_$,"1"),await Jde(t,_$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Qde(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>_Ot(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jde(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=A4(i,!1).getAll();return new Ik(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wOt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_Pe.type="LOCAL";const xOt=_Pe;new Tk(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wPe(e,t){return t?im(t):(on(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $J extends fPe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return eE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return eE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return eE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function SOt(e){return rOt(e.auth,new $J(e),e.bypassAuthState)}function TOt(e){const{auth:t,user:n}=e;return on(n,t,"internal-error"),nOt(n,new $J(e),e.bypassAuthState)}async function COt(e){const{auth:t,user:n}=e;return on(n,t,"internal-error"),tOt(n,new $J(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EPe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return SOt;case"linkViaPopup":case"linkViaRedirect":return COt;case"reauthViaPopup":case"reauthViaRedirect":return TOt;default:Uh(this.auth,"internal-error")}}resolve(t){Um(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Um(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AOt=new Tk(2e3,1e4);async function IOt(e,t,n){if(uh(e.app))return Promise.reject(qf(e,"operation-not-supported-in-this-environment"));const r=Ck(e);_Pt(e,t,OJ);const i=wPe(r,n);return new d1(r,"signInViaPopup",t,i).executeNotNull()}class d1 extends EPe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,d1.currentPopupAction&&d1.currentPopupAction.cancel(),d1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return on(t,this.auth,"internal-error"),t}async onExecution(){Um(this.filter.length===1,"Popup operations only handle one event");const t=DJ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(qf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,d1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,AOt.get())};t()}}d1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kOt="pendingRedirect",gO=new Map;class ROt extends EPe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=gO.get(this.auth._key());if(!t){try{const r=await NOt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}gO.set(this.auth._key(),t)}return this.bypassAuthState||gO.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function NOt(e,t){const n=DOt(t),r=OOt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function POt(e,t){gO.set(e._key(),t)}function OOt(e){return im(e._redirectPersistence)}function DOt(e){return mO(kOt,e.config.apiKey,e.name)}async function $Ot(e,t,n=!1){if(uh(e.app))return Promise.reject(O0(e));const r=Ck(e),i=wPe(r,t),o=await new ROt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MOt=10*60*1e3;class LOt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!FOt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!xPe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(qf(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=MOt&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zde(t))}saveEventToCache(t){this.cachedEventUids.add(Zde(t)),this.lastProcessedEventTime=Date.now()}}function Zde(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function xPe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function FOt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xPe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jOt(e,t={}){return ES(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BOt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UOt=/^https?/;async function zOt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await jOt(e);for(const n of t)try{if(VOt(n))return}catch{}Uh(e,"unauthorized-domain")}function VOt(e){const t=SV(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!UOt.test(n))return!1;if(BOt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HOt=new Tk(3e4,6e4);function ehe(){const e=wh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function qOt(e){return new Promise((t,n)=>{var r,i,s;function o(){ehe(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ehe(),n(qf(e,"network-request-failed"))},timeout:HOt.get()})}if(!((i=(r=wh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=wh().gapi)===null||s===void 0)&&s.load)o();else{const a=WPt("iframefcb");return wh()[a]=()=>{gapi.load?o():n(qf(e,"network-request-failed"))},HPt(`${qPt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw yO=null,t})}let yO=null;function WOt(e){return yO=yO||qOt(e),yO}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GOt=new Tk(5e3,15e3),YOt="__/auth/iframe",KOt="emulator/auth/iframe",XOt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QOt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JOt(e){const t=e.config;on(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?kJ(t,KOt):`https://${e.config.authDomain}/${YOt}`,r={apiKey:t.apiKey,appName:e.name,v:Ub},i=QOt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Sk(r).slice(1)}`}async function ZOt(e){const t=await WOt(e),n=wh().gapi;return on(n,e,"internal-error"),t.open({where:document.body,url:JOt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XOt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=qf(e,"network-request-failed"),a=wh().setTimeout(()=>{s(o)},GOt.get());function u(){wh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eDt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tDt=500,nDt=600,rDt="_blank",iDt="http://localhost";class the{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sDt(e,t,n,r=tDt,i=nDt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},eDt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=zo().toLowerCase();n&&(a=rPe(l)?rDt:n),nPe(l)&&(t=t||iDt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if($Pt(l)&&a!=="_self")return oDt(t||"",a),new the(null);const f=window.open(t||"",a,c);on(f,e,"popup-blocked");try{f.focus()}catch{}return new the(f)}function oDt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aDt="__/auth/handler",uDt="emulator/auth/handler",lDt=encodeURIComponent("fac");async function nhe(e,t,n,r,i,s){on(e.config.authDomain,e,"auth-domain-config-required"),on(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ub,eventId:i};if(t instanceof OJ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",nNt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof Ak){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${lDt}=${encodeURIComponent(u)}`:"";return`${cDt(e)}?${Sk(a).slice(1)}${l}`}function cDt({config:e}){return e.emulator?kJ(e,uDt):`https://${e.authDomain}/${aDt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="webStorageSupport";class fDt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gPe,this._completeRedirectFn=$Ot,this._overrideRedirectResult=POt}async _openPopup(t,n,r,i){var s;Um((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await nhe(t,n,r,SV(),i);return sDt(t,o,DJ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await nhe(t,n,r,SV(),i);return pOt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Um(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await ZOt(t),r=new LOt(t);return n.register("authEvent",i=>(on(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Cj,{type:Cj},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Cj];o!==void 0&&n(!!o),Uh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zOt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return uPe()||NJ()||T4()}}const dDt=fDt;var rhe="@firebase/auth",ihe="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hDt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){on(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pDt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mDt(e){Bm(new Bh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;on(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lPe(e)},l=new zPt(r,i,s,u);return YPt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Bm(new Bh("auth-internal",t=>{const n=Ck(t.getProvider("auth").getImmediate());return(r=>new hDt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hf(rhe,ihe,pDt(e)),Hf(rhe,ihe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gDt=5*60,yDt=UNe("authIdTokenMaxAge")||gDt;let she=null;const vDt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>yDt)return;const i=n==null?void 0:n.token;she!==i&&(she=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function E$(e=CJ()){const t=wS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=GPt(e,{popupRedirectResolver:dDt,persistence:[xOt,fOt,gPe]}),r=UNe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=vDt(s.toString());sOt(n,o,()=>o(n.currentUser)),iOt(n,a=>o(a))}}const i=jNe("auth");return i&&KPt(n,`http://${i}`),n}function bDt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}VPt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=qf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",bDt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mDt("Browser");var _Dt="firebase",wDt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hf(_Dt,wDt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SPe="firebasestorage.googleapis.com",TPe="storageBucket",EDt=2*60*1e3,xDt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends up{constructor(t,n,r=0){super(Aj(t),`Firebase Storage: ${n} (${Aj(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Aj(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ts;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ts||(ts={}));function Aj(e){return"storage/"+e}function MJ(){const e="An unknown error occurred, please check the error payload for server response.";return new rs(ts.UNKNOWN,e)}function SDt(e){return new rs(ts.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function TDt(e){return new rs(ts.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function CDt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new rs(ts.UNAUTHENTICATED,e)}function ADt(){return new rs(ts.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function IDt(e){return new rs(ts.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function kDt(){return new rs(ts.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RDt(){return new rs(ts.CANCELED,"User canceled the upload/download.")}function NDt(e){return new rs(ts.INVALID_URL,"Invalid URL '"+e+"'.")}function PDt(e){return new rs(ts.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function ODt(){return new rs(ts.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+TPe+"' property when initializing the app?")}function DDt(){return new rs(ts.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $Dt(){return new rs(ts.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function MDt(e){return new rs(ts.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function AV(e){return new rs(ts.INVALID_ARGUMENT,e)}function CPe(){return new rs(ts.APP_DELETED,"The Firebase app was deleted.")}function LDt(e){return new rs(ts.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function S2(e,t){return new rs(ts.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function CT(e){throw new rs(ts.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Sl.makeFromUrl(t,n)}catch{return new Sl(t,"")}if(r.path==="")return r;throw PDt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(_){_.path.charAt(_.path.length-1)==="/"&&(_.path_=_.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(_){_.path_=decodeURIComponent(_.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===SPe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let _=0;_<b.length;_++){const x=b[_],S=x.regex.exec(t);if(S){const E=S[x.indices.bucket];let T=S[x.indices.path];T||(T=""),r=new Sl(E,T),x.postModify(r);break}}if(r==null)throw NDt(t);return r}}class FDt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jDt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function BDt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UDt(e){return e!==void 0}function zDt(e){return typeof e=="object"&&!Array.isArray(e)}function LJ(e){return typeof e=="string"||e instanceof String}function ohe(e){return FJ()&&e instanceof Blob}function FJ(){return typeof Blob<"u"}function ahe(e,t,n,r){if(r<t)throw AV(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw AV(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jJ(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function APe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var S1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(S1||(S1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VDt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HDt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new jN(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===S1.NO_ERROR,u=s.getStatus();if(!a||VDt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===S1.ABORT;r(!1,new jN(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new jN(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());UDt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=MJ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?CPe():RDt();o(u)}else{const u=kDt();o(u)}};this.canceled_?n(!1,new jN(!1,null,!0)):this.backoffId_=jDt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&BDt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class jN{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function qDt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function WDt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function GDt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function YDt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function KDt(e,t,n,r,i,s,o=!0){const a=APe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return GDt(l,t),qDt(l,n),WDt(l,s),YDt(l,r),new HDt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XDt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function QDt(...e){const t=XDt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(FJ())return new Blob(e);throw new rs(ts.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function JDt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZDt(e){if(typeof atob>"u")throw MDt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ij{constructor(t,n){this.data=t,this.contentType=n||null}}function e3t(e,t){switch(e){case lh.RAW:return new Ij(IPe(t));case lh.BASE64:case lh.BASE64URL:return new Ij(kPe(e,t));case lh.DATA_URL:return new Ij(n3t(t),r3t(t))}throw MJ()}function IPe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function t3t(e){let t;try{t=decodeURIComponent(e)}catch{throw S2(lh.DATA_URL,"Malformed data URL.")}return IPe(t)}function kPe(e,t){switch(e){case lh.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw S2(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case lh.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw S2(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ZDt(t)}catch(i){throw i.message.includes("polyfill")?i:S2(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class RPe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw S2(lh.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=i3t(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function n3t(e){const t=new RPe(e);return t.base64?kPe(lh.BASE64,t.rest):t3t(t.rest)}function r3t(e){return new RPe(e).contentType}function i3t(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(t,n){let r=0,i="";ohe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(ohe(this.data_)){const r=this.data_,i=JDt(r,t,n);return i===null?null:new Zg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Zg(r,!0)}}static getBlob(...t){if(FJ()){const n=t.map(r=>r instanceof Zg?r.data_:r);return new Zg(QDt.apply(null,n))}else{const n=t.map(o=>LJ(o)?e3t(lh.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Zg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NPe(e){let t;try{t=JSON.parse(e)}catch{return null}return zDt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3t(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function o3t(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function PPe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3t(e,t){return t}class $a{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||a3t}}let BN=null;function u3t(e){return!LJ(e)||e.length<2?e:PPe(e)}function OPe(){if(BN)return BN;const e=[];e.push(new $a("bucket")),e.push(new $a("generation")),e.push(new $a("metageneration")),e.push(new $a("name","fullPath",!0));function t(s,o){return u3t(o)}const n=new $a("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new $a("size");return i.xform=r,e.push(i),e.push(new $a("timeCreated")),e.push(new $a("updated")),e.push(new $a("md5Hash",null,!0)),e.push(new $a("cacheControl",null,!0)),e.push(new $a("contentDisposition",null,!0)),e.push(new $a("contentEncoding",null,!0)),e.push(new $a("contentLanguage",null,!0)),e.push(new $a("contentType",null,!0)),e.push(new $a("metadata","customMetadata",!0)),BN=e,BN}function l3t(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Sl(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function c3t(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return l3t(r,e),r}function DPe(e,t,n){const r=NPe(t);return r===null?null:c3t(e,r,n)}function f3t(e,t,n,r){const i=NPe(t);if(i===null||!LJ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=jJ(d,n,r),p=APe({alt:"media",token:l});return h+p})[0]}function d3t(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class $Pe{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MPe(e){if(!e)throw MJ()}function h3t(e,t){function n(r,i){const s=DPe(e,i,t);return MPe(s!==null),s}return n}function p3t(e,t){function n(r,i){const s=DPe(e,i,t);return MPe(s!==null),f3t(s,i,e.host,e._protocol)}return n}function LPe(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=ADt():i=CDt():n.getStatus()===402?i=TDt(e.bucket):n.getStatus()===403?i=IDt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function m3t(e){const t=LPe(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=SDt(e.path)),s.serverResponse=i.serverResponse,s}return n}function g3t(e,t,n){const r=t.fullServerUrl(),i=jJ(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new $Pe(i,s,p3t(e,n),o);return a.errorHandler=m3t(t),a}function y3t(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function v3t(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=y3t(null,t)),r}function b3t(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let _=0;_<2;_++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=v3t(t,r,i),c=d3t(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Zg.getBlob(f,r,d);if(h===null)throw DDt();const p={name:l.fullPath},m=jJ(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new $Pe(m,g,h3t(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=LPe(t),v}class _3t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=S1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=S1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=S1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw CT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw CT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw CT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw CT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw CT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class w3t extends _3t{initXhr(){this.xhr_.responseType="text"}}function FPe(){return new w3t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(t,n){this._service=t,n instanceof Sl?this._location=n:this._location=Sl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new nb(t,n)}get root(){const t=new Sl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PPe(this._location.path)}get storage(){return this._service}get parent(){const t=s3t(this._location.path);if(t===null)return null;const n=new Sl(this._location.bucket,t);return new nb(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw LDt(t)}}function E3t(e,t,n){e._throwIfRoot("uploadBytes");const r=b3t(e.storage,e._location,OPe(),new Zg(t,!0),n);return e.storage.makeRequestWithTokens(r,FPe).then(i=>({metadata:i,ref:e}))}function x3t(e){e._throwIfRoot("getDownloadURL");const t=g3t(e.storage,e._location,OPe());return e.storage.makeRequestWithTokens(t,FPe).then(n=>{if(n===null)throw $Dt();return n})}function S3t(e,t){const n=o3t(e._location.path,t),r=new Sl(e._location.bucket,n);return new nb(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3t(e){return/^[A-Za-z]+:\/\//.test(e)}function C3t(e,t){return new nb(e,t)}function jPe(e,t){if(e instanceof BJ){const n=e;if(n._bucket==null)throw ODt();const r=new nb(n,n._bucket);return t!=null?jPe(r,t):r}else return t!==void 0?S3t(e,t):e}function A3t(e,t){if(t&&T3t(t)){if(e instanceof BJ)return C3t(e,t);throw AV("To use ref(service, url), the first argument must be a Storage instance.")}else return jPe(e,t)}function uhe(e,t){const n=t==null?void 0:t[TPe];return n==null?null:Sl.makeFromBucketSpec(n,e)}function I3t(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:qRt(i,e.app.options.projectId))}class BJ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=SPe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=EDt,this._maxUploadRetryTime=xDt,this._requests=new Set,i!=null?this._bucket=Sl.makeFromBucketSpec(i,this._host):this._bucket=uhe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Sl.makeFromBucketSpec(this._url,t):this._bucket=uhe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){ahe("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){ahe("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new nb(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new FDt(CPe());{const o=KDt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const lhe="@firebase/storage",che="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BPe="storage";function fhe(e,t,n){return e=es(e),E3t(e,t,n)}function AT(e){return e=es(e),x3t(e)}function Tg(e,t){return e=es(e),A3t(e,t)}function Cg(e=CJ(),t){e=es(e);const r=wS(e,BPe).getImmediate({identifier:t}),i=HRt("storage");return i&&k3t(r,...i),r}function k3t(e,t,n,r={}){I3t(e,t,n,r)}function R3t(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new BJ(n,r,i,t,Ub)}function N3t(){Bm(new Bh(BPe,R3t,"PUBLIC").setMultipleInstances(!0)),Hf(lhe,che,""),Hf(lhe,che,"esm2017")}N3t();var dhe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var T1,UPe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,T){function A(){}A.prototype=T.prototype,E.D=T.prototype,E.prototype=new A,E.prototype.constructor=E,E.C=function(k,R,$){for(var P=Array(arguments.length-2),O=2;O<arguments.length;O++)P[O-2]=arguments[O];return T.prototype[R].apply(k,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,T,A){A||(A=0);var k=Array(16);if(typeof T=="string")for(var R=0;16>R;++R)k[R]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(R=0;16>R;++R)k[R]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=E.g[0],A=E.g[1],R=E.g[2];var $=E.g[3],P=T+($^A&(R^$))+k[0]+3614090360&4294967295;T=A+(P<<7&4294967295|P>>>25),P=$+(R^T&(A^R))+k[1]+3905402710&4294967295,$=T+(P<<12&4294967295|P>>>20),P=R+(A^$&(T^A))+k[2]+606105819&4294967295,R=$+(P<<17&4294967295|P>>>15),P=A+(T^R&($^T))+k[3]+3250441966&4294967295,A=R+(P<<22&4294967295|P>>>10),P=T+($^A&(R^$))+k[4]+4118548399&4294967295,T=A+(P<<7&4294967295|P>>>25),P=$+(R^T&(A^R))+k[5]+1200080426&4294967295,$=T+(P<<12&4294967295|P>>>20),P=R+(A^$&(T^A))+k[6]+2821735955&4294967295,R=$+(P<<17&4294967295|P>>>15),P=A+(T^R&($^T))+k[7]+4249261313&4294967295,A=R+(P<<22&4294967295|P>>>10),P=T+($^A&(R^$))+k[8]+1770035416&4294967295,T=A+(P<<7&4294967295|P>>>25),P=$+(R^T&(A^R))+k[9]+2336552879&4294967295,$=T+(P<<12&4294967295|P>>>20),P=R+(A^$&(T^A))+k[10]+4294925233&4294967295,R=$+(P<<17&4294967295|P>>>15),P=A+(T^R&($^T))+k[11]+2304563134&4294967295,A=R+(P<<22&4294967295|P>>>10),P=T+($^A&(R^$))+k[12]+1804603682&4294967295,T=A+(P<<7&4294967295|P>>>25),P=$+(R^T&(A^R))+k[13]+4254626195&4294967295,$=T+(P<<12&4294967295|P>>>20),P=R+(A^$&(T^A))+k[14]+2792965006&4294967295,R=$+(P<<17&4294967295|P>>>15),P=A+(T^R&($^T))+k[15]+1236535329&4294967295,A=R+(P<<22&4294967295|P>>>10),P=T+(R^$&(A^R))+k[1]+4129170786&4294967295,T=A+(P<<5&4294967295|P>>>27),P=$+(A^R&(T^A))+k[6]+3225465664&4294967295,$=T+(P<<9&4294967295|P>>>23),P=R+(T^A&($^T))+k[11]+643717713&4294967295,R=$+(P<<14&4294967295|P>>>18),P=A+($^T&(R^$))+k[0]+3921069994&4294967295,A=R+(P<<20&4294967295|P>>>12),P=T+(R^$&(A^R))+k[5]+3593408605&4294967295,T=A+(P<<5&4294967295|P>>>27),P=$+(A^R&(T^A))+k[10]+38016083&4294967295,$=T+(P<<9&4294967295|P>>>23),P=R+(T^A&($^T))+k[15]+3634488961&4294967295,R=$+(P<<14&4294967295|P>>>18),P=A+($^T&(R^$))+k[4]+3889429448&4294967295,A=R+(P<<20&4294967295|P>>>12),P=T+(R^$&(A^R))+k[9]+568446438&4294967295,T=A+(P<<5&4294967295|P>>>27),P=$+(A^R&(T^A))+k[14]+3275163606&4294967295,$=T+(P<<9&4294967295|P>>>23),P=R+(T^A&($^T))+k[3]+4107603335&4294967295,R=$+(P<<14&4294967295|P>>>18),P=A+($^T&(R^$))+k[8]+1163531501&4294967295,A=R+(P<<20&4294967295|P>>>12),P=T+(R^$&(A^R))+k[13]+2850285829&4294967295,T=A+(P<<5&4294967295|P>>>27),P=$+(A^R&(T^A))+k[2]+4243563512&4294967295,$=T+(P<<9&4294967295|P>>>23),P=R+(T^A&($^T))+k[7]+1735328473&4294967295,R=$+(P<<14&4294967295|P>>>18),P=A+($^T&(R^$))+k[12]+2368359562&4294967295,A=R+(P<<20&4294967295|P>>>12),P=T+(A^R^$)+k[5]+4294588738&4294967295,T=A+(P<<4&4294967295|P>>>28),P=$+(T^A^R)+k[8]+2272392833&4294967295,$=T+(P<<11&4294967295|P>>>21),P=R+($^T^A)+k[11]+1839030562&4294967295,R=$+(P<<16&4294967295|P>>>16),P=A+(R^$^T)+k[14]+4259657740&4294967295,A=R+(P<<23&4294967295|P>>>9),P=T+(A^R^$)+k[1]+2763975236&4294967295,T=A+(P<<4&4294967295|P>>>28),P=$+(T^A^R)+k[4]+1272893353&4294967295,$=T+(P<<11&4294967295|P>>>21),P=R+($^T^A)+k[7]+4139469664&4294967295,R=$+(P<<16&4294967295|P>>>16),P=A+(R^$^T)+k[10]+3200236656&4294967295,A=R+(P<<23&4294967295|P>>>9),P=T+(A^R^$)+k[13]+681279174&4294967295,T=A+(P<<4&4294967295|P>>>28),P=$+(T^A^R)+k[0]+3936430074&4294967295,$=T+(P<<11&4294967295|P>>>21),P=R+($^T^A)+k[3]+3572445317&4294967295,R=$+(P<<16&4294967295|P>>>16),P=A+(R^$^T)+k[6]+76029189&4294967295,A=R+(P<<23&4294967295|P>>>9),P=T+(A^R^$)+k[9]+3654602809&4294967295,T=A+(P<<4&4294967295|P>>>28),P=$+(T^A^R)+k[12]+3873151461&4294967295,$=T+(P<<11&4294967295|P>>>21),P=R+($^T^A)+k[15]+530742520&4294967295,R=$+(P<<16&4294967295|P>>>16),P=A+(R^$^T)+k[2]+3299628645&4294967295,A=R+(P<<23&4294967295|P>>>9),P=T+(R^(A|~$))+k[0]+4096336452&4294967295,T=A+(P<<6&4294967295|P>>>26),P=$+(A^(T|~R))+k[7]+1126891415&4294967295,$=T+(P<<10&4294967295|P>>>22),P=R+(T^($|~A))+k[14]+2878612391&4294967295,R=$+(P<<15&4294967295|P>>>17),P=A+($^(R|~T))+k[5]+4237533241&4294967295,A=R+(P<<21&4294967295|P>>>11),P=T+(R^(A|~$))+k[12]+1700485571&4294967295,T=A+(P<<6&4294967295|P>>>26),P=$+(A^(T|~R))+k[3]+2399980690&4294967295,$=T+(P<<10&4294967295|P>>>22),P=R+(T^($|~A))+k[10]+4293915773&4294967295,R=$+(P<<15&4294967295|P>>>17),P=A+($^(R|~T))+k[1]+2240044497&4294967295,A=R+(P<<21&4294967295|P>>>11),P=T+(R^(A|~$))+k[8]+1873313359&4294967295,T=A+(P<<6&4294967295|P>>>26),P=$+(A^(T|~R))+k[15]+4264355552&4294967295,$=T+(P<<10&4294967295|P>>>22),P=R+(T^($|~A))+k[6]+2734768916&4294967295,R=$+(P<<15&4294967295|P>>>17),P=A+($^(R|~T))+k[13]+1309151649&4294967295,A=R+(P<<21&4294967295|P>>>11),P=T+(R^(A|~$))+k[4]+4149444226&4294967295,T=A+(P<<6&4294967295|P>>>26),P=$+(A^(T|~R))+k[11]+3174756917&4294967295,$=T+(P<<10&4294967295|P>>>22),P=R+(T^($|~A))+k[2]+718787259&4294967295,R=$+(P<<15&4294967295|P>>>17),P=A+($^(R|~T))+k[9]+3951481745&4294967295,E.g[0]=E.g[0]+T&4294967295,E.g[1]=E.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,E.g[2]=E.g[2]+R&4294967295,E.g[3]=E.g[3]+$&4294967295}r.prototype.u=function(E,T){T===void 0&&(T=E.length);for(var A=T-this.blockSize,k=this.B,R=this.h,$=0;$<T;){if(R==0)for(;$<=A;)i(this,E,$),$+=this.blockSize;if(typeof E=="string"){for(;$<T;)if(k[R++]=E.charCodeAt($++),R==this.blockSize){i(this,k),R=0;break}}else for(;$<T;)if(k[R++]=E[$++],R==this.blockSize){i(this,k),R=0;break}}this.h=R,this.o+=T},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var T=1;T<E.length-8;++T)E[T]=0;var A=8*this.o;for(T=E.length-8;T<E.length;++T)E[T]=A&255,A/=256;for(this.u(E),E=Array(16),T=A=0;4>T;++T)for(var k=0;32>k;k+=8)E[A++]=this.g[T]>>>k&255;return E};function s(E,T){var A=a;return Object.prototype.hasOwnProperty.call(A,E)?A[E]:A[E]=T(E)}function o(E,T){this.h=T;for(var A=[],k=!0,R=E.length-1;0<=R;R--){var $=E[R]|0;k&&$==T||(A[R]=$,k=!1)}this.g=A}var a={};function u(E){return-128<=E&&128>E?s(E,function(T){return new o([T|0],0>T?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return g(l(-E));for(var T=[],A=1,k=0;E>=A;k++)T[k]=E/A|0,A*=4294967296;return new o(T,0)}function c(E,T){if(E.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E.charAt(0)=="-")return g(c(E.substring(1),T));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(T,8)),k=f,R=0;R<E.length;R+=8){var $=Math.min(8,E.length-R),P=parseInt(E.substring(R,R+$),T);8>$?($=l(Math.pow(T,$)),k=k.j($).add(l(P))):(k=k.j(A),k=k.add(l(P)))}return k}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var E=0,T=1,A=0;A<this.g.length;A++){var k=this.i(A);E+=(0<=k?k:4294967296+k)*T,T*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(p(this))return"0";if(m(this))return"-"+g(this).toString(E);for(var T=l(Math.pow(E,6)),A=this,k="";;){var R=_(A,T).g;A=y(A,R.j(T));var $=((0<A.g.length?A.g[0]:A.h)>>>0).toString(E);if(A=R,p(A))return $+k;for(;6>$.length;)$="0"+$;k=$+k}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function p(E){if(E.h!=0)return!1;for(var T=0;T<E.g.length;T++)if(E.g[T]!=0)return!1;return!0}function m(E){return E.h==-1}e.l=function(E){return E=y(this,E),m(E)?-1:p(E)?0:1};function g(E){for(var T=E.g.length,A=[],k=0;k<T;k++)A[k]=~E.g[k];return new o(A,~E.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(E){for(var T=Math.max(this.g.length,E.g.length),A=[],k=0,R=0;R<=T;R++){var $=k+(this.i(R)&65535)+(E.i(R)&65535),P=($>>>16)+(this.i(R)>>>16)+(E.i(R)>>>16);k=P>>>16,$&=65535,P&=65535,A[R]=P<<16|$}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(E,T){return E.add(g(T))}e.j=function(E){if(p(this)||p(E))return f;if(m(this))return m(E)?g(this).j(g(E)):g(g(this).j(E));if(m(E))return g(this.j(g(E)));if(0>this.l(h)&&0>E.l(h))return l(this.m()*E.m());for(var T=this.g.length+E.g.length,A=[],k=0;k<2*T;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<E.g.length;R++){var $=this.i(k)>>>16,P=this.i(k)&65535,O=E.i(R)>>>16,M=E.i(R)&65535;A[2*k+2*R]+=P*M,v(A,2*k+2*R),A[2*k+2*R+1]+=$*M,v(A,2*k+2*R+1),A[2*k+2*R+1]+=P*O,v(A,2*k+2*R+1),A[2*k+2*R+2]+=$*O,v(A,2*k+2*R+2)}for(k=0;k<T;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=T;k<2*T;k++)A[k]=0;return new o(A,0)};function v(E,T){for(;(E[T]&65535)!=E[T];)E[T+1]+=E[T]>>>16,E[T]&=65535,T++}function b(E,T){this.g=E,this.h=T}function _(E,T){if(p(T))throw Error("division by zero");if(p(E))return new b(f,f);if(m(E))return T=_(g(E),T),new b(g(T.g),g(T.h));if(m(T))return T=_(E,g(T)),new b(g(T.g),T.h);if(30<E.g.length){if(m(E)||m(T))throw Error("slowDivide_ only works with positive integers.");for(var A=d,k=T;0>=k.l(E);)A=x(A),k=x(k);var R=S(A,1),$=S(k,1);for(k=S(k,2),A=S(A,2);!p(k);){var P=$.add(k);0>=P.l(E)&&(R=R.add(A),$=P),k=S(k,1),A=S(A,1)}return T=y(E,R.j(T)),new b(R,T)}for(R=f;0<=E.l(T);){for(A=Math.max(1,Math.floor(E.m()/T.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),$=l(A),P=$.j(T);m(P)||0<P.l(E);)A-=k,$=l(A),P=$.j(T);p($)&&($=d),R=R.add($),E=y(E,P)}return new b(R,E)}e.A=function(E){return _(this,E).h},e.and=function(E){for(var T=Math.max(this.g.length,E.g.length),A=[],k=0;k<T;k++)A[k]=this.i(k)&E.i(k);return new o(A,this.h&E.h)},e.or=function(E){for(var T=Math.max(this.g.length,E.g.length),A=[],k=0;k<T;k++)A[k]=this.i(k)|E.i(k);return new o(A,this.h|E.h)},e.xor=function(E){for(var T=Math.max(this.g.length,E.g.length),A=[],k=0;k<T;k++)A[k]=this.i(k)^E.i(k);return new o(A,this.h^E.h)};function x(E){for(var T=E.g.length+1,A=[],k=0;k<T;k++)A[k]=E.i(k)<<1|E.i(k-1)>>>31;return new o(A,E.h)}function S(E,T){var A=T>>5;T%=32;for(var k=E.g.length-A,R=[],$=0;$<k;$++)R[$]=0<T?E.i($+A)>>>T|E.i($+A+1)<<32-T:E.i($+A);return new o(R,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,UPe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,T1=o}).apply(typeof dhe<"u"?dhe:typeof self<"u"?self:typeof window<"u"?window:{});var UN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zPe,VPe,EC,HPe,vO,IV,qPe,WPe,GPe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,L,q){return C==Array.prototype||C==Object.prototype||(C[L]=q.value),C};function n(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof UN=="object"&&UN];for(var L=0;L<C.length;++L){var q=C[L];if(q&&q.Math==Math)return q}throw Error("Cannot find global object")}var r=n(this);function i(C,L){if(L)e:{var q=r;C=C.split(".");for(var Q=0;Q<C.length-1;Q++){var _e=C[Q];if(!(_e in q))break e;q=q[_e]}C=C[C.length-1],Q=q[C],L=L(Q),L!=Q&&L!=null&&t(q,C,{configurable:!0,writable:!0,value:L})}}function s(C,L){C instanceof String&&(C+="");var q=0,Q=!1,_e={next:function(){if(!Q&&q<C.length){var Oe=q++;return{value:L(Oe,C[Oe]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}i("Array.prototype.values",function(C){return C||function(){return s(this,function(L,q){return q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(C){var L=typeof C;return L=L!="object"?L:C?Array.isArray(C)?"array":L:"null",L=="array"||L=="object"&&typeof C.length=="number"}function l(C){var L=typeof C;return L=="object"&&C!=null||L=="function"}function c(C,L,q){return C.call.apply(C.bind,arguments)}function f(C,L,q){if(!C)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,Q),C.apply(L,_e)}}return function(){return C.apply(L,arguments)}}function d(C,L,q){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(C,L){var q=Array.prototype.slice.call(arguments,1);return function(){var Q=q.slice();return Q.push.apply(Q,arguments),C.apply(this,Q)}}function p(C,L){function q(){}q.prototype=L.prototype,C.aa=L.prototype,C.prototype=new q,C.prototype.constructor=C,C.Qb=function(Q,_e,Oe){for(var lt=Array(arguments.length-2),Kr=2;Kr<arguments.length;Kr++)lt[Kr-2]=arguments[Kr];return L.prototype[_e].apply(Q,lt)}}function m(C){const L=C.length;if(0<L){const q=Array(L);for(let Q=0;Q<L;Q++)q[Q]=C[Q];return q}return[]}function g(C,L){for(let q=1;q<arguments.length;q++){const Q=arguments[q];if(u(Q)){const _e=C.length||0,Oe=Q.length||0;C.length=_e+Oe;for(let lt=0;lt<Oe;lt++)C[_e+lt]=Q[lt]}else C.push(Q)}}class y{constructor(L,q){this.i=L,this.j=q,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}function v(C){return/^[\s\xa0]*$/.test(C)}function b(){var C=a.navigator;return C&&(C=C.userAgent)?C:""}function _(C){return _[" "](C),C}_[" "]=function(){};var x=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function S(C,L,q){for(const Q in C)L.call(q,C[Q],Q,C)}function E(C,L){for(const q in C)L.call(void 0,C[q],q,C)}function T(C){const L={};for(const q in C)L[q]=C[q];return L}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(C,L){let q,Q;for(let _e=1;_e<arguments.length;_e++){Q=arguments[_e];for(q in Q)C[q]=Q[q];for(let Oe=0;Oe<A.length;Oe++)q=A[Oe],Object.prototype.hasOwnProperty.call(Q,q)&&(C[q]=Q[q])}}function R(C){var L=1;C=C.split(":");const q=[];for(;0<L&&C.length;)q.push(C.shift()),L--;return C.length&&q.push(C.join(":")),q}function $(C){a.setTimeout(()=>{throw C},0)}function P(){var C=V;let L=null;return C.g&&(L=C.g,C.g=C.g.next,C.g||(C.h=null),L.next=null),L}class O{constructor(){this.h=this.g=null}add(L,q){const Q=M.get();Q.set(L,q),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var M=new y(()=>new j,C=>C.reset());class j{constructor(){this.next=this.g=this.h=null}set(L,q){this.h=L,this.g=q,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,V=new O,D=()=>{const C=a.Promise.resolve(void 0);B=()=>{C.then(z)}};var z=()=>{for(var C;C=P();){try{C.h.call(C.g)}catch(q){$(q)}var L=M;L.j(C),100>L.h&&(L.h++,C.next=L.g,L.g=C)}U=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(C,L){this.type=C,this.g=this.target=L,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var C=!1,L=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const q=()=>{};a.addEventListener("test",q,L),a.removeEventListener("test",q,L)}catch{}return C}();function G(C,L){if(F.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var q=this.type=C.type,Q=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=L,L=C.relatedTarget){if(x){e:{try{_(L.nodeName);var _e=!0;break e}catch{}_e=!1}_e||(L=null)}}else q=="mouseover"?L=C.fromElement:q=="mouseout"&&(L=C.toElement);this.relatedTarget=L,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:ee[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&G.aa.h.call(this)}}p(G,F);var ee={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),de=0;function he(C,L,q,Q,_e){this.listener=C,this.proxy=null,this.src=L,this.type=q,this.capture=!!Q,this.ha=_e,this.key=++de,this.da=this.fa=!1}function ye(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function Ce(C){this.src=C,this.g={},this.h=0}Ce.prototype.add=function(C,L,q,Q,_e){var Oe=C.toString();C=this.g[Oe],C||(C=this.g[Oe]=[],this.h++);var lt=Ye(C,L,Q,_e);return-1<lt?(L=C[lt],q||(L.fa=!1)):(L=new he(L,this.src,Oe,!!Q,_e),L.fa=q,C.push(L)),L};function ve(C,L){var q=L.type;if(q in C.g){var Q=C.g[q],_e=Array.prototype.indexOf.call(Q,L,void 0),Oe;(Oe=0<=_e)&&Array.prototype.splice.call(Q,_e,1),Oe&&(ye(L),C.g[q].length==0&&(delete C.g[q],C.h--))}}function Ye(C,L,q,Q){for(var _e=0;_e<C.length;++_e){var Oe=C[_e];if(!Oe.da&&Oe.listener==L&&Oe.capture==!!q&&Oe.ha==Q)return _e}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),pt={};function rt(C,L,q,Q,_e){if(Array.isArray(L)){for(var Oe=0;Oe<L.length;Oe++)rt(C,L[Oe],q,Q,_e);return null}return q=gt(q),C&&C[le]?C.K(L,q,l(Q)?!!Q.capture:!!Q,_e):be(C,L,q,!1,Q,_e)}function be(C,L,q,Q,_e,Oe){if(!L)throw Error("Invalid event type");var lt=l(_e)?!!_e.capture:!!_e,Kr=me(C);if(Kr||(C[Ue]=Kr=new Ce(C)),q=Kr.add(L,q,Q,lt,Oe),q.proxy)return q;if(Q=Ae(),q.proxy=Q,Q.src=C,Q.listener=q,C.addEventListener)H||(_e=lt),_e===void 0&&(_e=!1),C.addEventListener(L.toString(),Q,_e);else if(C.attachEvent)C.attachEvent(Nt(L.toString()),Q);else if(C.addListener&&C.removeListener)C.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return q}function Ae(){function C(q){return L.call(C.src,C.listener,q)}const L=qe;return C}function Ve(C,L,q,Q,_e){if(Array.isArray(L))for(var Oe=0;Oe<L.length;Oe++)Ve(C,L[Oe],q,Q,_e);else Q=l(Q)?!!Q.capture:!!Q,q=gt(q),C&&C[le]?(C=C.i,L=String(L).toString(),L in C.g&&(Oe=C.g[L],q=Ye(Oe,q,Q,_e),-1<q&&(ye(Oe[q]),Array.prototype.splice.call(Oe,q,1),Oe.length==0&&(delete C.g[L],C.h--)))):C&&(C=me(C))&&(L=C.g[L.toString()],C=-1,L&&(C=Ye(L,q,Q,_e)),(q=-1<C?L[C]:null)&&ut(q))}function ut(C){if(typeof C!="number"&&C&&!C.da){var L=C.src;if(L&&L[le])ve(L.i,C);else{var q=C.type,Q=C.proxy;L.removeEventListener?L.removeEventListener(q,Q,C.capture):L.detachEvent?L.detachEvent(Nt(q),Q):L.addListener&&L.removeListener&&L.removeListener(Q),(q=me(L))?(ve(q,C),q.h==0&&(q.src=null,L[Ue]=null)):ye(C)}}}function Nt(C){return C in pt?pt[C]:pt[C]="on"+C}function qe(C,L){if(C.da)C=!0;else{L=new G(L,this);var q=C.listener,Q=C.ha||C.src;C.fa&&ut(C),C=q.call(Q,L)}return C}function me(C){return C=C[Ue],C instanceof Ce?C:null}var ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function gt(C){return typeof C=="function"?C:(C[ct]||(C[ct]=function(L){return C.handleEvent(L)}),C[ct])}function wt(){W.call(this),this.i=new Ce(this),this.M=this,this.F=null}p(wt,W),wt.prototype[le]=!0,wt.prototype.removeEventListener=function(C,L,q,Q){Ve(this,C,L,q,Q)};function pe(C,L){var q,Q=C.F;if(Q)for(q=[];Q;Q=Q.F)q.push(Q);if(C=C.M,Q=L.type||L,typeof L=="string")L=new F(L,C);else if(L instanceof F)L.target=L.target||C;else{var _e=L;L=new F(Q,C),k(L,_e)}if(_e=!0,q)for(var Oe=q.length-1;0<=Oe;Oe--){var lt=L.g=q[Oe];_e=Ie(lt,Q,!0,L)&&_e}if(lt=L.g=C,_e=Ie(lt,Q,!0,L)&&_e,_e=Ie(lt,Q,!1,L)&&_e,q)for(Oe=0;Oe<q.length;Oe++)lt=L.g=q[Oe],_e=Ie(lt,Q,!1,L)&&_e}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var C=this.i,L;for(L in C.g){for(var q=C.g[L],Q=0;Q<q.length;Q++)ye(q[Q]);delete C.g[L],C.h--}}this.F=null},wt.prototype.K=function(C,L,q,Q){return this.i.add(String(C),L,!1,q,Q)},wt.prototype.L=function(C,L,q,Q){return this.i.add(String(C),L,!0,q,Q)};function Ie(C,L,q,Q){if(L=C.i.g[String(L)],!L)return!0;L=L.concat();for(var _e=!0,Oe=0;Oe<L.length;++Oe){var lt=L[Oe];if(lt&&!lt.da&&lt.capture==q){var Kr=lt.listener,go=lt.ha||lt.src;lt.fa&&ve(C.i,lt),_e=Kr.call(go,Q)!==!1&&_e}}return _e&&!Q.defaultPrevented}function Ke(C,L,q){if(typeof C=="function")q&&(C=d(C,q));else if(C&&typeof C.handleEvent=="function")C=d(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(L)?-1:a.setTimeout(C,L||0)}function yt(C){C.g=Ke(()=>{C.g=null,C.i&&(C.i=!1,yt(C))},C.l);const L=C.h;C.h=null,C.m.apply(null,L)}class Vt extends W{constructor(L,q){super(),this.m=L,this.l=q,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:yt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(C){W.call(this),this.h=C,this.g={}}p(er,W);var Vn=[];function $n(C){S(C.g,function(L,q){this.g.hasOwnProperty(q)&&ut(L)},C),C.g={}}er.prototype.N=function(){er.aa.N.call(this),$n(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=a.JSON.stringify,gr=a.JSON.parse,Qt=class{stringify(C){return a.JSON.stringify(C,void 0)}parse(C){return a.JSON.parse(C,void 0)}};function qr(){}qr.prototype.h=null;function Zr(C){return C.h||(C.h=C.i())}function ji(){}var Cn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bi(){F.call(this,"d")}p(Bi,F);function Tr(){F.call(this,"c")}p(Tr,F);var gs={},bp=null;function ol(){return bp=bp||new wt}gs.La="serverreachability";function _d(C){F.call(this,gs.La,C)}p(_d,F);function wr(C){const L=ol();pe(L,new _d(L))}gs.STAT_EVENT="statevent";function ki(C,L){F.call(this,gs.STAT_EVENT,C),this.stat=L}p(ki,F);function ei(C){const L=ol();pe(L,new ki(L,C))}gs.Ma="timingevent";function cu(C,L){F.call(this,gs.Ma,C),this.size=L}p(cu,F);function Ra(C,L){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){C()},L)}function Na(){this.g=!0}Na.prototype.xa=function(){this.g=!1};function oe(C,L,q,Q,_e,Oe){C.info(function(){if(C.g)if(Oe)for(var lt="",Kr=Oe.split("&"),go=0;go<Kr.length;go++){var ur=Kr[go].split("=");if(1<ur.length){var Xo=ur[0];ur=ur[1];var Qo=Xo.split("_");lt=2<=Qo.length&&Qo[1]=="type"?lt+(Xo+"="+ur+"&"):lt+(Xo+"=redacted&")}}else lt=null;else lt=Oe;return"XMLHTTP REQ ("+Q+") [attempt "+_e+"]: "+L+`
`+q+`
`+lt})}function te(C,L,q,Q,_e,Oe,lt){C.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+_e+"]: "+L+`
`+q+`
`+Oe+" "+lt})}function ae(C,L,q,Q){C.info(function(){return"XMLHTTP TEXT ("+L+"): "+Se(C,q)+(Q?" "+Q:"")})}function Te(C,L){C.info(function(){return"TIMEOUT: "+L})}Na.prototype.info=function(){};function Se(C,L){if(!C.g)return L;if(!L)return null;try{var q=JSON.parse(L);if(q){for(C=0;C<q.length;C++)if(Array.isArray(q[C])){var Q=q[C];if(!(2>Q.length)){var _e=Q[1];if(Array.isArray(_e)&&!(1>_e.length)){var Oe=_e[0];if(Oe!="noop"&&Oe!="stop"&&Oe!="close")for(var lt=1;lt<_e.length;lt++)_e[lt]=""}}}}return gn(q)}catch{return L}}var st={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},qt;function Pn(){}p(Pn,qr),Pn.prototype.g=function(){return new XMLHttpRequest},Pn.prototype.i=function(){return{}},qt=new Pn;function Mn(C,L,q,Q){this.j=C,this.i=L,this.l=q,this.R=Q||1,this.U=new er(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pn}function pn(){this.i=null,this.g="",this.h=!1}var tr={},Cr={};function Ht(C,L,q){C.L=1,C.v=Ln(We(L)),C.m=q,C.P=!0,nr(C,null)}function nr(C,L){C.F=Date.now(),Ri(C),C.A=We(C.v);var q=C.A,Q=C.R;Array.isArray(Q)||(Q=[String(Q)]),ER(q.i,"t",Q),C.C=0,q=C.j.J,C.h=new pn,C.g=Aie(C.j,q?L:null,!C.m),0<C.O&&(C.M=new Vt(d(C.Y,C,C.g),C.O)),L=C.U,q=C.g,Q=C.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(Vn[0]=_e.toString()),_e=Vn);for(var Oe=0;Oe<_e.length;Oe++){var lt=rt(q,_e[Oe],Q||L.handleEvent,!1,L.h||L);if(!lt)break;L.g[lt.key]=lt}L=C.H?T(C.H):{},C.m?(C.u||(C.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,L)):(C.u="GET",C.g.ea(C.A,C.u,null,L)),wr(),oe(C.i,C.u,C.A,C.l,C.R,C.m)}Mn.prototype.ca=function(C){C=C.target;const L=this.M;L&&is(C)==3?L.j():this.Y(C)},Mn.prototype.Y=function(C){try{if(C==this.g)e:{const Qo=is(this.g);var L=this.g.Ba();const f_=this.g.Z();if(!(3>Qo)&&(Qo!=3||this.g&&(this.h.h||this.g.oa()||Ko(this.g)))){this.J||Qo!=4||L==7||(L==8||0>=f_?wr(3):wr(2)),ti(this);var q=this.g.Z();this.X=q;t:if(Wr(this)){var Q=Ko(this.g);C="";var _e=Q.length,Oe=is(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ui(this),mo(this);var lt="";break t}this.h.i=new a.TextDecoder}for(L=0;L<_e;L++)this.h.h=!0,C+=this.h.i.decode(Q[L],{stream:!(Oe&&L==_e-1)});Q.length=0,this.h.g+=C,this.C=0,lt=this.h.g}else lt=this.g.oa();if(this.o=q==200,te(this.i,this.u,this.A,this.l,this.R,Qo,q),this.o){if(this.T&&!this.K){t:{if(this.g){var Kr,go=this.g;if((Kr=go.g?go.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Kr)){var ur=Kr;break t}}ur=null}if(q=ur)ae(this.i,this.l,q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zi(this,q);else{this.o=!1,this.s=3,ei(12),Ui(this),mo(this);break e}}if(this.P){q=!0;let af;for(;!this.J&&this.C<lt.length;)if(af=Kn(this,lt),af==Cr){Qo==4&&(this.s=4,ei(14),q=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(af==tr){this.s=4,ei(15),ae(this.i,this.l,lt,"[Invalid Chunk]"),q=!1;break}else ae(this.i,this.l,af,null),zi(this,af);if(Wr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Qo!=4||lt.length!=0||this.h.h||(this.s=1,ei(16),q=!1),this.o=this.o&&q,!q)ae(this.i,this.l,lt,"[Invalid Chunked Response]"),Ui(this),mo(this);else if(0<lt.length&&!this.W){this.W=!0;var Xo=this.j;Xo.g==this&&Xo.ba&&!Xo.M&&(Xo.j.info("Great, no buffering proxy detected. Bytes received: "+lt.length),q5(Xo),Xo.M=!0,ei(11))}}else ae(this.i,this.l,lt,null),zi(this,lt);Qo==4&&Ui(this),this.o&&!this.J&&(Qo==4?xie(this.j,this):(this.o=!1,Ri(this)))}else av(this.g),q==400&&0<lt.indexOf("Unknown SID")?(this.s=3,ei(12)):(this.s=0,ei(13)),Ui(this),mo(this)}}}catch{}finally{}};function Wr(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function Kn(C,L){var q=C.C,Q=L.indexOf(`
`,q);return Q==-1?Cr:(q=Number(L.substring(q,Q)),isNaN(q)?tr:(Q+=1,Q+q>L.length?Cr:(L=L.slice(Q,Q+q),C.C=Q+q,L)))}Mn.prototype.cancel=function(){this.J=!0,Ui(this)};function Ri(C){C.S=Date.now()+C.I,Vs(C,C.I)}function Vs(C,L){if(C.B!=null)throw Error("WatchDog timer not null");C.B=Ra(d(C.ba,C),L)}function ti(C){C.B&&(a.clearTimeout(C.B),C.B=null)}Mn.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(Te(this.i,this.A),this.L!=2&&(wr(),ei(17)),Ui(this),this.s=2,mo(this)):Vs(this,this.S-C)};function mo(C){C.j.G==0||C.J||xie(C.j,C)}function Ui(C){ti(C);var L=C.M;L&&typeof L.ma=="function"&&L.ma(),C.M=null,$n(C.U),C.g&&(L=C.g,C.g=null,L.abort(),L.ma())}function zi(C,L){try{var q=C.j;if(q.G!=0&&(q.g==C||wd(q.h,C))){if(!C.K&&wd(q.h,C)&&q.G==3){try{var Q=q.Da.g.parse(L)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var _e=Q;if(_e[0]==0){e:if(!q.u){if(q.g)if(q.g.F+3e3<C.F)kR(q),AR(q);else break e;H5(q),ei(18)}}else q.za=_e[1],0<q.za-q.T&&37500>_e[2]&&q.F&&q.v==0&&!q.C&&(q.C=Ra(d(q.Za,q),6e3));if(1>=Ql(q.h)&&q.ca){try{q.ca()}catch{}q.ca=void 0}}else uv(q,11)}else if((C.K||q.g==C)&&kR(q),!v(L))for(_e=q.Da.g.parse(L),L=0;L<_e.length;L++){let ur=_e[L];if(q.T=ur[0],ur=ur[1],q.G==2)if(ur[0]=="c"){q.K=ur[1],q.ia=ur[2];const Xo=ur[3];Xo!=null&&(q.la=Xo,q.j.info("VER="+q.la));const Qo=ur[4];Qo!=null&&(q.Aa=Qo,q.j.info("SVER="+q.Aa));const f_=ur[5];f_!=null&&typeof f_=="number"&&0<f_&&(Q=1.5*f_,q.L=Q,q.j.info("backChannelRequestTimeoutMs_="+Q)),Q=q;const af=C.g;if(af){const NR=af.g?af.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(NR){var Oe=Q.h;Oe.g||NR.indexOf("spdy")==-1&&NR.indexOf("quic")==-1&&NR.indexOf("h2")==-1||(Oe.j=Oe.l,Oe.g=new Set,Oe.h&&(Y(Oe,Oe.h),Oe.h=null))}if(Q.D){const W5=af.g?af.g.getResponseHeader("X-HTTP-Session-Id"):null;W5&&(Q.ya=W5,Pt(Q.I,Q.D,W5))}}q.G=3,q.l&&q.l.ua(),q.ba&&(q.R=Date.now()-C.F,q.j.info("Handshake RTT: "+q.R+"ms")),Q=q;var lt=C;if(Q.qa=Cie(Q,Q.J?Q.ia:null,Q.W),lt.K){se(Q.h,lt);var Kr=lt,go=Q.L;go&&(Kr.I=go),Kr.B&&(ti(Kr),Ri(Kr)),Q.g=lt}else wie(Q);0<q.i.length&&IR(q)}else ur[0]!="stop"&&ur[0]!="close"||uv(q,7);else q.G==3&&(ur[0]=="stop"||ur[0]=="close"?ur[0]=="stop"?uv(q,7):l_(q):ur[0]!="noop"&&q.l&&q.l.ta(ur),q.v=0)}}wr(4)}catch{}}var Go=class{constructor(C,L){this.g=C,this.map=L}};function Pa(C){this.l=C||10,a.PerformanceNavigationTiming?(C=a.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hs(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function Ql(C){return C.h?1:C.g?C.g.size:0}function wd(C,L){return C.h?C.h==L:C.g?C.g.has(L):!1}function Y(C,L){C.g?C.g.add(L):C.h=L}function se(C,L){C.h&&C.h==L?C.h=null:C.g&&C.g.has(L)&&C.g.delete(L)}Pa.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function Z(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let L=C.i;for(const q of C.g.values())L=L.concat(q.D);return L}return m(C.i)}function fe(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(u(C)){for(var L=[],q=C.length,Q=0;Q<q;Q++)L.push(C[Q]);return L}L=[],q=0;for(Q in C)L[q++]=C[Q];return L}function ge(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(u(C)||typeof C=="string"){var L=[];C=C.length;for(var q=0;q<C;q++)L.push(q);return L}L=[],q=0;for(const Q in C)L[q++]=Q;return L}}}function ce(C,L){if(C.forEach&&typeof C.forEach=="function")C.forEach(L,void 0);else if(u(C)||typeof C=="string")Array.prototype.forEach.call(C,L,void 0);else for(var q=ge(C),Q=fe(C),_e=Q.length,Oe=0;Oe<_e;Oe++)L.call(void 0,Q[Oe],q&&q[Oe],C)}var De=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ze(C,L){if(C){C=C.split("&");for(var q=0;q<C.length;q++){var Q=C[q].indexOf("="),_e=null;if(0<=Q){var Oe=C[q].substring(0,Q);_e=C[q].substring(Q+1)}else Oe=C[q];L(Oe,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function He(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof He){this.h=C.h,it(this,C.j),this.o=C.o,this.g=C.g,_t(this,C.s),this.l=C.l;var L=C.i,q=new Jl;q.i=L.i,L.g&&(q.g=new Map(L.g),q.h=L.h),mn(this,q),this.m=C.m}else C&&(L=String(C).match(De))?(this.h=!1,it(this,L[1]||"",!0),this.o=Ar(L[2]||""),this.g=Ar(L[3]||"",!0),_t(this,L[4]),this.l=Ar(L[5]||"",!0),mn(this,L[6]||"",!0),this.m=Ar(L[7]||"")):(this.h=!1,this.i=new Jl(null,this.h))}He.prototype.toString=function(){var C=[],L=this.j;L&&C.push(Ir(L,Ed,!0),":");var q=this.g;return(q||L=="file")&&(C.push("//"),(L=this.o)&&C.push(Ir(L,Ed,!0),"@"),C.push(encodeURIComponent(String(q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),q=this.s,q!=null&&C.push(":",String(q))),(q=this.l)&&(this.g&&q.charAt(0)!="/"&&C.push("/"),C.push(Ir(q,q.charAt(0)=="/"?KS:_p,!0))),(q=this.i.toString())&&C.push("?",q),(q=this.m)&&C.push("#",Ir(q,wR)),C.join("")};function We(C){return new He(C)}function it(C,L,q){C.j=q?Ar(L,!0):L,C.j&&(C.j=C.j.replace(/:$/,""))}function _t(C,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);C.s=L}else C.s=null}function mn(C,L,q){L instanceof Jl?(C.i=L,XS(C.i,C.h)):(q||(L=Ir(L,rv)),C.i=new Jl(L,C.h))}function Pt(C,L,q){C.i.set(L,q)}function Ln(C){return Pt(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function Ar(C,L){return C?L?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function Ir(C,L,q){return typeof C=="string"?(C=encodeURI(C).replace(L,Yo),q&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function Yo(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var Ed=/[#\/\?@]/g,_p=/[#\?:]/g,KS=/[#\?]/g,rv=/[#\?@]/g,wR=/#/g;function Jl(C,L){this.h=this.g=null,this.i=C||null,this.j=!!L}function fu(C){C.g||(C.g=new Map,C.h=0,C.i&&ze(C.i,function(L,q){C.add(decodeURIComponent(L.replace(/\+/g," ")),q)}))}e=Jl.prototype,e.add=function(C,L){fu(this),this.i=null,C=Ep(this,C);var q=this.g.get(C);return q||this.g.set(C,q=[]),q.push(L),this.h+=1,this};function wp(C,L){fu(C),L=Ep(C,L),C.g.has(L)&&(C.i=null,C.h-=C.g.get(L).length,C.g.delete(L))}function a_(C,L){return fu(C),L=Ep(C,L),C.g.has(L)}e.forEach=function(C,L){fu(this),this.g.forEach(function(q,Q){q.forEach(function(_e){C.call(L,_e,Q,this)},this)},this)},e.na=function(){fu(this);const C=Array.from(this.g.values()),L=Array.from(this.g.keys()),q=[];for(let Q=0;Q<L.length;Q++){const _e=C[Q];for(let Oe=0;Oe<_e.length;Oe++)q.push(L[Q])}return q},e.V=function(C){fu(this);let L=[];if(typeof C=="string")a_(this,C)&&(L=L.concat(this.g.get(Ep(this,C))));else{C=Array.from(this.g.values());for(let q=0;q<C.length;q++)L=L.concat(C[q])}return L},e.set=function(C,L){return fu(this),this.i=null,C=Ep(this,C),a_(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[L]),this.h+=1,this},e.get=function(C,L){return C?(C=this.V(C),0<C.length?String(C[0]):L):L};function ER(C,L,q){wp(C,L),0<q.length&&(C.i=null,C.g.set(Ep(C,L),m(q)),C.h+=q.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],L=Array.from(this.g.keys());for(var q=0;q<L.length;q++){var Q=L[q];const Oe=encodeURIComponent(String(Q)),lt=this.V(Q);for(Q=0;Q<lt.length;Q++){var _e=Oe;lt[Q]!==""&&(_e+="="+encodeURIComponent(String(lt[Q]))),C.push(_e)}}return this.i=C.join("&")};function Ep(C,L){return L=String(L),C.j&&(L=L.toLowerCase()),L}function XS(C,L){L&&!C.j&&(fu(C),C.i=null,C.g.forEach(function(q,Q){var _e=Q.toLowerCase();Q!=_e&&(wp(this,Q),ER(this,_e,q))},C)),C.j=L}function xR(C,L){const q=new Na;if(a.Image){const Q=new Image;Q.onload=h(du,q,"TestLoadImage: loaded",!0,L,Q),Q.onerror=h(du,q,"TestLoadImage: error",!1,L,Q),Q.onabort=h(du,q,"TestLoadImage: abort",!1,L,Q),Q.ontimeout=h(du,q,"TestLoadImage: timeout",!1,L,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=C}else L(!1)}function xp(C,L){const q=new Na,Q=new AbortController,_e=setTimeout(()=>{Q.abort(),du(q,"TestPingServer: timeout",!1,L)},1e4);fetch(C,{signal:Q.signal}).then(Oe=>{clearTimeout(_e),Oe.ok?du(q,"TestPingServer: ok",!0,L):du(q,"TestPingServer: server error",!1,L)}).catch(()=>{clearTimeout(_e),du(q,"TestPingServer: error",!1,L)})}function du(C,L,q,Q,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),Q(q)}catch{}}function V5(){this.g=new Qt}function SR(C,L,q){const Q=q||"";try{ce(C,function(_e,Oe){let lt=_e;l(_e)&&(lt=gn(_e)),L.push(Q+Oe+"="+encodeURIComponent(lt))})}catch(_e){throw L.push(Q+"type="+encodeURIComponent("_badmap")),_e}}function iv(C){this.l=C.Ub||null,this.j=C.eb||!1}p(iv,qr),iv.prototype.g=function(){return new sv(this.l,this.j)},iv.prototype.i=function(C){return function(){return C}}({});function sv(C,L){wt.call(this),this.D=C,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(sv,wt),e=sv.prototype,e.open=function(C,L){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=L,this.readyState=1,yg(this)},e.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(L.body=C),(this.D||a).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ov(this)),this.readyState=0},e.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,yg(this)),this.g&&(this.readyState=3,yg(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;TR(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function TR(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}e.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var L=C.value?C.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!C.done}))&&(this.response=this.responseText+=L)}C.done?ov(this):yg(this),this.readyState==3&&TR(this)}},e.Ra=function(C){this.g&&(this.response=this.responseText=C,ov(this))},e.Qa=function(C){this.g&&(this.response=C,ov(this))},e.ga=function(){this.g&&ov(this)};function ov(C){C.readyState=4,C.l=null,C.j=null,C.v=null,yg(C)}e.setRequestHeader=function(C,L){this.u.append(C,L)},e.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],L=this.h.entries();for(var q=L.next();!q.done;)q=q.value,C.push(q[0]+": "+q[1]),q=L.next();return C.join(`\r
`)};function yg(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(sv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function CR(C){let L="";return S(C,function(q,Q){L+=Q,L+=":",L+=q,L+=`\r
`}),L}function ne(C,L,q){e:{for(Q in q){var Q=!1;break e}Q=!0}Q||(q=CR(q),typeof C=="string"?q!=null&&encodeURIComponent(String(q)):Pt(C,L,q))}function ue(C){wt.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,wt);var ke=/^https?$/i,At=["POST","PUT"];e=ue.prototype,e.Ha=function(C){this.J=C},e.ea=function(C,L,q,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);L=L?L.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():qt.g(),this.v=this.o?Zr(this.o):Zr(qt),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(L,String(C),!0),this.B=!1}catch(Oe){On(this,Oe);return}if(C=q||"",q=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var _e in Q)q.set(_e,Q[_e]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Oe of Q.keys())q.set(Oe,Q.get(Oe));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(q.keys()).find(Oe=>Oe.toLowerCase()=="content-type"),_e=a.FormData&&C instanceof a.FormData,!(0<=Array.prototype.indexOf.call(At,L,void 0))||Q||_e||q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Oe,lt]of q)this.g.setRequestHeader(Oe,lt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yr(this),this.u=!0,this.g.send(C),this.u=!1}catch(Oe){On(this,Oe)}};function On(C,L){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=L,C.m=5,Er(C),Fn(C)}function Er(C){C.A||(C.A=!0,pe(C,"complete"),pe(C,"error"))}e.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,pe(this,"complete"),pe(this,"abort"),Fn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fn(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Gr(this):this.bb())},e.bb=function(){Gr(this)};function Gr(C){if(C.h&&typeof o<"u"&&(!C.v[1]||is(C)!=4||C.Z()!=2)){if(C.u&&is(C)==4)Ke(C.Ea,0,C);else if(pe(C,"readystatechange"),is(C)==4){C.h=!1;try{const lt=C.Z();e:switch(lt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var q;if(!(q=L)){var Q;if(Q=lt===0){var _e=String(C.D).match(De)[1]||null;!_e&&a.self&&a.self.location&&(_e=a.self.location.protocol.slice(0,-1)),Q=!ke.test(_e?_e.toLowerCase():"")}q=Q}if(q)pe(C,"complete"),pe(C,"success");else{C.m=6;try{var Oe=2<is(C)?C.g.statusText:""}catch{Oe=""}C.l=Oe+" ["+C.Z()+"]",Er(C)}}finally{Fn(C)}}}}function Fn(C,L){if(C.g){Yr(C);const q=C.g,Q=C.v[0]?()=>{}:null;C.g=null,C.v=null,L||pe(C,"ready");try{q.onreadystatechange=Q}catch{}}}function Yr(C){C.I&&(a.clearTimeout(C.I),C.I=null)}e.isActive=function(){return!!this.g};function is(C){return C.g?C.g.readyState:0}e.Z=function(){try{return 2<is(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(C){if(this.g){var L=this.g.responseText;return C&&L.indexOf(C)==0&&(L=L.substring(C.length)),gr(L)}};function Ko(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function av(C){const L={};C=(C.g&&2<=is(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<C.length;Q++){if(v(C[Q]))continue;var q=R(C[Q]);const _e=q[0];if(q=q[1],typeof q!="string")continue;q=q.trim();const Oe=L[_e]||[];L[_e]=Oe,Oe.push(q)}E(L,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sp(C,L,q){return q&&q.internalChannelParams&&q.internalChannelParams[C]||L}function u_(C){this.Aa=0,this.i=[],this.j=new Na,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Sp("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Sp("baseRetryDelayMs",5e3,C),this.cb=Sp("retryDelaySeedMs",1e4,C),this.Wa=Sp("forwardChannelMaxRetries",2,C),this.wa=Sp("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new Pa(C&&C.concurrentRequestLimit),this.Da=new V5,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=u_.prototype,e.la=8,e.G=1,e.connect=function(C,L,q,Q){ei(0),this.W=C,this.H=L||{},q&&Q!==void 0&&(this.H.OSID=q,this.H.OAID=Q),this.F=this.X,this.I=Cie(this,null,this.W),IR(this)};function l_(C){if(vie(C),C.G==3){var L=C.U++,q=We(C.I);if(Pt(q,"SID",C.K),Pt(q,"RID",L),Pt(q,"TYPE","terminate"),QS(C,q),L=new Mn(C,C.j,L),L.L=2,L.v=Ln(We(q)),q=!1,a.navigator&&a.navigator.sendBeacon)try{q=a.navigator.sendBeacon(L.v.toString(),"")}catch{}!q&&a.Image&&(new Image().src=L.v,q=!0),q||(L.g=Aie(L.j,null),L.g.ea(L.v)),L.F=Date.now(),Ri(L)}Tie(C)}function AR(C){C.g&&(q5(C),C.g.cancel(),C.g=null)}function vie(C){AR(C),C.u&&(a.clearTimeout(C.u),C.u=null),kR(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&a.clearTimeout(C.s),C.s=null)}function IR(C){if(!Hs(C.h)&&!C.s){C.s=!0;var L=C.Ga;B||D(),U||(B(),U=!0),V.add(L,C),C.B=0}}function d9e(C,L){return Ql(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=L.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=Ra(d(C.Ga,C,L),Sie(C,C.B)),C.B++,!0)}e.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const _e=new Mn(this,this.j,C);let Oe=this.o;if(this.S&&(Oe?(Oe=T(Oe),k(Oe,this.S)):Oe=this.S),this.m!==null||this.O||(_e.H=Oe,Oe=null),this.P)e:{for(var L=0,q=0;q<this.i.length;q++){t:{var Q=this.i[q];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(L+=Q,4096<L){L=q;break e}if(L===4096||q===this.i.length-1){L=q+1;break e}}L=1e3}else L=1e3;L=_ie(this,_e,L),q=We(this.I),Pt(q,"RID",C),Pt(q,"CVER",22),this.D&&Pt(q,"X-HTTP-Session-Id",this.D),QS(this,q),Oe&&(this.O?L="headers="+encodeURIComponent(String(CR(Oe)))+"&"+L:this.m&&ne(q,this.m,Oe)),Y(this.h,_e),this.Ua&&Pt(q,"TYPE","init"),this.P?(Pt(q,"$req",L),Pt(q,"SID","null"),_e.T=!0,Ht(_e,q,null)):Ht(_e,q,L),this.G=2}}else this.G==3&&(C?bie(this,C):this.i.length==0||Hs(this.h)||bie(this))};function bie(C,L){var q;L?q=L.l:q=C.U++;const Q=We(C.I);Pt(Q,"SID",C.K),Pt(Q,"RID",q),Pt(Q,"AID",C.T),QS(C,Q),C.m&&C.o&&ne(Q,C.m,C.o),q=new Mn(C,C.j,q,C.B+1),C.m===null&&(q.H=C.o),L&&(C.i=L.D.concat(C.i)),L=_ie(C,q,1e3),q.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),Y(C.h,q),Ht(q,Q,L)}function QS(C,L){C.H&&S(C.H,function(q,Q){Pt(L,Q,q)}),C.l&&ce({},function(q,Q){Pt(L,Q,q)})}function _ie(C,L,q){q=Math.min(C.i.length,q);var Q=C.l?d(C.l.Na,C.l,C):null;e:{var _e=C.i;let Oe=-1;for(;;){const lt=["count="+q];Oe==-1?0<q?(Oe=_e[0].g,lt.push("ofs="+Oe)):Oe=0:lt.push("ofs="+Oe);let Kr=!0;for(let go=0;go<q;go++){let ur=_e[go].g;const Xo=_e[go].map;if(ur-=Oe,0>ur)Oe=Math.max(0,_e[go].g-100),Kr=!1;else try{SR(Xo,lt,"req"+ur+"_")}catch{Q&&Q(Xo)}}if(Kr){Q=lt.join("&");break e}}}return C=C.i.splice(0,q),L.D=C,Q}function wie(C){if(!C.g&&!C.u){C.Y=1;var L=C.Fa;B||D(),U||(B(),U=!0),V.add(L,C),C.v=0}}function H5(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=Ra(d(C.Fa,C),Sie(C,C.v)),C.v++,!0)}e.Fa=function(){if(this.u=null,Eie(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=Ra(d(this.ab,this),C)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ei(10),AR(this),Eie(this))};function q5(C){C.A!=null&&(a.clearTimeout(C.A),C.A=null)}function Eie(C){C.g=new Mn(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var L=We(C.qa);Pt(L,"RID","rpc"),Pt(L,"SID",C.K),Pt(L,"AID",C.T),Pt(L,"CI",C.F?"0":"1"),!C.F&&C.ja&&Pt(L,"TO",C.ja),Pt(L,"TYPE","xmlhttp"),QS(C,L),C.m&&C.o&&ne(L,C.m,C.o),C.L&&(C.g.I=C.L);var q=C.g;C=C.ia,q.L=1,q.v=Ln(We(L)),q.m=null,q.P=!0,nr(q,C)}e.Za=function(){this.C!=null&&(this.C=null,AR(this),H5(this),ei(19))};function kR(C){C.C!=null&&(a.clearTimeout(C.C),C.C=null)}function xie(C,L){var q=null;if(C.g==L){kR(C),q5(C),C.g=null;var Q=2}else if(wd(C.h,L))q=L.D,se(C.h,L),Q=1;else return;if(C.G!=0){if(L.o)if(Q==1){q=L.m?L.m.length:0,L=Date.now()-L.F;var _e=C.B;Q=ol(),pe(Q,new cu(Q,q)),IR(C)}else wie(C);else if(_e=L.s,_e==3||_e==0&&0<L.X||!(Q==1&&d9e(C,L)||Q==2&&H5(C)))switch(q&&0<q.length&&(L=C.h,L.i=L.i.concat(q)),_e){case 1:uv(C,5);break;case 4:uv(C,10);break;case 3:uv(C,6);break;default:uv(C,2)}}}function Sie(C,L){let q=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(q*=2),q*L}function uv(C,L){if(C.j.info("Error code "+L),L==2){var q=d(C.fb,C),Q=C.Xa;const _e=!Q;Q=new He(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||it(Q,"https"),Ln(Q),_e?xR(Q.toString(),q):xp(Q.toString(),q)}else ei(2);C.G=0,C.l&&C.l.sa(L),Tie(C),vie(C)}e.fb=function(C){C?(this.j.info("Successfully pinged google.com"),ei(2)):(this.j.info("Failed to ping google.com"),ei(1))};function Tie(C){if(C.G=0,C.ka=[],C.l){const L=Z(C.h);(L.length!=0||C.i.length!=0)&&(g(C.ka,L),g(C.ka,C.i),C.h.i.length=0,m(C.i),C.i.length=0),C.l.ra()}}function Cie(C,L,q){var Q=q instanceof He?We(q):new He(q);if(Q.g!="")L&&(Q.g=L+"."+Q.g),_t(Q,Q.s);else{var _e=a.location;Q=_e.protocol,L=L?L+"."+_e.hostname:_e.hostname,_e=+_e.port;var Oe=new He(null);Q&&it(Oe,Q),L&&(Oe.g=L),_e&&_t(Oe,_e),q&&(Oe.l=q),Q=Oe}return q=C.D,L=C.ya,q&&L&&Pt(Q,q,L),Pt(Q,"VER",C.la),QS(C,Q),Q}function Aie(C,L,q){if(L&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return L=C.Ca&&!C.pa?new ue(new iv({eb:q})):new ue(C.pa),L.Ha(C.J),L}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Iie(){}e=Iie.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function RR(){}RR.prototype.g=function(C,L){return new al(C,L)};function al(C,L){wt.call(this),this.g=new u_(L),this.l=C,this.h=L&&L.messageUrlParams||null,C=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(C?C["X-WebChannel-Content-Type"]=L.messageContentType:C={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(C?C["X-WebChannel-Client-Profile"]=L.va:C={"X-WebChannel-Client-Profile":L.va}),this.g.S=C,(C=L&&L.Sb)&&!v(C)&&(this.g.m=C),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!v(L)&&(this.g.D=L,C=this.h,C!==null&&L in C&&(C=this.h,L in C&&delete C[L])),this.j=new c_(this)}p(al,wt),al.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},al.prototype.close=function(){l_(this.g)},al.prototype.o=function(C){var L=this.g;if(typeof C=="string"){var q={};q.__data__=C,C=q}else this.u&&(q={},q.__data__=gn(C),C=q);L.i.push(new Go(L.Ya++,C)),L.G==3&&IR(L)},al.prototype.N=function(){this.g.l=null,delete this.j,l_(this.g),delete this.g,al.aa.N.call(this)};function kie(C){Bi.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var L=C.__sm__;if(L){e:{for(const q in L){C=q;break e}C=void 0}(this.i=C)&&(C=this.i,L=L!==null&&C in L?L[C]:void 0),this.data=L}else this.data=C}p(kie,Bi);function Rie(){Tr.call(this),this.status=1}p(Rie,Tr);function c_(C){this.g=C}p(c_,Iie),c_.prototype.ua=function(){pe(this.g,"a")},c_.prototype.ta=function(C){pe(this.g,new kie(C))},c_.prototype.sa=function(C){pe(this.g,new Rie)},c_.prototype.ra=function(){pe(this.g,"b")},RR.prototype.createWebChannel=RR.prototype.g,al.prototype.send=al.prototype.o,al.prototype.open=al.prototype.m,al.prototype.close=al.prototype.close,GPe=function(){return new RR},WPe=function(){return ol()},qPe=gs,IV={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,vO=st,St.COMPLETE="complete",HPe=St,ji.EventType=Cn,Cn.OPEN="a",Cn.CLOSE="b",Cn.ERROR="c",Cn.MESSAGE="d",wt.prototype.listen=wt.prototype.K,EC=ji,VPe=iv,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,zPe=ue}).apply(typeof UN<"u"?UN:typeof self<"u"?self:typeof window<"u"?window:{});const hhe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}bu.UNAUTHENTICATED=new bu(null),bu.GOOGLE_CREDENTIALS=new bu("google-credentials-uid"),bu.FIRST_PARTY=new bu("first-party-uid"),bu.MOCK_USER=new bu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xS="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb=new x4("@firebase/firestore");function IT(){return rb.logLevel}function It(e,...t){if(rb.logLevel<=qn.DEBUG){const n=t.map(UJ);rb.debug(`Firestore (${xS}): ${e}`,...n)}}function zm(e,...t){if(rb.logLevel<=qn.ERROR){const n=t.map(UJ);rb.error(`Firestore (${xS}): ${e}`,...n)}}function GA(e,...t){if(rb.logLevel<=qn.WARN){const n=t.map(UJ);rb.warn(`Firestore (${xS}): ${e}`,...n)}}function UJ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(e="Unexpected state"){const t=`FIRESTORE (${xS}) INTERNAL ASSERTION FAILED: `+e;throw zm(t),new Error(t)}function ui(e,t){e||an()}function hn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends up{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3t{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class O3t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(bu.UNAUTHENTICATED))}shutdown(){}}class D3t{constructor(t){this.t=t,this.currentUser=bu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new pm;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pm,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pm)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ui(typeof r.accessToken=="string"),new P3t(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ui(t===null||typeof t=="string"),new bu(t)}}class $3t{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=bu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class M3t{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new $3t(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(bu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class L3t{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class F3t{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,It("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ui(typeof n.token=="string"),this.R=n.token,new L3t(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3t(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YPe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=j3t(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function yr(e,t){return e<t?-1:e>t?1:0}function JE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return $s.fromMillis(Date.now())}static fromDate(t){return $s.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new $s(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?yr(this.nanoseconds,t.nanoseconds):yr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new dn(t)}static min(){return new dn(new $s(0,0))}static max(){return new dn(new $s(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(t,n,r){n===void 0?n=0:n>t.length&&an(),r===void 0?r=t.length-n:r>t.length-n&&an(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return YA.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof YA?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class pi extends YA{construct(t,n,r){return new pi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new bt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new pi(n)}static emptyPath(){return new pi([])}}const B3t=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Io extends YA{construct(t,n,r){return new Io(t,n,r)}static isValidIdentifier(t){return B3t.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Io.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Io(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new bt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new bt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new bt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Io(n)}static emptyPath(){return new Io([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t){this.path=t}static fromPath(t){return new Bt(pi.fromString(t))}static fromName(t){return new Bt(pi.fromString(t).popFirst(5))}static empty(){return new Bt(pi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&pi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return pi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Bt(new pi(t.slice()))}}function U3t(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=dn.fromTimestamp(r===1e9?new $s(n+1,0):new $s(n,r));return new cy(i,Bt.empty(),t)}function z3t(e){return new cy(e.readTime,e.key,-1)}class cy{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new cy(dn.min(),Bt.empty(),-1)}static max(){return new cy(dn.max(),Bt.empty(),-1)}}function V3t(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Bt.comparator(e.documentKey,t.documentKey),n!==0?n:yr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3t="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class q3t{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kk(e){if(e.code!==Be.FAILED_PRECONDITION||e.message!==H3t)throw e;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&an(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Xe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Xe?n:Xe.resolve(n)}catch(n){return Xe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.reject(n)}static resolve(t){return new Xe((n,r)=>{n(t)})}static reject(t){return new Xe((n,r)=>{r(t)})}static waitFor(t){return new Xe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Xe.resolve(!1);for(const r of t)n=n.next(i=>i?Xe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Xe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Xe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function W3t(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Rk(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zJ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}zJ.oe=-1;function I4(e){return e==null}function x$(e){return e===0&&1/e==-1/0}function G3t(e){return typeof e=="number"&&Number.isInteger(e)&&!x$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function phe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function zb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function KPe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t,n){this.comparator=t,this.root=n||So.EMPTY}insert(t,n){return new Fi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,So.BLACK,null,null))}remove(t){return new Fi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,So.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new zN(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new zN(this.root,t,this.comparator,!1)}getReverseIterator(){return new zN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new zN(this.root,t,this.comparator,!0)}}class zN{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class So{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??So.RED,this.left=i??So.EMPTY,this.right=s??So.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new So(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return So.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return So.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,So.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,So.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw an();const t=this.left.check();if(t!==this.right.check())throw an();return t+(this.isRed()?0:1)}}So.EMPTY=null,So.RED=!0,So.BLACK=!1;So.EMPTY=new class{constructor(){this.size=0}get key(){throw an()}get value(){throw an()}get color(){throw an()}get left(){throw an()}get right(){throw an()}copy(t,n,r,i,s){return this}insert(t,n,r){return new So(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(t){this.comparator=t,this.data=new Fi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new mhe(this.data.getIterator())}getIteratorFrom(t){return new mhe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof $o)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new $o(this.comparator);return n.data=t,n}}class mhe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t){this.fields=t,t.sort(Io.comparator)}static empty(){return new Tl([])}unionWith(t){let n=new $o(Io.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Tl(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return JE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XPe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new XPe("Invalid base64 string: "+s):s}}(t);return new Ta(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Ta(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return yr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ta.EMPTY_BYTE_STRING=new Ta("");const Y3t=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fy(e){if(ui(!!e),typeof e=="string"){let t=0;const n=Y3t.exec(e);if(ui(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:bs(e.seconds),nanos:bs(e.nanos)}}function bs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ib(e){return typeof e=="string"?Ta.fromBase64String(e):Ta.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VJ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function HJ(e){const t=e.mapValue.fields.__previous_value__;return VJ(t)?HJ(t):t}function KA(e){const t=fy(e.mapValue.fields.__local_write_time__.timestampValue);return new $s(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3t{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class XA{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new XA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof XA&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function sb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?VJ(e)?4:X3t(e)?9007199254740991:10:an()}function zh(e,t){if(e===t)return!0;const n=sb(e);if(n!==sb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return KA(e).isEqual(KA(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=fy(i.timestampValue),a=fy(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return ib(i.bytesValue).isEqual(ib(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return bs(i.geoPointValue.latitude)===bs(s.geoPointValue.latitude)&&bs(i.geoPointValue.longitude)===bs(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return bs(i.integerValue)===bs(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=bs(i.doubleValue),a=bs(s.doubleValue);return o===a?x$(o)===x$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return JE(e.arrayValue.values||[],t.arrayValue.values||[],zh);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(phe(o)!==phe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!zh(o[u],a[u])))return!1;return!0}(e,t);default:return an()}}function QA(e,t){return(e.values||[]).find(n=>zh(n,t))!==void 0}function ZE(e,t){if(e===t)return 0;const n=sb(e),r=sb(t);if(n!==r)return yr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return yr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=bs(s.integerValue||s.doubleValue),u=bs(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return ghe(e.timestampValue,t.timestampValue);case 4:return ghe(KA(e),KA(t));case 5:return yr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=ib(s),u=ib(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=yr(a[l],u[l]);if(c!==0)return c}return yr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=yr(bs(s.latitude),bs(o.latitude));return a!==0?a:yr(bs(s.longitude),bs(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=ZE(a[l],u[l]);if(c)return c}return yr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===VN.mapValue&&o===VN.mapValue)return 0;if(s===VN.mapValue)return 1;if(o===VN.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=yr(u[f],c[f]);if(d!==0)return d;const h=ZE(a[u[f]],l[c[f]]);if(h!==0)return h}return yr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw an()}}function ghe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return yr(e,t);const n=fy(e),r=fy(t),i=yr(n.seconds,r.seconds);return i!==0?i:yr(n.nanos,r.nanos)}function ex(e){return kV(e)}function kV(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=fy(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ib(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Bt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=kV(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${kV(n.fields[o])}`;return i+"}"}(e.mapValue):an()}function yhe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function RV(e){return!!e&&"integerValue"in e}function qJ(e){return!!e&&"arrayValue"in e}function vhe(e){return!!e&&"nullValue"in e}function bhe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function bO(e){return!!e&&"mapValue"in e}function T2(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return zb(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=T2(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=T2(e.arrayValue.values[n]);return t}return Object.assign({},e)}function X3t(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(t){this.value=t}static empty(){return new ku({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!bO(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=T2(n)}setAll(t){let n=Io.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=T2(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());bO(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return zh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];bO(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){zb(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new ku(T2(this.value))}}function QPe(e){const t=[];return zb(e.fields,(n,r)=>{const i=new Io([n]);if(bO(r)){const s=QPe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Tl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ha(t,0,dn.min(),dn.min(),dn.min(),ku.empty(),0)}static newFoundDocument(t,n,r,i){return new ha(t,1,n,dn.min(),r,i,0)}static newNoDocument(t,n){return new ha(t,2,n,dn.min(),dn.min(),ku.empty(),0)}static newUnknownDocument(t,n){return new ha(t,3,n,dn.min(),dn.min(),ku.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(dn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ku.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ku.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ha&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ha(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S$=class{constructor(t,n){this.position=t,this.inclusive=n}};function _he(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Bt.comparator(Bt.fromName(o.referenceValue),n.key):r=ZE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function whe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!zh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(t,n="asc"){this.field=t,this.dir=n}}function Q3t(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JPe=class{};class Es extends JPe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Z3t(t,n,r):n==="array-contains"?new n$t(t,r):n==="in"?new r$t(t,r):n==="not-in"?new i$t(t,r):n==="array-contains-any"?new s$t(t,r):new Es(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new e$t(t,r):new t$t(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ZE(n,this.value)):n!==null&&sb(this.value)===sb(n)&&this.matchesComparison(ZE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return an()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class td extends JPe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new td(t,n)}matches(t){return ZPe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ZPe(e){return e.op==="and"}function eOe(e){return J3t(e)&&ZPe(e)}function J3t(e){for(const t of e.filters)if(t instanceof td)return!1;return!0}function NV(e){if(e instanceof Es)return e.field.canonicalString()+e.op.toString()+ex(e.value);if(eOe(e))return e.filters.map(t=>NV(t)).join(",");{const t=e.filters.map(n=>NV(n)).join(",");return`${e.op}(${t})`}}function tOe(e,t){return e instanceof Es?function(r,i){return i instanceof Es&&r.op===i.op&&r.field.isEqual(i.field)&&zh(r.value,i.value)}(e,t):e instanceof td?function(r,i){return i instanceof td&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&tOe(o,i.filters[a]),!0):!1}(e,t):void an()}function nOe(e){return e instanceof Es?function(n){return`${n.field.canonicalString()} ${n.op} ${ex(n.value)}`}(e):e instanceof td?function(n){return n.op.toString()+" {"+n.getFilters().map(nOe).join(" ,")+"}"}(e):"Filter"}class Z3t extends Es{constructor(t,n,r){super(t,n,r),this.key=Bt.fromName(r.referenceValue)}matches(t){const n=Bt.comparator(t.key,this.key);return this.matchesComparison(n)}}class e$t extends Es{constructor(t,n){super(t,"in",n),this.keys=rOe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class t$t extends Es{constructor(t,n){super(t,"not-in",n),this.keys=rOe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function rOe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Bt.fromName(r.referenceValue))}class n$t extends Es{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return qJ(n)&&QA(n.arrayValue,this.value)}}class r$t extends Es{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&QA(this.value.arrayValue,n)}}class i$t extends Es{constructor(t,n){super(t,"not-in",n)}matches(t){if(QA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!QA(this.value.arrayValue,n)}}class s$t extends Es{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!qJ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>QA(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o$t{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Ehe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new o$t(e,t,n,r,i,s,o)}function WJ(e){const t=hn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>NV(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),I4(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>ex(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>ex(r)).join(",")),t.ue=n}return t.ue}function GJ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Q3t(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!tOe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!whe(e.startAt,t.startAt)&&whe(e.endAt,t.endAt)}function PV(e){return Bt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function a$t(e,t,n,r,i,s,o,a){return new SS(e,t,n,r,i,s,o,a)}function YJ(e){return new SS(e)}function xhe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function iOe(e){return e.collectionGroup!==null}function C2(e){const t=hn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new $o(Io.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new JA(s,r))}),n.has(Io.keyField().canonicalString())||t.ce.push(new JA(Io.keyField(),r))}return t.ce}function Eh(e){const t=hn(e);return t.le||(t.le=u$t(t,C2(e))),t.le}function u$t(e,t){if(e.limitType==="F")return Ehe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new JA(i.field,s)});const n=e.endAt?new S$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new S$(e.startAt.position,e.startAt.inclusive):null;return Ehe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function OV(e,t){const n=e.filters.concat([t]);return new SS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function DV(e,t,n){return new SS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function k4(e,t){return GJ(Eh(e),Eh(t))&&e.limitType===t.limitType}function sOe(e){return`${WJ(Eh(e))}|lt:${e.limitType}`}function G_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>nOe(i)).join(", ")}]`),I4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ex(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ex(i)).join(",")),`Target(${r})`}(Eh(e))}; limitType=${e.limitType})`}function R4(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Bt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of C2(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=_he(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,C2(r),i)||r.endAt&&!function(o,a,u){const l=_he(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,C2(r),i))}(e,t)}function l$t(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function oOe(e){return(t,n)=>{let r=!1;for(const i of C2(e)){const s=c$t(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function c$t(e,t,n){const r=e.field.isKeyField()?Bt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?ZE(u,l):an()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return an()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){zb(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return KPe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f$t=new Fi(Bt.comparator);function Vm(){return f$t}const aOe=new Fi(Bt.comparator);function xC(...e){let t=aOe;for(const n of e)t=t.insert(n.key,n);return t}function uOe(e){let t=aOe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function h1(){return A2()}function lOe(){return A2()}function A2(){return new TS(e=>e.toString(),(e,t)=>e.isEqual(t))}const d$t=new Fi(Bt.comparator),h$t=new $o(Bt.comparator);function jn(...e){let t=h$t;for(const n of e)t=t.add(n);return t}const p$t=new $o(yr);function m$t(){return p$t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cOe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:x$(t)?"-0":t}}function fOe(e){return{integerValue:""+e}}function g$t(e,t){return G3t(t)?fOe(t):cOe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(){this._=void 0}}function y$t(e,t,n){return e instanceof ZA?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&VJ(s)&&(s=HJ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof eI?hOe(e,t):e instanceof tI?pOe(e,t):function(i,s){const o=dOe(i,s),a=She(o)+She(i.Pe);return RV(o)&&RV(i.Pe)?fOe(a):cOe(i.serializer,a)}(e,t)}function v$t(e,t,n){return e instanceof eI?hOe(e,t):e instanceof tI?pOe(e,t):n}function dOe(e,t){return e instanceof T$?function(r){return RV(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class ZA extends N4{}class eI extends N4{constructor(t){super(),this.elements=t}}function hOe(e,t){const n=mOe(t);for(const r of e.elements)n.some(i=>zh(i,r))||n.push(r);return{arrayValue:{values:n}}}class tI extends N4{constructor(t){super(),this.elements=t}}function pOe(e,t){let n=mOe(t);for(const r of e.elements)n=n.filter(i=>!zh(i,r));return{arrayValue:{values:n}}}class T$ extends N4{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function She(e){return bs(e.integerValue||e.doubleValue)}function mOe(e){return qJ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b$t{constructor(t,n){this.field=t,this.transform=n}}function _$t(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof eI&&i instanceof eI||r instanceof tI&&i instanceof tI?JE(r.elements,i.elements,zh):r instanceof T$&&i instanceof T$?zh(r.Pe,i.Pe):r instanceof ZA&&i instanceof ZA}(e.transform,t.transform)}class w$t{constructor(t,n){this.version=t,this.transformResults=n}}class Wf{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Wf}static exists(t){return new Wf(void 0,t)}static updateTime(t){return new Wf(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function _O(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class P4{}function gOe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new KJ(e.key,Wf.none()):new Nk(e.key,e.data,Wf.none());{const n=e.data,r=ku.empty();let i=new $o(Io.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Hy(e.key,r,new Tl(i.toArray()),Wf.none())}}function E$t(e,t,n){e instanceof Nk?function(i,s,o){const a=i.value.clone(),u=Che(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Hy?function(i,s,o){if(!_O(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Che(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(yOe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function I2(e,t,n,r){return e instanceof Nk?function(s,o,a,u){if(!_O(s.precondition,o))return a;const l=s.value.clone(),c=Ahe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Hy?function(s,o,a,u){if(!_O(s.precondition,o))return a;const l=Ahe(s.fieldTransforms,u,o),c=o.data;return c.setAll(yOe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return _O(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function x$t(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=dOe(r.transform,i||null);s!=null&&(n===null&&(n=ku.empty()),n.set(r.field,s))}return n||null}function The(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&JE(r,i,(s,o)=>_$t(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Nk extends P4{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hy extends P4{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function yOe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Che(e,t,n){const r=new Map;ui(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,v$t(o,a,n[i]))}return r}function Ahe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,y$t(s,o,t))}return r}class KJ extends P4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class S$t extends P4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T$t{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&E$t(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=I2(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=I2(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=lOe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=gOe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(dn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),jn())}isEqual(t){return this.batchId===t.batchId&&JE(this.mutations,t.mutations,(n,r)=>The(n,r))&&JE(this.baseMutations,t.baseMutations,(n,r)=>The(n,r))}}class XJ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ui(t.mutations.length===r.length);let i=function(){return d$t}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new XJ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C$t{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A$t{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ys,Xn;function I$t(e){switch(e){default:return an();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function vOe(e){if(e===void 0)return zm("GRPC error has no .code"),Be.UNKNOWN;switch(e){case ys.OK:return Be.OK;case ys.CANCELLED:return Be.CANCELLED;case ys.UNKNOWN:return Be.UNKNOWN;case ys.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case ys.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case ys.INTERNAL:return Be.INTERNAL;case ys.UNAVAILABLE:return Be.UNAVAILABLE;case ys.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case ys.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case ys.NOT_FOUND:return Be.NOT_FOUND;case ys.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case ys.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case ys.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case ys.ABORTED:return Be.ABORTED;case ys.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case ys.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case ys.DATA_LOSS:return Be.DATA_LOSS;default:return an()}}(Xn=ys||(ys={}))[Xn.OK=0]="OK",Xn[Xn.CANCELLED=1]="CANCELLED",Xn[Xn.UNKNOWN=2]="UNKNOWN",Xn[Xn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xn[Xn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xn[Xn.NOT_FOUND=5]="NOT_FOUND",Xn[Xn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xn[Xn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xn[Xn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xn[Xn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xn[Xn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xn[Xn.ABORTED=10]="ABORTED",Xn[Xn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xn[Xn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xn[Xn.INTERNAL=13]="INTERNAL",Xn[Xn.UNAVAILABLE=14]="UNAVAILABLE",Xn[Xn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k$t(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$t=new T1([4294967295,4294967295],0);function Ihe(e){const t=k$t().encode(e),n=new UPe;return n.update(t),new Uint8Array(n.digest())}function khe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new T1([n,r],0),new T1([i,s],0)]}class QJ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new SC(`Invalid padding: ${n}`);if(r<0)throw new SC(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new SC(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new SC(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=T1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(T1.fromNumber(r)));return i.compare(R$t)===1&&(i=new T1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Ihe(t),[r,i]=khe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new QJ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Ihe(t),[r,i]=khe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class SC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,Pk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new O4(dn.min(),i,new Fi(yr),Vm(),jn())}}class Pk{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Pk(r,n,jn(),jn(),jn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class bOe{constructor(t,n){this.targetId=t,this.me=n}}class _Oe{constructor(t,n,r=Ta.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Rhe{constructor(){this.fe=0,this.ge=Phe(),this.pe=Ta.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=jn(),n=jn(),r=jn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:an()}}),new Pk(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Phe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ui(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class N$t{constructor(t){this.Le=t,this.Be=new Map,this.ke=Vm(),this.qe=Nhe(),this.Qe=new Fi(yr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:an()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(PV(s))if(r===0){const o=new Bt(s.path);this.Ue(n,o,ha.newNoDocument(o,dn.min()))}else ui(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ib(r).toUint8Array()}catch(u){if(u instanceof XPe)return GA("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new QJ(o,i,s)}catch(u){return GA(u instanceof SC?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&PV(a.target)){const u=new Bt(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ha.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=jn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new O4(t,n,this.Qe,this.ke,r);return this.ke=Vm(),this.qe=Nhe(),this.Qe=new Fi(yr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Rhe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new $o(yr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||It("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Rhe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Nhe(){return new Fi(Bt.comparator)}function Phe(){return new Fi(Bt.comparator)}const P$t={asc:"ASCENDING",desc:"DESCENDING"},O$t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D$t={and:"AND",or:"OR"};class $$t{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function $V(e,t){return e.useProto3Json||I4(t)?t:{value:t}}function C$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function wOe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function M$t(e,t){return C$(e,t.toTimestamp())}function xh(e){return ui(!!e),dn.fromTimestamp(function(n){const r=fy(n);return new $s(r.seconds,r.nanos)}(e))}function JJ(e,t){return MV(e,t).canonicalString()}function MV(e,t){const n=function(i){return new pi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function EOe(e){const t=pi.fromString(e);return ui(AOe(t)),t}function LV(e,t){return JJ(e.databaseId,t.path)}function kj(e,t){const n=EOe(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Bt(SOe(n))}function xOe(e,t){return JJ(e.databaseId,t)}function L$t(e){const t=EOe(e);return t.length===4?pi.emptyPath():SOe(t)}function FV(e){return new pi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function SOe(e){return ui(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Ohe(e,t,n){return{name:LV(e,t),fields:n.value.mapValue.fields}}function F$t(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:an()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ui(c===void 0||typeof c=="string"),Ta.fromBase64String(c||"")):(ui(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Ta.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Be.UNKNOWN:vOe(l.code);return new bt(c,l.message||"")}(o);n=new _Oe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=kj(e,r.document.name),s=xh(r.document.updateTime),o=r.document.createTime?xh(r.document.createTime):dn.min(),a=new ku({mapValue:{fields:r.document.fields}}),u=ha.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new wO(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=kj(e,r.document),s=r.readTime?xh(r.readTime):dn.min(),o=ha.newNoDocument(i,s),a=r.removedTargetIds||[];n=new wO([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=kj(e,r.document),s=r.removedTargetIds||[];n=new wO([],s,i,null)}else{if(!("filter"in t))return an();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new A$t(i,s),a=r.targetId;n=new bOe(a,o)}}return n}function j$t(e,t){let n;if(t instanceof Nk)n={update:Ohe(e,t.key,t.value)};else if(t instanceof KJ)n={delete:LV(e,t.key)};else if(t instanceof Hy)n={update:Ohe(e,t.key,t.data),updateMask:Y$t(t.fieldMask)};else{if(!(t instanceof S$t))return an();n={verify:LV(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ZA)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof eI)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof tI)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof T$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw an()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:M$t(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:an()}(e,t.precondition)),n}function B$t(e,t){return e&&e.length>0?(ui(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?xh(i.updateTime):xh(s);return o.isEqual(dn.min())&&(o=xh(s)),new w$t(o,i.transformResults||[])}(n,t))):[]}function U$t(e,t){return{documents:[xOe(e,t.path)]}}function z$t(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=xOe(e,i);const s=function(l){if(l.length!==0)return COe(td.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:Y_(d.field),direction:q$t(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=$V(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function V$t(e){let t=L$t(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ui(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=TOe(f);return d instanceof td&&eOe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new JA(K_(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,I4(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new S$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new S$(h,d)}(n.endAt)),a$t(t,i,o,s,a,"F",u,l)}function H$t(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return an()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function TOe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=K_(n.unaryFilter.field);return Es.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=K_(n.unaryFilter.field);return Es.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=K_(n.unaryFilter.field);return Es.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=K_(n.unaryFilter.field);return Es.create(o,"!=",{nullValue:"NULL_VALUE"});default:return an()}}(e):e.fieldFilter!==void 0?function(n){return Es.create(K_(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return an()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return td.create(n.compositeFilter.filters.map(r=>TOe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return an()}}(n.compositeFilter.op))}(e):an()}function q$t(e){return P$t[e]}function W$t(e){return O$t[e]}function G$t(e){return D$t[e]}function Y_(e){return{fieldPath:e.canonicalString()}}function K_(e){return Io.fromServerFormat(e.fieldPath)}function COe(e){return e instanceof Es?function(n){if(n.op==="=="){if(bhe(n.value))return{unaryFilter:{field:Y_(n.field),op:"IS_NAN"}};if(vhe(n.value))return{unaryFilter:{field:Y_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bhe(n.value))return{unaryFilter:{field:Y_(n.field),op:"IS_NOT_NAN"}};if(vhe(n.value))return{unaryFilter:{field:Y_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Y_(n.field),op:W$t(n.op),value:n.value}}}(e):e instanceof td?function(n){const r=n.getFilters().map(i=>COe(i));return r.length===1?r[0]:{compositeFilter:{op:G$t(n.op),filters:r}}}(e):an()}function Y$t(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function AOe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(t,n,r,i,s=dn.min(),o=dn.min(),a=Ta.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new a0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new a0(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new a0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new a0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K$t{constructor(t){this.ct=t}}function X$t(e){const t=V$t({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?DV(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q$t{constructor(){this._n=new J$t}addToCollectionParentIndex(t,n){return this._n.add(n),Xe.resolve()}getCollectionParents(t,n){return Xe.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Xe.resolve()}deleteFieldIndex(t,n){return Xe.resolve()}deleteAllFieldIndexes(t){return Xe.resolve()}createTargetIndexes(t,n){return Xe.resolve()}getDocumentsMatchingTarget(t,n){return Xe.resolve(null)}getIndexType(t,n){return Xe.resolve(0)}getFieldIndexes(t,n){return Xe.resolve([])}getNextCollectionGroupToUpdate(t){return Xe.resolve(null)}getMinOffset(t,n){return Xe.resolve(cy.min())}getMinOffsetFromCollectionGroup(t,n){return Xe.resolve(cy.min())}updateCollectionGroup(t,n,r){return Xe.resolve()}updateIndexEntries(t,n){return Xe.resolve()}}class J$t{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new $o(pi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new $o(pi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new tx(0)}static Ln(){return new tx(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z$t{constructor(){this.changes=new TS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ha.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Xe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eMt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tMt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&I2(r.mutation,i,Tl.empty(),$s.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,jn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=jn()){const i=h1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=xC();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=h1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,jn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Vm();const o=A2(),a=function(){return A2()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Hy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),I2(c.mutation,l,c.mutation.getFieldMask(),$s.now())):o.set(l.key,Tl.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new eMt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=A2();let i=new Fi((o,a)=>o-a),s=jn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Tl.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||jn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=lOe();c.forEach(d=>{if(!s.has(d)){const h=gOe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Xe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Bt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):iOe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Xe.resolve(h1());let a=-1,u=s;return o.next(l=>Xe.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Xe.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,jn())).next(c=>({batchId:a,changes:uOe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Bt(n)).next(r=>{let i=xC();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=xC();return this.indexManager.getCollectionParents(t,s).next(a=>Xe.forEach(a,u=>{const l=function(f,d){return new SS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,ha.newInvalidDocument(c)))});let a=xC();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&I2(c.mutation,l,Tl.empty(),$s.now()),R4(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nMt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Xe.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:xh(i.createTime)}}(n)),Xe.resolve()}getNamedQuery(t,n){return Xe.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:X$t(i.bundledQuery),readTime:xh(i.readTime)}}(n)),Xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rMt{constructor(){this.overlays=new Fi(Bt.comparator),this.hr=new Map}getOverlay(t,n){return Xe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=h1();return Xe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Xe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Xe.resolve()}getOverlaysForCollection(t,n,r){const i=h1(),s=n.length+1,o=new Bt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Xe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Fi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=h1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=h1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Xe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new C$t(n,r));let s=this.hr.get(n);s===void 0&&(s=jn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZJ{constructor(){this.Pr=new $o(Ys.Ir),this.Tr=new $o(Ys.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Ys(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Ys(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Bt(new pi([])),r=new Ys(n,t),i=new Ys(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Bt(new pi([])),r=new Ys(n,t),i=new Ys(n,t+1);let s=jn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Ys(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ys{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Bt.comparator(t.key,n.key)||yr(t.pr,n.pr)}static Er(t,n){return yr(t.pr,n.pr)||Bt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iMt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new $o(Ys.Ir)}checkEmpty(t){return Xe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new T$t(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Ys(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Xe.resolve(o)}lookupMutationBatch(t,n){return Xe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Xe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ys(n,0),i=new Ys(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Xe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new $o(yr);return n.forEach(i=>{const s=new Ys(i,0),o=new Ys(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Xe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Bt.isDocumentKey(s)||(s=s.child(""));const o=new Ys(new Bt(s),0);let a=new $o(yr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Xe.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ui(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Xe.forEach(n.mutations,i=>{const s=new Ys(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Ys(n,0),i=this.wr.firstAfterOrEqual(r);return Xe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Xe.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sMt{constructor(t){this.vr=t,this.docs=function(){return new Fi(Bt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Xe.resolve(r?r.document.mutableCopy():ha.newInvalidDocument(n))}getEntries(t,n){let r=Vm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ha.newInvalidDocument(i))}),Xe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Vm();const o=n.path,a=new Bt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||V3t(z3t(c),r)<=0||(i.has(c.key)||R4(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Xe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){an()}Fr(t,n){return Xe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new oMt(this)}getSize(t){return Xe.resolve(this.size)}}class oMt extends Z$t{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Xe.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aMt{constructor(t){this.persistence=t,this.Mr=new TS(n=>WJ(n),GJ),this.lastRemoteSnapshotVersion=dn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ZJ,this.targetCount=0,this.Lr=tx.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Xe.resolve()}getLastRemoteSnapshotVersion(t){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Xe.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Xe.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new tx(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Xe.resolve()}updateTargetData(t,n){return this.qn(n),Xe.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Xe.waitFor(s).next(()=>i)}getTargetCount(t){return Xe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Xe.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Xe.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Xe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Xe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Xe.resolve(r)}containsKey(t,n){return Xe.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uMt{constructor(t,n){this.Br={},this.overlays={},this.kr=new zJ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new aMt(this),this.indexManager=new Q$t,this.remoteDocumentCache=function(i){return new sMt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new K$t(n),this.$r=new nMt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new rMt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new iMt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){It("MemoryPersistence","Starting transaction:",t);const i=new lMt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Xe.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class lMt extends q3t{constructor(t){super(),this.currentSequenceNumber=t}}class eZ{constructor(t){this.persistence=t,this.zr=new ZJ,this.jr=null}static Hr(t){return new eZ(t)}get Jr(){if(this.jr)return this.jr;throw an()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Xe.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Xe.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Xe.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.Jr,r=>{const i=Bt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,dn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Xe.or([()=>Xe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tZ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=jn(),i=jn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new tZ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cMt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fMt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return QRt()?8:W3t(zo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new cMt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(IT()<=qn.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",G_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Xe.resolve()):(IT()<=qn.DEBUG&&It("QueryEngine","Query:",G_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(IT()<=qn.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",G_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Eh(n))):Xe.resolve())}ji(t,n){if(xhe(n))return Xe.resolve(null);let r=Eh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=DV(n,null,"F"),r=Eh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=jn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,DV(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return xhe(n)||i.isEqual(dn.min())?Xe.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Xe.resolve(null):(IT()<=qn.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),G_(n)),this.es(t,o,n,U3t(i,-1)).next(a=>a))})}Zi(t,n){let r=new $o(oOe(t));return n.forEach((i,s)=>{R4(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return IT()<=qn.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",G_(n)),this.zi.getDocumentsMatchingQuery(t,n,cy.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dMt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Fi(yr),this.rs=new TS(s=>WJ(s),GJ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new tMt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function hMt(e,t,n,r){return new dMt(e,t,n,r)}async function IOe(e,t){const n=hn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=jn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function pMt(e,t){const n=hn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Xe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ui(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=jn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function kOe(e){const t=hn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function mMt(e,t){const n=hn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Ta.EMPTY_BYTE_STRING,dn.min()).withLastLimboFreeSnapshotVersion(dn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Vm(),l=jn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(gMt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(dn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Xe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function gMt(e,t,n){let r=jn(),i=jn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Vm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(dn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):It("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function yMt(e,t){const n=hn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function vMt(e,t){const n=hn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Xe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new a0(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function jV(e,t,n){const r=hn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Rk(o))throw o;It("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Dhe(e,t,n){const r=hn(e);let i=dn.min(),s=jn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=hn(u),d=f.rs.get(c);return d!==void 0?Xe.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,Eh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:dn.min(),n?s:jn())).next(a=>(bMt(r,l$t(t),a),{documents:a,hs:s})))}function bMt(e,t,n){let r=e.ss.get(t)||dn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class $he{constructor(){this.activeTargetIds=m$t()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class _Mt{constructor(){this.no=new $he,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new $he,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wMt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mhe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HN=null;function Rj(){return HN===null?HN=function(){return 268435456+Math.round(2147483648*Math.random())}():HN++,"0x"+HN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EMt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xMt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="WebChannelConnection";class SMt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=Rj(),u=this.vo(n,r.toUriEncodedString());It("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(It("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw GA("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=EMt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=Rj();return new Promise((o,a)=>{const u=new zPe;u.setWithCredentials(!0),u.listenOnce(HPe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case vO.NO_ERROR:const c=u.getResponseJson();It(sa,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case vO.TIMEOUT:It(sa,`RPC '${t}' ${s} timed out`),a(new bt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case vO.HTTP_ERROR:const f=u.getStatus();if(It(sa,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(y)>=0?y:Be.UNKNOWN}(h.status);a(new bt(p,h.message))}else a(new bt(Be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new bt(Be.UNAVAILABLE,"Connection failed."));break;default:an()}}finally{It(sa,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);It(sa,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=Rj(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=GPe(),a=WPe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new VPe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");It(sa,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new xMt({lo:g=>{h?It(sa,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(It(sa,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),It(sa,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(_){setTimeout(()=>{throw _},0)}})};return m(f,EC.EventType.OPEN,()=>{h||(It(sa,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,EC.EventType.CLOSE,()=>{h||(h=!0,It(sa,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,EC.EventType.ERROR,g=>{h||(h=!0,GA(sa,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new bt(Be.UNAVAILABLE,"The operation could not be completed")))}),m(f,EC.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ui(!!v);const b=v,_=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(_){It(sa,`RPC '${t}' stream ${i} received error:`,_);const x=_.status;let S=function(A){const k=ys[A];if(k!==void 0)return vOe(k)}(x),E=_.message;S===void 0&&(S=Be.INTERNAL,E="Unknown error status: "+x+" with message "+_.message),h=!0,p.po(new bt(S,E)),f.close()}else It(sa,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,qPe.STAT_EVENT,g=>{g.stat===IV.PROXY?It(sa,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===IV.NOPROXY&&It(sa,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function Nj(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(e){return new $$t(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ROe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NOe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new ROe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(zm(n.toString()),zm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new bt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return It("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TMt extends NOe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=F$t(this.serializer,t),r=function(s){if(!("targetChange"in s))return dn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?dn.min():o.readTime?xh(o.readTime):dn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=FV(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=PV(u)?{documents:U$t(s,u)}:{query:z$t(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=wOe(s,o.resumeToken);const l=$V(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(dn.min())>0){a.readTime=C$(s,o.snapshotVersion.toTimestamp());const l=$V(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=H$t(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=FV(this.serializer),n.removeTarget=t,this.i_(n)}}class CMt extends NOe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ui(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=B$t(t.writeResults,t.commitTime),r=xh(t.commitTime);return this.listener.A_(r,n)}return ui(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=FV(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>j$t(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AMt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,MV(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new bt(Be.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,MV(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(Be.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class IMt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(zm(n),this.y_=!1):It("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kMt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Vb(this)&&(It("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=hn(u);l.M_.add(4),await Dk(l),l.N_.set("Unknown"),l.M_.delete(4),await Ok(l)}(this))})}),this.N_=new IMt(r,i)}}async function Ok(e){if(Vb(e))for(const t of e.x_)await t(!0)}async function Dk(e){for(const t of e.x_)await t(!1)}function POe(e,t){const n=hn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),sZ(n)?iZ(n):CS(n).Xo()&&rZ(n,t))}function nZ(e,t){const n=hn(e),r=CS(n);n.F_.delete(t),r.Xo()&&OOe(n,t),n.F_.size===0&&(r.Xo()?r.n_():Vb(n)&&n.N_.set("Unknown"))}function rZ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(dn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}CS(e).P_(t)}function OOe(e,t){e.L_.xe(t),CS(e).I_(t)}function iZ(e){e.L_=new N$t({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),CS(e).start(),e.N_.w_()}function sZ(e){return Vb(e)&&!CS(e).Zo()&&e.F_.size>0}function Vb(e){return hn(e).M_.size===0}function DOe(e){e.L_=void 0}async function RMt(e){e.N_.set("Online")}async function NMt(e){e.F_.forEach((t,n)=>{rZ(e,t)})}async function PMt(e,t){DOe(e),sZ(e)?(e.N_.D_(t),iZ(e)):e.N_.set("Unknown")}async function OMt(e,t,n){if(e.N_.set("Online"),t instanceof _Oe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){It("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await A$(e,r)}else if(t instanceof wO?e.L_.Ke(t):t instanceof bOe?e.L_.He(t):e.L_.We(t),!n.isEqual(dn.min()))try{const r=await kOe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Ta.EMPTY_BYTE_STRING,c.snapshotVersion)),OOe(s,u);const f=new a0(c.target,u,l,c.sequenceNumber);rZ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){It("RemoteStore","Failed to raise snapshot:",r),await A$(e,r)}}async function A$(e,t,n){if(!Rk(t))throw t;e.M_.add(1),await Dk(e),e.N_.set("Offline"),n||(n=()=>kOe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{It("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Ok(e)})}function $Oe(e,t){return t().catch(n=>A$(e,n,t))}async function $4(e){const t=hn(e),n=dy(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;DMt(t);)try{const i=await yMt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,$Mt(t,i)}catch(i){await A$(t,i)}MOe(t)&&LOe(t)}function DMt(e){return Vb(e)&&e.v_.length<10}function $Mt(e,t){e.v_.push(t);const n=dy(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function MOe(e){return Vb(e)&&!dy(e).Zo()&&e.v_.length>0}function LOe(e){dy(e).start()}async function MMt(e){dy(e).V_()}async function LMt(e){const t=dy(e);for(const n of e.v_)t.d_(n.mutations)}async function FMt(e,t,n){const r=e.v_.shift(),i=XJ.from(r,t,n);await $Oe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await $4(e)}async function jMt(e,t){t&&dy(e).E_&&await async function(r,i){if(function(o){return I$t(o)&&o!==Be.ABORTED}(i.code)){const s=r.v_.shift();dy(r).t_(),await $Oe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await $4(r)}}(e,t),MOe(e)&&LOe(e)}async function Lhe(e,t){const n=hn(e);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const r=Vb(n);n.M_.add(3),await Dk(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Ok(n)}async function BMt(e,t){const n=hn(e);t?(n.M_.delete(2),await Ok(n)):t||(n.M_.add(2),await Dk(n),n.N_.set("Unknown"))}function CS(e){return e.B_||(e.B_=function(n,r,i){const s=hn(n);return s.f_(),new TMt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:RMt.bind(null,e),To:NMt.bind(null,e),Ao:PMt.bind(null,e),h_:OMt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),sZ(e)?iZ(e):e.N_.set("Unknown")):(await e.B_.stop(),DOe(e))})),e.B_}function dy(e){return e.k_||(e.k_=function(n,r,i){const s=hn(n);return s.f_(),new CMt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:MMt.bind(null,e),Ao:jMt.bind(null,e),R_:LMt.bind(null,e),A_:FMt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await $4(e)):(await e.k_.stop(),e.v_.length>0&&(It("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new pm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new oZ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function aZ(e,t){if(zm("AsyncQueue",`${t}: ${e}`),Rk(e))return new bt(Be.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Bt.comparator(n.key,r.key):(n,r)=>Bt.comparator(n.key,r.key),this.keyedMap=xC(),this.sortedSet=new Fi(this.comparator)}static emptySet(t){return new tE(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof tE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new tE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fhe{constructor(){this.q_=new Fi(Bt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):an():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class nx{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new nx(t,n,tE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&k4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UMt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class zMt{constructor(){this.queries=new TS(t=>sOe(t),k4),this.onlineState="Unknown",this.z_=new Set}}async function FOe(e,t){const n=hn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new UMt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=aZ(o,`Initialization of query '${G_(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&uZ(n)}async function jOe(e,t){const n=hn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function VMt(e,t){const n=hn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&uZ(n)}function HMt(e,t,n){const r=hn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function uZ(e){e.z_.forEach(t=>{t.next()})}var BV,jhe;(jhe=BV||(BV={})).J_="default",jhe.Cache="cache";class BOe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new nx(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=nx.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==BV.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UOe{constructor(t){this.key=t}}class zOe{constructor(t){this.key=t}}class qMt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=jn(),this.mutatedKeys=jn(),this.Ia=oOe(t),this.Ta=new tE(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new Fhe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=R4(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return an()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new nx(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Fhe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=jn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new zOe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new UOe(r))}),n}pa(t){this.la=t.hs,this.Pa=jn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return nx.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class WMt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class GMt{constructor(t){this.key=t,this.wa=!1}}class YMt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new TS(a=>sOe(a),k4),this.Da=new Map,this.Ca=new Set,this.va=new Fi(Bt.comparator),this.Fa=new Map,this.Ma=new ZJ,this.xa={},this.Oa=new Map,this.Na=tx.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function KMt(e,t,n=!0){const r=YOe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await VOe(r,t,n,!0),i}async function XMt(e,t){const n=YOe(e);await VOe(n,t,!0,!1)}async function VOe(e,t,n,r){const i=await vMt(e.localStore,Eh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await QMt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&POe(e.remoteStore,i),a}async function QMt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await Dhe(m.localStore,g.query,!1).then(({documents:E})=>g.view.da(E,b)));const _=v&&v.targetChanges.get(g.targetId),x=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(b,m.isPrimaryClient,_,x);return Uhe(m,g.targetId,S.fa),S.snapshot}(e,f,d,h);const s=await Dhe(e.localStore,t,!0),o=new qMt(t,s.hs),a=o.da(s.documents),u=Pk.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Uhe(e,n,l.fa);const c=new WMt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function JMt(e,t,n){const r=hn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!k4(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await jV(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&nZ(r.remoteStore,i.targetId),UV(r,i.targetId)}).catch(kk)):(UV(r,i.targetId),await jV(r.localStore,i.targetId,!0))}async function ZMt(e,t){const n=hn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),nZ(n.remoteStore,r.targetId))}async function eLt(e,t,n){const r=aLt(e);try{const i=await function(o,a){const u=hn(o),l=$s.now(),c=a.reduce((h,p)=>h.add(p.key),jn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Vm(),m=jn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=x$t(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new Hy(v.key,b,QPe(b.value.mapValue),Wf.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:uOe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Fi(yr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await $k(r,i.changes),await $4(r.remoteStore)}catch(i){const s=aZ(i,"Failed to persist write");n.reject(s)}}async function HOe(e,t){const n=hn(e);try{const r=await mMt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ui(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ui(o.wa):i.removedDocuments.size>0&&(ui(o.wa),o.wa=!1))}),await $k(n,r,t)}catch(r){await kk(r)}}function Bhe(e,t,n){const r=hn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=hn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&uZ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function tLt(e,t,n){const r=hn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Fi(Bt.comparator);o=o.insert(s,ha.newNoDocument(s,dn.min()));const a=jn().add(s),u=new O4(dn.min(),new Map,new Fi(yr),o,a);await HOe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),lZ(r)}else await jV(r.localStore,t,!1).then(()=>UV(r,t,n)).catch(kk)}async function nLt(e,t){const n=hn(e),r=t.batch.batchId;try{const i=await pMt(n.localStore,t);WOe(n,r,null),qOe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $k(n,i)}catch(i){await kk(i)}}async function rLt(e,t,n){const r=hn(e);try{const i=await function(o,a){const u=hn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ui(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);WOe(r,t,n),qOe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await $k(r,i)}catch(i){await kk(i)}}function qOe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function WOe(e,t,n){const r=hn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function UV(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||GOe(e,r)})}function GOe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(nZ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),lZ(e))}function Uhe(e,t,n){for(const r of n)r instanceof UOe?(e.Ma.addReference(r.key,t),iLt(e,r)):r instanceof zOe?(It("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||GOe(e,r.key)):an()}function iLt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(It("SyncEngine","New document in limbo: "+n),e.Ca.add(r),lZ(e))}function lZ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Bt(pi.fromString(t)),r=e.Na.next();e.Fa.set(r,new GMt(n)),e.va=e.va.insert(n,r),POe(e.remoteStore,new a0(Eh(YJ(n.path)),r,"TargetPurposeLimboResolution",zJ.oe))}}async function $k(e,t,n){const r=hn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=tZ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=hn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Xe.forEach(l,d=>Xe.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Xe.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!Rk(f))throw f;It("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function sLt(e,t){const n=hn(e);if(!n.currentUser.isEqual(t)){It("SyncEngine","User change. New user:",t.toKey());const r=await IOe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new bt(Be.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await $k(n,r.us)}}function oLt(e,t){const n=hn(e),r=n.Fa.get(t);if(r&&r.wa)return jn().add(r.key);{let i=jn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function YOe(e){const t=hn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=HOe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=oLt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=tLt.bind(null,t),t.Sa.h_=VMt.bind(null,t.eventManager),t.Sa.ka=HMt.bind(null,t.eventManager),t}function aLt(e){const t=hn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=nLt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=rLt.bind(null,t),t}class zhe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=D4(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return hMt(this.persistence,new fMt,t.initialUser,this.serializer)}createPersistence(t){return new uMt(eZ.Hr,this.serializer)}createSharedClientState(t){return new _Mt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class uLt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Bhe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sLt.bind(null,this.syncEngine),await BMt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new zMt}()}createDatastore(t){const n=D4(t.databaseInfo.databaseId),r=function(s){return new SMt(s)}(t.databaseInfo);return function(s,o,a,u){return new AMt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new kMt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Bhe(this.syncEngine,n,0),function(){return Mhe.D()?new Mhe:new wMt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new YMt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=hn(r);It("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Dk(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KOe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):zm("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lLt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=bu.UNAUTHENTICATED,this.clientId=YPe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{It("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(It("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new pm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=aZ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Pj(e,t){e.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await IOe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Vhe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await XOe(e);It("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Lhe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Lhe(t.remoteStore,i)),e._onlineComponents=t}function cLt(e){return e.name==="FirebaseError"?e.code===Be.FAILED_PRECONDITION||e.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function XOe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{await Pj(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!cLt(n))throw n;GA("Error using user provided cache. Falling back to memory cache: "+n),await Pj(e,new zhe)}}else It("FirestoreClient","Using default OfflineComponentProvider"),await Pj(e,new zhe);return e._offlineComponents}async function cZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),await Vhe(e,e._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),await Vhe(e,new uLt))),e._onlineComponents}function fLt(e){return XOe(e).then(t=>t.persistence)}function dLt(e){return cZ(e).then(t=>t.remoteStore)}function hLt(e){return cZ(e).then(t=>t.syncEngine)}async function QOe(e){const t=await cZ(e),n=t.eventManager;return n.onListen=KMt.bind(null,t.syncEngine),n.onUnlisten=JMt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=XMt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ZMt.bind(null,t.syncEngine),n}function pLt(e){return e.asyncQueue.enqueue(async()=>{const t=await fLt(e),n=await dLt(e);return t.setNetworkEnabled(!0),function(i){const s=hn(i);return s.M_.delete(0),Ok(s)}(n)})}function mLt(e,t,n={}){const r=new pm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new KOe({next:d=>{o.enqueueAndForget(()=>jOe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new bt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new BOe(YJ(a.path),c,{includeMetadataChanges:!0,ra:!0});return FOe(s,f)}(await QOe(e),e.asyncQueue,t,n,r)),r.promise}function gLt(e,t,n={}){const r=new pm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new KOe({next:d=>{o.enqueueAndForget(()=>jOe(s,f)),d.fromCache&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new BOe(a,c,{includeMetadataChanges:!0,ra:!0});return FOe(s,f)}(await QOe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JOe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hhe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZOe(e,t,n){if(!n)throw new bt(Be.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function yLt(e,t,n,r){if(t===!0&&r===!0)throw new bt(Be.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function qhe(e){if(!Bt.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Whe(e){if(Bt.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function M4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":an()}function Vh(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=M4(e);throw new bt(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ghe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}yLt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JOe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class fZ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ghe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new bt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ghe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new O3t;switch(r.type){case"firstParty":return new M3t(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Hhe.get(n);r&&(It("ComponentProvider","Removing Datastore"),Hhe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Hb(this.firestore,t,this._query)}}class Ka{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new D0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ka(this.firestore,t,this._key)}}class D0 extends Hb{constructor(t,n,r){super(t,n,YJ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ka(this.firestore,null,new Bt(t))}withConverter(t){return new D0(this.firestore,t,this._path)}}function fv(e,t,...n){if(e=es(e),ZOe("collection","path",t),e instanceof fZ){const r=pi.fromString(t,...n);return Whe(r),new D0(e,null,r)}{if(!(e instanceof Ka||e instanceof D0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(pi.fromString(t,...n));return Whe(r),new D0(e.firestore,null,r)}}function Ts(e,t,...n){if(e=es(e),arguments.length===1&&(t=YPe.newId()),ZOe("doc","path",t),e instanceof fZ){const r=pi.fromString(t,...n);return qhe(r),new Ka(e,null,new Bt(r))}{if(!(e instanceof Ka||e instanceof D0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(pi.fromString(t,...n));return qhe(r),new Ka(e.firestore,e instanceof D0?e.converter:null,new Bt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vLt{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new ROe(this,"async_queue_retry"),this.hu=()=>{const n=Nj();n&&It("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=Nj();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=Nj();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new pm;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!Rk(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw zm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=oZ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&an()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class qb extends fZ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new vLt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||eDe(this),this._firestoreClient.terminate()}}function bLt(e,t,n){n||(n="(default)");const r=wS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(HA(s,t))return i;throw new bt(Be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new bt(Be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function L4(e){return e._firestoreClient||eDe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function eDe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new K3t(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,JOe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new lLt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function _Lt(e){return pLt(L4(e=Vh(e,qb)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(t){this._byteString=t}static fromBase64String(t){try{return new rx(Ta.fromBase64String(t))}catch(n){throw new bt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new rx(Ta.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Io(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dZ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return yr(this._lat,t._lat)||yr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wLt=/^__.*__$/;class ELt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Hy(t,this.data,this.fieldMask,n,this.fieldTransforms):new Nk(t,this.data,n,this.fieldTransforms)}}class tDe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Hy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function nDe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw an()}}class hZ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new hZ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return I$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(nDe(this.fu)&&wLt.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class xLt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||D4(t)}Fu(t,n,r,i=!1){return new hZ({fu:t,methodName:n,vu:r,path:Io.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pZ(e){const t=e._freezeSettings(),n=D4(e._databaseId);return new xLt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function SLt(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);gZ("Data must be an object, but it was:",o,r);const a=rDe(r,o);let u,l;if(s.merge)u=new Tl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=zV(t,f,n);if(!o.contains(d))throw new bt(Be.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);sDe(c,d)||c.push(d)}u=new Tl(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new ELt(new ku(a),u,l)}class B4 extends j4{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof B4}}class mZ extends j4{_toFieldTransform(t){return new b$t(t.path,new ZA)}isEqual(t){return t instanceof mZ}}function TLt(e,t,n,r){const i=e.Fu(1,t,n);gZ("Data must be an object, but it was:",i,r);const s=[],o=ku.empty();zb(r,(u,l)=>{const c=yZ(t,u,n);l=es(l);const f=i.Su(c);if(l instanceof B4)s.push(c);else{const d=Mk(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Tl(s);return new tDe(o,a,i.fieldTransforms)}function CLt(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[zV(t,r,n)],u=[i];if(s.length%2!=0)throw new bt(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(zV(t,s[d])),u.push(s[d+1]);const l=[],c=ku.empty();for(let d=a.length-1;d>=0;--d)if(!sDe(l,a[d])){const h=a[d];let p=u[d];p=es(p);const m=o.Su(h);if(p instanceof B4)l.push(h);else{const g=Mk(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Tl(l);return new tDe(c,f,o.fieldTransforms)}function ALt(e,t,n,r=!1){return Mk(n,e.Fu(r?4:3,t))}function Mk(e,t){if(iDe(e=es(e)))return gZ("Unsupported field value:",t,e),rDe(e,t);if(e instanceof j4)return function(r,i){if(!nDe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Mk(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=es(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return g$t(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=$s.fromDate(r);return{timestampValue:C$(i.serializer,s)}}if(r instanceof $s){const s=new $s(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:C$(i.serializer,s)}}if(r instanceof dZ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rx)return{bytesValue:wOe(i.serializer,r._byteString)};if(r instanceof Ka){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:JJ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${M4(r)}`)}(e,t)}function rDe(e,t){const n={};return KPe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):zb(e,(r,i)=>{const s=Mk(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function iDe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof $s||e instanceof dZ||e instanceof rx||e instanceof Ka||e instanceof j4)}function gZ(e,t,n){if(!iDe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=M4(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function zV(e,t,n){if((t=es(t))instanceof F4)return t._internalPath;if(typeof t=="string")return yZ(e,t);throw I$("Field path arguments must be of type string or ",e,!1,void 0,n)}const ILt=new RegExp("[~\\*/\\[\\]]");function yZ(e,t,n){if(t.search(ILt)>=0)throw I$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new F4(...t.split("."))._internalPath}catch{throw I$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function I$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new bt(Be.INVALID_ARGUMENT,a+e+u)}function sDe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oDe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ka(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new kLt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(U4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kLt extends oDe{data(){return super.data()}}function U4(e,t){return typeof t=="string"?yZ(e,t):t instanceof F4?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RLt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new bt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vZ{}class aDe extends vZ{}function Yhe(e,t,...n){let r=[];t instanceof vZ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof bZ).length,a=s.filter(u=>u instanceof z4).length;if(o>1||o>0&&a>0)throw new bt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class z4 extends aDe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new z4(t,n,r)}_apply(t){const n=this._parse(t);return uDe(t._query,n),new Hb(t.firestore,t.converter,OV(t._query,n))}_parse(t){const n=pZ(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Xhe(f,c);const h=[];for(const p of f)h.push(Khe(u,s,p));d={arrayValue:{values:h}}}else d=Khe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Xhe(f,c),d=ALt(a,o,f,c==="in"||c==="not-in");return Es.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function NLt(e,t,n){const r=t,i=U4("where",e);return z4._create(i,r,n)}class bZ extends vZ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new bZ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:td.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)uDe(o,u),o=OV(o,u)}(t._query,n),new Hb(t.firestore,t.converter,OV(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _Z extends aDe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new _Z(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new JA(s,o)}(t._query,this._field,this._direction);return new Hb(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new SS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function PLt(e,t="asc"){const n=t,r=U4("orderBy",e);return _Z._create(r,n)}function Khe(e,t,n){if(typeof(n=es(n))=="string"){if(n==="")throw new bt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iOe(t)&&n.indexOf("/")!==-1)throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(pi.fromString(n));if(!Bt.isDocumentKey(r))throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yhe(e,new Bt(r))}if(n instanceof Ka)return yhe(e,n._key);throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${M4(n)}.`)}function Xhe(e,t){if(!Array.isArray(e)||e.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function uDe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class OLt{convertValue(t,n="none"){switch(sb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return bs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ib(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw an()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return zb(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new dZ(bs(t.latitude),bs(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=HJ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(KA(t));default:return null}}convertTimestamp(t){const n=fy(t);return new $s(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=pi.fromString(t);ui(AOe(r));const i=new XA(r.get(1),r.get(3)),s=new Bt(r.popFirst(5));return i.isEqual(n)||zm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DLt(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class lDe extends oDe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new EO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(U4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class EO extends lDe{data(t={}){return super.data(t)}}class $Lt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new TC(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new EO(this._firestore,this._userDataWriter,r.key,r,new TC(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new EO(i._firestore,i._userDataWriter,a.doc.key,a.doc,new TC(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new EO(i._firestore,i._userDataWriter,a.doc.key,a.doc,new TC(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:MLt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function MLt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return an()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(e){e=Vh(e,Ka);const t=Vh(e.firestore,qb);return mLt(L4(t),e._key).then(n=>FLt(t,e,n))}class cDe extends OLt{constructor(t){super(),this.firestore=t}convertBytes(t){return new rx(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ka(this.firestore,null,n)}}function RT(e){e=Vh(e,Hb);const t=Vh(e.firestore,qb),n=L4(t),r=new cDe(t);return RLt(e._query),gLt(n,e._query).then(i=>new $Lt(t,r,e,i))}function tc(e,t,n){e=Vh(e,Ka);const r=Vh(e.firestore,qb),i=DLt(e.converter,t,n);return wZ(r,[SLt(pZ(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Wf.none())])}function Qhe(e,t,n,...r){e=Vh(e,Ka);const i=Vh(e.firestore,qb),s=pZ(i);let o;return o=typeof(t=es(t))=="string"||t instanceof F4?CLt(s,"updateDoc",e._key,t,n,r):TLt(s,"updateDoc",e._key,t),wZ(i,[o.toMutation(e._key,Wf.exists(!0))])}function LLt(e){return wZ(Vh(e.firestore,qb),[new KJ(e._key,Wf.none())])}function wZ(e,t){return function(r,i){const s=new pm;return r.asyncQueue.enqueueAndForget(async()=>eLt(await hLt(r),i,s)),s.promise}(L4(e),t)}function FLt(e,t,n){const r=n.docs.get(t._key),i=new cDe(e);return new lDe(e,i,t._key,r,new TC(n.hasPendingWrites,n.fromCache),t.converter)}function jLt(){return new mZ("serverTimestamp")}(function(t,n=!0){(function(i){xS=i})(Ub),Bm(new Bh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new qb(new D3t(r.getProvider("auth-internal")),new F3t(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new bt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new XA(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Hf(hhe,"4.6.3",t),Hf(hhe,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=new Map,fDe={activated:!1,tokenObservers:[]},BLt={initialized:!1,enabled:!1};function Ms(e){return VV.get(e)||Object.assign({},fDe)}function ULt(e,t){return VV.set(e,t),VV.get(e)}function V4(){return BLt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dDe="https://content-firebaseappcheck.googleapis.com/v1",zLt="exchangeRecaptchaV3Token",VLt="exchangeDebugToken",Jhe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},HLt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qLt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new VA,this.pending.promise.catch(n=>{}),await WLt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new VA,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function WLt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GLt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Mu=new _S("appCheck","AppCheck",GLt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zhe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function EZ(e){if(!Ms(e).activated)throw Mu.create("use-before-activation",{appName:e.name})}function hDe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=qN(n)+"d:"),r&&(o+=qN(r)+"h:"),o+=qN(i)+"m:"+qN(s)+"s",o}function qN(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xZ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Mu.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Mu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Mu.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Mu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function YLt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${dDe}/projects/${n}/apps/${r}:${zLt}?key=${i}`,body:{recaptcha_v3_token:t}}}function pDe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${dDe}/projects/${n}/apps/${r}:${VLt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KLt="firebase-app-check-database",XLt=1,nI="firebase-app-check-store",mDe="debug-token";let WN=null;function gDe(){return WN||(WN=new Promise((e,t)=>{try{const n=indexedDB.open(KLt,XLt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Mu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(nI,{keyPath:"compositeKey"})}}}catch(n){t(Mu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),WN)}function QLt(e){return vDe(bDe(e))}function JLt(e,t){return yDe(bDe(e),t)}function ZLt(e){return yDe(mDe,e)}function e6t(){return vDe(mDe)}async function yDe(e,t){const r=(await gDe()).transaction(nI,"readwrite"),s=r.objectStore(nI).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Mu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function vDe(e){const n=(await gDe()).transaction(nI,"readonly"),i=n.objectStore(nI).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Mu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function bDe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new x4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6t(e){if(SJ()){let t;try{t=await QLt(e)}catch(n){rI.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function Oj(e,t){return SJ()?JLt(e,t).catch(n=>{rI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function n6t(){let e;try{e=await e6t()}catch{}if(e)return e;{const t=oNt();return ZLt(t).catch(n=>rI.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SZ(){return V4().enabled}async function TZ(){const e=V4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function r6t(){const e=FNe(),t=V4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new VA;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(n6t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6t={error:"UNKNOWN_ERROR"};function s6t(e){return xJ.encodeString(JSON.stringify(e),!1)}async function HV(e,t=!1){const n=e.app;EZ(n);const r=Ms(n);let i=r.token,s;if(i&&!vw(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(vw(u)?i=u:await Oj(n,void 0))}if(!t&&i&&vw(i))return{token:i.token};let o=!1;if(SZ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=xZ(pDe(n,await TZ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await Oj(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Ms(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?rI.warn(u.message):rI.error(u),s=u}let a;return i?s?vw(i)?a={token:i.token,internalError:s}:a=tpe(s):(a={token:i.token},r.token=i,await Oj(n,i)):a=tpe(s),o&&EDe(n,a),a}async function o6t(e){const t=e.app;EZ(t);const{provider:n}=Ms(t);if(SZ()){const r=await TZ(),{token:i}=await xZ(pDe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function _De(e,t,n,r){const{app:i}=e,s=Ms(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&vw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),epe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>epe(e))}function wDe(e,t){const n=Ms(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function epe(e){const{app:t}=e,n=Ms(t);let r=n.tokenRefresher;r||(r=a6t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function a6t(e){const{app:t}=e;return new qLt(async()=>{const n=Ms(t);let r;if(n.token?r=await HV(e,!0):r=await HV(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Ms(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Jhe.RETRIAL_MIN_WAIT,Jhe.RETRIAL_MAX_WAIT)}function EDe(e,t){const n=Ms(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function vw(e){return e.expireTimeMillis-Date.now()>0}function tpe(e){return{token:s6t(i6t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Ms(this.app);for(const n of t)wDe(this.app,n.next);return Promise.resolve()}}function l6t(e,t){return new u6t(e,t)}function c6t(e){return{getToken:t=>HV(e,t),getLimitedUseToken:()=>o6t(e),addTokenListener:t=>_De(e,"INTERNAL",t),removeTokenListener:t=>wDe(e.app,t)}}const f6t="@firebase/app-check",d6t="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6t="https://www.google.com/recaptcha/api.js";function p6t(e,t){const n=new VA,r=Ms(e);r.reCAPTCHAState={initialized:n};const i=m6t(e),s=Zhe(!1);return s?npe(e,t,s,i,n):v6t(()=>{const o=Zhe(!1);if(!o)throw new Error("no recaptcha");npe(e,t,o,i,n)}),n.promise}function npe(e,t,n,r,i){n.ready(()=>{y6t(e,t,n,r),i.resolve(n)})}function m6t(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function g6t(e){EZ(e);const n=await Ms(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Ms(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function y6t(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Ms(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Ms(e).reCAPTCHAState.succeeded=!1}}),s=Ms(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function v6t(e){const t=document.createElement("script");t.src=h6t,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;_6t(this._throttleData);const i=await g6t(this._app).catch(o=>{throw Mu.create("recaptcha-error")});if(!(!((t=Ms(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Mu.create("recaptcha-error");let s;try{s=await xZ(YLt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=b6t(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Mu.create("throttled",{time:hDe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=wS(t,"heartbeat"),p6t(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof CZ?this._siteKey===t._siteKey:!1}}function b6t(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+HLt,httpStatus:e};{const n=t?t.backoffCount:0,r=fNt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function _6t(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Mu.create("throttled",{time:hDe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6t(e=CJ(),t){e=es(e);const n=wS(e,"app-check");if(V4().initialized||r6t(),SZ()&&TZ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Mu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return E6t(e,t.provider,t.isTokenAutoRefreshEnabled),Ms(e).isTokenAutoRefreshEnabled&&_De(r,"INTERNAL",()=>{}),r}function E6t(e,t,n){const r=ULt(e,Object.assign({},fDe));r.activated=!0,r.provider=t,r.cachedTokenPromise=t6t(e).then(i=>(i&&vw(i)&&(r.token=i,EDe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const x6t="app-check",rpe="app-check-internal";function S6t(){Bm(new Bh(x6t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return l6t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(rpe).initialize()})),Bm(new Bh(rpe,e=>{const t=e.getProvider("app-check").getImmediate();return c6t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Hf(f6t,d6t)}S6t();function GN(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xDe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof GN=="function"&&GN;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof GN=="function"&&GN,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof ko<"u"?ko:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,x!==o&&m(this,x)}f.prototype.catch=function(x){return this.then(null,x)},f.prototype.then=function(x,S){if(typeof x!="function"&&this.state===l||typeof S!="function"&&this.state===u)return this;var E=new this.constructor(o);if(this.state!==c){var T=this.state===l?x:S;h(E,T,this.outcome)}else this.queue.push(new d(E,x,S));return E};function d(x,S,E){this.promise=x,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(x){a.resolve(this.promise,x)},d.prototype.otherCallFulfilled=function(x){h(this.promise,this.onFulfilled,x)},d.prototype.callRejected=function(x){a.reject(this.promise,x)},d.prototype.otherCallRejected=function(x){h(this.promise,this.onRejected,x)};function h(x,S,E){s(function(){var T;try{T=S(E)}catch(A){return a.reject(x,A)}T===x?a.reject(x,new TypeError("Cannot resolve promise with itself")):a.resolve(x,T)})}a.resolve=function(x,S){var E=g(p,S);if(E.status==="error")return a.reject(x,E.value);var T=E.value;if(T)m(x,T);else{x.state=l,x.outcome=S;for(var A=-1,k=x.queue.length;++A<k;)x.queue[A].callFulfilled(S)}return x},a.reject=function(x,S){x.state=u,x.outcome=S;for(var E=-1,T=x.queue.length;++E<T;)x.queue[E].callRejected(S);return x};function p(x){var S=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof S=="function")return function(){S.apply(x,arguments)}}function m(x,S){var E=!1;function T($){E||(E=!0,a.reject(x,$))}function A($){E||(E=!0,a.resolve(x,$))}function k(){S(A,T)}var R=g(k);R.status==="error"&&T(R.value)}function g(x,S){var E={};try{E.value=x(S),E.status="success"}catch(T){E.status="error",E.value=T}return E}f.resolve=y;function y(x){return x instanceof this?x:a.resolve(new this(o),x)}f.reject=v;function v(x){var S=new this(o);return a.reject(S,x)}f.all=b;function b(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,T=!1;if(!E)return this.resolve([]);for(var A=new Array(E),k=0,R=-1,$=new this(o);++R<E;)P(x[R],R);return $;function P(O,M){S.resolve(O).then(j,function(B){T||(T=!0,a.reject($,B))});function j(B){A[M]=B,++k===E&&!T&&(T=!0,a.resolve($,A))}}}f.race=_;function _(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,T=!1;if(!E)return this.resolve([]);for(var A=-1,k=new this(o);++A<E;)R(x[A]);return k;function R($){S.resolve($).then(function(P){T||(T=!0,a.resolve(k,P))},function(P){T||(T=!0,a.reject(k,P))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof ko<"u"?ko:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(ce){if(ce.name!=="TypeError")throw ce;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new Z,ge=0;ge<Y.length;ge+=1)fe.append(Y[ge]);return fe.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,_="readonly",x="readwrite";function S(Y){for(var se=Y.length,Z=new ArrayBuffer(se),fe=new Uint8Array(Z),ge=0;ge<se;ge++)fe[ge]=Y.charCodeAt(ge);return Z}function E(Y){return new f(function(se){var Z=Y.transaction(g,x),fe=c([""]);Z.objectStore(g).put(fe,"key"),Z.onabort=function(ge){ge.preventDefault(),ge.stopPropagation(),se(!1)},Z.oncomplete=function(){var ge=navigator.userAgent.match(/Chrome\/(\d+)/),ce=navigator.userAgent.match(/Edge\//);se(ce||!ge||parseInt(ge[1],10)>=43)}}).catch(function(){return!1})}function T(Y){return typeof y=="boolean"?f.resolve(y):E(Y).then(function(se){return y=se,y})}function A(Y){var se=v[Y.name],Z={};Z.promise=new f(function(fe,ge){Z.resolve=fe,Z.reject=ge}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function k(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function R(Y,se){var Z=v[Y.name],fe=Z.deferredOperations.pop();if(fe)return fe.reject(se),fe.promise}function $(Y,se){return new f(function(Z,fe){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)A(Y),Y.db.close();else return Z(Y.db);var ge=[Y.name];se&&ge.push(Y.version);var ce=u.open.apply(u,ge);se&&(ce.onupgradeneeded=function(De){var ze=ce.result;try{ze.createObjectStore(Y.storeName),De.oldVersion<=1&&ze.createObjectStore(g)}catch(He){if(He.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+De.oldVersion+" to version "+De.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw He}}),ce.onerror=function(De){De.preventDefault(),fe(ce.error)},ce.onsuccess=function(){var De=ce.result;De.onversionchange=function(ze){ze.target.close()},Z(De),k(Y)}})}function P(Y){return $(Y,!1)}function O(Y){return $(Y,!0)}function M(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),fe=Y.version<Y.db.version,ge=Y.version>Y.db.version;if(fe&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ge||Z){if(Z){var ce=Y.db.version+1;ce>Y.version&&(Y.version=ce)}return!0}return!1}function j(Y){return new f(function(se,Z){var fe=new FileReader;fe.onerror=Z,fe.onloadend=function(ge){var ce=btoa(ge.target.result||"");se({__local_forage_encoded_blob:!0,data:ce,type:Y.type})},fe.readAsBinaryString(Y)})}function B(Y){var se=S(atob(Y.data));return c([se],{type:Y.type})}function U(Y){return Y&&Y.__local_forage_encoded_blob}function V(Y){var se=this,Z=se._initReady().then(function(){var fe=v[se._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(Z,Y,Y),Z}function D(Y){A(Y);for(var se=v[Y.name],Z=se.forages,fe=0;fe<Z.length;fe++){var ge=Z[fe];ge._dbInfo.db&&(ge._dbInfo.db.close(),ge._dbInfo.db=null)}return Y.db=null,P(Y).then(function(ce){return Y.db=ce,M(Y)?O(Y):ce}).then(function(ce){Y.db=se.db=ce;for(var De=0;De<Z.length;De++)Z[De]._dbInfo.db=ce}).catch(function(ce){throw R(Y,ce),ce})}function z(Y,se,Z,fe){fe===void 0&&(fe=1);try{var ge=Y.db.transaction(Y.storeName,se);Z(null,ge)}catch(ce){if(fe>0&&(!Y.db||ce.name==="InvalidStateError"||ce.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||ce.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),O(Y)}).then(function(){return D(Y).then(function(){z(Y,se,Z,fe-1)})}).catch(Z);Z(ce)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function F(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=Y[fe];var ge=v[Z.name];ge||(ge=W(),v[Z.name]=ge),ge.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=V);var ce=[];function De(){return f.resolve()}for(var ze=0;ze<ge.forages.length;ze++){var He=ge.forages[ze];He!==se&&ce.push(He._initReady().catch(De))}var We=ge.forages.slice(0);return f.all(ce).then(function(){return Z.db=ge.db,P(Z)}).then(function(it){return Z.db=it,M(Z,se._defaultConfig.version)?O(Z):it}).then(function(it){Z.db=ge.db=it,se._dbInfo=Z;for(var _t=0;_t<We.length;_t++){var mn=We[_t];mn!==se&&(mn._dbInfo.db=Z.db,mn._dbInfo.version=Z.version)}})}function H(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,ce){Z.ready().then(function(){z(Z._dbInfo,_,function(De,ze){if(De)return ce(De);try{var He=ze.objectStore(Z._dbInfo.storeName),We=He.get(Y);We.onsuccess=function(){var it=We.result;it===void 0&&(it=null),U(it)&&(it=B(it)),ge(it)},We.onerror=function(){ce(We.error)}}catch(it){ce(it)}})}).catch(ce)});return d(fe,se),fe}function G(Y,se){var Z=this,fe=new f(function(ge,ce){Z.ready().then(function(){z(Z._dbInfo,_,function(De,ze){if(De)return ce(De);try{var He=ze.objectStore(Z._dbInfo.storeName),We=He.openCursor(),it=1;We.onsuccess=function(){var _t=We.result;if(_t){var mn=_t.value;U(mn)&&(mn=B(mn));var Pt=Y(mn,_t.key,it++);Pt!==void 0?ge(Pt):_t.continue()}else ge()},We.onerror=function(){ce(We.error)}}catch(_t){ce(_t)}})}).catch(ce)});return d(fe,se),fe}function ee(Y,se,Z){var fe=this;Y=p(Y);var ge=new f(function(ce,De){var ze;fe.ready().then(function(){return ze=fe._dbInfo,b.call(se)==="[object Blob]"?T(ze.db).then(function(He){return He?se:j(se)}):se}).then(function(He){z(fe._dbInfo,x,function(We,it){if(We)return De(We);try{var _t=it.objectStore(fe._dbInfo.storeName);He===null&&(He=void 0);var mn=_t.put(He,Y);it.oncomplete=function(){He===void 0&&(He=null),ce(He)},it.onabort=it.onerror=function(){var Pt=mn.error?mn.error:mn.transaction.error;De(Pt)}}catch(Pt){De(Pt)}})}).catch(De)});return d(ge,Z),ge}function le(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,ce){Z.ready().then(function(){z(Z._dbInfo,x,function(De,ze){if(De)return ce(De);try{var He=ze.objectStore(Z._dbInfo.storeName),We=He.delete(Y);ze.oncomplete=function(){ge()},ze.onerror=function(){ce(We.error)},ze.onabort=function(){var it=We.error?We.error:We.transaction.error;ce(it)}}catch(it){ce(it)}})}).catch(ce)});return d(fe,se),fe}function de(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){z(se._dbInfo,x,function(ce,De){if(ce)return ge(ce);try{var ze=De.objectStore(se._dbInfo.storeName),He=ze.clear();De.oncomplete=function(){fe()},De.onabort=De.onerror=function(){var We=He.error?He.error:He.transaction.error;ge(We)}}catch(We){ge(We)}})}).catch(ge)});return d(Z,Y),Z}function he(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){z(se._dbInfo,_,function(ce,De){if(ce)return ge(ce);try{var ze=De.objectStore(se._dbInfo.storeName),He=ze.count();He.onsuccess=function(){fe(He.result)},He.onerror=function(){ge(He.error)}}catch(We){ge(We)}})}).catch(ge)});return d(Z,Y),Z}function ye(Y,se){var Z=this,fe=new f(function(ge,ce){if(Y<0){ge(null);return}Z.ready().then(function(){z(Z._dbInfo,_,function(De,ze){if(De)return ce(De);try{var He=ze.objectStore(Z._dbInfo.storeName),We=!1,it=He.openKeyCursor();it.onsuccess=function(){var _t=it.result;if(!_t){ge(null);return}Y===0||We?ge(_t.key):(We=!0,_t.advance(Y))},it.onerror=function(){ce(it.error)}}catch(_t){ce(_t)}})}).catch(ce)});return d(fe,se),fe}function Ce(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){z(se._dbInfo,_,function(ce,De){if(ce)return ge(ce);try{var ze=De.objectStore(se._dbInfo.storeName),He=ze.openKeyCursor(),We=[];He.onsuccess=function(){var it=He.result;if(!it){fe(We);return}We.push(it.key),it.continue()},He.onerror=function(){ge(He.error)}}catch(it){ge(it)}})}).catch(ge)});return d(Z,Y),Z}function ve(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ge;if(!Y.name)ge=f.reject("Invalid arguments");else{var ce=Y.name===Z.name&&fe._dbInfo.db,De=ce?f.resolve(fe._dbInfo.db):P(Y).then(function(ze){var He=v[Y.name],We=He.forages;He.db=ze;for(var it=0;it<We.length;it++)We[it]._dbInfo.db=ze;return ze});Y.storeName?ge=De.then(function(ze){if(ze.objectStoreNames.contains(Y.storeName)){var He=ze.version+1;A(Y);var We=v[Y.name],it=We.forages;ze.close();for(var _t=0;_t<it.length;_t++){var mn=it[_t];mn._dbInfo.db=null,mn._dbInfo.version=He}var Pt=new f(function(Ln,Ar){var Ir=u.open(Y.name,He);Ir.onerror=function(Yo){var Ed=Ir.result;Ed.close(),Ar(Yo)},Ir.onupgradeneeded=function(){var Yo=Ir.result;Yo.deleteObjectStore(Y.storeName)},Ir.onsuccess=function(){var Yo=Ir.result;Yo.close(),Ln(Yo)}});return Pt.then(function(Ln){We.db=Ln;for(var Ar=0;Ar<it.length;Ar++){var Ir=it[Ar];Ir._dbInfo.db=Ln,k(Ir._dbInfo)}}).catch(function(Ln){throw(R(Y,Ln)||f.resolve()).catch(function(){}),Ln})}}):ge=De.then(function(ze){A(Y);var He=v[Y.name],We=He.forages;ze.close();for(var it=0;it<We.length;it++){var _t=We[it];_t._dbInfo.db=null}var mn=new f(function(Pt,Ln){var Ar=u.deleteDatabase(Y.name);Ar.onerror=function(){var Ir=Ar.result;Ir&&Ir.close(),Ln(Ar.error)},Ar.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Ar.onsuccess=function(){var Ir=Ar.result;Ir&&Ir.close(),Pt(Ir)}});return mn.then(function(Pt){He.db=Pt;for(var Ln=0;Ln<We.length;Ln++){var Ar=We[Ln];k(Ar._dbInfo)}}).catch(function(Pt){throw(R(Y,Pt)||f.resolve()).catch(function(){}),Pt})})}return d(ge,se),ge}var Ye={_driver:"asyncStorage",_initStorage:F,_support:l(),iterate:G,getItem:H,setItem:ee,removeItem:le,clear:de,length:he,key:ye,keys:Ce,dropInstance:ve};function Ue(){return typeof openDatabase=="function"}var pt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rt="~~local_forage_type~",be=/^~~local_forage_type~([^~]+)~/,Ae="__lfsc__:",Ve=Ae.length,ut="arbf",Nt="blob",qe="si08",me="ui08",ct="uic8",gt="si16",wt="si32",pe="ur16",Ie="ui32",Ke="fl32",yt="fl64",Vt=Ve+ut.length,er=Object.prototype.toString;function Vn(Y){var se=Y.length*.75,Z=Y.length,fe,ge=0,ce,De,ze,He;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var We=new ArrayBuffer(se),it=new Uint8Array(We);for(fe=0;fe<Z;fe+=4)ce=pt.indexOf(Y[fe]),De=pt.indexOf(Y[fe+1]),ze=pt.indexOf(Y[fe+2]),He=pt.indexOf(Y[fe+3]),it[ge++]=ce<<2|De>>4,it[ge++]=(De&15)<<4|ze>>2,it[ge++]=(ze&3)<<6|He&63;return We}function $n(Y){var se=new Uint8Array(Y),Z="",fe;for(fe=0;fe<se.length;fe+=3)Z+=pt[se[fe]>>2],Z+=pt[(se[fe]&3)<<4|se[fe+1]>>4],Z+=pt[(se[fe+1]&15)<<2|se[fe+2]>>6],Z+=pt[se[fe+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function gn(Y,se){var Z="";if(Y&&(Z=er.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&er.call(Y.buffer)==="[object ArrayBuffer]")){var fe,ge=Ae;Y instanceof ArrayBuffer?(fe=Y,ge+=ut):(fe=Y.buffer,Z==="[object Int8Array]"?ge+=qe:Z==="[object Uint8Array]"?ge+=me:Z==="[object Uint8ClampedArray]"?ge+=ct:Z==="[object Int16Array]"?ge+=gt:Z==="[object Uint16Array]"?ge+=pe:Z==="[object Int32Array]"?ge+=wt:Z==="[object Uint32Array]"?ge+=Ie:Z==="[object Float32Array]"?ge+=Ke:Z==="[object Float64Array]"?ge+=yt:se(new Error("Failed to get type for BinaryArray"))),se(ge+$n(fe))}else if(Z==="[object Blob]"){var ce=new FileReader;ce.onload=function(){var De=rt+Y.type+"~"+$n(this.result);se(Ae+Nt+De)},ce.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(De){console.error("Couldn't convert value into a JSON string: ",Y),se(null,De)}}function gr(Y){if(Y.substring(0,Ve)!==Ae)return JSON.parse(Y);var se=Y.substring(Vt),Z=Y.substring(Ve,Vt),fe;if(Z===Nt&&be.test(se)){var ge=se.match(be);fe=ge[1],se=se.substring(ge[0].length)}var ce=Vn(se);switch(Z){case ut:return ce;case Nt:return c([ce],{type:fe});case qe:return new Int8Array(ce);case me:return new Uint8Array(ce);case ct:return new Uint8ClampedArray(ce);case gt:return new Int16Array(ce);case pe:return new Uint16Array(ce);case wt:return new Int32Array(ce);case Ie:return new Uint32Array(ce);case Ke:return new Float32Array(ce);case yt:return new Float64Array(ce);default:throw new Error("Unkown type: "+Z)}}var Qt={serialize:gn,deserialize:gr,stringToBuffer:Vn,bufferToString:$n};function qr(Y,se,Z,fe){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,fe)}function Zr(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=typeof Y[fe]!="string"?Y[fe].toString():Y[fe];var ge=new f(function(ce,De){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(ze){return De(ze)}Z.db.transaction(function(ze){qr(ze,Z,function(){se._dbInfo=Z,ce()},function(He,We){De(We)})},De)});return Z.serializer=Qt,ge}function ji(Y,se,Z,fe,ge,ce){Y.executeSql(Z,fe,ge,function(De,ze){ze.code===ze.SYNTAX_ERR?De.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(He,We){We.rows.length?ce(He,ze):qr(He,se,function(){He.executeSql(Z,fe,ge,ce)},ce)},ce):ce(De,ze)},ce)}function Cn(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,ce){Z.ready().then(function(){var De=Z._dbInfo;De.db.transaction(function(ze){ji(ze,De,"SELECT * FROM "+De.storeName+" WHERE key = ? LIMIT 1",[Y],function(He,We){var it=We.rows.length?We.rows.item(0).value:null;it&&(it=De.serializer.deserialize(it)),ge(it)},function(He,We){ce(We)})})}).catch(ce)});return d(fe,se),fe}function Bi(Y,se){var Z=this,fe=new f(function(ge,ce){Z.ready().then(function(){var De=Z._dbInfo;De.db.transaction(function(ze){ji(ze,De,"SELECT * FROM "+De.storeName,[],function(He,We){for(var it=We.rows,_t=it.length,mn=0;mn<_t;mn++){var Pt=it.item(mn),Ln=Pt.value;if(Ln&&(Ln=De.serializer.deserialize(Ln)),Ln=Y(Ln,Pt.key,mn+1),Ln!==void 0){ge(Ln);return}}ge()},function(He,We){ce(We)})})}).catch(ce)});return d(fe,se),fe}function Tr(Y,se,Z,fe){var ge=this;Y=p(Y);var ce=new f(function(De,ze){ge.ready().then(function(){se===void 0&&(se=null);var He=se,We=ge._dbInfo;We.serializer.serialize(se,function(it,_t){_t?ze(_t):We.db.transaction(function(mn){ji(mn,We,"INSERT OR REPLACE INTO "+We.storeName+" (key, value) VALUES (?, ?)",[Y,it],function(){De(He)},function(Pt,Ln){ze(Ln)})},function(mn){if(mn.code===mn.QUOTA_ERR){if(fe>0){De(Tr.apply(ge,[Y,He,Z,fe-1]));return}ze(mn)}})})}).catch(ze)});return d(ce,Z),ce}function gs(Y,se,Z){return Tr.apply(this,[Y,se,Z,1])}function bp(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,ce){Z.ready().then(function(){var De=Z._dbInfo;De.db.transaction(function(ze){ji(ze,De,"DELETE FROM "+De.storeName+" WHERE key = ?",[Y],function(){ge()},function(He,We){ce(We)})})}).catch(ce)});return d(fe,se),fe}function ol(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var ce=se._dbInfo;ce.db.transaction(function(De){ji(De,ce,"DELETE FROM "+ce.storeName,[],function(){fe()},function(ze,He){ge(He)})})}).catch(ge)});return d(Z,Y),Z}function _d(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var ce=se._dbInfo;ce.db.transaction(function(De){ji(De,ce,"SELECT COUNT(key) as c FROM "+ce.storeName,[],function(ze,He){var We=He.rows.item(0).c;fe(We)},function(ze,He){ge(He)})})}).catch(ge)});return d(Z,Y),Z}function wr(Y,se){var Z=this,fe=new f(function(ge,ce){Z.ready().then(function(){var De=Z._dbInfo;De.db.transaction(function(ze){ji(ze,De,"SELECT key FROM "+De.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(He,We){var it=We.rows.length?We.rows.item(0).key:null;ge(it)},function(He,We){ce(We)})})}).catch(ce)});return d(fe,se),fe}function ki(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var ce=se._dbInfo;ce.db.transaction(function(De){ji(De,ce,"SELECT key FROM "+ce.storeName,[],function(ze,He){for(var We=[],it=0;it<He.rows.length;it++)We.push(He.rows.item(it).key);fe(We)},function(ze,He){ge(He)})})}).catch(ge)});return d(Z,Y),Z}function ei(Y){return new f(function(se,Z){Y.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ge,ce){for(var De=[],ze=0;ze<ce.rows.length;ze++)De.push(ce.rows.item(ze).name);se({db:Y,storeNames:De})},function(ge,ce){Z(ce)})},function(fe){Z(fe)})})}function cu(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ge;return Y.name?ge=new f(function(ce){var De;Y.name===Z.name?De=fe._dbInfo.db:De=openDatabase(Y.name,"","",0),Y.storeName?ce({db:De,storeNames:[Y.storeName]}):ce(ei(De))}).then(function(ce){return new f(function(De,ze){ce.db.transaction(function(He){function We(Pt){return new f(function(Ln,Ar){He.executeSql("DROP TABLE IF EXISTS "+Pt,[],function(){Ln()},function(Ir,Yo){Ar(Yo)})})}for(var it=[],_t=0,mn=ce.storeNames.length;_t<mn;_t++)it.push(We(ce.storeNames[_t]));f.all(it).then(function(){De()}).catch(function(Pt){ze(Pt)})},function(He){ze(He)})})}):ge=f.reject("Invalid arguments"),d(ge,se),ge}var Ra={_driver:"webSQLStorage",_initStorage:Zr,_support:Ue(),iterate:Bi,getItem:Cn,setItem:gs,removeItem:bp,clear:ol,length:_d,key:wr,keys:ki,dropInstance:cu};function Na(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function te(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!te()||localStorage.length>0}function Te(Y){var se=this,Z={};if(Y)for(var fe in Y)Z[fe]=Y[fe];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=Qt,f.resolve()):f.reject()}function Se(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo.keyPrefix,ge=localStorage.length-1;ge>=0;ge--){var ce=localStorage.key(ge);ce.indexOf(fe)===0&&localStorage.removeItem(ce)}});return d(Z,Y),Z}function st(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ge=Z._dbInfo,ce=localStorage.getItem(ge.keyPrefix+Y);return ce&&(ce=ge.serializer.deserialize(ce)),ce});return d(fe,se),fe}function St(Y,se){var Z=this,fe=Z.ready().then(function(){for(var ge=Z._dbInfo,ce=ge.keyPrefix,De=ce.length,ze=localStorage.length,He=1,We=0;We<ze;We++){var it=localStorage.key(We);if(it.indexOf(ce)===0){var _t=localStorage.getItem(it);if(_t&&(_t=ge.serializer.deserialize(_t)),_t=Y(_t,it.substring(De),He++),_t!==void 0)return _t}}});return d(fe,se),fe}function qt(Y,se){var Z=this,fe=Z.ready().then(function(){var ge=Z._dbInfo,ce;try{ce=localStorage.key(Y)}catch{ce=null}return ce&&(ce=ce.substring(ge.keyPrefix.length)),ce});return d(fe,se),fe}function Pn(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo,ge=localStorage.length,ce=[],De=0;De<ge;De++){var ze=localStorage.key(De);ze.indexOf(fe.keyPrefix)===0&&ce.push(ze.substring(fe.keyPrefix.length))}return ce});return d(Z,Y),Z}function Mn(Y){var se=this,Z=se.keys().then(function(fe){return fe.length});return d(Z,Y),Z}function pn(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ge=Z._dbInfo;localStorage.removeItem(ge.keyPrefix+Y)});return d(fe,se),fe}function tr(Y,se,Z){var fe=this;Y=p(Y);var ge=fe.ready().then(function(){se===void 0&&(se=null);var ce=se;return new f(function(De,ze){var He=fe._dbInfo;He.serializer.serialize(se,function(We,it){if(it)ze(it);else try{localStorage.setItem(He.keyPrefix+Y,We),De(ce)}catch(_t){(_t.name==="QuotaExceededError"||_t.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ze(_t),ze(_t)}})})});return d(ge,Z),ge}function Cr(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var fe=this,ge;return Y.name?ge=new f(function(ce){Y.storeName?ce(oe(Y,fe._defaultConfig)):ce(Y.name+"/")}).then(function(ce){for(var De=localStorage.length-1;De>=0;De--){var ze=localStorage.key(De);ze.indexOf(ce)===0&&localStorage.removeItem(ze)}}):ge=f.reject("Invalid arguments"),d(ge,se),ge}var Ht={_driver:"localStorageWrapper",_initStorage:Te,_support:Na(),iterate:St,getItem:st,setItem:tr,removeItem:pn,clear:Se,length:Mn,key:qt,keys:Pn,dropInstance:Cr},nr=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},Wr=function(se,Z){for(var fe=se.length,ge=0;ge<fe;){if(nr(se[ge],Z))return!0;ge++}return!1},Kn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Ri={},Vs={},ti={INDEXEDDB:Ye,WEBSQL:Ra,LOCALSTORAGE:Ht},mo=[ti.INDEXEDDB._driver,ti.WEBSQL._driver,ti.LOCALSTORAGE._driver],Ui=["dropInstance"],zi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ui),Go={description:"",driver:mo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Pa(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function Hs(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Kn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var Ql=function(){function Y(se){o(this,Y);for(var Z in ti)if(ti.hasOwnProperty(Z)){var fe=ti[Z],ge=fe._driver;this[Z]=ge,Ri[ge]||this.defineDriver(fe)}this._defaultConfig=Hs({},Go),this._config=Hs({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in Z){if(fe==="storeName"&&(Z[fe]=Z[fe].replace(/\W/g,"_")),fe==="version"&&typeof Z[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=Z[fe]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,fe,ge){var ce=new f(function(De,ze){try{var He=Z._driver,We=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){ze(We);return}for(var it=zi.concat("_initStorage"),_t=0,mn=it.length;_t<mn;_t++){var Pt=it[_t],Ln=!Wr(Ui,Pt);if((Ln||Z[Pt])&&typeof Z[Pt]!="function"){ze(We);return}}var Ar=function(){for(var Ed=function(Jl){return function(){var fu=new Error("Method "+Jl+" is not implemented by the current driver"),wp=f.reject(fu);return d(wp,arguments[arguments.length-1]),wp}},_p=0,KS=Ui.length;_p<KS;_p++){var rv=Ui[_p];Z[rv]||(Z[rv]=Ed(rv))}};Ar();var Ir=function(Ed){Ri[He]&&console.info("Redefining LocalForage driver: "+He),Ri[He]=Z,Vs[He]=Ed,De()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(Ir,ze):Ir(!!Z._support):Ir(!0)}catch(Yo){ze(Yo)}});return h(ce,fe,ge),ce},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,fe,ge){var ce=Ri[Z]?f.resolve(Ri[Z]):f.reject(new Error("Driver not found."));return h(ce,fe,ge),ce},Y.prototype.getSerializer=function(Z){var fe=f.resolve(Qt);return h(fe,Z),fe},Y.prototype.ready=function(Z){var fe=this,ge=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(ge,Z,Z),ge},Y.prototype.setDriver=function(Z,fe,ge){var ce=this;Kn(Z)||(Z=[Z]);var De=this._getSupportedDrivers(Z);function ze(){ce._config.driver=ce.driver()}function He(_t){return ce._extend(_t),ze(),ce._ready=ce._initStorage(ce._config),ce._ready}function We(_t){return function(){var mn=0;function Pt(){for(;mn<_t.length;){var Ln=_t[mn];return mn++,ce._dbInfo=null,ce._ready=null,ce.getDriver(Ln).then(He).catch(Pt)}ze();var Ar=new Error("No available storage method found.");return ce._driverSet=f.reject(Ar),ce._driverSet}return Pt()}}var it=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=it.then(function(){var _t=De[0];return ce._dbInfo=null,ce._ready=null,ce.getDriver(_t).then(function(mn){ce._driver=mn._driver,ze(),ce._wrapLibraryMethodsWithReady(),ce._initDriver=We(De)})}).catch(function(){ze();var _t=new Error("No available storage method found.");return ce._driverSet=f.reject(_t),ce._driverSet}),h(this._driverSet,fe,ge),this._driverSet},Y.prototype.supports=function(Z){return!!Vs[Z]},Y.prototype._extend=function(Z){Hs(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var fe=[],ge=0,ce=Z.length;ge<ce;ge++){var De=Z[ge];this.supports(De)&&fe.push(De)}return fe},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,fe=zi.length;Z<fe;Z++)Pa(this,zi[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),wd=new Ql;r.exports=wd},{3:3}]},{},[4])(4)})})(xDe);var T6t=xDe.exports;const qV=Ho(T6t);class SDe{constructor(t){ul(this,"engine");ul(this,"connected",!1);ul(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function nE(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}class zd extends SDe{constructor(){super("firebase");ul(this,"RECAPTCHAV3TOKEN","6LfZJ4EpAAAAAORbyljBz16Te5vhCpEz2L2QgqtQ");ul(this,"firestore");ul(this,"collectionPrefix","prod-");ul(this,"studyCollection");ul(this,"studyId","");ul(this,"localForage",qV.createInstance({name:"currentParticipantId"}));ul(this,"localProvenanceCopy",{});ul(this,"localWindowEvents",{});const n=PQ.parse(`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`),r=HNe(n);this.firestore=bLt(r,{});try{w6t(r,{provider:new CZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}saveEditedTranscript(n,r){throw new Error("Method not implemented.")}getEditedTranscript(n){throw new Error("Method not implemented.")}async connect(){try{await _Lt(this.firestore);const n=await Ts(this.firestore,".info/connected");await kT(n),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=E$();if(!i.currentUser&&(await eOt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await nE(JSON.stringify(r));this.studyCollection=fv(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const a=Ts(this.studyCollection,"configs"),u=fv(a,"configs"),l=Ts(u,o);return s&&s!==o&&(this._deleteFromFirebaseStorage("","sequenceArray"),await this.clearCurrentParticipantId()),await this.localForage.setItem("currentConfigHash",o),await tc(l,r)}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=Ts(this.studyCollection,this.currentParticipantId),a=(await kT(o)).data();if(this.localProvenanceCopy=await this._getFromFirebaseStorage(this.currentParticipantId,"provenance"),this.localWindowEvents=await this._getFromFirebaseStorage(this.currentParticipantId,"windowEvents"),Object.entries(this.localWindowEvents).forEach(([c,f])=>{a===null||!a.answers[c]||(f===void 0||f.length===0?a.answers[c].windowEvents=[]:a.answers[c].windowEvents=f)}),a)return a;const u=await nE(JSON.stringify(r)),l={participantId:this.currentParticipantId,participantConfigHash:u,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1};return await tc(o,l),l}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=Ts(this.studyCollection);return this.currentParticipantId=i.id,await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=Ts(this.studyCollection,this.currentParticipantId),s={answer:r.answer,startTime:r.startTime,endTime:r.endTime};await tc(i,{answers:{[n]:s}},{merge:!0}),r.provenanceGraph&&(this.localProvenanceCopy[n]=r.provenanceGraph,await this._pushToFirebaseStorage(this.currentParticipantId,"provenance",this.localProvenanceCopy)),this.localWindowEvents[n]=r.windowEvents,await this._pushToFirebaseStorage(this.currentParticipantId,"windowEvents",this.localWindowEvents)}async saveAudio(n,r){n.addEventListener("dataavailable",i=>{const s=Cg(),o=Tg(s,`${this.studyId}/audio/${this.currentParticipantId}_${r}`);fhe(o,i.data).then(()=>{console.warn("Uploaded a blob or file!")})}),n.stop(),n.stream.getTracks().forEach(i=>i.stop())}async getAudio(n,r){const i=Cg(),s=await Promise.all(n.map(async a=>await AT(Tg(i,`${this.studyId}/audio/${r}_${a}`))));return Promise.all(s.map(a=>new Promise(u=>{const l=new XMLHttpRequest;l.responseType="blob",l.onload=()=>{const c=l.response,f=URL.createObjectURL(c);u(f)},l.open("GET",a),l.send()})))}async getTranscription(n,r){const i=Cg(),s=await Promise.all(n.map(async a=>await AT(Tg(i,`${this.studyId}/audio/${r}_${a}.wav_transcription.txt`))));return Promise.all(s.map(a=>new Promise(u=>{const l=new XMLHttpRequest;l.responseType="blob",l.onload=()=>{l.response.text().then(f=>{u(f)})},l.open("GET",a),l.send()})))}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");this._pushToFirebaseStorage("","sequenceArray",{sequenceArray:n})}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return(await this._getFromFirebaseStorage("","sequenceArray")).sequenceArray}async getSequence(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.getSequenceArray();if(!r)throw new Error("Latin square not initialized");const i=Ts(this.studyCollection,"sequenceAssignment"),s=fv(i,"sequenceAssignment"),o=Ts(s,this.currentParticipantId),a=Yhe(s,NLt("participantId","==","")),u=await RT(a);if(u.docs.length>0){const p=u.docs[0],m=p.data().timestamp;await LLt(p.ref),await tc(o,{participantId:this.currentParticipantId,timestamp:m})}else await tc(o,{participantId:this.currentParticipantId,timestamp:jLt()});const l=Yhe(s,PLt("timestamp","asc")),d=(await RT(l)).docs.map(p=>p.data()).findIndex(p=>p.participantId===n||this.currentParticipantId),h=r[d%r.length];if(!h)throw new Error("Latin square is empty");return h}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await RT(this.studyCollection),r=[],i=n.docs.map(async s=>{if(s.id==="config"||s.id==="sequenceArray"||s.id==="audioTags"||s.id==="sequenceAssignment"||s.id==="configs")return;const o=s.data(),a=await this._getFromFirebaseStorage(o.participantId,"provenance"),u=await this._getFromFirebaseStorage(o.participantId,"windowEvents");o.answers=Object.fromEntries(Object.entries(o.answers).map(([l,c])=>{if(c===void 0)return[l,c];const f=a[l],d=u[l];return[l,{...c,provenanceGraph:f,windowEvents:d}]})),r.push(o)});return await Promise.all(i),r}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this.getCurrentParticipantId();let r=null;if(this.currentParticipantId!==null){const i=Ts(this.studyCollection,n||this.currentParticipantId);if(r=(await kT(i)).data(),r!==null){const s=await this._getFromFirebaseStorage(n||this.currentParticipantId,"provenance"),o=await this._getFromFirebaseStorage(n||this.currentParticipantId,"windowEvents");Object.entries(r.answers).forEach(([a,u])=>{u!==void 0&&(u.provenanceGraph=s[a],u.windowEvents=o[a])})}}return r}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=Ts(this.studyCollection),s=i.id;await this.localForage.setItem("currentParticipantId",s),this.currentParticipantId=s;let o=null;if(this.currentParticipantId!==null&&(o=(await kT(i)).data()),!o){const a=await nE(JSON.stringify(n)),u={participantId:s,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};await tc(i,u),o=u}return o}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");const r=Ts(this.studyCollection,this.currentParticipantId);return await tc(r,{completed:!0},{merge:!0}),n.completed=!0,!0}async getUserManagementData(n){const r=fv(this.firestore,"user-management"),i=await RT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.user.uid=n.user.uid),await tc(Ts(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await tc(Ts(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await tc(Ts(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await tc(Ts(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await tc(Ts(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=fv(this.firestore,`${this.collectionPrefix}${n}`),i=await RT(r),s=[],o=i.docs.map(async a=>{if(a.id==="config"||a.id==="sequenceArray")return;const u=a.data(),l=await this._getFromFirebaseStorage(u.participantId,"provenance"),c=await this._getFromFirebaseStorage(u.participantId,"windowEvents");u.answers=Object.fromEntries(Object.entries(u.answers).map(([f,d])=>{if(d===void 0)return[f,d];const h=l[f],p=c[f];return[f,{...d,provenanceGraph:h,windowEvents:p}]})),s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=fv(this.firestore,`${this.collectionPrefix}${n}`),s=Ts(i,r),o=(await kT(s)).data();try{if(!o||o.rejected)return;await Qhe(s,{rejected:!0});const a=Ts(i,"sequenceAssignment"),u=fv(a,"sequenceAssignment"),l=Ts(u,r);await Qhe(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Cg(),s=Tg(i,`${this.studyId}/${n}_${r}`);let o={};try{const a=await AT(s),l=await(await fetch(a)).text();o=JSON.parse(l)}catch{console.warn(`${n} does not have ${r} for ${this.studyId}.`)}return o}async _pushToFirebaseStorage(n,r,i={}){if(Object.keys(i).length>0){const s=Cg(),o=Tg(s,`${this.studyId}/${n}_${r}`),a=new Blob([JSON.stringify(i)],{type:"application/json"});await fhe(o,a)}}async _deleteFromFirebaseStorage(n,r){const i=Cg();Tg(i,`${this.studyId}/${n}_${r}`)}async _getFirebaseProvenance(n){const r=Cg(),i=Tg(r,`${this.studyId}/${n}_provenance`);let s={};try{const o=await AT(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async _getFirebaseWindowEvents(n){const r=Cg(),i=Tg(r,`${this.studyId}/${n}_windowEvents`);let s={};try{const o=await AT(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}}const TDe=I.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),AS=()=>I.useContext(TDe);function C6t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=I.useState(t),[o,a]=I.useState(!1),{storageEngine:u}=lo(),l=async()=>{const h=E$();try{await aOt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;I.useEffect(()=>{s(t);let h;if(u instanceof zd)try{h=E$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof zd){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=oOt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=I.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return w.jsx(TDe.Provider,{value:d,children:i.determiningStatus?w.jsx(ep,{visible:!0}):e})}function A6t(){const{config:e,metadata:t}=Uo(S=>S),n=eg(),r=Dc(),{toggleShowHelpText:i,toggleStudyBrowser:s}=Ml(),{storageEngine:o}=lo(),a=Uo(S=>S.isRecording),u=np(),l=AS(),c=n.length-1,f=u/c*100,[d,h]=I.useState(!1),p=e==null?void 0:e.uiConfig.logoPath,m=e==null?void 0:e.uiConfig.withProgressBar,g=VY(),y=bwe(`/${g}`);function v(){o==null||o.nextParticipant(e,t).then(()=>{window.location.href=y}).catch(S=>{console.error(S)})}const b=I.useRef(null),[_,x]=I.useState(!1);return I.useEffect(()=>{const S=b.current;S&&x(S.scrollWidth>S.offsetWidth)},[e]),w.jsx(cs.Header,{p:"md",children:w.jsxs(bc,{mt:-7,align:"center",children:[w.jsx(bc.Col,{span:4,children:w.jsxs(Zn,{align:"center",wrap:"nowrap",children:[w.jsx(Oy,{maw:40,src:`${Kc}${p}`,alt:"Study Logo"}),w.jsx(b1,{w:"md"}),w.jsx(Co,{order:4,children:e==null?void 0:e.studyMetadata.title}),a?w.jsxs(Zn,{gap:20,wrap:"nowrap",children:[w.jsx(xt,{color:"red",children:"Recording audio"}),w.jsx(TSe,{})]}):null]})}),w.jsx(bc.Col,{span:4,children:m&&w.jsx(zx,{radius:"md",size:"lg",value:f})}),w.jsx(bc.Col,{span:4,children:w.jsxs(Zn,{wrap:"nowrap",justify:"right",children:[null,(e==null?void 0:e.uiConfig.helpTextPath)!==void 0&&w.jsx(sr,{variant:"outline",onClick:()=>r(i()),children:"Help"}),l.user.isAdmin&&w.jsxs(Su,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[w.jsx(Su.Target,{children:w.jsx(Tm,{size:"lg",className:"studyBrowserMenuDropdown",children:w.jsx(uQe,{})})}),w.jsxs(Su.Dropdown,{children:[w.jsx(Su.Item,{leftSection:w.jsx(aae,{size:14}),onClick:()=>r(s()),children:"Study Browser"}),w.jsx(Su.Item,{component:"a",href:e!==null?`mailto:${e.uiConfig.contactEmail}`:void 0,leftSection:w.jsx(dQe,{size:14}),children:"Contact"}),w.jsx(Su.Item,{leftSection:w.jsx(aae,{size:14}),onClick:()=>v(),children:"Next Participant"})]})]})]})})]})})}function I6t(){var l;const e=(l=jm())==null?void 0:l.uiConfig.sidebar,t=jm(),n=np(),r=eg()[n],i=t.components[r],s=I.useMemo(()=>{var c;return i?_4(i)&&t.baseComponents?sK({},(c=t.baseComponents)==null?void 0:c[i.baseComponent],i):i:null},[i,t.baseComponents]),o=RQ(),a=(s==null?void 0:s.instruction)||"",u=(s==null?void 0:s.instructionLocation)==="sidebar"||(s==null?void 0:s.instructionLocation)===void 0;return e&&s?w.jsxs(cs.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[u&&a!==""&&w.jsx(cs.Section,{bg:"gray.3",p:"xl",children:w.jsxs(xt,{c:"gray.9",children:[w.jsx(xt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),w.jsx(Qa,{text:a})]})}),w.jsx(cs.Section,{p:"sm",children:w.jsx(p$,{status:o,config:s,location:"sidebar"},`${r}-sidebar-response-block`)})]}):w.jsx(p$,{status:o,config:s,location:"sidebar",style:{display:"hidden"}},`${r}-sidebar-response-block`)}function k6t(){const{showHelpText:e,config:t}=Uo(o=>o),n=Dc(),{toggleShowHelpText:r}=Ml(),[i,s]=I.useState("");return I.useEffect(()=>{t&&t.uiConfig.helpTextPath&&fetch(`${Kc}${t.uiConfig.helpTextPath}`).then(o=>o.text()).then(o=>s(o))},[t]),w.jsx(Oo,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:w.jsx(Qa,{text:i})})}function R6t(){const{alertModal:e}=Uo(o=>o),{setAlertModal:t}=Ml(),n=Dc(),[r,i]=I.useState(e.show),s=I.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return I.useEffect(()=>i(e.show),[e.show]),w.jsx(Oo,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:w.jsxs(nG,{color:"red",radius:"xs",p:"lg",title:"Alert",icon:w.jsx(QXe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[w.jsx(xt,{my:"md",children:e.message}),w.jsx(Ne,{style:{float:"right"},color:"red",children:w.jsx(sr,{onClick:s,color:"red",variant:"filled",children:"Continue Study"})})]})})}function N6t(){const e=I.useRef([]),n=jm().uiConfig.windowEventDebounceTime??100,r=Uo(i=>i.showStudyBrowser);return I.useEffect(()=>{const i=kd(h=>{e.current.push([Date.now(),"focus",h.target instanceof HTMLElement?h.target.tagName:""])},n,{maxWait:n}),s=kd(h=>{e.current.push([Date.now(),"input",h.data??""])},n,{maxWait:n}),o=kd(h=>{e.current.push([Date.now(),"keypress",h.key])},n,{maxWait:n}),a=kd(h=>{e.current.push([Date.now(),"mousedown",[h.clientX,h.clientY]])},n,{maxWait:n}),u=kd(h=>{e.current.push([Date.now(),"mouseup",[h.clientX,h.clientY]])},n,{maxWait:n}),l=kd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),c=kd(h=>{e.current.push([Date.now(),"mousemove",[h.clientX,h.clientY]])},n,{maxWait:n}),f=kd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),d=kd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",i,!0),window.addEventListener("input",s),window.addEventListener("keypress",o),window.addEventListener("mousedown",a),window.addEventListener("mouseup",u),window.addEventListener("resize",l),window.addEventListener("mousemove",c),window.addEventListener("scroll",f),document.addEventListener("visibilitychange",d),()=>{window.removeEventListener("focus",i,!0),window.removeEventListener("input",s),window.removeEventListener("keypress",o),window.addEventListener("mousedown",a),window.addEventListener("mouseup",u),window.removeEventListener("resize",l),window.removeEventListener("mousemove",c),window.removeEventListener("scroll",f),document.removeEventListener("visibilitychange",d)}},[]),w.jsx(INe.Provider,{value:e,children:w.jsxs(cs,{padding:"md",header:{height:70},navbar:{width:300,breakpoint:"xs"},aside:{width:300,breakpoint:"xs",collapsed:{desktop:!r,mobile:!r}},children:[w.jsx(I6t,{}),w.jsx(LRt,{}),w.jsx(A6t,{}),w.jsx(k6t,{}),w.jsx(R6t,{}),w.jsx(cs.Main,{children:w.jsx(vXe,{})})]})})}var ipe=Object.prototype.hasOwnProperty;function spe(e,t,n){for(n of e.keys())if(k2(n,t))return n}function k2(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&k2(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=spe(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=spe(t,i),!i)||!k2(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(ipe.call(e,n)&&++r&&!ipe.call(t,n)||!(n in t)||!k2(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function P6t(e){var t=I.useRef(e),n=I.useRef(0);return k2(e,t.current)||(t.current=e,n.current+=1),I.useMemo(function(){return t.current},[n.current])}function O6t(e,t){return I.useEffect(e,P6t(t))}const CDe=(e,t=null)=>{const[n,r]=I.useState("idle"),[i,s]=I.useState(null),[o,a]=I.useState(null),u=I.useRef(),l=I.useRef(!1);I.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=I.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return O6t(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},YN=3,A_=25,KN=25,XN=20,ope=1;function D6t({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0}){const[a,u]=I.useState(!1),[l,{width:c}]=Bf();return w.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{cursor:"pointer"},children:[w.jsx("rect",{opacity:1,fill:a||s?"cornflowerblue":"lightgray",x:e(t.startTime)+ope,width:e(t.endTime)-e(t.startTime)-ope*2,y:r-A_,height:A_}),w.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-YN,width:c+YN*2,y:r-A_-KN-o,height:XN,fill:"whitesmoke"}),w.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-YN,x2:c+e(t.startTime)+YN,y1:r-A_-KN+XN-o,y2:r-A_-KN+XN-o}),w.jsx("foreignObject",{x:e(t.startTime),width:c,y:r-A_-KN-o,height:XN,children:w.jsx(Bo,{style:{width:"fit-content"},children:w.jsx(xt,{lineClamp:1,ref:l,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n})})})]})}function $6t({xScale:e,answer:t,height:n,labelHeight:r=0}){return w.jsx("g",{children:w.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const ape=25,M6t=8;function ADe({xScale:e,participantData:t,width:n,height:r,setSelectedTask:i,trialFilter:s}){const{analysisTrialName:o}=Uo(l=>l),a=I.useMemo(()=>{let l=0;const c=Object.entries(t.answers||{}).filter(f=>s?f[0]===s:!0).sort((f,d)=>f[1].startTime-d[1].startTime);return c.map((f,d)=>{const[h,p]=f,m=d>0?c[d-l-1]:null;return m&&m[0].length*M6t+e(m[1].startTime)>e(p.startTime)?l+=1:l=0,{line:w.jsx($6t,{labelHeight:l*ape,answer:p,height:r,xScale:e},h),label:w.jsx(D6t,{labelHeight:l*ape,isSelected:s?!1:o===h,setSelectedTask:i,answer:p,height:r,name:h,xScale:e},h)}})},[r,t.answers,o,i,s,e]),u=I.useMemo(()=>Object.entries(t.answers||{}).sort((c,f)=>c[1].startTime-f[1].startTime).map(c=>{const[f,d]=c,h=[];let p=[-1,-1],m="visible";if(d.windowEvents)for(let g=0;g<d.windowEvents.length;g+=1)d.windowEvents[g][1]==="visibility"&&(d.windowEvents[g][2]==="hidden"&&m==="visible"?(p=[d.windowEvents[g][0],-1],m="hidden"):d.windowEvents[g][2]==="visible"&&m==="hidden"&&(p[1]=d.windowEvents[g][0],h.push(p),p=[-1,-1],m="visible"));return h.map((g,y)=>w.jsx(Tc,{withinPortal:!0,label:"Browsed away",children:w.jsx("rect",{x:e(g[0]),width:e(g[1])-e(g[0]),y:r-5,height:10})},y))}),[r,t,e]);return s?null:w.jsxs("svg",{style:{width:n,height:r,overflow:"visible"},children:[a.map(l=>l.line),a.map(l=>l.label),u]})}const Dj={left:5,top:0,right:5,bottom:0};function L6t(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`;return`${t<10?`0${t}`:`${t}`}h ${s}m ${i}s`}function F6t({participant:e,maxDuration:t}){const n=Yc(),r=$y(),i=I.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const l=Object.values(e.answers).sort((c,f)=>c.startTime-f.startTime);return new Date(l[l.length-1].endTime-(l[1]?l[1].startTime:0)).getTime()},[e]),[s,{width:o}]=Bf(),a=I.useMemo(()=>!e.answers||Object.entries(e.answers).length===0?0:uK(Object.values(e.answers).map(c=>c.provenanceGraph?Object.keys(c.provenanceGraph.nodes).length:0)),[e]),u=I.useMemo(()=>{if(!e)return null;const l=Object.values(e.answers||{}).map(d=>[d.startTime,d.endTime]).flat(),c=UD(l);return Nh([Dj.left,o+Dj.left+Dj.right]).domain(c).clamp(!0)},[e,o]);return w.jsx(Bo,{children:w.jsxs(Oi,{gap:25,ref:s,style:{width:"75%"},children:[w.jsxs(Zn,{justify:"space-between",children:[w.jsx(Rb,{size:"25px",component:NXe,target:"_blank",to:`${r.pathname}/${e.participantId}/ui`,onClick:()=>n(`${e.participantId}/${Cc(e.sequence)[0]}`),children:e.participantId}),w.jsx(xt,{size:"xl",children:`${a}`}),w.jsx(xt,{size:"xl",children:`${L6t(i)}`})]}),u?w.jsx(ADe,{xScale:u,setSelectedTask:()=>null,participantData:e,width:o,height:250}):null]},e.participantId)})}function j6t(e){return e?e.getAllParticipantsData():null}const B6t=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],U6t=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65a4333efc75f965e7fc0cb5","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","60743e408fd768b1a939ed4c","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function z6t(){const{storageEngine:e}=lo(),{value:t,status:n}=CDe(j6t,[e]),r=I.useMemo(()=>{if(!(n!=="success"||!t))return Ac(t==null?void 0:t.map(i=>{if(!i.answers||Object.entries(i.answers).length===0)return 0;const s=Object.values(i.answers).sort((o,a)=>o.startTime-a.startTime);return new Date(s[s.length-1].endTime-s[0].startTime).getTime()}))},[t,n]);return n==="success"&&t?w.jsx(Oi,{gap:50,style:{width:"100%"},children:t==null?void 0:t.filter(i=>U6t.includes(i.participantId)||B6t.includes(i.participantId)).map(i=>w.jsx(F6t,{maxDuration:r,participant:i},i.participantId))}):w.jsx(Oc,{})}var IDe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:ko,()=>(()=>{var n={d:(c,f)=>{for(var d in f)n.o(f,d)&&!n.o(c,d)&&Object.defineProperty(c,d,{enumerable:!0,get:f[d]})},o:(c,f)=>Object.prototype.hasOwnProperty.call(c,f),r:c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}},r={};function i(c){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},i(c)}function s(c){return function(f){if(Array.isArray(f))return o(f)}(c)||function(f){if(typeof Symbol<"u"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}(c)||function(f,d){if(f){if(typeof f=="string")return o(f,d);var h=Object.prototype.toString.call(f).slice(8,-1);if(h==="Object"&&f.constructor&&(h=f.constructor.name),h==="Map"||h==="Set")return Array.from(f);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return o(f,d)}}(c)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(c,f){(f==null||f>c.length)&&(f=c.length);for(var d=0,h=new Array(f);d<f;d++)h[d]=c[d];return h}function a(c,f){if(!(c instanceof f))throw new TypeError("Cannot call a class as a function")}function u(c,f){for(var d=0;d<f.length;d++){var h=f[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,(p=h.key,m=void 0,m=function(g,y){if(i(g)!=="object"||g===null)return g;var v=g[Symbol.toPrimitive];if(v!==void 0){var b=v.call(g,y||"default");if(i(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(g)}(p,"string"),i(m)==="symbol"?m:String(m)),h)}var p,m}n.r(r),n.d(r,{default:()=>l});var l=function(){function c(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=h.sampleRate;a(this,c),this._context=this._createContext(p),p||(p=this._context.sampleRate),this._sampleRate=p}var f,d;return f=c,d=[{key:"_createContext",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:44100;return window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,new AudioContext({sampleRate:h})}},{key:"context",get:function(){return this._context}},{key:"fetchAudio",value:async function(){for(var h=this,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return await Promise.all(m.map(async function(y){var v;return v=y instanceof File||y instanceof Blob?await y.arrayBuffer():await fetch(y).then(function(b){return b.headers.has("Content-Type")&&!b.headers.get("Content-Type").includes("audio/")&&console.warn("Crunker: Attempted to fetch an audio file, but its MIME type is `".concat(b.headers.get("Content-Type").split(";")[0],"`. We'll try and continue anyway. (file: \"").concat(y,'")')),b.arrayBuffer()}),await h._context.decodeAudioData(v)}))}},{key:"mergeAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._sampleRate*this._maxDuration(h),this._sampleRate);return h.forEach(function(m){for(var g=0;g<m.numberOfChannels;g++){for(var y=p.getChannelData(g),v=m.getChannelData(g),b=m.getChannelData(g).length-1;b>=0;b--)y[b]+=v[b];p.getChannelData(g).set(y)}}),p}},{key:"concatAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._totalLength(h),this._sampleRate),m=0;return h.forEach(function(g){for(var y=0;y<g.numberOfChannels;y++)p.getChannelData(y).set(g.getChannelData(y),m);m+=g.length}),p}},{key:"padAudio",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(m===0)return h;if(p<0)throw new Error('Crunker: Parameter "padStart" in padAudio must be positive');if(m<0)throw new Error('Crunker: Parameter "seconds" in padAudio must be positive');for(var g=this._context.createBuffer(h.numberOfChannels,Math.ceil(h.length+m*h.sampleRate),h.sampleRate),y=0;y<h.numberOfChannels;y++){var v=h.getChannelData(y);g.getChannelData(y).set(v.subarray(0,Math.ceil(p*h.sampleRate)+1),0),g.getChannelData(y).set(v.subarray(Math.ceil(p*h.sampleRate)+2,g.length+1),Math.ceil((p+m)*h.sampleRate))}return g}},{key:"sliceAudio",value:function(h,p,m){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(p>=m)throw new Error('Crunker: "start" time should be less than "end" time in sliceAudio method');for(var v=Math.round((m-p)*this._sampleRate),b=Math.round(p*this._sampleRate),_=this._context.createBuffer(h.numberOfChannels,v,this._sampleRate),x=0;x<h.numberOfChannels;x++)for(var S=h.getChannelData(x),E=_.getChannelData(x),T=0;T<v;T++)E[T]=S[b+T],T<g*this._sampleRate&&(E[T]*=T/(g*this._sampleRate)),T>v-y*this._sampleRate&&(E[T]*=(v-T)/(y*this._sampleRate));return _}},{key:"play",value:function(h){var p=this._context.createBufferSource();return p.buffer=h,p.connect(this._context.destination),p.start(),p}},{key:"export",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"audio/wav",m=this._interleave(h),g=this._writeHeaders(m,h.numberOfChannels,h.sampleRate),y=new Blob([g],{type:p});return{blob:y,url:this._renderURL(y),element:this._renderAudioElement(y)}}},{key:"download",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"crunker",m=document.createElement("a");return m.style.display="none",m.href=this._renderURL(h),m.download="".concat(p,".").concat(h.type.split("/")[1]),m.click(),m}},{key:"notSupported",value:function(h){return this._isSupported()?void 0:h()}},{key:"close",value:function(){return this._context.close(),this}},{key:"_maxDuration",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.duration})))}},{key:"_maxNumberOfChannels",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.numberOfChannels})))}},{key:"_totalLength",value:function(h){return h.map(function(p){return p.length}).reduce(function(p,m){return p+m},0)}},{key:"_isSupported",value:function(){return"AudioContext"in window||"webkitAudioContext"in window||"mozAudioContext"in window}},{key:"_writeHeaders",value:function(h,p,m){var g=2*p,y=2*h.length,v=36+y,b=new ArrayBuffer(8+v),_=new DataView(b);return this._writeString(_,0,"RIFF"),_.setUint32(4,v,!0),this._writeString(_,8,"WAVE"),this._writeString(_,12,"fmt "),_.setUint32(16,16,!0),_.setUint16(20,1,!0),_.setUint16(22,p,!0),_.setUint32(24,m,!0),_.setUint32(28,m*g,!0),_.setUint16(32,g,!0),_.setUint16(34,16,!0),this._writeString(_,36,"data"),_.setUint32(40,y,!0),this._floatTo16BitPCM(_,h,44)}},{key:"_floatTo16BitPCM",value:function(h,p,m){for(var g=0;g<p.length;g++,m+=2){var y=Math.max(-1,Math.min(1,p[g]));h.setInt16(m,y<0?32768*y:32767*y,!0)}return h}},{key:"_writeString",value:function(h,p,m){for(var g=0;g<m.length;g++)h.setUint8(p+g,m.charCodeAt(g))}},{key:"_interleave",value:function(h){if(h.numberOfChannels===1)return h.getChannelData(0);for(var p=[],m=0;m<h.numberOfChannels;m++)p.push(h.getChannelData(m));for(var g=p.reduce(function(_,x){return _+x.length},0),y=new Float32Array(g),v=0,b=0;v<g;)p.forEach(function(_){y[v++]=_[b]}),b++;return y}},{key:"_renderAudioElement",value:function(h){var p=document.createElement("audio");return p.controls=!0,p.src=this._renderURL(h),p}},{key:"_renderURL",value:function(h){return(window.URL||window.webkitURL).createObjectURL(h)}}],d&&u(f.prototype,d),Object.defineProperty(f,"prototype",{writable:!1}),c}();return r})())})(IDe);var V6t=IDe.exports;const H6t=Ho(V6t);function q6t({cx:e,cy:t,r:n,color:r}){return w.jsx("circle",{cx:e,cy:t,r:n,fill:r})}function W6t({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){return w.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(o=>{const[a,u]=o;return w.jsx("g",{onClick:()=>i(a,u.createdOn,s),children:w.jsx(q6t,{color:a===r?"cornflowerblue":"lightgray",cx:e(u.createdOn),cy:n/2,r:5})},a)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?w.jsx("circle",{fill:"cornflowerblue",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null]})}const upe={left:5,top:0,right:5,bottom:0};function G6t({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,playTime:o,setPlayTime:a,isPlaying:u,setIsPlaying:l,setSelectedTask:c}){const f=I.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),{trialFilter:d}=Am();I.useEffect(()=>{if(!d||!t)return;const m=t.answers[d].provenanceGraph;if(!m)return;const{startTime:g}=t.answers.introduction,y=g+o;if(!i||!m.nodes[i]){s(m.root);return}let v=m.nodes[i];for(;;)if(y<v.createdOn){if(JSt(v))break;{const b=v.parent;if(y<m.nodes[b].createdOn)v=m.nodes[b];else break}}else if(v.children.length>0){const b=v.children[0];if(y>m.nodes[b].createdOn)v=m.nodes[b];else break}else break;v.id!==i&&s(v.id)},[i,t,o,s,d]);const h=I.useCallback((m,g,y)=>{a(g,(g-e.domain()[0])/f),s(m)},[s,a,f,e]),p=I.useMemo(()=>Object.entries(t.answers).filter(m=>d?d===m[0]:!0).map(m=>{const[g,y]=m;return w.jsx(W6t,{taskName:g,answer:y,height:r,currentNode:i,setCurrentNode:h,xScale:e},g)}),[i,h,r,t.answers,d,e]);return w.jsx(Oi,{children:w.jsxs("svg",{style:{width:n,height:r},children:[w.jsx("line",{stroke:"black",strokeWidth:1,x1:upe.left,x2:n+upe.left,y1:r/2,y2:r/2}),p]})})}const lpe={top:5,left:5,right:5,bottom:5};function Y6t({transcriptLines:e,xScale:t,startTime:n,currentShownTranscription:r}){const i=I.useMemo(()=>e.map(s=>w.jsxs("g",{children:[w.jsx("line",{stroke:r>=s.lineStart&&r<=s.lineEnd?"cornflowerblue":"lightgray",strokeWidth:5,y1:lpe.top,y2:lpe.top,x1:t(n+s.start*1e3)+2,x2:t(n+s.end*1e3)-2}),s.tags.map((o,a)=>w.jsx("g",{children:o.map((u,l)=>{const c=t(n+s.start*1e3),f=t(n+s.end*1e3);return w.jsx("foreignObject",{x:c+(f-c)/s.tags.length*(a+.5)-6+(-(o.length-1)*15/2+l*15),y:30,height:"20px",width:"20px",children:w.jsx(Tc,{label:u.name,withArrow:!0,arrowSize:6,children:w.jsx(Ih,{size:12,color:u.color})})},u.name)})},a))]},s.start)),[r,n,e,t]);return w.jsx("svg",{style:{width:"100%",height:"50px"},children:i})}function K6t({start:e,current:t,end:n,text:r,tags:i,selectedTags:s,addTag:o,onTextChange:a,deleteRowCallback:u,addRowCallback:l,onSelectTags:c,addRef:f}){const d=ZM(),h=y=>c([...s,i.find(v=>v.name===y)]),p=y=>c(s.filter(v=>v.name!==y)),m=s.map(y=>{const v=yA(y.color).l;return w.jsx(j1,{withRemoveButton:!0,styles:{root:{backgroundColor:y.color,color:v>.7?"black":"white"}},onRemove:()=>p(y.name),children:y.name},y.name)}),g=i.filter(y=>!s.find(v=>v.name===y.name)).map(y=>w.jsx(bn.Option,{value:y.name,children:w.jsxs(Zn,{gap:"sm",children:[w.jsx(Ih,{size:10,color:y.color}),w.jsx("span",{children:y.name})]})},y.name));return w.jsxs(Zn,{justify:"space-between",style:{width:"100%"},wrap:"nowrap",children:[w.jsxs(Zn,{wrap:"nowrap",gap:0,style:{width:"100%"},children:[w.jsx(hQe,{height:40,width:20,viewBox:"10 0 14 24",strokeWidth:2,color:t>=e&&t<=n?"cornflowerblue":"lightgray"}),w.jsx(Vx,{ref:y=>y?f(y):null,style:{width:"100%"},variant:"unstyled",value:r,onChange:y=>{a(y.currentTarget.value)},onKeyDown:y=>{y.key==="Enter"&&y.currentTarget.selectionStart!==null?l(y.currentTarget.selectionStart):y.key==="Backspace"&&y.currentTarget.selectionStart===0&&y.currentTarget.selectionEnd===0&&(u(),y.preventDefault(),y.stopPropagation())}})]}),w.jsxs(Zn,{wrap:"nowrap",style:{width:"300px"},children:[w.jsx(nL,{orientation:"vertical",size:"xs"}),w.jsxs(bn,{width:300,store:d,onOptionSubmit:h,withinPortal:!1,children:[w.jsx(bn.DropdownTarget,{children:w.jsx(EE,{style:{width:"400px"},pointer:!0,onClick:()=>d.toggleDropdown(),children:w.jsxs(j1.Group,{children:[m.length>0?m:w.jsx(Mi.Placeholder,{children:"Add tags"}),w.jsx(bn.EventsTarget,{children:w.jsx(EE.Field,{type:"hidden",onBlur:()=>d.closeDropdown()})})]})})}),w.jsx(bn.Dropdown,{children:w.jsx(bn.Options,{children:g.length===0?w.jsx(bn.Empty,{children:"No additional tags"}):g})})]})]})]})}function cpe({addTagCallback:e,currentNames:t,editTag:n=!1,editableTag:r}){const[i,s]=I.useState(n?r.name:""),[o,a]=I.useState(n?r.color:"#fd7e14");return w.jsxs(Oi,{gap:"xs",children:[w.jsxs(Zn,{children:[w.jsx(Ih,{color:o}),w.jsx(Vx,{required:!0,placeholder:"Enter tag name",value:i,onChange:u=>s(u.currentTarget.value),error:t.includes(i)&&(!n||r.name!==i)?"Tag with this name already exists":null})]}),w.jsx(NG,{withPicker:n,style:{width:"100%"},value:o,onChange:u=>a(u),swatches:["#2e2e2e","#868e96","#fa5252","#e64980","#be4bdb","#7950f2","#4c6ef5","#228be6","#15aabf","#12b886","#40c057","#82c91e","#fab005","#fd7e14"]}),w.jsx(sr,{disabled:n&&o===r.color&&(i.length===0||t.includes(i)),size:"compact-sm",onClick:()=>e({color:o,name:i}),children:n?"Edit Tag":"Add Tag"})]})}function X6t({createTagCallback:e,editTagCallback:t,tags:n}){const[r,i]=I.useState(!1);return w.jsxs(Oi,{style:{width:"300px"},gap:"xs",children:[n.length===0?w.jsx(xt,{color:"dimmed",children:"No tags found. Create new tags below."}):null,n.map(s=>w.jsxs(Zn,{justify:"space-between",children:[w.jsxs(Zn,{children:[w.jsx(Ih,{color:s.color}),w.jsx(xt,{children:s.name})]}),w.jsxs(lr,{trapFocus:!0,withinPortal:!1,children:[w.jsx(lr.Target,{children:w.jsx(lQe,{color:"lightgray"})}),w.jsx(lr.Dropdown,{children:w.jsx(cpe,{editTag:!0,currentNames:n.map(o=>o.name),addTagCallback:o=>{t(s,o)},editableTag:s})})]})]},s.name)),w.jsxs(lr,{trapFocus:!0,opened:r,withinPortal:!1,children:[w.jsx(lr.Target,{children:w.jsx(sr,{variant:"light",onClick:()=>i(!r),children:"Create new tag"})}),w.jsx(lr.Dropdown,{children:w.jsx(cpe,{currentNames:n.map(s=>s.name),addTagCallback:s=>{i(!1),e(s)}})})]})]})}function Q6t({participant:e,playTime:t,setTranscriptLines:n,currentShownTranscription:r,setCurrentShownTranscription:i,transcriptList:s,setTranscriptList:o}){const[a,u]=I.useState(null),{trrackId:l,studyId:c,trialFilter:f}=Am(),[d,h]=I.useState([]),{storageEngine:p}=lo(),m=jm(),g=I.useRef([]),y=gw((S,E)=>{const T=[...s];T[S].text=E,o(T)}),v=gw((S,E)=>{const T=[...s];T[S].selectedTags=E,o(T)}),b=gw(S=>{if(S===0)return;const E=structuredClone(s);E[S-1].text=s[S-1].text+s[S].text,E[S-1].transcriptMappingEnd=s[S].transcriptMappingEnd,E[S-1].selectedTags=[...s[S-1].selectedTags,...s[S].selectedTags.filter(T=>!s[S-1].selectedTags.find(A=>A.name===T.name))],E.splice(S,1),E.filter(T=>T.transcriptMappingStart===E[S-1].transcriptMappingStart).forEach(T=>{T.transcriptMappingEnd=E[S-1].transcriptMappingEnd}),o(E),setTimeout(()=>{g.current[S-1].focus(),g.current[S-1].setSelectionRange(s[S-1].text.length,s[S-1].text.length,"none")})}),_=gw((S,E)=>{const T=structuredClone(s),A=T[S];T.splice(S+1,0,{transcriptMappingEnd:A.transcriptMappingEnd,transcriptMappingStart:A.transcriptMappingStart,text:A.text.slice(E),selectedTags:A.selectedTags}),T[S].text=T[S].text.slice(0,E),o(T),setTimeout(()=>{g.current[S+1].focus(),g.current[S+1].setSelectionRange(0,0)})});I.useEffect(()=>{const S=[];s.forEach((E,T)=>{a&&(T===0||E.transcriptMappingStart!==s[T-1].transcriptMappingStart)&&S.push({start:T===0?0:a.results[E.transcriptMappingStart-1].resultEndTime,end:a.results[E.transcriptMappingEnd].resultEndTime,lineStart:E.transcriptMappingStart,lineEnd:E.transcriptMappingEnd,tags:s.filter(A=>A.transcriptMappingStart===E.transcriptMappingStart&&A.transcriptMappingEnd===E.transcriptMappingEnd).map(A=>A.selectedTags)})}),n(S)},[s,n,a]),I.useEffect(()=>{c&&l&&e&&(p==null||p.getTranscription(Cc(e.sequence).filter(S=>m.tasksToNotRecordAudio===void 0||!m.tasksToNotRecordAudio.includes(S)).filter(S=>f?S===f:!0),l).then(S=>{const E=S.map(k=>JSON.parse(k));let T=0;const A=E.map(k=>{const R=k.results.map($=>({...$,resultEndTime:+$.resultEndTime.split("s")[0]+T}));return T+=+k.results[k.results.length-1].resultEndTime.split("s")[0],R}).flat();u({results:A}),o(A.map((k,R)=>{var $;return{transcriptMappingStart:R,transcriptMappingEnd:R,text:(($=k.alternatives[0].transcript)==null?void 0:$.trim())||"",selectedTags:[]}})),i(0)}))},[p,c,l,m.tasksToNotRecordAudio,e,f,o,i]),I.useEffect(()=>{if(a&&r!==null&&e&&t>0){let S=r;const E=f?e.answers[f].startTime:e.answers.audioTest.startTime,T=Math.abs(t-E)/1e3;if(T>a.results[S].resultEndTime){for(;T>a.results[S].resultEndTime;)if(S+=1,S>a.results.length-1){S=a.results.length-1;break}}else if(S>0&&T<a.results[S-1].resultEndTime)for(;S>0&&T<a.results[S-1].resultEndTime;)S-=1;if(r===S)return;i(S)}},[r,e,t,i,a,f]);const x=I.useCallback((S,E)=>{const T=d.findIndex(R=>R.name===S.name),A=Array.from(d);A[T]=E;const k=Array.from(s);k.forEach(R=>{R.selectedTags=R.selectedTags.map($=>$.name===S.name?E:$)}),o(k),h(A)},[o,d,s]);return w.jsxs(Oi,{gap:0,children:[w.jsxs(Zn,{mb:"xl",justify:"space-between",wrap:"nowrap",children:[w.jsx(xt,{style:{flexGrow:1,textAlign:"center"},children:"Transcript"}),w.jsxs(lr,{children:[w.jsx(lr.Target,{children:w.jsxs(Zn,{justify:"center",style:{width:"300px",cursor:"pointer"},children:[w.jsx(Rwe,{}),w.jsx(xt,{children:"Tags"})]})}),w.jsx(lr.Dropdown,{children:w.jsx(X6t,{createTagCallback:S=>{h([...d,S])},editTagCallback:x,tags:d})})]})]}),s.map((S,E)=>w.jsx(K6t,{addRef:T=>{g.current[E]=T},onSelectTags:T=>v(E,T),addRowCallback:T=>_(E,T),deleteRowCallback:()=>b(E),onTextChange:T=>y(E,T),tags:d,selectedTags:S.selectedTags,addTag:T=>{h([...d,T]),v(E,[...S.selectedTags,T])},text:S.text,start:S.transcriptMappingStart,end:S.transcriptMappingEnd,current:r===null?0:r},E))]})}const $j={left:5,top:0,right:5,bottom:0};function J6t(e,t){return t?t.getParticipantData(e):null}const fpe=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],dpe=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65a4333efc75f965e7fc0cb5","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","60743e408fd768b1a939ed4c","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function Z6t(){const{trrackId:e,trialFilter:t}=Am(),{storageEngine:n}=lo(),[r,i]=I.useState(0),[s,{width:o}]=Bf(),[a,u]=I.useState(null),{value:l,status:c}=CDe(J6t,[e,n]),{saveAnalysisState:f}=Ml(),d=Dc(),[h,p]=I.useState(!1),[m,g]=tUe(0,50),y=I.useRef(null),v=jm(),b=Yc(),{analysisTrialName:_}=Uo(F=>F),{setAnalysisTrialName:x}=Ml(),[S,E]=I.useState(!0),T=I.useRef(null),[A,k]=I.useState([]),[R,$]=I.useState([]),P=I.useMemo(()=>[...fpe,...dpe],[]);I.useEffect(()=>{if(_&&l){const F=UA.create(),H=nV({registry:F,initialState:{}});l.answers[_].provenanceGraph&&(H.importObject(QE(l.answers[_].provenanceGraph)),T.current=H)}},[l,_]);const O=I.useCallback(F=>{var H;_&&l&&T.current&&(d(f(T.current.getState((H=l.answers[_].provenanceGraph)==null?void 0:H.nodes[F]))),T.current.to(F)),u(F)},[l,f,d,_,T]),M=I.useCallback(F=>{var H;if(F!==_)if(d(x(F)),d(f(null)),l&&l.answers[F].provenanceGraph){const G=UA.create(),ee=nV({registry:G,initialState:{}});ee.importObject(QE(l.answers[F].provenanceGraph)),T.current=ee,O(((H=l.answers[F].provenanceGraph)==null?void 0:H.root)||"")}else d(f(null)),u(null),T.current=null},[O,l,f,x,d,_]);I.useEffect(()=>{t&&M(t)},[M,t]);const j=gw(F=>{if(l&&_&&(l.answers[_].endTime-l.answers.audioTest.startTime)/1e3<F){const H=Cc(l.sequence);M(H[H.indexOf(_)+1])}else l&&_&&T.current&&T.current.current.children.length>0&&(T.current.graph.backend.nodes[T.current.current.children[0]].createdOn-l.answers.audioTest.startTime)/1e3<F&&O(T.current.current.children[0]);if(l&&_){const H=t?l.answers[t].startTime:l.answers.audioTest.startTime;g(F*1e3+H)}}),B=I.useCallback(F=>{if(F&&l&&e){const H=new H6t;n==null||n.getAudio(Cc(l.sequence).filter(G=>v.tasksToNotRecordAudio===void 0||!v.tasksToNotRecordAudio.includes(G)).filter(G=>t?G===t:!0),e).then(G=>{F&&H.fetchAudio(...G).then(ee=>H.concatAudio(ee)).then(ee=>H.export(ee,"audio/mp3")).then(ee=>F.loadBlob(ee.blob).then(()=>E(!1))).catch(ee=>{throw new Error(ee)}),F.on("timeupdate",j)})}},[v.tasksToNotRecordAudio,l,n,j,t,e]),U=ESe({container:y.current,plugins:[],onMount:B});I.useEffect(()=>{B(U)},[B,l,U]);const V=I.useCallback((F,H)=>{g(F),U&&H&&(U==null||U.seekTo(H))},[g,U]),D=I.useCallback(F=>{p(F),U&&(F?U.play():U.pause())},[U]),z=I.useMemo(()=>{if(!l)return null;const F=Object.values(l.answers||{}).map(ee=>[ee.startTime,ee.endTime]).flat(),H=UD(F);return Nh([$j.left,o+$j.left+$j.right]).domain(t?[l.answers[t].startTime,l.answers[t].endTime]:H).clamp(!0)},[l,t,o]),W=I.useCallback(F=>{if(!l)return;const H=P.indexOf(l.participantId);F?b(`../../${t?"../":""}${P[H+1]}/ui/${t||""}`,{relative:"path"}):b(`../../${t?"../":""}${P[H-1]}/ui/${t||""}`,{relative:"path"})},[P,b,l,t]);return w.jsx(Zn,{wrap:"nowrap",gap:25,children:w.jsxs(Oi,{ref:s,style:{width:"100%"},gap:25,children:[w.jsx(Bo,{children:w.jsxs(Zn,{children:[w.jsx(Tm,{children:w.jsx(ZXe,{onClick:()=>W(!1)})}),w.jsx(ph,{style:{width:"300px"},value:l==null?void 0:l.participantId,onChange:F=>b(`../../${t?"../":""}${F}/ui/${t||""}`,{relative:"path"}),data:[...fpe,...dpe]}),w.jsx(ph,{style:{width:"300px"},clearable:!0,value:t,data:l?[...Cc(l.sequence)]:[],onChange:F=>b(`${t?"../":""}${F||""}`,{relative:"path"})}),w.jsx(Tm,{children:w.jsx(eQe,{onClick:()=>W(!0)})})]})}),c==="success"&&l&&z?w.jsx(ADe,{trialFilter:t,xScale:z,setSelectedTask:M,participantData:l,width:o,height:200}):w.jsx(Bo,{style:{height:"275px"},children:w.jsx(Oc,{})}),z&&l!==null?w.jsxs(w.Fragment,{children:[w.jsxs(Ne,{ref:y,ml:l&&z?z(l.answers.audioTest.startTime):0,mr:l&&z?z(l.answers["post-study-survey"].startTime):0,style:{WebkitBoxSizing:"border-box",width:`${l&&z?z(l.answers["post-study-survey"].startTime)-z(l.answers.audioTest.startTime):0}px`},children:[w.jsx(ySe.Provider,{value:U,children:w.jsx(oK,{id:"waveform"})},l.participantId),S?w.jsx(Oc,{}):null]}),w.jsx(Y6t,{startTime:t?z.domain()[0]:l.answers.audioTest.startTime,xScale:z,transcriptLines:A,currentShownTranscription:r})]}):null,c==="success"&&l&&z?w.jsx(G6t,{xScale:z,setSelectedTask:M,playTime:m-l.answers.introduction.startTime,setPlayTime:V,isPlaying:h,setIsPlaying:D,currentNode:a,setCurrentNode:O,participantData:l,width:o,height:50}):null,w.jsxs(Zn,{children:[w.jsx(sr,{onClick:()=>D(!0),children:"Play"}),w.jsx(sr,{onClick:()=>D(!1),children:"Pause"}),w.jsx(xt,{children:new Date(m).toLocaleString()})]}),w.jsx(Oi,{children:l?w.jsx(Q6t,{transcriptList:R,setTranscriptList:$,setCurrentShownTranscription:i,currentShownTranscription:r,participant:l,playTime:m,setTranscriptLines:k}):null})]})})}function e4t({setProvState:e}){return w.jsx("div",{children:w.jsx(Z6t,{})})}function t4t(){return w.jsx(Jh,{pt:100,children:w.jsx(Bo,{children:w.jsxs(Co,{order:3,children:[w.jsx(xt,{span:!0,c:"orange",children:"Study ID"})," ","not Found, please check valid Study ID on your global config, or contact the administrator."]})})})}async function n4t(e,t){const n=await(await fetch(`${Kc}${e}`)).text();return TNe(n,t)}async function AZ(e,t){const n=t.configsList.find(r=>pY(r)===e);if(n){const r=t.configs[n];return await n4t(`${r.path}`,n)}return null}function r4t({studyId:e,config:t}){const{sequence:n}=Uo(i=>i),r=I.useMemo(()=>{if(e&&t&&n){const i=[];return i.push({path:"/",element:w.jsx(vV,{to:"0",replace:!0})}),i.push({path:"/:index",element:t.errors?w.jsxs(w.Fragment,{children:[w.jsx(Co,{order:2,mb:8,children:"Error loading config"}),w.jsx(fxe,{errors:t.errors})]}):w.jsx(bj,{})}),i.push({path:"/analysis/:trrackId/:trialName/",element:w.jsx(bj,{})}),i.push({path:"/analysis/:trrackId/ui/:trialFilter?/",element:w.jsx(e4t,{setProvState:()=>null})}),i.push({path:"/analysis",element:w.jsx(z6t,{})}),i.push({path:"/:trialName",element:w.jsx(bj,{})}),i.push({path:"/end",element:w.jsx(ANe,{})}),[{element:w.jsx(N6t,{}),children:i}]}return[]},[t,n,e]);return Ewe(r)}function i4t({globalConfig:e}){const t=VY(),[n,r]=I.useState(null),i=e.configsList.find(f=>pY(f)===t),s=AS();I.useEffect(()=>{AZ(t,e).then(f=>{r(f)})},[e,t]);const[o,a]=I.useState(null),{storageEngine:u}=lo(),[l]=dY();I.useEffect(()=>{async function f(){if(!u||!n||!t)return;await u.initializeStudyDb(t,n),await u.getSequenceArray()||await u.setSequenceArray(await MRt(n));const h=n.uiConfig.urlParticipantIdParam&&l.get(n.uiConfig.urlParticipantIdParam)||void 0,p=Object.fromEntries(l.entries()),m=await fetch("https://api.ipify.org?format=json").catch(_=>""),g=m instanceof Response?await m.json():{ip:""},y={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:g.ip},v=await u.initializeParticipantSession(p,n,y,h),b=await Aut(t,n,v.sequence,y,v.answers,s.user.isAdmin);a(b)}f()},[u,n,t,l,s.user.isAdmin]);const c=o?w.jsx(gSe.Provider,{value:o,children:w.jsx(Jst,{store:o.store,children:w.jsx(r4t,{studyId:t,config:n})})}):w.jsx(ep,{visible:!0});return i?c:w.jsx(t4t,{})}function R2({studyIds:e}){const t=Yc(),{studyId:n}=Am(),r=$y(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=lo(),{user:o,logout:a}=AS(),[u,l]=I.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:w.jsx(cQe,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:w.jsx(rQe,{}),href:"/analysis/dashboard",needAdmin:!0},{name:"Settings",leftIcon:w.jsx(yQe,{}),href:"/settings",needAdmin:!0}];return w.jsx(cs.Header,{p:"md",children:w.jsxs(bc,{mt:-7,align:"center",children:[w.jsx(bc.Col,{span:6,children:w.jsxs(ii,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[w.jsx(Oy,{maw:40,src:`${Kc}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),w.jsx(b1,{w:"md"}),w.jsx(Co,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),w.jsx(bc.Col,{span:6,children:w.jsxs(ii,{justify:"flex-end",direction:"row",children:[c&&w.jsx(ph,{placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),w.jsx(SG,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),w.jsx(Zh,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:w.jsxs(ii,{direction:"column",mt:20,children:[w.jsx(xt,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?w.jsx(sr,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:w.jsx(sr,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),w.jsxs(Ne,{ml:10,children:[w.jsx(nL,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?w.jsx(xt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:a,children:"Logout"}):w.jsx(xt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function s4t({cellData:e}){return w.jsx("td",{children:w.jsx(Oi,{miw:100,children:Object.entries(e.answer).map(([t,n])=>w.jsxs(Ne,{children:[w.jsxs(xt,{fw:700,span:!0,children:[" ",`${t}: `]}),w.jsx(xt,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function hpe({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return w.jsxs("td",{children:[t.toFixed(1)," ","s"]})}function o4t(e){const{metaData:t}=e;return w.jsx("td",{children:w.jsx(eY,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:w.jsxs(Oi,{gap:"xs",children:[w.jsxs(Ne,{children:["IP:"," ",t.ip]}),w.jsxs(Ne,{children:["Language:"," ",t.language]}),w.jsxs(Ne,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),w.jsxs(Ne,{children:["User Agent:"," ",t.userAgent]})]})})})}function a4t({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=lo(),{studyId:s}=Am(),o=async g=>{i&&s&&(await i.rejectParticipant(s,g),r())},[a,u]=I.useState([]),[l,c]=I.useState(!1),f=()=>MXe({title:"Confirm rejecting participants",children:w.jsxs(xt,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",w.jsx(xt,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{c(!0);const g=a.map(async y=>await o(y));await Promise.all(g),u([]),r(),c(!1)}});function d(g){g==="all"?a.length===[...e,...t].length?u([]):u([...e,...t].map(y=>y.participantId)):a.includes(g)?u(a.filter(y=>y!==g)):u([...a,g])}const h=mSe(n.sequence),p=[w.jsx("th",{children:w.jsx(ii,{justify:"center",children:w.jsx(Cm,{mb:-4,checked:a.length===[...e,...t].length,onChange:()=>d("all")})})},"action"),w.jsx("th",{children:"ID"},"ID"),w.jsx("th",{children:"Status"},"status"),w.jsx("th",{children:"Meta"},"meta"),...h.flatMap(g=>[w.jsx("th",{children:g.componentName},`header-${g.componentName}-${g.timesSeenInBlock}`),w.jsxs("th",{children:[g.componentName," ","Duration"]},`header-${g.componentName}-${g.timesSeenInBlock}-duration`)]),w.jsx("th",{children:"Total Duration"},"total-duration")],m=[...e,...t].map(g=>w.jsxs("tr",{children:[w.jsx("td",{children:w.jsx(ii,{justify:"center",children:w.jsx(Cm,{mb:-4,checked:a.includes(g.participantId),onChange:()=>d(g.participantId)})})}),w.jsx("td",{style:{whiteSpace:"nowrap"},children:g.participantId}),w.jsx("td",{children:w.jsxs(ii,{direction:"row",align:"center",children:[g.rejected?w.jsx(Tc,{label:"Rejected",children:w.jsx(Pwe,{size:16,color:"red",style:{marginBottom:-3}})}):g.completed?w.jsx(Tc,{label:"Completed",children:w.jsx(oQe,{size:16,color:"teal",style:{marginBottom:-3}})}):w.jsx(Tc,{label:"In Progress",children:w.jsx(mQe,{size:16,color:"orange",style:{marginBottom:-3}})}),!g.completed&&w.jsxs(xt,{size:"sm",mb:-1,ml:4,children:[Object.entries(g.answers).length/(Cc(g.sequence).length-1)*100,"%"]})]})}),g.metadata?w.jsx(o4t,{metaData:g.metadata}):w.jsx("td",{children:"N/A"}),h.map(y=>{const v=hSe(g.sequence,y.orderPath),b=v&&Object.entries(g.answers).sort((_,x)=>{const S=parseInt(_[0].slice(_[0].lastIndexOf("_")+1),10),E=parseInt(x[0].slice(x[0].lastIndexOf("_")+1),10);return S-E}).filter(([_])=>{const x=_.slice(0,_.lastIndexOf("_")),S=parseInt(_.slice(_.lastIndexOf("_")+1),10);return x===y.componentName&&S<=v[0].lastIndex&&S>=v[0].firstIndex});return b!==null&&b.length>=y.timesSeenInBlock+1?w.jsxs(Nr.Fragment,{children:[w.jsx(s4t,{cellData:b[y.timesSeenInBlock][1]}),w.jsx(hpe,{cellData:b[y.timesSeenInBlock][1]})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`):w.jsxs(Nr.Fragment,{children:[w.jsx("td",{children:"N/A"}),w.jsx("td",{children:"N/A"})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`)}),w.jsx(hpe,{cellData:{startTime:Math.min(...Object.values(g.answers).map(y=>y.startTime)),endTime:Math.max(...Object.values(g.answers).map(y=>y.endTime)),answer:{},windowEvents:[]}},`cell-${g.participantId}-total-duration`)]},g.participantId));return[...e,...t].length>0?w.jsxs(w.Fragment,{children:[w.jsx(ep,{visible:l,overlayProps:{blur:2}}),w.jsxs(ii,{justify:"space-between",mb:8,p:8,children:[w.jsx(Zn,{children:w.jsx(ph,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(g=>({value:g.participantId,label:g.participantId})),searchable:!0,leftSection:w.jsx(gQe,{size:14}),onChange:g=>g&&d(g)})}),w.jsx(Zn,{children:w.jsx(sr,{disabled:a.length===0,onClick:f,color:"red",size:"xs",children:"Reject Participants"})})]}),w.jsxs(Gl,{striped:!0,withTableBorder:!0,children:[w.jsx("thead",{children:w.jsx("tr",{children:p})}),w.jsx("tbody",{children:m})]})]}):w.jsx(ii,{justify:"center",align:"center",style:{height:"100%"},children:w.jsx(xt,{children:"No data available"})})}function u4t(e){const{globalConfig:t}=e,{studyId:n}=Am(),[r,i]=I.useState([]),[s,o]=I.useState(void 0),[a,u]=I.useState(!1),{storageEngine:l}=lo(),c=Yc(),{tab:f}=Am(),d=I.useCallback(async()=>{if(u(!0),n){const m=await AZ(n,t);if(!m||!l)return;await l.initializeStudyDb(n,m);const g=await l.getAllParticipantsData();i(g),o(m),u(!1)}},[t,l,n]);I.useEffect(()=>{d()},[t,l,n,d]);const[h,p]=I.useMemo(()=>{const m=r.filter(y=>y.completed),g=r.filter(y=>!y.completed);return[m,g]},[r]);return w.jsxs(w.Fragment,{children:[w.jsx(R2,{studyIds:e.globalConfig.configsList}),w.jsx(cs.Main,{children:w.jsxs(Jh,{fluid:!0,style:{height:"100%"},children:[w.jsx(ep,{visible:a}),w.jsxs(pl,{variant:"outline",value:f,onChange:m=>c(`./../${m}`),style:{height:"100%"},children:[w.jsxs(pl.List,{children:[w.jsx(pl.Tab,{value:"table",leftSection:w.jsx(vQe,{size:16}),children:"Table View"}),w.jsx(pl.Tab,{value:"stats",leftSection:w.jsx(iQe,{size:16}),children:"Trial Stats"}),w.jsx(pl.Tab,{value:"settings",leftSection:w.jsx(pQe,{size:16}),children:"Individual Replay"})]}),w.jsx(pl.Panel,{value:"table",pt:"xs",style:{height:"calc(100% - 38px - 10px)",width:"100%",overflow:"scroll"},children:s&&w.jsx(a4t,{completed:h,inProgress:p,studyConfig:s,refresh:d})}),w.jsx(pl.Panel,{value:"stats",pt:"xs",children:"statsboard"}),w.jsx(pl.Panel,{value:"settings",pt:"xs",children:"Settings tab content"})]})]})})]})}function Mj({children:e}){const{user:t,verifyAdminStatus:n,logout:r}=AS(),{storageEngine:i}=lo();return I.useEffect(()=>{(async()=>{try{t&&await n(t)||r()}catch(o){r(),console.warn(o)}})()},[t.isAdmin]),t.determiningStatus||!i?w.jsx(ep,{visible:t.determiningStatus||!(i!=null&&i.getEngine())}):!t.isAdmin&&!t.determiningStatus?w.jsx(fY,{to:"/login"}):w.jsx(w.Fragment,{children:e})}async function kDe(e,t,n){if(e instanceof zd){t(!0);const r=new Yp,i=E$();try{await IOt(i,r)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function l4t(){const{user:e}=AS(),[t,n]=I.useState(null),[r,i]=I.useState(!1),{storageEngine:s}=lo();return I.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?w.jsx(fY,{to:"/"}):w.jsx(Jh,{children:w.jsx(Nb,{p:"lg",children:w.jsxs(ii,{align:"center",direction:"column",justify:"center",children:[w.jsx(Oy,{maw:200,mt:50,mb:100,src:`${Kc}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),w.jsxs(w.Fragment,{children:[w.jsx(xt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),w.jsx(sr,{onClick:()=>kDe(s,i,n),leftSection:w.jsx(nQe,{}),variant:"filled",children:"Sign In With Google"})]}),t?w.jsx(Pw,{size:"lg",color:"red",mt:30,children:t}):null,w.jsx(ep,{visible:r})]})})})}var RDe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ko,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var M=["th","st","nd","rd"],j=O%100;return"["+O+(M[(j-20)%10]||M[j]||M[0])+"]"}},b=function(O,M,j){var B=String(O);return!B||B.length>=M?O:""+Array(M+1-B.length).join(j)+O},_={s:b,z:function(O){var M=-O.utcOffset(),j=Math.abs(M),B=Math.floor(j/60),U=j%60;return(M<=0?"+":"-")+b(B,2,"0")+":"+b(U,2,"0")},m:function O(M,j){if(M.date()<j.date())return-O(j,M);var B=12*(j.year()-M.year())+(j.month()-M.month()),U=M.clone().add(B,f),V=j-U<0,D=M.clone().add(B+(V?-1:1),f);return+(-(B+(j-U)/(V?U-D:D-U))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},x="en",S={};S[x]=v;var E="$isDayjsObject",T=function(O){return O instanceof $||!(!O||!O[E])},A=function O(M,j,B){var U;if(!M)return x;if(typeof M=="string"){var V=M.toLowerCase();S[V]&&(U=V),j&&(S[V]=j,U=V);var D=M.split("-");if(!U&&D.length>1)return O(D[0])}else{var z=M.name;S[z]=M,U=z}return!B&&U&&(x=U),U||!B&&x},k=function(O,M){if(T(O))return O.clone();var j=typeof M=="object"?M:{};return j.date=O,j.args=arguments,new $(j)},R=_;R.l=A,R.i=T,R.w=function(O,M){return k(O,{locale:M.$L,utc:M.$u,x:M.$x,$offset:M.$offset})};var $=function(){function O(j){this.$L=A(j.locale,null,!0),this.parse(j),this.$x=this.$x||j.x||{},this[E]=!0}var M=O.prototype;return M.parse=function(j){this.$d=function(B){var U=B.date,V=B.utc;if(U===null)return new Date(NaN);if(R.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var D=U.match(g);if(D){var z=D[2]-1||0,W=(D[7]||"0").substring(0,3);return V?new Date(Date.UTC(D[1],z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)):new Date(D[1],z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)}}return new Date(U)}(j),this.init()},M.init=function(){var j=this.$d;this.$y=j.getFullYear(),this.$M=j.getMonth(),this.$D=j.getDate(),this.$W=j.getDay(),this.$H=j.getHours(),this.$m=j.getMinutes(),this.$s=j.getSeconds(),this.$ms=j.getMilliseconds()},M.$utils=function(){return R},M.isValid=function(){return this.$d.toString()!==m},M.isSame=function(j,B){var U=k(j);return this.startOf(B)<=U&&U<=this.endOf(B)},M.isAfter=function(j,B){return k(j)<this.startOf(B)},M.isBefore=function(j,B){return this.endOf(B)<k(j)},M.$g=function(j,B,U){return R.u(j)?this[B]:this.set(U,j)},M.unix=function(){return Math.floor(this.valueOf()/1e3)},M.valueOf=function(){return this.$d.getTime()},M.startOf=function(j,B){var U=this,V=!!R.u(B)||B,D=R.p(j),z=function(he,ye){var Ce=R.w(U.$u?Date.UTC(U.$y,ye,he):new Date(U.$y,ye,he),U);return V?Ce:Ce.endOf(l)},W=function(he,ye){return R.w(U.toDate()[he].apply(U.toDate("s"),(V?[0,0,0,0]:[23,59,59,999]).slice(ye)),U)},F=this.$W,H=this.$M,G=this.$D,ee="set"+(this.$u?"UTC":"");switch(D){case h:return V?z(1,0):z(31,11);case f:return V?z(1,H):z(0,H+1);case c:var le=this.$locale().weekStart||0,de=(F<le?F+7:F)-le;return z(V?G-de:G+(6-de),H);case l:case p:return W(ee+"Hours",0);case u:return W(ee+"Minutes",1);case a:return W(ee+"Seconds",2);case o:return W(ee+"Milliseconds",3);default:return this.clone()}},M.endOf=function(j){return this.startOf(j,!1)},M.$set=function(j,B){var U,V=R.p(j),D="set"+(this.$u?"UTC":""),z=(U={},U[l]=D+"Date",U[p]=D+"Date",U[f]=D+"Month",U[h]=D+"FullYear",U[u]=D+"Hours",U[a]=D+"Minutes",U[o]=D+"Seconds",U[s]=D+"Milliseconds",U)[V],W=V===l?this.$D+(B-this.$W):B;if(V===f||V===h){var F=this.clone().set(p,1);F.$d[z](W),F.init(),this.$d=F.set(p,Math.min(this.$D,F.daysInMonth())).$d}else z&&this.$d[z](W);return this.init(),this},M.set=function(j,B){return this.clone().$set(j,B)},M.get=function(j){return this[R.p(j)]()},M.add=function(j,B){var U,V=this;j=Number(j);var D=R.p(B),z=function(H){var G=k(V);return R.w(G.date(G.date()+Math.round(H*j)),V)};if(D===f)return this.set(f,this.$M+j);if(D===h)return this.set(h,this.$y+j);if(D===l)return z(1);if(D===c)return z(7);var W=(U={},U[a]=r,U[u]=i,U[o]=n,U)[D]||1,F=this.$d.getTime()+j*W;return R.w(F,this)},M.subtract=function(j,B){return this.add(-1*j,B)},M.format=function(j){var B=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var V=j||"YYYY-MM-DDTHH:mm:ssZ",D=R.z(this),z=this.$H,W=this.$m,F=this.$M,H=U.weekdays,G=U.months,ee=U.meridiem,le=function(ye,Ce,ve,Ye){return ye&&(ye[Ce]||ye(B,V))||ve[Ce].slice(0,Ye)},de=function(ye){return R.s(z%12||12,ye,"0")},he=ee||function(ye,Ce,ve){var Ye=ye<12?"AM":"PM";return ve?Ye.toLowerCase():Ye};return V.replace(y,function(ye,Ce){return Ce||function(ve){switch(ve){case"YY":return String(B.$y).slice(-2);case"YYYY":return R.s(B.$y,4,"0");case"M":return F+1;case"MM":return R.s(F+1,2,"0");case"MMM":return le(U.monthsShort,F,G,3);case"MMMM":return le(G,F);case"D":return B.$D;case"DD":return R.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return le(U.weekdaysMin,B.$W,H,2);case"ddd":return le(U.weekdaysShort,B.$W,H,3);case"dddd":return H[B.$W];case"H":return String(z);case"HH":return R.s(z,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return he(z,W,!0);case"A":return he(z,W,!1);case"m":return String(W);case"mm":return R.s(W,2,"0");case"s":return String(B.$s);case"ss":return R.s(B.$s,2,"0");case"SSS":return R.s(B.$ms,3,"0");case"Z":return D}return null}(ye)||D.replace(":","")})},M.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},M.diff=function(j,B,U){var V,D=this,z=R.p(B),W=k(j),F=(W.utcOffset()-this.utcOffset())*r,H=this-W,G=function(){return R.m(D,W)};switch(z){case h:V=G()/12;break;case f:V=G();break;case d:V=G()/3;break;case c:V=(H-F)/6048e5;break;case l:V=(H-F)/864e5;break;case u:V=H/i;break;case a:V=H/r;break;case o:V=H/n;break;default:V=H}return U?V:R.a(V)},M.daysInMonth=function(){return this.endOf(f).$D},M.$locale=function(){return S[this.$L]},M.locale=function(j,B){if(!j)return this.$L;var U=this.clone(),V=A(j,B,!0);return V&&(U.$L=V),U},M.clone=function(){return R.w(this.$d,this)},M.toDate=function(){return new Date(this.valueOf())},M.toJSON=function(){return this.isValid()?this.toISOString():null},M.toISOString=function(){return this.$d.toISOString()},M.toString=function(){return this.$d.toUTCString()},O}(),P=$.prototype;return k.prototype=P,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(O){P[O[1]]=function(M){return this.$g(M,O[0],O[1])}}),k.extend=function(O,M){return O.$i||(O(M,$,k),O.$i=!0),k},k.locale=A,k.isDayjs=T,k.unix=function(O){return k(1e3*O)},k.en=S[x],k.Ls=S,k.p={},k})})(RDe);var c4t=RDe.exports;const Tt=Ho(c4t);function f4t({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Tt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function d4t({formatter:e,...t}){return(e||f4t)(t)}function h4t({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function NDe({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=h4t({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?NDe({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function p4t(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function m4t(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function IZ({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=p4t(i.key);if(s){i.preventDefault();const o=m4t(e);NDe({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var PDe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ko,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",_=y+"|"+b,x=r[_];return x||(x=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[_]=x),x}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,_=n[v];_>=0&&(m[_]=parseInt(b,10))}var x=m[3],S=x===24?0:x,E=m[0]+"-"+m[1]+"-"+m[2]+" "+S+":"+m[4]+":"+m[5]+":000",T=+d;return(o.utc(E).valueOf()-(T-=T%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(S,E,T){var A=S-60*E*1e3,k=l(A,T);if(E===k)return[A,E];var R=l(A-=60*(k-E)*1e3,T);return k===R?[A,k]:[S-60*Math.min(k,R)*1e3,Math.max(k,R)]}(o.utc(d,m).valueOf(),y,g),b=v[0],_=v[1],x=o(b).utcOffset(_);return x.$x.$timezone=g,x},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(PDe);var g4t=PDe.exports;const y4t=Ho(g4t);var ODe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ko,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(x){x===void 0&&(x="");var S=x.match(r);if(!S)return null;var E=(""+S[0]).match(i)||["-",0,0],T=E[0],A=60*+E[1]+ +E[2];return A===0?0:T==="+"?A:-A}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var _=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+_,n)).$offset=v,b.$x.$localOffset=_}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(ODe);var v4t=ODe.exports;const b4t=Ho(v4t);Tt.extend(b4t);Tt.extend(y4t);function _4t(e,t){return t?Tt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const ppe=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=_4t(e,t);return n==="remove"&&(r*=-1),Tt(e).add(r,"minutes").toDate()};function $0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>ppe(i,n,e)):ppe(t,n,e)}function w4t({minDate:e,maxDate:t,timezone:n}){const r=$0("add",new Date,n);return!e&&!t?r:e&&Tt(r).isBefore(e)?e:t&&Tt(r).isAfter(t)?t:r}const E4t={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},x4t=I.createContext(E4t);function Xl(){const e=I.useContext(x4t),t=I.useCallback(o=>o||e.locale,[e.locale]),n=I.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=I.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=I.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=I.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function S4t(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function DDe({value:e,type:t,name:n,form:r}){return w.jsx("input",{type:"hidden",value:S4t(e,t),name:n,form:r})}DDe.displayName="@mantine/dates/HiddenDatesInput";var $De={day:"m_396ce5cb"};const T4t={},C4t=(e,{size:t})=>({day:{"--day-size":un(t,"day-size")}}),kZ=je((e,t)=>{const n=xe("Day",T4t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:_,...x}=n,S=mt({name:f||"Day",classes:$De,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:C4t,rootSelector:"day"}),E=Xl();return w.jsx(ao,{...S("day",{style:b?{display:"none"}:void 0}),component:_?"div":"button",ref:t,disabled:c,"data-today":Tt(l).isSame($0("add",new Date,E.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":_||void 0,unstyled:a,...x,children:(m==null?void 0:m(l))||l.getDate()})});kZ.classes=$De;kZ.displayName="@mantine/dates/Day";function A4t({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Tt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Tt(r).add(s,"days").locale(e).format(t)):i.push(t(Tt(r).add(s,"days").toDate()));return i}var MDe={weekday:"m_18a3eca"};const I4t={},k4t=(e,{size:t})=>({weekdaysRow:{"--wr-fz":oo(t),"--wr-spacing":Ol(t)}}),RZ=je((e,t)=>{const n=xe("WeekdaysRow",I4t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=mt({name:h||"WeekdaysRow",classes:MDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:k4t,rootSelector:"weekdaysRow"}),g=Xl(),y=A4t({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>w.jsx(d,{...m("weekday"),children:v},b));return w.jsx(Ne,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});RZ.classes=MDe;RZ.displayName="@mantine/dates/WeekdaysRow";function R4t(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function N4t(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function P4t({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=R4t(s,t),a=N4t(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function LDe(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function FDe(e,t){return t instanceof Date?Tt(e).isAfter(Tt(t).subtract(1,"day"),"day"):!0}function jDe(e,t){return t instanceof Date?Tt(e).isBefore(Tt(t).add(1,"day"),"day"):!0}function O4t(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return jDe(c,n)&&FDe(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||LDe(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Tt().isSame(c,"date"));return l||a[0]}var BDe={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const D4t={withCellSpacing:!0},H4=je((e,t)=>{const n=xe("Month",D4t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:_,hideWeekdays:x,getDayAriaLabel:S,static:E,__getDayRef:T,__onDayKeyDown:A,__onDayClick:k,__onDayMouseEnter:R,__preventFocus:$,__stopPropagation:P,withCellSpacing:O,size:M,...j}=n,B=mt({name:l||"Month",classes:BDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),U=Xl(),V=P4t({month:h,firstDayOfWeek:U.getFirstDayOfWeek(f),consistentWeeks:U.consistentWeeks}),D=O4t(V,y,v,m,g,_,h),{resolvedClassNames:z,resolvedStyles:W}=Ym({classNames:r,styles:o,props:n}),F=V.map((H,G)=>{const ee=H.map((le,de)=>{const he=!LDe(le,h),ye=(S==null?void 0:S(le))||Tt(le).locale(c||U.locale).format("D MMMM YYYY"),Ce=m==null?void 0:m(le),ve=Tt(le).isSame(D,"date");return w.jsx("td",{...B("monthCell"),"data-with-spacing":O||void 0,children:w.jsx(kZ,{__staticSelector:l||"Month",classNames:z,styles:W,unstyled:a,"data-mantine-stop-propagation":P||void 0,renderDay:b,date:le,size:M,weekend:U.getWeekendDays(p).includes(le.getDay()),outside:he,hidden:_?he:!1,"aria-label":ye,static:E,disabled:(g==null?void 0:g(le))||!jDe(le,v)||!FDe(le,y),ref:Ye=>T==null?void 0:T(G,de,Ye),...Ce,onKeyDown:Ye=>{var Ue;(Ue=Ce==null?void 0:Ce.onKeyDown)==null||Ue.call(Ce,Ye),A==null||A(Ye,{rowIndex:G,cellIndex:de,date:le})},onMouseEnter:Ye=>{var Ue;(Ue=Ce==null?void 0:Ce.onMouseEnter)==null||Ue.call(Ce,Ye),R==null||R(Ye,le)},onClick:Ye=>{var Ue;(Ue=Ce==null?void 0:Ce.onClick)==null||Ue.call(Ce,Ye),k==null||k(Ye,le)},onMouseDown:Ye=>{var Ue;(Ue=Ce==null?void 0:Ce.onMouseDown)==null||Ue.call(Ce,Ye),$&&Ye.preventDefault()},tabIndex:$||!ve?-1:0})},le.toString())});return w.jsx("tr",{...B("monthRow"),children:ee},G)});return w.jsxs(Ne,{component:"table",...B("month"),size:M,ref:t,...j,children:[!x&&w.jsx("thead",{...B("monthThead"),children:w.jsx(RZ,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:M,classNames:z,styles:W,unstyled:a})}),w.jsx("tbody",{...B("monthTbody"),children:F})]})});H4.classes=BDe;H4.displayName="@mantine/dates/Month";var UDe={pickerControl:"m_dc6a3c71"};const $4t={},M4t=(e,{size:t})=>({pickerControl:{"--dpc-fz":oo(t),"--dpc-size":un(t,"dpc-size")}}),q4=je((e,t)=>{const n=xe("PickerControl",$4t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=mt({name:d||"PickerControl",classes:UDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:M4t,rootSelector:"pickerControl"});return w.jsx(ao,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});q4.classes=UDe;q4.displayName="@mantine/dates/PickerControl";function zDe(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"year")||n&&Tt(e).isAfter(n,"year"))}function L4t(e,t,n,r){const i=e.flat().filter(a=>{var u;return!zDe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"year"));return o||i[0]}function VDe(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var HDe={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const F4t={yearsListFormat:"YYYY",withCellSpacing:!0},W4=je((e,t)=>{const n=xe("YearsList",F4t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:_,__stopPropagation:x,withCellSpacing:S,size:E,...T}=n,A=mt({name:m||"YearsList",classes:HDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),k=Xl(),R=VDe(l),$=L4t(R,d,h,p),P=R.map((O,M)=>{const j=O.map((B,U)=>{const V=p==null?void 0:p(B),D=Tt(B).isSame($,"year");return w.jsx("td",{...A("yearsListCell"),"data-with-spacing":S||void 0,children:w.jsx(q4,{...A("yearsListControl"),size:E,unstyled:a,"data-mantine-stop-propagation":x||void 0,disabled:zDe(B,d,h),ref:z=>g==null?void 0:g(M,U,z),...V,onKeyDown:z=>{var W;(W=V==null?void 0:V.onKeyDown)==null||W.call(V,z),y==null||y(z,{rowIndex:M,cellIndex:U,date:B})},onClick:z=>{var W;(W=V==null?void 0:V.onClick)==null||W.call(V,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=V==null?void 0:V.onMouseEnter)==null||W.call(V,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=V==null?void 0:V.onMouseDown)==null||W.call(V,z),_&&z.preventDefault()},tabIndex:_||!D?-1:0,children:Tt(B).locale(k.getLocale(f)).format(c)})},U)});return w.jsx("tr",{...A("yearsListRow"),children:j},M)});return w.jsx(Ne,{component:"table",ref:t,size:E,...A("yearsList"),...T,children:w.jsx("tbody",{children:P})})});W4.classes=HDe;W4.displayName="@mantine/dates/YearsList";function qDe(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"month")||n&&Tt(e).isAfter(n,"month"))}function j4t(e,t,n,r){const i=e.flat().filter(a=>{var u;return!qDe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"month"));return o||i[0]}function B4t(e){const t=Tt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Tt(t).add(r,"months").toDate()),r+=1;return n}var WDe={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const U4t={monthsListFormat:"MMM",withCellSpacing:!0},G4=je((e,t)=>{const n=xe("MonthsList",U4t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:_,__stopPropagation:x,withCellSpacing:S,size:E,...T}=n,A=mt({name:l||"MonthsList",classes:WDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),k=Xl(),R=B4t(c),$=j4t(R,h,p,m),P=R.map((O,M)=>{const j=O.map((B,U)=>{const V=m==null?void 0:m(B),D=Tt(B).isSame($,"month");return w.jsx("td",{...A("monthsListCell"),"data-with-spacing":S||void 0,children:w.jsx(q4,{...A("monthsListControl"),size:E,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":x||void 0,disabled:qDe(B,h,p),ref:z=>g==null?void 0:g(M,U,z),...V,onKeyDown:z=>{var W;(W=V==null?void 0:V.onKeyDown)==null||W.call(V,z),y==null||y(z,{rowIndex:M,cellIndex:U,date:B})},onClick:z=>{var W;(W=V==null?void 0:V.onClick)==null||W.call(V,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=V==null?void 0:V.onMouseEnter)==null||W.call(V,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=V==null?void 0:V.onMouseDown)==null||W.call(V,z),_&&z.preventDefault()},tabIndex:_||!D?-1:0,children:Tt(B).locale(k.getLocale(d)).format(f)})},U)});return w.jsx("tr",{...A("monthsListRow"),children:j},M)});return w.jsx(Ne,{component:"table",ref:t,size:E,...A("monthsList"),...T,children:w.jsx("tbody",{children:P})})});G4.classes=WDe;G4.displayName="@mantine/dates/MonthsList";var GDe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const z4t={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},V4t=(e,{size:t})=>({calendarHeader:{"--dch-control-size":un(t,"dch-control-size"),"--dch-fz":oo(t)}}),qy=je((e,t)=>{const n=xe("CalendarHeader",z4t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:_,withNext:x,withPrevious:S,__staticSelector:E,__preventFocus:T,__stopPropagation:A,...k}=n,R=mt({name:E||"CalendarHeader",classes:GDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:V4t,rootSelector:"calendarHeader"}),$=T?P=>P.preventDefault():void 0;return w.jsxs(Ne,{...R("calendarHeader"),ref:t,...k,children:[S&&w.jsx(ao,{...R("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:$,disabled:v,"data-disabled":v||void 0,tabIndex:T||v?-1:0,"data-mantine-stop-propagation":A||void 0,children:c||w.jsx(W7,{...R("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),w.jsx(ao,{component:b?"button":"div",...R("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?$:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":_,tabIndex:T||!b?-1:0,"data-mantine-stop-propagation":A||void 0,children:g}),x&&w.jsx(ao,{...R("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:$,disabled:y,"data-disabled":y||void 0,tabIndex:T||y?-1:0,"data-mantine-stop-propagation":A||void 0,children:l||w.jsx(W7,{...R("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});qy.classes=GDe;qy.displayName="@mantine/dates/CalendarHeader";function H4t(e){const t=VDe(e);return[t[0][0],t[3][0]]}const q4t={decadeLabelFormat:"YYYY"},Y4=je((e,t)=>{const n=xe("DecadeLevel",q4t,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:_,nextDisabled:x,previousDisabled:S,levelControlAriaLabel:E,withNext:T,withPrevious:A,decadeLabelFormat:k,classNames:R,styles:$,unstyled:P,__staticSelector:O,__stopPropagation:M,size:j,...B}=n,U=Xl(),[V,D]=H4t(r),z={__staticSelector:O||"DecadeLevel",classNames:R,styles:$,unstyled:P,size:j},W=typeof x=="boolean"?x:o?!Tt(D).endOf("year").isBefore(o):!1,F=typeof S=="boolean"?S:s?!Tt(V).startOf("year").isAfter(s):!1,H=(G,ee)=>Tt(G).locale(i||U.locale).format(ee);return w.jsxs(Ne,{"data-decade-level":!0,size:j,ref:t,...B,children:[w.jsx(qy,{label:typeof k=="function"?k(V,D):`${H(V,k)}  ${H(D,k)}`,__preventFocus:p,__stopPropagation:M,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:_,nextDisabled:W,previousDisabled:F,hasNextLevel:!1,levelControlAriaLabel:E,withNext:T,withPrevious:A,...z}),w.jsx(W4,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:M,withCellSpacing:h,...z})]})});Y4.classes={...W4.classes,...qy.classes};Y4.displayName="@mantine/dates/DecadeLevel";const W4t={yearLabelFormat:"YYYY"},K4=je((e,t)=>{const n=xe("YearLevel",W4t,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:_,onLevelClick:x,nextDisabled:S,previousDisabled:E,hasNextLevel:T,levelControlAriaLabel:A,withNext:k,withPrevious:R,yearLabelFormat:$,__staticSelector:P,__stopPropagation:O,size:M,classNames:j,styles:B,unstyled:U,...V}=n,D=Xl(),z={__staticSelector:P||"YearLevel",classNames:j,styles:B,unstyled:U,size:M},W=typeof S=="boolean"?S:o?!Tt(r).endOf("year").isBefore(o):!1,F=typeof E=="boolean"?E:s?!Tt(r).startOf("year").isAfter(s):!1;return w.jsxs(Ne,{"data-year-level":!0,size:M,ref:t,...V,children:[w.jsx(qy,{label:typeof $=="function"?$(r):Tt(r).locale(i||D.locale).format($),__preventFocus:p,__stopPropagation:O,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:_,onLevelClick:x,nextDisabled:W,previousDisabled:F,hasNextLevel:T,levelControlAriaLabel:A,withNext:k,withPrevious:R,...z}),w.jsx(G4,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:O,withCellSpacing:h,...z})]})});K4.classes={...qy.classes,...G4.classes};K4.displayName="@mantine/dates/YearLevel";const G4t={monthLabelFormat:"MMMM YYYY"},X4=je((e,t)=>{const n=xe("MonthLevel",G4t,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:_,__preventFocus:x,__stopPropagation:S,nextIcon:E,previousIcon:T,nextLabel:A,previousLabel:k,onNext:R,onPrevious:$,onLevelClick:P,nextDisabled:O,previousDisabled:M,hasNextLevel:j,levelControlAriaLabel:B,withNext:U,withPrevious:V,monthLabelFormat:D,classNames:z,styles:W,unstyled:F,__staticSelector:H,size:G,static:ee,...le}=n,de=Xl(),he={__staticSelector:H||"MonthLevel",classNames:z,styles:W,unstyled:F,size:G},ye=typeof O=="boolean"?O:f?!Tt(r).endOf("month").isBefore(f):!1,Ce=typeof M=="boolean"?M:c?!Tt(r).startOf("month").isAfter(c):!1;return w.jsxs(Ne,{"data-month-level":!0,size:G,ref:t,...le,children:[w.jsx(qy,{label:typeof D=="function"?D(r):Tt(r).locale(i||de.locale).format(D),__preventFocus:x,__stopPropagation:S,nextIcon:E,previousIcon:T,nextLabel:A,previousLabel:k,onNext:R,onPrevious:$,onLevelClick:P,nextDisabled:ye,previousDisabled:Ce,hasNextLevel:j,levelControlAriaLabel:B,withNext:U,withPrevious:V,...he}),w.jsx(H4,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:x,__stopPropagation:S,static:ee,withCellSpacing:_,...he})]})});X4.classes={...H4.classes,...qy.classes};X4.displayName="@mantine/dates/MonthLevel";var YDe={levelsGroup:"m_30b26e33"};const Y4t={},Wy=je((e,t)=>{const n=xe("LevelsGroup",Y4t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=mt({name:l||"LevelsGroup",classes:YDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return w.jsx(Ne,{ref:t,...f("levelsGroup"),...c})});Wy.classes=YDe;Wy.displayName="@mantine/dates/LevelsGroup";const K4t={numberOfColumns:1},Q4=je((e,t)=>{const n=xe("DecadeLevelGroup",K4t,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:_,classNames:x,styles:S,unstyled:E,__staticSelector:T,__stopPropagation:A,numberOfColumns:k,levelControlAriaLabel:R,decadeLabelFormat:$,size:P,vars:O,...M}=n,j=I.useRef([]),B=Array(k).fill(0).map((U,V)=>{const D=Tt(r).add(V*10,"years").toDate();return w.jsx(Y4,{size:P,yearsListFormat:a,decade:D,withNext:V===k-1,withPrevious:V===0,decadeLabelFormat:$,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(z,W)=>IZ({levelIndex:V,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:z,controlsRef:j}),__getControlRef:(z,W,F)=>{Array.isArray(j.current[V])||(j.current[V]=[]),Array.isArray(j.current[V][z])||(j.current[V][z]=[]),j.current[V][z][W]=F},levelControlAriaLabel:typeof R=="function"?R(D):R,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:A,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:_,getYearControlProps:u,__staticSelector:T||"DecadeLevelGroup",classNames:x,styles:S,unstyled:E,withCellSpacing:f},V)});return w.jsx(Wy,{classNames:x,styles:S,__staticSelector:T||"DecadeLevelGroup",ref:t,size:P,unstyled:E,...M,children:B})});Q4.classes={...Wy.classes,...Y4.classes};Q4.displayName="@mantine/dates/DecadeLevelGroup";const X4t={numberOfColumns:1},J4=je((e,t)=>{const n=xe("YearLevelGroup",X4t,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:_,previousDisabled:x,hasNextLevel:S,classNames:E,styles:T,unstyled:A,__staticSelector:k,__stopPropagation:R,numberOfColumns:$,levelControlAriaLabel:P,yearLabelFormat:O,size:M,vars:j,...B}=n,U=I.useRef([]),V=Array($).fill(0).map((D,z)=>{const W=Tt(r).add(z,"years").toDate();return w.jsx(K4,{size:M,monthsListFormat:a,year:W,withNext:z===$-1,withPrevious:z===0,yearLabelFormat:O,__stopPropagation:R,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(F,H)=>IZ({levelIndex:z,rowIndex:H.rowIndex,cellIndex:H.cellIndex,event:F,controlsRef:U}),__getControlRef:(F,H,G)=>{Array.isArray(U.current[z])||(U.current[z]=[]),Array.isArray(U.current[z][F])||(U.current[z][F]=[]),U.current[z][F][H]=G},levelControlAriaLabel:typeof P=="function"?P(W):P,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:_,previousDisabled:x,hasNextLevel:S,getMonthControlProps:u,classNames:E,styles:T,unstyled:A,__staticSelector:k||"YearLevelGroup",withCellSpacing:f},z)});return w.jsx(Wy,{classNames:E,styles:T,__staticSelector:k||"YearLevelGroup",ref:t,size:M,unstyled:A,...B,children:V})});J4.classes={...K4.classes,...Wy.classes};J4.displayName="@mantine/dates/YearLevelGroup";const Q4t={numberOfColumns:1},Z4=je((e,t)=>{const n=xe("MonthLevelGroup",Q4t,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:b,nextIcon:_,previousIcon:x,nextLabel:S,previousLabel:E,onNext:T,onPrevious:A,onLevelClick:k,nextDisabled:R,previousDisabled:$,hasNextLevel:P,classNames:O,styles:M,unstyled:j,numberOfColumns:B,levelControlAriaLabel:U,monthLabelFormat:V,__staticSelector:D,__stopPropagation:z,size:W,static:F,vars:H,...G}=n,ee=I.useRef([]),le=Array(B).fill(0).map((de,he)=>{const ye=Tt(r).add(he,"months").toDate();return w.jsx(X4,{month:ye,withNext:he===B-1,withPrevious:he===0,monthLabelFormat:V,__stopPropagation:z,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ce,ve)=>IZ({levelIndex:he,rowIndex:ve.rowIndex,cellIndex:ve.cellIndex,event:Ce,controlsRef:ee}),__getDayRef:(Ce,ve,Ye)=>{Array.isArray(ee.current[he])||(ee.current[he]=[]),Array.isArray(ee.current[he][Ce])||(ee.current[he][Ce]=[]),ee.current[he][Ce][ve]=Ye},levelControlAriaLabel:typeof U=="function"?U(ye):U,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:b,nextIcon:_,previousIcon:x,nextLabel:S,previousLabel:E,onNext:T,onPrevious:A,onLevelClick:k,nextDisabled:R,previousDisabled:$,hasNextLevel:P,classNames:O,styles:M,unstyled:j,__staticSelector:D||"MonthLevelGroup",size:W,static:F,withCellSpacing:v},he)});return w.jsx(Wy,{classNames:O,styles:M,__staticSelector:D||"MonthLevelGroup",ref:t,size:W,...G,children:le})});Z4.classes={...Wy.classes,...X4.classes};Z4.displayName="@mantine/dates/MonthLevelGroup";var KDe={input:"m_6fa5e2aa"};const J4t={},eF=je((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:_,readOnly:x,disabled:S,value:E,name:T,form:A,type:k,...R}=Kbe("PickerInputBase",J4t,e),$=b||(g&&_&&!x&&!S?w.jsx(kb,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),P=()=>{k==="range"&&Array.isArray(E)&&E[0]&&!E[1]&&y(),h.close()};return w.jsxs(w.Fragment,{children:[c==="modal"&&!x&&w.jsx(Oo,{opened:p,onClose:P,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),w.jsx(Mi.Wrapper,{...r,children:w.jsxs(lr,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||x,onClose:()=>{var O;(O=u==null?void 0:u.onClose)==null||O.call(u),P()},children:[w.jsx(lr.Target,{children:w.jsx(Mi,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":x||void 0,disabled:S,component:"button",type:"button",multiline:!0,onClick:O=>{m==null||m(O),h.toggle()},rightSection:$,...n,ref:t,classNames:{...s,input:Zi(KDe.input,s==null?void 0:s.input)},...R,children:d||w.jsx(Mi.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),w.jsx(lr.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),w.jsx(DDe,{value:E,name:T,form:A,type:k})]})});eF.classes=KDe;eF.displayName="@mantine/dates/PickerInputBase";const mpe=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function NZ({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=I.useRef(e),o=Xl(),[a,u,l]=jo({value:$0("add",t,o.getTimezone(),!i),defaultValue:$0("add",n,o.getTimezone(),!i),finalValue:mpe(e),onChange:f=>{r==null||r($0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:mpe(e),u(c))),[c,u,l]}function Lj(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function Z4t(e){return e===0?"month":e===1?"year":"decade"}function NT(e,t,n){return Z4t(yc(Lj(e,0),Lj(t,0),Lj(n,2)))}const eFt={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},tF=je((e,t)=>{const n=xe("Calendar",eFt,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:_,firstDayOfWeek:x,weekdayFormat:S,weekendDays:E,getDayProps:T,excludeDate:A,renderDay:k,hideOutsideDates:R,hideWeekdays:$,getDayAriaLabel:P,monthLabelFormat:O,nextIcon:M,previousIcon:j,__onDayClick:B,__onDayMouseEnter:U,withCellSpacing:V,monthsListFormat:D,getMonthControlProps:z,yearLabelFormat:W,yearsListFormat:F,getYearControlProps:H,decadeLabelFormat:G,classNames:ee,styles:le,unstyled:de,minDate:he,maxDate:ye,locale:Ce,__staticSelector:ve,size:Ye,__preventFocus:Ue,__stopPropagation:pt,onNextDecade:rt,onPreviousDecade:be,onNextYear:Ae,onPreviousYear:Ve,onNextMonth:ut,onPreviousMonth:Nt,static:qe,__timezoneApplied:me,...ct}=n,{resolvedClassNames:gt,resolvedStyles:wt}=Ym({classNames:ee,styles:le,props:n}),[pe,Ie]=jo({value:a?NT(a,s,i):void 0,defaultValue:o?NT(o,s,i):void 0,finalValue:NT(void 0,s,i),onChange:u}),[Ke,yt]=NZ({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!me}),Vt={__staticSelector:ve||"Calendar",styles:wt,classNames:gt,unstyled:de,size:Ye},er=Xl(),Vn=h||d||1,$n=Ke||$0("add",new Date,er.getTimezone()),gn=()=>{const Cn=Tt($n).add(Vn,"month").toDate();ut==null||ut(Cn),yt(Cn)},gr=()=>{const Cn=Tt($n).subtract(Vn,"month").toDate();Nt==null||Nt(Cn),yt(Cn)},Qt=()=>{const Cn=Tt($n).add(Vn,"year").toDate();Ae==null||Ae(Cn),yt(Cn)},qr=()=>{const Cn=Tt($n).subtract(Vn,"year").toDate();Ve==null||Ve(Cn),yt(Cn)},Zr=()=>{const Cn=Tt($n).add(10*Vn,"year").toDate();rt==null||rt(Cn),yt(Cn)},ji=()=>{const Cn=Tt($n).subtract(10*Vn,"year").toDate();be==null||be(Cn),yt(Cn)};return w.jsxs(Ne,{ref:t,size:Ye,"data-calendar":!0,...ct,children:[pe==="month"&&w.jsx(Z4,{month:$n,minDate:he,maxDate:ye,firstDayOfWeek:x,weekdayFormat:S,weekendDays:E,getDayProps:T,excludeDate:A,renderDay:k,hideOutsideDates:R,hideWeekdays:$,getDayAriaLabel:P,onNext:gn,onPrevious:gr,hasNextLevel:i!=="month",onLevelClick:()=>Ie("year"),numberOfColumns:d,locale:Ce,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:M,previousLabel:p==null?void 0:p.previousMonth,previousIcon:j,monthLabelFormat:O,__onDayClick:B,__onDayMouseEnter:U,__preventFocus:Ue,__stopPropagation:pt,static:qe,withCellSpacing:V,...Vt}),pe==="year"&&w.jsx(J4,{year:$n,numberOfColumns:d,minDate:he,maxDate:ye,monthsListFormat:D,getMonthControlProps:z,locale:Ce,onNext:Qt,onPrevious:qr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>Ie("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:M,previousLabel:p==null?void 0:p.previousYear,previousIcon:j,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(Cn,Bi)=>{_&&yt(Bi),Ie(NT("month",s,i)),g==null||g(Bi)},__preventFocus:Ue,__stopPropagation:pt,withCellSpacing:V,...Vt}),pe==="decade"&&w.jsx(Q4,{decade:$n,minDate:he,maxDate:ye,yearsListFormat:F,getYearControlProps:H,locale:Ce,onNext:Zr,onPrevious:ji,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:M,previousLabel:p==null?void 0:p.previousDecade,previousIcon:j,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(Cn,Bi)=>{b&&yt(Bi),Ie(NT("year",s,i)),m==null||m(Bi)},__preventFocus:Ue,__stopPropagation:pt,withCellSpacing:V,...Vt})]})});tF.classes={...Q4.classes,...J4.classes,...Z4.classes};tF.displayName="@mantine/dates/Calendar";function tFt(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:_,onPreviousYear:x,onNextDecade:S,onPreviousDecade:E,withCellSpacing:T,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:k,firstDayOfWeek:R,weekdayFormat:$,weekendDays:P,getDayProps:O,excludeDate:M,renderDay:j,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:V,monthLabelFormat:D,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:F,yearsListFormat:H,getYearControlProps:G,decadeLabelFormat:ee,allowSingleDateInRange:le,allowDeselect:de,minDate:he,maxDate:ye,locale:Ce,...ve}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:_,onPreviousYear:x,onNextDecade:S,onPreviousDecade:E,withCellSpacing:T,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:k,firstDayOfWeek:R,weekdayFormat:$,weekendDays:P,getDayProps:O,excludeDate:M,renderDay:j,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:V,monthLabelFormat:D,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:F,yearsListFormat:H,getYearControlProps:G,decadeLabelFormat:ee,allowSingleDateInRange:le,allowDeselect:de,minDate:he,maxDate:ye,locale:Ce},others:ve}}function gpe(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Tt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Tt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function nFt({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=NZ({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=I.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=I.useState(null),m=S=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Tt(S).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const E=[S,f];E.sort((T,A)=>T.getTime()-A.getTime()),c(E),p(null),d(null);return}if(l[0]&&!l[1]&&Tt(S).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([S,null]),p(null),d(S);return}if(e==="multiple"){l.some(E=>Tt(E).isSame(S,t))?c(l.filter(E=>!Tt(E).isSame(S,t))):c([...l,S]);return}l&&o&&Tt(S).isSame(l,t)?c(null):c(S)},g=S=>f instanceof Date&&h instanceof Date?gpe(S,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?gpe(S,l):!1,y=e==="range"?S=>{a==null||a(S),p(null)}:a,v=S=>l[0]instanceof Date&&Tt(S).isSame(l[0],t)?!(h&&Tt(h).isBefore(l[0])):!1,b=S=>l[1]instanceof Date?Tt(S).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Tt(h).isBefore(l[0])&&Tt(S).isSame(l[0],t),_=S=>{if(e==="range")return{selected:l.some(T=>T&&Tt(T).isSame(S,t)),inRange:g(S),firstInRange:v(S),lastInRange:b(S),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(S,t)||void 0};if(e==="multiple")return{selected:l.some(T=>T&&Tt(T).isSame(S,t)),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(S,t)||void 0};const E=Tt(l).isSame(S,t);return{selected:E,"data-autofocus":E||void 0}},x=e==="range"&&f?p:()=>{};return I.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:x,getControlProps:_,_value:l,setValue:c}}const rFt={type:"default",defaultLevel:"month",numberOfColumns:1},nF=je((e,t)=>{const n=xe("DatePicker",rFt,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,..._}=n,{onDateChange:x,onRootMouseLeave:S,onHoveredDateChange:E,getControlProps:T}=nFt({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:A,resolvedStyles:k}=Ym({classNames:r,styles:i,props:n}),R=Xl();return w.jsx(tF,{ref:t,minLevel:"month",classNames:A,styles:k,__staticSelector:c||"DatePicker",onMouseLeave:S,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:($,P)=>{E(P),y==null||y($,P)},__onDayClick:($,P)=>{x(P),v==null||v($,P)},getDayProps:$=>({...T($),...f==null?void 0:f($)}),..._,date:$0("add",_.date,R.getTimezone(),b),__timezoneApplied:!0})});nF.classes=tF.classes;nF.displayName="@mantine/dates/DatePicker";function iFt({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=Xl(),[f,d]=nC(!1),[h,p]=NZ({type:e,value:t,defaultValue:n,onChange:r}),m=d4t({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((_,x)=>_.getTime()-x.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const sFt={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},PZ=je((e,t)=>{const n=xe("DatePickerInput",sFt,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:_,defaultDate:x,valueFormatter:S,...E}=n,{resolvedClassNames:T,resolvedStyles:A}=Ym({classNames:c,styles:f,props:n}),{calendarProps:k,others:R}=tFt(E),{_value:$,setValue:P,formattedValue:O,dropdownHandlers:M,dropdownOpened:j,onClear:B,shouldClear:U}=iFt({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:S}),V=Array.isArray($)?$[0]||x:$||x,D=Xl();return w.jsx(eF,{formattedValue:O,dropdownOpened:j,dropdownHandlers:M,classNames:T,styles:A,unstyled:d,ref:t,onClear:B,shouldClear:U,value:$,size:p,variant:m,dropdownType:g,...R,type:r,__staticSelector:"DatePickerInput",children:w.jsx(nF,{...k,size:p,variant:m,type:r,value:$,defaultDate:V||w4t({maxDate:b,minDate:v,timezone:D.getTimezone()}),onChange:P,locale:l,classNames:T,styles:A,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:$0("add",k.date,D.getTimezone()),__timezoneApplied:!0})})});PZ.classes={...eF.classes,...nF.classes};PZ.displayName="@mantine/dates/DatePickerInput";const ype={};function WV(e,t){e===void 0&&(e=ype),t===void 0&&(t=ype);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var oFt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),aFt=Object.prototype.hasOwnProperty;function GV(e,t){return aFt.call(e,t)}function YV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)GV(e,i)&&r.push(i);return r}function Cl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function KV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Dv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function XDe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function XV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(XV(e[t]))return!0}else if(typeof e=="object"){for(var r=YV(e),i=r.length,s=0;s<i;s++)if(XV(e[r[s]]))return!0}}return!1}function vpe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var QDe=function(e){oFt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,vpe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=vpe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),qi=QDe,uFt=Cl,bw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=k$(n,this.path);r&&(r=Cl(r));var i=C1(n,{op:"remove",path:this.from}).removed;return C1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=k$(n,this.from);return C1(n,{op:"add",path:this.path,value:Cl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:iI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},lFt={add:function(e,t,n){return KV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:bw.move,copy:bw.copy,test:bw.test,_get:bw._get};function k$(e,t){if(t=="")return e;var n={op:"_get",path:t};return C1(e,n),n.value}function C1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):R$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=k$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=iI(e,t.value),o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Cl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=R$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=XDe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!KV(h))throw new qi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);KV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new qi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=lFt[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=bw[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new qi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function rF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Cl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=C1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function cFt(e,t,n){var r=C1(e,t);if(r.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function R$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new qi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(bw[e.op]){if(typeof e.path!="string")throw new qi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new qi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new qi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&XV(e.value))throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new qi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new qi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=JDe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new qi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function JDe(e,t,n){try{if(!Array.isArray(e))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)rF(Cl(t),Cl(e),n||!0);else{n=n||R$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof qi)return i;throw i}}function iI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!iI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!iI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const fFt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:qi,_areEquals:iI,applyOperation:C1,applyPatch:rF,applyReducer:cFt,deepClone:uFt,getValueByPointer:k$,validate:JDe,validator:R$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var OZ=new WeakMap,dFt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),hFt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function pFt(e){return OZ.get(e)}function mFt(e,t){return e.observers.get(t)}function gFt(e,t){e.observers.delete(t.callback)}function yFt(e,t){t.unobserve()}function vFt(e,t){var n=[],r,i=pFt(e);if(!i)i=new dFt(e),OZ.set(e,i);else{var s=mFt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Cl(e),t){r.callback=t,r.next=null;var o=function(){QV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){QV(r),clearTimeout(r.next),gFt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new hFt(t,r)),r}function QV(e,t){t===void 0&&(t=!1);var n=OZ.get(e.object);DZ(n.value,e.object,e.patches,"",t),e.patches.length&&rF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function DZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=YV(t),o=YV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(GV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?DZ(c,f,n,r+"/"+Dv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Dv(l),value:Cl(c)}),n.push({op:"replace",path:r+"/"+Dv(l),value:Cl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Dv(l),value:Cl(c)}),n.push({op:"remove",path:r+"/"+Dv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!GV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Dv(l),value:Cl(t[l])})}}}function bFt(e,t,n){n===void 0&&(n=!1);var r=[];return DZ(e,t,r,"",n),r}const _Ft=Object.freeze(Object.defineProperty({__proto__:null,compare:bFt,generate:QV,observe:vFt,unobserve:yFt},Symbol.toStringTag,{value:"Module"}));Object.assign({},fFt,_Ft,{JsonPatchError:QDe,deepClone:Cl,escapePathComponent:Dv,unescapePathComponent:XDe});var wFt=/("(?:[^\\"]|\\.)*")|[:,]/g,EFt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,_,x;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),_=JSON.stringify(a,s),_===void 0)return _;if(g=i-u.length-l,_.length<=g&&(v=_.replace(wFt,function(S,E){return E||S+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(_),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",x=o(a[h],y,p.length+(f===g-1?0:1)),x!==void 0&&d.push(p+x);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return _}(t,"",0)};const Fj=Ho(EFt);function il(e,t,n){return e.fields=t||[],e.fname=n,e}function Ji(e){return e==null?null:e.fname}function ba(e){return e==null?null:e.fields}function ZDe(e){return e.length===1?xFt(e[0]):SFt(e)}const xFt=e=>function(t){return t[e]},SFt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Me(e){throw Error(e)}function lp(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Me("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Me("Access path missing closing bracket: "+e),r&&Me("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Lc(e,t,n){const r=lp(e);return e=r.length===1?r[0]:e,il((n&&n.get||ZDe)(r),[e],t||e)}const Lk=Lc("id"),Ca=il(e=>e,[],"identity"),e0=il(()=>0,[],"zero"),IS=il(()=>1,[],"one"),Fc=il(()=>!0,[],"true"),Pg=il(()=>!1,[],"false");function TFt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const e3e=0,$Z=1,MZ=2,t3e=3,n3e=4;function LZ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:TFt,r=e||e3e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=$Z&&n(t||"error","ERROR",arguments),this},warn(){return r>=MZ&&n(t||"warn","WARN",arguments),this},info(){return r>=t3e&&n(t||"log","INFO",arguments),this},debug(){return r>=n3e&&n(t||"log","DEBUG",arguments),this}}}var Fe=Array.isArray;function ht(e){return e===Object(e)}const bpe=e=>e!=="__proto__";function kS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=CFt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;RS(r,s,i[s],o)}return r},{})}function RS(e,t,n,r){if(!bpe(t))return;let i,s;if(ht(n)&&!Fe(n)){s=ht(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?RS(s,i,n[i]):bpe(i)&&(s[i]=n[i])}else e[t]=n}function CFt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Yn(e){return e[e.length-1]}function ga(e){return e==null||e===""?null:+e}const r3e=e=>t=>e*Math.exp(t),i3e=e=>t=>Math.log(e*t),s3e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),o3e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,N$=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function iF(e,t,n,r){const i=n(e[0]),s=n(Yn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function a3e(e,t){return iF(e,t,ga,Ca)}function u3e(e,t){var n=Math.sign(e[0]);return iF(e,t,i3e(n),r3e(n))}function l3e(e,t,n){return iF(e,t,N$(n),N$(1/n))}function c3e(e,t,n){return iF(e,t,s3e(n),o3e(n))}function sF(e,t,n,r,i){const s=r(e[0]),o=r(Yn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function FZ(e,t,n){return sF(e,t,n,ga,Ca)}function jZ(e,t,n){const r=Math.sign(e[0]);return sF(e,t,n,i3e(r),r3e(r))}function P$(e,t,n,r){return sF(e,t,n,N$(r),N$(1/r))}function BZ(e,t,n,r){return sF(e,t,n,s3e(r),o3e(r))}function f3e(e){return 1+~~(new Date(e).getMonth()/3)}function d3e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ft(e){return e!=null?Fe(e)?e:[e]:[]}function h3e(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function wn(e){return typeof e=="function"}const AFt="descending";function UZ(e,t,n){n=n||{},t=ft(t)||[];const r=[],i=[],s={},o=n.comparator||IFt;return ft(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===AFt?-1:1),i.push(a=wn(a)?a:Lc(a,null,n)),(ba(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:il(o(i,r),Object.keys(s))}const oF=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),IFt=(e,t)=>e.length===1?kFt(e[0],t[0]):RFt(e,t,e.length),kFt=(e,t)=>function(n,r){return oF(e(n),e(r))*t},RFt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=oF(s(r),s(i));return o*t[a]});function Aa(e){return wn(e)?e:()=>e}function zZ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function _n(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Hh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function p3e(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const NFt=Object.prototype.hasOwnProperty;function Ft(e,t){return NFt.call(e,t)}const QN={};function NS(e){let t={},n;function r(s){return Ft(t,s)&&t[s]!==QN}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===QN&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=QN),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==QN&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function m3e(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Yn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function at(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),_n(r,n)}function _w(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Gy(e){return typeof e=="boolean"}function M0(e){return Object.prototype.toString.call(e)==="[object Date]"}function g3e(e){return e&&wn(e[Symbol.iterator])}function ar(e){return typeof e=="number"}function y3e(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function dt(e){return typeof e=="string"}function VZ(e,t,n){e&&(e=t?ft(e).map(a=>a.replace(/\\(.)/g,"$1")):ft(e));const r=e&&e.length,i=n&&n.get||ZDe,s=a=>i(t?[a]:lp(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return il(o,e,"key")}function v3e(e,t){const n=e[0],r=Yn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const PFt=1e4;function b3e(e){e=+e||PFt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Ft(t,o)||Ft(n,o),get:o=>Ft(t,o)?t[o]:Ft(n,o)?s(o,n[o]):void 0,set:(o,a)=>Ft(t,o)?t[o]=a:s(o,a)}}function _3e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function CC(e,t){let n="";for(;--t>=0;)n+=e;return n}function w3e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?CC(i,o)+s:r==="center"?CC(i,~~(o/2))+s+CC(i,Math.ceil(o/2)):s+CC(i,o)}function Fk(e){return e&&Yn(e)-e[0]||0}function nt(e){return Fe(e)?"["+e.map(nt)+"]":ht(e)||dt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function HZ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const OFt=e=>ar(e)||M0(e)?e:Date.parse(e);function qZ(e,t){return t=t||OFt,e==null||e===""?null:t(e)}function WZ(e){return e==null||e===""?null:e+""}function nd(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function E3e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Bg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function DFt(e){return e}function $Ft(e){if(e==null)return DFt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function MFt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function LFt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return _pe(e,n)})}:_pe(e,t)}function _pe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=x3e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function x3e(e,t){var n=$Ft(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&MFt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function FFt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function jFt(e){return x3e(e,BFt.apply(this,arguments))}function BFt(e,t,n){var r,i,s;if(arguments.length>1)r=UFt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:FFt(e,r)}}function UFt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Mo="year",Qu="quarter",_a="month",Os="week",Ju="date",ma="day",qh="dayofyear",Bl="hours",Ul="minutes",jc="seconds",rd="milliseconds",GZ=[Mo,Qu,_a,Os,Ju,ma,qh,Bl,Ul,jc,rd],jj=GZ.reduce((e,t,n)=>(e[t]=1+n,e),{});function YZ(e){const t=ft(e).slice(),n={};return t.length||Me("Missing time unit."),t.forEach(i=>{Ft(jj,i)?n[i]=1:Me(`Invalid time unit: ${i}.`)}),(n[Os]||n[ma]?1:0)+(n[Qu]||n[_a]||n[Ju]?1:0)+(n[qh]?1:0)>1&&Me(`Incompatible time units: ${e}`),t.sort((i,s)=>jj[i]-jj[s]),t}const zFt={[Mo]:"%Y ",[Qu]:"Q%q ",[_a]:"%b ",[Ju]:"%d ",[Os]:"W%U ",[ma]:"%a ",[qh]:"%j ",[Bl]:"%H:00",[Ul]:"00:%M",[jc]:":%S",[rd]:".%L",[`${Mo}-${_a}`]:"%Y-%m ",[`${Mo}-${_a}-${Ju}`]:"%Y-%m-%d ",[`${Bl}-${Ul}`]:"%H:%M"};function S3e(e,t){const n=_n({},zFt,t),r=YZ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Hv=new Date;function KZ(e){return Hv.setFullYear(e),Hv.setMonth(0),Hv.setDate(1),Hv.setHours(0,0,0,0),Hv}function T3e(e){return A3e(new Date(e))}function C3e(e){return JV(new Date(e))}function A3e(e){return fm.count(KZ(e.getFullYear())-1,e)}function JV(e){return iS.count(KZ(e.getFullYear())-1,e)}function ZV(e){return KZ(e).getDay()}function VFt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function I3e(e){return R3e(new Date(e))}function k3e(e){return eH(new Date(e))}function R3e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return I0.count(t-1,e)}function eH(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return sS.count(t-1,e)}function tH(e){return Hv.setTime(Date.UTC(e,0,1)),Hv.getUTCDay()}function HFt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function N3e(e,t,n,r,i){const s=t||1,o=Yn(e),a=(y,v,b)=>(b=b||y,qFt(n[b],r[b],y===o&&s,v)),u=new Date,l=nd(e),c=l[Mo]?a(Mo):Aa(2012),f=l[_a]?a(_a):l[Qu]?a(Qu):e0,d=l[Os]&&l[ma]?a(ma,1,Os+ma):l[Os]?a(Os,1):l[ma]?a(ma,1):l[Ju]?a(Ju,1):l[qh]?a(qh,1):IS,h=l[Bl]?a(Bl):e0,p=l[Ul]?a(Ul):e0,m=l[jc]?a(jc):e0,g=l[rd]?a(rd):e0;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function qFt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function ix(e,t,n){return t+e*7-(n+6)%7}const WFt={[Mo]:e=>e.getFullYear(),[Qu]:e=>Math.floor(e.getMonth()/3),[_a]:e=>e.getMonth(),[Ju]:e=>e.getDate(),[Bl]:e=>e.getHours(),[Ul]:e=>e.getMinutes(),[jc]:e=>e.getSeconds(),[rd]:e=>e.getMilliseconds(),[qh]:e=>A3e(e),[Os]:e=>JV(e),[Os+ma]:(e,t)=>ix(JV(e),e.getDay(),ZV(t)),[ma]:(e,t)=>ix(1,e.getDay(),ZV(t))},GFt={[Qu]:e=>3*e,[Os]:(e,t)=>ix(e,0,ZV(t))};function P3e(e,t){return N3e(e,t||1,WFt,GFt,VFt)}const YFt={[Mo]:e=>e.getUTCFullYear(),[Qu]:e=>Math.floor(e.getUTCMonth()/3),[_a]:e=>e.getUTCMonth(),[Ju]:e=>e.getUTCDate(),[Bl]:e=>e.getUTCHours(),[Ul]:e=>e.getUTCMinutes(),[jc]:e=>e.getUTCSeconds(),[rd]:e=>e.getUTCMilliseconds(),[qh]:e=>R3e(e),[Os]:e=>eH(e),[ma]:(e,t)=>ix(1,e.getUTCDay(),tH(t)),[Os+ma]:(e,t)=>ix(eH(e),e.getUTCDay(),tH(t))},KFt={[Qu]:e=>3*e,[Os]:(e,t)=>ix(e,0,tH(t))};function O3e(e,t){return N3e(e,t||1,YFt,KFt,HFt)}const XFt={[Mo]:Ph,[Qu]:CA.every(3),[_a]:CA,[Os]:iS,[Ju]:fm,[ma]:fm,[qh]:fm,[Bl]:$6,[Ul]:O6,[jc]:tm,[rd]:PE},QFt={[Mo]:Oh,[Qu]:AA.every(3),[_a]:AA,[Os]:sS,[Ju]:I0,[ma]:I0,[qh]:I0,[Bl]:M6,[Ul]:D6,[jc]:tm,[rd]:PE};function PS(e){return XFt[e]}function OS(e){return QFt[e]}function D3e(e,t,n){return e?e.offset(t,n):void 0}function $3e(e,t,n){return D3e(PS(e),t,n)}function M3e(e,t,n){return D3e(OS(e),t,n)}function L3e(e,t,n,r){return e?e.range(t,n,r):void 0}function F3e(e,t,n,r){return L3e(PS(e),t,n,r)}function j3e(e,t,n,r){return L3e(OS(e),t,n,r)}const AC=1e3,IC=AC*60,kC=IC*60,aF=kC*24,JFt=aF*7,wpe=aF*30,nH=aF*365,B3e=[Mo,_a,Ju,Bl,Ul,jc,rd],RC=B3e.slice(0,-1),NC=RC.slice(0,-1),PC=NC.slice(0,-1),ZFt=PC.slice(0,-1),e5t=[Mo,Os],Epe=[Mo,_a],U3e=[Mo],PT=[[RC,1,AC],[RC,5,5*AC],[RC,15,15*AC],[RC,30,30*AC],[NC,1,IC],[NC,5,5*IC],[NC,15,15*IC],[NC,30,30*IC],[PC,1,kC],[PC,3,3*kC],[PC,6,6*kC],[PC,12,12*kC],[ZFt,1,aF],[e5t,1,JFt],[Epe,1,wpe],[Epe,3,3*wpe],[U3e,1,nH]];function z3e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Fk(t))/n;let i=Zx(a=>a[2]).right(PT,r),s,o;return i===PT.length?(s=U3e,o=Y0(t[0]/nH,t[1]/nH,n)):i?(i=PT[r/PT[i-1][2]<PT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=B3e,o=Math.max(Y0(t[0],t[1],n),1)),{units:s,step:o}}function OC(e){const t={};return n=>t[n]||(t[n]=e(n))}function t5t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=n5t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function n5t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function V3e(e){const t=OC(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=W1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return t5t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=W1(o??",f");const a=Y0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=$Te(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=MTe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=DTe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let rH;H3e();function H3e(){return rH=V3e({format:tS,formatPrefix:AK})}function q3e(e){return V3e(OTe(e))}function O$(e){return arguments.length?rH=q3e(e):rH}function xpe(e,t,n){n=n||{},ht(n)||Me(`Invalid time multi-format specifier: ${n}`);const r=t(jc),i=t(Ul),s=t(Bl),o=t(Ju),a=t(Os),u=t(_a),l=t(Qu),c=t(Mo),f=e(n[rd]||".%L"),d=e(n[jc]||":%S"),h=e(n[Ul]||"%I:%M"),p=e(n[Bl]||"%I %p"),m=e(n[Ju]||n[ma]||"%a %d"),g=e(n[Os]||"%b %d"),y=e(n[_a]||"%B"),v=e(n[Qu]||"%B"),b=e(n[Mo]||"%Y");return _=>(r(_)<_?f:i(_)<_?d:s(_)<_?h:o(_)<_?p:u(_)<_?a(_)<_?m:g:c(_)<_?l(_)<_?y:v:b)(_)}function W3e(e){const t=OC(e.format),n=OC(e.utcFormat);return{timeFormat:r=>dt(r)?t(r):xpe(t,PS,r),utcFormat:r=>dt(r)?n(r):xpe(n,OS,r),timeParse:OC(e.parse),utcParse:OC(e.utcParse)}}let iH;G3e();function G3e(){return iH=W3e({format:UK,parse:YCe,utcFormat:L6,utcParse:KCe})}function Y3e(e){return W3e(VCe(e))}function sI(e){return arguments.length?iH=Y3e(e):iH}const sH=(e,t)=>_n({},e,t);function K3e(e,t){const n=e?q3e(e):O$(),r=t?Y3e(t):sI();return sH(n,r)}function XZ(e,t){const n=arguments.length;return n&&n!==2&&Me("defaultLocale expects either zero or two arguments."),n?sH(O$(e),sI(t)):sH(O$(),sI())}function r5t(){return H3e(),G3e(),XZ()}const i5t=/^(data:|([A-Za-z]+:)?\/\/)/,s5t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,o5t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Spe="file://";function a5t(e,t){return n=>({options:n||{},sanitize:l5t,load:u5t,fileAccess:!!t,file:c5t(t),http:d5t(e)})}async function u5t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function l5t(e,t){t=_n({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=s5t.test(e.replace(o5t,""));(e==null||typeof e!="string"||!a)&&Me("Sanitize failure, invalid URI: "+nt(e));const u=i5t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Spe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Spe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function c5t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):f5t}async function f5t(){Me("No file system access.")}function d5t(e){return e?async function(t,n){const r=_n({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?wn(s[i])?s[i]():s.text():Me(s.status+""+s.statusText)}:h5t}async function h5t(){Me("No HTTP fetch method available.")}const p5t=e=>e!=null&&e===e,m5t=e=>e==="true"||e==="false"||e===!0||e===!1,g5t=e=>!Number.isNaN(Date.parse(e)),X3e=e=>!Number.isNaN(+e)&&!(e instanceof Date),y5t=e=>X3e(e)&&Number.isInteger(+e),oH={boolean:HZ,integer:ga,number:ga,date:qZ,string:WZ,unknown:Ca},JN=[m5t,y5t,X3e,g5t],v5t=["boolean","integer","number","date"];function Q3e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=JN.length,i=JN.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&p5t(u)&&!JN[a](u)&&(i[a]=0,++o,o===JN.length))return"string";return v5t[i.reduce((s,o)=>s===0?o:s,0)-1]}function J3e(e,t){return t.reduce((n,r)=>(n[r]=Q3e(e,r),n),{})}function Tpe(e){const t=function(n,r){const i={delimiter:e};return QZ(n,r?_n(r,i):i)};return t.responseType="text",t}function QZ(e,t){return t.header&&(e=t.header.map(nt).join(t.delimiter)+`
`+e),RTe(t.delimiter).parse(e+"")}QZ.responseType="text";function b5t(e){return typeof Buffer=="function"&&wn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function JZ(e,t){const n=t&&t.property?Lc(t.property):Ca;return ht(e)&&!b5t(e)?_5t(n(e),t):n(JSON.parse(e))}JZ.responseType="json";function _5t(e,t){return!Fe(e)&&g3e(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const w5t={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function Z3e(e,t){let n,r,i,s;return e=JZ(e,t),t&&t.feature?(n=LFt,i=t.feature):t&&t.mesh?(n=jFt,i=t.mesh,s=w5t[t.filter]):Me("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Me("Invalid TopoJSON object: "+i),r&&r.features||[r]}Z3e.responseType="json";const xO={dsv:QZ,csv:Tpe(","),tsv:Tpe("	"),json:JZ,topojson:Z3e};function ZZ(e,t){return arguments.length>1?(xO[e]=t,this):Ft(xO,e)?xO[e]:null}function e$e(e){const t=ZZ(e);return t&&t.responseType||"text"}function t$e(e,t,n,r){t=t||{};const i=ZZ(t.type||"json");return i||Me("Unknown data format type: "+t.type),e=i(e,t),t.parse&&E5t(e,t.parse,n,r),Ft(e,"columns")&&delete e.columns,e}function E5t(e,t,n,r){if(!e.length)return;const i=sI();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=J3e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!oH[p])throw Error("Illegal format pattern: "+h+":"+p);return oH[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const uF=a5t(typeof fetch<"u"&&fetch,null);function lF(e){const t=e||Ca,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function SO(e,t){try{await t(e)}catch(n){e.error(n)}}const n$e=Symbol("vega_id");let x5t=1;function cF(e){return!!(e&&Mt(e))}function Mt(e){return e[n$e]}function r$e(e,t){return e[n$e]=t,e}function _r(e){const t=e===Object(e)?e:{data:e};return Mt(t)?t:r$e(t,x5t++)}function eee(e){return fF(e,_r({}))}function fF(e,t){for(const n in e)t[n]=e[n];return t}function i$e(e,t){return r$e(t,Mt(e))}function Wb(e,t){return e?t?(n,r)=>e(n,r)||Mt(t(n))-Mt(t(r)):(n,r)=>e(n,r)||Mt(n)-Mt(r):null}function s$e(e){return e&&e.constructor===Gb}function Gb(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Gb,insert(a){const u=ft(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=wn(a)?r:t,l=ft(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Aa(l)};return wn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return wn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Mt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Mt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Mt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Mt(m),l[g]?l[g]=1:a.add.push(_r(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Mt(m)]<0&&a.rem.push(m);function y(v,b,_){_?v[b]=_(v):a.encode=b,o||(c[Mt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Mt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Mt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Mt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const TO="_:mod:_";function dF(){Object.defineProperty(this,TO,{writable:!0,value:{}})}dF.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[TO];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Fe(n)?1+n.length:-1),i},modified(e,t){const n=this[TO];if(arguments.length){if(Fe(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[TO]={},this}};let S5t=0;const T5t="pulse",C5t=new dF,A5t=1,I5t=2;function Jr(e,t,n,r){this.id=++S5t,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Cpe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Jr.prototype={targets(){return this._targets||(this._targets=lF(Lk))},set(e){return this.value!==e?(this.value=e,1):0},skip:Cpe(A5t),modified:Cpe(I5t),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new dF,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Jr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===T5t)ft(a).forEach(f=>{f instanceof Jr?f!==this&&(f.targets().add(this),s.push(f)):Me("Pulse parameters must be operator instances.")}),this.source=a;else if(Fe(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||C5t,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function k5t(e,t,n,r){let i=1,s;return e instanceof Jr?s=e:e&&e.prototype instanceof Jr?s=new e:wn(e)?s=new Jr(null,e):(i=0,s=new Jr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function R5t(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let N5t=0;function hF(e,t,n){this.id=++N5t,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Og(e,t,n){return new hF(e,t,n)}hF.prototype={_filter:Fc,_apply:Ca,targets(){return this._targets||(this._targets=lF(Lk))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Og(e);return this.targets().add(t),t},apply(e){const t=Og(null,e);return this.targets().add(t),t},merge(){const e=Og();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Og();return this.targets().add(Og(null,null,zZ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Og(null,null,()=>n=!0)),t.targets().add(Og(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Fc,this._targets=null}};function P5t(e,t,n,r){const i=this,s=Og(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=ft(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function O5t(e,t){const n=this.locale();return t$e(e,t,n.timeParse,n.utcParse)}function D5t(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function $5t(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:e$e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function M5t(e,t,n){const r=this,i=r._pending||L5t(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Fc).insert(s.data||[])),i.done(),s}function L5t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const F5t={skip:!0};function j5t(e,t,n,r,i){return(e instanceof Jr?U5t:B5t)(this,e,t,n,r,i),this}function B5t(e,t,n,r,i,s){const o=_n({},s,F5t);let a,u;wn(n)||(n=Aa(n)),r===void 0?a=l=>e.touch(n(l)):wn(r)?(u=new Jr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;s$e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function U5t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Jr(null,z5t(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function z5t(e,t){return t=wn(t)?t:Aa(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function V5t(e){e.rank=++this._rank}function H5t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Me("Cycle detected in dataflow graph.")}const D$={},Bd=1,Ug=2,Mp=4,q5t=Bd|Ug,Ape=Bd|Mp,I_=Bd|Ug|Mp,Ipe=8,OT=16,kpe=32,Rpe=64;function L0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Bj(e,t){const n=[];return Bg(e,t,r=>n.push(r)),n}function Npe(e,t){const n={};return e.visit(t,r=>{n[Mt(r)]=1}),r=>n[Mt(r)]?null:r}function ZN(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}L0.prototype={StopPropagation:D$,ADD:Bd,REM:Ug,MOD:Mp,ADD_REM:q5t,ADD_MOD:Ape,ALL:I_,REFLOW:Ipe,SOURCE:OT,NO_SOURCE:kpe,NO_FIELDS:Rpe,fork(e){return new L0(this.dataflow).init(this,e)},clone(){const e=this.fork(I_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(I_|OT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new L0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Rpe)&&(n.fields=e.fields),t&Bd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Ug?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Mp?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&kpe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||I_;return t&Bd&&this.add.length||t&Ug&&this.rem.length||t&Mp&&this.mod.length},reflow(e){if(e)return this.fork(I_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Mp,Npe(this,Bd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Fe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Fe(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Bd&&(n.addF=ZN(n.addF,t)),e&Ug&&(n.remF=ZN(n.remF,t)),e&Mp&&(n.modF=ZN(n.modF,t)),e&OT&&(n.srcF=ZN(n.srcF,t)),n},materialize(e){e=e||I_;const t=this;return e&Bd&&t.addF&&(t.add=Bj(t.add,t.addF),t.addF=null),e&Ug&&t.remF&&(t.rem=Bj(t.rem,t.remF),t.remF=null),e&Mp&&t.modF&&(t.mod=Bj(t.mod,t.modF),t.modF=null),e&OT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&OT)return Bg(n.source,n.srcF,r),n;e&Bd&&Bg(n.add,n.addF,r),e&Ug&&Bg(n.rem,n.remF,r),e&Mp&&Bg(n.mod,n.modF,r);const i=n.source;if(e&Ipe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Bg(i,Npe(n,Ape),r):Bg(i,n.srcF,r))}return n}};function tee(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}at(tee,L0,{fork(e){const t=new L0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Fe(e)?e.some(r=>n[r]):n[e]:0},filter(){Me("MultiPulse does not support filtering.")},materialize(){Me("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function W5t(e,t,n){const r=this,i=[];if(r._pulse)return o$e(r);if(r._pending&&await r._pending,t&&await SO(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new L0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=lF(Lk);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=D$),u!==D$&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await SO(r,c[f].callback)}return n&&await SO(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function G5t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function Y5t(e,t,n){return this._pulse?o$e(this):(this.evaluate(e,t,n),this)}function K5t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function o$e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function X5t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Q5t(e,t){const n=e.source,r=this._clock;return n&&Fe(n)?new tee(this,r,n.map(i=>i.pulse),t):this._input[e.id]||J5t(this._pulse,n&&n.pulse)}function J5t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==D$&&(e.source=t.source),e)}const nee={skip:!1,force:!1};function Z5t(e,t){const n=t||nee;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function e8t(e,t,n){const r=n||nee;return(e.set(t)||r.force)&&this.touch(e,r),this}function t8t(e,t,n){this.touch(e,n||nee);const r=new L0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function n8t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),a$e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,r8t(t,0,e)):r=n,r}}}function a$e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function r8t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,a$e(e,r,t,n)}function rE(){this.logger(LZ()),this.logLevel($Z),this._clock=0,this._rank=0,this._locale=XZ();try{this._loader=uF()}catch{}this._touched=lF(Lk),this._input={},this._pulse=null,this._heap=n8t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function DT(e){return function(){return this._log[e].apply(this,arguments)}}rE.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:DT("error"),warn:DT("warn"),info:DT("info"),debug:DT("debug"),logLevel:DT("level"),cleanThreshold:1e4,add:k5t,connect:R5t,rank:V5t,rerank:H5t,pulse:t8t,touch:Z5t,update:e8t,changeset:Gb,ingest:D5t,parse:O5t,preload:M5t,request:$5t,events:P5t,on:j5t,evaluate:W5t,run:Y5t,runAsync:G5t,runAfter:K5t,_enqueue:X5t,_getPulse:Q5t};function Pe(e,t){Jr.call(this,e,null,t)}at(Pe,Jr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const sx={};function u$e(e){const t=l$e(e);return t&&t.Definition||null}function l$e(e){return e=e&&e.toLowerCase(),Ft(sx,e)?sx[e]:null}function*c$e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function ree(e,t,n){const r=Float64Array.from(c$e(e,n));return r.sort(lm),t.map(i=>OSe(r,i))}function iee(e,t){return ree(e,[.25,.5,.75],t)}function see(e,t){const n=e.length,r=rlt(e,t),i=iee(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function f$e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Bc=Math.random;function i8t(e){Bc=e}function d$e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(c$e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Bc()*s)];c[l]=a/s}return c.sort(lm),[MU(c,n/2),MU(c,1-n/2)]}function h$e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?s8t(s,t+t/4):s}function s8t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function o8t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function a8t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Bc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const p$e=Math.sqrt(2*Math.PI),u8t=Math.SQRT2;let $T=NaN;function pF(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if($T===$T)n=$T,$T=NaN;else{do n=Bc()*2-1,r=Bc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,$T=r*s}return e+n*t}function oee(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*p$e)}function mF(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function gF(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*u8t*l8t(2*e-1)}function l8t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function aee(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>pF(n,r),pdf:s=>oee(s,n,r),cdf:s=>mF(s,n,r),icdf:s=>gF(s,n,r)};return i.mean(e).stdev(t)}function uee(e,t){const n=aee();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=see(e)),i):t},sample(){return e[~~(Bc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function lee(e,t){return e=e||0,t=t??1,Math.exp(e+pF()*t)}function cee(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*p$e*e)}function fee(e,t,n){return mF(Math.log(e),t,n)}function dee(e,t,n){return Math.exp(gF(e,t,n))}function m$e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>lee(n,r),pdf:s=>cee(s,n,r),cdf:s=>fee(s,n,r),icdf:s=>dee(s,n,r)};return i.mean(e).stdev(t)}function g$e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Bc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function hee(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Bc()}function pee(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function mee(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function gee(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function y$e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>hee(n,r),pdf:s=>pee(s,n,r),cdf:s=>mee(s,n,r),icdf:s=>gee(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function yee(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function jk(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function yF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function Bk(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function DS(e,t,n,r,i){let s=0,o=0;return Bk(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function vee(e,t,n){let r=0,i=0,s=0,o=0,a=0;Bk(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=jk(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:DS(e,t,n,i,l)}}function v$e(e,t,n){let r=0,i=0,s=0,o=0,a=0;Bk(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=jk(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:DS(e,t,n,i,l)}}function b$e(e,t,n){const[r,i,s,o]=yF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;Bk(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=jk(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:DS(e,t,n,o,y)}}function _$e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;Bk(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=jk(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:DS(e,t,n,a,c)}}function bee(e,t,n){const[r,i,s,o]=yF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,_=(f*y-d*l)/v,x=-b*u,S=E=>(E=E-s,b*E*E+_*E+x+o);return{coef:[x-_*s+b*s*s+o,_-2*b*s,b],predict:S,rSquared:DS(e,t,n,o,S)}}function w$e(e,t,n,r){if(r===0)return yee(e,t,n);if(r===1)return vee(e,t,n);if(r===2)return bee(e,t,n);const[i,s,o,a]=yF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=f8t(c),v=b=>{b-=o;let _=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)_+=y[d]*Math.pow(b,d);return _};return{coef:c8t(f,y,-o,a),predict:v,rSquared:DS(e,t,n,a,v)}}function c8t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function f8t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Ppe=2,Ope=1e-12;function E$e(e,t,n,r){const[i,s,o,a]=yF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Ppe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],_=y-i[v]>i[b]-y?v:b;let x=0,S=0,E=0,T=0,A=0;const k=1/Math.abs(i[_]-y||1);for(let P=v;P<=b;++P){const O=i[P],M=s[P],j=d8t(Math.abs(y-O)*k)*d[P],B=O*j;x+=j,S+=B,E+=M*j,T+=M*B,A+=O*B}const[R,$]=jk(S/x,E/x,T/x,A/x);c[g]=R+$*y,f[g]=Math.abs(s[g]-c[g]),h8t(i,g+1,p)}if(h===Ppe)break;const m=$Se(f);if(Math.abs(m)<Ope)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?Ope:(v=1-y*y)*v}return p8t(i,c,o,a)}function d8t(e){return(e=1-e*e*e)*e*e}function h8t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function p8t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const m8t=.5*Math.PI/180;function vF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=g8t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&y8t(f,m,d,h,p)>m8t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function g8t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function y8t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function v8t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function aH(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:v8t(e)}function x$e(e,t,n){return n||e+(t?"_"+t:"")}const Uj=()=>{},b8t={init:Uj,add:Uj,rem:Uj,idx:0},oI={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Uk=Object.keys(oI).filter(e=>e!=="__count__");function _8t(e,t){return(n,r)=>_n({name:e,aggregate_param:r,out:n||e},b8t,t)}[...Uk,"__count__"].forEach(e=>{oI[e]=_8t(e,oI[e])});function S$e(e,t,n){return oI[e](n,t)}function T$e(e,t){return e.idx-t.idx}function w8t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=oI[i]())})};return e.forEach(n),Object.values(t).sort(T$e)}function E8t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function x8t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function S8t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function T8t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function C$e(e,t){const n=t||Ca,r=w8t(e),i=e.slice().sort(T$e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=E8t,s.prototype.add=x8t,s.prototype.rem=S8t,s.prototype.set=T8t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function _ee(e){this._key=e?Lc(e):Mt,this.reset()}const Wo=_ee.prototype;Wo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Wo.add=function(e){this._add.push(e)};Wo.rem=function(e){this._rem.push(e)};Wo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Wo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Ft(n,s)||(n[s]=1,++i);return i};Wo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=p3e(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Wo.argmin=function(e){return this.extent(e)[0]||{}};Wo.argmax=function(e){return this.extent(e)[1]||{}};Wo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Wo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Wo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=iee(this.values(),e),this._get=e),this._q};Wo.q1=function(e){return this.quartile(e)[0]};Wo.q2=function(e){return this.quartile(e)[1]};Wo.q3=function(e){return this.quartile(e)[2]};Wo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=d$e(this.values(),1e3,.05,e),this._get=e),this._ci};Wo.ci0=function(e){return this.ci(e)[0]};Wo.ci1=function(e){return this.ci(e)[1]};function hy(e){Pe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}hy.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Uk},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};at(hy,Pe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=ft(ba(v)),_=b.length;let x=0,S;for(;x<_;++x)r[S=b[x]]||(r[S]=1,t.push(S))}this._dims=ft(e.groupby),this._dnames=this._dims.map(v=>{const b=Ji(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:aH(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Me("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Me("Null aggregate field specified."),m=Ji(f),g=x$e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(S$e(d,h,g))}return this._measures=this._measures.map(v=>C$e(v,v.field)),Object.create(null)},cellkey:aH(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new _ee),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?i$e(t.tuple,s):_r(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const C8t=1e-14;function wee(e){Pe.call(this,null,e)}wee.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};at(wee,Pe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(ba(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=f$e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=ga(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(C8t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=il(u,ba(t),e.name||"bin_"+Ji(t))}});function A$e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?_3e(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Eee(e){Pe.call(this,[],e)}Eee.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};at(Eee,Pe,{transform(e,t){const n=t.fork(t.ALL),r=A$e(Mt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Wb(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function I$e(e){Jr.call(this,null,A8t,e)}at(I$e,Jr);function A8t(e){return this.value&&!e.modified()?this.value:UZ(e.fields,e.orders)}function xee(e){Pe.call(this,null,e)}xee.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function I8t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}at(xee,Pe,{transform(e,t){const n=f=>d=>{for(var h=I8t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=_r({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function See(e){Pe.call(this,null,e)}See.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};at(See,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=k8t(a,i,s,e.filter||Fc)):n.mod=a,n.source=this.value,n.modifies(r)}});function k8t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(_r(s)),s={},s[t]=l);return i}const Dpe={kde:uee,mixture:g$e,normal:aee,lognormal:m$e,uniform:y$e},R8t="distributions",$pe="function",N8t="field";function k$e(e,t){const n=e[$pe];Ft(Dpe,n)||Me("Unknown distribution function: "+n);const r=Dpe[n]();for(const i in e)i===N8t?r.data((e.from||t()).map(e[i])):i===R8t?r[i](e[i].map(s=>k$e(s,t))):typeof r[i]===$pe&&r[i](e[i]);return r}function Tee(e){Pe.call(this,null,e)}const R$e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],P8t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:R$e},{name:"weights",type:"number",array:!0}]};Tee.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:R$e.concat(P8t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};at(Tee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=k$e(e.distribution,O8t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Me("Invalid density method: "+o),!e.extent&&!r.data&&Me("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Hh(r.data()),l=vF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],_r(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function O8t(e){return()=>e.materialize(e.SOURCE).source}function N$e(e,t){return e?e.map((n,r)=>t[r]||Ji(n)):null}function Cee(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const P$e="bin";function Aee(e){Pe.call(this,null,e)}Aee.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:P$e}]};const D8t=(e,t)=>Fk(Hh(e,t))/30;at(Aee,Pe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Cee(t.source,e.groupby,Ca),i=e.smooth||!1,s=e.field,o=e.step||D8t(n,s),a=Wb((p,m)=>s(p)-s(m)),u=e.as||P$e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of h$e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function O$e(e){Jr.call(this,null,$8t,e),this.modified(!0)}at(O$e,Jr);function $8t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:il(n=>t(n,e),ba(t),Ji(t))}function Iee(e){Pe.call(this,[void 0,void 0],e)}Iee.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};at(Iee,Pe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=ga(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Ji(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function kee(e,t){Jr.call(this,e),this.parent=t,this.count=0}at(kee,Jr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function bF(e){Pe.call(this,{},e),this._keys=NS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}at(bF,Pe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Ft(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new kee(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Mt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Mt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Mt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Mt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Mt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function D$e(e){Jr.call(this,null,M8t,e)}at(D$e,Jr);function M8t(e){return this.value&&!e.modified()?this.value:Fe(e.name)?ft(e.name).map(t=>Lc(t)):Lc(e.name,e.as)}function Ree(e){Pe.call(this,NS(),e)}Ree.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};at(Ree,Pe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Mt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Mt(f),1)});function c(f){const d=Mt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Nee(e){Pe.call(this,[],e)}Nee.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};at(Nee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=N$e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=eee(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Pee(e){Pe.call(this,[],e)}Pee.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};at(Pee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ji),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=eee(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function Oee(e){Pe.call(this,null,e)}Oee.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};at(Oee,Pe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function $$e(e){Pe.call(this,[],e)}at($$e,Pe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=_r(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const eP={value:"value",median:$Se,mean:DSe,min:$U,max:Ac},L8t=[];function Dee(e){Pe.call(this,[],e)}Dee.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function F8t(e){var t=e.method||eP.value,n;if(eP[t]==null)Me("Unrecognized imputation method: "+t);else return t===eP.value?(n=e.value!==void 0?e.value:0,()=>n):eP[t]}function j8t(e){const t=e.field;return n=>n?t(n):NaN}at(Dee,Pe,{transform(e,t){var n=t.fork(t.ALL),r=F8t(e),i=j8t(e),s=Ji(e.field),o=Ji(e.key),a=(e.groupby||[]).map(Ji),u=B8t(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,_,x;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],x={_impute:!0},y=0,_=p.length;y<_;++y)x[a[y]]=p[y];x[o]=m,x[s]=Number.isNaN(h)?h=r(d,i):h,l.push(_r(x))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function B8t(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):L8t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function $ee(e){hy.call(this,e)}$ee.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Uk},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};at($ee,hy,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{_n(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Mee(e){Pe.call(this,null,e)}Mee.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};at(Mee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Cee(r,e.groupby,e.field),s=(e.groupby||[]).map(Ji),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Me("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Hh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=uee(h,o)[a],m=e.counts?h.length:1,g=c||Hh(h);vF(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(_r(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function M$e(e){Jr.call(this,null,U8t,e)}at(M$e,Jr);function U8t(e){return this.value&&!e.modified()?this.value:VZ(e.fields,e.flat)}function L$e(e){Pe.call(this,[],e),this._pending=null}at(L$e,Pe,{transform(e,t){const n=t.dataflow;return this._pending?zj(this,t,this._pending):z8t(e)?t.StopPropagation:e.values?zj(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ft(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>zj(this,t,ft(r.data)))}});function z8t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function zj(e,t,n){n.forEach(_r);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Lee(e){Pe.call(this,{},e)}Lee.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};at(Lee,Pe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Me('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Me('The "as" parameter has too few output field names.'),c=c||i.map(Ji),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Me("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function F$e(e){Jr.call(this,null,V8t,e)}at(F$e,Jr);function V8t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function j$e(e){Jr.call(this,null,H8t,e)}at(j$e,Jr);function H8t(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function B$e(e){Pe.call(this,null,e)}at(B$e,Pe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Fee(e){hy.call(this,e)}Fee.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Uk,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};at(Fee,hy,{_transform:hy.prototype.transform,transform(e,t){return this._transform(q8t(e,t),t)}});function q8t(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=ba(n).concat(ba(r)),o=G8t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>W8t(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function W8t(e,t,n,r){return il(i=>t(i)===e?n(i):NaN,r,e+"")}function G8t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(oF),t?i.slice(0,t):i}function U$e(e){bF.call(this,e)}at(U$e,bF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Mt(s),n,t,s);return(e.modified("field")||r&&t.modified(ba(r)))&&Me("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(_r(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function jee(e){Pe.call(this,null,e)}jee.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};at(jee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=N$e(e.fields,e.as||[]),s=r?(a,u)=>Y8t(a,u,r,i):fF;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Mt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,_r({}));o[Mt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Mt(a)]))}),n}});function Y8t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function z$e(e){Pe.call(this,null,e)}at(z$e,Pe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Bee(e){Pe.call(this,null,e)}Bee.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const K8t=1e-14;at(Bee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Cee(i,e.groupby,e.field),o=(e.groupby||[]).map(Ji),a=[],u=e.step||.01,l=e.probs||Pu(u/2,1-K8t,u),c=l.length;return s.forEach(f=>{const d=ree(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(_r(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function V$e(e){Pe.call(this,null,e)}at(V$e,Pe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Mt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=eee(i);r[Mt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Mt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Uee(e){Pe.call(this,[],e),this.count=0}Uee.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};at(Uee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Mt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Bc()),d<o.length&&d>=u&&(f=o[d],s[Mt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Mt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Mt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Mt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Mt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Mt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Mt(c)])),this.count=a,this.value=n.source=o,n}});function zee(e){Pe.call(this,null,e)}zee.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};at(zee,Pe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Pu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,_r(s)}),n.add=t.add.concat(this.value),n}});function H$e(e){Pe.call(this,null,e),this.modified(!0)}at(H$e,Pe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Vee(e){Pe.call(this,null,e)}const q$e=["unit0","unit1"];Vee.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:GZ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:q$e}]};at(Vee,Pe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?OS:PS)(s.unit).offset,a=e.as||q$e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ba(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:z3e({extent:e.extent||Hh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=YZ(r),o=this.value||{},a=(n?O3e:P3e)(s,i);return a.unit=Yn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function W$e(e){Pe.call(this,NS(),e)}at(W$e,Pe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function G$e(e){Pe.call(this,null,e)}at(G$e,Pe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Wb(e.sort)):t.source).map(e.field))}});function X8t(e,t,n,r){const i=aI[e](t,n);return{init:i.init||e0,update:function(s,o){o[r]=i.next(s)}}}const aI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=aI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Me("ntile num must be greater than zero.");const n=aI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Me("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Q8t(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Q8t(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const J8t=Object.keys(aI);function Y$e(e){const t=ft(e.ops),n=ft(e.fields),r=ft(e.params),i=ft(e.aggregate_params),s=ft(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){ft(ba(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Ji(g),_=x$e(p,b,s[m]);if(h(g),o.push(_),Ft(aI,p))a.push(X8t(p,g,y,_));else{if(g==null&&p!=="count"&&Me("Null aggregate field specified."),p==="count"){c.push(_);return}d=!1;let x=l[b];x||(x=l[b]=[],x.field=g,f.push(x)),x.push(S$e(p,v,_))}}),(c.length||f.length)&&(this.cell=Z8t(f,c,d)),this.inputs=Object.keys(u)}const K$e=Y$e.prototype;K$e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};K$e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function Z8t(e,t,n){e=e.map(u=>C$e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new _ee;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Hee(e){Pe.call(this,{},e),this._mlen=0,this._mods=[]}Hee.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:J8t.concat(Uk)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};at(Hee,Pe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Wb(e.sort),i=aH(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new Y$e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)e9t(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=A$e(Mt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function e9t(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?Zx(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Aa(-1)};t.init();for(let f=0;f<u;++f)t9t(c,o,f,u),s&&n9t(c,l),t.update(c,a[f])}function t9t(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function n9t(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const r9t=Object.freeze(Object.defineProperty({__proto__:null,aggregate:hy,bin:wee,collect:Eee,compare:I$e,countpattern:xee,cross:See,density:Tee,dotbin:Aee,expression:O$e,extent:Iee,facet:bF,field:D$e,filter:Ree,flatten:Nee,fold:Pee,formula:Oee,generate:$$e,impute:Dee,joinaggregate:$ee,kde:Mee,key:M$e,load:L$e,lookup:Lee,multiextent:F$e,multivalues:j$e,params:B$e,pivot:Fee,prefacet:U$e,project:jee,proxy:z$e,quantile:Bee,relay:V$e,sample:Uee,sequence:zee,sieve:H$e,subflow:kee,timeunit:Vee,tupleindex:W$e,values:G$e,window:Hee},Symbol.toStringTag,{value:"Module"}));function F0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const i9t=()=>typeof Image<"u"?Image:null;function qee(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const s9t="identity",ox="linear",Hm="log",zk="pow",Vk="sqrt",_F="symlog",ob="time",ab="utc",Sh="sequential",$S="diverging",ax="quantile",wF="quantize",EF="threshold",Wee="ordinal",uH="point",X$e="band",Gee="bin-ordinal",zs="continuous",Hk="discrete",qk="discretizing",rf="interpolating",Yee="temporal";function o9t(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function a9t(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Kee(){const e=rS().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=qee(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Pu(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,G0(h,m)-1),v=m===g?y:G0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Kee().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function Q$e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Q$e(t())},e}function u9t(){return Q$e(Kee().paddingInner(1))}var l9t=Array.prototype.map;function c9t(e){return l9t.call(e,ga)}const f9t=Array.prototype.slice;function J$e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(G0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=c9t(r),n):e.slice()},n.range=function(r){return arguments.length?(t=f9t.call(r),n):t.slice()},n.tickFormat=function(r,i){return OCe(e[0],Yn(e),r??10,i)},n.copy=function(){return J$e().domain(n.domain()).range(n.range())},n}const $$=new Map,Z$e=Symbol("vega_scale");function eMe(e){return e[Z$e]=!0,e}function d9t(e){return e&&e[Z$e]===!0}function h9t(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?o9t(s):s.invertExtent?a9t(s):void 0),s.type=e,eMe(s)};return r.metadata=nd(ft(n)),r}function pr(e,t,n){return arguments.length>1?($$.set(e,h9t(e,t,n)),this):tMe(e)?$$.get(e):void 0}pr(s9t,DCe);pr(ox,Nh,zs);pr(Hm,MCe,[zs,Hm]);pr(zk,jK,zs);pr(Vk,Bgt,zs);pr(_F,LCe,zs);pr(ob,XCe,[zs,Yee]);pr(ab,tyt,[zs,Yee]);pr(Sh,VK,[zs,rf]);pr(`${Sh}-${ox}`,VK,[zs,rf]);pr(`${Sh}-${Hm}`,QCe,[zs,rf,Hm]);pr(`${Sh}-${zk}`,HK,[zs,rf]);pr(`${Sh}-${Vk}`,nyt,[zs,rf]);pr(`${Sh}-${_F}`,JCe,[zs,rf]);pr(`${$S}-${ox}`,ZCe,[zs,rf]);pr(`${$S}-${Hm}`,e2e,[zs,rf,Hm]);pr(`${$S}-${zk}`,qK,[zs,rf]);pr(`${$S}-${Vk}`,ryt,[zs,rf]);pr(`${$S}-${_F}`,t2e,[zs,rf]);pr(ax,FCe,[qk,ax]);pr(wF,jCe,qk);pr(EF,BCe,qk);pr(Gee,J$e,[Hk,qk]);pr(Wee,rS,Hk);pr(X$e,Kee,Hk);pr(uH,u9t,Hk);function tMe(e){return $$.has(e)}function Yb(e,t){const n=$$.get(e);return n&&n.metadata[t]}function Xee(e){return Yb(e,zs)}function ux(e){return Yb(e,Hk)}function lH(e){return Yb(e,qk)}function nMe(e){return Yb(e,Hm)}function p9t(e){return Yb(e,Yee)}function rMe(e){return Yb(e,rf)}function iMe(e){return Yb(e,ax)}const m9t=["clamp","base","constant","exponent"];function sMe(e,t){const n=t[0],r=Yn(t)-n;return function(i){return e(n+i*r)}}function xF(e,t,n){return yK(Qee(t||"rgb",n),e)}function oMe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function aMe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Aa(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=pr(s)().domain([t,n]).range([0,1]),m9t.forEach(a=>e[a]?o[a](e[a]()):0),o)}function Qee(e,t){const n=Oft[g9t(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function g9t(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const y9t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},v9t={accent:syt,category10:iyt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:oyt,observable10:ayt,paired:uyt,pastel1:lyt,pastel2:cyt,set1:fyt,set2:dyt,set3:hyt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function uMe(e){if(Fe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function lMe(e,t){for(const n in e)Jee(n,t(e[n]))}const Mpe={};lMe(v9t,uMe);lMe(y9t,e=>xF(uMe(e)));function Jee(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Mpe[e]=t,this):Mpe[e]}const CO="symbol",b9t="discrete",_9t="gradient",w9t=e=>Fe(e)?e.map(t=>String(t)):String(e),E9t=(e,t)=>e[1]-t[1],x9t=(e,t)=>t[1]-e[1];function Zee(e,t,n){let r;return ar(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Fk(e.domain())/n||1)+1))),ht(t)&&(r=t.step,t=t.interval),dt(t)&&(t=e.type===ob?PS(t):e.type==ab?OS(t):Me("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function cMe(e,t,n){let r=e.range(),i=r[0],s=Yn(r),o=E9t;if(i>s&&(r=s,s=i,i=r,o=x9t),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Yn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function ete(e,t){return e.bins?cMe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function fMe(e,t,n,r,i,s){const o=t.type;let a=w9t;if(o===ob||i===ob)a=e.timeFormat(r);else if(o===ab||i===ab)a=e.utcFormat(r);else if(nMe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=dMe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function dMe(e,t,n){const r=ete(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const cH={[ax]:"quantiles",[wF]:"thresholds",[EF]:"domain"},hMe={[ax]:"quantiles",[wF]:"domain"};function pMe(e,t){return e.bins?C9t(e.bins):e.type===Hm?dMe(e,t,!0):cH[e.type]?T9t(e[cH[e.type]]()):ete(e,t)}function S9t(e,t,n){const r=t[hMe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function T9t(e){const t=[-1/0].concat(e);return t.max=1/0,t}function C9t(e){const t=e.slice(0,-1);return t.max=Yn(e),t}const A9t=e=>cH[e.type]||e.bins;function mMe(e,t,n,r,i,s,o){const a=hMe[t.type]&&s!==ob&&s!==ab?S9t(e,t,i):fMe(e,t,n,i,s,o);return r===CO&&A9t(t)?I9t(a):r===b9t?k9t(a):R9t(a)}const I9t=e=>(t,n,r)=>{const i=Lpe(r[n+1],Lpe(r.max,1/0)),s=Fpe(t,e),o=Fpe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Lpe=(e,t)=>e??t,k9t=e=>(t,n)=>n?e(t):null,R9t=e=>t=>e(t),Fpe=(e,t)=>Number.isFinite(e)?t(e):null;function N9t(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Yn(t),s=i-r;if(e.type===EF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function P9t(e,t,n,r){const i=r||t.type;return dt(n)&&p9t(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===ob?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===ab?e.utcFormat("%A, %d %B %Y, %X UTC"):mMe(e,t,5,null,n,r,!0)}function gMe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=P9t(e,t,n.format,n.formatType);if(lH(t.type)){const s=pMe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(ux(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Yn(s))}`}}let yMe=0;function O9t(){yMe=0}const M$="p_";function tte(e){return e&&e.gradient}function vMe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?M$:"";return i||(i=e.id="gradient_"+yMe++,r==="radial"?(e.x1=Ad(e.x1,.5),e.y1=Ad(e.y1,.5),e.r1=Ad(e.r1,0),e.x2=Ad(e.x2,.5),e.y2=Ad(e.y2,.5),e.r2=Ad(e.r2,.5),s=M$):(e.x1=Ad(e.x1,0),e.y1=Ad(e.y1,0),e.x2=Ad(e.x2,1),e.y2=Ad(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Ad(e,t){return e??t}function bMe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const jpe={basis:{curve:wz},"basis-closed":{curve:Tyt},"basis-open":{curve:Cyt},bundle:{curve:Ayt,tension:"beta",value:.85},cardinal:{curve:Iyt,tension:"tension",value:0},"cardinal-open":{curve:Ryt,tension:"tension",value:0},"cardinal-closed":{curve:kyt,tension:"tension",value:0},"catmull-rom":{curve:Nyt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Pyt,tension:"alpha",value:.5},"catmull-rom-open":{curve:Oyt,tension:"alpha",value:.5},linear:{curve:WK},"linear-closed":{curve:Dyt},monotone:{horizontal:Myt,vertical:$yt},natural:{curve:Lyt},step:{curve:Fyt},"step-after":{curve:Byt},"step-before":{curve:jyt}};function nte(e,t,n){var r=Ft(jpe,e)&&jpe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const D9t={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},$9t=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,M9t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,L9t=/^((\s+,?\s*)|(,\s*))/,F9t=/^[01]/;function lx(e){const t=[];return(e.match($9t)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=D9t[s],a=j9t(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function j9t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?F9t:M9t,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(L9t);u!==null&&(i+=u[0].length)}return r}const py=Math.PI/180,B9t=1e-14,qv=Math.PI/2,ih=Math.PI*2,k_=Math.sqrt(3)/2;var Vj={},Hj={},_Me=[].join;function U9t(e,t,n,r,i,s,o,a,u){const l=_Me.call(arguments);if(Vj[l])return Vj[l];const c=o*py,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,_=g*a+y*u,x=v*a+b*u,S=g*e+y*t,E=v*e+b*t;let A=1/((S-_)*(S-_)+(E-x)*(E-x))-.25;A<0&&(A=0);let k=Math.sqrt(A);s==i&&(k=-k);const R=.5*(_+S)-k*(E-x),$=.5*(x+E)+k*(S-_),P=Math.atan2(x-$,_-R);let M=Math.atan2(E-$,S-R)-P;M<0&&s===1?M+=ih:M>0&&s===0&&(M-=ih);const j=Math.ceil(Math.abs(M/(qv+.001))),B=[];for(let U=0;U<j;++U){const V=P+U*M/j,D=P+(U+1)*M/j;B[U]=[R,$,V,D,n,r,f,d]}return Vj[l]=B}function z9t(e){const t=_Me.call(e);if(Hj[t])return Hj[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),_=8/3*b*b/Math.sin(v),x=n+p-_*m,S=r+m+_*p,E=n+g,T=r+y,A=E+_*y,k=T-_*g;return Hj[t]=[c*x+f*S,d*x+h*S,c*A+f*k,d*A+h*k,c*E+f*T,d*E+h*T]}const nc=["l",0,0,0,0,0,0,0];function V9t(e,t,n){const r=nc[0]=e[0];if(r==="a"||r==="A")nc[1]=t*e[1],nc[2]=n*e[2],nc[3]=e[3],nc[4]=e[4],nc[5]=e[5],nc[6]=t*e[6],nc[7]=n*e[7];else if(r==="h"||r==="H")nc[1]=t*e[1];else if(r==="v"||r==="V")nc[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)nc[i]=(i%2==1?t:n)*e[i];return nc}function uI(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=V9t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Bpe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Bpe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function Bpe(e,t,n,r){const i=U9t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=z9t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Upe=.5773502691896257,zpe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,ih)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=k_*n,i=r-n*Upe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=k_*n,i=r-n*Upe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=k_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=k_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=k_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=k_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function wMe(e){return Ft(zpe,e)?zpe[e]:H9t(e)}var qj={};function H9t(e){if(!Ft(qj,e)){const t=lx(e);qj[e]={draw:function(n,r){uI(n,t,0,0,Math.sqrt(r)/2)}}}return qj[e]}const Ag=.448084975506;function q9t(e){return e.x}function W9t(e){return e.y}function G9t(e){return e.width}function Y9t(e){return e.height}function Ap(e){return typeof e=="function"?e:()=>+e}function tP(e,t,n){return Math.max(t,Math.min(e,n))}function EMe(){var e=q9t,t=W9t,n=G9t,r=Y9t,i=Ap(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=tP(+i.call(this,c),0,v),_=tP(+s.call(this,c),0,v),x=tP(+o.call(this,c),0,v),S=tP(+a.call(this,c),0,v);if(u||(u=h=C6()),b<=0&&_<=0&&x<=0&&S<=0)u.rect(p,m,g,y);else{var E=p+g,T=m+y;u.moveTo(p+b,m),u.lineTo(E-_,m),u.bezierCurveTo(E-Ag*_,m,E,m+Ag*_,E,m+_),u.lineTo(E,T-S),u.bezierCurveTo(E,T-Ag*S,E-Ag*S,T,E-S,T),u.lineTo(p+x,T),u.bezierCurveTo(p+Ag*x,T,p,T-Ag*x,p,T-x),u.lineTo(p,m+b),u.bezierCurveTo(p,m+Ag*b,p+Ag*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Ap(c),l):e},l.y=function(c){return arguments.length?(t=Ap(c),l):t},l.width=function(c){return arguments.length?(n=Ap(c),l):n},l.height=function(c){return arguments.length?(r=Ap(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Ap(c),s=f!=null?Ap(f):i,a=d!=null?Ap(d):i,o=h!=null?Ap(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function xMe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,_=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,_-Math.PI,_),i.lineTo(o+v,a+b),i.arc(o,a,u,_,_+Math.PI)}else i.arc(f,d,p,0,ih);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=C6()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function Wk(e,t){return e??t}const Gk=e=>e.x||0,Yk=e=>e.y||0,K9t=e=>e.width||0,X9t=e=>e.height||0,Q9t=e=>(e.x||0)+(e.width||0),J9t=e=>(e.y||0)+(e.height||0),Z9t=e=>e.startAngle||0,ejt=e=>e.endAngle||0,tjt=e=>e.padAngle||0,njt=e=>e.innerRadius||0,rjt=e=>e.outerRadius||0,ijt=e=>e.cornerRadius||0,sjt=e=>Wk(e.cornerRadiusTopLeft,e.cornerRadius)||0,ojt=e=>Wk(e.cornerRadiusTopRight,e.cornerRadius)||0,ajt=e=>Wk(e.cornerRadiusBottomRight,e.cornerRadius)||0,ujt=e=>Wk(e.cornerRadiusBottomLeft,e.cornerRadius)||0,ljt=e=>Wk(e.size,64),cjt=e=>e.size||1,SF=e=>e.defined!==!1,fjt=e=>wMe(e.shape||"circle"),djt=Eyt().startAngle(Z9t).endAngle(ejt).padAngle(tjt).innerRadius(njt).outerRadius(rjt).cornerRadius(ijt),hjt=u2e().x(Gk).y1(Yk).y0(J9t).defined(SF),pjt=u2e().y(Yk).x1(Gk).x0(Q9t).defined(SF),mjt=C3().x(Gk).y(Yk).defined(SF),gjt=EMe().x(Gk).y(Yk).width(K9t).height(X9t).cornerRadius(sjt,ojt,ajt,ujt),yjt=Syt().type(fjt).size(ljt),vjt=xMe().x(Gk).y(Yk).defined(SF).size(cjt);function rte(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function bjt(e,t){return djt.context(e)(t)}function _jt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?pjt:hjt).curve(nte(r,n.orient,n.tension)).context(e)(t)}function wjt(e,t){const n=t[0],r=n.interpolate||"linear";return mjt.curve(nte(r,n.orient,n.tension)).context(e)(t)}function MS(e,t,n,r){return gjt.context(e)(t,n,r)}function Ejt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function xjt(e,t){return yjt.context(e)(t)}function Sjt(e,t){return vjt.context(e)(t)}var SMe=1;function TMe(){SMe=1}function ite(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+SMe++),o=i.clipping[s]||(i.clipping[s]={id:s});return wn(r)?o.path=r(null):rte(n)?o.path=MS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function xs(e){this.clear(),e&&this.union(e)}xs.prototype={clone(){return new xs(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function TF(e){this.mark=e,this.bounds=this.bounds||new xs}function CF(e){TF.call(this,e),this.items=this.items||[]}at(CF,TF);class CMe{constructor(t){this._pending=0,this._loader=t||uF()}pending(){return this._pending}sanitizeURL(t){const n=this;return Vpe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(MT(n),r)).catch(()=>(MT(n),null))}loadImage(t){const n=this,r=i9t();return Vpe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Ft(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>MT(n),o.onerror=()=>MT(n),o.src=s,o}).catch(i=>(MT(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Vpe(e){e._pending+=1}function MT(e){e._pending-=1}function ug(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?Tjt(t,r):0))}return e}function Tjt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Cjt=ih-1e-8;let AF,AO,IO,p1,fH,kO,dH,hH;const u0=(e,t)=>AF.add(e,t),RO=(e,t)=>u0(AO=e,IO=t),Hpe=e=>u0(e,AF.y1),qpe=e=>u0(AF.x1,e),Wv=(e,t)=>fH*e+dH*t,Gv=(e,t)=>kO*e+hH*t,Wj=(e,t)=>u0(Wv(e,t),Gv(e,t)),Gj=(e,t)=>RO(Wv(e,t),Gv(e,t));function Kk(e,t){return AF=e,t?(p1=t*py,fH=hH=Math.cos(p1),kO=Math.sin(p1),dH=-kO):(fH=hH=1,p1=kO=dH=0),Ajt}const Ajt={beginPath(){},closePath(){},moveTo:Gj,lineTo:Gj,rect(e,t,n,r){p1?(Wj(e+n,t),Wj(e+n,t+r),Wj(e,t+r),Gj(e,t)):(u0(e+n,t+r),RO(e,t))},quadraticCurveTo(e,t,n,r){const i=Wv(e,t),s=Gv(e,t),o=Wv(n,r),a=Gv(n,r);Wpe(AO,i,o,Hpe),Wpe(IO,s,a,qpe),RO(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Wv(e,t),a=Gv(e,t),u=Wv(n,r),l=Gv(n,r),c=Wv(i,s),f=Gv(i,s);Gpe(AO,o,u,c,Hpe),Gpe(IO,a,l,f,qpe),RO(c,f)},arc(e,t,n,r,i,s){if(r+=p1,i+=p1,AO=n*Math.cos(i)+e,IO=n*Math.sin(i)+t,Math.abs(i-r)>Cjt)u0(e-n,t-n),u0(e+n,t+n);else{const o=l=>u0(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%ih,r<0&&(r+=ih),i=i%ih,i<0&&(i+=ih),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=ih,a=r-r%qv,u=0;u<4&&a>i;++u,a-=qv)o(a);else for(a=r-r%qv+qv,u=0;u<4&&a<i;++u,a=a+qv)o(a)}}};function Wpe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Gpe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>B9t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Ype(u,e,t,n,r)),0<l&&l<1&&i(Ype(l,e,t,n,r))}function Ype(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var j0=(j0=F0(1,1))?j0.getContext("2d"):null;const pH=new xs;function ste(e){return function(t,n){if(!j0)return!0;e(j0,t),pH.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=pH;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(j0.isPointInPath(u,a))return!0;return!1}}function ote(e,t){return t.contains(e.x||0,e.y||0)}function AMe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(pH.set(n,r,n+i,r+s))}function IMe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return ww(t,n,r,i,s)}function ww(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function cx(e,t){e.globalCompositeOperation=t.blend||"source-over"}function pf(e,t){return e??t}function Kpe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function Ijt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+pf(t.x1,.5)*r,n.y1+pf(t.y1,.5)*i,Math.max(r,i)*pf(t.r1,0),n.x1+pf(t.x2,.5)*r,n.y1+pf(t.y2,.5)*i,Math.max(r,i)*pf(t.r2,.5));else{const o=pf(t.x1,0),a=pf(t.y1,0),u=pf(t.x2,1),l=pf(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=F0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Kpe(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Kpe(s,t.stops)}function kMe(e,t,n){return tte(n)?Ijt(e,n,t.bounds):n}function L$(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=kMe(e,t,t.fill),!0):!1}var kjt=[];function fx(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=kMe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||kjt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Rjt(e,t){return e.zindex-t.zindex||e.index-t.index}function ate(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Rjt)}function id(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=ate(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function F$(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=ate(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function ute(e){return function(t,n,r){id(n,i=>{(!r||r.intersects(i.bounds))&&RMe(e,t,i,i)})}}function Njt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&RMe(e,t,n.items[0],n.items)}}function RMe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(cx(t,n),n.fill&&L$(t,n,i)&&t.fill(),n.stroke&&fx(t,n,i)&&t.stroke()))}function IF(e){return e=e||Fc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,F$(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function Xk(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function lte(e){return IF(Xk(e))}function A1(e,t){return"translate("+e+","+t+")"}function cte(e){return"rotate("+e+")"}function Pjt(e,t){return"scale("+e+","+t+")"}function NMe(e){return A1(e.x||0,e.y||0)}function Ojt(e){return A1(e.x||0,e.y||0)+(e.angle?" "+cte(e.angle):"")}function Djt(e){return A1(e.x||0,e.y||0)+(e.angle?" "+cte(e.angle):"")+(e.scaleX||e.scaleY?" "+Pjt(e.scaleX||1,e.scaleY||1):"")}function fte(e,t,n){function r(o,a){o("transform",Ojt(a)),o("d",t(null,a))}function i(o,a){return t(Kk(o,a.angle),a),ug(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=py),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:ute(s),pick:lte(s),isect:n||ste(s)}}var $jt=fte("arc",bjt);function Mjt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function Ljt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function Fjt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function dte(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(Kk(u),c),ug(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=Xk(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Njt(s),pick:a,isect:ote,tip:n}}var jjt=dte("area",_jt,Mjt);function Bjt(e,t){var n=t.clip;e.save(),wn(n)?(e.beginPath(),n(e),e.clip()):PMe(e,t.group)}function PMe(e,t){e.beginPath(),rte(t)?MS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function OMe(e){const t=pf(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Ujt(e,t){e("transform",NMe(t))}function DMe(e,t){const n=OMe(t);e("d",MS(null,t,n,n))}function zjt(e,t){e("class","background"),e("aria-hidden",!0),DMe(e,t)}function Vjt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?DMe(e,t):e("d","")}function Hjt(e,t,n){const r=t.clip?ite(n,t,t):null;e("clip-path",r)}function qjt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ug(e,t),e.translate(t.x||0,t.y||0)}function lI(e,t,n,r){const i=OMe(t);e.beginPath(),MS(e,t,(n||0)+i,(r||0)+i)}const Wjt=Xk(lI),Gjt=Xk(lI,!1),Yjt=Xk(lI,!0);function Kjt(e,t,n,r){id(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(lI(e,i,s,o),cx(e,i),i.fill&&L$(e,i,u)&&e.fill(),i.stroke&&!a&&fx(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&PMe(e,i),n&&n.translate(-s,-o),id(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(lI(e,i,s,o),cx(e,i),fx(e,i,u)&&e.stroke())})}function Xjt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return F$(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&rte(u)&&!Yjt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&Gjt(e,u,o,a)?(e.restore(),u):(l=F$(u,v=>Qjt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&Wjt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function Qjt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Jjt={type:"group",tag:"g",nested:!1,attr:Ujt,bound:qjt,draw:Kjt,pick:Xjt,isect:AMe,content:Hjt,background:zjt,foreground:Vjt},cI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function hte(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function pte(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function mte(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function kF(e,t){return e==="center"?t/2:e==="right"?t:0}function RF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Zjt(e,t,n){const r=hte(t,n),i=pte(t,r),s=mte(t,r),o=(t.x||0)-kF(t.align,i),a=(t.y||0)-RF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,cI["xmlns:xlink"],"xlink:href"),e("transform",A1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function eBt(e,t){const n=t.image,r=pte(t,n),i=mte(t,n),s=(t.x||0)-kF(t.align,r),o=(t.y||0)-RF(t.baseline,i);return e.set(s,o,s+r,o+i)}function tBt(e,t,n){id(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=hte(r,this);let s=pte(r,i),o=mte(r,i);if(s===0||o===0)return;let a=(r.x||0)-kF(r.align,s),u=(r.y||0)-RF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(cx(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var nBt={type:"image",tag:"image",nested:!1,attr:Zjt,bound:eBt,draw:tBt,pick:IF(),isect:Fc,get:hte,xOffset:kF,yOffset:RF},rBt=dte("line",wjt,Ljt);function iBt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Djt(t)),e("d",t.path)}function NO(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*py,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=lx(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),uI(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):uI(e,u,r,i,s,o)}function sBt(e,t){return NO(Kk(e,t.angle),t)?e.set(0,0,0,0):ug(e,t,!0)}var oBt={type:"path",tag:"path",nested:!1,attr:iBt,bound:sBt,draw:ute(NO),pick:lte(NO),isect:ste(NO)};function aBt(e,t){e("d",MS(null,t))}function uBt(e,t){var n,r;return ug(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Xpe(e,t){e.beginPath(),MS(e,t)}var lBt={type:"rect",tag:"path",nested:!1,attr:aBt,bound:uBt,draw:ute(Xpe),pick:lte(Xpe),isect:AMe};function cBt(e,t){e("transform",NMe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function fBt(e,t){var n,r;return ug(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function $Me(e,t,n){var r,i,s,o;return t.stroke&&fx(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function dBt(e,t,n){id(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&$Me(e,r,i)&&(cx(e,r),e.stroke())}})}function hBt(e,t,n,r){return e.isPointInStroke?$Me(e,t,1)&&e.isPointInStroke(n,r):!1}var pBt={type:"rule",tag:"line",nested:!1,attr:cBt,bound:fBt,draw:dBt,pick:IF(hBt),isect:IMe},mBt=fte("shape",Ejt),gBt=fte("symbol",xjt,ote);const Qpe=b3e();var kl={height:cp,measureWidth:gte,estimateWidth:j$,width:j$,canvas:MMe};MMe(!0);function MMe(e){kl.width=e&&j0?gte:j$}function j$(e,t){return LMe(gy(e,t),cp(e))}function LMe(e,t){return~~(.8*e.length*t)}function gte(e,t){return cp(e)<=0||!(t=gy(e,t))?0:FMe(t,NF(e))}function FMe(e,t){const n=`(${t}) ${e}`;let r=Qpe.get(n);return r===void 0&&(j0.font=t,r=j0.measureText(e).width,Qpe.set(n,r)),r}function cp(e){return e.fontSize!=null?+e.fontSize||0:11}function my(e){return e.lineHeight!=null?e.lineHeight:cp(e)+2}function yBt(e){return Fe(e)?e.length>1?e:e[0]:e}function Qk(e){return yBt(e.lineBreak&&e.text&&!Fe(e.text)?e.text.split(e.lineBreak):e.text)}function yte(e){const t=Qk(e);return(Fe(t)?t.length-1:0)*my(e)}function gy(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?bBt(e,n):n}function vBt(e){if(kl.width===gte){const t=NF(e);return n=>FMe(n,t)}else if(kl.width===j$){const t=cp(e);return n=>LMe(n,t)}else return t=>kl.width(e,t)}function bBt(e,t){var n=+e.limit,r=vBt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function Jk(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function NF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+cp(e)+"px "+Jk(e,t)}function vte(e){var t=e.baseline,n=cp(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*my(e):t==="line-bottom"?.29*n-.5*my(e):0)}const _Bt={left:"start",center:"middle",right:"end"},N2=new xs;function PF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-qv,t+=r*Math.cos(i),n+=r*Math.sin(i)),N2.x1=t,N2.y1=n,N2}function wBt(e,t){var n=t.dx||0,r=(t.dy||0)+vte(t),i=PF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",_Bt[t.align]||"start"),a?(u=A1(s,o)+" "+cte(a),(n||r)&&(u+=" "+A1(n,r))):u=A1(s+n,o+r),e("transform",u)}function bte(e,t,n){var r=kl.height(t),i=t.align,s=PF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+vte(t)-Math.round(.8*r),c=Qk(t),f;if(Fe(c)?(r+=my(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,kl.width(t,h)),0)):f=kl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*py,o,a);else if(n===2)return e.rotatedPoints(t.angle*py,o,a);return e}function EBt(e,t,n){id(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=NF(r),e.textAlign=r.align||"left",s=PF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*py),o=a=0),o+=r.dx||0,a+=(r.dy||0)+vte(r),c=Qk(r),cx(e,r),Fe(c))for(l=my(r),u=0;u<c.length;++u)f=gy(r,c[u]),r.fill&&L$(e,r,i)&&e.fillText(f,o,a),r.stroke&&fx(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=gy(r,c),r.fill&&L$(e,r,i)&&e.fillText(f,o,a),r.stroke&&fx(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function xBt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=PF(t),a=o.x1,u=o.y1,l=bte(N2,t,1),c=-t.angle*py,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function SBt(e,t){const n=bte(N2,e,2);return ww(t,n[0],n[1],n[2],n[3])||ww(t,n[0],n[1],n[4],n[5])||ww(t,n[4],n[5],n[6],n[7])||ww(t,n[2],n[3],n[6],n[7])}var TBt={type:"text",tag:"text",nested:!1,attr:wBt,bound:bte,draw:EBt,pick:IF(xBt),isect:SBt},CBt=dte("trail",Sjt,Fjt),zl={arc:$jt,area:jjt,group:Jjt,image:nBt,line:rBt,path:oBt,rect:lBt,rule:pBt,shape:mBt,symbol:gBt,text:TBt,trail:CBt};function mH(e,t,n){var r=zl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new xs),e,n)}var Jpe={mark:null};function jMe(e,t,n){var r=zl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Jpe.mark=e,l=Jpe),c=mH(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new xs,o)for(a=0,u=s.length;a<u;++a)t.union(mH(s[a],i,n));return e.bounds=t}const ABt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function BMe(e,t){return JSON.stringify(e,ABt,t)}function UMe(e){const t=typeof e=="string"?JSON.parse(e):e;return zMe(t)}function zMe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&zMe(n[i]);return t&&jMe(e),e}class VMe{constructor(t){arguments.length?this.root=UMe(t):(this.root=Zpe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new CF(this.root)])}toJSON(t){return BMe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Zpe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Zpe(e,t){const n={bounds:new xs,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function l0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function _te(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ns(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=l0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function hc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function HMe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function OF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function IBt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=zl[i.marktype]).tip){for(o=OF(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let wte=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||uF(),this._tooltip=n||kBt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=l0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=IBt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function kBt(e,t,n,r){e.element().setAttribute("title",r||"")}class Zk{constructor(t){this._el=null,this._bgcolor=null,this._loader=new CMe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const RBt="keydown",NBt="keypress",PBt="keyup",qMe="dragenter",PO="dragleave",WMe="dragover",gH="pointerdown",OBt="pointerup",B$="pointermove",OO="pointerout",GMe="pointerover",yH="mousedown",DBt="mouseup",YMe="mousemove",U$="mouseout",KMe="mouseover",z$="click",$Bt="dblclick",MBt="wheel",XMe="mousewheel",V$="touchstart",H$="touchmove",q$="touchend",LBt=[RBt,NBt,PBt,qMe,PO,WMe,gH,OBt,B$,OO,GMe,yH,DBt,YMe,U$,KMe,z$,$Bt,MBt,XMe,V$,H$,q$],vH=B$,P2=U$,bH=z$;class eR extends wte{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=LBt,this.pointermove=tme([B$,YMe],[GMe,KMe],[OO,U$]),this.dragover=tme([WMe],[qMe],[PO]),this.pointerout=nme([OO,U$]),this.dragleave=nme([PO])}initialize(t,n,r){return this._canvas=t&&_te(t,"canvas"),[z$,yH,gH,B$,OO,PO].forEach(i=>eme(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(XMe,t)}pointerdown(t){this._down=this._active,this.fire(gH,t)}mousedown(t){this._down=this._active,this.fire(yH,t)}click(t){this._down===this._active&&(this.fire(z$,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(V$,t,!0)}touchmove(t){this.fire(H$,t,!0)}touchend(t){this.fire(q$,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===bH&&i&&i.href?this.handleHref(n,i,i.href):(t===vH||t===P2)&&this.handleTooltip(n,i,t!==P2),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(eme(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=OF(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return zl[t.marktype].pick.call(this,o,t,n,r,i,s)}}const FBt=e=>e===V$||e===H$||e===q$?[V$,H$,q$]:[e];function eme(e,t){FBt(t).forEach(n=>jBt(e,n))}function jBt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function DC(e,t,n){t.forEach(r=>e.fire(r,n))}function tme(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?DC(this,e,r):((!i||!i.exit)&&DC(this,n,r),this._active=s,DC(this,t,r),DC(this,e,r))}}function nme(e){return function(t){DC(this,e,t),this._active=null}}function BBt(){return typeof window<"u"&&window.devicePixelRatio||1}function UBt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?BBt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class W$ extends Zk{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new xs,this._tempb=new xs}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:F0(1,1,this._options.type),t&&this._canvas&&(hc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)UBt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Me("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=zBt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):VBt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=zl[n.marktype];n.clip&&Bjt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const zBt=(e,t,n)=>new xs().set(0,0,t,n).translate(-e[0],-e[1]);function VBt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class QMe extends wte{constructor(t,n){super(t,n);const r=this;r._hrefHandler=Yj(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=Yj(r,(i,s)=>{r.handleTooltip(i,s,i.type!==P2)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(bH,this._hrefHandler),i.removeEventListener(vH,this._tooltipHandler),i.removeEventListener(P2,this._tooltipHandler)),this._svg=i=t&&_te(t,"svg"),i&&(i.addEventListener(bH,this._hrefHandler),i.addEventListener(vH,this._tooltipHandler),i.addEventListener(P2,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:Yj(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const Yj=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},JMe="aria-hidden",Ete="aria-label",xte="role",Ste="aria-roledescription",ZMe="graphics-object",Tte="graphics-symbol",eLe=(e,t,n)=>({[xte]:e,[Ste]:t,[Ete]:n||void 0}),HBt=nd(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),rme={axis:{desc:"axis",caption:GBt},legend:{desc:"legend",caption:YBt},"title-text":{desc:"title",caption:e=>`Title text '${sme(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${sme(e)}'`}},ime={ariaRole:xte,ariaRoleDescription:Ste,description:Ete};function tLe(e,t){const n=t.aria===!1;if(e(JMe,n||void 0),n||t.description==null)for(const r in ime)e(ime[r],void 0);else{const r=t.mark.marktype;e(Ete,t.description),e(xte,t.ariaRole||(r==="group"?ZMe:Tte)),e(Ste,t.ariaRoleDescription||`${r} mark`)}}function nLe(e){return e.aria===!1?{[JMe]:!0}:HBt[e.role]?null:rme[e.role]?WBt(e,rme[e.role]):qBt(e)}function qBt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return eLe(n?ZMe:Tte,`${t} mark container`,e.description)}function WBt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return eLe(t.role||Tte,t.desc,n.description||r(n))}catch{return null}}function sme(e){return ft(e.text).join(" ")}function GBt(e){const t=e.datum,n=e.orient,r=t.title?rLe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${ux(a)?"discrete":a} scale with ${gMe(o,s,e)}`}function YBt(e){const t=e.datum,n=t.title?rLe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return XBt(r)+(n?` titled '${n}'`:"")+` for ${KBt(s)} with ${gMe(u,a,e)}`}function rLe(e){try{return ft(Yn(e.items).items[0].text).join(" ")}catch{return null}}function KBt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Yn(e)}function XBt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const iLe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),QBt=e=>iLe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Cte(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${QBt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=iLe(u),a),toString:()=>e};return a}const sLe=e=>oLe(Cte(),e)+"";function oLe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):oLe(e,r)}return e.close()}const G$={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Y$={blend:"mix-blend-mode"},aLe={fill:"none","stroke-miterlimit":10},LT=0,ome="http://www.w3.org/2000/xmlns/",ks=cI.xmlns;class Ate extends Zk{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Ns(t,0,"svg",ks),this._svg.setAttributeNS(ome,"xmlns",ks),this._svg.setAttributeNS(ome,"xmlns:xlink",cI["xmlns:xlink"]),this._svg.setAttribute("version",cI.version),this._svg.setAttribute("class","marks"),hc(t,1),this._root=Ns(this._svg,LT,"g",ks),c0(this._root,aLe),hc(this._svg,LT+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(c0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Ns(t,LT,"rect",ks),c0(r,{width:this._width,height:this._height,fill:n}));const i=sLe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),hc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=zl[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,ame(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,ame(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=zl[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=ume(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return hc(c,0),n._svg;c.setAttribute("class",HMe(n));const f=nLe(n);for(const m in f)La(c,m,f[m]);l||La(c,"pointer-events",u),La(c,"clip-path",n.clip?ite(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=ume(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&e7t(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):id(n,p),hc(c,h),c}_update(t,n,r){sm=n,la=n.__values__,tLe(O2,r),t.attr(O2,r,this);const i=n7t[t.type];i&&i.call(this,t,n,r),sm&&this.style(sm,r)}style(t,n){if(n!=null){for(const r in G$){let i=r==="font"?Jk(n):n[r];if(i===la[r])continue;const s=G$[r];i==null?t.removeAttribute(s):(tte(i)&&(i=vMe(i,this._defs.gradient,uLe())),t.setAttribute(s,i+"")),la[r]=i}for(const r in Y$)DO(t,Y$[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Ns(t,LT+1,"defs",ks)),i=JBt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Ns(t,LT+1,"defs",ks)),i=ZBt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):hc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function ame(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function JBt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Ns(e,n++,"pattern",ks);c0(o,{id:M$+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Ns(o,0,"rect",ks),c0(o,{width:1,height:1,fill:`url(${uLe()}#${t.id})`}),e=Ns(e,n++,"radialGradient",ks),c0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ns(e,n++,"linearGradient",ks),c0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Ns(e,r,"stop",ks),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return hc(e,r),n}function ZBt(e,t,n){let r;return e=Ns(e,n,"clipPath",ks),e.setAttribute("id",t.id),t.path?(r=Ns(e,0,"path",ks),r.setAttribute("d",t.path)):(r=Ns(e,0,"rect",ks),c0(r,{x:0,y:0,width:t.width,height:t.height})),hc(e,1),n+1}function e7t(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;id(n,o=>{i=e.mark(t,o,i,r),++s}),hc(t,1+s)}function ume(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=l0(o,r,ks),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=l0(o,"path",ks);s.appendChild(a),a.__data__=e;const u=l0(o,"g",ks);s.appendChild(u),u.__data__=e;const l=l0(o,"path",ks);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||t7t(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function t7t(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let sm=null,la=null;const n7t={group(e,t,n){const r=sm=t.childNodes[2];la=r.__values__,e.foreground(O2,n,this),la=t.__values__,sm=t.childNodes[1],e.content(O2,n,this);const i=sm=t.childNodes[0];e.background(O2,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==la.events&&(La(r,"pointer-events",s),La(i,"pointer-events",s),la.events=s),n.strokeForeground&&n.stroke){const o=n.fill;La(r,"display",null),this.style(i,n),La(i,"stroke",null),o&&(n.fill=null),la=r.__values__,this.style(r,n),o&&(n.fill=o),sm=null}else La(r,"display","none")},image(e,t,n){n.smooth===!1?(DO(t,"image-rendering","optimizeSpeed"),DO(t,"image-rendering","pixelated")):DO(t,"image-rendering",null)},text(e,t,n){const r=Qk(n);let i,s,o,a;Fe(r)?(s=r.map(u=>gy(n,u)),i=s.join(`
`),i!==la.text&&(hc(t,0),o=t.ownerDocument,a=my(n),s.forEach((u,l)=>{const c=l0(o,"tspan",ks);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),la.text=i)):(s=gy(n,r),s!==la.text&&(t.textContent=s,la.text=s)),La(t,"font-family",Jk(n)),La(t,"font-size",cp(n)+"px"),La(t,"font-style",n.fontStyle),La(t,"font-variant",n.fontVariant),La(t,"font-weight",n.fontWeight)}};function O2(e,t,n){t!==la[e]&&(n?r7t(sm,e,t,n):La(sm,e,t),la[e]=t)}function DO(e,t,n){n!==la[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),la[t]=n)}function c0(e,t){for(const n in t)La(e,n,t[n])}function La(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function r7t(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function uLe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class lLe extends Zk{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Cte();n.open("svg",_n({},cI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",aLe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=zl[n.marktype],i=r.tag,s=[tLe,r.attr];t.open("g",{class:HMe(n),"clip-path":n.clip?ite(this,n,n.group):null},nLe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=Qk(a);if(Fe(l)){const c={x:0,dy:my(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(gy(a,l[f])).close()}else t.text(gy(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),id(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):id(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&i7t(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:M$+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function i7t(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=Jk(t),e["font-size"]=cp(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in G$){let a=t[o];const u=G$[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(tte(a)&&(a=vMe(a,i.gradient,"")),e[u]=a)}for(const o in Y$){const a=t[o];a!=null&&(s=s||[],s.push(`${Y$[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const wf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function s7t(e){wf.svgMarkTypes=e.svgMarkTypes??["text"],wf.svgOnTop=e.svgOnTop??!0,wf.debug=e.debug??!1}class _H extends Zk{constructor(t){super(t),this._svgRenderer=new Ate(t),this._canvasRenderer=new W$(t)}initialize(t,n,r,i,s){this._root_el=Ns(t,0,"div");const o=Ns(this._root_el,0,"div"),a=Ns(this._root_el,1,"div");return this._root_el.style.position="relative",wf.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=wf.svgOnTop?a:o,this._canvasEl=wf.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return wf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!wf.svgMarkTypes.includes(s));this._svgRenderer.render(t,wf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return wf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class cLe extends eR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Ns(Ns(t,0,"div"),wf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const fLe="canvas",dLe="hybrid",hLe="png",pLe="svg",mLe="none",f0={Canvas:fLe,PNG:hLe,SVG:pLe,Hybrid:dLe,None:mLe},ub={};ub[fLe]=ub[hLe]={renderer:W$,headless:W$,handler:eR};ub[pLe]={renderer:Ate,headless:lLe,handler:QMe};ub[dLe]={renderer:_H,headless:_H,handler:cLe};ub[mLe]={};function DF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(ub[e]=t,this):ub[e]}function gLe(e,t,n){const r=[],i=new xs().union(t),s=e.marktype;return s?yLe(e,i,n,r):s==="group"?vLe(e,i,n,r):Me("Intersect scene must be mark node or group item.")}function yLe(e,t,n,r){if(o7t(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)vLe(i[a],t,n,r);else for(const u=zl[s].isect;a<o;++a){const l=i[a];bLe(l,t,u)&&r.push(l)}}return r}function o7t(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function vLe(e,t,n,r){n&&n(e.mark)&&bLe(e,t,zl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)yLe(i[u],t,n,r);t.translate(o,a)}return r}function bLe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const Kj=new xs;function _Le(e){const t=e.clip;if(wn(t))t(Kk(Kj.clear()));else if(t)Kj.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(Kj)}const a7t=1e-9;function Ite(e,t,n){return e===t?!0:n==="path"?wLe(e,t):e instanceof Date&&t instanceof Date?+e==+t:ar(e)&&ar(t)?Math.abs(e-t)<=a7t:!e||!t||!ht(e)&&!ht(t)?e==t:u7t(e,t)}function wLe(e,t){return Ite(lx(e),lx(t))}function u7t(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Ite(e[i],t[i],i))return!1;return typeof e==typeof t}function l7t(){TMe(),O9t()}const dx="top",Rf="left",Df="right",yy="bottom",c7t="top-left",f7t="top-right",d7t="bottom-left",h7t="bottom-right",kte="start",wH="middle",Ba="end",p7t="x",m7t="y",$F="group",Rte="axis",Nte="title",g7t="frame",y7t="scope",Pte="legend",ELe="row-header",xLe="row-footer",SLe="row-title",TLe="column-header",CLe="column-footer",ALe="column-title",v7t="padding",b7t="symbol",ILe="fit",kLe="fit-x",RLe="fit-y",_7t="pad",Ote="none",nP="all",EH="each",Dte="flush",d0="column",h0="row";function NLe(e){Pe.call(this,null,e)}at(NLe,Pe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=zl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=rP(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===$F||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(rP(l,o))),r.role){case Rte:case Pte:case Nte:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(rP(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(rP(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return _Le(r),t.modifies("bounds")}});function rP(e,t,n){return t(e.bounds.clear(),e,n)}const lme=":vega_identifier:";function $te(e){Pe.call(this,0,e)}$te.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};at($te,Pe,{transform(e,t){const n=w7t(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function w7t(e){return e._signals[lme]||(e._signals[lme]=e.add(0))}function PLe(e){Pe.call(this,null,e)}at(PLe,Pe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,E7t(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===$F?CF:TF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function E7t(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function OLe(e){Pe.call(this,null,e)}const cme={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!DLe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},DLe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),fme=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(DLe(i,s=e[n].bounds,t))return!0},x7t=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},S7t=(e,t,n)=>{var r=e.range(),i=new xs;return t===dx||t===yy?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},dme=e=>(e.forEach(t=>t.opacity=1),e),hme=(e,t)=>e.reflow(t.modified()).modifies("opacity");at(OLe,Pe,{transform(e,t){const n=cme[e.method]||cme.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(dme(i),t=hme(t,e)),t;if(i=i.filter(x7t),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=dme(i),t=hme(t,e),s.length>=3&&fme(s,r)){do s=n(s,r);while(s.length>=3&&fme(s,r));s.length<3&&!Yn(i).opacity&&(s.length>1&&(Yn(s).opacity=0),Yn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=S7t(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function $Le(e){Pe.call(this,null,e)}at($Le,Pe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const aa=new xs;function Ew(e,t,n){return e[t]===n?0:(e[t]=n,1)}function T7t(e){var t=e.items[0].orient;return t===Rf||t===Df}function C7t(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function A7t(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=C7t(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&yte(p),v=0,b=0,_,x;switch(aa.clear().union(g),g.clear(),(_=u[0])>-1&&g.union(i.items[_].bounds),(_=u[1])>-1&&g.union(i.items[_].bounds),a){case dx:v=f||0,b=-c,x=Math.max(d,Math.min(h,-g.y1)),g.add(0,-x).add(l,0),p&&iP(e,p,x,m,y,0,-1,g);break;case Rf:v=-c,b=f||0,x=Math.max(d,Math.min(h,-g.x1)),g.add(-x,0).add(0,l),p&&iP(e,p,x,m,y,1,-1,g);break;case Df:v=n+c,b=f||0,x=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(x,l),p&&iP(e,p,x,m,y,1,1,g);break;case yy:v=f||0,b=r+c,x=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,x),p&&iP(e,p,x,m,0,0,1,g);break;default:v=i.x,b=i.y}return ug(g.translate(v,b),i),Ew(i,"x",v+o)|Ew(i,"y",b+o)&&(i.bounds=aa,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function iP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const pme=(e,t)=>Math.floor(Math.min(e,t)),mme=(e,t)=>Math.ceil(Math.max(e,t));function I7t(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===$F)switch(i.role){case Rte:case Pte:case Nte:break;case ELe:o.rowheaders.push(...s);break;case xLe:o.rowfooters.push(...s);break;case TLe:o.colheaders.push(...s);break;case CLe:o.colfooters.push(...s);break;case SLe:o.rowtitle=s[0];break;case ALe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function k7t(e){return new xs().set(0,0,e.width||0,e.height||0)}function R7t(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function wi(e,t,n){const r=ht(e)?e[t]:e;return r??(n!==void 0?n:0)}function gme(e){return e<0?Math.ceil(-e):0}function MLe(e,t,n){var r=!n.nodirty,i=n.bounds===Dte?k7t:R7t,s=aa.set(0,0,0,0),o=wi(n.align,d0),a=wi(n.align,h0),u=wi(n.padding,d0),l=wi(n.padding,h0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),_=Array(d),x=Array(d),S,E,T,A,k,R,$,P,O,M,j;for(E=0;E<c;++E)p[E]=0;for(E=0;E<f;++E)y[E]=0;for(E=0;E<d;++E)R=t[E],k=x[E]=i(R),R.x=R.x||0,b[E]=0,R.y=R.y||0,_[E]=0,T=E%c,A=~~(E/c),m=Math.max(m,$=Math.ceil(k.x2)),v=Math.max(v,P=Math.ceil(k.y2)),p[T]=Math.max(p[T],$),y[A]=Math.max(y[A],P),h[E]=u+gme(k.x1),g[E]=l+gme(k.y1),r&&e.dirty(t[E]);for(E=0;E<d;++E)E%c===0&&(h[E]=0),E<c&&(g[E]=0);if(o===EH)for(T=1;T<c;++T){for(j=0,E=T;E<d;E+=c)j<h[E]&&(j=h[E]);for(E=T;E<d;E+=c)h[E]=j+p[T-1]}else if(o===nP){for(j=0,E=0;E<d;++E)E%c&&j<h[E]&&(j=h[E]);for(E=0;E<d;++E)E%c&&(h[E]=j+m)}else for(o=!1,T=1;T<c;++T)for(E=T;E<d;E+=c)h[E]+=p[T-1];if(a===EH)for(A=1;A<f;++A){for(j=0,E=A*c,S=E+c;E<S;++E)j<g[E]&&(j=g[E]);for(E=A*c;E<S;++E)g[E]=j+y[A-1]}else if(a===nP){for(j=0,E=c;E<d;++E)j<g[E]&&(j=g[E]);for(E=c;E<d;++E)g[E]=j+v}else for(a=!1,A=1;A<f;++A)for(E=A*c,S=E+c;E<S;++E)g[E]+=y[A-1];for(O=0,E=0;E<d;++E)O=h[E]+(E%c?O:0),b[E]+=O-t[E].x;for(T=0;T<c;++T)for(M=0,E=T;E<d;E+=c)M+=g[E],_[E]+=M-t[E].y;if(o&&wi(n.center,d0)&&f>1)for(E=0;E<d;++E)k=o===nP?m:p[E%c],O=k-x[E].x2-t[E].x-b[E],O>0&&(b[E]+=O/2);if(a&&wi(n.center,h0)&&c!==1)for(E=0;E<d;++E)k=a===nP?v:y[~~(E/c)],M=k-x[E].y2-t[E].y-_[E],M>0&&(_[E]+=M/2);for(E=0;E<d;++E)s.union(x[E].translate(b[E],_[E]));switch(O=wi(n.anchor,p7t),M=wi(n.anchor,m7t),wi(n.anchor,d0)){case Ba:O-=s.width();break;case wH:O-=s.width()/2}switch(wi(n.anchor,h0)){case Ba:M-=s.height();break;case wH:M-=s.height()/2}for(O=Math.round(O),M=Math.round(M),s.clear(),E=0;E<d;++E)t[E].mark.bounds.clear();for(E=0;E<d;++E)R=t[E],R.x+=b[E]+=O,R.y+=_[E]+=M,s.union(R.mark.bounds.union(R.bounds.translate(b[E],_[E]))),r&&e.dirty(R);return s}function N7t(e,t,n){var r=I7t(t),i=r.marks,s=n.bounds===Dte?P7t:O7t,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=MLe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=wi(n.headerBand,h0,null),c=sP(e,r.rowheaders,i,a,u,-wi(o,"rowHeader"),pme,0,s,"x1",0,a,1,m)),r.colheaders&&(m=wi(n.headerBand,d0,null),f=sP(e,r.colheaders,i,a,a,-wi(o,"columnHeader"),pme,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=wi(n.footerBand,h0,null),d=sP(e,r.rowfooters,i,a,u,wi(o,"rowFooter"),mme,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=wi(n.footerBand,d0,null),h=sP(e,r.colfooters,i,a,a,wi(o,"columnFooter"),mme,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=wi(n.titleAnchor,h0),g=wi(o,"rowTitle"),g=p===Ba?d+g:c-g,m=wi(n.titleBand,h0,.5),yme(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=wi(n.titleAnchor,d0),g=wi(o,"columnTitle"),g=p===Ba?h+g:f-g,m=wi(n.titleBand,d0,.5),yme(e,r.coltitle,g,1,y,m))}function P7t(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function O7t(e,t){return e.bounds[t]}function sP(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,_,x,S,E,T,A;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,_=t.length;v<_;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,_=t.length;v<_;++v,y+=f){for(S=t[v],x=S.mark.bounds,b=y;b>=0&&(E=n[b])==null;b-=d);a?(T=h==null?E.x:Math.round(E.bounds.x1+h*E.bounds.width()),A=m):(T=m,A=h==null?E.y:Math.round(E.bounds.y1+h*E.bounds.height())),x.union(S.bounds.translate(T-(S.x||0),A-(S.y||0))),S.x=T,S.y=A,e.dirty(S),g=o(g,x[l])}return g}function yme(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function D7t(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function $7t(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function M7t(e,t,n,r,i,s,o){const a=D7t(n,t),u=$7t(e,a("offset",0)),l=a("anchor",kte),c=l===Ba?1:l===wH?.5:0,f={align:EH,bounds:a("bounds",Dte),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Rf:f.anchor={x:Math.floor(r.x1)-u,column:Ba,y:c*(o||r.height()+2*r.y1),row:l};break;case Df:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case dx:f.anchor={y:Math.floor(i.y1)-u,row:Ba,x:c*(s||i.width()+2*i.x1),column:l};break;case yy:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case c7t:f.anchor={x:u,y:u};break;case f7t:f.anchor={x:s-u,y:u,column:Ba};break;case d7t:f.anchor={x:u,y:o-u,row:Ba};break;case h7t:f.anchor={x:s-u,y:o-u,column:Ba,row:Ba};break}return f}function L7t(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),j7t(e,n,n.items[0].items[0]),s=F7t(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===b7t&&B7t(n.items[0].items[0].items[0].items),i!==Ote&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,ug(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function F7t(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function j7t(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&FT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Rf:i+=Math.ceil(o.bounds.width())+u;break;case Df:case yy:break;default:s+=o.bounds.height()+u}switch((i||s)&&FT(e,n,i,s),o.orient){case Rf:c+=R_(t,n,o,a,1,1);break;case Df:l+=R_(t,n,o,Ba,0,0)+u,c+=R_(t,n,o,a,1,1);break;case yy:l+=R_(t,n,o,a,0,0),c+=R_(t,n,o,Ba,-1,0,1)+u;break;default:l+=R_(t,n,o,a,0,0)}(l||c)&&FT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(FT(e,n,-l,0),FT(e,o,-l,0))}}function R_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:yte(n);return Math.round(r===kte?f:r===Ba?d-h:.5*(c-h))}function FT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function B7t(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function U7t(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Rf||a===Df?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==$F?a===Rf?(p=i.y2,h=i.y1):a===Df?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Rf&&(p=r,h=0),b=u===kte?p:u===Ba?h:(p+h)/2,d&&d.text){switch(a){case dx:case yy:v=f.bounds.height()+c;break;case Rf:y=f.bounds.width()+c;break;case Df:y=-f.bounds.width()-c;break}aa.clear().union(d.bounds),aa.translate(y-(d.x||0),v-(d.y||0)),Ew(d,"x",y)|Ew(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(aa),d.mark.bounds.clear().union(aa),e.dirty(d)),aa.clear().union(d.bounds)}else aa.clear();switch(aa.union(f.bounds),a){case dx:m=b,g=i.y1-aa.height()-l;break;case Rf:m=i.x1-aa.width()-l,g=b;break;case Df:m=i.x2+aa.width()+l,g=b;break;case yy:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return Ew(s,"x",m)|Ew(s,"y",g)&&(aa.translate(m,g),e.dirty(s),s.bounds.clear().union(aa),t.bounds.clear().union(aa),e.dirty(s)),s.bounds}function LLe(e){Pe.call(this,null,e)}at(LLe,Pe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&N7t(n,r,e.layout),V7t(n,r,e)}),z7t(e.mark.group)?t.reflow():t}});function z7t(e){return e&&e.mark.role!=="legend-entry"}function V7t(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new xs().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Rte:h=T7t(f)?a:u,h.union(A7t(e,f,i,s));break;case Nte:c=f;break;case Pte:l.push(L7t(e,f));break;case g7t:case y7t:case ELe:case xLe:case SLe:case TLe:case CLe:case ALe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Df,d!==Ote&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];MLe(e,v,M7t(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===ILe||n.autosize.type===kLe||n.autosize.type===RLe))switch(y.orient){case Rf:case Df:o.add(v.x1,0).add(v.x2,0);break;case dx:case yy:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(U7t(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),H7t(e,t,o,n)}function H7t(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===v7t){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Ote?(l=0,f=0,u=o,c=a):s===ILe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===kLe?(u=Math.max(0,o-l-d),a=c+f+h):s===RLe?(o=u+l+d,c=Math.max(0,a-f-h)):s===_7t&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const q7t=Object.freeze(Object.defineProperty({__proto__:null,bound:NLe,identifier:$te,mark:PLe,overlap:OLe,render:$Le,viewlayout:LLe},Symbol.toStringTag,{value:"Module"}));function FLe(e){Pe.call(this,null,e)}at(FLe,Pe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Zee(s,o,e.minstep),u=e.format||fMe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?cMe(s,e.values,a):ete(s,a);return i&&(r.rem=i),i=l.map((c,f)=>_r({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(_r({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function jLe(e){Pe.call(this,null,e)}function W7t(){return _r({})}function G7t(e){const t=NS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}at(jLe,Pe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||W7t,s=e.key||Mt,o=this.value;return Fe(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Me("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=G7t(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function BLe(e){Pe.call(this,null,e)}at(BLe,Pe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Fe(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Pg,u=i.enter||Pg,l=i.exit||Pg,c=(s&&!o?i[s]:a)||Pg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Pg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Pg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Pg){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function ULe(e){Pe.call(this,[],e)}at(ULe,Pe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||CO,o=e.scale,a=+e.limit,u=Zee(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===CO,c=e.format||mMe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||pMe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===CO?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,wn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Aa(m=p||8),i=i.map((y,v)=>_r({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(_r({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===_9t?(d=o.domain(),h=aMe(o,d[0],Yn(d)),f.length<3&&!e.values&&d[0]!==Yn(d)&&(f=[d[0],Yn(d)]),i=f.map((y,v)=>_r({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=N9t(o),i=f.map((y,v)=>_r({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const Y7t=e=>e.source.x,K7t=e=>e.source.y,X7t=e=>e.target.x,Q7t=e=>e.target.y;function Mte(e){Pe.call(this,{},e)}Mte.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};at(Mte,Pe,{transform(e,t){var n=e.sourceX||Y7t,r=e.sourceY||K7t,i=e.targetX||X7t,s=e.targetY||Q7t,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=vme.get(u+"-"+a)||vme.get(u);return l||Me("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const zLe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,J7t=(e,t,n,r)=>zLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),VLe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},Z7t=(e,t,n,r)=>VLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),HLe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},eUt=(e,t,n,r)=>HLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),tUt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,nUt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,rUt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},iUt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},sUt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},oUt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},vme=NS({line:zLe,"line-radial":J7t,arc:VLe,"arc-radial":Z7t,curve:HLe,"curve-radial":eUt,"orthogonal-horizontal":tUt,"orthogonal-vertical":nUt,"orthogonal-radial":rUt,"diagonal-horizontal":iUt,"diagonal-vertical":sUt,"diagonal-radial":oUt});function Lte(e){Pe.call(this,null,e)}Lte.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};at(Lte,Pe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||IS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/uK(l),h=Pu(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const aUt=5;function uUt(e){const t=e.type;return!e.bins&&(t===ox||t===zk||t===Vk)}function qLe(e){return Xee(e)&&e!==Sh}const lUt=nd(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function WLe(e){Pe.call(this,null,e),this.modified(!0)}at(WLe,Pe,{transform(e,t){var n=t.dataflow,r=this.value,i=cUt(e);(!r||i!==r.type)&&(this.value=r=pr(i)());for(i in e)if(!lUt[i]){if(i==="padding"&&qLe(r.type))continue;wn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return gUt(r,e,mUt(r,e,dUt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function cUt(e){var t=e.type,n="",r;return t===Sh?Sh+"-"+ox:(fUt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Sh+"-":r===3?$S+"-":""),(n+t||ox).toLowerCase())}function fUt(e){const t=e.type;return Xee(t)&&t!==ob&&t!==ab&&(e.scheme||e.range&&e.range.length&&e.range.every(dt))}function dUt(e,t,n){const r=hUt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&uUt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return qLe(s)&&t.padding&&i[0]!==Yn(i)&&(i=pUt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(GLe(s,i,n)),s===Wee&&e.unknown(t.domainImplicit?vz:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Zee(e,t.nice)||null),i.length}function hUt(e,t,n){return t?(e.domain(GLe(e.type,t,n)),t.length):-1}function pUt(e,t,n,r,i,s){var o=Math.abs(Yn(n)-n[0]),a=o/(o-2*r),u=e===Hm?jZ(t,null,a):e===Vk?P$(t,null,a,.5):e===zk?P$(t,null,a,i||1):e===_F?BZ(t,null,a,s||1):FZ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function GLe(e,t,n){if(nMe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+nt(t))}return t}function mUt(e,t,n){let r=t.bins;if(r&&!Fe(r)){const i=e.domain(),s=i[0],o=Yn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Me("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Pu(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Gee&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function gUt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=yUt(r,t,n);else if(t.scheme&&(s=vUt(r,t,n),wn(s))){if(e.interpolator)return e.interpolator(s);Me(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&rMe(r))return e.interpolator(xF(xH(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(Qee(t.interpolate,t.interpolateGamma)):wn(e.round)?e.round(i):wn(e.rangeRound)&&e.interpolate(i?rk:tg),s&&e.range(xH(s,t.reverse))}function yUt(e,t,n){e!==X$e&&e!==uH&&Me("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===uH?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*qee(n,i,r)]}function vUt(e,t,n){var r=t.schemeExtent,i,s;return Fe(t.scheme)?s=xF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Jee(i),s||Me(`Unrecognized scheme name: ${t.scheme}`)),n=e===EF?n+1:e===Gee?n-1:e===ax||e===wF?+t.schemeCount||aUt:n,rMe(e)?bme(s,r,t.reverse):wn(s)?oMe(bme(s,r),n):e===Wee?s:s.slice(0,n)}function bme(e,t,n){return wn(e)&&(t||n)?sMe(e,xH(t||[0,1],n)):e}function xH(e,t){return t?e.slice().reverse():e}function YLe(e){Pe.call(this,null,e)}at(YLe,Pe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Wb(e.sort)),this.modified(n),t}});const _me="zero",KLe="center",XLe="normalize",QLe=["y0","y1"];function Fte(e){Pe.call(this,null,e)}Fte.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:_me,values:[_me,KLe,XLe]},{name:"as",type:"string",array:!0,length:2,default:QLe}]};at(Fte,Pe,{transform(e,t){var n=e.as||QLe,r=n[0],i=n[1],s=Wb(e.sort),o=e.field||IS,a=e.offset===KLe?bUt:e.offset===XLe?_Ut:wUt,u,l,c,f;for(u=EUt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function bUt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function _Ut(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function wUt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function EUt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const xUt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:FLe,datajoin:jLe,encode:BLe,legendentries:ULe,linkpath:Mte,pie:Lte,scale:WLe,sortitems:YLe,stack:Fte},Symbol.toStringTag,{value:"Module"}));var SUt=Math.abs,SH=Math.cos,K$=Math.sin,TUt=1e-6,JLe=Math.PI,TH=JLe/2,wme=CUt(2);function Eme(e){return e>1?TH:e<-1?-TH:Math.asin(e)}function CUt(e){return e>0?Math.sqrt(e):0}function AUt(e,t){var n=e*K$(t),r=30,i;do t-=i=(t+K$(t)-n)/(1+SH(t));while(SUt(i)>TUt&&--r>0);return t/2}function IUt(e,t,n){function r(i,s){return[e*i*SH(s=AUt(n,s)),t*K$(s)]}return r.invert=function(i,s){return s=Eme(s/t),[i/(e*SH(s)),Eme((2*s+K$(2*s))/n)]},r}var kUt=IUt(wme/TH,wme,JLe);function RUt(){return ip(kUt).scale(169.529)}const NUt=fCe(),CH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function PUt(e,t){return function n(){const r=t();return r.type=e,r.path=fCe().projection(r),r.copy=r.copy||function(){const i=n();return CH.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},eMe(r)}}function jte(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(X$[e]=PUt(e,t),this):X$[e]||null}function ZLe(e){return e&&e.path||NUt}const X$={albers:hCe,albersusa:dmt,azimuthalequalarea:hmt,azimuthalequidistant:pmt,conicconformal:ymt,conicequalarea:_3,conicequidistant:_mt,equalEarth:Emt,equirectangular:vmt,gnomonic:xmt,identity:Smt,mercator:mmt,mollweide:RUt,naturalEarth1:Tmt,orthographic:Cmt,stereographic:Amt,transversemercator:Imt};for(const e in X$)jte(e,X$[e]);function OUt(){}const Ip=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function e6e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),DUt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if($Ut((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,Ip[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,Ip[m|g<<1].forEach(b);for(Ip[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,Ip[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,Ip[m|g<<1|y<<2|v<<3].forEach(b);Ip[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,Ip[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,Ip[y<<2|v<<3].forEach(b);Ip[y<<3].forEach(b);function b(_){var x=[_[0][0]+h,_[0][1]+p],S=[_[1][0]+h,_[1][1]+p],E=o(x),T=o(S),A,k;(A=d[E])?(k=f[T])?(delete d[A.end],delete f[k.start],A===k?(A.ring.push(S),c(A.ring)):f[A.start]=d[k.end]={start:A.start,end:k.end,ring:A.ring.concat(k.ring)}):(delete d[A.end],A.ring.push(S),d[A.end=T]=A):(A=f[T])?(k=d[E])?(delete f[A.start],delete d[k.end],A===k?(A.ring.push(S),c(A.ring)):f[k.start]=d[A.end]={start:k.start,end:A.end,ring:k.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(x),f[A.start=E]=A):f[E]=d[T]={start:E,end:T,ring:[x,S]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Me("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:OUt,r):n===a},r}function DUt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function $Ut(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=MUt(e,t[n]))return i;return 0}function MUt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(LUt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function LUt(e,t,n){var r;return FUt(e,t,n)&&jUt(e[r=+(e[0]===t[0])],n[r],t[r])}function FUt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function jUt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function t6e(e,t,n){return function(r){var i=Hh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?Y0(s,o,e):a/(e+1);return Pu(s+u,o,u)}}function Bte(e){Pe.call(this,null,e)}Bte.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};at(Bte,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Ca,s=e6e().smooth(e.smooth!==!1),o=e.thresholds||BUt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Fe(o)?o:o(c.values));UUt(f,c,l,e),f.forEach(d=>{u.push(fF(l,_r(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function BUt(e,t,n){const r=t6e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Ac(t(i).values)))}function UUt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(wn(i)&&(i=i(n,r)),wn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(ar(i)?i:i[0])||1,a=(ar(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(n6e(t,o,a,u,l))}function n6e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function xme(e,t,n){const r=e>=0?e:see(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function Xj(e){return wn(e)?e:Aa(+e)}function r6e(){var e=u=>u[0],t=u=>u[1],n=IS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=xme(r[0],u,e)>>o,f=xme(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(_=>{const x=d+(+e(_)>>o),S=h+(+t(_)>>o);x>=0&&x<p&&S>=0&&S<m&&(g[x+S*p]+=+n(_))}),c>0&&f>0?(N_(p,m,g,y,c),P_(p,m,y,g,f),N_(p,m,g,y,c),P_(p,m,y,g,f),N_(p,m,g,y,c),P_(p,m,y,g,f)):c>0?(N_(p,m,g,y,c),N_(p,m,y,g,c),N_(p,m,g,y,c),v=y):f>0&&(P_(p,m,g,y,f),P_(p,m,y,g,f),P_(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/uK(v);for(let _=0,x=p*m;_<x;++_)v[_]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=Xj(u),a):e},a.y=function(u){return arguments.length?(t=Xj(u),a):t},a.weight=function(u){return arguments.length?(n=Xj(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Me("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Me("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=ft(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Me("invalid bandwidth"),r=u,a):r},a}function N_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function P_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Ute(e){Pe.call(this,null,e)}Ute.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const zUt=["x","y","weight","size","cellSize","bandwidth"];function i6e(e,t){return zUt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}at(Ute,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=VUt(r,e.groupby),s=(e.groupby||[]).map(Ji),o=i6e(r6e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>_r(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function VUt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function zte(e){Pe.call(this,null,e)}zte.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};at(zte,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e6e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||t6e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=i6e(r6e(),e)(i,!0),u=n6e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Fe(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(_r),n}});const AH="Feature",Vte="FeatureCollection",HUt="MultiPoint";function Hte(e){Pe.call(this,null,e)}Hte.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};at(Hte,Pe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Ca,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(ba(a))||s&&t.modified(ba(s))||o&&t.modified(ba(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:AH,geometry:{type:HUt,coordinates:r}})),this.value={type:Vte,features:n}}});function qte(e){Pe.call(this,null,e)}qte.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};at(qte,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Ca,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=ZLe(e.projection),n.materialize().reflow()):o=i===Ca||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=qUt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function qUt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Wte(e){Pe.call(this,null,e)}Wte.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};at(Wte,Pe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Gte(e){Pe.call(this,null,e)}Gte.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};at(Gte,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=WUt(ZLe(e.projection),e.field||Lc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function WUt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Yte(e){Pe.call(this,[],e),this.generator=qpt()}Yte.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};at(Yte,Pe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)wn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(i$e(n[0],i)):t.add.push(_r(i)),n[0]=i,t}});function Kte(e){Pe.call(this,null,e)}Kte.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};at(Kte,Pe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Ca,s=YUt(e.opacity,e),o=GUt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Ac(n.map(l=>Ac(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=_n({},l,u);r||(f.$max=Ac(c.values||[])),l[a]=KUt(c,f,o.dep?o:Aa(o(f)),s.dep?s:Aa(s(f)))}),t.reflow(!0).modifies(a)}});function GUt(e,t){let n;return wn(e)?(n=r=>K0(e(r,t)),n.dep=s6e(e)):n=Aa(K0(e||"#888")),n}function YUt(e,t){let n;return wn(e)?(n=r=>e(r,t),n.dep=s6e(e)):e?n=Aa(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function s6e(e){if(!wn(e))return!1;const t=nd(ba(e));return t.$x||t.$y||t.$value||t.$max}function KUt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:e0,d=F0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const _=n(t);m[y+0]=_.r,m[y+1]=_.g,m[y+2]=_.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function o6e(e){Pe.call(this,null,e),this.modified(!0)}at(o6e,Pe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=QUt(e.type),CH.forEach(r=>{e[r]!=null&&Sme(n,r,e[r])})):CH.forEach(r=>{e.modified(r)&&Sme(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&XUt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function XUt(e,t){const n=JUt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function QUt(e){const t=jte((e||"mercator").toLowerCase());return t||Me("Unrecognized projection type: "+e),t()}function Sme(e,t,n){wn(e[t])&&e[t](n)}function JUt(e){return e=ft(e),e.length===1?e[0]:{type:Vte,features:e.reduce((t,n)=>t.concat(ZUt(n)),[])}}function ZUt(e){return e.type===Vte?e.features:ft(e).filter(t=>t!=null).map(t=>t.type===AH?t:{type:AH,geometry:t})}const ezt=Object.freeze(Object.defineProperty({__proto__:null,contour:zte,geojson:Hte,geopath:qte,geopoint:Wte,geoshape:Gte,graticule:Yte,heatmap:Kte,isocontour:Bte,kde2d:Ute,projection:o6e},Symbol.toStringTag,{value:"Module"})),Tme={center:$ht,collide:ept,nbody:fpt,link:npt,x:dpt,y:hpt},$C="forces",IH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],tzt=["static","iterations"],a6e=["x","y","vx","vy"];function Xte(e){Pe.call(this,null,e)}Xte.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:a6e}]};at(Xte,Pe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(IH),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&u6e(n,e,0,t)):(this.value=n=rzt(t.source,e),n.on("tick",nzt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(tzt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==$C||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(a6e)}});function nzt(e,t){return()=>e.touch(t).run()}function rzt(e,t){const n=cpt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),u6e(n,t,!0).on("end",()=>s=!0)}function u6e(e,t,n,r){var i=ft(t.forces),s,o,a,u;for(s=0,o=IH.length;s<o;++s)a=IH[s],a!==$C&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=$C+s,a=n||t.modified($C,s)?szt(i[s]):r&&izt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force($C+s,null);return e.numForces=i.length,e}function izt(e,t){var n,r;for(n in e)if(wn(r=e[n])&&t.modified(ba(r)))return 1;return 0}function szt(e){var t,n;Ft(Tme,e.force)||Me("Unrecognized force: "+e.force),t=Tme[e.force]();for(n in e)wn(t[n])&&ozt(t[n],e[n],e);return t}function ozt(e,t,n){e(wn(t)?r=>t(r,n):t)}const azt=Object.freeze(Object.defineProperty({__proto__:null,force:Xte},Symbol.toStringTag,{value:"Module"}));function kH(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Qte(e){Pe.call(this,null,e)}Qte.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const uzt=e=>e.values;at(Qte,Pe,{transform(e,t){t.source||Me("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&cF(o.data)&&i.rem.push(o.data)}),this.value=s=$K({values:ft(e.keys).reduce((o,a)=>(o.key(a),o),lzt()).entries(i.source)},uzt),n&&s.each(o=>{o.children&&(o=_r(o.data),i.add.push(o),i.source.push(o))}),kH(s,Mt,Mt)),i.source.root=s,i}});function lzt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function lg(e){Pe.call(this,null,e)}const czt=(e,t)=>e.parent===t.parent?1:2;at(lg,Pe,{transform(e,t){(!t.source||!t.source.root)&&Me(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Wb(e.sort,o=>o.data)),fzt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?czt:IS);try{this.value=n(i)}catch(o){Me(o)}return i.each(o=>dzt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function fzt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function dzt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const RH=["x","y","r","depth","children"];function Jte(e){lg.call(this,e)}Jte.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:RH.length,default:RH}]};at(Jte,lg,{layout:hgt,params:["radius","size","padding"],fields:RH});const NH=["x0","y0","x1","y1","depth","children"];function Zte(e){lg.call(this,e)}Zte.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:NH.length,default:NH}]};at(Zte,lg,{layout:pgt,params:["size","round","padding"],fields:NH});function ene(e){Pe.call(this,null,e)}ene.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};at(ene,Pe,{transform(e,t){t.source||Me("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?kH(pce().id(e.key).parentId(e.parentKey)(i.source),e.key,Fc):kH(pce()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Cme={tidy:Sgt,cluster:Mmt},PH=["x","y","depth","children"];function tne(e){lg.call(this,e)}tne.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:PH.length,default:PH}]};at(tne,lg,{layout(e){const t=e||"tidy";if(Ft(Cme,t))return Cme[t]();Me("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:PH});function nne(e){Pe.call(this,[],e)}nne.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};at(nne,Pe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Me("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Mt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Mt(a)]&&s[Mt(u)]&&i.add.push(_r({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Mt(o)]=1),n.forEach(o=>{(s[Mt(o.source)]||s[Mt(o.target)])&&i.mod.push(o)})),i}});const Ame={binary:Cgt,dice:ak,slice:R6,slicedice:Agt,squarify:NCe,resquarify:Igt},OH=["x0","y0","x1","y1","depth","children"];function rne(e){lg.call(this,e)}rne.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:OH.length,default:OH}]};at(rne,lg,{layout(){const e=Tgt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ft(Ame,t)?e.tile(Ame[t]):Me("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:OH});const hzt=Object.freeze(Object.defineProperty({__proto__:null,nest:Qte,pack:Jte,partition:Zte,stratify:ene,tree:tne,treelinks:nne,treemap:rne},Symbol.toStringTag,{value:"Module"})),Qj=4278190080;function pzt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function mzt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=F0(s,o).getContext("2d"),l=F0(s,o).getContext("2d"),c=a&&F0(s,o).getContext("2d");n.forEach(T=>$O(u,T,!1)),$O(l,t,!1),a&&$O(c,t,!0);const f=Jj(u,s,o),d=Jj(l,s,o),h=a&&Jj(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,_,x,S,E;for(y=0;y<o;++y)for(g=0;g<s;++g)_=y*s+g,x=f[_]&Qj,E=d[_]&Qj,S=a&&h[_]&Qj,(x||S||E)&&(v=e(g),b=e(y),!i&&(x||E)&&p.set(v,b),a&&(x||S)&&m.set(v,b));return[p,m]}function Jj(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function $O(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>$O(e,s.items,n))}):zl[r].draw(e,{items:n?t.map(gzt):t})}function gzt(e){const t=fF(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const kp=5,Ma=31,fI=32,zg=new Uint32Array(fI+1),Tf=new Uint32Array(fI+1);Tf[0]=0;zg[0]=~Tf[0];for(let e=1;e<=fI;++e)Tf[e]=Tf[e-1]<<1|1,zg[e]=~Tf[e];function yzt(e,t){const n=new Uint32Array(~~((e*t+fI)/fI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>kp]&1<<(a&Ma)},set:(s,o)=>{const a=o*e+s;r(a>>>kp,1<<(a&Ma))},clear:(s,o)=>{const a=o*e+s;i(a>>>kp,~(1<<(a&Ma)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>kp,h=f>>>kp,d===h){if(n[d]&zg[c&Ma]&Tf[(f&Ma)+1])return!0}else{if(n[d]&zg[c&Ma]||n[h]&Tf[(f&Ma)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>kp,d=c>>>kp,f===d)r(f,zg[l&Ma]&Tf[(c&Ma)+1]);else for(r(f,zg[l&Ma]),r(d,Tf[(c&Ma)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>kp,d=c>>>kp,f===d)i(f,Tf[l&Ma]|zg[(c&Ma)+1]);else for(i(f,Tf[l&Ma]),i(d,zg[(c&Ma)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function vzt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>yzt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function bzt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=kl.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function Q$(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function p0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function _zt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!Q$(p,m,d,h,i,s)&&!p0(e,p,m,h,d,g,o,a)&&!p0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,p0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=kl.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,_,x,S,E,T,A,k,R,$,P,O,M,j,B,U;for(let V=0;V<f;++V){for(v=c[V].x,_=c[V].y,b=c[V].x2===void 0?v:c[V].x2,x=c[V].y2===void 0?_:c[V].y2,v>b&&(U=v,v=b,b=U),_>x&&(U=_,_=x,x=U),k=e(v),$=e(b),R=~~((k+$)/2),P=e(_),M=e(x),O=~~((P+M)/2),T=R;T>=k;--T)for(A=O;A>=P;--A)B=u(T,A,p,h,d),B&&([l.x,l.y,p,m]=B);for(T=R;T<=$;++T)for(A=O;A<=M;++A)B=u(T,A,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(j=Math.abs(b-v+x-_),S=(v+b)/2,E=(_+x)/2,j>=y&&!Q$(S,E,h,d,i,s)&&!p0(e,S,E,d,h,d,o,null)&&(y=j,l.x=S,l.y=E,g=!0))}return m||g?(S=h/2,E=d/2,o.setRange(e(l.x-S),e(l.y-E),e(l.x+S),e(l.y+E)),l.align="center",l.baseline="middle",!0):!1}}const wzt=[-1,-1,1,1],Ezt=[-1,1,-1,1];function xzt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=kl.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,_,x,S,E,T,A,k,R,$,P,O;for(let M=0;M<f;++M){for(b=c[M].x,x=c[M].y,_=c[M].x2===void 0?b:c[M].x2,S=c[M].y2===void 0?x:c[M].y2,p.push([e((b+_)/2),e((x+S)/2)]);p.length;)if([A,k]=p.pop(),!(o.get(A,k)||a.get(A,k)||u.get(A,k))){u.set(A,k);for(let j=0;j<4;++j)E=A+wzt[j],T=k+Ezt[j],u.outOfBounds(E,T,E,T)||p.push([E,T]);if(E=e.invert(A),T=e.invert(k),R=m,$=s,!Q$(E,T,h,d,i,s)&&!p0(e,E,T,d,h,R,o,a)&&!p0(e,E,T,d,h,d,o,null)){for(;$-R>=1;)P=(R+$)/2,p0(e,E,T,d,h,P,o,a)?$=P:R=P;R>m&&(l.x=E,l.y=T,m=R,g=!0)}}!g&&!n&&(O=Math.abs(_-b+S-x),E=(b+_)/2,T=(x+S)/2,O>=v&&!Q$(E,T,h,d,i,s)&&!p0(e,E,T,d,h,d,o,null)&&(v=O,l.x=E,l.y=T,y=!0))}return g||y?(E=h/2,T=d/2,o.setRange(e(l.x-E),e(l.y-T),e(l.x+E),e(l.y+T)),l.align="center",l.baseline="middle",!0):!1}}const Szt=["right","center","left"],Tzt=["bottom","middle","top"];function Czt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,_,x,S,E,T,A,k,R;for(let $=0;$<u;++$){if(h=(n[$]&3)-1,p=(n[$]>>>2&3)-1,m=h===0&&p===0||r[$]<0,g=h&&p?Math.SQRT1_2:1,y=r[$]<0?-1:1,v=c[1+h]+r[$]*h*g,E=c[4+p]+y*f*p/2+r[$]*p*g,_=E-f/2,x=E+f/2,T=e(v),k=e(_),R=e(x),!d)if(Ime(T,T,k,R,o,a,v,v,_,x,c,m))d=kl.width(l.datum,l.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,b=S+d/2,T=e(v),A=e(b),Ime(T,A,k,R,o,a,v,b,_,x,c,m))return l.x=h?h*y<0?b:v:S,l.y=p?p*y<0?x:_:E,l.align=Szt[h*y+1],l.baseline=Tzt[p*y+1],o.setRange(T,k,A,R),!0}return!1}}function Ime(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const Zj=0,eB=4,tB=8,nB=0,rB=1,iB=2,Azt={"top-left":Zj+nB,top:Zj+rB,"top-right":Zj+iB,left:eB+nB,middle:eB+rB,right:eB+iB,"bottom-left":tB+nB,bottom:tB+rB,"bottom-right":tB+iB},Izt={naive:bzt,"reduced-search":_zt,floodfill:xzt};function kzt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=Rzt(r,f),h=Nzt(i,f),p=Pzt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=Ozt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let _=-1,x=-1;const S=e.map(k=>{const R=v?kl.width(k,k.text):void 0;return _=Math.max(_,R),x=Math.max(x,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:R}});l=l===null||l===1/0?Math.max(_,x)+Math.max(...r):l;const E=vzt(t[0],t[1],l);let T;if(!b){n&&S.sort(($,P)=>n($.datum,P.datum));let k=!1;for(let $=0;$<h.length&&!k;++$)k=h[$]===5||d[$]<0;const R=(p&&o||g)&&e.map($=>$.datum);T=s.length||R?mzt(E,R||[],s,k,g):pzt(E,o&&S)}const A=g?Izt[c](E,T,o,u):Czt(E,T,h,d);return S.forEach(k=>k.opacity=+A(k)),S}function Rzt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Nzt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Azt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Pzt(e){return e&&e.mark&&e.mark.marktype}function Ozt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const DH=["x","y","opacity","align","baseline"],l6e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function ine(e){Pe.call(this,null,e)}ine.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:l6e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:DH.length,default:DH}]};at(ine,Pe,{transform(e,t){function n(s){const o=e[s];return wn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Me("Size parameter should be specified as a [width, height] array.");const i=e.as||DH;return kzt(t.materialize(t.SOURCE).source||[],e.size,e.sort,ft(e.offset==null?1:e.offset),ft(e.anchor||l6e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const Dzt=Object.freeze(Object.defineProperty({__proto__:null,label:ine},Symbol.toStringTag,{value:"Module"}));function c6e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function sne(e){Pe.call(this,null,e)}sne.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};at(sne,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=c6e(r,e.groupby),s=(e.groupby||[]).map(Ji),o=s.length,a=e.as||[Ji(e.x),Ji(e.y)],u=[];i.forEach(l=>{E$e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(_r(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const $H={constant:yee,linear:vee,log:v$e,exp:b$e,pow:_$e,quad:bee,poly:w$e},$zt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function one(e){Pe.call(this,null,e)}one.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys($H)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};at(one,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=c6e(r,e.groupby),s=(e.groupby||[]).map(Ji),o=e.method||"linear",a=e.order==null?3:e.order,u=$zt(o,a),l=e.as||[Ji(e.x),Ji(e.y)],c=$H[o],f=[];let d=e.extent;Ft($H,o)||Me("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(_r({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Hh(h,e.x),y=v=>{const b={};for(let _=0;_<s.length;++_)b[s[_]]=h.dims[_];b[l[0]]=v[0],b[l[1]]=v[1],f.push(_r(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):vF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const Mzt=Object.freeze(Object.defineProperty({__proto__:null,loess:sne,regression:one},Symbol.toStringTag,{value:"Module"}));function ane(e){Pe.call(this,null,e)}ane.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Lzt=[-1e5,-1e5,1e5,1e5];at(ane,Pe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:Lzt;const s=this.value=xK.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!jzt(u)?Fzt(u):null}return t.reflow(e.modified()).modifies(n)}});function Fzt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function jzt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Bzt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:ane},Symbol.toStringTag,{value:"Module"}));var sB=Math.PI/180,MC=64,MO=2048;function Uzt(){var e=[256,256],t,n,r,i,s,o,a,u=f6e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(F0()),m=Gzt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],_=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,E)=>E.size-S.size);++v<y;){var x=_[v];x.x=e[0]*(c()+.5)>>1,x.y=e[1]*(c()+.5)>>1,zzt(p,x,_,v),x.hasText&&h(m,x,g)&&(b.push(x),g?Hzt(g,x):g=[{x:x.x+x.x0,y:x.y+x.y0},{x:x.x+x.x1,y:x.y+x.y1}],x.x-=e[0]>>1,x.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(MC<<5)/m,p.height=MO/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),_=u(e),x=c()<.5?1:-1,S=-x,E,T,A;(E=_(S+=x))&&(T=~~E[0],A=~~E[1],!(Math.min(Math.abs(T),Math.abs(A))>=b));)if(m.x=y+T,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!Vzt(m,p,e[0]))&&(!g||qzt(m,g))){for(var k=m.sprite,R=m.width>>5,$=e[0]>>5,P=m.x-(R<<4),O=P&127,M=32-O,j=m.y1-m.y0,B=(m.y+m.y0)*$+(P>>5),U,V=0;V<j;V++){U=0;for(var D=0;D<=R;D++)p[B+D]|=U<<M|(D<R?(U=k[V*R+D])>>>O:0);B+=$}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=dv(p),f):n},f.fontStyle=function(p){return arguments.length?(i=dv(p),f):i},f.fontWeight=function(p){return arguments.length?(s=dv(p),f):s},f.rotate=function(p){return arguments.length?(o=dv(p),f):o},f.text=function(p){return arguments.length?(t=dv(p),f):t},f.spiral=function(p){return arguments.length?(u=Yzt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=dv(p),f):r},f.padding=function(p){return arguments.length?(a=dv(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function zzt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(MC<<5)/s,MO/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*sB),g=Math.cos(t.rotate*sB),y=c*g,v=c*m,b=d*g,_=d*m;c=Math.max(Math.abs(y+_),Math.abs(y-_))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=MC<<5&&(o=0,a+=u,u=0),a+d>=MO)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*sB),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var x=i.getImageData(0,0,(MC<<5)/s,MO/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var E=0,T=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var A=f*p+(h>>5),k=x[(a+p)*(MC<<5)+(o+h)<<2]?1<<31-h%32:0;S[A]|=k,E|=k}E?T=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+T,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function Vzt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function Hzt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function qzt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function f6e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Wzt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Gzt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function dv(e){return typeof e=="function"?e:function(){return e}}var Yzt={archimedean:f6e,rectangular:Wzt};const d6e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Kzt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function une(e){Pe.call(this,Uzt(),e)}une.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:d6e}]};at(une,Pe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Me("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return wn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Kzt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||d6e;let a=e.fontSize||14,u;if(wn(a)?u=e.fontSizeRange:a=Aa(a),u){const p=a,m=pr("sqrt")().domain(Hh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Bc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const Xzt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:une},Symbol.toStringTag,{value:"Module"})),Qzt=e=>new Uint8Array(e),Jzt=e=>new Uint16Array(e),D2=e=>new Uint32Array(e);function Zzt(){let e=8,t=[],n=D2(0),r=oP(0,e),i=oP(0,e);return{data:()=>t,seen:()=>n=eVt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=oP(s,e,r),i=oP(s,e))}}}function eVt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function oP(e,t,n){const r=(t<257?Qzt:t<65537?Jzt:D2)(e);return n&&r.set(n),r}function kme(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Rme(){let e=D2(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=D2(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=tVt(h,d),c)p=t,m=e,t=Array(c+f),e=D2(c+f),nVt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[tlt(u,a[0],0,l),G0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function tVt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),ilt(e,t)}function nVt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function lne(e){Pe.call(this,Zzt(),e),this._indices=null,this._dims=null}lne.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};at(lne,Pe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Rme()),s.push(kme(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,_,x,S,E;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(_={},v=t.mod,x=0,S=v.length;x<S;++x)_[v[x]._index]=1;for(x=0;x<h;++x)E=r[x],(!o[x]||e.modified("fields",x)||t.modified(E.fields))&&(y=E.fname,(m=p[y])||(s[y]=g=Rme(),p[y]=m=g.insert(E,t.source,0)),o[x]=kme(g,x,i[x]).onAdd(m,u));for(x=0,S=a.data().length;x<S;++x)b[x]||(l[x]!==u[x]?f.push(x):_[x]&&u[x]!==c&&d.push(x));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function cne(e){Pe.call(this,null,e)}cne.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};at(cne,Pe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const rVt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:lne,resolvefilter:cne},Symbol.toStringTag,{value:"Module"})),iVt="RawCode",lb="Literal",sVt="Property",oVt="Identifier",aVt="ArrayExpression",uVt="BinaryExpression",h6e="CallExpression",lVt="ConditionalExpression",cVt="LogicalExpression",fVt="MemberExpression",dVt="ObjectExpression",hVt="UnaryExpression";function dd(e){this.type=e}dd.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=pVt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function pVt(e){switch(e.type){case aVt:return e.elements;case uVt:case cVt:return[e.left,e.right];case h6e:return[e.callee].concat(e.arguments);case lVt:return[e.test,e.consequent,e.alternate];case fVt:return[e.object,e.property];case dVt:return e.properties;case sVt:return[e.key,e.value];case hVt:return[e.argument];case oVt:case lb:case iVt:default:return[]}}var fp,kt,$e,wa,Pr,MF=1,tR=2,cb=3,Yy=4,LF=5,Kb=6,Eu=7,nR=8,mVt=9;fp={};fp[MF]="Boolean";fp[tR]="<end>";fp[cb]="Identifier";fp[Yy]="Keyword";fp[LF]="Null";fp[Kb]="Numeric";fp[Eu]="Punctuator";fp[nR]="String";fp[mVt]="RegularExpression";var gVt="ArrayExpression",yVt="BinaryExpression",vVt="CallExpression",bVt="ConditionalExpression",p6e="Identifier",_Vt="Literal",wVt="LogicalExpression",EVt="MemberExpression",xVt="ObjectExpression",SVt="Property",TVt="UnaryExpression",no="Unexpected token %0",CVt="Unexpected number",AVt="Unexpected string",IVt="Unexpected identifier",kVt="Unexpected reserved word",RVt="Unexpected end of input",MH="Invalid regular expression",oB="Invalid regular expression: missing /",m6e="Octal literals are not allowed in strict mode.",NVt="Duplicate data property in object literal not allowed in strict mode",No="ILLEGAL",dI="Disabled.",PVt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),OVt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function FF(e,t){if(!e)throw new Error("ASSERT: "+t)}function Up(e){return e>=48&&e<=57}function fne(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function $2(e){return"01234567".indexOf(e)>=0}function DVt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function hI(e){return e===10||e===13||e===8232||e===8233}function rR(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&PVt.test(String.fromCharCode(e))}function J$(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&OVt.test(String.fromCharCode(e))}const $Vt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function g6e(){for(;$e<wa;){const e=kt.charCodeAt($e);if(DVt(e)||hI(e))++$e;else break}}function LH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<wa&&fne(kt[$e])?(r=kt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):dr({},no,No);return String.fromCharCode(i)}function MVt(){var e,t,n,r;for(e=kt[$e],t=0,e==="}"&&dr({},no,No);$e<wa&&(e=kt[$e++],!!fne(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&dr({},no,No),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function y6e(){var e,t;for(e=kt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(kt.charCodeAt($e)!==117&&dr({},no,No),++$e,e=LH("u"),(!e||e==="\\"||!rR(e.charCodeAt(0)))&&dr({},no,No),t=e);$e<wa&&(e=kt.charCodeAt($e),!!J$(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),kt.charCodeAt($e)!==117&&dr({},no,No),++$e,e=LH("u"),(!e||e==="\\"||!J$(e.charCodeAt(0)))&&dr({},no,No),t+=e);return t}function LVt(){var e,t;for(e=$e++;$e<wa;){if(t=kt.charCodeAt($e),t===92)return $e=e,y6e();if(J$(t))++$e;else break}return kt.slice(e,$e)}function FVt(){var e,t,n;return e=$e,t=kt.charCodeAt($e)===92?y6e():LVt(),t.length===1?n=cb:$Vt.hasOwnProperty(t)?n=Yy:t==="null"?n=LF:t==="true"||t==="false"?n=MF:n=cb,{type:n,value:t,start:e,end:$e}}function aB(){var e=$e,t=kt.charCodeAt($e),n,r=kt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:Eu,value:String.fromCharCode(t),start:e,end:$e};default:if(n=kt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:Eu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,kt.charCodeAt($e)===61&&++$e,{type:Eu,value:kt.slice(e,$e),start:e,end:$e}}}if(o=kt.substr($e,4),o===">>>=")return $e+=4,{type:Eu,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:Eu,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return $e+=2,{type:Eu,value:i,start:e,end:$e};if(i==="//"&&dr({},no,No),"<>=!+-*%&|^/".indexOf(r)>=0)return++$e,{type:Eu,value:r,start:e,end:$e};dr({},no,No)}function jVt(e){let t="";for(;$e<wa&&fne(kt[$e]);)t+=kt[$e++];return t.length===0&&dr({},no,No),rR(kt.charCodeAt($e))&&dr({},no,No),{type:Kb,value:parseInt("0x"+t,16),start:e,end:$e}}function BVt(e){let t="0"+kt[$e++];for(;$e<wa&&$2(kt[$e]);)t+=kt[$e++];return(rR(kt.charCodeAt($e))||Up(kt.charCodeAt($e)))&&dr({},no,No),{type:Kb,value:parseInt(t,8),octal:!0,start:e,end:$e}}function Nme(){var e,t,n;if(n=kt[$e],FF(Up(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=kt[$e++],n=kt[$e],e==="0"){if(n==="x"||n==="X")return++$e,jVt(t);if($2(n))return BVt(t);n&&Up(n.charCodeAt(0))&&dr({},no,No)}for(;Up(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="."){for(e+=kt[$e++];Up(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="e"||n==="E")if(e+=kt[$e++],n=kt[$e],(n==="+"||n==="-")&&(e+=kt[$e++]),Up(kt.charCodeAt($e)))for(;Up(kt.charCodeAt($e));)e+=kt[$e++];else dr({},no,No);return rR(kt.charCodeAt($e))&&dr({},no,No),{type:Kb,value:parseFloat(e),start:t,end:$e}}function UVt(){var e="",t,n,r,i,s=!1;for(t=kt[$e],FF(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<wa;)if(r=kt[$e++],r===t){t="";break}else if(r==="\\")if(r=kt[$e++],!r||!hI(r.charCodeAt(0)))switch(r){case"u":case"x":kt[$e]==="{"?(++$e,e+=MVt()):e+=LH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:$2(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<wa&&$2(kt[$e])&&(s=!0,i=i*8+"01234567".indexOf(kt[$e++]),"0123".indexOf(r)>=0&&$e<wa&&$2(kt[$e])&&(i=i*8+"01234567".indexOf(kt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&kt[$e]===`
`&&++$e;else{if(hI(r.charCodeAt(0)))break;e+=r}return t!==""&&dr({},no,No),{type:nR,value:e,octal:s,start:n,end:$e}}function zVt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";dr({},MH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{dr({},MH)}try{return new RegExp(e,t)}catch{return null}}function VVt(){var e,t,n,r,i;for(e=kt[$e],FF(e==="/","Regular expression literal must start with a slash"),t=kt[$e++],n=!1,r=!1;$e<wa;)if(e=kt[$e++],t+=e,e==="\\")e=kt[$e++],hI(e.charCodeAt(0))&&dr({},oB),t+=e;else if(hI(e.charCodeAt(0)))dr({},oB);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||dr({},oB),i=t.substr(1,t.length-2),{value:i,literal:t}}function HVt(){var e,t,n;for(t="",n="";$e<wa&&(e=kt[$e],!!J$(e.charCodeAt(0)));)++$e,e==="\\"&&$e<wa?dr({},no,No):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&dr({},MH,n),{value:n,literal:t}}function qVt(){var e,t,n,r;return Pr=null,g6e(),e=$e,t=VVt(),n=HVt(),r=zVt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function WVt(e){return e.type===cb||e.type===Yy||e.type===MF||e.type===LF}function v6e(){if(g6e(),$e>=wa)return{type:tR,start:$e,end:$e};const e=kt.charCodeAt($e);return rR(e)?FVt():e===40||e===41||e===59?aB():e===39||e===34?UVt():e===46?Up(kt.charCodeAt($e+1))?Nme():aB():Up(e)?Nme():aB()}function Ru(){const e=Pr;return $e=e.end,Pr=v6e(),$e=e.end,e}function b6e(){const e=$e;Pr=v6e(),$e=e}function GVt(e){const t=new dd(gVt);return t.elements=e,t}function Pme(e,t,n){const r=new dd(e==="||"||e==="&&"?wVt:yVt);return r.operator=e,r.left=t,r.right=n,r}function YVt(e,t){const n=new dd(vVt);return n.callee=e,n.arguments=t,n}function KVt(e,t,n){const r=new dd(bVt);return r.test=e,r.consequent=t,r.alternate=n,r}function dne(e){const t=new dd(p6e);return t.name=e,t}function LC(e){const t=new dd(_Vt);return t.value=e.value,t.raw=kt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Ome(e,t,n){const r=new dd(EVt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function XVt(e){const t=new dd(xVt);return t.properties=e,t}function Dme(e,t,n){const r=new dd(SVt);return r.key=t,r.value=n,r.kind=e,r}function QVt(e,t){const n=new dd(TVt);return n.operator=e,n.argument=t,n.prefix=!0,n}function dr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(FF(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function jF(e){e.type===tR&&dr(e,RVt),e.type===Kb&&dr(e,CVt),e.type===nR&&dr(e,AVt),e.type===cb&&dr(e,IVt),e.type===Yy&&dr(e,kVt),dr(e,no,e.value)}function Ea(e){const t=Ru();(t.type!==Eu||t.value!==e)&&jF(t)}function mi(e){return Pr.type===Eu&&Pr.value===e}function uB(e){return Pr.type===Yy&&Pr.value===e}function JVt(){const e=[];for($e=Pr.start,Ea("[");!mi("]");)mi(",")?(Ru(),e.push(null)):(e.push(fb()),mi("]")||Ea(","));return Ru(),GVt(e)}function $me(){$e=Pr.start;const e=Ru();return e.type===nR||e.type===Kb?(e.octal&&dr(e,m6e),LC(e)):dne(e.value)}function ZVt(){var e,t,n,r;if($e=Pr.start,e=Pr,e.type===cb)return n=$me(),Ea(":"),r=fb(),Dme("init",n,r);if(e.type===tR||e.type===Eu)jF(e);else return t=$me(),Ea(":"),r=fb(),Dme("init",t,r)}function eHt(){var e=[],t,n,r,i={},s=String;for($e=Pr.start,Ea("{");!mi("}");)t=ZVt(),t.key.type===p6e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?dr({},NVt):i[r]=!0,e.push(t),mi("}")||Ea(",");return Ea("}"),XVt(e)}function tHt(){Ea("(");const e=hne();return Ea(")"),e}const nHt={if:1};function rHt(){var e,t,n;if(mi("("))return tHt();if(mi("["))return JVt();if(mi("{"))return eHt();if(e=Pr.type,$e=Pr.start,e===cb||nHt[Pr.value])n=dne(Ru().value);else if(e===nR||e===Kb)Pr.octal&&dr(Pr,m6e),n=LC(Ru());else{if(e===Yy)throw new Error(dI);e===MF?(t=Ru(),t.value=t.value==="true",n=LC(t)):e===LF?(t=Ru(),t.value=null,n=LC(t)):mi("/")||mi("/=")?(n=LC(qVt()),b6e()):jF(Ru())}return n}function iHt(){const e=[];if(Ea("("),!mi(")"))for(;$e<wa&&(e.push(fb()),!mi(")"));)Ea(",");return Ea(")"),e}function sHt(){$e=Pr.start;const e=Ru();return WVt(e)||jF(e),dne(e.value)}function oHt(){return Ea("."),sHt()}function aHt(){Ea("[");const e=hne();return Ea("]"),e}function uHt(){var e,t,n;for(e=rHt();;)if(mi("."))n=oHt(),e=Ome(".",e,n);else if(mi("("))t=iHt(),e=YVt(e,t);else if(mi("["))n=aHt(),e=Ome("[",e,n);else break;return e}function Mme(){const e=uHt();if(Pr.type===Eu&&(mi("++")||mi("--")))throw new Error(dI);return e}function LO(){var e,t;if(Pr.type!==Eu&&Pr.type!==Yy)t=Mme();else{if(mi("++")||mi("--"))throw new Error(dI);if(mi("+")||mi("-")||mi("~")||mi("!"))e=Ru(),t=LO(),t=QVt(e.value,t);else{if(uB("delete")||uB("void")||uB("typeof"))throw new Error(dI);t=Mme()}}return t}function Lme(e){let t=0;if(e.type!==Eu&&e.type!==Yy)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function lHt(){var e,t,n,r,i,s,o,a,u,l;if(e=Pr,u=LO(),r=Pr,i=Lme(r),i===0)return u;for(r.prec=i,Ru(),t=[e,Pr],o=LO(),s=[u,r,o];(i=Lme(Pr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Pme(a,u,o),s.push(n);r=Ru(),r.prec=i,s.push(r),t.push(Pr),n=LO(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Pme(s[l-1].value,s[l-2],n),l-=2;return n}function fb(){var e,t,n;return e=lHt(),mi("?")&&(Ru(),t=fb(),Ea(":"),n=fb(),e=KVt(e,t,n)),e}function hne(){const e=fb();if(mi(","))throw new Error(dI);return e}function pne(e){kt=e,$e=0,wa=kt.length,Pr=null,b6e();const t=hne();if(Pr.type!==tR)throw new Error("Unexpect token after expression.");return t}var _6e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function w6e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Me("Missing arguments to clamp function."),o.length>3&&Me("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Me("Missing arguments to if function."),o.length>3&&Me("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function cHt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function E6e(e){e=e||{};const t=e.allowed?nd(e.allowed):{},n=e.forbidden?nd(e.forbidden):{},r=e.constants||_6e,i=(e.functions||w6e)(f),s=e.globalvar,o=e.fieldvar,a=wn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(dt(p))return p;const m=d[p.type];return m==null&&Me("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Ft(n,m)?Me("Illegal identifier: "+m):Ft(r,m)?r[m]:Ft(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[cHt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Me("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Ft(i,m)&&i[m];return y||Me("Unrecognized function: "+m),wn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const Fme=Symbol("vega_selection_getter");function x6e(e){return(!e.getter||!e.getter[Fme])&&(e.getter=Lc(e.field),e.getter[Fme]=!0),e.getter}const mne="intersect",jme="union",fHt="vlMulti",dHt="vlPoint",Bme="or",hHt="and",Vd="_vgsid_",pI=Lc(Vd),pHt="E",mHt="R",gHt="R-E",yHt="R-LE",vHt="R-RE",Z$="index:unit";function Ume(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=x6e(a)(e),M0(o)&&(o=ga(o)),M0(r[s])&&(r[s]=ga(r[s])),Fe(r[s])&&M0(r[s][0])&&(r[s]=r[s].map(ga)),a.type===pHt){if(Fe(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===mHt){if(!_w(o,r[s]))return!1}else if(a.type===vHt){if(!_w(o,r[s],!0,!1))return!1}else if(a.type===gHt){if(!_w(o,r[s],!1,!1))return!1}else if(a.type===yHt&&!_w(o,r[s],!1,!0))return!1;return!0}function bHt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[Z$]&&r[Z$].value:void 0,o=n===mne,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Ume(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Ume(t,l),o^h)return h;return a&&o}const S6e=Zx(pI),_Ht=S6e.left,wHt=S6e.right;function EHt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[Z$]&&r[Z$].value:void 0,o=n===mne,a=pI(t),u=_Ht(i,a);if(u===i.length||pI(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(wHt(i,a)-u<s.size)return!1}return!0}function xHt(e,t){return e.map(n=>_n(t.fields?{values:t.fields.map(r=>x6e(r)(n.datum))}:{[Vd]:pI(n.datum)},t))}function SHt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,_=0,x,S;_<b;++_)if(l=s[_],d=l.unit,c=l.fields,f=l.values,c&&f){for(x=0,S=c.length;x<S;++x)h=c[x],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=lB[`${y}_union`],m[d]=v(g,ft(f[x]));n&&(g=a[d]||(a[d]=[]),g.push(ft(f).reduce((E,T,A)=>(E[c[A].field]=T,E),{})))}else h=Vd,p=pI(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Vd]:p}));if(t=t||jme,o[Vd]?o[Vd]=lB[`${Vd}_${t}`](...Object.values(o[Vd])):Object.keys(o).forEach(E=>{o[E]=Object.keys(o[E]).map(T=>o[E][T]).reduce((T,A)=>T===void 0?A:lB[`${u[E]}_${t}`](T,A))}),s=Object.keys(a),n&&s.length){const E=r?dHt:fHt;o[E]=t===jme?{[Bme]:s.reduce((T,A)=>(T.push(...a[A]),T),[])}:{[hHt]:s.map(T=>({[Bme]:a[T]}))}}return o}var lB={[`${Vd}_union`]:dlt,[`${Vd}_intersect`]:clt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ga(t[0]),r=ga(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ga(t[0]),r=ga(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const THt=":",CHt="@";function gne(e,t,n,r){t[0].type!==lb&&Me("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Yn(t).value,o="unit",a=CHt+o,u=THt+i;s===mne&&!Ft(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Ft(r,u)||(r[u]=n.getData(i).tuplesRef())}function T6e(e){const t=this.context.data[e];return t?t.values.value:[]}function AHt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function IHt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Fc).insert(t)),1}function kHt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const iR=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},RHt=iR("format"),C6e=iR("timeFormat"),NHt=iR("utcFormat"),PHt=iR("timeParse"),OHt=iR("utcParse"),aP=new Date(2e3,0,1);function BF(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(aP.setYear(2e3),aP.setMonth(e),aP.setDate(t),C6e.call(this,aP,n))}function DHt(e){return BF.call(this,e,1,"%B")}function $Ht(e){return BF.call(this,e,1,"%b")}function MHt(e){return BF.call(this,0,2+e,"%A")}function LHt(e){return BF.call(this,0,2+e,"%a")}const FHt=":",jHt="@",FH="%",A6e="$";function yne(e,t,n,r){t[0].type!==lb&&Me("First argument to data functions must be a string literal.");const i=t[0].value,s=FHt+i;if(!Ft(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function BHt(e,t,n,r){t[0].type!==lb&&Me("First argument to indata must be a string literal."),t[1].type!==lb&&Me("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=jHt+s;Ft(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Xa(e,t,n,r){if(t[0].type===lb)zme(n,r,t[0].value);else for(e in n.scales)zme(n,r,e)}function zme(e,t,n){const r=FH+n;if(!Ft(t,r))try{t[r]=e.scaleRef(n)}catch{}}function dp(e,t){if(wn(e))return e;if(dt(e)){const n=t.scales[e];return n&&d9t(n.value)?n.value:void 0}}function UHt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Xa,n._range=Xa,n._scale=Xa;const r=i=>"_["+(i.type===lb?nt(FH+i.value):nt(FH)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function vne(e,t){return function(n,r,i){if(n){const s=dp(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const zHt=vne("area",Spt),VHt=vne("bounds",Ipt),HHt=vne("centroid",Dpt);function qHt(e,t){const n=dp(e,(t||this).context);return n&&n.scale()}function WHt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function bne(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function GHt(){return bne(this.context.dataflow,"warn",arguments)}function YHt(){return bne(this.context.dataflow,"info",arguments)}function KHt(){return bne(this.context.dataflow,"debug",arguments)}function cB(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function jH(e){const t=K0(e),n=cB(t.r),r=cB(t.g),i=cB(t.b);return .2126*n+.7152*r+.0722*i}function XHt(e,t){const n=jH(e),r=jH(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function QHt(){const e=[].slice.call(arguments);return e.unshift({}),_n(...e)}function I6e(e,t){return e===t||e!==e&&t!==t?!0:Fe(e)?Fe(t)&&e.length===t.length?JHt(e,t):!1:ht(e)&&ht(t)?k6e(e,t):!1}function JHt(e,t){for(let n=0,r=e.length;n<r;++n)if(!I6e(e[n],t[n]))return!1;return!0}function k6e(e,t){for(const n in e)if(!I6e(e[n],t[n]))return!1;return!0}function Vme(e){return t=>k6e(e,t)}function ZHt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Fc:Fe(n)||cF(n)?n:Vme(n),c.remove(f)),t&&c.insert(t),r&&(f=Vme(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function eqt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function tqt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Hme={};function nqt(e,t){const n=Hme[t]||(Hme[t]=Lc(t));return Fe(e)?e.map(n):n(e)}function _ne(e){return Fe(e)||ArrayBuffer.isView(e)?e:null}function wne(e){return _ne(e)||(dt(e)?e:null)}function rqt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _ne(e).join(...n)}function iqt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return wne(e).indexOf(...n)}function sqt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return wne(e).lastIndexOf(...n)}function oqt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return wne(e).slice(...n)}function aqt(e,t,n){return wn(n)&&Me("Function argument passed to replace."),String(e).replace(t,n)}function uqt(e){return _ne(e).slice().reverse()}function lqt(e,t,n){return qee(e||0,t||0,n||0)}function cqt(e,t){const n=dp(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function fqt(e,t){const n=dp(e,(t||this).context);return n?n.copy():void 0}function dqt(e,t){const n=dp(e,(t||this).context);return n?n.domain():[]}function hqt(e,t,n){const r=dp(e,(n||this).context);return r?Fe(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function pqt(e,t){const n=dp(e,(t||this).context);return n&&n.range?n.range():[]}function mqt(e,t,n){const r=dp(e,(n||this).context);return r?r(t):void 0}function gqt(e,t,n,r,i){e=dp(e,(i||this).context);const s=bMe(t,n);let o=e.domain(),a=o[0],u=Yn(o),l=Ca;return u-a?l=aMe(e,a,u):e=(e.interpolator?pr("sequential")().interpolator(e.interpolator()):pr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Yn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function yqt(e,t,n){const r=dp(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function vqt(e){let t=null;return function(n){return n?uI(n,t=t||lx(e)):e}}const R6e=e=>e.data;function N6e(e,t){const n=T6e.call(t,e);return n.root&&n.root.lookup||{}}function bqt(e,t,n){const r=N6e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(R6e):void 0}function _qt(e,t){const n=N6e(e,this)[t];return n?n.ancestors().map(R6e):void 0}const P6e=()=>typeof window<"u"&&window||null;function wqt(){const e=P6e();return e?e.screen:{}}function Eqt(){const e=P6e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function xqt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function O6e(e,t,n){if(!e)return[];const[r,i]=e,s=new xs().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return gLe(o,s,Sqt(t))}function Sqt(e){let t=null;if(e){const n=ft(e.marktype),r=ft(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Tqt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ft(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Cqt(e){return ft(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function Aqt(e,t,n){const{x:r,y:i,mark:s}=n,o=new xs().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),O6e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>Iqt(u.x,u.y,t))}function Iqt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const mI={random(){return Bc()},cumulativeNormal:mF,cumulativeLogNormal:fee,cumulativeUniform:mee,densityNormal:oee,densityLogNormal:cee,densityUniform:pee,quantileNormal:gF,quantileLogNormal:dee,quantileUniform:gee,sampleNormal:pF,sampleLogNormal:lee,sampleUniform:hee,isArray:Fe,isBoolean:Gy,isDate:M0,isDefined(e){return e!==void 0},isNumber:ar,isObject:ht,isRegExp:y3e,isString:dt,isTuple:cF,isValid(e){return e!=null&&e===e},toBoolean:HZ,toDate(e){return qZ(e)},toNumber:ga,toString:WZ,indexof:iqt,join:rqt,lastindexof:sqt,replace:aqt,reverse:uqt,slice:oqt,flush:m3e,lerp:v3e,merge:QHt,pad:w3e,peek:Yn,pluck:nqt,span:Fk,inrange:_w,truncate:E3e,rgb:K0,lab:GD,hcl:YD,hsl:yA,luminance:jH,contrast:XHt,sequence:Pu,format:RHt,utcFormat:NHt,utcParse:OHt,utcOffset:M3e,utcSequence:j3e,timeFormat:C6e,timeParse:PHt,timeOffset:$3e,timeSequence:F3e,timeUnitSpecifier:S3e,monthFormat:DHt,monthAbbrevFormat:$Ht,dayFormat:MHt,dayAbbrevFormat:LHt,quarter:f3e,utcquarter:d3e,week:C3e,utcweek:k3e,dayofyear:T3e,utcdayofyear:I3e,warn:GHt,info:YHt,debug:KHt,extent(e){return Hh(e)},inScope:WHt,intersect:O6e,clampRange:h3e,pinchDistance:eqt,pinchAngle:tqt,screen:wqt,containerSize:xqt,windowSize:Eqt,bandspace:lqt,setdata:IHt,pathShape:vqt,panLinear:a3e,panLog:u3e,panPow:l3e,panSymlog:c3e,zoomLinear:FZ,zoomLog:jZ,zoomPow:P$,zoomSymlog:BZ,encode:kHt,modify:ZHt,lassoAppend:Tqt,lassoPath:Cqt,intersectLasso:Aqt},kqt=["view","item","group","xy","x","y"],Rqt="event.vega.",D6e="this.",Ene={},$6e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${nt(A6e+e)}]`,functions:Nqt,constants:_6e,visitors:Ene},BH=E6e($6e);function Nqt(e){const t=w6e(e);kqt.forEach(n=>t[n]=Rqt+n);for(const n in mI)t[n]=D6e+n;return _n(t,UHt(e,mI,Ene)),t}function ms(e,t,n){return arguments.length===1?mI[e]:(mI[e]=t,n&&(Ene[e]=n),BH&&(BH.functions[e]=D6e+e),this)}ms("bandwidth",cqt,Xa);ms("copy",fqt,Xa);ms("domain",dqt,Xa);ms("range",pqt,Xa);ms("invert",hqt,Xa);ms("scale",mqt,Xa);ms("gradient",gqt,Xa);ms("geoArea",zHt,Xa);ms("geoBounds",VHt,Xa);ms("geoCentroid",HHt,Xa);ms("geoShape",yqt,Xa);ms("geoScale",qHt,Xa);ms("indata",AHt,BHt);ms("data",T6e,yne);ms("treePath",bqt,yne);ms("treeAncestors",_qt,yne);ms("vlSelectionTest",bHt,gne);ms("vlSelectionIdTest",EHt,gne);ms("vlSelectionResolve",SHt,gne);ms("vlSelectionTuples",xHt);function Wh(e,t){const n={};let r;try{e=dt(e)?e:nt(e)+"",r=pne(e)}catch{Me("Expression parse error: "+e)}r.visit(s=>{if(s.type!==h6e)return;const o=s.callee.name,a=$6e.visitors[o];a&&a(o,s.arguments,t,n)});const i=BH(r);return i.globals.forEach(s=>{const o=A6e+s;!Ft(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:_n({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Pqt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Oqt=nd(["rule"]),qme=nd(["group","image","rect"]);function Dqt(e,t){let n="";return Oqt[t]||(e.x2&&(e.x?(qme[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(qme[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function xne(e){return(e+"").toLowerCase()}function $qt(e){return xne(e)==="operator"}function Mqt(e){return xne(e)==="collect"}function jT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Lqt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Fqt={operator:(e,t)=>jT(e,["_"],t.code),parameter:(e,t)=>jT(e,["datum","_"],t.code),event:(e,t)=>jT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return jT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+nt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Dqt(r,n),i+="return m;",jT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(nt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),Lqt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function jqt(e){const t=this;$qt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Bqt(e){const t=this;if(e.params){const n=t.get(e.id);n||Me("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Uqt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Fe(i)?i.map(s=>Wme(s,n,t)):Wme(i,n,t)}return t}function Wme(e,t,n){if(!e||!ht(e))return e;for(let r=0,i=Gme.length,s;r<i;++r)if(s=Gme[r],Ft(e,s.key))return s.parse(e,t,n);return e}var Gme=[{key:"$ref",parse:zqt},{key:"$key",parse:Hqt},{key:"$expr",parse:Vqt},{key:"$field",parse:qqt},{key:"$encode",parse:Gqt},{key:"$compare",parse:Wqt},{key:"$context",parse:Yqt},{key:"$subflow",parse:Kqt},{key:"$tupleid",parse:Xqt}];function zqt(e,t){return t.get(e.$ref)||Me("Operator not defined: "+e.$ref)}function Vqt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=il(t.parameterExpression(e.$expr),e.$fields))}function Hqt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=VZ(e.$key,e.$flat,t.expr.codegen))}function qqt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Lc(e.$field,e.$name,t.expr.codegen))}function Wqt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ft(e.$compare).map(i=>i&&i.$tupleid?Mt:i);return t.fn[n]||(t.fn[n]=UZ(r,e.$order,t.expr.codegen))}function Gqt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=il(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function Yqt(e,t){return t}function Kqt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function Xqt(){return Mt}function Qqt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Me("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Jqt(e){var t=this,n=ht(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Me("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const Zqt={skip:!0};function eWt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function tWt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],Zqt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Fc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function M6e(e,t,n,r){return new L6e(e,t,n,r)}function L6e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Fqt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Yme(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}L6e.prototype=Yme.prototype={fork(){const e=new Yme(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Mqt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[xne(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Pqt,parseOperator:jqt,parseOperatorParameters:Bqt,parseParameters:Uqt,parseStream:Qqt,parseUpdate:Jqt,getState:eWt,setState:tWt};function nWt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),F6e(t,e.description()))}function F6e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function rWt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const fB="default";function iWt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:fB,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?dt(i)?i:i.user:fB,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return dt(r)||(i=r.item,r=r.user),UH(e,r&&r!==fB?r:i||r),i},{cursor:t})}function UH(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function eM(e,t){var n=e._runtime.data;return Ft(n,t)||Me("Unrecognized data set: "+t),n[t]}function sWt(e,t){return arguments.length<2?eM(this,e).values.value:UF.call(this,e,Gb().remove(Fc).insert(t))}function UF(e,t){s$e(t)||Me("Second argument to changes must be a changeset.");const n=eM(this,e);return n.modified=!0,this.pulse(n.input,t)}function oWt(e,t){return UF.call(this,e,Gb().insert(t))}function aWt(e,t){return UF.call(this,e,Gb().remove(t))}function j6e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function B6e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function zF(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function uWt(e){var t=zF(e),n=j6e(e),r=B6e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function lWt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=zF(e),o=t.changedTouches?t.changedTouches[0]:t,s=OF(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=cWt(e,n,s),t}function cWt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;dt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Aa(e),item:Aa(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Kme="view",fWt="timer",dWt="window",hWt={trap:!1};function pWt(e){const t=_n({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Fe(r[s])&&(r[s]=nd(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function U6e(e,t,n,r){e._eventListeners.push({type:n,sources:ft(t),handler:r})}function mWt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function uP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||ht(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function gWt(e,t,n){var r=this,i=new hF(n),s=function(l,c){r.runAsync(null,()=>{e===Kme&&mWt(r,t)&&l.preventDefault(),i.receive(lWt(r,l,c))})},o;if(e===fWt)uP(r,"timer",t)&&r.timer(s,t);else if(e===Kme)uP(r,"view",t)&&r.addEventListener(t,s,hWt);else if(e===dWt?uP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&uP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);U6e(r,o,t,s)}return i}function Xme(e){return e.item}function Qme(e){return e.item.mark.source}function Jme(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function yWt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Xme),Qme,Jme(e)),this.on(this.events("view","pointerout",Xme),Qme,Jme(t)),this}function vWt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Rl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const bWt="vega-bind",_Wt="vega-bind-name",wWt="vega-bind-radio";function EWt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=zZ(r.debounce,i.update))),(r.input==null&&r.element?xWt:TWt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function xWt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),U6e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(SWt(i))}}function SWt(e){return typeof Event<"u"?new Event(e):{type:e}}function TWt(e,t,n,r){const i=r.signal(n.signal),s=Rl("div",{class:bWt}),o=n.input==="radio"?s:s.appendChild(Rl("label"));o.appendChild(Rl("span",{class:_Wt},n.name||n.signal)),t.appendChild(s);let a=CWt;switch(n.input){case"checkbox":a=AWt;break;case"select":a=IWt;break;case"radio":a=kWt;break;case"range":a=RWt;break}a(e,o,n,i)}function CWt(e,t,n,r){const i=Rl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function AWt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Rl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function IWt(e,t,n,r){const i=Rl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};tM(o,r)&&(u.selected=!0),i.appendChild(Rl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(tM(n.options[a],o)){i.selectedIndex=a;return}}}function kWt(e,t,n,r){const i=Rl("span",{class:wWt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};tM(o,r)&&(u.checked=!0);const l=Rl("input",u);l.addEventListener("change",()=>e.update(o));const c=Rl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)tM(a[l].value,o)&&(a[l].checked=!0)}}function RWt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||Y0(s,i,100),a=Rl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Rl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function tM(e,t){return e===t||e+""==t+""}function z6e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,j6e(e),B6e(e),zF(e),i,s).background(e.background())}function Sne(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function NWt(e,t,n,r){const i=new r(e.loader(),Sne(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,zF(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function PWt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=DF(r);e=n._el=e?dB(n,e,!0):null,nWt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||eR,a=e?s.renderer:s.headless;return n._renderer=a?z6e(n,n._renderer,e,a):null,n._handler=NWt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=dB(n,t,!0):e.appendChild(Rl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=dB(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{EWt(n,u.element||t,u)})),n}function dB(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const BT=e=>+e||0,OWt=e=>({top:e,bottom:e,left:e,right:e});function Zme(e){return ht(e)?{top:BT(e.top),bottom:BT(e.bottom),left:BT(e.left),right:BT(e.right)}:OWt(BT(e))}async function Tne(e,t,n,r){const i=DF(t),s=i&&i.headless;return s||Me("Unrecognized renderer type: "+t),await e.runAsync(),z6e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function DWt(e,t){e!==f0.Canvas&&e!==f0.SVG&&e!==f0.PNG&&Me("Unrecognized image type: "+e);const n=await Tne(this,e,t);return e===f0.SVG?$Wt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function $Wt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function MWt(e,t){return(await Tne(this,f0.Canvas,e,t)).canvas()}async function LWt(e){return(await Tne(this,f0.SVG,e)).svg()}function FWt(e,t,n){return M6e(e,sx,mI,n).parse(t)}function jWt(e){var t=this._runtime.scales;return Ft(t,e)||Me("Unrecognized scale or projection: "+e),t[e].value}var V6e="width",H6e="height",Cne="padding",ege={skip:!0};function q6e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Cne?r.left+r.right:0)}function W6e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Cne?r.top+r.bottom:0)}function BWt(e){var t=e._signals,n=t[V6e],r=t[H6e],i=t[Cne];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=q6e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=W6e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function UWt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(V6e,n,ege),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(H6e,r,ege),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function zWt(e){return this._runtime.getState(e||{data:VWt,signals:HWt,recurse:!0})}function VWt(e,t){return t.modified&&Fe(t.input.value)&&!e.startsWith("_:vega:_")}function HWt(e,t){return!(e==="parent"||t instanceof sx.proxy)}function qWt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function WWt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Fft(n,t))}function GWt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",YWt(r))}function YWt(e){return e==null?"":Fe(e)?G6e(e):ht(e)&&!M0(e)?KWt(e):e+""}function KWt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Fe(n)?G6e(n):Y6e(n))}).join(`
`)}function G6e(e){return"["+e.map(Y6e).join(", ")+"]"}function Y6e(e){return Fe(e)?"[]":ht(e)&&!M0(e)?"{}":e}function XWt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function K6e(e,t){const n=this;if(t=t||{},rE.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=_n({},e.locale,t.locale);n.locale(K3e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||f0.Canvas,n._scenegraph=new VMe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||GWt,n._redraw=!0,n._handler=new eR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=pWt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=FWt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:_n({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=q6e(n,n._width),n._viewHeight=W6e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,BWt(n),rWt(n),iWt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function lP(e,t){return Ft(e._signals,t)?e._signals[t]:Me("Unrecognized signal name: "+nt(t))}function X6e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function tge(e,t,n,r){let i=X6e(n,r);return i||(i=Sne(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function nge(e,t,n){const r=X6e(t,n);return r&&t._targets.remove(r),e}at(K6e,rE,{async evaluate(e,t,n){if(await rE.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,uWt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&SO(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&F6e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=lP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Zme(e)):Zme(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(DF(e)||Me("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(rE.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(lP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:UWt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Sne(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return tge(this,e,lP(this,e),t)},removeSignalListener(e,t){return nge(this,lP(this,e),t)},addDataListener(e,t){return tge(this,e,eM(this,e).values,t)},removeDataListener(e,t){return nge(this,eM(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=UH(this,null);this._globalCursor=!!e,t&&UH(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:WWt,events:gWt,finalize:vWt,hover:yWt,data:sWt,change:UF,insert:oWt,remove:aWt,scale:jWt,initialize:PWt,toImageURL:DWt,toCanvas:MWt,toSVG:LWt,getState:zWt,setState:qWt,_watchPixelRatio:XWt});const QWt="view",nM="[",rM="]",Q6e="{",J6e="}",JWt=":",Z6e=",",ZWt="@",eGt=">",tGt=/[[\]{}]/,nGt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let e4e,t4e;function Ky(e,t,n){return e4e=t||QWt,t4e=n||nGt,n4e(e.trim()).map(zH)}function rGt(e){return t4e[e]}function M2(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function n4e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=M2(e,i,Z6e,nM+Q6e,rM+J6e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function zH(e){return e[0]==="["?iGt(e):sGt(e)}function iGt(e){const t=e.length;let n=1,r;if(n=M2(e,n,rM,nM,rM),n===t)throw"Empty between selector: "+e;if(r=n4e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==eGt)throw"Expected '>' after between selector: "+e;r=r.map(zH);const i=zH(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function sGt(e){const t={source:e4e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===J6e){if(a=e.lastIndexOf(Q6e),a>=0){try{r=oGt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===ZWt&&(i=++a),u=M2(e,a,JWt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=M2(e,a,nM),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=M2(e,a,rM),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==nM)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||tGt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):rGt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function oGt(e){const t=e.split(Z6e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function aGt(e){return ht(e)?e:{type:e||"pad"}}const UT=e=>+e||0,uGt=e=>({top:e,bottom:e,left:e,right:e});function lGt(e){return ht(e)?e.signal?e:{top:UT(e.top),bottom:UT(e.bottom),left:UT(e.left),right:UT(e.right)}:uGt(UT(e))}const ro=e=>ht(e)&&!Fe(e)?_n({},e):{value:e};function rge(e,t,n,r){return n!=null?(ht(n)&&!Fe(n)||Fe(n)&&n.length&&ht(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Vo(e,t,n){for(const r in t)rge(e,r,t[r]);for(const r in n)rge(e,r,n[r],"update")}function LS(e,t,n){for(const r in t)n&&Ft(n,r)||(e[r]=_n(e[r]||{},t[r]));return e}function X_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Ane="mark",Ine="frame",kne="scope",cGt="axis",fGt="axis-domain",dGt="axis-grid",hGt="axis-label",pGt="axis-tick",mGt="axis-title",gGt="legend",yGt="legend-band",vGt="legend-entry",bGt="legend-gradient",r4e="legend-label",_Gt="legend-symbol",wGt="legend-title",EGt="title",xGt="title-text",SGt="title-subtitle";function TGt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!X_(u,e)&&hB(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Ine?i.group:n===Ane?_n({},i.mark,i[t]):null;for(u in c)l=X_(u,e)||(u==="fill"||u==="stroke")&&(X_("fill",e)||X_("stroke",e)),l||hB(s,u,c[u]);ft(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)X_(h,e)||hB(s,h,d[h])}),e=_n({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=_n(o,e.enter),a&&(e.update=_n(a,e.update)),e}function hB(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const i4e=e=>dt(e)?nt(e):e.signal?`(${e.signal})`:s4e(e);function VF(e){if(e.gradient!=null)return AGt(e);let t=e.signal?`(${e.signal})`:e.color?CGt(e.color):e.field!=null?s4e(e.field):e.value!==void 0?nt(e.value):void 0;return e.scale!=null&&(t=IGt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${FO(e.exponent)})`),e.mult!=null&&(t+=`*${FO(e.mult)}`),e.offset!=null&&(t+=`+${FO(e.offset)}`),e.round&&(t=`round(${t})`),t}const cP=(e,t,n,r)=>`(${e}(${[t,n,r].map(VF).join(",")})+'')`;function CGt(e){return e.c?cP("hcl",e.h,e.c,e.l):e.h||e.s?cP("hsl",e.h,e.s,e.l):e.l||e.a?cP("lab",e.l,e.a,e.b):e.r||e.g||e.b?cP("rgb",e.r,e.g,e.b):null}function AGt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:nt(n));for(;t.length&&Yn(t)==null;)t.pop();return t.unshift(i4e(e.gradient)),`gradient(${t.join(",")})`}function FO(e){return ht(e)?"("+VF(e)+")":e}function s4e(e){return o4e(ht(e)?e:{datum:e})}function o4e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Me("Invalid field reference: "+nt(e));return e.signal||(r=dt(r)?lp(r).map(nt).join("]["):o4e(r)),t+"["+r+"]"}function IGt(e,t){const n=i4e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+FO(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function kGt(e){let t="";return e.forEach(n=>{const r=VF(n);t+=n.test?`(${n.test})?${r}:`:r}),Yn(t)===":"&&(t+="null"),t}function a4e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=TGt(e,t,n,r,i.config);for(const a in e)o[a]=RGt(e[a],t,s,i);return s}function RGt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=PGt(NGt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function NGt(e){return Fe(e)?kGt(e):VF(e)}function PGt(e,t,n,r){const i=Wh(e,t);return i.$fields.forEach(s=>r[s]=1),_n(n,i.$params),i.$expr}const OGt="outer",DGt=["value","update","init","react","bind"];function ige(e,t){Me(e+' for "outer" push: '+nt(t))}function u4e(e,t){const n=e.name;if(e.push===OGt)t.signals[n]||ige("No prior signal definition",n),DGt.forEach(r=>{e[r]!==void 0&&ige("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function VH(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function HF(e,t,n,r){return new VH(e,t,n,r)}function iM(e,t){return HF("operator",e,t)}function $t(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function gI(e,t){return t?{$field:e,$name:t}:{$field:e}}const HH=gI("key");function sge(e,t){return{$compare:e,$order:t}}function $Gt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const MGt="ascending",LGt="descending";function FGt(e){return ht(e)?(e.order===LGt?"-":"+")+qF(e.op,e.field):""}function qF(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Rne="scope",qH="view";function Ls(e){return e&&e.signal}function jGt(e){return e&&e.expr}function jO(e){if(Ls(e))return!0;if(ht(e)){for(const t in e)if(jO(e[t]))return!0}return!1}function Ef(e,t){return e??t}function I1(e){return e&&e.signal||e}const oge="timer";function yI(e,t){return(e.merge?UGt:e.stream?zGt:e.type?VGt:Me("Invalid stream specification: "+nt(e)))(e,t)}function BGt(e){return e===Rne?qH:e||qH}function UGt(e,t){const n=e.merge.map(i=>yI(i,t)),r=Nne({merge:n},e,t);return t.addStream(r).id}function zGt(e,t){const n=yI(e.stream,t),r=Nne({stream:n},e,t);return t.addStream(r).id}function VGt(e,t){let n;e.type===oge?(n=t.event(oge,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(BGt(e.source),e.type);const r=Nne({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Nne(e,t,n){let r=t.between;return r&&(r.length!==2&&Me('Stream "between" parameter must have 2 entries: '+nt(t)),e.between=[yI(r[0],n),yI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(HGt(t.marktype,t.markname,t.markrole)),t.source===Rne&&r.push("inScope(event.item)"),r.length&&(e.filter=Wh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function HGt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const qGt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function WGt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Me("Signal update missing events specification."),dt(s)&&(s=Ky(s,t.isSubscope()?Rne:qH)),s=ft(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[YGt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Me("Signal encode and update are mutually exclusive."),o="encode(item(),"+nt(r)+")"),i.update=dt(o)?Wh(o,t):o.expr!=null?Wh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:qGt,$params:{$value:t.signalRef(o.signal)}}:Me("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(_n(GGt(u,t),i)))}function GGt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):yI(e,t)}}function YGt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function KGt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Me("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Wh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>WGt(i,t,n.id))}const Hr=e=>(t,n,r)=>HF(e,n,t||void 0,r),l4e=Hr("aggregate"),XGt=Hr("axisticks"),c4e=Hr("bound"),hd=Hr("collect"),age=Hr("compare"),QGt=Hr("datajoin"),f4e=Hr("encode"),JGt=Hr("expression"),ZGt=Hr("facet"),eYt=Hr("field"),tYt=Hr("key"),nYt=Hr("legendentries"),rYt=Hr("load"),iYt=Hr("mark"),sYt=Hr("multiextent"),oYt=Hr("multivalues"),aYt=Hr("overlap"),uYt=Hr("params"),d4e=Hr("prefacet"),lYt=Hr("projection"),cYt=Hr("proxy"),fYt=Hr("relay"),h4e=Hr("render"),dYt=Hr("scale"),Xb=Hr("sieve"),hYt=Hr("sortitems"),p4e=Hr("viewlayout"),pYt=Hr("values");let mYt=0;const m4e={min:"min",max:"max",count:"sum"};function gYt(e,t){const n=e.type||"linear";tMe(n)||Me("Unrecognized scale type: "+nt(n)),t.addScale(e.name,{type:n,domain:void 0})}function yYt(e,t){const n=t.getScale(e.name).params;let r;n.domain=g4e(e.domain,e,t),e.range!=null&&(n.range=v4e(e,t,n)),e.interpolate!=null&&AYt(e.interpolate,n),e.nice!=null&&(n.nice=CYt(e.nice,t)),e.bins!=null&&(n.bins=TYt(e.bins,t));for(r in e)Ft(n,r)||r==="name"||(n[r]=Ec(e[r],t))}function Ec(e,t){return ht(e)?e.signal?t.signalRef(e.signal):Me("Unsupported object: "+nt(e)):e}function BO(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Ec(n,t))}function WF(e){Me("Can not find data set: "+nt(e))}function g4e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Me("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Fe(e)?vYt:e.fields?_Yt:bYt)(e,t,n)}function vYt(e,t,n){return e.map(r=>Ec(r,n))}function bYt(e,t,n){const r=n.getData(e.data);return r||WF(e.data),ux(t.type)?r.valuesRef(n,e.field,y4e(e.sort,!1)):iMe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function _Yt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=dt(o)?{data:r,field:o}:Fe(o)||o.signal?wYt(o,n):o,s.push(o),s),[]);return(ux(t.type)?EYt:iMe(t.type)?xYt:SYt)(e,n,i)}function wYt(e,t){const n="_:vega:_"+mYt++,r=hd({});if(Fe(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+nt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Xb({})]),{data:n,field:"data"}}function EYt(e,t,n){const r=y4e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||WF(l.data),c.countsRef(t,l.field,r)}),a={groupby:HH,pulse:o};r&&(i=r.op||"count",s=r.field?qF(i,r.field):"count",a.ops=[m4e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(l4e(a));const u=t.add(hd({pulse:$t(i)}));return s=t.add(pYt({field:HH,sort:t.sortRef(r),pulse:$t(u)})),$t(s)}function y4e(e,t){return e&&(!e.field&&!e.op?ht(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Me("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!m4e[e.op]&&Me("Multiple domain scales can not be sorted using "+e.op)),e}function xYt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||WF(i.data),s.domainRef(t,i.field)});return $t(t.add(oYt({values:r})))}function SYt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||WF(i.data),s.extentRef(t,i.field)});return $t(t.add(sYt({extents:r})))}function TYt(e,t){return e.signal||Fe(e)?BO(e,t):t.objectProperty(e)}function CYt(e,t){return e.signal?t.signalRef(e.signal):ht(e)?{interval:Ec(e.interval),step:Ec(e.step)}:Ec(e)}function AYt(e,t){t.interpolate=Ec(e.type||e),e.gamma!=null&&(t.interpolateGamma=Ec(e.gamma))}function v4e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(dt(i)){if(r&&Ft(r,i))return e=_n({},e,{range:r[i]}),v4e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=ux(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Me("Unrecognized scale range value: "+nt(i))}else if(i.scheme){n.scheme=Fe(i.scheme)?BO(i.scheme,t):Ec(i.scheme,t),i.extent&&(n.schemeExtent=BO(i.extent,t)),i.count&&(n.schemeCount=Ec(i.count,t));return}else if(i.step){n.rangeStep=Ec(i.step,t);return}else{if(ux(e.type)&&!Fe(i))return g4e(i,e,t);Fe(i)||Me("Unsupported range type: "+nt(i))}return i.map(s=>(Fe(s)?BO:Ec)(s,t))}function IYt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=WH(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=WH(n[i],i,t));t.addProjection(e.name,r)}function WH(e,t,n){return Fe(e)?e.map(r=>WH(r,t,n)):ht(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Me("Unsupported parameter object: "+nt(e)):e}const pd="top",FS="left",jS="right",vy="bottom",b4e="center",kYt="vertical",RYt="start",NYt="middle",PYt="end",GH="index",Pne="label",OYt="offset",hx="perc",DYt="perc2",Ic="value",sR="guide-label",One="guide-title",$Yt="group-title",MYt="group-subtitle",uge="symbol",UO="gradient",YH="discrete",KH="size",LYt="shape",FYt="fill",jYt="stroke",BYt="strokeWidth",UYt="strokeDash",zYt="opacity",Dne=[KH,LYt,FYt,jYt,BYt,UYt,zYt],oR={name:1,style:1,interactive:1},Jn={value:0},kc={value:1},GF="group",_4e="rect",$ne="rule",VYt="symbol",Qb="text";function vI(e){return e.type=GF,e.interactive=e.interactive||!1,e}function sl(e,t){const n=(r,i)=>Ef(e[r],Ef(t[r],i));return n.isVertical=r=>kYt===Ef(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Ef(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Ef(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Ef(e.columns,Ef(t.columns,+n.isVertical(!0))),n}function w4e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function HYt(e,t,n){const r=t.config.style[n];return r&&r[e]}function YF(e,t,n){return`item.anchor === '${RYt}' ? ${e} : item.anchor === '${PYt}' ? ${t} : ${n}`}const Mne=YF(nt(FS),nt(jS),nt(b4e));function qYt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ht(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function E4e(e,t){return t?e?ht(e)?Object.assign({},e,{offset:E4e(e.offset,t)}):{value:e,offset:t}:t:e}function Vl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=LS(e.encode,t,oR)):e.interactive=!1,e}function WYt(e,t,n,r){const i=sl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:Jn,x:Jn,y:Jn,width:ro(f),height:ro(d)},update:_n({},u,{opacity:kc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Jn}};return Vo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Vl({type:_4e,role:bGt,encode:h},r)}function GYt(e,t,n,r,i){const s=sl(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Jn,fill:{scale:t,field:Ic}};p[l]={signal:h+"datum."+hx,mult:u},p[c]=Jn,p[f]={signal:h+"datum."+DYt,mult:u},p[d]=ro(a);const m={enter:p,update:_n({},p,{opacity:kc}),exit:{opacity:Jn}};return Vo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Vl({type:_4e,role:yGt,key:Ic,from:i,encode:m},r)}const YYt=`datum.${hx}<=0?"${FS}":datum.${hx}>=1?"${jS}":"${b4e}"`,KYt=`datum.${hx}<=0?"${vy}":datum.${hx}>=1?"${pd}":"${NYt}"`;function lge(e,t,n,r){const i=sl(e,t),s=i.isVertical(),o=ro(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:Jn},update:c={opacity:kc,text:{field:Pne}},exit:{opacity:Jn}};return Vo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Ef(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:KYt},f="y",d="x",h="1-"):(l.align=c.align={signal:YYt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+hx,mult:a},l[d]=c[d]=o,o.offset=Ef(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+GH}:void 0,Vl({type:Qb,role:r4e,style:sR,key:Ic,from:r,encode:p,overlap:u},n)}function XYt(e,t,n,r,i){const s=sl(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${OYt} : datum.${KH}`,h=l?ro(l):{field:KH},p=`datum.${GH}`,m=`max(1, ${i})`;let g,y,v,b,_;h.mult=.5,g={enter:y={opacity:Jn,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:kc,x:y.x,y:y.y},exit:{opacity:Jn}};let x=null,S=null;e.fill||(x=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),Vo(g,{fill:s("symbolFillColor",x),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Dne.forEach(k=>{e[k]&&(v[k]=y[k]={scale:e[k],field:Ic})});const E=Vl({type:VYt,role:_Gt,key:Ic,from:f,clip:l?!0:void 0,encode:g},n.symbols),T=ro(c);T.offset=s("labelOffset"),g={enter:y={opacity:Jn,x:{signal:d,offset:T},y:h},update:v={opacity:kc,text:{field:Pne},x:y.x,y:y.y},exit:{opacity:Jn}},Vo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=Vl({type:Qb,role:r4e,style:sR,key:Ic,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:Jn,height:l?ro(l):Jn,opacity:Jn},exit:{opacity:Jn},update:v={opacity:kc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,_={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,_={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:GH}},vI({role:kne,from:r,encode:LS(g,o,oR),marks:[E,A],name:u,interactive:a,sort:_})}function QYt(e,t){const n=sl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Lne='item.orient === "left"',Fne='item.orient === "right"',KF=`(${Lne} || ${Fne})`,JYt=`datum.vgrad && ${KF}`,ZYt=YF('"top"','"bottom"','"middle"'),eKt=YF('"right"','"left"','"center"'),tKt=`datum.vgrad && ${Fne} ? (${eKt}) : (${KF} && !(datum.vgrad && ${Lne})) ? "left" : ${Mne}`,nKt=`item._anchor || (${KF} ? "middle" : "start")`,rKt=`${JYt} ? (${Lne} ? -90 : 90) : 0`,iKt=`${KF} ? (datum.vgrad ? (${Fne} ? "bottom" : "top") : ${ZYt}) : "top"`;function sKt(e,t,n,r){const i=sl(e,t),s={enter:{opacity:Jn},update:{opacity:kc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Jn}};return Vo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:nKt},angle:{signal:rKt},align:{signal:tKt},baseline:{signal:iKt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Vl({type:Qb,role:wGt,style:One,from:r,encode:s},n)}function oKt(e,t){let n;return ht(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+cge(e.path)+")":e.sphere&&(n="geoShape("+cge(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function cge(e){return ht(e)&&e.signal?e.signal:nt(e)}function x4e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===GF?kne:t||Ane}function aKt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||x4e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function uKt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function jne(e,t){const n=u$e(e.type);n||Me("Unrecognized transform type: "+nt(e.type));const r=HF(n.type.toLowerCase(),null,S4e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function S4e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=lKt(o,t,n)}return r}function lKt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return cKt(e,t,n);if(i===void 0){e.required&&Me("Missing required "+nt(t.type)+" parameter: "+nt(e.name));return}else{if(r==="param")return fKt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Ls(i)?i.map(s=>fge(e,s,n)):fge(e,i,n)}function fge(e,t,n){const r=e.type;if(Ls(t))return hge(r)?Me("Expression references can not be signals."):pB(r)?n.fieldRef(t):pge(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||pB(r);return i&&dKt(t)?n.exprRef(t.expr,t.as):i&&hKt(t)?gI(t.field,t.as):hge(r)?Wh(t,n):pKt(r)?$t(n.getData(t).values):pB(r)?gI(t):pge(r)?n.compareRef(t):t}}function cKt(e,t,n){return dt(t.from)||Me('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function fKt(e,t,n){const r=t[e.name];return e.array?(Fe(r)||Me("Expected an array of sub-parameters. Instead: "+nt(r)),r.map(i=>dge(e,i,n))):dge(e,r,n)}function dge(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Me("Unsupported parameter: "+nt(t));const s=_n(S4e(i,t,n),i.key);return $t(n.add(uYt(s)))}const dKt=e=>e&&e.expr,hKt=e=>e&&e.field,pKt=e=>e==="data",hge=e=>e==="expr",pB=e=>e==="field",pge=e=>e==="compare";function mKt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Me("Only group marks can be faceted."),r.field!=null?o=a=zO(r,n):(e.data?a=$t(n.getData(e.data).aggregate):(s=jne(_n({type:"aggregate",groupby:ft(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=zO(r,n),o=a=$t(n.add(s))),i=n.keyRef(r.groupby,!0))):o=$t(n.add(hd(null,[{}]))),o||(o=zO(e,n)),{key:i,pulse:o,parent:a}}function zO(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:$t(t.getData(e.data).output)}function db(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}db.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=$t(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new db(e,s,i,r,o)};function T4e(e){return dt(e)?e:null}function mge(e,t,n){const r=qF(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function zT(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=FGt(s);let l=T4e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:HH,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:$t(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(HF(r,void 0,d)),o&&(t.index[i]=f),c=$t(f),l!=null&&(a[l]=c)}return c}db.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=T4e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&mge(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:$t(r.output)},n&&n.field&&mge(e,u,n),a=e.add(l4e(u)),o=e.add(hd({pulse:$t(a)})),o={agg:a,ref:$t(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return $t(this.values)},extentRef(e,t){return zT(e,this,"extent","extent",t,!1)},domainRef(e,t){return zT(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return zT(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return zT(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return zT(e,this,"indata","tupleindex",t,!0,!0)}};function gKt(e,t,n){const r=e.from.facet,i=r.name,s=zO(r,t);let o;r.name||Me("Facet must have a name: "+nt(r)),r.data||Me("Facet must reference a data set: "+nt(r)),r.field?o=t.add(d4e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(ZGt({key:t.keyRef(r.groupby),group:$t(t.proxy(n.parent)),pulse:s})):Me("Facet must specify groupby or field: "+nt(r));const a=t.fork(),u=a.add(hd()),l=a.add(Xb({pulse:$t(u)}));a.addData(i,new db(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function yKt(e,t,n){const r=t.add(d4e({pulse:n.pulse})),i=t.fork();i.add(Xb()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function C4e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(iM()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Wh(l,t);u.update=c.$expr,u.params=c.$params}function XF(e,t){const n=x4e(e),r=e.type===GF,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===kne||n===Ine,a,u,l,c,f,d,h;const p=n===Ane||o||i,m=mKt(e.from,r,t);u=t.add(QGt({key:m.key||(e.key?gI(e.key):void 0),pulse:m.pulse,clean:!r}));const g=$t(u);u=l=t.add(hd({pulse:g})),u=t.add(iYt({markdef:aKt(e),interactive:uKt(e.interactive,t),clip:oKt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:$t(u)}));const y=$t(u);u=c=t.add(f4e(a4e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const E=jne(S,t),T=E.metadata;(T.generates||T.changes)&&Me("Mark transforms should not generate new data."),T.nomod||(c.params.mod=!0),E.params.pulse=$t(u),t.add(u=E)}),e.sort&&(u=t.add(hYt({sort:t.compareRef(e.sort),pulse:$t(u)})));const v=$t(u);(i||o)&&(o=t.add(p4e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=$t(o));const b=t.add(c4e({mark:y,pulse:d||v}));h=$t(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?gKt(e,t,m):p?yKt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=vKt(s,h,t));const _=t.add(h4e({pulse:h})),x=t.add(Xb({pulse:$t(_)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new db(t,l,_,x)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&Me("Marks only support modify triggers."),C4e(S,t,f)}))}function vKt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Ls(s)?n.signalRef(s.signal):s,method:Ls(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Ls(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return $t(n.add(aYt(o)))}function bKt(e,t){const n=t.config.legend,r=e.encode||{},i=sl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Dne.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Me("Missing valid scale for legend.");const p=_Kt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=$t(t.add(hd(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=$t(t.add(nYt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===UO?(h=[WYt(e,c,n,r.gradient),lge(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${I1(i.gradientLength())})/100))`)):p===YH?h=[GYt(e,c,n,r.gradient,v),lge(e,n,r.labels,v)]:(f=QYt(e,n),h=[XYt(e,n,r,v,I1(f.columns))],d.size=xKt(e,t,h[0].marks)),h=[vI({role:vGt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(sKt(e,n,r.title,g)),XF(vI({role:gGt,from:g,encode:LS(EKt(i,e,n),s,oR),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function _Kt(e,t){let n=e.type||uge;return!e.type&&wKt(e)===1&&(e.fill||e.stroke)&&(n=Xee(t)?UO:lH(t)?YH:uge),n!==UO?n:lH(t)?YH:UO}function wKt(e){return Dne.reduce((t,n)=>t+(e[n]?1:0),0)}function EKt(e,t,n){const r={enter:{},update:{}};return Vo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function xKt(e,t,n){const r=I1(gge("size",e,n)),i=I1(gge("strokeWidth",e,n)),s=I1(SKt(n[1].encode,t,sR));return Wh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function gge(e,t,n){return t[e]?`scale("${t[e]}",datum)`:w4e(e,n[0].encode)}function SKt(e,t,n){return w4e("fontSize",e)||HYt("fontSize",t,n)}const TKt=`item.orient==="${FS}"?-90:item.orient==="${jS}"?90:0`;function CKt(e,t){e=dt(e)?{text:e}:e;const n=sl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=$t(t.add(hd(null,[l])));return u.push(kKt(e,n,AKt(e),c)),e.subtitle&&u.push(RKt(e,n,r.subtitle,c)),XF(vI({role:EGt,from:c,encode:IKt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function AKt(e){const t=e.encode;return t&&t.title||_n({name:e.name,interactive:e.interactive,style:e.style},t)}function IKt(e,t){const n={enter:{},update:{}};return Vo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Mne},angle:{signal:TKt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),LS(n,t,oR)}function kKt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Vo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Vl({type:Qb,role:xGt,style:$Yt,from:r,encode:o},n)}function RKt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Vo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Vl({type:Qb,role:SGt,style:MYt,from:r,encode:o},n)}function NKt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(jne(r,t))}),e.on&&e.on.forEach(r=>{C4e(r,t,e.name)}),t.addDataPipeline(e.name,PKt(e,t,n))}function PKt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Ls(e.values)||jO(e.format)?(r.push(yge(t,e)),r.push(i=hv())):r.push(i=hv({$ingest:e.values,$format:e.format})):e.url?jO(e.url)||jO(e.format)?(r.push(yge(t,e)),r.push(i=hv())):r.push(i=hv({$request:e.url,$format:e.format})):e.source&&(i=a=ft(e.source).map(d=>$t(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=hv()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=fYt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,hv())),i||r.push(hv()),r.push(Xb({})),r}function hv(e){const t=hd({},e);return t.metadata={source:!0},t}function yge(e,t){return rYt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const A4e=e=>e===vy||e===pd,QF=(e,t,n)=>Ls(e)?MKt(e.signal,t,n):e===FS||e===pd?t:n,io=(e,t,n)=>Ls(e)?DKt(e.signal,t,n):A4e(e)?t:n,Gf=(e,t,n)=>Ls(e)?$Kt(e.signal,t,n):A4e(e)?n:t,I4e=(e,t,n)=>Ls(e)?LKt(e.signal,t,n):e===pd?{value:t}:{value:n},OKt=(e,t,n)=>Ls(e)?FKt(e.signal,t,n):e===jS?{value:t}:{value:n},DKt=(e,t,n)=>k4e(`${e} === '${pd}' || ${e} === '${vy}'`,t,n),$Kt=(e,t,n)=>k4e(`${e} !== '${pd}' && ${e} !== '${vy}'`,t,n),MKt=(e,t,n)=>Bne(`${e} === '${FS}' || ${e} === '${pd}'`,t,n),LKt=(e,t,n)=>Bne(`${e} === '${pd}'`,t,n),FKt=(e,t,n)=>Bne(`${e} === '${jS}'`,t,n),k4e=(e,t,n)=>(t=t!=null?ro(t):t,n=n!=null?ro(n):n,vge(t)&&vge(n)?(t=t?t.signal||nt(t.value):null,n=n?n.signal||nt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[_n({test:e},t)].concat(n||[])),vge=e=>e==null||Object.keys(e).length===1,Bne=(e,t,n)=>({signal:`${e} ? (${xw(t)}) : (${xw(n)})`}),jKt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${FS}' ? (${xw(r)}) : `:"")+(n!=null?`${e} === '${vy}' ? (${xw(n)}) : `:"")+(i!=null?`${e} === '${jS}' ? (${xw(i)}) : `:"")+(t!=null?`${e} === '${pd}' ? (${xw(t)}) : `:"")+"(null)"}),xw=e=>Ls(e)?e.signal:e==null?null:nt(e),BKt=(e,t)=>t===0?0:Ls(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},iE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function O_(e,t,n,r){let i;if(t&&Ft(t,e))return t[e];if(Ft(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[One][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[sR][i]}return null}function bge(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function UKt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Ls(o)){const f=bge([n.axisX,n.axisY]),d=bge([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=io(o,O_(l,n.axisX,i,r),O_(l,n.axisY,i,r));u={};for(l of d)u[l]=jKt(o.signal,O_(l,n.axisTop,i,r),O_(l,n.axisBottom,i,r),O_(l,n.axisLeft,i,r),O_(l,n.axisRight,i,r))}else a=o===pd||o===vy?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?_n({},i,a,u,s):i}function zKt(e,t,n,r){const i=sl(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Jn},update:a={opacity:kc},exit:{opacity:Jn}};Vo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=_ge(e,0),c=_ge(e,1);return o.x=a.x=io(s,l,Jn),o.x2=a.x2=io(s,c),o.y=a.y=Gf(s,l,Jn),o.y2=a.y2=Gf(s,c),Vl({type:$ne,role:fGt,from:r,encode:u},n)}function _ge(e,t){return{scale:e.scale,range:t}}function VKt(e,t,n,r,i){const s=sl(e,t),o=e.orient,a=e.gridScale,u=QF(o,1,-1),l=HKt(e.offset,u);let c,f,d;const h={enter:c={opacity:Jn},update:d={opacity:kc},exit:f={opacity:Jn}};Vo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Ic,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=io(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:_n(m,{mult:u,offset:l});return c.x=d.x=io(o,p,g),c.y=d.y=Gf(o,p,g),c.x2=d.x2=Gf(o,y),c.y2=d.y2=io(o,y),f.x=io(o,p),f.y=Gf(o,p),Vl({type:$ne,role:dGt,key:Ic,from:r,encode:h},n)}function HKt(e,t){if(t!==1)if(!ht(e))e=Ls(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=_n({},e);for(;n.mult!=null;)if(ht(n.mult))n=n.mult=_n({},n.mult);else return n.mult=Ls(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function qKt(e,t,n,r,i,s){const o=sl(e,t),a=e.orient,u=QF(a,-1,1);let l,c,f;const d={enter:l={opacity:Jn},update:f={opacity:kc},exit:c={opacity:Jn}};Vo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=ro(i);h.mult=u;const p={scale:e.scale,field:Ic,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=io(a,Jn,p),f.y2=l.y2=io(a,h),c.x=io(a,p),f.x=l.x=Gf(a,Jn,p),f.x2=l.x2=Gf(a,h),c.y=Gf(a,p),Vl({type:$ne,role:pGt,key:Ic,from:r,encode:d},n)}function mB(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function WKt(e,t,n,r,i,s){const o=sl(e,t),a=e.orient,u=e.scale,l=QF(a,-1,1),c=I1(o("labelFlush")),f=I1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=ro(i);g.mult=l,g.offset=ro(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Ic,band:.5,offset:E4e(s.offset,o("labelOffset"))},v=io(a,p?mB(u,c,'"left"','"right"','"center"'):{value:"center"},OKt(a,"left","right")),b=io(a,I4e(a,"bottom","top"),p?mB(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),_=mB(u,c,`-(${f})`,f,0);p=p&&f;const x={opacity:Jn,x:io(a,y,g),y:Gf(a,y,g)},S={enter:x,update:m={opacity:kc,text:{field:Pne},x:x.x,y:x.y,align:v,baseline:b},exit:{opacity:Jn,x:x.x,y:x.y}};Vo(S,{dx:!d&&p?io(a,_):null,dy:!h&&p?Gf(a,_):null}),Vo(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const E=o("labelBound");let T=o("labelOverlap");return T=T||E?{separation:o("labelSeparation"),method:T,order:"datum.index",bound:E?{scale:u,orient:a,tolerance:E}:null}:void 0,m.align!==v&&(m.align=iE(m.align,v)),m.baseline!==b&&(m.baseline=iE(m.baseline,b)),Vl({type:Qb,role:hGt,style:sR,key:Ic,from:r,encode:S,overlap:T},n)}function GKt(e,t,n,r){const i=sl(e,t),s=e.orient,o=QF(s,-1,1);let a,u;const l={enter:a={opacity:Jn,anchor:ro(i("titleAnchor",null)),align:{signal:Mne}},update:u=_n({},a,{opacity:kc,text:ro(e.title)}),exit:{opacity:Jn}},c={signal:`lerp(range("${e.scale}"), ${YF(0,1,.5)})`};return u.x=io(s,c),u.y=Gf(s,c),a.angle=io(s,Jn,BKt(o,90)),a.baseline=io(s,I4e(s,vy,pd),{value:vy}),u.angle=a.angle,u.baseline=a.baseline,Vo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),YKt(i,s,l,n),l.update.align=iE(l.update.align,a.align),l.update.angle=iE(l.update.angle,a.angle),l.update.baseline=iE(l.update.baseline,a.baseline),Vl({type:Qb,role:mGt,style:One,from:r,encode:l},n)}function YKt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=iE(ro(a),n.update[u]),!1):!X_(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?ro(o):io(t,ro(o),ro(s))}function KKt(e,t){const n=UKt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=sl(e,n),l=qYt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=$t(t.add(hd({},[c]))),d=$t(t.add(XGt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(VKt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(qKt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(WKt(e,n,r.labels,d,p,l))),c.domain&&h.push(zKt(e,n,r.domain,f)),c.title&&h.push(GKt(e,n,r.title,f)),XF(vI({role:cGt,from:f,encode:LS(XKt(u,e),i,oR),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function XKt(e,t){const n={enter:{},update:{}};return Vo(n,{orient:e("orient"),offset:e("offset")||0,position:Ef(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function R4e(e,t,n){const r=ft(e.signals),i=ft(e.scales);return n||r.forEach(s=>u4e(s,t)),ft(e.projections).forEach(s=>IYt(s,t)),i.forEach(s=>gYt(s,t)),ft(e.data).forEach(s=>NKt(s,t)),i.forEach(s=>yYt(s,t)),(n||r).forEach(s=>KGt(s,t)),ft(e.axes).forEach(s=>KKt(s,t)),ft(e.marks).forEach(s=>XF(s,t)),ft(e.legends).forEach(s=>bKt(s,t)),e.title&&CKt(e.title,t),t.parseLambdas(),t}const QKt=e=>LS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function JKt(e,t){const n=t.config,r=$t(t.root=t.add(iM())),i=ZKt(e,n);i.forEach(l=>u4e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(hd()),o=t.add(f4e(a4e(QKt(e.encode),GF,Ine,e.style,t,{pulse:$t(s)}))),a=t.add(p4e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:$t(o)}));t.operators.pop(),t.pushState($t(o),$t(a),null),R4e(e,t,i),t.operators.push(a);let u=t.add(c4e({mark:r,pulse:$t(a)}));return u=t.add(h4e({pulse:$t(u)})),u=t.add(Xb({pulse:$t(u)})),t.addData("root",new db(t,s,s,u)),t}function VT(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function ZKt(e,t){const n=o=>Ef(e[o],t[o]),r=[VT("background",n("background")),VT("autosize",aGt(n("autosize"))),VT("padding",lGt(n("padding"))),VT("width",n("width")||0),VT("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return ft(e.signals).forEach(o=>{Ft(i,o.name)?o=_n(i[o.name],o):r.push(o),s[o.name]=o}),ft(t.signals).forEach(o=>{!Ft(s,o.name)&&!Ft(i,o.name)&&r.push(o)}),r}function N4e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function wge(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}N4e.prototype=wge.prototype={parse(e){return R4e(e,this)},fork(){return new wge(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof VH?$t(e):e;return this.add(cYt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push($t(this.add(Xb({pulse:e})))),this._parent.push(t),this._lookup.push(n?$t(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Yn(this._parent)},encode(){return Yn(this._encode)},lookup(){return Yn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(dt(e))return gI(e,t);e.signal||Me("Unsupported field reference: "+nt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=$t(this.add(eYt(i)))}return r},compareRef(e){let t=!1;const n=s=>Ls(s)?(t=!0,this.signalRef(s.signal)):jGt(s)?(t=!0,this.exprRef(s.expr)):s,r=ft(e.field).map(n),i=ft(e.order).map(n);return t?$t(this.add(age({fields:r,orders:i}))):sge(r,i)},keyRef(e,t){let n=!1;const r=s=>Ls(s)?(n=!0,$t(i[s.signal])):s,i=this.signals;return e=ft(e).map(r),n?$t(this.add(tYt({fields:e,flat:t}))):$Gt(e,t)},sortRef(e){if(!e)return e;const t=qF(e.op,e.field),n=e.order||MGt;return n.signal?$t(this.add(age({fields:t,orders:this.signalRef(n.signal)}))):sge(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Ft(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Me("Duplicate signal name: "+nt(e));const n=t instanceof VH?t:this.add(iM(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Me("Unrecognized signal name: "+nt(e)),this.signals[e]},signalRef(e){return this.signals[e]?$t(this.signals[e]):(Ft(this.lambdas,e)||(this.lambdas[e]=this.add(iM(null))),$t(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Wh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ht(e)?e:this.signalRef(e.signal||Une(e))},exprRef(e,t){const n={expr:Wh(e,this)};return t&&(n.expr.$name=t),$t(this.add(JGt(n)))},addBinding(e,t){this.bindings||Me("Nested signals do not support binding: "+nt(e)),this.bindings.push(_n({signal:e},t))},addScaleProj(e,t){Ft(this.scales,e)&&Me("Duplicate scale or projection name: "+nt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,dYt(t))},addProjection(e,t){this.addScaleProj(e,lYt(t))},getScale(e){return this.scales[e]||Me("Unrecognized scale name: "+nt(e)),this.scales[e]},scaleRef(e){return $t(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ft(this.data,e)&&Me("Duplicate data set name: "+nt(e)),this.data[e]=t},getData(e){return this.data[e]||Me("Undefined data set name: "+nt(e)),this.data[e]},addDataPipeline(e,t){return Ft(this.data,e)&&Me("Duplicate data set name: "+nt(e)),this.addData(e,db.fromEntries(this,t))}};function Une(e){return(Fe(e)?eXt:tXt)(e)}function eXt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(ht(i)?i.signal||Une(i):nt(i))}return n+"]"}function tXt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+nt(r)+":"+(ht(i)?i.signal||Une(i):nt(i));return t+"}"}function nXt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function rXt(e,t,n){return ht(e)||Me("Input Vega specification must be an object."),t=kS(nXt(),t,e.config),JKt(e,new N4e(t,n)).toRuntime()}var iXt="5.29.0";_n(sx,r9t,q7t,xUt,ezt,azt,Dzt,hzt,Mzt,Bzt,Xzt,rVt);const sXt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:xs,CanvasHandler:eR,CanvasRenderer:W$,DATE:Ju,DAY:ma,DAYOFYEAR:qh,Dataflow:rE,Debug:n3e,Error:$Z,EventStream:hF,Gradient:bMe,GroupItem:CF,HOURS:Bl,Handler:wte,HybridHandler:cLe,HybridRenderer:_H,Info:t3e,Item:TF,MILLISECONDS:rd,MINUTES:Ul,MONTH:_a,Marks:zl,MultiPulse:tee,None:e3e,Operator:Jr,Parameters:dF,Pulse:L0,QUARTER:Qu,RenderType:f0,Renderer:Zk,ResourceLoader:CMe,SECONDS:jc,SVGHandler:QMe,SVGRenderer:Ate,SVGStringRenderer:lLe,Scenegraph:VMe,TIME_UNITS:GZ,Transform:Pe,View:K6e,WEEK:Os,Warn:MZ,YEAR:Mo,accessor:il,accessorFields:ba,accessorName:Ji,array:ft,ascending:oF,bandwidthNRD:see,bin:f$e,bootstrapCI:d$e,boundClip:_Le,boundContext:Kk,boundItem:mH,boundMark:jMe,boundStroke:ug,changeset:Gb,clampRange:h3e,codegenExpression:E6e,compare:UZ,constant:Aa,cumulativeLogNormal:fee,cumulativeNormal:mF,cumulativeUniform:mee,dayofyear:T3e,debounce:zZ,defaultLocale:XZ,definition:u$e,densityLogNormal:cee,densityNormal:oee,densityUniform:pee,domChild:Ns,domClear:hc,domCreate:l0,domFind:_te,dotbin:h$e,error:Me,expressionFunction:ms,extend:_n,extent:Hh,extentIndex:p3e,falsy:Pg,fastmap:NS,field:Lc,flush:m3e,font:NF,fontFamily:Jk,fontSize:cp,format:xO,formatLocale:O$,formats:ZZ,hasOwnProperty:Ft,id:Lk,identity:Ca,inferType:Q3e,inferTypes:J3e,ingest:_r,inherits:at,inrange:_w,interpolate:Qee,interpolateColors:xF,interpolateRange:sMe,intersect:gLe,intersectBoxLine:ww,intersectPath:ste,intersectPoint:ote,intersectRule:IMe,isArray:Fe,isBoolean:Gy,isDate:M0,isFunction:wn,isIterable:g3e,isNumber:ar,isObject:ht,isRegExp:y3e,isString:dt,isTuple:cF,key:VZ,lerp:v3e,lineHeight:my,loader:uF,locale:K3e,logger:LZ,lruCache:b3e,markup:Cte,merge:_3e,mergeConfig:kS,multiLineOffset:yte,one:IS,pad:w3e,panLinear:a3e,panLog:u3e,panPow:l3e,panSymlog:c3e,parse:rXt,parseExpression:pne,parseSelector:Ky,path:C6,pathCurves:nte,pathEqual:wLe,pathParse:lx,pathRectangle:EMe,pathRender:uI,pathSymbols:wMe,pathTrail:xMe,peek:Yn,point:OF,projection:jte,quantileLogNormal:dee,quantileNormal:gF,quantileUniform:gee,quantiles:ree,quantizeInterpolator:oMe,quarter:f3e,quartiles:iee,get random(){return Bc},randomInteger:a8t,randomKDE:uee,randomLCG:o8t,randomLogNormal:m$e,randomMixture:g$e,randomNormal:aee,randomUniform:y$e,read:t$e,regressionConstant:yee,regressionExp:b$e,regressionLinear:vee,regressionLoess:E$e,regressionLog:v$e,regressionPoly:w$e,regressionPow:_$e,regressionQuad:bee,renderModule:DF,repeat:CC,resetDefaultLocale:r5t,resetSVGClipId:TMe,resetSVGDefIds:l7t,responseType:e$e,runtimeContext:M6e,sampleCurve:vF,sampleLogNormal:lee,sampleNormal:pF,sampleUniform:hee,scale:pr,sceneEqual:Ite,sceneFromJSON:UMe,scenePickVisit:F$,sceneToJSON:BMe,sceneVisit:id,sceneZOrder:ate,scheme:Jee,serializeXML:sLe,setHybridRendererOptions:s7t,setRandom:i8t,span:Fk,splitAccessPath:lp,stringValue:nt,textMetrics:kl,timeBin:z3e,timeFloor:P3e,timeFormatLocale:sI,timeInterval:PS,timeOffset:$3e,timeSequence:F3e,timeUnitSpecifier:S3e,timeUnits:YZ,toBoolean:HZ,toDate:qZ,toNumber:ga,toSet:nd,toString:WZ,transform:l$e,transforms:sx,truncate:E3e,truthy:Fc,tupleid:Mt,typeParsers:oH,utcFloor:O3e,utcInterval:OS,utcOffset:M3e,utcSequence:j3e,utcdayofyear:I3e,utcquarter:d3e,utcweek:k3e,version:iXt,visitArray:Bg,week:C3e,writeConfig:RS,zero:e0,zoomLinear:FZ,zoomLog:jZ,zoomPow:P$,zoomSymlog:BZ},Symbol.toStringTag,{value:"Module"}));function oXt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var aXt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},uXt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},lXt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const cXt=Array.prototype.slice,pv=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,cXt.call(t,1))},fXt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var dXt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:fXt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return pv("join",arguments)},indexof:function(){return pv("indexOf",arguments)},lastindexof:function(){return pv("lastIndexOf",arguments)},slice:function(){return pv("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return pv("substring",arguments,String)},split:function(){return pv("split",arguments,String)},replace:function(){return pv("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const hXt=["view","item","group","xy","x","y"],XH=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&XH.add(setImmediate);const pXt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:aXt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),XH.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||dXt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>uXt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>lXt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,XH.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function HT(e,t,n,r,i,s){const o=a=>pXt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,hXt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var mXt={operator(e,t){const n=t.ast,r=e.functions;return i=>HT(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>HT(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>HT(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return HT(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=HT(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&oXt(o,r,s),l}}};const gXt="vega-lite",yXt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',vXt="5.18.1",bXt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],_Xt="https://vega.github.io/vega-lite/",wXt="Vega-Lite is a concise high-level language for interactive visualization.",EXt=["vega","chart","visualization"],xXt="build/vega-lite.js",SXt="build/vega-lite.min.js",TXt="build/vega-lite.min.js",CXt="build/src/index",AXt="build/src/index.d.ts",IXt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},kXt=["bin","build","src","vega-lite*","tsconfig.json"],RXt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},NXt={type:"git",url:"https://github.com/vega/vega-lite.git"},PXt="BSD-3-Clause",OXt={url:"https://github.com/vega/vega-lite/issues"},DXt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},$Xt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},MXt={vega:"^5.24.0"},LXt={node:">=18"},FXt="yarn@1.22.19",jXt={name:gXt,author:yXt,version:vXt,collaborators:bXt,homepage:_Xt,description:wXt,keywords:EXt,main:xXt,unpkg:SXt,jsdelivr:TXt,module:CXt,types:AXt,bin:IXt,files:kXt,scripts:RXt,repository:NXt,license:PXt,bugs:OXt,devDependencies:DXt,dependencies:$Xt,peerDependencies:MXt,engines:LXt,packageManager:FXt};function zne(e){return!!e.or}function Vne(e){return!!e.and}function Hne(e){return!!e.not}function VO(e,t){if(Hne(e))VO(e.not,t);else if(Vne(e))for(const n of e.and)VO(n,t);else if(zne(e))for(const n of e.or)VO(n,t);else t(e)}function sE(e,t){return Hne(e)?{not:sE(e.not,t)}:Vne(e)?{and:e.and.map(n=>sE(n,t))}:zne(e)?{or:e.or.map(n=>sE(n,t))}:t(e)}const nn=structuredClone;function P4e(e){throw new Error(e)}function px(e,t){const n={};for(const r of t)Ft(e,r)&&(n[r]=e[r]);return n}function zu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Br(e)).join(",")})`};function Bn(e){if(ar(e))return e;const t=dt(e)?e:Br(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function QH(e){return e===!1||e===null}function Un(e,t){return e.includes(t)}function hb(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function qne(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function O4e(e,...t){for(const n of t)BXt(e,n??{});return e}function BXt(e,t){for(const n of Ge(t))RS(e,n,t[n],!0)}function ch(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function UXt(e,t){const n=Ge(e),r=Ge(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function D4e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Wne(e,t){for(const n of e)if(t.has(n))return!0;return!1}function JH(e){const t=new Set;for(const n of e){const i=lp(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Gne(e,t){return e===void 0||t===void 0?!0:Wne(JH(e),JH(t))}function jr(e){return Ge(e).length===0}const Ge=Object.keys,Lo=Object.values,by=Object.entries;function bI(e){return e===!0||e===!1}function Ai(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function L2(e,t){return Hne(e)?`!(${L2(e.not,t)})`:Vne(e)?`(${e.and.map(n=>L2(n,t)).join(") && (")})`:zne(e)?`(${e.or.map(n=>L2(n,t)).join(") || (")})`:t(e)}function sM(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&sM(e[n],t)&&delete e[n],jr(e)}function aR(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Yne(e,t="datum"){const n=lp(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(nt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function $4e(e,t="datum"){return`${t}[${nt(lp(e).join("."))}]`}function zXt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Uc(e){return`${lp(e).map(zXt).join("\\.")}`}function pb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function BS(e){return`${lp(e).join(".")}`}function mx(e){return e?lp(e).length:0}function hs(...e){for(const t of e)if(t!==void 0)return t}let M4e=42;function L4e(e){const t=++M4e;return e?String(e)+t:t}function VXt(){M4e=42}function F4e(e){return j4e(e)?e:`__${e}`}function j4e(e){return e.startsWith("__")}function _I(e){if(e!==void 0)return(e%360+360)%360}function JF(e){return ar(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Ege=Object.getPrototypeOf(structuredClone({}));function Al(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Al(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Al(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Ege.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Ege.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Al(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Br(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const mm="row",gm="column",ZF="facet",Ii="x",po="y",md="x2",hp="y2",Xy="xOffset",US="yOffset",gd="radius",cg="radius2",sf="theta",fg="theta2",yd="latitude",vd="longitude",bd="latitude2",zc="longitude2",Zu="color",pp="fill",mp="stroke",el="shape",dg="size",Jb="angle",hg="opacity",Qy="fillOpacity",Jy="strokeOpacity",Zy="strokeWidth",ev="strokeDash",uR="text",gx="order",lR="detail",e5="key",mb="tooltip",t5="href",n5="url",r5="description",HXt={x:1,y:1,x2:1,y2:1},B4e={theta:1,theta2:1,radius:1,radius2:1};function U4e(e){return e in B4e}const Kne={longitude:1,longitude2:1,latitude:1,latitude2:1};function z4e(e){switch(e){case yd:return"y";case bd:return"y2";case vd:return"x";case zc:return"x2"}}function V4e(e){return e in Kne}const qXt=Ge(Kne),Xne={...HXt,...B4e,...Kne,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function oE(e){return e===Zu||e===pp||e===mp}const H4e={row:1,column:1,facet:1},xc=Ge(H4e),Qne={...Xne,...H4e},WXt=Ge(Qne),{order:Mun,detail:Lun,tooltip:Fun,...GXt}=Qne,{row:jun,column:Bun,facet:Uun,...YXt}=GXt;function KXt(e){return!!YXt[e]}function q4e(e){return!!Qne[e]}const XXt=[md,hp,bd,zc,fg,cg];function W4e(e){return Zb(e)!==e}function Zb(e){switch(e){case md:return Ii;case hp:return po;case bd:return yd;case zc:return vd;case fg:return sf;case cg:return gd}return e}function _y(e){if(U4e(e))switch(e){case sf:return"startAngle";case fg:return"endAngle";case gd:return"outerRadius";case cg:return"innerRadius"}return e}function gp(e){switch(e){case Ii:return md;case po:return hp;case yd:return bd;case vd:return zc;case sf:return fg;case gd:return cg}}function tl(e){switch(e){case Ii:case md:return"width";case po:case hp:return"height"}}function G4e(e){switch(e){case Ii:return"xOffset";case po:return"yOffset";case md:return"x2Offset";case hp:return"y2Offset";case sf:return"thetaOffset";case gd:return"radiusOffset";case fg:return"theta2Offset";case cg:return"radius2Offset"}}function Jne(e){switch(e){case Ii:return"xOffset";case po:return"yOffset"}}function QXt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const JXt=Ge(Xne),{x:zun,y:Vun,x2:Hun,y2:qun,xOffset:Wun,yOffset:Gun,latitude:Yun,longitude:Kun,latitude2:Xun,longitude2:Qun,theta:Jun,theta2:Zun,radius:eln,radius2:tln,...Zne}=Xne,ZXt=Ge(Zne),ere={x:1,y:1},yp=Ge(ere);function ps(e){return e in ere}const tre={theta:1,radius:1},eQt=Ge(tre);function i5(e){return e==="width"?Ii:po}const Y4e={xOffset:1,yOffset:1};function cR(e){return e in Y4e}const{text:nln,tooltip:rln,href:iln,url:sln,description:oln,detail:aln,key:uln,order:lln,...K4e}=Zne,tQt=Ge(K4e);function nQt(e){return!!Zne[e]}function rQt(e){switch(e){case Zu:case pp:case mp:case dg:case el:case hg:case Zy:case ev:return!0;case Qy:case Jy:case Jb:return!1}}const X4e={...ere,...tre,...Y4e,...K4e},s5=Ge(X4e);function pg(e){return!!X4e[e]}function iQt(e,t){return oQt(e)[t]}const Q4e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:cln,...sQt}=Q4e;function oQt(e){switch(e){case Zu:case pp:case mp:case r5:case lR:case e5:case mb:case t5:case gx:case hg:case Qy:case Jy:case Zy:case ZF:case mm:case gm:return Q4e;case Ii:case po:case Xy:case US:case yd:case vd:return sQt;case md:case hp:case bd:case zc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case dg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case ev:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case el:return{point:"always",geoshape:"always"};case uR:return{text:"always"};case Jb:return{point:"always",square:"always",text:"always"};case n5:return{image:"always"};case sf:return{text:"always",arc:"always"};case gd:return{text:"always",arc:"always"};case fg:case cg:return{arc:"always"}}}function gB(e){switch(e){case Ii:case po:case sf:case gd:case Xy:case US:case dg:case Jb:case Zy:case hg:case Qy:case Jy:case md:case hp:case fg:case cg:return;case ZF:case mm:case gm:case el:case ev:case uR:case mb:case t5:case n5:case r5:return"discrete";case Zu:case pp:case mp:return"flexible";case yd:case vd:case bd:case zc:case lR:case e5:case gx:return}}const aQt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},uQt={count:1,min:1,max:1};function qm(e){return!!e&&!!e.argmin}function tv(e){return!!e&&!!e.argmax}function nre(e){return dt(e)&&!!aQt[e]}const lQt=new Set(["count","valid","missing","distinct"]);function J4e(e){return dt(e)&&lQt.has(e)}function cQt(e){return dt(e)&&Un(["min","max"],e)}const fQt=new Set(["count","sum","distinct","valid","missing"]),dQt=new Set(["mean","average","median","q1","q3","min","max"]);function Z4e(e){return Gy(e)&&(e=y5(e,void 0)),"bin"+Ge(e).map(t=>o5(e[t])?Ai(`_${t}_${by(e[t])}`):Ai(`_${t}_${e[t]}`)).join("")}function li(e){return e===!0||e_(e)&&!e.binned}function To(e){return e==="binned"||e_(e)&&e.binned===!0}function e_(e){return ht(e)}function o5(e){return e==null?void 0:e.param}function xge(e){switch(e){case mm:case gm:case dg:case Zu:case pp:case mp:case Zy:case hg:case Qy:case Jy:case el:return 6;case ev:return 4;default:return 10}}function fR(e){return!!(e!=null&&e.expr)}function Au(e){const t=Ge(e||{}),n={};for(const r of t)n[r]=_l(e[r]);return n}function eFe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=px(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function Vg(e){return dt(e)||Fe(e)&&dt(e[0])}function Rt(e){return!!(e!=null&&e.signal)}function nv(e){return!!e.step}function hQt(e){return Fe(e)?!1:"fields"in e&&!("data"in e)}function pQt(e){return Fe(e)?!1:"fields"in e&&"data"in e}function om(e){return Fe(e)?!1:"field"in e&&"data"in e}const mQt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},gQt=Ge(mQt),yQt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},ZH=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function tFe(e){const t=Fe(e.condition)?e.condition.map(Sge):Sge(e.condition);return{..._l(e),condition:t}}function _l(e){if(fR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Sge(e){if(fR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function gi(e){if(fR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Rt(e)?e:e!==void 0?{value:e}:void 0}function vQt(e){return Rt(e)?e.signal:nt(e)}function Tge(e){return Rt(e)?e.signal:nt(e.value)}function $f(e){return Rt(e)?e.signal:e==null?null:nt(e)}function bQt(e,t,n){for(const r of n){const i=Wm(r,t.markDef,t.config);i!==void 0&&(e[r]=gi(i))}return e}function nFe(e){return[].concat(e.type,e.style??[])}function br(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Wm(e,t,n,r)}function Wm(e,t,n,{vgChannel:r}={}){return hs(r?oM(e,t,n.style):void 0,oM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function oM(e,t,n){return rFe(e,nFe(t),n)}function rFe(e,t,n){t=ft(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function iFe(e,t){return ft(e).reduce((n,r)=>(n.field.push(ot(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function sFe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Al(i,r))return;n.push(r)}),n}function oFe(e,t){return Al(e,t)||!t?e:e?[...ft(e),...ft(t)].join(", "):t}function aFe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Vg(n)||Rt(n))&&(Vg(r)||Rt(r)))return{explicit:e.explicit,value:oFe(n,r)};if(Vg(n)||Rt(n))return{explicit:e.explicit,value:n};if(Vg(r)||Rt(r))return{explicit:e.explicit,value:r};if(!Vg(n)&&!Rt(n)&&!Vg(r)&&!Rt(r))return{explicit:e.explicit,value:sFe(n,r)};throw new Error("It should never reach here")}function rre(e){return`Invalid specification ${Br(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const _Qt='Autosize "fit" only works for single views and layered views.';function Cge(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Age(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Ige(e){return e?`Dropping "fit-${e}" because spec has discrete ${tl(e)}.`:'Dropping "fit" because spec has discrete size.'}function ire(e){return`Unknown field for ${e}. Cannot calculate view size.`}function kge(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function wQt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function EQt(e){return`The "nearest" transform is not supported for ${e} marks.`}function uFe(e){return`Selection not supported for ${e} yet.`}function xQt(e){return`Cannot find a selection named "${e}".`}const SQt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",TQt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",CQt="Legend bindings are only supported for selections over an individual field or encoding channel.";function AQt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function IQt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const kQt="The same selection must be used to override scale domains in a layered view.",RQt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function NQt(e){return`Unknown repeated value "${e}".`}function Rge(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const PQt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function OQt(e){return`Unrecognized parse "${e}".`}function Nge(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const DQt="Attempt to add the same child twice.";function $Qt(e){return`Ignoring an invalid transform: ${Br(e)}.`}const MQt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Pge(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function LQt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Br(t)} is overridden by a child projection ${Br(n)}.`}const FQt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function jQt(e){return`${e}Offset dropped because ${e} is continuous`}function BQt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Br(n)}}.`}function lFe(e){return`Invalid field type "${e}".`}function UQt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function zQt(e){return`Invalid aggregation operator "${e}".`}function cFe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function VQt(e){return`Position range does not support relative band size for ${e}.`}function eq(e,t){return`Dropping ${Br(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const HQt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function a5(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function qQt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function WQt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function GQt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function YQt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function yB(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function KQt(e){return`The ${e} for range marks cannot be an expression`}function XQt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function QQt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function JQt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function ZQt(e){return`Cannot use the relative band size with ${e} scale.`}function eJt(e){return`Using unaggregated domain with raw field has no effect (${Br(e)}).`}function tJt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function nJt(e){return`Unaggregated domain is currently unsupported for log scale (${Br(e)}).`}function rJt(e){return`Cannot apply size to non-oriented mark "${e}".`}function iJt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function sJt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function fFe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function dFe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function oJt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Br(n)} and ${Br(r)}). Using ${Br(n)}.`}function aJt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Br(n)} and ${Br(r)}). Using the union of the two domains.`}function uJt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function lJt(e){return`Dropping sort property ${Br(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Oge="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",cJt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",fJt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",dJt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function hJt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function pJt(e){return`Stack is applied to a non-linear scale (${e}).`}function mJt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function aM(e,t){return`Invalid ${e}: ${Br(t)}.`}function gJt(e){return`Dropping day from datetime ${Br(e)} as day cannot be combined with other units.`}function yJt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function vJt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function bJt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Dge(e){return`1D error band does not support ${e}.`}function hFe(e){return`Channel ${e} is required for "binned" bin.`}function _Jt(e){return`Channel ${e} should not be used with "binned" bin.`}function wJt(e){return`Domain for ${e} is required for threshold scale.`}const pFe=LZ(MZ);let yx=pFe;function EJt(e){return yx=e,yx}function xJt(){return yx=pFe,yx}function Je(...e){yx.warn(...e)}function SJt(...e){yx.debug(...e)}function t_(e){if(e&&ht(e)){for(const t of ore)if(t in e)return!0}return!1}const mFe=["january","february","march","april","may","june","july","august","september","october","november","december"],TJt=mFe.map(e=>e.substr(0,3)),gFe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],CJt=gFe.map(e=>e.substr(0,3));function AJt(e){if(JF(e)&&(e=+e),ar(e))return e>4&&Je(aM("quarter",e)),e-1;throw new Error(aM("quarter",e))}function IJt(e){if(JF(e)&&(e=+e),ar(e))return e-1;{const t=e.toLowerCase(),n=mFe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=TJt.indexOf(r);if(i!==-1)return i;throw new Error(aM("month",e))}}function kJt(e){if(JF(e)&&(e=+e),ar(e))return e%7;{const t=e.toLowerCase(),n=gFe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=CJt.indexOf(r);if(i!==-1)return i;throw new Error(aM("day",e))}}function sre(e,t){const n=[];if(t&&e.day!==void 0&&Ge(e).length>1&&(Je(gJt(e)),e=nn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?IJt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?AJt(e.quarter):e.quarter;n.push(ar(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?kJt(e.day):e.day;n.push(ar(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function gb(e){const n=sre(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function RJt(e){const n=sre(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function NJt(e){const t=sre(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const yFe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},ore=Ge(yFe);function PJt(e){return!!yFe[e]}function n_(e){return ht(e)?e.binned:vFe(e)}function vFe(e){return e&&e.startsWith("binned")}function are(e){return e.startsWith("utc")}function OJt(e){return e.substring(3)}const DJt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function u5(e){return ore.filter(t=>_Fe(e,t))}function bFe(e){const t=u5(e);return t[t.length-1]}function _Fe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function $Jt(e,t,{end:n}={end:!1}){const r=Yne(t),i=are(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of ore)_Fe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),RJt(a)}function wFe(e){if(!e)return;const t=u5(e);return`timeUnitSpecifier(${Br(t)}, ${Br(DJt)})`}function MJt(e,t,n){if(!e)return;const r=wFe(e);return`${n||are(e)?"utc":"time"}Format(${t}, ${r})`}function uo(e){if(!e)return;let t;return dt(e)?vFe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ht(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),are(t.unit)&&(t.utc=!0,t.unit=OJt(t.unit)),t}function LJt(e){const{utc:t,...n}=uo(e);return n.unit?(t?"utc":"")+Ge(n).map(r=>Ai(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ge(n).map(r=>Ai(`_${r}_${n[r]}`)).join("")}function EFe(e,t=n=>n){const n=uo(e),r=bFe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=xFe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(gb(a))} - ${t(gb(i))}`}}const FJt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function jJt(e){return!!FJt[e]}function xFe(e,t=1){if(jJt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function BJt(e){return e==null?void 0:e.param}function ure(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function lre(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function cre(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function fre(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function dre(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function hre(e){if(e!=null&&e.field){if(Fe(e.range)&&e.range.length===2)return!0;if(Rt(e.range))return!0}return!1}function pre(e){return!!(e!=null&&e.field)&&(Fe(e.oneOf)||Fe(e.in))}function UJt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function SFe(e){return pre(e)||ure(e)||hre(e)||lre(e)||fre(e)||cre(e)||dre(e)}function Rd(e,t){return v5(e,{timeUnit:t,wrapTime:!0})}function zJt(e,t){return e.map(n=>Rd(n,t))}function TFe(e,t=!0){const{field:n}=e,r=uo(e.timeUnit),{unit:i,binned:s}=r||{},o=ot(e,{expr:"datum"}),a=i?`time(${s?o:$Jt(i,n)})`:o;if(ure(e))return`${a}===${Rd(e.equal,i)}`;if(lre(e)){const u=e.lt;return`${a}<${Rd(u,i)}`}else if(fre(e)){const u=e.gt;return`${a}>${Rd(u,i)}`}else if(cre(e)){const u=e.lte;return`${a}<=${Rd(u,i)}`}else if(dre(e)){const u=e.gte;return`${a}>=${Rd(u,i)}`}else{if(pre(e))return`indexof([${zJt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(UJt(e))return mre(a,e.valid);if(hre(e)){const{range:u}=e,l=Rt(u)?{signal:`${u.signal}[0]`}:u[0],c=Rt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Rd(l,i)+", "+Rd(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Rd(l,i)}`),c!==null&&f.push(`${a} <= ${Rd(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Br(e)}`)}function mre(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function VJt(e){return SFe(e)&&e.timeUnit?{...e,timeUnit:uo(e.timeUnit)}:e}const dR={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function HJt(e){return e==="quantitative"||e==="temporal"}function CFe(e){return e==="ordinal"||e==="nominal"}const yb=dR.quantitative,gre=dR.ordinal,vx=dR.temporal,yre=dR.nominal,zS=dR.geojson;function qJt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case yb:return"quantitative";case"t":case vx:return"temporal";case"o":case gre:return"ordinal";case"n":case yre:return"nominal";case zS:return"geojson"}}const Vu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},tq={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function WJt(e,t){const n=tq[e],r=tq[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const GJt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function $ge(e){return GJt[e]}const AFe=new Set(["linear","log","pow","sqrt","symlog"]),IFe=new Set([...AFe,"time","utc"]);function kFe(e){return AFe.has(e)}const RFe=new Set(["quantile","quantize","threshold"]),YJt=new Set([...IFe,...RFe,"sequential","identity"]),KJt=new Set(["ordinal","bin-ordinal","point","band"]);function co(e){return KJt.has(e)}function Hl(e){return YJt.has(e)}function Mf(e){return IFe.has(e)}function bx(e){return RFe.has(e)}const XJt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function QJt(e){return!dt(e)&&!!e.name}function NFe(e){return e==null?void 0:e.param}function JJt(e){return e==null?void 0:e.unionWith}function ZJt(e){return ht(e)&&"field"in e}const eZt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:fln,domain:dln,range:hln,rangeMax:pln,rangeMin:mln,scheme:gln,...tZt}=eZt,nZt=Ge(tZt);function nq(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Mf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Mf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Mf(e);case"nice":return Mf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Hl(e)&&!Un(["log","time","utc","threshold","quantile"],e)}}function PFe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return oE(e)?void 0:JQt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function rZt(e,t){return Un([gre,yre],t)?e===void 0||co(e):t===vx?Un([Vu.TIME,Vu.UTC,void 0],e):t===yb?kFe(e)||bx(e)||e===void 0:!0}function iZt(e,t,n=!1){if(!pg(e))return!1;switch(e){case Ii:case po:case Xy:case US:case sf:case gd:return Mf(t)||t==="band"?!0:t==="point"?!n:!1;case dg:case Zy:case hg:case Qy:case Jy:case Jb:return Mf(t)||bx(t)||Un(["band","point","ordinal"],t);case Zu:case pp:case mp:return t!=="band";case ev:case el:return t==="ordinal"||bx(t)}}function vre(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=_re(e);return Ze(n)&&!J4e(n.aggregate)&&i&&Mf(i.get("type"))?sZt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function sZt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return br("invalid",n,i)===null?[oZt(e,t),r]:r}function oZt(e,t){const n=bre(e,!0),i=Zb(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function bre(e,t=!0){return mre(dt(e)?e:ot(e,{expr:"datum"}),!t)}function aZt(e){const{datum:t}=e;return t_(t)?gb(t):`${Br(t)}`}function k1(e,t,n,r){const i={};if(t&&(i.scale=t),vp(e)){const{datum:s}=e;t_(s)?i.signal=gb(s):Rt(s)?i.signal=s.signal:fR(s)?i.signal=s.expr:i.value=s}else i.field=ot(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function uM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Rt(o)&&0<o&&o<1?"datum":void 0,u=ot(t,{expr:a,suffix:i}),l=n!==void 0?ot(n,{expr:a}):ot(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Rt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function uZt({scaleName:e,fieldDef:t}){const n=ot(t,{expr:"datum"}),r=ot(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function _re({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(cn(t)){const f=o==null?void 0:o.get("type");if(ru(t)){c??(c=wy({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(li(d)||c&&h&&p===vx)return a!=null&&a.impute?k1(t,s,{binSuffix:"mid"},{offset:u}):c&&!co(f)?uM({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):k1(t,s,gR(t,e)?{binSuffix:"range"}:{},{offset:u});if(To(d)){if(Ze(n))return uM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Je(hFe(e===Ii?md:hp))}}return k1(t,s,co(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(sd(t)){const f=t.value,d=u?{offset:u}:{};return{...F2(e,f),...d}}}return wn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function F2(e,t){return Un(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Un(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:gi(t)}function vb(e){return e&&e!=="number"&&e!=="time"}function OFe(e,t,n){return`${e}(${t}${n?`, ${Br(n)}`:""})`}const lZt="  ";function wre({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(vb(n))return Lf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=DFe(e,r,i),a=_x(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Lf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Lf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ze(e)&&e.timeUnit===void 0)return Lf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(Ex(e)){const c=fZt({field:o,timeUnit:Ze(e)?(u=uo(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:i_(e)&&((l=e.scale)==null?void 0:l.type)===Vu.UTC});return c?{signal:c}:void 0}if(t=rq({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ze(e)&&li(e.bin)){const c=ot(e,{expr:r,binSuffix:"end"});return{signal:hR(o,c,t,n,s)}}else return t||_x(e)==="quantitative"?{signal:`${LFe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function DFe(e,t,n){return Ze(e)?n?`${ot(e,{expr:t,suffix:"end"})}-${ot(e,{expr:t,suffix:"start"})}`:ot(e,{expr:t}):aZt(e)}function Lf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=DFe(e,r,i)),o!=="datum.value"&&Ze(e)&&li(e.bin)){const a=ot(e,{expr:r,binSuffix:"end"});return{signal:hR(o,a,t,n,s)}}return{signal:OFe(n,o,t)}}function $Fe(e,t,n,r,i,s){var o;if(!(dt(r)&&vb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&_x(e)==="quantitative"&&(i.normalizedNumberFormatType&&wx(e)&&e.stack==="normalize"||i.numberFormatType))){if(wx(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return rq({type:"quantitative",config:i,normalizeStack:!0});if(Ex(e)){const a=Ze(e)?(o=uo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:cZt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return rq({type:t,specifiedFormat:n,config:i})}}function MFe(e,t,n){var r;if(e&&(Rt(e)||e==="number"||e==="time"))return e;if(Ex(t)&&n!=="time"&&n!=="utc")return Ze(t)&&((r=uo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function rq({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(dt(t))return t;if(e===yb)return r?n.normalizedNumberFormat:n.numberFormat}function cZt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:wFe(t)}:r?void 0:n.timeFormat)}function LFe(e,t){return`format(${e}, "${t||""}")`}function Mge(e,t,n,r){return vb(n)?OFe(n,e,t):LFe(e,(dt(t)?t:void 0)??r.numberFormat)}function hR(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return hR(e,t,i.numberFormat,i.numberFormatType,i);const s=Mge(e,n,r,i),o=Mge(t,n,r,i);return`${mre(e,!1)} ? "null" : ${s} + "${lZt}" + ${o}`}function fZt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=dt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):MJt(t,e,s)}const lu={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},FFe=lu.arc,l5=lu.area,c5=lu.bar,dZt=lu.image,f5=lu.line,d5=lu.point,hZt=lu.rect,lM=lu.rule,jFe=lu.text,Ere=lu.tick,pZt=lu.trail,xre=lu.circle,Sre=lu.square,BFe=lu.geoshape;function r_(e){return["line","area","trail"].includes(e)}function wI(e){return["rect","bar","image","arc"].includes(e)}const mZt=new Set(Ge(lu));function Gh(e){return e.type}const gZt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],yZt=["fill","fillOpacity"],vZt=[...gZt,...yZt],bZt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Lge=Ge(bZt),_Zt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},wZt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},EZt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},UFe=Ge(EZt);function bb(e){return e&&e.band!=null}const xZt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},zFe=5,SZt={binSpacing:1,continuousBandSize:zFe,minBandSize:.25,timeUnitBandPosition:.5},TZt={binSpacing:0,continuousBandSize:zFe,minBandSize:.25,timeUnitBandPosition:.5},CZt={thickness:1};function AZt(e){return Gh(e)?e.type:e}const h5="min",IZt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Fge(e){return e in IZt}function VFe(e){return!!(e!=null&&e.encoding)}function Th(e){return e&&(e.op==="count"||!!e.field)}function HFe(e){return e&&Fe(e)}function pR(e){return"row"in e||"column"in e}function Tre(e){return!!e&&"header"in e}function p5(e){return"facet"in e}function kZt(e){return e.param}function RZt(e){return e&&!dt(e)&&"repeat"in e}function jge(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Cre(e){return"sort"in e}function wy({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(cn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ze(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Wm("timeUnitBandPosition",n,r);if(li(s))return .5}}function qFe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=tl(e),u=br(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ze(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Wm("timeUnitBandSize",r,i)};if(li(h)&&!co(s))return{band:1}}if(wI(r.type))return s?co(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function WFe(e,t,n,r){return li(e.bin)||e.timeUnit&&ru(e)&&e.type==="temporal"?wy({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function GFe(e){return e&&!!e.sort&&!e.field}function m5(e){return e&&"condition"in e}function g5(e){const t=e==null?void 0:e.condition;return!!t&&!Fe(t)&&Ze(t)}function mR(e){const t=e==null?void 0:e.condition;return!!t&&!Fe(t)&&cn(t)}function NZt(e){const t=e==null?void 0:e.condition;return!!t&&(Fe(t)||sd(t))}function Ze(e){return e&&(!!e.field||e.aggregate==="count")}function _x(e){return e==null?void 0:e.type}function vp(e){return e&&"datum"in e}function m0(e){return ru(e)&&!fM(e)||cM(e)}function Bge(e){return ru(e)&&e.type==="quantitative"&&!e.bin||cM(e)}function cM(e){return vp(e)&&ar(e.datum)}function cn(e){return Ze(e)||vp(e)}function ru(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function sd(e){return e&&"value"in e&&"value"in e}function i_(e){return e&&("scale"in e||"sort"in e)}function wx(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function YFe(e){return e&&"legend"in e}function KFe(e){return e&&("format"in e||"formatType"in e)}function PZt(e){return zu(e,["legend","axis","header","scale"])}function OZt(e){return"op"in e}function ot(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if($Zt(e))n=F4e("count");else{let o;if(!t.nofn)if(OZt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;li(a)?(o=Z4e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?tv(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):qm(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!n_(l)&&(o=LJt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?BS(n):t.expr?$4e(n,t.expr)+s:Uc(n)+s}function fM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ze(e)&&!!e.bin;case"temporal":return!1}throw new Error(lFe(e.type))}function DZt(e){var t;return i_(e)&&bx((t=e.scale)==null?void 0:t.type)}function $Zt(e){return e.aggregate==="count"}function MZt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(li(r))return`${n} (binned)`;if(i&&!n_(i)){const a=(o=uo(i))==null?void 0:o.unit;if(a)return`${n} (${u5(a).join("-")})`}else if(s)return tv(s)?`${n} for max ${s.argmax}`:qm(s)?`${n} for min ${s.argmin}`:`${aR(s)} of ${n}`;return n}function LZt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(tv(t))return`${i} for argmax(${t.argmax})`;if(qm(t))return`${i} for argmin(${t.argmin})`;const s=r&&!n_(r)?uo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||li(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const XFe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return LZt(e);default:return MZt(e,t)}};let QFe=XFe;function JFe(e){QFe=e}function FZt(){JFe(XFe)}function aE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Are(e))==null?void 0:a.title;if(!Ze(e))return i??e.title;const s=e,o=r?Ire(s,t):void 0;return n?hs(i,s.title,o):i??s.title??o}function Are(e){if(wx(e)&&e.axis)return e.axis;if(YFe(e)&&e.legend)return e.legend;if(Tre(e)&&e.header)return e.header}function Ire(e,t){return QFe(e,t)}function dM(e){if(KFe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Are(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function jZt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Cre(e)&&Fe(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!tv(n)&&!qm(n))return"quantitative";if(i_(e)&&((s=e.scale)!=null&&s.type))switch(tq[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Yh(e){if(Ze(e))return e;if(g5(e))return e.condition}function Ds(e){if(cn(e))return e;if(mR(e))return e.condition}function ZFe(e,t,n,r={}){if(dt(e)||ar(e)||Gy(e)){const i=dt(e)?"string":ar(e)?"number":"boolean";return Je(BQt(t,i,e)),{value:e}}return cn(e)?hM(e,t,n,r):mR(e)?{...e,condition:hM(e.condition,t,n,r)}:e}function hM(e,t,n,r){if(KFe(e)){const{format:i,formatType:s,...o}=e;if(vb(s)&&!n.customFormatTypes)return Je(Pge(t)),hM(o,t,n,r)}else{const i=wx(e)?"axis":YFe(e)?"legend":Tre(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(vb(o)&&!n.customFormatTypes)return Je(Pge(t)),hM({...e,[i]:a},t,n,r)}}return Ze(e)?kre(e,t,r):BZt(e)}function BZt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=ar(n)?"quantitative":dt(n)?"nominal":t_(n)?"temporal":void 0,{...e,type:t}}function kre(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!nre(r)&&!tv(r)&&!qm(r)&&(Je(zQt(r)),delete a.aggregate),i&&(a.timeUnit=uo(i)),o&&(a.field=`${o}`),li(s)&&(a.bin=y5(s,t)),To(s)&&!ps(t)&&Je(_Jt(t)),ru(a)){const{type:u}=a,l=qJt(u);u!==l&&(a.type=l),u!=="quantitative"&&J4e(r)&&(Je(UQt(u,r)),a.type="quantitative")}else if(!W4e(t)){const u=jZt(a,t);a.type=u}if(ru(a)){const{compatible:u,warning:l}=UZt(a,t)||{};u===!1&&Je(l)}if(Cre(a)&&dt(a.sort)){const{sort:u}=a;if(Fge(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Fge(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Tre(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function y5(e,t){return Gy(e)?{maxbins:xge(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:xge(t)}:e}const D_={compatible:!0};function UZt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case mm:case gm:case ZF:return fM(e)?D_:{compatible:!1,warning:WQt(t)};case Ii:case po:case Xy:case US:case Zu:case pp:case mp:case uR:case lR:case e5:case mb:case t5:case n5:case Jb:case sf:case gd:case r5:return D_;case vd:case zc:case yd:case bd:return n!==yb?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:D_;case hg:case Qy:case Jy:case Zy:case dg:case fg:case cg:case md:case hp:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:D_;case el:case ev:return!fM(e)&&!DZt(e)?{compatible:!1,warning:GQt(t)}:D_;case gx:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:D_}}function Ex(e){const{formatType:t}=dM(e);return t==="time"||!t&&zZt(e)}function zZt(e){return e&&(e.type==="temporal"||Ze(e)&&!!e.timeUnit)}function v5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=uo(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return fR(e)?a=e.expr:Rt(e)?a=e.signal:t_(e)?(o=!0,a=gb(e)):(dt(e)||ar(e))&&o&&(a=`datetime(${Br(e)})`,PJt(s)&&(ar(e)&&e<1e4||dt(e)&&isNaN(Date.parse(e)))&&(a=gb({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Br(e)}function e5e(e,t){const{type:n}=e;return t.map(r=>{const i=Ze(e)&&!n_(e.timeUnit)?e.timeUnit:void 0,s=v5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function gR(e,t){return li(e.bin)?pg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Uge={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function yR(e){return e==null?void 0:e.condition}const t5e=["domain","grid","labels","ticks","title"],VZt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},n5e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},HZt={...n5e,style:1,labelExpr:1,encoding:1};function zge(e){return!!HZt[e]}const qZt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},r5e=Ge(qZt);function mg(e){return"mark"in e}class b5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return mg(t)?AZt(t.mark)===this.name:!1}}function R1(e,t){const n=e&&e[t];return n?Fe(n)?hb(n,r=>!!r.field):Ze(n)||g5(n):!1}function i5e(e,t){const n=e&&e[t];return n?Fe(n)?hb(n,r=>!!r.field):Ze(n)||vp(n)||mR(n):!1}function s5e(e,t){if(ps(t)){const n=e[t];if((Ze(n)||vp(n))&&(CFe(n.type)||Ze(n)&&n.timeUnit)){const r=Jne(t);return i5e(e,r)}}return!1}function Rre(e){return hb(WXt,t=>{if(R1(e,t)){const n=e[t];if(Fe(n))return hb(n,r=>!!r.aggregate);{const r=Yh(n);return r&&!!r.aggregate}}return!1})}function o5e(e,t){const n=[],r=[],i=[],s=[],o={};return Nre(e,(a,u)=>{if(Ze(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Are(a),m=p==null?void 0:p.title;let g=ot(a,{forAs:!0});const y={...m?[]:{title:aE(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(tv(c)?(v="argmax",g=ot({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):qm(c)?(v="argmin",g=ot({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),ru(a)&&li(f)){if(r.push({bin:f,field:l,as:g}),n.push(ot(a,{binSuffix:"end"})),gR(a,u)&&n.push(ot(a,{binSuffix:"range"})),ps(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",W4e(u)||(y.type=yb)}else if(d&&!n_(d)){i.push({timeUnit:d,field:l,as:g});const v=ru(a)&&a.type!==vx&&"time";v&&(u===uR||u===mb?y.formatType=v:nQt(u)?y.legend={formatType:v,...y.legend}:ps(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function WZt(e,t,n){const r=iQt(t,n);if(r){if(r==="binned"){const i=e[t===md?Ii:po];return!!(Ze(i)&&Ze(e[t])&&To(i.bin))}}else return!1;return!0}function GZt(e,t,n,r){const i={};for(const s of Ge(e))q4e(s)||Je(qQt(s));for(let s of JXt){if(!e[s])continue;const o=e[s];if(cR(s)){const a=QXt(s),u=i[a];if(Ze(u)&&HJt(u.type)&&Ze(o)&&!u.timeUnit){Je(jQt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Je(FQt),s=sf),!WZt(e,s,t)){Je(a5(s,t));continue}if(s===dg&&t==="line"){const a=Yh(e[s]);if(a!=null&&a.aggregate){Je(HQt);continue}}if(s===Zu&&(n?"fill"in e:"stroke"in e)){Je(cFe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===lR||s===gx&&!Fe(o)&&!sd(o)||s===mb&&Fe(o)){if(o){if(s===gx){const a=e[s];if(GFe(a)){i[s]=a;continue}}i[s]=ft(o).reduce((a,u)=>(Ze(u)?a.push(kre(u,s)):Je(eq(u,s)),a),[])}}else{if(s===mb&&o===null)i[s]=null;else if(!Ze(o)&&!vp(o)&&!sd(o)&&!m5(o)&&!Rt(o)){Je(eq(o,s));continue}i[s]=ZFe(o,s,r)}}return i}function _5(e,t){const n={};for(const r of Ge(e)){const i=ZFe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function YZt(e){const t=[];for(const n of Ge(e))if(R1(e,n)){const r=e[n],i=ft(r);for(const s of i)Ze(s)?t.push(s):g5(s)&&t.push(s.condition)}return t}function Nre(e,t,n){if(e)for(const r of Ge(e)){const i=e[r];if(Fe(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function KZt(e,t,n,r){return e?Ge(e).reduce((i,s)=>{const o=e[s];return Fe(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function a5e(e,t){return Ge(t).reduce((n,r)=>{switch(r){case Ii:case po:case t5:case r5:case n5:case md:case hp:case Xy:case US:case sf:case fg:case gd:case cg:case yd:case vd:case bd:case zc:case uR:case el:case Jb:case mb:return n;case gx:if(e==="line"||e==="trail")return n;case lR:case e5:{const i=t[r];if(Fe(i)||Ze(i))for(const s of ft(i))s.aggregate||n.push(ot(s,{}));return n}case dg:if(e==="trail")return n;case Zu:case pp:case mp:case hg:case Qy:case Jy:case ev:case Zy:{const i=Yh(t[r]);return i&&!i.aggregate&&n.push(ot(i,{})),n}}},[])}function XZt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Fe(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Fe(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function iq(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Pre(t)}`:"";return{field:o+t.field,type:t.type,title:Rt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=YZt(n).map(PZt);return{tooltip:[...i,...ch(s,Bn)]}}function Pre(e){const{title:t,field:n}=e;return hs(t,n)}function Ore(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Pre(n);return u5e(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...dt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function u5e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Gh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Gy(e[t])?{}:e[t]}}]:[]}function l5e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:fP(s,n),continuousAxisChannelDef2:fP(o,n),continuousAxisChannelDefError:fP(a,n),continuousAxisChannelDefError2:fP(u,n),continuousAxis:i}}function fP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Je(bJt(n,t)),r}else return e}function c5e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Gh(n)&&n.orient)return n.orient;if(m0(i)){if(m0(s)){const o=Ze(i)&&i.aggregate,a=Ze(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Ex(s)&&!Ex(i)?"horizontal":"vertical"}return"horizontal"}else{if(m0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const pM="boxplot",QZt=["box","median","outliers","rule","ticks"],JZt=new b5(pM,d5e);function f5e(e){return ar(e)?"tukey":e}function d5e(e,{config:t}){e={...e,encoding:_5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Gh(n)?n:{type:n};i&&Je(uFe("boxplot"));const u=a.extent??t.boxplot.extent,l=br("size",a,t),c=a.invalid,f=f5e(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:_,boxOrient:x,customTooltipWithoutAggregatedField:S}=ZZt(e,u,t),E=BS(m.field),{color:T,size:A,...k}=b,R=Ae=>Ore(a,g,m,Ae,t.boxplot),$=R(k),P=R(b),O=(ht(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",M=R({...k,...A?{size:A}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...T||{value:O}}}}),j=iq([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),B={type:"tick",color:"black",opacity:1,orient:_,invalid:c,aria:!1},U=f==="min-max"?j:iq([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),V=[...$({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...$({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...$({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...$({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],D=[...f!=="tukey"?V:[],...P({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:x,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:j}),...M({partName:"median",mark:{type:"tick",invalid:c,...ht(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:_,aria:!1},positionPrefix:"mid_box",extraEncoding:j})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:D};const z=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,F=`(${W} - ${z})`,H=`${z} - ${u} * ${F}`,G=`${W} + ${u} * ${F}`,ee=`datum["${m.field}"]`,le={joinaggregate:h5e(m.field),groupby:y},de={transform:[{filter:`(${H} <= ${ee}) && (${ee} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${E}`},{op:"max",field:m.field,as:`upper_whisker_${E}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${E}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${E}`},...v],groupby:y}],layer:V},{tooltip:he,...ye}=k,{scale:Ce,axis:ve}=m,Ye=Pre(m),Ue=zu(ve,["title"]),pt=u5e(a,"outliers",t.boxplot,{transform:[{filter:`(${ee} < ${H}) || (${ee} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Ye!==void 0?{title:Ye}:{},...Ce!==void 0?{scale:Ce}:{},...jr(Ue)?{}:{axis:Ue}},...ye,...T?{color:T}:{},...S?{tooltip:S}:{}}})[0];let rt;const be=[...d,...h,le];return pt?rt={transform:be,layer:[pt,de]}:(rt=de,rt.transform.unshift(...be)),{...o,layer:[rt,{transform:p,layer:D}]}}function h5e(e){const t=BS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function ZZt(e,t,n){const r=c5e(e,pM),{continuousAxisChannelDef:i,continuousAxis:s}=l5e(e,r,pM),o=i.field,a=BS(o),u=f5e(t),l=[...h5e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=XZt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=o5e(p,n),_=r==="vertical"?"horizontal":"vertical",x=r,S=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:_,boxOrient:x,customTooltipWithoutAggregatedField:h}}const Dre="errorbar",een=["ticks","rule"],ten=new b5(Dre,p5e);function p5e(e,{config:t}){e={...e,encoding:_5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=m5e(e,Dre,t);delete s.size;const c=Ore(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function nen(e,t){const{encoding:n}=e;if(ren(n))return{orient:c5e(e,t),inputType:"raw"};const r=ien(n),i=sen(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(cn(a)&&cn(u))throw new Error(`${t} cannot have both x2 and y2`);if(cn(a)){if(m0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(cn(u)){if(m0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(cn(u)&&!cn(a))throw new Error(`${t} cannot have xError2 without xError`);if(cn(c)&&!cn(l))throw new Error(`${t} cannot have yError2 without yError`);if(cn(a)&&cn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(cn(a)){if(m0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(cn(l)){if(m0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function ren(e){return(cn(e.x)||cn(e.y))&&!cn(e.x2)&&!cn(e.y2)&&!cn(e.xError)&&!cn(e.xError2)&&!cn(e.yError)&&!cn(e.yError2)}function ien(e){return cn(e.x2)||cn(e.y2)}function sen(e){return cn(e.xError)||cn(e.xError2)||cn(e.yError)||cn(e.yError2)}function m5e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Gh(r)?r:{type:r};s&&Je(uFe(t));const{orient:l,inputType:c}=nen(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=l5e(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=oen(u,f,d,h,p,c,t,n),{[m]:_,[m==="x"?"x2":"y2"]:x,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:E,...T}=i,{bins:A,timeUnits:k,aggregate:R,groupby:$,encoding:P}=o5e(T,n),O=[...R,...g],M=c!=="raw"?[]:$,j=iq(v,f,P,b);return{transform:[...a.transform??[],...A,...k,...O.length===0?[]:[{aggregate:O,groupby:M}],...y],groupby:M,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:P,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:j}}function oen(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Je(vJt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:aR(h)},{fieldPrefix:"upper_",titlePrefix:Vge(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Vge(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:aE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:aE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:aE({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Je(yJt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:pb(pb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Vge(e,t,n){return`${aR(e)} ${n} ${t}`}const $re="errorband",aen=["band","borders"],uen=new b5($re,g5e);function g5e(e,{config:t}){e={...e,encoding:_5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=m5e(e,$re,t),l=o,c=Ore(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Je(Dge("interpolate")):l.tension&&Je(Dge("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const y5e={};function Mre(e,t,n){const r=new b5(e,t);y5e[e]={normalizer:r,parts:n}}function len(){return Ge(y5e)}Mre(pM,d5e,QZt);Mre(Dre,p5e,een);Mre($re,g5e,aen);const cen=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],v5e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},b5e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},fen=Ge(v5e),den=Ge(b5e),hen={header:1,headerRow:1,headerColumn:1,headerFacet:1},_5e=Ge(hen),w5e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],pen={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},men={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},od="_vgsid_",gen={point:{on:"click",fields:[od],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Lre(e){return e==="legend"||!!(e!=null&&e.legend)}function vB(e){return Lre(e)&&ht(e)}function Fre(e){return!!(e!=null&&e.select)}function E5e(e){const t=[];for(const n of e||[]){if(Fre(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function yen(e){return w5(e)||Bre(e)||jre(e)}function jre(e){return"concat"in e}function w5(e){return"vconcat"in e}function Bre(e){return"hconcat"in e}function x5e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Kh(e){return ht(e)&&e.step!==void 0}function Hge(e){return e.view||e.width||e.height}const qge=20,ven={align:1,bounds:1,center:1,columns:1,spacing:1},ben=Ge(ven);function _en(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(p5(e)&&!pR(e.facet)||jre(e))&&(i.columns=o),w5(e)&&(i.columns=1);for(const a of ben)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=ar(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function sq(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function mM(e,t){const n=gM(e,t);return Kh(n)?n.step:S5e}function gM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return hs(n,{step:e.step})}const S5e=20,wen={continuousWidth:200,continuousHeight:200,step:S5e},Een={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:wen,mark:wZt,arc:{},area:{},bar:SZt,circle:{},geoshape:{},image:{},line:{},point:{},rect:TZt,rule:{color:"black"},square:{},text:{color:"black"},tick:CZt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:XJt,projection:{},legend:pen,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:gen,style:{},title:{},facet:{spacing:qge},concat:{spacing:qge},normalizedNumberFormat:".0%"},Rp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Wge={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Gge={blue:Rp[0],orange:Rp[1],red:Rp[2],teal:Rp[3],green:Rp[4],yellow:Rp[5],purple:Rp[6],pink:Rp[7],brown:Rp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function xen(e={}){return{signals:[{name:"color",value:ht(e)?{...Gge,...e}:Gge}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Sen(e){return{signals:[{name:"fontSize",value:ht(e)?{...Wge,...e}:Wge}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Ten(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function T5e(e){const t=Ge(e||{}),n={};for(const r of t){const i=e[r];n[r]=yR(i)?tFe(i):_l(i)}return n}function Cen(e){const t=Ge(e),n={};for(const r of t)n[r]=T5e(e[r]);return n}const Aen=[...UFe,...r5e,..._5e,"background","padding","legend","lineBreak","scale","style","title","view"];function C5e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=kS({},nn(Een),n?Ten(n):{},t?xen(t):{},r?Sen(r):{},s||{});i&&RS(o,"selection",i,!0);const a=zu(o,Aen);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=_l(o[u]));for(const u of UFe)o[u]&&(a[u]=Au(o[u]));for(const u of r5e)o[u]&&(a[u]=T5e(o[u]));for(const u of _5e)o[u]&&(a[u]=Au(o[u]));return o.legend&&(a.legend=Au(o.legend)),o.scale&&(a.scale=Au(o.scale)),o.style&&(a.style=Cen(o.style)),o.title&&(a.title=Au(o.title)),o.view&&(a.view=Au(o.view)),a}const Ien=new Set(["view",...mZt]),ken=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Ren={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],..._Zt};function Nen(e){e=nn(e);for(const t of ken)delete e[t];if(e.axis)for(const t in e.axis)yR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of cen)delete e.legend[t];if(e.mark){for(const t of Lge)delete e.mark[t];e.mark.tooltip&&ht(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(E5e(e.params)),delete e.params);for(const t of Ien){for(const r of Lge)delete e[t][r];const n=Ren[t];if(n)for(const r of n)delete e[t][r];Oen(e,t)}for(const t of len())delete e[t];Pen(e);for(const t in e)ht(e[t])&&jr(e[t])&&delete e[t];return jr(e)?void 0:e}function Pen(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=eFe(e.title);jr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),jr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),jr(r)?delete e.title:e.title=r}function Oen(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};jr(s)||(e.style[n??t]=s),delete e[t]}function E5(e){return"layer"in e}function Den(e){return"repeat"in e}function $en(e){return!Fe(e.repeat)&&e.repeat.layer}class Ure{map(t,n){return p5(t)?this.mapFacet(t,n):Den(t)?this.mapRepeat(t,n):Bre(t)?this.mapHConcat(t,n):w5(t)?this.mapVConcat(t,n):jre(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(E5(t))return this.mapLayer(t,n);if(mg(t))return this.mapUnit(t,n);throw new Error(rre(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Men={zero:1,center:1,normalize:1};function Len(e){return e in Men}const Fen=new Set([FFe,c5,l5,lM,d5,xre,Sre,f5,jFe,Ere]),jen=new Set([c5,l5,FFe]);function $_(e){return Ze(e)&&_x(e)==="quantitative"&&!e.bin}function Yge(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ze(o)&&Ze(a))if($_(o)&&$_(a)){if(o.stack)return t;if(a.stack)return i;const u=Ze(o)&&!!o.aggregate,l=Ze(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if($_(o))return t;if($_(a))return i}else{if($_(o))return s&&n==="vertical"?void 0:t;if($_(a))return s&&n==="horizontal"?void 0:i}}function Ben(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function A5e(e,t){var m,g;const n=Gh(e)?e:{type:e},r=n.type;if(!Fen.has(r))return null;const i=Yge(t,"x",n)||Yge(t,"theta",n);if(!i)return null;const s=t[i],o=Ze(s)?ot(s,{}):void 0,a=Ben(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ze(y)?ot(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ze(f)?ot(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=ZXt.reduce((y,v)=>{if(v!=="tooltip"&&R1(t,v)){const b=t[v];for(const _ of ft(b)){const x=Yh(_);if(x.aggregate)continue;const S=ot(x,{});(!S||!l.has(S))&&y.push({channel:v,fieldDef:x})}}return y},[]);let p;return s.stack!==void 0?Gy(s.stack)?p=s.stack?"zero":null:p=s.stack:jen.has(r)&&(p="zero"),!p||!Len(p)||Rre(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Vu.LINEAR&&s!=null&&s.stack&&Je(pJt(s.scale.type)),cn(t[gp(i)])?(s.stack!==void 0&&Je(hJt(i)),null):(Ze(s)&&s.aggregate&&!fQt.has(s.aggregate)&&Je(mJt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:r_(r),stackBy:h,offset:p}))}function I5e(e,t,n){const r=Au(e),i=br("orient",r,n);if(r.orient=Hen(r.type,t,i),i!==void 0&&i!==r.orient&&Je(QQt(r.orient,i)),r.type==="bar"&&r.orient){const u=br("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:xZt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=br("opacity",r,n),o=br("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=zen(r.type,t)),br("cursor",r,n)===void 0&&(r.cursor=Uen(r,t,n)),r}function Uen(e,t,n){return t.href||e.href||br("href",e,n)?"pointer":e.cursor}function zen(e,t){if(Un([d5,Ere,xre,Sre],e)&&!Rre(t))return .7}function Ven(e,t,{graticule:n}){if(n)return!1;const r=Wm("filled",e,t),i=e.type;return hs(r,i!==d5&&i!==f5&&i!==lM)}function Hen(e,t,n){switch(e){case d5:case xre:case Sre:case jFe:case hZt:case dZt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case c5:if(Ze(r)&&(To(r.bin)||Ze(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ze(i)&&(To(i.bin)||Ze(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ze(r)&&r.type===yb&&!li(r.bin)||cM(r))&&Ze(i)&&To(i.bin)?"horizontal":"vertical";if(!o)return(Ze(i)&&i.type===yb&&!li(i.bin)||cM(i))&&Ze(r)&&To(r.bin)?"vertical":"horizontal"}case lM:if(s&&!(Ze(r)&&To(r.bin))&&o&&!(Ze(i)&&To(i.bin)))return;case l5:if(o)return Ze(i)&&To(i.bin)?"horizontal":"vertical";if(s)return Ze(r)&&To(r.bin)?"vertical":"horizontal";if(e===lM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case f5:case Ere:{const a=Bge(r),u=Bge(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ru(r)&&r.type===vx,c=ru(i)&&i.type===vx;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function qen(e){const{point:t,line:n,...r}=e;return Ge(r).length>1?r:r.type}function Wen(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:zu(e[t],["point","line"])});return e}function bB(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ht(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ht(t.point)?t.point:{}:void 0}function Kge(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Gen{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(mg(t)){const{mark:r,encoding:i}=t,s=Gh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!bB(s,n[s.type],i);case"area":return!!bB(s,n[s.type],i)||!!Kge(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=_5(l,i),d=Gh(a)?a:{type:a},h=bB(d,i[d.type],f),p=d.type==="area"&&Kge(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:qen({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:zu(f,["shape"])}],g=A5e(I5e(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=zu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...px(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...px(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:Wen(i)})}}function Yen(e,t){return t?pR(e)?R5e(e,t):k5e(e,t):e}function _B(e,t){return t?R5e(e,t):e}function oq(e,t,n){const r=t[e];if(RZt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Je(NQt(r.repeat));return}return t}function k5e(e,t){if(e=oq("field",e,t),e!==void 0){if(e===null)return null;if(Cre(e)&&Th(e.sort)){const n=oq("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Xge(e,t){if(Ze(e))return k5e(e,t);{const n=oq("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Qge(e,t){if(cn(e)){const n=Xge(e,t);if(n)return n;if(m5(e))return{condition:e.condition}}else{if(mR(e)){const n=Xge(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function R5e(e,t){const n={};for(const r in e)if(Ft(e,r)){const i=e[r];if(Fe(i))n[r]=i.map(s=>Qge(s,t)).filter(s=>s);else{const s=Qge(i,t);s!==void 0&&(n[r]=s)}}return n}class Ken{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(mg(t)){const{encoding:n,mark:r}=t;if(r==="line"||Gh(r)&&r.type==="line")for(const i of XXt){const s=Zb(i),o=n[s];if(n[i]&&(Ze(o)&&!To(o.bin)||vp(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Je(XQt(!!i.x2,!!i.y2)),r({...t,mark:ht(s)?{...s,type:"rule"}:"rule"},n)}}class Xen extends Ure{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[JZt,ten,uen,new Gen,new Ken]}map(t,n){if(mg(t)){const r=R1(t.encoding,mm),i=R1(t.encoding,gm),s=R1(t.encoding,ZF);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=_B(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return $en(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ai(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Fe(r)&&t.columns&&(t=zu(t,["columns"]),Je(Rge("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Fe(r)&&r.row||[u?u.row:null],f=!Fe(r)&&r.column||[u?u.column:null],d=Fe(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Fe(r)?`${Ai(p)}`:(r.row?`row_${Ai(m)}`:"")+(r.column?`column_${Ai(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(zu(b,["data"]))}const h=Fe(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return pR(r)&&t.columns&&(t=zu(t,["columns"]),Je(Rge("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=Zge({parentProjection:o,projection:i}),l=Jge({parentEncoding:s,encoding:_B(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=_B(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Je(YQt([...r?[mm]:[],...i?[gm]:[]]));const o={},a={};for(const u of[mm,gm]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:Yen(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Jge({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Zge({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Jge({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ge(e),...Ge(t)]);for(const s of i){const o=t[s],a=e[s];if(cn(o)){const u={...a,...o};r[s]=u}else mR(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||sd(a)||Rt(a)||cn(a)||Fe(a))&&(r[s]=a)}}else r=t;return!r||jr(r)?void 0:r}function Zge(e){const{parentProjection:t,projection:n}=e;return t&&n&&Je(LQt({parentProjection:t,projection:n})),n??t}function zre(e){return"filter"in e}function Qen(e){return(e==null?void 0:e.stop)!==void 0}function N5e(e){return"lookup"in e}function Jen(e){return"data"in e}function Zen(e){return"param"in e}function etn(e){return"pivot"in e}function ttn(e){return"density"in e}function ntn(e){return"quantile"in e}function rtn(e){return"regression"in e}function itn(e){return"loess"in e}function stn(e){return"sample"in e}function otn(e){return"window"in e}function atn(e){return"joinaggregate"in e}function utn(e){return"flatten"in e}function ltn(e){return"calculate"in e}function P5e(e){return"bin"in e}function ctn(e){return"impute"in e}function ftn(e){return"timeUnit"in e}function dtn(e){return"aggregate"in e}function htn(e){return"stack"in e}function ptn(e){return"fold"in e}function mtn(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function gtn(e){return e.map(t=>zre(t)?{filter:sE(t.filter,VJt)}:t)}class ytn extends Ure{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=e0e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=e0e(t,n),t.encoding){const r={};for(const[i,s]of by(t.encoding))r[i]=O5e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:by(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Lo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function e0e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(zre(s))return{filter:aq(s,t)};if(P5e(s)&&e_(s.bin))return{...s,bin:D5e(s.bin)};if(N5e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function O5e(e,t){var r,i;const n=nn(e);if(Ze(n)&&e_(n.bin)&&(n.bin=D5e(n.bin)),i_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(m5(n))if(Fe(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:aq(s,t)}});else{const{selection:s,param:o,test:a,...u}=O5e(n.condition,t);n.condition=o?n.condition:{...u,test:aq(n.condition,t)}}return n}function D5e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function aq(e,t){const n=r=>sE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):sE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class uq extends Ure{map(t,n){const r=n.selections??[];if(t.params&&!mg(t)){const i=[];for(const s of t.params)Fre(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(dt(a)&&(a===t.name||i.includes(a))||Fe(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=uq.prototype[e];uq.prototype[e]=function(n,r){return t.call(this,n,vtn(n,r))}}function vtn(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function $5e(e,t){t===void 0&&(t=C5e(e.config));const n=Etn(e,t),{width:r,height:i}=e,s=xtn(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const btn=new Xen,_tn=new ytn,wtn=new uq;function Etn(e,t={}){const n={config:t};return wtn.map(btn.map(_tn.map(e,n),n),n)}function t0e(e){return dt(e)?{type:e}:e??{}}function xtn(e,t,n){let{width:r,height:i}=t;const s=mg(e)||E5(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Je(Cge("width")),r=void 0),i=="container"&&(Je(Cge("height")),i=void 0));const a={type:"pad",...o,...n?t0e(n.autosize):{},...t0e(e.autosize)};if(a.type==="fit"&&!s&&(Je(_Qt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Je(Age("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Je(Age("height")),!Al(a,{type:"pad"}))return a}function Stn(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function Ttn(e){return e?`fit-${i5(e)}`:"fit"}const Ctn=["background","padding"];function n0e(e,t){const n={};for(const r of Ctn)e&&e[r]!==void 0&&(n[r]=_l(e[r]));return t&&(n.params=e.params),n}class gg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new gg(nn(this.explicit),nn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return hs(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ge(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Ud(e){return{explicit:!0,value:e}}function fl(e){return{explicit:!1,value:e}}function M5e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:x5(t,n,r,i)}}function x5(e,t,n,r){return e.explicit&&t.explicit&&Je(oJt(n,r,e.value,t.value)),e}function Ey(e,t,n,r,i=x5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Al(e.value,t.value)?e:i(e,t,n,r)}class Atn extends gg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function xx(e){return"url"in e}function EI(e){return"values"in e}function L5e(e){return"name"in e&&!xx(e)&&!EI(e)&&!B0(e)}function B0(e){return e&&(F5e(e)||j5e(e)||Vre(e))}function F5e(e){return"sequence"in e}function j5e(e){return"sphere"in e}function Vre(e){return"graticule"in e}var xi;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(xi||(xi={}));function B5e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Uc(i.field),i}function _b(e,t=!0,n=Ca){if(Fe(e)){const r=e.map(i=>_b(i,t,n));return t?`[${r.join(", ")}]`:r}else if(t_(e))return n(t?gb(e):NJt(e));return t?n(Br(e)):e}function Itn(e,t){for(const n of Lo(e.component.selection??{})){const r=n.name;let i=`${r}${Sy}, ${n.resolve==="global"?"true":`{unit: ${N1(e)}}`}`;for(const s of A5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+onn,on:[{events:{signal:n.name+Sy},update:`modify(${nt(n.name+wb)}, ${i})`}]})}return Hre(t)}function ktn(e,t){if(e.component.selection&&Ge(e.component.selection).length){const n=nt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Ky("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Hre(t)}function Rtn(e,t){let n=!1;for(const r of Lo(e.component.selection??{})){const i=r.name,s=nt(i+wb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${i8e}(${s}, ${nt(a)}${u}`})}n=!0;for(const a of A5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Hre(t)}function Ntn(e,t){const n=[...t],r=N1(e,{escape:!1});for(const i of Lo(e.component.selection??{})){const s={name:i.name+wb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:od}}]),i.init){const a=i.project.items.map(B5e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[od]:_b(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:_b(u,!1)}))}n.filter(a=>a.name===i.name+wb).length||n.push(s)}return n}function U5e(e,t){for(const n of Lo(e.component.selection??{}))for(const r of A5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Ptn(e,t){for(const n of e.children)Xi(n)&&(t=U5e(n,t));return t}function Otn(e,t,n,r){const i=l8e(e,t.param,t);return{signal:Hl(n.get("type"))&&Fe(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Hre(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Mr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Je(DQt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Hu extends Mr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${L4e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function wB(e){return e.as!==void 0}function r0e(e){return`${e}_end`}class Ch extends Mr{clone(){return new Ch(null,nn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(n_(u)){if(Xi(n)){const{mark:c,markDef:f,config:d}=n,h=wy({fieldDef:s,markDef:f,config:d});(wI(c)||h)&&(l={timeUnit:uo(u),field:a})}}else l={as:ot(s,{forAs:!0}),field:a,timeUnit:u};if(Xi(n)){const{mark:c,markDef:f,config:d}=n,h=wy({fieldDef:s,markDef:f,config:d});wI(c)&&ps(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Bn(l)]=l)}return i},{});return jr(r)?null:new Ch(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=uo(r),o={...i,timeUnit:s};return new Ch(t,{[Bn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of by(this.timeUnits)){const s=wB(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Lo(this.timeUnits).map(t=>wB(t)?t.as:r0e(t.field)))}dependentFields(){return new Set(Lo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Bn(this.timeUnits)}`}assemble(){const t=[];for(const n of Lo(this.timeUnits)){const{rectBandPosition:r}=n,i=uo(n.timeUnit);if(wB(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Uc(s),type:"timeunit",...a?{units:u5(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...i0e(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=z5e({timeUnit:i,field:o}),u=r0e(o);t.push({type:"formula",expr:a,as:u}),t.push(...i0e([o,u],r,i))}}return t}}const S5="offsetted_rect_start",T5="offsetted_rect_end";function z5e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=bFe(r),{part:o,step:a}=xFe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function i0e([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:s0e([z5e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${S5}`},{type:"formula",expr:s0e([i,s],n+.5),as:`${e}_${T5}`}]}return[]}function s0e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const vR="_tuple_fields";class Dtn{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const $tn={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Dtn),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ai(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Ai(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?ft(n.value):null;let{fields:d,encodings:h}=ht(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(ht(p))for(const m of Ge(p))KXt(m)?(h||(h=[])).push(m):l==="interval"?(Je(RQt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Je(wQt(p,m.aggregate));continue}else if(!g){Je(kge(p));continue}if(m.timeUnit&&!n_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Bn(y)]=y}if(!s[g]){const y=l==="interval"&&pg(p)&&Hl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===od,V4e(p)?(v.geoChannel=p,v.channel=z4e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Je(kge(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===od}f&&(t.init=f.map(p=>i.items.map(m=>ht(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),jr(o)||(i.timeUnit=new Ch(null,o))},signals:(e,t,n)=>{const r=t.name+vR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(B5e)})}},ym={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!pg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Je(TQt),!s||!Hl(o)){Je(SQt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||o0e(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(i8e)>=0)i.update=`{${r.map(o=>`${nt(Uc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${nt(Uc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!o0e(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function lq(e,t){return`domain(${nt(e.scaleName(t))})`}function o0e(e){return e.parent&&GS(e.parent)&&!e.parent.parent}const uE="_brush",V5e="_scale_trigger",qT="geo_interval_init_tick",H5e="_init",Mtn="_center",Ltn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...ht(n.select)?n.select:{}};i.fields=[od],i.encodings||(i.encodings=n.value?Ge(n.value):[vd,yd]),n.select={type:"interval",...i}}if(t.translate&&!ym.defined(t)){const i=`!event.item || event.item.mark.name !== ${nt(t.name+uE)}`;for(const s of t.events){if(!s.between){Je(`${s} is not an ordered event stream for interval selections.`);continue}const o=ft((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Sy,s=Lo(t.project.hasChannel).filter(a=>a.channel===Ii||a.channel===po),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(Ftn(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=nt(e.projectionName()),u=e.projectionName()+Mtn,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=x=>e.getSizeSignalRef(x).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+H5e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(S=>S.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${nt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${N1(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,_=s.map(x=>x.signals.visual);return n.concat({name:i,on:[{events:[..._.length?[{signal:_.join(" || ")}]:[],...o?[{signal:qT}]:[]],update:b}]})}else{if(!ym.defined(t)){const l=r+V5e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=nt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Hl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${N1(e)}, fields: ${r+vR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${_b(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Xi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===qT).length||n.unshift({name:qT,value:null,on:[{events:"timer{1}",update:`${qT} === null ? {} : ${qT}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${nt(t.name+wb)})`;if(ym.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ge(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${N1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ge(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+uE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+uE,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Ftn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=nt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ii?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=ym.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:_b(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+V5e},update:Hl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:_b(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ii?0:1,h=t.name+H5e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const jtn={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+vR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Lo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+uE):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${N1(e)}, `;if(t.project.hasSelectionId)l+=`${od}: ${o}[${nt(od)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${nt(e.vgField(d.channel,{}))}], ${o}[${nt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${nt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+Sy,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function VS(e,t,n,r){const i=m5(t)&&t.condition,s=r(t);if(i){const a=ft(i).map(u=>{const l=r(u);if(kZt(u)){const{param:c,empty:f}=u;return{test:u8e(e,{param:c,empty:f}),...l}}else return{test:bM(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function qre(e,t="text"){const n=e.encoding[t];return VS(e,n,t,r=>C5(r,e.config))}function C5(e,t,n="datum"){if(e){if(sd(e))return gi(e.value);if(cn(e)){const{format:r,formatType:i}=dM(e);return wre({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function q5e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Fe(o))return{tooltip:a0e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return VS(e,o,"tooltip",u=>{const l=C5(u,i,a);if(l)return l;if(u===null)return;let c=br("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),dt(c))return{value:c};if(ht(c))return Rt(c)?c:c.content==="encoding"?a0e(n,s,i,t):{signal:a}})}}function W5e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Zb(f),h=ru(c)?c:{...c,type:e[d].type},p=h.title||Ire(h,i),m=ft(p).join(", ").replaceAll(/"/g,'\\"');let g;if(ps(f)){const y=f==="x"?"x2":"y2",v=Yh(e[y]);if(To(h.bin)&&v){const b=ot(h,{expr:o}),_=ot(v,{expr:o}),{format:x,formatType:S}=dM(h);g=hR(b,_,x,S,i),s[y]=!0}}if((ps(f)||f===sf||f===gd)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=dM(h);g=wre({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=C5(h,i,o).signal),a.push({channel:f,key:m,value:g})}Nre(e,(c,f)=>{Ze(c)?u(c,f):g5(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function a0e(e,t,n,{reactiveGeom:r}={}){const i=W5e(e,t,n,{reactiveGeom:r}),s=by(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Btn(e){const{markDef:t,config:n}=e,r=br("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Utn(e),...ztn(e)}}function Utn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=br("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in yQt?{}:{ariaRoleDescription:{value:t}}}function ztn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return VS(e,s,"description",u=>C5(u,e.config));const o=br("description",n,r);if(o!=null)return{description:gi(o)};if(r.aria===!1)return{};const a=W5e(t,i,r);if(!jr(a))return{description:{signal:by(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Zs(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=br(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=gi(u)));const l=i[e];return VS(t,l,o??e,c=>_re({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function G5e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??br("filled",n,i),a=Un(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=br(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=br(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:gi(u)}:{},...l?{stroke:gi(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Je(cFe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Zs("color",e,{vgChannel:c,defaultValue:o?u:l}),...Zs("fill",e,{defaultValue:r.fill?u:void 0}),...Zs("stroke",e,{defaultValue:r.stroke?l:void 0})}}function Vtn(e){const{encoding:t,mark:n}=e,r=t.order;return!r_(n)&&sd(r)?VS(e,r,"zindex",i=>gi(i.value)):{}}function Sx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:_re({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:gi(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function ya(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[gp(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Sx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Wre({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&ps(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Htn({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function Htn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(cn(n)&&i&&t===i.fieldChannel){if(Ze(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return uM({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return k1(n,r,{suffix:"end"},{offset:s})}return vre(e)}function Wre({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Zb(n),u=_y(n),l=br(n,s,o,{vgChannel:u});if(l!==void 0)return F2(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Un([Vu.LOG,Vu.TIME,Vu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[tl(n)],mult:.5}}}}const qtn={left:"x",center:"xc",right:"x2"},Wtn={top:"y",middle:"yc",bottom:"y2"};function Y5e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return _y(e);const i=e==="x"?"align":"baseline",s=br(i,t,n);let o;return Rt(s)?(Je(KQt(i)),o=void 0):o=s,e==="x"?qtn[o||(r==="top"?"left":"center")]:Wtn[o||r]}function yM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?K5e(e,t,{defaultPos:n,defaultPos2:r}):ya(e,t,{defaultPos:n})}function K5e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=gp(e),a=tl(e),u=Gtn(t,r,o),l=u[a]?Y5e(e,i,s):_y(e);return{...ya(e,t,{defaultPos:n,vgChannel:l}),...u}}function Gtn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Zb(n),l=tl(n),c=_y(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?Sx({channel:n,markDef:s,encoding:r,model:e}):Sx({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=tl(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=Ytn({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:dP(n,s)||dP(n,{[n]:oM(n,s,a.style),[l]:oM(l,s,a.style)})||dP(n,a[i])||dP(n,a.mark)||{[c]:Wre({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Ytn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return cn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?k1(t,s,{suffix:"start"},{offset:u}):vre({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function dP(e,t){const n=tl(e),r=_y(e);if(t[r]!==void 0)return{[r]:F2(e,t[r])};if(t[e]!==void 0)return{[r]:F2(e,t[e])};if(t[n]){const i=t[n];if(bb(i))Je(VQt(n));else return{[n]:F2(e,i)}}}function xy(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=gp(t),a=tl(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??br("size",i,n,{vgChannel:a}),p=G4e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ze(u)&&(li(u.bin)||To(u.bin)||u.timeUnit&&!l)&&!(h&&!bb(h))&&!r[p]&&!co(f)?Qtn({fieldDef:u,fieldDef2:l,channel:t,model:e}):(cn(u)&&co(f)||m)&&!l?Xtn(u,t,e):K5e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Ktn(e,t,n,r,i,s,o){if(bb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Wm("minBandSize",{type:o},r);return{signal:c?`max(${$f(c)}, ${l})`:l}}else i.band!==1&&(Je(ZQt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Rt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(nv(u)&&ar(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=hs(u,o==="bar"?l:c);if(Rt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(ar(f))return{signal:`${1-f} * ${e}`}}return{value:mM(r.view,e)-2}}function Xtn(e,t,n){var A,k;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=tl(t),f=gp(t),d=G4e(t),h=n.scaleName(d),p=n.getScaleComponent(Jne(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=Zs("size",n,{vgChannel:c,defaultRef:gi(r.size)}):Je(rJt(r.type)));const y=!!g,v=qFe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(A=l||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:Ktn(c,h||u,p||l,s,v,!!e,r.type)};const b=((k=l||p)==null?void 0:k.get("type"))==="band"&&bb(v)&&!y?"top":"middle",_=Y5e(t,r,s,b),x=_==="xc"||_==="yc",{offset:S,offsetType:E}=Sx({channel:t,markDef:r,encoding:i,model:n,bandPosition:x?.5:0}),T=vre({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:S,defaultRef:Wre({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:x?E==="encoding"?0:.5:Rt(v)?{signal:`(1-${v})/2`}:bb(v)?(1-v.band)/2:0});if(c)return{[_]:T,...g};{const R=_y(f),$=g[c],P=S?{...$,offset:S}:$;return{[_]:T,[R]:Fe(T)?[T[0],{...T[1],offset:P}]:{...T,offset:P}}}}function u0e(e,t,n,r,i,s,o){if(U4e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Rt(n)||Rt(i)||Rt(r)||s){const l=$f(n),c=$f(i),f=$f(r),d=$f(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function Qtn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=qFe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(k=r.component.axes[n])==null?void 0:k[0],h=(d==null?void 0:d.get("translate"))??.5,p=ps(n)?br("binSpacing",s,i)??0:0,m=gp(n),g=_y(n),y=_y(m),v=Wm("minBandSize",s,i),{offset:b}=Sx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:_}=Sx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),x=uZt({fieldDef:e,scaleName:u}),S=u0e(n,p,c,h,b,v,x),E=u0e(m,p,c,h,_??b,v,x),T=Rt(f)?{signal:`(1-${f.signal})/2`}:bb(f)?(1-f.band)/2:.5,A=wy({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(li(e.bin)||e.timeUnit){const R=e.timeUnit&&A!==.5;return{[y]:l0e({fieldDef:e,scaleName:u,bandPosition:T,offset:E,useRectOffsetField:R}),[g]:l0e({fieldDef:e,scaleName:u,bandPosition:Rt(T)?{signal:`1-${T.signal}`}:1-T,offset:S,useRectOffsetField:R})}}else if(To(e.bin)){const R=k1(e,u,{},{offset:E});if(Ze(t))return{[y]:R,[g]:k1(t,u,{},{offset:S})};if(e_(e.bin)&&e.bin.step)return{[y]:R,[g]:{signal:`scale("${u}", ${ot(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}Je(hFe(m))}function l0e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return uM({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:S5,endSuffix:T5}:{}})}const Jtn=new Set(["aria","width","height"]);function of(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?G5e(e):{};return{...Ztn(e.markDef,t),...c0e(e,"fill",n),...c0e(e,"stroke",r),...Zs("opacity",e),...Zs("fillOpacity",e),...Zs("strokeOpacity",e),...Zs("strokeWidth",e),...Zs("strokeDash",e),...Vtn(e),...q5e(e),...qre(e,"href"),...Btn(e)}}function c0e(e,t,n){const{config:r,mark:i,markDef:s}=e;if(br("invalid",s,r)==="hide"&&n&&!r_(i)){const a=enn(e,{invalid:!0,channels:s5});if(a)return{[t]:[{test:a,value:null},...ft(n)]}}return n?{[t]:n}:{}}function Ztn(e,t){return gQt.reduce((n,r)=>(!Jtn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=gi(e[r])),n),{})}function enn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Hl(u)&&(s[l]=!0)}return s},{}),i=Ge(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>bre(o,t)).join(` ${s} `)}}function Gre(e){const{config:t,markDef:n}=e;if(br("invalid",n,t)){const i=tnn(e,{channels:yp});if(i)return{defined:{signal:i}}}return{}}function tnn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Hl(l)&&(s[c]=!0)}return s},{}),i=Ge(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>bre(o,t)).join(` ${s} `)}}function f0e(e,t){if(t!==void 0)return{[e]:gi(t)}}const EB="voronoi",X5e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(EB)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(r_(s))return Je(EQt(s)),n;const o={name:e.getName(EB),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...q5e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(EB)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},Q5e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Lre(e.bind),parse:(e,t,n)=>s8e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=X5e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ai(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:_b(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${nt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+Sy)[0],o=r+vR,a=i.items.map(l=>Ai(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},vM="_toggle",J5e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+vM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Sy,r=t.name+vM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${N1(e)}}, `)+`${r} ? ${n} : null`}},nnn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=dt(t.clear)?Ky(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Q5e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ai(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+Sy);r(i,"null"),J5e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+vM),r(i,"false"))}return n}},Z5e={defined:e=>{const t=e.resolve==="global"&&e.bind&&Lre(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==od;return t&&!n&&Je(CQt),t&&n},parse:(e,t,n)=>{const r=nn(n);if(r.select=dt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},s8e(t,r),ht(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=ft(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=vB(t.bind)?t.bind.legend:"click",s=dt(i)?Ky(i,"view"):ft(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=vB(t.bind)&&t.bind.legend,s=o=>a=>{const u=nn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ai(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+Sy),o=r+vR,a=i.items.filter(d=>d.hasLegend).map(d=>Ai(`${r}_${Ai(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+vM),f=vB(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function rnn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Lo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&Z5e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const e8e="_translate_anchor",t8e="_translate_delta",inn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=ym.defined(t),s=r+e8e,{x:o,y:a}=t.project.hasChannel;let u=Ky(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+uE,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?lq(e,Ii):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?lq(e,po):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+t8e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&d0e(e,t,o,"width",n),a!==void 0&&d0e(e,t,a,"height",n),n}};function d0e(e,t,n,r,i){const s=t.name,o=s+e8e,a=s+t8e,u=n.channel,l=ym.defined(t),c=i.filter(x=>x.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ii?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?_:`clampRange(${_}, 0, ${f})`})}const n8e="_zoom_anchor",r8e="_zoom_delta",snn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=ym.defined(t),s=r+r8e,{x:o,y:a}=t.project.hasChannel,u=nt(e.scaleName(Ii)),l=nt(e.scaleName(po));let c=Ky(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+uE,f))),n.push({name:r+n8e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&h0e(e,t,o,"width",n),a!==void 0&&h0e(e,t,a,"height",n),n}};function h0e(e,t,n,r,i){const s=t.name,o=n.channel,a=ym.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?lq(e,o):u.name,h=s+r8e,p=`${s}${n8e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const wb="_store",Sy="_tuple",onn="_modify",i8e="vlSelectionResolve",A5=[jtn,Ltn,$tn,J5e,Q5e,ym,Z5e,nnn,inn,snn,X5e];function ann(e){let t=e.parent;for(;t&&!Nl(t);)t=t.parent;return t}function N1(e,{escape:t}={escape:!0}){let n=t?nt(e.name):e.name;const r=ann(e);if(r){const{facet:i}=r;for(const s of xc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${nt(r.vgField(s))}])`)}return n}function Yre(e){return Lo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function s8e(e,t){(dt(t.select)||!t.select.on)&&delete e.events,(dt(t.select)||!t.select.clear)&&delete e.clear,(dt(t.select)||!t.select.toggle)&&delete e.toggle}function cq(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...cq(e.object)),t.push(...cq(e.property))),t)}function o8e(e){return e.object.type==="MemberExpression"?o8e(e.object):e.object.name==="datum"}function a8e(e){const t=pne(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&o8e(r)&&n.add(cq(r).slice(1).join("."))}),n}class HS extends Mr{clone(){return new HS(null,this.model,nn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=bM(this.model,this.filter,this),this._dependentFields=a8e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function unn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ai(i.name),o=i.select,a=dt(o)?o:o.type,u=ht(o)?nn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=nn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:dt(u.on)?Ky(u.on,"scope"):ft(nn(u.on))},f=nn(i);for(const d of A5)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function u8e(e,t,n,r="datum"){const i=dt(t)?t:t.param,s=Ai(i),o=nt(s+wb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${nt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function l8e(e,t,n){const r=Ai(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Je(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${nt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Je((a.length?"Multiple ":"No ")+`matching ${nt(i)} encoding found for selection ${nt(n.param)}. Using "field": ${nt(s)}.`)):s=a[0].field}return`${o.name}[${nt(Uc(s))}]`}function lnn(e,t){for(const[n,r]of by(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Hu(new HS(t,e,{param:n}),i,xi.Lookup,e.component.data.outputNodeRefCounts)}}function bM(e,t,n){return L2(t,r=>dt(r)?r:BJt(r)?u8e(e,r,n):TFe(r))}function cnn(e,t){if(e)return Fe(e)&&!Vg(e)?e.map(n=>Ire(n,t)).join(", "):e}function xB(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function FC(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=VZt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(yR(m)){const{condition:g,...y}=m,v=ft(g),b=Uge[h];if(b){const{vgProp:_,part:x}=b,S=[...v.map(E=>{const{test:T,...A}=E;return{test:bM(null,T),...A}}),y];xB(c,x,_,S),delete c[h]}else if(b===null){const _={signal:v.map(x=>{const{test:S,...E}=x;return`${bM(null,S)} ? ${Tge(E)} : `}).join("")+Tge(y)};c[h]=_}}else if(Rt(m)){const g=Uge[h];if(g){const{vgProp:y,part:v}=g;xB(c,v,y,m),delete c[h]}}Un(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},jr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:hs(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Rt(c.encode.labels.update.text)&&(p=pb(a,"datum.label",c.encode.labels.update.text.signal)),xB(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of t5e)e.hasAxisPart(p)||delete c.encode[p];jr(c.encode)&&delete c.encode}const h=cnn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:hs(l,0)}}}}function c8e(e){const{axes:t}=e.component,n=[];for(const r of yp)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function fnn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>FC(i,"grid",t)),...r.map(i=>FC(i,"grid",t)),...n.map(i=>FC(i,"main",t)),...r.map(i=>FC(i,"main",t))].filter(i=>i)}function p0e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ge(o),...Ge(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${$f(o[c])} : ${$f(a[c])}`};return l}return t[i]})])}function dnn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:kFe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Rt(n)?"axisOrient":`axis${aR(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:p0e(a,r,e,n),vgAxisConfig:p0e(u,r,e,n),axisConfigStyle:hnn([...u,...a],r)}}function hnn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=ft(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function fq(e,t,n,r={}){var s;const i=rFe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const m0e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??pnn(n,e),gridScale:({model:e,channel:t})=>mnn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||d8e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||f8e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??ynn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??vnn(t.type,n,Ze(t)&&!!t.timeUnit,Ze(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??_nn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:wnn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=h8e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return sFe(i?[jge(i)]:[],Ze(o)?[jge(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Enn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??xnn(n,t)};function pnn(e,t){return!co(e)&&Ze(t)&&!li(t==null?void 0:t.bin)&&!To(t==null?void 0:t.bin)}function mnn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function gnn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Rt(s)?s:_I(s);{const{configValue:o}=fq("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?_I(o):n===Ii&&Un([yre,gre],e.type)&&!(Ze(e)&&e.timeUnit)?270:void 0}}function dq(e){return`(((${e.signal} % 360) + 360) % 360)`}function f8e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Rt(e)){const i=dq(e),s=Rt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Rt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Rt(e)){const i=dq(e),s=Rt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Rt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function d8e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Rt(e)){const o=dq(e),a=Rt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Rt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function ynn(e,t){if(t==="x"&&Un(["quantitative","temporal"],e))return!0}function vnn(e,t,n,r){if(n&&!ht(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function bnn(e){return e==="x"?"bottom":"left"}function _nn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!co(t)&&t!=="log"){if(Ze(e)){if(li(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Un(["month","hours","day","quarter"],(i=uo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function wnn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ze(t)){const{timeUnit:n}=t;if(n){const r=EFe(n);if(r)return{signal:r}}}}function h8e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return oFe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Enn(e,t){const n=e.values;if(Fe(n))return e5e(t,n);if(Rt(n))return n}function xnn(e,t){return e==="rect"&&fM(t)?1:0}class Tx extends Mr{clone(){return new Tx(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=a8e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(i_(r)&&HFe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${TFe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new Tx(t,{calculate:u,as:Cx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Bn(this.transform)}`}}function Cx(e,t,n){return ot(e,{prefix:t,suffix:"sort_index",...n})}function I5(e,t){return Un(["top","bottom"],t)?"column":Un(["left","right"],t)||e==="row"?"row":"column"}function Ax(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return hs((t||{})[e],i[e],n.header[e])}function k5(e,t,n,r){const i={};for(const s of e){const o=Ax(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Kre=["row","column"],Xre=["header","footer"];function Snn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=k5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=I5(t,a),l=_I(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...m8e(l,u),...p8e(u,l,s),...g8e(r,i,t,fen,v5e)}}}function p8e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=d8e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function m8e(e,t){const n=f8e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Tnn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Xre)if(n[i])for(const s of n[i]){const o=Ann(e,t,i,n,s);o!=null&&r.push(o)}return r}function Cnn(e,t){const{sort:n}=e;return Th(n)?{field:ot(n,{expr:"datum"}),order:n.order??"ascending"}:Fe(n)?{field:Cx(e,t,{expr:"datum"}),order:"ascending"}:{field:ot(e,{expr:"datum"}),order:n??"ascending"}}function hq(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=k5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=wre({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=I5(t,a);return{text:{signal:u?pb(pb(u,"datum.label",l),"datum.value",ot(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...m8e(s,c),...p8e(c,s,o),...g8e(n,e,t,den,b5e)}}function Ann(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=k5(["labelOrient"],o.header,a,t);(t==="row"&&!Un(["top","bottom"],f)||t==="column"&&!Un(["left","right"],f))&&(s=hq(o,t,a))}const u=Nl(e)&&!pR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Cnn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Inn={column:{start:0,end:1},row:{start:1,end:0}};function knn(e,t){return Inn[t][e]}function Rnn(e,t){const n={};for(const r of xc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=k5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=I5(r,o),u=knn(s,a);u!==void 0&&(n[a]=u)}}return jr(n)?void 0:n}function g8e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=Ax(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Qre(e){return[...hP(e,"width"),...hP(e,"height"),...hP(e,"childWidth"),...hP(e,"childHeight")]}function hP(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(co(o)&&nv(a)){const u=e.scaleName(n);return Nl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[g0e(u,a)]:[g0e(u,a),{name:i,update:y8e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=sq(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function g0e(e,t){const n=`${e}_step`;return Rt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function y8e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=hs(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${$f(o)}, ${$f(s)}) * ${e}_step`}function v8e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function b8e(e,t){return Ge(e).reduce((n,r)=>{const i=e[r];return{...n,...VS(t,i,r,s=>gi(s.value))}},{})}function _8e(e,t){if(Nl(t))return e==="theta"?"independent":"shared";if(GS(t))return"shared";if(iie(t))return ps(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Jre(e,t){const n=e.scale[t],r=ps(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Je(uJt(t)),"independent"):e[r][t]||"shared"}const Nnn={...men,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},w8e=Ge(Nnn);class Pnn extends gg{}const y0e={symbols:Onn,gradient:Dnn,labels:$nn,entries:Mnn};function Onn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...bQt({},n,vZt),...G5e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?E8e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Zu)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=gi(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=gi(m??1));else if(Fe(f.fill)){const g=pq(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=gi(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Zu)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Fe(f.stroke)){const g=hs(pq(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==hg){const g=Ze(t)&&S8e(n,i,t);g?f.opacity=[{test:g,...gi(m??1)},gi(u.legend.unselectedOpacity)]:m&&(f.opacity=gi(m))}return f={...f,...e},jr(f)?void 0:f}function Dnn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?E8e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=gi(l)),a={...a,...e},jr(a)?void 0:a}function $nn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ze(t)?S8e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;vb(c)?f=Lf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Lf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ze(t)&&t.timeUnit===void 0&&(f=Lf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return jr(d)?void 0:d}function Mnn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function E8e(e){return x8e(e,(t,n)=>Math.max(t,n.value))}function pq(e){return x8e(e,(t,n)=>hs(t,n.value))}function x8e(e,t){if(NZt(e))return ft(e.condition).reduce(t,e.value);if(sd(e))return e.value}function S8e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=nt(n.field);return r.map(s=>`(!length(data(${nt(Ai(s)+wb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const v0e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return $Fe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return MFe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Vnn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Hnn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Fnn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>aE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(oE(n)&&Mf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Lnn(t,e)};function Lnn(e,t){const n=e.values;if(Fe(n))return e5e(t,n);if(Rt(n))return n}function Fnn(e,t,n,r){if(t!=="shape"){const i=pq(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function jnn(e){const{legend:t}=e;return hs(t.type,Bnn(e))}function Bnn({channel:e,timeUnit:t,scaleType:n}){if(oE(e)){if(Un(["quarter","month","day"],t))return"symbol";if(Mf(n))return"gradient"}return"symbol"}function Unn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??znn(n,t)}function znn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Vnn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Mf(i))return n==="horizontal"?r==="top"||r==="bottom"?b0e(t,"width",o,s):o:b0e(t,"height",u,a)}function b0e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Hnn(e){if(Un(["quantile","threshold","log","symlog"],e))return"greedy"}function T8e(e){const t=Xi(e)?qnn(e):Knn(e);return e.component.legends=t,t}function qnn(e){const{encoding:t}=e,n={};for(const r of[Zu,...w5e]){const i=Ds(t[r]);!i||!e.getScaleComponent(r)||r===el&&Ze(i)&&i.type===zS||(n[r]=Ynn(e,r))}return n}function Wnn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Gnn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Ynn(e,t){var _;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Pnn({},Wnn(e,t));rnn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Ds(i[t]),f=Ze(c)?(_=uo(c.timeUnit))==null?void 0:_.unit:void 0,d=n.orient||s.legend.orient||"right",h=jnn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Unn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const x of w8e){if(h==="gradient"&&x.startsWith("symbol")||h==="symbol"&&x.startsWith("gradient"))continue;const S=x in v0e?v0e[x](m):n[x];if(S!==void 0){const E=Gnn(S,x,n,e.fieldDef(t));(E||s.legend[x]===void 0)&&a.set(x,S,E)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const x of["labels","legend","title","symbols","gradient","entries"]){const S=b8e(g[x]??{},e),E=x in y0e?y0e[x](S,b):S;E!==void 0&&!jr(E)&&(v[x]={...y!=null&&y.length&&Ze(c)?{name:`${Ai(c.field)}_legend_${x}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:E})}return jr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Knn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){T8e(r);for(const i of Ge(r.component.legends))n.legend[i]=Jre(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=C8e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ge(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function C8e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of w8e){const c=Ey(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return Xnn(f,d);case"title":return aFe(f,d);case"type":return i=!0,fl("symbol")}return x5(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&sM(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&sM(e.explicit,["encode","gradient"])),e}function Xnn(e,t){return t.value==="circle"?t:e}function Qnn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function A8e(e){const t=e.component.legends,n={};for(const i of Ge(t)){const s=e.getScaleComponent(i),o=Br(s.get("domains"));if(n[o])for(const a of n[o])C8e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Lo(n).flat().map(i=>Jnn(i,e.config)).filter(i=>i!==void 0)}function Jnn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of w5e)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Rt(s.encode.labels.update.text)&&(l=pb(r,"datum.label",s.encode.labels.update.text.signal)),Qnn(s,"labels","text",{signal:l})}return s}}function Znn(e){return GS(e)||iie(e)?ern(e):I8e(e)}function ern(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),I8e(e))}function I8e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Rt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Un(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const trn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class k8e extends gg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function R8e(e){e.component.projection=Xi(e)?nrn(e):srn(e)}function nrn(e){if(e.hasProjection){const t=Au(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?rrn(e):void 0,s=new k8e(e.projectionName(!0),{...Au(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function rrn(e){const t=[],{encoding:n}=e;for(const r of[[vd,yd],[zc,bd]])(Ds(n[r[0]])||Ds(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(el)&&e.typedFieldDef(el).type===zS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(xi.Main)),t}function irn(e,t){const n=qne(trn,i=>!!(!Ft(e.explicit,i)&&!Ft(t.explicit,i)||Ft(e.explicit,i)&&Ft(t.explicit,i)&&Al(e.get(i),t.get(i))));if(Al(e.size,t.size)){if(n)return e;if(Al(e.explicit,{}))return t;if(Al(t.explicit,{}))return e}return null}function srn(e){if(e.children.length===0)return;let t;for(const r of e.children)R8e(r);const n=qne(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=irn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new k8e(r,t.specifiedProjection,t.size,nn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function orn(e,t,n,r){if(gR(t,n)){const i=Xi(e)?e.axis(n)??e.legend(n)??{}:{},s=ot(t,{expr:"datum"}),o=ot(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ot(t,{binSuffix:"range",forAs:!0}),formula:hR(s,o,i.format,i.formatType,r)}}return{}}function N8e(e,t){return`${Z4e(e)}_${t}`}function arn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Zre(e,t,n){const r=y5(n,void 0)??{},i=N8e(r,t);return e.getName(`${i}_bins`)}function urn(e){return"as"in e}function _0e(e,t,n){let r,i;urn(e)?r=dt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[ot(e,{forAs:!0}),ot(e,{binSuffix:"end",forAs:!0})];const s={...y5(t,void 0)},o=N8e(s,e.field),{signal:a,extentSignal:u}=arn(n,o);if(o5(s.extent)){const c=s.extent;i=l8e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Ah extends Mr{clone(){return new Ah(null,nn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(ru(s)&&li(s.bin)){const{key:a,binComponent:u}=_0e(s,s.bin,n);i[a]={...u,...i[a],...orn(n,s,o,n.config)}}return i},{});return jr(r)?null:new Ah(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=_0e(n,n.bin,r);return new Ah(t,{[i]:s})}merge(t,n){for(const r of Ge(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=ch([...this.bins[r].as,...t.bins[r].as],Bn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Lo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Lo(this.bins).map(t=>t.field))}hash(){return`Bin ${Bn(this.bins)}`}assemble(){return Lo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Uc(t.field),as:r,signal:t.signal,...o5(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Uc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:ot({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function lrn(e,t,n,r){var s;const i=Xi(r)?r.encoding[gp(t)]:void 0;if(ru(n)&&Xi(r)&&WFe(n,i,r.markDef,r.config)){e.add(ot(n,{})),e.add(ot(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=wy({fieldDef:n,markDef:a,config:u});wI(o)&&l!==.5&&ps(t)&&(e.add(ot(n,{suffix:S5})),e.add(ot(n,{suffix:T5}))),n.bin&&gR(n,t)&&e.add(ot(n,{binSuffix:"range"}))}else if(V4e(t)){const o=z4e(t);e.add(r.getName(o))}else e.add(ot(n));return i_(n)&&ZJt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function crn(e,t){for(const n of Ge(t)){const r=t[n];for(const i of Ge(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Yf extends Mr{clone(){return new Yf(null,new Set(this.dimensions),nn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([ot(o,{forAs:!0})]);else{if(qm(u)||tv(u)){const c=qm(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([ot({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([ot(o,{forAs:!0})]);pg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([ot({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([ot({field:l,aggregate:"max"},{forAs:!0})]))}else lrn(s,a,o,n)}),s.size+Ge(i).length===0)?null:new Yf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||ot(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||ot(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ge(i).length===0?null:new Yf(t,r,i)}merge(t){return D4e(this.dimensions,t.dimensions)?(crn(this.measures,t.measures),!0):(SJt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ge(this.measures)])}producedFields(){const t=new Set;for(const n of Ge(this.measures))for(const r of Ge(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Bn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ge(this.measures))for(const o of Ge(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Uc(s));return{type:"aggregate",groupby:[...this.dimensions].map(Uc),ops:t,fields:n,as:r}}}class qS extends Mr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of xc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[ot(o),...li(a)?[ot(o,{binSuffix:"end"})]:[]],...Th(u)?{sortField:u}:Fe(u)?{sortIndexField:Cx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of xc)this[n]&&(t+=` ${n.charAt(0)}:${Bn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of xc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of xc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of yp){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(co(i)&&nv(s)){const o=R5(this.childModel,n),a=rie(o);a?t[n]=a:Je(ire(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=h5,field:f}=u;s.push(f),o.push(c),a.push(ot(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Kre){for(const c of Xre){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[gm,mm])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function w0e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function frn(e,t){const n=Yne(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=w0e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=w0e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Je(OQt(t)),null}function drn(e){const t={};return VO(e.filter,n=>{if(SFe(n)){let r=null;ure(n)?r=_l(n.equal):cre(n)?r=_l(n.lte):lre(n)?r=_l(n.lt):fre(n)?r=_l(n.gt):dre(n)?r=_l(n.gte):hre(n)?r=n.range[0]:pre(n)&&(r=(n.oneOf??n.in)[0]),r&&(t_(r)?t[n.field]="date":ar(r)?t[n.field]="number":dt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function hrn(e){const t={};function n(r){Ex(r)?t[r.field]="date":r.type==="quantitative"&&cQt(r.aggregate)?t[r.field]="number":mx(r.field)>1?r.field in t||(t[r.field]="flatten"):i_(r)&&Th(r.sort)&&mx(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Xi(e)||Nl(e))&&e.forEachFieldDef((r,i)=>{if(ru(r))n(r);else{const s=Zb(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Xi(e)){const{mark:r,markDef:i,encoding:s}=e;if(r_(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ze(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function prn(e){const t={};if(Xi(e)&&e.component.selection)for(const n of Ge(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&mx(i.field)>1&&(t[i.field]="flatten")}return t}class va extends Mr{clone(){return new va(null,nn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Bn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!B0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ge(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Je(Nge(a,r[a],u.value)))}for(const a of Ge(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Je(Nge(a,n[a],u)))}const s=new gg(n,r);i.copyAll(s);const o={};for(const a of Ge(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ge(o).length===0||i.parseNothing?null:new va(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ge(this._parse)){const r=this._parse[n];mx(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ge(this._parse))}dependentFields(){return new Set(Ge(this._parse))}assembleTransforms(t=!1){return Ge(this._parse).filter(n=>t?mx(n)>1:!0).map(n=>{const r=frn(n,this._parse[n]);return r?{type:"formula",expr:r,as:BS(n)}:null}).filter(n=>n!==null)}}class Ty extends Mr{clone(){return new Ty(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([od])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:od}}}class bR extends Mr{clone(){return new bR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Bn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class _R extends Mr{clone(){return new _R(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Bn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Eb extends Mr{constructor(t){super(null),t??(t={name:"source"});let n;if(B0(t)||(n=t.format?{...zu(t.format,["parse"])}:{}),EI(t))this._data={values:t.values};else if(xx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Un(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else j5e(t)?this._data={values:[{type:"Sphere"}]}:(L5e(t)||B0(t))&&(this._data={});this._generator=B0(t),t.name&&(this._name=t.name),n&&!jr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var E0e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},mrn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},jC;function eie(e){return e instanceof Eb||e instanceof bR||e instanceof _R}class tie{constructor(){jC.set(this,void 0),E0e(this,jC,!1,"f")}setModified(){E0e(this,jC,!0,"f")}get modifiedFlag(){return mrn(this,jC,"f")}}jC=new WeakMap;class s_ extends tie{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class nie extends tie{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class grn extends nie{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ge(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class yrn extends nie{constructor(t){super(),this.requiresSelectionId=t&&Yre(t)}run(t){t instanceof Ty&&(this.requiresSelectionId&&(eie(t.parent)||t.parent instanceof Yf||t.parent instanceof va)||(this.setModified(),t.remove()))}}class vrn extends tie{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Ch&&(r=t.producedFields(),Wne(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class brn extends nie{constructor(){super()}run(t){t instanceof Hu&&!t.isRequired()&&(this.setModified(),t.remove())}}class _rn extends s_{run(t){if(!eie(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof va)if(t instanceof va)this.setModified(),t.merge(n);else{if(Gne(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class wrn extends s_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof va);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ge(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!jr(i)){this.setModified();const o=new va(t,i);for(const a of n){if(a instanceof va)for(const u of Ge(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof va&&Ge(a.parse).length===0&&a.remove()}}}}}class Ern extends s_{run(t){t instanceof Hu||t.numChildren()>0||t instanceof qS||t instanceof Eb||(this.setModified(),t.remove())}}class xrn extends s_{run(t){const n=t.children.filter(i=>i instanceof Ch),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Srn extends s_{run(t){const n=t.children.filter(i=>i instanceof Yf),r={};for(const i of n){const s=Bn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ge(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Trn extends s_{constructor(t){super(),this.model=t}run(t){const n=!(eie(t)||t instanceof HS||t instanceof va||t instanceof Ty),r=[],i=[];for(const s of t.children)s instanceof Ah&&(n&&!Gne(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Ah?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Crn extends s_{run(t){const n=[...t.children];if(!hb(n,o=>o instanceof Hu)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Hu){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Hu)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class o_ extends Mr{clone(){return new o_(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ch(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??ot(t)}hash(){return`JoinAggregateTransform ${Bn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function Arn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=ot(r);return i&&t.push(i),t},[])}function Irn(e){return Fe(e)&&e.every(t=>dt(t))&&e.length>1}class vm extends Mr{clone(){return new vm(null,nn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(hs(f.order,"ascending"));const l={field:a,order:u};let c;return Irn(s)?c=s:dt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new vm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Yh(p)}).filter(h=>!!h),c=Arn(n),f=n.encoding.order;let d;if(Fe(f)||Ze(f))d=iFe(f);else{const h=GFe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new vm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Bn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[ot(i,{binSuffix:"mid"})]:[ot(i,{}),ot(i,{binSuffix:"end"})]:[ot(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=ot(c,{expr:"datum"}),p=ot(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:ot(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:ot(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class WS extends Mr{clone(){return new WS(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ch(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??ot(t)}hash(){return`WindowTransform ${Bn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>nre(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function krn(e){function t(n){if(!(n instanceof qS)){const r=n.clone();if(r instanceof Hu){const i=gq+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Yf||r instanceof vm||r instanceof WS||r instanceof o_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function mq(e){if(e instanceof qS)if(e.numChildren()===1&&!(e.children[0]instanceof Hu)){const t=e.children[0];(t instanceof Yf||t instanceof vm||t instanceof WS||t instanceof o_)&&t.addDimensions(e.fields),t.swapWithParent(),mq(e)}else{const t=e.model.component.data.main;P8e(t);const n=krn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(mq)}function P8e(e){if(e instanceof Hu&&e.type===xi.Main&&e.numChildren()===1){const t=e.children[0];t instanceof qS||(t.swapWithParent(),P8e(e))}}const gq="scale_",pP=5;function yq(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!yq(t.children))return!1}return!0}function cf(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function x0e(e,t,n){let r=e.sources,i=!1;return i=cf(new brn,r)||i,i=cf(new yrn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=cf(new Ern,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=cf(new _rn,r)||i,i=cf(new Trn(t),r)||i,i=cf(new vrn,r)||i,i=cf(new wrn,r)||i,i=cf(new Srn,r)||i,i=cf(new xrn,r)||i,i=cf(new grn,r)||i,i=cf(new Crn,r)||i),e.sources=r,i}function Rrn(e,t){yq(e.sources);let n=0,r=0;for(let i=0;i<pP&&x0e(e,t,!0);i++)n++;e.sources.map(mq);for(let i=0;i<pP&&x0e(e,t,!1);i++)r++;yq(e.sources),Math.max(n,r)===pP&&Je(`Maximum optimization runs(${pP}) reached.`)}class Qs{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Qs(()=>t(n))}}function O8e(e){Xi(e)?Nrn(e):Prn(e)}function Nrn(e){const t=e.component.scales;for(const n of Ge(t)){const r=Drn(e,n);if(t[n].setWithExplicit("domains",r),Mrn(e,n),e.component.data.isFaceted){let s=e;for(;!Nl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)om(a)&&(a.data=gq+a.data.replace(gq,""))}}}function Prn(e){for(const n of e.children)O8e(n);const t=e.component.scales;for(const n of Ge(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=Ey(r,o.getWithExplicit("domains"),"domains","scale",vq);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Je(kQt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Orn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=S0e(t,n);if(!i){Je(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=S0e(t,n);if(i)return"unaggregated"}return e}function Drn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Orn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Ds(r.x2)?Ds(r.x)?Ey(Dg(n,i,e,"x"),Dg(n,i,e,"x2"),"domain","scale",vq):Dg(n,i,e,"x2"):t==="y"&&Ds(r.y2)?Ds(r.y)?Ey(Dg(n,i,e,"y"),Dg(n,i,e,"y2"),"domain","scale",vq):Dg(n,i,e,"y2"):Dg(n,i,e,t)}function $rn(e,t,n){return e.map(r=>({signal:`{data: ${v5(r,{timeUnit:n,type:t})}}`}))}function SB(e,t,n){var i;const r=(i=uo(n))==null?void 0:i.unit;return t==="temporal"||r?$rn(e,t,r):[e]}function Dg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Ds(i[r]),{type:c}=l,f=l.timeUnit;if(JJt(t)){const p=Dg(e,void 0,n,r),m=SB(t.unionWith,c,f);return Ud([...m,...p.value])}else{if(Rt(t))return Ud([t]);if(t&&t!=="unaggregated"&&!NFe(t))return Ud(SB(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return fl([[0,1]]);const p=n.requestDataName(xi.Main);return fl([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=pg(r)&&Ze(l)?Lrn(n,r,e):void 0;if(vp(l)){const p=SB([l.datum],c,f);return fl(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(xi.Main),{field:m}=l;return fl([{data:p,field:ot({field:m,aggregate:"min"})},{data:p,field:ot({field:m,aggregate:"max"})}])}else if(li(h.bin)){if(co(e))return fl(e==="bin-ordinal"?[]:[{data:bI(d)?n.requestDataName(xi.Main):n.requestDataName(xi.Raw),field:n.vgField(r,gR(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!ht(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(li(p)){const m=Zre(n,h.field,p);return fl([new Qs(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return fl([{data:n.requestDataName(xi.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Un(["time","utc"],e)){const p=i[gp(r)];if(WFe(h,p,s,a)){const m=n.requestDataName(xi.Main),g=wy({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=wI(o)&&g!==.5&&ps(r);return fl([{data:m,field:n.vgField(r,y?{suffix:S5}:{})},{data:m,field:n.vgField(r,{suffix:y?T5:"end"})}])}}return fl(d?[{data:bI(d)?n.requestDataName(xi.Main):n.requestDataName(xi.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(xi.Main),field:n.vgField(r)}])}function TB(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":h5),...r?{field:Uc(r)}:{},...i?{order:i}:{}}}function Mrn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=NFe(r)&&r,o=e_(i)&&o5(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Lrn(e,t,n){if(!co(n))return;const r=e.fieldDef(t),i=r.sort;if(HFe(i))return{op:"min",field:Cx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Th(i)){const a=s&&!o.has(i.field);return TB(i,a)}else if(VFe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(qm(c)||tv(c))return TB({field:ot(l),order:u},d);if(nre(c)||!c)return TB({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Un(["ascending",void 0],i))return!0}}function S0e(e,t){const{aggregate:n,type:r}=e;return n?dt(n)&&!dQt.has(n)?{valid:!1,reason:tJt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:nJt(e)}:{valid:!0}:{valid:!1,reason:eJt(e)}}function vq(e,t,n,r){return e.explicit&&t.explicit&&Je(aJt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Frn(e){const t=ch(e.map(o=>{if(om(o)){const{sort:a,...u}=o;return u}return o}),Bn),n=ch(e.map(o=>{if(om(o)){const a=o.sort;return a!==void 0&&!bI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Bn);if(t.length===0)return;if(t.length===1){const o=e[0];if(om(o)&&n.length>0){let a=n[0];if(n.length>1){Je(Oge);const u=n.filter(l=>ht(l)&&"op"in l&&l.op!=="min");n.every(l=>ht(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(ht(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=ch(n.map(o=>bI(o)||!("op"in o)||dt(o.op)&&o.op in uQt?o:(Je(lJt(o)),!0)),Bn);let i;r.length===1?i=r[0]:r.length>1&&(Je(Oge),i=!0);const s=ch(e.map(o=>om(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function rie(e){if(om(e)&&dt(e.field))return e.field;if(hQt(e)){let t;for(const n of e.fields)if(om(n)&&dt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Je(cJt),t}return Je(fJt),t}else if(pQt(e)){Je(dJt);const t=e.fields[0];return dt(t)?t:void 0}}function R5(e,t){const r=e.component.scales[t].get("domains").map(i=>(om(i)&&(i.data=e.lookupDataSource(i.data)),i));return Frn(r)}function D8e(e){return GS(e)||iie(e)?e.children.reduce((t,n)=>t.concat(D8e(n)),T0e(e)):T0e(e)}function T0e(e){return Ge(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=jrn(i.range,s,n,e),h=R5(e,n),p=a?Otn(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function jrn(e,t,n,r){if(ps(n)){if(nv(e))return{step:{signal:`${t}_step`}}}else if(ht(e)&&om(e))return{...e,data:r.lookupDataSource(e.data)};return e}class $8e extends gg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:hb(this.get("domains"),t=>Fe(t)&&t.length===2&&ar(t[0])&&t[0]<=0&&ar(t[1])&&t[1]>=0)}}const Brn=["range","scheme"];function Urn(e){const t=e.component.scales;for(const n of s5){const r=t[n];if(!r)continue;const i=zrn(n,e);r.setWithExplicit("range",i)}}function C0e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=tl(t),o=e.getName(s);if(ht(r)&&r.binned&&r.step!==void 0)return new Qs(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(li(r)){const a=Zre(e,i,r);return new Qs(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function zrn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of Brn)if(n[f]!==void 0){const d=nq(s,f),h=PFe(e,f);if(!d)Je(fFe(s,f,e));else if(h)Je(h);else switch(f){case"range":{const p=n.range;if(Fe(p)){if(ps(e))return Ud(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Qs.fromName(y,g)}return m}))}else if(ht(p))return Ud({data:t.requestDataName(xi.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Ud(p)}case"scheme":return Ud(Vrn(n[f]))}}const o=e===Ii||e==="xOffset"?"width":"height",a=r[o];if(Kh(a)){if(ps(e))if(co(s)){const f=L8e(a,t,e);if(f)return Ud({step:f})}else Je(dFe(o));else if(cR(e)){const f=e===Xy?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=F8e(a,s);if(p)return Ud(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Hrn(e,t);return(u!==void 0||l!==void 0)&&nq(s,"rangeMin")&&Fe(c)&&c.length===2?Ud([u??c[0],l??c[1]]):fl(c)}function Vrn(e){return QJt(e)?{scheme:e.name,...zu(e,["name"])}:{scheme:e}}function M8e(e,t,n,{center:r}={}){const i=tl(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===po&&Hl(n)?r?[Qs.fromName(a=>`${o(a)}/2`,s),Qs.fromName(a=>`-${o(a)}/2`,s)]:[Qs.fromName(o,s),0]:r?[Qs.fromName(a=>`-${o(a)}/2`,s),Qs.fromName(a=>`${o(a)}/2`,s)]:[0,Qs.fromName(o,s)]}function Hrn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Ds(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ii:case po:{if(Un(["point","band"],u)){const f=j8e(e,n,r.view);if(Kh(f))return{step:L8e(f,t,e)}}return M8e(e,t,u)}case Xy:case US:return qrn(e,t,u);case dg:{const f=t.component.scales[e].get("zero"),d=B8e(i,f,r),h=Yrn(i,n,t,r);return bx(u)?Grn(d,h,Wrn(u,r,l,e)):[d,h]}case sf:return[0,Math.PI*2];case Jb:return[0,360];case gd:return[0,new Qs(()=>{const f=t.getSignalName(Nl(t.parent)?"child_width":"width"),d=t.getSignalName(Nl(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Zy:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case ev:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case el:return"symbol";case Zu:case pp:case mp:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case hg:case Qy:case Jy:return[r.scale.minOpacity,r.scale.maxOpacity]}}function L8e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Jne(n),o=r[s];if(x5e({step:e,offsetIsDiscrete:cn(o)&&CFe(o.type)})==="offset"&&i5e(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${vQt(f)})`}}else return e.step}function F8e(e,t){if(x5e({step:e,offsetIsDiscrete:co(t)})==="offset")return{step:e.step}}function qrn(e,t,n){const r=e===Xy?"x":"y",i=t.getScaleComponent(r);if(!i)return M8e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=j8e(r,t.size,t.config.view);if(Kh(l)){const c=F8e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ze(l)&&l.timeUnit){const c=EFe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=wy({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Rt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Rt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return P4e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function j8e(e,t,n){const r=e===Ii?"width":"height",i=t[r];return i||gM(n,r)}function Wrn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Fe(n)?n.length+1:(Je(wJt(r)),3)}}function Grn(e,t,n){const r=()=>{const i=$f(t),s=$f(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Rt(t)?new Qs(r):{signal:r()}}function B8e(e,t,n){if(t)return Rt(t)?{signal:`${t.signal} ? 0 : ${B8e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(a5("size",e))}const A0e=.95;function Yrn(e,t,n,r){const i={x:C0e(n,"x"),y:C0e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=I0e(t,i,r.view);return ar(s)?s-1:new Qs(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=I0e(t,i,r.view);return ar(s)?Math.pow(A0e*s,2):new Qs(()=>`pow(${A0e} * ${s.signal}, 2)`)}}throw new Error(a5("size",e))}function I0e(e,t,n){const r=Kh(e.width)?e.width.step:mM(n,"width"),i=Kh(e.height)?e.height.step:mM(n,"height");return t.x||t.y?new Qs(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function U8e(e,t){Xi(e)?Krn(e,t):V8e(e,t)}function Krn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ge(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Ds(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=nq(h,t),y=PFe(a,t);if(d!==void 0&&(g?y&&Je(y):Je(fFe(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":t_(u[t])||b==="temporal"||v?l.set(t,{signal:v5(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in k0e?k0e[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:s5e(i,a),hasSecondaryRangeChannel:!!i[gp(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const k0e={bins:({model:e,fieldOrDatumDef:t})=>Ze(t)?Xrn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Qrn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Jrn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Zrn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>ein(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>tin(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ze(e)?e.sort:void 0;return nin(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>rin(e,t,n,r,i,s.scale,o)};function z8e(e){Xi(e)?Urn(e):V8e(e,"range")}function V8e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?z8e(r):U8e(r,t);for(const r of Ge(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=Ey(i,a,t,"scale",M5e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Xrn(e,t){const n=t.bin;if(li(n)){const r=Zre(e,t.field,n);return new Qs(()=>e.getSignalName(r))}else if(To(n)&&e_(n)&&n.step!==void 0)return{step:n.step}}function Qrn(e,t){if(Un([Zu,pp,mp],e)&&t!=="nominal")return"hcl"}function Jrn(e,t,n,r,i,s){var o;if(!((o=Yh(s))!=null&&o.bin||Fe(n)||i!=null||r!=null||Un([Vu.TIME,Vu.UTC],e)))return ps(t)?!0:void 0}function Zrn(e,t,n,r,i,s){if(ps(e)){if(Mf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ze(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Vu.POINT)return n.pointPadding}}function ein(e,t,n,r,i,s=!1){if(e===void 0){if(ps(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:hs(o,n==="bar"?a:u)}else if(cR(t)&&r===Vu.BAND)return i.offsetBandPaddingInner}}function tin(e,t,n,r,i,s=!1){if(e===void 0){if(ps(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Vu.BAND)return hs(o,Rt(r)?{signal:`${r.signal}/2`}:r/2)}else if(cR(t)){if(n===Vu.POINT)return .5;if(n===Vu.BAND)return i.offsetBandPaddingOuter}}}function nin(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Hl(e)&&t==="descending"?Rt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Hl(e)&&t==="descending")return!0}function rin(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Hl(i)){if(Fe(n)){const u=n[0],l=n[n.length-1];if(ar(u)&&u<=0&&ar(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!bx(i))return!0;if(!(Ze(t)&&t.bin)&&Un([...yp,...eQt],e)){const{orient:u,type:l}=r;return Un(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Un(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function iin(e,t,n,r,i=!1){const s=sin(t,n,r,i),{type:o}=e;return pg(t)?o!==void 0?iZt(t,o)?Ze(n)&&!rZt(o,n.type)?(Je(sJt(o,s)),s):o:(Je(iJt(t,o,s)),s):s:null}function sin(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(oE(e)||gB(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Je(yB(e,"ordinal")),"ordinal";if(ps(e)||cR(e)){if(Un(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in tre)return"band";const s=n[tl(e)];return bb(s)||wx(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return oE(e)?"time":gB(e)==="discrete"?(Je(yB(e,"temporal")),"ordinal"):Ze(t)&&t.timeUnit&&uo(t.timeUnit).utc?"utc":"time";case"quantitative":return oE(e)?Ze(t)&&li(t.bin)?"bin-ordinal":"linear":gB(e)==="discrete"?(Je(yB(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(lFe(t.type))}function oin(e,{ignoreRange:t}={}){H8e(e),O8e(e);for(const n of nZt)U8e(e,n);t||z8e(e)}function H8e(e){Xi(e)?e.component.scales=ain(e):e.component.scales=lin(e)}function ain(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of s5){const o=Ds(t[s]);if(o&&n===BFe&&s===el&&o.type===zS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=s5e(t,s),l=iin(a,s,o,r,u);i[s]=new $8e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const uin=M5e((e,t)=>$ge(e)-$ge(t));function lin(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){H8e(s);for(const o of Ge(s.component.scales))if((t=i.scale)[o]??(t[o]=_8e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?WJt(a.value,u.value)?r[o]=Ey(a,u,"type","scale",uin):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ge(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new $8e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class CB{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Xi(e){return(e==null?void 0:e.type)==="unit"}function Nl(e){return(e==null?void 0:e.type)==="facet"}function iie(e){return(e==null?void 0:e.type)==="concat"}function GS(e){return(e==null?void 0:e.type)==="layer"}class sie{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Au(a),this.name=t.name??i,this.title=Vg(t.title)?{text:t.title}:t.title?Au(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new CB,this.projectionNameMap=r?r.projectionNameMap:new CB,this.signalNameMap=r?r.signalNameMap:new CB,this.data=t.data,this.description=t.description,this.transforms=gtn(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:_en(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:p5(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new gg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?nn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){oin(this)}parseProjection(){R8e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){T8e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ge(r)){const o=r[s];o!==void 0&&(i[s]=gi(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=gi(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:jr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=Rnn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of xc)t[r].title&&n.push(Snn(this,r));for(const r of Kre)n=n.concat(Tnn(this,r));return n}assembleAxes(){return fnn(this.component.axes,this.config)}assembleLegends(){return A8e(this)}assembleProjections(){return Znn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...eFe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Un(["unit","layer"],this.type)?Un(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),jr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Nl(this.parent)?D8e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ai((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(xi[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Nl(this.parent)){const n=v8e(t),r=i5(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(co(s)&&nv(o)){const a=i.get("name"),u=R5(this,r),l=rie(u);if(l){const c=ot({aggregate:"distinct",field:l},{expr:"datum"});return{signal:y8e(a,i,c)}}else return Je(ire(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(q4e(t)&&pg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(xQt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class q8e extends sie{vgField(t,n={}){const r=this.fieldDef(t);if(r)return ot(r,n)}reduceFieldDef(t,n){return KZt(this.getMapping(),(r,i,s)=>{const o=Yh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Nre(this.getMapping(),(r,i)=>{const s=Yh(r);s&&t(s,i)},n)}}class N5 extends Mr{clone(){return new N5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Bn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class P5 extends Mr{clone(){return new P5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Bn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class xI extends Mr{clone(){return new xI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(br("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=pg(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Hl(d)&&l.aggregate!=="count"&&!r_(i)&&(u[l.field]=l)}return u},{});return Ge(a).length?new xI(t,a):null}dependentFields(){return new Set(Ge(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Bn(this.filter)}`}assemble(){const t=Ge(this.filter).reduce((n,r)=>{const i=this.filter[r],s=ot(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class O5 extends Mr{clone(){return new O5(this.parent,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Bn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class D5 extends Mr{clone(){return new D5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Bn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class lE extends Mr{clone(){return new lE(null,nn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[vd,yd],[zc,bd]]){const s=i.map(o=>{const a=Ds(n.encoding[o]);return Ze(a)?a.field:vp(a)?{expr:`${a.datum}`}:sd(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new lE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(el)){const i=n.typedFieldDef(el);i.type===zS&&(t=new lE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(dt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Bn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class SI extends Mr{clone(){return new SI(null,this.projection,nn(this.fields),nn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[vd,yd],[zc,bd]]){const i=r.map(o=>{const a=Ds(n.encoding[o]);return Ze(a)?a.field:vp(a)?{expr:`${a.datum}`}:sd(a)?{expr:`${a.value}`}:void 0}),s=r[0]===zc?"2":"";(i[0]||i[1])&&(t=new SI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(dt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Bn(this.fields)} ${Bn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class P1 extends Mr{clone(){return new P1(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new P1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ze(i)&&Ze(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=a5e(n.mark,r);return new P1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Bn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:Qen(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class $5 extends Mr{clone(){return new $5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Bn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class TI extends Mr{clone(){return new TI(null,nn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(Jen(o)){let u=Y8e(o.data,s);u||(u=new Eb(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Hu(u,l,xi.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Zen(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ai(u),u)}catch{throw new Error(AQt(u))}if(a=l.materialized,!a)throw new Error(IQt(u))}return new TI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ft(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Bn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ft(this.transform.as)}:{}};else{let n=this.transform.as;dt(n)||(Je(MQt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class M5 extends Mr{clone(){return new M5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Bn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class L5 extends Mr{clone(){return new L5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Bn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class F5 extends Mr{clone(){return new F5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=ch((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Bn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class j5 extends Mr{clone(){return new j5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Bn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function W8e(e){let t=0;function n(r,i){if(r instanceof Eb&&!r.isGenerator&&!xx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof va&&(r.parent instanceof Eb&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof qS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof bR||r instanceof _R||r instanceof xI||r instanceof HS||r instanceof Tx||r instanceof SI||r instanceof Yf||r instanceof TI||r instanceof WS||r instanceof o_||r instanceof D5||r instanceof O5||r instanceof N5||r instanceof $5||r instanceof M5||r instanceof L5||r instanceof Ty||r instanceof j5||r instanceof F5||r instanceof P5)&&i.transform.push(r.assemble()),(r instanceof Ah||r instanceof Ch||r instanceof P1||r instanceof vm||r instanceof lE)&&i.transform.push(...r.assemble()),r instanceof Hu&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Hu?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Hu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function cin(e){const t=[],n=W8e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function fin(e,t){const n=[],r=W8e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function din(e){return e==="top"||e==="left"||Rt(e)?"header":"footer"}function hin(e){for(const t of xc)pin(e,t);R0e(e,"x"),R0e(e,"y")}function pin(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=Ax("title",null,r,t);let l=aE(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Fe(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Ax("labelOrient",a.header,r,t),f=a.header!==null?hs((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Un(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[G8e(e,t,f)]}}}function G8e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function R0e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Jre(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=din(a.get("orient"));o[u]??(o[u]=[G8e(e,s,!1)]);const l=FC(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function min(e){oie(e),_M(e,"width"),_M(e,"height")}function gin(e){oie(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";_M(e,t),_M(e,n)}function oie(e){for(const t of e.children)t.parseLayoutSize()}function _M(e,t){const n=v8e(t),r=i5(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??_8e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=Ey(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function yin(e){const{size:t,component:n}=e;for(const r of yp){const i=tl(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Kh(s)?"step":s,!0)}else{const s=vin(e,i);n.layoutSize.set(i,s,!1)}}}function vin(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(co(s)){const a=gM(r.view,t);return nv(o)||Kh(a)?"step":a}else return sq(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return sq(r.view,t);{const s=gM(r.view,t);return Kh(s)?s.step:s}}}function bq(e,t,n){return ot(t,{suffix:`by_${ot(e)}`,...n})}class j2 extends q8e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=fie(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!pR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ge(t),r={};for(const i of n){if(![mm,gm].includes(i)){Je(a5(i,"facet"));break}const s=t[i];if(s.field===void 0){Je(eq(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=kre(t,n);return r.header?r.header=Au(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=B5(this),this.child.parseData()}parseLayoutSize(){oie(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),hin(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of xc)for(const r of Xre){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=Ax("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=I5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof j2))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof j2?{...this.channelHasField("column")?{encode:{update:{columns:{field:ot(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof j2){if(this.child.channelHasField("column")){const i=ot(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of yp){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(co(o)&&nv(a)){const u=R5(this.child,i),l=rie(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Je(ire(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of xc){const f=this.facet[c];if(f){u.push(ot(f));const{bin:d,sort:h}=f;if(li(d)&&u.push(ot(f,{binSuffix:"end"})),Th(h)){const{field:p,op:m=h5}=h,g=bq(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Fe(h)){const p=Cx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Th(r.sort)?[bq(r,r.sort,{expr:"datum"})]:Fe(r.sort)?[Cx(r,t,{expr:"datum"})]:[ot(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Th(i)?i.order:!Fe(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return hq(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Kre)if(t[s]){const o=Ax("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return hq(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=cin(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:xc.map(u=>this.facetSortFields(u)).flat(),order:xc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(ktn(this,[]))}]}getMapping(){return this.facet}}function bin(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Th(s.sort)){const{field:o,op:a=h5}=s.sort;e=i=new o_(e,{joinaggregate:[{op:a,field:o,as:bq(s,s.sort,{forAs:!0})}],groupby:[ot(s)]})}return i}return null}function Y8e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(EI(e)&&EI(a)){if(Al(e.values,a.values))return o}else if(xx(e)&&xx(a)){if(e.url===a.url)return o}else if(L5e(e)&&e.name===o.dataName)return o}}return null}function _in(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Eb({values:[]});return t.push(r),r}const n=Y8e(e.data,t);if(n)return B0(e.data)||(n.data.format=O4e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Eb(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function win(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(ltn(i))o=e=new Tx(e,i),s="derived";else if(zre(i)){const a=drn(i);o=e=va.makeWithAncestors(e,{},a,n)??e,e=new HS(e,t,i.filter)}else if(P5e(i))o=e=Ah.makeFromTransform(e,i,t),s="number";else if(ftn(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new va(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Ch.makeFromTransform(e,i);else if(dtn(i))o=e=Yf.makeFromTransform(e,i),s="number",Yre(t)&&(e=new Ty(e));else if(N5e(i))o=e=TI.make(e,t,i,r++),s="derived";else if(otn(i))o=e=new WS(e,i),s="number";else if(atn(i))o=e=new o_(e,i),s="number";else if(htn(i))o=e=vm.makeFromTransform(e,i),s="derived";else if(ptn(i))o=e=new D5(e,i),s="derived";else if(mtn(i))o=e=new P5(e,i),s="derived";else if(utn(i))o=e=new O5(e,i),s="derived";else if(etn(i))o=e=new F5(e,i),s="derived";else if(stn(i))e=new j5(e,i);else if(ctn(i))o=e=P1.makeFromTransform(e,i),s="derived";else if(ttn(i))o=e=new N5(e,i),s="derived";else if(ntn(i))o=e=new M5(e,i),s="derived";else if(rtn(i))o=e=new L5(e,i),s="derived";else if(itn(i))o=e=new $5(e,i),s="derived";else{Je($Qt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function B5(e){var h;let t=_in(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(B0(i)||xx(i)||EI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Atn;B0(i)?(F5e(i)?t=new _R(t,i.sequence):Vre(i)&&(t=new bR(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=va.makeExplicit(t,e,o)??t,t=new Ty(t);const a=e.parent&&GS(e.parent);(Xi(e)||Nl(e))&&a&&(t=Ah.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=win(t,e,o));const u=prn(e),l=hrn(e);t=va.makeWithAncestors(t,{},{...u,...l},o)??t,Xi(e)&&(t=lE.parseAll(t,e),t=SI.parseAll(t,e)),(Xi(e)||Nl(e))&&(a||(t=Ah.makeFromEncoding(t,e)??t),t=Ch.makeFromEncoding(t,e)??t,t=Tx.parseAllForSortIndex(t,e));const c=t=N0e(xi.Raw,e,t);if(Xi(e)){const p=Yf.makeFromEncoding(t,e);p&&(t=p,Yre(e)&&(t=new Ty(t))),t=P1.makeFromEncoding(t,e)??t,t=vm.makeFromEncoding(t,e)??t}Xi(e)&&(t=xI.make(t,e)??t);const f=t=N0e(xi.Main,e,t);Xi(e)&&lnn(e,f);let d=null;if(Nl(e)){const p=e.getName("facet");t=bin(t,e.facet)??t,d=new qS(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function N0e(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Hu(n,s,e,i);return r[s]=o,o}class Ein extends sie{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Je(PQt),this.children=this.getChildren(t).map((l,c)=>fie(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=B5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ge(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return w5(t)?t.vconcat:Bre(t)?t.hconcat:t.concat}parseLayoutSize(){gin(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Qre(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function xin(e){return e===!1||e===null}const Sin={disable:1,gridScale:1,scale:1,...n5e,labelExpr:1,encode:1},K8e=Ge(Sin);class aie extends gg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new aie(nn(this.explicit),nn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!xin(this.get(t))}hasOrientSignalRef(){return Rt(this.explicit.orient)}}function Tin(e,t,n){const{encoding:r,config:i}=e,s=Ds(r[t])??Ds(r[gp(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(vb(u))return{text:Lf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(_x(s)==="quantitative"){if(wx(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Lf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Lf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(_x(s)==="temporal"&&i.timeFormatType&&Ze(s)&&!s.timeUnit)return{text:Lf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Cin(e){return yp.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Oin(n,e)]),t),{})}const Ain={bottom:"top",top:"bottom",left:"right",right:"left"};function Iin(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ge(i.component.axes))n.axis[s]=Jre(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=kin(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of yp){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Rt(a)){if(r[a]>0&&!u){const l=Ain[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function kin(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Rin(i,s)}}}else return t.map(n=>n.clone());return e}function Rin(e,t){for(const n of K8e){const r=Ey(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return aFe(i,s);case"gridScale":return{explicit:i.explicit,value:hs(i.value,s.value)}}return x5(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Nin(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Rt(n.labelAngle)?n.labelAngle:_I(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===h8e(r,i))return!0}return e===n[t]}const Pin=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Oin(e,t){var y,v;let n=t.axis(e);const r=new aie,i=Ds(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||bnn(e),u=t.getScaleComponent(e).get("type"),l=dnn(e,u,a,t.config),c=n!==void 0?!n:fq("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=gnn(i,n,e,o.style,l),d=MFe(n.formatType,i,u),h=$Fe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of K8e){const _=b in m0e?m0e[b](p):zge(b)?n[b]:void 0,x=_!==void 0,S=Nin(_,b,n,t,e);if(x&&S)r.set(b,_,S);else{const{configValue:E=void 0,configFrom:T=void 0}=zge(b)&&b!=="values"?fq(b,o.style,n.style,l):{},A=E!==void 0;x&&!A?r.set(b,_,S):(T!=="vgAxisConfig"||Pin.has(b)&&A||yR(E)||Rt(E))&&r.set(b,E,!1)}}const m=n.encoding??{},g=t5e.reduce((b,_)=>{if(!r.hasAxisPart(_))return b;const x=b8e(m[_]??{},t),S=_==="labels"?Tin(t,e,x):x;return S!==void 0&&!jr(S)&&(b[_]={update:S}),b},{});return jr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Din({encoding:e,size:t}){for(const n of yp){const r=tl(n);Kh(t[r])&&m0(e[n])&&(delete t[r],Je(dFe(r)))}return t}const $in={vgMark:"arc",encodeEntry:e=>({...of(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ya("x",e,{defaultPos:"mid"}),...ya("y",e,{defaultPos:"mid"}),...xy(e,"radius"),...xy(e,"theta")})},Min={vgMark:"area",encodeEntry:e=>({...of(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...yM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...yM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Gre(e)})},Lin={vgMark:"rect",encodeEntry:e=>({...of(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...xy(e,"x"),...xy(e,"y")})},Fin={vgMark:"shape",encodeEntry:e=>({...of(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ze(n)&&n.type===zS?{field:ot(n,{expr:"datum"})}:{}}]}},jin={vgMark:"image",encodeEntry:e=>({...of(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...xy(e,"x"),...xy(e,"y"),...qre(e,"url")})},Bin={vgMark:"line",encodeEntry:e=>({...of(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ya("x",e,{defaultPos:"mid"}),...ya("y",e,{defaultPos:"mid"}),...Zs("size",e,{vgChannel:"strokeWidth"}),...Gre(e)})},Uin={vgMark:"trail",encodeEntry:e=>({...of(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ya("x",e,{defaultPos:"mid"}),...ya("y",e,{defaultPos:"mid"}),...Zs("size",e),...Gre(e)})};function uie(e,t){const{config:n}=e;return{...of(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ya("x",e,{defaultPos:"mid"}),...ya("y",e,{defaultPos:"mid"}),...Zs("size",e),...Zs("angle",e),...zin(e,n,t)}}function zin(e,t,n){return n?{shape:{value:n}}:Zs("shape",e)}const Vin={vgMark:"symbol",encodeEntry:e=>uie(e)},Hin={vgMark:"symbol",encodeEntry:e=>uie(e,"circle")},qin={vgMark:"symbol",encodeEntry:e=>uie(e,"square")},Win={vgMark:"rect",encodeEntry:e=>({...of(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...xy(e,"x"),...xy(e,"y")})},Gin={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...of(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...yM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...yM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Zs("size",e,{vgChannel:"strokeWidth"})}}},Yin={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...of(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ya("x",e,{defaultPos:"mid"}),...ya("y",e,{defaultPos:"mid"}),...qre(e),...Zs("size",e,{vgChannel:"fontSize"}),...Zs("angle",e),...f0e("align",Kin(e.markDef,n,t)),...f0e("baseline",Xin(e.markDef,n,t)),...ya("radius",e,{defaultPos:null}),...ya("theta",e,{defaultPos:null})}}};function Kin(e,t,n){if(br("align",e,n)===void 0)return"center"}function Xin(e,t,n){if(br("baseline",e,n)===void 0)return"middle"}const Qin={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...of(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ya("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ya("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Zs("size",e,{defaultValue:Jin(e),vgChannel:i}),[s]:gi(br("thickness",n,t))}}};function Jin(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=br("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&nv(a)&&ar(a.step)?a.step*3/4:mM(t.view,i)*3/4}}const mP={arc:$in,area:Min,bar:Lin,circle:Hin,geoshape:Fin,image:jin,line:Bin,point:Vin,rect:Win,rule:Gin,square:qin,text:Yin,tick:Qin,trail:Uin};function Zin(e){if(Un([f5,l5,pZt],e.mark)){const t=a5e(e.mark,e.encoding);if(t.length>0)return esn(e,t)}else if(e.mark===c5){const t=ZH.some(n=>br(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return tsn(e)}return lie(e)}const P0e="faceted_path_";function esn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:P0e+e.requestDataName(xi.Main),data:e.requestDataName(xi.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:lie(e,{fromPrefix:P0e})}]}const O0e="stack_group_";function tsn(e){var l;const[t]=lie(e,{fromPrefix:O0e}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...px(t.encode.update,["y","yc","y2","height",...ZH]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...zu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...px(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...zu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of ZH){const f=Wm(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=gi(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=ot(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(ot(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Wm(f,e.markDef,e.config);return d!==void 0?{...c,[f]:gi(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(xi.Main),name:O0e+e.requestDataName(xi.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function nsn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Fe(o)&&sd(o)&&QH(o.value)||!o&&QH(br("order",i,s)))){if((Fe(o)||Ze(o))&&!n)return iFe(o,{expr:"datum"});if(r_(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ze(l)){const c=l.sort;if(Fe(c))return{field:ot(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Th(c))return{field:ot({aggregate:Rre(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(VFe(c)){const f=e.fieldDef(c.encoding);return{field:ot(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:ot(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function lie(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=hs(r.clip,rsn(e),isn(e)),a=nFe(r),u=i.key,l=nsn(e),c=ssn(e),f=br("aria",r,s),d=mP[n].postEncodingTransform?mP[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:mP[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(xi.Main)},encode:{update:mP[n].encodeEntry(e)},...d?{transform:d}:{}}]}function rsn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function isn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function ssn(e){if(!e.component.selection)return null;const t=Ge(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ge(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class X8e extends q8e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Hge(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Gh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=Ven(o,s,{graticule:t.data&&Vre(t.data)}));const u=this.encoding=GZt(t.encoding||{},a,o.filled,s);this.markDef=I5e(o,u,s),this.size=Din({encoding:u,size:Hge(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=A5e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Fre(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===BFe,r=t&&qXt.some(i=>cn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return s5.reduce((r,i)=>{const s=Ds(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Au(t);return Fe(n)&&(i.domain=n.map(_l)),Fe(r)&&(i.range=r.map(_l)),i}initAxes(t){return yp.reduce((n,r)=>{const i=t[r];if(cn(i)||r===Ii&&cn(t.x2)||r===po&&cn(t.y2)){const s=cn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ge(t),r={};for(const i of n){const s=t[i];r[i]=yR(s)?tFe(s):_l(s)}return r}initLegends(t){return tQt.reduce((n,r)=>{const i=Ds(t[r]);if(i&&rQt(r)){const s=i.legend;n[r]=s&&Au(s)}return n},{})}parseData(){this.component.data=B5(this)}parseLayoutSize(){yin(this)}parseSelections(){this.component.selection=unn(this,this.selection)}parseMarkGroup(){this.component.mark=Zin(this)}parseAxesAndHeaders(){this.component.axes=Cin(this)}assembleSelectionTopLevelSignals(t){return Rtn(this,t)}assembleSignals(){return[...c8e(this),...Itn(this,[])]}assembleSelectionData(t){return Ntn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Qre(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!GS(this.parent))&&(t=U5e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return R1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Yh(n)}typedFieldDef(t){const n=this.fieldDef(t);return ru(n)?n:null}}class cie extends sie{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(E5(a))return new cie(a,this,this.getName(`layer_${u}`),o,s);if(mg(a))return new X8e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(rre(a))})}parseData(){this.component.data=B5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){min(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ge(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Iin(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),c8e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Qre(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of ft(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Ptn(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),A8e(this))}}function fie(e,t,n,r,i){if(p5(e))return new j2(e,t,n,i);if(E5(e))return new cie(e,t,n,r,i);if(mg(e))return new X8e(e,t,n,r,i);if(yen(e))return new Ein(e,t,n,i);throw new Error(rre(e))}function osn(e,t={}){t.logger&&EJt(t.logger),t.fieldTitle&&JFe(t.fieldTitle);try{const n=C5e(kS(t.config,e.config)),r=$5e(e,n),i=fie(r,null,"",void 0,n);return i.parse(),Rrn(i.component.data,i),{spec:usn(i,asn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&xJt(),t.fieldTitle&&FZt()}}function asn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):dt(t)&&(t={type:t}),i&&s&&Stn(t.type)){if(i==="step"&&s==="step")Je(Ige()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Je(Ige(i5(o)));const a=o==="width"?"height":"width";t.type=Ttn(a)}}return{...Ge(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...n0e(n,!1),...n0e(e,!0)}}function usn(e,t,n={},r){const i=e.config?Nen(e.config):void 0,s=[].concat(e.assembleSelectionData([]),fin(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...E5e(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const lsn=jXt.version,csn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:mx,accessPathWithDatum:Yne,compile:osn,contains:Un,deepEqual:Al,deleteNestedProperty:sM,duplicate:nn,entries:by,every:qne,fieldIntersection:Gne,flatAccessWithDatum:$4e,getFirstDefined:hs,hasIntersection:Wne,hash:Bn,internalField:F4e,isBoolean:bI,isEmpty:jr,isEqual:UXt,isInternalField:j4e,isNullOrFalse:QH,isNumeric:JF,keys:Ge,logicalExpr:L2,mergeDeep:O4e,never:P4e,normalize:$5e,normalizeAngle:_I,omit:zu,pick:px,prefixGenerator:JH,removePathFromField:BS,replaceAll:pb,replacePathInField:Uc,resetIdCounter:VXt,setEqual:D4e,some:hb,stringify:Br,titleCase:aR,unique:ch,uniqueId:L4e,vals:Lo,varName:Ai,version:lsn},Symbol.toStringTag,{value:"Module"}));function Q8e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var fsn="vega-themes",dsn="2.15.0",hsn="Themes for stylized Vega and Vega-Lite visualizations.",psn=["vega","vega-lite","themes","style"],msn="BSD-3-Clause",gsn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},ysn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],vsn="build/vega-themes.js",die="build/vega-themes.module.js",bsn="build/vega-themes.min.js",_sn="build/vega-themes.min.js",wsn="build/vega-themes.module.d.ts",Esn={type:"git",url:"https://github.com/vega/vega-themes.git"},xsn=["src","build"],Ssn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Tsn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Csn={vega:"*","vega-lite":"*"},Asn={},Isn={name:fsn,version:dsn,description:hsn,keywords:psn,license:msn,author:gsn,contributors:ysn,main:vsn,module:die,unpkg:bsn,jsdelivr:_sn,types:wsn,repository:Esn,files:xsn,scripts:Ssn,devDependencies:Tsn,peerDependencies:Csn,dependencies:Asn};const M_="#fff",D0e="#888",ksn={background:"#333",view:{stroke:D0e},title:{color:M_,subtitleColor:M_},style:{"guide-label":{fill:M_},"guide-title":{fill:M_}},axis:{domainColor:M_,gridColor:D0e,tickColor:M_}},mv="#4572a7",Rsn={background:"#fff",arc:{fill:mv},area:{fill:mv},line:{stroke:mv,strokeWidth:2},path:{stroke:mv},rect:{fill:mv},shape:{stroke:mv},symbol:{fill:mv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},gv="#30a2da",AB="#cbcbcb",Nsn="#999",Psn="#333",$0e="#f0f0f0",M0e="#333",Osn={arc:{fill:gv},area:{fill:gv},axis:{domainColor:AB,grid:!0,gridColor:AB,gridWidth:1,labelColor:Nsn,labelFontSize:10,titleColor:Psn,tickColor:AB,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:$0e,group:{fill:$0e},legend:{labelColor:M0e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:M0e,titleFontSize:14,titlePadding:10},line:{stroke:gv,strokeWidth:2},path:{stroke:gv,strokeWidth:.5},rect:{fill:gv},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:gv},bar:{binSpacing:2,fill:gv,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},yv="#000",Dsn={group:{fill:"#e5e5e5"},arc:{fill:yv},area:{fill:yv},line:{stroke:yv},path:{stroke:yv},rect:{fill:yv},shape:{stroke:yv},symbol:{fill:yv,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},$sn=22,Msn="normal",L0e="Benton Gothic, sans-serif",F0e=11.5,Lsn="normal",vv="#82c6df",IB="Benton Gothic Bold, sans-serif",j0e="normal",B0e=13,WT={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Fsn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:IB,fontSize:$sn,fontWeight:Msn},arc:{fill:vv},area:{fill:vv},line:{stroke:vv,strokeWidth:2},path:{stroke:vv},rect:{fill:vv},shape:{stroke:vv},symbol:{fill:vv,size:30},axis:{labelFont:L0e,labelFontSize:F0e,labelFontWeight:Lsn,titleFont:IB,titleFontSize:B0e,titleFontWeight:j0e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:L0e,labelFontSize:F0e,symbolType:"square",titleFont:IB,titleFontSize:B0e,titleFontWeight:j0e},range:{category:WT["category-6"],diverging:WT["fireandice-6"],heatmap:WT["fire-7"],ordinal:WT["fire-7"],ramp:WT["fire-7"]}},bv="#ab5787",gP="#979797",jsn={background:"#f9f9f9",arc:{fill:bv},area:{fill:bv},line:{stroke:bv},path:{stroke:bv},rect:{fill:bv},shape:{stroke:bv},symbol:{fill:bv,size:30},axis:{domainColor:gP,domainWidth:.5,gridWidth:.2,labelColor:gP,tickColor:gP,tickWidth:.2,titleColor:gP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},_v="#3e5c69",Bsn={background:"#fff",arc:{fill:_v},area:{fill:_v},line:{stroke:_v},path:{stroke:_v},rect:{fill:_v},shape:{stroke:_v},symbol:{fill:_v},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},rc="#1696d2",U0e="#000000",Usn="#FFFFFF",yP="Lato",kB="Lato",zsn="Lato",Vsn="#DEDDDD",Hsn=18,GT={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},qsn={background:Usn,title:{anchor:"start",fontSize:Hsn,font:yP},axisX:{domain:!0,domainColor:U0e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:kB,labelAngle:0,tickColor:U0e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:yP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Vsn,gridWidth:1,labelFontSize:12,labelFont:kB,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:yP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:kB,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:yP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:GT["six-groups-cat-1"],diverging:GT["diverging-colors"],heatmap:GT["diverging-colors"],ordinal:GT["six-groups-seq"],ramp:GT["shades-blue"]},area:{fill:rc},rect:{fill:rc},line:{color:rc,stroke:rc,strokeWidth:5},trail:{color:rc,stroke:rc,strokeWidth:0,size:1},path:{stroke:rc,strokeWidth:.5},point:{filled:!0},text:{font:zsn,color:rc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:rc,stroke:null}},arc:{fill:rc},shape:{stroke:rc},symbol:{fill:rc,size:30}},wv="#3366CC",z0e="#ccc",vP="Arial, sans-serif",Wsn={arc:{fill:wv},area:{fill:wv},path:{stroke:wv},rect:{fill:wv},shape:{stroke:wv},symbol:{stroke:wv},circle:{fill:wv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:vP,fontSize:12},"guide-title":{font:vP,fontSize:12},"group-title":{font:vP,fontSize:12}},title:{font:vP,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:z0e,tickColor:z0e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},hie=e=>e*(1/3+1),V0e=hie(9),H0e=hie(10),q0e=hie(12),YT="Segoe UI",W0e="wf_standard-font, helvetica, arial, sans-serif",G0e="#252423",KT="#605E5C",Y0e="transparent",Gsn="#C8C6C4",mf="#118DFF",Ysn="#12239E",Ksn="#E66C37",Xsn="#6B007B",Qsn="#E044A7",Jsn="#744EC2",Zsn="#D9B300",eon="#D64550",J8e=mf,Z8e="#DEEFFF",K0e=[Z8e,J8e],ton=[Z8e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",J8e],non={view:{stroke:Y0e},background:Y0e,font:YT,header:{titleFont:W0e,titleFontSize:q0e,titleColor:G0e,labelFont:YT,labelFontSize:H0e,labelColor:KT},axis:{ticks:!1,grid:!1,domain:!1,labelColor:KT,labelFontSize:V0e,titleFont:W0e,titleColor:G0e,titleFontSize:q0e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Gsn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:mf},line:{stroke:mf,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:YT,fontSize:V0e,fill:KT},arc:{fill:mf},area:{fill:mf,line:!0,opacity:.6},path:{stroke:mf},rect:{fill:mf},point:{fill:mf,filled:!0,size:75},shape:{stroke:mf},symbol:{fill:mf,strokeWidth:1.5,size:50},legend:{titleFont:YT,titleFontWeight:"bold",titleColor:KT,labelFont:YT,labelFontSize:H0e,labelColor:KT,symbolType:"circle",symbolSize:75},range:{category:[mf,Ysn,Ksn,Xsn,Qsn,Jsn,Zsn,eon],diverging:K0e,heatmap:K0e,ordinal:ton}},RB='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',ron='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',NB=400,bP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},ion=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],son=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function U5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=bP.gridBg[e],i=bP.textPrimary[e],s=bP.textSecondary[e],o=n==="dark"?ion:son,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:RB,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:ron,labelFontWeight:NB,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:bP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:RB,fill:s,fontWeight:NB},"guide-title":{font:RB,fill:s,fontWeight:NB}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const oon=U5({theme:"white",background:"#ffffff"}),aon=U5({theme:"g10",background:"#f4f4f4"}),uon=U5({theme:"g90",background:"#262626"}),lon=U5({theme:"g100",background:"#161616"}),con=Isn.version,fon=Object.freeze(Object.defineProperty({__proto__:null,carbong10:aon,carbong100:lon,carbong90:uon,carbonwhite:oon,dark:ksn,excel:Rsn,fivethirtyeight:Osn,ggplot2:Dsn,googlecharts:Wsn,latimes:Fsn,powerbi:non,quartz:jsn,urbaninstitute:qsn,version:con,vox:Bsn},Symbol.toStringTag,{value:"Module"}));function don(e,t,n,r){if(Fe(e))return`[${e.map(i=>t(dt(i)?i:X0e(i,n))).join(", ")}]`;if(ht(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(ht(c)&&(c=X0e(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function hon(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function X0e(e,t){return JSON.stringify(e,hon(t))}var pon=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const e9e="vg-tooltip-element",mon={offsetX:10,offsetY:10,id:e9e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:gon,maxDepth:2,formatTooltip:don,baseURL:""};function gon(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function yon(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return pon.toString().replace(e9e,e)}function von(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class bon{constructor(t){this.options={...mon,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=yon(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=von(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var PB={};function _on(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var OB,Q0e;function won(){return Q0e||(Q0e=1,OB=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),OB}var Eon=mr;mr.Node=xb;mr.create=mr;function mr(e){var t=this;if(t instanceof mr||(t=new mr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}mr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};mr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};mr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};mr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Son(this,arguments[e]);return this.length};mr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Ton(this,arguments[e]);return this.length};mr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};mr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};mr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};mr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};mr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};mr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};mr.prototype.map=function(e,t){t=t||this;for(var n=new mr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};mr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new mr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};mr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};mr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};mr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};mr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};mr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new mr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};mr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new mr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};mr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=xon(this,i,n[r]);return s};mr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function xon(e,t,n){var r=t===e.head?new xb(n,null,t,e):new xb(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Son(e,t){e.tail=new xb(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Ton(e,t){e.head=new xb(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function xb(e,t,n,r){if(!(this instanceof xb))return new xb(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{won()(mr)}catch{}const Con=Eon,Yv=Symbol("max"),zp=Symbol("length"),L_=Symbol("lengthCalculator"),B2=Symbol("allowStale"),m1=Symbol("maxAge"),Lp=Symbol("dispose"),J0e=Symbol("noDisposeOnSet"),Ws=Symbol("lruList"),gf=Symbol("cache"),t9e=Symbol("updateAgeOnGet"),DB=()=>1;class Aon{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Yv]=t.max||1/0;const n=t.length||DB;if(this[L_]=typeof n!="function"?DB:n,this[B2]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[m1]=t.maxAge||0,this[Lp]=t.dispose,this[J0e]=t.noDisposeOnSet||!1,this[t9e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Yv]=t||1/0,XT(this)}get max(){return this[Yv]}set allowStale(t){this[B2]=!!t}get allowStale(){return this[B2]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[m1]=t,XT(this)}get maxAge(){return this[m1]}set lengthCalculator(t){typeof t!="function"&&(t=DB),t!==this[L_]&&(this[L_]=t,this[zp]=0,this[Ws].forEach(n=>{n.length=this[L_](n.value,n.key),this[zp]+=n.length})),XT(this)}get lengthCalculator(){return this[L_]}get length(){return this[zp]}get itemCount(){return this[Ws].length}rforEach(t,n){n=n||this;for(let r=this[Ws].tail;r!==null;){const i=r.prev;Z0e(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Ws].head;r!==null;){const i=r.next;Z0e(this,t,r,n),r=i}}keys(){return this[Ws].toArray().map(t=>t.key)}values(){return this[Ws].toArray().map(t=>t.value)}reset(){this[Lp]&&this[Ws]&&this[Ws].length&&this[Ws].forEach(t=>this[Lp](t.key,t.value)),this[gf]=new Map,this[Ws]=new Con,this[zp]=0}dump(){return this[Ws].map(t=>wM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ws]}set(t,n,r){if(r=r||this[m1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[L_](n,t);if(this[gf].has(t)){if(s>this[Yv])return cE(this,this[gf].get(t)),!1;const u=this[gf].get(t).value;return this[Lp]&&(this[J0e]||this[Lp](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[zp]+=s-u.length,u.length=s,this.get(t),XT(this),!0}const o=new Ion(t,n,s,i,r);return o.length>this[Yv]?(this[Lp]&&this[Lp](t,n),!1):(this[zp]+=o.length,this[Ws].unshift(o),this[gf].set(t,this[Ws].head),XT(this),!0)}has(t){if(!this[gf].has(t))return!1;const n=this[gf].get(t).value;return!wM(this,n)}get(t){return $B(this,t,!0)}peek(t){return $B(this,t,!1)}pop(){const t=this[Ws].tail;return t?(cE(this,t),t.value):null}del(t){cE(this,this[gf].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[gf].forEach((t,n)=>$B(this,n,!1))}}const $B=(e,t,n)=>{const r=e[gf].get(t);if(r){const i=r.value;if(wM(e,i)){if(cE(e,r),!e[B2])return}else n&&(e[t9e]&&(r.value.now=Date.now()),e[Ws].unshiftNode(r));return i.value}},wM=(e,t)=>{if(!t||!t.maxAge&&!e[m1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[m1]&&n>e[m1]},XT=e=>{if(e[zp]>e[Yv])for(let t=e[Ws].tail;e[zp]>e[Yv]&&t!==null;){const n=t.prev;cE(e,t),t=n}},cE=(e,t)=>{if(t){const n=t.value;e[Lp]&&e[Lp](n.key,n.value),e[zp]-=n.length,e[gf].delete(n.key),e[Ws].removeNode(t)}};class Ion{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const Z0e=(e,t,n,r)=>{let i=n.value;wM(e,i)&&(cE(e,n),e[B2]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var kon=Aon;const Ron=Object.freeze({loose:!0}),Non=Object.freeze({}),Pon=e=>e?typeof e!="object"?Ron:e:Non;var pie=Pon,_q={exports:{}};const Oon="2.0.0",n9e=256,Don=Number.MAX_SAFE_INTEGER||9007199254740991,$on=16,Mon=n9e-6,Lon=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var mie={MAX_LENGTH:n9e,MAX_SAFE_COMPONENT_LENGTH:$on,MAX_SAFE_BUILD_LENGTH:Mon,MAX_SAFE_INTEGER:Don,RELEASE_TYPES:Lon,SEMVER_SPEC_VERSION:Oon,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Fon=typeof process=="object"&&PB&&PB.NODE_DEBUG&&/\bsemver\b/i.test(PB.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var z5=Fon;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=mie,s=z5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(_q,_q.exports);var gie=_q.exports;const eye=/^[0-9]+$/,r9e=(e,t)=>{const n=eye.test(e),r=eye.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},jon=(e,t)=>r9e(t,e);var Bon={compareIdentifiers:r9e,rcompareIdentifiers:jon};const _P=z5,{MAX_LENGTH:tye,MAX_SAFE_INTEGER:wP}=mie,{safeRe:nye,t:rye}=gie,Uon=pie,{compareIdentifiers:F_}=Bon;let zon=class Nd{constructor(t,n){if(n=Uon(n),t instanceof Nd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>tye)throw new TypeError(`version is longer than ${tye} characters`);_P("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?nye[rye.LOOSE]:nye[rye.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>wP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>wP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>wP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<wP)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(_P("SemVer.compare",this.version,this.options,t),!(t instanceof Nd)){if(typeof t=="string"&&t===this.version)return 0;t=new Nd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Nd||(t=new Nd(t,this.options)),F_(this.major,t.major)||F_(this.minor,t.minor)||F_(this.patch,t.patch)}comparePre(t){if(t instanceof Nd||(t=new Nd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(_P("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return F_(r,i)}while(++n)}compareBuild(t){t instanceof Nd||(t=new Nd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(_P("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return F_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),F_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var yie=zon;const iye=yie,Von=(e,t,n)=>new iye(e,n).compare(new iye(t,n));var YS=Von;const Hon=YS,qon=(e,t,n)=>Hon(e,t,n)===0;var Won=qon;const Gon=YS,Yon=(e,t,n)=>Gon(e,t,n)!==0;var Kon=Yon;const Xon=YS,Qon=(e,t,n)=>Xon(e,t,n)>0;var Jon=Qon;const Zon=YS,ean=(e,t,n)=>Zon(e,t,n)>=0;var tan=ean;const nan=YS,ran=(e,t,n)=>nan(e,t,n)<0;var ian=ran;const san=YS,oan=(e,t,n)=>san(e,t,n)<=0;var aan=oan;const uan=Won,lan=Kon,can=Jon,fan=tan,dan=ian,han=aan,pan=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return uan(e,n,r);case"!=":return lan(e,n,r);case">":return can(e,n,r);case">=":return fan(e,n,r);case"<":return dan(e,n,r);case"<=":return han(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var man=pan,MB,sye;function gan(){if(sye)return MB;sye=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}MB=t;const n=pie,{safeRe:r,t:i}=gie,s=man,o=z5,a=yie,u=i9e();return MB}var LB,oye;function i9e(){if(oye)return LB;oye=1;class e{constructor(O,M){if(M=r(M),O instanceof e)return O.loose===!!M.loose&&O.includePrerelease===!!M.includePrerelease?O:new e(O.raw,M);if(O instanceof i)return this.raw=O.value,this.set=[[O]],this.format(),this;if(this.options=M,this.loose=!!M.loose,this.includePrerelease=!!M.includePrerelease,this.raw=O.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(j=>this.parseRange(j.trim())).filter(j=>j.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const j=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[j];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map(O=>O.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(O){const j=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+O,B=n.get(j);if(B)return B;const U=this.options.loose,V=U?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];O=O.replace(V,R(this.options.includePrerelease)),s("hyphen replace",O),O=O.replace(a[u.COMPARATORTRIM],l),s("comparator trim",O),O=O.replace(a[u.TILDETRIM],c),s("tilde trim",O),O=O.replace(a[u.CARETTRIM],f),s("caret trim",O);let D=O.split(" ").map(H=>y(H,this.options)).join(" ").split(/\s+/).map(H=>k(H,this.options));U&&(D=D.filter(H=>(s("loose invalid filter",H,this.options),!!H.match(a[u.COMPARATORLOOSE])))),s("range list",D);const z=new Map,W=D.map(H=>new i(H,this.options));for(const H of W){if(p(H))return[H];z.set(H.value,H)}z.size>1&&z.has("")&&z.delete("");const F=[...z.values()];return n.set(j,F),F}intersects(O,M){if(!(O instanceof e))throw new TypeError("a Range is required");return this.set.some(j=>g(j,M)&&O.set.some(B=>g(B,M)&&j.every(U=>B.every(V=>U.intersects(V,M)))))}test(O){if(!O)return!1;if(typeof O=="string")try{O=new o(O,this.options)}catch{return!1}for(let M=0;M<this.set.length;M++)if($(this.set[M],O,this.options))return!0;return!1}}LB=e;const t=kon,n=new t({max:1e3}),r=pie,i=gan(),s=z5,o=yie,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=gie,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=mie,p=P=>P.value==="<0.0.0-0",m=P=>P.value==="",g=(P,O)=>{let M=!0;const j=P.slice();let B=j.pop();for(;M&&j.length;)M=j.every(U=>B.intersects(U,O)),B=j.pop();return M},y=(P,O)=>(s("comp",P,O),P=x(P,O),s("caret",P),P=b(P,O),s("tildes",P),P=E(P,O),s("xrange",P),P=A(P,O),s("stars",P),P),v=P=>!P||P.toLowerCase()==="x"||P==="*",b=(P,O)=>P.trim().split(/\s+/).map(M=>_(M,O)).join(" "),_=(P,O)=>{const M=O.loose?a[u.TILDELOOSE]:a[u.TILDE];return P.replace(M,(j,B,U,V,D)=>{s("tilde",P,j,B,U,V,D);let z;return v(B)?z="":v(U)?z=`>=${B}.0.0 <${+B+1}.0.0-0`:v(V)?z=`>=${B}.${U}.0 <${B}.${+U+1}.0-0`:D?(s("replaceTilde pr",D),z=`>=${B}.${U}.${V}-${D} <${B}.${+U+1}.0-0`):z=`>=${B}.${U}.${V} <${B}.${+U+1}.0-0`,s("tilde return",z),z})},x=(P,O)=>P.trim().split(/\s+/).map(M=>S(M,O)).join(" "),S=(P,O)=>{s("caret",P,O);const M=O.loose?a[u.CARETLOOSE]:a[u.CARET],j=O.includePrerelease?"-0":"";return P.replace(M,(B,U,V,D,z)=>{s("caret",P,B,U,V,D,z);let W;return v(U)?W="":v(V)?W=`>=${U}.0.0${j} <${+U+1}.0.0-0`:v(D)?U==="0"?W=`>=${U}.${V}.0${j} <${U}.${+V+1}.0-0`:W=`>=${U}.${V}.0${j} <${+U+1}.0.0-0`:z?(s("replaceCaret pr",z),U==="0"?V==="0"?W=`>=${U}.${V}.${D}-${z} <${U}.${V}.${+D+1}-0`:W=`>=${U}.${V}.${D}-${z} <${U}.${+V+1}.0-0`:W=`>=${U}.${V}.${D}-${z} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?V==="0"?W=`>=${U}.${V}.${D}${j} <${U}.${V}.${+D+1}-0`:W=`>=${U}.${V}.${D}${j} <${U}.${+V+1}.0-0`:W=`>=${U}.${V}.${D} <${+U+1}.0.0-0`),s("caret return",W),W})},E=(P,O)=>(s("replaceXRanges",P,O),P.split(/\s+/).map(M=>T(M,O)).join(" ")),T=(P,O)=>{P=P.trim();const M=O.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return P.replace(M,(j,B,U,V,D,z)=>{s("xRange",P,j,B,U,V,D,z);const W=v(U),F=W||v(V),H=F||v(D),G=H;return B==="="&&G&&(B=""),z=O.includePrerelease?"-0":"",W?B===">"||B==="<"?j="<0.0.0-0":j="*":B&&G?(F&&(V=0),D=0,B===">"?(B=">=",F?(U=+U+1,V=0,D=0):(V=+V+1,D=0)):B==="<="&&(B="<",F?U=+U+1:V=+V+1),B==="<"&&(z="-0"),j=`${B+U}.${V}.${D}${z}`):F?j=`>=${U}.0.0${z} <${+U+1}.0.0-0`:H&&(j=`>=${U}.${V}.0${z} <${U}.${+V+1}.0-0`),s("xRange return",j),j})},A=(P,O)=>(s("replaceStars",P,O),P.trim().replace(a[u.STAR],"")),k=(P,O)=>(s("replaceGTE0",P,O),P.trim().replace(a[O.includePrerelease?u.GTE0PRE:u.GTE0],"")),R=P=>(O,M,j,B,U,V,D,z,W,F,H,G,ee)=>(v(j)?M="":v(B)?M=`>=${j}.0.0${P?"-0":""}`:v(U)?M=`>=${j}.${B}.0${P?"-0":""}`:V?M=`>=${M}`:M=`>=${M}${P?"-0":""}`,v(W)?z="":v(F)?z=`<${+W+1}.0.0-0`:v(H)?z=`<${W}.${+F+1}.0-0`:G?z=`<=${W}.${F}.${H}-${G}`:P?z=`<${W}.${F}.${+H+1}-0`:z=`<=${z}`,`${M} ${z}`.trim()),$=(P,O,M)=>{for(let j=0;j<P.length;j++)if(!P[j].test(O))return!1;if(O.prerelease.length&&!M.includePrerelease){for(let j=0;j<P.length;j++)if(s(P[j].semver),P[j].semver!==i.ANY&&P[j].semver.prerelease.length>0){const B=P[j].semver;if(B.major===O.major&&B.minor===O.minor&&B.patch===O.patch)return!0}return!1}return!0};return LB}const yan=i9e(),van=(e,t,n)=>{try{t=new yan(t,n)}catch{return!1}return t.test(e)};var ban=van,s9e=_on(ban);function _an(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var wan=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function o9e(e,...t){for(const n of t)Ean(e,n);return e}function Ean(e,t){for(const n of Object.keys(t))RS(e,n,t[n],!0)}const vf=sXt;let CI=csn;const EP=typeof window<"u"?window:void 0;var pye;CI===void 0&&((pye=EP==null?void 0:EP.vl)!=null&&pye.compile)&&(CI=EP.vl);const xan={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},San={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},BC={vega:"Vega","vega-lite":"Vega-Lite"},EM={vega:vf.version,"vega-lite":CI?CI.version:"not available"},Tan={vega:e=>e,"vega-lite":(e,t)=>CI.compile(e,{config:t}).spec},Can=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Aan="chart-wrapper";function Ian(e){return typeof e=="function"}function aye(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${BC[r]} JSON Source`}function kan(e,t){if(e.$schema){const n=Q8e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${BC[n.library]}, but mode argument sets ${BC[t]??t}.`);const r=n.library;return s9e(EM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${BC[r]} ${n.version}, but the current version of ${BC[r]} is v${EM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function a9e(e){return!!(e&&"load"in e)}function uye(e){return a9e(e)?e:vf.loader(e)}function Ran(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return dt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Nan(e,t,n={}){let r,i;dt(t)?(i=uye(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Ran(r),o=s.loader;(!i||o)&&(i=uye(n.loader??o));const a=await lye(s,i),u=await lye(n,i),l={...o9e(u,a),config:kS(u.config??{},a.config??{})};return await Oan(e,r,l,i)}async function lye(e,t){const n=dt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=dt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Pan(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Oan(e,t,n={},r){const i=n.theme?kS(fon[n.theme],n.config??{}):n.config,s=Gy(n.actions)?n.actions:o9e({},xan,n.actions??{}),o={...San,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??vf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const x="vega-embed-style",{root:S,rootContainer:E}=Pan(c);if(!S.getElementById(x)){const T=document.createElement("style");T.id=x,T.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?wan.toString():n.defaultStyle,E.appendChild(T)}}const f=kan(t,n.mode);let d=Tan[f](t,i);if(f==="vega-lite"&&d.$schema){const x=Q8e(d.$schema);s9e(EM.vega,`^${x.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${x.version}, but current version is v${EM.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const x=document.createElement("div");x.classList.add(Aan),c.appendChild(x),h=x}const p=n.patch;if(p&&(d=p instanceof Function?p(d):rF(d,p,!0,!1).newDocument),n.formatLocale&&vf.formatLocale(n.formatLocale),n.timeFormatLocale&&vf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const x in n.expressionFunctions){const S=n.expressionFunctions[x];"fn"in S?vf.expressionFunction(x,S.fn,S.visitor):S instanceof Function&&vf.expressionFunction(x,S)}const{ast:m}=n,g=vf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||vf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:vf.expressionInterpreter??n.expr??mXt}:{}});if(y.addSignalListener("autosize",(x,S)=>{const{type:E}=S;E=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):E=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):E=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:x,tooltip:S}=n,E=x&&!a9e(x)?x==null?void 0:x.baseURL:void 0,T=Ian(S)?S:new bon({baseURL:E,...S===!0?{}:S}).call;y.tooltip(T)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:x,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(x,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let x=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const E=document.createElement("details");E.title=o.CLICK_TO_VIEW_ACTIONS,c.append(E),x=E;const T=document.createElement("summary");T.innerHTML=Can,E.append(T),b=A=>{E.contains(A.target)||E.removeAttribute("open")},document.addEventListener("click",b)}const S=document.createElement("div");if(x.append(S),S.classList.add("vega-actions"),s===!0||s.export!==!1){for(const E of["svg","png"])if(s===!0||s.export===!0||s.export[E]){const T=o[`${E.toUpperCase()}_ACTION`],A=document.createElement("a"),k=ht(n.scaleFactor)?n.scaleFactor[E]:n.scaleFactor;A.text=T,A.href="#",A.target="_blank",A.download=`${l}.${E}`,A.addEventListener("mousedown",async function(R){R.preventDefault();const $=await y.toImageURL(E,k);this.href=$}),S.append(A)}}if(s===!0||s.source!==!1){const E=document.createElement("a");E.text=o.SOURCE_ACTION,E.href="#",E.addEventListener("click",function(T){aye(Fj(t),n.sourceHeader??"",n.sourceFooter??"",f),T.preventDefault()}),S.append(E)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const E=document.createElement("a");E.text=o.COMPILED_ACTION,E.href="#",E.addEventListener("click",function(T){aye(Fj(d),n.sourceHeader??"",n.sourceFooter??"","vega"),T.preventDefault()}),S.append(E)}if(s===!0||s.editor!==!1){const E=n.editorUrl??"https://vega.github.io/editor/",T=document.createElement("a");T.text=o.EDITOR_ACTION,T.href="#",T.addEventListener("click",function(A){_an(window,E,{config:i,mode:f,renderer:a,spec:Fj(t)}),A.preventDefault()}),S.append(T)}}function _(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:_,embedOptions:n}}function Dan(e){return!!e&&{}.toString.call(e)==="[object Function]"}function $an(e,t,n){n&&(Dan(n)?n(e.data(t)):e.change(t,vf.changeset().remove(()=>!0).insert(n)))}function Man(e,t){Object.keys(t).forEach(n=>{$an(e,n,t[n])})}function u9e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const l9e=()=>{};function FB(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Lan(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=u9e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!lO(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function cye(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function jB(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function UC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c9e extends Nr.PureComponent{constructor(){super(...arguments),UC(this,"containerRef",Nr.createRef()),UC(this,"resultPromise",void 0),UC(this,"handleError",t=>{const{onError:n=l9e}=this.props;n(t,this.containerRef.current),console.warn(t)}),UC(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=u9e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Lan(jB(this.props),jB(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!WV(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&cye(a,s),i&&FB(a,i)),a.run()})}else WV(i,s)||this.modifyView(o=>{s&&cye(o,s),i&&FB(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=jB(this.props);this.resultPromise=Nan(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;FB(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Nr.createElement("div",{ref:this.containerRef,className:t,style:n})}}UC(c9e,"propTypes",{className:Ut.string,onError:Ut.func});function wq(){return wq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wq.apply(this,arguments)}function Eq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Fan={};class f9e extends Nr.PureComponent{constructor(){super(...arguments),Eq(this,"vegaEmbed",Nr.createRef()),Eq(this,"handleNewView",t=>{this.update();const{onNewView:n=l9e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){WV(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Man(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Nr.createElement(c9e,wq({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}Eq(f9e,"defaultProps",{data:Fan});function xq(){return xq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xq.apply(this,arguments)}function jan(e){return Nr.createElement(f9e,xq({},e,{mode:"vega-lite"}))}function fye(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function Ban(e){const{studyId:t,allParticipants:n,config:r}=e,[i,{open:s,close:o}]=nC(!1),a=Yc(),[u,l]=Bf(),c=n.filter(k=>k.completed).map(k=>Math.max(...Object.values(k.answers).map(R=>R.endTime))),[f,d]=I.useState([new Date(new Date(Math.min(...c.length>0?c:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...c.length>0?c:[new Date().getTime()])).setHours(24,0,0,0))]),h=I.useMemo(()=>n.filter(k=>k.completed&&fye(k.answers,f)),[n,f]),p=I.useMemo(()=>n.filter(k=>!k.completed&&fye(k.answers,f)),[n,f]),m=I.useMemo(()=>{var k,R;return h.length>0?[{Date:(k=f[0])==null?void 0:k.getTime(),Participants:0},...h.map($=>Math.max(...Object.values($.answers).map(P=>P.endTime).flat())).sort(($,P)=>$-P).map(($,P)=>({Date:$,Participants:P})),{Date:(R=f[1])==null?void 0:R.getTime(),Participants:h.length}]:[]},[h,f]),g=I.useMemo(()=>{var k,R;return{width:l.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(k=f[0])==null?void 0:k.getTime(),(R=f[1])==null?void 0:R.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:m}}},[l.width,f,m]),[y,{close:v,open:b}]=nC(!1),[_,{close:x,open:S}]=nC(!1),[E,{close:T,open:A}]=nC(!1);return w.jsxs(Jh,{children:[w.jsxs(Nb,{ref:u,p:"lg",shadow:"md",withBorder:!0,children:[w.jsxs(ii,{align:"center",mb:16,justify:"space-between",children:[w.jsxs(ii,{direction:"column",children:[w.jsx(Co,{order:5,mb:4,children:t}),w.jsxs(ii,{direction:"row",wrap:"nowrap",gap:"xs",align:"center",mb:4,children:[w.jsxs(Pw,{size:"sm",color:"orange",children:["Total:",p.length+h.length]}),w.jsxs(Pw,{size:"sm",color:"green",children:["Completed:",h.length]}),w.jsxs(Pw,{size:"sm",color:"cyan",children:["In Progress:",p.length]})]})]}),w.jsxs(Zn,{children:[w.jsxs(lr,{opened:y,children:[w.jsx(lr.Target,{children:w.jsx(sr,{variant:"light",disabled:n.length===0,onClick:()=>{EJ(JSON.stringify(n,null,2),`${t}_all.json`)},onMouseEnter:b,onMouseLeave:v,px:4,children:w.jsx(aQe,{})})}),w.jsx(lr.Dropdown,{children:w.jsx(xt,{children:"Download all participants data as JSON"})})]}),w.jsxs(lr,{opened:_,children:[w.jsx(lr.Target,{children:w.jsx(sr,{variant:"light",disabled:n.length===0,onClick:s,onMouseEnter:S,onMouseLeave:x,px:4,children:w.jsx(Nwe,{})})}),w.jsx(lr.Dropdown,{children:w.jsx(xt,{children:"Download all participants data as a tidy CSV"})})]}),w.jsxs(lr,{opened:E,children:[w.jsx(lr.Target,{children:w.jsx(sr,{onClick:()=>a(`/analysis/stats/${t}`),onMouseEnter:A,onMouseLeave:T,px:4,children:w.jsx(sQe,{})})}),w.jsx(lr.Dropdown,{children:w.jsx(xt,{children:"Analyze study data"})})]})]})]}),w.jsx(PZ,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:f,onChange:d}),m.length>0?w.jsxs(w.Fragment,{children:[w.jsx(xt,{mt:16,children:"Finished Participants"}),w.jsx(jan,{spec:g,actions:!1})]}):w.jsx(Ne,{h:293.4,children:w.jsx(Bo,{style:{height:"100%"},children:w.jsx(xt,{children:"Not enough participants for chart"})})})]}),i&&w.jsx(Zkt,{opened:i,close:o,filename:`${t}_all_tidy.csv`,studyConfig:r,data:n})]})}function Uan(e){const{globalConfig:t}=e,[n,r]=I.useState(!1),[i,s]=I.useState({}),[o,a]=I.useState({}),{storageEngine:u}=lo();return I.useEffect(()=>{(async()=>{r(!0);const c={},f={},d=async p=>{const m=await AZ(p,t);if(u){if(c[p]=await u.getAllParticipantsDataByStudy(p),m===null)return;f[p]=m}};await(async()=>{const p=t.configsList.map(m=>d(m));try{await Promise.all(p),s(c),a(f)}catch(m){console.error("Error fetching data:",m)}finally{r(!1)}})()})()},[t,u]),w.jsxs(Ne,{children:[w.jsx(Co,{mb:20,order:4,children:"Your Studies:"}),w.jsxs(bc,{children:[t.configsList.map(l=>i[l]&&w.jsx(bc.Col,{span:{md:12,xl:6},children:w.jsx(Ban,{studyId:l,allParticipants:i[l],config:o[l]})},`${l}-panel`)),w.jsx(ep,{visible:n})]})]})}function zan({globalConfig:e}){return w.jsxs(w.Fragment,{children:[w.jsx(R2,{studyIds:e.configsList}),w.jsx(cs.Main,{children:w.jsx(Jh,{fluid:!0,children:w.jsx(Uan,{globalConfig:e})})})]})}function Van(){const{user:e,triggerAuth:t}=AS(),{storageEngine:n}=lo(),[r,i]=I.useState(!1),[s,o]=I.useState([]),[a,u]=I.useState(!1),[l,c]=I.useState(!1),[f,d]=I.useState(!1),[h,p]=I.useState(!1),[m,g]=I.useState(""),[y,v]=I.useState(null),b=NNe({initialValues:{email:""},validate:{email:bRt("Invalid email")}});I.useEffect(()=>{(async()=>{if(u(!0),n instanceof zd){const R=await(n==null?void 0:n.getUserManagementData("authentication"));i(R==null?void 0:R.isEnabled);const $=await(n==null?void 0:n.getUserManagementData("adminUsers"));$&&$.adminUsersList&&o($==null?void 0:$.adminUsersList.map(P=>P.email))}else i(!1);u(!1)})()},[n]);const _=async()=>{if(u(!0),n instanceof zd){const k=await kDe(n,u);k&&k.email&&v({email:k.email,uid:k.uid}),p(!0)}u(!1)},x=async k=>{u(!0),n instanceof zd&&k&&(await n.changeAuth(!0),await n.addAdminUser(k),o([k.email]),i(!0),t()),p(!1),u(!1)},S=async()=>{if(u(!0),n instanceof zd){await n.addAdminUser({email:b.values.email,uid:null});const k=await n.getUserManagementData("adminUsers");o(k==null?void 0:k.adminUsersList.map(R=>R.email))}u(!1),c(!1),b.setValues({email:""})},E=k=>{d(!0),g(k)},T=async()=>{if(u(!0),n instanceof zd){await n.removeAdminUser(m);const k=await n.getUserManagementData("adminUsers");o(k==null?void 0:k.adminUsersList.map(R=>R.email))}d(!1),u(!1)},A=I.useMemo(()=>n instanceof zd,[n]);return w.jsxs(w.Fragment,{children:[w.jsx(Jh,{children:w.jsxs(Nb,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[w.jsx(Co,{mb:20,order:3,children:"Authentication"}),r?w.jsx(ii,{children:w.jsx(xt,{children:"Authentication is enabled."})}):w.jsxs(ii,{justify:"space-between",children:[w.jsx(Ne,{children:w.jsx(xt,{children:"Authentication is currently disabled."})}),w.jsx(Tc,{label:"You can only enable auth when using Firebase",disabled:A,children:w.jsx(sr,{onClick:k=>A?_():k.preventDefault(),color:"green","data-disabled":A?void 0:!0,style:{"&[data-disabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?w.jsxs(ii,{mt:40,direction:"column",children:[w.jsxs(ii,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[w.jsx(Co,{order:6,children:"Enabled Users"}),w.jsx(_Qe,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(k=>{var R;return w.jsxs(ii,{justify:"space-between",mb:10,children:[w.jsx(xt,{children:k}),k===((R=e.user)==null?void 0:R.email)?w.jsx(xt,{color:"blue",size:"xs",children:"You"}):w.jsx(Tm,{variant:"subtle",onClick:()=>E(k),children:w.jsx(bQe,{color:"red"})})]},k)}):null]}):null]})}),w.jsx(Oo,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:w.jsxs(Ne,{component:"form",onSubmit:b.onSubmit(()=>S()),children:[w.jsx(Vx,{leftSection:w.jsx(tQe,{}),placeholder:"User Gmail Account",...b.getInputProps("email")}),w.jsxs(ii,{mt:30,justify:"right",children:[w.jsx(sr,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),w.jsx(sr,{type:"submit",children:"Save"})]})]})}),w.jsxs(Oo,{opened:f,size:"large",onClose:()=>d(!1),title:w.jsxs(xt,{fw:700,children:["Remove",m,"?"]}),children:[w.jsxs(xt,{mt:40,children:["Are you sure you want to remove",w.jsx("b",{children:m})," ","as an administrator?"]}),w.jsxs(ii,{mt:40,justify:"right",children:[w.jsx(sr,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),w.jsx(sr,{onClick:()=>T(),children:"Yes, I'm sure."})]})]}),w.jsxs(Oo,{opened:h,size:"md",onClose:()=>d(!1),title:w.jsx(xt,{fw:700,children:"Enable Authentication?"}),children:[w.jsxs(xt,{mt:40,children:["User"," ",w.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),w.jsxs(ii,{mt:40,justify:"right",children:[w.jsx(sr,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),w.jsx(sr,{onClick:()=>x(y),children:"Yes, I'm sure."})]})]}),w.jsx(ep,{visible:a})]})}var Han={VITE_BASE_PATH:"/ThinkAloud/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LfZJ4EpAAAAAORbyljBz16Te5vhCpEz2L2QgqtQ",VITE_REVISIT_MODE:"private",BASE_URL:"/ThinkAloud/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function qan(){const t=await(await fetch(`${Kc}global.json`)).text();return Xkt(t)}async function Wan(e){const t={},n=e.configsList.filter(o=>Han.VITE_CI==="true"?!0:!e.configs[o].test).map(o=>`${Kc}${e.configs[o].path}`),r=await Promise.all(n.map(o=>fetch(o))),i=await Promise.all(r.map(o=>o.text())),s=await Promise.all(i.map((o,a)=>TNe(o,e.configsList[a])));return e.configsList.forEach((o,a)=>{t[o]=s[a]}),t}function Gan(){const[e,t]=I.useState(null),[n,r]=I.useState({});return I.useEffect(()=>{async function i(){e&&r(await Wan(e))}i()},[e]),I.useEffect(()=>{e||qan().then(i=>{t(i)})},[e]),e?w.jsx(IXe,{basename:Kc,children:w.jsx(C6t,{children:w.jsx(jXe,{children:w.jsxs(_Xe,{children:[w.jsx(Np,{path:"/",element:w.jsxs(w.Fragment,{children:[w.jsx(R2,{studyIds:e.configsList}),w.jsx(lst,{globalConfig:e,studyConfigs:n})]})}),w.jsx(Np,{path:"/:studyId/*",element:w.jsx(i4t,{globalConfig:e})}),w.jsx(Np,{path:"/analysis/dashboard",element:w.jsx(Mj,{children:w.jsx(zan,{globalConfig:e})})}),w.jsx(Np,{path:"/analysis",element:w.jsx(vV,{to:"/analysis/dashboard"})}),w.jsx(Np,{path:"/analysis/stats/:studyId/:tab",element:w.jsx(Mj,{children:w.jsx(u4t,{globalConfig:e})})}),w.jsx(Np,{path:"/analysis/stats/:studyId",element:w.jsx(vV,{to:"./table",replace:!0})}),w.jsx(Np,{path:"/settings",element:w.jsxs(Mj,{children:[w.jsx(R2,{studyIds:e.configsList}),w.jsx(cs.Main,{children:w.jsx(Van,{})})]})}),w.jsx(Np,{path:"/login",element:w.jsxs(w.Fragment,{children:[w.jsx(R2,{studyIds:e.configsList}),w.jsx(cs.Main,{children:w.jsx(l4t,{})})]})})]})})})}):null}let xP;const Yan=new Uint8Array(16);function Kan(){if(!xP&&(xP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!xP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xP(Yan)}const bo=[];for(let e=0;e<256;++e)bo.push((e+256).toString(16).slice(1));function Xan(e,t=0){return bo[e[t+0]]+bo[e[t+1]]+bo[e[t+2]]+bo[e[t+3]]+"-"+bo[e[t+4]]+bo[e[t+5]]+"-"+bo[e[t+6]]+bo[e[t+7]]+"-"+bo[e[t+8]]+bo[e[t+9]]+"-"+bo[e[t+10]]+bo[e[t+11]]+bo[e[t+12]]+bo[e[t+13]]+bo[e[t+14]]+bo[e[t+15]]}const Qan=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),dye={randomUUID:Qan};function hye(e,t,n){if(dye.randomUUID&&!t&&!e)return dye.randomUUID();e=e||{};const r=e.random||(e.rng||Kan)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Xan(r)}class Jan extends SDe{constructor(){super("localStorage");ul(this,"studyDatabase")}getEditedTranscript(n){throw new Error("Method not implemented.")}saveEditedTranscript(n,r){throw new Error("Method not implemented.")}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}getTranscription(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyDatabase=await qV.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await nE(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s){var l;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this.studyDatabase.getItem(this.currentParticipantId);if(o)return o;const a=await nE(JSON.stringify(r)),u={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1};return await((l=this.studyDatabase)==null?void 0:l.setItem(this.currentParticipantId,u)),u}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=hye();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswer(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const i=await this.studyDatabase.getItem(this.currentParticipantId);if(!i)throw new Error("Participant not initialized");i.answers[n]=r,await this.studyDatabase.setItem(this.currentParticipantId,i)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");const r=n.pop();if(!r)throw new Error("Latin square is empty");return await this.studyDatabase.setItem("sequenceArray",n),r}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=qV.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=hye();this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i;let s=await this.studyDatabase.getItem(i);if(!s){const o=await nE(JSON.stringify(n)),a={participantId:i,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};await this.studyDatabase.setItem(i,a),s=a}return s}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}_verifyStudyDatabase(n){return n!==void 0}}async function Zan(){let e,t=!1;{const n=new zd;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new Jan;await n.connect(),e=n}return e}function eun(){const{storageEngine:e,setStorageEngine:t}=lo();return I.useEffect(()=>{if(e!==void 0)return;async function n(){const r=await Zan();t(r)}n()},[t,e]),w.jsx(cs,{padding:"md",header:{height:70},navbar:{width:300,breakpoint:"xs"},aside:{width:200,breakpoint:"xs"},children:w.jsx(Gan,{})})}BB.createRoot(document.getElementById("root")).render(w.jsx(Nr.StrictMode,{children:w.jsx(NKe,{children:w.jsx(J1e,{children:w.jsx(eun,{})})})}))});export default tun();
