var mze=Object.defineProperty;var gze=(e,t,n)=>t in e?mze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var yze=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Rl=(e,t,n)=>gze(e,typeof t!="symbol"?t+"":t,n);var Hgn=yze((Y0n,Roe)=>{function vze(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ys=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ube(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var cbe={exports:{}},qL={},dbe={exports:{}},Xn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xR=Symbol.for("react.element"),bze=Symbol.for("react.portal"),_ze=Symbol.for("react.fragment"),wze=Symbol.for("react.strict_mode"),Eze=Symbol.for("react.profiler"),xze=Symbol.for("react.provider"),Sze=Symbol.for("react.context"),Tze=Symbol.for("react.forward_ref"),Cze=Symbol.for("react.suspense"),Aze=Symbol.for("react.memo"),Ize=Symbol.for("react.lazy"),Yoe=Symbol.iterator;function Rze(e){return e===null||typeof e!="object"?null:(e=Yoe&&e[Yoe]||e["@@iterator"],typeof e=="function"?e:null)}var fbe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hbe=Object.assign,pbe={};function Zx(e,t,n){this.props=e,this.context=t,this.refs=pbe,this.updater=n||fbe}Zx.prototype.isReactComponent={};Zx.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zx.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mbe(){}mbe.prototype=Zx.prototype;function wG(e,t,n){this.props=e,this.context=t,this.refs=pbe,this.updater=n||fbe}var EG=wG.prototype=new mbe;EG.constructor=wG;hbe(EG,Zx.prototype);EG.isPureReactComponent=!0;var Koe=Array.isArray,gbe=Object.prototype.hasOwnProperty,xG={current:null},ybe={key:!0,ref:!0,__self:!0,__source:!0};function vbe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)gbe.call(t,r)&&!ybe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:xR,type:e,key:s,ref:o,props:i,_owner:xG.current}}function kze(e,t){return{$$typeof:xR,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function SG(e){return typeof e=="object"&&e!==null&&e.$$typeof===xR}function Pze(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Xoe=/\/+/g;function o8(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Pze(""+e.key):t.toString(36)}function FO(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case xR:case bze:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+o8(o,0):r,Koe(i)?(n="",e!=null&&(n=e.replace(Xoe,"$&/")+"/"),FO(i,t,n,"",function(u){return u})):i!=null&&(SG(i)&&(i=kze(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Xoe,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Koe(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+o8(s,a);o+=FO(s,t,n,l,i)}else if(l=Rze(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+o8(s,a++),o+=FO(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function LP(e,t,n){if(e==null)return e;var r=[],i=0;return FO(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Nze(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _l={current:null},jO={transition:null},Oze={ReactCurrentDispatcher:_l,ReactCurrentBatchConfig:jO,ReactCurrentOwner:xG};function bbe(){throw Error("act(...) is not supported in production builds of React.")}Xn.Children={map:LP,forEach:function(e,t,n){LP(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return LP(e,function(){t++}),t},toArray:function(e){return LP(e,function(t){return t})||[]},only:function(e){if(!SG(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xn.Component=Zx;Xn.Fragment=_ze;Xn.Profiler=Eze;Xn.PureComponent=wG;Xn.StrictMode=wze;Xn.Suspense=Cze;Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Oze;Xn.act=bbe;Xn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=hbe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=xG.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)gbe.call(t,l)&&!ybe.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:xR,type:e.type,key:i,ref:s,props:r,_owner:o}};Xn.createContext=function(e){return e={$$typeof:Sze,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xze,_context:e},e.Consumer=e};Xn.createElement=vbe;Xn.createFactory=function(e){var t=vbe.bind(null,e);return t.type=e,t};Xn.createRef=function(){return{current:null}};Xn.forwardRef=function(e){return{$$typeof:Tze,render:e}};Xn.isValidElement=SG;Xn.lazy=function(e){return{$$typeof:Ize,_payload:{_status:-1,_result:e},_init:Nze}};Xn.memo=function(e,t){return{$$typeof:Aze,type:e,compare:t===void 0?null:t}};Xn.startTransition=function(e){var t=jO.transition;jO.transition={};try{e()}finally{jO.transition=t}};Xn.unstable_act=bbe;Xn.useCallback=function(e,t){return _l.current.useCallback(e,t)};Xn.useContext=function(e){return _l.current.useContext(e)};Xn.useDebugValue=function(){};Xn.useDeferredValue=function(e){return _l.current.useDeferredValue(e)};Xn.useEffect=function(e,t){return _l.current.useEffect(e,t)};Xn.useId=function(){return _l.current.useId()};Xn.useImperativeHandle=function(e,t,n){return _l.current.useImperativeHandle(e,t,n)};Xn.useInsertionEffect=function(e,t){return _l.current.useInsertionEffect(e,t)};Xn.useLayoutEffect=function(e,t){return _l.current.useLayoutEffect(e,t)};Xn.useMemo=function(e,t){return _l.current.useMemo(e,t)};Xn.useReducer=function(e,t,n){return _l.current.useReducer(e,t,n)};Xn.useRef=function(e){return _l.current.useRef(e)};Xn.useState=function(e){return _l.current.useState(e)};Xn.useSyncExternalStore=function(e,t,n){return _l.current.useSyncExternalStore(e,t,n)};Xn.useTransition=function(){return _l.current.useTransition()};Xn.version="18.3.1";dbe.exports=Xn;var A=dbe.exports;const us=bu(A),lM=vze({__proto__:null,default:us},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dze=A,Mze=Symbol.for("react.element"),$ze=Symbol.for("react.fragment"),Lze=Object.prototype.hasOwnProperty,Fze=Dze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jze={key:!0,ref:!0,__self:!0,__source:!0};function _be(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Lze.call(t,r)&&!jze.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Mze,type:e,key:s,ref:o,props:i,_owner:Fze.current}}qL.Fragment=$ze;qL.jsx=_be;qL.jsxs=_be;cbe.exports=qL;var b=cbe.exports,xz={},wbe={exports:{}},fc={},Ebe={exports:{}},xbe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,z){var N=U.length;U.push(z);e:for(;0<N;){var V=N-1>>>1,W=U[V];if(0<i(W,z))U[V]=z,U[N]=W,N=V;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var z=U[0],N=U.pop();if(N!==z){U[0]=N;e:for(var V=0,W=U.length,F=W>>>1;V<F;){var H=2*(V+1)-1,G=U[H],Q=H+1,ie=U[Q];if(0>i(G,N))Q<W&&0>i(ie,G)?(U[V]=ie,U[Q]=N,V=Q):(U[V]=G,U[H]=N,V=H);else if(Q<W&&0>i(ie,N))U[V]=ie,U[Q]=N,V=Q;else break e}}return z}function i(U,z){var N=U.sortIndex-z.sortIndex;return N!==0?N:U.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=U)r(u),z.sortIndex=z.expirationTime,t(l,z);else break;z=n(u)}}function w(U){if(m=!1,_(U),!p)if(n(l)!==null)p=!0,L(E);else{var z=n(u);z!==null&&B(w,z.startTime-U)}}function E(U,z){p=!1,m&&(m=!1,y(T),T=-1),h=!0;var N=f;try{for(_(z),d=n(l);d!==null&&(!(d.expirationTime>z)||U&&!k());){var V=d.callback;if(typeof V=="function"){d.callback=null,f=d.priorityLevel;var W=V(d.expirationTime<=z);z=e.unstable_now(),typeof W=="function"?d.callback=W:d===n(l)&&r(l),_(z)}else r(l);d=n(l)}if(d!==null)var F=!0;else{var H=n(u);H!==null&&B(w,H.startTime-z),F=!1}return F}finally{d=null,f=N,h=!1}}var S=!1,x=null,T=-1,I=5,P=-1;function k(){return!(e.unstable_now()-P<I)}function D(){if(x!==null){var U=e.unstable_now();P=U;var z=!0;try{z=x(!0,U)}finally{z?R():(S=!1,x=null)}}else S=!1}var R;if(typeof v=="function")R=function(){v(D)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,$=M.port2;M.port1.onmessage=D,R=function(){$.postMessage(null)}}else R=function(){g(D,0)};function L(U){x=U,S||(S=!0,R())}function B(U,z){T=g(function(){U(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,L(E))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(U){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var N=f;f=z;try{return U()}finally{f=N}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var N=f;f=U;try{return z()}finally{f=N}},e.unstable_scheduleCallback=function(U,z,N){var V=e.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?V+N:V):N=V,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=N+W,U={id:c++,callback:z,priorityLevel:U,startTime:N,expirationTime:W,sortIndex:-1},N>V?(U.sortIndex=N,t(u,U),n(l)===null&&U===n(u)&&(m?(y(T),T=-1):m=!0,B(w,N-V))):(U.sortIndex=W,t(l,U),p||h||(p=!0,L(E))),U},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(U){var z=f;return function(){var N=f;f=z;try{return U.apply(this,arguments)}finally{f=N}}}})(xbe);Ebe.exports=xbe;var Bze=Ebe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zze=A,Xu=Bze;function at(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sbe=new Set,AA={};function Ub(e,t){OE(e,t),OE(e+"Capture",t)}function OE(e,t){for(AA[e]=t,e=0;e<t.length;e++)Sbe.add(t[e])}var Fm=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sz=Object.prototype.hasOwnProperty,Uze=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qoe={},Joe={};function Vze(e){return Sz.call(Joe,e)?!0:Sz.call(Qoe,e)?!1:Uze.test(e)?Joe[e]=!0:(Qoe[e]=!0,!1)}function Hze(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function qze(e,t,n,r){if(t===null||typeof t>"u"||Hze(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wl(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Xo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xo[e]=new wl(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xo[t]=new wl(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xo[e]=new wl(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xo[e]=new wl(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xo[e]=new wl(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xo[e]=new wl(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xo[e]=new wl(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xo[e]=new wl(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xo[e]=new wl(e,5,!1,e.toLowerCase(),null,!1,!1)});var TG=/[\-:]([a-z])/g;function CG(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(TG,CG);Xo[t]=new wl(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(TG,CG);Xo[t]=new wl(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(TG,CG);Xo[t]=new wl(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xo[e]=new wl(e,1,!1,e.toLowerCase(),null,!1,!1)});Xo.xlinkHref=new wl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xo[e]=new wl(e,1,!1,e.toLowerCase(),null,!0,!0)});function AG(e,t,n,r){var i=Xo.hasOwnProperty(t)?Xo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(qze(t,n,i,r)&&(n=null),r||i===null?Vze(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var cg=zze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,FP=Symbol.for("react.element"),Sw=Symbol.for("react.portal"),Tw=Symbol.for("react.fragment"),IG=Symbol.for("react.strict_mode"),Tz=Symbol.for("react.profiler"),Tbe=Symbol.for("react.provider"),Cbe=Symbol.for("react.context"),RG=Symbol.for("react.forward_ref"),Cz=Symbol.for("react.suspense"),Az=Symbol.for("react.suspense_list"),kG=Symbol.for("react.memo"),Qg=Symbol.for("react.lazy"),Abe=Symbol.for("react.offscreen"),Zoe=Symbol.iterator;function wT(e){return e===null||typeof e!="object"?null:(e=Zoe&&e[Zoe]||e["@@iterator"],typeof e=="function"?e:null)}var Ki=Object.assign,a8;function TC(e){if(a8===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);a8=t&&t[1]||""}return`
`+a8+e}var l8=!1;function u8(e,t){if(!e||l8)return"";l8=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{l8=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?TC(e):""}function Wze(e){switch(e.tag){case 5:return TC(e.type);case 16:return TC("Lazy");case 13:return TC("Suspense");case 19:return TC("SuspenseList");case 0:case 2:case 15:return e=u8(e.type,!1),e;case 11:return e=u8(e.type.render,!1),e;case 1:return e=u8(e.type,!0),e;default:return""}}function Iz(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Tw:return"Fragment";case Sw:return"Portal";case Tz:return"Profiler";case IG:return"StrictMode";case Cz:return"Suspense";case Az:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Cbe:return(e.displayName||"Context")+".Consumer";case Tbe:return(e._context.displayName||"Context")+".Provider";case RG:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kG:return t=e.displayName||null,t!==null?t:Iz(e.type)||"Memo";case Qg:t=e._payload,e=e._init;try{return Iz(e(t))}catch{}}return null}function Gze(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Iz(t);case 8:return t===IG?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ry(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ibe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Yze(e){var t=Ibe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jP(e){e._valueTracker||(e._valueTracker=Yze(e))}function Rbe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ibe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function uM(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Rz(e,t){var n=t.checked;return Ki({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function eae(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ry(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function kbe(e,t){t=t.checked,t!=null&&AG(e,"checked",t,!1)}function kz(e,t){kbe(e,t);var n=ry(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Pz(e,t.type,n):t.hasOwnProperty("defaultValue")&&Pz(e,t.type,ry(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function tae(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Pz(e,t,n){(t!=="number"||uM(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var CC=Array.isArray;function Xw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ry(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Nz(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(at(91));return Ki({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function nae(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(at(92));if(CC(n)){if(1<n.length)throw Error(at(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ry(n)}}function Pbe(e,t){var n=ry(t.value),r=ry(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function rae(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Nbe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oz(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Nbe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var BP,Obe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(BP=BP||document.createElement("div"),BP.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=BP.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function IA(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var S2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kze=["Webkit","ms","Moz","O"];Object.keys(S2).forEach(function(e){Kze.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),S2[t]=S2[e]})});function Dbe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||S2.hasOwnProperty(e)&&S2[e]?(""+t).trim():t+"px"}function Mbe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Dbe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Xze=Ki({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dz(e,t){if(t){if(Xze[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(at(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(at(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(at(61))}if(t.style!=null&&typeof t.style!="object")throw Error(at(62))}}function Mz(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $z=null;function PG(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Lz=null,Qw=null,Jw=null;function iae(e){if(e=CR(e)){if(typeof Lz!="function")throw Error(at(280));var t=e.stateNode;t&&(t=XL(t),Lz(e.stateNode,e.type,t))}}function $be(e){Qw?Jw?Jw.push(e):Jw=[e]:Qw=e}function Lbe(){if(Qw){var e=Qw,t=Jw;if(Jw=Qw=null,iae(e),t)for(e=0;e<t.length;e++)iae(t[e])}}function Fbe(e,t){return e(t)}function jbe(){}var c8=!1;function Bbe(e,t,n){if(c8)return e(t,n);c8=!0;try{return Fbe(e,t,n)}finally{c8=!1,(Qw!==null||Jw!==null)&&(jbe(),Lbe())}}function RA(e,t){var n=e.stateNode;if(n===null)return null;var r=XL(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(at(231,t,typeof n));return n}var Fz=!1;if(Fm)try{var ET={};Object.defineProperty(ET,"passive",{get:function(){Fz=!0}}),window.addEventListener("test",ET,ET),window.removeEventListener("test",ET,ET)}catch{Fz=!1}function Qze(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var T2=!1,cM=null,dM=!1,jz=null,Jze={onError:function(e){T2=!0,cM=e}};function Zze(e,t,n,r,i,s,o,a,l){T2=!1,cM=null,Qze.apply(Jze,arguments)}function eUe(e,t,n,r,i,s,o,a,l){if(Zze.apply(this,arguments),T2){if(T2){var u=cM;T2=!1,cM=null}else throw Error(at(198));dM||(dM=!0,jz=u)}}function Vb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function zbe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sae(e){if(Vb(e)!==e)throw Error(at(188))}function tUe(e){var t=e.alternate;if(!t){if(t=Vb(e),t===null)throw Error(at(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return sae(i),e;if(s===r)return sae(i),t;s=s.sibling}throw Error(at(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(at(189))}}if(n.alternate!==r)throw Error(at(190))}if(n.tag!==3)throw Error(at(188));return n.stateNode.current===n?e:t}function Ube(e){return e=tUe(e),e!==null?Vbe(e):null}function Vbe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Vbe(e);if(t!==null)return t;e=e.sibling}return null}var Hbe=Xu.unstable_scheduleCallback,oae=Xu.unstable_cancelCallback,nUe=Xu.unstable_shouldYield,rUe=Xu.unstable_requestPaint,_s=Xu.unstable_now,iUe=Xu.unstable_getCurrentPriorityLevel,NG=Xu.unstable_ImmediatePriority,qbe=Xu.unstable_UserBlockingPriority,fM=Xu.unstable_NormalPriority,sUe=Xu.unstable_LowPriority,Wbe=Xu.unstable_IdlePriority,WL=null,Lh=null;function oUe(e){if(Lh&&typeof Lh.onCommitFiberRoot=="function")try{Lh.onCommitFiberRoot(WL,e,void 0,(e.current.flags&128)===128)}catch{}}var rf=Math.clz32?Math.clz32:uUe,aUe=Math.log,lUe=Math.LN2;function uUe(e){return e>>>=0,e===0?32:31-(aUe(e)/lUe|0)|0}var zP=64,UP=4194304;function AC(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hM(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=AC(a):(s&=o,s!==0&&(r=AC(s)))}else o=n&~i,o!==0?r=AC(o):s!==0&&(r=AC(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-rf(t),i=1<<n,r|=e[n],t&=~i;return r}function cUe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dUe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-rf(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=cUe(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function Bz(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Gbe(){var e=zP;return zP<<=1,!(zP&4194240)&&(zP=64),e}function d8(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function SR(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-rf(t),e[t]=n}function fUe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-rf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function OG(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-rf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Gr=0;function Ybe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Kbe,DG,Xbe,Qbe,Jbe,zz=!1,VP=[],O0=null,D0=null,M0=null,kA=new Map,PA=new Map,o0=[],hUe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aae(e,t){switch(e){case"focusin":case"focusout":O0=null;break;case"dragenter":case"dragleave":D0=null;break;case"mouseover":case"mouseout":M0=null;break;case"pointerover":case"pointerout":kA.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":PA.delete(t.pointerId)}}function xT(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=CR(t),t!==null&&DG(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function pUe(e,t,n,r,i){switch(t){case"focusin":return O0=xT(O0,e,t,n,r,i),!0;case"dragenter":return D0=xT(D0,e,t,n,r,i),!0;case"mouseover":return M0=xT(M0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return kA.set(s,xT(kA.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,PA.set(s,xT(PA.get(s)||null,e,t,n,r,i)),!0}return!1}function Zbe(e){var t=E1(e.target);if(t!==null){var n=Vb(t);if(n!==null){if(t=n.tag,t===13){if(t=zbe(n),t!==null){e.blockedOn=t,Jbe(e.priority,function(){Xbe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function BO(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Uz(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);$z=r,n.target.dispatchEvent(r),$z=null}else return t=CR(n),t!==null&&DG(t),e.blockedOn=n,!1;t.shift()}return!0}function lae(e,t,n){BO(e)&&n.delete(t)}function mUe(){zz=!1,O0!==null&&BO(O0)&&(O0=null),D0!==null&&BO(D0)&&(D0=null),M0!==null&&BO(M0)&&(M0=null),kA.forEach(lae),PA.forEach(lae)}function ST(e,t){e.blockedOn===t&&(e.blockedOn=null,zz||(zz=!0,Xu.unstable_scheduleCallback(Xu.unstable_NormalPriority,mUe)))}function NA(e){function t(i){return ST(i,e)}if(0<VP.length){ST(VP[0],e);for(var n=1;n<VP.length;n++){var r=VP[n];r.blockedOn===e&&(r.blockedOn=null)}}for(O0!==null&&ST(O0,e),D0!==null&&ST(D0,e),M0!==null&&ST(M0,e),kA.forEach(t),PA.forEach(t),n=0;n<o0.length;n++)r=o0[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<o0.length&&(n=o0[0],n.blockedOn===null);)Zbe(n),n.blockedOn===null&&o0.shift()}var Zw=cg.ReactCurrentBatchConfig,pM=!0;function gUe(e,t,n,r){var i=Gr,s=Zw.transition;Zw.transition=null;try{Gr=1,MG(e,t,n,r)}finally{Gr=i,Zw.transition=s}}function yUe(e,t,n,r){var i=Gr,s=Zw.transition;Zw.transition=null;try{Gr=4,MG(e,t,n,r)}finally{Gr=i,Zw.transition=s}}function MG(e,t,n,r){if(pM){var i=Uz(e,t,n,r);if(i===null)w8(e,t,r,mM,n),aae(e,r);else if(pUe(i,e,t,n,r))r.stopPropagation();else if(aae(e,r),t&4&&-1<hUe.indexOf(e)){for(;i!==null;){var s=CR(i);if(s!==null&&Kbe(s),s=Uz(e,t,n,r),s===null&&w8(e,t,r,mM,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else w8(e,t,r,null,n)}}var mM=null;function Uz(e,t,n,r){if(mM=null,e=PG(r),e=E1(e),e!==null)if(t=Vb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=zbe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return mM=e,null}function e_e(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iUe()){case NG:return 1;case qbe:return 4;case fM:case sUe:return 16;case Wbe:return 536870912;default:return 16}default:return 16}}var y0=null,$G=null,zO=null;function t_e(){if(zO)return zO;var e,t=$G,n=t.length,r,i="value"in y0?y0.value:y0.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return zO=i.slice(e,1<r?1-r:void 0)}function UO(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function HP(){return!0}function uae(){return!1}function hc(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?HP:uae,this.isPropagationStopped=uae,this}return Ki(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=HP)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=HP)},persist:function(){},isPersistent:HP}),t}var eS={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},LG=hc(eS),TR=Ki({},eS,{view:0,detail:0}),vUe=hc(TR),f8,h8,TT,GL=Ki({},TR,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:FG,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==TT&&(TT&&e.type==="mousemove"?(f8=e.screenX-TT.screenX,h8=e.screenY-TT.screenY):h8=f8=0,TT=e),f8)},movementY:function(e){return"movementY"in e?e.movementY:h8}}),cae=hc(GL),bUe=Ki({},GL,{dataTransfer:0}),_Ue=hc(bUe),wUe=Ki({},TR,{relatedTarget:0}),p8=hc(wUe),EUe=Ki({},eS,{animationName:0,elapsedTime:0,pseudoElement:0}),xUe=hc(EUe),SUe=Ki({},eS,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),TUe=hc(SUe),CUe=Ki({},eS,{data:0}),dae=hc(CUe),AUe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IUe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RUe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kUe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=RUe[e])?!!t[e]:!1}function FG(){return kUe}var PUe=Ki({},TR,{key:function(e){if(e.key){var t=AUe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=UO(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?IUe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:FG,charCode:function(e){return e.type==="keypress"?UO(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?UO(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),NUe=hc(PUe),OUe=Ki({},GL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fae=hc(OUe),DUe=Ki({},TR,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:FG}),MUe=hc(DUe),$Ue=Ki({},eS,{propertyName:0,elapsedTime:0,pseudoElement:0}),LUe=hc($Ue),FUe=Ki({},GL,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jUe=hc(FUe),BUe=[9,13,27,32],jG=Fm&&"CompositionEvent"in window,C2=null;Fm&&"documentMode"in document&&(C2=document.documentMode);var zUe=Fm&&"TextEvent"in window&&!C2,n_e=Fm&&(!jG||C2&&8<C2&&11>=C2),hae=" ",pae=!1;function r_e(e,t){switch(e){case"keyup":return BUe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i_e(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cw=!1;function UUe(e,t){switch(e){case"compositionend":return i_e(t);case"keypress":return t.which!==32?null:(pae=!0,hae);case"textInput":return e=t.data,e===hae&&pae?null:e;default:return null}}function VUe(e,t){if(Cw)return e==="compositionend"||!jG&&r_e(e,t)?(e=t_e(),zO=$G=y0=null,Cw=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return n_e&&t.locale!=="ko"?null:t.data;default:return null}}var HUe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mae(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!HUe[e.type]:t==="textarea"}function s_e(e,t,n,r){$be(r),t=gM(t,"onChange"),0<t.length&&(n=new LG("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var A2=null,OA=null;function qUe(e){g_e(e,0)}function YL(e){var t=Rw(e);if(Rbe(t))return e}function WUe(e,t){if(e==="change")return t}var o_e=!1;if(Fm){var m8;if(Fm){var g8="oninput"in document;if(!g8){var gae=document.createElement("div");gae.setAttribute("oninput","return;"),g8=typeof gae.oninput=="function"}m8=g8}else m8=!1;o_e=m8&&(!document.documentMode||9<document.documentMode)}function yae(){A2&&(A2.detachEvent("onpropertychange",a_e),OA=A2=null)}function a_e(e){if(e.propertyName==="value"&&YL(OA)){var t=[];s_e(t,OA,e,PG(e)),Bbe(qUe,t)}}function GUe(e,t,n){e==="focusin"?(yae(),A2=t,OA=n,A2.attachEvent("onpropertychange",a_e)):e==="focusout"&&yae()}function YUe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return YL(OA)}function KUe(e,t){if(e==="click")return YL(t)}function XUe(e,t){if(e==="input"||e==="change")return YL(t)}function QUe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vf=typeof Object.is=="function"?Object.is:QUe;function DA(e,t){if(vf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Sz.call(t,i)||!vf(e[i],t[i]))return!1}return!0}function vae(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bae(e,t){var n=vae(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vae(n)}}function l_e(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?l_e(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function u_e(){for(var e=window,t=uM();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=uM(e.document)}return t}function BG(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function JUe(e){var t=u_e(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&l_e(n.ownerDocument.documentElement,n)){if(r!==null&&BG(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=bae(n,s);var o=bae(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ZUe=Fm&&"documentMode"in document&&11>=document.documentMode,Aw=null,Vz=null,I2=null,Hz=!1;function _ae(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hz||Aw==null||Aw!==uM(r)||(r=Aw,"selectionStart"in r&&BG(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),I2&&DA(I2,r)||(I2=r,r=gM(Vz,"onSelect"),0<r.length&&(t=new LG("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Aw)))}function qP(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Iw={animationend:qP("Animation","AnimationEnd"),animationiteration:qP("Animation","AnimationIteration"),animationstart:qP("Animation","AnimationStart"),transitionend:qP("Transition","TransitionEnd")},y8={},c_e={};Fm&&(c_e=document.createElement("div").style,"AnimationEvent"in window||(delete Iw.animationend.animation,delete Iw.animationiteration.animation,delete Iw.animationstart.animation),"TransitionEvent"in window||delete Iw.transitionend.transition);function KL(e){if(y8[e])return y8[e];if(!Iw[e])return e;var t=Iw[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in c_e)return y8[e]=t[n];return e}var d_e=KL("animationend"),f_e=KL("animationiteration"),h_e=KL("animationstart"),p_e=KL("transitionend"),m_e=new Map,wae="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hy(e,t){m_e.set(e,t),Ub(t,[e])}for(var v8=0;v8<wae.length;v8++){var b8=wae[v8],eVe=b8.toLowerCase(),tVe=b8[0].toUpperCase()+b8.slice(1);Hy(eVe,"on"+tVe)}Hy(d_e,"onAnimationEnd");Hy(f_e,"onAnimationIteration");Hy(h_e,"onAnimationStart");Hy("dblclick","onDoubleClick");Hy("focusin","onFocus");Hy("focusout","onBlur");Hy(p_e,"onTransitionEnd");OE("onMouseEnter",["mouseout","mouseover"]);OE("onMouseLeave",["mouseout","mouseover"]);OE("onPointerEnter",["pointerout","pointerover"]);OE("onPointerLeave",["pointerout","pointerover"]);Ub("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ub("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ub("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ub("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ub("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ub("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var IC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nVe=new Set("cancel close invalid load scroll toggle".split(" ").concat(IC));function Eae(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,eUe(r,t,void 0,e),e.currentTarget=null}function g_e(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Eae(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Eae(i,a,u),s=l}}}if(dM)throw e=jz,dM=!1,jz=null,e}function xi(e,t){var n=t[Kz];n===void 0&&(n=t[Kz]=new Set);var r=e+"__bubble";n.has(r)||(y_e(t,e,2,!1),n.add(r))}function _8(e,t,n){var r=0;t&&(r|=4),y_e(n,e,r,t)}var WP="_reactListening"+Math.random().toString(36).slice(2);function MA(e){if(!e[WP]){e[WP]=!0,Sbe.forEach(function(n){n!=="selectionchange"&&(nVe.has(n)||_8(n,!1,e),_8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[WP]||(t[WP]=!0,_8("selectionchange",!1,t))}}function y_e(e,t,n,r){switch(e_e(t)){case 1:var i=gUe;break;case 4:i=yUe;break;default:i=MG}n=i.bind(null,t,n,e),i=void 0,!Fz||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function w8(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=E1(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Bbe(function(){var u=s,c=PG(n),d=[];e:{var f=m_e.get(e);if(f!==void 0){var h=LG,p=e;switch(e){case"keypress":if(UO(n)===0)break e;case"keydown":case"keyup":h=NUe;break;case"focusin":p="focus",h=p8;break;case"focusout":p="blur",h=p8;break;case"beforeblur":case"afterblur":h=p8;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=cae;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=_Ue;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=MUe;break;case d_e:case f_e:case h_e:h=xUe;break;case p_e:h=LUe;break;case"scroll":h=vUe;break;case"wheel":h=jUe;break;case"copy":case"cut":case"paste":h=TUe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=fae}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var v=u,_;v!==null;){_=v;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,y!==null&&(w=RA(v,y),w!=null&&m.push($A(v,w,_)))),g)break;v=v.return}0<m.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==$z&&(p=n.relatedTarget||n.fromElement)&&(E1(p)||p[jm]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?E1(p):null,p!==null&&(g=Vb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(m=cae,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=fae,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?f:Rw(h),_=p==null?f:Rw(p),f=new m(w,v+"leave",h,n,c),f.target=g,f.relatedTarget=_,w=null,E1(c)===u&&(m=new m(y,v+"enter",p,n,c),m.target=_,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,_=m;_;_=k_(_))v++;for(_=0,w=y;w;w=k_(w))_++;for(;0<v-_;)m=k_(m),v--;for(;0<_-v;)y=k_(y),_--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=k_(m),y=k_(y)}m=null}else m=null;h!==null&&xae(d,f,h,m,!1),p!==null&&g!==null&&xae(d,g,p,m,!0)}}e:{if(f=u?Rw(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var E=WUe;else if(mae(f))if(o_e)E=XUe;else{E=YUe;var S=GUe}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=KUe);if(E&&(E=E(e,u))){s_e(d,E,n,c);break e}S&&S(e,f,u),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&Pz(f,"number",f.value)}switch(S=u?Rw(u):window,e){case"focusin":(mae(S)||S.contentEditable==="true")&&(Aw=S,Vz=u,I2=null);break;case"focusout":I2=Vz=Aw=null;break;case"mousedown":Hz=!0;break;case"contextmenu":case"mouseup":case"dragend":Hz=!1,_ae(d,n,c);break;case"selectionchange":if(ZUe)break;case"keydown":case"keyup":_ae(d,n,c)}var x;if(jG)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Cw?r_e(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(n_e&&n.locale!=="ko"&&(Cw||T!=="onCompositionStart"?T==="onCompositionEnd"&&Cw&&(x=t_e()):(y0=c,$G="value"in y0?y0.value:y0.textContent,Cw=!0)),S=gM(u,T),0<S.length&&(T=new dae(T,e,null,n,c),d.push({event:T,listeners:S}),x?T.data=x:(x=i_e(n),x!==null&&(T.data=x)))),(x=zUe?UUe(e,n):VUe(e,n))&&(u=gM(u,"onBeforeInput"),0<u.length&&(c=new dae("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=x))}g_e(d,t)})}function $A(e,t,n){return{instance:e,listener:t,currentTarget:n}}function gM(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=RA(e,n),s!=null&&r.unshift($A(e,s,i)),s=RA(e,t),s!=null&&r.push($A(e,s,i))),e=e.return}return r}function k_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xae(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=RA(n,s),l!=null&&o.unshift($A(n,l,a))):i||(l=RA(n,s),l!=null&&o.push($A(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var rVe=/\r\n?/g,iVe=/\u0000|\uFFFD/g;function Sae(e){return(typeof e=="string"?e:""+e).replace(rVe,`
`).replace(iVe,"")}function GP(e,t,n){if(t=Sae(t),Sae(e)!==t&&n)throw Error(at(425))}function yM(){}var qz=null,Wz=null;function Gz(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yz=typeof setTimeout=="function"?setTimeout:void 0,sVe=typeof clearTimeout=="function"?clearTimeout:void 0,Tae=typeof Promise=="function"?Promise:void 0,oVe=typeof queueMicrotask=="function"?queueMicrotask:typeof Tae<"u"?function(e){return Tae.resolve(null).then(e).catch(aVe)}:Yz;function aVe(e){setTimeout(function(){throw e})}function E8(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),NA(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);NA(t)}function $0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Cae(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var tS=Math.random().toString(36).slice(2),vh="__reactFiber$"+tS,LA="__reactProps$"+tS,jm="__reactContainer$"+tS,Kz="__reactEvents$"+tS,lVe="__reactListeners$"+tS,uVe="__reactHandles$"+tS;function E1(e){var t=e[vh];if(t)return t;for(var n=e.parentNode;n;){if(t=n[jm]||n[vh]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Cae(e);e!==null;){if(n=e[vh])return n;e=Cae(e)}return t}e=n,n=e.parentNode}return null}function CR(e){return e=e[vh]||e[jm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rw(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(at(33))}function XL(e){return e[LA]||null}var Xz=[],kw=-1;function qy(e){return{current:e}}function ki(e){0>kw||(e.current=Xz[kw],Xz[kw]=null,kw--)}function vi(e,t){kw++,Xz[kw]=e.current,e.current=t}var iy={},$a=qy(iy),Jl=qy(!1),Z1=iy;function DE(e,t){var n=e.type.contextTypes;if(!n)return iy;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Zl(e){return e=e.childContextTypes,e!=null}function vM(){ki(Jl),ki($a)}function Aae(e,t,n){if($a.current!==iy)throw Error(at(168));vi($a,t),vi(Jl,n)}function v_e(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(at(108,Gze(e)||"Unknown",i));return Ki({},n,r)}function bM(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||iy,Z1=$a.current,vi($a,e),vi(Jl,Jl.current),!0}function Iae(e,t,n){var r=e.stateNode;if(!r)throw Error(at(169));n?(e=v_e(e,t,Z1),r.__reactInternalMemoizedMergedChildContext=e,ki(Jl),ki($a),vi($a,e)):ki(Jl),vi(Jl,n)}var tm=null,QL=!1,x8=!1;function b_e(e){tm===null?tm=[e]:tm.push(e)}function cVe(e){QL=!0,b_e(e)}function Wy(){if(!x8&&tm!==null){x8=!0;var e=0,t=Gr;try{var n=tm;for(Gr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}tm=null,QL=!1}catch(i){throw tm!==null&&(tm=tm.slice(e+1)),Hbe(NG,Wy),i}finally{Gr=t,x8=!1}}return null}var Pw=[],Nw=0,_M=null,wM=0,Ac=[],Ic=0,eb=null,dm=1,fm="";function Gv(e,t){Pw[Nw++]=wM,Pw[Nw++]=_M,_M=e,wM=t}function __e(e,t,n){Ac[Ic++]=dm,Ac[Ic++]=fm,Ac[Ic++]=eb,eb=e;var r=dm;e=fm;var i=32-rf(r)-1;r&=~(1<<i),n+=1;var s=32-rf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,dm=1<<32-rf(t)+i|n<<i|r,fm=s+e}else dm=1<<s|n<<i|r,fm=e}function zG(e){e.return!==null&&(Gv(e,1),__e(e,1,0))}function UG(e){for(;e===_M;)_M=Pw[--Nw],Pw[Nw]=null,wM=Pw[--Nw],Pw[Nw]=null;for(;e===eb;)eb=Ac[--Ic],Ac[Ic]=null,fm=Ac[--Ic],Ac[Ic]=null,dm=Ac[--Ic],Ac[Ic]=null}var Wu=null,Fu=null,Li=!1,zd=null;function w_e(e,t){var n=$c(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Rae(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wu=e,Fu=$0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wu=e,Fu=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=eb!==null?{id:dm,overflow:fm}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=$c(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Wu=e,Fu=null,!0):!1;default:return!1}}function Qz(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Jz(e){if(Li){var t=Fu;if(t){var n=t;if(!Rae(e,t)){if(Qz(e))throw Error(at(418));t=$0(n.nextSibling);var r=Wu;t&&Rae(e,t)?w_e(r,n):(e.flags=e.flags&-4097|2,Li=!1,Wu=e)}}else{if(Qz(e))throw Error(at(418));e.flags=e.flags&-4097|2,Li=!1,Wu=e}}}function kae(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wu=e}function YP(e){if(e!==Wu)return!1;if(!Li)return kae(e),Li=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Gz(e.type,e.memoizedProps)),t&&(t=Fu)){if(Qz(e))throw E_e(),Error(at(418));for(;t;)w_e(e,t),t=$0(t.nextSibling)}if(kae(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(at(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Fu=$0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Fu=null}}else Fu=Wu?$0(e.stateNode.nextSibling):null;return!0}function E_e(){for(var e=Fu;e;)e=$0(e.nextSibling)}function ME(){Fu=Wu=null,Li=!1}function VG(e){zd===null?zd=[e]:zd.push(e)}var dVe=cg.ReactCurrentBatchConfig;function CT(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(at(309));var r=n.stateNode}if(!r)throw Error(at(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(at(284));if(!n._owner)throw Error(at(290,e))}return e}function KP(e,t){throw e=Object.prototype.toString.call(t),Error(at(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pae(e){var t=e._init;return t(e._payload)}function x_e(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=B0(y,v),y.index=0,y.sibling=null,y}function s(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,w){return v===null||v.tag!==6?(v=k8(_,y.mode,w),v.return=y,v):(v=i(v,_),v.return=y,v)}function l(y,v,_,w){var E=_.type;return E===Tw?c(y,v,_.props.children,w,_.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Qg&&Pae(E)===v.type)?(w=i(v,_.props),w.ref=CT(y,v,_),w.return=y,w):(w=KO(_.type,_.key,_.props,null,y.mode,w),w.ref=CT(y,v,_),w.return=y,w)}function u(y,v,_,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=P8(_,y.mode,w),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function c(y,v,_,w,E){return v===null||v.tag!==7?(v=F1(_,y.mode,w,E),v.return=y,v):(v=i(v,_),v.return=y,v)}function d(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=k8(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case FP:return _=KO(v.type,v.key,v.props,null,y.mode,_),_.ref=CT(y,null,v),_.return=y,_;case Sw:return v=P8(v,y.mode,_),v.return=y,v;case Qg:var w=v._init;return d(y,w(v._payload),_)}if(CC(v)||wT(v))return v=F1(v,y.mode,_,null),v.return=y,v;KP(y,v)}return null}function f(y,v,_,w){var E=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(y,v,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case FP:return _.key===E?l(y,v,_,w):null;case Sw:return _.key===E?u(y,v,_,w):null;case Qg:return E=_._init,f(y,v,E(_._payload),w)}if(CC(_)||wT(_))return E!==null?null:c(y,v,_,w,null);KP(y,_)}return null}function h(y,v,_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(_)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case FP:return y=y.get(w.key===null?_:w.key)||null,l(v,y,w,E);case Sw:return y=y.get(w.key===null?_:w.key)||null,u(v,y,w,E);case Qg:var S=w._init;return h(y,v,_,S(w._payload),E)}if(CC(w)||wT(w))return y=y.get(_)||null,c(v,y,w,E,null);KP(v,w)}return null}function p(y,v,_,w){for(var E=null,S=null,x=v,T=v=0,I=null;x!==null&&T<_.length;T++){x.index>T?(I=x,x=null):I=x.sibling;var P=f(y,x,_[T],w);if(P===null){x===null&&(x=I);break}e&&x&&P.alternate===null&&t(y,x),v=s(P,v,T),S===null?E=P:S.sibling=P,S=P,x=I}if(T===_.length)return n(y,x),Li&&Gv(y,T),E;if(x===null){for(;T<_.length;T++)x=d(y,_[T],w),x!==null&&(v=s(x,v,T),S===null?E=x:S.sibling=x,S=x);return Li&&Gv(y,T),E}for(x=r(y,x);T<_.length;T++)I=h(x,y,T,_[T],w),I!==null&&(e&&I.alternate!==null&&x.delete(I.key===null?T:I.key),v=s(I,v,T),S===null?E=I:S.sibling=I,S=I);return e&&x.forEach(function(k){return t(y,k)}),Li&&Gv(y,T),E}function m(y,v,_,w){var E=wT(_);if(typeof E!="function")throw Error(at(150));if(_=E.call(_),_==null)throw Error(at(151));for(var S=E=null,x=v,T=v=0,I=null,P=_.next();x!==null&&!P.done;T++,P=_.next()){x.index>T?(I=x,x=null):I=x.sibling;var k=f(y,x,P.value,w);if(k===null){x===null&&(x=I);break}e&&x&&k.alternate===null&&t(y,x),v=s(k,v,T),S===null?E=k:S.sibling=k,S=k,x=I}if(P.done)return n(y,x),Li&&Gv(y,T),E;if(x===null){for(;!P.done;T++,P=_.next())P=d(y,P.value,w),P!==null&&(v=s(P,v,T),S===null?E=P:S.sibling=P,S=P);return Li&&Gv(y,T),E}for(x=r(y,x);!P.done;T++,P=_.next())P=h(x,y,T,P.value,w),P!==null&&(e&&P.alternate!==null&&x.delete(P.key===null?T:P.key),v=s(P,v,T),S===null?E=P:S.sibling=P,S=P);return e&&x.forEach(function(D){return t(y,D)}),Li&&Gv(y,T),E}function g(y,v,_,w){if(typeof _=="object"&&_!==null&&_.type===Tw&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case FP:e:{for(var E=_.key,S=v;S!==null;){if(S.key===E){if(E=_.type,E===Tw){if(S.tag===7){n(y,S.sibling),v=i(S,_.props.children),v.return=y,y=v;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Qg&&Pae(E)===S.type){n(y,S.sibling),v=i(S,_.props),v.ref=CT(y,S,_),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}_.type===Tw?(v=F1(_.props.children,y.mode,w,_.key),v.return=y,y=v):(w=KO(_.type,_.key,_.props,null,y.mode,w),w.ref=CT(y,v,_),w.return=y,y=w)}return o(y);case Sw:e:{for(S=_.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=P8(_,y.mode,w),v.return=y,y=v}return o(y);case Qg:return S=_._init,g(y,v,S(_._payload),w)}if(CC(_))return p(y,v,_,w);if(wT(_))return m(y,v,_,w);KP(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=k8(_,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var $E=x_e(!0),S_e=x_e(!1),EM=qy(null),xM=null,Ow=null,HG=null;function qG(){HG=Ow=xM=null}function WG(e){var t=EM.current;ki(EM),e._currentValue=t}function Zz(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function eE(e,t){xM=e,HG=Ow=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Wl=!0),e.firstContext=null)}function Qc(e){var t=e._currentValue;if(HG!==e)if(e={context:e,memoizedValue:t,next:null},Ow===null){if(xM===null)throw Error(at(308));Ow=e,xM.dependencies={lanes:0,firstContext:e}}else Ow=Ow.next=e;return t}var x1=null;function GG(e){x1===null?x1=[e]:x1.push(e)}function T_e(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,GG(t)):(n.next=i.next,i.next=n),t.interleaved=n,Bm(e,r)}function Bm(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Jg=!1;function YG(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function C_e(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Em(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function L0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Er&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Bm(e,n)}return i=r.interleaved,i===null?(t.next=t,GG(r)):(t.next=i.next,i.next=t),r.interleaved=t,Bm(e,n)}function VO(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,OG(e,n)}}function Nae(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function SM(e,t,n,r){var i=e.updateQueue;Jg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(f=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Ki({},d,f);break e;case 2:Jg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);nb|=o,e.lanes=o,e.memoizedState=d}}function Oae(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(at(191,i));i.call(r)}}}var AR={},Fh=qy(AR),FA=qy(AR),jA=qy(AR);function S1(e){if(e===AR)throw Error(at(174));return e}function KG(e,t){switch(vi(jA,t),vi(FA,e),vi(Fh,AR),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Oz(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Oz(t,e)}ki(Fh),vi(Fh,t)}function LE(){ki(Fh),ki(FA),ki(jA)}function A_e(e){S1(jA.current);var t=S1(Fh.current),n=Oz(t,e.type);t!==n&&(vi(FA,e),vi(Fh,n))}function XG(e){FA.current===e&&(ki(Fh),ki(FA))}var qi=qy(0);function TM(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var S8=[];function QG(){for(var e=0;e<S8.length;e++)S8[e]._workInProgressVersionPrimary=null;S8.length=0}var HO=cg.ReactCurrentDispatcher,T8=cg.ReactCurrentBatchConfig,tb=0,Gi=null,zs=null,ho=null,CM=!1,R2=!1,BA=0,fVe=0;function ua(){throw Error(at(321))}function JG(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!vf(e[n],t[n]))return!1;return!0}function ZG(e,t,n,r,i,s){if(tb=s,Gi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,HO.current=e===null||e.memoizedState===null?gVe:yVe,e=n(r,i),R2){s=0;do{if(R2=!1,BA=0,25<=s)throw Error(at(301));s+=1,ho=zs=null,t.updateQueue=null,HO.current=vVe,e=n(r,i)}while(R2)}if(HO.current=AM,t=zs!==null&&zs.next!==null,tb=0,ho=zs=Gi=null,CM=!1,t)throw Error(at(300));return e}function eY(){var e=BA!==0;return BA=0,e}function oh(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ho===null?Gi.memoizedState=ho=e:ho=ho.next=e,ho}function Jc(){if(zs===null){var e=Gi.alternate;e=e!==null?e.memoizedState:null}else e=zs.next;var t=ho===null?Gi.memoizedState:ho.next;if(t!==null)ho=t,zs=e;else{if(e===null)throw Error(at(310));zs=e,e={memoizedState:zs.memoizedState,baseState:zs.baseState,baseQueue:zs.baseQueue,queue:zs.queue,next:null},ho===null?Gi.memoizedState=ho=e:ho=ho.next=e}return ho}function zA(e,t){return typeof t=="function"?t(e):t}function C8(e){var t=Jc(),n=t.queue;if(n===null)throw Error(at(311));n.lastRenderedReducer=e;var r=zs,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((tb&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Gi.lanes|=c,nb|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,vf(r,t.memoizedState)||(Wl=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Gi.lanes|=s,nb|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function A8(e){var t=Jc(),n=t.queue;if(n===null)throw Error(at(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);vf(s,t.memoizedState)||(Wl=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function I_e(){}function R_e(e,t){var n=Gi,r=Jc(),i=t(),s=!vf(r.memoizedState,i);if(s&&(r.memoizedState=i,Wl=!0),r=r.queue,tY(N_e.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||ho!==null&&ho.memoizedState.tag&1){if(n.flags|=2048,UA(9,P_e.bind(null,n,r,i,t),void 0,null),Eo===null)throw Error(at(349));tb&30||k_e(n,t,i)}return i}function k_e(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Gi.updateQueue,t===null?(t={lastEffect:null,stores:null},Gi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function P_e(e,t,n,r){t.value=n,t.getSnapshot=r,O_e(t)&&D_e(e)}function N_e(e,t,n){return n(function(){O_e(t)&&D_e(e)})}function O_e(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vf(e,n)}catch{return!0}}function D_e(e){var t=Bm(e,1);t!==null&&sf(t,e,1,-1)}function Dae(e){var t=oh();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zA,lastRenderedState:e},t.queue=e,e=e.dispatch=mVe.bind(null,Gi,e),[t.memoizedState,e]}function UA(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Gi.updateQueue,t===null?(t={lastEffect:null,stores:null},Gi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function M_e(){return Jc().memoizedState}function qO(e,t,n,r){var i=oh();Gi.flags|=e,i.memoizedState=UA(1|t,n,void 0,r===void 0?null:r)}function JL(e,t,n,r){var i=Jc();r=r===void 0?null:r;var s=void 0;if(zs!==null){var o=zs.memoizedState;if(s=o.destroy,r!==null&&JG(r,o.deps)){i.memoizedState=UA(t,n,s,r);return}}Gi.flags|=e,i.memoizedState=UA(1|t,n,s,r)}function Mae(e,t){return qO(8390656,8,e,t)}function tY(e,t){return JL(2048,8,e,t)}function $_e(e,t){return JL(4,2,e,t)}function L_e(e,t){return JL(4,4,e,t)}function F_e(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function j_e(e,t,n){return n=n!=null?n.concat([e]):null,JL(4,4,F_e.bind(null,t,e),n)}function nY(){}function B_e(e,t){var n=Jc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&JG(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function z_e(e,t){var n=Jc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&JG(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function U_e(e,t,n){return tb&21?(vf(n,t)||(n=Gbe(),Gi.lanes|=n,nb|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Wl=!0),e.memoizedState=n)}function hVe(e,t){var n=Gr;Gr=n!==0&&4>n?n:4,e(!0);var r=T8.transition;T8.transition={};try{e(!1),t()}finally{Gr=n,T8.transition=r}}function V_e(){return Jc().memoizedState}function pVe(e,t,n){var r=j0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},H_e(e))q_e(t,n);else if(n=T_e(e,t,n,r),n!==null){var i=al();sf(n,e,r,i),W_e(n,t,r)}}function mVe(e,t,n){var r=j0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(H_e(e))q_e(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,vf(a,o)){var l=t.interleaved;l===null?(i.next=i,GG(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=T_e(e,t,i,r),n!==null&&(i=al(),sf(n,e,r,i),W_e(n,t,r))}}function H_e(e){var t=e.alternate;return e===Gi||t!==null&&t===Gi}function q_e(e,t){R2=CM=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function W_e(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,OG(e,n)}}var AM={readContext:Qc,useCallback:ua,useContext:ua,useEffect:ua,useImperativeHandle:ua,useInsertionEffect:ua,useLayoutEffect:ua,useMemo:ua,useReducer:ua,useRef:ua,useState:ua,useDebugValue:ua,useDeferredValue:ua,useTransition:ua,useMutableSource:ua,useSyncExternalStore:ua,useId:ua,unstable_isNewReconciler:!1},gVe={readContext:Qc,useCallback:function(e,t){return oh().memoizedState=[e,t===void 0?null:t],e},useContext:Qc,useEffect:Mae,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,qO(4194308,4,F_e.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qO(4194308,4,e,t)},useInsertionEffect:function(e,t){return qO(4,2,e,t)},useMemo:function(e,t){var n=oh();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oh();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=pVe.bind(null,Gi,e),[r.memoizedState,e]},useRef:function(e){var t=oh();return e={current:e},t.memoizedState=e},useState:Dae,useDebugValue:nY,useDeferredValue:function(e){return oh().memoizedState=e},useTransition:function(){var e=Dae(!1),t=e[0];return e=hVe.bind(null,e[1]),oh().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Gi,i=oh();if(Li){if(n===void 0)throw Error(at(407));n=n()}else{if(n=t(),Eo===null)throw Error(at(349));tb&30||k_e(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Mae(N_e.bind(null,r,s,e),[e]),r.flags|=2048,UA(9,P_e.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=oh(),t=Eo.identifierPrefix;if(Li){var n=fm,r=dm;n=(r&~(1<<32-rf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=BA++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=fVe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yVe={readContext:Qc,useCallback:B_e,useContext:Qc,useEffect:tY,useImperativeHandle:j_e,useInsertionEffect:$_e,useLayoutEffect:L_e,useMemo:z_e,useReducer:C8,useRef:M_e,useState:function(){return C8(zA)},useDebugValue:nY,useDeferredValue:function(e){var t=Jc();return U_e(t,zs.memoizedState,e)},useTransition:function(){var e=C8(zA)[0],t=Jc().memoizedState;return[e,t]},useMutableSource:I_e,useSyncExternalStore:R_e,useId:V_e,unstable_isNewReconciler:!1},vVe={readContext:Qc,useCallback:B_e,useContext:Qc,useEffect:tY,useImperativeHandle:j_e,useInsertionEffect:$_e,useLayoutEffect:L_e,useMemo:z_e,useReducer:A8,useRef:M_e,useState:function(){return A8(zA)},useDebugValue:nY,useDeferredValue:function(e){var t=Jc();return zs===null?t.memoizedState=e:U_e(t,zs.memoizedState,e)},useTransition:function(){var e=A8(zA)[0],t=Jc().memoizedState;return[e,t]},useMutableSource:I_e,useSyncExternalStore:R_e,useId:V_e,unstable_isNewReconciler:!1};function Md(e,t){if(e&&e.defaultProps){t=Ki({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function eU(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ki({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ZL={isMounted:function(e){return(e=e._reactInternals)?Vb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=al(),i=j0(e),s=Em(r,i);s.payload=t,n!=null&&(s.callback=n),t=L0(e,s,i),t!==null&&(sf(t,e,i,r),VO(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=al(),i=j0(e),s=Em(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=L0(e,s,i),t!==null&&(sf(t,e,i,r),VO(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=al(),r=j0(e),i=Em(n,r);i.tag=2,t!=null&&(i.callback=t),t=L0(e,i,r),t!==null&&(sf(t,e,r,n),VO(t,e,r))}};function $ae(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!DA(n,r)||!DA(i,s):!0}function G_e(e,t,n){var r=!1,i=iy,s=t.contextType;return typeof s=="object"&&s!==null?s=Qc(s):(i=Zl(t)?Z1:$a.current,r=t.contextTypes,s=(r=r!=null)?DE(e,i):iy),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ZL,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Lae(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ZL.enqueueReplaceState(t,t.state,null)}function tU(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},YG(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Qc(s):(s=Zl(t)?Z1:$a.current,i.context=DE(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(eU(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ZL.enqueueReplaceState(i,i.state,null),SM(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function FE(e,t){try{var n="",r=t;do n+=Wze(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function I8(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function nU(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var bVe=typeof WeakMap=="function"?WeakMap:Map;function Y_e(e,t,n){n=Em(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){RM||(RM=!0,fU=r),nU(e,t)},n}function K_e(e,t,n){n=Em(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){nU(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){nU(e,t),typeof r!="function"&&(F0===null?F0=new Set([this]):F0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Fae(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new bVe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=OVe.bind(null,e,t,n),t.then(e,e))}function jae(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Bae(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Em(-1,1),t.tag=2,L0(n,t,1))),n.lanes|=1),e)}var _Ve=cg.ReactCurrentOwner,Wl=!1;function Xa(e,t,n,r){t.child=e===null?S_e(t,null,n,r):$E(t,e.child,n,r)}function zae(e,t,n,r,i){n=n.render;var s=t.ref;return eE(t,i),r=ZG(e,t,n,r,s,i),n=eY(),e!==null&&!Wl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zm(e,t,i)):(Li&&n&&zG(t),t.flags|=1,Xa(e,t,r,i),t.child)}function Uae(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!cY(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,X_e(e,t,s,r,i)):(e=KO(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:DA,n(o,r)&&e.ref===t.ref)return zm(e,t,i)}return t.flags|=1,e=B0(s,r),e.ref=t.ref,e.return=t,t.child=e}function X_e(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(DA(s,r)&&e.ref===t.ref)if(Wl=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Wl=!0);else return t.lanes=e.lanes,zm(e,t,i)}return rU(e,t,n,r,i)}function Q_e(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},vi(Mw,Pu),Pu|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,vi(Mw,Pu),Pu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,vi(Mw,Pu),Pu|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,vi(Mw,Pu),Pu|=r;return Xa(e,t,i,n),t.child}function J_e(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function rU(e,t,n,r,i){var s=Zl(n)?Z1:$a.current;return s=DE(t,s),eE(t,i),n=ZG(e,t,n,r,s,i),r=eY(),e!==null&&!Wl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zm(e,t,i)):(Li&&r&&zG(t),t.flags|=1,Xa(e,t,n,i),t.child)}function Vae(e,t,n,r,i){if(Zl(n)){var s=!0;bM(t)}else s=!1;if(eE(t,i),t.stateNode===null)WO(e,t),G_e(t,n,r),tU(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Qc(u):(u=Zl(n)?Z1:$a.current,u=DE(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Lae(t,o,r,u),Jg=!1;var f=t.memoizedState;o.state=f,SM(t,r,o,i),l=t.memoizedState,a!==r||f!==l||Jl.current||Jg?(typeof c=="function"&&(eU(t,n,c,r),l=t.memoizedState),(a=Jg||$ae(t,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,C_e(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Md(t.type,a),o.props=u,d=t.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Qc(l):(l=Zl(n)?Z1:$a.current,l=DE(t,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Lae(t,o,r,l),Jg=!1,f=t.memoizedState,o.state=f,SM(t,r,o,i);var p=t.memoizedState;a!==d||f!==p||Jl.current||Jg?(typeof h=="function"&&(eU(t,n,h,r),p=t.memoizedState),(u=Jg||$ae(t,n,u,r,f,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return iU(e,t,n,r,s,i)}function iU(e,t,n,r,i,s){J_e(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Iae(t,n,!1),zm(e,t,s);r=t.stateNode,_Ve.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=$E(t,e.child,null,s),t.child=$E(t,null,a,s)):Xa(e,t,a,s),t.memoizedState=r.state,i&&Iae(t,n,!0),t.child}function Z_e(e){var t=e.stateNode;t.pendingContext?Aae(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Aae(e,t.context,!1),KG(e,t.containerInfo)}function Hae(e,t,n,r,i){return ME(),VG(i),t.flags|=256,Xa(e,t,n,r),t.child}var sU={dehydrated:null,treeContext:null,retryLane:0};function oU(e){return{baseLanes:e,cachePool:null,transitions:null}}function ewe(e,t,n){var r=t.pendingProps,i=qi.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),vi(qi,i&1),e===null)return Jz(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=nF(o,r,0,null),e=F1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=oU(n),t.memoizedState=sU,e):rY(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return wVe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=B0(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=B0(a,s):(s=F1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?oU(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=sU,r}return s=e.child,e=s.sibling,r=B0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function rY(e,t){return t=nF({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function XP(e,t,n,r){return r!==null&&VG(r),$E(t,e.child,null,n),e=rY(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wVe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=I8(Error(at(422))),XP(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=nF({mode:"visible",children:r.children},i,0,null),s=F1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&$E(t,e.child,null,o),t.child.memoizedState=oU(o),t.memoizedState=sU,s);if(!(t.mode&1))return XP(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(at(419)),r=I8(s,r,void 0),XP(e,t,o,r)}if(a=(o&e.childLanes)!==0,Wl||a){if(r=Eo,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Bm(e,i),sf(r,e,i,-1))}return uY(),r=I8(Error(at(421))),XP(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=DVe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Fu=$0(i.nextSibling),Wu=t,Li=!0,zd=null,e!==null&&(Ac[Ic++]=dm,Ac[Ic++]=fm,Ac[Ic++]=eb,dm=e.id,fm=e.overflow,eb=t),t=rY(t,r.children),t.flags|=4096,t)}function qae(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Zz(e.return,t,n)}function R8(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function twe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Xa(e,t,r.children,n),r=qi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qae(e,n,t);else if(e.tag===19)qae(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(vi(qi,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&TM(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),R8(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&TM(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}R8(t,!0,n,null,s);break;case"together":R8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function WO(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zm(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),nb|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(at(153));if(t.child!==null){for(e=t.child,n=B0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=B0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function EVe(e,t,n){switch(t.tag){case 3:Z_e(t),ME();break;case 5:A_e(t);break;case 1:Zl(t.type)&&bM(t);break;case 4:KG(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;vi(EM,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(vi(qi,qi.current&1),t.flags|=128,null):n&t.child.childLanes?ewe(e,t,n):(vi(qi,qi.current&1),e=zm(e,t,n),e!==null?e.sibling:null);vi(qi,qi.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return twe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),vi(qi,qi.current),r)break;return null;case 22:case 23:return t.lanes=0,Q_e(e,t,n)}return zm(e,t,n)}var nwe,aU,rwe,iwe;nwe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};aU=function(){};rwe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,S1(Fh.current);var s=null;switch(n){case"input":i=Rz(e,i),r=Rz(e,r),s=[];break;case"select":i=Ki({},i,{value:void 0}),r=Ki({},r,{value:void 0}),s=[];break;case"textarea":i=Nz(e,i),r=Nz(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=yM)}Dz(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(AA.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(AA.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&xi("scroll",e),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};iwe=function(e,t,n,r){n!==r&&(t.flags|=4)};function AT(e,t){if(!Li)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ca(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function xVe(e,t,n){var r=t.pendingProps;switch(UG(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ca(t),null;case 1:return Zl(t.type)&&vM(),ca(t),null;case 3:return r=t.stateNode,LE(),ki(Jl),ki($a),QG(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(YP(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zd!==null&&(mU(zd),zd=null))),aU(e,t),ca(t),null;case 5:XG(t);var i=S1(jA.current);if(n=t.type,e!==null&&t.stateNode!=null)rwe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(at(166));return ca(t),null}if(e=S1(Fh.current),YP(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[vh]=t,r[LA]=s,e=(t.mode&1)!==0,n){case"dialog":xi("cancel",r),xi("close",r);break;case"iframe":case"object":case"embed":xi("load",r);break;case"video":case"audio":for(i=0;i<IC.length;i++)xi(IC[i],r);break;case"source":xi("error",r);break;case"img":case"image":case"link":xi("error",r),xi("load",r);break;case"details":xi("toggle",r);break;case"input":eae(r,s),xi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},xi("invalid",r);break;case"textarea":nae(r,s),xi("invalid",r)}Dz(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&GP(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&GP(r.textContent,a,e),i=["children",""+a]):AA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&xi("scroll",r)}switch(n){case"input":jP(r),tae(r,s,!0);break;case"textarea":jP(r),rae(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=yM)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Nbe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[vh]=t,e[LA]=r,nwe(e,t,!1,!1),t.stateNode=e;e:{switch(o=Mz(n,r),n){case"dialog":xi("cancel",e),xi("close",e),i=r;break;case"iframe":case"object":case"embed":xi("load",e),i=r;break;case"video":case"audio":for(i=0;i<IC.length;i++)xi(IC[i],e);i=r;break;case"source":xi("error",e),i=r;break;case"img":case"image":case"link":xi("error",e),xi("load",e),i=r;break;case"details":xi("toggle",e),i=r;break;case"input":eae(e,r),i=Rz(e,r),xi("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ki({},r,{value:void 0}),xi("invalid",e);break;case"textarea":nae(e,r),i=Nz(e,r),xi("invalid",e);break;default:i=r}Dz(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Mbe(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Obe(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&IA(e,l):typeof l=="number"&&IA(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(AA.hasOwnProperty(s)?l!=null&&s==="onScroll"&&xi("scroll",e):l!=null&&AG(e,s,l,o))}switch(n){case"input":jP(e),tae(e,r,!1);break;case"textarea":jP(e),rae(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ry(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Xw(e,!!r.multiple,s,!1):r.defaultValue!=null&&Xw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=yM)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ca(t),null;case 6:if(e&&t.stateNode!=null)iwe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(at(166));if(n=S1(jA.current),S1(Fh.current),YP(t)){if(r=t.stateNode,n=t.memoizedProps,r[vh]=t,(s=r.nodeValue!==n)&&(e=Wu,e!==null))switch(e.tag){case 3:GP(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&GP(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vh]=t,t.stateNode=r}return ca(t),null;case 13:if(ki(qi),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Li&&Fu!==null&&t.mode&1&&!(t.flags&128))E_e(),ME(),t.flags|=98560,s=!1;else if(s=YP(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(at(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(at(317));s[vh]=t}else ME(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ca(t),s=!1}else zd!==null&&(mU(zd),zd=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||qi.current&1?Ks===0&&(Ks=3):uY())),t.updateQueue!==null&&(t.flags|=4),ca(t),null);case 4:return LE(),aU(e,t),e===null&&MA(t.stateNode.containerInfo),ca(t),null;case 10:return WG(t.type._context),ca(t),null;case 17:return Zl(t.type)&&vM(),ca(t),null;case 19:if(ki(qi),s=t.memoizedState,s===null)return ca(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)AT(s,!1);else{if(Ks!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=TM(e),o!==null){for(t.flags|=128,AT(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return vi(qi,qi.current&1|2),t.child}e=e.sibling}s.tail!==null&&_s()>jE&&(t.flags|=128,r=!0,AT(s,!1),t.lanes=4194304)}else{if(!r)if(e=TM(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),AT(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Li)return ca(t),null}else 2*_s()-s.renderingStartTime>jE&&n!==1073741824&&(t.flags|=128,r=!0,AT(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=_s(),t.sibling=null,n=qi.current,vi(qi,r?n&1|2:n&1),t):(ca(t),null);case 22:case 23:return lY(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Pu&1073741824&&(ca(t),t.subtreeFlags&6&&(t.flags|=8192)):ca(t),null;case 24:return null;case 25:return null}throw Error(at(156,t.tag))}function SVe(e,t){switch(UG(t),t.tag){case 1:return Zl(t.type)&&vM(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return LE(),ki(Jl),ki($a),QG(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return XG(t),null;case 13:if(ki(qi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(at(340));ME()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ki(qi),null;case 4:return LE(),null;case 10:return WG(t.type._context),null;case 22:case 23:return lY(),null;case 24:return null;default:return null}}var QP=!1,Sa=!1,TVe=typeof WeakSet=="function"?WeakSet:Set,Rt=null;function Dw(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ss(e,t,r)}else n.current=null}function lU(e,t,n){try{n()}catch(r){ss(e,t,r)}}var Wae=!1;function CVe(e,t){if(qz=pM,e=u_e(),BG(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wz={focusedElem:e,selectionRange:n},pM=!1,Rt=t;Rt!==null;)if(t=Rt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Rt=e;else for(;Rt!==null;){t=Rt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Md(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(at(163))}}catch(w){ss(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Rt=e;break}Rt=t.return}return p=Wae,Wae=!1,p}function k2(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&lU(t,n,s)}i=i.next}while(i!==r)}}function eF(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function uU(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function swe(e){var t=e.alternate;t!==null&&(e.alternate=null,swe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vh],delete t[LA],delete t[Kz],delete t[lVe],delete t[uVe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function owe(e){return e.tag===5||e.tag===3||e.tag===4}function Gae(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||owe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=yM));else if(r!==4&&(e=e.child,e!==null))for(cU(e,t,n),e=e.sibling;e!==null;)cU(e,t,n),e=e.sibling}function dU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(dU(e,t,n),e=e.sibling;e!==null;)dU(e,t,n),e=e.sibling}var Mo=null,Ld=!1;function Og(e,t,n){for(n=n.child;n!==null;)awe(e,t,n),n=n.sibling}function awe(e,t,n){if(Lh&&typeof Lh.onCommitFiberUnmount=="function")try{Lh.onCommitFiberUnmount(WL,n)}catch{}switch(n.tag){case 5:Sa||Dw(n,t);case 6:var r=Mo,i=Ld;Mo=null,Og(e,t,n),Mo=r,Ld=i,Mo!==null&&(Ld?(e=Mo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Mo.removeChild(n.stateNode));break;case 18:Mo!==null&&(Ld?(e=Mo,n=n.stateNode,e.nodeType===8?E8(e.parentNode,n):e.nodeType===1&&E8(e,n),NA(e)):E8(Mo,n.stateNode));break;case 4:r=Mo,i=Ld,Mo=n.stateNode.containerInfo,Ld=!0,Og(e,t,n),Mo=r,Ld=i;break;case 0:case 11:case 14:case 15:if(!Sa&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&lU(n,t,o),i=i.next}while(i!==r)}Og(e,t,n);break;case 1:if(!Sa&&(Dw(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ss(n,t,a)}Og(e,t,n);break;case 21:Og(e,t,n);break;case 22:n.mode&1?(Sa=(r=Sa)||n.memoizedState!==null,Og(e,t,n),Sa=r):Og(e,t,n);break;default:Og(e,t,n)}}function Yae(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new TVe),t.forEach(function(r){var i=MVe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Sd(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Mo=a.stateNode,Ld=!1;break e;case 3:Mo=a.stateNode.containerInfo,Ld=!0;break e;case 4:Mo=a.stateNode.containerInfo,Ld=!0;break e}a=a.return}if(Mo===null)throw Error(at(160));awe(s,o,i),Mo=null,Ld=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ss(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lwe(t,e),t=t.sibling}function lwe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Sd(t,e),Jf(e),r&4){try{k2(3,e,e.return),eF(3,e)}catch(m){ss(e,e.return,m)}try{k2(5,e,e.return)}catch(m){ss(e,e.return,m)}}break;case 1:Sd(t,e),Jf(e),r&512&&n!==null&&Dw(n,n.return);break;case 5:if(Sd(t,e),Jf(e),r&512&&n!==null&&Dw(n,n.return),e.flags&32){var i=e.stateNode;try{IA(i,"")}catch(m){ss(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&kbe(i,s),Mz(a,o);var u=Mz(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?Mbe(i,d):c==="dangerouslySetInnerHTML"?Obe(i,d):c==="children"?IA(i,d):AG(i,c,d,u)}switch(a){case"input":kz(i,s);break;case"textarea":Pbe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Xw(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Xw(i,!!s.multiple,s.defaultValue,!0):Xw(i,!!s.multiple,s.multiple?[]:"",!1))}i[LA]=s}catch(m){ss(e,e.return,m)}}break;case 6:if(Sd(t,e),Jf(e),r&4){if(e.stateNode===null)throw Error(at(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){ss(e,e.return,m)}}break;case 3:if(Sd(t,e),Jf(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{NA(t.containerInfo)}catch(m){ss(e,e.return,m)}break;case 4:Sd(t,e),Jf(e);break;case 13:Sd(t,e),Jf(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(oY=_s())),r&4&&Yae(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Sa=(u=Sa)||c,Sd(t,e),Sa=u):Sd(t,e),Jf(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(Rt=e,c=e.child;c!==null;){for(d=Rt=c;Rt!==null;){switch(f=Rt,h=f.child,f.tag){case 0:case 11:case 14:case 15:k2(4,f,f.return);break;case 1:Dw(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){ss(r,n,m)}}break;case 5:Dw(f,f.return);break;case 22:if(f.memoizedState!==null){Xae(d);continue}}h!==null?(h.return=f,Rt=h):Xae(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Dbe("display",o))}catch(m){ss(e,e.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){ss(e,e.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Sd(t,e),Jf(e),r&4&&Yae(e);break;case 21:break;default:Sd(t,e),Jf(e)}}function Jf(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(owe(n)){var r=n;break e}n=n.return}throw Error(at(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(IA(i,""),r.flags&=-33);var s=Gae(e);dU(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Gae(e);cU(e,a,o);break;default:throw Error(at(161))}}catch(l){ss(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function AVe(e,t,n){Rt=e,uwe(e)}function uwe(e,t,n){for(var r=(e.mode&1)!==0;Rt!==null;){var i=Rt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||QP;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Sa;a=QP;var u=Sa;if(QP=o,(Sa=l)&&!u)for(Rt=i;Rt!==null;)o=Rt,l=o.child,o.tag===22&&o.memoizedState!==null?Qae(i):l!==null?(l.return=o,Rt=l):Qae(i);for(;s!==null;)Rt=s,uwe(s),s=s.sibling;Rt=i,QP=a,Sa=u}Kae(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Rt=s):Kae(e)}}function Kae(e){for(;Rt!==null;){var t=Rt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Sa||eF(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Sa)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Md(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Oae(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Oae(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&NA(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(at(163))}Sa||t.flags&512&&uU(t)}catch(f){ss(t,t.return,f)}}if(t===e){Rt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Rt=n;break}Rt=t.return}}function Xae(e){for(;Rt!==null;){var t=Rt;if(t===e){Rt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Rt=n;break}Rt=t.return}}function Qae(e){for(;Rt!==null;){var t=Rt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{eF(4,t)}catch(l){ss(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){ss(t,i,l)}}var s=t.return;try{uU(t)}catch(l){ss(t,s,l)}break;case 5:var o=t.return;try{uU(t)}catch(l){ss(t,o,l)}}}catch(l){ss(t,t.return,l)}if(t===e){Rt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Rt=a;break}Rt=t.return}}var IVe=Math.ceil,IM=cg.ReactCurrentDispatcher,iY=cg.ReactCurrentOwner,Hc=cg.ReactCurrentBatchConfig,Er=0,Eo=null,Ds=null,Wo=0,Pu=0,Mw=qy(0),Ks=0,VA=null,nb=0,tF=0,sY=0,P2=null,Bl=null,oY=0,jE=1/0,Qp=null,RM=!1,fU=null,F0=null,JP=!1,v0=null,kM=0,N2=0,hU=null,GO=-1,YO=0;function al(){return Er&6?_s():GO!==-1?GO:GO=_s()}function j0(e){return e.mode&1?Er&2&&Wo!==0?Wo&-Wo:dVe.transition!==null?(YO===0&&(YO=Gbe()),YO):(e=Gr,e!==0||(e=window.event,e=e===void 0?16:e_e(e.type)),e):1}function sf(e,t,n,r){if(50<N2)throw N2=0,hU=null,Error(at(185));SR(e,n,r),(!(Er&2)||e!==Eo)&&(e===Eo&&(!(Er&2)&&(tF|=n),Ks===4&&a0(e,Wo)),eu(e,r),n===1&&Er===0&&!(t.mode&1)&&(jE=_s()+500,QL&&Wy()))}function eu(e,t){var n=e.callbackNode;dUe(e,t);var r=hM(e,e===Eo?Wo:0);if(r===0)n!==null&&oae(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&oae(n),t===1)e.tag===0?cVe(Jae.bind(null,e)):b_e(Jae.bind(null,e)),oVe(function(){!(Er&6)&&Wy()}),n=null;else{switch(Ybe(r)){case 1:n=NG;break;case 4:n=qbe;break;case 16:n=fM;break;case 536870912:n=Wbe;break;default:n=fM}n=ywe(n,cwe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function cwe(e,t){if(GO=-1,YO=0,Er&6)throw Error(at(327));var n=e.callbackNode;if(tE()&&e.callbackNode!==n)return null;var r=hM(e,e===Eo?Wo:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=PM(e,r);else{t=r;var i=Er;Er|=2;var s=fwe();(Eo!==e||Wo!==t)&&(Qp=null,jE=_s()+500,L1(e,t));do try{PVe();break}catch(a){dwe(e,a)}while(!0);qG(),IM.current=s,Er=i,Ds!==null?t=0:(Eo=null,Wo=0,t=Ks)}if(t!==0){if(t===2&&(i=Bz(e),i!==0&&(r=i,t=pU(e,i))),t===1)throw n=VA,L1(e,0),a0(e,r),eu(e,_s()),n;if(t===6)a0(e,r);else{if(i=e.current.alternate,!(r&30)&&!RVe(i)&&(t=PM(e,r),t===2&&(s=Bz(e),s!==0&&(r=s,t=pU(e,s))),t===1))throw n=VA,L1(e,0),a0(e,r),eu(e,_s()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(at(345));case 2:Yv(e,Bl,Qp);break;case 3:if(a0(e,r),(r&130023424)===r&&(t=oY+500-_s(),10<t)){if(hM(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){al(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Yz(Yv.bind(null,e,Bl,Qp),t);break}Yv(e,Bl,Qp);break;case 4:if(a0(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-rf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=_s()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*IVe(r/1960))-r,10<r){e.timeoutHandle=Yz(Yv.bind(null,e,Bl,Qp),r);break}Yv(e,Bl,Qp);break;case 5:Yv(e,Bl,Qp);break;default:throw Error(at(329))}}}return eu(e,_s()),e.callbackNode===n?cwe.bind(null,e):null}function pU(e,t){var n=P2;return e.current.memoizedState.isDehydrated&&(L1(e,t).flags|=256),e=PM(e,t),e!==2&&(t=Bl,Bl=n,t!==null&&mU(t)),e}function mU(e){Bl===null?Bl=e:Bl.push.apply(Bl,e)}function RVe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!vf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function a0(e,t){for(t&=~sY,t&=~tF,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rf(t),r=1<<n;e[n]=-1,t&=~r}}function Jae(e){if(Er&6)throw Error(at(327));tE();var t=hM(e,0);if(!(t&1))return eu(e,_s()),null;var n=PM(e,t);if(e.tag!==0&&n===2){var r=Bz(e);r!==0&&(t=r,n=pU(e,r))}if(n===1)throw n=VA,L1(e,0),a0(e,t),eu(e,_s()),n;if(n===6)throw Error(at(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yv(e,Bl,Qp),eu(e,_s()),null}function aY(e,t){var n=Er;Er|=1;try{return e(t)}finally{Er=n,Er===0&&(jE=_s()+500,QL&&Wy())}}function rb(e){v0!==null&&v0.tag===0&&!(Er&6)&&tE();var t=Er;Er|=1;var n=Hc.transition,r=Gr;try{if(Hc.transition=null,Gr=1,e)return e()}finally{Gr=r,Hc.transition=n,Er=t,!(Er&6)&&Wy()}}function lY(){Pu=Mw.current,ki(Mw)}function L1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,sVe(n)),Ds!==null)for(n=Ds.return;n!==null;){var r=n;switch(UG(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vM();break;case 3:LE(),ki(Jl),ki($a),QG();break;case 5:XG(r);break;case 4:LE();break;case 13:ki(qi);break;case 19:ki(qi);break;case 10:WG(r.type._context);break;case 22:case 23:lY()}n=n.return}if(Eo=e,Ds=e=B0(e.current,null),Wo=Pu=t,Ks=0,VA=null,sY=tF=nb=0,Bl=P2=null,x1!==null){for(t=0;t<x1.length;t++)if(n=x1[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}x1=null}return e}function dwe(e,t){do{var n=Ds;try{if(qG(),HO.current=AM,CM){for(var r=Gi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}CM=!1}if(tb=0,ho=zs=Gi=null,R2=!1,BA=0,iY.current=null,n===null||n.return===null){Ks=1,VA=t,Ds=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=Wo,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=jae(o);if(h!==null){h.flags&=-257,Bae(h,o,a,s,t),h.mode&1&&Fae(s,u,t),t=h,l=u;var p=t.updateQueue;if(p===null){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}else{if(!(t&1)){Fae(s,u,t),uY();break e}l=Error(at(426))}}else if(Li&&a.mode&1){var g=jae(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Bae(g,o,a,s,t),VG(FE(l,a));break e}}s=l=FE(l,a),Ks!==4&&(Ks=2),P2===null?P2=[s]:P2.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=Y_e(s,l,t);Nae(s,y);break e;case 1:a=l;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(F0===null||!F0.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=K_e(s,a,t);Nae(s,w);break e}}s=s.return}while(s!==null)}pwe(n)}catch(E){t=E,Ds===n&&n!==null&&(Ds=n=n.return);continue}break}while(!0)}function fwe(){var e=IM.current;return IM.current=AM,e===null?AM:e}function uY(){(Ks===0||Ks===3||Ks===2)&&(Ks=4),Eo===null||!(nb&268435455)&&!(tF&268435455)||a0(Eo,Wo)}function PM(e,t){var n=Er;Er|=2;var r=fwe();(Eo!==e||Wo!==t)&&(Qp=null,L1(e,t));do try{kVe();break}catch(i){dwe(e,i)}while(!0);if(qG(),Er=n,IM.current=r,Ds!==null)throw Error(at(261));return Eo=null,Wo=0,Ks}function kVe(){for(;Ds!==null;)hwe(Ds)}function PVe(){for(;Ds!==null&&!nUe();)hwe(Ds)}function hwe(e){var t=gwe(e.alternate,e,Pu);e.memoizedProps=e.pendingProps,t===null?pwe(e):Ds=t,iY.current=null}function pwe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=SVe(n,t),n!==null){n.flags&=32767,Ds=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ks=6,Ds=null;return}}else if(n=xVe(n,t,Pu),n!==null){Ds=n;return}if(t=t.sibling,t!==null){Ds=t;return}Ds=t=e}while(t!==null);Ks===0&&(Ks=5)}function Yv(e,t,n){var r=Gr,i=Hc.transition;try{Hc.transition=null,Gr=1,NVe(e,t,n,r)}finally{Hc.transition=i,Gr=r}return null}function NVe(e,t,n,r){do tE();while(v0!==null);if(Er&6)throw Error(at(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(at(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(fUe(e,s),e===Eo&&(Ds=Eo=null,Wo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||JP||(JP=!0,ywe(fM,function(){return tE(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Hc.transition,Hc.transition=null;var o=Gr;Gr=1;var a=Er;Er|=4,iY.current=null,CVe(e,n),lwe(n,e),JUe(Wz),pM=!!qz,Wz=qz=null,e.current=n,AVe(n),rUe(),Er=a,Gr=o,Hc.transition=s}else e.current=n;if(JP&&(JP=!1,v0=e,kM=i),s=e.pendingLanes,s===0&&(F0=null),oUe(n.stateNode),eu(e,_s()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(RM)throw RM=!1,e=fU,fU=null,e;return kM&1&&e.tag!==0&&tE(),s=e.pendingLanes,s&1?e===hU?N2++:(N2=0,hU=e):N2=0,Wy(),null}function tE(){if(v0!==null){var e=Ybe(kM),t=Hc.transition,n=Gr;try{if(Hc.transition=null,Gr=16>e?16:e,v0===null)var r=!1;else{if(e=v0,v0=null,kM=0,Er&6)throw Error(at(331));var i=Er;for(Er|=4,Rt=e.current;Rt!==null;){var s=Rt,o=s.child;if(Rt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Rt=u;Rt!==null;){var c=Rt;switch(c.tag){case 0:case 11:case 15:k2(8,c,s)}var d=c.child;if(d!==null)d.return=c,Rt=d;else for(;Rt!==null;){c=Rt;var f=c.sibling,h=c.return;if(swe(c),c===u){Rt=null;break}if(f!==null){f.return=h,Rt=f;break}Rt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Rt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Rt=o;else e:for(;Rt!==null;){if(s=Rt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:k2(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Rt=y;break e}Rt=s.return}}var v=e.current;for(Rt=v;Rt!==null;){o=Rt;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Rt=_;else e:for(o=v;Rt!==null;){if(a=Rt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:eF(9,a)}}catch(E){ss(a,a.return,E)}if(a===o){Rt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Rt=w;break e}Rt=a.return}}if(Er=i,Wy(),Lh&&typeof Lh.onPostCommitFiberRoot=="function")try{Lh.onPostCommitFiberRoot(WL,e)}catch{}r=!0}return r}finally{Gr=n,Hc.transition=t}}return!1}function Zae(e,t,n){t=FE(n,t),t=Y_e(e,t,1),e=L0(e,t,1),t=al(),e!==null&&(SR(e,1,t),eu(e,t))}function ss(e,t,n){if(e.tag===3)Zae(e,e,n);else for(;t!==null;){if(t.tag===3){Zae(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(F0===null||!F0.has(r))){e=FE(n,e),e=K_e(t,e,1),t=L0(t,e,1),e=al(),t!==null&&(SR(t,1,e),eu(t,e));break}}t=t.return}}function OVe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=al(),e.pingedLanes|=e.suspendedLanes&n,Eo===e&&(Wo&n)===n&&(Ks===4||Ks===3&&(Wo&130023424)===Wo&&500>_s()-oY?L1(e,0):sY|=n),eu(e,t)}function mwe(e,t){t===0&&(e.mode&1?(t=UP,UP<<=1,!(UP&130023424)&&(UP=4194304)):t=1);var n=al();e=Bm(e,t),e!==null&&(SR(e,t,n),eu(e,n))}function DVe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),mwe(e,n)}function MVe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(at(314))}r!==null&&r.delete(t),mwe(e,n)}var gwe;gwe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Jl.current)Wl=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Wl=!1,EVe(e,t,n);Wl=!!(e.flags&131072)}else Wl=!1,Li&&t.flags&1048576&&__e(t,wM,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;WO(e,t),e=t.pendingProps;var i=DE(t,$a.current);eE(t,n),i=ZG(null,t,r,e,i,n);var s=eY();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zl(r)?(s=!0,bM(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,YG(t),i.updater=ZL,t.stateNode=i,i._reactInternals=t,tU(t,r,e,n),t=iU(null,t,r,!0,s,n)):(t.tag=0,Li&&s&&zG(t),Xa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(WO(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=LVe(r),e=Md(r,e),i){case 0:t=rU(null,t,r,e,n);break e;case 1:t=Vae(null,t,r,e,n);break e;case 11:t=zae(null,t,r,e,n);break e;case 14:t=Uae(null,t,r,Md(r.type,e),n);break e}throw Error(at(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Md(r,i),rU(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Md(r,i),Vae(e,t,r,i,n);case 3:e:{if(Z_e(t),e===null)throw Error(at(387));r=t.pendingProps,s=t.memoizedState,i=s.element,C_e(e,t),SM(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=FE(Error(at(423)),t),t=Hae(e,t,r,n,i);break e}else if(r!==i){i=FE(Error(at(424)),t),t=Hae(e,t,r,n,i);break e}else for(Fu=$0(t.stateNode.containerInfo.firstChild),Wu=t,Li=!0,zd=null,n=S_e(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ME(),r===i){t=zm(e,t,n);break e}Xa(e,t,r,n)}t=t.child}return t;case 5:return A_e(t),e===null&&Jz(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Gz(r,i)?o=null:s!==null&&Gz(r,s)&&(t.flags|=32),J_e(e,t),Xa(e,t,o,n),t.child;case 6:return e===null&&Jz(t),null;case 13:return ewe(e,t,n);case 4:return KG(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=$E(t,null,r,n):Xa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Md(r,i),zae(e,t,r,i,n);case 7:return Xa(e,t,t.pendingProps,n),t.child;case 8:return Xa(e,t,t.pendingProps.children,n),t.child;case 12:return Xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,vi(EM,r._currentValue),r._currentValue=o,s!==null)if(vf(s.value,o)){if(s.children===i.children&&!Jl.current){t=zm(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Em(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Zz(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(at(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Zz(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Xa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,eE(t,n),i=Qc(i),r=r(i),t.flags|=1,Xa(e,t,r,n),t.child;case 14:return r=t.type,i=Md(r,t.pendingProps),i=Md(r.type,i),Uae(e,t,r,i,n);case 15:return X_e(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Md(r,i),WO(e,t),t.tag=1,Zl(r)?(e=!0,bM(t)):e=!1,eE(t,n),G_e(t,r,i),tU(t,r,i,n),iU(null,t,r,!0,e,n);case 19:return twe(e,t,n);case 22:return Q_e(e,t,n)}throw Error(at(156,t.tag))};function ywe(e,t){return Hbe(e,t)}function $Ve(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $c(e,t,n,r){return new $Ve(e,t,n,r)}function cY(e){return e=e.prototype,!(!e||!e.isReactComponent)}function LVe(e){if(typeof e=="function")return cY(e)?1:0;if(e!=null){if(e=e.$$typeof,e===RG)return 11;if(e===kG)return 14}return 2}function B0(e,t){var n=e.alternate;return n===null?(n=$c(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function KO(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")cY(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Tw:return F1(n.children,i,s,t);case IG:o=8,i|=8;break;case Tz:return e=$c(12,n,t,i|2),e.elementType=Tz,e.lanes=s,e;case Cz:return e=$c(13,n,t,i),e.elementType=Cz,e.lanes=s,e;case Az:return e=$c(19,n,t,i),e.elementType=Az,e.lanes=s,e;case Abe:return nF(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Tbe:o=10;break e;case Cbe:o=9;break e;case RG:o=11;break e;case kG:o=14;break e;case Qg:o=16,r=null;break e}throw Error(at(130,e==null?e:typeof e,""))}return t=$c(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function F1(e,t,n,r){return e=$c(7,e,r,t),e.lanes=n,e}function nF(e,t,n,r){return e=$c(22,e,r,t),e.elementType=Abe,e.lanes=n,e.stateNode={isHidden:!1},e}function k8(e,t,n){return e=$c(6,e,null,t),e.lanes=n,e}function P8(e,t,n){return t=$c(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function FVe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=d8(0),this.expirationTimes=d8(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=d8(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function dY(e,t,n,r,i,s,o,a,l){return e=new FVe(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=$c(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},YG(s),e}function jVe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sw,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function vwe(e){if(!e)return iy;e=e._reactInternals;e:{if(Vb(e)!==e||e.tag!==1)throw Error(at(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zl(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(at(171))}if(e.tag===1){var n=e.type;if(Zl(n))return v_e(e,n,t)}return t}function bwe(e,t,n,r,i,s,o,a,l){return e=dY(n,r,!0,e,i,s,o,a,l),e.context=vwe(null),n=e.current,r=al(),i=j0(n),s=Em(r,i),s.callback=t??null,L0(n,s,i),e.current.lanes=i,SR(e,i,r),eu(e,r),e}function rF(e,t,n,r){var i=t.current,s=al(),o=j0(i);return n=vwe(n),t.context===null?t.context=n:t.pendingContext=n,t=Em(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=L0(i,t,o),e!==null&&(sf(e,i,o,s),VO(e,i,o)),o}function NM(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ele(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function fY(e,t){ele(e,t),(e=e.alternate)&&ele(e,t)}function BVe(){return null}var _we=typeof reportError=="function"?reportError:function(e){console.error(e)};function hY(e){this._internalRoot=e}iF.prototype.render=hY.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(at(409));rF(e,t,null,null)};iF.prototype.unmount=hY.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rb(function(){rF(null,e,null,null)}),t[jm]=null}};function iF(e){this._internalRoot=e}iF.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qbe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<o0.length&&t!==0&&t<o0[n].priority;n++);o0.splice(n,0,e),n===0&&Zbe(e)}};function pY(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function sF(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function tle(){}function zVe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=NM(o);s.call(u)}}var o=bwe(t,r,e,0,null,!1,!1,"",tle);return e._reactRootContainer=o,e[jm]=o.current,MA(e.nodeType===8?e.parentNode:e),rb(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=NM(l);a.call(u)}}var l=dY(e,0,!1,null,null,!1,!1,"",tle);return e._reactRootContainer=l,e[jm]=l.current,MA(e.nodeType===8?e.parentNode:e),rb(function(){rF(t,l,n,r)}),l}function oF(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=NM(o);a.call(l)}}rF(t,o,e,i)}else o=zVe(n,t,e,i,r);return NM(o)}Kbe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=AC(t.pendingLanes);n!==0&&(OG(t,n|1),eu(t,_s()),!(Er&6)&&(jE=_s()+500,Wy()))}break;case 13:rb(function(){var r=Bm(e,1);if(r!==null){var i=al();sf(r,e,1,i)}}),fY(e,1)}};DG=function(e){if(e.tag===13){var t=Bm(e,134217728);if(t!==null){var n=al();sf(t,e,134217728,n)}fY(e,134217728)}};Xbe=function(e){if(e.tag===13){var t=j0(e),n=Bm(e,t);if(n!==null){var r=al();sf(n,e,t,r)}fY(e,t)}};Qbe=function(){return Gr};Jbe=function(e,t){var n=Gr;try{return Gr=e,t()}finally{Gr=n}};Lz=function(e,t,n){switch(t){case"input":if(kz(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=XL(r);if(!i)throw Error(at(90));Rbe(r),kz(r,i)}}}break;case"textarea":Pbe(e,n);break;case"select":t=n.value,t!=null&&Xw(e,!!n.multiple,t,!1)}};Fbe=aY;jbe=rb;var UVe={usingClientEntryPoint:!1,Events:[CR,Rw,XL,$be,Lbe,aY]},IT={findFiberByHostInstance:E1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VVe={bundleType:IT.bundleType,version:IT.version,rendererPackageName:IT.rendererPackageName,rendererConfig:IT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cg.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ube(e),e===null?null:e.stateNode},findFiberByHostInstance:IT.findFiberByHostInstance||BVe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ZP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ZP.isDisabled&&ZP.supportsFiber)try{WL=ZP.inject(VVe),Lh=ZP}catch{}}fc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UVe;fc.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pY(t))throw Error(at(200));return jVe(e,t,null,n)};fc.createRoot=function(e,t){if(!pY(e))throw Error(at(299));var n=!1,r="",i=_we;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=dY(e,1,!1,null,null,n,!1,r,i),e[jm]=t.current,MA(e.nodeType===8?e.parentNode:e),new hY(t)};fc.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(at(188)):(e=Object.keys(e).join(","),Error(at(268,e)));return e=Ube(t),e=e===null?null:e.stateNode,e};fc.flushSync=function(e){return rb(e)};fc.hydrate=function(e,t,n){if(!sF(t))throw Error(at(200));return oF(null,e,t,!0,n)};fc.hydrateRoot=function(e,t,n){if(!pY(e))throw Error(at(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=_we;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=bwe(t,null,e,1,n??null,i,!1,s,o),e[jm]=t.current,MA(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new iF(t)};fc.render=function(e,t,n){if(!sF(t))throw Error(at(200));return oF(null,e,t,!1,n)};fc.unmountComponentAtNode=function(e){if(!sF(e))throw Error(at(40));return e._reactRootContainer?(rb(function(){oF(null,null,e,!1,function(){e._reactRootContainer=null,e[jm]=null})}),!0):!1};fc.unstable_batchedUpdates=aY;fc.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!sF(n))throw Error(at(200));if(e==null||e._reactInternals===void 0)throw Error(at(38));return oF(e,t,n,!1,r)};fc.version="18.3.1-next-f1338f8080-20240426";function wwe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wwe)}catch(e){console.error(e)}}wwe(),wbe.exports=fc;var nS=wbe.exports;const HVe=bu(nS);var nle=nS;xz.createRoot=nle.createRoot,xz.hydrateRoot=nle.hydrateRoot;var bh=function(){return bh=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},bh.apply(this,arguments)};function IR(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function sm(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}function rle(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function qVe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function lr(e){return this instanceof lr?(this.v=e,this):new lr(e)}function T1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||l(h,m)})},p&&(i[h]=p(i[h])))}function l(h,p){try{u(r[h](p))}catch(m){f(s[0][3],m)}}function u(h){h.value instanceof lr?Promise.resolve(h.value.v).then(c,d):f(s[0][2],h)}function c(h){l("next",h)}function d(h){l("throw",h)}function f(h,p){h(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}function N8(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:lr(e[i](o)),done:!1}:s?s(o):o}:s}}function O2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof rle=="function"?rle(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,l){o=e[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}var XO="right-scroll-bar-position",QO="width-before-scroll-bar",WVe="with-scroll-bars-hidden",GVe="--removed-body-scroll-bar-size";function O8(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function YVe(e,t){var n=A.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var KVe=typeof window<"u"?A.useLayoutEffect:A.useEffect,ile=new WeakMap;function XVe(e,t){var n=YVe(null,function(r){return e.forEach(function(i){return O8(i,r)})});return KVe(function(){var r=ile.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||O8(a,null)}),s.forEach(function(a){i.has(a)||O8(a,o)})}ile.set(n,e)},[e]),n}function QVe(e){return e}function JVe(e,t){t===void 0&&(t=QVe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return i}function ZVe(e){e===void 0&&(e={});var t=JVe(null);return t.options=bh({async:!0,ssr:!1},e),t}var Ewe=function(e){var t=e.sideCar,n=IR(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,bh({},n))};Ewe.isSideCarExport=!0;function eHe(e,t){return e.useMedium(t),Ewe}var xwe=ZVe(),D8=function(){},aF=A.forwardRef(function(e,t){var n=A.useRef(null),r=A.useState({onScrollCapture:D8,onWheelCapture:D8,onTouchMoveCapture:D8}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,l=e.className,u=e.removeScrollBar,c=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,_=IR(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,E=XVe([n,t]),S=bh(bh({},_),i);return A.createElement(A.Fragment,null,c&&A.createElement(w,{sideCar:xwe,removeScrollBar:u,shards:d,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?A.cloneElement(A.Children.only(a),bh(bh({},S),{ref:E})):A.createElement(y,bh({},S,{className:l,ref:E}),a))});aF.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};aF.classNames={fullWidth:QO,zeroRight:XO};var tHe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function nHe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=tHe();return t&&e.setAttribute("nonce",t),e}function rHe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function iHe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var sHe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=nHe())&&(rHe(t,n),iHe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},oHe=function(){var e=sHe();return function(t,n){A.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Swe=function(){var e=oHe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},aHe={left:0,top:0,right:0,gap:0},M8=function(e){return parseInt(e||"",10)||0},lHe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[M8(n),M8(r),M8(i)]},uHe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return aHe;var t=lHe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},cHe=Swe(),nE="data-scroll-locked",dHe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(WVe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(nE,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(XO,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(QO,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(XO," .").concat(XO,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(QO," .").concat(QO,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(nE,`] {
    `).concat(GVe,": ").concat(a,`px;
  }
`)},sle=function(){var e=parseInt(document.body.getAttribute(nE)||"0",10);return isFinite(e)?e:0},fHe=function(){A.useEffect(function(){return document.body.setAttribute(nE,(sle()+1).toString()),function(){var e=sle()-1;e<=0?document.body.removeAttribute(nE):document.body.setAttribute(nE,e.toString())}},[])},hHe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;fHe();var s=A.useMemo(function(){return uHe(i)},[i]);return A.createElement(cHe,{styles:dHe(s,!t,i,n?"":"!important")})},gU=!1;if(typeof window<"u")try{var eN=Object.defineProperty({},"passive",{get:function(){return gU=!0,!0}});window.addEventListener("test",eN,eN),window.removeEventListener("test",eN,eN)}catch{gU=!1}var P_=gU?{passive:!1}:!1,pHe=function(e){return e.tagName==="TEXTAREA"},Twe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!pHe(e)&&n[t]==="visible")},mHe=function(e){return Twe(e,"overflowY")},gHe=function(e){return Twe(e,"overflowX")},ole=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Cwe(e,r);if(i){var s=Awe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},yHe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},vHe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Cwe=function(e,t){return e==="v"?mHe(t):gHe(t)},Awe=function(e,t){return e==="v"?yHe(t):vHe(t)},bHe=function(e,t){return e==="h"&&t==="rtl"?-1:1},_He=function(e,t,n,r,i){var s=bHe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,l=t.contains(a),u=!1,c=o>0,d=0,f=0;do{var h=Awe(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&Cwe(e,a)&&(d+=y,f+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(c&&(Math.abs(d)<1||!i)||!c&&(Math.abs(f)<1||!i))&&(u=!0),u},tN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ale=function(e){return[e.deltaX,e.deltaY]},lle=function(e){return e&&"current"in e?e.current:e},wHe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},EHe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},xHe=0,N_=[];function SHe(e){var t=A.useRef([]),n=A.useRef([0,0]),r=A.useRef(),i=A.useState(xHe++)[0],s=A.useState(Swe)[0],o=A.useRef(e);A.useEffect(function(){o.current=e},[e]),A.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=qVe([e.lockRef.current],(e.shards||[]).map(lle),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=A.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=tN(m),v=n.current,_="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,S=m.target,x=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in m&&x==="h"&&S.type==="range")return!1;var T=ole(x,S);if(!T)return!0;if(T?E=x:(E=x==="v"?"h":"v",T=ole(x,S)),!T)return!1;if(!r.current&&"changedTouches"in m&&(_||w)&&(r.current=E),!E)return!0;var I=r.current||E;return _He(I,g,m,I==="h"?_:w,!0)},[]),l=A.useCallback(function(m){var g=m;if(!(!N_.length||N_[N_.length-1]!==s)){var y="deltaY"in g?ale(g):tN(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&wHe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var _=(o.current.shards||[]).map(lle).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=_.length>0?a(g,_[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),u=A.useCallback(function(m,g,y,v){var _={name:m,delta:g,target:y,should:v,shadowParent:THe(y)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),c=A.useCallback(function(m){n.current=tN(m),r.current=void 0},[]),d=A.useCallback(function(m){u(m.type,ale(m),m.target,a(m,e.lockRef.current))},[]),f=A.useCallback(function(m){u(m.type,tN(m),m.target,a(m,e.lockRef.current))},[]);A.useEffect(function(){return N_.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,P_),document.addEventListener("touchmove",l,P_),document.addEventListener("touchstart",c,P_),function(){N_=N_.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,P_),document.removeEventListener("touchmove",l,P_),document.removeEventListener("touchstart",c,P_)}},[]);var h=e.removeScrollBar,p=e.inert;return A.createElement(A.Fragment,null,p?A.createElement(s,{styles:EHe(i)}):null,h?A.createElement(hHe,{gapMode:e.gapMode}):null)}function THe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const CHe=eHe(xwe,SHe);var lF=A.forwardRef(function(e,t){return A.createElement(aF,bh({},e,{ref:t,sideCar:CHe}))});lF.classNames=aF.classNames;function Yi(e){return Object.keys(e)}function $8(e){return e&&typeof e=="object"&&!Array.isArray(e)}function mY(e,t){const n={...e},r=t;return $8(e)&&$8(t)&&Object.keys(t).forEach(i=>{$8(r[i])&&i in e?n[i]=mY(n[i],r[i]):n[i]=r[i]}),n}function AHe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function IHe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function yU(e){const t=IHe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function L8(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function Iwe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?L8(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?L8(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?L8(s):s}}return r}return n}const Ce=Iwe("rem",{shouldScale:!0}),OM=Iwe("em");function rS(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function Rwe(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Gy(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==A.Fragment:!1}function io(e){const t=A.createContext(null);return[({children:i,value:s})=>b.jsx(t.Provider,{value:s,children:i}),()=>{const i=A.useContext(t);if(i===null)throw new Error(e);return i}]}function Hb(e=null){const t=A.createContext(e);return[({children:i,value:s})=>b.jsx(t.Provider,{value:s,children:i}),()=>A.useContext(t)]}function DM(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function MM(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function RHe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function kHe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function PHe(e,t,n){return MM(e,n)===MM(t,n)}function gY({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const l=Array.from(((p=MM(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>PHe(a.currentTarget,m,e)),u=l.findIndex(m=>a.currentTarget===m),c=kHe(u,l,r),d=RHe(u,l,r),f=s==="rtl"?d:c,h=s==="rtl"?c:d;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),i&&l[f].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),i&&l[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),i&&l[d].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[c].focus(),i&&l[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=l.length-1;!l[m].disabled&&l[m].focus();break}}}}const NHe={app:100,modal:200,popover:300,overlay:400,max:9999};function dd(e){return NHe[e]}const OHe=()=>{};function DHe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||OHe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Jt(e,t="size",n=!0){if(e!==void 0)return Rwe(e)?n?Ce(e):e:`var(--${t}-${e})`}function Qu(e){return Jt(e,"mantine-spacing")}function Mr(e){return e===void 0?"var(--mantine-radius-default)":Jt(e,"mantine-radius")}function Js(e){return Jt(e,"mantine-font-size")}function kwe(e){return Jt(e,"mantine-line-height",!1)}function yY(e){if(e)return Jt(e,"mantine-shadow",!1)}function ju(e,t){return n=>{e==null||e(n),t==null||t(n)}}function vY(e,t){return e in t.breakpoints?yU(t.breakpoints[e]):yU(e)}function $M(e,t){const n=e.map(r=>({value:r,px:vY(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function RC(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function MHe(e,t,n){var r;return n?Array.from(((r=MM(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function $He(){const[e,t]=A.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Lc(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function D2(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function l0(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function uF(e,t){const n=l0(e),r=A.useRef(0);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),A.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const ule=["mousedown","touchstart"];function LHe(e,t,n){const r=A.useRef();return A.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(u=>!!u&&!s.composedPath().includes(u))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||ule).forEach(s=>document.addEventListener(s,i)),()=>{(t||ule).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function FHe({timeout:e=2e3}={}){const[t,n]=A.useState(null),[r,i]=A.useState(!1),[s,o]=A.useState(null),a=c=>{window.clearTimeout(s),o(window.setTimeout(()=>i(!1),e)),i(c)};return{copy:c=>{"clipboard"in navigator?navigator.clipboard.writeText(c).then(()=>a(!0)).catch(d=>n(d)):n(new Error("useClipboard: navigator.clipboard is not supported"))},reset:()=>{i(!1),n(null),window.clearTimeout(s)},error:t,copied:r}}function jHe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function BHe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function HA(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=A.useState(n?t:BHe(e)),s=A.useRef();return A.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),jHe(s.current,o=>i(o.matches))},[e]),r}function zHe(e,t){return HA("(prefers-color-scheme: dark)",e==="dark",t)?"dark":"light"}function Pwe(e,t,n={leading:!1}){const[r,i]=A.useState(e),s=A.useRef(!1),o=A.useRef(null),a=A.useRef(!1),l=()=>window.clearTimeout(o.current);return A.useEffect(()=>{s.current&&(!a.current&&n.leading?(a.current=!0,i(e)):(l(),o.current=window.setTimeout(()=>{a.current=!1,i(e)},t)))},[e,n.leading,t]),A.useEffect(()=>(s.current=!0,l),[]),[r,l]}const qb=typeof document<"u"?A.useLayoutEffect:A.useEffect;function Ju(e,t){const n=A.useRef(!1);A.useEffect(()=>()=>{n.current=!1},[]),A.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function Nwe({opened:e,shouldReturnFocus:t=!0}){const n=A.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Ju(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function UHe(e,t="body > :not(script)"){const n=D2(),r=Array.from(document.querySelectorAll(t)).map(i=>{var l;if((l=i==null?void 0:i.shadowRoot)!=null&&l.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const VHe=/input|select|textarea|button|object/,Owe="a, input, select, textarea, button, object, [tabindex]";function HHe(e){return e.style.display==="none"}function qHe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(HHe(n))return!1;n=n.parentNode}return!0}function Dwe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function vU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(Dwe(e));return(VHe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&qHe(e)}function Mwe(e){const t=Dwe(e);return(Number.isNaN(t)||t>=0)&&vU(e)}function WHe(e){return Array.from(e.querySelectorAll(Owe)).filter(Mwe)}function GHe(e,t){const n=WHe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const l=n[t.shiftKey?n.length-1:0];l&&l.focus()}function YHe(e=!0){const t=A.useRef(),n=A.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(Owe));o=a.find(Mwe)||a.find(vU)||null,!o&&vU(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=A.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=UHe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return A.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&GHe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const KHe=us.useId||(()=>{});function XHe(){const e=KHe();return e?`mantine-${e.replace(/:/g,"")}`:""}function ta(e){const t=XHe(),[n,r]=A.useState(t);return qb(()=>{r(D2())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function $we(e,t,n){A.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function bY(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Lwe(...e){return t=>{e.forEach(n=>bY(n,t))}}function ps(...e){return A.useCallback(Lwe(...e),e)}function Fwe(e){return{x:Lc(e.x,0,1),y:Lc(e.y,0,1)}}function cF(e,t,n="ltr"){const r=A.useRef(null),i=A.useRef(!1),s=A.useRef(!1),o=A.useRef(0),[a,l]=A.useState(!1);return A.useEffect(()=>{i.current=!0},[]),A.useEffect(()=>{var v,_;const u=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const S=r.current.getBoundingClientRect();if(S.width&&S.height){const x=Lc((w-S.left)/S.width,0,1);e({x:n==="ltr"?x:1-x,y:Lc((E-S.top)/S.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},d=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},f=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),l(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,l(!1),d(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{f(),w.preventDefault(),m(w)},m=w=>u({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),f(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),u({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(_=r.current)==null||_.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Xi({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=A.useState(t!==void 0?t:n),o=(a,...l)=>{s(a),r==null||r(a,...l)};return e!==void 0?[e,r,!0]:[i,o,!1]}function Dg(e,t){const n=t-e+1;return Array.from({length:n},(r,i)=>i+e)}const nN="dots";function QHe({total:e,siblings:t=1,boundaries:n=1,page:r,initialPage:i=1,onChange:s}){const o=Math.max(Math.trunc(e),0),[a,l]=Xi({value:r,onChange:s,defaultValue:i,finalValue:i}),u=m=>{m<=0?l(1):m>o?l(o):l(m)},c=()=>u(a+1),d=()=>u(a-1),f=()=>u(1),h=()=>u(o);return{range:A.useMemo(()=>{if(t*2+3+n*2>=o)return Dg(1,o);const g=Math.max(a-t,n),y=Math.min(a+t,o-n),v=g>n+2,_=y<o-(n+1);if(!v&&_){const w=t*2+n+2;return[...Dg(1,w),nN,...Dg(o-(n-1),o)]}if(v&&!_){const w=n+1+2*t;return[...Dg(1,n),nN,...Dg(o-w,o)]}return[...Dg(1,n),nN,...Dg(g,y),nN,...Dg(o-n+1,o)]},[o,t,a]),active:a,setPage:u,next:c,previous:d,first:f,last:h}}function _Y(e,t){return HA("(prefers-reduced-motion: reduce)",e,t)}const JHe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function of(e){const t=A.useRef(0),n=A.useRef(null),[r,i]=A.useState(JHe),s=A.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return A.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function ZHe(e){const[t,{width:n,height:r}]=of(e);return{ref:t,width:n,height:r}}function eqe(){const[e,t]=A.useState(!1),n=A.useRef(null),r=A.useCallback(()=>t(!0),[]),i=A.useCallback(()=>t(!1),[]);return A.useEffect(()=>{if(n.current)return n.current.addEventListener("mouseenter",r),n.current.addEventListener("mouseleave",i),()=>{var s,o;(s=n.current)==null||s.removeEventListener("mouseenter",r),(o=n.current)==null||o.removeEventListener("mouseleave",i)}},[]),{ref:n,hovered:e}}function M2(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=A.useState(e),o=A.useCallback(()=>{s(u=>u||(n==null||n(),!0))},[n]),a=A.useCallback(()=>{s(u=>u&&(r==null||r(),!1))},[r]),l=A.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:l}]}function tqe(e,t,n={autoInvoke:!1}){const r=A.useRef(null),i=A.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=A.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return A.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function nqe(e){const t=A.useRef();return A.useEffect(()=>{t.current=e},[e]),t.current}function rqe(e,t,n){const r=A.useRef(),i=A.useRef(null);return A.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function iqe(){const[e,t]=A.useState(!1);return A.useEffect(()=>t(!0),[]),e}function sqe(e,t){const n=l0(e),r=A.useRef(),i=A.useRef(),s=A.useRef(!0),o=A.useRef(t),a=A.useRef(-1),l=()=>window.clearTimeout(a.current),u=A.useCallback((...f)=>{n(...f),r.current=f,i.current=f,s.current=!1},[n]),c=A.useCallback(()=>{r.current&&r.current!==i.current?(u(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[u]),d=A.useCallback((...f)=>{s.current?(u(...f),a.current=window.setTimeout(c,o.current)):r.current=f},[u,c]);return A.useEffect(()=>{o.current=t},[t]),[d,l]}function oqe(e,t){const[n,r]=A.useState(e),[i,s]=sqe(r,t);return A.useEffect(()=>s,[]),[n,i]}function aqe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function lqe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});qb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>aqe(`${e}:${String(r)}`,i[0])}return[t,n]}var uqe={};function jwe(){return typeof process<"u"&&uqe?"production":"development"}function Bwe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Bwe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function yt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Bwe(e))&&(r&&(r+=" "),r+=t);return r}const cqe={};function dqe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=yt(t[r],i):t[r]=i})}),t}function dF({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||cqe);return dqe(s)}function LM({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const wY=A.createContext(null);function Yy(){const e=A.useContext(wY);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function fqe(){return Yy().cssVariablesResolver}function hqe(){return Yy().classNamesPrefix}function fF(){return Yy().getStyleNonce}function pqe(){return Yy().withStaticClasses}function mqe(){return Yy().headless}function gqe(){var e;return(e=Yy().stylesTransform)==null?void 0:e.sx}function yqe(){var e;return(e=Yy().stylesTransform)==null?void 0:e.styles}function vqe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function bqe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function _qe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function wqe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,l=r/60,u=a*(1-Math.abs(l%2-1)),c=s-a/2;let d,f,h;return l>=0&&l<1?(d=a,f=u,h=0):l>=1&&l<2?(d=u,f=a,h=0):l>=2&&l<3?(d=0,f=a,h=u):l>=3&&l<4?(d=0,f=u,h=a):l>=4&&l<5?(d=u,f=0,h=a):(d=a,f=0,h=u),{r:Math.round((d+c)*255),g:Math.round((f+c)*255),b:Math.round((h+c)*255),a:o||1}}function hF(e){return vqe(e)?bqe(e):e.startsWith("rgb")?_qe(e):e.startsWith("hsl")?wqe(e):{r:0,g:0,b:0,a:1}}function kC(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=hF(e),o=1-t,a=l=>Math.round(l*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function qA(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function F8(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function Eqe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function xqe(e){if(e.startsWith("oklch("))return(Eqe(e)||0)/100;const{r:t,g:n,b:r}=hF(e),i=t/255,s=n/255,o=r/255,a=F8(i),l=F8(s),u=F8(o);return .2126*a+.7152*l+.0722*u}function RT(e,t=.179){return e.startsWith("var(")?!1:xqe(e)>t}function Of({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:RT(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:RT(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:RT(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][qA(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:RT(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:RT(e,t.luminanceThreshold),shade:s,variable:void 0}}function Yr(e,t){const n=Of({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function bU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Yr(n.from,t),i=Yr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function ah(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=hF(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const O_=ah,Sqe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Of({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ce(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Ce(1)} solid transparent`}:{background:e,hover:kC(e,.1),color:a,border:`${Ce(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ce(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:ah(a,.1),hover:ah(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ce(1)} solid transparent`}}return{background:ah(e,.1),hover:ah(e,.12),color:e,border:`${Ce(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ce(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:ah(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ce(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:ah(e,.05),color:e,border:`${Ce(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ce(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:ah(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ce(1)} solid transparent`}}return{background:"transparent",hover:ah(e,.12),color:e,border:`${Ce(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ce(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ce(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ce(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:kC(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ce(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:kC(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ce(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:kC(t.white,.01),color:e,border:`${Ce(1)} solid transparent`}:n==="gradient"?{background:bU(r,t),hover:bU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ce(1)} solid var(--mantine-color-default-border)`}:{}},Tqe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},cle="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",EY={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:Tqe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:Sqe,autoContrast:!1,luminanceThreshold:.3,fontFamily:cle,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:cle,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ce(34),lineHeight:"1.3"},h2:{fontSize:Ce(26),lineHeight:"1.35"},h3:{fontSize:Ce(22),lineHeight:"1.4"},h4:{fontSize:Ce(18),lineHeight:"1.45"},h5:{fontSize:Ce(16),lineHeight:"1.5"},h6:{fontSize:Ce(14),lineHeight:"1.5"}}},fontSizes:{xs:Ce(12),sm:Ce(14),md:Ce(16),lg:Ce(18),xl:Ce(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ce(2),sm:Ce(4),md:Ce(8),lg:Ce(16),xl:Ce(32)},spacing:{xs:Ce(10),sm:Ce(12),md:Ce(16),lg:Ce(20),xl:Ce(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ce(1)} ${Ce(3)} rgba(0, 0, 0, 0.05), 0 ${Ce(1)} ${Ce(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ce(1)} ${Ce(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ce(10)} ${Ce(15)} ${Ce(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ce(7)} ${Ce(7)} ${Ce(-5)}`,md:`0 ${Ce(1)} ${Ce(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ce(20)} ${Ce(25)} ${Ce(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ce(10)} ${Ce(10)} ${Ce(-5)}`,lg:`0 ${Ce(1)} ${Ce(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ce(28)} ${Ce(23)} ${Ce(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ce(12)} ${Ce(12)} ${Ce(-7)}`,xl:`0 ${Ce(1)} ${Ce(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ce(36)} ${Ce(28)} ${Ce(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ce(17)} ${Ce(17)} ${Ce(-7)}`},other:{},components:{}};function dle(e){return e==="auto"||e==="dark"||e==="light"}function Cqe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return dle(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&dle(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const Aqe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",fle="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function j8(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function hle(e){if(!(e.primaryColor in e.colors))throw new Error(Aqe);if(typeof e.primaryShade=="object"&&(!j8(e.primaryShade.dark)||!j8(e.primaryShade.light)))throw new Error(fle);if(typeof e.primaryShade=="number"&&!j8(e.primaryShade))throw new Error(fle)}function Iqe(e,t){var r;if(!t)return hle(e),e;const n=mY(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),hle(n),n}const xY=A.createContext(null),Rqe=()=>A.useContext(xY)||EY;function Is(){const e=A.useContext(xY);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function zwe({theme:e,children:t,inherit:n=!0}){const r=Rqe(),i=A.useMemo(()=>Iqe(n?r:EY,e),[e,r,n]);return b.jsx(xY.Provider,{value:i,children:t})}zwe.displayName="@mantine/core/MantineThemeProvider";function kqe(){const e=Is(),t=fF(),n=Yi(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=yU(e.breakpoints[i]),a=s?`${o-.1}px`:OM(o-.1),l=s?`${o}px`:OM(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return b.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function B8(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function kT(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function Pqe(e,t){const n=B8(e.variables),r=n?kT(t,n):"",i=B8(e.dark),s=B8(e.light),o=i?kT(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=s?kT(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function mp({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Of({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function ple(e,t){return mp({color:e.colors[e.primaryColor][qA(e,t)],theme:e,autoContrast:null})}function rN({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=qA(e,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:O_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:O_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:O_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...l}:l}const s=qA(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:O_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:O_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:O_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function Nqe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function D_(e,t,n){Yi(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const Uwe=e=>{const t=qA(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ce(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":ple(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":ple(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};D_(r.variables,e.breakpoints,"breakpoint"),D_(r.variables,e.spacing,"spacing"),D_(r.variables,e.fontSizes,"font-size"),D_(r.variables,e.lineHeights,"line-height"),D_(r.variables,e.shadows,"shadow"),D_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Yi(e.colors).forEach(s=>{const o=e.colors[s];if(Nqe(o)){Object.assign(r.light,rN({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,rN({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,l)=>{r.variables[`--mantine-color-${s}-${l}`]=a}),Object.assign(r.light,rN({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,rN({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Yi(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function Oqe({theme:e,generator:t}){const n=Uwe(e),r=t==null?void 0:t(e);return r?mY(n,r):n}const z8=Uwe(EY);function Dqe(e){const t={variables:{},light:{},dark:{}};return Yi(e.variables).forEach(n=>{z8.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Yi(e.light).forEach(n=>{z8.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Yi(e.dark).forEach(n=>{z8.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function Mqe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function Vwe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Is(),r=fF(),i=fqe(),s=Oqe({theme:n,generator:i}),o=e===":root"&&t,a=o?Dqe(s):s,l=Pqe(a,e);return l?b.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${l}${o?"":Mqe(e)}`}}):null}Vwe.displayName="@mantine/CssVariables";function $qe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function M_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function Lqe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=A.useRef(),[s,o]=A.useState(()=>e.get(t)),a=r||s,l=A.useCallback(c=>{r||(M_(c,n),o(c),e.set(c))},[e.set,a,r]),u=A.useCallback(()=>{o(t),M_(t,n),e.clear()},[e.clear,t]);return A.useEffect(()=>(e.subscribe(l),e.unsubscribe),[e.subscribe,e.unsubscribe]),qb(()=>{M_(e.get(t),n)},[]),A.useEffect(()=>{var d;if(r)return M_(r,n),()=>{};r===void 0&&M_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=f=>{s==="auto"&&M_(f.matches?"dark":"light",n)};return(d=i.current)==null||d.addEventListener("change",c),()=>{var f;return(f=i.current)==null?void 0:f.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:u}}function Fqe({respectReducedMotion:e,getRootElement:t}){qb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}$qe();function Hwe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:u=Cqe(),defaultColorScheme:c="light",getRootElement:d=()=>document.documentElement,cssVariablesResolver:f,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=Lqe({defaultColorScheme:c,forceColorScheme:h,manager:u,getRootElement:d});return Fqe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:d}),b.jsx(wY.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:d,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:f,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:b.jsxs(zwe,{theme:e,children:[o&&b.jsx(Vwe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&b.jsx(kqe,{}),t]})})}Hwe.displayName="@mantine/core/MantineProvider";function gp({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Is();return{resolvedClassNames:dF({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:LM({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const jqe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function Bqe({theme:e,options:t,unstyled:n}){return yt((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||jqe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function zqe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return dF({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function mle({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return dF({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function Uqe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function Vqe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function Hqe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function qqe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=dF({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function Wqe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function Gqe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:l,rootSelector:u,props:c,stylesCtx:d,withStaticClasses:f,headless:h,transformedStyles:p}){return yt(Bqe({theme:e,options:t,unstyled:a||h}),qqe({theme:e,themeName:n,selector:r,props:c,stylesCtx:d}),Wqe({options:t,classes:o,selector:r,unstyled:a}),mle({selector:r,stylesCtx:d,theme:e,classNames:s,props:c}),mle({selector:r,stylesCtx:d,theme:e,classNames:p,props:c}),zqe({selector:r,stylesCtx:d,options:t,props:c,theme:e}),Uqe({rootSelector:u,selector:r,className:l}),Vqe({selector:r,classes:o,unstyled:a||h}),f&&!h&&Hqe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function Yqe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return LM({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function _U({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,..._U({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function Kqe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...rS(n[r])}}),t),{})}function Xqe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var l;return(l=Kqe([a?{}:t==null?void 0:t(n,r,i),...o.map(u=>{var c,d,f;return(f=(d=(c=n.components)==null?void 0:c[u])==null?void 0:d.vars)==null?void 0:f.call(d,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:l[s]}function Qqe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:l,vars:u,varsResolver:c,headless:d,withStylesTransform:f}){return{...!f&&Yqe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!f&&LM({theme:e,styles:a,props:i,stylesCtx:s})[n],...!f&&LM({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...Xqe({theme:e,props:i,stylesCtx:s,vars:u,varsResolver:c,selector:n,themeName:t,headless:d}),...o===n?_U({style:l,theme:e}):null,..._U({style:r==null?void 0:r.style,theme:e})}}function Jqe({props:e,stylesCtx:t,themeName:n}){var o;const r=Is(),i=(o=yqe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(u=>i(u,{props:e,theme:r,ctx:t})),...n.map(u=>{var c;return i((c=r.components[u])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function vt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:l,styles:u,vars:c,varsResolver:d}){const f=Is(),h=hqe(),p=pqe(),m=mqe(),g=(Array.isArray(e)?e:[e]).filter(_=>_),{withStylesTransform:y,getTransformedStyles:v}=Jqe({props:n,stylesCtx:r,themeName:g});return(_,w)=>({className:Gqe({theme:f,options:w,themeName:g,selector:_,classNamesPrefix:h,classNames:l,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,u])}),style:Qqe({theme:f,themeName:g,selector:_,options:w,props:n,stylesCtx:r,rootSelector:o,styles:u,style:s,vars:c,varsResolver:d,headless:m,withStylesTransform:y})})}function Zqe(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, white ${t*100}%)`;const{r:n,g:r,b:i,a:s}=hF(e),o=a=>Math.round(a+(255-a)*t);return`rgba(${o(n)}, ${o(r)}, ${o(i)}, ${s})`}function Ky(e,t){return typeof e=="boolean"?e:t.autoContrast}function gle(e){const t=document.createElement("style");return t.setAttribute("data-mantine-styles","inline"),t.innerHTML="*, *::before, *::after {transition: none !important;}",t.setAttribute("data-mantine-disable-transition","true"),e&&t.setAttribute("nonce",e),document.head.appendChild(t),()=>document.querySelectorAll("[data-mantine-disable-transition]").forEach(r=>r.remove())}function eWe({keepTransitions:e}={}){const t=A.useRef(),n=A.useRef(),r=A.useContext(wY),i=fF(),s=A.useRef(i==null?void 0:i());if(!r)throw new Error("[@mantine/core] MantineProvider was not found in tree");const o=d=>{r.setColorScheme(d),t.current=e?()=>{}:gle(s.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{var f;(f=t.current)==null||f.call(t)},10)},a=()=>{r.clearColorScheme(),t.current=e?()=>{}:gle(s.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{var d;(d=t.current)==null||d.call(t)},10)},l=zHe("light",{getInitialValueInEffect:!1}),u=r.colorScheme==="auto"?l:r.colorScheme,c=A.useCallback(()=>o(u==="light"?"dark":"light"),[o,u]);return A.useEffect(()=>()=>{var d;(d=t.current)==null||d.call(t),window.clearTimeout(n.current)},[]),{colorScheme:r.colorScheme,setColorScheme:o,clearColorScheme:a,toggleColorScheme:c}}function xe(e,t,n){var o;const r=Is(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...rS(n)}}function U8(e){return Yi(e).reduce((t,n)=>e[n]!==void 0?`${t}${AHe(n)}:${e[n]};`:t,"").trim()}function tWe({selector:e,styles:t,media:n,container:r}){const i=t?U8(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${U8(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${U8(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function RR(e){const t=fF();return b.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:tWe(e)}})}function Wb(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:l,ms:u,p:c,px:d,py:f,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:_,bg:w,c:E,opacity:S,ff:x,fz:T,fw:I,lts:P,ta:k,lh:D,fs:R,tt:M,td:$,w:L,miw:B,maw:U,h:z,mih:N,mah:V,bgsz:W,bgp:F,bgr:H,bga:G,pos:Q,top:ie,left:se,bottom:ne,right:ce,inset:Ee,display:de,flex:We,hiddenFrom:Fe,visibleFrom:Ne,lightHidden:je,darkHidden:ye,sx:ae,...Pe}=e;return{styleProps:rS({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:l,ms:u,p:c,px:d,py:f,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:_,bg:w,c:E,opacity:S,ff:x,fz:T,fw:I,lts:P,ta:k,lh:D,fs:R,tt:M,td:$,w:L,miw:B,maw:U,h:z,mih:N,mah:V,bgsz:W,bgp:F,bgr:H,bga:G,pos:Q,top:ie,left:se,bottom:ne,right:ce,inset:Ee,display:de,flex:We,hiddenFrom:Fe,visibleFrom:Ne,lightHidden:je,darkHidden:ye,sx:ae}),rest:Pe}}const nWe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function SY(e,t){const n=Of({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function rWe(e,t){const n=Of({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:SY(e,t)}function iWe(e,t){if(typeof e=="number")return Ce(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Ce(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${SY(i.join(" "),t)}`),s.trim()}return e}const yle={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function sWe(e){return typeof e=="string"&&e in yle?yle[e]:e}const oWe=["h1","h2","h3","h4","h5","h6"];function aWe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&oWe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ce(e):e}function lWe(e){return e}const uWe=["h1","h2","h3","h4","h5","h6"];function cWe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&uWe.includes(e)?`var(--mantine-${e}-line-height)`:e}function dWe(e){return typeof e=="number"?Ce(e):e}function fWe(e,t){if(typeof e=="number")return Ce(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ce(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const V8={color:SY,textColor:rWe,fontSize:aWe,spacing:fWe,identity:lWe,size:dWe,lineHeight:cWe,fontFamily:sWe,border:iWe};function vle(e){return e.replace("(min-width: ","").replace("em)","")}function hWe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(vle(i))-Number(vle(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function pWe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function mWe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function gWe(e){return typeof e=="object"&&e!==null?Yi(e).filter(t=>t!=="base"):[]}function yWe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function qwe({styleProps:e,data:t,theme:n}){return hWe(Yi(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=mWe(e[i]);if(!pWe(e[i]))return o.forEach(u=>{r.inlineStyles[u]=V8[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=gWe(e[i]);return o.forEach(u=>{a&&(r.styles[u]=V8[s.type](a,n)),l.forEach(c=>{const d=`(min-width: ${n.breakpoints[c]})`;r.media[d]={...r.media[d],[u]:V8[s.type](yWe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function pF(){return`__m__-${A.useId().replace(/:/g,"")}`}function TY(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...TY(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Wwe(e){return e.startsWith("data-")?e:`data-${e}`}function vWe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[Wwe(n)]=e[n]),t},{})}function Gwe(e){return e?typeof e=="string"?{[Wwe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...Gwe(n)}),{}):vWe(e):null}function wU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...wU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function bWe({theme:e,style:t,vars:n,styleProps:r}){const i=wU(t,e),s=wU(n,e);return{...i,...s,...r}}const Ywe=A.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:l,lightHidden:u,darkHidden:c,renderRoot:d,__size:f,...h},p)=>{var T;const m=Is(),g=e||"div",{styleProps:y,rest:v}=Wb(h),_=gqe(),w=(T=_==null?void 0:_())==null?void 0:T(y.sx),E=pF(),S=qwe({styleProps:y,theme:m,data:nWe}),x={ref:p,style:bWe({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:yt(r,w,{[E]:S.hasResponsiveStyles,"mantine-light-hidden":u,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":i,"data-size":Rwe(o)?void 0:o||void 0,size:f,...Gwe(s),...v};return b.jsxs(b.Fragment,{children:[S.hasResponsiveStyles&&b.jsx(RR,{selector:`.${E}`,styles:S.styles,media:S.media}),typeof d=="function"?d(x):b.jsx(g,{...x})]})});Ywe.displayName="@mantine/core/Box";const _e=Ywe;function Kwe(e){return e}function Le(e){const t=A.forwardRef(e);return t.extend=Kwe,t.withProps=n=>{const r=A.forwardRef((i,s)=>b.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function Ls(e){const t=A.forwardRef(e);return t.withProps=n=>{const r=A.forwardRef((i,s)=>b.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=Kwe,t}const _We=A.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function El(){return A.useContext(_We)}function wWe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function H8(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const PT=typeof window<"u"&&window.requestAnimationFrame;function EWe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=A.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,l]=A.useState(r?{}:o),u=p=>{nS.flushSync(()=>l(p))},c=p=>{u(m=>({...m,...p}))};function d(p){const m=e||wWe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}Ju(()=>{typeof PT=="function"&&PT(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),PT(()=>{const p=H8(i);c({...d(p),height:p})})}:()=>{const p=H8(i);c({...d(p),willChange:"height",height:p}),PT(()=>c({height:s,overflow:"hidden"}))})},[r]);const f=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=H8(i);m===a.height?u({}):c({height:m}),n()}else a.height===s&&(u(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:Lwe(i,y),onTransitionEnd:f,style:{boxSizing:"border-box",...p,...a}}}return h}const xWe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},Gb=Le((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:l,...u}=xe("Collapse",xWe,e),c=Is(),d=_Y(),h=(c.respectReducedMotion?d:!1)?0:i,p=EWe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?b.jsx(_e,{...u,children:n}):null:b.jsx(_e,{...p({style:{opacity:r||!l?1:0,transition:l?`opacity ${h}ms ${s}`:"none",...TY(o,c)},ref:t,...u}),children:n})});Gb.displayName="@mantine/core/Collapse";const[SWe,fd]=io("ScrollArea.Root component was not found in tree");function BE(e,t){const n=l0(t);qb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const TWe=A.forwardRef((e,t)=>{const{style:n,...r}=e,i=fd(),[s,o]=A.useState(0),[a,l]=A.useState(0),u=!!(s&&a);return BE(i.scrollbarX,()=>{var d;const c=((d=i.scrollbarX)==null?void 0:d.offsetHeight)||0;i.onCornerHeightChange(c),l(c)}),BE(i.scrollbarY,()=>{var d;const c=((d=i.scrollbarY)==null?void 0:d.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),u?b.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),CWe=A.forwardRef((e,t)=>{const n=fd(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?b.jsx(TWe,{...e,ref:t}):null}),AWe={scrollHideDelay:1e3,type:"hover"},Xwe=A.forwardRef((e,t)=>{const n=xe("ScrollAreaRoot",AWe,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,l]=A.useState(null),[u,c]=A.useState(null),[d,f]=A.useState(null),[h,p]=A.useState(null),[m,g]=A.useState(null),[y,v]=A.useState(0),[_,w]=A.useState(0),[E,S]=A.useState(!1),[x,T]=A.useState(!1),I=ps(t,P=>l(P));return b.jsx(SWe,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:u,onViewportChange:c,content:d,onContentChange:f,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:x,onScrollbarYEnabledChange:T,onCornerWidthChange:v,onCornerHeightChange:w},children:b.jsx(_e,{...o,ref:I,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${_}px`}})})});Xwe.displayName="@mantine/core/ScrollAreaRoot";function Qwe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function mF(e){const t=Qwe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Jwe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function IWe(e,[t,n]){return Math.min(n,Math.max(t,e))}function ble(e,t,n="ltr"){const r=mF(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,l=n==="ltr"?[0,o]:[o*-1,0],u=IWe(e,l);return Jwe([0,o],[0,a])(u)}function RWe(e,t,n,r="ltr"){const i=mF(n),s=i/2,o=t||s,a=i-o,l=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,d=r==="ltr"?[0,c]:[c*-1,0];return Jwe([l,u],d)(e)}function Zwe(e,t){return e>0&&e<t}function FM(e){return e?parseInt(e,10):0}function j1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[kWe,eEe]=io("ScrollAreaScrollbar was not found in tree"),tEe=A.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:l,onWheelScroll:u,onResize:c,...d}=e,f=fd(),[h,p]=A.useState(null),m=ps(t,T=>p(T)),g=A.useRef(null),y=A.useRef(""),{viewport:v}=f,_=n.content-n.viewport,w=l0(u),E=l0(a),S=uF(c,10),x=T=>{if(g.current){const I=T.clientX-g.current.left,P=T.clientY-g.current.top;l({x:I,y:P})}};return A.useEffect(()=>{const T=I=>{const P=I.target;(h==null?void 0:h.contains(P))&&w(I,_)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[v,h,_,w]),A.useEffect(E,[n,E]),BE(h,S),BE(f.content,S),b.jsx(kWe,{value:{scrollbar:h,hasThumb:r,onThumbChange:l0(i),onThumbPointerUp:l0(s),onThumbPositionChange:E,onThumbPointerDown:l0(o)},children:b.jsx("div",{...d,ref:m,style:{position:"absolute",...d.style},onPointerDown:j1(e.onPointerDown,T=>{T.preventDefault(),T.button===0&&(T.target.setPointerCapture(T.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",document.body.style.pointerEvents="none",x(T))}),onPointerMove:j1(e.onPointerMove,x),onPointerUp:j1(e.onPointerUp,T=>{T.preventDefault();const I=T.target;I.hasPointerCapture(T.pointerId)&&I.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=y.current,document.body.style.pointerEvents="auto",g.current=null})})})}),PWe=A.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=fd(),[a,l]=A.useState(),u=A.useRef(null),c=ps(t,u,o.onScrollbarXChange);return A.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),b.jsx(tEe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${mF(n)}px`},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(o.viewport){const h=o.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),Zwe(h,f)&&d.preventDefault()}},onResize:()=>{u.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:FM(a.paddingLeft),paddingEnd:FM(a.paddingRight)}})}})}),NWe=A.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=fd(),[a,l]=A.useState(),u=A.useRef(null),c=ps(t,u,o.onScrollbarYChange);return A.useEffect(()=>{u.current&&l(window.getComputedStyle(u.current))},[]),b.jsx(tEe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${mF(n)}px`,...i},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(o.viewport){const h=o.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),Zwe(h,f)&&d.preventDefault()}},onResize:()=>{u.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:FM(a.paddingTop),paddingEnd:FM(a.paddingBottom)}})}})}),CY=A.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=El(),s=fd(),o=A.useRef(null),a=A.useRef(0),[l,u]=A.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Qwe(l.viewport,l.content),d={...r,sizes:l,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},f=(h,p)=>RWe(h,a.current,l,p);return n==="horizontal"?b.jsx(PWe,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=ble(h,l,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=f(h,i))}}):n==="vertical"?b.jsx(NWe,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=ble(h,l);l.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=f(h))}}):null}),nEe=A.forwardRef((e,t)=>{const n=fd(),{forceMount:r,...i}=e,[s,o]=A.useState(!1),a=e.orientation==="horizontal",l=uF(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?u:c)}},10);return BE(n.viewport,l),BE(n.content,l),r||s?b.jsx(CY,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),OWe=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=fd(),[s,o]=A.useState(!1);return A.useEffect(()=>{const{scrollArea:a}=i;let l=0;if(a){const u=()=>{window.clearTimeout(l),o(!0)},c=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?b.jsx(nEe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),DWe=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=fd(),s=e.orientation==="horizontal",[o,a]=A.useState("hidden"),l=uF(()=>a("idle"),100);return A.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,i.scrollHideDelay]),A.useEffect(()=>{const{viewport:u}=i,c=s?"scrollLeft":"scrollTop";if(u){let d=u[c];const f=()=>{const h=u[c];d!==h&&(a("scrolling"),l()),d=h};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[i.viewport,s,l]),n||o!=="hidden"?b.jsx(CY,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:j1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:j1(e.onPointerLeave,()=>a("idle"))}):null}),_le=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=fd(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return A.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?b.jsx(OWe,{...r,ref:t,forceMount:n}):i.type==="scroll"?b.jsx(DWe,{...r,ref:t,forceMount:n}):i.type==="auto"?b.jsx(nEe,{...r,ref:t,forceMount:n}):i.type==="always"?b.jsx(CY,{...r,ref:t}):null});function MWe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const $We=A.forwardRef((e,t)=>{const{style:n,...r}=e,i=fd(),s=eEe(),{onThumbPositionChange:o}=s,a=ps(t,c=>s.onThumbChange(c)),l=A.useRef(),u=uF(()=>{l.current&&(l.current(),l.current=void 0)},100);return A.useEffect(()=>{const{viewport:c}=i;if(c){const d=()=>{if(u(),!l.current){const f=MWe(c,o);l.current=f,o()}};return o(),c.addEventListener("scroll",d),()=>c.removeEventListener("scroll",d)}},[i.viewport,u,o]),b.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:j1(e.onPointerDownCapture,c=>{const f=c.target.getBoundingClientRect(),h=c.clientX-f.left,p=c.clientY-f.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:j1(e.onPointerUp,s.onThumbPointerUp)})}),wle=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=eEe();return n||i.hasThumb?b.jsx($We,{ref:t,...r}):null}),rEe=A.forwardRef(({children:e,style:t,...n},r)=>{const i=fd(),s=ps(r,i.onViewportChange);return b.jsx(_e,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:b.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});rEe.displayName="@mantine/core/ScrollAreaViewport";var AY={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const iEe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},LWe=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Ce(t)}}),Yb=Le((e,t)=>{const n=xe("ScrollArea",iEe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:l,vars:u,type:c,scrollHideDelay:d,viewportProps:f,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[_,w]=A.useState(!1),E=vt({name:"ScrollArea",props:n,classes:AY,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:LWe});return b.jsxs(Xwe,{type:c==="never"?"always":c,scrollHideDelay:d,ref:t,scrollbars:y,...E("root"),...v,children:[b.jsx(rEe,{...f,...E("viewport",{style:f==null?void 0:f.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:S=>{var x;(x=f==null?void 0:f.onScroll)==null||x.call(f,S),p==null||p({x:S.currentTarget.scrollLeft,y:S.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&b.jsx(_le,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:b.jsx(wle,{...E("thumb")})}),(y==="xy"||y==="y")&&b.jsx(_le,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:b.jsx(wle,{...E("thumb")})}),b.jsx(CWe,{...E("corner"),"data-hovered":_||void 0,"data-hidden":c==="never"||void 0})]})});Yb.displayName="@mantine/core/ScrollArea";const IY=Le((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:l,offsetScrollbars:u,viewportRef:c,onScrollPositionChange:d,unstyled:f,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=xe("ScrollAreaAutosize",iEe,e);return b.jsx(_e,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:b.jsx(_e,{style:{display:"flex",flexDirection:"column",flex:1},children:b.jsx(Yb,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:l,offsetScrollbars:u,viewportRef:c,onScrollPositionChange:d,unstyled:f,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});Yb.classes=AY;IY.displayName="@mantine/core/ScrollAreaAutosize";IY.classes=AY;Yb.Autosize=IY;var sEe={root:"m_87cf2631"};const FWe={__staticSelector:"UnstyledButton"},xs=Ls((e,t)=>{const n=xe("UnstyledButton",FWe,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:l,style:u,...c}=n,d=vt({name:s,props:n,classes:sEe,className:r,style:u,classNames:a,styles:l,unstyled:o});return b.jsx(_e,{...d("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});xs.classes=sEe;xs.displayName="@mantine/core/UnstyledButton";var oEe={root:"m_515a97f8"};const jWe={},RY=Le((e,t)=>{const n=xe("VisuallyHidden",jWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,...u}=n,c=vt({name:"VisuallyHidden",classes:oEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return b.jsx(_e,{component:"span",ref:t,...c("root"),...u})});RY.classes=oEe;RY.displayName="@mantine/core/VisuallyHidden";var aEe={root:"m_1b7284a3"};const BWe={},zWe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Mr(t),"--paper-shadow":yY(n)}}),kR=Ls((e,t)=>{const n=xe("Paper",BWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:l,vars:u,radius:c,shadow:d,variant:f,mod:h,...p}=n,m=vt({name:"Paper",props:n,classes:aEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zWe});return b.jsx(_e,{ref:t,mod:[{"data-with-border":l},h],...m("root"),variant:f,...p})});kR.classes=aEe;kR.displayName="@mantine/core/Paper";function iS(e){return lEe(e)?(e.nodeName||"").toLowerCase():"#document"}function tu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function dg(e){var t;return(t=(lEe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function lEe(e){return e instanceof Node||e instanceof tu(e).Node}function Fi(e){return e instanceof Element||e instanceof tu(e).Element}function Zu(e){return e instanceof HTMLElement||e instanceof tu(e).HTMLElement}function EU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof tu(e).ShadowRoot}function PR(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Zc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function UWe(e){return["table","td","th"].includes(iS(e))}function gF(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function kY(e){const t=PY(),n=Zc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function VWe(e){let t=Um(e);for(;Zu(t)&&!sy(t);){if(gF(t))return null;if(kY(t))return t;t=Um(t)}return null}function PY(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function sy(e){return["html","body","#document"].includes(iS(e))}function Zc(e){return tu(e).getComputedStyle(e)}function yF(e){return Fi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Um(e){if(iS(e)==="html")return e;const t=e.assignedSlot||e.parentNode||EU(e)&&e.host||dg(e);return EU(t)?t.host:t}function uEe(e){const t=Um(e);return sy(t)?e.ownerDocument?e.ownerDocument.body:e.body:Zu(t)&&PR(t)?t:uEe(t)}function xm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=uEe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=tu(i);return s?t.concat(o,o.visualViewport||[],PR(i)?i:[],o.frameElement&&n?xm(o.frameElement):[]):t.concat(i,xm(i,[],n))}function Ele(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function WA(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&EU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function cEe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function dEe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function HWe(e){return GWe()?!1:!xle()&&e.width===0&&e.height===0||xle()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function qWe(){return/apple/i.test(navigator.vendor)}function xle(){const e=/android/i;return e.test(cEe())||e.test(dEe())}function WWe(){return cEe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function GWe(){return dEe().includes("jsdom/")}function xU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function YWe(e){return"nativeEvent"in e}function KWe(e){return e.matches("html,body")}function C1(e){return(e==null?void 0:e.ownerDocument)||document}function q8(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function aw(e){return"composedPath"in e?e.composedPath()[0]:e.target}const XWe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function QWe(e){return Zu(e)&&e.matches(XWe)}const Bu=Math.min,Ta=Math.max,jM=Math.round,iN=Math.floor,oy=e=>({x:e,y:e}),JWe={left:"right",right:"left",bottom:"top",top:"bottom"},ZWe={start:"end",end:"start"};function SU(e,t,n){return Ta(e,Bu(t,n))}function Vm(e,t){return typeof e=="function"?e(t):e}function bf(e){return e.split("-")[0]}function sS(e){return e.split("-")[1]}function NY(e){return e==="x"?"y":"x"}function OY(e){return e==="y"?"height":"width"}function Hm(e){return["top","bottom"].includes(bf(e))?"y":"x"}function DY(e){return NY(Hm(e))}function eGe(e,t,n){n===void 0&&(n=!1);const r=sS(e),i=DY(e),s=OY(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=BM(o)),[o,BM(o)]}function tGe(e){const t=BM(e);return[TU(e),t,TU(t)]}function TU(e){return e.replace(/start|end/g,t=>ZWe[t])}function nGe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function rGe(e,t,n,r){const i=sS(e);let s=nGe(bf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(TU)))),s}function BM(e){return e.replace(/left|right|bottom|top/g,t=>JWe[t])}function iGe(e){return{top:0,right:0,bottom:0,left:0,...e}}function MY(e){return typeof e!="number"?iGe(e):{top:e,right:e,bottom:e,left:e}}function zE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Sle(e,t,n){let{reference:r,floating:i}=e;const s=Hm(t),o=DY(t),a=OY(o),l=bf(t),u=s==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(sS(t)){case"start":h[o]-=f*(n&&u?-1:1);break;case"end":h[o]+=f*(n&&u?-1:1);break}return h}const sGe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=Sle(u,r,l),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:_,data:w,reset:E}=await y({x:c,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:u,platform:o,elements:{reference:e,floating:t}});c=v??c,d=_??d,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(f=E.placement),E.rects&&(u=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:d}=Sle(u,f,l)),m=-1)}return{x:c,y:d,placement:f,strategy:i,middlewareData:h}};async function $Y(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Vm(t,e),p=MY(h),g=a[f?d==="floating"?"reference":"floating":d],y=zE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),v=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},E=zE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:_,strategy:l}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const oGe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:u,padding:c=0}=Vm(e,t)||{};if(u==null)return{};const d=MY(c),f={x:n,y:r},h=DY(i),p=OY(h),m=await o.getDimensions(u),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",_=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-f[h]-s.floating[p],E=f[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let x=S?S[_]:0;(!x||!await(o.isElement==null?void 0:o.isElement(S)))&&(x=a.floating[_]||s.floating[p]);const T=w/2-E/2,I=x/2-m[p]/2-1,P=Bu(d[y],I),k=Bu(d[v],I),D=P,R=x-m[p]-k,M=x/2-m[p]/2+T,$=SU(D,M,R),L=!l.arrow&&sS(i)!=null&&M!==$&&s.reference[p]/2-(M<D?P:k)-m[p]/2<0,B=L?M<D?M-D:M-R:0;return{[h]:f[h]+B,data:{[h]:$,centerOffset:M-$-B,...L&&{alignmentOffset:B}},reset:L}}}),aGe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Vm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=bf(i),v=Hm(a),_=bf(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(u.floating)),E=f||(_||!m?[BM(a)]:tGe(a)),S=p!=="none";!f&&S&&E.push(...rGe(a,m,p,w));const x=[a,...E],T=await $Y(t,g),I=[];let P=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&I.push(T[y]),d){const M=eGe(i,o,w);I.push(T[M[0]],T[M[1]])}if(P=[...P,{placement:i,overflows:I}],!I.every(M=>M<=0)){var k,D;const M=(((k=s.flip)==null?void 0:k.index)||0)+1,$=x[M];if($)return{data:{index:M,overflows:P},reset:{placement:$}};let L=(D=P.filter(B=>B.overflows[0]<=0).sort((B,U)=>B.overflows[1]-U.overflows[1])[0])==null?void 0:D.placement;if(!L)switch(h){case"bestFit":{var R;const B=(R=P.filter(U=>{if(S){const z=Hm(U.placement);return z===v||z==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(z=>z>0).reduce((z,N)=>z+N,0)]).sort((U,z)=>U[1]-z[1])[0])==null?void 0:R[0];B&&(L=B);break}case"initialPlacement":L=a;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function fEe(e){const t=Bu(...e.map(s=>s.left)),n=Bu(...e.map(s=>s.top)),r=Ta(...e.map(s=>s.right)),i=Ta(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function lGe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>zE(fEe(i)))}const uGe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:l,y:u}=Vm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),d=lGe(c),f=zE(fEe(c)),h=MY(a);function p(){if(d.length===2&&d[0].left>d[1].right&&l!=null&&u!=null)return d.find(g=>l>g.left-h.left&&l<g.right+h.right&&u>g.top-h.top&&u<g.bottom+h.bottom)||f;if(d.length>=2){if(Hm(n)==="y"){const P=d[0],k=d[d.length-1],D=bf(n)==="top",R=P.top,M=k.bottom,$=D?P.left:k.left,L=D?P.right:k.right,B=L-$,U=M-R;return{top:R,bottom:M,left:$,right:L,width:B,height:U,x:$,y:R}}const g=bf(n)==="left",y=Ta(...d.map(P=>P.right)),v=Bu(...d.map(P=>P.left)),_=d.filter(P=>g?P.left===v:P.right===y),w=_[0].top,E=_[_.length-1].bottom,S=v,x=y,T=x-S,I=E-w;return{top:w,bottom:E,left:S,right:x,width:T,height:I,x:S,y:w}}return f}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function cGe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=bf(n),a=sS(n),l=Hm(n)==="y",u=["left","top"].includes(o)?-1:1,c=s&&l?-1:1,d=Vm(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}const dGe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await cGe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},fGe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...l}=Vm(e,t),u={x:n,y:r},c=await $Y(t,l),d=Hm(bf(i)),f=NY(d);let h=u[f],p=u[d];if(s){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=h+c[g],_=h-c[y];h=SU(v,h,_)}if(o){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=p+c[g],_=p-c[y];p=SU(v,p,_)}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},hGe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Vm(e,t),c={x:n,y:r},d=Hm(i),f=NY(d);let h=c[f],p=c[d];const m=Vm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const _=f==="y"?"height":"width",w=s.reference[f]-s.floating[_]+g.mainAxis,E=s.reference[f]+s.reference[_]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(u){var y,v;const _=f==="y"?"width":"height",w=["top","left"].includes(bf(i)),E=s.reference[d]-s.floating[_]+(w&&((y=o.offset)==null?void 0:y[d])||0)+(w?0:g.crossAxis),S=s.reference[d]+s.reference[_]+(w?0:((v=o.offset)==null?void 0:v[d])||0)-(w?g.crossAxis:0);p<E?p=E:p>S&&(p=S)}return{[f]:h,[d]:p}}}},pGe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Vm(e,t),l=await $Y(t,a),u=bf(n),c=sS(n),d=Hm(n)==="y",{width:f,height:h}=r.floating;let p,m;u==="top"||u==="bottom"?(p=u,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=u,p=c==="end"?"top":"bottom");const g=h-l.top-l.bottom,y=f-l.left-l.right,v=Bu(h-l[p],g),_=Bu(f-l[m],y),w=!t.middlewareData.shift;let E=v,S=_;if(d?S=c||w?Bu(_,y):y:E=c||w?Bu(v,g):g,w&&!c){const T=Ta(l.left,0),I=Ta(l.right,0),P=Ta(l.top,0),k=Ta(l.bottom,0);d?S=f-2*(T!==0||I!==0?T+I:Ta(l.left,l.right)):E=h-2*(P!==0||k!==0?P+k:Ta(l.top,l.bottom))}await o({...t,availableWidth:S,availableHeight:E});const x=await i.getDimensions(s.floating);return f!==x.width||h!==x.height?{reset:{rects:!0}}:{}}}};function hEe(e){const t=Zc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Zu(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=jM(n)!==s||jM(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function LY(e){return Fi(e)?e:e.contextElement}function rE(e){const t=LY(e);if(!Zu(t))return oy(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=hEe(t);let o=(s?jM(n.width):n.width)/r,a=(s?jM(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const mGe=oy(0);function pEe(e){const t=tu(e);return!PY()||!t.visualViewport?mGe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function gGe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==tu(e)?!1:t}function ib(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=LY(e);let o=oy(1);t&&(r?Fi(r)&&(o=rE(r)):o=rE(e));const a=gGe(s,n,r)?pEe(s):oy(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const f=tu(s),h=r&&Fi(r)?tu(r):r;let p=f,m=p.frameElement;for(;m&&r&&h!==p;){const g=rE(m),y=m.getBoundingClientRect(),v=Zc(m),_=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,d*=g.y,l+=_,u+=w,p=tu(m),m=p.frameElement}}return zE({width:c,height:d,x:l,y:u})}function yGe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=dg(r),a=t?gF(t.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=oy(1);const c=oy(0),d=Zu(r);if((d||!d&&!s)&&((iS(r)!=="body"||PR(o))&&(l=yF(r)),Zu(r))){const f=ib(r);u=rE(r),c.x=f.x+r.clientLeft,c.y=f.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x,y:n.y*u.y-l.scrollTop*u.y+c.y}}function vGe(e){return Array.from(e.getClientRects())}function mEe(e){return ib(dg(e)).left+yF(e).scrollLeft}function bGe(e){const t=dg(e),n=yF(e),r=e.ownerDocument.body,i=Ta(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Ta(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+mEe(e);const a=-n.scrollTop;return Zc(r).direction==="rtl"&&(o+=Ta(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function _Ge(e,t){const n=tu(e),r=dg(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=PY();(!u||u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function wGe(e,t){const n=ib(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Zu(e)?rE(e):oy(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function Tle(e,t,n){let r;if(t==="viewport")r=_Ge(e,n);else if(t==="document")r=bGe(dg(e));else if(Fi(t))r=wGe(t,n);else{const i=pEe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return zE(r)}function gEe(e,t){const n=Um(e);return n===t||!Fi(n)||sy(n)?!1:Zc(n).position==="fixed"||gEe(n,t)}function EGe(e,t){const n=t.get(e);if(n)return n;let r=xm(e,[],!1).filter(a=>Fi(a)&&iS(a)!=="body"),i=null;const s=Zc(e).position==="fixed";let o=s?Um(e):e;for(;Fi(o)&&!sy(o);){const a=Zc(o),l=kY(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||PR(o)&&!l&&gEe(e,o))?r=r.filter(c=>c!==o):i=a,o=Um(o)}return t.set(e,r),r}function xGe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?gF(t)?[]:EGe(t,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,c)=>{const d=Tle(t,c,i);return u.top=Ta(d.top,u.top),u.right=Bu(d.right,u.right),u.bottom=Bu(d.bottom,u.bottom),u.left=Ta(d.left,u.left),u},Tle(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function SGe(e){const{width:t,height:n}=hEe(e);return{width:t,height:n}}function TGe(e,t,n){const r=Zu(t),i=dg(t),s=n==="fixed",o=ib(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=oy(0);if(r||!r&&!s)if((iS(t)!=="body"||PR(i))&&(a=yF(t)),r){const d=ib(t,!0,s,t);l.x=d.x+t.clientLeft,l.y=d.y+t.clientTop}else i&&(l.x=mEe(i));const u=o.left+a.scrollLeft-l.x,c=o.top+a.scrollTop-l.y;return{x:u,y:c,width:o.width,height:o.height}}function W8(e){return Zc(e).position==="static"}function Cle(e,t){return!Zu(e)||Zc(e).position==="fixed"?null:t?t(e):e.offsetParent}function yEe(e,t){const n=tu(e);if(gF(e))return n;if(!Zu(e)){let i=Um(e);for(;i&&!sy(i);){if(Fi(i)&&!W8(i))return i;i=Um(i)}return n}let r=Cle(e,t);for(;r&&UWe(r)&&W8(r);)r=Cle(r,t);return r&&sy(r)&&W8(r)&&!kY(r)?n:r||VWe(e)||n}const CGe=async function(e){const t=this.getOffsetParent||yEe,n=this.getDimensions,r=await n(e.floating);return{reference:TGe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function AGe(e){return Zc(e).direction==="rtl"}const IGe={convertOffsetParentRelativeRectToViewportRelativeRect:yGe,getDocumentElement:dg,getClippingRect:xGe,getOffsetParent:yEe,getElementRects:CGe,getClientRects:vGe,getDimensions:SGe,getScale:rE,isElement:Fi,isRTL:AGe};function RGe(e,t){let n=null,r;const i=dg(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:d,height:f}=e.getBoundingClientRect();if(a||t(),!d||!f)return;const h=iN(c),p=iN(i.clientWidth-(u+d)),m=iN(i.clientHeight-(c+f)),g=iN(u),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:Ta(0,Bu(1,l))||1};let _=!0;function w(E){const S=E[0].intersectionRatio;if(S!==l){if(!_)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function kGe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=LY(e),c=i||s?[...u?xm(u):[],...xm(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=u&&a?RGe(u,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),u&&!l&&h.observe(u),h.observe(t));let p,m=l?ib(e):null;l&&g();function g(){const y=ib(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d==null||d(),(y=h)==null||y.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const PGe=dGe,NGe=fGe,OGe=aGe,DGe=pGe,Ale=oGe,MGe=uGe,$Ge=hGe,LGe=(e,t,n)=>{const r=new Map,i={platform:IGe,...n},s={...i.platform,_c:r};return sGe(e,t,{...i,platform:s})};var JO=typeof document<"u"?A.useLayoutEffect:A.useEffect;function zM(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!zM(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!zM(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function vEe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ile(e,t){const n=vEe(e);return Math.round(t*n)/n}function Rle(e){const t=A.useRef(e);return JO(()=>{t.current=e}),t}function FGe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[c,d]=A.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=A.useState(r);zM(f,r)||h(r);const[p,m]=A.useState(null),[g,y]=A.useState(null),v=A.useCallback(B=>{B!==S.current&&(S.current=B,m(B))},[]),_=A.useCallback(B=>{B!==x.current&&(x.current=B,y(B))},[]),w=s||p,E=o||g,S=A.useRef(null),x=A.useRef(null),T=A.useRef(c),I=l!=null,P=Rle(l),k=Rle(i),D=A.useCallback(()=>{if(!S.current||!x.current)return;const B={placement:t,strategy:n,middleware:f};k.current&&(B.platform=k.current),LGe(S.current,x.current,B).then(U=>{const z={...U,isPositioned:!0};R.current&&!zM(T.current,z)&&(T.current=z,nS.flushSync(()=>{d(z)}))})},[f,t,n,k]);JO(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(B=>({...B,isPositioned:!1})))},[u]);const R=A.useRef(!1);JO(()=>(R.current=!0,()=>{R.current=!1}),[]),JO(()=>{if(w&&(S.current=w),E&&(x.current=E),w&&E){if(P.current)return P.current(w,E,D);D()}},[w,E,D,P,I]);const M=A.useMemo(()=>({reference:S,floating:x,setReference:v,setFloating:_}),[v,_]),$=A.useMemo(()=>({reference:w,floating:E}),[w,E]),L=A.useMemo(()=>{const B={position:n,left:0,top:0};if(!$.floating)return B;const U=Ile($.floating,c.x),z=Ile($.floating,c.y);return a?{...B,transform:"translate("+U+"px, "+z+"px)",...vEe($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:z}},[n,a,$.floating,c.x,c.y]);return A.useMemo(()=>({...c,update:D,refs:M,elements:$,floatingStyles:L}),[c,D,M,$,L])}const jGe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Ale({element:r.current,padding:i}).fn(n):{}:r?Ale({element:r,padding:i}).fn(n):{}}}},bEe=(e,t)=>({...PGe(e),options:[e,t]}),FY=(e,t)=>({...NGe(e),options:[e,t]}),kle=(e,t)=>({...$Ge(e),options:[e,t]}),CU=(e,t)=>({...OGe(e),options:[e,t]}),BGe=(e,t)=>({...DGe(e),options:[e,t]}),AU=(e,t)=>({...MGe(e),options:[e,t]}),_Ee=(e,t)=>({...jGe(e),options:[e,t]}),wEe={...lM},zGe=wEe.useInsertionEffect,UGe=zGe||(e=>e());function u0(e){const t=A.useRef(()=>{});return UGe(()=>{t.current=e}),A.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var jh=typeof document<"u"?A.useLayoutEffect:A.useEffect;let Ple=!1,VGe=0;const Nle=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+VGe++;function HGe(){const[e,t]=A.useState(()=>Ple?Nle():void 0);return jh(()=>{e==null&&t(Nle())},[]),A.useEffect(()=>{Ple=!0},[]),e}const qGe=wEe.useId,EEe=qGe||HGe;function WGe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const GGe=A.createContext(null),YGe=A.createContext(null),jY=()=>{var e;return((e=A.useContext(GGe))==null?void 0:e.id)||null},BY=()=>A.useContext(YGe);function zY(e){return"data-floating-ui-"+e}function G8(e){const t=A.useRef(e);return jh(()=>{t.current=e}),t}const Ole=zY("safe-polygon");function ZO(e,t,n){return n&&!xU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function KGe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=e,{enabled:a=!0,delay:l=0,handleClose:u=null,mouseOnly:c=!1,restMs:d=0,move:f=!0}=t,h=BY(),p=jY(),m=G8(u),g=G8(l),y=G8(n),v=A.useRef(),_=A.useRef(-1),w=A.useRef(),E=A.useRef(-1),S=A.useRef(!0),x=A.useRef(!1),T=A.useRef(()=>{}),I=A.useCallback(()=>{var $;const L=($=i.current.openEvent)==null?void 0:$.type;return(L==null?void 0:L.includes("mouse"))&&L!=="mousedown"},[i]);A.useEffect(()=>{if(!a)return;function $(L){let{open:B}=L;B||(clearTimeout(_.current),clearTimeout(E.current),S.current=!0)}return s.on("openchange",$),()=>{s.off("openchange",$)}},[a,s]),A.useEffect(()=>{if(!a||!m.current||!n)return;function $(B){I()&&r(!1,B,"hover")}const L=C1(o.floating).documentElement;return L.addEventListener("mouseleave",$),()=>{L.removeEventListener("mouseleave",$)}},[o.floating,n,r,a,m,I]);const P=A.useCallback(function($,L,B){L===void 0&&(L=!0),B===void 0&&(B="hover");const U=ZO(g.current,"close",v.current);U&&!w.current?(clearTimeout(_.current),_.current=window.setTimeout(()=>r(!1,$,B),U)):L&&(clearTimeout(_.current),r(!1,$,B))},[g,r]),k=u0(()=>{T.current(),w.current=void 0}),D=u0(()=>{if(x.current){const $=C1(o.floating).body;$.style.pointerEvents="",$.removeAttribute(Ole),x.current=!1}});A.useEffect(()=>{if(!a)return;function $(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function L(N){if(clearTimeout(_.current),S.current=!1,c&&!xU(v.current)||d>0&&!ZO(g.current,"open"))return;const V=ZO(g.current,"open",v.current);V?_.current=window.setTimeout(()=>{y.current||r(!0,N,"hover")},V):r(!0,N,"hover")}function B(N){if($())return;T.current();const V=C1(o.floating);if(clearTimeout(E.current),m.current&&i.current.floatingContext){n||clearTimeout(_.current),w.current=m.current({...i.current.floatingContext,tree:h,x:N.clientX,y:N.clientY,onClose(){D(),k(),P(N,!0,"safe-polygon")}});const F=w.current;V.addEventListener("mousemove",F),T.current=()=>{V.removeEventListener("mousemove",F)};return}(v.current==="touch"?!WA(o.floating,N.relatedTarget):!0)&&P(N)}function U(N){$()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:h,x:N.clientX,y:N.clientY,onClose(){D(),k(),P(N)}})(N))}if(Fi(o.domReference)){var z;const N=o.domReference;return n&&N.addEventListener("mouseleave",U),(z=o.floating)==null||z.addEventListener("mouseleave",U),f&&N.addEventListener("mousemove",L,{once:!0}),N.addEventListener("mouseenter",L),N.addEventListener("mouseleave",B),()=>{var V;n&&N.removeEventListener("mouseleave",U),(V=o.floating)==null||V.removeEventListener("mouseleave",U),f&&N.removeEventListener("mousemove",L),N.removeEventListener("mouseenter",L),N.removeEventListener("mouseleave",B)}}},[o,a,e,c,d,f,P,k,D,r,n,y,h,g,m,i]),jh(()=>{var $;if(a&&n&&($=m.current)!=null&&$.__options.blockPointerEvents&&I()){const B=C1(o.floating).body;B.setAttribute(Ole,""),B.style.pointerEvents="none",x.current=!0;const U=o.floating;if(Fi(o.domReference)&&U){var L;const z=o.domReference,N=h==null||(L=h.nodesRef.current.find(V=>V.id===p))==null||(L=L.context)==null?void 0:L.elements.floating;return N&&(N.style.pointerEvents=""),z.style.pointerEvents="auto",U.style.pointerEvents="auto",()=>{z.style.pointerEvents="",U.style.pointerEvents=""}}}},[a,n,p,o,h,m,I]),jh(()=>{n||(v.current=void 0,k(),D())},[n,k,D]),A.useEffect(()=>()=>{k(),clearTimeout(_.current),clearTimeout(E.current),D()},[a,o.domReference,k,D]);const R=A.useMemo(()=>{function $(L){v.current=L.pointerType}return{onPointerDown:$,onPointerEnter:$,onMouseMove(L){const{nativeEvent:B}=L;function U(){!S.current&&!y.current&&r(!0,B,"hover")}c&&!xU(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?U():E.current=window.setTimeout(U,d))}}},[c,r,n,y,d]),M=A.useMemo(()=>({onMouseEnter(){clearTimeout(_.current)},onMouseLeave($){P($.nativeEvent,!1)}}),[P]);return A.useMemo(()=>a?{reference:R,floating:M}:{},[a,R,M])}const IU=()=>{},xEe=A.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:IU,setState:IU,isInstantPhase:!1}),SEe=()=>A.useContext(xEe);function XGe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=A.useReducer((l,u)=>({...l,...u}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=A.useRef(null),a=A.useCallback(l=>{s({currentId:l})},[]);return jh(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),A.createElement(xEe.Provider,{value:A.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function QGe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=SEe(),{currentId:l,setCurrentId:u,initialDelay:c,setState:d,timeoutMs:f}=a;return jh(()=>{l&&(d({delay:{open:1,close:ZO(c,"close")}}),l!==o&&r(!1))},[o,r,d,l,c]),jh(()=>{function h(){r(!1),d({delay:c,currentId:null})}if(l&&!n&&l===o){if(f){const p=window.setTimeout(h,f);return()=>{clearTimeout(p)}}h()}},[n,d,l,o,r,c,f]),jh(()=>{u===IU||!n||u(o)},[n,u,o]),a}function Y8(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const JGe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},ZGe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Dle=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function eYe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:u="pointerdown",referencePress:c=!1,referencePressEvent:d="pointerdown",ancestorScroll:f=!1,bubbles:h,capture:p}=t,m=BY(),g=u0(typeof l=="function"?l:()=>!1),y=typeof l=="function"?g:l,v=A.useRef(!1),_=A.useRef(!1),{escapeKey:w,outsidePress:E}=Dle(h),{escapeKey:S,outsidePress:x}=Dle(p),T=u0(M=>{var $;if(!n||!o||!a||M.key!=="Escape")return;const L=($=s.current.floatingContext)==null?void 0:$.nodeId,B=m?Y8(m.nodesRef.current,L):[];if(!w&&(M.stopPropagation(),B.length>0)){let U=!0;if(B.forEach(z=>{var N;if((N=z.context)!=null&&N.open&&!z.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,YWe(M)?M.nativeEvent:M,"escape-key")}),I=u0(M=>{var $;const L=()=>{var B;T(M),(B=aw(M))==null||B.removeEventListener("keydown",L)};($=aw(M))==null||$.addEventListener("keydown",L)}),P=u0(M=>{var $;const L=v.current;v.current=!1;const B=_.current;if(_.current=!1,u==="click"&&B||L||typeof y=="function"&&!y(M))return;const U=aw(M),z="["+zY("inert")+"]",N=C1(i.floating).querySelectorAll(z);let V=Fi(U)?U:null;for(;V&&!sy(V);){const G=Um(V);if(sy(G)||!Fi(G))break;V=G}if(N.length&&Fi(U)&&!KWe(U)&&!WA(U,i.floating)&&Array.from(N).every(G=>!WA(V,G)))return;if(Zu(U)&&R){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,Q=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let ie=Q&&M.offsetX>U.clientWidth;if(Q&&Zc(U).direction==="rtl"&&(ie=M.offsetX<=U.offsetWidth-U.clientWidth),ie||G&&M.offsetY>U.clientHeight)return}const W=($=s.current.floatingContext)==null?void 0:$.nodeId,F=m&&Y8(m.nodesRef.current,W).some(G=>{var Q;return q8(M,(Q=G.context)==null?void 0:Q.elements.floating)});if(q8(M,i.floating)||q8(M,i.domReference)||F)return;const H=m?Y8(m.nodesRef.current,W):[];if(H.length>0){let G=!0;if(H.forEach(Q=>{var ie;if((ie=Q.context)!=null&&ie.open&&!Q.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,M,"outside-press")}),k=u0(M=>{var $;const L=()=>{var B;P(M),(B=aw(M))==null||B.removeEventListener(u,L)};($=aw(M))==null||$.addEventListener(u,L)});A.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=w,s.current.__outsidePressBubbles=E;function M(B){r(!1,B,"ancestor-scroll")}const $=C1(i.floating);a&&$.addEventListener("keydown",S?I:T,S),y&&$.addEventListener(u,x?k:P,x);let L=[];return f&&(Fi(i.domReference)&&(L=xm(i.domReference)),Fi(i.floating)&&(L=L.concat(xm(i.floating))),!Fi(i.reference)&&i.reference&&i.reference.contextElement&&(L=L.concat(xm(i.reference.contextElement)))),L=L.filter(B=>{var U;return B!==((U=$.defaultView)==null?void 0:U.visualViewport)}),L.forEach(B=>{B.addEventListener("scroll",M,{passive:!0})}),()=>{a&&$.removeEventListener("keydown",S?I:T,S),y&&$.removeEventListener(u,x?k:P,x),L.forEach(B=>{B.removeEventListener("scroll",M)})}},[s,i,a,y,u,n,r,f,o,w,E,T,S,I,P,x,k]),A.useEffect(()=>{v.current=!1},[y,u]);const D=A.useMemo(()=>({onKeyDown:T,[JGe[d]]:M=>{c&&r(!1,M.nativeEvent,"reference-press")}}),[T,r,c,d]),R=A.useMemo(()=>({onKeyDown:T,onMouseDown(){_.current=!0},onMouseUp(){_.current=!0},[ZGe[u]]:()=>{v.current=!0}}),[T,u]);return A.useMemo(()=>o?{reference:D,floating:R}:{},[o,D,R])}function tYe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=EEe(),s=A.useRef({}),[o]=A.useState(()=>WGe()),a=jY()!=null,[l,u]=A.useState(r.reference),c=u0((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),d=A.useMemo(()=>({setPositionReference:u}),[]),f=A.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return A.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:f,events:o,floatingId:i,refs:d}),[t,c,f,o,i,d])}function UY(e){e===void 0&&(e={});const{nodeId:t}=e,n=tYe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=A.useState(null),[a,l]=A.useState(null),c=(i==null?void 0:i.reference)||s,d=A.useRef(null),f=BY();jh(()=>{c&&(d.current=c)},[c]);const h=FGe({...e,elements:{...i,...a&&{reference:a}}}),p=A.useCallback(_=>{const w=Fi(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;l(w),h.refs.setReference(w)},[h.refs]),m=A.useCallback(_=>{(Fi(_)||_===null)&&(d.current=_,o(_)),(Fi(h.refs.reference.current)||h.refs.reference.current===null||_!==null&&!Fi(_))&&h.refs.setReference(_)},[h.refs]),g=A.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:d}),[h.refs,m,p]),y=A.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=A.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return jh(()=>{r.dataRef.current.floatingContext=v;const _=f==null?void 0:f.nodesRef.current.find(w=>w.id===t);_&&(_.context=v)}),A.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function nYe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=e,{enabled:a=!0,visibleOnly:l=!0}=t,u=A.useRef(!1),c=A.useRef(),d=A.useRef(!0);A.useEffect(()=>{if(!a)return;const h=tu(o.domReference);function p(){!n&&Zu(o.domReference)&&o.domReference===Ele(C1(o.domReference))&&(u.current=!0)}function m(){d.current=!0}return h.addEventListener("blur",p),h.addEventListener("keydown",m,!0),()=>{h.removeEventListener("blur",p),h.removeEventListener("keydown",m,!0)}},[o.domReference,n,a]),A.useEffect(()=>{if(!a)return;function h(p){let{reason:m}=p;(m==="reference-press"||m==="escape-key")&&(u.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),A.useEffect(()=>()=>{clearTimeout(c.current)},[]);const f=A.useMemo(()=>({onPointerDown(h){HWe(h.nativeEvent)||(d.current=!1)},onMouseLeave(){u.current=!1},onFocus(h){if(u.current)return;const p=aw(h.nativeEvent);if(l&&Fi(p))try{if(qWe()&&WWe())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!d.current&&!QWe(p))return}r(!0,h.nativeEvent,"focus")},onBlur(h){u.current=!1;const p=h.relatedTarget,m=h.nativeEvent,g=Fi(p)&&p.hasAttribute(zY("focus-guard"))&&p.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var y;const v=Ele(o.domReference?o.domReference.ownerDocument:document);!p&&v===o.domReference||WA((y=s.current.floatingContext)==null?void 0:y.refs.floating.current,v)||WA(o.domReference,v)||g||r(!1,m,"focus")})}}),[s,o.domReference,r,l]);return A.useMemo(()=>a?{reference:f}:{},[a,f])}const Mle="active",$le="selected";function K8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Mle]:o,[$le]:a,...l}=e;s=l}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[u,c]=l;if(!(i&&[Mle,$le].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof c=="function"){var d;(d=r.get(u))==null||d.push(c),o[u]=function(){for(var f,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(f=r.get(u))==null?void 0:f.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[u]=c}),o),{})}}function rYe(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=A.useCallback(a=>K8(a,e,"reference"),t),s=A.useCallback(a=>K8(a,e,"floating"),n),o=A.useCallback(a=>K8(a,e,"item"),r);return A.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const iYe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function sYe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=iYe.get(o))!=null?n:o,l=EEe(),c=jY()!=null,d=A.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,l,o]),f=A.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":l}}},[a,i,l,o]),h=A.useCallback(p=>{let{active:m,selected:g}=p;const y={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...y,"aria-selected":m&&g};case"combobox":return{...y,...m&&{"aria-selected":!0}}}return{}},[i,o]);return A.useMemo(()=>s?{reference:d,floating:f,item:h}:{},[s,d,f,h])}function TEe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Lle(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Fle(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const oYe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function aYe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[l,u="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[oYe[l]]:r},d=-t/2;return l==="left"?{...c,...Lle(u,o,n,i),right:d,borderLeftColor:"transparent",borderBottomColor:"transparent"}:l==="right"?{...c,...Lle(u,o,n,i),left:d,borderRightColor:"transparent",borderTopColor:"transparent"}:l==="top"?{...c,...Fle(u,s,n,i,a),bottom:d,borderTopColor:"transparent",borderLeftColor:"transparent"}:l==="bottom"?{...c,...Fle(u,s,n,i,a),top:d,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const VY=A.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:l,...u},c)=>{const{dir:d}=El();return s?b.jsx("div",{...u,ref:c,style:{...l,...aYe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:d,arrowX:o,arrowY:a})}}):null});VY.displayName="@mantine/core/FloatingArrow";const[lYe,CEe]=io("Popover component was not found in the tree");function vF({children:e,active:t=!0,refProp:n="ref"}){const r=YHe(t),i=ps(r,e==null?void 0:e.ref);return Gy(e)?A.cloneElement(e,{[n]:i}):e}function AEe(e){return b.jsx(RY,{tabIndex:-1,"data-autofocus":!0,...e})}vF.displayName="@mantine/core/FocusTrap";AEe.displayName="@mantine/core/FocusTrapInitialFocus";vF.InitialFocus=AEe;function uYe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const cYe={},IEe=A.forwardRef((e,t)=>{const{children:n,target:r,...i}=xe("Portal",cYe,e),[s,o]=A.useState(!1),a=A.useRef(null);return qb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:uYe(i),bY(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:nS.createPortal(b.jsx(b.Fragment,{children:n}),a.current)});IEe.displayName="@mantine/core/Portal";function NR({withinPortal:e=!0,children:t,...n}){return e?b.jsx(IEe,{...n,children:t}):b.jsx(b.Fragment,{children:t})}NR.displayName="@mantine/core/OptionalPortal";const NT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Ce(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),sN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ce(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ce(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ce(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ce(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ce(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ce(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ce(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ce(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...NT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...NT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...NT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...NT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...NT("top"),common:{transformOrigin:"top right"}}},jle={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function dYe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in sN?{transitionProperty:sN[e].transitionProperty,...i,...sN[e].common,...sN[e][jle[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[jle[t]]}}function fYe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:l,exitDelay:u}){const c=Is(),d=_Y(),f=c.respectReducedMotion?d:!1,[h,p]=A.useState(f?0:e),[m,g]=A.useState(r?"entered":"exited"),y=A.useRef(-1),v=A.useRef(-1),_=A.useRef(-1),w=S=>{const x=S?i:s,T=S?o:a;window.clearTimeout(y.current);const I=f?0:S?e:t;p(I),I===0?(typeof x=="function"&&x(),typeof T=="function"&&T(),g(S?"entered":"exited")):_.current=requestAnimationFrame(()=>{HVe.flushSync(()=>{g(S?"pre-entering":"pre-exiting")}),_.current=requestAnimationFrame(()=>{typeof x=="function"&&x(),g(S?"entering":"exiting"),y.current=window.setTimeout(()=>{typeof T=="function"&&T(),g(S?"entered":"exited")},I)})})},E=S=>{if(window.clearTimeout(v.current),typeof(S?l:u)!="number"){w(S);return}v.current=window.setTimeout(()=>{w(S)},S?l:u)};return Ju(()=>{E(r)},[r]),A.useEffect(()=>()=>{window.clearTimeout(y.current),cancelAnimationFrame(_.current)},[]),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:n||"ease"}}function Df({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:l,onEnter:u,onExited:c,enterDelay:d,exitDelay:f}){const{transitionDuration:h,transitionStatus:p,transitionTimingFunction:m}=fYe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:l,onEnter:u,onExited:c,enterDelay:d,exitDelay:f});return h===0?i?b.jsx(b.Fragment,{children:s({})}):e?s({display:"none"}):null:p==="exited"?e?s({display:"none"}):null:b.jsx(b.Fragment,{children:s(dYe({transition:t,duration:h,state:p,timingFunction:m}))})}Df.displayName="@mantine/core/Transition";var REe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const hYe={},HY=Le((e,t)=>{var g,y,v,_;const n=xe("PopoverDropdown",hYe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:l,classNames:u,styles:c,...d}=n,f=CEe(),h=Nwe({opened:f.opened,shouldReturnFocus:f.returnFocus}),p=f.withRoles?{"aria-labelledby":f.getTargetId(),id:f.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=ps(t,f.floating);return f.disabled?null:b.jsx(NR,{...f.portalProps,withinPortal:f.withinPortal,children:b.jsx(Df,{mounted:f.opened,...f.transitionProps,transition:((g=f.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=f.transitionProps)==null?void 0:y.duration)??150,keepMounted:f.keepMounted,exitDuration:typeof((v=f.transitionProps)==null?void 0:v.exitDuration)=="number"?f.transitionProps.exitDuration:(_=f.transitionProps)==null?void 0:_.duration,children:w=>b.jsx(vF,{active:f.trapFocus,children:b.jsxs(_e,{...p,...d,variant:l,ref:m,onKeyDownCapture:DHe(f.onClose,{active:f.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":f.placement,"data-fixed":f.floatingStrategy==="fixed"||void 0,...f.getStyles("dropdown",{className:r,props:n,classNames:u,styles:c,style:[{...w,zIndex:f.zIndex,top:f.y??0,left:f.x??0,width:f.width==="target"?void 0:Ce(f.width)},i]}),children:[o,b.jsx(VY,{ref:f.arrowRef,arrowX:f.arrowX,arrowY:f.arrowY,visible:f.withArrow,position:f.placement,arrowSize:f.arrowSize,arrowRadius:f.arrowRadius,arrowOffset:f.arrowOffset,arrowPosition:f.arrowPosition,...f.getStyles("arrow",{props:n,classNames:u,styles:c})})]})})})})});HY.classes=REe;HY.displayName="@mantine/core/PopoverDropdown";const pYe={refProp:"ref",popupType:"dialog"},kEe=Le((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=xe("PopoverTarget",pYe,e);if(!Gy(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=CEe(),l=ps(a.reference,n.ref,t),u=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return A.cloneElement(n,{...o,...u,...a.targetProps,className:yt(a.targetProps.className,o.className,n.props.className),[r]:l,...a.controlled?null:{onClick:a.onToggle}})});kEe.displayName="@mantine/core/PopoverTarget";function PEe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=A.useState(0);A.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return kGe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),Ju(()=>{t.update()},r),Ju(()=>{s(o=>o+1)},[e])}function mYe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function gYe(e,t){const n=mYe(e.middlewares),r=[bEe(e.offset)];return n.shift&&r.push(FY(typeof n.shift=="boolean"?{limiter:kle(),padding:5}:{limiter:kle(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?CU():CU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?AU():AU(n.inline)),r.push(_Ee({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(BGe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var u;const l=((u=t().refs.floating.current)==null?void 0:u.style)??{};n.size&&Object.assign(l,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(l,{width:`${i.reference.width}px`})}})),r}function yYe(e){const[t,n]=Xi({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=UY({strategy:e.strategy,placement:e.position,middleware:gYe(e,()=>s)});return PEe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),Ju(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),Ju(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const vYe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:dd("popover"),__staticSelector:"Popover",width:"max-content"},bYe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Mr(t),"--popover-shadow":yY(n)}});function $n(e){var ye,ae,Pe,Be,ft,Se;const t=xe("Popover",vYe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:l,width:u,middlewares:c,withArrow:d,arrowSize:f,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:_,withinPortal:w,portalProps:E,closeOnEscape:S,clickOutsideEvents:x,trapFocus:T,onClose:I,onOpen:P,onChange:k,zIndex:D,radius:R,shadow:M,id:$,defaultOpened:L,__staticSelector:B,withRoles:U,disabled:z,returnFocus:N,variant:V,keepMounted:W,vars:F,floatingStrategy:H,...G}=t,Q=vt({name:B,props:t,classes:REe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:F,varsResolver:bYe}),ie=A.useRef(null),[se,ne]=A.useState(null),[ce,Ee]=A.useState(null),{dir:de}=El(),We=ta($),Fe=yYe({middlewares:c,width:u,position:TEe(de,r),offset:typeof i=="number"?i+(d?f/2:0):i,arrowRef:ie,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:L,onChange:k,onOpen:P,onClose:I,strategy:H});LHe(()=>_&&Fe.onClose(),x,[se,ce]);const Ne=A.useCallback(he=>{ne(he),Fe.floating.refs.setReference(he)},[Fe.floating.refs.setReference]),je=A.useCallback(he=>{Ee(he),Fe.floating.refs.setFloating(he)},[Fe.floating.refs.setFloating]);return b.jsx(lYe,{value:{returnFocus:N,disabled:z,controlled:Fe.controlled,reference:Ne,floating:je,x:Fe.floating.x,y:Fe.floating.y,arrowX:(Pe=(ae=(ye=Fe.floating)==null?void 0:ye.middlewareData)==null?void 0:ae.arrow)==null?void 0:Pe.x,arrowY:(Se=(ft=(Be=Fe.floating)==null?void 0:Be.middlewareData)==null?void 0:ft.arrow)==null?void 0:Se.y,opened:Fe.opened,arrowRef:ie,transitionProps:l,width:u,withArrow:d,arrowSize:f,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Fe.floating.placement,trapFocus:T,withinPortal:w,portalProps:E,zIndex:D,radius:R,shadow:M,closeOnEscape:S,onClose:Fe.onClose,onToggle:Fe.onToggle,getTargetId:()=>`${We}-target`,getDropdownId:()=>`${We}-dropdown`,withRoles:U,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:V,keepMounted:W,getStyles:Q,floatingStrategy:H},children:n})}$n.Target=kEe;$n.Dropdown=HY;$n.displayName="@mantine/core/Popover";$n.extend=e=>e;var Xd={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const _Ye=A.forwardRef(({className:e,...t},n)=>b.jsxs(_e,{component:"span",className:yt(Xd.barsLoader,e),...t,ref:n,children:[b.jsx("span",{className:Xd.bar}),b.jsx("span",{className:Xd.bar}),b.jsx("span",{className:Xd.bar})]})),wYe=A.forwardRef(({className:e,...t},n)=>b.jsxs(_e,{component:"span",className:yt(Xd.dotsLoader,e),...t,ref:n,children:[b.jsx("span",{className:Xd.dot}),b.jsx("span",{className:Xd.dot}),b.jsx("span",{className:Xd.dot})]})),EYe=A.forwardRef(({className:e,...t},n)=>b.jsx(_e,{component:"span",className:yt(Xd.ovalLoader,e),...t,ref:n})),NEe={bars:_Ye,oval:EYe,dots:wYe},xYe={loaders:NEe,type:"oval"},SYe=(e,{size:t,color:n})=>({root:{"--loader-size":Jt(t,"loader-size"),"--loader-color":n?Yr(n,e):void 0}}),ws=Le((e,t)=>{const n=xe("Loader",xYe,e),{size:r,color:i,type:s,vars:o,className:a,style:l,classNames:u,styles:c,unstyled:d,loaders:f,variant:h,children:p,...m}=n,g=vt({name:"Loader",props:n,classes:Xd,className:a,style:l,classNames:u,styles:c,unstyled:d,vars:o,varsResolver:SYe});return p?b.jsx(_e,{...g("root"),ref:t,...m,children:p}):b.jsx(_e,{...g("root"),ref:t,component:f[s],variant:h,size:r,...m})});ws.defaultLoaders=NEe;ws.classes=Xd;ws.displayName="@mantine/core/Loader";var bF={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Ble={orientation:"horizontal"},TYe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Ce(t)}}),qY=Le((e,t)=>{const n=xe("ActionIconGroup",Ble,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:l,vars:u,borderWidth:c,variant:d,mod:f,...h}=xe("ActionIconGroup",Ble,e),p=vt({name:"ActionIconGroup",props:n,classes:bF,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:TYe,rootSelector:"group"});return b.jsx(_e,{...p("group"),ref:t,variant:d,mod:[{"data-orientation":l},f],role:"group",...h})});qY.classes=bF;qY.displayName="@mantine/core/ActionIconGroup";const CYe={},AYe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":Jt(t,"ai-size"),"--ai-radius":n===void 0?void 0:Mr(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Fn=Ls((e,t)=>{const n=xe("ActionIcon",CYe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:l,loading:u,loaderProps:c,size:d,color:f,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":_,autoContrast:w,mod:E,...S}=n,x=vt({name:["ActionIcon",p],props:n,className:r,style:l,classes:bF,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:AYe});return b.jsxs(xs,{...x("root",{active:!v&&!u&&!_}),...S,unstyled:i,variant:s,size:d,disabled:v||u,ref:t,mod:[{loading:u,disabled:v||_},E],children:[b.jsx(Df,{mounted:!!u,transition:"slide-down",duration:150,children:T=>b.jsx(_e,{component:"span",...x("loader",{style:T}),"aria-hidden":!0,children:b.jsx(ws,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),b.jsx(_e,{component:"span",mod:{loading:u},...x("icon"),children:y})]})});Fn.classes=bF;Fn.displayName="@mantine/core/ActionIcon";Fn.Group=qY;const OEe=A.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>b.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:b.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));OEe.displayName="@mantine/core/CloseIcon";var DEe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const IYe={variant:"subtle"},RYe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Jt(t,"cb-size"),"--cb-radius":n===void 0?void 0:Mr(n),"--cb-icon-size":Ce(r)}}),Xy=Ls((e,t)=>{const n=xe("CloseButton",IYe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:l,style:u,styles:c,unstyled:d,"data-disabled":f,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=vt({name:"CloseButton",props:n,className:a,style:u,classes:DEe,classNames:l,styles:c,unstyled:d,vars:s,varsResolver:RYe});return b.jsxs(xs,{ref:t,...y,unstyled:d,variant:p,disabled:h,mod:[{disabled:h||f},g],...v("root",{variant:p,active:!h&&!f}),children:[m||b.jsx(OEe,{}),i]})});Xy.classes=DEe;Xy.displayName="@mantine/core/CloseButton";function kYe(e){return A.Children.toArray(e).filter(Boolean)}var MEe={root:"m_4081bf90"};const PYe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},NYe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Qu(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Tn=Le((e,t)=>{const n=xe("Group",PYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:l,gap:u,align:c,justify:d,wrap:f,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,..._}=n,w=kYe(l),E=w.length,S=Qu(u??"md"),T={childWidth:`calc(${100/E}% - (${S} - ${S} / ${E}))`},I=vt({name:"Group",props:n,stylesCtx:T,className:i,style:s,classes:MEe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:NYe});return b.jsx(_e,{...I("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,..._,children:w})});Tn.classes=MEe;Tn.displayName="@mantine/core/Group";var $Ee={root:"m_9814e45f"};const OYe={zIndex:dd("modal")},DYe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&ah(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Ce(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Mr(s),"--overlay-z-index":o==null?void 0:o.toString()}}),GA=Ls((e,t)=>{const n=xe("Overlay",OYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,fixed:u,center:c,children:d,radius:f,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,..._}=n,w=vt({name:"Overlay",props:n,classes:$Ee,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:DYe});return b.jsx(_e,{ref:t,...w("root"),mod:[{center:c,fixed:u},v],..._,children:d})});GA.classes=$Ee;GA.displayName="@mantine/core/Overlay";const[MYe,fg]=io("ModalBase component was not found in tree");function $Ye({opened:e,transitionDuration:t}){const[n,r]=A.useState(e),i=A.useRef(),o=_Y()?0:t;return A.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function LYe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=ta(e),[l,u]=A.useState(!1),[c,d]=A.useState(!1),f=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=$Ye({opened:n,transitionDuration:f});return $we("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),Nwe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:l,bodyMounted:c,shouldLockScroll:h,setTitleMounted:u,setBodyMounted:d}}const LEe=A.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:l,withinPortal:u,portalProps:c,lockScroll:d,children:f,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,..._},w)=>{const{_id:E,titleMounted:S,bodyMounted:x,shouldLockScroll:T,setTitleMounted:I,setBodyMounted:P}=LYe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a}),{key:k,...D}=v||{};return b.jsx(NR,{...c,withinPortal:u,children:b.jsx(MYe,{value:{opened:t,onClose:n,closeOnClickOutside:l,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:S,bodyMounted:x,setTitleMounted:I,setBodyMounted:P,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:b.jsx(lF,{enabled:T&&d,...D,children:b.jsx(_e,{ref:w,..._,__vars:{...g,"--mb-z-index":(h||dd("modal")).toString(),"--mb-shadow":yY(p),"--mb-padding":Qu(m)},children:f})},k)})})});function FYe(){const e=fg();return A.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var UE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const WY=A.forwardRef(({className:e,...t},n)=>{const r=FYe(),i=fg();return b.jsx(_e,{ref:n,...t,id:r,className:yt({[UE.body]:!i.unstyled},e)})});WY.displayName="@mantine/core/ModalBaseBody";const GY=A.forwardRef(({className:e,onClick:t,...n},r)=>{const i=fg();return b.jsx(Xy,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:yt({[UE.close]:!i.unstyled},e),unstyled:i.unstyled})});GY.displayName="@mantine/core/ModalBaseCloseButton";const FEe=A.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=fg();return b.jsx(Df,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:l=>b.jsx("div",{...n,className:yt({[UE.inner]:!a.unstyled},n.className),children:b.jsx(vF,{active:a.opened&&a.trapFocus,children:b.jsx(kR,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,l],className:yt({[UE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),YY=A.forwardRef(({className:e,...t},n)=>{const r=fg();return b.jsx(_e,{component:"header",ref:n,className:yt({[UE.header]:!r.unstyled},e),...t})});YY.displayName="@mantine/core/ModalBaseHeader";const jYe={duration:200,timingFunction:"ease",transition:"fade"};function BYe(e){const t=fg();return{...jYe,...t.transitionProps,...e}}const KY=A.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=fg(),o=BYe(t);return b.jsx(Df,{mounted:s.opened,...o,transition:"fade",children:a=>b.jsx(GA,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:l=>{e==null||e(l),s.closeOnClickOutside&&s.onClose()},...r})})});KY.displayName="@mantine/core/ModalBaseOverlay";function zYe(){const e=fg();return A.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const XY=A.forwardRef(({className:e,...t},n)=>{const r=zYe(),i=fg();return b.jsx(_e,{component:"h2",ref:n,className:yt({[UE.title]:!i.unstyled},e),...t,id:r})});XY.displayName="@mantine/core/ModalBaseTitle";function jEe({children:e}){return b.jsx(b.Fragment,{children:e})}const[UYe,oS]=Hb({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var hd={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const zle={},VYe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Js(t)} - ${Ce(2)})`}}),_F=Le((e,t)=>{const n=xe("InputDescription",zle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,__staticSelector:c,__inheritStyles:d=!0,variant:f,...h}=xe("InputDescription",zle,n),p=oS(),m=vt({name:["InputWrapper",c],props:n,classes:hd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:l,varsResolver:VYe}),g=d&&(p==null?void 0:p.getStyles)||m;return b.jsx(_e,{component:"p",ref:t,variant:f,size:u,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});_F.classes=hd;_F.displayName="@mantine/core/InputDescription";const HYe={},qYe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Js(t)} - ${Ce(2)})`}}),wF=Le((e,t)=>{const n=xe("InputError",HYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,__staticSelector:c,__inheritStyles:d=!0,variant:f,...h}=n,p=vt({name:["InputWrapper",c],props:n,classes:hd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:l,varsResolver:qYe}),m=oS(),g=d&&(m==null?void 0:m.getStyles)||p;return b.jsx(_e,{component:"p",ref:t,variant:f,size:u,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});wF.classes=hd;wF.displayName="@mantine/core/InputError";const Ule={labelElement:"label"},WYe=(e,{size:t})=>({label:{"--input-label-size":Js(t),"--input-asterisk-color":void 0}}),EF=Le((e,t)=>{const n=xe("InputLabel",Ule,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,labelElement:u,size:c,required:d,htmlFor:f,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=xe("InputLabel",Ule,n),_=vt({name:["InputWrapper",m],props:n,classes:hd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:l,varsResolver:WYe}),w=oS(),E=(w==null?void 0:w.getStyles)||_;return b.jsxs(_e,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:u,variant:g,size:c,ref:t,htmlFor:u==="label"?f:void 0,mod:[{required:d},y],onMouseDown:S=>{h==null||h(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,d&&b.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});EF.classes=hd;EF.displayName="@mantine/core/InputLabel";const Vle={},QY=Le((e,t)=>{const n=xe("InputPlaceholder",Vle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,variant:c,error:d,mod:f,...h}=xe("InputPlaceholder",Vle,n),p=vt({name:["InputPlaceholder",u],props:n,classes:hd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return b.jsx(_e,{...p("placeholder"),mod:[{error:!!d},f],component:"span",variant:c,ref:t,...h})});QY.classes=hd;QY.displayName="@mantine/core/InputPlaceholder";function GYe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(l=>l==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const YYe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},KYe=(e,{size:t})=>({label:{"--input-label-size":Js(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Js(t)} - ${Ce(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Js(t)} - ${Ce(2)})`}}),JY=Le((e,t)=>{const n=xe("InputWrapper",YYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,variant:c,__staticSelector:d,inputContainer:f,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:_,labelElement:w,children:E,withAsterisk:S,id:x,required:T,__stylesApiProps:I,mod:P,...k}=n,D=vt({name:["InputWrapper",d],props:I||n,classes:hd,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:KYe}),R={size:u,variant:c,__staticSelector:d},M=ta(x),$=typeof S=="boolean"?S:T,L=(_==null?void 0:_.id)||`${M}-error`,B=(v==null?void 0:v.id)||`${M}-description`,U=M,z=!!m&&typeof m!="boolean",N=!!g,V=`${z?L:""} ${N?B:""}`,W=V.trim().length>0?V.trim():void 0,F=(y==null?void 0:y.id)||`${M}-label`,H=p&&b.jsx(EF,{labelElement:w,id:F,htmlFor:U,required:$,...R,...y,children:p},"label"),G=N&&b.jsx(_F,{...v,...R,size:(v==null?void 0:v.size)||R.size,id:(v==null?void 0:v.id)||B,children:g},"description"),Q=b.jsx(A.Fragment,{children:f(E)},"input"),ie=z&&A.createElement(wF,{..._,...R,size:(_==null?void 0:_.size)||R.size,key:"error",id:(_==null?void 0:_.id)||L},m),se=h.map(ne=>{switch(ne){case"label":return H;case"input":return Q;case"description":return G;case"error":return ie;default:return null}});return b.jsx(UYe,{value:{getStyles:D,describedBy:W,inputId:U,labelId:F,...GYe(h,{hasDescription:N,hasError:z})},children:b.jsx(_e,{ref:t,variant:c,size:u,mod:[{error:!!m},P],...D("root"),...k,children:se})})});JY.classes=hd;JY.displayName="@mantine/core/InputWrapper";const XYe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},QYe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Jt(t.size,"input-height"),"--input-fz":Js(t.size),"--input-radius":t.radius===void 0?void 0:Mr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ce(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ce(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Jt(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Kr=Ls((e,t)=>{const n=xe("Input",XYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:l,__staticSelector:u,__stylesApiProps:c,size:d,wrapperProps:f,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:_,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:S,variant:x,vars:T,pointer:I,multiline:P,radius:k,id:D,withAria:R,withErrorStyles:M,mod:$,inputSize:L,...B}=n,{styleProps:U,rest:z}=Wb(B),N=oS(),V={offsetBottom:N==null?void 0:N.offsetBottom,offsetTop:N==null?void 0:N.offsetTop},W=vt({name:["Input",u],props:c||n,classes:hd,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:V,rootSelector:"wrapper",vars:T,varsResolver:QYe}),F=R?{required:l,disabled:p,"aria-invalid":!!h,"aria-describedby":N==null?void 0:N.describedBy,id:(N==null?void 0:N.inputId)||D}:{};return b.jsxs(_e,{...W("wrapper"),...U,...f,mod:[{error:!!h&&M,pointer:I,disabled:p,multiline:P,"data-with-right-section":!!v,"data-with-left-section":!!m},$],variant:x,size:d,children:[m&&b.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),b.jsx(_e,{component:"input",...z,...F,ref:t,required:l,mod:{disabled:p,error:!!h&&M},variant:x,__size:L,...W("input")}),v&&b.jsx("div",{..._,"data-position":"right",...W("section",{className:_==null?void 0:_.className,style:_==null?void 0:_.style}),children:v})]})});Kr.classes=hd;Kr.Wrapper=JY;Kr.Label=EF;Kr.Error=wF;Kr.Description=_F;Kr.Placeholder=QY;Kr.displayName="@mantine/core/Input";function ZY(e,t,n){const r=xe(e,t,n),{label:i,description:s,error:o,required:a,classNames:l,styles:u,className:c,unstyled:d,__staticSelector:f,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:_,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:x,variant:T,vars:I,mod:P,...k}=r,{styleProps:D,rest:R}=Wb(k),M={label:i,description:s,error:o,required:a,classNames:l,className:c,__staticSelector:f,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:d,styles:u,size:_,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:x,variant:T,id:v,mod:P,...y};return{...R,classNames:l,styles:u,unstyled:d,wrapperProps:{...M,...D},inputProps:{required:a,classNames:l,styles:u,unstyled:d,size:_,__staticSelector:f,__stylesApiProps:h||r,error:o,variant:T,id:v}}}const JYe={__staticSelector:"InputBase",withAria:!0},_u=Ls((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=ZY("InputBase",JYe,e);return b.jsx(Kr.Wrapper,{...r,children:b.jsx(Kr,{...n,...i,ref:t})})});_u.classes={...Kr.classes,...Kr.Wrapper.classes};_u.displayName="@mantine/core/InputBase";const ZYe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var BEe={root:"m_8bffd616"};const eKe={},It=Ls((e,t)=>{const n=xe("Flex",eKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,gap:u,rowGap:c,columnGap:d,align:f,justify:h,wrap:p,direction:m,...g}=n,y=vt({name:"Flex",classes:BEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l}),v=Is(),_=pF(),w=qwe({styleProps:{gap:u,rowGap:c,columnGap:d,align:f,justify:h,wrap:p,direction:m},theme:v,data:ZYe});return b.jsxs(b.Fragment,{children:[w.hasResponsiveStyles&&b.jsx(RR,{selector:`.${_}`,styles:w.styles,media:w.media}),b.jsx(_e,{ref:t,...y("root",{className:_,style:rS(w.inlineStyles)}),...g})]})});It.classes=BEe;It.displayName="@mantine/core/Flex";function tKe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function nKe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=A.useRef(),[s,o]=A.useState(!1),[a,l]=A.useState(typeof r=="boolean"?r:!1),u=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),u(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},d=A.useRef(),f=A.useRef();return A.useEffect(()=>{if(u(),e)return d.current=new ResizeObserver(c),d.current.observe(e),t&&(f.current=new ResizeObserver(c),f.current.observe(t)),()=>{var h,p;(h=d.current)==null||h.disconnect(),(p=f.current)==null||p.disconnect()}},[t,e]),A.useEffect(()=>{if(t){const h=p=>{tKe(p.target,t)&&(c(),l(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),tqe(()=>{jwe()!=="test"&&o(!0)},20,{autoInvoke:!0}),rqe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var zEe={root:"m_96b553a6"};const rKe={},iKe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),eK=Le((e,t)=>{const n=xe("FloatingIndicator",rKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,target:u,parent:c,transitionDuration:d,mod:f,displayAfterTransitionEnd:h,...p}=n,m=vt({name:"FloatingIndicator",classes:zEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:iKe}),g=A.useRef(null),{initialized:y,hidden:v}=nKe({target:u,parent:c,ref:g,displayAfterTransitionEnd:h}),_=ps(t,g);return!u||!c?null:b.jsx(_e,{ref:_,mod:[{initialized:y,hidden:v},f],...m("root"),...p})});eK.displayName="@mantine/core/FloatingIndicator";eK.classes=zEe;const[sKe,tK]=io("Accordion component was not found in the tree");function YA({style:e,size:t=16,...n}){return b.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Ce(t),height:Ce(t),display:"block"},...n,children:b.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}YA.displayName="@mantine/core/AccordionChevron";const[oKe,UEe]=io("Accordion.Item component was not found in the tree");var OR={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const aKe={},nK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:l,onClick:u,onKeyDown:c,children:d,disabled:f,mod:h,...p}=xe("AccordionControl",aKe,e),{value:m}=UEe(),g=tK(),y=g.isItemActive(m),v=typeof g.order=="number",_=`h${g.order}`,w=b.jsxs(xs,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:f},h],ref:t,onClick:E=>{u==null||u(E),g.onChange(m)},type:"button",disabled:f,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:gY({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[b.jsx(_e,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),b.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:d}),l&&b.jsx(_e,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:l})]});return v?b.jsx(_,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});nK.displayName="@mantine/core/AccordionControl";nK.classes=OR;const lKe={},rK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:l,...u}=xe("AccordionItem",lKe,e),c=tK();return b.jsx(oKe,{value:{value:a},children:b.jsx(_e,{ref:t,mod:[{active:c.isItemActive(a)},l],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...u})})});rK.displayName="@mantine/core/AccordionItem";rK.classes=OR;const uKe={},iK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...l}=xe("AccordionPanel",uKe,e),{value:u}=UEe(),c=tK();return b.jsx(Gb,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...l,in:c.isItemActive(u),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(u),"aria-labelledby":c.getControlId(u),children:b.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});iK.displayName="@mantine/core/AccordionPanel";iK.classes=OR;const cKe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:b.jsx(YA,{})},dKe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Ce(n),"--accordion-radius":r===void 0?void 0:Mr(r)}});function Ll(e){const t=xe("Accordion",cKe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:l,multiple:u,value:c,defaultValue:d,onChange:f,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:_,chevron:w,variant:E,radius:S,...x}=t,T=ta(h),[I,P]=Xi({value:c,defaultValue:d,finalValue:u?[]:null,onChange:f}),k=M=>Array.isArray(I)?I.includes(M):M===I,D=M=>{const $=Array.isArray(I)?I.includes(M)?I.filter(L=>L!==M):[...I,M]:M===I?null:M;P($)},R=vt({name:"Accordion",classes:OR,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:dKe});return b.jsx(sKe,{value:{isItemActive:k,onChange:D,getControlId:DM(`${T}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:DM(`${T}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:_,chevron:w,loop:p,getStyles:R,variant:E,unstyled:o},children:b.jsx(_e,{...R("root"),id:T,...x,variant:E,"data-accordion":!0,children:l})})}const fKe=e=>e;Ll.extend=fKe;Ll.classes=OR;Ll.displayName="@mantine/core/Accordion";Ll.Item=rK;Ll.Panel=iK;Ll.Control=nK;Ll.Chevron=YA;var VEe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const hKe={},pKe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Mr(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},aS=Le((e,t)=>{const n=xe("Alert",hKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,radius:u,color:c,title:d,children:f,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:_,...w}=n,E=vt({name:"Alert",classes:VEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:pKe}),S=ta(h),x=d&&`${S}-title`||void 0,T=`${S}-body`;return b.jsx(_e,{id:S,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":T,"aria-labelledby":x,children:b.jsxs("div",{...E("wrapper"),children:[p&&b.jsx("div",{...E("icon"),children:p}),b.jsxs("div",{...E("body"),children:[d&&b.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:b.jsx("span",{id:x,...E("label"),children:d})}),f&&b.jsx("div",{id:T,...E("message"),"data-variant":v,children:f})]}),m&&b.jsx(Xy,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});aS.classes=VEe;aS.displayName="@mantine/core/Alert";var HEe={root:"m_b6d8b162"};function mKe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const gKe={inherit:!1},yKe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":Js(i),"--text-lh":kwe(i),"--text-gradient":t==="gradient"?bU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Yr(s,e):void 0}}),nt=Ls((e,t)=>{const n=xe("Text",gKe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:l,__staticSelector:u,vars:c,className:d,style:f,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,..._}=n,w=vt({name:["Text",u],props:n,classes:HEe,className:d,style:f,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:yKe});return b.jsx(_e,{...w("root",{focusable:!0}),ref:t,component:l?"span":"p",variant:g,mod:[{"data-truncate":mKe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,..._})});nt.classes=HEe;nt.displayName="@mantine/core/Text";var qEe={root:"m_849cf0da"};const vKe={underline:"hover"},Qy=Ls((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=xe("Anchor",vKe,e);return b.jsx(nt,{component:"a",ref:t,className:yt({[qEe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Qy.classes=qEe;Qy.displayName="@mantine/core/Anchor";const[bKe,lS]=io("AppShell was not found in tree");var Jy={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const _Ke={},sK=Le((e,t)=>{const n=xe("AppShellAside",_Ke,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=lS();return h.disabled?null:b.jsx(_e,{component:"aside",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});sK.classes=Jy;sK.displayName="@mantine/core/AppShellAside";const wKe={},oK=Le((e,t)=>{var p;const n=xe("AppShellFooter",wKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=lS();return h.disabled?null:b.jsx(_e,{component:"footer",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("footer",{className:yt({[lF.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});oK.classes=Jy;oK.displayName="@mantine/core/AppShellFooter";const EKe={},aK=Le((e,t)=>{var p;const n=xe("AppShellHeader",EKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=lS();return h.disabled?null:b.jsx(_e,{component:"header",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("header",{className:yt({[lF.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});aK.classes=Jy;aK.displayName="@mantine/core/AppShellHeader";const xKe={},lK=Le((e,t)=>{const n=xe("AppShellMain",xKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=lS();return b.jsx(_e,{component:"main",ref:t,...u.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...l})});lK.classes=Jy;lK.displayName="@mantine/core/AppShellMain";function DR(e){return typeof e=="object"?e.base:e}function MR(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function $R(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function SKe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var l,u,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((l=r==null?void 0:r.collapsed)!=null&&l.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),MR(s)){const d=Ce(DR(s));e["--app-shell-aside-width"]=d,e["--app-shell-aside-offset"]=d}if($R(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Ce(s.base),e["--app-shell-aside-offset"]=Ce(s.base)),Yi(s).forEach(d=>{d!=="base"&&(t[d]=t[d]||{},t[d]["--app-shell-aside-width"]=Ce(s[d]),t[d]["--app-shell-aside-offset"]=Ce(s[d]))})),(u=r==null?void 0:r.collapsed)!=null&&u.desktop){const d=r.breakpoint;t[d]=t[d]||{},t[d]["--app-shell-aside-transform"]=o,t[d]["--app-shell-aside-transform-rtl"]=a,t[d]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const d=vY(r.breakpoint,i)-.1;n[d]=n[d]||{},n[d]["--app-shell-aside-width"]="100%",n[d]["--app-shell-aside-offset"]="0px",n[d]["--app-shell-aside-transform"]=o,n[d]["--app-shell-aside-transform-rtl"]=a}}function TKe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(MR(r)){const o=Ce(DR(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}$R(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Ce(r.base),s&&(e["--app-shell-footer-offset"]=Ce(r.base))),Yi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Ce(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Ce(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function CKe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(MR(r)){const o=Ce(DR(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}$R(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Ce(r.base),s&&(e["--app-shell-header-offset"]=Ce(r.base))),Yi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Ce(r[o]),s&&(t[o]["--app-shell-header-offset"]=Ce(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function AKe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var l,u,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((l=r==null?void 0:r.collapsed)!=null&&l.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),MR(s)){const d=Ce(DR(s));e["--app-shell-navbar-width"]=d,e["--app-shell-navbar-offset"]=d}if($R(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Ce(s.base),e["--app-shell-navbar-offset"]=Ce(s.base)),Yi(s).forEach(d=>{d!=="base"&&(t[d]=t[d]||{},t[d]["--app-shell-navbar-width"]=Ce(s[d]),t[d]["--app-shell-navbar-offset"]=Ce(s[d]))})),(u=r==null?void 0:r.collapsed)!=null&&u.desktop){const d=r.breakpoint;t[d]=t[d]||{},t[d]["--app-shell-navbar-transform"]=o,t[d]["--app-shell-navbar-transform-rtl"]=a,t[d]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const d=vY(r.breakpoint,i)-.1;n[d]=n[d]||{},n[d]["--app-shell-navbar-width"]="100%",n[d]["--app-shell-navbar-offset"]="0px",n[d]["--app-shell-navbar-transform"]=o,n[d]["--app-shell-navbar-transform-rtl"]=a}}function X8(e){return Number(e)===0?"0px":Qu(e)}function IKe({padding:e,baseStyles:t,minMediaStyles:n}){MR(e)&&(t["--app-shell-padding"]=X8(DR(e))),$R(e)&&(e.base&&(t["--app-shell-padding"]=X8(e.base)),Yi(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=X8(e[r]))}))}function RKe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},l={};AKe({baseStyles:l,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),SKe({baseStyles:l,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),CKe({baseStyles:l,minMediaStyles:o,header:t}),TKe({baseStyles:l,minMediaStyles:o,footer:n}),IKe({baseStyles:l,minMediaStyles:o,padding:i});const u=$M(Yi(o),s).map(f=>({query:`(min-width: ${OM(f.px)})`,styles:o[f.value]})),c=$M(Yi(a),s).map(f=>({query:`(max-width: ${OM(f.px)})`,styles:a[f.value]})),d=[...u,...c];return{baseStyles:l,media:d}}function kKe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Is(),o=Yy(),{media:a,baseStyles:l}=RKe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return b.jsx(RR,{media:a,styles:l,selector:o.cssVariablesSelector})}const PKe={},uK=Le((e,t)=>{const n=xe("AppShellNavbar",PKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=lS();return h.disabled?null:b.jsx(_e,{component:"nav",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});uK.classes=Jy;uK.displayName="@mantine/core/AppShellNavbar";const NKe={},cK=Ls((e,t)=>{const n=xe("AppShellSection",NKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:l,mod:u,...c}=n,d=lS();return b.jsx(_e,{ref:t,mod:[{grow:l},u],...d.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});cK.classes=Jy;cK.displayName="@mantine/core/AppShellSection";function OKe({transitionDuration:e,disabled:t}){const[n,r]=A.useState(!0),i=A.useRef(),s=A.useRef();return $we("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),qb(()=>{A.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const DKe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:dd("app")},MKe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Hr=Le((e,t)=>{const n=xe("AppShell",DKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,navbar:u,withBorder:c,padding:d,transitionDuration:f,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:_,offsetScrollbars:w,mod:E,...S}=n,x=vt({name:"AppShell",classes:Jy,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:MKe}),T=OKe({disabled:y,transitionDuration:f});return b.jsxs(bKe,{value:{getStyles:x,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[b.jsx(kKe,{navbar:u,header:p,aside:v,footer:_,padding:d}),b.jsx(_e,{ref:t,...x("root"),mod:[{resizing:T,layout:g,disabled:y},E],...S})]})});Hr.classes=Jy;Hr.displayName="@mantine/core/AppShell";Hr.Navbar=uK;Hr.Header=aK;Hr.Main=lK;Hr.Aside=sK;Hr.Footer=oK;Hr.Section=cK;function WEe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>WEe(t))}:e}function dK(e){return e?e.map(t=>WEe(t)):[]}function xF(e){return e.reduce((t,n)=>"group"in n?{...t,...xF(n.items)}:(t[n.value]=n,t),{})}var lu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const $Ke={error:null},LKe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Jt(t,"combobox-chevron-size")}}),fK=Le((e,t)=>{const n=xe("ComboboxChevron",$Ke,e),{size:r,error:i,style:s,className:o,classNames:a,styles:l,unstyled:u,vars:c,mod:d,...f}=n,h=vt({name:"ComboboxChevron",classes:lu,props:n,style:s,className:o,classNames:a,styles:l,unstyled:u,vars:c,varsResolver:LKe,rootSelector:"chevron"});return b.jsx(_e,{component:"svg",...f,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},d],ref:t,children:b.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});fK.classes=lu;fK.displayName="@mantine/core/ComboboxChevron";const[FKe,pd]=io("Combobox component was not found in tree"),GEe=A.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>b.jsx(Xy,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));GEe.displayName="@mantine/core/ComboboxClearButton";const jKe={},hK=Le((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=xe("ComboboxDropdown",jKe,e),l=pd();return b.jsx($n.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...l.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});hK.classes=lu;hK.displayName="@mantine/core/ComboboxDropdown";const BKe={refProp:"ref"},YEe=Le((e,t)=>{const{children:n,refProp:r}=xe("ComboboxDropdownTarget",BKe,e);if(pd(),!Gy(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return b.jsx($n.Target,{ref:t,refProp:r,children:n})});YEe.displayName="@mantine/core/ComboboxDropdownTarget";const zKe={},pK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxEmpty",zKe,e),l=pd();return b.jsx(_e,{ref:t,...l.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});pK.classes=lu;pK.displayName="@mantine/core/ComboboxEmpty";function mK({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=pd(),[a,l]=A.useState(null),u=d=>{if(e==null||e(d),!o.readOnly&&t){if(d.nativeEvent.isComposing)return;if(d.nativeEvent.code==="ArrowDown"&&(d.preventDefault(),o.store.dropdownOpened?l(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()))),d.nativeEvent.code==="ArrowUp"&&(d.preventDefault(),o.store.dropdownOpened?l(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()))),d.nativeEvent.code==="Enter"||d.nativeEvent.code==="NumpadEnter"){if(d.nativeEvent.keyCode===229)return;const f=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&f!==-1?(d.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(d.preventDefault(),o.store.openDropdown("keyboard"))}d.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),d.nativeEvent.code==="Space"&&i==="button"&&(d.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:u}}const UKe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},KEe=Le((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...u}=xe("ComboboxEventsTarget",UKe,e);if(!Gy(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=pd(),d=mK({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:l});return A.cloneElement(n,{...d,...u,[r]:ps(t,c.store.targetRef,n==null?void 0:n.ref)})});KEe.displayName="@mantine/core/ComboboxEventsTarget";const VKe={},gK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxFooter",VKe,e),l=pd();return b.jsx(_e,{ref:t,...l.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:u=>{u.preventDefault()}})});gK.classes=lu;gK.displayName="@mantine/core/ComboboxFooter";const HKe={},yK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:l,...u}=xe("ComboboxGroup",HKe,e),c=pd();return b.jsxs(_e,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...u,children:[l&&b.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:l}),a]})});yK.classes=lu;yK.displayName="@mantine/core/ComboboxGroup";const qKe={},vK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxHeader",qKe,e),l=pd();return b.jsx(_e,{ref:t,...l.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:u=>{u.preventDefault()}})});vK.classes=lu;vK.displayName="@mantine/core/ComboboxHeader";function XEe({value:e,valuesDivider:t=",",...n}){return b.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}XEe.displayName="@mantine/core/ComboboxHiddenInput";const WKe={},bK=Le((e,t)=>{const n=xe("ComboboxOption",WKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:l,id:u,active:c,onMouseDown:d,onMouseOver:f,disabled:h,selected:p,mod:m,...g}=n,y=pd(),v=A.useId(),_=u||v;return b.jsx(_e,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:_,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),l==null||l(w))},onMouseDown:w=>{w.preventDefault(),d==null||d(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),f==null||f(w)}})});bK.classes=lu;bK.displayName="@mantine/core/ComboboxOption";const GKe={},_K=Le((e,t)=>{const n=xe("ComboboxOptions",GKe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:l,labelledBy:u,...c}=n,d=pd(),f=ta(a);return A.useEffect(()=>{d.store.setListId(f)},[f]),b.jsx(_e,{ref:t,...d.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:f,role:"listbox","aria-labelledby":u,onMouseDown:h=>{h.preventDefault(),l==null||l(h)}})});_K.classes=lu;_K.displayName="@mantine/core/ComboboxOptions";const YKe={withAriaAttributes:!0,withKeyboardNavigation:!0},wK=Le((e,t)=>{const n=xe("ComboboxSearch",YKe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:l,withKeyboardNavigation:u,size:c,...d}=n,f=pd(),h=f.getStyles("search"),p=mK({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:u,withExpandedAttribute:!1,onKeyDown:l,autoComplete:"off"});return b.jsx(Kr,{ref:ps(t,f.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||f.size,...p,...d,__staticSelector:"Combobox"})});wK.classes=lu;wK.displayName="@mantine/core/ComboboxSearch";const KKe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},QEe=Le((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...u}=xe("ComboboxTarget",KKe,e);if(!Gy(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=pd(),d=mK({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:l}),f=A.cloneElement(n,{...d,...u});return b.jsx($n.Target,{ref:ps(t,c.store.targetRef),children:f})});QEe.displayName="@mantine/core/ComboboxTarget";function XKe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function QKe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function JKe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function LR({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,l]=Xi({value:t,defaultValue:e,finalValue:!1,onChange:n}),u=A.useRef(null),c=A.useRef(-1),d=A.useRef(null),f=A.useRef(null),h=A.useRef(-1),p=A.useRef(-1),m=A.useRef(-1),g=A.useCallback((L="unknown")=>{a||(l(!0),i==null||i(L))},[l,i,a]),y=A.useCallback((L="unknown")=>{a&&(l(!1),r==null||r(L))},[l,r,a]),v=A.useCallback((L="unknown")=>{a?y(L):g(L)},[y,g,a]),_=A.useCallback(()=>{const L=document.querySelector(`#${u.current} [data-combobox-selected]`);L==null||L.removeAttribute("data-combobox-selected"),L==null||L.removeAttribute("aria-selected")},[]),w=A.useCallback(L=>{const B=document.getElementById(u.current),U=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!U)return null;const z=L>=U.length?0:L<0?U.length-1:L;return c.current=z,U!=null&&U[z]&&!U[z].hasAttribute("data-combobox-disabled")?(_(),U[z].setAttribute("data-combobox-selected","true"),U[z].setAttribute("aria-selected","true"),U[z].scrollIntoView({block:"nearest",behavior:o}),U[z].id):null},[o,_]),E=A.useCallback(()=>{const L=document.querySelector(`#${u.current} [data-combobox-active]`);if(L){const B=document.querySelectorAll(`#${u.current} [data-combobox-option]`),U=Array.from(B).findIndex(z=>z===L);return w(U)}return w(0)},[w]),S=A.useCallback(()=>w(QKe(c.current,document.querySelectorAll(`#${u.current} [data-combobox-option]`),s)),[w,s]),x=A.useCallback(()=>w(XKe(c.current,document.querySelectorAll(`#${u.current} [data-combobox-option]`),s)),[w,s]),T=A.useCallback(()=>w(JKe(document.querySelectorAll(`#${u.current} [data-combobox-option]`))),[w]),I=A.useCallback((L="selected",B)=>{m.current=window.setTimeout(()=>{var N;const U=document.querySelectorAll(`#${u.current} [data-combobox-option]`),z=Array.from(U).findIndex(V=>V.hasAttribute(`data-combobox-${L}`));c.current=z,B!=null&&B.scrollIntoView&&((N=U[z])==null||N.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),P=A.useCallback(()=>{c.current=-1,_()},[_]),k=A.useCallback(()=>{const L=document.querySelectorAll(`#${u.current} [data-combobox-option]`),B=L==null?void 0:L[c.current];B==null||B.click()},[]),D=A.useCallback(L=>{u.current=L},[]),R=A.useCallback(()=>{h.current=window.setTimeout(()=>d.current.focus(),0)},[]),M=A.useCallback(()=>{p.current=window.setTimeout(()=>f.current.focus(),0)},[]),$=A.useCallback(()=>c.current,[]);return A.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:$,selectOption:w,selectFirstOption:T,selectActiveOption:E,selectNextOption:S,selectPreviousOption:x,resetSelectedOption:P,updateSelectedOptionIndex:I,listId:u.current,setListId:D,clickSelectedOption:k,searchRef:d,focusSearchInput:R,targetRef:f,focusTarget:M}}const ZKe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},eXe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":Js(t),"--combobox-option-padding":Jt(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Ce(n),"--combobox-option-fz":Js(t),"--combobox-option-padding":Jt(t,"combobox-option-padding")}});function sn(e){const t=xe("Combobox",ZKe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:l,onClose:u,size:c,dropdownPadding:d,resetSelectionOnOptionHover:f,__staticSelector:h,readOnly:p,...m}=t,g=LR(),y=o||g,v=vt({name:h||"Combobox",classes:lu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:eXe}),_=()=>{u==null||u(),y.closeDropdown()};return b.jsx(FKe,{value:{getStyles:v,store:y,onOptionSubmit:l,size:c,resetSelectionOnOptionHover:f,readOnly:p},children:b.jsx($n,{opened:y.dropdownOpened,...m,onClose:_,withRoles:!1,unstyled:i,children:s})})}const tXe=e=>e;sn.extend=tXe;sn.classes=lu;sn.displayName="@mantine/core/Combobox";sn.Target=QEe;sn.Dropdown=hK;sn.Options=_K;sn.Option=bK;sn.Search=wK;sn.Empty=pK;sn.Chevron=fK;sn.Footer=gK;sn.Header=vK;sn.EventsTarget=KEe;sn.DropdownTarget=YEe;sn.Group=yK;sn.ClearButton=GEe;sn.HiddenInput=XEe;var JEe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const ZEe=JEe,SF=A.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:l,id:u,disabled:c,error:d,size:f,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:_,...w},E)=>{const S=vt({name:e,props:t,className:n,style:y,classes:JEe,classNames:r,styles:i,unstyled:s});return b.jsx(_e,{...S("root"),ref:E,__vars:{"--label-fz":Js(f),"--label-lh":Jt(f,"label-lh")},mod:[{"label-position":h},_],variant:g,size:f,...w,children:b.jsxs(_e,{component:p,htmlFor:p==="label"?u:void 0,...S("body"),children:[o,b.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&b.jsx(_e,{component:m,htmlFor:m==="label"?u:void 0,...S("label"),"data-disabled":c||void 0,children:a}),l&&b.jsx(Kr.Description,{size:f,__inheritStyles:!1,...S("description"),children:l}),d&&typeof d!="boolean"&&b.jsx(Kr.Error,{size:f,__inheritStyles:!1,...S("error"),children:d})]})]})})});SF.displayName="@mantine/core/InlineInput";const exe=A.createContext(null),nXe=exe.Provider,txe=()=>A.useContext(exe),[rXe,iXe]=Hb();var nxe={card:"m_26775b0a"};const sXe={withBorder:!0},oXe=(e,{radius:t})=>({card:{"--card-radius":Mr(t)}}),EK=Le((e,t)=>{const n=xe("CheckboxCard",sXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,checked:u,mod:c,withBorder:d,value:f,onClick:h,...p}=n,m=vt({name:"CheckboxCard",classes:nxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:oXe,rootSelector:"card"}),g=txe(),y=typeof u=="boolean"?u:(g==null?void 0:g.value.includes(f||""))||!1;return b.jsx(rXe,{value:{checked:y},children:b.jsx(xs,{ref:t,mod:[{"with-border":d,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(f||"")}})})});EK.displayName="@mantine/core/CheckboxCard";EK.classes=nxe;function xK({children:e,role:t}){const n=oS();return n?b.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):b.jsx(b.Fragment,{children:e})}const aXe={},SK=Le((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:l,...u}=xe("CheckboxGroup",aXe,e),[c,d]=Xi({value:n,defaultValue:r,finalValue:[],onChange:i}),f=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!l&&d(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return b.jsx(nXe,{value:{value:c,onChange:f,size:s},children:b.jsx(Kr.Wrapper,{size:s,ref:t,...o,...u,labelElement:"div",__staticSelector:"CheckboxGroup",children:b.jsx(xK,{role:"group",children:a})})})});SK.classes=Kr.Wrapper.classes;SK.displayName="@mantine/core/CheckboxGroup";function rxe({size:e,style:t,...n}){const r=e!==void 0?{width:Ce(e),height:Ce(e),...t}:t;return b.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:b.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function ixe({indeterminate:e,...t}){return e?b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:b.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):b.jsx(rxe,{...t})}var sxe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const lXe={icon:ixe},uXe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Of({color:n||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":Jt(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Mr(t),"--checkbox-color":s==="outline"?l:Yr(n,e),"--checkbox-icon-color":i?Yr(i,e):Ky(o,e)?mp({color:n,theme:e,autoContrast:o}):void 0}}},TK=Le((e,t)=>{const n=xe("CheckboxIndicator",lXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,icon:u,indeterminate:c,radius:d,color:f,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,..._}=n,w=u,E=vt({name:"CheckboxIndicator",classes:sxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:uXe,rootSelector:"indicator"}),S=iXe(),x=typeof m=="boolean"||typeof c=="boolean"?m||c:(S==null?void 0:S.checked)||!1;return b.jsx(_e,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:x,disabled:v},g],..._,children:b.jsx(w,{indeterminate:c,...E("icon")})})});TK.displayName="@mantine/core/CheckboxIndicator";TK.classes=sxe;var oxe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const cXe={labelPosition:"right",icon:ixe},dXe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Of({color:n||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":Jt(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Mr(t),"--checkbox-color":s==="outline"?l:Yr(n,e),"--checkbox-icon-color":i?Yr(i,e):Ky(o,e)?mp({color:n,theme:e,autoContrast:o}):void 0}}},_f=Le((e,t)=>{const n=xe("Checkbox",cXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,label:c,id:d,size:f,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:_,disabled:w,variant:E,indeterminate:S,icon:x,rootRef:T,iconColor:I,onChange:P,autoContrast:k,mod:D,...R}=n,M=txe(),$=f||(M==null?void 0:M.size),L=x,B=vt({name:"Checkbox",props:n,classes:oxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:dXe}),{styleProps:U,rest:z}=Wb(R),N=ta(d),V=M?{checked:M.value.includes(z.value),onChange:W=>{M.onChange(W),P==null||P(W)}}:{};return b.jsx(SF,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:N,size:$,labelPosition:y,label:c,description:v,error:_,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":V.checked||g||void 0,variant:E,ref:T,mod:D,...U,...p,children:b.jsxs(_e,{...B("inner"),mod:{"data-label-position":y},children:[b.jsx(_e,{component:"input",id:N,ref:t,checked:g,disabled:w,mod:{error:!!_,indeterminate:S},...B("input",{focusable:!0,variant:E}),onChange:P,...z,...V,type:"checkbox"}),b.jsx(L,{indeterminate:S,...B("icon")})]})})});_f.classes={...oxe,...ZEe};_f.displayName="@mantine/core/Checkbox";_f.Group=SK;_f.Indicator=TK;_f.Card=EK;function VE(e){return"group"in e}function axe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;VE(o)&&i.push({group:o.group,items:axe({options:o.items,search:t,limit:n-i.length})}),VE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function fXe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function lxe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(VE(n))lxe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function hXe(e,t){return Array.isArray(e)?e.includes(t):e===t}function uxe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!VE(e)){const a=hXe(n,e.value),l=t&&a&&b.jsx(rxe,{className:lu.optionsDropdownCheckIcon}),u=b.jsxs(b.Fragment,{children:[r==="left"&&l,b.jsx("span",{children:e.label}),r==="right"&&l]});return b.jsx(sn.Option,{value:e.value,disabled:e.disabled,className:yt({[lu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):u})}const o=e.items.map(a=>b.jsx(uxe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return b.jsx(sn.Group,{label:e.group,children:o})}function CK({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:l=!0,withCheckIcon:u=!1,value:c,checkIconPosition:d,nothingFoundMessage:f,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){lxe(e);const _=typeof i=="string"?(r||axe)({options:e,search:l?i:"",limit:s??1/0}):e,w=fXe(_),E=_.map(S=>b.jsx(uxe,{data:S,withCheckIcon:u,value:c,checkIconPosition:d,unstyled:h,renderOption:m},VE(S)?S.group:S.value));return b.jsx(sn.Dropdown,{hidden:t||n&&w,children:b.jsxs(sn.Options,{labelledBy:p,"aria-label":y,children:[a?b.jsx(Yb.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&f&&b.jsx(sn.Empty,{children:f})]})})}const pXe={},AK=Le((e,t)=>{const n=xe("Autocomplete",pXe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:l,onDropdownClose:u,onDropdownOpen:c,onFocus:d,onBlur:f,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:_,comboboxProps:w,readOnly:E,disabled:S,filter:x,limit:T,withScrollArea:I,maxDropdownHeight:P,size:k,id:D,renderOption:R,autoComplete:M,scrollAreaProps:$,...L}=n,B=ta(D),U=dK(m),z=xF(U),[N,V]=Xi({value:g,defaultValue:y,finalValue:"",onChange:p}),W=LR({opened:a,defaultOpened:l,onDropdownOpen:c,onDropdownClose:()=>{u==null||u(),W.resetSelectedOption()}}),{resolvedClassNames:F,resolvedStyles:H}=gp({props:n,styles:i,classNames:r});return A.useEffect(()=>{v&&W.selectFirstOption()},[v,N]),b.jsxs(sn,{store:W,__staticSelector:"Autocomplete",classNames:F,styles:H,unstyled:s,readOnly:E,onOptionSubmit:G=>{_==null||_(G),V(z[G].label),W.closeDropdown()},size:k,...w,children:[b.jsx(sn.Target,{autoComplete:M,children:b.jsx(_u,{ref:t,...L,size:k,__staticSelector:"Autocomplete",disabled:S,readOnly:E,value:N,onChange:G=>{V(G.currentTarget.value),W.openDropdown(),v&&W.selectFirstOption()},onFocus:G=>{W.openDropdown(),d==null||d(G)},onBlur:G=>{W.closeDropdown(),f==null||f(G)},onClick:G=>{W.openDropdown(),h==null||h(G)},classNames:F,styles:H,unstyled:s,id:B})}),b.jsx(CK,{data:U,hidden:E||S,filter:x,search:N,limit:T,hiddenWhenEmpty:!0,withScrollArea:I,maxDropdownHeight:P,unstyled:s,labelId:L.label?`${B}-label`:void 0,"aria-label":L.label?void 0:L["aria-label"],renderOption:R,scrollAreaProps:$})]})});AK.classes={..._u.classes,...sn.classes};AK.displayName="@mantine/core/Autocomplete";var cxe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const mXe={},gXe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":Jt(s,"badge-height"),"--badge-padding-x":Jt(s,"badge-padding-x"),"--badge-fz":Jt(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Mr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Yr(n,e):void 0}}},Sm=Ls((e,t)=>{const n=xe("Badge",mXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,radius:u,color:c,gradient:d,leftSection:f,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:_,...w}=n,E=vt({name:"Badge",props:n,classes:cxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:gXe});return b.jsxs(_e,{variant:m,mod:[{block:g,circle:v},_],...E("root",{variant:m}),ref:t,...w,children:[f&&b.jsx("span",{...E("section"),"data-position":"left",children:f}),b.jsx("span",{...E("label"),children:p}),h&&b.jsx("span",{...E("section"),"data-position":"right",children:h})]})});Sm.classes=cxe;Sm.displayName="@mantine/core/Badge";var dxe={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const yXe={},vXe=(e,{color:t,size:n,lineSize:r,transitionDuration:i,transitionTimingFunction:s})=>({root:{"--burger-color":t?Yr(t,e):void 0,"--burger-size":Jt(n,"burger-size"),"--burger-line-size":r?Ce(r):void 0,"--burger-transition-duration":i===void 0?void 0:`${i}ms`,"--burger-transition-timing-function":s}}),IK=Le((e,t)=>{const n=xe("Burger",yXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,opened:u,children:c,transitionDuration:d,transitionTimingFunction:f,...h}=n,p=vt({name:"Burger",classes:dxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:vXe});return b.jsxs(xs,{...p("root"),ref:t,...h,children:[b.jsx(_e,{mod:["reduce-motion",{opened:u}],...p("burger")}),c]})});IK.classes=dxe;IK.displayName="@mantine/core/Burger";var TF={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Hle={orientation:"horizontal"},bXe=(e,{borderWidth:t})=>({group:{"--button-border-width":Ce(t)}}),RK=Le((e,t)=>{const n=xe("ButtonGroup",Hle,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:l,vars:u,borderWidth:c,variant:d,mod:f,...h}=xe("ButtonGroup",Hle,e),p=vt({name:"ButtonGroup",props:n,classes:TF,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:bXe,rootSelector:"group"});return b.jsx(_e,{...p("group"),ref:t,variant:d,mod:[{"data-orientation":l},f],role:"group",...h})});RK.classes=TF;RK.displayName="@mantine/core/ButtonGroup";const _Xe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ce(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},wXe={},EXe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const l=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Jt(s,"button-height"),"--button-padding-x":Jt(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Js(s.replace("compact-","")):Js(s),"--button-radius":t===void 0?void 0:Mr(t),"--button-bg":n||i?l.background:void 0,"--button-hover":n||i?l.hover:void 0,"--button-color":l.color,"--button-bd":n||i?l.border:void 0,"--button-hover-color":n||i?l.hoverColor:void 0}}},yn=Ls((e,t)=>{const n=xe("Button",wXe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:l,leftSection:u,rightSection:c,fullWidth:d,variant:f,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:_,"data-disabled":w,autoContrast:E,mod:S,...x}=n,T=vt({name:"Button",props:n,classes:TF,className:s,style:r,classNames:y,styles:v,unstyled:_,vars:i,varsResolver:EXe}),I=!!u,P=!!c;return b.jsxs(xs,{ref:t,...T("root",{active:!a&&!p&&!w}),unstyled:_,variant:f,disabled:a||p,mod:[{disabled:a||w,loading:p,block:d,"with-left-section":I,"with-right-section":P},S],...x,children:[b.jsx(Df,{mounted:!!p,transition:_Xe,duration:150,children:k=>b.jsx(_e,{component:"span",...T("loader",{style:k}),"aria-hidden":!0,children:b.jsx(ws,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),b.jsxs("span",{...T("inner"),children:[u&&b.jsx(_e,{component:"span",...T("section"),mod:{position:"left"},children:u}),b.jsx(_e,{component:"span",mod:{loading:p},...T("label"),children:l}),c&&b.jsx(_e,{component:"span",...T("section"),mod:{position:"right"},children:c})]})]})});yn.classes=TF;yn.displayName="@mantine/core/Button";yn.Group=RK;const[xXe,SXe]=io("Card component was not found in tree");var kK={root:"m_e615b15f",section:"m_599a2148"};const TXe={},CF=Ls((e,t)=>{const n=xe("CardSection",TXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:l,inheritPadding:u,mod:c,...d}=n,f=SXe();return b.jsx(_e,{ref:t,mod:[{"with-border":l,"inherit-padding":u},c],...f.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...d})});CF.classes=kK;CF.displayName="@mantine/core/CardSection";const CXe={},AXe=(e,{padding:t})=>({root:{"--card-padding":Qu(t)}}),Kb=Ls((e,t)=>{const n=xe("Card",CXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,padding:c,...d}=n,f=vt({name:"Card",props:n,classes:kK,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:AXe}),h=A.Children.toArray(u),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===CF?A.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return b.jsx(xXe,{value:{getStyles:f},children:b.jsx(kR,{ref:t,unstyled:a,...f("root"),...d,children:p})})});Kb.classes=kK;Kb.displayName="@mantine/core/Card";Kb.Section=CF;var fxe={root:"m_4451eb3a"};const IXe={},dl=Ls((e,t)=>{const n=xe("Center",IXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,inline:u,mod:c,...d}=n,f=vt({name:"Center",props:n,classes:fxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l});return b.jsx(_e,{ref:t,mod:[{inline:u},c],...f("root"),...d})});dl.classes=fxe;dl.displayName="@mantine/core/Center";var hxe={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const qle={withShadow:!0},RXe=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:Mr(t),"--cs-size":Ce(n)}}),qc=Ls((e,t)=>{const n=xe("ColorSwatch",qle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,size:c,radius:d,withShadow:f,children:h,variant:p,...m}=xe("ColorSwatch",qle,n),g=vt({name:"ColorSwatch",props:n,classes:hxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:RXe});return b.jsxs(_e,{ref:t,variant:p,size:c,...g("root",{focusable:!0}),...m,children:[b.jsx("span",{...g("alphaOverlay")}),f&&b.jsx("span",{...g("shadowOverlay")}),b.jsx("span",{...g("colorOverlay",{style:{backgroundColor:u}})}),b.jsx("span",{...g("childrenOverlay"),children:h})]})});qc.classes=hxe;qc.displayName="@mantine/core/ColorSwatch";const[kXe,PK]=Hb(null),NK=A.forwardRef(({position:e,...t},n)=>b.jsx(_e,{ref:n,__vars:{"--thumb-y-offset":`${e.y*100}%`,"--thumb-x-offset":`${e.x*100}%`},...t}));NK.displayName="@mantine/core/ColorPickerThumb";var OK={wrapper:"m_fee9c77",preview:"m_9dddfbac",body:"m_bffecc3e",sliders:"m_3283bb96",thumb:"m_40d572ba",swatch:"m_d8ee6fd8",swatches:"m_5711e686",saturation:"m_202a296e",saturationOverlay:"m_11b3db02",slider:"m_d856d47d",sliderOverlay:"m_8f327113"};const PXe={},DK=Le((e,t)=>{var U;const n=xe("ColorSlider",PXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,onChange:u,onChangeEnd:c,maxValue:d,round:f,size:h="md",focusable:p=!0,value:m,overlays:g,thumbColor:y="transparent",onScrubStart:v,onScrubEnd:_,__staticSelector:w="ColorPicker",...E}=n,S=vt({name:w,classes:OK,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a}),T=((U=PK())==null?void 0:U.getStyles)||S,I=Is(),[P,k]=A.useState({y:0,x:m/d}),D=A.useRef(P),R=z=>f?Math.round(z*d):z*d,{ref:M}=cF(({x:z,y:N})=>{D.current={x:z,y:N},u==null||u(R(z))},{onScrubEnd:()=>{const{x:z}=D.current;c==null||c(R(z)),_==null||_()},onScrubStart:v});Ju(()=>{k({y:0,x:m/d})},[m]);const $=(z,N)=>{z.preventDefault();const V=Fwe(N);u==null||u(R(V.x)),c==null||c(R(V.x))},L=z=>{switch(z.key){case"ArrowRight":{$(z,{x:P.x+.05,y:P.y});break}case"ArrowLeft":{$(z,{x:P.x-.05,y:P.y});break}}},B=g.map((z,N)=>A.createElement("div",{...T("sliderOverlay"),style:z,key:N}));return b.jsxs(_e,{...E,ref:ps(M,t),...T("slider"),role:"slider","aria-valuenow":m,"aria-valuemax":d,"aria-valuemin":0,tabIndex:p?0:-1,onKeyDown:L,"data-focus-ring":I.focusRing,__vars:{"--cp-thumb-size":`var(--cp-thumb-size-${h})`},children:[B,b.jsx(NK,{position:P,...T("thumb",{style:{top:Ce(1),background:y}})})]})});DK.displayName="@mantine/core/ColorSlider";function Fc(e,t=0,n=10**t){return Math.round(n*e)/n}function NXe({h:e,s:t,l:n,a:r}){const i=t*((n<50?n:100-n)/100);return{h:e,s:i>0?2*i/(n+i)*100:0,v:n+i,a:r}}const OXe={grad:360/400,turn:360,rad:360/(Math.PI*2)};function DXe(e,t="deg"){return Number(e)*(OXe[t]||1)}const MXe=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function Wle(e){const t=MXe.exec(e);return t?NXe({h:DXe(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}}function RU({r:e,g:t,b:n,a:r}){const i=Math.max(e,t,n),s=i-Math.min(e,t,n),o=s?i===e?(t-n)/s:i===t?2+(n-e)/s:4+(e-t)/s:0;return{h:Fc(60*(o<0?o+6:o),3),s:Fc(i?s/i*100:0,3),v:Fc(i/255*100,3),a:r}}function kU(e){const t=e[0]==="#"?e.slice(1):e;return t.length===3?RU({r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:1}):RU({r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:1})}function $Xe(e){const t=e[0]==="#"?e.slice(1):e,n=o=>Fc(parseInt(o,16)/255,3);if(t.length===4){const o=t.slice(0,3),a=n(t[3]+t[3]);return{...kU(o),a}}const r=t.slice(0,6),i=n(t.slice(6,8));return{...kU(r),a:i}}const LXe=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function Gle(e){const t=LXe.exec(e);return t?RU({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}}const pxe={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},FXe={hex:kU,hexa:$Xe,rgb:Gle,rgba:Gle,hsl:Wle,hsla:Wle};function jXe(e){for(const[,t]of Object.entries(pxe))if(t.test(e))return!0;return!1}function oN(e){if(typeof e!="string")return{h:0,s:0,v:0,a:1};if(e==="transparent")return{h:0,s:0,v:0,a:0};const t=e.trim();for(const[n,r]of Object.entries(pxe))if(r.test(t))return FXe[n](t);return{h:0,s:0,v:0,a:1}}const BXe={},mxe=A.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=xe("AlphaSlider",BXe,e);return b.jsx(DK,{...o,ref:t,value:n,onChange:a=>r==null?void 0:r(Fc(a,2)),onChangeEnd:a=>i==null?void 0:i(Fc(a,2)),maxValue:1,round:!1,"data-alpha":!0,overlays:[{backgroundImage:"linear-gradient(45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(-45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--slider-checkers) 75%), linear-gradient(-45deg, var(--mantine-color-body) 75%, var(--slider-checkers) 75%)",backgroundSize:`${Ce(8)} ${Ce(8)}`,backgroundPosition:`0 0, 0 ${Ce(4)}, ${Ce(4)} ${Ce(-4)}, ${Ce(-4)} 0`},{backgroundImage:`linear-gradient(90deg, transparent, ${s})`},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${Ce(1)} inset, rgb(0, 0, 0, .15) 0 0 ${Ce(4)} inset`}]})});mxe.displayName="@mantine/core/AlphaSlider";function gxe({h:e,s:t,v:n,a:r}){const i=e/360*6,s=t/100,o=n/100,a=Math.floor(i),l=o*(1-s),u=o*(1-(i-a)*s),c=o*(1-(1-i+a)*s),d=a%6;return{r:Fc([o,u,l,l,c,o][d]*255),g:Fc([c,o,o,u,l,l][d]*255),b:Fc([l,l,c,o,o,u][d]*255),a:Fc(r,2)}}function Yle(e,t){const{r:n,g:r,b:i,a:s}=gxe(e);return t?`rgba(${n}, ${r}, ${i}, ${Fc(s,2)})`:`rgb(${n}, ${r}, ${i})`}function Kle({h:e,s:t,v:n,a:r},i){const s=(200-t)*n/100,o={h:Math.round(e),s:Math.round(s>0&&s<200?t*n/100/(s<=100?s:200-s)*100:0),l:Math.round(s/2)};return i?`hsla(${o.h}, ${o.s}%, ${o.l}%, ${Fc(r,2)})`:`hsl(${o.h}, ${o.s}%, ${o.l}%)`}function eD(e){const t=e.toString(16);return t.length<2?`0${t}`:t}function yxe(e){const{r:t,g:n,b:r}=gxe(e);return`#${eD(t)}${eD(n)}${eD(r)}`}function zXe(e){const t=Math.round(e.a*255);return`${yxe(e)}${eD(t)}`}const Q8={hex:yxe,hexa:e=>zXe(e),rgb:e=>Yle(e,!1),rgba:e=>Yle(e,!0),hsl:e=>Kle(e,!1),hsla:e=>Kle(e,!0)};function Vg(e,t){return t?e in Q8?Q8[e](t):Q8.hex(t):"#000000"}const vxe=A.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=xe("HueSlider",{},e);return b.jsx(DK,{...o,ref:t,value:n,onChange:r,onChangeEnd:i,maxValue:360,thumbColor:`hsl(${n}, 100%, 50%)`,round:!0,"data-hue":!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${Ce(1)} inset, rgb(0, 0, 0, .15) 0 0 ${Ce(4)} inset`}]})});vxe.displayName="@mantine/core/HueSlider";function bxe({className:e,onChange:t,onChangeEnd:n,value:r,saturationLabel:i,focusable:s=!0,size:o,color:a,onScrubStart:l,onScrubEnd:u,...c}){const{getStyles:d}=PK(),[f,h]=A.useState({x:r.s/100,y:1-r.v/100}),p=A.useRef(f),{ref:m}=cF(({x:v,y:_})=>{p.current={x:v,y:_},t({s:Math.round(v*100),v:Math.round((1-_)*100)})},{onScrubEnd:()=>{const{x:v,y:_}=p.current;n({s:Math.round(v*100),v:Math.round((1-_)*100)}),u==null||u()},onScrubStart:l});A.useEffect(()=>{h({x:r.s/100,y:1-r.v/100})},[r.s,r.v]);const g=(v,_)=>{v.preventDefault();const w=Fwe(_);t({s:Math.round(w.x*100),v:Math.round((1-w.y)*100)}),n({s:Math.round(w.x*100),v:Math.round((1-w.y)*100)})},y=v=>{switch(v.key){case"ArrowUp":{g(v,{y:f.y-.05,x:f.x});break}case"ArrowDown":{g(v,{y:f.y+.05,x:f.x});break}case"ArrowRight":{g(v,{x:f.x+.05,y:f.y});break}case"ArrowLeft":{g(v,{x:f.x-.05,y:f.y});break}}};return b.jsxs(_e,{...d("saturation"),ref:m,...c,role:"slider","aria-label":i,"aria-valuenow":f.x,"aria-valuetext":Vg("rgba",r),tabIndex:s?0:-1,onKeyDown:y,children:[b.jsx("div",{...d("saturationOverlay",{style:{backgroundColor:`hsl(${r.h}, 100%, 50%)`}})}),b.jsx("div",{...d("saturationOverlay",{style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}})}),b.jsx("div",{...d("saturationOverlay",{style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}})}),b.jsx(NK,{position:f,...d("thumb",{style:{backgroundColor:a}})})]})}bxe.displayName="@mantine/core/Saturation";const _xe=A.forwardRef(({className:e,datatype:t,setValue:n,onChangeEnd:r,size:i,focusable:s,data:o,swatchesPerRow:a,...l},u)=>{const c=PK(),d=o.map((f,h)=>A.createElement(qc,{...c.getStyles("swatch"),unstyled:c.unstyled,component:"button",type:"button",color:f,key:h,radius:"sm",onClick:()=>{n(f),r==null||r(f)},"aria-label":f,tabIndex:s?0:-1,"data-swatch":!0}));return b.jsx(_e,{...c.getStyles("swatches"),ref:u,...l,children:d})});_xe.displayName="@mantine/core/Swatches";const UXe={swatchesPerRow:7,withPicker:!0,focusable:!0,size:"md",__staticSelector:"ColorPicker"},VXe=(e,{size:t,swatchesPerRow:n})=>({wrapper:{"--cp-preview-size":Jt(t,"cp-preview-size"),"--cp-width":Jt(t,"cp-width"),"--cp-body-spacing":Qu(t),"--cp-swatch-size":`${100/n}%`,"--cp-thumb-size":Jt(t,"cp-thumb-size"),"--cp-saturation-height":Jt(t,"cp-saturation-height")}}),MK=Le((e,t)=>{const n=xe("ColorPicker",UXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,format:u,value:c,defaultValue:d,onChange:f,onChangeEnd:h,withPicker:p,size:m,saturationLabel:g,hueLabel:y,alphaLabel:v,focusable:_,swatches:w,swatchesPerRow:E,fullWidth:S,onColorSwatchClick:x,__staticSelector:T,mod:I,...P}=n,k=vt({name:T,props:n,classes:OK,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"wrapper",vars:l,varsResolver:VXe}),D=A.useRef(u),R=A.useRef(),M=A.useRef(-1),$=A.useRef(!1),L=u==="hexa"||u==="rgba"||u==="hsla",[B,U,z]=Xi({value:c,defaultValue:d,finalValue:"#FFFFFF",onChange:f}),[N,V]=A.useState(oN(B)),W=()=>{window.clearTimeout(M.current),$.current=!0},F=()=>{window.clearTimeout(M.current),M.current=window.setTimeout(()=>{$.current=!1},200)},H=G=>{V(Q=>{const ie={...Q,...G};return R.current=Vg(D.current,ie),ie}),U(R.current)};return Ju(()=>{jXe(c)&&!$.current&&V(oN(c))},[c]),Ju(()=>{D.current=u,U(Vg(u,N))},[u]),b.jsx(kXe,{value:{getStyles:k,unstyled:a},children:b.jsxs(_e,{ref:t,...k("wrapper"),size:m,mod:[{"full-width":S},I],...P,children:[p&&b.jsxs(b.Fragment,{children:[b.jsx(bxe,{value:N,onChange:H,onChangeEnd:({s:G,v:Q})=>h==null?void 0:h(Vg(D.current,{...N,s:G,v:Q})),color:B,size:m,focusable:_,saturationLabel:g,onScrubStart:W,onScrubEnd:F}),b.jsxs("div",{...k("body"),children:[b.jsxs("div",{...k("sliders"),children:[b.jsx(vxe,{value:N.h,onChange:G=>H({h:G}),onChangeEnd:G=>h==null?void 0:h(Vg(D.current,{...N,h:G})),size:m,focusable:_,"aria-label":y,onScrubStart:W,onScrubEnd:F}),L&&b.jsx(mxe,{value:N.a,onChange:G=>H({a:G}),onChangeEnd:G=>{h==null||h(Vg(D.current,{...N,a:G}))},size:m,color:Vg("hex",N),focusable:_,"aria-label":v,onScrubStart:W,onScrubEnd:F})]}),L&&b.jsx(qc,{color:B,radius:"sm",size:"var(--cp-preview-size)",...k("preview")})]})]}),Array.isArray(w)&&b.jsx(_xe,{data:w,swatchesPerRow:E,focusable:_,setValue:U,onChangeEnd:G=>{const Q=Vg(u,oN(G));x==null||x(Q),h==null||h(Q),z||V(oN(G))}})]})})});MK.classes=OK;MK.displayName="@mantine/core/ColorPicker";var wxe={root:"m_7485cace"};const HXe={},qXe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:Jt(t,"container-size")}}),Mf=Le((e,t)=>{const n=xe("Container",HXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,fluid:u,mod:c,...d}=n,f=vt({name:"Container",classes:wxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:qXe});return b.jsx(_e,{ref:t,mod:[{fluid:u},c],...f("root"),...d})});Mf.classes=wxe;Mf.displayName="@mantine/core/Container";const WXe={timeout:1e3};function Exe(e){const{children:t,timeout:n,value:r,...i}=xe("CopyButton",WXe,e),s=FHe({timeout:n}),o=()=>s.copy(r);return b.jsx(b.Fragment,{children:t({copy:o,copied:s.copied,...i})})}Exe.displayName="@mantine/core/CopyButton";var xxe={root:"m_3eebeb36",label:"m_9e365f20"};const GXe={orientation:"horizontal"},YXe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Yr(t,e):void 0,"--divider-border-style":n,"--divider-size":Jt(r,"divider-size")}}),AF=Le((e,t)=>{const n=xe("Divider",GXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,orientation:c,label:d,labelPosition:f,mod:h,...p}=n,m=vt({name:"Divider",classes:xxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:YXe});return b.jsx(_e,{ref:t,mod:[{orientation:c,"with-label":!!d},h],...m("root"),...p,role:"separator",children:d&&b.jsx(_e,{component:"span",mod:{position:f},...m("label"),children:d})})});AF.classes=xxe;AF.displayName="@mantine/core/Divider";const[KXe,uS]=io("Drawer component was not found in tree");var hg={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const XXe={},IF=Le((e,t)=>{const n=xe("DrawerBody",XXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=uS();return b.jsx(WY,{ref:t,...u.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...l})});IF.classes=hg;IF.displayName="@mantine/core/DrawerBody";const QXe={},RF=Le((e,t)=>{const n=xe("DrawerCloseButton",QXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=uS();return b.jsx(GY,{ref:t,...u.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...l})});RF.classes=hg;RF.displayName="@mantine/core/DrawerCloseButton";const JXe={},kF=Le((e,t)=>{const n=xe("DrawerContent",JXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:l,radius:u,...c}=n,d=uS(),f=d.scrollAreaComponent||jEe;return b.jsx(FEe,{...d.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:d.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:u||d.radius||0,children:b.jsx(f,{style:{height:"100vh"},children:l})})});kF.classes=hg;kF.displayName="@mantine/core/DrawerContent";const ZXe={},PF=Le((e,t)=>{const n=xe("DrawerHeader",ZXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=uS();return b.jsx(YY,{ref:t,...u.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...l})});PF.classes=hg;PF.displayName="@mantine/core/DrawerHeader";const eQe={},NF=Le((e,t)=>{const n=xe("DrawerOverlay",eQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=uS();return b.jsx(KY,{ref:t,...u.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...l})});NF.classes=hg;NF.displayName="@mantine/core/DrawerOverlay";function tQe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function nQe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const rQe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},iQe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},sQe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:dd("modal"),position:"left"},oQe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":Jt(n,"drawer-size"),"--drawer-flex":nQe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":tQe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Ce(r)}}),OF=Le((e,t)=>{const n=xe("DrawerRoot",sQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,scrollAreaComponent:u,position:c,transitionProps:d,radius:f,...h}=n,{dir:p}=El(),m=vt({name:"Drawer",classes:hg,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:oQe}),g=(p==="rtl"?iQe:rQe)[c];return b.jsx(KXe,{value:{scrollAreaComponent:u,getStyles:m,radius:f},children:b.jsx(LEe,{ref:t,...m("root"),transitionProps:{transition:g,...d},unstyled:a,...h})})});OF.classes=hg;OF.displayName="@mantine/core/DrawerRoot";const aQe={},DF=Le((e,t)=>{const n=xe("DrawerTitle",aQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=uS();return b.jsx(XY,{ref:t,...u.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...l})});DF.classes=hg;DF.displayName="@mantine/core/DrawerTitle";const lQe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:dd("modal"),withOverlay:!0,withCloseButton:!0},yp=Le((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...l}=xe("Drawer",lQe,e),u=!!n||s;return b.jsxs(OF,{ref:t,...l,children:[r&&b.jsx(NF,{...i}),b.jsxs(kF,{children:[u&&b.jsxs(PF,{children:[n&&b.jsx(DF,{children:n}),s&&b.jsx(RF,{...o})]}),b.jsx(IF,{children:a})]})]})});yp.classes=hg;yp.displayName="@mantine/core/Drawer";yp.Root=OF;yp.Overlay=NF;yp.Content=kF;yp.Body=IF;yp.Header=PF;yp.Title=DF;yp.CloseButton=RF;function uQe({open:e,close:t,openDelay:n,closeDelay:r}){const i=A.useRef(-1),s=A.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},l=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return A.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:l}}const[cQe,Sxe]=io("Grid component was not found in tree"),PU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Xle=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":PU(e,t),Qle=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Jle=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function dQe({span:e,order:t,offset:n,selector:r}){var f;const i=Is(),s=Sxe(),a=RC(e)===void 0?12:RC(e),l=rS({"--col-order":(f=RC(t))==null?void 0:f.toString(),"--col-flex-grow":Qle(a,s.grow),"--col-flex-basis":PU(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Xle(a,s.columns,s.grow),"--col-offset":Jle(RC(n),s.columns)}),u=Yi(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Qle(e[p],s.grow),h[p]["--col-flex-basis"]=PU(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Xle(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Jle(n[p],s.columns)),h},{}),d=$M(Yi(u),i).filter(h=>Yi(u[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:u[h.value]}));return b.jsx(RR,{styles:l,media:d,selector:r})}var $K={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const fQe={span:12},LK=Le((e,t)=>{const n=xe("GridCol",fQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:l,order:u,offset:c,...d}=n,f=Sxe(),h=pF();return b.jsxs(b.Fragment,{children:[b.jsx(dQe,{selector:`.${h}`,span:l,order:u,offset:c}),b.jsx(_e,{ref:t,...f.getStyles("col",{className:yt(i,h),style:s,classNames:r,styles:o}),...d})]})});LK.classes=$K;LK.displayName="@mantine/core/GridCol";function hQe({gutter:e,selector:t}){const n=Is(),r=rS({"--grid-gutter":Qu(RC(e))}),i=Yi(n.breakpoints).reduce((a,l)=>(a[l]||(a[l]={}),typeof e=="object"&&e[l]!==void 0&&(a[l]["--grid-gutter"]=Qu(e[l])),a),{}),o=$M(Yi(i),n).filter(a=>Yi(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return b.jsx(RR,{styles:r,media:o,selector:t})}const pQe={gutter:"md",grow:!1,columns:12},mQe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),jc=Le((e,t)=>{const n=xe("Grid",pQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,grow:u,gutter:c,columns:d,align:f,justify:h,children:p,...m}=n,g=vt({name:"Grid",classes:$K,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:mQe}),y=pF();return b.jsxs(cQe,{value:{getStyles:g,grow:u,columns:d},children:[b.jsx(hQe,{selector:`.${y}`,...n}),b.jsx(_e,{ref:t,...g("root",{className:y}),...m,children:b.jsx("div",{...g("inner"),children:p})})]})});jc.classes=$K;jc.displayName="@mantine/core/Grid";jc.Col=LK;function Zle({color:e,theme:t,defaultShade:n}){const r=Of({color:e,theme:t});return r.isThemeColor?r.shade===void 0?`var(--mantine-color-${r.color}-${n})`:`var(${r.variable})`:e}var Txe={root:"m_bcb3f3c2"};const gQe={color:"yellow"},yQe=(e,{color:t})=>({root:{"--mark-bg-dark":Zle({color:t,theme:e,defaultShade:5}),"--mark-bg-light":Zle({color:t,theme:e,defaultShade:2})}}),FK=Le((e,t)=>{const n=xe("Mark",gQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,variant:c,...d}=n,f=vt({name:"Mark",props:n,className:i,style:s,classes:Txe,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:yQe});return b.jsx(_e,{component:"mark",ref:t,variant:c,...f("root"),...d})});FK.classes=Txe;FK.displayName="@mantine/core/Mark";function eue(e){return e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}function vQe(e,t){if(t==null)return[{chunk:e,highlighted:!1}];const n=Array.isArray(t)?t.map(eue):eue(t);if(!(Array.isArray(n)?n.filter(a=>a.trim().length>0).length>0:n.trim()!==""))return[{chunk:e,highlighted:!1}];const i=typeof n=="string"?n.trim():n.filter(a=>a.trim().length!==0).map(a=>a.trim()).sort((a,l)=>l.length-a.length).join("|"),s=new RegExp(`(${i})`,"gi");return e.split(s).map(a=>({chunk:a,highlighted:s.test(a)})).filter(({chunk:a})=>a)}const bQe={},jK=Ls((e,t)=>{const{unstyled:n,children:r,highlight:i,highlightStyles:s,color:o,...a}=xe("Highlight",bQe,e),l=vQe(r,i);return b.jsx(nt,{unstyled:n,ref:t,...a,__staticSelector:"Highlight",children:l.map(({chunk:u,highlighted:c},d)=>c?b.jsx(FK,{unstyled:n,color:o,style:s,"data-highlight":u,children:u},d):b.jsx("span",{children:u},d))})});jK.classes=nt.classes;jK.displayName="@mantine/core/Highlight";var Cxe={root:"m_9e117634"};const _Qe={},wQe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Mr(t),"--image-object-fit":n}}),Zy=Ls((e,t)=>{const n=xe("Image",_Qe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,onError:u,src:c,radius:d,fit:f,fallbackSrc:h,mod:p,...m}=n,[g,y]=A.useState(!c);A.useEffect(()=>y(!c),[c]);const v=vt({name:"Image",classes:Cxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:wQe});return g&&h?b.jsx(_e,{component:"img",ref:t,src:h,...v("root"),onError:u,mod:["fallback",p],...m}):b.jsx(_e,{component:"img",ref:t,...v("root"),src:c,onError:_=>{u==null||u(_),y(!0)},mod:p,...m})});Zy.classes=Cxe;Zy.displayName="@mantine/core/Image";function EQe(e="top-end",t=0){const n={"--indicator-top":void 0,"--indicator-bottom":void 0,"--indicator-left":void 0,"--indicator-right":void 0,"--indicator-translate-x":void 0,"--indicator-translate-y":void 0},r=Ce(t),[i,s]=e.split("-");return i==="top"&&(n["--indicator-top"]=r,n["--indicator-translate-y"]="-50%"),i==="middle"&&(n["--indicator-top"]="50%",n["--indicator-translate-y"]="-50%"),i==="bottom"&&(n["--indicator-bottom"]=r,n["--indicator-translate-y"]="50%"),s==="start"&&(n["--indicator-left"]=r,n["--indicator-translate-x"]="-50%"),s==="center"&&(n["--indicator-left"]="50%",n["--indicator-translate-x"]="-50%"),s==="end"&&(n["--indicator-right"]=r,n["--indicator-translate-x"]="50%"),n}var Axe={root:"m_e5262200",indicator:"m_760d1fb1",processing:"m_885901b1"};const xQe={position:"top-end",offset:0,inline:!1,withBorder:!1,disabled:!1,processing:!1},SQe=(e,{color:t,position:n,offset:r,size:i,radius:s,zIndex:o,autoContrast:a})=>({root:{"--indicator-color":t?Yr(t,e):void 0,"--indicator-text-color":Ky(a,e)?mp({color:t,theme:e,autoContrast:a}):void 0,"--indicator-size":Ce(i),"--indicator-radius":s===void 0?void 0:Mr(s),"--indicator-z-index":o==null?void 0:o.toString(),...EQe(n,r)}}),BK=Le((e,t)=>{const n=xe("Indicator",xQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,position:c,offset:d,inline:f,label:h,radius:p,color:m,withBorder:g,disabled:y,processing:v,zIndex:_,autoContrast:w,mod:E,...S}=n,x=vt({name:"Indicator",classes:Axe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:SQe});return b.jsxs(_e,{ref:t,...x("root"),mod:[{inline:f},E],...S,children:[!y&&b.jsx(b.Fragment,{children:b.jsx(_e,{mod:{"with-label":!!h,"with-border":g,processing:v},...x("indicator"),children:h})}),u]})});BK.classes=Axe;BK.displayName="@mantine/core/Indicator";function NU(){return NU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NU.apply(null,arguments)}function TQe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var CQe=A.useLayoutEffect,AQe=function(t){var n=A.useRef(t);return CQe(function(){n.current=t}),n},tue=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},IQe=function(t,n){var r=A.useRef();return A.useCallback(function(i){t.current=i,r.current&&tue(r.current,null),r.current=n,n&&tue(n,i)},[n])},nue={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},RQe=function(t){Object.keys(nue).forEach(function(n){t.style.setProperty(n,nue[n],"important")})},rue=RQe,qa=null,iue=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function kQe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),qa||(qa=document.createElement("textarea"),qa.setAttribute("tabindex","-1"),qa.setAttribute("aria-hidden","true"),rue(qa)),qa.parentNode===null&&document.body.appendChild(qa);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(f){var h=f;qa.style[h]=o[h]}),rue(qa),qa.value=t;var l=iue(qa,e);qa.value=t,l=iue(qa,e),qa.value="x";var u=qa.scrollHeight-i,c=u*n;a==="border-box"&&(c=c+i+s),l=Math.max(c,l);var d=u*r;return a==="border-box"&&(d=d+i+s),l=Math.min(d,l),[l,u]}var sue=function(){},PQe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},NQe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],OQe=!!document.documentElement.currentStyle,DQe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=PQe(NQe,n),i=r.boxSizing;if(i==="")return null;OQe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},MQe=DQe;function Ixe(e,t,n){var r=AQe(n);A.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var $Qe=function(t){Ixe(window,"resize",t)},LQe=function(t){Ixe(document.fonts,"loadingdone",t)},FQe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],jQe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?sue:o,l=t.onHeightChange,u=l===void 0?sue:l,c=TQe(t,FQe),d=c.value!==void 0,f=A.useRef(null),h=IQe(f,n),p=A.useRef(0),m=A.useRef(),g=function(){var _=f.current,w=r&&m.current?m.current:MQe(_);if(w){m.current=w;var E=kQe(w,_.value||_.placeholder||"x",s,i),S=E[0],x=E[1];p.current!==S&&(p.current=S,_.style.setProperty("height",S+"px","important"),u(S,{rowHeight:x}))}},y=function(_){d||g(),a(_)};return A.useLayoutEffect(g),$Qe(g),LQe(g),A.createElement("textarea",NU({},c,{onChange:y,ref:h}))},BQe=A.forwardRef(jQe);const zQe={},KA=Le((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=xe("Textarea",zQe,e),l=n&&jwe()!=="test",u=l?{maxRows:r,minRows:i}:{};return b.jsx(_u,{component:l?BQe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...u})});KA.classes=_u.classes;KA.displayName="@mantine/core/Textarea";const[UQe,VQe]=io("List component was not found in tree");var zK={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const HQe={},UK=Le((e,t)=>{const n=xe("ListItem",HQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:l,children:u,mod:c,...d}=n,f=VQe(),h=l||f.icon,p={classNames:r,styles:o};return b.jsx(_e,{...f.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:f.center},c],ref:t,...d,children:b.jsxs("div",{...f.getStyles("itemWrapper",p),children:[h&&b.jsx("span",{...f.getStyles("itemIcon",p),children:h}),b.jsx("span",{...f.getStyles("itemLabel",p),children:u})]})})});UK.classes=zK;UK.displayName="@mantine/core/ListItem";const qQe={type:"unordered"},WQe=(e,{size:t,spacing:n})=>({root:{"--list-fz":Js(t),"--list-lh":kwe(t),"--list-spacing":Qu(n)}}),af=Le((e,t)=>{const n=xe("List",qQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,type:c,withPadding:d,icon:f,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=vt({name:"List",classes:zK,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:WQe});return b.jsx(UQe,{value:{center:p,icon:f,getStyles:v},children:b.jsx(_e,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":d},g],ref:t,...y,children:u})})});af.classes=zK;af.displayName="@mantine/core/List";af.Item=UK;var Rxe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const oue={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:dd("overlay")},GQe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),uu=Le((e,t)=>{const n=xe("LoadingOverlay",oue,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,transitionProps:u,loaderProps:c,overlayProps:d,visible:f,zIndex:h,...p}=n,m=Is(),g=vt({name:"LoadingOverlay",classes:Rxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:GQe}),y={...oue.overlayProps,...d};return b.jsx(Df,{transition:"fade",...u,mounted:!!f,children:v=>b.jsxs(_e,{...g("root",{style:v}),ref:t,...p,children:[b.jsx(ws,{...g("loader"),unstyled:a,...c}),b.jsx(GA,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(d==null?void 0:d.color)||m.white}),b.jsx(GA,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(d==null?void 0:d.color)||m.colors.dark[5]})]})})});uu.classes=Rxe;uu.displayName="@mantine/core/LoadingOverlay";const[YQe,FR]=io("Menu component was not found in the tree");var cS={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const KQe={},VK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuDivider",KQe,e),l=FR();return b.jsx(_e,{ref:t,...l.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});VK.classes=cS;VK.displayName="@mantine/core/MenuDivider";const XQe={},HK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:l,children:u,...c}=xe("MenuDropdown",XQe,e),d=A.useRef(null),f=FR(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=d.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=ju(a,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.openDropdown()),m=ju(l,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.closeDropdown());return b.jsxs($n.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:ps(t,d),...f.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[b.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),u]})});HK.classes=cS;HK.displayName="@mantine/core/MenuDropdown";const QQe={},XA=Ls((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:l,leftSection:u,rightSection:c,children:d,disabled:f,...h}=xe("MenuItem",QQe,e),p=FR(),m=Is(),{dir:g}=El(),y=A.useRef(),v=p.getItemIndex(y.current),_=h,w=ju(_.onMouseLeave,()=>p.setHovered(-1)),E=ju(_.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),S=ju(_.onClick,()=>{typeof l=="boolean"?l&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),x=ju(_.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),T=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,I=a?Of({color:a,theme:m}):null;return b.jsxs(xs,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:x,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:ps(y,t),role:"menuitem",disabled:f,"data-menu-item":!0,"data-disabled":f||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:S,onKeyDown:gY({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:_.onKeydown}),__vars:{"--menu-item-color":I!=null&&I.isThemeColor&&(I==null?void 0:I.shade)===void 0?`var(--mantine-color-${I.color}-6)`:T==null?void 0:T.color,"--menu-item-hover":T==null?void 0:T.hover},children:[u&&b.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:u}),d&&b.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:d}),c&&b.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});XA.classes=cS;XA.displayName="@mantine/core/MenuItem";const JQe={},qK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuLabel",JQe,e),l=FR();return b.jsx(_e,{ref:t,...l.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});qK.classes=cS;qK.displayName="@mantine/core/MenuLabel";const ZQe={refProp:"ref"},kxe=A.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=xe("MenuTarget",ZQe,e);if(!Gy(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=FR(),o=ju(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=ju(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),l=ju(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return b.jsx($n.Target,{refProp:r,popupType:"menu",ref:t,...i,children:A.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:l,"data-expanded":s.opened?!0:void 0})})});kxe.displayName="@mantine/core/MenuTarget";const eJe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function dn(e){const t=xe("Menu",eJe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:l,closeOnItemClick:u,loop:c,closeOnEscape:d,trigger:f,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:_,menuItemTabIndex:w,keepMounted:E,...S}=t,x=vt({name:"Menu",classes:cS,props:t,classNames:m,styles:g,unstyled:y}),[T,{setHovered:I,resetHovered:P}]=$He(),[k,D]=Xi({value:s,defaultValue:o,finalValue:!1,onChange:l}),[R,M]=A.useState(!1),$=()=>{D(!1),M(!1),k&&(i==null||i())},L=()=>{D(!0),!k&&(r==null||r())},B=()=>{k?$():L()},{openDropdown:U,closeDropdown:z}=uQe({open:L,close:$,closeDelay:p,openDelay:h}),N=F=>MHe("[data-menu-item]","[data-menu-dropdown]",F),{resolvedClassNames:V,resolvedStyles:W}=gp({classNames:m,styles:g,props:t});return Ju(()=>{P()},[k]),b.jsx(YQe,{value:{getStyles:x,opened:k,toggleDropdown:B,getItemIndex:N,hovered:T,setHovered:I,openedViaClick:R,setOpenedViaClick:M,closeOnItemClick:u,closeDropdown:f==="click"?$:z,openDropdown:f==="click"?L:U,closeDropdownImmediately:$,loop:c,trigger:f,unstyled:y,menuItemTabIndex:w},children:b.jsx($n,{...S,opened:k,onChange:B,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:d,__staticSelector:"Menu",classNames:V,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}dn.extend=e=>e;dn.classes=cS;dn.displayName="@mantine/core/Menu";dn.Item=XA;dn.Label=qK;dn.Dropdown=HK;dn.Target=kxe;dn.Divider=VK;const[tJe,dS]=io("Modal component was not found in tree");var pg={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const nJe={},MF=Le((e,t)=>{const n=xe("ModalBody",nJe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=dS();return b.jsx(WY,{ref:t,...u.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...l})});MF.classes=pg;MF.displayName="@mantine/core/ModalBody";const rJe={},$F=Le((e,t)=>{const n=xe("ModalCloseButton",rJe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=dS();return b.jsx(GY,{ref:t,...u.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...l})});$F.classes=pg;$F.displayName="@mantine/core/ModalCloseButton";const iJe={},LF=Le((e,t)=>{const n=xe("ModalContent",iJe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:l,...u}=n,c=dS(),d=c.scrollAreaComponent||jEe;return b.jsx(FEe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...u,children:b.jsx(d,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Ce(c.yOffset)} * 2))`},children:l})})});LF.classes=pg;LF.displayName="@mantine/core/ModalContent";const sJe={},FF=Le((e,t)=>{const n=xe("ModalHeader",sJe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=dS();return b.jsx(YY,{ref:t,...u.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...l})});FF.classes=pg;FF.displayName="@mantine/core/ModalHeader";const oJe={},jF=Le((e,t)=>{const n=xe("ModalOverlay",oJe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=dS();return b.jsx(KY,{ref:t,...u.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...l})});jF.classes=pg;jF.displayName="@mantine/core/ModalOverlay";const aJe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:dd("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},lJe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Mr(t),"--modal-size":Jt(n,"modal-size"),"--modal-y-offset":Ce(r),"--modal-x-offset":Ce(i)}}),BF=Le((e,t)=>{const n=xe("ModalRoot",aJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,yOffset:u,scrollAreaComponent:c,radius:d,fullScreen:f,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=vt({name:m,classes:pg,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:lJe});return b.jsx(tJe,{value:{yOffset:u,scrollAreaComponent:c,getStyles:y,fullScreen:f},children:b.jsx(LEe,{ref:t,...y("root"),"data-full-screen":f||void 0,"data-centered":h||void 0,unstyled:a,...g})})});BF.classes=pg;BF.displayName="@mantine/core/ModalRoot";const uJe={},zF=Le((e,t)=>{const n=xe("ModalTitle",uJe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=dS();return b.jsx(XY,{ref:t,...u.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...l})});zF.classes=pg;zF.displayName="@mantine/core/ModalTitle";const cJe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:dd("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Ss=Le((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:l,...u}=xe("Modal",cJe,e),c=!!n||s;return b.jsxs(BF,{ref:t,radius:l,...u,children:[r&&b.jsx(jF,{...i}),b.jsxs(LF,{radius:l,children:[c&&b.jsxs(FF,{children:[n&&b.jsx(zF,{children:n}),s&&b.jsx($F,{...o})]}),b.jsx(MF,{children:a})]})]})});Ss.classes=pg;Ss.displayName="@mantine/core/Modal";Ss.Root=BF;Ss.Overlay=jF;Ss.Content=LF;Ss.Body=MF;Ss.Header=FF;Ss.Title=zF;Ss.CloseButton=$F;const[dJe,WK]=Hb(),[fJe,hJe]=Hb();var UF={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const pJe={},mJe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Jt(t):Jt(n,"pg-gap")}}),GK=Le((e,t)=>{const n=xe("PillGroup",pJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,disabled:c,...d}=n,f=WK(),h=(f==null?void 0:f.size)||u||void 0,p=vt({name:"PillGroup",classes:UF,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:mJe,stylesCtx:{size:h},rootSelector:"group"});return b.jsx(fJe,{value:{size:h,disabled:c},children:b.jsx(_e,{ref:t,size:h,...p("group"),...d})})});GK.classes=UF;GK.displayName="@mantine/core/PillGroup";const gJe={variant:"default"},yJe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Jt(n,"pill-fz"),"--pill-height":Jt(n,"pill-height"),"--pill-radius":t===void 0?void 0:Mr(t)}}),sb=Le((e,t)=>{const n=xe("Pill",gJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,variant:u,children:c,withRemoveButton:d,onRemove:f,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,_=hJe(),w=WK(),E=m||(_==null?void 0:_.size)||void 0,S=(w==null?void 0:w.variant)==="filled"?"contrast":u||"default",x=vt({name:"Pill",classes:UF,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:yJe,stylesCtx:{size:E}});return b.jsxs(_e,{component:"span",ref:t,variant:S,size:E,...x("root",{variant:S}),mod:[{"with-remove":d&&!g,disabled:g||(_==null?void 0:_.disabled)},y],...v,children:[b.jsx("span",{...x("label"),children:c}),d&&b.jsx(Xy,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...x("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:T=>{var I;T.preventDefault(),T.stopPropagation(),(I=h==null?void 0:h.onMouseDown)==null||I.call(h,T)},onClick:T=>{var I;T.stopPropagation(),f==null||f(),(I=h==null?void 0:h.onClick)==null||I.call(h,T)}})]})});sb.classes=UF;sb.displayName="@mantine/core/Pill";sb.Group=GK;var Pxe={field:"m_45c4369d"};const vJe={type:"visible"},YK=Le((e,t)=>{const n=xe("PillsInputField",vJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,type:u,disabled:c,id:d,pointer:f,mod:h,...p}=n,m=WK(),g=oS(),y=vt({name:"PillsInputField",classes:Pxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return b.jsx(_e,{component:"input",ref:ps(t,m==null?void 0:m.fieldRef),"data-type":u,disabled:v,mod:[{disabled:v,pointer:f},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||d,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:_=>!f&&_.stopPropagation()})});YK.classes=Pxe;YK.displayName="@mantine/core/PillsInputField";const bJe={},HE=Le((e,t)=>{const n=xe("PillsInput",bJe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:l,error:u,variant:c,...d}=n,f=A.useRef();return b.jsx(dJe,{value:{fieldRef:f,size:o,disabled:a,hasError:!!u,variant:c},children:b.jsx(_u,{size:o,error:u,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=f.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=f.current)==null||p.focus()},...d,multiline:!0,disabled:a,__staticSelector:l||"PillsInput",withAria:!1,children:r})})});HE.displayName="@mantine/core/PillsInput";HE.Field=YK;function _Je({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(VE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const wJe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},VF=Le((e,t)=>{const n=xe("MultiSelect",wJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,value:c,defaultValue:d,onChange:f,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:_,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:S,filter:x,limit:T,withScrollArea:I,maxDropdownHeight:P,searchValue:k,defaultSearchValue:D,onSearchChange:R,readOnly:M,disabled:$,onFocus:L,onBlur:B,onPaste:U,radius:z,rightSection:N,rightSectionWidth:V,rightSectionPointerEvents:W,rightSectionProps:F,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:Q,leftSectionProps:ie,inputContainer:se,inputWrapperOrder:ne,withAsterisk:ce,labelProps:Ee,descriptionProps:de,errorProps:We,wrapperProps:Fe,description:Ne,label:je,error:ye,maxValues:ae,searchable:Pe,nothingFoundMessage:Be,withCheckIcon:ft,checkIconPosition:Se,hidePickedOptions:he,withErrorStyles:Ve,name:tt,form:ge,id:ke,clearable:Ye,clearButtonProps:Xe,hiddenInputProps:xt,placeholder:An,hiddenInputValuesDivider:gr,required:yr,mod:kr,renderOption:Xt,onRemove:Dn,onClear:rr,scrollAreaProps:ir,...ao}=n,Oi=ta(ke),Ui=dK(m),Un=xF(Ui),Wn=LR({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{_==null||_(),Wn.resetSelectedOption()}}),{styleProps:Zi,rest:{type:Ed,autoComplete:Va,...gc}}=Wb(ao),[mt,fi]=Xi({value:c,defaultValue:d,finalValue:[],onChange:f}),[wn,$r]=Xi({value:k,defaultValue:D,finalValue:"",onChange:R}),ni=vt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:ri,resolvedStyles:ue}=gp({props:n,styles:o,classNames:r}),te=dt=>{h==null||h(dt),dt.key===" "&&!Pe&&(dt.preventDefault(),Wn.toggleDropdown()),dt.key==="Backspace"&&wn.length===0&&mt.length>0&&(Dn==null||Dn(mt[mt.length-1]),fi(mt.slice(0,mt.length-1)))},pe=mt.map((dt,kt)=>{var rn,Gn;return b.jsx(sb,{withRemoveButton:!M&&!((rn=Un[dt])!=null&&rn.disabled),onRemove:()=>{fi(mt.filter(Qn=>dt!==Qn)),Dn==null||Dn(dt)},unstyled:a,disabled:$,...ni("pill"),children:((Gn=Un[dt])==null?void 0:Gn.label)||dt},`${dt}-${kt}`)});A.useEffect(()=>{w&&Wn.selectFirstOption()},[w,mt]);const Ie=Ye&&mt.length>0&&!$&&!M&&b.jsx(sn.ClearButton,{size:u,...Xe,onClear:()=>{rr==null||rr(),fi([]),$r("")}}),Re=_Je({data:Ui,value:mt});return b.jsxs(b.Fragment,{children:[b.jsxs(sn,{store:Wn,classNames:ri,styles:ue,unstyled:a,size:u,readOnly:M,__staticSelector:"MultiSelect",onOptionSubmit:dt=>{E==null||E(dt),$r(""),Wn.updateSelectedOptionIndex("selected"),mt.includes(Un[dt].value)?(fi(mt.filter(kt=>kt!==Un[dt].value)),Dn==null||Dn(Un[dt].value)):mt.length<ae&&fi([...mt,Un[dt].value])},...S,children:[b.jsx(sn.DropdownTarget,{children:b.jsx(HE,{...Zi,__staticSelector:"MultiSelect",classNames:ri,styles:ue,unstyled:a,size:u,className:i,style:s,variant:p,disabled:$,radius:z,rightSection:N||Ie||b.jsx(sn.Chevron,{size:u,error:ye,unstyled:a}),rightSectionPointerEvents:W||(Ie?"all":"none"),rightSectionWidth:V,rightSectionProps:F,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:Q,leftSectionProps:ie,inputContainer:se,inputWrapperOrder:ne,withAsterisk:ce,labelProps:Ee,descriptionProps:de,errorProps:We,wrapperProps:Fe,description:Ne,label:je,error:ye,multiline:!0,withErrorStyles:Ve,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Ie?"all":"none"),multiline:!0},pointer:!Pe,onClick:()=>Pe?Wn.openDropdown():Wn.toggleDropdown(),"data-expanded":Wn.dropdownOpened||void 0,id:Oi,required:yr,mod:kr,children:b.jsxs(sb.Group,{disabled:$,unstyled:a,...ni("pillsList"),children:[pe,b.jsx(sn.EventsTarget,{autoComplete:Va,children:b.jsx(HE.Field,{...gc,ref:t,id:Oi,placeholder:An,type:!Pe&&!An?"hidden":"visible",...ni("inputField"),unstyled:a,onFocus:dt=>{L==null||L(dt),Pe&&Wn.openDropdown()},onBlur:dt=>{B==null||B(dt),Wn.closeDropdown(),$r("")},onKeyDown:te,value:wn,onChange:dt=>{$r(dt.currentTarget.value),Pe&&Wn.openDropdown(),w&&Wn.selectFirstOption()},disabled:$,readOnly:M||!Pe,pointer:!Pe})})]})})}),b.jsx(CK,{data:he?Re:Ui,hidden:M||$,filter:x,search:wn,limit:T,hiddenWhenEmpty:!Be,withScrollArea:I,maxDropdownHeight:P,filterOptions:Pe,value:mt,checkIconPosition:Se,withCheckIcon:ft,nothingFoundMessage:Be,unstyled:a,labelId:je?`${Oi}-label`:void 0,"aria-label":je?void 0:ao["aria-label"],renderOption:Xt,scrollAreaProps:ir})]}),b.jsx(sn.HiddenInput,{name:tt,valuesDivider:gr,value:mt,form:ge,disabled:$,...xt})]})});VF.classes={..._u.classes,...sn.classes};VF.displayName="@mantine/core/MultiSelect";function Nxe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var QA;(function(e){e.event="event",e.props="prop"})(QA||(QA={}));function c0(){}function EJe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function JA(e){return!!(e||"").match(/\d/)}function iE(e){return e==null}function xJe(e){return typeof e=="number"&&isNaN(e)}function Oxe(e){return iE(e)||xJe(e)||typeof e=="number"&&!isFinite(e)}function Dxe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function SJe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function TJe(e,t,n){var r=SJe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function CJe(e){var t=A.useRef(e);t.current=e;var n=A.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function KK(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function AJe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function Mxe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function aue(e,t){return Array(t+1).join(e)}function $xe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+aue("0",Math.abs(o))+i:o>=a?i=i+aue("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function lue(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=KK(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,l=parseFloat("0."+(o||"0")),u=o.length<=t?"0."+o:l.toFixed(t),c=u.split("."),d=s;s&&Number(c[0])&&(d=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var f=Mxe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+d+p+f}function a1(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Lxe=EJe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),IJe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function RJe(e,t,n){return Math.min(Math.max(e,t),n)}function J8(e){return Math.max(e.selectionStart,e.selectionEnd)}function kJe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function PJe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function NJe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function OJe(e,t,n,r,i,s,o){o===void 0&&(o=NJe);var a=i.findIndex(function(w){return w}),l=e.slice(0,a);!t&&!n.startsWith(l)&&(t=l,n=l+n,r=r+l.length);for(var u=n.length,c=e.length,d={},f=new Array(u),h=0;h<u;h++){f[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&d[p]!==!0){f[h]=p,d[p]=!0;break}}}for(var y=r;y<u&&(f[y]===-1||!s(n[y]));)y++;var v=y===u||f[y]===-1?c:f[y];for(y=r-1;y>0&&f[y]===-1;)y--;var _=y===-1||f[y]===-1?0:f[y]+1;return _>v?v:r-_<v-r?_:v}function uue(e,t,n,r){var i=e.length;if(t=RJe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function DJe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(JA(e[n])||JA(e[n-1]));return t}function Fxe(e,t,n,r,i,s){s===void 0&&(s=c0);var o=CJe(function(p,m){var g,y;return Oxe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?$xe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=A.useState(function(){return o(iE(e)?t:e,n)}),l=a[0],u=a[1],c=function(p,m){p.formattedValue!==l.formattedValue&&u({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},d=e,f=n;iE(e)&&(d=l.numAsString,f=!0);var h=o(d,f);return A.useMemo(function(){u(h)},[h.formattedValue]),[l,c]}function MJe(e){return e.replace(/[^0-9]/g,"")}function $Je(e){return e}function LJe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=$Je);var a=e.removeFormatting;a===void 0&&(a=MJe);var l=e.defaultValue,u=e.valueIsNumericString,c=e.onValueChange,d=e.isAllowed,f=e.onChange;f===void 0&&(f=c0);var h=e.onKeyDown;h===void 0&&(h=c0);var p=e.onMouseUp;p===void 0&&(p=c0);var m=e.onFocus;m===void 0&&(m=c0);var g=e.onBlur;g===void 0&&(g=c0);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=DJe);var _=e.isValidInputCharacter;_===void 0&&(_=JA);var w=e.isCharacterSame,E=Nxe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=Fxe(y,l,!!u,o,a,c),x=S[0],T=x.formattedValue,I=x.numAsString,P=S[1],k=A.useRef(),D=A.useRef({formattedValue:T,numAsString:I}),R=function(ye,ae){D.current={formattedValue:ye.formattedValue,numAsString:ye.value},P(ye,ae)},M=A.useState(!1),$=M[0],L=M[1],B=A.useRef(null),U=A.useRef({setCaretTimeout:null,focusTimeout:null});A.useEffect(function(){return L(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var z=o,N=function(ye,ae){var Pe=parseFloat(ae);return{formattedValue:ye,value:ae,floatValue:isNaN(Pe)?void 0:Pe}},V=function(ye,ae,Pe){ye.selectionStart===0&&ye.selectionEnd===ye.value.length||(a1(ye,ae),U.current.setCaretTimeout=setTimeout(function(){ye.value===Pe&&ye.selectionStart!==ae&&a1(ye,ae)},0))},W=function(ye,ae,Pe){return uue(ye,ae,v(ye),Pe)},F=function(ye,ae,Pe){var Be=v(ae),ft=OJe(ae,T,ye,Pe,Be,_,w);return ft=uue(ae,ft,Be),ft},H=function(ye){var ae=ye.formattedValue;ae===void 0&&(ae="");var Pe=ye.input,Be=ye.source,ft=ye.event,Se=ye.numAsString,he;if(Pe){var Ve=ye.inputValue||Pe.value,tt=J8(Pe);Pe.value=ae,he=F(Ve,ae,tt),he!==void 0&&V(Pe,he,ae)}ae!==T&&R(N(ae,Se),{event:ft,source:Be})};A.useEffect(function(){var ye=D.current,ae=ye.formattedValue,Pe=ye.numAsString;(T!==ae||I!==Pe)&&R(N(T,I),{event:void 0,source:QA.props})},[T,I]);var G=B.current?J8(B.current):void 0,Q=typeof window<"u"?A.useLayoutEffect:A.useEffect;Q(function(){var ye=B.current;if(T!==D.current.formattedValue&&ye){var ae=F(D.current.formattedValue,T,G);ye.value=T,V(ye,ae,T)}},[T]);var ie=function(ye,ae,Pe){var Be=ae.target,ft=k.current?IJe(k.current,Be.selectionEnd):Lxe(T,ye),Se=Object.assign(Object.assign({},ft),{lastValue:T}),he=a(ye,Se),Ve=z(he);if(he=a(Ve,void 0),d&&!d(N(Ve,he))){var tt=ae.target,ge=J8(tt),ke=F(ye,T,ge);return tt.value=T,V(tt,ke,T),!1}return H({formattedValue:Ve,numAsString:he,inputValue:ye,event:ae,source:Pe,input:ae.target}),!0},se=function(ye,ae){ae===void 0&&(ae=0);var Pe=ye.selectionStart,Be=ye.selectionEnd;k.current={selectionStart:Pe,selectionEnd:Be+ae}},ne=function(ye){var ae=ye.target,Pe=ae.value,Be=ie(Pe,ye,QA.event);Be&&f(ye),k.current=void 0},ce=function(ye){var ae=ye.target,Pe=ye.key,Be=ae.selectionStart,ft=ae.selectionEnd,Se=ae.value;Se===void 0&&(Se="");var he;Pe==="ArrowLeft"||Pe==="Backspace"?he=Math.max(Be-1,0):Pe==="ArrowRight"?he=Math.min(Be+1,Se.length):Pe==="Delete"&&(he=Be);var Ve=0;Pe==="Delete"&&Be===ft&&(Ve=1);var tt=Pe==="ArrowLeft"||Pe==="ArrowRight";if(he===void 0||Be!==ft&&!tt){h(ye),se(ae,Ve);return}var ge=he;if(tt){var ke=Pe==="ArrowLeft"?"left":"right";ge=W(Se,he,ke),ge!==he&&ye.preventDefault()}else Pe==="Delete"&&!_(Se[he])?ge=W(Se,he,"right"):Pe==="Backspace"&&!_(Se[he])&&(ge=W(Se,he,"left"));ge!==he&&V(ae,ge,Se),h(ye),se(ae,Ve)},Ee=function(ye){var ae=ye.target,Pe=function(){var Be=ae.selectionStart,ft=ae.selectionEnd,Se=ae.value;if(Se===void 0&&(Se=""),Be===ft){var he=W(Se,Be);he!==Be&&V(ae,he,Se)}};Pe(),requestAnimationFrame(function(){Pe()}),p(ye),se(ae)},de=function(ye){ye.persist&&ye.persist();var ae=ye.target,Pe=ye.currentTarget;B.current=ae,U.current.focusTimeout=setTimeout(function(){var Be=ae.selectionStart,ft=ae.selectionEnd,Se=ae.value;Se===void 0&&(Se="");var he=W(Se,Be);he!==Be&&!(Be===0&&ft===Se.length)&&V(ae,he,Se),m(Object.assign(Object.assign({},ye),{currentTarget:Pe}))},0)},We=function(ye){B.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(ye)},Fe=$&&kJe()?"numeric":void 0,Ne=Object.assign({inputMode:Fe},E,{type:t,value:T,onChange:ne,onKeyDown:ce,onMouseUp:Ee,onFocus:de,onBlur:We});if(n==="text")return i?us.createElement(us.Fragment,null,i(T,E)||null):us.createElement("span",Object.assign({},E,{ref:s}),T);if(r){var je=r;return us.createElement(je,Object.assign({},Ne,{ref:s}))}return us.createElement("input",Object.assign({},Ne,{ref:s}))}function cue(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var l=HF(t),u=l.thousandSeparator,c=l.decimalSeparator,d=n!==0&&e.indexOf(".")!==-1||n&&r,f=KK(e,o),h=f.beforeDecimal,p=f.afterDecimal,m=f.addNegation;return n!==void 0&&(p=Mxe(p,n,!!r)),u&&(h=TJe(h,u,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(d&&c||"")+p,e}function HF(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function FJe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function jJe(e,t){return new RegExp("(^-)|[0-9]|"+Dxe(e),"g")}function BJe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function zJe(e,t,n){var r;t===void 0&&(t=PJe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,l=t.from,u=t.to,c=u.start,d=u.end,f=HF(n),h=f.allowedDecimalSeparators,p=f.decimalSeparator,m=e[d]===p;if(JA(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(d-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,U,z){var N=!1,V=!1;s.startsWith("-")?N=!1:B.startsWith("--")?(N=!1,V=!0):o.startsWith("-")&&B.length===o.length?N=!1:B[0]==="-"&&(N=!0);var W=N?1:0;return V&&(W=2),W&&(B=B.substring(W),U-=W,z-=W),{value:B,start:U,end:z,hasNegation:N}},v=y(e,c,d),_=v.hasNegation;r=v,e=r.value,c=r.start,d=r.end;var w=y(t.lastValue,l.start,l.end),E=w.start,S=w.end,x=w.value,T=e.substring(c,d);e.length&&x.length&&(E>x.length-o.length||S<s.length)&&!(T&&o.startsWith(T))&&(e=x);var I=0;e.startsWith(s)?I+=s.length:c<s.length&&(I=c),e=e.substring(I),d-=I;var P=e.length,k=e.length-o.length;e.endsWith(o)?P=k:(d>k||d>e.length-o.length)&&(P=d),e=e.substring(0,P),e=FJe(_?"-"+e:e,i),e=(e.match(jJe(p))||[]).join("");var D=e.indexOf(p);e=e.replace(new RegExp(Dxe(p),"g"),function(B,U){return U===D?".":""});var R=KK(e,i),M=R.beforeDecimal,$=R.afterDecimal,L=R.addNegation;return u.end-u.start<l.end-l.start&&M===""&&m&&!parseFloat($)&&(e=L?"-":""),e}function UJe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function VJe(e){var t=HF(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function HJe(e){e=VJe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=c0);var s=e.onBlur;s===void 0&&(s=c0);var o=e.thousandSeparator,a=e.decimalScale,l=e.fixedDecimalScale,u=e.prefix;u===void 0&&(u="");var c=e.defaultValue,d=e.value,f=e.valueIsNumericString,h=e.onValueChange,p=Nxe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=HF(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(L){return cue(L,e)},_=function(L,B){return zJe(L,B,e)},w=iE(d)?c:d,E=f??BJe(w,u,t);iE(d)?iE(c)||(E=E||typeof c=="number"):E=E||typeof d=="number";var S=function(L){return Oxe(L)?L:(typeof L=="number"&&(L=$xe(L)),E&&typeof a=="number"?lue(L,a,!!l):L)},x=Fxe(S(d),S(c),!!E,v,_,h),T=x[0],I=T.numAsString,P=T.formattedValue,k=x[1],D=function(L){var B=L.target,U=L.key,z=B.selectionStart,N=B.selectionEnd,V=B.value;if(V===void 0&&(V=""),(U==="Backspace"||U==="Delete")&&N<u.length){L.preventDefault();return}if(z!==N){i(L);return}U==="Backspace"&&V[0]==="-"&&z===u.length+1&&n&&a1(B,1),a&&l&&(U==="Backspace"&&V[z-1]===g?(a1(B,z-1),L.preventDefault()):U==="Delete"&&V[z]===g&&L.preventDefault()),y!=null&&y.includes(U)&&V[z]===g&&a1(B,z+1);var W=o===!0?",":o;U==="Backspace"&&V[z-1]===W&&a1(B,z-1),U==="Delete"&&V[z]===W&&a1(B,z+1),i(L)},R=function(L){var B=I;if(B.match(/\d/g)||(B=""),r||(B=AJe(B)),l&&a&&(B=lue(B,a,l)),B!==I){var U=cue(B,e);k({formattedValue:U,value:B,floatValue:parseFloat(B)},{event:L,source:QA.event})}s(L)},M=function(L){return L===g?!0:JA(L)},$=function(L){var B=L.currentValue,U=L.lastValue,z=L.formattedValue,N=L.currentValueIndex,V=L.formattedValueIndex,W=B[N],F=z[V],H=Lxe(U,B),G=H.to;return N>=G.start&&N<G.end&&y&&y.includes(W)&&F===g?!0:W===F};return Object.assign(Object.assign({},p),{value:P,valueIsNumericString:!1,isValidInputCharacter:M,isCharacterSame:$,onValueChange:k,format:v,removeFormatting:_,getCaretBoundary:function(L){return UJe(L,e)},onKeyDown:D,onBlur:R})}function qJe(e){var t=HJe(e);return us.createElement(LJe,Object.assign({},t))}function due({direction:e,style:t,...n}){return b.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:b.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var OU={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const WJe=/^(0\.0*|-0(\.0*)?)$/,GJe=/^-?0\d+(\.\d+)?\.?$/;function YJe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function fue(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const KJe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},XJe=(e,{size:t})=>({controls:{"--ni-chevron-size":Jt(t,"ni-chevron-size")}}),XK=Le((e,t)=>{const n=xe("NumberInput",KJe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:l,onValueChange:u,value:c,defaultValue:d,max:f,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:_,allowDecimal:w,decimalScale:E,onKeyDown:S,onKeyDownCapture:x,handlersRef:T,startValue:I,disabled:P,rightSectionPointerEvents:k,allowNegative:D,readOnly:R,size:M,rightSectionWidth:$,stepHoldInterval:L,stepHoldDelay:B,allowLeadingZeros:U,withKeyboardEvents:z,trimLeadingZeroesOnBlur:N,...V}=n,W=vt({name:"NumberInput",classes:OU,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:XJe}),{resolvedClassNames:F,resolvedStyles:H}=gp({classNames:i,styles:s,props:n}),[G,Q]=Xi({value:c,defaultValue:d,onChange:l}),ie=B!==void 0&&L!==void 0,se=A.useRef(null),ne=A.useRef(null),ce=A.useRef(0),Ee=(he,Ve)=>{Ve.source==="event"&&Q(YJe(he.floatValue)&&!WJe.test(he.value)&&!(U&&GJe.test(he.value))?he.floatValue:he.value),u==null||u(he,Ve)},de=he=>{const Ve=String(he).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return Ve?Math.max(0,(Ve[1]?Ve[1].length:0)-(Ve[2]?+Ve[2]:0)):0},We=he=>{se.current&&typeof he<"u"&&se.current.setSelectionRange(he,he)},Fe=A.useRef();Fe.current=()=>{let he;const Ve=de(G),tt=de(p),ge=Math.max(Ve,tt),ke=10**ge;if(typeof G!="number"||Number.isNaN(G))he=Lc(I,h,f);else if(f!==void 0){const Xe=(Math.round(G*ke)+Math.round(p*ke))/ke;he=Xe<=f?Xe:f}else he=(Math.round(G*ke)+Math.round(p*ke))/ke;const Ye=he.toFixed(ge);Q(parseFloat(Ye)),u==null||u({floatValue:parseFloat(Ye),formattedValue:Ye,value:Ye},{source:"increment"}),setTimeout(()=>{var Xe;return We((Xe=se.current)==null?void 0:Xe.value.length)},0)};const Ne=A.useRef();Ne.current=()=>{let he;const Ve=h!==void 0?h:D?Number.MIN_SAFE_INTEGER:0,tt=de(G),ge=de(p),ke=Math.max(tt,ge),Ye=10**ke;if(typeof G!="number"||Number.isNaN(G))he=Lc(I,Ve,f);else{const xt=(Math.round(G*Ye)-Math.round(p*Ye))/Ye;he=Ve!==void 0&&xt<Ve?Ve:xt}const Xe=he.toFixed(ke);Q(parseFloat(Xe)),u==null||u({floatValue:parseFloat(Xe),formattedValue:Xe,value:Xe},{source:"decrement"}),setTimeout(()=>{var xt;return We((xt=se.current)==null?void 0:xt.value.length)},0)};const je=he=>{S==null||S(he),!(R||!z)&&(he.key==="ArrowUp"&&(he.preventDefault(),Fe.current()),he.key==="ArrowDown"&&(he.preventDefault(),Ne.current()))},ye=he=>{if(x==null||x(he),he.key==="Backspace"){const Ve=se.current;Ve.selectionStart===0&&Ve.selectionStart===Ve.selectionEnd&&(he.preventDefault(),window.setTimeout(()=>We(0),0))}};bY(T,{increment:Fe.current,decrement:Ne.current});const ae=he=>{he?Fe.current():Ne.current(),ce.current+=1},Pe=he=>{if(ae(he),ie){const Ve=typeof L=="number"?L:L(ce.current);ne.current=window.setTimeout(()=>Pe(he),Ve)}},Be=(he,Ve)=>{var tt;he.preventDefault(),(tt=se.current)==null||tt.focus(),ae(Ve),ie&&(ne.current=window.setTimeout(()=>Pe(Ve),B))},ft=()=>{ne.current&&window.clearTimeout(ne.current),ne.current=null,ce.current=0},Se=b.jsxs("div",{...W("controls"),children:[b.jsx(xs,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:P||typeof G=="number"&&f!==void 0&&G>=f,mod:{direction:"up"},onMouseDown:he=>he.preventDefault(),onPointerDown:he=>{Be(he,!0)},onPointerUp:ft,onPointerLeave:ft,children:b.jsx(due,{direction:"up"})}),b.jsx(xs,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:P||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:he=>he.preventDefault(),onPointerDown:he=>{Be(he,!1)},onPointerUp:ft,onPointerLeave:ft,children:b.jsx(due,{direction:"down"})})]});return b.jsx(_u,{component:qJe,allowNegative:D,className:yt(OU.root,r),size:M,...V,readOnly:R,disabled:P,value:G,getInputRef:ps(t,se),onValueChange:Ee,rightSection:m||R?g:g||Se,classNames:F,styles:H,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:je,onKeyDownCapture:ye,rightSectionPointerEvents:k??(P?"none":void 0),rightSectionWidth:$??`var(--ni-right-section-width-${M||"sm"})`,allowLeadingZeros:U,onBlur:he=>{if(_==null||_(he),v==="blur"&&typeof G=="number"&&Lc(G,h,f)!==G&&Q(Lc(G,h,f)),N&&typeof G=="string"){const Ve=G.replace(/^0+/,""),tt=parseFloat(Ve);Q(Number.isNaN(tt)||tt>Number.MAX_SAFE_INTEGER?Ve:tt)}},isAllowed:he=>v==="strict"?y?y(he)&&fue(he.floatValue,h,f):fue(he.floatValue,h,f):y?y(he):!0})});XK.classes={..._u.classes,...OU};XK.displayName="@mantine/core/NumberInput";const[QJe,qF]=io("Pagination.Root component was not found in tree");var jR={root:"m_4addd315",control:"m_326d024a",dots:"m_4ad7767d"};const JJe={withPadding:!0},BR=Le((e,t)=>{const n=xe("PaginationControl",JJe,e),{classNames:r,className:i,style:s,styles:o,vars:a,active:l,disabled:u,withPadding:c,mod:d,...f}=n,h=qF(),p=u||h.disabled;return b.jsx(xs,{ref:t,disabled:p,mod:[{active:l,disabled:p,"with-padding":c},d],...h.getStyles("control",{className:i,style:s,classNames:r,styles:o,active:!p}),...f})});BR.classes=jR;BR.displayName="@mantine/core/PaginationControl";function zR({style:e,children:t,path:n,...r}){return b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)",...e},...r,children:b.jsx("path",{d:n,fill:"currentColor"})})}const ZJe=e=>b.jsx(zR,{...e,path:"M8.781 8l-3.3-3.3.943-.943L10.667 8l-4.243 4.243-.943-.943 3.3-3.3z"}),eZe=e=>b.jsx(zR,{...e,path:"M7.219 8l3.3 3.3-.943.943L5.333 8l4.243-4.243.943.943-3.3 3.3z"}),tZe=e=>b.jsx(zR,{...e,path:"M6.85355 3.85355C7.04882 3.65829 7.04882 3.34171 6.85355 3.14645C6.65829 2.95118 6.34171 2.95118 6.14645 3.14645L2.14645 7.14645C1.95118 7.34171 1.95118 7.65829 2.14645 7.85355L6.14645 11.8536C6.34171 12.0488 6.65829 12.0488 6.85355 11.8536C7.04882 11.6583 7.04882 11.3417 6.85355 11.1464L3.20711 7.5L6.85355 3.85355ZM12.8536 3.85355C13.0488 3.65829 13.0488 3.34171 12.8536 3.14645C12.6583 2.95118 12.3417 2.95118 12.1464 3.14645L8.14645 7.14645C7.95118 7.34171 7.95118 7.65829 8.14645 7.85355L12.1464 11.8536C12.3417 12.0488 12.6583 12.0488 12.8536 11.8536C13.0488 11.6583 13.0488 11.3417 12.8536 11.1464L9.20711 7.5L12.8536 3.85355Z"}),nZe=e=>b.jsx(zR,{...e,path:"M2.14645 11.1464C1.95118 11.3417 1.95118 11.6583 2.14645 11.8536C2.34171 12.0488 2.65829 12.0488 2.85355 11.8536L6.85355 7.85355C7.04882 7.65829 7.04882 7.34171 6.85355 7.14645L2.85355 3.14645C2.65829 2.95118 2.34171 2.95118 2.14645 3.14645C1.95118 3.34171 1.95118 3.65829 2.14645 3.85355L5.79289 7.5L2.14645 11.1464ZM8.14645 11.1464C7.95118 11.3417 7.95118 11.6583 8.14645 11.8536C8.34171 12.0488 8.65829 12.0488 8.85355 11.8536L12.8536 7.85355C13.0488 7.65829 13.0488 7.34171 12.8536 7.14645L8.85355 3.14645C8.65829 2.95118 8.34171 2.95118 8.14645 3.14645C7.95118 3.34171 7.95118 3.65829 8.14645 3.85355L11.7929 7.5L8.14645 11.1464Z"}),rZe=e=>b.jsx(zR,{...e,path:"M2 8c0-.733.6-1.333 1.333-1.333.734 0 1.334.6 1.334 1.333s-.6 1.333-1.334 1.333C2.6 9.333 2 8.733 2 8zm9.333 0c0-.733.6-1.333 1.334-1.333C13.4 6.667 14 7.267 14 8s-.6 1.333-1.333 1.333c-.734 0-1.334-.6-1.334-1.333zM6.667 8c0-.733.6-1.333 1.333-1.333s1.333.6 1.333 1.333S8.733 9.333 8 9.333 6.667 8.733 6.667 8z"}),iZe={icon:rZe},WF=Le((e,t)=>{const n=xe("PaginationDots",iZe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:l,...u}=n,c=qF(),d=l;return b.jsx(_e,{ref:t,...c.getStyles("dots",{className:i,style:s,styles:o,classNames:r}),...u,children:b.jsx(d,{style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});WF.classes=jR;WF.displayName="@mantine/core/PaginationDots";function GF({icon:e,name:t,action:n,type:r}){const i={icon:e},s=A.forwardRef((o,a)=>{const{icon:l,...u}=xe(t,i,o),c=l,d=qF(),f=r==="next"?d.active===d.total:d.active===1;return b.jsx(BR,{disabled:d.disabled||f,ref:a,onClick:d[n],withPadding:!1,...u,children:b.jsx(c,{className:"mantine-rotate-rtl",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});return s.displayName=`@mantine/core/${t}`,s}const jxe=GF({icon:ZJe,name:"PaginationNext",action:"onNext",type:"next"}),Bxe=GF({icon:eZe,name:"PaginationPrevious",action:"onPrevious",type:"previous"}),zxe=GF({icon:tZe,name:"PaginationFirst",action:"onFirst",type:"previous"}),Uxe=GF({icon:nZe,name:"PaginationLast",action:"onLast",type:"next"});function QK({dotsIcon:e}){const t=qF(),n=t.range.map((r,i)=>{var s;return r==="dots"?b.jsx(WF,{icon:e},i):b.jsx(BR,{active:r===t.active,"aria-current":r===t.active?"page":void 0,onClick:()=>t.onChange(r),disabled:t.disabled,...(s=t.getItemProps)==null?void 0:s.call(t,r),children:r},i)});return b.jsx(b.Fragment,{children:n})}QK.displayName="@mantine/core/PaginationItems";const sZe={siblings:1,boundaries:1},oZe=(e,{size:t,radius:n,color:r,autoContrast:i})=>({root:{"--pagination-control-radius":n===void 0?void 0:Mr(n),"--pagination-control-size":Jt(t,"pagination-control-size"),"--pagination-control-fz":Js(t),"--pagination-active-bg":r?Yr(r,e):void 0,"--pagination-active-color":Ky(i,e)?mp({color:r,theme:e,autoContrast:i}):void 0}}),YF=Le((e,t)=>{const n=xe("PaginationRoot",sZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,total:u,value:c,defaultValue:d,onChange:f,disabled:h,siblings:p,boundaries:m,color:g,radius:y,onNextPage:v,onPreviousPage:_,onFirstPage:w,onLastPage:E,getItemProps:S,autoContrast:x,...T}=n,I=vt({name:"Pagination",classes:jR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:oZe}),{range:P,setPage:k,next:D,previous:R,active:M,first:$,last:L}=QHe({page:c,initialPage:d,onChange:f,total:u,siblings:p,boundaries:m}),B=ju(v,D),U=ju(_,R),z=ju(w,$),N=ju(E,L);return b.jsx(QJe,{value:{total:u,range:P,active:M,disabled:h,getItemProps:S,onChange:k,onNext:B,onPrevious:U,onFirst:z,onLast:N,getStyles:I},children:b.jsx(_e,{ref:t,...I("root"),...T})})});YF.classes=jR;YF.displayName="@mantine/core/PaginationRoot";const aZe={withControls:!0,siblings:1,boundaries:1,gap:8},$f=Le((e,t)=>{const n=xe("Pagination",aZe,e),{withEdges:r,withControls:i,getControlProps:s,nextIcon:o,previousIcon:a,lastIcon:l,firstIcon:u,dotsIcon:c,total:d,gap:f,hideWithOnePage:h,...p}=n;return d<=0||h&&d===1?null:b.jsx(YF,{ref:t,total:d,...p,children:b.jsxs(Tn,{gap:f,children:[r&&b.jsx(zxe,{icon:u,...s==null?void 0:s("first")}),i&&b.jsx(Bxe,{icon:a,...s==null?void 0:s("previous")}),b.jsx(QK,{dotsIcon:c}),i&&b.jsx(jxe,{icon:o,...s==null?void 0:s("next")}),r&&b.jsx(Uxe,{icon:l,...s==null?void 0:s("last")})]})})});$f.classes=jR;$f.displayName="@mantine/core/Pagination";$f.Root=YF;$f.Control=BR;$f.Dots=WF;$f.First=zxe;$f.Last=Uxe;$f.Next=jxe;$f.Previous=Bxe;$f.Items=QK;const[lZe,Vxe]=io("Progress.Root component was not found in tree");var UR={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const uZe={},JK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ProgressLabel",uZe,e),l=Vxe();return b.jsx(_e,{ref:t,...l.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});JK.classes=UR;JK.displayName="@mantine/core/ProgressLabel";const cZe={},dZe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":Jt(t,"progress-size"),"--progress-radius":n===void 0?void 0:Mr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),KF=Le((e,t)=>{const n=xe("ProgressRoot",cZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,autoContrast:u,transitionDuration:c,...d}=n,f=vt({name:"Progress",classes:UR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:dZe});return b.jsx(lZe,{value:{getStyles:f,autoContrast:u},children:b.jsx(_e,{ref:t,...f("root"),...d})})});KF.classes=UR;KF.displayName="@mantine/core/ProgressRoot";const fZe={withAria:!0},XF=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:l,color:u,striped:c,animated:d,mod:f,...h}=xe("ProgressSection",fZe,e),p=Vxe(),m=Is(),g=l?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return b.jsx(_e,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||d,animated:d},f],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Yr(u,m),"--progress-label-color":Ky(p.autoContrast,m)?mp({color:u,theme:m,autoContrast:p.autoContrast}):void 0}})});XF.classes=UR;XF.displayName="@mantine/core/ProgressSection";const hZe={},Xb=Le((e,t)=>{const n=xe("Progress",hZe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:l,animated:u,"aria-label":c,...d}=n,{resolvedClassNames:f,resolvedStyles:h}=gp({classNames:i,styles:s,props:n});return b.jsx(KF,{ref:t,classNames:f,styles:h,vars:o,...d,children:b.jsx(XF,{value:r,color:a,striped:l,animated:u,"aria-label":c})})});Xb.classes=UR;Xb.displayName="@mantine/core/Progress";Xb.Section=XF;Xb.Root=KF;Xb.Label=JK;const[pZe,Hxe]=Hb(),[mZe,gZe]=Hb();var qxe={card:"m_9dc8ae12"};const yZe={withBorder:!0},vZe=(e,{radius:t})=>({card:{"--card-radius":Mr(t)}}),ZK=Le((e,t)=>{const n=xe("RadioCard",yZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,checked:u,mod:c,withBorder:d,value:f,onClick:h,name:p,onKeyDown:m,...g}=n,y=vt({name:"RadioCard",classes:qxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:vZe,rootSelector:"card"}),{dir:v}=El(),_=Hxe(),w=typeof u=="boolean"?u:(_==null?void 0:_.value)===f||!1,E=p||(_==null?void 0:_.name),S=x=>{if(m==null||m(x),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(x.nativeEvent.code)){x.preventDefault();const T=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),I=T.findIndex(D=>D===x.target),P=I+1>=T.length?0:I+1,k=I-1<0?T.length-1:I-1;x.nativeEvent.code==="ArrowDown"&&(T[P].focus(),T[P].click()),x.nativeEvent.code==="ArrowUp"&&(T[k].focus(),T[k].click()),x.nativeEvent.code==="ArrowLeft"&&(T[v==="ltr"?k:P].focus(),T[v==="ltr"?k:P].click()),x.nativeEvent.code==="ArrowRight"&&(T[v==="ltr"?P:k].focus(),T[v==="ltr"?P:k].click())}};return b.jsx(mZe,{value:{checked:w},children:b.jsx(xs,{ref:t,mod:[{"with-border":d,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:x=>{h==null||h(x),_==null||_.onChange(f||"")},onKeyDown:S})})});ZK.displayName="@mantine/core/RadioCard";ZK.classes=qxe;const bZe={},eX=Le((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:l,readOnly:u,...c}=xe("RadioGroup",bZe,e),d=ta(l),[f,h]=Xi({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!u&&h(typeof m=="string"?m:m.currentTarget.value);return b.jsx(pZe,{value:{value:f,onChange:p,size:s,name:d},children:b.jsx(Kr.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:b.jsx(xK,{role:"radiogroup",children:a})})})});eX.classes=Kr.Wrapper.classes;eX.displayName="@mantine/core/RadioGroup";function Wxe({size:e,style:t,...n}){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Ce(e),height:Ce(e),...t},"aria-hidden":!0,...n,children:b.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var Gxe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const _Ze={icon:Wxe},wZe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Of({color:n||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Jt(r,"radio-size"),"--radio-radius":t===void 0?void 0:Mr(t),"--radio-color":s==="outline"?l:Yr(n,e),"--radio-icon-size":Jt(r,"radio-icon-size"),"--radio-icon-color":i?Yr(i,e):Ky(o,e)?mp({color:n,theme:e,autoContrast:o}):void 0}}},tX=Le((e,t)=>{const n=xe("RadioIndicator",_Ze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,icon:u,radius:c,color:d,iconColor:f,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,_=u,w=vt({name:"RadioIndicator",classes:Gxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:wZe,rootSelector:"indicator"}),E=gZe(),S=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return b.jsx(_e,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:b.jsx(_,{...w("icon")})})});tX.displayName="@mantine/core/RadioIndicator";tX.classes=Gxe;var Yxe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const EZe={labelPosition:"right"},xZe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Of({color:r||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Jt(t,"radio-size"),"--radio-radius":n===void 0?void 0:Mr(n),"--radio-color":s==="outline"?l:Yr(r,e),"--radio-icon-color":i?Yr(i,e):Ky(o,e)?mp({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":Jt(t,"radio-icon-size")}}},ay=Le((e,t)=>{const n=xe("Radio",EZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,id:u,size:c,label:d,labelPosition:f,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:_,icon:w=Wxe,rootRef:E,iconColor:S,onChange:x,mod:T,...I}=n,P=vt({name:"Radio",classes:Yxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:xZe}),k=Hxe(),D=(k==null?void 0:k.size)??c,R=n.size?c:D,{styleProps:M,rest:$}=Wb(I),L=ta(u),B=k?{checked:k.value===$.value,name:$.name??k.name,onChange:U=>{k.onChange(U),x==null||x(U)}}:{};return b.jsx(SF,{...P("root"),__staticSelector:"Radio",__stylesApiProps:n,id:L,size:R,labelPosition:f,label:d,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:E,mod:T,...M,..._,children:b.jsxs(_e,{...P("inner"),mod:{"label-position":f},children:[b.jsx(_e,{...P("radio",{focusable:!0,variant:y}),onChange:x,...$,...B,component:"input",mod:{error:!!p},ref:t,id:L,disabled:v,type:"radio"}),b.jsx(w,{...P("icon"),"aria-hidden":!0})]})})});ay.classes=Yxe;ay.displayName="@mantine/core/Radio";ay.Group=eX;ay.Card=ZK;ay.Indicator=tX;const SZe={duration:100,transition:"fade"};function TZe(e,t){return{...SZe,...t,...e}}function CZe({offset:e,position:t,defaultOpened:n}){const[r,i]=A.useState(n),s=A.useRef(),{x:o,y:a,elements:l,refs:u,update:c,placement:d}=UY({placement:t,middleware:[FY({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=d.includes("right")?e:t.includes("left")?e*-1:0,h=d.includes("bottom")?e:t.includes("top")?e*-1:0,p=A.useCallback(({clientX:m,clientY:g})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+f,top:g+h,right:m,bottom:g}}})},[l.reference]);return A.useEffect(()=>{if(u.floating.current){const m=s.current;m.addEventListener("mousemove",p);const g=xm(u.floating.current);return g.forEach(y=>{y.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(y=>{y.removeEventListener("scroll",c)})}}},[l.reference,u.floating.current,c,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:u.setFloating}}var QF={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const AZe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:dd("popover")},IZe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Mr(t),"--tooltip-bg":n?Yr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),nX=Le((e,t)=>{const n=xe("TooltipFloating",AZe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:l,styles:u,unstyled:c,radius:d,color:f,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,defaultOpened:_,variant:w,vars:E,portalProps:S,...x}=n,T=Is(),I=vt({name:"TooltipFloating",props:n,classes:QF,className:a,style:o,classNames:l,styles:u,unstyled:c,rootSelector:"tooltip",vars:E,varsResolver:IZe}),{handleMouseMove:P,x:k,y:D,opened:R,boundaryRef:M,floating:$,setOpened:L}=CZe({offset:p,position:m,defaultOpened:_});if(!Gy(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const B=ps(M,r.ref,t),U=N=>{var V,W;(W=(V=r.props).onMouseEnter)==null||W.call(V,N),P(N),L(!0)},z=N=>{var V,W;(W=(V=r.props).onMouseLeave)==null||W.call(V,N),L(!1)};return b.jsxs(b.Fragment,{children:[b.jsx(NR,{...S,withinPortal:s,children:b.jsx(_e,{...x,...I("tooltip",{style:{...TY(o,T),zIndex:y,display:!v&&R?"block":"none",top:(D&&Math.round(D))??"",left:(k&&Math.round(k))??""}}),variant:w,ref:$,mod:{multiline:g},children:h})}),A.cloneElement(r,{...r.props,[i]:B,onMouseEnter:U,onMouseLeave:z})]})});nX.classes=QF;nX.displayName="@mantine/core/TooltipFloating";const Kxe=A.createContext(!1),RZe=Kxe.Provider,kZe=()=>A.useContext(Kxe),PZe={openDelay:0,closeDelay:0};function Xxe(e){const{openDelay:t,closeDelay:n,children:r}=xe("TooltipGroup",PZe,e);return b.jsx(RZe,{value:!0,children:b.jsx(XGe,{delay:{open:t,close:n},children:r})})}Xxe.displayName="@mantine/core/TooltipGroup";function NZe(e){var S,x,T;const[t,n]=A.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,s=kZe(),o=ta(),{delay:a,currentId:l,setCurrentId:u}=SEe(),c=A.useCallback(I=>{n(I),I&&u(o)},[u,o]),{x:d,y:f,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=UY({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[bEe(e.offset),FY({padding:8}),CU(),_Ee({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[AU()]:[]]}),{getReferenceProps:_,getFloatingProps:w}=rYe([KGe(h,{enabled:(S=e.events)==null?void 0:S.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((x=e.events)!=null&&x.touch)}),nYe(h,{enabled:(T=e.events)==null?void 0:T.focus,visibleOnly:!0}),sYe(h,{role:"tooltip"}),eYe(h,{enabled:typeof e.opened>"u"}),QGe(h,{id:o})]);PEe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),Ju(()=>{var I;(I=e.onPositionChange)==null||I.call(e,g)},[g]);const E=i&&l&&l!==o;return{x:d,y:f,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:_,isGroupPhase:E,opened:i,placement:g}}const hue={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:dd("popover"),positionDependencies:[]},OZe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Mr(t),"--tooltip-bg":n?Yr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),on=Le((e,t)=>{const n=xe("Tooltip",hue,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:l,onPositionChange:u,opened:c,defaultOpened:d,withinPortal:f,radius:h,color:p,classNames:m,styles:g,unstyled:y,style:v,className:_,withArrow:w,arrowSize:E,arrowOffset:S,arrowRadius:x,arrowPosition:T,offset:I,transitionProps:P,multiline:k,events:D,zIndex:R,disabled:M,positionDependencies:$,onClick:L,onMouseEnter:B,onMouseLeave:U,inline:z,variant:N,keepMounted:V,vars:W,portalProps:F,mod:H,floatingStrategy:G,...Q}=xe("Tooltip",hue,n),{dir:ie}=El(),se=A.useRef(null),ne=NZe({position:TEe(ie,i),closeDelay:l,openDelay:a,onPositionChange:u,opened:c,defaultOpened:d,events:D,arrowRef:se,arrowOffset:S,offset:typeof I=="number"?I+(w?E/2:0):I,positionDependencies:[...$,r],inline:z,strategy:G}),ce=vt({name:"Tooltip",props:n,classes:QF,className:_,style:v,classNames:m,styles:g,unstyled:y,rootSelector:"tooltip",vars:W,varsResolver:OZe});if(!Gy(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Ee=ps(ne.reference,r.ref,t),de=TZe(P,{duration:100,transition:"fade"});return b.jsxs(b.Fragment,{children:[b.jsx(NR,{...F,withinPortal:f,children:b.jsx(Df,{...de,keepMounted:V,mounted:!M&&!!ne.opened,duration:ne.isGroupPhase?10:de.duration,children:We=>b.jsxs(_e,{...Q,variant:N,mod:[{multiline:k},H],...ne.getFloatingProps({ref:ne.floating,className:ce("tooltip").className,style:{...ce("tooltip").style,...We,zIndex:R,top:ne.y??0,left:ne.x??0}}),children:[o,b.jsx(VY,{ref:se,arrowX:ne.arrowX,arrowY:ne.arrowY,visible:w,position:ne.placement,arrowSize:E,arrowOffset:S,arrowRadius:x,arrowPosition:T,...ce("arrow")})]})})}),A.cloneElement(r,ne.getReferenceProps({onClick:L,onMouseEnter:B,onMouseLeave:U,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:Ee,className:yt(_,r.props.className),...r.props}))]})});on.classes=QF;on.displayName="@mantine/core/Tooltip";on.Floating=nX;on.Group=Xxe;var Qxe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const DZe={withItemsBorders:!0},MZe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Mr(t),"--sc-color":n?Yr(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":Jt(i,"sc-padding"),"--sc-font-size":Js(i)}}),rX=Le((e,t)=>{var Q,ie;const n=xe("SegmentedControl",DZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,data:u,value:c,defaultValue:d,onChange:f,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:_,color:w,transitionDuration:E,transitionTimingFunction:S,variant:x,autoContrast:T,withItemsBorders:I,mod:P,...k}=n,D=vt({name:"SegmentedControl",props:n,classes:Qxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:MZe}),R=Is(),M=u.map(se=>typeof se=="string"?{label:se,value:se}:se),$=iqe(),[L,B]=A.useState(null),[U,z]=A.useState({}),N=(se,ne)=>{U[ne]=se,z(U)},[V,W]=Xi({value:c,defaultValue:d,finalValue:Array.isArray(u)?((Q=M.find(se=>!se.disabled))==null?void 0:Q.value)??((ie=u[0])==null?void 0:ie.value)??null:null,onChange:f}),F=ta(p),H=M.map(se=>A.createElement(_e,{...D("control"),mod:{active:V===se.value,orientation:v},key:se.value},A.createElement("input",{...D("input"),disabled:m||se.disabled,type:"radio",name:F,value:se.value,id:`${F}-${se.value}`,checked:V===se.value,onChange:()=>!g&&W(se.value),"data-focus-ring":R.focusRing,key:`${se.value}-input`}),A.createElement(_e,{component:"label",...D("label"),mod:{active:V===se.value&&!(m||se.disabled),disabled:m||se.disabled,"read-only":g},htmlFor:`${F}-${se.value}`,ref:ne=>N(ne,se.value),__vars:{"--sc-label-color":w!==void 0?mp({color:w,theme:R,autoContrast:T}):void 0},key:`${se.value}-label`},b.jsx("span",{...D("innerLabel"),children:se.label})))),G=ps(t,se=>B(se));return u.length===0?null:b.jsxs(_e,{...D("root"),variant:x,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:$,"with-items-borders":I},P],...k,role:"radiogroup",children:[typeof V=="string"&&b.jsx(eK,{target:U[V],parent:L,component:"span",transitionDuration:"var(--sc-transition-duration)",...D("indicator")}),H]})});rX.classes=Qxe;rX.displayName="@mantine/core/SegmentedControl";const $Ze={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},nu=Le((e,t)=>{const n=xe("Select",$Ze,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:l,onDropdownClose:u,onDropdownOpen:c,onFocus:d,onBlur:f,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:_,comboboxProps:w,readOnly:E,disabled:S,filter:x,limit:T,withScrollArea:I,maxDropdownHeight:P,size:k,searchable:D,rightSection:R,checkIconPosition:M,withCheckIcon:$,nothingFoundMessage:L,name:B,form:U,searchValue:z,defaultSearchValue:N,onSearchChange:V,allowDeselect:W,error:F,rightSectionPointerEvents:H,id:G,clearable:Q,clearButtonProps:ie,hiddenInputProps:se,renderOption:ne,onClear:ce,autoComplete:Ee,scrollAreaProps:de,...We}=n,Fe=A.useMemo(()=>dK(m),[m]),Ne=A.useMemo(()=>xF(Fe),[Fe]),je=ta(G),[ye,ae,Pe]=Xi({value:g,defaultValue:y,finalValue:null,onChange:p}),Be=typeof ye=="string"?Ne[ye]:void 0,ft=nqe(Be),[Se,he]=Xi({value:z,defaultValue:N,finalValue:Be?Be.label:"",onChange:V}),Ve=LR({opened:a,defaultOpened:l,onDropdownOpen:()=>{c==null||c(),Ve.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{u==null||u(),Ve.resetSelectedOption()}}),{resolvedClassNames:tt,resolvedStyles:ge}=gp({props:n,styles:i,classNames:r});A.useEffect(()=>{v&&Ve.selectFirstOption()},[v,ye]),A.useEffect(()=>{g===null&&he(""),typeof g=="string"&&Be&&((ft==null?void 0:ft.value)!==Be.value||(ft==null?void 0:ft.label)!==Be.label)&&he(Be.label)},[g,Be]);const ke=Q&&!!ye&&!S&&!E&&b.jsx(sn.ClearButton,{size:k,...ie,onClear:()=>{ae(null,null),he(""),ce==null||ce()}});return b.jsxs(b.Fragment,{children:[b.jsxs(sn,{store:Ve,__staticSelector:"Select",classNames:tt,styles:ge,unstyled:s,readOnly:E,onOptionSubmit:Ye=>{_==null||_(Ye);const Xe=W&&Ne[Ye].value===ye?null:Ne[Ye],xt=Xe?Xe.value:null;xt!==ye&&ae(xt,Xe),!Pe&&he(typeof xt=="string"&&(Xe==null?void 0:Xe.label)||""),Ve.closeDropdown()},size:k,...w,children:[b.jsx(sn.Target,{targetType:D?"input":"button",autoComplete:Ee,children:b.jsx(_u,{id:je,ref:t,rightSection:R||ke||b.jsx(sn.Chevron,{size:k,error:F,unstyled:s}),rightSectionPointerEvents:H||(ke?"all":"none"),...We,size:k,__staticSelector:"Select",disabled:S,readOnly:E||!D,value:Se,onChange:Ye=>{he(Ye.currentTarget.value),Ve.openDropdown(),v&&Ve.selectFirstOption()},onFocus:Ye=>{D&&Ve.openDropdown(),d==null||d(Ye)},onBlur:Ye=>{var Xe;D&&Ve.closeDropdown(),he(ye!=null&&((Xe=Ne[ye])==null?void 0:Xe.label)||""),f==null||f(Ye)},onClick:Ye=>{D?Ve.openDropdown():Ve.toggleDropdown(),h==null||h(Ye)},classNames:tt,styles:ge,unstyled:s,pointer:!D,error:F})}),b.jsx(CK,{data:Fe,hidden:E||S,filter:x,search:Se,limit:T,hiddenWhenEmpty:!L,withScrollArea:I,maxDropdownHeight:P,filterOptions:D&&(Be==null?void 0:Be.label)!==Se,value:ye,checkIconPosition:M,withCheckIcon:$,nothingFoundMessage:L,unstyled:s,labelId:We.label?`${je}-label`:void 0,"aria-label":We.label?void 0:We["aria-label"],renderOption:ne,scrollAreaProps:de})]}),b.jsx(sn.HiddenInput,{value:ye,name:B,form:U,disabled:S,...se})]})});nu.classes={..._u.classes,...sn.classes};nu.displayName="@mantine/core/Select";var Jxe={root:"m_18320242","skeleton-fade":"m_299c329c"};const LZe={visible:!0,animate:!0},FZe=(e,{width:t,height:n,radius:r,circle:i})=>({root:{"--skeleton-height":Ce(n),"--skeleton-width":Ce(i?n:t),"--skeleton-radius":i?"1000px":r===void 0?void 0:Mr(r)}}),iX=Le((e,t)=>{const n=xe("Skeleton",LZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,width:u,height:c,circle:d,visible:f,radius:h,animate:p,mod:m,...g}=n,y=vt({name:"Skeleton",classes:Jxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:FZe});return b.jsx(_e,{ref:t,...y("root"),mod:[{visible:f,animate:p},m],...g})});iX.classes=Jxe;iX.displayName="@mantine/core/Skeleton";const[Zxe,JF]=io("SliderProvider was not found in tree"),sX=A.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:l}=JF();return b.jsx(_e,{tabIndex:-1,variant:n,size:e,ref:a,...l("root"),...o})});sX.displayName="@mantine/core/SliderRoot";const UM=A.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:l,labelAlwaysOn:u,thumbLabel:c,onFocus:d,onBlur:f,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=JF(),[_,w]=A.useState(!1),E=u||s||_||h&&p;return b.jsxs(_e,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof d=="function"&&d()},onBlur:()=>{w(!1),typeof f=="function"&&f()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,b.jsx(Df,{mounted:i!=null&&!!E,transition:"fade",duration:0,...l,children:S=>b.jsx("div",{...v("label",{style:S}),children:i})})]})});UM.displayName="@mantine/core/SliderThumb";function VM({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function jZe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function eSe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=JF();if(!e)return null;const l=e.map((u,c)=>A.createElement(_e,{...a("markWrapper"),__vars:{"--mark-offset":`${VM({value:u.value,min:t,max:n})}%`},key:c},b.jsx(_e,{...a("mark"),mod:{filled:jZe({mark:u,value:i,offset:s,inverted:o}),disabled:r}}),u.label&&b.jsx("div",{...a("markLabel"),children:u.label})));return b.jsx("div",{children:l})}eSe.displayName="@mantine/core/SliderMarks";function oX({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:l}=JF();return b.jsx(b.Fragment,{children:b.jsx(_e,{...l("trackContainer"),mod:{disabled:r},...o,children:b.jsxs(_e,{...l("track"),mod:{inverted:s,disabled:r},children:[b.jsx(_e,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...l("bar")}),t,b.jsx(eSe,{...a,offset:i,disabled:r,inverted:s})]})})})}oX.displayName="@mantine/core/SliderTrack";function DU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),l=(a!==0?Math.round(a/i)*i:0)+n,u=Math.max(l,n);return s!==void 0?Number(u.toFixed(s)):u}function Tc(e,t){return parseFloat(e.toFixed(t))}function tSe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var ZF={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const BZe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},zZe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Jt(t,"slider-size"),"--slider-color":n?Yr(n,e):void 0,"--slider-radius":i===void 0?void 0:Mr(i),"--slider-thumb-size":r!==void 0?Ce(r):"calc(var(--slider-size) * 2)"}}),e6=Le((e,t)=>{const n=xe("Slider",BZe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:l,min:u,max:c,step:d,precision:f,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:_,showLabelOnHover:w,thumbChildren:E,disabled:S,unstyled:x,scale:T,inverted:I,className:P,style:k,vars:D,hiddenInputProps:R,...M}=n,$=vt({name:"Slider",props:n,classes:ZF,classNames:r,className:P,styles:i,style:k,vars:D,varsResolver:zZe,unstyled:x}),{dir:L}=El(),[B,U]=A.useState(!1),[z,N]=Xi({value:typeof s=="number"?Lc(s,u,c):s,defaultValue:typeof h=="number"?Lc(h,u,c):h,finalValue:Lc(0,u,c),onChange:o}),V=A.useRef(z),W=A.useRef(),F=A.useRef(),H=VM({value:z,min:u,max:c}),G=T(z),Q=typeof g=="function"?g(G):g,ie=f??tSe(d),se=A.useCallback(({x:de})=>{if(!S){const We=DU({value:de,min:u,max:c,step:d,precision:ie});N(We),V.current=We}},[S,u,c,d,ie,N]),{ref:ne,active:ce}=cF(se,{onScrubEnd:()=>a==null?void 0:a(V.current)},L),Ee=de=>{var We,Fe,Ne,je,ye,ae;if(!S)switch(de.key){case"ArrowUp":{de.preventDefault(),(We=F.current)==null||We.focus();const Pe=Tc(Math.min(Math.max(z+d,u),c),ie);N(Pe),a==null||a(Pe);break}case"ArrowRight":{de.preventDefault(),(Fe=F.current)==null||Fe.focus();const Pe=Tc(Math.min(Math.max(L==="rtl"?z-d:z+d,u),c),ie);N(Pe),a==null||a(Pe);break}case"ArrowDown":{de.preventDefault(),(Ne=F.current)==null||Ne.focus();const Pe=Tc(Math.min(Math.max(z-d,u),c),ie);N(Pe),a==null||a(Pe);break}case"ArrowLeft":{de.preventDefault(),(je=F.current)==null||je.focus();const Pe=Tc(Math.min(Math.max(L==="rtl"?z+d:z-d,u),c),ie);N(Pe),a==null||a(Pe);break}case"Home":{de.preventDefault(),(ye=F.current)==null||ye.focus(),N(u),a==null||a(u);break}case"End":{de.preventDefault(),(ae=F.current)==null||ae.focus(),N(c),a==null||a(c);break}}};return b.jsx(Zxe,{value:{getStyles:$},children:b.jsxs(sX,{...M,ref:ps(t,W),onKeyDownCapture:Ee,onMouseDownCapture:()=>{var de;return(de=W.current)==null?void 0:de.focus()},size:l,disabled:S,children:[b.jsx(oX,{inverted:I,offset:0,filled:H,marks:m,min:u,max:c,value:G,disabled:S,containerProps:{ref:ne,onMouseEnter:w?()=>U(!0):void 0,onMouseLeave:w?()=>U(!1):void 0},children:b.jsx(UM,{max:c,min:u,value:G,position:H,dragging:ce,label:Q,ref:F,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:_,showLabelOnHover:w,isHovered:B,disabled:S,children:E})}),b.jsx("input",{type:"hidden",name:p,value:G,...R})]})})});e6.classes=ZF;e6.displayName="@mantine/core/Slider";function UZe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const VZe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Jt(t,"slider-size"),"--slider-color":n?Yr(n,e):void 0,"--slider-radius":i===void 0?void 0:Mr(i),"--slider-thumb-size":r!==void 0?Ce(r):"calc(var(--slider-size) * 2)"}}),HZe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},ZA=Le((e,t)=>{const n=xe("RangeSlider",HZe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:l,min:u,max:c,minRange:d,maxRange:f,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:_,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:S,showLabelOnHover:x,thumbChildren:T,disabled:I,unstyled:P,scale:k,inverted:D,className:R,style:M,vars:$,hiddenInputProps:L,...B}=n,U=vt({name:"Slider",props:n,classes:ZF,classNames:r,className:R,styles:i,style:M,vars:$,varsResolver:VZe,unstyled:P}),{dir:z}=El(),[N,V]=A.useState(-1),[W,F]=A.useState(!1),[H,G]=Xi({value:s,defaultValue:m,finalValue:[u,c],onChange:o}),Q=A.useRef(H),ie=A.useRef([]),se=A.useRef(void 0),ne=[VM({value:H[0],min:u,max:c}),VM({value:H[1],min:u,max:c})],ce=p??tSe(h),Ee=Se=>{G(Se),Q.current=Se};A.useEffect(()=>{Array.isArray(s)&&(Q.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const de=(Se,he,Ve)=>{const tt=[...Q.current];tt[he]=Se,he===0&&(Se>tt[1]-(d-1e-9)&&(tt[1]=Math.min(Se+d,c)),Se>(c-(d-1e-9)||u)&&(tt[he]=Q.current[he]),tt[1]-Se>f&&(tt[1]=Se+f)),he===1&&(Se<tt[0]+d&&(tt[0]=Math.max(Se-d,u)),Se<tt[0]+d&&(tt[he]=Q.current[he]),Se-tt[0]>f&&(tt[0]=Se-f)),tt[0]=Tc(tt[0],ce),tt[1]=Tc(tt[1],ce),Ee(tt),Ve&&(a==null||a(Q.current))},We=Se=>{if(!I){const he=DU({value:Se,min:u,max:c,step:h,precision:ce});de(he,se.current,!1)}},{ref:Fe,active:Ne}=cF(({x:Se})=>We(Se),{onScrubEnd:()=>a==null?void 0:a(Q.current)},z);function je(Se){se.current=Se}const ye=Se=>{Fe.current.focus();const he=Fe.current.getBoundingClientRect(),Ve=UZe(Se.nativeEvent),tt=DU({value:Ve-he.left,max:c,min:u,step:h,containerWidth:he.width}),ge=Math.abs(H[0]-tt)>Math.abs(H[1]-tt)?1:0,ke=z==="ltr"?ge:ge===1?0:1;se.current=ke},ae=()=>N!==1&&N!==0?(V(0),0):N,Pe=Se=>{if(!I)switch(Se.key){case"ArrowUp":{Se.preventDefault();const he=ae();ie.current[he].focus(),de(Tc(Math.min(Math.max(Q.current[he]+h,u),c),ce),he,!0);break}case"ArrowRight":{Se.preventDefault();const he=ae();ie.current[he].focus(),de(Tc(Math.min(Math.max(z==="rtl"?Q.current[he]-h:Q.current[he]+h,u),c),ce),he,!0);break}case"ArrowDown":{Se.preventDefault();const he=ae();ie.current[he].focus(),de(Tc(Math.min(Math.max(Q.current[he]-h,u),c),ce),he,!0);break}case"ArrowLeft":{Se.preventDefault();const he=ae();ie.current[he].focus(),de(Tc(Math.min(Math.max(z==="rtl"?Q.current[he]+h:Q.current[he]-h,u),c),ce),he,!0);break}}},Be={max:c,min:u,size:l,labelTransitionProps:_,labelAlwaysOn:w,onBlur:()=>V(-1)},ft=Array.isArray(T);return b.jsx(Zxe,{value:{getStyles:U},children:b.jsxs(sX,{...B,size:l,ref:t,disabled:I,children:[b.jsxs(oX,{offset:ne[0],marksOffset:H[0],filled:ne[1]-ne[0],marks:y,inverted:D,min:u,max:c,value:H[1],disabled:I,containerProps:{ref:Fe,onMouseEnter:x?()=>F(!0):void 0,onMouseLeave:x?()=>F(!1):void 0,onTouchStartCapture:ye,onTouchEndCapture:()=>{se.current=-1},onMouseDownCapture:ye,onMouseUpCapture:()=>{se.current=-1},onKeyDownCapture:Pe},children:[b.jsx(UM,{...Be,value:k(H[0]),position:ne[0],dragging:Ne,label:typeof v=="function"?v(Tc(k(H[0]),ce)):v,ref:Se=>{ie.current[0]=Se},thumbLabel:E,onMouseDown:()=>je(0),onFocus:()=>V(0),showLabelOnHover:x,isHovered:W,disabled:I,children:ft?T[0]:T}),b.jsx(UM,{...Be,thumbLabel:S,value:k(H[1]),position:ne[1],dragging:Ne,label:typeof v=="function"?v(Tc(k(H[1]),ce)):v,ref:Se=>{ie.current[1]=Se},onMouseDown:()=>je(1),onFocus:()=>V(1),showLabelOnHover:x,isHovered:W,disabled:I,children:ft?T[1]:T})]}),b.jsx("input",{type:"hidden",name:`${g}_from`,value:H[0],...L}),b.jsx("input",{type:"hidden",name:`${g}_to`,value:H[1],...L})]})})});ZA.classes=ZF;ZA.displayName="@mantine/core/RangeSlider";const qZe={},Wc=Le((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=xe("Space",qZe,e);return b.jsx(_e,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Wc.displayName="@mantine/core/Space";var nSe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const WZe={maxHeight:100,initialState:!1},GZe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),aX=Le((e,t)=>{const n=xe("Spoiler",WZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,initialState:u,maxHeight:c,hideLabel:d,showLabel:f,children:h,controlRef:p,transitionDuration:m,id:g,expanded:y,onExpandedChange:v,..._}=n,w=vt({name:"Spoiler",classes:nSe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:GZe}),E=ta(g),S=`${E}-region`,[x,T]=Xi({value:y,defaultValue:u,finalValue:!1,onChange:v}),{ref:I,height:P}=ZHe(),k=x?d:f,D=k!==null&&c<P;return b.jsxs(_e,{...w("root"),id:E,ref:t,"data-has-spoiler":D||void 0,..._,children:[D&&b.jsx(Qy,{component:"button",type:"button",ref:p,onClick:()=>T(!x),"aria-expanded":x,"aria-controls":S,...w("control"),children:k}),b.jsx("div",{...w("content",{style:{maxHeight:x?P?Ce(P):void 0:Ce(c)}}),"data-reduce-motion":!0,role:"region",id:S,children:b.jsx("div",{ref:I,children:h})})]})});aX.classes=nSe;aX.displayName="@mantine/core/Spoiler";var rSe={root:"m_6d731127"};const YZe={gap:"md",align:"stretch",justify:"flex-start"},KZe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Qu(t),"--stack-align":n,"--stack-justify":r}}),ci=Le((e,t)=>{const n=xe("Stack",YZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,align:u,justify:c,gap:d,variant:f,...h}=n,p=vt({name:"Stack",props:n,classes:rSe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:KZe});return b.jsx(_e,{ref:t,...p("root"),variant:f,...h})});ci.classes=rSe;ci.displayName="@mantine/core/Stack";const iSe=A.createContext(null),XZe=iSe.Provider,QZe=()=>A.useContext(iSe),JZe={},lX=Le((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:l,...u}=xe("SwitchGroup",JZe,e),[c,d]=Xi({value:n,defaultValue:r,finalValue:[],onChange:i}),f=h=>{const p=h.currentTarget.value;!l&&d(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return b.jsx(XZe,{value:{value:c,onChange:f,size:s},children:b.jsx(Kr.Wrapper,{size:s,ref:t,...o,...u,labelElement:"div",__staticSelector:"SwitchGroup",children:b.jsx(xK,{role:"group",children:a})})})});lX.classes=Kr.Wrapper.classes;lX.displayName="@mantine/core/SwitchGroup";var sSe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const ZZe={labelPosition:"right"},eet=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Mr(t),"--switch-height":Jt(r,"switch-height"),"--switch-width":Jt(r,"switch-width"),"--switch-thumb-size":Jt(r,"switch-thumb-size"),"--switch-label-font-size":Jt(r,"switch-label-font-size"),"--switch-track-label-padding":Jt(r,"switch-track-label-padding"),"--switch-color":n?Yr(n,e):void 0}}),z0=Le((e,t)=>{const n=xe("Switch",ZZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,label:c,offLabel:d,onLabel:f,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:_,defaultChecked:w,onChange:E,labelPosition:S,description:x,error:T,disabled:I,variant:P,rootRef:k,mod:D,...R}=n,M=QZe(),$=p||(M==null?void 0:M.size),L=vt({name:"Switch",props:n,classes:sSe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:eet}),{styleProps:B,rest:U}=Wb(R),z=ta(h),N=M?{checked:M.value.includes(U.value),onChange:M.onChange}:{},[V,W]=Xi({value:N.checked??_,defaultValue:w,finalValue:!1});return b.jsxs(SF,{...L("root"),__staticSelector:"Switch",__stylesApiProps:n,id:z,size:$,labelPosition:S,label:c,description:x,error:T,disabled:I,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":N.checked||void 0,variant:P,ref:k,mod:D,...B,...g,children:[b.jsx("input",{...U,disabled:I,checked:V,onChange:F=>{var H;M?(H=N.onChange)==null||H.call(N,F):E==null||E(F),W(F.currentTarget.checked)},id:z,ref:t,type:"checkbox",role:"switch",...L("input")}),b.jsxs(_e,{"aria-hidden":"true",mod:{error:T,"label-position":S},...L("track"),children:[b.jsx(_e,{component:"span",mod:"reduce-motion",...L("thumb"),children:v}),b.jsx("span",{...L("trackLabel"),children:V?f:d})]})]})});z0.classes={...sSe,...ZEe};z0.displayName="@mantine/core/Switch";z0.Group=lX;const[tet,net]=io("Table component was not found in the tree");var VR={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function ret(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Qb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Le((i,s)=>{const o=xe(n,{},i),{classNames:a,className:l,style:u,styles:c,...d}=o,f=net();return b.jsx(_e,{component:e,ref:s,...ret(f,t),...f.getStyles(e,{className:l,classNames:a,style:u,styles:c,props:o}),...d})});return r.displayName=`@mantine/core/${n}`,r.classes=VR,r}const qE=Qb("th",{columnBorder:!0}),t6=Qb("td",{columnBorder:!0}),Tm=Qb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),uX=Qb("thead",{stickyHeader:!0}),$2=Qb("tbody"),cX=Qb("tfoot"),oSe=Qb("caption",{captionSide:!0});function dX({data:e}){return b.jsxs(b.Fragment,{children:[e.caption&&b.jsx(oSe,{children:e.caption}),e.head&&b.jsx(uX,{children:b.jsx(Tm,{children:e.head.map((t,n)=>b.jsx(qE,{children:t},n))})}),e.body&&b.jsx($2,{children:e.body.map((t,n)=>b.jsx(Tm,{children:t.map((r,i)=>b.jsx(t6,{children:r},i))},n))}),e.foot&&b.jsx(cX,{children:b.jsx(Tm,{children:e.foot.map((t,n)=>b.jsx(qE,{children:t},n))})})]})}dX.displayName="@mantine/core/TableDataRenderer";const iet={type:"scrollarea"},set=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Ce(t),"--table-overflow":n==="native"?"auto":void 0}}),fX=Le((e,t)=>{const n=xe("TableScrollContainer",iet,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,minWidth:c,type:d,...f}=n,h=vt({name:"TableScrollContainer",classes:VR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:set,rootSelector:"scrollContainer"});return b.jsx(_e,{component:d==="scrollarea"?Yb:"div",...d==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...f,children:b.jsx("div",{...h("scrollContainerInner"),children:u})})});fX.classes=VR;fX.displayName="@mantine/core/TableScrollContainer";const oet={withRowBorders:!0,verticalSpacing:7},aet=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:l,highlightOnHover:u,stickyHeaderOffset:c,stickyHeader:d})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Qu(r),"--table-vertical-spacing":Qu(i),"--table-border-color":s?Yr(s,e):void 0,"--table-striped-color":l&&o?Yr(o,e):void 0,"--table-highlight-on-hover-color":u&&a?Yr(a,e):void 0,"--table-sticky-header-offset":d?Ce(c):void 0}}),or=Le((e,t)=>{const n=xe("Table",oet,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,horizontalSpacing:u,verticalSpacing:c,captionSide:d,stripedColor:f,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:_,layout:w,variant:E,data:S,children:x,stickyHeader:T,stickyHeaderOffset:I,mod:P,...k}=n,D=vt({name:"Table",props:n,className:i,style:s,classes:VR,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:l,varsResolver:aet});return b.jsx(tet,{value:{getStyles:D,stickyHeader:T,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:d||"bottom"},children:b.jsx(_e,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},P],...D("table"),...k,children:x||!!S&&b.jsx(dX,{data:S})})})});or.classes=VR;or.displayName="@mantine/core/Table";or.Td=t6;or.Th=qE;or.Tr=Tm;or.Thead=uX;or.Tbody=$2;or.Tfoot=cX;or.Caption=oSe;or.ScrollContainer=fX;or.DataRenderer=dX;const[uet,hX]=io("Tabs component was not found in the tree");var HR={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const cet={},pX=Le((e,t)=>{const n=xe("TabsList",cet,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:l,style:u,mod:c,...d}=n,f=hX();return b.jsx(_e,{...d,...f.getStyles("list",{className:i,style:u,classNames:a,styles:l,props:n,variant:f.variant}),ref:t,role:"tablist",variant:f.variant,mod:[{grow:s,orientation:f.orientation,placement:f.orientation==="vertical"&&f.placement,inverted:f.inverted},c],"aria-orientation":f.orientation,__vars:{"--tabs-justify":o},children:r})});pX.classes=HR;pX.displayName="@mantine/core/TabsList";const det={},mX=Le((e,t)=>{const n=xe("TabsPanel",det,e),{children:r,className:i,value:s,classNames:o,styles:a,style:l,mod:u,...c}=n,d=hX(),f=d.value===s,h=d.keepMounted||n.keepMounted||f?r:null;return b.jsx(_e,{...c,...d.getStyles("panel",{className:i,classNames:o,styles:a,style:[l,f?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:d.orientation},u],role:"tabpanel",id:d.getPanelId(s),"aria-labelledby":d.getTabId(s),children:h})});mX.classes=HR;mX.displayName="@mantine/core/TabsPanel";const fet={},gX=Le((e,t)=>{const n=xe("TabsTab",fet,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:l,onKeyDown:u,disabled:c,color:d,style:f,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=Is(),{dir:_}=El(),w=hX(),E=a===w.value,S=T=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),l==null||l(T)},x={classNames:h,styles:p,props:n};return b.jsxs(xs,{...y,...w.getStyles("tab",{className:r,style:f,variant:w.variant,...x}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:S,__vars:{"--tabs-color":d?Yr(d,v):void 0},onKeyDown:gY({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:_,onKeyDown:u}),children:[o&&b.jsx("span",{...w.getStyles("tabSection",x),"data-position":"left",children:o}),i&&b.jsx("span",{...w.getStyles("tabLabel",x),children:i}),s&&b.jsx("span",{...w.getStyles("tabSection",x),"data-position":"right",children:s})]})});gX.classes=HR;gX.displayName="@mantine/core/TabsTab";const pue="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",het={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},pet=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Mr(t),"--tabs-color":Yr(n,e),"--tabs-text-color":Ky(r,e)?mp({color:n,theme:e,autoContrast:r}):void 0}}),$o=Le((e,t)=>{const n=xe("Tabs",het,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:l,id:u,activateTabWithKeyboard:c,allowTabDeactivation:d,variant:f,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:_,unstyled:w,className:E,style:S,vars:x,autoContrast:T,mod:I,...P}=n,k=ta(u),[D,R]=Xi({value:i,defaultValue:r,finalValue:null,onChange:s}),M=vt({name:"Tabs",props:n,classes:HR,className:E,style:S,classNames:v,styles:_,unstyled:w,vars:x,varsResolver:pet});return b.jsx(uet,{value:{placement:g,value:D,orientation:o,id:k,loop:l,activateTabWithKeyboard:c,getTabId:DM(`${k}-tab`,pue),getPanelId:DM(`${k}-panel`,pue),onChange:R,allowTabDeactivation:d,variant:f,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:M},children:b.jsx(_e,{ref:t,id:k,variant:f,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},I],...M("root"),...P,children:a})})});$o.classes=HR;$o.displayName="@mantine/core/Tabs";$o.Tab=gX;$o.Panel=mX;$o.List=pX;const met={},lf=Le((e,t)=>{const n=xe("TextInput",met,e);return b.jsx(_u,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});lf.classes=_u.classes;lf.displayName="@mantine/core/TextInput";const get=["h1","h2","h3","h4","h5","h6"];function yet(e,t){const n=t!==void 0?t:`h${e}`;return get.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Ce(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var aSe={root:"m_8a5d1357"};const vet={order:1},bet=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=yet(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},Ti=Le((e,t)=>{const n=xe("Title",vet,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:l,vars:u,size:c,variant:d,lineClamp:f,textWrap:h,mod:p,...m}=n,g=vt({name:"Title",props:n,classes:aSe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bet});return[1,2,3,4,5,6].includes(l)?b.jsx(_e,{...g("root"),component:`h${l}`,variant:d,ref:t,mod:[{order:l,"data-line-clamp":typeof f=="number"},p],size:c,...m}):null});Ti.classes=aSe;Ti.displayName="@mantine/core/Title";const lSe=A.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Pi=()=>A.useContext(lSe);function _et({children:e}){const[t,n]=us.useState(void 0),r=us.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return b.jsx(lSe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eI(){return eI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eI.apply(this,arguments)}var b0;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(b0||(b0={}));const mue="popstate";function wet(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return MU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:HM(i)}return xet(t,n,null,e)}function Ts(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function uSe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Eet(){return Math.random().toString(36).substr(2,8)}function gue(e,t){return{usr:e.state,key:e.key,idx:t}}function MU(e,t,n,r){return n===void 0&&(n=null),eI({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?fS(t):t,{state:n,key:t&&t.key||r||Eet()})}function HM(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function fS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function xet(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=b0.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(eI({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=b0.Pop;let g=c(),y=g==null?null:g-u;u=g,l&&l({action:a,location:m.location,delta:y})}function f(g,y){a=b0.Push;let v=MU(m.location,g,y);u=c()+1;let _=gue(v,u),w=m.createHref(v);try{o.pushState(_,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&l&&l({action:a,location:m.location,delta:1})}function h(g,y){a=b0.Replace;let v=MU(m.location,g,y);u=c();let _=gue(v,u),w=m.createHref(v);o.replaceState(_,"",w),s&&l&&l({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:HM(g);return v=v.replace(/ $/,"%20"),Ts(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(mue,d),l=g,()=>{i.removeEventListener(mue,d),l=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:h,go(g){return o.go(g)}};return m}var yue;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(yue||(yue={}));function Tet(e,t,n){return n===void 0&&(n="/"),Cet(e,t,n,!1)}function Cet(e,t,n,r){let i=typeof t=="string"?fS(t):t,s=yX(i.pathname||"/",n);if(s==null)return null;let o=cSe(e);Aet(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=Fet(s);a=$et(o[l],u,r)}return a}function cSe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ts(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=U0([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(Ts(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),cSe(s.children,t,c,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:Det(u,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of dSe(s.path))i(s,o,l)}),t}function dSe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=dSe(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function Aet(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Met(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Iet=/^:[\w-]+$/,Ret=3,ket=2,Pet=1,Net=10,Oet=-2,vue=e=>e==="*";function Det(e,t){let n=e.split("/"),r=n.length;return n.some(vue)&&(r+=Oet),t&&(r+=ket),n.filter(i=>!vue(i)).reduce((i,s)=>i+(Iet.test(s)?Ret:s===""?Pet:Net),r)}function Met(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function $et(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",d=bue({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=bue({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:U0([s,d.pathname]),pathnameBase:Uet(U0([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=U0([s,d.pathnameBase]))}return o}function bue(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Let(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let m=a[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function Let(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),uSe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Fet(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return uSe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function yX(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function jet(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?fS(e):e;return{pathname:n?n.startsWith("/")?n:Bet(n,t):t,search:Vet(r),hash:Het(i)}}function Bet(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Z8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zet(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function vX(e,t){let n=zet(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function bX(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=fS(e):(i=eI({},e),Ts(!i.pathname||!i.pathname.includes("?"),Z8("?","pathname","search",i)),Ts(!i.pathname||!i.pathname.includes("#"),Z8("#","pathname","hash",i)),Ts(!i.search||!i.search.includes("#"),Z8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?t[d]:"/"}let l=jet(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const U0=e=>e.join("/").replace(/\/\/+/g,"/"),Uet=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Vet=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Het=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function qet(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const fSe=["post","put","patch","delete"];new Set(fSe);const Wet=["get",...fSe];new Set(Wet);/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tI(){return tI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tI.apply(this,arguments)}const _X=A.createContext(null),Get=A.createContext(null),ev=A.createContext(null),n6=A.createContext(null),vp=A.createContext({outlet:null,matches:[],isDataRoute:!1}),hSe=A.createContext(null);function wX(e,t){let{relative:n}=t===void 0?{}:t;hS()||Ts(!1);let{basename:r,navigator:i}=A.useContext(ev),{hash:s,pathname:o,search:a}=mSe(e,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:U0([r,o])),i.createHref({pathname:l,search:a,hash:s})}function hS(){return A.useContext(n6)!=null}function mg(){return hS()||Ts(!1),A.useContext(n6).location}function pSe(e){A.useContext(ev).static||A.useLayoutEffect(e)}function md(){let{isDataRoute:e}=A.useContext(vp);return e?att():Yet()}function Yet(){hS()||Ts(!1);let e=A.useContext(_X),{basename:t,future:n,navigator:r}=A.useContext(ev),{matches:i}=A.useContext(vp),{pathname:s}=mg(),o=JSON.stringify(vX(i,n.v7_relativeSplatPath)),a=A.useRef(!1);return pSe(()=>{a.current=!0}),A.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=bX(u,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:U0([t,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[t,r,o,s,e])}const Ket=A.createContext(null);function Xet(e){let t=A.useContext(vp).outlet;return t&&A.createElement(Ket.Provider,{value:e},t)}function wf(){let{matches:e}=A.useContext(vp),t=e[e.length-1];return t?t.params:{}}function mSe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=A.useContext(ev),{matches:i}=A.useContext(vp),{pathname:s}=mg(),o=JSON.stringify(vX(i,r.v7_relativeSplatPath));return A.useMemo(()=>bX(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function gSe(e,t){return Qet(e,t)}function Qet(e,t,n,r){hS()||Ts(!1);let{navigator:i}=A.useContext(ev),{matches:s}=A.useContext(vp),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=mg(),c;if(t){var d;let g=typeof t=="string"?fS(t):t;l==="/"||(d=g.pathname)!=null&&d.startsWith(l)||Ts(!1),c=g}else c=u;let f=c.pathname||"/",h=f;if(l!=="/"){let g=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=Tet(e,{pathname:h}),m=ntt(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:U0([l,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:U0([l,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?A.createElement(n6.Provider,{value:{location:tI({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:b0.Pop}},m):m}function Jet(){let e=ott(),t=qet(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),n?A.createElement("pre",{style:i},n):null,null)}const Zet=A.createElement(Jet,null);class ett extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?A.createElement(vp.Provider,{value:this.props.routeContext},A.createElement(hSe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ttt(e){let{routeContext:t,match:n,children:r}=e,i=A.useContext(_X);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(vp.Provider,{value:t},r)}function ntt(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||Ts(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,f)=>{let h,p=!1,m=null,g=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||Zet,l&&(u<0&&f===0?(p=!0,g=null):u===f&&(p=!0,g=d.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,f+1)),v=()=>{let _;return h?_=m:p?_=g:d.route.Component?_=A.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=c,A.createElement(ttt,{match:d,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?A.createElement(ett,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var ySe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ySe||{}),qM=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(qM||{});function rtt(e){let t=A.useContext(_X);return t||Ts(!1),t}function itt(e){let t=A.useContext(Get);return t||Ts(!1),t}function stt(e){let t=A.useContext(vp);return t||Ts(!1),t}function vSe(e){let t=stt(),n=t.matches[t.matches.length-1];return n.route.id||Ts(!1),n.route.id}function ott(){var e;let t=A.useContext(hSe),n=itt(qM.UseRouteError),r=vSe(qM.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function att(){let{router:e}=rtt(ySe.UseNavigateStable),t=vSe(qM.UseNavigateStable),n=A.useRef(!1);return pSe(()=>{n.current=!0}),A.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,tI({fromRouteId:t},s)))},[e,t])}function EX(e){let{to:t,replace:n,state:r,relative:i}=e;hS()||Ts(!1);let{future:s,static:o}=A.useContext(ev),{matches:a}=A.useContext(vp),{pathname:l}=mg(),u=md(),c=bX(t,vX(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(c);return A.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:i}),[u,d,i,n,r]),null}function ltt(e){return Xet(e.context)}function Kp(e){Ts(!1)}function utt(e){let{basename:t="/",children:n=null,location:r,navigationType:i=b0.Pop,navigator:s,static:o=!1,future:a}=e;hS()&&Ts(!1);let l=t.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:l,navigator:s,static:o,future:tI({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=fS(r));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=A.useMemo(()=>{let g=yX(c,l);return g==null?null:{location:{pathname:g,search:d,hash:f,state:h,key:p},navigationType:i}},[l,c,d,f,h,p,i]);return m==null?null:A.createElement(ev.Provider,{value:u},A.createElement(n6.Provider,{children:n,value:m}))}function ctt(e){let{children:t,location:n}=e;return gSe($U(t),n)}new Promise(()=>{});function $U(e,t){t===void 0&&(t=[]);let n=[];return A.Children.forEach(e,(r,i)=>{if(!A.isValidElement(r))return;let s=[...t,i];if(r.type===A.Fragment){n.push.apply(n,$U(r.props.children,s));return}r.type!==Kp&&Ts(!1),!r.props.index||!r.props.children||Ts(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=$U(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function LU(){return LU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LU.apply(this,arguments)}function dtt(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function ftt(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function htt(e,t){return e.button===0&&(!t||t==="_self")&&!ftt(e)}function FU(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function ptt(e,t){let n=FU(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const mtt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],gtt="6";try{window.__reactRouterVersion=gtt}catch{}const ytt="startTransition",_ue=lM[ytt];function vtt(e){let{basename:t,children:n,future:r,window:i}=e,s=A.useRef();s.current==null&&(s.current=wet({window:i,v5Compat:!0}));let o=s.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=A.useCallback(d=>{u&&_ue?_ue(()=>l(d)):l(d)},[l,u]);return A.useLayoutEffect(()=>o.listen(c),[o,c]),A.createElement(utt,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const btt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_tt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xX=A.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,unstable_viewTransition:d}=t,f=dtt(t,mtt),{basename:h}=A.useContext(ev),p,m=!1;if(typeof u=="string"&&_tt.test(u)&&(p=u,btt))try{let _=new URL(window.location.href),w=u.startsWith("//")?new URL(_.protocol+u):new URL(u),E=yX(w.pathname,h);w.origin===_.origin&&E!=null?u=E+w.search+w.hash:m=!0}catch{}let g=wX(u,{relative:i}),y=wtt(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,unstable_viewTransition:d});function v(_){r&&r(_),_.defaultPrevented||y(_)}return A.createElement("a",LU({},f,{href:p||g,onClick:m||s?r:v,ref:n,target:l}))});var wue;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(wue||(wue={}));var Eue;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Eue||(Eue={}));function wtt(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=t===void 0?{}:t,l=md(),u=mg(),c=mSe(e,{relative:o});return A.useCallback(d=>{if(htt(d,n)){d.preventDefault();let f=r!==void 0?r:HM(u)===HM(c);l(e,{replace:f,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,c,r,i,n,e,s,o,a])}function SX(e){let t=A.useRef(FU(e)),n=A.useRef(!1),r=mg(),i=A.useMemo(()=>ptt(r.search,n.current?null:t.current),[r.search]),s=md(),o=A.useCallback((a,l)=>{const u=FU(typeof a=="function"?a(i):a);n.current=!0,s("?"+u,l)},[s,i]);return[i,o]}const TX=A.createContext(null);TX.displayName="@mantine/modals/ModalsContext";function Ett(){const e=A.useContext(TX);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function xtt({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:l,children:u}){const{cancel:c,confirm:d}=r,f=Ett(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&f.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof l=="function"&&l(),i&&f.closeModal(e)};return b.jsxs(b.Fragment,{children:[u&&b.jsx(_e,{mb:"md",children:u}),b.jsxs(Tn,{mt:u?0:"md",justify:"flex-end",...o,children:[b.jsx(yn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),b.jsx(yn,{...n,onClick:p,children:(n==null?void 0:n.children)||d})]})]})}const[Stt,r6]=lqe("mantine-modals");r6("openModal");r6("closeModal");r6("closeAllModals");const jU=r6("openConfirmModal");function xue(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function Ttt(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;xue(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{xue(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function Ctt(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:l,groupProps:u,labels:c,...d}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:l,groupProps:u,labels:c},modalProps:{id:t,...d}}}function Att({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=A.useReducer(Ttt,{modals:[],current:null}),o=A.useRef(i);o.current=i;const a=A.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),l=A.useCallback(({modalId:g,...y})=>{const v=g||D2();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),u=A.useCallback(({modalId:g,...y})=>{const v=g||D2();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=A.useCallback((g,{modalId:y,...v})=>{const _=y||D2();return s({type:"OPEN",modal:{id:_,type:"context",props:v,ctx:g}}),_},[s]),d=A.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);Stt({openModal:l,openConfirmModal:u,openContextModal:({modal:g,...y})=>c(g,y),closeModal:d,closeContextModal:d,closeAllModals:a});const f={modals:i.modals,openModal:l,openConfirmModal:u,openContextModal:c,closeModal:d,closeContextModal:d,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,_=r[g.ctx];return{modalProps:v,content:b.jsx(_,{innerProps:y,context:f,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=Ctt(g.props);return{modalProps:y,content:b.jsx(xtt,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:b.jsx(b.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return b.jsxs(TX.Provider,{value:f,children:[b.jsx(Ss,{zIndex:dd("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return d((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Itt={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=(e,t,n,r)=>{const i=A.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:l,className:u,children:c,...d},f)=>A.createElement("svg",{ref:f,...Itt[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...d},[l&&A.createElement("title",{key:"svg-title"},l),...r.map(([h,p])=>A.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rtt=$t("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sue=$t("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ktt=$t("outline","arrow-autofit-content","IconArrowAutofitContent",[["path",{d:"M6 4l-3 3l3 3",key:"svg-0"}],["path",{d:"M18 4l3 3l-3 3",key:"svg-1"}],["path",{d:"M4 14m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-2"}],["path",{d:"M10 7h-7",key:"svg-3"}],["path",{d:"M21 7h-7",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ptt=$t("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ntt=$t("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ott=$t("outline","arrows-sort","IconArrowsSort",[["path",{d:"M3 9l4 -4l4 4m-4 -4v14",key:"svg-0"}],["path",{d:"M21 15l-4 4l-4 -4m4 4v-14",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dtt=$t("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mtt=$t("outline","baseline-density-large","IconBaselineDensityLarge",[["path",{d:"M4 4h16",key:"svg-0"}],["path",{d:"M4 20h16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $tt=$t("outline","baseline-density-medium","IconBaselineDensityMedium",[["path",{d:"M4 20h16",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M4 4h16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ltt=$t("outline","baseline-density-small","IconBaselineDensitySmall",[["path",{d:"M4 3h16",key:"svg-0"}],["path",{d:"M4 9h16",key:"svg-1"}],["path",{d:"M4 15h16",key:"svg-2"}],["path",{d:"M4 21h16",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ftt=$t("outline","box-multiple","IconBoxMultiple",[["path",{d:"M7 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M17 17v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jtt=$t("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Btt=$t("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ztt=$t("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bSe=$t("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Utt=$t("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vtt=$t("outline","chevron-left-pipe","IconChevronLeftPipe",[["path",{d:"M7 6v12",key:"svg-0"}],["path",{d:"M18 6l-6 6l6 6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Htt=$t("outline","chevron-left","IconChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qtt=$t("outline","chevron-right-pipe","IconChevronRightPipe",[["path",{d:"M6 6l6 6l-6 6",key:"svg-0"}],["path",{d:"M17 5v13",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wtt=$t("outline","chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gtt=$t("outline","chevrons-down","IconChevronsDown",[["path",{d:"M7 7l5 5l5 -5",key:"svg-0"}],["path",{d:"M7 13l5 5l5 -5",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ytt=$t("outline","circle-x","IconCircleX",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M10 10l4 4m0 -4l-4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ktt=$t("outline","clear-all","IconClearAll",[["path",{d:"M8 6h12",key:"svg-0"}],["path",{d:"M6 12h12",key:"svg-1"}],["path",{d:"M4 18h12",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xtt=$t("outline","columns","IconColumns",[["path",{d:"M4 6l5.5 0",key:"svg-0"}],["path",{d:"M4 10l5.5 0",key:"svg-1"}],["path",{d:"M4 14l5.5 0",key:"svg-2"}],["path",{d:"M4 18l5.5 0",key:"svg-3"}],["path",{d:"M14.5 6l5.5 0",key:"svg-4"}],["path",{d:"M14.5 10l5.5 0",key:"svg-5"}],["path",{d:"M14.5 14l5.5 0",key:"svg-6"}],["path",{d:"M14.5 18l5.5 0",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qtt=$t("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jtt=$t("outline","device-floppy","IconDeviceFloppy",[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Se=$t("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ztt=$t("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wSe=$t("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ent=$t("outline","eye-off","IconEyeOff",[["path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828",key:"svg-0"}],["path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tnt=$t("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nnt=$t("outline","filter-cog","IconFilterCog",[["path",{d:"M12 20l-3 1v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v1.5",key:"svg-0"}],["path",{d:"M19.001 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M19.001 15.5v1.5",key:"svg-2"}],["path",{d:"M19.001 21v1.5",key:"svg-3"}],["path",{d:"M22.032 17.25l-1.299 .75",key:"svg-4"}],["path",{d:"M17.27 20l-1.3 .75",key:"svg-5"}],["path",{d:"M15.97 17.25l1.3 .75",key:"svg-6"}],["path",{d:"M20.733 20l1.3 .75",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rnt=$t("outline","filter-off","IconFilterOff",[["path",{d:"M8 4h12v2.172a2 2 0 0 1 -.586 1.414l-3.914 3.914m-.5 3.5v4l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var int=$t("outline","filter","IconFilter",[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var snt=$t("outline","grip-horizontal","IconGripHorizontal",[["path",{d:"M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}],["path",{d:"M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ont=$t("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ant=$t("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lnt=$t("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var unt=$t("outline","maximize","IconMaximize",[["path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cnt=$t("outline","minimize","IconMinimize",[["path",{d:"M15 19v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M15 5v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M5 15h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M5 9h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dnt=$t("outline","pinned-off","IconPinnedOff",[["path",{d:"M3 3l18 18",key:"svg-0"}],["path",{d:"M15 4.5l-3.249 3.249m-2.57 1.433l-2.181 .818l-1.5 1.5l7 7l1.5 -1.5l.82 -2.186m1.43 -2.563l3.25 -3.251",key:"svg-1"}],["path",{d:"M9 15l-4.5 4.5",key:"svg-2"}],["path",{d:"M14.5 4l5.5 5.5",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fnt=$t("outline","pinned","IconPinned",[["path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6",key:"svg-0"}],["path",{d:"M12 16l0 5",key:"svg-1"}],["path",{d:"M8 4l8 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tue=$t("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ESe=$t("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xSe=$t("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hnt=$t("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pnt=$t("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mnt=$t("outline","search-off","IconSearchOff",[["path",{d:"M5.039 5.062a7 7 0 0 0 9.91 9.89m1.584 -2.434a7 7 0 0 0 -9.038 -9.057",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var SSe=$t("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var TSe=$t("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gnt=$t("outline","sort-ascending","IconSortAscending",[["path",{d:"M4 6l7 0",key:"svg-0"}],["path",{d:"M4 12l7 0",key:"svg-1"}],["path",{d:"M4 18l9 0",key:"svg-2"}],["path",{d:"M15 9l3 -3l3 3",key:"svg-3"}],["path",{d:"M18 6l0 12",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ynt=$t("outline","sort-descending","IconSortDescending",[["path",{d:"M4 6l9 0",key:"svg-0"}],["path",{d:"M4 12l7 0",key:"svg-1"}],["path",{d:"M4 18l7 0",key:"svg-2"}],["path",{d:"M15 15l3 3l3 -3",key:"svg-3"}],["path",{d:"M18 6l0 12",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vnt=$t("outline","sticker-2","IconSticker2",[["path",{d:"M6 4h12a2 2 0 0 1 2 2v7h-5a2 2 0 0 0 -2 2v5h-7a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2z",key:"svg-0"}],["path",{d:"M20 13v.172a2 2 0 0 1 -.586 1.414l-4.828 4.828a2 2 0 0 1 -1.414 .586h-.172",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var CSe=$t("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bnt=$t("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ASe=$t("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ISe=$t("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var i6=$t("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _nt=$t("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wnt=$t("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ent=$t("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function RSe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const pc="/ThinkAloud/";function Cue(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function kSe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const xnt=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Snt=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Tnt={};function Aue(e,t){return(Tnt.jsx?Snt:xnt).test(e)}const Cnt=/[ \t\n\f\r]/g;function Ant(e){return typeof e=="object"?e.type==="text"?Iue(e.value):!1:Iue(e)}function Iue(e){return e.replace(Cnt,"")===""}let qR=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};qR.prototype.property={};qR.prototype.normal={};qR.prototype.space=null;function PSe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new qR(n,r,t)}function nI(e){return e.toLowerCase()}let gd=class{constructor(t,n){this.property=t,this.attribute=n}};gd.prototype.space=null;gd.prototype.boolean=!1;gd.prototype.booleanish=!1;gd.prototype.overloadedBoolean=!1;gd.prototype.number=!1;gd.prototype.commaSeparated=!1;gd.prototype.spaceSeparated=!1;gd.prototype.commaOrSpaceSeparated=!1;gd.prototype.mustUseProperty=!1;gd.prototype.defined=!1;let Int=0;const kn=Jb(),Ps=Jb(),NSe=Jb(),lt=Jb(),yi=Jb(),sE=Jb(),Iu=Jb();function Jb(){return 2**++Int}const BU=Object.freeze(Object.defineProperty({__proto__:null,boolean:kn,booleanish:Ps,commaOrSpaceSeparated:Iu,commaSeparated:sE,number:lt,overloadedBoolean:NSe,spaceSeparated:yi},Symbol.toStringTag,{value:"Module"})),eB=Object.keys(BU);class CX extends gd{constructor(t,n,r,i){let s=-1;if(super(t,n),Rue(this,"space",i),typeof r=="number")for(;++s<eB.length;){const o=eB[s];Rue(this,eB[s],(r&BU[o])===BU[o])}}}CX.prototype.defined=!0;function Rue(e,t,n){n&&(e[t]=n)}const Rnt={}.hasOwnProperty;function pS(e){const t={},n={};let r;for(r in e.properties)if(Rnt.call(e.properties,r)){const i=e.properties[r],s=new CX(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[nI(r)]=r,n[nI(s.attribute)]=r}return new qR(t,n,e.space)}const OSe=pS({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),DSe=pS({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function MSe(e,t){return t in e?e[t]:t}function $Se(e,t){return MSe(e,t.toLowerCase())}const LSe=pS({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:$Se,properties:{xmlns:null,xmlnsXLink:null}}),FSe=pS({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Ps,ariaAutoComplete:null,ariaBusy:Ps,ariaChecked:Ps,ariaColCount:lt,ariaColIndex:lt,ariaColSpan:lt,ariaControls:yi,ariaCurrent:null,ariaDescribedBy:yi,ariaDetails:null,ariaDisabled:Ps,ariaDropEffect:yi,ariaErrorMessage:null,ariaExpanded:Ps,ariaFlowTo:yi,ariaGrabbed:Ps,ariaHasPopup:null,ariaHidden:Ps,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:yi,ariaLevel:lt,ariaLive:null,ariaModal:Ps,ariaMultiLine:Ps,ariaMultiSelectable:Ps,ariaOrientation:null,ariaOwns:yi,ariaPlaceholder:null,ariaPosInSet:lt,ariaPressed:Ps,ariaReadOnly:Ps,ariaRelevant:null,ariaRequired:Ps,ariaRoleDescription:yi,ariaRowCount:lt,ariaRowIndex:lt,ariaRowSpan:lt,ariaSelected:Ps,ariaSetSize:lt,ariaSort:null,ariaValueMax:lt,ariaValueMin:lt,ariaValueNow:lt,ariaValueText:null,role:null}}),knt=pS({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:$Se,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:sE,acceptCharset:yi,accessKey:yi,action:null,allow:null,allowFullScreen:kn,allowPaymentRequest:kn,allowUserMedia:kn,alt:null,as:null,async:kn,autoCapitalize:null,autoComplete:yi,autoFocus:kn,autoPlay:kn,blocking:yi,capture:null,charSet:null,checked:kn,cite:null,className:yi,cols:lt,colSpan:null,content:null,contentEditable:Ps,controls:kn,controlsList:yi,coords:lt|sE,crossOrigin:null,data:null,dateTime:null,decoding:null,default:kn,defer:kn,dir:null,dirName:null,disabled:kn,download:NSe,draggable:Ps,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:kn,formTarget:null,headers:yi,height:lt,hidden:kn,high:lt,href:null,hrefLang:null,htmlFor:yi,httpEquiv:yi,id:null,imageSizes:null,imageSrcSet:null,inert:kn,inputMode:null,integrity:null,is:null,isMap:kn,itemId:null,itemProp:yi,itemRef:yi,itemScope:kn,itemType:yi,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:kn,low:lt,manifest:null,max:null,maxLength:lt,media:null,method:null,min:null,minLength:lt,multiple:kn,muted:kn,name:null,nonce:null,noModule:kn,noValidate:kn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:kn,optimum:lt,pattern:null,ping:yi,placeholder:null,playsInline:kn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:kn,referrerPolicy:null,rel:yi,required:kn,reversed:kn,rows:lt,rowSpan:lt,sandbox:yi,scope:null,scoped:kn,seamless:kn,selected:kn,shadowRootClonable:kn,shadowRootDelegatesFocus:kn,shadowRootMode:null,shape:null,size:lt,sizes:null,slot:null,span:lt,spellCheck:Ps,src:null,srcDoc:null,srcLang:null,srcSet:null,start:lt,step:null,style:null,tabIndex:lt,target:null,title:null,translate:null,type:null,typeMustMatch:kn,useMap:null,value:Ps,width:lt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:yi,axis:null,background:null,bgColor:null,border:lt,borderColor:null,bottomMargin:lt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:kn,declare:kn,event:null,face:null,frame:null,frameBorder:null,hSpace:lt,leftMargin:lt,link:null,longDesc:null,lowSrc:null,marginHeight:lt,marginWidth:lt,noResize:kn,noHref:kn,noShade:kn,noWrap:kn,object:null,profile:null,prompt:null,rev:null,rightMargin:lt,rules:null,scheme:null,scrolling:Ps,standby:null,summary:null,text:null,topMargin:lt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:lt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:kn,disableRemotePlayback:kn,prefix:null,property:null,results:lt,security:null,unselectable:null}}),Pnt=pS({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:MSe,properties:{about:Iu,accentHeight:lt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:lt,amplitude:lt,arabicForm:null,ascent:lt,attributeName:null,attributeType:null,azimuth:lt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:lt,by:null,calcMode:null,capHeight:lt,className:yi,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:lt,diffuseConstant:lt,direction:null,display:null,dur:null,divisor:lt,dominantBaseline:null,download:kn,dx:null,dy:null,edgeMode:null,editable:null,elevation:lt,enableBackground:null,end:null,event:null,exponent:lt,externalResourcesRequired:null,fill:null,fillOpacity:lt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:sE,g2:sE,glyphName:sE,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:lt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:lt,horizOriginX:lt,horizOriginY:lt,id:null,ideographic:lt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:lt,k:lt,k1:lt,k2:lt,k3:lt,k4:lt,kernelMatrix:Iu,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:lt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:lt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:lt,overlineThickness:lt,paintOrder:null,panose1:null,path:null,pathLength:lt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:yi,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:lt,pointsAtY:lt,pointsAtZ:lt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Iu,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Iu,rev:Iu,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Iu,requiredFeatures:Iu,requiredFonts:Iu,requiredFormats:Iu,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:lt,specularExponent:lt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:lt,strikethroughThickness:lt,string:null,stroke:null,strokeDashArray:Iu,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:lt,strokeOpacity:lt,strokeWidth:null,style:null,surfaceScale:lt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Iu,tabIndex:lt,tableValues:null,target:null,targetX:lt,targetY:lt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Iu,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:lt,underlineThickness:lt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:lt,values:null,vAlphabetic:lt,vMathematical:lt,vectorEffect:null,vHanging:lt,vIdeographic:lt,version:null,vertAdvY:lt,vertOriginX:lt,vertOriginY:lt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:lt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Nnt=/^data[-\w.:]+$/i,kue=/-[a-z]/g,Ont=/[A-Z]/g;function s6(e,t){const n=nI(t);let r=t,i=gd;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Nnt.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(kue,Mnt);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!kue.test(s)){let o=s.replace(Ont,Dnt);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=CX}return new i(r,t)}function Dnt(e){return"-"+e.toLowerCase()}function Mnt(e){return e.charAt(1).toUpperCase()}const $nt={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},WR=PSe([DSe,OSe,LSe,FSe,knt],"html"),tv=PSe([DSe,OSe,LSe,FSe,Pnt],"svg");function Pue(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function jSe(e){return e.join(" ").trim()}var BSe={},Nue=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Lnt=/\n/g,Fnt=/^\s*/,jnt=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Bnt=/^:\s*/,znt=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Unt=/^[;\s]*/,Vnt=/^\s+|\s+$/g,Hnt=`
`,Oue="/",Due="*",l1="",qnt="comment",Wnt="declaration",Gnt=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(Lnt);m&&(n+=m.length);var g=p.lastIndexOf(Hnt);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),u(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function l(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function u(){l(Fnt)}function c(p){var m;for(p=p||[];m=d();)m!==!1&&p.push(m);return p}function d(){var p=s();if(!(Oue!=e.charAt(0)||Due!=e.charAt(1))){for(var m=2;l1!=e.charAt(m)&&(Due!=e.charAt(m)||Oue!=e.charAt(m+1));)++m;if(m+=2,l1===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:qnt,comment:g})}}function f(){var p=s(),m=l(jnt);if(m){if(d(),!l(Bnt))return a("property missing ':'");var g=l(znt),y=p({type:Wnt,property:Mue(m[0].replace(Nue,l1)),value:g?Mue(g[0].replace(Nue,l1)):l1});return l(Unt),y}}function h(){var p=[];c(p);for(var m;m=f();)m!==!1&&(p.push(m),c(p));return p}return u(),h()};function Mue(e){return e?e.replace(Vnt,l1):l1}var Ynt=Ys&&Ys.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(BSe,"__esModule",{value:!0});var Knt=Ynt(Gnt);function Xnt(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,Knt.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var $ue=BSe.default=Xnt;const Qnt=$ue.default||$ue,o6=zSe("end"),bp=zSe("start");function zSe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Jnt(e){const t=bp(e),n=o6(e);if(t&&n)return{start:t,end:n}}function L2(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Lue(e.position):"start"in e||"end"in e?Lue(e):"line"in e||"column"in e?zU(e):""}function zU(e){return Fue(e&&e.line)+":"+Fue(e&&e.column)}function Lue(e){return zU(e&&e.start)+"-"+zU(e&&e.end)}function Fue(e){return e&&typeof e=="number"?e:1}class za extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=L2(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}za.prototype.file="";za.prototype.name="";za.prototype.reason="";za.prototype.message="";za.prototype.stack="";za.prototype.column=void 0;za.prototype.line=void 0;za.prototype.ancestors=void 0;za.prototype.cause=void 0;za.prototype.fatal=void 0;za.prototype.place=void 0;za.prototype.ruleId=void 0;za.prototype.source=void 0;const AX={}.hasOwnProperty,Znt=new Map,ert=/[A-Z]/g,trt=/-([a-z])/g,nrt=new Set(["table","tbody","thead","tfoot","tr"]),rrt=new Set(["td","th"]),USe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function irt(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=frt(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=drt(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?tv:WR,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=VSe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function VSe(e,t,n){if(t.type==="element")return srt(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return ort(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return lrt(e,t,n);if(t.type==="mdxjsEsm")return art(e,t);if(t.type==="root")return urt(e,t,n);if(t.type==="text")return crt(e,t)}function srt(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=tv,e.schema=i),e.ancestors.push(t);const s=qSe(e,t.tagName,!1),o=hrt(e,t);let a=RX(e,t);return nrt.has(t.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!Ant(l):!0})),HSe(e,o,s,t),IX(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function ort(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}rI(e,t.position)}function art(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);rI(e,t.position)}function lrt(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=tv,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:qSe(e,t.name,!0),o=prt(e,t),a=RX(e,t);return HSe(e,o,s,t),IX(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function urt(e,t,n){const r={};return IX(r,RX(e,t)),e.create(t,e.Fragment,r,n)}function crt(e,t){return t.value}function HSe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function IX(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function drt(e,t,n){return r;function r(i,s,o,a){const u=Array.isArray(o.children)?n:t;return a?u(s,o,a):u(s,o)}}function frt(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=bp(r);return t(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function hrt(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&AX.call(t.properties,i)){const s=mrt(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&rrt.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function prt(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else rI(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else rI(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function RX(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Znt;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;o=l+"-"+u,i.set(l,u+1)}}const a=VSe(e,s,o);a!==void 0&&n.push(a)}return n}function mrt(e,t,n){const r=s6(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?kSe(n):jSe(n)),r.property==="style"){let i=typeof n=="object"?n:grt(e,String(n));return e.stylePropertyNameCase==="css"&&(i=yrt(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?$nt[r.property]||r.property:r.attribute,n]}}function grt(e,t){const n={};try{Qnt(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new za("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=USe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(trt,brt)),n[o]=s}}function qSe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Aue(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Aue(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return AX.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);rI(e)}function rI(e,t){const n=new za("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=USe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function yrt(e){const t={};let n;for(n in e)AX.call(e,n)&&(t[vrt(n)]=e[n]);return t}function vrt(e){let t=e.replace(ert,_rt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function brt(e,t){return t.toUpperCase()}function _rt(e){return"-"+e.toLowerCase()}const tB={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},wrt={};function Ert(e,t){const n=wrt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return WSe(e,r,i)}function WSe(e,t,n){if(xrt(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return jue(e.children,t,n)}return Array.isArray(e)?jue(e,t,n):""}function jue(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=WSe(e[i],t,n);return r.join("")}function xrt(e){return!!(e&&typeof e=="object")}const Bue=document.createElement("i");function kX(e){const t="&"+e+";";Bue.innerHTML=t;const n=Bue.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function qm(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Rc(e,t){return e.length>0?(qm(e,e.length,0,t),e):t}const zue={}.hasOwnProperty;function Srt(e){const t={};let n=-1;for(;++n<e.length;)Trt(t,e[n]);return t}function Trt(e,t){let n;for(n in t){const i=(zue.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){zue.call(i,o)||(i[o]=[]);const a=s[o];Crt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Crt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);qm(e,0,0,r)}function GSe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function oE(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const _h=nv(/[A-Za-z]/),zu=nv(/[\dA-Za-z]/),Art=nv(/[#-'*+\--9=?A-Z^-~]/);function UU(e){return e!==null&&(e<32||e===127)}const VU=nv(/\d/),Irt=nv(/[\dA-Fa-f]/),Rrt=nv(/[!-/:-@[-`{-~]/);function hn(e){return e!==null&&e<-2}function ru(e){return e!==null&&(e<0||e===32)}function Or(e){return e===-2||e===-1||e===32}const krt=nv(new RegExp("\\p{P}|\\p{S}","u")),Prt=nv(/\s/);function nv(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function mS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&zu(e.charCodeAt(n+1))&&zu(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function bi(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Or(l)?(e.enter(n),a(l)):t(l)}function a(l){return Or(l)&&s++<i?(e.consume(l),a):(e.exit(n),t(l))}}const Nrt={tokenize:Ort};function Ort(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),bi(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return hn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const Drt={tokenize:Mrt},Uue={tokenize:$rt};function Mrt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,l,u)(_)}return u(_)}function l(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,S;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){S=t.events[E][1].end;break}y(r);let x=w;for(;x<t.events.length;)t.events[x][1].end=Object.assign({},S),x++;return qm(t.events,E+1,0,t.events.slice(w)),t.events.length=x,u(_)}return a(_)}function u(_){if(r===n.length){if(!i)return f(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Uue,c,d)(_)}function c(_){return i&&v(),y(r),f(_)}function d(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(_)}function f(_){return t.containerState={},e.attempt(Uue,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),f(_)}function p(_){if(_===null){i&&v(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(_)}function m(_){if(_===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return hn(_)?(e.consume(_),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function g(_,w){const E=t.sliceStream(_);if(w&&E.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(E),t.parser.lazy[_.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const x=t.events.length;let T=x,I,P;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){if(I){P=t.events[T][1].end;break}I=!0}for(y(r),S=x;S<t.events.length;)t.events[S][1].end=Object.assign({},P),S++;qm(t.events,T+1,0,t.events.slice(x)),t.events.length=S}}function y(_){let w=n.length;for(;w-- >_;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=_}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function $rt(e,t,n){return bi(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Vue(e){if(e===null||ru(e)||Prt(e))return 1;if(krt(e))return 2}function PX(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const HU={name:"attention",tokenize:Frt,resolveAll:Lrt};function Lrt(e,t){let n=-1,r,i,s,o,a,l,u,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d=Object.assign({},e[r][1].end),f=Object.assign({},e[n][1].start);Hue(d,-l),Hue(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[r][1].end)},a={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:f},s={type:l>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:l>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=Rc(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=Rc(u,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),u=Rc(u,PX(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=Rc(u,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,u=Rc(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,qm(e,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Frt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Vue(r);let s;return o;function o(l){return s=l,e.enter("attentionSequence"),a(l)}function a(l){if(l===s)return e.consume(l),a;const u=e.exit("attentionSequence"),c=Vue(l),d=!c||c===2&&i||n.includes(l),f=!i||i===2&&c||n.includes(r);return u._open=!!(s===42?d:d&&(i||!f)),u._close=!!(s===42?f:f&&(c||!d)),t(l)}}function Hue(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const jrt={name:"autolink",tokenize:Brt};function Brt(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return _h(h)?(e.consume(h),o):h===64?n(h):u(h)}function o(h){return h===43||h===45||h===46||zu(h)?(r=1,a(h)):u(h)}function a(h){return h===58?(e.consume(h),r=0,l):(h===43||h===45||h===46||zu(h))&&r++<32?(e.consume(h),a):(r=0,u(h))}function l(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||UU(h)?n(h):(e.consume(h),l)}function u(h){return h===64?(e.consume(h),c):Art(h)?(e.consume(h),u):n(h)}function c(h){return zu(h)?d(h):n(h)}function d(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):f(h)}function f(h){if((h===45||zu(h))&&r++<63){const p=h===45?f:d;return e.consume(h),p}return n(h)}}const a6={tokenize:zrt,partial:!0};function zrt(e,t,n){return r;function r(s){return Or(s)?bi(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||hn(s)?t(s):n(s)}}const YSe={name:"blockQuote",tokenize:Urt,continuation:{tokenize:Vrt},exit:Hrt};function Urt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Or(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Vrt(e,t,n){const r=this;return i;function i(o){return Or(o)?bi(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(YSe,t,n)(o)}}function Hrt(e){e.exit("blockQuote")}const KSe={name:"characterEscape",tokenize:qrt};function qrt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return Rrt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const XSe={name:"characterReference",tokenize:Wrt};function Wrt(e,t,n){const r=this;let i=0,s,o;return a;function a(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),l}function l(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,o=zu,c(d))}function u(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=Irt,c):(e.enter("characterReferenceValue"),s=7,o=VU,c(d))}function c(d){if(d===59&&i){const f=e.exit("characterReferenceValue");return o===zu&&!kX(r.sliceSerialize(f))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&i++<s?(e.consume(d),c):n(d)}}const que={tokenize:Yrt,partial:!0},Wue={name:"codeFenced",tokenize:Grt,concrete:!0};function Grt(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return l;function l(S){return u(S)}function u(S){const x=r.events[r.events.length-1];return s=x&&x[1].type==="linePrefix"?x[2].sliceSerialize(x[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),Or(S)?bi(e,d,"whitespace")(S):d(S))}function d(S){return S===null||hn(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(que,m,w)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(S))}function f(S){return S===null||hn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(S)):Or(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),bi(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),f)}function h(S){return S===null||hn(S)?d(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||hn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,w,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&Or(S)?bi(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||hn(S)?e.check(que,m,w)(S):(e.enter("codeFlowValue"),_(S))}function _(S){return S===null||hn(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),_)}function w(S){return e.exit("codeFenced"),t(S)}function E(S,x,T){let I=0;return P;function P($){return S.enter("lineEnding"),S.consume($),S.exit("lineEnding"),k}function k($){return S.enter("codeFencedFence"),Or($)?bi(S,D,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)($):D($)}function D($){return $===a?(S.enter("codeFencedFenceSequence"),R($)):T($)}function R($){return $===a?(I++,S.consume($),R):I>=o?(S.exit("codeFencedFenceSequence"),Or($)?bi(S,M,"whitespace")($):M($)):T($)}function M($){return $===null||hn($)?(S.exit("codeFencedFence"),x($)):T($)}}}function Yrt(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const nB={name:"codeIndented",tokenize:Xrt},Krt={tokenize:Qrt,partial:!0};function Xrt(e,t,n){const r=this;return i;function i(u){return e.enter("codeIndented"),bi(e,s,"linePrefix",5)(u)}function s(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):hn(u)?e.attempt(Krt,o,l)(u):(e.enter("codeFlowValue"),a(u))}function a(u){return u===null||hn(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),a)}function l(u){return e.exit("codeIndented"),t(u)}}function Qrt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):hn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):bi(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):hn(o)?i(o):n(o)}}const Jrt={name:"codeText",tokenize:tit,resolve:Zrt,previous:eit};function Zrt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function eit(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tit(e,t,n){let r=0,i,s;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),a(d)}function a(d){return d===96?(e.consume(d),r++,a):(e.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),l):d===96?(s=e.enter("codeTextSequence"),i=0,c(d)):hn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):(e.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||hn(d)?(e.exit("codeTextData"),l(d)):(e.consume(d),u)}function c(d){return d===96?(e.consume(d),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",u(d))}}class nit{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&OT(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),OT(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),OT(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);OT(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);OT(this.left,n.reverse())}}}function OT(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function QSe(e){const t={};let n=-1,r,i,s,o,a,l,u;const c=new nit(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,rit(c,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return qm(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function rit(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,l=[],u={};let c,d,f=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),d&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),f=g.length;f--;){const y=a.slice(g[f],g[f+1]),v=s.pop();l.push([v,v+y.length-1]),e.splice(v,2,y)}for(l.reverse(),f=-1;++f<l.length;)u[p+l[f][0]]=p+l[f][1],p+=l[f][1]-l[f][0]-1;return u}const iit={tokenize:ait,resolve:oit},sit={tokenize:lit,partial:!0};function oit(e){return QSe(e),e}function ait(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):hn(a)?e.check(sit,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function lit(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),bi(e,s,"linePrefix")}function s(o){if(o===null||hn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function JSe(e,t,n,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return d;function d(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),f):y===null||y===32||y===41||UU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function f(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),f(y)):y===null||y===60||hn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||ru(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<u&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||UU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function ZSe(e,t,n,r,i,s){const o=this;let a=0,l;return u;function u(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!l||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):hn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===null||h===91||h===93||hn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),l||(l=!Or(h)),h===92?f:d)}function f(h){return h===91||h===92||h===93?(e.consume(h),a++,d):d(h)}}function eTe(e,t,n,r,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(e.enter(r),e.enter(i),e.consume(f),e.exit(i),o=f===40?41:f,l):n(f)}function l(f){return f===o?(e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):(e.enter(s),u(f))}function u(f){return f===o?(e.exit(s),l(o)):f===null?n(f):hn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),bi(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===o||f===null||hn(f)?(e.exit("chunkString"),u(f)):(e.consume(f),f===92?d:c)}function d(f){return f===o||f===92?(e.consume(f),c):c(f)}}function F2(e,t){let n;return r;function r(i){return hn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Or(i)?bi(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const uit={name:"definition",tokenize:dit},cit={tokenize:fit,partial:!0};function dit(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return ZSe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=oE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),l):n(h)}function l(h){return ru(h)?F2(e,u)(h):u(h)}function u(h){return JSe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(cit,d,d)(h)}function d(h){return Or(h)?bi(e,f,"whitespace")(h):f(h)}function f(h){return h===null||hn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function fit(e,t,n){return r;function r(a){return ru(a)?F2(e,i)(a):n(a)}function i(a){return eTe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Or(a)?bi(e,o,"whitespace")(a):o(a)}function o(a){return a===null||hn(a)?t(a):n(a)}}const hit={name:"hardBreakEscape",tokenize:pit};function pit(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return hn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const mit={name:"headingAtx",tokenize:yit,resolve:git};function git(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},qm(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function yit(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||ru(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),l(c)):c===null||hn(c)?(e.exit("atxHeading"),t(c)):Or(c)?bi(e,a,"whitespace")(c):(e.enter("atxHeadingText"),u(c))}function l(c){return c===35?(e.consume(c),l):(e.exit("atxHeadingSequence"),a(c))}function u(c){return c===null||c===35||ru(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),u)}}const vit=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Gue=["pre","script","style","textarea"],bit={name:"htmlFlow",tokenize:xit,resolveTo:Eit,concrete:!0},_it={tokenize:Tit,partial:!0},wit={tokenize:Sit,partial:!0};function Eit(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function xit(e,t,n){const r=this;let i,s,o,a,l;return u;function u(F){return c(F)}function c(F){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(F),d}function d(F){return F===33?(e.consume(F),f):F===47?(e.consume(F),s=!0,m):F===63?(e.consume(F),i=3,r.interrupt?t:N):_h(F)?(e.consume(F),o=String.fromCharCode(F),g):n(F)}function f(F){return F===45?(e.consume(F),i=2,h):F===91?(e.consume(F),i=5,a=0,p):_h(F)?(e.consume(F),i=4,r.interrupt?t:N):n(F)}function h(F){return F===45?(e.consume(F),r.interrupt?t:N):n(F)}function p(F){const H="CDATA[";return F===H.charCodeAt(a++)?(e.consume(F),a===H.length?r.interrupt?t:D:p):n(F)}function m(F){return _h(F)?(e.consume(F),o=String.fromCharCode(F),g):n(F)}function g(F){if(F===null||F===47||F===62||ru(F)){const H=F===47,G=o.toLowerCase();return!H&&!s&&Gue.includes(G)?(i=1,r.interrupt?t(F):D(F)):vit.includes(o.toLowerCase())?(i=6,H?(e.consume(F),y):r.interrupt?t(F):D(F)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(F):s?v(F):_(F))}return F===45||zu(F)?(e.consume(F),o+=String.fromCharCode(F),g):n(F)}function y(F){return F===62?(e.consume(F),r.interrupt?t:D):n(F)}function v(F){return Or(F)?(e.consume(F),v):P(F)}function _(F){return F===47?(e.consume(F),P):F===58||F===95||_h(F)?(e.consume(F),w):Or(F)?(e.consume(F),_):P(F)}function w(F){return F===45||F===46||F===58||F===95||zu(F)?(e.consume(F),w):E(F)}function E(F){return F===61?(e.consume(F),S):Or(F)?(e.consume(F),E):_(F)}function S(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(e.consume(F),l=F,x):Or(F)?(e.consume(F),S):T(F)}function x(F){return F===l?(e.consume(F),l=null,I):F===null||hn(F)?n(F):(e.consume(F),x)}function T(F){return F===null||F===34||F===39||F===47||F===60||F===61||F===62||F===96||ru(F)?E(F):(e.consume(F),T)}function I(F){return F===47||F===62||Or(F)?_(F):n(F)}function P(F){return F===62?(e.consume(F),k):n(F)}function k(F){return F===null||hn(F)?D(F):Or(F)?(e.consume(F),k):n(F)}function D(F){return F===45&&i===2?(e.consume(F),L):F===60&&i===1?(e.consume(F),B):F===62&&i===4?(e.consume(F),V):F===63&&i===3?(e.consume(F),N):F===93&&i===5?(e.consume(F),z):hn(F)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(_it,W,R)(F)):F===null||hn(F)?(e.exit("htmlFlowData"),R(F)):(e.consume(F),D)}function R(F){return e.check(wit,M,W)(F)}function M(F){return e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),$}function $(F){return F===null||hn(F)?R(F):(e.enter("htmlFlowData"),D(F))}function L(F){return F===45?(e.consume(F),N):D(F)}function B(F){return F===47?(e.consume(F),o="",U):D(F)}function U(F){if(F===62){const H=o.toLowerCase();return Gue.includes(H)?(e.consume(F),V):D(F)}return _h(F)&&o.length<8?(e.consume(F),o+=String.fromCharCode(F),U):D(F)}function z(F){return F===93?(e.consume(F),N):D(F)}function N(F){return F===62?(e.consume(F),V):F===45&&i===2?(e.consume(F),N):D(F)}function V(F){return F===null||hn(F)?(e.exit("htmlFlowData"),W(F)):(e.consume(F),V)}function W(F){return e.exit("htmlFlow"),t(F)}}function Sit(e,t,n){const r=this;return i;function i(o){return hn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function Tit(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(a6,t,n)}}const Cit={name:"htmlText",tokenize:Ait};function Ait(e,t,n){const r=this;let i,s,o;return a;function a(N){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(N),l}function l(N){return N===33?(e.consume(N),u):N===47?(e.consume(N),E):N===63?(e.consume(N),_):_h(N)?(e.consume(N),T):n(N)}function u(N){return N===45?(e.consume(N),c):N===91?(e.consume(N),s=0,p):_h(N)?(e.consume(N),v):n(N)}function c(N){return N===45?(e.consume(N),h):n(N)}function d(N){return N===null?n(N):N===45?(e.consume(N),f):hn(N)?(o=d,B(N)):(e.consume(N),d)}function f(N){return N===45?(e.consume(N),h):d(N)}function h(N){return N===62?L(N):N===45?f(N):d(N)}function p(N){const V="CDATA[";return N===V.charCodeAt(s++)?(e.consume(N),s===V.length?m:p):n(N)}function m(N){return N===null?n(N):N===93?(e.consume(N),g):hn(N)?(o=m,B(N)):(e.consume(N),m)}function g(N){return N===93?(e.consume(N),y):m(N)}function y(N){return N===62?L(N):N===93?(e.consume(N),y):m(N)}function v(N){return N===null||N===62?L(N):hn(N)?(o=v,B(N)):(e.consume(N),v)}function _(N){return N===null?n(N):N===63?(e.consume(N),w):hn(N)?(o=_,B(N)):(e.consume(N),_)}function w(N){return N===62?L(N):_(N)}function E(N){return _h(N)?(e.consume(N),S):n(N)}function S(N){return N===45||zu(N)?(e.consume(N),S):x(N)}function x(N){return hn(N)?(o=x,B(N)):Or(N)?(e.consume(N),x):L(N)}function T(N){return N===45||zu(N)?(e.consume(N),T):N===47||N===62||ru(N)?I(N):n(N)}function I(N){return N===47?(e.consume(N),L):N===58||N===95||_h(N)?(e.consume(N),P):hn(N)?(o=I,B(N)):Or(N)?(e.consume(N),I):L(N)}function P(N){return N===45||N===46||N===58||N===95||zu(N)?(e.consume(N),P):k(N)}function k(N){return N===61?(e.consume(N),D):hn(N)?(o=k,B(N)):Or(N)?(e.consume(N),k):I(N)}function D(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(e.consume(N),i=N,R):hn(N)?(o=D,B(N)):Or(N)?(e.consume(N),D):(e.consume(N),M)}function R(N){return N===i?(e.consume(N),i=void 0,$):N===null?n(N):hn(N)?(o=R,B(N)):(e.consume(N),R)}function M(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||ru(N)?I(N):(e.consume(N),M)}function $(N){return N===47||N===62||ru(N)?I(N):n(N)}function L(N){return N===62?(e.consume(N),e.exit("htmlTextData"),e.exit("htmlText"),t):n(N)}function B(N){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(N),e.exit("lineEnding"),U}function U(N){return Or(N)?bi(e,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):z(N)}function z(N){return e.enter("htmlTextData"),o(N)}}const NX={name:"labelEnd",tokenize:Oit,resolveTo:Nit,resolveAll:Pit},Iit={tokenize:Dit},Rit={tokenize:Mit},kit={tokenize:$it};function Pit(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function Nit(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},u={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",l,t],["enter",u,t]],a=Rc(a,e.slice(s+1,s+r+3)),a=Rc(a,[["enter",c,t]]),a=Rc(a,PX(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Rc(a,[["exit",c,t],e[o-2],e[o-1],["exit",u,t]]),a=Rc(a,e.slice(o+1)),a=Rc(a,[["exit",l,t]]),qm(e,s,e.length,a),e}function Oit(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(f){return s?s._inactive?d(f):(o=r.parser.defined.includes(oE(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),l):n(f)}function l(f){return f===40?e.attempt(Iit,c,o?c:d)(f):f===91?e.attempt(Rit,c,o?u:d)(f):o?c(f):d(f)}function u(f){return e.attempt(kit,c,d)(f)}function c(f){return t(f)}function d(f){return s._balanced=!0,n(f)}}function Dit(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),i}function i(d){return ru(d)?F2(e,s)(d):s(d)}function s(d){return d===41?c(d):JSe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return ru(d)?F2(e,l)(d):c(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?eTe(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function u(d){return ru(d)?F2(e,c)(d):c(d)}function c(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function Mit(e,t,n){const r=this;return i;function i(a){return ZSe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(oE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function $it(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const Lit={name:"labelStartImage",tokenize:Fit,resolveAll:NX.resolveAll};function Fit(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const jit={name:"labelStartLink",tokenize:Bit,resolveAll:NX.resolveAll};function Bit(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const rB={name:"lineEnding",tokenize:zit};function zit(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),bi(e,t,"linePrefix")}}const tD={name:"thematicBreak",tokenize:Uit};function Uit(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),o(u)}function o(u){return i=u,a(u)}function a(u){return u===i?(e.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||hn(u))?(e.exit("thematicBreak"),t(u)):n(u)}function l(u){return u===i?(e.consume(u),r++,l):(e.exit("thematicBreakSequence"),Or(u)?bi(e,a,"whitespace")(u):a(u))}}const Ol={name:"list",tokenize:qit,continuation:{tokenize:Wit},exit:Yit},Vit={tokenize:Kit,partial:!0},Hit={tokenize:Git,partial:!0};function qit(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:VU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(tD,n,u)(h):u(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(h)}return n(h)}function l(h){return VU(h)&&++o<10?(e.consume(h),l):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),u(h)):n(h)}function u(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(a6,r.interrupt?n:c,e.attempt(Vit,f,d))}function c(h){return r.containerState.initialBlankLine=!0,s++,f(h)}function d(h){return Or(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),f):n(h)}function f(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function Wit(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(a6,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,bi(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Or(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Hit,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,bi(e,e.attempt(Ol,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Git(e,t,n){const r=this;return bi(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function Yit(e){e.exit(this.containerState.type)}function Kit(e,t,n){const r=this;return bi(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Or(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Yue={name:"setextUnderline",tokenize:Qit,resolveTo:Xit};function Xit(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Qit(e,t,n){const r=this;let i;return s;function s(u){let c=r.events.length,d;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){d=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(e.consume(u),a):(e.exit("setextHeadingLineSequence"),Or(u)?bi(e,l,"lineSuffix")(u):l(u))}function l(u){return u===null||hn(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const Jit={tokenize:Zit};function Zit(e){const t=this,n=e.attempt(a6,r,e.attempt(this.parser.constructs.flowInitial,i,bi(e,e.attempt(this.parser.constructs.flow,i,e.attempt(iit,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const est={resolveAll:nTe()},tst=tTe("string"),nst=tTe("text");function tTe(e){return{tokenize:t,resolveAll:nTe(e==="text"?rst:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return u(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const d=i[c];let f=-1;if(d)for(;++f<d.length;){const h=d[f];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function nTe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function rst(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(a){const u={type:n===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},u.start),r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}function ist(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const l={consume:v,enter:_,exit:w,attempt:x(E),check:x(S),interrupt:x(S,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:f,now:p,defineSkip:m,write:d};let c=t.tokenize.call(u,l);return t.resolveAll&&s.push(t),u;function d(k){return o=Rc(o,k),g(),o[o.length-1]!==null?[]:(T(t,0),u.events=PX(s,u.events,u),u.events)}function f(k,D){return ost(h(k),D)}function h(k){return sst(o,k)}function p(){const{line:k,column:D,offset:R,_index:M,_bufferIndex:$}=r;return{line:k,column:D,offset:R,_index:M,_bufferIndex:$}}function m(k){i[k.line]=k.column,P()}function g(){let k;for(;r._index<o.length;){const D=o[r._index];if(typeof D=="string")for(k=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===k&&r._bufferIndex<D.length;)y(D.charCodeAt(r._bufferIndex));else y(D)}}function y(k){c=c(k)}function v(k){hn(k)?(r.line++,r.column=1,r.offset+=k===-3?2:1,P()):k!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=k}function _(k,D){const R=D||{};return R.type=k,R.start=p(),u.events.push(["enter",R,u]),a.push(R),R}function w(k){const D=a.pop();return D.end=p(),u.events.push(["exit",D,u]),D}function E(k,D){T(k,D.from)}function S(k,D){D.restore()}function x(k,D){return R;function R(M,$,L){let B,U,z,N;return Array.isArray(M)?W(M):"tokenize"in M?W([M]):V(M);function V(Q){return ie;function ie(se){const ne=se!==null&&Q[se],ce=se!==null&&Q.null,Ee=[...Array.isArray(ne)?ne:ne?[ne]:[],...Array.isArray(ce)?ce:ce?[ce]:[]];return W(Ee)(se)}}function W(Q){return B=Q,U=0,Q.length===0?L:F(Q[U])}function F(Q){return ie;function ie(se){return N=I(),z=Q,Q.partial||(u.currentConstruct=Q),Q.name&&u.parser.constructs.disable.null.includes(Q.name)?G():Q.tokenize.call(D?Object.assign(Object.create(u),D):u,l,H,G)(se)}}function H(Q){return k(z,N),$}function G(Q){return N.restore(),++U<B.length?F(B[U]):L}}}function T(k,D){k.resolveAll&&!s.includes(k)&&s.push(k),k.resolve&&qm(u.events,D,u.events.length-D,k.resolve(u.events.slice(D),u)),k.resolveTo&&(u.events=k.resolveTo(u.events,u))}function I(){const k=p(),D=u.previous,R=u.currentConstruct,M=u.events.length,$=Array.from(a);return{restore:L,from:M};function L(){r=k,u.previous=D,u.currentConstruct=R,u.events.length=M,a=$,P()}}function P(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function sst(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function ost(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const ast={42:Ol,43:Ol,45:Ol,48:Ol,49:Ol,50:Ol,51:Ol,52:Ol,53:Ol,54:Ol,55:Ol,56:Ol,57:Ol,62:YSe},lst={91:uit},ust={[-2]:nB,[-1]:nB,32:nB},cst={35:mit,42:tD,45:[Yue,tD],60:bit,61:Yue,95:tD,96:Wue,126:Wue},dst={38:XSe,92:KSe},fst={[-5]:rB,[-4]:rB,[-3]:rB,33:Lit,38:XSe,42:HU,60:[jrt,Cit],91:jit,92:[hit,KSe],93:NX,95:HU,96:Jrt},hst={null:[HU,est]},pst={null:[42,95]},mst={null:[]},gst=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:pst,contentInitial:lst,disable:mst,document:ast,flow:cst,flowInitial:ust,insideSpan:hst,string:dst,text:fst},Symbol.toStringTag,{value:"Module"}));function yst(e){const n=Srt([gst,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(Nrt),document:i(Drt),flow:i(Jit),string:i(tst),text:i(nst)};return r;function i(s){return o;function o(a){return ist(r,s,a)}}}function vst(e){for(;!QSe(e););return e}const Kue=/[\0\t\n\r]/g;function bst(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const l=[];let u,c,d,f,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(Kue.lastIndex=d,u=Kue.exec(s),f=u&&u.index!==void 0?u.index:s.length,h=s.charCodeAt(f),!u){t=s.slice(d);break}if(h===10&&d===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<f&&(l.push(s.slice(d,f)),e+=f-d),h){case 0:{l.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,l.push(-2);e++<c;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}d=f+1}return a&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const _st=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function wst(e){return e.replace(_st,Est)}function Est(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return GSe(n.slice(s?2:1),s?16:10)}return kX(n)||e}const rTe={}.hasOwnProperty;function xst(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Sst(n)(vst(yst(n).document().write(bst()(e,t,!0))))}function Sst(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Pe),autolinkProtocol:I,autolinkEmail:I,atxHeading:s(Ne),blockQuote:s(ce),characterEscape:I,characterReference:I,codeFenced:s(Ee),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ee,o),codeText:s(de,o),codeTextData:I,data:I,codeFlowValue:I,definition:s(We),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Fe),hardBreakEscape:s(je),hardBreakTrailing:s(je),htmlFlow:s(ye,o),htmlFlowData:I,htmlText:s(ye,o),htmlTextData:I,image:s(ae),label:o,link:s(Pe),listItem:s(ft),listItemValue:f,listOrdered:s(Be,d),listUnordered:s(Be),paragraph:s(Se),reference:F,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ne),strong:s(he),thematicBreak:s(tt)},exit:{atxHeading:l(),atxHeadingSequence:E,autolink:l(),autolinkEmail:ne,autolinkProtocol:se,blockQuote:l(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:Q,characterReference:ie,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:P,codeIndented:l(y),codeText:l($),codeTextData:P,data:P,definition:l(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:_,emphasis:l(),hardBreakEscape:l(D),hardBreakTrailing:l(D),htmlFlow:l(R),htmlFlowData:P,htmlText:l(M),htmlTextData:P,image:l(B),label:z,labelText:U,lineEnding:k,link:l(L),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:H,resourceDestinationString:N,resourceTitleString:V,resource:W,setextHeading:l(T),setextHeadingLineSequence:x,setextHeadingText:S,strong:l(),thematicBreak:l()}};iTe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ge){let ke={type:"root",children:[]};const Ye={stack:[ke],tokenStack:[],config:t,enter:a,exit:u,buffer:o,resume:c,data:n},Xe=[];let xt=-1;for(;++xt<ge.length;)if(ge[xt][1].type==="listOrdered"||ge[xt][1].type==="listUnordered")if(ge[xt][0]==="enter")Xe.push(xt);else{const An=Xe.pop();xt=i(ge,An,xt)}for(xt=-1;++xt<ge.length;){const An=t[ge[xt][0]];rTe.call(An,ge[xt][1].type)&&An[ge[xt][1].type].call(Object.assign({sliceSerialize:ge[xt][2].sliceSerialize},Ye),ge[xt][1])}if(Ye.tokenStack.length>0){const An=Ye.tokenStack[Ye.tokenStack.length-1];(An[1]||Xue).call(Ye,void 0,An[0])}for(ke.position={start:Mg(ge.length>0?ge[0][1].start:{line:1,column:1,offset:0}),end:Mg(ge.length>0?ge[ge.length-2][1].end:{line:1,column:1,offset:0})},xt=-1;++xt<t.transforms.length;)ke=t.transforms[xt](ke)||ke;return ke}function i(ge,ke,Ye){let Xe=ke-1,xt=-1,An=!1,gr,yr,kr,Xt;for(;++Xe<=Ye;){const Dn=ge[Xe];switch(Dn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Dn[0]==="enter"?xt++:xt--,Xt=void 0;break}case"lineEndingBlank":{Dn[0]==="enter"&&(gr&&!Xt&&!xt&&!kr&&(kr=Xe),Xt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Xt=void 0}if(!xt&&Dn[0]==="enter"&&Dn[1].type==="listItemPrefix"||xt===-1&&Dn[0]==="exit"&&(Dn[1].type==="listUnordered"||Dn[1].type==="listOrdered")){if(gr){let rr=Xe;for(yr=void 0;rr--;){const ir=ge[rr];if(ir[1].type==="lineEnding"||ir[1].type==="lineEndingBlank"){if(ir[0]==="exit")continue;yr&&(ge[yr][1].type="lineEndingBlank",An=!0),ir[1].type="lineEnding",yr=rr}else if(!(ir[1].type==="linePrefix"||ir[1].type==="blockQuotePrefix"||ir[1].type==="blockQuotePrefixWhitespace"||ir[1].type==="blockQuoteMarker"||ir[1].type==="listItemIndent"))break}kr&&(!yr||kr<yr)&&(gr._spread=!0),gr.end=Object.assign({},yr?ge[yr][1].start:Dn[1].end),ge.splice(yr||Xe,0,["exit",gr,Dn[2]]),Xe++,Ye++}if(Dn[1].type==="listItemPrefix"){const rr={type:"listItem",_spread:!1,start:Object.assign({},Dn[1].start),end:void 0};gr=rr,ge.splice(Xe,0,["enter",rr,Dn[2]]),Xe++,Ye++,kr=void 0,Xt=!0}}}return ge[ke][1]._spread=An,Ye}function s(ge,ke){return Ye;function Ye(Xe){a.call(this,ge(Xe),Xe),ke&&ke.call(this,Xe)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ge,ke,Ye){this.stack[this.stack.length-1].children.push(ge),this.stack.push(ge),this.tokenStack.push([ke,Ye]),ge.position={start:Mg(ke.start),end:void 0}}function l(ge){return ke;function ke(Ye){ge&&ge.call(this,Ye),u.call(this,Ye)}}function u(ge,ke){const Ye=this.stack.pop(),Xe=this.tokenStack.pop();if(Xe)Xe[0].type!==ge.type&&(ke?ke.call(this,ge,Xe[0]):(Xe[1]||Xue).call(this,ge,Xe[0]));else throw new Error("Cannot close `"+ge.type+"` ("+L2({start:ge.start,end:ge.end})+"): its not open");Ye.position.end=Mg(ge.end)}function c(){return Ert(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(ge){if(this.data.expectingFirstListItemValue){const ke=this.stack[this.stack.length-2];ke.start=Number.parseInt(this.sliceSerialize(ge),10),this.data.expectingFirstListItemValue=void 0}}function h(){const ge=this.resume(),ke=this.stack[this.stack.length-1];ke.lang=ge}function p(){const ge=this.resume(),ke=this.stack[this.stack.length-1];ke.meta=ge}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const ge=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ge.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const ge=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ge.replace(/(\r?\n|\r)$/g,"")}function v(ge){const ke=this.resume(),Ye=this.stack[this.stack.length-1];Ye.label=ke,Ye.identifier=oE(this.sliceSerialize(ge)).toLowerCase()}function _(){const ge=this.resume(),ke=this.stack[this.stack.length-1];ke.title=ge}function w(){const ge=this.resume(),ke=this.stack[this.stack.length-1];ke.url=ge}function E(ge){const ke=this.stack[this.stack.length-1];if(!ke.depth){const Ye=this.sliceSerialize(ge).length;ke.depth=Ye}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function x(ge){const ke=this.stack[this.stack.length-1];ke.depth=this.sliceSerialize(ge).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function I(ge){const Ye=this.stack[this.stack.length-1].children;let Xe=Ye[Ye.length-1];(!Xe||Xe.type!=="text")&&(Xe=Ve(),Xe.position={start:Mg(ge.start),end:void 0},Ye.push(Xe)),this.stack.push(Xe)}function P(ge){const ke=this.stack.pop();ke.value+=this.sliceSerialize(ge),ke.position.end=Mg(ge.end)}function k(ge){const ke=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ye=ke.children[ke.children.length-1];Ye.position.end=Mg(ge.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ke.type)&&(I.call(this,ge),P.call(this,ge))}function D(){this.data.atHardBreak=!0}function R(){const ge=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ge}function M(){const ge=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ge}function $(){const ge=this.resume(),ke=this.stack[this.stack.length-1];ke.value=ge}function L(){const ge=this.stack[this.stack.length-1];if(this.data.inReference){const ke=this.data.referenceType||"shortcut";ge.type+="Reference",ge.referenceType=ke,delete ge.url,delete ge.title}else delete ge.identifier,delete ge.label;this.data.referenceType=void 0}function B(){const ge=this.stack[this.stack.length-1];if(this.data.inReference){const ke=this.data.referenceType||"shortcut";ge.type+="Reference",ge.referenceType=ke,delete ge.url,delete ge.title}else delete ge.identifier,delete ge.label;this.data.referenceType=void 0}function U(ge){const ke=this.sliceSerialize(ge),Ye=this.stack[this.stack.length-2];Ye.label=wst(ke),Ye.identifier=oE(ke).toLowerCase()}function z(){const ge=this.stack[this.stack.length-1],ke=this.resume(),Ye=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ye.type==="link"){const Xe=ge.children;Ye.children=Xe}else Ye.alt=ke}function N(){const ge=this.resume(),ke=this.stack[this.stack.length-1];ke.url=ge}function V(){const ge=this.resume(),ke=this.stack[this.stack.length-1];ke.title=ge}function W(){this.data.inReference=void 0}function F(){this.data.referenceType="collapsed"}function H(ge){const ke=this.resume(),Ye=this.stack[this.stack.length-1];Ye.label=ke,Ye.identifier=oE(this.sliceSerialize(ge)).toLowerCase(),this.data.referenceType="full"}function G(ge){this.data.characterReferenceType=ge.type}function Q(ge){const ke=this.sliceSerialize(ge),Ye=this.data.characterReferenceType;let Xe;Ye?(Xe=GSe(ke,Ye==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Xe=kX(ke);const xt=this.stack[this.stack.length-1];xt.value+=Xe}function ie(ge){const ke=this.stack.pop();ke.position.end=Mg(ge.end)}function se(ge){P.call(this,ge);const ke=this.stack[this.stack.length-1];ke.url=this.sliceSerialize(ge)}function ne(ge){P.call(this,ge);const ke=this.stack[this.stack.length-1];ke.url="mailto:"+this.sliceSerialize(ge)}function ce(){return{type:"blockquote",children:[]}}function Ee(){return{type:"code",lang:null,meta:null,value:""}}function de(){return{type:"inlineCode",value:""}}function We(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Fe(){return{type:"emphasis",children:[]}}function Ne(){return{type:"heading",depth:0,children:[]}}function je(){return{type:"break"}}function ye(){return{type:"html",value:""}}function ae(){return{type:"image",title:null,url:"",alt:null}}function Pe(){return{type:"link",title:null,url:"",children:[]}}function Be(ge){return{type:"list",ordered:ge.type==="listOrdered",start:null,spread:ge._spread,children:[]}}function ft(ge){return{type:"listItem",spread:ge._spread,checked:null,children:[]}}function Se(){return{type:"paragraph",children:[]}}function he(){return{type:"strong",children:[]}}function Ve(){return{type:"text",value:""}}function tt(){return{type:"thematicBreak"}}}function Mg(e){return{line:e.line,column:e.column,offset:e.offset}}function iTe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?iTe(e,r):Tst(e,r)}}function Tst(e,t){let n;for(n in t)if(rTe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Xue(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+L2({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+L2({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+L2({start:t.start,end:t.end})+") is still open")}function Cst(e){const t=this;t.parser=n;function n(r){return xst(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Ast(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Ist(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Rst(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function kst(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Pst(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Nst(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=mS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,u),e.applyData(t,u)}function Ost(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Dst(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function sTe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Mst(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return sTe(e,t);const i={src:mS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function $st(e,t){const n={src:mS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Lst(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Fst(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return sTe(e,t);const i={href:mS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function jst(e,t){const n={href:mS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Bst(e,t,n){const r=e.all(t),i=n?zst(n):oTe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let d;c&&c.type==="element"&&c.tagName==="p"?d=c:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,u),e.applyData(t,u)}function zst(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=oTe(n[r])}return t}function oTe(e){const t=e.spread;return t??e.children.length>1}function Ust(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Vst(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Hst(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function qst(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Wst(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=bp(t.children[1]),l=o6(t.children[t.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function Gst(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let l=-1;const u=[];for(;++l<a;){const d=t.children[l],f={},h=o?o[l]:void 0;h&&(f.align=h);let p={type:"element",tagName:s,properties:f,children:[]};d&&(p.children=e.all(d),e.patch(d,p),p=e.applyData(d,p)),u.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,c),e.applyData(t,c)}function Yst(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Que=9,Jue=32;function Kst(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Zue(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Zue(t.slice(i),i>0,!1)),s.join("")}function Zue(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Que||s===Jue;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Que||s===Jue;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Xst(e,t){const n={type:"text",value:Kst(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Qst(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Jst={blockquote:Ast,break:Ist,code:Rst,delete:kst,emphasis:Pst,footnoteReference:Nst,heading:Ost,html:Dst,imageReference:Mst,image:$st,inlineCode:Lst,linkReference:Fst,link:jst,listItem:Bst,list:Ust,paragraph:Vst,root:Hst,strong:qst,table:Wst,tableCell:Yst,tableRow:Gst,text:Xst,thematicBreak:Qst,toml:aN,yaml:aN,definition:aN,footnoteDefinition:aN};function aN(){}const aTe=-1,l6=0,WM=1,GM=2,OX=3,DX=4,MX=5,$X=6,lTe=7,uTe=8,ece=typeof self=="object"?self:globalThis,Zst=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case l6:case aTe:return n(o,i);case WM:{const a=n([],i);for(const l of o)a.push(r(l));return a}case GM:{const a=n({},i);for(const[l,u]of o)a[r(l)]=r(u);return a}case OX:return n(new Date(o),i);case DX:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case MX:{const a=n(new Map,i);for(const[l,u]of o)a.set(r(l),r(u));return a}case $X:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case lTe:{const{name:a,message:l}=o;return n(new ece[a](l),i)}case uTe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new ece[s](o),i)};return r},tce=e=>Zst(new Map,e)(0),$_="",{toString:eot}={},{keys:tot}=Object,DT=e=>{const t=typeof e;if(t!=="object"||!e)return[l6,t];const n=eot.call(e).slice(8,-1);switch(n){case"Array":return[WM,$_];case"Object":return[GM,$_];case"Date":return[OX,$_];case"RegExp":return[DX,$_];case"Map":return[MX,$_];case"Set":return[$X,$_]}return n.includes("Array")?[WM,n]:n.includes("Error")?[lTe,n]:[GM,n]},lN=([e,t])=>e===l6&&(t==="function"||t==="symbol"),not=(e,t,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=DT(o);switch(a){case l6:{let c=o;switch(l){case"bigint":a=uTe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([aTe],o)}return i([a,c],o)}case WM:{if(l)return i([l,[...o]],o);const c=[],d=i([a,c],o);for(const f of o)c.push(s(f));return d}case GM:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],d=i([a,c],o);for(const f of tot(o))(e||!lN(DT(o[f])))&&c.push([s(f),s(o[f])]);return d}case OX:return i([a,o.toISOString()],o);case DX:{const{source:c,flags:d}=o;return i([a,{source:c,flags:d}],o)}case MX:{const c=[],d=i([a,c],o);for(const[f,h]of o)(e||!(lN(DT(f))||lN(DT(h))))&&c.push([s(f),s(h)]);return d}case $X:{const c=[],d=i([a,c],o);for(const f of o)(e||!lN(DT(f)))&&c.push(s(f));return d}}const{message:u}=o;return i([a,{name:l,message:u}],o)};return s},nce=(e,{json:t,lossy:n}={})=>{const r=[];return not(!(t||n),!!t,new Map,r)(e),r},WE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?tce(nce(e,t)):structuredClone(e):(e,t)=>tce(nce(e,t));function rot(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function iot(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function sot(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||rot,r=e.options.footnoteBackLabel||iot,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[l]);if(!u)continue;const c=e.all(u),d=String(u.identifier).toUpperCase(),f=mS(d.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(d);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(l,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(c,!0)};e.patch(u,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...WE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const cTe=function(e){if(e==null)return uot;if(typeof e=="function")return u6(e);if(typeof e=="object")return Array.isArray(e)?oot(e):aot(e);if(typeof e=="string")return lot(e);throw new Error("Expected function, string, or object as test")};function oot(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=cTe(e[n]);return u6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function aot(e){const t=e;return u6(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function lot(e){return u6(t);function t(n){return n&&n.type===e}}function u6(e){return t;function t(n,r,i){return!!(cot(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function uot(){return!0}function cot(e){return e!==null&&typeof e=="object"&&"type"in e}const dTe=[],dot=!0,rce=!1,fot="skip";function hot(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=cTe(i),o=r?-1:1;a(e,void 0,[])();function a(l,u,c){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const h=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(h?"<"+h+">":""))+")"})}return f;function f(){let h=dTe,p,m,g;if((!t||s(l,u,c[c.length-1]||void 0))&&(h=pot(n(l,c)),h[0]===rce))return h;if("children"in l&&l.children){const y=l;if(y.children&&h[0]!==fot)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===rce)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function pot(e){return Array.isArray(e)?e:typeof e=="number"?[dot,e]:e==null?dTe:[e]}function LX(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),hot(e,s,a,i);function a(l,u){const c=u[u.length-1],d=c?c.children.indexOf(l):void 0;return o(l,d,c)}}const qU={}.hasOwnProperty,mot={};function got(e,t){const n=t||mot,r=new Map,i=new Map,s=new Map,o={...Jst,...n.handlers},a={all:u,applyData:vot,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:yot,wrap:_ot};return LX(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const d=c.type==="definition"?r:i,f=String(c.identifier).toUpperCase();d.has(f)||d.set(f,c)}}),a;function l(c,d){const f=c.type,h=a.handlers[f];if(qU.call(a.handlers,f)&&h)return h(a,c,d);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in c){const{children:m,...g}=c,y=WE(g);return y.children=a.all(c),y}return WE(c)}return(a.options.unknownHandler||bot)(a,c,d)}function u(c){const d=[];if("children"in c){const f=c.children;let h=-1;for(;++h<f.length;){const p=a.one(f[h],c);if(p){if(h&&f[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=ice(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=ice(m.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function yot(e,t){e.position&&(t.position=Jnt(e))}function vot(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,WE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function bot(e,t){const n=t.data||{},r="value"in t&&!(qU.call(n,"hProperties")||qU.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function _ot(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function ice(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function sce(e,t){const n=got(e,t),r=n.one(e,void 0),i=sot(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function wot(e,t){return e&&"run"in e?async function(n,r){const i=sce(n,{file:r,...t});await e.run(i,r)}:function(n,r){return sce(n,{file:r,...t||e})}}function oce(e){if(e)throw e}var nD=Object.prototype.hasOwnProperty,fTe=Object.prototype.toString,ace=Object.defineProperty,lce=Object.getOwnPropertyDescriptor,uce=function(t){return typeof Array.isArray=="function"?Array.isArray(t):fTe.call(t)==="[object Array]"},cce=function(t){if(!t||fTe.call(t)!=="[object Object]")return!1;var n=nD.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&nD.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||nD.call(t,i)},dce=function(t,n){ace&&n.name==="__proto__"?ace(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},fce=function(t,n){if(n==="__proto__")if(nD.call(t,n)){if(lce)return lce(t,n).value}else return;return t[n]},Eot=function e(){var t,n,r,i,s,o,a=arguments[0],l=1,u=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(t=arguments[l],t!=null)for(n in t)r=fce(a,n),i=fce(t,n),a!==i&&(c&&i&&(cce(i)||(s=uce(i)))?(s?(s=!1,o=r&&uce(r)?r:[]):o=r&&cce(r)?r:{},dce(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&dce(a,{name:n,newValue:i}));return a};const iB=bu(Eot);function WU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function xot(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const c=e[++s];let d=-1;if(l){o(l);return}for(;++d<i.length;)(u[d]===null||u[d]===void 0)&&(u[d]=i[d]);i=u,c?Sot(c,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Sot(e,t){let n;return r;function r(...o){const a=e.length>o.length;let l;a&&o.push(i);try{l=e.apply(this,o)}catch(u){const c=u;if(a&&n)throw c;return i(c)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const lh={basename:Tot,dirname:Cot,extname:Aot,join:Iot,sep:"/"};function Tot(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');GR(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Cot(e){if(GR(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Aot(e){GR(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Iot(...e){let t=-1,n;for(;++t<e.length;)GR(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Rot(n)}function Rot(e){GR(e);const t=e.codePointAt(0)===47;let n=kot(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function kot(e,t){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function GR(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Pot={cwd:Not};function Not(){return"/"}function GU(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Oot(e){if(typeof e=="string")e=new URL(e);else if(!GU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Dot(e)}function Dot(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const sB=["history","path","basename","stem","extname","dirname"];class hTe{constructor(t){let n;t?GU(t)?n={path:t}:typeof t=="string"||Mot(t)?n={value:t}:n=t:n={},this.cwd=Pot.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<sB.length;){const s=sB[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)sB.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?lh.basename(this.path):void 0}set basename(t){aB(t,"basename"),oB(t,"basename"),this.path=lh.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?lh.dirname(this.path):void 0}set dirname(t){hce(this.basename,"dirname"),this.path=lh.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?lh.extname(this.path):void 0}set extname(t){if(oB(t,"extname"),hce(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=lh.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){GU(t)&&(t=Oot(t)),aB(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?lh.basename(this.path,this.extname):void 0}set stem(t){aB(t,"stem"),oB(t,"stem"),this.path=lh.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new za(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function oB(e,t){if(e&&e.includes(lh.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+lh.sep+"`")}function aB(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function hce(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Mot(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const $ot=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},Lot={}.hasOwnProperty;class FX extends $ot{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=xot()}copy(){const t=new FX;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(iB(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(cB("data",this.frozen),this.namespace[t]=n,this):Lot.call(this.namespace,t)&&this.namespace[t]||void 0:t?(cB("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=uN(t),r=this.parser||this.Parser;return lB("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),lB("process",this.parser||this.Parser),uB("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=uN(t),l=r.parse(a);r.run(l,a,function(c,d,f){if(c||!d||!f)return u(c);const h=d,p=r.stringify(h,f);Bot(p)?f.value=p:f.result=p,u(c,f)});function u(c,d){c||!d?o(c):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),lB("processSync",this.parser||this.Parser),uB("processSync",this.compiler||this.Compiler),this.process(t,i),mce("processSync","process",n),r;function i(s,o){n=!0,oce(s),r=o}}run(t,n,r){pce(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=uN(n);i.run(t,l,u);function u(c,d,f){const h=d||t;c?a(c):o?o(h):r(void 0,h,f)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),mce("runSync","run",r),i;function s(o,a){oce(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=uN(n),i=this.compiler||this.Compiler;return uB("stringify",i),pce(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(cB("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...d]=u;l(c,d)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=iB(!0,i.settings,u.settings))}function a(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const d=u[c];s(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let d=-1,f=-1;for(;++d<r.length;)if(r[d][0]===u){f=d;break}if(f===-1)r.push([u,...c]);else if(c.length>0){let[h,...p]=c;const m=r[f][1];WU(m)&&WU(h)&&(h=iB(!0,m,h)),r[f]=[u,h,...p]}}}}const Fot=new FX().freeze();function lB(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function uB(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function cB(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function pce(e){if(!WU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function mce(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function uN(e){return jot(e)?e:new hTe(e)}function jot(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Bot(e){return typeof e=="string"||zot(e)}function zot(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Uot="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",gce=[],yce={allowDangerousHtml:!0},Vot=/^(https?|ircs?|mailto|xmpp)$/i,Hot=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function qot(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||gce,l=e.remarkPlugins||gce,u=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...yce}:yce,c=e.skipHtml,d=e.unwrapDisallowed,f=e.urlTransform||Wot,h=Fot().use(Cst).use(l).use(wot,u).use(a),p=new hTe;typeof r=="string"&&(p.value=r);for(const v of Hot)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+Uot+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),LX(g,y),irt(g,{Fragment:b.Fragment,components:s,ignoreInvalidStyle:!0,jsx:b.jsx,jsxs:b.jsxs,passKeys:!0,passNode:!0});function y(v,_,w){if(v.type==="raw"&&w&&typeof _=="number")return c?w.children.splice(_,1):w.children[_]={type:"text",value:v.value},_;if(v.type==="element"){let E;for(E in tB)if(Object.hasOwn(tB,E)&&Object.hasOwn(v.properties,E)){const S=v.properties[E],x=tB[E];(x===null||x.includes(v.tagName))&&(v.properties[E]=f(String(S||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof _=="number"&&(E=!n(v,_,w)),E&&w&&typeof _=="number")return d&&v.children?w.children.splice(_,1,...v.children):w.children.splice(_,1),_}}}function Wot(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||Vot.test(e.slice(0,t))?e:""}const vce=/[#.]/g;function Got(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){vce.lastIndex=i;const a=vce.exec(n),l=n.slice(i,a?a.index:n.length);l&&(s?s==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:o=l,i+=l.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Yot=new Set(["button","menu","reset","submit"]),YU={}.hasOwnProperty;function pTe(e,t,n){const r=n&&Jot(n);function i(s,o,...a){let l=-1,u;if(s==null){u={type:"root",children:[]};const c=o;a.unshift(c)}else if(u=Got(s,t),u.tagName=u.tagName.toLowerCase(),r&&YU.call(r,u.tagName)&&(u.tagName=r[u.tagName]),Kot(o,u.tagName)){let c;for(c in o)YU.call(o,c)&&Xot(e,u.properties,c,o[c])}else a.unshift(o);for(;++l<a.length;)KU(u.children,a[l]);return u.type==="element"&&u.tagName==="template"&&(u.content={type:"root",children:u.children},u.children=[]),u}return i}function Kot(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Yot.has(e.type.toLowerCase()):!("value"in e)}function Xot(e,t,n,r){const i=s6(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Pue(r):i.commaSeparated?o=Cue(r):i.commaOrSpaceSeparated?o=Pue(Cue(r).join(" ")):o=bce(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Qot(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const l=bce(i,i.property,o[s]);a[s]=l}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function KU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)KU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?KU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function bce(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||nI(n)===nI(t)))return!0}return n}function Qot(e){const t=[];let n;for(n in e)YU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function Jot(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Zot=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],eat=pTe(WR,"div"),tat=pTe(tv,"g",Zot),dB=/\r?\n|\r/g;function nat(e){const t=String(e),n=[];for(dB.lastIndex=0;dB.test(t);)n.push(dB.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const l=(n[o-2]||0)+a-1||0;if(l>-1&&l<n[n.length-1])return l}}}const A1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},mTe={}.hasOwnProperty,rat=Object.prototype;function iat(e,t){const n=t||{};return jX({file:n.file||void 0,location:!1,schema:n.space==="svg"?tv:WR,verbose:n.verbose||!1},e)}function jX(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},rD(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:gTe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=nat(s),a=o.toPoint(0),l=o.toPoint(s.length);n.position={start:a,end:l}}return n}case"#documentType":{const r=t;return n={type:"doctype"},rD(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},rD(e,r,n),n}default:return n=sat(e,t),n}}function gTe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=jX(e,t[n]);r.push(i)}return r}function sat(e,t){const n=e.schema;e.schema=t.namespaceURI===A1.svg?tv:WR;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],l=(a.prefix?a.prefix+":":"")+a.name;mTe.call(rat,l)||(i[l]=a.value)}const o=(e.schema.space==="svg"?tat:eat)(t.tagName,i,gTe(e,t.childNodes));if(rD(e,t,o),o.tagName==="template"){const a=t,l=a.sourceCodeLocation,u=l&&l.startTag&&$w(l.startTag),c=l&&l.endTag&&$w(l.endTag),d=jX(e,a.content);u&&c&&e.file&&(d.position={start:u.end,end:c.start}),o.content=d}return e.schema=n,o}function rD(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=oat(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function oat(e,t,n){const r=$w(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)mTe.call(n.attrs,o)&&(s[s6(e.schema,o).property]=$w(n.attrs[o]));n.startTag;const a=$w(n.startTag),l=n.endTag?$w(n.endTag):void 0,u={opening:a};l&&(u.closing=l),u.properties=s,t.data={position:u}}}return r}function $w(e){const t=_ce({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=_ce({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function _ce(e){return e.line&&e.column?e:void 0}const wce={}.hasOwnProperty;function yTe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&wce.call(i,e)){const l=String(i[e]);o=wce.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const aat={},lat={}.hasOwnProperty,vTe=yTe("type",{handlers:{root:cat,element:mat,text:hat,comment:pat,doctype:fat}});function uat(e,t){const r=(t||aat).space;return vTe(e,r==="svg"?tv:WR)}function cat(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=BX(e.children,n,t),gS(e,n),n}function dat(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=BX(e.children,n,t),gS(e,n),n}function fat(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return gS(e,t),t}function hat(e){const t={nodeName:"#text",value:e.value,parentNode:null};return gS(e,t),t}function pat(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return gS(e,t),t}function mat(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=tv);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&lat.call(e.properties,s)){const l=gat(r,s,e.properties[s]);l&&i.push(l)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:A1[o],childNodes:[],parentNode:null};return a.childNodes=BX(e.children,a,r),gS(e,a),e.tagName==="template"&&e.content&&(a.content=dat(e.content,r)),a}function gat(e,t,n){const r=s6(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?kSe(n):jSe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=A1[r.space]}return i}function BX(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=vTe(e[r],n);s.parentNode=t,i.push(s)}return i}function gS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const yat=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],vat=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Di="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const kl={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function bTe(e){return e>=55296&&e<=57343}function bat(e){return e>=56320&&e<=57343}function _at(e,t){return(e-55296)*1024+9216+t}function _Te(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function wTe(e){return e>=64976&&e<=65007||vat.has(e)}var De;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(De=De||(De={}));const wat=65536;class Eat{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=wat,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(bat(n))return this.pos++,this._addGap(),_at(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(De.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,bTe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){_Te(t)?this._err(De.controlCharacterInInputStream):wTe(t)&&this._err(De.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var jn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(jn=jn||(jn={}));function ETe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Hg=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),xat=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var fB;const Sat=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Tat=(fB=String.fromCodePoint)!==null&&fB!==void 0?fB:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Cat(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Sat.get(e))!==null&&t!==void 0?t:e}var mo;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(mo||(mo={}));const Aat=32;var kh;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(kh||(kh={}));function XU(e){return e>=mo.ZERO&&e<=mo.NINE}function Iat(e){return e>=mo.UPPER_A&&e<=mo.UPPER_F||e>=mo.LOWER_A&&e<=mo.LOWER_F}function Rat(e){return e>=mo.UPPER_A&&e<=mo.UPPER_Z||e>=mo.LOWER_A&&e<=mo.LOWER_Z||XU(e)}function kat(e){return e===mo.EQUALS||Rat(e)}var co;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(co||(co={}));var u1;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(u1||(u1={}));class Pat{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=co.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=u1.Strict}startEntity(t){this.decodeMode=t,this.state=co.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case co.EntityStart:return t.charCodeAt(n)===mo.NUM?(this.state=co.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=co.NamedEntity,this.stateNamedEntity(t,n));case co.NumericStart:return this.stateNumericStart(t,n);case co.NumericDecimal:return this.stateNumericDecimal(t,n);case co.NumericHex:return this.stateNumericHex(t,n);case co.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Aat)===mo.LOWER_X?(this.state=co.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=co.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(XU(i)||Iat(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(XU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===mo.SEMI)this.consumed+=1;else if(this.decodeMode===u1.Strict)return 0;return this.emitCodePoint(Cat(this.result),this.consumed),this.errors&&(t!==mo.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&kh.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=STe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===u1.Attribute&&(s===0||kat(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&kh.VALUE_LENGTH)>>14,s!==0){if(o===mo.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==u1.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&kh.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~kh.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case co.NamedEntity:return this.result!==0&&(this.decodeMode!==u1.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case co.NumericDecimal:return this.emitNumericEntity(0,2);case co.NumericHex:return this.emitNumericEntity(0,3);case co.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case co.EntityStart:return 0}}}function xTe(e){let t="";const n=new Pat(e,r=>t+=Tat(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const u=n.write(i,a+1);if(u<0){o=a+n.end();break}o=a+u,a=u===0?o+1:o}const l=t+i.slice(o);return t="",l}}function STe(e,t,n,r){const i=(t&kh.BRANCH_LENGTH)>>7,s=t&kh.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:e[n+l]-1}let o=n,a=o+i-1;for(;o<=a;){const l=o+a>>>1,u=e[l];if(u<r)o=l+1;else if(u>r)a=l-1;else return e[l+i]}return-1}xTe(Hg);xTe(xat);var qe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(qe=qe||(qe={}));var V0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(V0=V0||(V0={}));var Ou;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Ou=Ou||(Ou={}));var Ae;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ae=Ae||(Ae={}));var O;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(O=O||(O={}));const Nat=new Map([[Ae.A,O.A],[Ae.ADDRESS,O.ADDRESS],[Ae.ANNOTATION_XML,O.ANNOTATION_XML],[Ae.APPLET,O.APPLET],[Ae.AREA,O.AREA],[Ae.ARTICLE,O.ARTICLE],[Ae.ASIDE,O.ASIDE],[Ae.B,O.B],[Ae.BASE,O.BASE],[Ae.BASEFONT,O.BASEFONT],[Ae.BGSOUND,O.BGSOUND],[Ae.BIG,O.BIG],[Ae.BLOCKQUOTE,O.BLOCKQUOTE],[Ae.BODY,O.BODY],[Ae.BR,O.BR],[Ae.BUTTON,O.BUTTON],[Ae.CAPTION,O.CAPTION],[Ae.CENTER,O.CENTER],[Ae.CODE,O.CODE],[Ae.COL,O.COL],[Ae.COLGROUP,O.COLGROUP],[Ae.DD,O.DD],[Ae.DESC,O.DESC],[Ae.DETAILS,O.DETAILS],[Ae.DIALOG,O.DIALOG],[Ae.DIR,O.DIR],[Ae.DIV,O.DIV],[Ae.DL,O.DL],[Ae.DT,O.DT],[Ae.EM,O.EM],[Ae.EMBED,O.EMBED],[Ae.FIELDSET,O.FIELDSET],[Ae.FIGCAPTION,O.FIGCAPTION],[Ae.FIGURE,O.FIGURE],[Ae.FONT,O.FONT],[Ae.FOOTER,O.FOOTER],[Ae.FOREIGN_OBJECT,O.FOREIGN_OBJECT],[Ae.FORM,O.FORM],[Ae.FRAME,O.FRAME],[Ae.FRAMESET,O.FRAMESET],[Ae.H1,O.H1],[Ae.H2,O.H2],[Ae.H3,O.H3],[Ae.H4,O.H4],[Ae.H5,O.H5],[Ae.H6,O.H6],[Ae.HEAD,O.HEAD],[Ae.HEADER,O.HEADER],[Ae.HGROUP,O.HGROUP],[Ae.HR,O.HR],[Ae.HTML,O.HTML],[Ae.I,O.I],[Ae.IMG,O.IMG],[Ae.IMAGE,O.IMAGE],[Ae.INPUT,O.INPUT],[Ae.IFRAME,O.IFRAME],[Ae.KEYGEN,O.KEYGEN],[Ae.LABEL,O.LABEL],[Ae.LI,O.LI],[Ae.LINK,O.LINK],[Ae.LISTING,O.LISTING],[Ae.MAIN,O.MAIN],[Ae.MALIGNMARK,O.MALIGNMARK],[Ae.MARQUEE,O.MARQUEE],[Ae.MATH,O.MATH],[Ae.MENU,O.MENU],[Ae.META,O.META],[Ae.MGLYPH,O.MGLYPH],[Ae.MI,O.MI],[Ae.MO,O.MO],[Ae.MN,O.MN],[Ae.MS,O.MS],[Ae.MTEXT,O.MTEXT],[Ae.NAV,O.NAV],[Ae.NOBR,O.NOBR],[Ae.NOFRAMES,O.NOFRAMES],[Ae.NOEMBED,O.NOEMBED],[Ae.NOSCRIPT,O.NOSCRIPT],[Ae.OBJECT,O.OBJECT],[Ae.OL,O.OL],[Ae.OPTGROUP,O.OPTGROUP],[Ae.OPTION,O.OPTION],[Ae.P,O.P],[Ae.PARAM,O.PARAM],[Ae.PLAINTEXT,O.PLAINTEXT],[Ae.PRE,O.PRE],[Ae.RB,O.RB],[Ae.RP,O.RP],[Ae.RT,O.RT],[Ae.RTC,O.RTC],[Ae.RUBY,O.RUBY],[Ae.S,O.S],[Ae.SCRIPT,O.SCRIPT],[Ae.SECTION,O.SECTION],[Ae.SELECT,O.SELECT],[Ae.SOURCE,O.SOURCE],[Ae.SMALL,O.SMALL],[Ae.SPAN,O.SPAN],[Ae.STRIKE,O.STRIKE],[Ae.STRONG,O.STRONG],[Ae.STYLE,O.STYLE],[Ae.SUB,O.SUB],[Ae.SUMMARY,O.SUMMARY],[Ae.SUP,O.SUP],[Ae.TABLE,O.TABLE],[Ae.TBODY,O.TBODY],[Ae.TEMPLATE,O.TEMPLATE],[Ae.TEXTAREA,O.TEXTAREA],[Ae.TFOOT,O.TFOOT],[Ae.TD,O.TD],[Ae.TH,O.TH],[Ae.THEAD,O.THEAD],[Ae.TITLE,O.TITLE],[Ae.TR,O.TR],[Ae.TRACK,O.TRACK],[Ae.TT,O.TT],[Ae.U,O.U],[Ae.UL,O.UL],[Ae.SVG,O.SVG],[Ae.VAR,O.VAR],[Ae.WBR,O.WBR],[Ae.XMP,O.XMP]]);function yS(e){var t;return(t=Nat.get(e))!==null&&t!==void 0?t:O.UNKNOWN}const it=O,Oat={[qe.HTML]:new Set([it.ADDRESS,it.APPLET,it.AREA,it.ARTICLE,it.ASIDE,it.BASE,it.BASEFONT,it.BGSOUND,it.BLOCKQUOTE,it.BODY,it.BR,it.BUTTON,it.CAPTION,it.CENTER,it.COL,it.COLGROUP,it.DD,it.DETAILS,it.DIR,it.DIV,it.DL,it.DT,it.EMBED,it.FIELDSET,it.FIGCAPTION,it.FIGURE,it.FOOTER,it.FORM,it.FRAME,it.FRAMESET,it.H1,it.H2,it.H3,it.H4,it.H5,it.H6,it.HEAD,it.HEADER,it.HGROUP,it.HR,it.HTML,it.IFRAME,it.IMG,it.INPUT,it.LI,it.LINK,it.LISTING,it.MAIN,it.MARQUEE,it.MENU,it.META,it.NAV,it.NOEMBED,it.NOFRAMES,it.NOSCRIPT,it.OBJECT,it.OL,it.P,it.PARAM,it.PLAINTEXT,it.PRE,it.SCRIPT,it.SECTION,it.SELECT,it.SOURCE,it.STYLE,it.SUMMARY,it.TABLE,it.TBODY,it.TD,it.TEMPLATE,it.TEXTAREA,it.TFOOT,it.TH,it.THEAD,it.TITLE,it.TR,it.TRACK,it.UL,it.WBR,it.XMP]),[qe.MATHML]:new Set([it.MI,it.MO,it.MN,it.MS,it.MTEXT,it.ANNOTATION_XML]),[qe.SVG]:new Set([it.TITLE,it.FOREIGN_OBJECT,it.DESC]),[qe.XLINK]:new Set,[qe.XML]:new Set,[qe.XMLNS]:new Set};function TTe(e){return e===it.H1||e===it.H2||e===it.H3||e===it.H4||e===it.H5||e===it.H6}Ae.STYLE,Ae.SCRIPT,Ae.XMP,Ae.IFRAME,Ae.NOEMBED,Ae.NOFRAMES,Ae.PLAINTEXT;const Dat=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var Z;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(Z||(Z={}));const Es={DATA:Z.DATA,RCDATA:Z.RCDATA,RAWTEXT:Z.RAWTEXT,SCRIPT_DATA:Z.SCRIPT_DATA,PLAINTEXT:Z.PLAINTEXT,CDATA_SECTION:Z.CDATA_SECTION};function j2(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function PC(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function Mat(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function qg(e){return Mat(e)||PC(e)}function QU(e){return qg(e)||j2(e)}function CTe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function ATe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function $at(e){return j2(e)||CTe(e)||ATe(e)}function cN(e){return e+32}function ITe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function Lat(e){return e===X.EQUALS_SIGN||QU(e)}function Ece(e){return ITe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class Fat{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Z.DATA,this.returnState=Z.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Eat(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:jn.START_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:jn.END_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:jn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:jn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(ETe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(De.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=yS(t.tagName),t.type===jn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(De.endTagWithAttributes),t.selfClosing&&this._err(De.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case jn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case jn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case jn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:jn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=ITe(t)?jn.WHITESPACE_CHARACTER:t===X.NULL?jn.NULL_CHARACTER:jn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(jn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Hg[0];s>=0&&(s=STe(Hg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Hg[s];const a=o&kh.VALUE_LENGTH;if(a){const l=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Lat(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=l):(n=l===0?[Hg[s]&~kh.VALUE_LENGTH]:l===1?[Hg[++s]]:[Hg[++s],Hg[++s]],r=0,i=t!==X.SEMICOLON),l===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(De.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Z.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Z.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case Z.DATA:{this._stateData(t);break}case Z.RCDATA:{this._stateRcdata(t);break}case Z.RAWTEXT:{this._stateRawtext(t);break}case Z.SCRIPT_DATA:{this._stateScriptData(t);break}case Z.PLAINTEXT:{this._statePlaintext(t);break}case Z.TAG_OPEN:{this._stateTagOpen(t);break}case Z.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case Z.TAG_NAME:{this._stateTagName(t);break}case Z.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case Z.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case Z.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case Z.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case Z.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case Z.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case Z.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case Z.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case Z.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case Z.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case Z.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case Z.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case Z.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case Z.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case Z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case Z.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case Z.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case Z.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case Z.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case Z.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case Z.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case Z.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case Z.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case Z.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case Z.BOGUS_COMMENT:{this._stateBogusComment(t);break}case Z.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case Z.COMMENT_START:{this._stateCommentStart(t);break}case Z.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case Z.COMMENT:{this._stateComment(t);break}case Z.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case Z.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case Z.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case Z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case Z.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case Z.COMMENT_END:{this._stateCommentEnd(t);break}case Z.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case Z.DOCTYPE:{this._stateDoctype(t);break}case Z.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case Z.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case Z.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case Z.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case Z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case Z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case Z.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case Z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case Z.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case Z.CDATA_SECTION:{this._stateCdataSection(t);break}case Z.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case Z.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case Z.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case Z.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case Z.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case Z.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case Z.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case Z.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case Z.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case Z.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=Z.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=Z.DATA,this.state=Z.CHARACTER_REFERENCE;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=Z.RCDATA,this.state=Z.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=Z.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(Di);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=Z.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(Di);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(Di);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(Di);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(qg(t))this._createStartTagToken(),this.state=Z.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=Z.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=Z.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(De.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(De.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(De.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Z.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(qg(t))this._createEndTagToken(),this.state=Z.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(De.missingEndTagName),this.state=Z.DATA;break}case X.EOF:{this._err(De.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(De.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=Z.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.tagName+=Di;break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(PC(t)?cN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=Z.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Z.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){qg(t)?(this.state=Z.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=Z.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Z.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Z.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Z.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=Z.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Z.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){qg(t)?(this.state=Z.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=Z.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=Z.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=Z.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Z.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){qg(t)?(this.state=Z.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=Z.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=Z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(Di);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_ESCAPED,this._emitChars(Di);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=Z.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_ESCAPED,this._emitChars(Di);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=Z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:qg(t)?(this._emitChars("<"),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){qg(t)?(this.state=Z.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(kl.SCRIPT,!1)&&Ece(this.preprocessor.peek(kl.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<kl.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(Di);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Di);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=Z.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Di);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(kl.SCRIPT,!1)&&Ece(this.preprocessor.peek(kl.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<kl.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Z.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=Z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(De.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Z.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Z.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=Z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=Z.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(De.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.currentAttr.name+=Di;break}default:this.currentAttr.name+=String.fromCodePoint(PC(t)?cN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=Z.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=Z.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Z.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=Z.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(De.missingAttributeValue),this.state=Z.DATA,this.emitCurrentTagToken();break}default:this.state=Z.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=Z.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=Z.CHARACTER_REFERENCE;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.currentAttr.value+=Di;break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=Z.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=Z.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=Z.CHARACTER_REFERENCE;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.currentAttr.value+=Di;break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=Z.ATTRIBUTE_VALUE_UNQUOTED,this.state=Z.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Z.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.currentAttr.value+=Di;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(De.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=Z.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this._err(De.missingWhitespaceBetweenAttributes),this.state=Z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this._err(De.unexpectedSolidusInTag),this.state=Z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.data+=Di;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(kl.DASH_DASH,!0)?(this._createCommentToken(kl.DASH_DASH.length+1),this.state=Z.COMMENT_START):this._consumeSequenceIfMatch(kl.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(kl.DOCTYPE.length+1),this.state=Z.DOCTYPE):this._consumeSequenceIfMatch(kl.CDATA_START,!0)?this.inForeignNode?this.state=Z.CDATA_SECTION:(this._err(De.cdataInHtmlContent),this._createCommentToken(kl.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Z.BOGUS_COMMENT):this._ensureHibernation()||(this._err(De.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptClosingOfEmptyComment),this.state=Z.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptClosingOfEmptyComment),this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(De.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Z.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=Z.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.data+=Di;break}case X.EOF:{this._err(De.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=Z.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=Z.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Z.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=Z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Z.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(De.nestedComment),this.state=Z.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END;break}case X.EOF:{this._err(De.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=Z.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(De.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=Z.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(De.incorrectlyClosedComment),this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(De.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Z.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=Z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(De.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingWhitespaceBeforeDoctypeName),this.state=Z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(PC(t))this._createDoctypeToken(String.fromCharCode(cN(t))),this.state=Z.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(De.unexpectedNullCharacter),this._createDoctypeToken(Di),this.state=Z.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(De.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(De.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=Z.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.name+=Di;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(PC(t)?cN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(kl.PUBLIC,!1)?this.state=Z.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(kl.SYSTEM,!1)?this.state=Z.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(De.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(De.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(De.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(De.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(De.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.publicId+=Di;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.publicId+=Di;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(De.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(De.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(De.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(De.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(De.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(De.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.systemId+=Di;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.systemId+=Di;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.NULL:{this._err(De.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=Z.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(De.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=Z.CDATA_SECTION_END:(this._emitChars("]"),this.state=Z.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=Z.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Z.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=Z.NUMERIC_CHARACTER_REFERENCE:QU(t)?(this.state=Z.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=Z.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){QU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(De.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=Z.HEXADEMICAL_CHARACTER_REFERENCE_START:j2(t)?(this.state=Z.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(De.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){$at(t)?(this.state=Z.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(De.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){CTe(t)?this.charRefCode=this.charRefCode*16+t-55:ATe(t)?this.charRefCode=this.charRefCode*16+t-87:j2(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=Z.NUMERIC_CHARACTER_REFERENCE_END:(this._err(De.missingSemicolonAfterCharacterReference),this.state=Z.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){j2(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=Z.NUMERIC_CHARACTER_REFERENCE_END:(this._err(De.missingSemicolonAfterCharacterReference),this.state=Z.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(De.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(De.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(bTe(this.charRefCode))this._err(De.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(wTe(this.charRefCode))this._err(De.noncharacterCharacterReference);else if(_Te(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(De.controlCharacterReference);const n=Dat.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const RTe=new Set([O.DD,O.DT,O.LI,O.OPTGROUP,O.OPTION,O.P,O.RB,O.RP,O.RT,O.RTC]),xce=new Set([...RTe,O.CAPTION,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]),dN=new Map([[O.APPLET,qe.HTML],[O.CAPTION,qe.HTML],[O.HTML,qe.HTML],[O.MARQUEE,qe.HTML],[O.OBJECT,qe.HTML],[O.TABLE,qe.HTML],[O.TD,qe.HTML],[O.TEMPLATE,qe.HTML],[O.TH,qe.HTML],[O.ANNOTATION_XML,qe.MATHML],[O.MI,qe.MATHML],[O.MN,qe.MATHML],[O.MO,qe.MATHML],[O.MS,qe.MATHML],[O.MTEXT,qe.MATHML],[O.DESC,qe.SVG],[O.FOREIGN_OBJECT,qe.SVG],[O.TITLE,qe.SVG]]),jat=[O.H1,O.H2,O.H3,O.H4,O.H5,O.H6],Bat=[O.TR,O.TEMPLATE,O.HTML],zat=[O.TBODY,O.TFOOT,O.THEAD,O.TEMPLATE,O.HTML],Uat=[O.TABLE,O.TEMPLATE,O.HTML],Vat=[O.TD,O.TH];class Hat{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=O.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===O.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===qe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==qe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(jat,qe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Vat,qe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Uat,qe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(zat,qe.HTML)}clearBackToTableRowContext(){this.clearBackTo(Bat,qe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===O.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===O.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===qe.HTML)return!0;if(dN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(TTe(n)&&r===qe.HTML)return!0;if(dN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===qe.HTML)return!0;if((r===O.UL||r===O.OL)&&i===qe.HTML||dN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===qe.HTML)return!0;if(r===O.BUTTON&&i===qe.HTML||dN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===qe.HTML){if(r===t)return!0;if(r===O.TABLE||r===O.TEMPLATE||r===O.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===qe.HTML){if(n===O.TBODY||n===O.THEAD||n===O.TFOOT)return!0;if(n===O.TABLE||n===O.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===qe.HTML){if(r===t)return!0;if(r!==O.OPTION&&r!==O.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;RTe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;xce.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&xce.has(this.currentTagId);)this.pop()}}const hB=3;var Ud;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Ud=Ud||(Ud={}));const Sce={type:Ud.Marker};class qat{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===Ud.Marker)break;const{element:u}=l;if(this.treeAdapter.getTagName(u)===s&&this.treeAdapter.getNamespaceURI(u)===o){const c=this.treeAdapter.getAttrList(u);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<hB)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<hB)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(l=>i.get(l.name)===l.value)&&(s+=1,s>=hB&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Sce)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Ud.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Ud.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Sce);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Ud.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Ud.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Ud.Element&&n.element===t)}}function Tce(e){return{nodeName:"#text",value:e,parentNode:null}}const lw={createDocument(){return{nodeName:"#document",mode:Ou.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};lw.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(lw.isTextNode(n)){n.value+=t;return}}lw.appendChild(e,Tce(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&lw.isTextNode(r)?r.value+=t:lw.insertBefore(e,Tce(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},kTe="html",Wat="about:legacy-compat",Gat="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",PTe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Yat=[...PTe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Kat=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),NTe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Xat=[...NTe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Cce(e,t){return t.some(n=>e.startsWith(n))}function Qat(e){return e.name===kTe&&e.publicId===null&&(e.systemId===null||e.systemId===Wat)}function Jat(e){if(e.name!==kTe)return Ou.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Gat)return Ou.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),Kat.has(n))return Ou.QUIRKS;let r=t===null?Yat:PTe;if(Cce(n,r))return Ou.QUIRKS;if(r=t===null?NTe:Xat,Cce(n,r))return Ou.LIMITED_QUIRKS}return Ou.NO_QUIRKS}const Ace={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Zat="definitionurl",elt="definitionURL",tlt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),nlt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:qe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:qe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:qe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:qe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:qe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:qe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:qe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:qe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:qe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:qe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:qe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:qe.XMLNS}]]),rlt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),ilt=new Set([O.B,O.BIG,O.BLOCKQUOTE,O.BODY,O.BR,O.CENTER,O.CODE,O.DD,O.DIV,O.DL,O.DT,O.EM,O.EMBED,O.H1,O.H2,O.H3,O.H4,O.H5,O.H6,O.HEAD,O.HR,O.I,O.IMG,O.LI,O.LISTING,O.MENU,O.META,O.NOBR,O.OL,O.P,O.PRE,O.RUBY,O.S,O.SMALL,O.SPAN,O.STRONG,O.STRIKE,O.SUB,O.SUP,O.TABLE,O.TT,O.U,O.UL,O.VAR]);function slt(e){const t=e.tagID;return t===O.FONT&&e.attrs.some(({name:r})=>r===V0.COLOR||r===V0.SIZE||r===V0.FACE)||ilt.has(t)}function OTe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Zat){e.attrs[t].name=elt;break}}function DTe(e){for(let t=0;t<e.attrs.length;t++){const n=tlt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function zX(e){for(let t=0;t<e.attrs.length;t++){const n=nlt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function olt(e){const t=rlt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=yS(e.tagName))}function alt(e,t){return t===qe.MATHML&&(e===O.MI||e===O.MO||e===O.MN||e===O.MS||e===O.MTEXT)}function llt(e,t,n){if(t===qe.MATHML&&e===O.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===V0.ENCODING){const i=n[r].value.toLowerCase();return i===Ace.TEXT_HTML||i===Ace.APPLICATION_XML}}return t===qe.SVG&&(e===O.FOREIGN_OBJECT||e===O.DESC||e===O.TITLE)}function ult(e,t,n,r){return(!r||r===qe.HTML)&&llt(e,t,n)||(!r||r===qe.MATHML)&&alt(e,t)}const clt="hidden",dlt=8,flt=3;var le;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(le||(le={}));const hlt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},MTe=new Set([O.TABLE,O.TBODY,O.TFOOT,O.THEAD,O.TR]),Ice={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:lw,onParseError:null};let Rce=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=le.INITIAL,this.originalInsertionMode=le.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Ice,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Fat(this.options,this),this.activeFormattingElements=new qat(this.treeAdapter),this.fragmentContextID=r?yS(this.treeAdapter.getTagName(r)):O.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Hat(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Ice,...n};t??(t=r.treeAdapter.createElement(Ae.TEMPLATE,qe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",qe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===O.TEMPLATE&&s.tmplInsertionModeStack.unshift(le.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:hlt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===qe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,qe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=le.TEXT}switchToPlaintextParsing(){this.insertionMode=le.TEXT,this.originalInsertionMode=le.IN_BODY,this.tokenizer.state=Es.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ae.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==qe.HTML))switch(this.fragmentContextID){case O.TITLE:case O.TEXTAREA:{this.tokenizer.state=Es.RCDATA;break}case O.STYLE:case O.XMP:case O.IFRAME:case O.NOEMBED:case O.NOFRAMES:case O.NOSCRIPT:{this.tokenizer.state=Es.RAWTEXT;break}case O.SCRIPT:{this.tokenizer.state=Es.SCRIPT_DATA;break}case O.PLAINTEXT:{this.tokenizer.state=Es.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,qe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,qe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ae.HTML,qe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,O.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:l,endCol:u,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:l,endCol:u,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===jn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===O.SVG&&this.treeAdapter.getTagName(n)===Ae.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===qe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===O.MGLYPH||t.tagID===O.MALIGNMARK)&&!this._isIntegrationPoint(r,n,qe.HTML)}_processToken(t){switch(t.type){case jn.CHARACTER:{this.onCharacter(t);break}case jn.NULL_CHARACTER:{this.onNullCharacter(t);break}case jn.COMMENT:{this.onComment(t);break}case jn.DOCTYPE:{this.onDoctype(t);break}case jn.START_TAG:{this._processStartTag(t);break}case jn.END_TAG:{this.onEndTag(t);break}case jn.EOF:{this.onEof(t);break}case jn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return ult(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Ud.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=le.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(O.P),this.openElements.popUntilTagNamePopped(O.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case O.TR:{this.insertionMode=le.IN_ROW;return}case O.TBODY:case O.THEAD:case O.TFOOT:{this.insertionMode=le.IN_TABLE_BODY;return}case O.CAPTION:{this.insertionMode=le.IN_CAPTION;return}case O.COLGROUP:{this.insertionMode=le.IN_COLUMN_GROUP;return}case O.TABLE:{this.insertionMode=le.IN_TABLE;return}case O.BODY:{this.insertionMode=le.IN_BODY;return}case O.FRAMESET:{this.insertionMode=le.IN_FRAMESET;return}case O.SELECT:{this._resetInsertionModeForSelect(t);return}case O.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case O.HTML:{this.insertionMode=this.headElement?le.AFTER_HEAD:le.BEFORE_HEAD;return}case O.TD:case O.TH:{if(t>0){this.insertionMode=le.IN_CELL;return}break}case O.HEAD:{if(t>0){this.insertionMode=le.IN_HEAD;return}break}}this.insertionMode=le.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===O.TEMPLATE)break;if(r===O.TABLE){this.insertionMode=le.IN_SELECT_IN_TABLE;return}}this.insertionMode=le.IN_SELECT}_isElementCausesFosterParenting(t){return MTe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case O.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===qe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case O.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Oat[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Vut(this,t);return}switch(this.insertionMode){case le.INITIAL:{MT(this,t);break}case le.BEFORE_HTML:{B2(this,t);break}case le.BEFORE_HEAD:{z2(this,t);break}case le.IN_HEAD:{U2(this,t);break}case le.IN_HEAD_NO_SCRIPT:{V2(this,t);break}case le.AFTER_HEAD:{H2(this,t);break}case le.IN_BODY:case le.IN_CAPTION:case le.IN_CELL:case le.IN_TEMPLATE:{LTe(this,t);break}case le.TEXT:case le.IN_SELECT:case le.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case le.IN_TABLE:case le.IN_TABLE_BODY:case le.IN_ROW:{pB(this,t);break}case le.IN_TABLE_TEXT:{VTe(this,t);break}case le.IN_COLUMN_GROUP:{YM(this,t);break}case le.AFTER_BODY:{KM(this,t);break}case le.AFTER_AFTER_BODY:{iD(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Uut(this,t);return}switch(this.insertionMode){case le.INITIAL:{MT(this,t);break}case le.BEFORE_HTML:{B2(this,t);break}case le.BEFORE_HEAD:{z2(this,t);break}case le.IN_HEAD:{U2(this,t);break}case le.IN_HEAD_NO_SCRIPT:{V2(this,t);break}case le.AFTER_HEAD:{H2(this,t);break}case le.TEXT:{this._insertCharacters(t);break}case le.IN_TABLE:case le.IN_TABLE_BODY:case le.IN_ROW:{pB(this,t);break}case le.IN_COLUMN_GROUP:{YM(this,t);break}case le.AFTER_BODY:{KM(this,t);break}case le.AFTER_AFTER_BODY:{iD(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){JU(this,t);return}switch(this.insertionMode){case le.INITIAL:case le.BEFORE_HTML:case le.BEFORE_HEAD:case le.IN_HEAD:case le.IN_HEAD_NO_SCRIPT:case le.AFTER_HEAD:case le.IN_BODY:case le.IN_TABLE:case le.IN_CAPTION:case le.IN_COLUMN_GROUP:case le.IN_TABLE_BODY:case le.IN_ROW:case le.IN_CELL:case le.IN_SELECT:case le.IN_SELECT_IN_TABLE:case le.IN_TEMPLATE:case le.IN_FRAMESET:case le.AFTER_FRAMESET:{JU(this,t);break}case le.IN_TABLE_TEXT:{$T(this,t);break}case le.AFTER_BODY:{_lt(this,t);break}case le.AFTER_AFTER_BODY:case le.AFTER_AFTER_FRAMESET:{wlt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case le.INITIAL:{Elt(this,t);break}case le.BEFORE_HEAD:case le.IN_HEAD:case le.IN_HEAD_NO_SCRIPT:case le.AFTER_HEAD:{this._err(t,De.misplacedDoctype);break}case le.IN_TABLE_TEXT:{$T(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,De.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Hut(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case le.INITIAL:{MT(this,t);break}case le.BEFORE_HTML:{xlt(this,t);break}case le.BEFORE_HEAD:{Tlt(this,t);break}case le.IN_HEAD:{Lf(this,t);break}case le.IN_HEAD_NO_SCRIPT:{Ilt(this,t);break}case le.AFTER_HEAD:{klt(this,t);break}case le.IN_BODY:{Ua(this,t);break}case le.IN_TABLE:{GE(this,t);break}case le.IN_TABLE_TEXT:{$T(this,t);break}case le.IN_CAPTION:{Cut(this,t);break}case le.IN_COLUMN_GROUP:{HX(this,t);break}case le.IN_TABLE_BODY:{f6(this,t);break}case le.IN_ROW:{h6(this,t);break}case le.IN_CELL:{Rut(this,t);break}case le.IN_SELECT:{WTe(this,t);break}case le.IN_SELECT_IN_TABLE:{Put(this,t);break}case le.IN_TEMPLATE:{Out(this,t);break}case le.AFTER_BODY:{Mut(this,t);break}case le.IN_FRAMESET:{$ut(this,t);break}case le.AFTER_FRAMESET:{Fut(this,t);break}case le.AFTER_AFTER_BODY:{But(this,t);break}case le.AFTER_AFTER_FRAMESET:{zut(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?qut(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case le.INITIAL:{MT(this,t);break}case le.BEFORE_HTML:{Slt(this,t);break}case le.BEFORE_HEAD:{Clt(this,t);break}case le.IN_HEAD:{Alt(this,t);break}case le.IN_HEAD_NO_SCRIPT:{Rlt(this,t);break}case le.AFTER_HEAD:{Plt(this,t);break}case le.IN_BODY:{d6(this,t);break}case le.TEXT:{gut(this,t);break}case le.IN_TABLE:{iI(this,t);break}case le.IN_TABLE_TEXT:{$T(this,t);break}case le.IN_CAPTION:{Aut(this,t);break}case le.IN_COLUMN_GROUP:{Iut(this,t);break}case le.IN_TABLE_BODY:{ZU(this,t);break}case le.IN_ROW:{qTe(this,t);break}case le.IN_CELL:{kut(this,t);break}case le.IN_SELECT:{GTe(this,t);break}case le.IN_SELECT_IN_TABLE:{Nut(this,t);break}case le.IN_TEMPLATE:{Dut(this,t);break}case le.AFTER_BODY:{KTe(this,t);break}case le.IN_FRAMESET:{Lut(this,t);break}case le.AFTER_FRAMESET:{jut(this,t);break}case le.AFTER_AFTER_BODY:{iD(this,t);break}}}onEof(t){switch(this.insertionMode){case le.INITIAL:{MT(this,t);break}case le.BEFORE_HTML:{B2(this,t);break}case le.BEFORE_HEAD:{z2(this,t);break}case le.IN_HEAD:{U2(this,t);break}case le.IN_HEAD_NO_SCRIPT:{V2(this,t);break}case le.AFTER_HEAD:{H2(this,t);break}case le.IN_BODY:case le.IN_TABLE:case le.IN_CAPTION:case le.IN_COLUMN_GROUP:case le.IN_TABLE_BODY:case le.IN_ROW:case le.IN_CELL:case le.IN_SELECT:case le.IN_SELECT_IN_TABLE:{zTe(this,t);break}case le.TEXT:{yut(this,t);break}case le.IN_TABLE_TEXT:{$T(this,t);break}case le.IN_TEMPLATE:{YTe(this,t);break}case le.AFTER_BODY:case le.IN_FRAMESET:case le.AFTER_FRAMESET:case le.AFTER_AFTER_BODY:case le.AFTER_AFTER_FRAMESET:{VX(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case le.IN_HEAD:case le.IN_HEAD_NO_SCRIPT:case le.AFTER_HEAD:case le.TEXT:case le.IN_COLUMN_GROUP:case le.IN_SELECT:case le.IN_SELECT_IN_TABLE:case le.IN_FRAMESET:case le.AFTER_FRAMESET:{this._insertCharacters(t);break}case le.IN_BODY:case le.IN_CAPTION:case le.IN_CELL:case le.IN_TEMPLATE:case le.AFTER_BODY:case le.AFTER_AFTER_BODY:case le.AFTER_AFTER_FRAMESET:{$Te(this,t);break}case le.IN_TABLE:case le.IN_TABLE_BODY:case le.IN_ROW:{pB(this,t);break}case le.IN_TABLE_TEXT:{UTe(this,t);break}}}};function plt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):BTe(e,t),n}function mlt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function glt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),l=a&&s>=flt;!a||l?(l&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=ylt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function ylt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function vlt(e,t,n){const r=e.treeAdapter.getTagName(t),i=yS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===O.TEMPLATE&&s===qe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function blt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function UX(e,t){for(let n=0;n<dlt;n++){const r=plt(e,t);if(!r)break;const i=mlt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=glt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&vlt(e,o,s),blt(e,i,r)}}function JU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function _lt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function wlt(e,t){e._appendCommentNode(t,e.document)}function VX(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Elt(e,t){e._setDocumentType(t);const n=t.forceQuirks?Ou.QUIRKS:Jat(t);Qat(t)||e._err(t,De.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=le.BEFORE_HTML}function MT(e,t){e._err(t,De.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Ou.QUIRKS),e.insertionMode=le.BEFORE_HTML,e._processToken(t)}function xlt(e,t){t.tagID===O.HTML?(e._insertElement(t,qe.HTML),e.insertionMode=le.BEFORE_HEAD):B2(e,t)}function Slt(e,t){const n=t.tagID;(n===O.HTML||n===O.HEAD||n===O.BODY||n===O.BR)&&B2(e,t)}function B2(e,t){e._insertFakeRootElement(),e.insertionMode=le.BEFORE_HEAD,e._processToken(t)}function Tlt(e,t){switch(t.tagID){case O.HTML:{Ua(e,t);break}case O.HEAD:{e._insertElement(t,qe.HTML),e.headElement=e.openElements.current,e.insertionMode=le.IN_HEAD;break}default:z2(e,t)}}function Clt(e,t){const n=t.tagID;n===O.HEAD||n===O.BODY||n===O.HTML||n===O.BR?z2(e,t):e._err(t,De.endTagWithoutMatchingOpenElement)}function z2(e,t){e._insertFakeElement(Ae.HEAD,O.HEAD),e.headElement=e.openElements.current,e.insertionMode=le.IN_HEAD,e._processToken(t)}function Lf(e,t){switch(t.tagID){case O.HTML:{Ua(e,t);break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:{e._appendElement(t,qe.HTML),t.ackSelfClosing=!0;break}case O.TITLE:{e._switchToTextParsing(t,Es.RCDATA);break}case O.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Es.RAWTEXT):(e._insertElement(t,qe.HTML),e.insertionMode=le.IN_HEAD_NO_SCRIPT);break}case O.NOFRAMES:case O.STYLE:{e._switchToTextParsing(t,Es.RAWTEXT);break}case O.SCRIPT:{e._switchToTextParsing(t,Es.SCRIPT_DATA);break}case O.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=le.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(le.IN_TEMPLATE);break}case O.HEAD:{e._err(t,De.misplacedStartTagForHeadElement);break}default:U2(e,t)}}function Alt(e,t){switch(t.tagID){case O.HEAD:{e.openElements.pop(),e.insertionMode=le.AFTER_HEAD;break}case O.BODY:case O.BR:case O.HTML:{U2(e,t);break}case O.TEMPLATE:{Zb(e,t);break}default:e._err(t,De.endTagWithoutMatchingOpenElement)}}function Zb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==O.TEMPLATE&&e._err(t,De.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,De.endTagWithoutMatchingOpenElement)}function U2(e,t){e.openElements.pop(),e.insertionMode=le.AFTER_HEAD,e._processToken(t)}function Ilt(e,t){switch(t.tagID){case O.HTML:{Ua(e,t);break}case O.BASEFONT:case O.BGSOUND:case O.HEAD:case O.LINK:case O.META:case O.NOFRAMES:case O.STYLE:{Lf(e,t);break}case O.NOSCRIPT:{e._err(t,De.nestedNoscriptInHead);break}default:V2(e,t)}}function Rlt(e,t){switch(t.tagID){case O.NOSCRIPT:{e.openElements.pop(),e.insertionMode=le.IN_HEAD;break}case O.BR:{V2(e,t);break}default:e._err(t,De.endTagWithoutMatchingOpenElement)}}function V2(e,t){const n=t.type===jn.EOF?De.openElementsLeftAfterEof:De.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=le.IN_HEAD,e._processToken(t)}function klt(e,t){switch(t.tagID){case O.HTML:{Ua(e,t);break}case O.BODY:{e._insertElement(t,qe.HTML),e.framesetOk=!1,e.insertionMode=le.IN_BODY;break}case O.FRAMESET:{e._insertElement(t,qe.HTML),e.insertionMode=le.IN_FRAMESET;break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{e._err(t,De.abandonedHeadElementChild),e.openElements.push(e.headElement,O.HEAD),Lf(e,t),e.openElements.remove(e.headElement);break}case O.HEAD:{e._err(t,De.misplacedStartTagForHeadElement);break}default:H2(e,t)}}function Plt(e,t){switch(t.tagID){case O.BODY:case O.HTML:case O.BR:{H2(e,t);break}case O.TEMPLATE:{Zb(e,t);break}default:e._err(t,De.endTagWithoutMatchingOpenElement)}}function H2(e,t){e._insertFakeElement(Ae.BODY,O.BODY),e.insertionMode=le.IN_BODY,c6(e,t)}function c6(e,t){switch(t.type){case jn.CHARACTER:{LTe(e,t);break}case jn.WHITESPACE_CHARACTER:{$Te(e,t);break}case jn.COMMENT:{JU(e,t);break}case jn.START_TAG:{Ua(e,t);break}case jn.END_TAG:{d6(e,t);break}case jn.EOF:{zTe(e,t);break}}}function $Te(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function LTe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Nlt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Olt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Dlt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,qe.HTML),e.insertionMode=le.IN_FRAMESET)}function Mlt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,qe.HTML)}function $lt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),TTe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,qe.HTML)}function Llt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,qe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Flt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,qe.HTML),n||(e.formElement=e.openElements.current))}function jlt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===O.LI&&i===O.LI||(n===O.DD||n===O.DT)&&(i===O.DD||i===O.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==O.ADDRESS&&i!==O.DIV&&i!==O.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,qe.HTML)}function Blt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,qe.HTML),e.tokenizer.state=Es.PLAINTEXT}function zlt(e,t){e.openElements.hasInScope(O.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,qe.HTML),e.framesetOk=!1}function Ult(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ae.A);n&&(UX(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,qe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Vlt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,qe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Hlt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(O.NOBR)&&(UX(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,qe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function qlt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,qe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Wlt(e,t){e.treeAdapter.getDocumentMode(e.document)!==Ou.QUIRKS&&e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,qe.HTML),e.framesetOk=!1,e.insertionMode=le.IN_TABLE}function FTe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,qe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function jTe(e){const t=ETe(e,V0.TYPE);return t!=null&&t.toLowerCase()===clt}function Glt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,qe.HTML),jTe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Ylt(e,t){e._appendElement(t,qe.HTML),t.ackSelfClosing=!0}function Klt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._appendElement(t,qe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Xlt(e,t){t.tagName=Ae.IMG,t.tagID=O.IMG,FTe(e,t)}function Qlt(e,t){e._insertElement(t,qe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Es.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=le.TEXT}function Jlt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Es.RAWTEXT)}function Zlt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Es.RAWTEXT)}function kce(e,t){e._switchToTextParsing(t,Es.RAWTEXT)}function eut(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,qe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===le.IN_TABLE||e.insertionMode===le.IN_CAPTION||e.insertionMode===le.IN_TABLE_BODY||e.insertionMode===le.IN_ROW||e.insertionMode===le.IN_CELL?le.IN_SELECT_IN_TABLE:le.IN_SELECT}function tut(e,t){e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,qe.HTML)}function nut(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,qe.HTML)}function rut(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(O.RTC),e._insertElement(t,qe.HTML)}function iut(e,t){e._reconstructActiveFormattingElements(),OTe(t),zX(t),t.selfClosing?e._appendElement(t,qe.MATHML):e._insertElement(t,qe.MATHML),t.ackSelfClosing=!0}function sut(e,t){e._reconstructActiveFormattingElements(),DTe(t),zX(t),t.selfClosing?e._appendElement(t,qe.SVG):e._insertElement(t,qe.SVG),t.ackSelfClosing=!0}function Pce(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,qe.HTML)}function Ua(e,t){switch(t.tagID){case O.I:case O.S:case O.B:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.SMALL:case O.STRIKE:case O.STRONG:{Vlt(e,t);break}case O.A:{Ult(e,t);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{$lt(e,t);break}case O.P:case O.DL:case O.OL:case O.UL:case O.DIV:case O.DIR:case O.NAV:case O.MAIN:case O.MENU:case O.ASIDE:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.DETAILS:case O.ADDRESS:case O.ARTICLE:case O.SECTION:case O.SUMMARY:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{Mlt(e,t);break}case O.LI:case O.DD:case O.DT:{jlt(e,t);break}case O.BR:case O.IMG:case O.WBR:case O.AREA:case O.EMBED:case O.KEYGEN:{FTe(e,t);break}case O.HR:{Klt(e,t);break}case O.RB:case O.RTC:{nut(e,t);break}case O.RT:case O.RP:{rut(e,t);break}case O.PRE:case O.LISTING:{Llt(e,t);break}case O.XMP:{Jlt(e,t);break}case O.SVG:{sut(e,t);break}case O.HTML:{Nlt(e,t);break}case O.BASE:case O.LINK:case O.META:case O.STYLE:case O.TITLE:case O.SCRIPT:case O.BGSOUND:case O.BASEFONT:case O.TEMPLATE:{Lf(e,t);break}case O.BODY:{Olt(e,t);break}case O.FORM:{Flt(e,t);break}case O.NOBR:{Hlt(e,t);break}case O.MATH:{iut(e,t);break}case O.TABLE:{Wlt(e,t);break}case O.INPUT:{Glt(e,t);break}case O.PARAM:case O.TRACK:case O.SOURCE:{Ylt(e,t);break}case O.IMAGE:{Xlt(e,t);break}case O.BUTTON:{zlt(e,t);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{qlt(e,t);break}case O.IFRAME:{Zlt(e,t);break}case O.SELECT:{eut(e,t);break}case O.OPTION:case O.OPTGROUP:{tut(e,t);break}case O.NOEMBED:{kce(e,t);break}case O.FRAMESET:{Dlt(e,t);break}case O.TEXTAREA:{Qlt(e,t);break}case O.NOSCRIPT:{e.options.scriptingEnabled?kce(e,t):Pce(e,t);break}case O.PLAINTEXT:{Blt(e,t);break}case O.COL:case O.TH:case O.TD:case O.TR:case O.HEAD:case O.FRAME:case O.TBODY:case O.TFOOT:case O.THEAD:case O.CAPTION:case O.COLGROUP:break;default:Pce(e,t)}}function out(e,t){if(e.openElements.hasInScope(O.BODY)&&(e.insertionMode=le.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function aut(e,t){e.openElements.hasInScope(O.BODY)&&(e.insertionMode=le.AFTER_BODY,KTe(e,t))}function lut(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function uut(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(O.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(O.FORM):n&&e.openElements.remove(n))}function cut(e){e.openElements.hasInButtonScope(O.P)||e._insertFakeElement(Ae.P,O.P),e._closePElement()}function dut(e){e.openElements.hasInListItemScope(O.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(O.LI),e.openElements.popUntilTagNamePopped(O.LI))}function fut(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function hut(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function put(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function mut(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ae.BR,O.BR),e.openElements.pop(),e.framesetOk=!1}function BTe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==O.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function d6(e,t){switch(t.tagID){case O.A:case O.B:case O.I:case O.S:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.NOBR:case O.SMALL:case O.STRIKE:case O.STRONG:{UX(e,t);break}case O.P:{cut(e);break}case O.DL:case O.UL:case O.OL:case O.DIR:case O.DIV:case O.NAV:case O.PRE:case O.MAIN:case O.MENU:case O.ASIDE:case O.BUTTON:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.ADDRESS:case O.ARTICLE:case O.DETAILS:case O.SECTION:case O.SUMMARY:case O.LISTING:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{lut(e,t);break}case O.LI:{dut(e);break}case O.DD:case O.DT:{fut(e,t);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{hut(e);break}case O.BR:{mut(e);break}case O.BODY:{out(e,t);break}case O.HTML:{aut(e,t);break}case O.FORM:{uut(e);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{put(e,t);break}case O.TEMPLATE:{Zb(e,t);break}default:BTe(e,t)}}function zTe(e,t){e.tmplInsertionModeStack.length>0?YTe(e,t):VX(e,t)}function gut(e,t){var n;t.tagID===O.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function yut(e,t){e._err(t,De.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function pB(e,t){if(MTe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=le.IN_TABLE_TEXT,t.type){case jn.CHARACTER:{VTe(e,t);break}case jn.WHITESPACE_CHARACTER:{UTe(e,t);break}}else YR(e,t)}function vut(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,qe.HTML),e.insertionMode=le.IN_CAPTION}function but(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,qe.HTML),e.insertionMode=le.IN_COLUMN_GROUP}function _ut(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ae.COLGROUP,O.COLGROUP),e.insertionMode=le.IN_COLUMN_GROUP,HX(e,t)}function wut(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,qe.HTML),e.insertionMode=le.IN_TABLE_BODY}function Eut(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ae.TBODY,O.TBODY),e.insertionMode=le.IN_TABLE_BODY,f6(e,t)}function xut(e,t){e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Sut(e,t){jTe(t)?e._appendElement(t,qe.HTML):YR(e,t),t.ackSelfClosing=!0}function Tut(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,qe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function GE(e,t){switch(t.tagID){case O.TD:case O.TH:case O.TR:{Eut(e,t);break}case O.STYLE:case O.SCRIPT:case O.TEMPLATE:{Lf(e,t);break}case O.COL:{_ut(e,t);break}case O.FORM:{Tut(e,t);break}case O.TABLE:{xut(e,t);break}case O.TBODY:case O.TFOOT:case O.THEAD:{wut(e,t);break}case O.INPUT:{Sut(e,t);break}case O.CAPTION:{vut(e,t);break}case O.COLGROUP:{but(e,t);break}default:YR(e,t)}}function iI(e,t){switch(t.tagID){case O.TABLE:{e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode());break}case O.TEMPLATE:{Zb(e,t);break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:YR(e,t)}}function YR(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,c6(e,t),e.fosterParentingEnabled=n}function UTe(e,t){e.pendingCharacterTokens.push(t)}function VTe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function $T(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)YR(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const HTe=new Set([O.CAPTION,O.COL,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]);function Cut(e,t){const n=t.tagID;HTe.has(n)?e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=le.IN_TABLE,GE(e,t)):Ua(e,t)}function Aut(e,t){const n=t.tagID;switch(n){case O.CAPTION:case O.TABLE:{e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=le.IN_TABLE,n===O.TABLE&&iI(e,t));break}case O.BODY:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:d6(e,t)}}function HX(e,t){switch(t.tagID){case O.HTML:{Ua(e,t);break}case O.COL:{e._appendElement(t,qe.HTML),t.ackSelfClosing=!0;break}case O.TEMPLATE:{Lf(e,t);break}default:YM(e,t)}}function Iut(e,t){switch(t.tagID){case O.COLGROUP:{e.openElements.currentTagId===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=le.IN_TABLE);break}case O.TEMPLATE:{Zb(e,t);break}case O.COL:break;default:YM(e,t)}}function YM(e,t){e.openElements.currentTagId===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=le.IN_TABLE,e._processToken(t))}function f6(e,t){switch(t.tagID){case O.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,qe.HTML),e.insertionMode=le.IN_ROW;break}case O.TH:case O.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ae.TR,O.TR),e.insertionMode=le.IN_ROW,h6(e,t);break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=le.IN_TABLE,GE(e,t));break}default:GE(e,t)}}function ZU(e,t){const n=t.tagID;switch(t.tagID){case O.TBODY:case O.TFOOT:case O.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=le.IN_TABLE);break}case O.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=le.IN_TABLE,iI(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:case O.TR:break;default:iI(e,t)}}function h6(e,t){switch(t.tagID){case O.TH:case O.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,qe.HTML),e.insertionMode=le.IN_CELL,e.activeFormattingElements.insertMarker();break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=le.IN_TABLE_BODY,f6(e,t));break}default:GE(e,t)}}function qTe(e,t){switch(t.tagID){case O.TR:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=le.IN_TABLE_BODY);break}case O.TABLE:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=le.IN_TABLE_BODY,ZU(e,t));break}case O.TBODY:case O.TFOOT:case O.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(O.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=le.IN_TABLE_BODY,ZU(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:break;default:iI(e,t)}}function Rut(e,t){const n=t.tagID;HTe.has(n)?(e.openElements.hasInTableScope(O.TD)||e.openElements.hasInTableScope(O.TH))&&(e._closeTableCell(),h6(e,t)):Ua(e,t)}function kut(e,t){const n=t.tagID;switch(n){case O.TD:case O.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=le.IN_ROW);break}case O.TABLE:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),qTe(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:break;default:d6(e,t)}}function WTe(e,t){switch(t.tagID){case O.HTML:{Ua(e,t);break}case O.OPTION:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e._insertElement(t,qe.HTML);break}case O.OPTGROUP:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop(),e._insertElement(t,qe.HTML);break}case O.INPUT:case O.KEYGEN:case O.TEXTAREA:case O.SELECT:{e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),t.tagID!==O.SELECT&&e._processStartTag(t));break}case O.SCRIPT:case O.TEMPLATE:{Lf(e,t);break}}}function GTe(e,t){switch(t.tagID){case O.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===O.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===O.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop();break}case O.OPTION:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop();break}case O.SELECT:{e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode());break}case O.TEMPLATE:{Zb(e,t);break}}}function Put(e,t){const n=t.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e._processStartTag(t)):WTe(e,t)}function Nut(e,t){const n=t.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e.onEndTag(t)):GTe(e,t)}function Out(e,t){switch(t.tagID){case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{Lf(e,t);break}case O.CAPTION:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{e.tmplInsertionModeStack[0]=le.IN_TABLE,e.insertionMode=le.IN_TABLE,GE(e,t);break}case O.COL:{e.tmplInsertionModeStack[0]=le.IN_COLUMN_GROUP,e.insertionMode=le.IN_COLUMN_GROUP,HX(e,t);break}case O.TR:{e.tmplInsertionModeStack[0]=le.IN_TABLE_BODY,e.insertionMode=le.IN_TABLE_BODY,f6(e,t);break}case O.TD:case O.TH:{e.tmplInsertionModeStack[0]=le.IN_ROW,e.insertionMode=le.IN_ROW,h6(e,t);break}default:e.tmplInsertionModeStack[0]=le.IN_BODY,e.insertionMode=le.IN_BODY,Ua(e,t)}}function Dut(e,t){t.tagID===O.TEMPLATE&&Zb(e,t)}function YTe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):VX(e,t)}function Mut(e,t){t.tagID===O.HTML?Ua(e,t):KM(e,t)}function KTe(e,t){var n;if(t.tagID===O.HTML){if(e.fragmentContext||(e.insertionMode=le.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===O.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else KM(e,t)}function KM(e,t){e.insertionMode=le.IN_BODY,c6(e,t)}function $ut(e,t){switch(t.tagID){case O.HTML:{Ua(e,t);break}case O.FRAMESET:{e._insertElement(t,qe.HTML);break}case O.FRAME:{e._appendElement(t,qe.HTML),t.ackSelfClosing=!0;break}case O.NOFRAMES:{Lf(e,t);break}}}function Lut(e,t){t.tagID===O.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==O.FRAMESET&&(e.insertionMode=le.AFTER_FRAMESET))}function Fut(e,t){switch(t.tagID){case O.HTML:{Ua(e,t);break}case O.NOFRAMES:{Lf(e,t);break}}}function jut(e,t){t.tagID===O.HTML&&(e.insertionMode=le.AFTER_AFTER_FRAMESET)}function But(e,t){t.tagID===O.HTML?Ua(e,t):iD(e,t)}function iD(e,t){e.insertionMode=le.IN_BODY,c6(e,t)}function zut(e,t){switch(t.tagID){case O.HTML:{Ua(e,t);break}case O.NOFRAMES:{Lf(e,t);break}}}function Uut(e,t){t.chars=Di,e._insertCharacters(t)}function Vut(e,t){e._insertCharacters(t),e.framesetOk=!1}function XTe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==qe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Hut(e,t){if(slt(t))XTe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===qe.MATHML?OTe(t):r===qe.SVG&&(olt(t),DTe(t)),zX(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function qut(e,t){if(t.tagID===O.P||t.tagID===O.BR){XTe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===qe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ae.AREA,Ae.BASE,Ae.BASEFONT,Ae.BGSOUND,Ae.BR,Ae.COL,Ae.EMBED,Ae.FRAME,Ae.HR,Ae.IMG,Ae.INPUT,Ae.KEYGEN,Ae.LINK,Ae.META,Ae.PARAM,Ae.SOURCE,Ae.TRACK,Ae.WBR;const Wut=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Nce={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function QTe(e,t){const n=nct(e),r=yTe("type",{handlers:{root:Gut,element:Yut,text:Kut,comment:ZTe,doctype:Xut,raw:Jut},unknown:Zut}),i={parser:n?new Rce(Nce):Rce.getFragmentParser(void 0,Nce),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),vS(i,bp());const s=n?i.parser.document:i.parser.getFragment(),o=iat(s,{file:i.options.file});return i.stitches&&LX(o,"comment",function(a,l,u){const c=a;if(c.value.stitch&&u&&l!==void 0){const d=u.children;return d[l]=c.value.stitch,l}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function JTe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Gut(e,t){JTe(e.children,t)}function Yut(e,t){ect(e,t),JTe(e.children,t),tct(e,t)}function Kut(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:jn.CHARACTER,chars:e.value,location:KR(e)};vS(t,bp(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Xut(e,t){const n={type:jn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:KR(e)};vS(t,bp(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Qut(e,t){t.stitches=!0;const n=rct(e);if("children"in e&&"children"in n){const r=QTe({type:"root",children:e.children},t.options);n.children=r.children}ZTe({type:"comment",value:{stitch:n}},t)}function ZTe(e,t){const n=e.value,r={type:jn.COMMENT,data:n,location:KR(e)};vS(t,bp(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Jut(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,eCe(t,bp(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Zut(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Qut(n,t);else{let r="";throw Wut.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function vS(e,t){eCe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Es.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function eCe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function ect(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Es.PLAINTEXT)return;vS(t,bp(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:A1.html;i===A1.html&&n==="svg"&&(i=A1.svg);const s=uat({...e,children:[]},{space:i===A1.svg?"svg":"html"}),o={type:jn.START_TAG,tagName:n,tagID:yS(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:KR(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function tct(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&yat.includes(n)||t.parser.tokenizer.state===Es.PLAINTEXT)return;vS(t,o6(e));const r={type:jn.END_TAG,tagName:n,tagID:yS(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:KR(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Es.RCDATA||t.parser.tokenizer.state===Es.RAWTEXT||t.parser.tokenizer.state===Es.SCRIPT_DATA)&&(t.parser.tokenizer.state=Es.DATA)}function nct(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function KR(e){const t=bp(e)||{line:void 0,column:void 0,offset:void 0},n=o6(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function rct(e){return"children"in e?WE({...e,children:[]}):WE(e)}function ict(e){return function(t,n){return QTe(t,{...e,file:n})}}function fl({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return b.jsx(Zy,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return b.jsx(nt,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return b.jsx(Ti,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return b.jsx(Ti,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return b.jsx(Ti,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return b.jsx(Ti,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return b.jsx(Ti,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return b.jsx(Ti,{...s,order:6,...s,pb:12})},a({node:i,...s}){return b.jsx(Qy,{...s,ref:void 0})},ul({node:i,...s}){return b.jsx(af,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return b.jsx(af,{type:"ordered",withPadding:!0,...o,pb:8})}};return b.jsx(qot,{components:n,rehypePlugins:[ict],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function eV({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return b.jsx(fl,{text:n})}const sct="https://github.com/revisit-studies/study/tree/main/public/";function oct({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=md();return b.jsx(Hr.Main,{children:b.jsxs(Mf,{size:"xs",px:"xs",children:[b.jsx(Zy,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${pc}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),b.jsx(nt,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=RSe(i);return b.jsx(xs,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:b.jsxs(Kb,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?b.jsxs(b.Fragment,{children:[b.jsx(nt,{fw:"bold",children:i}),b.jsxs(It,{align:"center",direction:"row",children:[b.jsx(Sue,{color:"red"}),b.jsx(nt,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),b.jsx(eV,{issues:s.errors,type:"error"})]}):b.jsxs(b.Fragment,{children:[b.jsx(nt,{fw:"bold",children:s.studyMetadata.title}),b.jsxs(nt,{c:"dimmed",children:[b.jsx(nt,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),b.jsx(nt,{c:"dimmed",children:s.studyMetadata.description}),b.jsx(nt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:b.jsxs(Qy,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${sct}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&b.jsxs(b.Fragment,{children:[b.jsxs(It,{align:"center",direction:"row",children:[b.jsx(Sue,{color:"orange"}),b.jsx(nt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),b.jsx(eV,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var tCe={exports:{}},nCe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XR=A;function act(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lct=typeof Object.is=="function"?Object.is:act,uct=XR.useSyncExternalStore,cct=XR.useRef,dct=XR.useEffect,fct=XR.useMemo,hct=XR.useDebugValue;nCe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=cct(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=fct(function(){function l(h){if(!u){if(u=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return d=p}return d=h}if(p=d,lct(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,d=m)}var u=!1,c,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,r,i]);var a=uct(e,s[0],s[1]);return dct(function(){o.hasValue=!0,o.value=a},[a]),hct(a),a};tCe.exports=nCe;var pct=tCe.exports,Uu="default"in lM?us:lM,Oce=Symbol.for("react-redux-context"),Dce=typeof globalThis<"u"?globalThis:{};function mct(){if(!Uu.createContext)return{};const e=Dce[Oce]??(Dce[Oce]=new Map);let t=e.get(Uu.createContext);return t||(t=Uu.createContext(null),e.set(Uu.createContext,t)),t}var ly=mct(),gct=()=>{throw new Error("uSES not initialized!")};function qX(e=ly){return function(){return Uu.useContext(e)}}var rCe=qX(),iCe=gct,yct=e=>{iCe=e},vct=(e,t)=>e===t;function bct(e=ly){const t=e===ly?rCe:qX(e),n=(r,i={})=>{const{equalityFn:s=vct,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:l,getServerState:u,stabilityCheck:c,identityFunctionCheck:d}=t();Uu.useRef(!0);const f=Uu.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=iCe(l.addNestedSub,a.getState,u||a.getState,f,s);return Uu.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var _ct=bct();function wct(e){e()}function Ect(){let e=null,t=null;return{clear(){e=null,t=null},notify(){wct(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Mce={notify(){},get:()=>[]};function xct(e,t){let n,r=Mce,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),d())}}function a(){r.notify()}function l(){p.onStateChange&&p.onStateChange()}function u(){return s}function c(){i++,n||(n=e.subscribe(l),r=Ect())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Mce)}function f(){s||(s=!0,c())}function h(){s&&(s=!1,d())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:f,tryUnsubscribe:h,getListeners:()=>r};return p}var Sct=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Tct=typeof navigator<"u"&&navigator.product==="ReactNative",Cct=Sct||Tct?Uu.useLayoutEffect:Uu.useEffect;function Act({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Uu.useMemo(()=>{const u=xct(e);return{store:e,subscription:u,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Uu.useMemo(()=>e.getState(),[e]);Cct(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==e.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,a]);const l=t||ly;return Uu.createElement(l.Provider,{value:o},n)}var Ict=Act;function sCe(e=ly){const t=e===ly?rCe:qX(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Rct=sCe();function kct(e=ly){const t=e===ly?Rct:sCe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var oCe=kct();yct(pct.useSyncExternalStoreWithSelector);function Do(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Pct=typeof Symbol=="function"&&Symbol.observable||"@@observable",$ce=Pct,mB=()=>Math.random().toString(36).substring(7).split("").join("."),Nct={INIT:`@@redux/INIT${mB()}`,REPLACE:`@@redux/REPLACE${mB()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${mB()}`},XM=Nct;function WX(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function aCe(e,t,n){if(typeof e!="function")throw new Error(Do(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Do(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Do(1));return n(aCe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,l=!1;function u(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(l)throw new Error(Do(3));return i}function d(g){if(typeof g!="function")throw new Error(Do(4));if(l)throw new Error(Do(5));let y=!0;u();const v=a++;return o.set(v,g),function(){if(y){if(l)throw new Error(Do(6));y=!1,u(),o.delete(v),s=null}}}function f(g){if(!WX(g))throw new Error(Do(7));if(typeof g.type>"u")throw new Error(Do(8));if(typeof g.type!="string")throw new Error(Do(17));if(l)throw new Error(Do(9));try{l=!0,i=r(i,g)}finally{l=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Do(10));r=g,f({type:XM.REPLACE})}function p(){const g=d;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Do(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[$ce](){return this}}}return f({type:XM.INIT}),{dispatch:f,subscribe:d,getState:c,replaceReducer:h,[$ce]:p}}function Oct(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:XM.INIT})>"u")throw new Error(Do(12));if(typeof n(void 0,{type:XM.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Do(13))})}function Dct(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Oct(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const u={};for(let c=0;c<r.length;c++){const d=r[c],f=n[d],h=o[d],p=f(h,a);if(typeof p>"u")throw a&&a.type,new Error(Do(14));u[d]=p,l=l||p!==h}return l=l||r.length!==Object.keys(o).length,l?u:o}}function QM(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Mct(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Do(15))};const o={getState:i.getState,dispatch:(l,...u)=>s(l,...u)},a=e.map(l=>l(o));return s=QM(...a)(i.dispatch),{...i,dispatch:s}}}function $ct(e){return WX(e)&&"type"in e&&typeof e.type=="string"}var lCe=Symbol.for("immer-nothing"),Lce=Symbol.for("immer-draftable"),ec=Symbol.for("immer-state");function Hd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var YE=Object.getPrototypeOf;function uy(e){return!!e&&!!e[ec]}function Wm(e){var t;return e?uCe(e)||Array.isArray(e)||!!e[Lce]||!!((t=e.constructor)!=null&&t[Lce])||m6(e)||g6(e):!1}var Lct=Object.prototype.constructor.toString();function uCe(e){if(!e||typeof e!="object")return!1;const t=YE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Lct}function JM(e,t){p6(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function p6(e){const t=e[ec];return t?t.type_:Array.isArray(e)?1:m6(e)?2:g6(e)?3:0}function tV(e,t){return p6(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function cCe(e,t,n){const r=p6(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Fct(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function m6(e){return e instanceof Map}function g6(e){return e instanceof Set}function Kv(e){return e.copy_||e.base_}function nV(e,t){if(m6(e))return new Map(e);if(g6(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=uCe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ec];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(YE(e),r)}else{const r=YE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function GX(e,t=!1){return y6(e)||uy(e)||!Wm(e)||(p6(e)>1&&(e.set=e.add=e.clear=e.delete=jct),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>GX(r,!0))),e}function jct(){Hd(2)}function y6(e){return Object.isFrozen(e)}var Bct={};function ob(e){const t=Bct[e];return t||Hd(0,e),t}var sI;function dCe(){return sI}function zct(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Fce(e,t){t&&(ob("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function rV(e){iV(e),e.drafts_.forEach(Uct),e.drafts_=null}function iV(e){e===sI&&(sI=e.parent_)}function jce(e){return sI=zct(sI,e)}function Uct(e){const t=e[ec];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Bce(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ec].modified_&&(rV(t),Hd(4)),Wm(e)&&(e=ZM(t,e),t.parent_||e$(t,e)),t.patches_&&ob("Patches").generateReplacementPatches_(n[ec].base_,e,t.patches_,t.inversePatches_)):e=ZM(t,n,[]),rV(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==lCe?e:void 0}function ZM(e,t,n){if(y6(t))return t;const r=t[ec];if(!r)return JM(t,(i,s)=>zce(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return e$(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),JM(s,(a,l)=>zce(e,r,i,a,l,n,o)),e$(e,i,!1),n&&e.patches_&&ob("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function zce(e,t,n,r,i,s,o){if(uy(i)){const a=s&&t&&t.type_!==3&&!tV(t.assigned_,r)?s.concat(r):void 0,l=ZM(e,i,a);if(cCe(n,r,l),uy(l))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Wm(i)&&!y6(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ZM(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&e$(e,i)}}function e$(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&GX(t,n)}function Vct(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:dCe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=YX;n&&(i=[r],s=oI);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var YX={get(e,t){if(t===ec)return e;const n=Kv(e);if(!tV(n,t))return Hct(e,n,t);const r=n[t];return e.finalized_||!Wm(r)?r:r===gB(e.base_,t)?(yB(e),e.copy_[t]=oV(r,e)):r},has(e,t){return t in Kv(e)},ownKeys(e){return Reflect.ownKeys(Kv(e))},set(e,t,n){const r=fCe(Kv(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=gB(Kv(e),t),s=i==null?void 0:i[ec];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Fct(n,i)&&(n!==void 0||tV(e.base_,t)))return!0;yB(e),sV(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return gB(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,yB(e),sV(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Kv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Hd(11)},getPrototypeOf(e){return YE(e.base_)},setPrototypeOf(){Hd(12)}},oI={};JM(YX,(e,t)=>{oI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});oI.deleteProperty=function(e,t){return oI.set.call(this,e,t,void 0)};oI.set=function(e,t,n){return YX.set.call(this,e[0],t,n,e[0])};function gB(e,t){const n=e[ec];return(n?Kv(n):e)[t]}function Hct(e,t,n){var i;const r=fCe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function fCe(e,t){if(!(t in e))return;let n=YE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=YE(n)}}function sV(e){e.modified_||(e.modified_=!0,e.parent_&&sV(e.parent_))}function yB(e){e.copy_||(e.copy_=nV(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var qct=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(l=s,...u){return o.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&Hd(6),r!==void 0&&typeof r!="function"&&Hd(7);let i;if(Wm(t)){const s=jce(this),o=oV(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?rV(s):iV(s)}return Fce(s,r),Bce(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===lCe&&(i=void 0),this.autoFreeze_&&GX(i,!0),r){const s=[],o=[];ob("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else Hd(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,l=>t(l,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Wm(e)||Hd(8),uy(e)&&(e=hCe(e));const t=jce(this),n=oV(e,void 0);return n[ec].isManual_=!0,iV(t),n}finishDraft(e,t){const n=e&&e[ec];(!n||!n.isManual_)&&Hd(9);const{scope_:r}=n;return Fce(r,t),Bce(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=ob("Patches").applyPatches_;return uy(e)?r(e,t):this.produce(e,i=>r(i,t))}};function oV(e,t){const n=m6(e)?ob("MapSet").proxyMap_(e,t):g6(e)?ob("MapSet").proxySet_(e,t):Vct(e,t);return(t?t.scope_:dCe()).drafts_.push(n),n}function hCe(e){return uy(e)||Hd(10,e),pCe(e)}function pCe(e){if(!Wm(e)||y6(e))return e;const t=e[ec];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=nV(e,t.scope_.immer_.useStrictShallowCopy_)}else n=nV(e,!0);return JM(n,(r,i)=>{cCe(n,r,pCe(i))}),t&&(t.finalized_=!1),n}var tc=new qct,mCe=tc.produce;tc.produceWithPatches.bind(tc);tc.setAutoFreeze.bind(tc);tc.setUseStrictShallowCopy.bind(tc);tc.applyPatches.bind(tc);tc.createDraft.bind(tc);tc.finishDraft.bind(tc);function Wct(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Gct(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Yct(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Uce=e=>Array.isArray(e)?e:[e];function Kct(e){const t=Array.isArray(e[0])?e[0]:e;return Yct(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Xct(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Qct=class{constructor(e){this.value=e}deref(){return this.value}},Jct=typeof WeakRef<"u"?WeakRef:Qct,Zct=0,Vce=1;function fN(){return{s:Zct,v:void 0,o:null,p:null}}function KX(e,t={}){let n=fN();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var d;let a=n;const{length:l}=arguments;for(let f=0,h=l;f<h;f++){const p=arguments[f];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=fN(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=fN(),m.set(p,a)):a=g}}const u=a;let c;if(a.s===Vce)c=a.v;else if(c=e.apply(null,arguments),s++,r){const f=((d=i==null?void 0:i.deref)==null?void 0:d.call(i))??i;f!=null&&r(f,c)&&(c=f,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Jct(c):c}return u.s=Vce,u.v=c,c}return o.clearCache=()=>{n=fN(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function gCe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,l={},u=i.pop();typeof u=="object"&&(l=u,u=i.pop()),Wct(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const c={...n,...l},{memoize:d,memoizeOptions:f=[],argsMemoize:h=KX,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=Uce(f),y=Uce(p),v=Kct(i),_=d(function(){return s++,u.apply(null,arguments)},...g),w=h(function(){o++;const S=Xct(v,arguments);return a=_.apply(null,S),a},...y);return Object.assign(w,{resultFunc:u,memoizedResultFunc:_,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var edt=gCe(KX),tdt=Object.assign((e,t=edt)=>{Gct(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>tdt});function yCe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var ndt=yCe(),rdt=yCe,idt=(...e)=>{const t=gCe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(uy(o)?hCe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};idt(KX);var sdt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?QM:QM.apply(null,arguments)};function KE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(iu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>$ct(r)&&r.type===e,n}var vCe=class NC extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,NC.prototype)}static get[Symbol.species](){return NC}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new NC(...t[0].concat(this)):new NC(...t.concat(this))}};function Hce(e){return Wm(e)?mCe(e,()=>{}):e}function qce(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(iu(10));const r=n.insert(t,e);return e.set(t,r),r}function odt(e){return typeof e=="boolean"}var adt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new vCe;return n&&(odt(n)?o.push(ndt):o.push(rdt(n.extraArgument))),o},ldt="RTK_autoBatch",bCe=e=>t=>{setTimeout(t,e)},udt=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:bCe(10),cdt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?udt:e.type==="callback"?e.queueNotification:bCe(e.timeout),u=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const d=()=>i&&c(),f=r.subscribe(d);return a.add(c),()=>{f(),a.delete(c)}},dispatch(c){var d;try{return i=!((d=c==null?void 0:c.meta)!=null&&d[ldt]),s=!i,s&&(o||(o=!0,l(u))),r.dispatch(c)}finally{i=!0}}})},ddt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new vCe(e);return r&&i.push(cdt(typeof r=="object"?r:void 0)),i},fdt=!0;function hdt(e){const t=adt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(WX(n))a=Dct(n);else throw new Error(iu(1));let l;typeof r=="function"?l=r(t):l=t();let u=QM;i&&(u=sdt({trace:!fdt,...typeof i=="object"&&i}));const c=Mct(...l),d=ddt(c);let f=typeof o=="function"?o(d):d();const h=u(...f);return aCe(a,s,h)}function _Ce(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(iu(28));if(a in t)throw new Error(iu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function pdt(e){return typeof e=="function"}function mdt(e,t){let[n,r,i]=_Ce(t),s;if(pdt(e))s=()=>Hce(e());else{const a=Hce(e);s=()=>a}function o(a=s(),l){let u=[n[l.type],...r.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[i]),u.reduce((c,d)=>{if(d)if(uy(c)){const h=d(c,l);return h===void 0?c:h}else{if(Wm(c))return mCe(c,f=>d(f,l));{const f=d(c,l);if(f===void 0){if(c===null)return c;throw new Error(iu(9))}return f}}return c},a)}return o.getInitialState=s,o}var gdt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ydt=(e=21)=>{let t="",n=e;for(;n--;)t+=gdt[Math.random()*64|0];return t},vdt=Symbol.for("rtk-slice-createasyncthunk");function bdt(e,t){return`${e}/${t}`}function _dt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[vdt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(iu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(xdt()):i.reducers)||{},l=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(_,w){const E=typeof _=="string"?_:_.type;if(!E)throw new Error(iu(12));if(E in u.sliceCaseReducersByType)throw new Error(iu(13));return u.sliceCaseReducersByType[E]=w,c},addMatcher(_,w){return u.sliceMatchers.push({matcher:_,reducer:w}),c},exposeAction(_,w){return u.actionCreators[_]=w,c},exposeCaseReducer(_,w){return u.sliceCaseReducersByName[_]=w,c}};l.forEach(_=>{const w=a[_],E={reducerName:_,type:bdt(s,_),createNotation:typeof i.reducers=="function"};Tdt(w)?Adt(E,w,c,t):Sdt(E,w,c)});function d(){const[_={},w=[],E=void 0]=typeof i.extraReducers=="function"?_Ce(i.extraReducers):[i.extraReducers],S={..._,...u.sliceCaseReducersByType};return mdt(i.initialState,x=>{for(let T in S)x.addCase(T,S[T]);for(let T of u.sliceMatchers)x.addMatcher(T.matcher,T.reducer);for(let T of w)x.addMatcher(T.matcher,T.reducer);E&&x.addDefaultCase(E)})}const f=_=>_,h=new Map;let p;function m(_,w){return p||(p=d()),p(_,w)}function g(){return p||(p=d()),p.getInitialState()}function y(_,w=!1){function E(x){let T=x[_];return typeof T>"u"&&w&&(T=g()),T}function S(x=f){const T=qce(h,w,{insert:()=>new WeakMap});return qce(T,x,{insert:()=>{const I={};for(const[P,k]of Object.entries(i.selectors??{}))I[P]=wdt(k,x,g,w);return I}})}return{reducerPath:_,getSelectors:S,get selectors(){return S(E)},selectSlice:E}}const v={name:s,reducer:m,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(_,{reducerPath:w,...E}={}){const S=w??o;return _.inject({reducerPath:S,reducer:m},E),{...v,...y(S,!0)}}};return v}}function wdt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Edt=_dt();function xdt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Sdt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Cdt(r))throw new Error(iu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?KE(e,o):KE(e))}function Tdt(e){return e._reducerDefinitionType==="asyncThunk"}function Cdt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Adt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(iu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:u,options:c}=n,d=i(e,s,c);r.exposeAction(t,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),l&&r.addCase(d.rejected,l),u&&r.addMatcher(d.settled,u),r.exposeCaseReducer(t,{fulfilled:o||hN,pending:a||hN,rejected:l||hN,settled:u||hN})}function hN(){}var Idt=(e,t)=>{if(typeof e!="function")throw new Error(iu(32))},XX="listenerMiddleware",Rdt=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=KE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(iu(21));return Idt(s),{predicate:i,type:t,effect:s}},kdt=Object.assign(e=>{const{type:t,predicate:n,effect:r}=Rdt(e);return{id:ydt(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(iu(22))}}},{withTypes:()=>kdt}),Pdt=Object.assign(KE(`${XX}/add`),{withTypes:()=>Pdt});KE(`${XX}/removeAll`);var Ndt=Object.assign(KE(`${XX}/remove`),{withTypes:()=>Ndt});function iu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Si={};function Odt(e){return!!(e&&typeof e.then=="function")}function t$(e){return e||(e=0),new Promise(function(t){return setTimeout(t,e)})}function Ddt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function v6(){return Math.random().toString(36).substring(2)}var Wce=0,vB=0;function b6(){var e=new Date().getTime();return e===Wce?(vB++,e*1e3+vB):(Wce=e,vB=0,e*1e3)}var QR=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",Mdt=b6,$dt="native";function Ldt(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(n){t.messagesCallback&&t.messagesCallback(n.data)},t}function Fdt(e){e.bc.close(),e.subFns=[]}function jdt(e,t){try{return e.bc.postMessage(t,!1),Promise.resolve()}catch(n){return Promise.reject(n)}}function Bdt(e,t){e.messagesCallback=t}function zdt(){if(QR&&typeof window>"u")return!1;if(typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function Udt(){return 150}const Vdt={create:Ldt,close:Fdt,onMessage:Bdt,postMessage:jdt,canBeUsed:zdt,type:$dt,averageResponseTime:Udt,microSeconds:Mdt};var wCe=function(){function e(t){this.ttl=t,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(t){return this.set.has(t)},e.prototype.add=function(t){var n=this;this.timeMap.set(t,ECe()),this.set.add(t),setTimeout(function(){Hdt(n)},0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function Hdt(e){for(var t=ECe()-e.ttl,n=e.set[Symbol.iterator]();;){var r=n.next().value;if(!r)return;var i=e.timeMap.get(r);if(i<t)e.timeMap.delete(r),e.set.delete(r);else return}}function ECe(){return new Date().getTime()}function _6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return typeof t.webWorkerSupport>"u"&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&typeof e.idb.onclose=="function"&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=1e3*60*2),typeof t.node.useFastPath>"u"&&(t.node.useFastPath=!0),t}var qdt=b6,Wdt="pubkey.broadcast-channel-0-",Gm="messages",Gdt="idb";function xCe(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function Ydt(e){var t=xCe(),n=Wdt+e,r=t.open(n,1);r.onupgradeneeded=function(s){var o=s.target.result;o.createObjectStore(Gm,{keyPath:"id",autoIncrement:!0})};var i=new Promise(function(s,o){r.onerror=function(a){return o(a)},r.onsuccess=function(){s(r.result)}});return i}function Kdt(e,t,n){var r=new Date().getTime(),i={uuid:t,time:r,data:n},s=e.transaction([Gm],"readwrite");return new Promise(function(o,a){s.oncomplete=function(){return o()},s.onerror=function(u){return a(u)};var l=s.objectStore(Gm);l.add(i)})}function Xdt(e,t){var n=e.transaction(Gm).objectStore(Gm),r=[];function i(){try{var s=IDBKeyRange.bound(t+1,1/0);return n.openCursor(s)}catch{return n.openCursor()}}return new Promise(function(s){i().onsuccess=function(o){var a=o.target.result;a?a.value.id<t+1?a.continue(t+1):(r.push(a.value),a.continue()):s(r)}})}function Qdt(e,t){var n=e.transaction([Gm],"readwrite").objectStore(Gm).delete(t);return new Promise(function(r){n.onsuccess=function(){return r()}})}function Jdt(e,t){var n=new Date().getTime()-t,r=e.transaction(Gm).objectStore(Gm),i=[];return new Promise(function(s){r.openCursor().onsuccess=function(o){var a=o.target.result;if(a){var l=a.value;if(l.time<n)i.push(l),a.continue();else{s(i);return}}else s(i)}})}function Zdt(e,t){return Jdt(e,t).then(function(n){return Promise.all(n.map(function(r){return Qdt(e,r.id)}))})}function eft(e,t){return t=_6(t),Ydt(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:v6(),eMIs:new wCe(t.idb.ttl*2),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},SCe(r),r})}function SCe(e){e.closed||TCe(e).then(function(){return t$(e.options.idb.fallbackInterval)}).then(function(){return SCe(e)})}function tft(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}function TCe(e){return e.closed||!e.messagesCallback?Promise.resolve():Xdt(e.db,e.lastCursorId).then(function(t){var n=t.filter(function(r){return!!r}).map(function(r){return r.id>e.lastCursorId&&(e.lastCursorId=r.id),r}).filter(function(r){return tft(r,e)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){e.messagesCallback&&(e.eMIs.add(r.id),e.messagesCallback(r.data))}),Promise.resolve()})}function nft(e){e.closed=!0,e.db.close()}function rft(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return Kdt(e.db,e.uuid,t)}).then(function(){Ddt(0,10)===0&&Zdt(e.db,e.options.idb.ttl)}),e.writeBlockPromise}function ift(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,TCe(e)}function sft(){if(QR)return!1;var e=xCe();return!!e}function oft(e){return e.idb.fallbackInterval*2}const aft={create:eft,close:nft,onMessage:ift,postMessage:rft,canBeUsed:sft,type:Gdt,averageResponseTime:oft,microSeconds:qdt};var lft=b6,uft="pubkey.broadcastChannel-",cft="localstorage";function CCe(){var e;if(typeof window>"u")return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function ACe(e){return uft+e}function dft(e,t){return new Promise(function(n){t$().then(function(){var r=ACe(e.channelName),i={token:v6(),time:new Date().getTime(),data:t,uuid:e.uuid},s=JSON.stringify(i);CCe().setItem(r,s);var o=document.createEvent("Event");o.initEvent("storage",!0,!0),o.key=r,o.newValue=s,window.dispatchEvent(o),n()})})}function fft(e,t){var n=ACe(e),r=function(s){s.key===n&&t(JSON.parse(s.newValue))};return window.addEventListener("storage",r),r}function hft(e){window.removeEventListener("storage",e)}function pft(e,t){if(t=_6(t),!ICe())throw new Error("BroadcastChannel: localstorage cannot be used");var n=v6(),r=new wCe(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=fft(e,function(s){i.messagesCallback&&s.uuid!==n&&(!s.token||r.has(s.token)||s.data.time&&s.data.time<i.messagesCallbackTime||(r.add(s.token),i.messagesCallback(s.data)))}),i}function mft(e){hft(e.listener)}function gft(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function ICe(){if(QR)return!1;var e=CCe();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}function yft(){var e=120,t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?e*2:e}const vft={create:pft,close:mft,onMessage:gft,postMessage:dft,canBeUsed:ICe,type:cft,averageResponseTime:yft,microSeconds:lft};var bft=b6,_ft="simulate",QX=new Set;function wft(e){var t={name:e,messagesCallback:null};return QX.add(t),t}function Eft(e){QX.delete(e)}function xft(e,t){return new Promise(function(n){return setTimeout(function(){var r=Array.from(QX);r.filter(function(i){return i.name===e.name}).filter(function(i){return i!==e}).filter(function(i){return!!i.messagesCallback}).forEach(function(i){return i.messagesCallback(t)}),n()},5)})}function Sft(e,t){e.messagesCallback=t}function Tft(){return!0}function Cft(){return 5}const Aft={create:wft,close:Eft,onMessage:Sft,postMessage:xft,canBeUsed:Tft,type:_ft,averageResponseTime:Cft,microSeconds:bft};var aV=[Vdt,aft,vft];if(QR){var Gce=require("../../src/methods/node.js");typeof Gce.canBeUsed=="function"&&aV.push(Gce)}function RCe(e){var t=[].concat(e.methods,aV).filter(Boolean);if(e.type){if(e.type==="simulate")return Aft;var n=t.find(function(i){return i.type===e.type});if(n)return n;throw new Error("method-type "+e.type+" not found")}!e.webWorkerSupport&&!QR&&(t=t.filter(function(i){return i.type!=="idb"}));var r=t.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No useable methode found:"+JSON.stringify(aV.map(function(i){return i.type})))}var JX=function(t,n){this.name=t,lV&&(n=lV),this.options=_6(n),this.method=RCe(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,kft(this)};JX._pubkey=!0;function Ift(e){e=_6(e);var t=RCe(e);return t.type==="node"?t.clearNodeFolder().then(function(){return!0}):Promise.resolve(!1)}var lV;function Rft(e){lV=e}JX.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return Yce(this,"message",t)},postInternal:function(t){return Yce(this,"internal",t)},set onmessage(e){var t=this.method.microSeconds(),n={time:t,fn:e};Xce(this,"message",this._onML),e&&typeof e=="function"?(this._onML=n,Kce(this,"message",n)):this._onML=null},addEventListener:function(t,n){var r=this.method.microSeconds(),i={time:r,fn:n};Kce(this,t,i)},removeEventListener:function(t,n){var r=this._addEL[t].find(function(i){return i.fn===n});Xce(this,t,r)},close:function(){var t=this;if(!this.closed){this.closed=!0;var n=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(r){return r()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function Yce(e,t,n){var r=e.method.microSeconds(),i={time:r,type:t,data:n},s=e._prepP?e._prepP:Promise.resolve();return s.then(function(){var o=e.method.postMessage(e._state,i);return e._uMP.add(o),o.catch().then(function(){return e._uMP.delete(o)}),o})}function kft(e){var t=e.method.create(e.name,e.options);Odt(t)?(e._prepP=t,t.then(function(n){e._state=n})):e._state=t}function kCe(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function Kce(e,t,n){e._addEL[t].push(n),Pft(e)}function Xce(e,t,n){e._addEL[t]=e._addEL[t].filter(function(r){return r!==n}),Nft(e)}function Pft(e){if(!e._iL&&kCe(e)){var t=function(i){e._addEL[i.type].forEach(function(s){i.time>=s.time&&s.fn(i.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}function Nft(e){if(e._iL&&!kCe(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}const Oft=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";function Dft(e){if(!(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope)){if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){e()},!0),window.addEventListener("unload",function(){e()},!0)}}const Mft={add:Dft},PCe={},$ft=Object.freeze(Object.defineProperty({__proto__:null,default:PCe},Symbol.toStringTag,{value:"Module"}));var Lft=Oft?PCe:Mft,B1=new Set,Qce=!1;function Fft(){Qce||(Qce=!0,Lft.add(NCe))}function jft(e){if(Fft(),typeof e!="function")throw new Error("Listener is no function");B1.add(e);var t={remove:function(){return B1.delete(e)},run:function(){return B1.delete(e),e()}};return t}function NCe(){var e=[];return B1.forEach(function(t){e.push(t()),B1.delete(t)}),Promise.all(e)}function Bft(){B1.clear()}function zft(){return B1.size}const Uft={add:jft,runAll:NCe,removeAll:Bft,getSize:zft};var OCe=function(t,n){this._channel=t,this._options=n,this.isLeader=!1,this.isDead=!1,this.token=v6(),this._isApl=!1,this._reApply=!1,this._unl=[],this._lstns=[],this._invs=[],this._dpL=function(){},this._dpLC=!1};OCe.prototype={applyOnce:function(){var t=this;if(this.isLeader||this.isDead)return Promise.resolve(!1);if(this._isApl)return this._reApply=!0,Promise.resolve(!1);this._isApl=!0;var n=!1,r=function(o){o.context==="leader"&&o.token!=t.token&&(o.action==="apply"&&o.token>t.token&&(n=!0),o.action==="tell"&&(n=!0))};this._channel.addEventListener("internal",r);var i=I1(this,"apply").then(function(){return t$(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):I1(t,"apply")}).then(function(){return t$(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):I1(t)}).then(function(){return DCe(t)}).then(function(){return!0}).catch(function(){return!1}).then(function(s){return t._channel.removeEventListener("internal",r),t._isApl=!1,!s&&t._reApply?(t._reApply=!1,t.applyOnce()):s});return i},awaitLeadership:function(){return this._aLP||(this._aLP=Vft(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var t=this;if(!this.isDead)return this.isDead=!0,this._lstns.forEach(function(n){return t._channel.removeEventListener("internal",n)}),this._invs.forEach(function(n){return clearInterval(n)}),this._unl.forEach(function(n){n.remove()}),I1(this,"death")}};function Vft(e){return e.isLeader?Promise.resolve():new Promise(function(t){var n=!1;function r(){n||(n=!0,clearInterval(i),e._channel.removeEventListener("internal",s),t(!0))}e.applyOnce().then(function(){e.isLeader&&r()});var i=setInterval(function(){e.applyOnce().then(function(){e.isLeader&&r()})},e._options.fallbackInterval);e._invs.push(i);var s=function(a){a.context==="leader"&&a.action==="death"&&e.applyOnce().then(function(){e.isLeader&&r()})};e._channel.addEventListener("internal",s),e._lstns.push(s)})}function I1(e,t){var n={context:"leader",action:t,token:e.token};return e._channel.postInternal(n)}function DCe(e){e.isLeader=!0;var t=Uft.add(function(){return e.die()});e._unl.push(t);var n=function(i){i.context==="leader"&&i.action==="apply"&&I1(e,"tell"),i.context==="leader"&&i.action==="tell"&&!e._dpLC&&(e._dpLC=!0,e._dpL(),I1(e,"tell"))};return e._channel.addEventListener("internal",n),e._lstns.push(n),I1(e,"tell")}function Hft(e,t){return e||(e={}),e=JSON.parse(JSON.stringify(e)),e.fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}function qft(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=Hft(t,e);var n=new OCe(e,t);return e._befC.push(function(){return n.die()}),e._leaderElector=n,n}const Wft=Object.freeze(Object.defineProperty({__proto__:null,BroadcastChannel:JX,beLeader:DCe,clearNodeFolder:Ift,createLeaderElection:qft,enforceOptions:Rft},Symbol.toStringTag,{value:"Module"})),Gft=ube(Wft);var ZX,eQ,tQ;Object.defineProperty(Si,"__esModule",{value:!0});var MCe=Si.initMessageListener=tQ=Si.initStateWithPrevTab=eQ=Si.withReduxStateSync=Si.createReduxStateSync=ZX=Si.createStateSyncMiddleware=Si.WINDOW_STATE_SYNC_ID=Si.INIT_MESSAGE_LISTENER=Si.RECEIVE_INIT_STATE=Si.SEND_INIT_STATE=Si.GET_INIT_STATE=void 0;Si.generateUuidForAction=FCe;Si.isActionAllowed=jCe;Si.isActionSynced=eht;Si.MessageListener=BCe;var Yft=Gft,uV=0,nQ=Si.GET_INIT_STATE="&_GET_INIT_STATE",rQ=Si.SEND_INIT_STATE="&_SEND_INIT_STATE",iQ=Si.RECEIVE_INIT_STATE="&_RECEIVE_INIT_STATE",Kft=Si.INIT_MESSAGE_LISTENER="&_INIT_MESSAGE_LISTENER",cV={channel:"redux_state_sync",predicate:null,blacklist:[],whitelist:[],broadcastChannelOption:void 0,prepareState:function(t){return t},receiveState:function(t,n){return n}},Xft=function(){return{type:nQ}},Qft=function(){return{type:rQ}},Jft=function(t){return{type:iQ,payload:t}},Zft=function(){return{type:Kft}};function $g(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function $Ce(){return""+$g()+$g()+"-"+$g()+"-"+$g()+"-"+$g()+"-"+$g()+$g()+$g()}var LCe=Si.WINDOW_STATE_SYNC_ID=$Ce();function FCe(e){var t=e;return t.$uuid=$Ce(),t.$wuid=LCe,t}function jCe(e){var t=e.predicate,n=e.blacklist,r=e.whitelist,i=function(){return!0};return t&&typeof t=="function"?i=t:Array.isArray(n)?i=function(o){return n.indexOf(o.type)<0}:Array.isArray(r)&&(i=function(o){return r.indexOf(o.type)>=0}),i}function eht(e){return!!e.$isSync}function BCe(e){var t=e.channel,n=e.dispatch,r=e.allowed,i=!1,s={};this.handleOnMessage=function(o){o.$wuid!==LCe&&o.type!==iQ&&o.$uuid&&o.$uuid!==uV&&(o.type===nQ&&!s[o.$wuid]?(s[o.$wuid]=!0,n(Qft())):o.type===rQ&&!s[o.$wuid]?i||(i=!0,n(Jft(o.payload))):r(o)&&(uV=o.$uuid,n(Object.assign(o,{$isSync:!0}))))},this.messageChannel=t,this.messageChannel.onmessage=this.handleOnMessage}ZX=Si.createStateSyncMiddleware=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cV,n=jCe(t),r=new Yft.BroadcastChannel(t.channel,t.broadcastChannelOption),i=t.prepareState||cV.prepareState,s=null;return function(o){var a=o.getState,l=o.dispatch;return function(u){return function(c){if(s||(s=new BCe({channel:r,dispatch:l,allowed:n})),c&&!c.$uuid){var d=FCe(c);uV=d.$uuid;try{if(c.type===rQ)return a()&&(d.payload=i(a()),r.postMessage(d)),u(c);(n(d)||c.type===nQ)&&r.postMessage(d)}catch{console.error("Your browser doesn't support cross tab communication")}}return u(Object.assign(c,{$isSync:typeof c.$isSync>"u"?!1:c.$isSync}))}}}};var tht=Si.createReduxStateSync=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:cV.receiveState;return function(r,i){var s=r;return i.type===iQ&&(s=n(r,i.payload)),t(s,i)}};eQ=Si.withReduxStateSync=tht;tQ=Si.initStateWithPrevTab=function(t){var n=t.dispatch;n(Xft())};MCe=Si.initMessageListener=function(t){var n=t.dispatch;n(Zft())};function Gc(e){return Array.isArray(e)?e:e.components.flatMap(t=>typeof t=="string"?t:Gc(t))}function zCe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:zCe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function UCe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Gc(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Gc(e).length-1}];r+=1}else{const o=UCe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function nht(e,t){const n=UCe(e,t,0);return typeof n=="number"?null:n}function VCe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=VCe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function rht(e,t){const n=VCe(e,t,0);return n.found?n.distance:-1}function sQ(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...sQ(i,`${t}-${s}`))}),n}async function iht(e,t,n,r,i){const s=Gc(n),o=Object.fromEntries(s.filter(h=>h!=="end").map((h,p)=>[`${h}_${p}`,{answer:{}}])),a=Object.assign({},...s.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...s.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),u={studyId:e,answers:Object.keys(i).length>0?i:o,isRecording:!1,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:a,iframeAnswers:{},iframeProvenance:null,metadata:r,analysisTrialName:null,analysisProvState:null,analysisParticipantName:null,analysisWaveformTime:0},c=Edt({name:"storeSlice",initialState:u,reducers:{setConfig(h,p){h.config=p.payload},setIsRecording(h,p){h.isRecording=p.payload},toggleStudyBrowser:h=>{h.showStudyBrowser=!h.showStudyBrowser},toggleShowHelpText:h=>{h.showHelpText=!h.showHelpText},setAlertModal:(h,p)=>{h.alertModal=p.payload},setIframeAnswers:(h,p)=>{h.iframeAnswers=p.payload},setAnalysisTrialName:(h,p)=>{h.analysisTrialName=p.payload},setAnalysisParticipantName:(h,p)=>{h.analysisParticipantName=p.payload},setAnalysisWaveformTime:(h,p)=>{h.analysisWaveformTime=p.payload},setIframeProvenance:(h,p)=>{h.iframeProvenance=p.payload},updateResponseBlockValidation:(h,{payload:p})=>{h.trialValidation[p.identifier]||(h.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),h.trialValidation[p.identifier][p.location]={valid:p.status,values:p.values},p.provenanceGraph&&(h.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveAnalysisState(h,{payload:p}){h.analysisProvState=p},saveTrialAnswer(h,{payload:p}){const{identifier:m,answer:g,startTime:y,endTime:v,provenanceGraph:_,windowEvents:w}=p;h.answers[m]={answer:g,startTime:y,endTime:v,provenanceGraph:_,windowEvents:w}}}}),d=ZX({}),f=hdt({reducer:eQ(c.reducer),preloadedState:u,middleware:h=>h().prepend(d)});return MCe(f),tQ(f),{store:f,actions:c.actions}}const HCe=A.createContext(null);function nc(){return A.useContext(HCe).actions}const ed=oCe,Qo=_ct;function sht(e){return Qo(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function oQ(){return Qo(e=>Gc(e.sequence))}function bS(){const{studyId:e}=wf();return`${e}`}function rv(){const{index:e}=wf(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function _p(){const e=rv(),t=oQ();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var n$={exports:{}};n$.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",d="[object Date]",f="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",_="[object Proxy]",w="[object RegExp]",E="[object Set]",S="[object String]",x="[object Undefined]",T="[object WeakMap]",I="[object ArrayBuffer]",P="[object DataView]",k="[object Float32Array]",D="[object Float64Array]",R="[object Int8Array]",M="[object Int16Array]",$="[object Int32Array]",L="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",z="[object Uint32Array]",N=/[\\^$.*+?()[\]{}|]/g,V=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,F={};F[k]=F[D]=F[R]=F[M]=F[$]=F[L]=F[B]=F[U]=F[z]=!0,F[a]=F[l]=F[I]=F[c]=F[P]=F[d]=F[f]=F[h]=F[m]=F[g]=F[v]=F[w]=F[E]=F[S]=F[T]=!1;var H=typeof Ys=="object"&&Ys&&Ys.Object===Object&&Ys,G=typeof self=="object"&&self&&self.Object===Object&&self,Q=H||G||Function("return this")(),ie=t&&!t.nodeType&&t,se=ie&&!0&&e&&!e.nodeType&&e,ne=se&&se.exports===ie,ce=ne&&H.process,Ee=function(){try{var re=se&&se.require&&se.require("util").types;return re||ce&&ce.binding&&ce.binding("util")}catch{}}(),de=Ee&&Ee.isTypedArray;function We(re,me,Oe){switch(Oe.length){case 0:return re.call(me);case 1:return re.call(me,Oe[0]);case 2:return re.call(me,Oe[0],Oe[1]);case 3:return re.call(me,Oe[0],Oe[1],Oe[2])}return re.apply(me,Oe)}function Fe(re,me){for(var Oe=-1,Nt=Array(re);++Oe<re;)Nt[Oe]=me(Oe);return Nt}function Ne(re){return function(me){return re(me)}}function je(re,me){return re==null?void 0:re[me]}function ye(re,me){return function(Oe){return re(me(Oe))}}var ae=Array.prototype,Pe=Function.prototype,Be=Object.prototype,ft=Q["__core-js_shared__"],Se=Pe.toString,he=Be.hasOwnProperty,Ve=function(){var re=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||"");return re?"Symbol(src)_1."+re:""}(),tt=Be.toString,ge=Se.call(Object),ke=RegExp("^"+Se.call(he).replace(N,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ye=ne?Q.Buffer:void 0,Xe=Q.Symbol,xt=Q.Uint8Array;Ye&&Ye.allocUnsafe;var An=ye(Object.getPrototypeOf,Object),gr=Object.create,yr=Be.propertyIsEnumerable,kr=ae.splice,Xt=Xe?Xe.toStringTag:void 0,Dn=function(){try{var re=Je(Object,"defineProperty");return re({},"",{}),re}catch{}}(),rr=Ye?Ye.isBuffer:void 0,ir=Math.max,ao=Date.now,Oi=Je(Q,"Map"),Ui=Je(Object,"create"),Un=function(){function re(){}return function(me){if(!zp(me))return{};if(gr)return gr(me);re.prototype=me;var Oe=new re;return re.prototype=void 0,Oe}}();function Wn(re){var me=-1,Oe=re==null?0:re.length;for(this.clear();++me<Oe;){var Nt=re[me];this.set(Nt[0],Nt[1])}}function Zi(){this.__data__=Ui?Ui(null):{},this.size=0}function Ed(re){var me=this.has(re)&&delete this.__data__[re];return this.size-=me?1:0,me}function Va(re){var me=this.__data__;if(Ui){var Oe=me[re];return Oe===r?void 0:Oe}return he.call(me,re)?me[re]:void 0}function gc(re){var me=this.__data__;return Ui?me[re]!==void 0:he.call(me,re)}function mt(re,me){var Oe=this.__data__;return this.size+=this.has(re)?0:1,Oe[re]=Ui&&me===void 0?r:me,this}Wn.prototype.clear=Zi,Wn.prototype.delete=Ed,Wn.prototype.get=Va,Wn.prototype.has=gc,Wn.prototype.set=mt;function fi(re){var me=-1,Oe=re==null?0:re.length;for(this.clear();++me<Oe;){var Nt=re[me];this.set(Nt[0],Nt[1])}}function wn(){this.__data__=[],this.size=0}function $r(re){var me=this.__data__,Oe=dr(me,re);if(Oe<0)return!1;var Nt=me.length-1;return Oe==Nt?me.pop():kr.call(me,Oe,1),--this.size,!0}function ni(re){var me=this.__data__,Oe=dr(me,re);return Oe<0?void 0:me[Oe][1]}function ri(re){return dr(this.__data__,re)>-1}function ue(re,me){var Oe=this.__data__,Nt=dr(Oe,re);return Nt<0?(++this.size,Oe.push([re,me])):Oe[Nt][1]=me,this}fi.prototype.clear=wn,fi.prototype.delete=$r,fi.prototype.get=ni,fi.prototype.has=ri,fi.prototype.set=ue;function te(re){var me=-1,Oe=re==null?0:re.length;for(this.clear();++me<Oe;){var Nt=re[me];this.set(Nt[0],Nt[1])}}function pe(){this.size=0,this.__data__={hash:new Wn,map:new(Oi||fi),string:new Wn}}function Ie(re){var me=Qe(this,re).delete(re);return this.size-=me?1:0,me}function Re(re){return Qe(this,re).get(re)}function dt(re){return Qe(this,re).has(re)}function kt(re,me){var Oe=Qe(this,re),Nt=Oe.size;return Oe.set(re,me),this.size+=Oe.size==Nt?0:1,this}te.prototype.clear=pe,te.prototype.delete=Ie,te.prototype.get=Re,te.prototype.has=dt,te.prototype.set=kt;function rn(re){var me=this.__data__=new fi(re);this.size=me.size}function Gn(){this.__data__=new fi,this.size=0}function Qn(re){var me=this.__data__,Oe=me.delete(re);return this.size=me.size,Oe}function In(re){return this.__data__.get(re)}function vr(re){return this.__data__.has(re)}function zr(re,me){var Oe=this.__data__;if(Oe instanceof fi){var Nt=Oe.__data__;if(!Oi||Nt.length<n-1)return Nt.push([re,me]),this.size=++Oe.size,this;Oe=this.__data__=new te(Nt)}return Oe.set(re,me),this.size=Oe.size,this}rn.prototype.clear=Gn,rn.prototype.delete=Qn,rn.prototype.get=In,rn.prototype.has=vr,rn.prototype.set=zr;function Qt(re,me){var Oe=jp(re),Nt=!Oe&&Al(re),Yn=!Oe&&!Nt&&Bp(re),Lr=!Oe&&!Nt&&!Yn&&RP(re),si=Oe||Nt||Yn||Lr,Zn=si?Fe(re.length,String):[],oi=Zn.length;for(var gs in re)si&&(gs=="length"||Yn&&(gs=="offset"||gs=="parent")||Lr&&(gs=="buffer"||gs=="byteLength"||gs=="byteOffset")||At(gs,oi))||Zn.push(gs);return Zn}function br(re,me,Oe){(Oe!==void 0&&!vc(re[me],Oe)||Oe===void 0&&!(me in re))&&Vi(re,me,Oe)}function ii(re,me,Oe){var Nt=re[me];(!(he.call(re,me)&&vc(Nt,Oe))||Oe===void 0&&!(me in re))&&Vi(re,me,Oe)}function dr(re,me){for(var Oe=re.length;Oe--;)if(vc(re[Oe][0],me))return Oe;return-1}function Vi(re,me,Oe){me=="__proto__"&&Dn?Dn(re,me,{configurable:!0,enumerable:!0,value:Oe,writable:!0}):re[me]=Oe}var lo=ze();function hi(re){return re==null?re===void 0?x:y:Xt&&Xt in Object(re)?Ze(re):sa(re)}function Ao(re){return Il(re)&&hi(re)==a}function es(re){if(!zp(re)||Jn(re))return!1;var me=bT(re)?ke:V;return me.test(CP(re))}function ts(re){return Il(re)&&IP(re.length)&&!!F[hi(re)]}function ia(re){if(!zp(re))return Vr(re);var me=Ur(re),Oe=[];for(var Nt in re)Nt=="constructor"&&(me||!he.call(re,Nt))||Oe.push(Nt);return Oe}function Ha(re,me,Oe,Nt,Yn){re!==me&&lo(me,function(Lr,si){if(Yn||(Yn=new rn),zp(Lr))uo(re,me,si,Oe,Ha,Nt,Yn);else{var Zn=Nt?Nt(Fp(re,si),Lr,si+"",re,me,Yn):void 0;Zn===void 0&&(Zn=Lr),br(re,si,Zn)}},Av)}function uo(re,me,Oe,Nt,Yn,Lr,si){var Zn=Fp(re,Oe),oi=Fp(me,Oe),gs=si.get(oi);if(gs){br(re,Oe,gs);return}var oa=Lr?Lr(Zn,oi,Oe+"",re,me,si):void 0,Rv=oa===void 0;if(Rv){var Up=jp(oi),C_=!Up&&Bp(oi),A_=!Up&&!C_&&RP(oi);oa=oi,Up||C_||A_?jp(Zn)?oa=Zn:AP(Zn)?oa=be(Zn):C_?(Rv=!1,oa=Y(oi)):A_?(Rv=!1,oa=ee(oi)):oa=[]:n8(oi)||Al(oi)?(oa=Zn,Al(Zn)?oa=Cv(Zn):(!zp(Zn)||bT(Zn))&&(oa=ct(oi))):Rv=!1}Rv&&(si.set(oi,oa),Yn(oa,oi,Nt,Lr,si),si.delete(oi)),br(re,Oe,oa)}function yc(re,me){return vT(Qf(re,me,Ng),re+"")}var Xf=Dn?function(re,me){return Dn(re,"toString",{configurable:!0,enumerable:!1,value:Iv(me),writable:!0})}:Ng;function Y(re,me){return re.slice()}function fe(re){var me=new re.constructor(re.byteLength);return new xt(me).set(new xt(re)),me}function ee(re,me){var Oe=fe(re.buffer);return new re.constructor(Oe,re.byteOffset,re.length)}function be(re,me){var Oe=-1,Nt=re.length;for(me||(me=Array(Nt));++Oe<Nt;)me[Oe]=re[Oe];return me}function we(re,me,Oe,Nt){var Yn=!Oe;Oe||(Oe={});for(var Lr=-1,si=me.length;++Lr<si;){var Zn=me[Lr],oi=void 0;oi===void 0&&(oi=re[Zn]),Yn?Vi(Oe,Zn,oi):ii(Oe,Zn,oi)}return Oe}function ve(re){return yc(function(me,Oe){var Nt=-1,Yn=Oe.length,Lr=Yn>1?Oe[Yn-1]:void 0,si=Yn>2?Oe[2]:void 0;for(Lr=re.length>3&&typeof Lr=="function"?(Yn--,Lr):void 0,si&&Rn(Oe[0],Oe[1],si)&&(Lr=Yn<3?void 0:Lr,Yn=1),me=Object(me);++Nt<Yn;){var Zn=Oe[Nt];Zn&&re(me,Zn,Nt,Lr)}return me})}function ze(re){return function(me,Oe,Nt){for(var Yn=-1,Lr=Object(me),si=Nt(me),Zn=si.length;Zn--;){var oi=si[++Yn];if(Oe(Lr[oi],oi,Lr)===!1)break}return me}}function Qe(re,me){var Oe=re.__data__;return Lt(me)?Oe[typeof me=="string"?"string":"hash"]:Oe.map}function Je(re,me){var Oe=je(re,me);return es(Oe)?Oe:void 0}function Ze(re){var me=he.call(re,Xt),Oe=re[Xt];try{re[Xt]=void 0;var Nt=!0}catch{}var Yn=tt.call(re);return Nt&&(me?re[Xt]=Oe:delete re[Xt]),Yn}function ct(re){return typeof re.constructor=="function"&&!Ur(re)?Un(An(re)):{}}function At(re,me){var Oe=typeof re;return me=me??o,!!me&&(Oe=="number"||Oe!="symbol"&&W.test(re))&&re>-1&&re%1==0&&re<me}function Rn(re,me,Oe){if(!zp(Oe))return!1;var Nt=typeof me;return(Nt=="number"?T_(Oe)&&At(me,Oe.length):Nt=="string"&&me in Oe)?vc(Oe[me],re):!1}function Lt(re){var me=typeof re;return me=="string"||me=="number"||me=="symbol"||me=="boolean"?re!=="__proto__":re===null}function Jn(re){return!!Ve&&Ve in re}function Ur(re){var me=re&&re.constructor,Oe=typeof me=="function"&&me.prototype||Be;return re===Oe}function Vr(re){var me=[];if(re!=null)for(var Oe in Object(re))me.push(Oe);return me}function sa(re){return tt.call(re)}function Qf(re,me,Oe){return me=ir(me===void 0?re.length-1:me,0),function(){for(var Nt=arguments,Yn=-1,Lr=ir(Nt.length-me,0),si=Array(Lr);++Yn<Lr;)si[Yn]=Nt[me+Yn];Yn=-1;for(var Zn=Array(me+1);++Yn<me;)Zn[Yn]=Nt[Yn];return Zn[me]=Oe(si),We(re,this,Zn)}}function Fp(re,me){if(!(me==="constructor"&&typeof re[me]=="function")&&me!="__proto__")return re[me]}var vT=Tv(Xf);function Tv(re){var me=0,Oe=0;return function(){var Nt=ao(),Yn=s-(Nt-Oe);if(Oe=Nt,Yn>0){if(++me>=i)return arguments[0]}else me=0;return re.apply(void 0,arguments)}}function CP(re){if(re!=null){try{return Se.call(re)}catch{}try{return re+""}catch{}}return""}function vc(re,me){return re===me||re!==re&&me!==me}var Al=Ao(function(){return arguments}())?Ao:function(re){return Il(re)&&he.call(re,"callee")&&!yr.call(re,"callee")},jp=Array.isArray;function T_(re){return re!=null&&IP(re.length)&&!bT(re)}function AP(re){return Il(re)&&T_(re)}var Bp=rr||PP;function bT(re){if(!zp(re))return!1;var me=hi(re);return me==h||me==p||me==u||me==_}function IP(re){return typeof re=="number"&&re>-1&&re%1==0&&re<=o}function zp(re){var me=typeof re;return re!=null&&(me=="object"||me=="function")}function Il(re){return re!=null&&typeof re=="object"}function n8(re){if(!Il(re)||hi(re)!=v)return!1;var me=An(re);if(me===null)return!0;var Oe=he.call(me,"constructor")&&me.constructor;return typeof Oe=="function"&&Oe instanceof Oe&&Se.call(Oe)==ge}var RP=de?Ne(de):ts;function Cv(re){return we(re,Av(re))}function Av(re){return T_(re)?Qt(re):ia(re)}var kP=ve(function(re,me,Oe){Ha(re,me,Oe)});function Iv(re){return function(){return re}}function Ng(re){return re}function PP(){return!1}e.exports=kP})(n$,n$.exports);var oht=n$.exports;const aQ=bu(oht),LT="@REVISIT_COMMS",aht={minHeight:"500px",width:"100%",border:0};function lht({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=nc(),r=ed(),i=oCe(),s=A.useRef(null),o=A.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=_p(),l=md(),u=A.useCallback((c,d)=>{var f,h;(h=(f=s.current)==null?void 0:f.contentWindow)==null||h.postMessage({error:!1,type:`${LT}/${c}`,iframeId:o,message:d},"*")},[s,o]);return A.useEffect(()=>{const c=d=>{const{data:f}=d;if(typeof f=="object"&&o===f.iframeId)switch(f.type){case`${LT}/WINDOW_READY`:e.parameters&&u("STUDY_DATA",e.parameters);break;case`${LT}/READY`:s.current&&(s.current.style.height=`${f.message.documentHeight}px`);break;case`${LT}/ANSWERS`:r(t(f.message));break;case`${LT}/PROVENANCE`:r(n(f.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,l,e,u,t,n]),b.jsx("iframe",{ref:s,src:`${pc}${e.path}?trialid=${a}&id=${o}`,style:aht})}async function lQ(e){const n=await(await fetch(`${pc}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function JR({email:e,path:t}){const n=mg();return b.jsxs(Mf,{fluid:!0,my:50,maw:800,mx:"auto",children:[b.jsx(Ti,{order:2,children:b.jsx(nt,{span:!0,c:"orange",children:"404"})}),b.jsxs(nt,{children:[b.jsx(nt,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),b.jsx(Wc,{h:"lg"}),b.jsxs(af,{children:[b.jsx(af.Item,{children:b.jsx(nt,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),b.jsx(af.Item,{children:b.jsxs(nt,{children:["If you're a participant, please contact the study administrator"," ",e&&b.jsxs(b.Fragment,{children:["at"," ",b.jsxs(Qy,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const uht={maxWidth:"100%"};function cht({currentConfig:e}){const t={...uht,...e.style},[n,r]=A.useState(!0),[i,s]=A.useState(!1);return A.useEffect(()=>{async function o(){const a=await lQ(e.path);s(!!a),r(!1)}o()},[e]),n||i?b.jsx(Zy,{mx:"auto",src:`${pc}${e.path}`,style:t}):b.jsx(JR,{path:e.path})}function dht({currentConfig:e}){const[t,n]=A.useState(""),[r,i]=A.useState(!0);return A.useEffect(()=>{async function s(){const o=await lQ(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?b.jsx(fl,{text:t}):b.jsx(JR,{path:e.path})}function Zh(){return Qo(e=>e.config)}function uQ(){const{answers:e}=Qo(i=>i),t=rv(),r=`${_p()}_${t}`;return e[r]}const fht=ube($ft);var hht=fht;function pht(e,t){var n,r="",i=0,s=!0,o=0,a;function l(){return a=e.charAt(o),o++,a}for(l(),a==="-"&&(r="-",l());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,l();if(s&&i--,a===".")for(r+=".";l()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,l(),(a==="-"||a==="+")&&(r+=a,l());a>="0"&&a<="9";)r+=a,l();for(;a&&a<=" ";)l();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function mht(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function ght(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function yht(e){return e.__COMMENTS__}function vht(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var w6={EOL:hht.EOL||`
`,tryParseNumber:pht,createComment:mht,removeComment:ght,getComment:yht,forceComment:vht},bht="3.2.1";function _ht(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return Jce}else if(e.length===0)return Jce;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return Eht(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),wht.bind(null,n)}function wht(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function Jce(){}function Eht(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function qCe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}qCe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function WCe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}WCe.description="parse hexadecimal numbers prefixed with 0x";function GCe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}GCe.description="support ISO dates";var cQ={loadDsf:_ht,std:{math:qCe,hex:WCe,date:GCe}},xht=function(e,t){var n=w6,r=cQ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},l,u;function c(){s=0,o=" "}function d(M){return M==="{"||M==="}"||M==="["||M==="]"||M===","||M===":"}function f(M){var $,L=0,B=1;for($=s-1;$>0&&i[$]!==`
`;$--,L++);for(;$>0;$--)i[$]===`
`&&B++;throw new Error(M+" at line "+B+","+L+" >>>"+i.substr(s-L,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(M){return i.charAt(s+M)}function m(M){for(var $="",L=o;h();){if(o===L)return h(),M&&L==="'"&&o==="'"&&$.length===0?(h(),g()):$;if(o==="\\")if(h(),o==="u"){for(var B=0,U=0;U<4;U++){h();var z=o.charCodeAt(0),N;o>="0"&&o<="9"?N=z-48:o>="a"&&o<="f"?N=z-97+10:o>="A"&&o<="F"?N=z-65+10:f("Bad \\u char "+o),B=B*16+N}$+=String.fromCharCode(B)}else if(typeof a[o]=="string")$+=a[o];else break;else o===`
`||o==="\r"?f("Bad string containing newline"):$+=o}f("Bad string")}function g(){for(var M="",$=0,L=0;;){var B=p(-L-5);if(!B||B===`
`)break;L++}function U(){for(var z=L;o&&o<=" "&&o!==`
`&&z-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)f("Bad multiline string");else if(o==="'"){if($++,h(),$===3)return M.slice(-1)===`
`&&(M=M.slice(0,-1)),M;continue}else for(;$>0;)M+="'",$--;o===`
`?(M+=`
`,h(),U()):(o!=="\r"&&(M+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var M="",$=s,L=-1;;){if(o===":")return M?L>=0&&L!==M.length&&(s=$+L,f("Found whitespace in your key name (use quotes to include)")):f("Found ':' but no key name (for an empty key name use quotes)"),M;o<=" "?o?L<0&&(L=M.length):f("Found EOF while looking for a key name (check your syntax)"):d(o)?f("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):M+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function _(){var M=o;for(d(o)&&f("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var $=o==="\r"||o===`
`||o==="";if($||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var L=M[0];switch(L){case"f":if(M.trim()==="false")return!1;break;case"n":if(M.trim()==="null")return null;break;case"t":if(M.trim()==="true")return!0;break;default:if(L==="-"||L>="0"&&L<="9"){var B=n.tryParseNumber(M);if(B!==void 0)return B}}if($){M=M.trim();var U=u(M);return U!==void 0?U:M}}M+=o}}function w(M,$){var L;for(M--,L=s-2;L>M&&i[L]<=" "&&i[L]!==`
`;L--);i[L]===`
`&&L--,i[L]==="\r"&&L--;var B=i.substr(M,L-M+1);for(L=0;L<B.length;L++)if(B[L]>" "){var U=B.indexOf(`
`);if(U>=0){var z=[B.substr(0,U),B.substr(U+1)];return $&&z[0].trim().length===0&&z.shift(),z}else return[B]}return[]}function E(M){function $(B,U){var z,N,V,W;switch(typeof B){case"string":B.indexOf(U)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(z=0,V=B.length;z<V;z++)W=$(B[z],U)||W;else for(N in B)Object.prototype.hasOwnProperty.call(B,N)&&(W=$(B[N],U)||W)}return W}function L(B){var U=$(M,B);return U?"found '"+B+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return L("}")||L("]")}function S(){var M=[],$,L,B;try{if(l&&($=n.createComment(M,{a:[]})),h(),L=s,v(),$&&(B=w(L,!0).join(`
`)),o==="]")return h(),$&&($.e=[B]),M;for(;o;){if(M.push(T()),L=s,v(),o===","&&(h(),L=s,v()),$){var U=w(L);$.a.push([B||"",U[0]||""]),B=U[1]}if(o==="]")return h(),$&&($.a[$.a.length-1][1]+=B||""),M;v()}f("End of input while parsing an array (missing ']')")}catch(z){throw z.hint=z.hint||E(M),z}}function x(M){var $="",L={},B,U,z;try{if(l&&(B=n.createComment(L,{c:{},o:[]})),M?U=1:(h(),U=s),v(),B&&(z=w(U,!0).join(`
`)),o==="}"&&!M)return B&&(B.e=[z]),h(),L;for(;o;){if($=y(),v(),o!==":"&&f("Expected ':' instead of '"+o+"'"),h(),L[$]=T(),U=s,v(),o===","&&(h(),U=s,v()),B){var N=w(U);B.c[$]=[z||"",N[0]||""],z=N[1],B.o.push($)}if(o==="}"&&!M)return h(),B&&(B.c[$][1]+=z||""),L;v()}if(M)return L;f("End of input while parsing an object (missing '}')")}catch(V){throw V.hint=V.hint||E(L),V}}function T(){switch(v(),o){case"{":return x();case"[":return S();case"'":case'"':return m(!0);default:return _()}}function I(M,$){var L=s;if(v(),o&&f("Syntax error, found trailing characters"),l){var B=$.join(`
`),U=w(L).join(`
`);if(U||B){var z=n.createComment(M,n.getComment(M));z.r=[B,U]}}return M}function P(){v();var M=l?w(1):null;switch(o){case"{":return I(x(),M);case"[":return I(S(),M);default:return I(T(),M)}}function k(){v();var M=l?w(1):null;switch(o){case"{":return I(x(),M);case"[":return I(S(),M)}try{return I(x(!0),M)}catch($){c();try{return I(T(),M)}catch{throw $}}}if(typeof e!="string")throw new Error("source is not a string");var D=null,R=!0;return t&&typeof t=="object"&&(l=t.keepWsc,D=t.dsf,R=t.legacyRoot!==!1),u=r.loadDsf(D,"parse"),i=e,c(),R?k():P()},Sht=function(e,t){var n=w6,r=cQ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,l=!1,u=!1,c=!1,d=0,f=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,d=t.condense||0,l=t.bracesSameLine,u=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?f=0:f=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var _=v[y];g[_].push(i[_][0].length,i[_][1].length)}}var w,E="---\u2028--\uFEFF-",S=new RegExp('[\\\\\\"\0-'+E+"]","g"),x=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),T=new RegExp("'''|^[\\s]+$|[\0-"+(f===2?"	":"\b")+"\v\f-"+E+"]","g"),I=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),P={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},k=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,D="",R=0;function M(W,F){return R+=W[0].length+W[1].length-W[2]-W[3],W[0]+F+W[1]}function $(W){return W.replace(S,function(F){var H=P[F];return typeof H=="string"?M(g.esc,H):M(g.uni,("0000"+F.charCodeAt(0).toString(16)).slice(-4))})}function L(W,F,H,G){return W?(x.lastIndex=0,I.lastIndex=0,c||H||x.test(W)||n.tryParseNumber(W,!0)!==void 0||I.test(W)?(S.lastIndex=0,T.lastIndex=0,S.test(W)?!T.test(W)&&!G&&f?B(W,F):M(g.qstr,$(W)):M(g.qstr,W)):M(g.str,W)):M(g.qstr,"")}function B(W,F){var H,G=W.replace(/\r/g,"").split(`
`);if(F+=o,G.length===1)return M(g.mstr,G[0]);var Q=s+F+g.mstr[0];for(H=0;H<G.length;H++)Q+=s,G[H]&&(Q+=F+G[H]);return Q+s+F+g.mstr[1]}function U(W){return W?u||k.test(W)?(S.lastIndex=0,M(g.qkey,S.test(W)?$(W):W)):M(g.key,W):'""'}function z(W,F,H,G){function Q(Xt){return Xt&&Xt[Xt[0]==="\r"?1:0]===`
`}function ie(Xt){return Xt&&!Q(Xt)}function se(Xt,Dn,rr){if(!Xt)return"";Xt=n.forceComment(Xt);var ir,ao=Xt.length;for(ir=0;ir<ao&&Xt[ir]<=" ";ir++);return rr&&ir>0&&(Xt=Xt.substr(ir)),ir<ao?Dn+M(g.rem,Xt):Xt}var ne=w(W);if(ne!==void 0)return M(g.dsf,ne);switch(typeof W){case"string":return L(W,D,F,G);case"number":return isFinite(W)?M(g.num,String(W)):M(g.lit,"null");case"boolean":return M(g.lit,String(W));case"object":if(!W)return M(g.lit,"null");var ce;a&&(ce=n.getComment(W));var Ee=Object.prototype.toString.apply(W)==="[object Array]",de=D;D+=o;var We=s+de,Fe=s+D,Ne=H||l?"":We,je=[],ye,ae=d?[]:null,Pe=c,Be=f,ft=h?"":g.com[0],Se=0,he,Ve,tt,ge,ke,Ye,Xe,xt,An;if(Ee){for(he=0,Ve=W.length;he<Ve;he++){if(ye=he<Ve-1,ce?(Ye=ce.a[he]||[],Xe=ie(Ye[1]),je.push(se(Ye[0],`
`)+Fe),ae&&(Ye[0]||Ye[1]||Xe)&&(ae=null)):je.push(Fe),R=0,ge=W[he],je.push(z(ge,ce?Xe:!1,!0)+(ye?h:"")),ae){switch(typeof ge){case"string":R=0,c=!0,f=0,ae.push(z(ge,!1,!0)+(ye?g.com[0]:"")),c=Pe,f=Be;break;case"object":if(ge){ae=null;break}default:ae.push(je[je.length-1]+(ye?ft:""));break}ye&&(R+=g.com[0].length-g.com[2]),Se+=R}ce&&Ye[1]&&je.push(se(Ye[1],Xe?" ":`
`,Xe))}Ve===0?ce&&ce.e&&je.push(se(ce.e[0],`
`)+We):je.push(We),je.length===0?xt=M(g.arr,""):(xt=Ne+M(g.arr,je.join("")),ae&&(An=ae.join(" "),An.length-Se<=d&&(xt=M(g.arr,An))))}else{var gr=ce?ce.o.slice():[],yr=[];for(tt in W)Object.prototype.hasOwnProperty.call(W,tt)&&gr.indexOf(tt)<0&&yr.push(tt);m&&yr.sort();var kr=gr.concat(yr);for(he=0,Ve=kr.length;he<Ve;he++)if(ye=he<Ve-1,tt=kr[he],ce?(Ye=ce.c[tt]||[],Xe=ie(Ye[1]),je.push(se(Ye[0],`
`)+Fe),ae&&(Ye[0]||Ye[1]||Xe)&&(ae=null)):je.push(Fe),R=0,ge=W[tt],ke=z(ge,ce&&Xe),je.push(U(tt)+g.col[0]+(Q(ke)?"":" ")+ke+(ye?h:"")),ce&&Ye[1]&&je.push(se(Ye[1],Xe?" ":`
`,Xe)),ae){switch(typeof ge){case"string":R=0,c=!0,f=0,ke=z(ge,!1),c=Pe,f=Be,ae.push(U(tt)+g.col[0]+" "+ke+(ye?g.com[0]:""));break;case"object":if(ge){ae=null;break}default:ae.push(je[je.length-1]+(ye?ft:""));break}R+=g.col[0].length-g.col[2],ye&&(R+=g.com[0].length-g.com[2]),Se+=R}Ve===0?ce&&ce.e&&je.push(se(ce.e[0],`
`)+We):je.push(We),je.length===0?xt=M(g.obj,""):(xt=Ne+M(g.obj,je.join("")),ae&&(An=ae.join(" "),An.length-Se<=d&&(xt=M(g.obj,An))))}return D=de,xt}}w=r.loadDsf(p,"stringify");var N="",V=a?V=(n.getComment(e)||{}).r:null;return V&&V[0]&&(N=V[0]+`
`),N+=z(e,null,!0,!0),V&&(N+=V[1]||""),N},aE=w6;function q2(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function dV(e,t){if(!(e===null||typeof e!="object")){var n=aE.getComment(e);n&&aE.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Zce(o.a,r,n.a[r],dV(e[r]))&&(s=!0);!s&&n.e&&(o.e=q2(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,l=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(l).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=l,o.o=a,r=0,i=a.length;r<i;r++){var u=a[r];Zce(o.s,u,n.c[u],dV(e[u]))&&(s=!0)}!s&&n.e&&(o.e=q2(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=q2(n.r[0],n.r[1])),s?o:void 0}}function Tht(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function Cht(e,t){var n=[];if(fV(e,t,n,[]),n.length>0){var r=r$(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+Tht(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),r$(t,r,1)}}function Zce(e,t,n,r){var i=q2(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function W2(e,t){var n=q2(t.b,t.a);return n.path=e,n}function G2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(W2(s,o)),G2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var l=n.slice().concat([a]),u=e.s[a];u&&(t.push(W2(l,u)),G2(u.x,t,l))});e.e&&t.push(W2(n,e.e))}}function fV(e,t,n,r){if(e){if(t===null||typeof t!="object"){G2(e,n,r);return}var i,s=aE.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var l=e.a[a];if(l){var u=r.slice().concat([i]);i<t.length?(s.a[i]=[l.b,l.a],fV(l.x,t[i],n,u)):(n.push(W2(u,l)),G2(l.x,n,u))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var d=r.slice().concat([c]),f=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),f&&(s.c[c]=[f.b,f.a],fV(f.x,t[c],n,d))):f&&(n.push(W2(d,f)),G2(f.x,n,d))}),e.e&&(s.e=[e.e.b,e.e.a])}}function r$(e,t,n){var r=aE.createComment(e,aE.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=aE.forceComment(t)),r.r[n]||""}var Aht={extract:function(e){return dV(e,!0)},merge:Cht,header:function(e,t){return r$(e,t,0)},footer:function(e,t){return r$(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var ede=w6,Iht=bht,tde=xht,nde=Sht,Rht=Aht,kht=cQ,dQ={parse:tde,stringify:nde,endOfLine:function(){return ede.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(ede.EOL=e)},version:Iht,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,tde(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,nde(e,t)}},comments:Rht,dsf:kht.std},hV={exports:{}},YCe={},uf={},XE={},ZR={},qn={},aI={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,w)=>`${_}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,w)=>(w instanceof n&&(_[w.str]=(_[w.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const _=[y[0]];let w=0;for(;w<v.length;)a(_,v[w]),_.push(y[++w]);return new r(_)}e._=i;const s=new r("+");function o(y,...v){const _=[h(y[0])];let w=0;for(;w<v.length;)_.push(s),a(_,v[w]),_.push(s,h(y[++w]));return l(_),new r(_)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(d(v))}e.addCodeArg=a;function l(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const _=u(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function u(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function d(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function f(y){return new r(h(y))}e.stringify=f;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(aI);var pV={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=aI;class n extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var r;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:u,parent:c}={}){this._names={},this._prefixes=u,this._parent=c}toName(u){return u instanceof t.Name?u:this.name(u)}name(u){return new t.Name(this._newName(u))}_newName(u){const c=this._names[u]||this._nameGroup(u);return`${u}${c.index++}`}_nameGroup(u){var c,d;if(!((d=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||d===void 0)&&d.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}e.Scope=i;class s extends t.Name{constructor(u,c){super(c),this.prefix=u}setValue(u,{property:c,itemIndex:d}){this.value=u,this.scopePath=(0,t._)`.${new t.Name(c)}[${d}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?o:t.nil}}get(){return this._scope}name(u){return new s(u,this._newName(u))}value(u,c){var d;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const f=this.toName(u),{prefix:h}=f,p=(d=c.key)!==null&&d!==void 0?d:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,f);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,f.setValue(c,{property:h,itemIndex:y}),f}getValue(u,c){const d=this._values[u];if(d)return d.get(c)}scopeRefs(u,c=this._values){return this._reduceValues(c,d=>{if(d.scopePath===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return(0,t._)`${u}${d.scopePath}`})}scopeCode(u=this._values,c,d){return this._reduceValues(u,f=>{if(f.value===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return f.value.code},c,d)}_reduceValues(u,c,d={},f){let h=t.nil;for(const p in u){const m=u[p];if(!m)continue;const g=d[p]=d[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${y} = ${v};${this.opts._n}`}else if(v=f==null?void 0:f(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(pV);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=aI,n=pV;var r=aI;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=pV;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(H,G){return this}}class o extends s{constructor(H,G,Q){super(),this.varKind=H,this.name=G,this.rhs=Q}render({es5:H,_n:G}){const Q=H?n.varKinds.var:this.varKind,ie=this.rhs===void 0?"":` = ${this.rhs}`;return`${Q} ${this.name}${ie};`+G}optimizeNames(H,G){if(H[this.name.str])return this.rhs&&(this.rhs=M(this.rhs,H,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(H,G,Q){super(),this.lhs=H,this.rhs=G,this.sideEffects=Q}render({_n:H}){return`${this.lhs} = ${this.rhs};`+H}optimizeNames(H,G){if(!(this.lhs instanceof t.Name&&!H[this.lhs.str]&&!this.sideEffects))return this.rhs=M(this.rhs,H,G),this}get names(){const H=this.lhs instanceof t.Name?{}:{...this.lhs.names};return R(H,this.rhs)}}class l extends a{constructor(H,G,Q,ie){super(H,Q,ie),this.op=G}render({_n:H}){return`${this.lhs} ${this.op}= ${this.rhs};`+H}}class u extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`${this.label}:`+H}}class c extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`break${this.label?` ${this.label}`:""};`+H}}class d extends s{constructor(H){super(),this.error=H}render({_n:H}){return`throw ${this.error};`+H}get names(){return this.error.names}}class f extends s{constructor(H){super(),this.code=H}render({_n:H}){return`${this.code};`+H}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(H,G){return this.code=M(this.code,H,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(H=[]){super(),this.nodes=H}render(H){return this.nodes.reduce((G,Q)=>G+Q.render(H),"")}optimizeNodes(){const{nodes:H}=this;let G=H.length;for(;G--;){const Q=H[G].optimizeNodes();Array.isArray(Q)?H.splice(G,1,...Q):Q?H[G]=Q:H.splice(G,1)}return H.length>0?this:void 0}optimizeNames(H,G){const{nodes:Q}=this;let ie=Q.length;for(;ie--;){const se=Q[ie];se.optimizeNames(H,G)||($(H,se.names),Q.splice(ie,1))}return Q.length>0?this:void 0}get names(){return this.nodes.reduce((H,G)=>D(H,G.names),{})}}class p extends h{render(H){return"{"+H._n+super.render(H)+"}"+H._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(H,G){super(G),this.condition=H}render(H){let G=`if(${this.condition})`+super.render(H);return this.else&&(G+="else "+this.else.render(H)),G}optimizeNodes(){super.optimizeNodes();const H=this.condition;if(H===!0)return this.nodes;let G=this.else;if(G){const Q=G.optimizeNodes();G=this.else=Array.isArray(Q)?new g(Q):Q}if(G)return H===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(L(H),G instanceof y?[G]:G.nodes);if(!(H===!1||!this.nodes.length))return this}optimizeNames(H,G){var Q;if(this.else=(Q=this.else)===null||Q===void 0?void 0:Q.optimizeNames(H,G),!!(super.optimizeNames(H,G)||this.else))return this.condition=M(this.condition,H,G),this}get names(){const H=super.names;return R(H,this.condition),this.else&&D(H,this.else.names),H}}y.kind="if";class v extends p{}v.kind="for";class _ extends v{constructor(H){super(),this.iteration=H}render(H){return`for(${this.iteration})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iteration=M(this.iteration,H,G),this}get names(){return D(super.names,this.iteration.names)}}class w extends v{constructor(H,G,Q,ie){super(),this.varKind=H,this.name=G,this.from=Q,this.to=ie}render(H){const G=H.es5?n.varKinds.var:this.varKind,{name:Q,from:ie,to:se}=this;return`for(${G} ${Q}=${ie}; ${Q}<${se}; ${Q}++)`+super.render(H)}get names(){const H=R(super.names,this.from);return R(H,this.to)}}class E extends v{constructor(H,G,Q,ie){super(),this.loop=H,this.varKind=G,this.name=Q,this.iterable=ie}render(H){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iterable=M(this.iterable,H,G),this}get names(){return D(super.names,this.iterable.names)}}class S extends p{constructor(H,G,Q){super(),this.name=H,this.args=G,this.async=Q}render(H){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(H)}}S.kind="func";class x extends h{render(H){return"return "+super.render(H)}}x.kind="return";class T extends p{render(H){let G="try"+super.render(H);return this.catch&&(G+=this.catch.render(H)),this.finally&&(G+=this.finally.render(H)),G}optimizeNodes(){var H,G;return super.optimizeNodes(),(H=this.catch)===null||H===void 0||H.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(H,G){var Q,ie;return super.optimizeNames(H,G),(Q=this.catch)===null||Q===void 0||Q.optimizeNames(H,G),(ie=this.finally)===null||ie===void 0||ie.optimizeNames(H,G),this}get names(){const H=super.names;return this.catch&&D(H,this.catch.names),this.finally&&D(H,this.finally.names),H}}class I extends p{constructor(H){super(),this.error=H}render(H){return`catch(${this.error})`+super.render(H)}}I.kind="catch";class P extends p{render(H){return"finally"+super.render(H)}}P.kind="finally";class k{constructor(H,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=H,this._scope=new n.Scope({parent:H}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(H){return this._scope.name(H)}scopeName(H){return this._extScope.name(H)}scopeValue(H,G){const Q=this._extScope.value(H,G);return(this._values[Q.prefix]||(this._values[Q.prefix]=new Set)).add(Q),Q}getScopeValue(H,G){return this._extScope.getValue(H,G)}scopeRefs(H){return this._extScope.scopeRefs(H,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(H,G,Q,ie){const se=this._scope.toName(G);return Q!==void 0&&ie&&(this._constants[se.str]=Q),this._leafNode(new o(H,se,Q)),se}const(H,G,Q){return this._def(n.varKinds.const,H,G,Q)}let(H,G,Q){return this._def(n.varKinds.let,H,G,Q)}var(H,G,Q){return this._def(n.varKinds.var,H,G,Q)}assign(H,G,Q){return this._leafNode(new a(H,G,Q))}add(H,G){return this._leafNode(new l(H,e.operators.ADD,G))}code(H){return typeof H=="function"?H():H!==t.nil&&this._leafNode(new f(H)),this}object(...H){const G=["{"];for(const[Q,ie]of H)G.length>1&&G.push(","),G.push(Q),(Q!==ie||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,ie));return G.push("}"),new t._Code(G)}if(H,G,Q){if(this._blockNode(new y(H)),G&&Q)this.code(G).else().code(Q).endIf();else if(G)this.code(G).endIf();else if(Q)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(H){return this._elseNode(new y(H))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(H,G){return this._blockNode(H),G&&this.code(G).endFor(),this}for(H,G){return this._for(new _(H),G)}forRange(H,G,Q,ie,se=this.opts.es5?n.varKinds.var:n.varKinds.let){const ne=this._scope.toName(H);return this._for(new w(se,ne,G,Q),()=>ie(ne))}forOf(H,G,Q,ie=n.varKinds.const){const se=this._scope.toName(H);if(this.opts.es5){const ne=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${ne}.length`,ce=>{this.var(se,(0,t._)`${ne}[${ce}]`),Q(se)})}return this._for(new E("of",ie,se,G),()=>Q(se))}forIn(H,G,Q,ie=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(H,(0,t._)`Object.keys(${G})`,Q);const se=this._scope.toName(H);return this._for(new E("in",ie,se,G),()=>Q(se))}endFor(){return this._endBlockNode(v)}label(H){return this._leafNode(new u(H))}break(H){return this._leafNode(new c(H))}return(H){const G=new x;if(this._blockNode(G),this.code(H),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(x)}try(H,G,Q){if(!G&&!Q)throw new Error('CodeGen: "try" without "catch" and "finally"');const ie=new T;if(this._blockNode(ie),this.code(H),G){const se=this.name("e");this._currNode=ie.catch=new I(se),G(se)}return Q&&(this._currNode=ie.finally=new P,this.code(Q)),this._endBlockNode(I,P)}throw(H){return this._leafNode(new d(H))}block(H,G){return this._blockStarts.push(this._nodes.length),H&&this.code(H).endBlock(G),this}endBlock(H){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const Q=this._nodes.length-G;if(Q<0||H!==void 0&&Q!==H)throw new Error(`CodeGen: wrong number of nodes: ${Q} vs ${H} expected`);return this._nodes.length=G,this}func(H,G=t.nil,Q,ie){return this._blockNode(new S(H,G,Q)),ie&&this.code(ie).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(H=1){for(;H-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(H){return this._currNode.nodes.push(H),this}_blockNode(H){this._currNode.nodes.push(H),this._nodes.push(H)}_endBlockNode(H,G){const Q=this._currNode;if(Q instanceof H||G&&Q instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${H.kind}/${G.kind}`:H.kind}"`)}_elseNode(H){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=H,this}get _root(){return this._nodes[0]}get _currNode(){const H=this._nodes;return H[H.length-1]}set _currNode(H){const G=this._nodes;G[G.length-1]=H}}e.CodeGen=k;function D(F,H){for(const G in H)F[G]=(F[G]||0)+(H[G]||0);return F}function R(F,H){return H instanceof t._CodeOrName?D(F,H.names):F}function M(F,H,G){if(F instanceof t.Name)return Q(F);if(!ie(F))return F;return new t._Code(F._items.reduce((se,ne)=>(ne instanceof t.Name&&(ne=Q(ne)),ne instanceof t._Code?se.push(...ne._items):se.push(ne),se),[]));function Q(se){const ne=G[se.str];return ne===void 0||H[se.str]!==1?se:(delete H[se.str],ne)}function ie(se){return se instanceof t._Code&&se._items.some(ne=>ne instanceof t.Name&&H[ne.str]===1&&G[ne.str]!==void 0)}}function $(F,H){for(const G in H)F[G]=(F[G]||0)-(H[G]||0)}function L(F){return typeof F=="boolean"||typeof F=="number"||F===null?!F:(0,t._)`!${W(F)}`}e.not=L;const B=V(e.operators.AND);function U(...F){return F.reduce(B)}e.and=U;const z=V(e.operators.OR);function N(...F){return F.reduce(z)}e.or=N;function V(F){return(H,G)=>H===t.nil?G:G===t.nil?H:(0,t._)`${W(H)} ${F} ${W(G)}`}function W(F){return F instanceof t.Name?F:(0,t._)`(${F})`}})(qn);var Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.checkStrictMode=Ct.getErrorPath=Ct.Type=Ct.useFunc=Ct.setEvaluated=Ct.evaluatedPropsToName=Ct.mergeEvaluated=Ct.eachItem=Ct.unescapeJsonPointer=Ct.escapeJsonPointer=Ct.escapeFragment=Ct.unescapeFragment=Ct.schemaRefOrVal=Ct.schemaHasRulesButRef=Ct.schemaHasRules=Ct.checkUnknownRules=Ct.alwaysValidSchema=Ct.toHash=void 0;const ui=qn,Pht=aI;function Nht(e){const t={};for(const n of e)t[n]=!0;return t}Ct.toHash=Nht;function Oht(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(KCe(e,t),!XCe(t,e.self.RULES.all))}Ct.alwaysValidSchema=Oht;function KCe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||ZCe(e,`unknown keyword: "${s}"`)}Ct.checkUnknownRules=KCe;function XCe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}Ct.schemaHasRules=XCe;function Dht(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}Ct.schemaHasRulesButRef=Dht;function Mht({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,ui._)`${n}`}return(0,ui._)`${e}${t}${(0,ui.getProperty)(r)}`}Ct.schemaRefOrVal=Mht;function $ht(e){return QCe(decodeURIComponent(e))}Ct.unescapeFragment=$ht;function Lht(e){return encodeURIComponent(fQ(e))}Ct.escapeFragment=Lht;function fQ(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}Ct.escapeJsonPointer=fQ;function QCe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Ct.unescapeJsonPointer=QCe;function Fht(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}Ct.eachItem=Fht;function rde({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const l=o===void 0?s:o instanceof ui.Name?(s instanceof ui.Name?e(i,s,o):t(i,s,o),o):s instanceof ui.Name?(t(i,o,s),s):n(s,o);return a===ui.Name&&!(l instanceof ui.Name)?r(i,l):l}}Ct.mergeEvaluated={props:rde({mergeNames:(e,t,n)=>e.if((0,ui._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,ui._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,ui._)`${n} || {}`).code((0,ui._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,ui._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,ui._)`${n} || {}`),hQ(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:JCe}),items:rde({mergeNames:(e,t,n)=>e.if((0,ui._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,ui._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,ui._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,ui._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function JCe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,ui._)`{}`);return t!==void 0&&hQ(e,n,t),n}Ct.evaluatedPropsToName=JCe;function hQ(e,t,n){Object.keys(n).forEach(r=>e.assign((0,ui._)`${t}${(0,ui.getProperty)(r)}`,!0))}Ct.setEvaluated=hQ;const ide={};function jht(e,t){return e.scopeValue("func",{ref:t,code:ide[t.code]||(ide[t.code]=new Pht._Code(t.code))})}Ct.useFunc=jht;var mV;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(mV||(Ct.Type=mV={}));function Bht(e,t,n){if(e instanceof ui.Name){const r=t===mV.Num;return n?r?(0,ui._)`"[" + ${e} + "]"`:(0,ui._)`"['" + ${e} + "']"`:r?(0,ui._)`"/" + ${e}`:(0,ui._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,ui.getProperty)(e).toString():"/"+fQ(e)}Ct.getErrorPath=Bht;function ZCe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}Ct.checkStrictMode=ZCe;var wp={};Object.defineProperty(wp,"__esModule",{value:!0});const da=qn,zht={data:new da.Name("data"),valCxt:new da.Name("valCxt"),instancePath:new da.Name("instancePath"),parentData:new da.Name("parentData"),parentDataProperty:new da.Name("parentDataProperty"),rootData:new da.Name("rootData"),dynamicAnchors:new da.Name("dynamicAnchors"),vErrors:new da.Name("vErrors"),errors:new da.Name("errors"),this:new da.Name("this"),self:new da.Name("self"),scope:new da.Name("scope"),json:new da.Name("json"),jsonPos:new da.Name("jsonPos"),jsonLen:new da.Name("jsonLen"),jsonPart:new da.Name("jsonPart")};wp.default=zht;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=qn,n=Ct,r=wp;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,_){const{it:w}=g,{gen:E,compositeRule:S,allErrors:x}=w,T=d(g,y,v);_??(S||x)?l(E,T):u(w,(0,t._)`[${T}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:_}=g,{gen:w,compositeRule:E,allErrors:S}=_,x=d(g,y,v);l(w,x),E||S||u(_,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:_,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",w,r.default.errors,x=>{g.const(S,(0,t._)`${r.default.vErrors}[${x}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,_))})}e.extendErrors=a;function l(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function u(g,y){const{gen:v,validateName:_,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${_}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function d(g,y,v){const{createErrors:_}=g.it;return _===!1?(0,t._)`{}`:f(g,y,v)}function f(g,y,v={}){const{gen:_,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),_.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let w=_?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},_){const{keyword:w,data:E,schemaValue:S,it:x}=g,{opts:T,propertyName:I,topSchemaRef:P,schemaPath:k}=x;_.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),T.messages&&_.push([c.message,typeof v=="function"?v(g):v]),T.verbose&&_.push([c.schema,S],[c.parentSchema,(0,t._)`${P}${k}`],[r.default.data,E]),I&&_.push([c.propertyName,I])}})(ZR);Object.defineProperty(XE,"__esModule",{value:!0});XE.boolOrEmptySchema=XE.topBoolOrEmptySchema=void 0;const Uht=ZR,Vht=qn,Hht=wp,qht={message:"boolean schema is false"};function Wht(e){const{gen:t,schema:n,validateName:r}=e;n===!1?e2e(e,!1):typeof n=="object"&&n.$async===!0?t.return(Hht.default.data):(t.assign((0,Vht._)`${r}.errors`,null),t.return(!0))}XE.topBoolOrEmptySchema=Wht;function Ght(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),e2e(e)):n.var(t,!0)}XE.boolOrEmptySchema=Ght;function e2e(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Uht.reportError)(i,qht,void 0,t)}var Us={},ab={};Object.defineProperty(ab,"__esModule",{value:!0});ab.getRules=ab.isJSONType=void 0;const Yht=["string","number","integer","boolean","null","object","array"],Kht=new Set(Yht);function Xht(e){return typeof e=="string"&&Kht.has(e)}ab.isJSONType=Xht;function Qht(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}ab.getRules=Qht;var Cm={};Object.defineProperty(Cm,"__esModule",{value:!0});Cm.shouldUseRule=Cm.shouldUseGroup=Cm.schemaHasRulesForType=void 0;function Jht({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&t2e(e,r)}Cm.schemaHasRulesForType=Jht;function t2e(e,t){return t.rules.some(n=>n2e(e,n))}Cm.shouldUseGroup=t2e;function n2e(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Cm.shouldUseRule=n2e;Object.defineProperty(Us,"__esModule",{value:!0});Us.reportTypeError=Us.checkDataTypes=Us.checkDataType=Us.coerceAndCheckDataType=Us.getJSONTypes=Us.getSchemaTypes=Us.DataType=void 0;const Zht=ab,ept=Cm,tpt=ZR,Mn=qn,r2e=Ct;var lE;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(lE||(Us.DataType=lE={}));function npt(e){const t=i2e(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Us.getSchemaTypes=npt;function i2e(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Zht.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Us.getJSONTypes=i2e;function rpt(e,t){const{gen:n,data:r,opts:i}=e,s=ipt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,ept.schemaHasRulesForType)(e,t[0]));if(o){const a=pQ(t,r,i.strictNumbers,lE.Wrong);n.if(a,()=>{s.length?spt(e,t,s):mQ(e)})}return o}Us.coerceAndCheckDataType=rpt;const s2e=new Set(["string","number","integer","boolean","null"]);function ipt(e,t){return t?e.filter(n=>s2e.has(n)||t==="array"&&n==="array"):[]}function spt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,Mn._)`typeof ${i}`),a=r.let("coerced",(0,Mn._)`undefined`);s.coerceTypes==="array"&&r.if((0,Mn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,Mn._)`${i}[0]`).assign(o,(0,Mn._)`typeof ${i}`).if(pQ(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,Mn._)`${a} !== undefined`);for(const u of n)(s2e.has(u)||u==="array"&&s.coerceTypes==="array")&&l(u);r.else(),mQ(e),r.endIf(),r.if((0,Mn._)`${a} !== undefined`,()=>{r.assign(i,a),opt(e,a)});function l(u){switch(u){case"string":r.elseIf((0,Mn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Mn._)`"" + ${i}`).elseIf((0,Mn._)`${i} === null`).assign(a,(0,Mn._)`""`);return;case"number":r.elseIf((0,Mn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,Mn._)`+${i}`);return;case"integer":r.elseIf((0,Mn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,Mn._)`+${i}`);return;case"boolean":r.elseIf((0,Mn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,Mn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,Mn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,Mn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,Mn._)`[${i}]`)}}}function opt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,Mn._)`${t} !== undefined`,()=>e.assign((0,Mn._)`${t}[${n}]`,r))}function gV(e,t,n,r=lE.Correct){const i=r===lE.Correct?Mn.operators.EQ:Mn.operators.NEQ;let s;switch(e){case"null":return(0,Mn._)`${t} ${i} null`;case"array":s=(0,Mn._)`Array.isArray(${t})`;break;case"object":s=(0,Mn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,Mn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,Mn._)`typeof ${t} ${i} ${e}`}return r===lE.Correct?s:(0,Mn.not)(s);function o(a=Mn.nil){return(0,Mn.and)((0,Mn._)`typeof ${t} == "number"`,a,n?(0,Mn._)`isFinite(${t})`:Mn.nil)}}Us.checkDataType=gV;function pQ(e,t,n,r){if(e.length===1)return gV(e[0],t,n,r);let i;const s=(0,r2e.toHash)(e);if(s.array&&s.object){const o=(0,Mn._)`typeof ${t} != "object"`;i=s.null?o:(0,Mn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=Mn.nil;s.number&&delete s.integer;for(const o in s)i=(0,Mn.and)(i,gV(o,t,n,r));return i}Us.checkDataTypes=pQ;const apt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,Mn._)`{type: ${e}}`:(0,Mn._)`{type: ${t}}`};function mQ(e){const t=lpt(e);(0,tpt.reportError)(t,apt)}Us.reportTypeError=mQ;function lpt(e){const{gen:t,data:n,schema:r}=e,i=(0,r2e.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var E6={};Object.defineProperty(E6,"__esModule",{value:!0});E6.assignDefaults=void 0;const L_=qn,upt=Ct;function cpt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)sde(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>sde(e,s,i.default))}E6.assignDefaults=cpt;function sde(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,L_._)`${s}${(0,L_.getProperty)(t)}`;if(i){(0,upt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let l=(0,L_._)`${a} === undefined`;o.useDefaults==="empty"&&(l=(0,L_._)`${l} || ${a} === null || ${a} === ""`),r.if(l,(0,L_._)`${a} = ${(0,L_.stringify)(n)}`)}var Ph={},Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.validateUnion=Vn.validateArray=Vn.usePattern=Vn.callValidateCode=Vn.schemaProperties=Vn.allSchemaProperties=Vn.noPropertyInData=Vn.propertyInData=Vn.isOwnProperty=Vn.hasPropFunc=Vn.reportMissingProp=Vn.checkMissingProp=Vn.checkReportMissingProp=void 0;const Ci=qn,gQ=Ct,Lg=wp,dpt=Ct;function fpt(e,t){const{gen:n,data:r,it:i}=e;n.if(vQ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Ci._)`${t}`},!0),e.error()})}Vn.checkReportMissingProp=fpt;function hpt({gen:e,data:t,it:{opts:n}},r,i){return(0,Ci.or)(...r.map(s=>(0,Ci.and)(vQ(e,t,s,n.ownProperties),(0,Ci._)`${i} = ${s}`)))}Vn.checkMissingProp=hpt;function ppt(e,t){e.setParams({missingProperty:t},!0),e.error()}Vn.reportMissingProp=ppt;function o2e(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Ci._)`Object.prototype.hasOwnProperty`})}Vn.hasPropFunc=o2e;function yQ(e,t,n){return(0,Ci._)`${o2e(e)}.call(${t}, ${n})`}Vn.isOwnProperty=yQ;function mpt(e,t,n,r){const i=(0,Ci._)`${t}${(0,Ci.getProperty)(n)} !== undefined`;return r?(0,Ci._)`${i} && ${yQ(e,t,n)}`:i}Vn.propertyInData=mpt;function vQ(e,t,n,r){const i=(0,Ci._)`${t}${(0,Ci.getProperty)(n)} === undefined`;return r?(0,Ci.or)(i,(0,Ci.not)(yQ(e,t,n))):i}Vn.noPropertyInData=vQ;function a2e(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Vn.allSchemaProperties=a2e;function gpt(e,t){return a2e(t).filter(n=>!(0,gQ.alwaysValidSchema)(e,t[n]))}Vn.schemaProperties=gpt;function ypt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,l,u){const c=u?(0,Ci._)`${e}, ${t}, ${r}${i}`:t,d=[[Lg.default.instancePath,(0,Ci.strConcat)(Lg.default.instancePath,s)],[Lg.default.parentData,o.parentData],[Lg.default.parentDataProperty,o.parentDataProperty],[Lg.default.rootData,Lg.default.rootData]];o.opts.dynamicRef&&d.push([Lg.default.dynamicAnchors,Lg.default.dynamicAnchors]);const f=(0,Ci._)`${c}, ${n.object(...d)}`;return l!==Ci.nil?(0,Ci._)`${a}.call(${l}, ${f})`:(0,Ci._)`${a}(${f})`}Vn.callValidateCode=ypt;const vpt=(0,Ci._)`new RegExp`;function bpt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,Ci._)`${i.code==="new RegExp"?vpt:(0,dpt.useFunc)(e,i)}(${n}, ${r})`})}Vn.usePattern=bpt;function _pt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const l=t.const("len",(0,Ci._)`${n}.length`);t.forRange("i",0,l,u=>{e.subschema({keyword:r,dataProp:u,dataPropType:gQ.Type.Num},s),t.if((0,Ci.not)(s),a)})}}Vn.validateArray=_pt;function wpt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(l=>(0,gQ.alwaysValidSchema)(i,l))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((l,u)=>{const c=e.subschema({keyword:r,schemaProp:u,compositeRule:!0},a);t.assign(o,(0,Ci._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,Ci.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Vn.validateUnion=wpt;Object.defineProperty(Ph,"__esModule",{value:!0});Ph.validateKeywordUsage=Ph.validSchemaType=Ph.funcKeywordCode=Ph.macroKeywordCode=void 0;const Qa=qn,c1=wp,Ept=Vn,xpt=ZR;function Spt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),l=l2e(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const u=n.name("valid");e.subschema({schema:a,schemaPath:Qa.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:l,compositeRule:!0},u),e.pass(u,()=>e.error(!0))}Ph.macroKeywordCode=Spt;function Tpt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:l}=e;Apt(l,t);const u=!a&&t.compile?t.compile.call(l.self,s,o,l):t.validate,c=l2e(r,i,u),d=r.let("valid");e.block$data(d,f),e.ok((n=t.valid)!==null&&n!==void 0?n:d);function f(){if(t.errors===!1)m(),t.modifying&&ode(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&ode(e),g(()=>Cpt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Qa._)`await `),v=>r.assign(d,!1).if((0,Qa._)`${v} instanceof ${l.ValidationError}`,()=>r.assign(y,(0,Qa._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Qa._)`${c}.errors`;return r.assign(y,null),m(Qa.nil),y}function m(y=t.async?(0,Qa._)`await `:Qa.nil){const v=l.opts.passContext?c1.default.this:c1.default.self,_=!("compile"in t&&!a||t.schema===!1);r.assign(d,(0,Qa._)`${y}${(0,Ept.callValidateCode)(e,c,v,_)}`,t.modifying)}function g(y){var v;r.if((0,Qa.not)((v=t.valid)!==null&&v!==void 0?v:d),y)}}Ph.funcKeywordCode=Tpt;function ode(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Qa._)`${r.parentData}[${r.parentDataProperty}]`))}function Cpt(e,t){const{gen:n}=e;n.if((0,Qa._)`Array.isArray(${t})`,()=>{n.assign(c1.default.vErrors,(0,Qa._)`${c1.default.vErrors} === null ? ${t} : ${c1.default.vErrors}.concat(${t})`).assign(c1.default.errors,(0,Qa._)`${c1.default.vErrors}.length`),(0,xpt.extendErrors)(e)},()=>e.error())}function Apt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function l2e(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Qa.stringify)(n)})}function Ipt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Ph.validSchemaType=Ipt;function Rpt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const l=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(l);else throw new Error(l)}}Ph.validateKeywordUsage=Rpt;var H0={};Object.defineProperty(H0,"__esModule",{value:!0});H0.extendSubschemaMode=H0.extendSubschemaData=H0.getSubschema=void 0;const wh=qn,u2e=Ct;function kpt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,wh._)`${e.schemaPath}${(0,wh.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,wh._)`${e.schemaPath}${(0,wh.getProperty)(t)}${(0,wh.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,u2e.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}H0.getSubschema=kpt;function Ppt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:u,dataPathArr:c,opts:d}=t,f=a.let("data",(0,wh._)`${t.data}${(0,wh.getProperty)(n)}`,!0);l(f),e.errorPath=(0,wh.str)`${u}${(0,u2e.getErrorPath)(n,r,d.jsPropertySyntax)}`,e.parentDataProperty=(0,wh._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const u=i instanceof wh.Name?i:a.let("data",i,!0);l(u),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function l(u){e.data=u,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,u]}}H0.extendSubschemaData=Ppt;function Npt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}H0.extendSubschemaMode=Npt;var zo={},bQ=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const sD=bu(bQ);var c2e={exports:{}},_0=c2e.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};oD(t,r,i,e,"",e)};_0.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};_0.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};_0.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};_0.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function oD(e,t,n,r,i,s,o,a,l,u){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,l,u);for(var c in r){var d=r[c];if(Array.isArray(d)){if(c in _0.arrayKeywords)for(var f=0;f<d.length;f++)oD(e,t,n,d[f],i+"/"+c+"/"+f,s,i,c,r,f)}else if(c in _0.propsKeywords){if(d&&typeof d=="object")for(var h in d)oD(e,t,n,d[h],i+"/"+c+"/"+Opt(h),s,i,c,r,h)}else(c in _0.keywords||e.allKeys&&!(c in _0.skipKeywords))&&oD(e,t,n,d,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,l,u)}}function Opt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var Dpt=c2e.exports;Object.defineProperty(zo,"__esModule",{value:!0});zo.getSchemaRefs=zo.resolveUrl=zo.normalizeId=zo._getFullPath=zo.getFullPath=zo.inlineRef=void 0;const Mpt=Ct,$pt=bQ,Lpt=Dpt,Fpt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function jpt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!yV(e):t?d2e(e)<=t:!1}zo.inlineRef=jpt;const Bpt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function yV(e){for(const t in e){if(Bpt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(yV)||typeof n=="object"&&yV(n))return!0}return!1}function d2e(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!Fpt.has(n)&&(typeof e[n]=="object"&&(0,Mpt.eachItem)(e[n],r=>t+=d2e(r)),t===1/0))return 1/0}return t}function f2e(e,t="",n){n!==!1&&(t=uE(t));const r=e.parse(t);return h2e(e,r)}zo.getFullPath=f2e;function h2e(e,t){return e.serialize(t).split("#")[0]+"#"}zo._getFullPath=h2e;const zpt=/#\/?$/;function uE(e){return e?e.replace(zpt,""):""}zo.normalizeId=uE;function Upt(e,t,n){return n=uE(n),e.resolve(t,n)}zo.resolveUrl=Upt;const Vpt=/^[a-z_][-a-z0-9._]*$/i;function Hpt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=uE(e[n]||t),s={"":i},o=f2e(r,i,!1),a={},l=new Set;return Lpt(e,{allKeys:!0},(d,f,h,p)=>{if(p===void 0)return;const m=o+f;let g=s[p];typeof d[n]=="string"&&(g=y.call(this,d[n])),v.call(this,d.$anchor),v.call(this,d.$dynamicAnchor),s[f]=g;function y(_){const w=this.opts.uriResolver.resolve;if(_=uE(g?w(g,_):_),l.has(_))throw c(_);l.add(_);let E=this.refs[_];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?u(d,E.schema,_):_!==uE(m)&&(_[0]==="#"?(u(d,a[_],_),a[_]=d):this.refs[_]=m),_}function v(_){if(typeof _=="string"){if(!Vpt.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function u(d,f,h){if(f!==void 0&&!$pt(d,f))throw c(h)}function c(d){return new Error(`reference "${d}" resolves to more than one schema`)}}zo.getSchemaRefs=Hpt;Object.defineProperty(uf,"__esModule",{value:!0});uf.getData=uf.KeywordCxt=uf.validateFunctionCode=void 0;const p2e=XE,ade=Us,_Q=Cm,i$=Us,qpt=E6,Y2=Ph,bB=H0,Ft=qn,gn=wp,Wpt=zo,Am=Ct,FT=ZR;function Gpt(e){if(y2e(e)&&(v2e(e),g2e(e))){Xpt(e);return}m2e(e,()=>(0,p2e.topBoolOrEmptySchema)(e))}uf.validateFunctionCode=Gpt;function m2e({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Ft._)`${gn.default.data}, ${gn.default.valCxt}`,r.$async,()=>{e.code((0,Ft._)`"use strict"; ${lde(n,i)}`),Kpt(e,i),e.code(s)}):e.func(t,(0,Ft._)`${gn.default.data}, ${Ypt(i)}`,r.$async,()=>e.code(lde(n,i)).code(s))}function Ypt(e){return(0,Ft._)`{${gn.default.instancePath}="", ${gn.default.parentData}, ${gn.default.parentDataProperty}, ${gn.default.rootData}=${gn.default.data}${e.dynamicRef?(0,Ft._)`, ${gn.default.dynamicAnchors}={}`:Ft.nil}}={}`}function Kpt(e,t){e.if(gn.default.valCxt,()=>{e.var(gn.default.instancePath,(0,Ft._)`${gn.default.valCxt}.${gn.default.instancePath}`),e.var(gn.default.parentData,(0,Ft._)`${gn.default.valCxt}.${gn.default.parentData}`),e.var(gn.default.parentDataProperty,(0,Ft._)`${gn.default.valCxt}.${gn.default.parentDataProperty}`),e.var(gn.default.rootData,(0,Ft._)`${gn.default.valCxt}.${gn.default.rootData}`),t.dynamicRef&&e.var(gn.default.dynamicAnchors,(0,Ft._)`${gn.default.valCxt}.${gn.default.dynamicAnchors}`)},()=>{e.var(gn.default.instancePath,(0,Ft._)`""`),e.var(gn.default.parentData,(0,Ft._)`undefined`),e.var(gn.default.parentDataProperty,(0,Ft._)`undefined`),e.var(gn.default.rootData,gn.default.data),t.dynamicRef&&e.var(gn.default.dynamicAnchors,(0,Ft._)`{}`)})}function Xpt(e){const{schema:t,opts:n,gen:r}=e;m2e(e,()=>{n.$comment&&t.$comment&&_2e(e),tmt(e),r.let(gn.default.vErrors,null),r.let(gn.default.errors,0),n.unevaluated&&Qpt(e),b2e(e),imt(e)})}function Qpt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Ft._)`${n}.evaluated`),t.if((0,Ft._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Ft._)`${e.evaluated}.props`,(0,Ft._)`undefined`)),t.if((0,Ft._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Ft._)`${e.evaluated}.items`,(0,Ft._)`undefined`))}function lde(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Ft._)`/*# sourceURL=${n} */`:Ft.nil}function Jpt(e,t){if(y2e(e)&&(v2e(e),g2e(e))){Zpt(e,t);return}(0,p2e.boolOrEmptySchema)(e,t)}function g2e({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function y2e(e){return typeof e.schema!="boolean"}function Zpt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&_2e(e),nmt(e),rmt(e);const s=r.const("_errs",gn.default.errors);b2e(e,s),r.var(t,(0,Ft._)`${s} === ${gn.default.errors}`)}function v2e(e){(0,Am.checkUnknownRules)(e),emt(e)}function b2e(e,t){if(e.opts.jtd)return ude(e,[],!1,t);const n=(0,ade.getSchemaTypes)(e.schema),r=(0,ade.coerceAndCheckDataType)(e,n);ude(e,n,!r,t)}function emt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Am.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function tmt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Am.checkStrictMode)(e,"default is ignored in the schema root")}function nmt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Wpt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function rmt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function _2e({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Ft._)`${gn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Ft.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Ft._)`${gn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function imt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Ft._)`${gn.default.errors} === 0`,()=>t.return(gn.default.data),()=>t.throw((0,Ft._)`new ${i}(${gn.default.vErrors})`)):(t.assign((0,Ft._)`${r}.errors`,gn.default.vErrors),s.unevaluated&&smt(e),t.return((0,Ft._)`${gn.default.errors} === 0`))}function smt({gen:e,evaluated:t,props:n,items:r}){n instanceof Ft.Name&&e.assign((0,Ft._)`${t}.props`,n),r instanceof Ft.Name&&e.assign((0,Ft._)`${t}.items`,r)}function ude(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:l,self:u}=e,{RULES:c}=u;if(s.$ref&&(l.ignoreKeywordsWithRef||!(0,Am.schemaHasRulesButRef)(s,c))){i.block(()=>x2e(e,"$ref",c.all.$ref.definition));return}l.jtd||omt(e,t),i.block(()=>{for(const f of c.rules)d(f);d(c.post)});function d(f){(0,_Q.shouldUseGroup)(s,f)&&(f.type?(i.if((0,i$.checkDataType)(f.type,o,l.strictNumbers)),cde(e,f),t.length===1&&t[0]===f.type&&n&&(i.else(),(0,i$.reportTypeError)(e)),i.endIf()):cde(e,f),a||i.if((0,Ft._)`${gn.default.errors} === ${r||0}`))}}function cde(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,qpt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,_Q.shouldUseRule)(r,s)&&x2e(e,s.keyword,s.definition,t.type)})}function omt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(amt(e,t),e.opts.allowUnionTypes||lmt(e,t),umt(e,e.dataTypes))}function amt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{w2e(e.dataTypes,n)||wQ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),dmt(e,t)}}function lmt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&wQ(e,"use allowUnionTypes to allow union type keyword")}function umt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,_Q.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>cmt(t,o))&&wQ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function cmt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function w2e(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function dmt(e,t){const n=[];for(const r of e.dataTypes)w2e(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function wQ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Am.checkStrictMode)(e,t,e.opts.strictTypes)}class E2e{constructor(t,n,r){if((0,Y2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Am.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",S2e(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Y2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",gn.default.errors))}result(t,n,r){this.failResult((0,Ft.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Ft.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Ft._)`${n} !== undefined && (${(0,Ft.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?FT.reportExtraError:FT.reportError)(this,this.def.error,n)}$dataError(){(0,FT.reportError)(this,this.def.$dataError||FT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,FT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Ft.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Ft.nil,n=Ft.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Ft.or)((0,Ft._)`${i} === undefined`,n)),t!==Ft.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Ft.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Ft.or)(o(),a());function o(){if(r.length){if(!(n instanceof Ft.Name))throw new Error("ajv implementation error");const l=Array.isArray(r)?r:[r];return(0,Ft._)`${(0,i$.checkDataTypes)(l,n,s.opts.strictNumbers,i$.DataType.Wrong)}`}return Ft.nil}function a(){if(i.validateSchema){const l=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Ft._)`!${l}(${n})`}return Ft.nil}}subschema(t,n){const r=(0,bB.getSubschema)(this.it,t);(0,bB.extendSubschemaData)(r,this.it,t),(0,bB.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return Jpt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Am.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Am.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Ft.Name)),!0}}uf.KeywordCxt=E2e;function x2e(e,t,n,r){const i=new E2e(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,Y2.funcKeywordCode)(i,n):"macro"in n?(0,Y2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,Y2.funcKeywordCode)(i,n)}const fmt=/^\/(?:[^~]|~0|~1)*$/,hmt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function S2e(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return gn.default.rootData;if(e[0]==="/"){if(!fmt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=gn.default.rootData}else{const u=hmt.exec(e);if(!u)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+u[1];if(i=u[2],i==="#"){if(c>=t)throw new Error(l("property/index",c));return r[t-c]}if(c>t)throw new Error(l("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const u of a)u&&(s=(0,Ft._)`${s}${(0,Ft.getProperty)((0,Am.unescapeJsonPointer)(u))}`,o=(0,Ft._)`${o} && ${s}`);return o;function l(u,c){return`Cannot access ${u} ${c} levels up, current level is ${t}`}}uf.getData=S2e;var ek={};Object.defineProperty(ek,"__esModule",{value:!0});class pmt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}ek.default=pmt;var _S={};Object.defineProperty(_S,"__esModule",{value:!0});const _B=zo;class mmt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,_B.resolveUrl)(t,n,r),this.missingSchema=(0,_B.normalizeId)((0,_B.getFullPath)(t,this.missingRef))}}_S.default=mmt;var Vl={};Object.defineProperty(Vl,"__esModule",{value:!0});Vl.resolveSchema=Vl.getCompilingSchema=Vl.resolveRef=Vl.compileSchema=Vl.SchemaEnv=void 0;const Td=qn,gmt=ek,Pv=wp,qd=zo,dde=Ct,ymt=uf;class x6{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,qd.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Vl.SchemaEnv=x6;function EQ(e){const t=T2e.call(this,e);if(t)return t;const n=(0,qd.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Td.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:gmt.default,code:(0,Td._)`require("ajv/dist/runtime/validation_error").default`}));const l=o.scopeName("validate");e.validateName=l;const u={gen:o,allErrors:this.opts.allErrors,data:Pv.default.data,parentData:Pv.default.parentData,parentDataProperty:Pv.default.parentDataProperty,dataNames:[Pv.default.data],dataPathArr:[Td.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Td.stringify)(e.schema)}:{ref:e.schema}),validateName:l,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Td.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Td._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,ymt.validateFunctionCode)(u),o.optimize(this.opts.code.optimize);const d=o.toString();c=`${o.scopeRefs(Pv.default.scope)}return ${d}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${Pv.default.self}`,`${Pv.default.scope}`,c)(this,this.scope.get());if(this.scope.value(l,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:l,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=u;h.evaluated={props:p instanceof Td.Name?void 0:p,items:m instanceof Td.Name?void 0:m,dynamicProps:p instanceof Td.Name,dynamicItems:m instanceof Td.Name},h.source&&(h.source.evaluated=(0,Td.stringify)(h.evaluated))}return e.validate=h,e}catch(d){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),d}finally{this._compilations.delete(e)}}Vl.compileSchema=EQ;function vmt(e,t,n){var r;n=(0,qd.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=wmt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new x6({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=bmt.call(this,s)}Vl.resolveRef=vmt;function bmt(e){return(0,qd.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:EQ.call(this,e)}function T2e(e){for(const t of this._compilations)if(_mt(t,e))return t}Vl.getCompilingSchema=T2e;function _mt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function wmt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||S6.call(this,e,t)}function S6(e,t){const n=this.opts.uriResolver.parse(t),r=(0,qd._getFullPath)(this.opts.uriResolver,n);let i=(0,qd.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return wB.call(this,n,e);const s=(0,qd.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=S6.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:wB.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||EQ.call(this,o),s===(0,qd.normalizeId)(t)){const{schema:a}=o,{schemaId:l}=this.opts,u=a[l];return u&&(i=(0,qd.resolveUrl)(this.opts.uriResolver,i,u)),new x6({schema:a,schemaId:l,root:e,baseId:i})}return wB.call(this,n,o)}}Vl.resolveSchema=S6;const Emt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function wB(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const l=n[(0,dde.unescapeFragment)(a)];if(l===void 0)return;n=l;const u=typeof n=="object"&&n[this.opts.schemaId];!Emt.has(a)&&u&&(t=(0,qd.resolveUrl)(this.opts.uriResolver,t,u))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,dde.schemaHasRulesButRef)(n,this.RULES)){const a=(0,qd.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=S6.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new x6({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const xmt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Smt="Meta-schema for $data reference (JSON AnySchema extension proposal)",Tmt="object",Cmt=["$data"],Amt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Imt=!1,Rmt={$id:xmt,description:Smt,type:Tmt,required:Cmt,properties:Amt,additionalProperties:Imt};var xQ={},vV={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Ys,function(n){function r(){for(var ue=arguments.length,te=Array(ue),pe=0;pe<ue;pe++)te[pe]=arguments[pe];if(te.length>1){te[0]=te[0].slice(0,-1);for(var Ie=te.length-1,Re=1;Re<Ie;++Re)te[Re]=te[Re].slice(1,-1);return te[Ie]=te[Ie].slice(1),te.join("")}else return te[0]}function i(ue){return"(?:"+ue+")"}function s(ue){return ue===void 0?"undefined":ue===null?"null":Object.prototype.toString.call(ue).split(" ").pop().split("]").shift().toLowerCase()}function o(ue){return ue.toUpperCase()}function a(ue){return ue!=null?ue instanceof Array?ue:typeof ue.length!="number"||ue.split||ue.setInterval||ue.call?[ue]:Array.prototype.slice.call(ue):[]}function l(ue,te){var pe=ue;if(te)for(var Ie in te)pe[Ie]=te[Ie];return pe}function u(ue){var te="[A-Za-z]",pe="[0-9]",Ie=r(pe,"[A-Fa-f]"),Re=i(i("%[EFef]"+Ie+"%"+Ie+Ie+"%"+Ie+Ie)+"|"+i("%[89A-Fa-f]"+Ie+"%"+Ie+Ie)+"|"+i("%"+Ie+Ie)),dt="[\\:\\/\\?\\#\\[\\]\\@]",kt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",rn=r(dt,kt),Gn=ue?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Qn=ue?"[\\uE000-\\uF8FF]":"[]",In=r(te,pe,"[\\-\\.\\_\\~]",Gn);i(te+r(te,pe,"[\\+\\-\\.]")+"*"),i(i(Re+"|"+r(In,kt,"[\\:]"))+"*");var vr=i(i("25[0-5]")+"|"+i("2[0-4]"+pe)+"|"+i("1"+pe+pe)+"|"+i("0?[1-9]"+pe)+"|0?0?"+pe),zr=i(vr+"\\."+vr+"\\."+vr+"\\."+vr),Qt=i(Ie+"{1,4}"),br=i(i(Qt+"\\:"+Qt)+"|"+zr),ii=i(i(Qt+"\\:")+"{6}"+br),dr=i("\\:\\:"+i(Qt+"\\:")+"{5}"+br),Vi=i(i(Qt)+"?\\:\\:"+i(Qt+"\\:")+"{4}"+br),lo=i(i(i(Qt+"\\:")+"{0,1}"+Qt)+"?\\:\\:"+i(Qt+"\\:")+"{3}"+br),hi=i(i(i(Qt+"\\:")+"{0,2}"+Qt)+"?\\:\\:"+i(Qt+"\\:")+"{2}"+br),Ao=i(i(i(Qt+"\\:")+"{0,3}"+Qt)+"?\\:\\:"+Qt+"\\:"+br),es=i(i(i(Qt+"\\:")+"{0,4}"+Qt)+"?\\:\\:"+br),ts=i(i(i(Qt+"\\:")+"{0,5}"+Qt)+"?\\:\\:"+Qt),ia=i(i(i(Qt+"\\:")+"{0,6}"+Qt)+"?\\:\\:"),Ha=i([ii,dr,Vi,lo,hi,Ao,es,ts,ia].join("|")),uo=i(i(In+"|"+Re)+"+");i("[vV]"+Ie+"+\\."+r(In,kt,"[\\:]")+"+"),i(i(Re+"|"+r(In,kt))+"*");var yc=i(Re+"|"+r(In,kt,"[\\:\\@]"));return i(i(Re+"|"+r(In,kt,"[\\@]"))+"+"),i(i(yc+"|"+r("[\\/\\?]",Qn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",te,pe,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",In,kt),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",In,kt),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",In,kt),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",In,kt),"g"),NOT_QUERY:new RegExp(r("[^\\%]",In,kt,"[\\:\\@\\/\\?]",Qn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",In,kt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",In,kt),"g"),UNRESERVED:new RegExp(In,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",In,rn),"g"),PCT_ENCODED:new RegExp(Re,"g"),IPV4ADDRESS:new RegExp("^("+zr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ha+")"+i(i("\\%25|\\%(?!"+Ie+"{2})")+"("+uo+")")+"?\\]?$")}}var c=u(!1),d=u(!0),f=function(){function ue(te,pe){var Ie=[],Re=!0,dt=!1,kt=void 0;try{for(var rn=te[Symbol.iterator](),Gn;!(Re=(Gn=rn.next()).done)&&(Ie.push(Gn.value),!(pe&&Ie.length===pe));Re=!0);}catch(Qn){dt=!0,kt=Qn}finally{try{!Re&&rn.return&&rn.return()}finally{if(dt)throw kt}}return Ie}return function(te,pe){if(Array.isArray(te))return te;if(Symbol.iterator in Object(te))return ue(te,pe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ue){if(Array.isArray(ue)){for(var te=0,pe=Array(ue.length);te<ue.length;te++)pe[te]=ue[te];return pe}else return Array.from(ue)},p=2147483647,m=36,g=1,y=26,v=38,_=700,w=72,E=128,S="-",x=/^xn--/,T=/[^\0-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=m-g,D=Math.floor,R=String.fromCharCode;function M(ue){throw new RangeError(P[ue])}function $(ue,te){for(var pe=[],Ie=ue.length;Ie--;)pe[Ie]=te(ue[Ie]);return pe}function L(ue,te){var pe=ue.split("@"),Ie="";pe.length>1&&(Ie=pe[0]+"@",ue=pe[1]),ue=ue.replace(I,".");var Re=ue.split("."),dt=$(Re,te).join(".");return Ie+dt}function B(ue){for(var te=[],pe=0,Ie=ue.length;pe<Ie;){var Re=ue.charCodeAt(pe++);if(Re>=55296&&Re<=56319&&pe<Ie){var dt=ue.charCodeAt(pe++);(dt&64512)==56320?te.push(((Re&1023)<<10)+(dt&1023)+65536):(te.push(Re),pe--)}else te.push(Re)}return te}var U=function(te){return String.fromCodePoint.apply(String,h(te))},z=function(te){return te-48<10?te-22:te-65<26?te-65:te-97<26?te-97:m},N=function(te,pe){return te+22+75*(te<26)-((pe!=0)<<5)},V=function(te,pe,Ie){var Re=0;for(te=Ie?D(te/_):te>>1,te+=D(te/pe);te>k*y>>1;Re+=m)te=D(te/k);return D(Re+(k+1)*te/(te+v))},W=function(te){var pe=[],Ie=te.length,Re=0,dt=E,kt=w,rn=te.lastIndexOf(S);rn<0&&(rn=0);for(var Gn=0;Gn<rn;++Gn)te.charCodeAt(Gn)>=128&&M("not-basic"),pe.push(te.charCodeAt(Gn));for(var Qn=rn>0?rn+1:0;Qn<Ie;){for(var In=Re,vr=1,zr=m;;zr+=m){Qn>=Ie&&M("invalid-input");var Qt=z(te.charCodeAt(Qn++));(Qt>=m||Qt>D((p-Re)/vr))&&M("overflow"),Re+=Qt*vr;var br=zr<=kt?g:zr>=kt+y?y:zr-kt;if(Qt<br)break;var ii=m-br;vr>D(p/ii)&&M("overflow"),vr*=ii}var dr=pe.length+1;kt=V(Re-In,dr,In==0),D(Re/dr)>p-dt&&M("overflow"),dt+=D(Re/dr),Re%=dr,pe.splice(Re++,0,dt)}return String.fromCodePoint.apply(String,pe)},F=function(te){var pe=[];te=B(te);var Ie=te.length,Re=E,dt=0,kt=w,rn=!0,Gn=!1,Qn=void 0;try{for(var In=te[Symbol.iterator](),vr;!(rn=(vr=In.next()).done);rn=!0){var zr=vr.value;zr<128&&pe.push(R(zr))}}catch(ze){Gn=!0,Qn=ze}finally{try{!rn&&In.return&&In.return()}finally{if(Gn)throw Qn}}var Qt=pe.length,br=Qt;for(Qt&&pe.push(S);br<Ie;){var ii=p,dr=!0,Vi=!1,lo=void 0;try{for(var hi=te[Symbol.iterator](),Ao;!(dr=(Ao=hi.next()).done);dr=!0){var es=Ao.value;es>=Re&&es<ii&&(ii=es)}}catch(ze){Vi=!0,lo=ze}finally{try{!dr&&hi.return&&hi.return()}finally{if(Vi)throw lo}}var ts=br+1;ii-Re>D((p-dt)/ts)&&M("overflow"),dt+=(ii-Re)*ts,Re=ii;var ia=!0,Ha=!1,uo=void 0;try{for(var yc=te[Symbol.iterator](),Xf;!(ia=(Xf=yc.next()).done);ia=!0){var Y=Xf.value;if(Y<Re&&++dt>p&&M("overflow"),Y==Re){for(var fe=dt,ee=m;;ee+=m){var be=ee<=kt?g:ee>=kt+y?y:ee-kt;if(fe<be)break;var we=fe-be,ve=m-be;pe.push(R(N(be+we%ve,0))),fe=D(we/ve)}pe.push(R(N(fe,0))),kt=V(dt,ts,br==Qt),dt=0,++br}}}catch(ze){Ha=!0,uo=ze}finally{try{!ia&&yc.return&&yc.return()}finally{if(Ha)throw uo}}++dt,++Re}return pe.join("")},H=function(te){return L(te,function(pe){return x.test(pe)?W(pe.slice(4).toLowerCase()):pe})},G=function(te){return L(te,function(pe){return T.test(pe)?"xn--"+F(pe):pe})},Q={version:"2.1.0",ucs2:{decode:B,encode:U},decode:W,encode:F,toASCII:G,toUnicode:H},ie={};function se(ue){var te=ue.charCodeAt(0),pe=void 0;return te<16?pe="%0"+te.toString(16).toUpperCase():te<128?pe="%"+te.toString(16).toUpperCase():te<2048?pe="%"+(te>>6|192).toString(16).toUpperCase()+"%"+(te&63|128).toString(16).toUpperCase():pe="%"+(te>>12|224).toString(16).toUpperCase()+"%"+(te>>6&63|128).toString(16).toUpperCase()+"%"+(te&63|128).toString(16).toUpperCase(),pe}function ne(ue){for(var te="",pe=0,Ie=ue.length;pe<Ie;){var Re=parseInt(ue.substr(pe+1,2),16);if(Re<128)te+=String.fromCharCode(Re),pe+=3;else if(Re>=194&&Re<224){if(Ie-pe>=6){var dt=parseInt(ue.substr(pe+4,2),16);te+=String.fromCharCode((Re&31)<<6|dt&63)}else te+=ue.substr(pe,6);pe+=6}else if(Re>=224){if(Ie-pe>=9){var kt=parseInt(ue.substr(pe+4,2),16),rn=parseInt(ue.substr(pe+7,2),16);te+=String.fromCharCode((Re&15)<<12|(kt&63)<<6|rn&63)}else te+=ue.substr(pe,9);pe+=9}else te+=ue.substr(pe,3),pe+=3}return te}function ce(ue,te){function pe(Ie){var Re=ne(Ie);return Re.match(te.UNRESERVED)?Re:Ie}return ue.scheme&&(ue.scheme=String(ue.scheme).replace(te.PCT_ENCODED,pe).toLowerCase().replace(te.NOT_SCHEME,"")),ue.userinfo!==void 0&&(ue.userinfo=String(ue.userinfo).replace(te.PCT_ENCODED,pe).replace(te.NOT_USERINFO,se).replace(te.PCT_ENCODED,o)),ue.host!==void 0&&(ue.host=String(ue.host).replace(te.PCT_ENCODED,pe).toLowerCase().replace(te.NOT_HOST,se).replace(te.PCT_ENCODED,o)),ue.path!==void 0&&(ue.path=String(ue.path).replace(te.PCT_ENCODED,pe).replace(ue.scheme?te.NOT_PATH:te.NOT_PATH_NOSCHEME,se).replace(te.PCT_ENCODED,o)),ue.query!==void 0&&(ue.query=String(ue.query).replace(te.PCT_ENCODED,pe).replace(te.NOT_QUERY,se).replace(te.PCT_ENCODED,o)),ue.fragment!==void 0&&(ue.fragment=String(ue.fragment).replace(te.PCT_ENCODED,pe).replace(te.NOT_FRAGMENT,se).replace(te.PCT_ENCODED,o)),ue}function Ee(ue){return ue.replace(/^0*(.*)/,"$1")||"0"}function de(ue,te){var pe=ue.match(te.IPV4ADDRESS)||[],Ie=f(pe,2),Re=Ie[1];return Re?Re.split(".").map(Ee).join("."):ue}function We(ue,te){var pe=ue.match(te.IPV6ADDRESS)||[],Ie=f(pe,3),Re=Ie[1],dt=Ie[2];if(Re){for(var kt=Re.toLowerCase().split("::").reverse(),rn=f(kt,2),Gn=rn[0],Qn=rn[1],In=Qn?Qn.split(":").map(Ee):[],vr=Gn.split(":").map(Ee),zr=te.IPV4ADDRESS.test(vr[vr.length-1]),Qt=zr?7:8,br=vr.length-Qt,ii=Array(Qt),dr=0;dr<Qt;++dr)ii[dr]=In[dr]||vr[br+dr]||"";zr&&(ii[Qt-1]=de(ii[Qt-1],te));var Vi=ii.reduce(function(ts,ia,Ha){if(!ia||ia==="0"){var uo=ts[ts.length-1];uo&&uo.index+uo.length===Ha?uo.length++:ts.push({index:Ha,length:1})}return ts},[]),lo=Vi.sort(function(ts,ia){return ia.length-ts.length})[0],hi=void 0;if(lo&&lo.length>1){var Ao=ii.slice(0,lo.index),es=ii.slice(lo.index+lo.length);hi=Ao.join(":")+"::"+es.join(":")}else hi=ii.join(":");return dt&&(hi+="%"+dt),hi}else return ue}var Fe=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ne="".match(/(){0}/)[1]===void 0;function je(ue){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe={},Ie=te.iri!==!1?d:c;te.reference==="suffix"&&(ue=(te.scheme?te.scheme+":":"")+"//"+ue);var Re=ue.match(Fe);if(Re){Ne?(pe.scheme=Re[1],pe.userinfo=Re[3],pe.host=Re[4],pe.port=parseInt(Re[5],10),pe.path=Re[6]||"",pe.query=Re[7],pe.fragment=Re[8],isNaN(pe.port)&&(pe.port=Re[5])):(pe.scheme=Re[1]||void 0,pe.userinfo=ue.indexOf("@")!==-1?Re[3]:void 0,pe.host=ue.indexOf("//")!==-1?Re[4]:void 0,pe.port=parseInt(Re[5],10),pe.path=Re[6]||"",pe.query=ue.indexOf("?")!==-1?Re[7]:void 0,pe.fragment=ue.indexOf("#")!==-1?Re[8]:void 0,isNaN(pe.port)&&(pe.port=ue.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Re[4]:void 0)),pe.host&&(pe.host=We(de(pe.host,Ie),Ie)),pe.scheme===void 0&&pe.userinfo===void 0&&pe.host===void 0&&pe.port===void 0&&!pe.path&&pe.query===void 0?pe.reference="same-document":pe.scheme===void 0?pe.reference="relative":pe.fragment===void 0?pe.reference="absolute":pe.reference="uri",te.reference&&te.reference!=="suffix"&&te.reference!==pe.reference&&(pe.error=pe.error||"URI is not a "+te.reference+" reference.");var dt=ie[(te.scheme||pe.scheme||"").toLowerCase()];if(!te.unicodeSupport&&(!dt||!dt.unicodeSupport)){if(pe.host&&(te.domainHost||dt&&dt.domainHost))try{pe.host=Q.toASCII(pe.host.replace(Ie.PCT_ENCODED,ne).toLowerCase())}catch(kt){pe.error=pe.error||"Host's domain name can not be converted to ASCII via punycode: "+kt}ce(pe,c)}else ce(pe,Ie);dt&&dt.parse&&dt.parse(pe,te)}else pe.error=pe.error||"URI can not be parsed.";return pe}function ye(ue,te){var pe=te.iri!==!1?d:c,Ie=[];return ue.userinfo!==void 0&&(Ie.push(ue.userinfo),Ie.push("@")),ue.host!==void 0&&Ie.push(We(de(String(ue.host),pe),pe).replace(pe.IPV6ADDRESS,function(Re,dt,kt){return"["+dt+(kt?"%25"+kt:"")+"]"})),(typeof ue.port=="number"||typeof ue.port=="string")&&(Ie.push(":"),Ie.push(String(ue.port))),Ie.length?Ie.join(""):void 0}var ae=/^\.\.?\//,Pe=/^\/\.(\/|$)/,Be=/^\/\.\.(\/|$)/,ft=/^\/?(?:.|\n)*?(?=\/|$)/;function Se(ue){for(var te=[];ue.length;)if(ue.match(ae))ue=ue.replace(ae,"");else if(ue.match(Pe))ue=ue.replace(Pe,"/");else if(ue.match(Be))ue=ue.replace(Be,"/"),te.pop();else if(ue==="."||ue==="..")ue="";else{var pe=ue.match(ft);if(pe){var Ie=pe[0];ue=ue.slice(Ie.length),te.push(Ie)}else throw new Error("Unexpected dot segment condition")}return te.join("")}function he(ue){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=te.iri?d:c,Ie=[],Re=ie[(te.scheme||ue.scheme||"").toLowerCase()];if(Re&&Re.serialize&&Re.serialize(ue,te),ue.host&&!pe.IPV6ADDRESS.test(ue.host)){if(te.domainHost||Re&&Re.domainHost)try{ue.host=te.iri?Q.toUnicode(ue.host):Q.toASCII(ue.host.replace(pe.PCT_ENCODED,ne).toLowerCase())}catch(rn){ue.error=ue.error||"Host's domain name can not be converted to "+(te.iri?"Unicode":"ASCII")+" via punycode: "+rn}}ce(ue,pe),te.reference!=="suffix"&&ue.scheme&&(Ie.push(ue.scheme),Ie.push(":"));var dt=ye(ue,te);if(dt!==void 0&&(te.reference!=="suffix"&&Ie.push("//"),Ie.push(dt),ue.path&&ue.path.charAt(0)!=="/"&&Ie.push("/")),ue.path!==void 0){var kt=ue.path;!te.absolutePath&&(!Re||!Re.absolutePath)&&(kt=Se(kt)),dt===void 0&&(kt=kt.replace(/^\/\//,"/%2F")),Ie.push(kt)}return ue.query!==void 0&&(Ie.push("?"),Ie.push(ue.query)),ue.fragment!==void 0&&(Ie.push("#"),Ie.push(ue.fragment)),Ie.join("")}function Ve(ue,te){var pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ie=arguments[3],Re={};return Ie||(ue=je(he(ue,pe),pe),te=je(he(te,pe),pe)),pe=pe||{},!pe.tolerant&&te.scheme?(Re.scheme=te.scheme,Re.userinfo=te.userinfo,Re.host=te.host,Re.port=te.port,Re.path=Se(te.path||""),Re.query=te.query):(te.userinfo!==void 0||te.host!==void 0||te.port!==void 0?(Re.userinfo=te.userinfo,Re.host=te.host,Re.port=te.port,Re.path=Se(te.path||""),Re.query=te.query):(te.path?(te.path.charAt(0)==="/"?Re.path=Se(te.path):((ue.userinfo!==void 0||ue.host!==void 0||ue.port!==void 0)&&!ue.path?Re.path="/"+te.path:ue.path?Re.path=ue.path.slice(0,ue.path.lastIndexOf("/")+1)+te.path:Re.path=te.path,Re.path=Se(Re.path)),Re.query=te.query):(Re.path=ue.path,te.query!==void 0?Re.query=te.query:Re.query=ue.query),Re.userinfo=ue.userinfo,Re.host=ue.host,Re.port=ue.port),Re.scheme=ue.scheme),Re.fragment=te.fragment,Re}function tt(ue,te,pe){var Ie=l({scheme:"null"},pe);return he(Ve(je(ue,Ie),je(te,Ie),Ie,!0),Ie)}function ge(ue,te){return typeof ue=="string"?ue=he(je(ue,te),te):s(ue)==="object"&&(ue=je(he(ue,te),te)),ue}function ke(ue,te,pe){return typeof ue=="string"?ue=he(je(ue,pe),pe):s(ue)==="object"&&(ue=he(ue,pe)),typeof te=="string"?te=he(je(te,pe),pe):s(te)==="object"&&(te=he(te,pe)),ue===te}function Ye(ue,te){return ue&&ue.toString().replace(!te||!te.iri?c.ESCAPE:d.ESCAPE,se)}function Xe(ue,te){return ue&&ue.toString().replace(!te||!te.iri?c.PCT_ENCODED:d.PCT_ENCODED,ne)}var xt={scheme:"http",domainHost:!0,parse:function(te,pe){return te.host||(te.error=te.error||"HTTP URIs must have a host."),te},serialize:function(te,pe){var Ie=String(te.scheme).toLowerCase()==="https";return(te.port===(Ie?443:80)||te.port==="")&&(te.port=void 0),te.path||(te.path="/"),te}},An={scheme:"https",domainHost:xt.domainHost,parse:xt.parse,serialize:xt.serialize};function gr(ue){return typeof ue.secure=="boolean"?ue.secure:String(ue.scheme).toLowerCase()==="wss"}var yr={scheme:"ws",domainHost:!0,parse:function(te,pe){var Ie=te;return Ie.secure=gr(Ie),Ie.resourceName=(Ie.path||"/")+(Ie.query?"?"+Ie.query:""),Ie.path=void 0,Ie.query=void 0,Ie},serialize:function(te,pe){if((te.port===(gr(te)?443:80)||te.port==="")&&(te.port=void 0),typeof te.secure=="boolean"&&(te.scheme=te.secure?"wss":"ws",te.secure=void 0),te.resourceName){var Ie=te.resourceName.split("?"),Re=f(Ie,2),dt=Re[0],kt=Re[1];te.path=dt&&dt!=="/"?dt:void 0,te.query=kt,te.resourceName=void 0}return te.fragment=void 0,te}},kr={scheme:"wss",domainHost:yr.domainHost,parse:yr.parse,serialize:yr.serialize},Xt={},Dn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",rr="[0-9A-Fa-f]",ir=i(i("%[EFef]"+rr+"%"+rr+rr+"%"+rr+rr)+"|"+i("%[89A-Fa-f]"+rr+"%"+rr+rr)+"|"+i("%"+rr+rr)),ao="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Oi="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Ui=r(Oi,'[\\"\\\\]'),Un="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Wn=new RegExp(Dn,"g"),Zi=new RegExp(ir,"g"),Ed=new RegExp(r("[^]",ao,"[\\.]",'[\\"]',Ui),"g"),Va=new RegExp(r("[^]",Dn,Un),"g"),gc=Va;function mt(ue){var te=ne(ue);return te.match(Wn)?te:ue}var fi={scheme:"mailto",parse:function(te,pe){var Ie=te,Re=Ie.to=Ie.path?Ie.path.split(","):[];if(Ie.path=void 0,Ie.query){for(var dt=!1,kt={},rn=Ie.query.split("&"),Gn=0,Qn=rn.length;Gn<Qn;++Gn){var In=rn[Gn].split("=");switch(In[0]){case"to":for(var vr=In[1].split(","),zr=0,Qt=vr.length;zr<Qt;++zr)Re.push(vr[zr]);break;case"subject":Ie.subject=Xe(In[1],pe);break;case"body":Ie.body=Xe(In[1],pe);break;default:dt=!0,kt[Xe(In[0],pe)]=Xe(In[1],pe);break}}dt&&(Ie.headers=kt)}Ie.query=void 0;for(var br=0,ii=Re.length;br<ii;++br){var dr=Re[br].split("@");if(dr[0]=Xe(dr[0]),pe.unicodeSupport)dr[1]=Xe(dr[1],pe).toLowerCase();else try{dr[1]=Q.toASCII(Xe(dr[1],pe).toLowerCase())}catch(Vi){Ie.error=Ie.error||"Email address's domain name can not be converted to ASCII via punycode: "+Vi}Re[br]=dr.join("@")}return Ie},serialize:function(te,pe){var Ie=te,Re=a(te.to);if(Re){for(var dt=0,kt=Re.length;dt<kt;++dt){var rn=String(Re[dt]),Gn=rn.lastIndexOf("@"),Qn=rn.slice(0,Gn).replace(Zi,mt).replace(Zi,o).replace(Ed,se),In=rn.slice(Gn+1);try{In=pe.iri?Q.toUnicode(In):Q.toASCII(Xe(In,pe).toLowerCase())}catch(br){Ie.error=Ie.error||"Email address's domain name can not be converted to "+(pe.iri?"Unicode":"ASCII")+" via punycode: "+br}Re[dt]=Qn+"@"+In}Ie.path=Re.join(",")}var vr=te.headers=te.headers||{};te.subject&&(vr.subject=te.subject),te.body&&(vr.body=te.body);var zr=[];for(var Qt in vr)vr[Qt]!==Xt[Qt]&&zr.push(Qt.replace(Zi,mt).replace(Zi,o).replace(Va,se)+"="+vr[Qt].replace(Zi,mt).replace(Zi,o).replace(gc,se));return zr.length&&(Ie.query=zr.join("&")),Ie}},wn=/^([^\:]+)\:(.*)/,$r={scheme:"urn",parse:function(te,pe){var Ie=te.path&&te.path.match(wn),Re=te;if(Ie){var dt=pe.scheme||Re.scheme||"urn",kt=Ie[1].toLowerCase(),rn=Ie[2],Gn=dt+":"+(pe.nid||kt),Qn=ie[Gn];Re.nid=kt,Re.nss=rn,Re.path=void 0,Qn&&(Re=Qn.parse(Re,pe))}else Re.error=Re.error||"URN can not be parsed.";return Re},serialize:function(te,pe){var Ie=pe.scheme||te.scheme||"urn",Re=te.nid,dt=Ie+":"+(pe.nid||Re),kt=ie[dt];kt&&(te=kt.serialize(te,pe));var rn=te,Gn=te.nss;return rn.path=(Re||pe.nid)+":"+Gn,rn}},ni=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ri={scheme:"urn:uuid",parse:function(te,pe){var Ie=te;return Ie.uuid=Ie.nss,Ie.nss=void 0,!pe.tolerant&&(!Ie.uuid||!Ie.uuid.match(ni))&&(Ie.error=Ie.error||"UUID is not valid."),Ie},serialize:function(te,pe){var Ie=te;return Ie.nss=(te.uuid||"").toLowerCase(),Ie}};ie[xt.scheme]=xt,ie[An.scheme]=An,ie[yr.scheme]=yr,ie[kr.scheme]=kr,ie[fi.scheme]=fi,ie[$r.scheme]=$r,ie[ri.scheme]=ri,n.SCHEMES=ie,n.pctEncChar=se,n.pctDecChars=ne,n.parse=je,n.removeDotSegments=Se,n.serialize=he,n.resolveComponents=Ve,n.resolve=tt,n.normalize=ge,n.equal=ke,n.escapeComponent=Ye,n.unescapeComponent=Xe,Object.defineProperty(n,"__esModule",{value:!0})})})(vV,vV.exports);var kmt=vV.exports;Object.defineProperty(xQ,"__esModule",{value:!0});const C2e=kmt;C2e.code='require("ajv/dist/runtime/uri").default';xQ.default=C2e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=uf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=qn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=ek,i=_S,s=ab,o=Vl,a=qn,l=zo,u=Us,c=Ct,d=Rmt,f=xQ,h=(N,V)=>new RegExp(N,V);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(N){var V,W,F,H,G,Q,ie,se,ne,ce,Ee,de,We,Fe,Ne,je,ye,ae,Pe,Be,ft,Se,he,Ve,tt;const ge=N.strict,ke=(V=N.code)===null||V===void 0?void 0:V.optimize,Ye=ke===!0||ke===void 0?1:ke||0,Xe=(F=(W=N.code)===null||W===void 0?void 0:W.regExp)!==null&&F!==void 0?F:h,xt=(H=N.uriResolver)!==null&&H!==void 0?H:f.default;return{strictSchema:(Q=(G=N.strictSchema)!==null&&G!==void 0?G:ge)!==null&&Q!==void 0?Q:!0,strictNumbers:(se=(ie=N.strictNumbers)!==null&&ie!==void 0?ie:ge)!==null&&se!==void 0?se:!0,strictTypes:(ce=(ne=N.strictTypes)!==null&&ne!==void 0?ne:ge)!==null&&ce!==void 0?ce:"log",strictTuples:(de=(Ee=N.strictTuples)!==null&&Ee!==void 0?Ee:ge)!==null&&de!==void 0?de:"log",strictRequired:(Fe=(We=N.strictRequired)!==null&&We!==void 0?We:ge)!==null&&Fe!==void 0?Fe:!1,code:N.code?{...N.code,optimize:Ye,regExp:Xe}:{optimize:Ye,regExp:Xe},loopRequired:(Ne=N.loopRequired)!==null&&Ne!==void 0?Ne:v,loopEnum:(je=N.loopEnum)!==null&&je!==void 0?je:v,meta:(ye=N.meta)!==null&&ye!==void 0?ye:!0,messages:(ae=N.messages)!==null&&ae!==void 0?ae:!0,inlineRefs:(Pe=N.inlineRefs)!==null&&Pe!==void 0?Pe:!0,schemaId:(Be=N.schemaId)!==null&&Be!==void 0?Be:"$id",addUsedSchema:(ft=N.addUsedSchema)!==null&&ft!==void 0?ft:!0,validateSchema:(Se=N.validateSchema)!==null&&Se!==void 0?Se:!0,validateFormats:(he=N.validateFormats)!==null&&he!==void 0?he:!0,unicodeRegExp:(Ve=N.unicodeRegExp)!==null&&Ve!==void 0?Ve:!0,int32range:(tt=N.int32range)!==null&&tt!==void 0?tt:!0,uriResolver:xt}}class w{constructor(V={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,V=this.opts={...V,..._(V)};const{es5:W,lines:F}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:F}),this.logger=D(V.logger);const H=V.validateFormats;V.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,V,"NOT SUPPORTED"),E.call(this,y,V,"DEPRECATED","warn"),this._metaOpts=P.call(this),V.formats&&T.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),V.keywords&&I.call(this,V.keywords),typeof V.meta=="object"&&this.addMetaSchema(V.meta),x.call(this),V.validateFormats=H}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:V,meta:W,schemaId:F}=this.opts;let H=d;F==="id"&&(H={...d},H.id=H.$id,delete H.$id),W&&V&&this.addMetaSchema(H,H[F],!1)}defaultMeta(){const{meta:V,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof V=="object"?V[W]||V:void 0}validate(V,W){let F;if(typeof V=="string"){if(F=this.getSchema(V),!F)throw new Error(`no schema with key or ref "${V}"`)}else F=this.compile(V);const H=F(W);return"$async"in F||(this.errors=F.errors),H}compile(V,W){const F=this._addSchema(V,W);return F.validate||this._compileSchemaEnv(F)}compileAsync(V,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:F}=this.opts;return H.call(this,V,W);async function H(ce,Ee){await G.call(this,ce.$schema);const de=this._addSchema(ce,Ee);return de.validate||Q.call(this,de)}async function G(ce){ce&&!this.getSchema(ce)&&await H.call(this,{$ref:ce},!0)}async function Q(ce){try{return this._compileSchemaEnv(ce)}catch(Ee){if(!(Ee instanceof i.default))throw Ee;return ie.call(this,Ee),await se.call(this,Ee.missingSchema),Q.call(this,ce)}}function ie({missingSchema:ce,missingRef:Ee}){if(this.refs[ce])throw new Error(`AnySchema ${ce} is loaded but ${Ee} cannot be resolved`)}async function se(ce){const Ee=await ne.call(this,ce);this.refs[ce]||await G.call(this,Ee.$schema),this.refs[ce]||this.addSchema(Ee,ce,W)}async function ne(ce){const Ee=this._loading[ce];if(Ee)return Ee;try{return await(this._loading[ce]=F(ce))}finally{delete this._loading[ce]}}}addSchema(V,W,F,H=this.opts.validateSchema){if(Array.isArray(V)){for(const Q of V)this.addSchema(Q,void 0,F,H);return this}let G;if(typeof V=="object"){const{schemaId:Q}=this.opts;if(G=V[Q],G!==void 0&&typeof G!="string")throw new Error(`schema ${Q} must be string`)}return W=(0,l.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(V,F,W,H,!0),this}addMetaSchema(V,W,F=this.opts.validateSchema){return this.addSchema(V,W,!0,F),this}validateSchema(V,W){if(typeof V=="boolean")return!0;let F;if(F=V.$schema,F!==void 0&&typeof F!="string")throw new Error("$schema must be a string");if(F=F||this.opts.defaultMeta||this.defaultMeta(),!F)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const H=this.validate(F,V);if(!H&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return H}getSchema(V){let W;for(;typeof(W=S.call(this,V))=="string";)V=W;if(W===void 0){const{schemaId:F}=this.opts,H=new o.SchemaEnv({schema:{},schemaId:F});if(W=o.resolveSchema.call(this,H,V),!W)return;this.refs[V]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(V){if(V instanceof RegExp)return this._removeAllSchemas(this.schemas,V),this._removeAllSchemas(this.refs,V),this;switch(typeof V){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=S.call(this,V);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[V],delete this.refs[V],this}case"object":{const W=V;this._cache.delete(W);let F=V[this.opts.schemaId];return F&&(F=(0,l.normalizeId)(F),delete this.schemas[F],delete this.refs[F]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(V){for(const W of V)this.addKeyword(W);return this}addKeyword(V,W){let F;if(typeof V=="string")F=V,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=F);else if(typeof V=="object"&&W===void 0){if(W=V,F=W.keyword,Array.isArray(F)&&!F.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(M.call(this,F,W),!W)return(0,c.eachItem)(F,G=>$.call(this,G)),this;B.call(this,W);const H={...W,type:(0,u.getJSONTypes)(W.type),schemaType:(0,u.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(F,H.type.length===0?G=>$.call(this,G,H):G=>H.type.forEach(Q=>$.call(this,G,H,Q))),this}getKeyword(V){const W=this.RULES.all[V];return typeof W=="object"?W.definition:!!W}removeKeyword(V){const{RULES:W}=this;delete W.keywords[V],delete W.all[V];for(const F of W.rules){const H=F.rules.findIndex(G=>G.keyword===V);H>=0&&F.rules.splice(H,1)}return this}addFormat(V,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[V]=W,this}errorsText(V=this.errors,{separator:W=", ",dataVar:F="data"}={}){return!V||V.length===0?"No errors":V.map(H=>`${F}${H.instancePath} ${H.message}`).reduce((H,G)=>H+W+G)}$dataMetaSchema(V,W){const F=this.RULES.all;V=JSON.parse(JSON.stringify(V));for(const H of W){const G=H.split("/").slice(1);let Q=V;for(const ie of G)Q=Q[ie];for(const ie in F){const se=F[ie];if(typeof se!="object")continue;const{$data:ne}=se.definition,ce=Q[ie];ne&&ce&&(Q[ie]=z(ce))}}return V}_removeAllSchemas(V,W){for(const F in V){const H=V[F];(!W||W.test(F))&&(typeof H=="string"?delete V[F]:H&&!H.meta&&(this._cache.delete(H.schema),delete V[F]))}}_addSchema(V,W,F,H=this.opts.validateSchema,G=this.opts.addUsedSchema){let Q;const{schemaId:ie}=this.opts;if(typeof V=="object")Q=V[ie];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof V!="boolean")throw new Error("schema must be object or boolean")}let se=this._cache.get(V);if(se!==void 0)return se;F=(0,l.normalizeId)(Q||F);const ne=l.getSchemaRefs.call(this,V,F);return se=new o.SchemaEnv({schema:V,schemaId:ie,meta:W,baseId:F,localRefs:ne}),this._cache.set(se.schema,se),G&&!F.startsWith("#")&&(F&&this._checkUnique(F),this.refs[F]=se),H&&this.validateSchema(V,!0),se}_checkUnique(V){if(this.schemas[V]||this.refs[V])throw new Error(`schema with key or id "${V}" already exists`)}_compileSchemaEnv(V){if(V.meta?this._compileMetaSchema(V):o.compileSchema.call(this,V),!V.validate)throw new Error("ajv implementation error");return V.validate}_compileMetaSchema(V){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,V)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(N,V,W,F="error"){for(const H in N){const G=H;G in V&&this.logger[F](`${W}: option ${H}. ${N[G]}`)}}function S(N){return N=(0,l.normalizeId)(N),this.schemas[N]||this.refs[N]}function x(){const N=this.opts.schemas;if(N)if(Array.isArray(N))this.addSchema(N);else for(const V in N)this.addSchema(N[V],V)}function T(){for(const N in this.opts.formats){const V=this.opts.formats[N];V&&this.addFormat(N,V)}}function I(N){if(Array.isArray(N)){this.addVocabulary(N);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const V in N){const W=N[V];W.keyword||(W.keyword=V),this.addKeyword(W)}}function P(){const N={...this.opts};for(const V of p)delete N[V];return N}const k={log(){},warn(){},error(){}};function D(N){if(N===!1)return k;if(N===void 0)return console;if(N.log&&N.warn&&N.error)return N;throw new Error("logger must implement log, warn and error methods")}const R=/^[a-z_$][a-z0-9_$:-]*$/i;function M(N,V){const{RULES:W}=this;if((0,c.eachItem)(N,F=>{if(W.keywords[F])throw new Error(`Keyword ${F} is already defined`);if(!R.test(F))throw new Error(`Keyword ${F} has invalid name`)}),!!V&&V.$data&&!("code"in V||"validate"in V))throw new Error('$data keyword must have "code" or "validate" function')}function $(N,V,W){var F;const H=V==null?void 0:V.post;if(W&&H)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let Q=H?G.post:G.rules.find(({type:se})=>se===W);if(Q||(Q={type:W,rules:[]},G.rules.push(Q)),G.keywords[N]=!0,!V)return;const ie={keyword:N,definition:{...V,type:(0,u.getJSONTypes)(V.type),schemaType:(0,u.getJSONTypes)(V.schemaType)}};V.before?L.call(this,Q,ie,V.before):Q.rules.push(ie),G.all[N]=ie,(F=V.implements)===null||F===void 0||F.forEach(se=>this.addKeyword(se))}function L(N,V,W){const F=N.rules.findIndex(H=>H.keyword===W);F>=0?N.rules.splice(F,0,V):(N.rules.push(V),this.logger.warn(`rule ${W} is not defined`))}function B(N){let{metaSchema:V}=N;V!==void 0&&(N.$data&&this.opts.$data&&(V=z(V)),N.validateSchema=this.compile(V,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function z(N){return{anyOf:[N,U]}}})(YCe);var SQ={},TQ={},CQ={};Object.defineProperty(CQ,"__esModule",{value:!0});const Pmt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};CQ.default=Pmt;var lb={};Object.defineProperty(lb,"__esModule",{value:!0});lb.callRef=lb.getValidate=void 0;const Nmt=_S,fde=Vn,Ml=qn,F_=wp,hde=Vl,pN=Ct,Omt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:l}=r,{root:u}=s;if((n==="#"||n==="#/")&&i===u.baseId)return d();const c=hde.resolveRef.call(l,u,i,n);if(c===void 0)throw new Nmt.default(r.opts.uriResolver,i,n);if(c instanceof hde.SchemaEnv)return f(c);return h(c);function d(){if(s===u)return aD(e,o,s,s.$async);const p=t.scopeValue("root",{ref:u});return aD(e,(0,Ml._)`${p}.validate`,u,u.$async)}function f(p){const m=A2e(e,p);aD(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Ml.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Ml.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function A2e(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Ml._)`${n.scopeValue("wrapper",{ref:t})}.validate`}lb.getValidate=A2e;function aD(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:l}=s,u=l.passContext?F_.default.this:Ml.nil;r?c():d();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Ml._)`await ${(0,fde.callValidateCode)(e,t,u)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Ml._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),f(m),o||i.assign(p,!1)}),e.ok(p)}function d(){e.result((0,fde.callValidateCode)(e,t,u),()=>h(t),()=>f(t))}function f(p){const m=(0,Ml._)`${p}.errors`;i.assign(F_.default.vErrors,(0,Ml._)`${F_.default.vErrors} === null ? ${m} : ${F_.default.vErrors}.concat(${m})`),i.assign(F_.default.errors,(0,Ml._)`${F_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=pN.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Ml._)`${p}.evaluated.props`);s.props=pN.mergeEvaluated.props(i,y,s.props,Ml.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=pN.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Ml._)`${p}.evaluated.items`);s.items=pN.mergeEvaluated.items(i,y,s.items,Ml.Name)}}}lb.callRef=aD;lb.default=Omt;Object.defineProperty(TQ,"__esModule",{value:!0});const Dmt=CQ,Mmt=lb,$mt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Dmt.default,Mmt.default];TQ.default=$mt;var AQ={},IQ={};Object.defineProperty(IQ,"__esModule",{value:!0});const s$=qn,Fg=s$.operators,o$={maximum:{okStr:"<=",ok:Fg.LTE,fail:Fg.GT},minimum:{okStr:">=",ok:Fg.GTE,fail:Fg.LT},exclusiveMaximum:{okStr:"<",ok:Fg.LT,fail:Fg.GTE},exclusiveMinimum:{okStr:">",ok:Fg.GT,fail:Fg.LTE}},Lmt={message:({keyword:e,schemaCode:t})=>(0,s$.str)`must be ${o$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,s$._)`{comparison: ${o$[e].okStr}, limit: ${t}}`},Fmt={keyword:Object.keys(o$),type:"number",schemaType:"number",$data:!0,error:Lmt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,s$._)`${n} ${o$[t].fail} ${r} || isNaN(${n})`)}};IQ.default=Fmt;var RQ={};Object.defineProperty(RQ,"__esModule",{value:!0});const K2=qn,jmt={message:({schemaCode:e})=>(0,K2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,K2._)`{multipleOf: ${e}}`},Bmt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:jmt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,K2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,K2._)`${o} !== parseInt(${o})`;e.fail$data((0,K2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};RQ.default=Bmt;var kQ={},PQ={};Object.defineProperty(PQ,"__esModule",{value:!0});function I2e(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}PQ.default=I2e;I2e.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(kQ,"__esModule",{value:!0});const d1=qn,zmt=Ct,Umt=PQ,Vmt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,d1.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,d1._)`{limit: ${e}}`},Hmt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Vmt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?d1.operators.GT:d1.operators.LT,o=i.opts.unicode===!1?(0,d1._)`${n}.length`:(0,d1._)`${(0,zmt.useFunc)(e.gen,Umt.default)}(${n})`;e.fail$data((0,d1._)`${o} ${s} ${r}`)}};kQ.default=Hmt;var NQ={};Object.defineProperty(NQ,"__esModule",{value:!0});const qmt=Vn,a$=qn,Wmt={message:({schemaCode:e})=>(0,a$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,a$._)`{pattern: ${e}}`},Gmt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Wmt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,a$._)`(new RegExp(${i}, ${o}))`:(0,qmt.usePattern)(e,r);e.fail$data((0,a$._)`!${a}.test(${t})`)}};NQ.default=Gmt;var OQ={};Object.defineProperty(OQ,"__esModule",{value:!0});const X2=qn,Ymt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,X2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,X2._)`{limit: ${e}}`},Kmt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Ymt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?X2.operators.GT:X2.operators.LT;e.fail$data((0,X2._)`Object.keys(${n}).length ${i} ${r}`)}};OQ.default=Kmt;var DQ={};Object.defineProperty(DQ,"__esModule",{value:!0});const jT=Vn,Q2=qn,Xmt=Ct,Qmt={message:({params:{missingProperty:e}})=>(0,Q2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Q2._)`{missingProperty: ${e}}`},Jmt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Qmt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const l=n.length>=a.loopRequired;if(o.allErrors?u():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,Xmt.checkStrictMode)(o,y,o.opts.strictRequired)}}function u(){if(l||s)e.block$data(Q2.nil,d);else for(const h of n)(0,jT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(l||s){const p=t.let("valid",!0);e.block$data(p,()=>f(h,p)),e.ok(p)}else t.if((0,jT.checkMissingProp)(e,n,h)),(0,jT.reportMissingProp)(e,h),t.else()}function d(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,jT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function f(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,jT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,Q2.not)(p),()=>{e.error(),t.break()})},Q2.nil)}}};DQ.default=Jmt;var MQ={};Object.defineProperty(MQ,"__esModule",{value:!0});const J2=qn,Zmt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,J2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,J2._)`{limit: ${e}}`},egt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Zmt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?J2.operators.GT:J2.operators.LT;e.fail$data((0,J2._)`${n}.length ${i} ${r}`)}};MQ.default=egt;var $Q={},tk={};Object.defineProperty(tk,"__esModule",{value:!0});const R2e=bQ;R2e.code='require("ajv/dist/runtime/equal").default';tk.default=R2e;Object.defineProperty($Q,"__esModule",{value:!0});const EB=Us,Oo=qn,tgt=Ct,ngt=tk,rgt={message:({params:{i:e,j:t}})=>(0,Oo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Oo._)`{i: ${e}, j: ${t}}`},igt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:rgt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const l=t.let("valid"),u=s.items?(0,EB.getSchemaTypes)(s.items):[];e.block$data(l,c,(0,Oo._)`${o} === false`),e.ok(l);function c(){const p=t.let("i",(0,Oo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(l,!0),t.if((0,Oo._)`${p} > 1`,()=>(d()?f:h)(p,m))}function d(){return u.length>0&&!u.some(p=>p==="object"||p==="array")}function f(p,m){const g=t.name("item"),y=(0,EB.checkDataTypes)(u,g,a.opts.strictNumbers,EB.DataType.Wrong),v=t.const("indices",(0,Oo._)`{}`);t.for((0,Oo._)`;${p}--;`,()=>{t.let(g,(0,Oo._)`${n}[${p}]`),t.if(y,(0,Oo._)`continue`),u.length>1&&t.if((0,Oo._)`typeof ${g} == "string"`,(0,Oo._)`${g} += "_"`),t.if((0,Oo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,Oo._)`${v}[${g}]`),e.error(),t.assign(l,!1).break()}).code((0,Oo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,tgt.useFunc)(t,ngt.default),y=t.name("outer");t.label(y).for((0,Oo._)`;${p}--;`,()=>t.for((0,Oo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,Oo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(l,!1).break(y)})))}}};$Q.default=igt;var LQ={};Object.defineProperty(LQ,"__esModule",{value:!0});const bV=qn,sgt=Ct,ogt=tk,agt={message:"must be equal to constant",params:({schemaCode:e})=>(0,bV._)`{allowedValue: ${e}}`},lgt={keyword:"const",$data:!0,error:agt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,bV._)`!${(0,sgt.useFunc)(t,ogt.default)}(${n}, ${i})`):e.fail((0,bV._)`${s} !== ${n}`)}};LQ.default=lgt;var FQ={};Object.defineProperty(FQ,"__esModule",{value:!0});const OC=qn,ugt=Ct,cgt=tk,dgt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,OC._)`{allowedValues: ${e}}`},fgt={keyword:"enum",schemaType:"array",$data:!0,error:dgt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let l;const u=()=>l??(l=(0,ugt.useFunc)(t,cgt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,d);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,OC.or)(...i.map((p,m)=>f(h,m)))}e.pass(c);function d(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,OC._)`${u()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function f(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,OC._)`${u()}(${n}, ${h}[${p}])`:(0,OC._)`${n} === ${m}`}}};FQ.default=fgt;Object.defineProperty(AQ,"__esModule",{value:!0});const hgt=IQ,pgt=RQ,mgt=kQ,ggt=NQ,ygt=OQ,vgt=DQ,bgt=MQ,_gt=$Q,wgt=LQ,Egt=FQ,xgt=[hgt.default,pgt.default,mgt.default,ggt.default,ygt.default,vgt.default,bgt.default,_gt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},wgt.default,Egt.default];AQ.default=xgt;var jQ={},wS={};Object.defineProperty(wS,"__esModule",{value:!0});wS.validateAdditionalItems=void 0;const f1=qn,_V=Ct,Sgt={message:({params:{len:e}})=>(0,f1.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,f1._)`{limit: ${e}}`},Tgt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Sgt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,_V.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}k2e(e,r)}};function k2e(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,f1._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,f1._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,_V.alwaysValidSchema)(o,r)){const u=n.var("valid",(0,f1._)`${a} <= ${t.length}`);n.if((0,f1.not)(u),()=>l(u)),e.ok(u)}function l(u){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:_V.Type.Num},u),o.allErrors||n.if((0,f1.not)(u),()=>n.break())})}}wS.validateAdditionalItems=k2e;wS.default=Tgt;var BQ={},ES={};Object.defineProperty(ES,"__esModule",{value:!0});ES.validateTuple=void 0;const pde=qn,lD=Ct,Cgt=Vn,Agt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return P2e(e,"additionalItems",t);n.items=!0,!(0,lD.alwaysValidSchema)(n,t)&&e.ok((0,Cgt.validateArray)(e))}};function P2e(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=lD.mergeEvaluated.items(r,n.length,a.items));const l=r.name("valid"),u=r.const("len",(0,pde._)`${s}.length`);n.forEach((d,f)=>{(0,lD.alwaysValidSchema)(a,d)||(r.if((0,pde._)`${u} > ${f}`,()=>e.subschema({keyword:o,schemaProp:f,dataProp:f},l)),e.ok(l))});function c(d){const{opts:f,errSchemaPath:h}=a,p=n.length,m=p===d.minItems&&(p===d.maxItems||d[t]===!1);if(f.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,lD.checkStrictMode)(a,g,f.strictTuples)}}}ES.validateTuple=P2e;ES.default=Agt;Object.defineProperty(BQ,"__esModule",{value:!0});const Igt=ES,Rgt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Igt.validateTuple)(e,"items")};BQ.default=Rgt;var zQ={};Object.defineProperty(zQ,"__esModule",{value:!0});const mde=qn,kgt=Ct,Pgt=Vn,Ngt=wS,Ogt={message:({params:{len:e}})=>(0,mde.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,mde._)`{limit: ${e}}`},Dgt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Ogt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,kgt.alwaysValidSchema)(r,t)&&(i?(0,Ngt.validateAdditionalItems)(e,i):e.ok((0,Pgt.validateArray)(e)))}};zQ.default=Dgt;var UQ={};Object.defineProperty(UQ,"__esModule",{value:!0});const Cc=qn,mN=Ct,Mgt={message:({params:{min:e,max:t}})=>t===void 0?(0,Cc.str)`must contain at least ${e} valid item(s)`:(0,Cc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Cc._)`{minContains: ${e}}`:(0,Cc._)`{minContains: ${e}, maxContains: ${t}}`},$gt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Mgt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:l,maxContains:u}=r;s.opts.next?(o=l===void 0?1:l,a=u):o=1;const c=t.const("len",(0,Cc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,mN.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,mN.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,mN.alwaysValidSchema)(s,n)){let m=(0,Cc._)`${c} >= ${o}`;a!==void 0&&(m=(0,Cc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const d=t.name("valid");a===void 0&&o===1?h(d,()=>t.if(d,()=>t.break())):o===0?(t.let(d,!0),a!==void 0&&t.if((0,Cc._)`${i}.length > 0`,f)):(t.let(d,!1),f()),e.result(d,()=>e.reset());function f(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:mN.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Cc._)`${m}++`),a===void 0?t.if((0,Cc._)`${m} >= ${o}`,()=>t.assign(d,!0).break()):(t.if((0,Cc._)`${m} > ${a}`,()=>t.assign(d,!1).break()),o===1?t.assign(d,!0):t.if((0,Cc._)`${m} >= ${o}`,()=>t.assign(d,!0)))}}};UQ.default=$gt;var N2e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=qn,n=Ct,r=Vn;e.error={message:({params:{property:l,depsCount:u,deps:c}})=>{const d=u===1?"property":"properties";return(0,t.str)`must have ${d} ${c} when property ${l} is present`},params:({params:{property:l,depsCount:u,deps:c,missingProperty:d}})=>(0,t._)`{property: ${l},
    missingProperty: ${d},
    depsCount: ${u},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(l){const[u,c]=s(l);o(l,u),a(l,c)}};function s({schema:l}){const u={},c={};for(const d in l){if(d==="__proto__")continue;const f=Array.isArray(l[d])?u:c;f[d]=l[d]}return[u,c]}function o(l,u=l.schema){const{gen:c,data:d,it:f}=l;if(Object.keys(u).length===0)return;const h=c.let("missing");for(const p in u){const m=u[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,d,p,f.opts.ownProperties);l.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),f.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(l,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(l,m,h)})`),(0,r.reportMissingProp)(l,h),c.else())}}e.validatePropertyDeps=o;function a(l,u=l.schema){const{gen:c,data:d,keyword:f,it:h}=l,p=c.name("valid");for(const m in u)(0,n.alwaysValidSchema)(h,u[m])||(c.if((0,r.propertyInData)(c,d,m,h.opts.ownProperties),()=>{const g=l.subschema({keyword:f,schemaProp:m},p);l.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),l.ok(p))}e.validateSchemaDeps=a,e.default=i})(N2e);var VQ={};Object.defineProperty(VQ,"__esModule",{value:!0});const O2e=qn,Lgt=Ct,Fgt={message:"property name must be valid",params:({params:e})=>(0,O2e._)`{propertyName: ${e.propertyName}}`},jgt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Fgt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,Lgt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,O2e.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};VQ.default=jgt;var T6={};Object.defineProperty(T6,"__esModule",{value:!0});const gN=Vn,Rd=qn,Bgt=wp,yN=Ct,zgt={message:"must NOT have additional properties",params:({params:e})=>(0,Rd._)`{additionalProperty: ${e.additionalProperty}}`},Ugt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:zgt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,yN.alwaysValidSchema)(o,n))return;const u=(0,gN.allSchemaProperties)(r.properties),c=(0,gN.allSchemaProperties)(r.patternProperties);d(),e.ok((0,Rd._)`${s} === ${Bgt.default.errors}`);function d(){t.forIn("key",i,g=>{!u.length&&!c.length?p(g):t.if(f(g),()=>p(g))})}function f(g){let y;if(u.length>8){const v=(0,yN.schemaRefOrVal)(o,r.properties,"properties");y=(0,gN.isOwnProperty)(t,v,g)}else u.length?y=(0,Rd.or)(...u.map(v=>(0,Rd._)`${g} === ${v}`)):y=Rd.nil;return c.length&&(y=(0,Rd.or)(y,...c.map(v=>(0,Rd._)`${(0,gN.usePattern)(e,v)}.test(${g})`))),(0,Rd.not)(y)}function h(g){t.code((0,Rd._)`delete ${i}[${g}]`)}function p(g){if(l.removeAdditional==="all"||l.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,yN.alwaysValidSchema)(o,n)){const y=t.name("valid");l.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Rd.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Rd.not)(y),()=>t.break()))}}function m(g,y,v){const _={keyword:"additionalProperties",dataProp:g,dataPropType:yN.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};T6.default=Ugt;var HQ={};Object.defineProperty(HQ,"__esModule",{value:!0});const Vgt=uf,gde=Vn,xB=Ct,yde=T6,Hgt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&yde.default.code(new Vgt.KeywordCxt(s,yde.default,"additionalProperties"));const o=(0,gde.allSchemaProperties)(n);for(const d of o)s.definedProperties.add(d);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=xB.mergeEvaluated.props(t,(0,xB.toHash)(o),s.props));const a=o.filter(d=>!(0,xB.alwaysValidSchema)(s,n[d]));if(a.length===0)return;const l=t.name("valid");for(const d of a)u(d)?c(d):(t.if((0,gde.propertyInData)(t,i,d,s.opts.ownProperties)),c(d),s.allErrors||t.else().var(l,!0),t.endIf()),e.it.definedProperties.add(d),e.ok(l);function u(d){return s.opts.useDefaults&&!s.compositeRule&&n[d].default!==void 0}function c(d){e.subschema({keyword:"properties",schemaProp:d,dataProp:d},l)}}};HQ.default=Hgt;var qQ={};Object.defineProperty(qQ,"__esModule",{value:!0});const vde=Vn,vN=qn,bde=Ct,_de=Ct,qgt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,vde.allSchemaProperties)(n),l=a.filter(m=>(0,bde.alwaysValidSchema)(s,n[m]));if(a.length===0||l.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const u=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof vN.Name)&&(s.props=(0,_de.evaluatedPropsToName)(t,s.props));const{props:d}=s;f();function f(){for(const m of a)u&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in u)new RegExp(m).test(g)&&(0,bde.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,vN._)`${(0,vde.usePattern)(e,m)}.test(${g})`,()=>{const y=l.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:_de.Type.Str},c),s.opts.unevaluated&&d!==!0?t.assign((0,vN._)`${d}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,vN.not)(c),()=>t.break())})})}}};qQ.default=qgt;var WQ={};Object.defineProperty(WQ,"__esModule",{value:!0});const Wgt=Ct,Ggt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,Wgt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};WQ.default=Ggt;var GQ={};Object.defineProperty(GQ,"__esModule",{value:!0});const Ygt=Vn,Kgt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ygt.validateUnion,error:{message:"must match a schema in anyOf"}};GQ.default=Kgt;var YQ={};Object.defineProperty(YQ,"__esModule",{value:!0});const uD=qn,Xgt=Ct,Qgt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,uD._)`{passingSchemas: ${e.passing}}`},Jgt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Qgt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),l=t.name("_valid");e.setParams({passing:a}),t.block(u),e.result(o,()=>e.reset(),()=>e.error(!0));function u(){s.forEach((c,d)=>{let f;(0,Xgt.alwaysValidSchema)(i,c)?t.var(l,!0):f=e.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},l),d>0&&t.if((0,uD._)`${l} && ${o}`).assign(o,!1).assign(a,(0,uD._)`[${a}, ${d}]`).else(),t.if(l,()=>{t.assign(o,!0),t.assign(a,d),f&&e.mergeEvaluated(f,uD.Name)})})}}};YQ.default=Jgt;var KQ={};Object.defineProperty(KQ,"__esModule",{value:!0});const Zgt=Ct,e0t={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,Zgt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};KQ.default=e0t;var XQ={};Object.defineProperty(XQ,"__esModule",{value:!0});const l$=qn,D2e=Ct,t0t={message:({params:e})=>(0,l$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,l$._)`{failingKeyword: ${e.ifClause}}`},n0t={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:t0t,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,D2e.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=wde(r,"then"),s=wde(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(l(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,u("then",c),u("else",c))}else i?t.if(a,u("then")):t.if((0,l$.not)(a),u("else"));e.pass(o,()=>e.error(!0));function l(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function u(c,d){return()=>{const f=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(f,o),d?t.assign(d,(0,l$._)`${c}`):e.setParams({ifClause:c})}}}};function wde(e,t){const n=e.schema[t];return n!==void 0&&!(0,D2e.alwaysValidSchema)(e,n)}XQ.default=n0t;var QQ={};Object.defineProperty(QQ,"__esModule",{value:!0});const r0t=Ct,i0t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,r0t.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};QQ.default=i0t;Object.defineProperty(jQ,"__esModule",{value:!0});const s0t=wS,o0t=BQ,a0t=ES,l0t=zQ,u0t=UQ,c0t=N2e,d0t=VQ,f0t=T6,h0t=HQ,p0t=qQ,m0t=WQ,g0t=GQ,y0t=YQ,v0t=KQ,b0t=XQ,_0t=QQ;function w0t(e=!1){const t=[m0t.default,g0t.default,y0t.default,v0t.default,b0t.default,_0t.default,d0t.default,f0t.default,c0t.default,h0t.default,p0t.default];return e?t.push(o0t.default,l0t.default):t.push(s0t.default,a0t.default),t.push(u0t.default),t}jQ.default=w0t;var JQ={},ZQ={};Object.defineProperty(ZQ,"__esModule",{value:!0});const vs=qn,E0t={message:({schemaCode:e})=>(0,vs.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,vs._)`{format: ${e}}`},x0t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:E0t,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:l,errSchemaPath:u,schemaEnv:c,self:d}=a;if(!l.validateFormats)return;i?f():h();function f(){const p=n.scopeValue("formats",{ref:d.formats,code:l.code.formats}),m=n.const("fDef",(0,vs._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,vs._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,vs._)`${m}.type || "string"`).assign(y,(0,vs._)`${m}.validate`),()=>n.assign(g,(0,vs._)`"string"`).assign(y,m)),e.fail$data((0,vs.or)(v(),_()));function v(){return l.strictSchema===!1?vs.nil:(0,vs._)`${o} && !${y}`}function _(){const w=c.$async?(0,vs._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,vs._)`${y}(${r})`,E=(0,vs._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,vs._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=d.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=_(p);m===t&&e.pass(w());function v(){if(l.strictSchema===!1){d.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${u}"`}}function _(E){const S=E instanceof RegExp?(0,vs.regexpCode)(E):l.code.formats?(0,vs._)`${l.code.formats}${(0,vs.getProperty)(s)}`:void 0,x=n.scopeValue("formats",{key:s,ref:E,code:S});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,vs._)`${x}.validate`]:["string",E,x]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,vs._)`await ${y}(${r})`}return typeof g=="function"?(0,vs._)`${y}(${r})`:(0,vs._)`${y}.test(${r})`}}}};ZQ.default=x0t;Object.defineProperty(JQ,"__esModule",{value:!0});const S0t=ZQ,T0t=[S0t.default];JQ.default=T0t;var QE={};Object.defineProperty(QE,"__esModule",{value:!0});QE.contentVocabulary=QE.metadataVocabulary=void 0;QE.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];QE.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(SQ,"__esModule",{value:!0});const C0t=TQ,A0t=AQ,I0t=jQ,R0t=JQ,Ede=QE,k0t=[C0t.default,A0t.default,(0,I0t.default)(),R0t.default,Ede.metadataVocabulary,Ede.contentVocabulary];SQ.default=k0t;var eJ={},C6={};Object.defineProperty(C6,"__esModule",{value:!0});C6.DiscrError=void 0;var xde;(function(e){e.Tag="tag",e.Mapping="mapping"})(xde||(C6.DiscrError=xde={}));Object.defineProperty(eJ,"__esModule",{value:!0});const uw=qn,wV=C6,Sde=Vl,P0t=_S,N0t=Ct,O0t={message:({params:{discrError:e,tagName:t}})=>e===wV.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,uw._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},D0t={keyword:"discriminator",type:"object",schemaType:"object",error:O0t,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const l=t.let("valid",!1),u=t.const("tag",(0,uw._)`${n}${(0,uw.getProperty)(a)}`);t.if((0,uw._)`typeof ${u} == "string"`,()=>c(),()=>e.error(!1,{discrError:wV.DiscrError.Tag,tag:u,tagName:a})),e.ok(l);function c(){const h=f();t.if(!1);for(const p in h)t.elseIf((0,uw._)`${u} === ${p}`),t.assign(l,d(h[p]));t.else(),e.error(!1,{discrError:wV.DiscrError.Mapping,tag:u,tagName:a}),t.endIf()}function d(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,uw.Name),p}function f(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,N0t.schemaHasRulesButRef)(E,s.self.RULES)){const x=E.$ref;if(E=Sde.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,x),E instanceof Sde.SchemaEnv&&(E=E.schema),E===void 0)throw new P0t.default(s.opts.uriResolver,s.baseId,x)}const S=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(S,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)_(w.const,E);else if(w.enum)for(const S of w.enum)_(S,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};eJ.default=D0t;const M0t="http://json-schema.org/draft-07/schema#",$0t="http://json-schema.org/draft-07/schema#",L0t="Core schema meta-schema",F0t={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},j0t=["object","boolean"],B0t={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},z0t={$schema:M0t,$id:$0t,title:L0t,definitions:F0t,type:j0t,properties:B0t,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=YCe,r=SQ,i=eJ,s=z0t,o=["/properties"],a="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var u=uf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var c=qn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var d=ek;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return d.default}});var f=_S;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return f.default}})})(hV,hV.exports);var U0t=hV.exports;const M2e=bu(U0t),V0t="#/definitions/StudyConfig",H0t="http://json-schema.org/draft-07/schema#",q0t={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": [       {         "label": "Europe",         "value": "Europe"       },       {         "label": "Japan",         "value": "Japan"       },       {         "label": "USA",         "value": "USA"       }     ],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  },  {    "label": "Option 3",    "value": "opt-3"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": [  {    "label": "Red",    "value": "red"  },  {    "label": "Blue",    "value": "blue"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": [      {        "label": "Man",        "value": "Man"      },      {        "label": "Woman",        "value": "Woman"      },      {        "label": "Genderqueer",        "value": "Genderqueer"      },      {        "label": "Third-gender",        "value": "Third-gender"      },      ... etc.    ]  } ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},recordStudyAudio:{type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},tasksToNotRecordAudio:{items:{type:"string"},type:"array"},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},W0t={$ref:V0t,$schema:H0t,definitions:q0t},G0t="#/definitions/GlobalConfig",Y0t="http://json-schema.org/draft-07/schema#",K0t={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},X0t={$ref:G0t,$schema:Y0t,definitions:K0t},$2e=new M2e;$2e.addSchema(X0t);const Tde=$2e.getSchema("#/definitions/GlobalConfig"),L2e=new M2e;L2e.addSchema(W0t);const SB=L2e.getSchema("#/definitions/StudyConfig");function Q0t(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function A6(e){return e.baseComponent!==void 0}function J0t(e){const t=dQ.parse(e),n=Tde(t),r=Q0t(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Tde.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function F2e(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):F2e(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function Z0t(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;A6(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=zCe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return F2e(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function eyt(e){let t=!1,n;try{n=dQ.parse(e),t=SB(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=Z0t(n);r=[...SB.errors||[],...s],i=o}else r=SB.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function j2e(){const e=rv(),{setAlertModal:t}=nc(),n=ed();A.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Cde=Object.prototype.hasOwnProperty;function Ade(e,t,n){for(n of e.keys())if(Z2(n,t))return n}function Z2(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Z2(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Ade(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Ade(t,i),!i)||!Z2(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Cde.call(e,n)&&++r&&!Cde.call(t,n)||!(n in t)||!Z2(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function tyt(e){var t=A.useRef(e),n=A.useRef(0);return Z2(e,t.current)||(t.current=e,n.current+=1),A.useMemo(function(){return t.current},[n.current])}function nyt(e,t){return A.useEffect(e,tyt(t))}const Qd=(e,t=null)=>{const[n,r]=A.useState("idle"),[i,s]=A.useState(null),[o,a]=A.useState(null),l=A.useRef(),u=A.useRef(!1);A.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const c=A.useCallback((...d)=>{r("pending"),a(null);const f=Promise.resolve(e(...d)).then(h=>(u.current&&f===l.current&&(s(h),r("success")),h)).catch(h=>{throw u.current&&f===l.current&&(s(null),a(h),r("error")),h});return l.current=f,f},[e]);return nyt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},Ide=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],B2e=["participantId","trialId","trialOrder","responseId"];function tJ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function ryt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(Gc(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),l=n.components[o],u=A6(l)&&l.baseComponent&&n.baseComponents?aQ({},n.baseComponents[l.baseComponent],l):l,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([f,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:f},m=u.response.find(v=>v.id===f);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=u.description),t.includes("instruction")&&(p.instruction=u.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=u.correctAnswer)==null?void 0:g.find(_=>_.id===f))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(u.meta,null,2)),p}).flat()}).flat()}async function iyt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...B2e,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,u=(await Promise.all(t.map(async c=>await ryt(c,i,o[c.participantConfigHash])))).flat().sort((c,d)=>c!==d?c.participantId.localeCompare(d.participantId):c.trialOrder-d.trialOrder);return{header:a,rows:u}}function syt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=A.useState([...Ide].filter(h=>h!=="meta")),a=Pi(),{value:l,status:u,error:c}=Qd(iyt,[s,r,a.storageEngine,i]),d=A.useCallback(()=>{if(!l)return;const h=[l.header.join(","),...l.rows.map(p=>l.header.map(m=>p[m]).join(","))].join(`
`);tJ(h,n)},[n,l]),f=A.useMemo(()=>{if(!l)return"";const h=l.rows.length>5?5:l.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${l.rows.length} row${p}.`},[l]);return b.jsxs(Ss,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[b.jsx(VF,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Ide],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:b.jsx(ant,{}),variant:"filled"}),b.jsx(Wc,{h:"md"}),b.jsxs(_e,{mih:300,style:{width:"100%",overflow:"scroll"},children:[u==="success"&&l?b.jsxs(or,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[b.jsx(or.Thead,{children:b.jsx(or.Tr,{children:l.header.map(h=>b.jsx(or.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:b.jsxs(It,{direction:"row",justify:"space-between",align:"center",children:[h,!B2e.includes(h)&&b.jsx(Fn,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:b.jsx(i6,{size:16})})]})},h))})}),b.jsx(or.Tbody,{children:l.rows.slice(0,5).map((h,p)=>b.jsx(or.Tr,{children:l.header.map(m=>b.jsx(or.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):u==="error"&&c?b.jsx(aS,{variant:"light",children:c.message}):null,b.jsx(uu,{visible:u==="pending"||u==="idle"})]}),b.jsx(Wc,{h:"sm"}),b.jsx(It,{justify:"center",fz:"sm",c:"dimmed",children:b.jsx(nt,{children:f})}),b.jsx(Wc,{h:"md"}),b.jsxs(Tn,{justify:"right",children:[b.jsx(yn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),b.jsx(yn,{leftSection:b.jsx(CSe,{}),onClick:()=>d(),"data-autofocus":!0,children:"Download"})]})]})}function z2e(){const e=Zh(),{storageEngine:t}=Pi(),{answers:n}=Qo(v=>v),[r,i]=A.useState(!1);A.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),j2e();const[s,o]=A.useState(),[a,l]=A.useState(""),u=e.studyMetadata.title.replace(" ","_");A.useEffect(()=>{async function v(){if(t){const _=await t.getCurrentParticipantId(),w=await t.getParticipantData();l(_),o(w)}}v()},[t]);const c=A.useCallback(async()=>{tJ(JSON.stringify(s,null,2),`${u}_${a}.json`)},[u,s,a]),d=e.uiConfig.autoDownloadStudy||!1,f=d&&e.uiConfig.autoDownloadTime||-1,[h,p]=A.useState(Math.floor(f/1e3));A.useEffect(()=>{if(r){const v=setInterval(()=>{p(_=>_-1)},1e3);return h<=0?(d&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[d,r,h,c]);const m=bS(),[g,y]=A.useState(!1);return A.useEffect(()=>{(async()=>{if(t){const _=await t.getModes(m);y(_.dataCollectionEnabled)}})()},[t,m]),b.jsx(dl,{style:{height:"100%"},children:b.jsx(It,{direction:"column",children:r||!g?b.jsx(nt,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?b.jsx(fl,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):b.jsxs(b.Fragment,{children:[b.jsx(nt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),b.jsx(Wc,{h:"lg"}),b.jsx(dl,{children:b.jsx(ws,{color:"blue"})})]})})})}function Bh(e){return structuredClone(e)}const U2e=A.createContext(null);function oyt(){const e=A.useContext(U2e);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function Rde(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function ayt(){const e=rv(),t=oQ(),r=`${_p()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Qo(S=>S),a=ed(),{saveTrialAnswer:l,setIframeAnswers:u}=nc(),{storageEngine:c}=Pi(),d=bS(),[f,h]=A.useState(!0);A.useEffect(()=>{(async()=>{if(c){const x=await c.getModes(d);h(x.dataCollectionEnabled)}})()},[c,d]);const p=sht(r),m=typeof e!="number"||!p,g=uQ(),y=md(),v=Zh(),_=A.useMemo(()=>Date.now(),[]),w=oyt(),E=A.useCallback(()=>{if(typeof e!="number")return;const S=Bh(i[r]),x=Object.values(S).reduce(($,L)=>Object.hasOwn(L,"values")?{...$,...L.values}:$,{}),{provenanceGraph:T}=S,I=Date.now(),P=w&&"current"in w&&w.current?w.current.splice(0,w.current.length):[];f&&!g.endTime&&(a(l({identifier:r,answer:x,startTime:_,endTime:I,provenanceGraph:T,windowEvents:P})),c&&c.saveAnswers({...o,[r]:{answer:x,startTime:_,endTime:I,provenanceGraph:T,windowEvents:P}}),a(u({})));let k=e+1;const D=nht(s,e),R=D!==null&&D.some($=>Object.hasOwn($.currentBlock,"skip")&&$.currentBlock.skip!==void 0),M={...o,[r]:{answer:x,startTime:_,endTime:I,provenanceGraph:T,windowEvents:P}};R&&[...D.flatMap(L=>L.currentBlock.skip?L.currentBlock.skip.map(B=>({...B,firstIndex:L.firstIndex,lastIndex:L.lastIndex})):[])].some(L=>{let B=!1;const U=Object.fromEntries(Object.entries(M).filter(([N])=>{const V=parseInt(N.slice(N.lastIndexOf("_")+1),10);return V>=L.firstIndex&&V<=e})),z=L.check!=="block"?Object.entries(U).filter(([N])=>N.slice(0,N.lastIndexOf("_"))===L.name):Object.entries(U);if(z.length===0)return!1;if(z.some(([N,V])=>!V))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(L,null,2)}`);if(L.check==="response"||L.check==="responses"){const[N,V]=z[0];L.check==="response"?B=L.value!==V.answer[L.responseId]:B=!Rde(V.answer,N,v.components[N.slice(0,N.lastIndexOf("_"))],v)}else if(L.check==="block"||L.check==="repeatedComponent"){if(z.length<L.value)return!1;const N=z.map(([F,H])=>Rde(H.answer,F,v.components[F.slice(0,F.lastIndexOf("_"))],v)),V=N.filter(F=>F).length,W=N.length-V;B=L.condition==="numCorrect"&&V===L.value||L.condition==="numIncorrect"&&W===L.value}if(B){const N=t.indexOf(L.to),V=N===-1?rht(s,L.to):-1;return k=N===-1?V:N,!0}return!1}),y(`/${d}/${k}${window.location.search}`)},[i,r,w,g,e,s,o,_,y,d,a,l,c,u,v,t]);return{isNextDisabled:m,goToNextStep:E}}function lyt({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>null,onClick:r}){const{isNextDisabled:i,goToNextStep:s}=ayt(),o=A.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return b.jsx(yn,{type:"submit",disabled:t||i,onClick:o,children:e})}function uyt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const cyt=typeof window<"u"?A.useLayoutEffect:A.useEffect;function Ro(e,t){cyt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function dyt(e,t){e&&uyt(e),Ro(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),Ro(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),Ro(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),Ro(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),Ro(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),Ro(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),Ro(`mantine-form:${e}:clear-errors`,t.clearErrors),Ro(`mantine-form:${e}:reset`,t.reset),Ro(`mantine-form:${e}:validate`,t.validate),Ro(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),Ro(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),Ro(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),Ro(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),Ro(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),Ro(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),Ro(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),Ro(`mantine-form:${e}:reset-touched`,t.resetTouched)}function fyt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function EV(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function hyt(e){const[t,n]=A.useState(EV(e)),r=A.useRef(t),i=A.useCallback(l=>{n(u=>{const c=EV(typeof l=="function"?l(u):l);return r.current=c,c})},[]),s=A.useCallback(()=>i({}),[]),o=A.useCallback(l=>{r.current[l]!==void 0&&i(u=>{const c={...u};return delete c[l],c})},[t]),a=A.useCallback((l,u)=>{u==null||u===!1?o(l):r.current[l]!==u&&i(c=>({...c,[l]:u}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function V2e(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function kde(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Pde(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=V2e(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([l])=>{if(!l.startsWith(`${i}.`))return!1;const u=kde(l,i);return Number.isNaN(u)?!1:u>=t}).forEach(([l,u])=>{const c=kde(l,i),d=l.replace(`${i}.${c}`,`${i}.${c+r}`);o[d]=u,a.add(d),a.has(l)||delete o[l]}),o}function pyt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let l,u;if(a.startsWith(i)&&(l=a,u=a.replace(i,s)),a.startsWith(s)&&(l=a.replace(s,i),u=a),l&&u){const c=o[l],d=o[u];return d===void 0?delete o[l]:o[l]=d,c===void 0?delete o[u]:o[u]=c,!1}return!0}),o}function Nde(e,t,n){typeof n.value=="object"&&(n.value=Lw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Lw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(Lw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(Lw(a),Lw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(Lw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Nde(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Nde(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function H2e(e){return typeof e!="string"?[]:e.split(".")}function Gl(e,t){const n=H2e(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function I6(e,t,n){const r=H2e(e);if(r.length===0)return n;const i=Lw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function myt(e,{from:t,to:n},r){const i=Gl(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),I6(e,s,r)}function gyt(e,t,n,r){const i=Gl(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),I6(e,s,r)}function yyt(e,t,n){const r=Gl(e,n);return Array.isArray(r)?I6(e,r.filter((i,s)=>s!==t),n):n}function vyt({$values:e,$errors:t,$status:n}){const r=A.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(l=>pyt(o,a,l)),e.setValues({values:myt(o,a,e.refValues.current),updateState:!0})},[]),i=A.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(l=>Pde(o,a,l,-1)),e.setValues({values:yyt(o,a,e.refValues.current),updateState:!0})},[]),s=A.useCallback((o,a,l)=>{n.clearFieldDirty(o),t.setErrors(u=>Pde(o,l,u,1)),e.setValues({values:gyt(o,a,l,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}function bN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function byt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=A.useState(t),[o,a]=A.useState(e),l=A.useRef(t),u=A.useRef(e),c=A.useCallback(E=>{const S=typeof E=="function"?E(l.current):E;l.current=S,n==="controlled"&&s(S)},[]),d=A.useCallback(E=>{const S=typeof E=="function"?E(u.current):E;u.current=S,n==="controlled"&&a(S)},[]),f=A.useCallback(()=>c({}),[]),h=E=>{const S=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),d({})},p=A.useCallback((E,S)=>{c(x=>bN(x,E)===S?x:{...x,[E]:S})},[]),m=A.useCallback((E,S)=>{d(x=>bN(x,E)===S?x:{...x,[E]:S})},[]),g=A.useCallback(E=>bN(l.current,E),[]),y=A.useCallback(E=>d(S=>{if(typeof E!="string")return S;const x=V2e(E,S);return delete x[E],sD(x,S)?S:x}),[]),v=A.useCallback(E=>{if(E){const x=Gl(E,u.current);if(typeof x=="boolean")return x;const T=Gl(E,r.refValues.current),I=Gl(E,r.valuesSnapshot.current);return!sD(T,I)}return Object.keys(u.current).length>0?bN(u.current):!sD(r.refValues.current,r.valuesSnapshot.current)},[]),_=A.useCallback(()=>u.current,[]),w=A.useCallback(()=>l.current,[]);return{touchedState:i,dirtyState:o,touchedRef:l,dirtyRef:u,setTouched:c,setDirty:d,resetDirty:h,resetTouched:f,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:_,getTouched:w}}function _yt({initialValues:e,onValuesChange:t,mode:n}){const r=A.useRef(!1),[i,s]=A.useState(e||{}),o=A.useRef(i),a=A.useRef(i),l=A.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,_=p instanceof Function?p(o.current):p,w=y?{...v,..._}:_;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),u=A.useCallback(p=>{var y;const m=Gl(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,_=I6(p.path,g,o.current);l({values:_,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:_,previousValues:v}))}},[l]),c=A.useCallback(p=>{a.current=p},[]),d=A.useCallback((p,m)=>{r.current||(r.current=!0,l({values:p,updateState:n==="controlled"}),c(p),m())},[l]),f=A.useCallback(()=>{l({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[l]),h=A.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:l,setFieldValue:u,resetValues:f,setValuesSnapshot:c,initialize:d,getValues:h}}function wyt({$status:e}){const t=A.useRef({}),n=A.useCallback((i,s)=>{A.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=A.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Gl(i,o.previousValues),value:Gl(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Ode(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Dde(e){const t=EV(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function xV(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,l=Gl(a,t);let u=!1;return typeof o=="function"&&(i[a]=o(l,t,a)),typeof o=="object"&&Array.isArray(l)&&(u=!0,l.forEach((c,d)=>xV(o,t,`${a}.${d}`,i))),typeof o=="object"&&typeof l=="object"&&l!==null&&(u||xV(o,t,a,i)),i},r)}function SV(e,t){return Dde(typeof e=="function"?e(t):xV(e,t))}function _N(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=SV(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const Eyt="__MANTINE_FORM_INDEX__";function Mde(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${Eyt}`)):!1:!1}function q2e({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:l=!1,onValuesChange:u,transformValues:c=h=>h,enhanceGetInputProps:d,validate:f}={}){const h=hyt(r),p=_yt({initialValues:n,onValuesChange:u,mode:t}),m=byt({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=vyt({$values:p,$errors:h,$status:m}),y=wyt({$status:m}),[v,_]=A.useState(0),[w,E]=A.useState({}),S=A.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&_(N=>N+1)},[]),x=A.useCallback(N=>{p.initialize(N,()=>t==="uncontrolled"&&_(V=>V+1))},[]),T=A.useCallback((N,V,W)=>{const F=Mde(N,a);m.clearFieldDirty(N),m.setFieldTouched(N,!0),!F&&o&&h.clearFieldError(N),p.setFieldValue({path:N,value:V,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(N),F?H=>{const G=_N(N,f,H.updatedValues);G.hasError?h.setFieldError(N,G.error):h.clearFieldError(N)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(H=>({...H,[N]:(H[N]||0)+1})):null]})},[u,f]),I=A.useCallback(N=>{const V=p.refValues.current;p.setValues({values:N,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&_(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const F=Gl(W,p.refValues.current),H=Gl(W,V);F!==H&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:V,updatedValues:p.refValues.current}))})},[u,o]),P=A.useCallback(()=>{const N=SV(f,p.refValues.current);return h.setErrors(N.errors),N},[f]),k=A.useCallback(N=>{const V=_N(N,f,p.refValues.current);return V.hasError?h.setFieldError(N,V.error):h.clearFieldError(N),V},[f]),D=(N,{type:V="input",withError:W=!0,withFocus:F=!0,...H}={})=>{const Q={onChange:fyt(ie=>T(N,ie,{forceUpdate:!1})),"data-path":Ode(e,N)};return W&&(Q.error=h.errorsState[N]),V==="checkbox"?Q[t==="controlled"?"checked":"defaultChecked"]=Gl(N,p.refValues.current):Q[t==="controlled"?"value":"defaultValue"]=Gl(N,p.refValues.current),F&&(Q.onFocus=()=>m.setFieldTouched(N,!0),Q.onBlur=()=>{if(Mde(N,l)){const ie=_N(N,f,p.refValues.current);ie.hasError?h.setFieldError(N,ie.error):h.clearFieldError(N)}}),Object.assign(Q,d==null?void 0:d({inputProps:Q,field:N,options:{type:V,withError:W,withFocus:F,...H},form:z}))},R=(N,V)=>W=>{W==null||W.preventDefault();const F=P();F.hasErrors?V==null||V(F.errors,p.refValues.current,W):N==null||N(c(p.refValues.current),W)},M=N=>c(N||p.refValues.current),$=A.useCallback(N=>{N.preventDefault(),S()},[]),L=A.useCallback(N=>N?!_N(N,f,p.refValues.current).hasError:!SV(f,p.refValues.current).hasErrors,[f]),B=N=>`${v}-${N}-${w[N]||0}`,U=A.useCallback(N=>document.querySelector(`[data-path="${Ode(e,N)}"]`),[]),z={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:x,setValues:I,setFieldValue:T,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:S,validate:P,validateField:k,getInputProps:D,onSubmit:R,onReset:$,isValid:L,getTransformedValues:M,key:B,getInputNode:U};return dyt(e,z),z}function xyt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Syt(e){return xyt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const Tyt=new URLSearchParams(window.location.search),Cyt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?Tyt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},Ayt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function Iyt(e,t,n){const[r,i]=A.useState(null),s=q2e({initialValues:Cyt(e,n),validate:Ayt(e)});return A.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function e_(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function Ryt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:l}=e;return b.jsx(_f.Group,{label:b.jsxs(It,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(fl,{text:s,required:o})})]}),description:l,...n,error:e_(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsx(Tn,{mt:"xs",children:a.map(u=>b.jsx(_f,{disabled:t,value:u.value,label:u.label},u.value))})})}function kyt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:l,secondaryText:u}=e;return b.jsx(nu,{disabled:t,label:b.jsxs(It,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(fl,{text:o,required:a})})]}),description:u,placeholder:s,data:l,radius:"md",size:"md",...n,error:e_(e,n,l)})}function Pyt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return b.jsx(Kr.Wrapper,{label:b.jsxs(It,{direction:"row",wrap:"nowrap",gap:4,children:[r&&b.jsx(_e,{style:{minWidth:"fit-content"},children:`${n}. `}),b.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(fl,{text:i,required:s})})]}),description:o,size:"md",children:b.jsx(af,{children:Array.isArray(t.value)?t.value.map(a=>b.jsx(af.Item,{children:a},a)):b.jsx(af.Item,{children:t.value})})})}function W2e({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:l,rightLabel:u,secondaryText:c}=e;return b.jsx(ay.Group,{name:`radioInput${e.id}`,label:b.jsxs(It,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(fl,{text:s,required:o})})]}),description:c,...n,error:e_(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsxs(Tn,{mt:"xs",children:[l?b.jsx(nt,{style:{textAlign:"center"},children:l}):null,a.map(d=>b.jsx(ay,{disabled:t,value:d.value,label:d.label},d.label)),b.jsx(nt,{children:u})]})},e.id)}function Nyt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let l=1;l<=+s;l+=1)o.push({label:`${l}`,value:`${l}`});const a={...e,type:"radio",options:o};return b.jsx(W2e,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function Oyt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:l,placeholder:u,secondaryText:c}=e;return b.jsx(XK,{disabled:t,placeholder:u,label:b.jsxs(It,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(fl,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:l,...n,error:e_(e,n)})}function Dyt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:l}=e,u=e_(e,n);return b.jsx(Kr.Wrapper,{label:b.jsxs(It,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(fl,{text:s,required:o})})]}),description:l,error:u,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsx(e6,{disabled:t,marks:a,...n,h:40})})}function Myt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:l}=e;return b.jsx(lf,{disabled:t,placeholder:s,label:b.jsxs(It,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(fl,{text:o,required:a})})]}),description:l,radius:"md",size:"md",...n,value:n.value||"",error:e_(e,n)})}function $yt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:l}=e;return b.jsx(KA,{disabled:t,placeholder:s,label:b.jsxs(It,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(fl,{text:o,required:a})})]}),description:l,radius:"md",size:"md",...n,value:n.value||"",error:e_(e,n)})}function Lyt({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=SX(),l=Zh().uiConfig.enumerateQuestions??!1,u=A.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return b.jsxs(_e,{mb:"md",children:[e.type==="numerical"&&b.jsx(Oyt,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="shortText"&&b.jsx(Myt,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="longText"&&b.jsx($yt,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="likert"&&b.jsx(Nyt,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="dropdown"&&b.jsx(kyt,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="slider"&&b.jsx(Dyt,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="radio"&&b.jsx(W2e,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="checkbox"&&b.jsx(Ryt,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="iframe"&&b.jsx(Pyt,{response:e,answer:i,index:r,enumerateQuestions:l})]})}function u$({config:e,location:t,status:n,style:r}){var w;const i=rv(),s=_p(),o=n==null?void 0:n.answer,a=e,l=A.useMemo(()=>{var E;return((E=a==null?void 0:a.response)==null?void 0:E.filter(S=>S.location?S.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),u=ed(),{updateResponseBlockValidation:c}=nc(),d=Iyt(l,i,o||{}),[f,h]=A.useState(void 0),[p,m]=A.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Qo(E=>E),v=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,_=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return A.useEffect(()=>{const E=l.find(S=>S.type==="iframe");if(g&&E){const S=E.id;d.setValues({...d.values,[S]:g[S]})}},[g]),A.useEffect(()=>{y&&h(y)},[y]),A.useEffect(()=>{u(c({location:t,identifier:`${s}_${i}`,status:d.isValid(),values:Bh(d.values),provenanceGraph:f}))},[d.values,s,i,t,u,c,f]),b.jsxs("div",{style:r,children:[l.map((E,S)=>{var x,T;return b.jsx(us.Fragment,{children:E.hidden?"":b.jsxs(b.Fragment,{children:[b.jsx(Lyt,{storedAnswer:o?o[E.id]:void 0,answer:{...d.getInputProps(E.id,{type:E.type==="checkbox"?"checkbox":"input"})},response:E,index:S+1}),v&&p&&b.jsx(nt,{children:`The correct answer is: ${(T=(x=a.correctAnswer)==null?void 0:x.find(I=>I.id===E.id))==null?void 0:T.answer}`})]})},`${E.id}-${i}`)}),b.jsxs(Tn,{justify:"right",gap:"xs",children:[v&&_&&b.jsx(yn,{onClick:()=>m(!0),disabled:!d.isValid(),children:"Check Answer"}),_&&b.jsx(lyt,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}function Fyt({columns:e,catColumns:t,onAdd:n,onAddHistogram:r}){const[i,s]=A.useState(!1),[o,a]=A.useState(null),[l,u]=A.useState(null),[c,d]=A.useState(null);return i?b.jsxs(ci,{children:[b.jsx(nu,{data:e,onChange:f=>a(f),placeholder:"Select X Column"}),b.jsx(nu,{data:e,onChange:f=>u(f),placeholder:"Select Y Column"}),b.jsx(yn,{disabled:!o||!l,onClick:()=>{n(o,l),s(!1)},children:"Create plot"}),b.jsx(nu,{data:t,onChange:f=>d(f),placeholder:"Select X Column"}),b.jsx(yn,{disabled:!c,onClick:()=>{r(c),s(!1)},children:"Add Histogram"})]}):b.jsx(ci,{children:b.jsx(Fn,{variant:"light",size:150,onClick:()=>s(!0),children:b.jsx(ESe,{size:50})})})}const jyt=Object.freeze(Object.defineProperty({__proto__:null,AddPlot:Fyt},Symbol.toStringTag,{value:"Module"})),G2e=A.createContext(null),nJ=({id:e="waveform",children:t})=>us.createElement("div",{id:e},t),Byt=["audioRate","audioContext","audioScriptProcessor","autoCenter","backend","backgroundColor","barGap","barHeight","barMinHeight","barRadius","barWidth","closeAudioContext","cursorColor","cursorWidth","fillParent","forceDecode","height","hideScrollbar","interact","loopSelection","maxCanvasWidth","mediaControls","mediaType","minPxPerSec","normalize","partialRender","pixelRatio","progressColor","removeMediaElementOnDestroy","renderer","responsive","scrollParent","skipLength","splitChannels","waveColor","autoCenterRate","autoCenterImmediately","drawingContextAttributes","duration","ignoreSilenceMode","rtl","splitChannelsOptions","vertical","xhr"],zyt=e=>e?Byt.reduce((t,n)=>Object.prototype.hasOwnProperty.call(e,n)?Object.assign(Object.assign({},t),{[n]:e[n]}):t,{}):{};var Uyt=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function Vyt(e,t){return Uyt(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})}function Hyt(e){const t=e[0];if(t.some(n=>n>1||n<-1)){const n=t.length;let r=0;for(let i=0;i<n;i++){const s=Math.abs(t[i]);s>r&&(r=s)}for(const i of e)for(let s=0;s<n;s++)i[s]/=r}return e}function qyt(e,t){return typeof e[0]=="number"&&(e=[e]),Hyt(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}const TB={decode:Vyt,createBuffer:qyt};var $de=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function Wyt(e,t,n){var r,i;return $de(this,void 0,void 0,function*(){const s=yield fetch(e,n);{const o=(r=s.clone().body)===null||r===void 0?void 0:r.getReader(),a=Number((i=s.headers)===null||i===void 0?void 0:i.get("Content-Length"));let l=0;const u=(c,d)=>$de(this,void 0,void 0,function*(){if(c)return;l+=(d==null?void 0:d.length)||0;const f=Math.round(l/a*100);return t(f),o==null?void 0:o.read().then(({done:h,value:p})=>u(h,p))});o==null||o.read().then(({done:c,value:d})=>u(c,d))}return s.blob()})}const Gyt={fetchBlob:Wyt};class R6{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r!=null&&r.once){const i=()=>{this.removeEventListener(t,i),this.removeEventListener(t,n)};return this.addEventListener(t,i),i}return()=>this.removeEventListener(t,n)}removeEventListener(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}}class Yyt extends R6{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onceMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n)}onceMediaEvent(t,n){return this.onMediaEvent(t,n,{once:!0})}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}setSrc(t,n){if(this.getSrc()===t)return;this.revokeSrc();const i=n instanceof Blob?URL.createObjectURL(n):t;this.media.src=i,this.media.load()}destroy(){this.media.pause(),!this.isExternalMedia&&(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return this.media.play()}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}function Kyt(e,t,n,r,i=5){let s=()=>{};if(!e)return s;const o=a=>{if(a.button===2)return;a.preventDefault(),a.stopPropagation(),e.style.touchAction="none";let l=a.clientX,u=a.clientY,c=!1;const d=p=>{p.preventDefault(),p.stopPropagation();const m=p.clientX,g=p.clientY;if(c||Math.abs(m-l)>=i||Math.abs(g-u)>=i){const{left:y,top:v}=e.getBoundingClientRect();c||(c=!0,n==null||n(l-y,u-v)),t(m-l,g-u,m-y,g-v),l=m,u=g}},f=p=>{c&&(p.preventDefault(),p.stopPropagation())},h=()=>{e.style.touchAction="",c&&(r==null||r()),s()};document.addEventListener("pointermove",d),document.addEventListener("pointerup",h),document.addEventListener("pointerleave",h),document.addEventListener("click",f,!0),s=()=>{document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",h),document.removeEventListener("pointerleave",h),setTimeout(()=>{document.removeEventListener("click",f,!0)},10)}};return e.addEventListener("pointerdown",o),()=>{s(),e.removeEventListener("pointerdown",o)}}let Y2e=class K2e extends R6{constructor(t,n){super(),this.timeouts=[],this.isScrolling=!1,this.audioData=null,this.resizeObserver=null,this.isDragging=!1,this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=r=>{const i=this.wrapper.getBoundingClientRect(),s=r.clientX-i.left,o=r.clientX-i.left,a=s/i.width,l=o/i.height;return[a,l]};this.wrapper.addEventListener("click",r=>{const[i,s]=t(r);this.emit("click",i,s)}),this.wrapper.addEventListener("dblclick",r=>{const[i,s]=t(r);this.emit("dblclick",i,s)}),this.options.dragToSeek&&this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=r/i,a=(r+s)/i;this.emit("scroll",o,a)});const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n(()=>this.reRender())}),this.resizeObserver.observe(this.scrollContainer)}initDrag(){Kyt(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},()=>this.isDragging=!0,()=>this.isDragging=!1)}getHeight(){return this.options.height==null?128:isNaN(Number(this.options.height))?this.options.height==="auto"&&this.parent.clientHeight||128:Number(this.options.height)}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"});return n.innerHTML=`
      <style>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight()}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek&&!this.options.dragToSeek&&this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}destroy(){var t;this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect()}createDelay(t=10){const n={};return this.timeouts.push(n),r=>{n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(r,t)}}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),i=n.getContext("2d").createLinearGradient(0,0,0,n.height),s=1/(t.length-1);return t.forEach((o,a)=>{const l=a*s;i.addColorStop(l,o)}),i}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:l,height:u}=r.canvas,c=u/2,d=window.devicePixelRatio||1,f=n.barWidth?n.barWidth*d:1,h=n.barGap?n.barGap*d:n.barWidth?f/2:0,p=n.barRadius||0,m=l/(f+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,v=0,_=0;for(let w=0;w<=a;w++){const E=Math.round(w*m);if(E>y){const T=Math.round(v*c*i),I=Math.round(_*c*i),P=T+I||1;let k=c-T;n.barAlign==="top"?k=0:n.barAlign==="bottom"&&(k=u-P),r[g](y*(f+h),k,f,P,p),y=E,v=0,_=0}const S=Math.abs(s[w]||0),x=Math.abs(o[w]||0);S>v&&(v=S),x>_&&(_=x)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],l=a.length,{height:u}=r.canvas,c=u/2,d=r.canvas.width/l;r.moveTo(0,c);let f=0,h=0;for(let p=0;p<=l;p++){const m=Math.round(p*d);if(m>f){const y=Math.round(h*c*i)||1,v=c+y*(o===0?-1:1);r.lineTo(f,v),f=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(f,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction){n.renderFunction(t,r);return}let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}if(n.barWidth||n.barGap||n.barAlign){this.renderBarWaveform(t,n,r,i);return}this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a,l){const u=window.devicePixelRatio||1,c=document.createElement("canvas"),d=t[0].length;c.width=Math.round(r*(o-s)/d),c.height=i*u,c.style.width=`${Math.floor(c.width/u)}px`,c.style.height=`${i}px`,c.style.left=`${Math.floor(s*r/u/d)}px`,a.appendChild(c);const f=c.getContext("2d");if(this.renderWaveform(t.map(h=>h.slice(s,o)),n,f),c.width>0&&c.height>0){const h=c.cloneNode(),p=h.getContext("2d");p.drawImage(c,0,0),p.globalCompositeOperation="source-in",p.fillStyle=this.convertColorValues(n.progressColor),p.fillRect(0,0,c.width,c.height),l.appendChild(h)}}renderChannel(t,n,r){const i=document.createElement("div"),s=this.getHeight();i.style.height=`${s}px`,this.canvasWrapper.style.minHeight=`${s}px`,this.canvasWrapper.appendChild(i);const o=i.cloneNode();this.progressWrapper.appendChild(o);const{scrollLeft:a,scrollWidth:l,clientWidth:u}=this.scrollContainer,c=t[0].length,d=c/l;let f=Math.min(K2e.MAX_CANVAS_WIDTH,u);if(n.barWidth||n.barGap){const E=n.barWidth||.5,S=n.barGap||E/2,x=E+S;f%x!==0&&(f=Math.floor(f/x)*x)}const h=Math.floor(Math.abs(a)*d),p=Math.floor(h+f*d),m=p-h,g=(E,S)=>{this.renderSingleCanvas(t,n,r,s,Math.max(0,E),Math.min(S,c),i,o)},y=this.createDelay(),v=this.createDelay(),_=(E,S)=>{g(E,S),E>0&&y(()=>{_(E-m,S-m)})},w=(E,S)=>{g(E,S),S<c&&v(()=>{w(E+m,S+m)})};_(h,p),p<c&&w(p,p+m)}render(t){this.timeouts.forEach(a=>a.timeout&&clearTimeout(a.timeout)),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.wrapper.style.width="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=window.devicePixelRatio||1,r=this.scrollContainer.clientWidth,i=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrolling=i>r;const s=this.options.fillParent&&!this.isScrolling,o=(s?r:i)*n;if(this.wrapper.style.width=s?"100%":`${i}px`,this.scrollContainer.style.overflowX=this.isScrolling?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.options.splitChannels)for(let a=0;a<t.numberOfChannels;a++){const l=Object.assign(Object.assign({},this.options),this.options.splitChannels[a]);this.renderChannel([t.getChannelData(a)],l,o)}else{const a=[t.getChannelData(0)];t.numberOfChannels>1&&a.push(t.getChannelData(1)),this.renderChannel(a,this.options,o)}this.audioData=t,this.emit("render")}reRender(){if(!this.audioData)return;const t=this.progressWrapper.clientWidth;this.render(this.audioData);const n=this.progressWrapper.clientWidth;this.scrollContainer.scrollLeft+=n-t}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{clientWidth:r,scrollLeft:i,scrollWidth:s}=this.scrollContainer,o=s*t,a=r/2,l=n&&this.options.autoCenter&&!this.isDragging?a:r;if(o>i+l||o<i)if(this.options.autoCenter&&!this.isDragging){const u=a/20;o-(i+a)>=u&&o<i+r?this.scrollContainer.scrollLeft+=u:this.scrollContainer.scrollLeft=o-a}else this.isDragging?this.scrollContainer.scrollLeft=o<i?o-10:o-r+10:this.scrollContainer.scrollLeft=o;{const{scrollLeft:u}=this.scrollContainer,c=u/s,d=(u+r)/s;this.emit("scroll",c,d)}}renderProgress(t,n){if(isNaN(t))return;const r=t*100;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.marginLeft=Math.round(r)===100?`-${this.options.cursorWidth}px`:"",this.isScrolling&&this.options.autoScroll&&this.scrollIntoView(t,n)}};Y2e.MAX_CANVAS_WIDTH=4e3;let Xyt=class extends R6{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}};var CB=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class Qyt extends R6{constructor(t=new AudioContext){super(),this.bufferNode=null,this.autoplay=!1,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return CB(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){this.currentSrc=t,fetch(t).then(n=>n.arrayBuffer()).then(n=>this.audioContext.decodeAudioData(n)).then(n=>{this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play()})}_play(){var t;this.paused&&(this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.bufferNode.buffer=this.buffer,this.bufferNode.connect(this.gainNode),this.playedDuration>=this.duration&&(this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,this.playedDuration),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))})}_pause(){var t;this.paused||(this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime)}play(){return CB(this,void 0,void 0,function*(){this._play(),this.emit("play")})}pause(){this._pause(),this.emit("pause")}setSinkId(t){return CB(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){var t,n;return(n=(t=this.bufferNode)===null||t===void 0?void 0:t.playbackRate.value)!==null&&n!==void 0?n:1}set playbackRate(t){this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return this.paused?this.playedDuration:this.playedDuration+this.audioContext.currentTime-this.playStartTime}set currentTime(t){this.emit("seeking"),this.paused?this.playedDuration=t:(this._pause(),this.playedDuration=t,this._play()),this.emit("timeupdate")}get duration(){var t;return((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}getGainNode(){return this.gainNode}}var j_=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Jyt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let Zyt=class X2e extends Yyt{static create(t){return new X2e(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Qyt:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.options=Object.assign({},Jyt,t),this.timer=new Xyt;const r=n?void 0:this.getMediaElement();this.renderer=new Y2e(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc();i?this.load(i,this.options.peaks,this.options.duration):this.options.peaks&&this.options.duration&&this.loadPredecoded()}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{const t=this.getCurrentTime();this.renderer.renderProgress(t/this.getDuration(),!0),this.emit("timeupdate",t),this.emit("audioprocess",t)}))}initPlayerEvents(){this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.getCurrentTime();this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n)=>{const r=this.getDuration();this.emit("scroll",t*r,n*r)}),this.renderer.on("render",()=>{this.emit("redraw")}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{this.options.interact&&(this.renderer.renderProgress(n),clearTimeout(t),t=setTimeout(()=>{this.seekTo(n)},this.isPlaying()?0:200),this.emit("interaction",n*this.getDuration()),this.emit("drag",n))}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t.init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}getActivePlugins(){return this.plugins}loadPredecoded(){return j_(this,void 0,void 0,function*(){this.options.peaks&&this.options.duration&&(this.decodedData=TB.createBuffer(this.options.peaks,this.options.duration),yield Promise.resolve(),this.renderDecoded())})}renderDecoded(){return j_(this,void 0,void 0,function*(){this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData))})}loadAudio(t,n,r,i){return j_(this,void 0,void 0,function*(){if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const s=o=>this.emit("loading",o);n=yield Gyt.fetchBlob(t,s,this.options.fetchParams)}if(this.setSrc(t,n),i=(yield Promise.resolve(i||this.getDuration()))||(yield new Promise(s=>{this.onceMediaEvent("loadedmetadata",()=>s(this.getDuration()))}))||(yield Promise.resolve(0)),r)this.decodedData=TB.createBuffer(r,i);else if(n){const s=yield n.arrayBuffer();this.decodedData=yield TB.decode(s,this.options.sampleRate)}this.renderDecoded(),this.emit("ready",this.getDuration())})}load(t,n,r){return j_(this,void 0,void 0,function*(){yield this.loadAudio(t,void 0,n,r)})}loadBlob(t,n,r){return j_(this,void 0,void 0,function*(){yield this.loadAudio("blob",t,n,r)})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),l=[],u=Math.round(a.length/n);for(let c=0;c<n;c++){const d=a.slice(c*u,(c+1)*u),f=Math.max(...d);l.push(Math.round(f*r)/r)}s.push(l)}return s}getDuration(){let t=super.getDuration()||0;return(t===0||t===1/0)&&this.decodedData&&(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return j_(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}destroy(){this.emit("destroy"),this.plugins.forEach(t=>t.destroy()),this.subscriptions.forEach(t=>t()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};function evt(e){return Zyt.create(e)}function Lde(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const tvt=(e,t)=>{const n=[...e],r=[...t],i=n.filter(o=>r.findIndex(a=>a.name===o.name)===-1),s=r.filter(o=>n.findIndex(a=>a.name===o.name)===-1);return{disabled:i,enabled:s}};var nvt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Q2e(e){var{container:t,plugins:n=[],onMount:r}=e,i=nvt(e,["container","plugins","onMount"]);const s=A.useRef([]),[o,a]=A.useState(null);return A.useEffect(()=>{if(!t)return;let l=[];n&&(l=n.map(Lde)),s.current=l;const u=evt(Object.assign(Object.assign({container:t},i),{plugins:l}));return r==null||r(u),a(u),()=>{u.destroy()}},[t]),A.useEffect(()=>{if(o){const l=n.map(Lde),{disabled:u,enabled:c}=tvt(s.current,l);s.current=l,u.forEach(d=>{d.name&&(o==null||o.destroyPlugin(d.name))}),c.forEach(d=>{d.name&&(o==null||o.addPlugin(d).initPlugin(d.name))})}},[n]),o}function rvt(e){return!!e&&typeof e!="string"&&typeof e!="number"&&typeof e!="boolean"&&"type"in e&&"props"in e}var ivt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const J2e=e=>{var{children:t,plugins:n=[],onMount:r}=e,i=ivt(e,["children","plugins","onMount"]);const s=A.useMemo(()=>{let a={};return A.Children.forEach(t,l=>{if(typeof l!="object"||l===null||["string","number"].includes(typeof l)||!rvt(l))return;const{props:u,type:c}=l;if(c===nJ){const{id:d}=u;a=zyt(u),a=Object.assign(Object.assign({},a),{container:"#"+d})}}),a},[t]),o=Q2e(Object.assign(Object.assign({plugins:n,onMount:r},i),s));return us.createElement(G2e.Provider,{value:o},t)};J2e.defaultProps={children:null,plugins:[]};function AB(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(u){try{l(r.next(u))}catch(c){s(c)}}function a(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof n?c:new n(function(d){d(c)})).then(o,a)}l((r=r.apply(e,[])).next())})}let svt=class{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.removeEventListener(t,i),this.removeEventListener(t,n)};return this.addEventListener(t,i),i}return()=>this.removeEventListener(t,n)}removeEventListener(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},ovt=class extends svt{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};const avt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];let lvt=class Z2e extends ovt{constructor(t){var n;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3})),this.stream=null,this.mediaRecorder=null}static create(t){return new Z2e(t||{})}renderMicStream(t){const n=new AudioContext,r=n.createMediaStreamSource(t),i=n.createAnalyser();r.connect(i);const s=i.frequencyBinCount,o=new Float32Array(s),a=s/n.sampleRate;let l;const u=()=>{i.getFloatTimeDomainData(o),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[o],a)),l=requestAnimationFrame(u)};return u(),()=>{cancelAnimationFrame(l),r==null||r.disconnect(),n==null||n.close()}}startMic(t){return AB(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(i){throw new Error("Error accessing the microphone: "+i.message)}const r=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return AB(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t)),r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||avt.find(s=>MediaRecorder.isTypeSupported(s)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=s=>{s.data.size>0&&i.push(s.data)},r.onstop=()=>{var s;const o=new Blob(i,{type:r.mimeType});this.emit("record-end",o),this.options.renderRecordedAudio!==!1&&((s=this.wavesurfer)===null||s===void 0||s.load(URL.createObjectURL(o)))},r.start(),this.emit("record-start")})}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}stopRecording(){var t;this.isRecording()&&((t=this.mediaRecorder)===null||t===void 0||t.stop())}pauseRecording(){var t;this.isRecording()&&((t=this.mediaRecorder)===null||t===void 0||t.pause(),this.emit("record-pause"))}resumeRecording(){var t;this.isPaused()&&((t=this.mediaRecorder)===null||t===void 0||t.resume(),this.emit("record-resume"))}static getAvailableAudioDevices(){return AB(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}};function eAe({width:e=70,height:t=50}){const n=A.useRef(null),r=A.useCallback(i=>{n.current=i,n.current&&(n.current.registerPlugin(lvt.create({scrollingWaveform:!0,renderRecordedAudio:!1})).startRecording(),n.current.setOptions({height:50,waveColor:"#FA5252"}))},[]);return b.jsx(_e,{style:{width:`${e}px`,height:`${t}px`},children:b.jsx(J2e,{onMount:r,children:b.jsx(nJ,{id:"waveform"})})})}function Fde({parameters:e,setAnswer:t}){return A.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{new MediaRecorder(r).start();const s=new AudioContext,o=s.createMediaStreamSource(r),a=s.createAnalyser();a.minDecibels=-45,o.connect(a);const l=a.frequencyBinCount,u=new Uint8Array(l);let c=!1;const d=()=>{if(!c){a.getByteFrequencyData(u);for(let f=0;f<l;f+=1)u[f]>0&&(c=!0,t({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(d)}};window.requestAnimationFrame(d)})},[t]),b.jsx(dl,{style:{height:"70%",width:"100%"},children:b.jsxs(ci,{children:[b.jsx(nt,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),b.jsx(nt,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),b.jsx(nt,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please close it now."}),b.jsx(dl,{children:b.jsx(eAe,{height:200,width:400})})]})})}const uvt=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:Fde,default:Fde},Symbol.toStringTag,{value:"Module"}));function Im(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cvt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xS(e){let t,n,r;e.length!==2?(t=Im,n=(a,l)=>Im(e(a),l),r=(a,l)=>e(a)-l):(t=e===Im||e===cvt?e:dvt,n=e,r=e);function i(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function o(a,l,u=0,c=a.length){const d=i(a,l,u,c-1);return d>u&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:i,center:o,right:s}}function dvt(){return 0}function tAe(e){return e===null?NaN:+e}function*fvt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const nAe=xS(Im),cy=nAe.right,hvt=nAe.left;xS(tAe).center;function pvt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function mvt(e,t){const n=pvt(e,t);return n&&Math.sqrt(n)}function gh(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class ll{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class jde extends Map{constructor(t,n=sAe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(TV(this,t))}has(t){return super.has(TV(this,t))}set(t,n){return super.set(rAe(this,t),n)}delete(t){return super.delete(iAe(this,t))}}class c$ extends Set{constructor(t,n=sAe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(TV(this,t))}add(t){return super.add(rAe(this,t))}delete(t){return super.delete(iAe(this,t))}}function TV({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function rAe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function iAe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function sAe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function gvt(e,t){return Array.from(t,n=>e[n])}function yvt(e=Im){if(e===Im)return oAe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function oAe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const vvt=Math.sqrt(50),bvt=Math.sqrt(10),_vt=Math.sqrt(2);function d$(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=vvt?10:s>=bvt?5:s>=_vt?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/o,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*o,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?d$(e,t,n*2):[a,l,u]}function CV(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?d$(t,e,n):d$(e,t,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(i+u)/-o;else for(let u=0;u<a;++u)l[u]=(i+u)*o;return l}function AV(e,t,n){return t=+t,e=+e,n=+n,d$(e,t,n)[2]}function dy(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?AV(t,e,n):AV(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Yc(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function IV(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function aAe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?oAe:yvt(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*d/l+f)),p=Math.min(r,Math.floor(t+(l-u)*d/l+f));aAe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(BT(e,n,t),i(e[r],s)>0&&BT(e,n,r);o<a;){for(BT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?BT(e,n,a):(++a,BT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function BT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function RV(e,t,n){if(e=Float64Array.from(fvt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return IV(e);if(t>=1)return Yc(e);var r,i=(r-1)*t,s=Math.floor(i),o=Yc(aAe(e,s).subarray(0,s+1)),a=IV(e.subarray(s+1));return o+(a-o)*(i-s)}}function lAe(e,t,n=tAe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function uAe(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function cAe(e,t){return RV(e,.5,t)}function*wvt(e){for(const t of e)yield*t}function dAe(e){return Array.from(wvt(e))}function Yl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function lI(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Evt(e,...t){e=new c$(e),t=t.map(xvt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function xvt(e){return e instanceof c$?e:new c$(e)}function Svt(...e){const t=new c$;for(const n of e)for(const r of n)t.add(r);return t}var Tvt={value:()=>{}};function k6(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new cD(n)}function cD(e){this._=e}function Cvt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}cD.prototype=k6.prototype={constructor:cD,on:function(e,t){var n=this._,r=Cvt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Avt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Bde(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Bde(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new cD(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Avt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Bde(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Tvt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var kV="http://www.w3.org/1999/xhtml";const zde={svg:"http://www.w3.org/2000/svg",xhtml:kV,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function P6(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),zde.hasOwnProperty(t)?{space:zde[t],local:e}:e}function Ivt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===kV&&t.documentElement.namespaceURI===kV?t.createElement(e):t.createElementNS(n,e)}}function Rvt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fAe(e){var t=P6(e);return(t.local?Rvt:Ivt)(t)}function kvt(){}function rJ(e){return e==null?kvt:function(){return this.querySelector(e)}}function Pvt(e){typeof e!="function"&&(e=rJ(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,u,c=0;c<o;++c)(l=s[c])&&(u=e.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new hl(r,this._parents)}function hAe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Nvt(){return[]}function pAe(e){return e==null?Nvt:function(){return this.querySelectorAll(e)}}function Ovt(e){return function(){return hAe(e.apply(this,arguments))}}function Dvt(e){typeof e=="function"?e=Ovt(e):e=pAe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(r.push(e.call(l,l.__data__,u,o)),i.push(l));return new hl(r,i)}function mAe(e){return function(){return this.matches(e)}}function gAe(e){return function(t){return t.matches(e)}}var Mvt=Array.prototype.find;function $vt(e){return function(){return Mvt.call(this.children,e)}}function Lvt(){return this.firstElementChild}function Fvt(e){return this.select(e==null?Lvt:$vt(typeof e=="function"?e:gAe(e)))}var jvt=Array.prototype.filter;function Bvt(){return Array.from(this.children)}function zvt(e){return function(){return jvt.call(this.children,e)}}function Uvt(e){return this.selectAll(e==null?Bvt:zvt(typeof e=="function"?e:gAe(e)))}function Vvt(e){typeof e!="function"&&(e=mAe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new hl(r,this._parents)}function yAe(e){return new Array(e.length)}function Hvt(){return new hl(this._enter||this._groups.map(yAe),this._parents)}function f$(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}f$.prototype={constructor:f$,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function qvt(e){return function(){return e}}function Wvt(e,t,n,r,i,s){for(var o=0,a,l=t.length,u=s.length;o<u;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new f$(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function Gvt(e,t,n,r,i,s,o){var a,l,u=new Map,c=t.length,d=s.length,f=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=o.call(l,l.__data__,a,t)+"",u.has(h)?i[a]=l:u.set(h,l));for(a=0;a<d;++a)h=o.call(e,s[a],a,s)+"",(l=u.get(h))?(r[a]=l,l.__data__=s[a],u.delete(h)):n[a]=new f$(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(i[a]=l)}function Yvt(e){return e.__data__}function Kvt(e,t){if(!arguments.length)return Array.from(this,Yvt);var n=t?Gvt:Wvt,r=this._parents,i=this._groups;typeof e!="function"&&(e=qvt(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],d=i[u],f=d.length,h=Xvt(e.call(c,c&&c.__data__,u,r)),p=h.length,m=a[u]=new Array(p),g=o[u]=new Array(p),y=l[u]=new Array(f);n(c,d,m,g,y,h,t);for(var v=0,_=0,w,E;v<p;++v)if(w=m[v]){for(v>=_&&(_=v+1);!(E=g[_])&&++_<p;);w._next=E||null}}return o=new hl(o,r),o._enter=a,o._exit=l,o}function Xvt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Qvt(){return new hl(this._exit||this._groups.map(yAe),this._parents)}function Jvt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Zvt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=n[l],c=r[l],d=u.length,f=a[l]=new Array(d),h,p=0;p<d;++p)(h=u[p]||c[p])&&(f[p]=h);for(;l<i;++l)a[l]=n[l];return new hl(a,this._parents)}function e1t(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function t1t(e){e||(e=n1t);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),u,c=0;c<a;++c)(u=o[c])&&(l[c]=u);l.sort(t)}return new hl(i,this._parents).order()}function n1t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function r1t(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function i1t(){return Array.from(this)}function s1t(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function o1t(){let e=0;for(const t of this)++e;return e}function a1t(){return!this.node()}function l1t(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function u1t(e){return function(){this.removeAttribute(e)}}function c1t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function d1t(e,t){return function(){this.setAttribute(e,t)}}function f1t(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function h1t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function p1t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function m1t(e,t){var n=P6(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?c1t:u1t:typeof t=="function"?n.local?p1t:h1t:n.local?f1t:d1t)(n,t))}function vAe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function g1t(e){return function(){this.style.removeProperty(e)}}function y1t(e,t,n){return function(){this.style.setProperty(e,t,n)}}function v1t(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function b1t(e,t,n){return arguments.length>1?this.each((t==null?g1t:typeof t=="function"?v1t:y1t)(e,t,n??"")):JE(this.node(),e)}function JE(e,t){return e.style.getPropertyValue(t)||vAe(e).getComputedStyle(e,null).getPropertyValue(t)}function _1t(e){return function(){delete this[e]}}function w1t(e,t){return function(){this[e]=t}}function E1t(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function x1t(e,t){return arguments.length>1?this.each((t==null?_1t:typeof t=="function"?E1t:w1t)(e,t)):this.node()[e]}function bAe(e){return e.trim().split(/^|\s+/)}function iJ(e){return e.classList||new _Ae(e)}function _Ae(e){this._node=e,this._names=bAe(e.getAttribute("class")||"")}_Ae.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function wAe(e,t){for(var n=iJ(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function EAe(e,t){for(var n=iJ(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function S1t(e){return function(){wAe(this,e)}}function T1t(e){return function(){EAe(this,e)}}function C1t(e,t){return function(){(t.apply(this,arguments)?wAe:EAe)(this,e)}}function A1t(e,t){var n=bAe(e+"");if(arguments.length<2){for(var r=iJ(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?C1t:t?S1t:T1t)(n,t))}function I1t(){this.textContent=""}function R1t(e){return function(){this.textContent=e}}function k1t(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function P1t(e){return arguments.length?this.each(e==null?I1t:(typeof e=="function"?k1t:R1t)(e)):this.node().textContent}function N1t(){this.innerHTML=""}function O1t(e){return function(){this.innerHTML=e}}function D1t(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function M1t(e){return arguments.length?this.each(e==null?N1t:(typeof e=="function"?D1t:O1t)(e)):this.node().innerHTML}function $1t(){this.nextSibling&&this.parentNode.appendChild(this)}function L1t(){return this.each($1t)}function F1t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function j1t(){return this.each(F1t)}function B1t(e){var t=typeof e=="function"?e:fAe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function z1t(){return null}function U1t(e,t){var n=typeof e=="function"?e:fAe(e),r=t==null?z1t:typeof t=="function"?t:rJ(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function V1t(){var e=this.parentNode;e&&e.removeChild(this)}function H1t(){return this.each(V1t)}function q1t(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function W1t(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function G1t(e){return this.select(e?W1t:q1t)}function Y1t(e){return arguments.length?this.property("__data__",e):this.node().__data__}function K1t(e){return function(t){e.call(this,t,this.__data__)}}function X1t(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Q1t(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function J1t(e,t,n){return function(){var r=this.__on,i,s=K1t(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Z1t(e,t,n){var r=X1t(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?J1t:Q1t,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function xAe(e,t,n){var r=vAe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ebt(e,t){return function(){return xAe(this,e,t)}}function tbt(e,t){return function(){return xAe(this,e,t.apply(this,arguments))}}function nbt(e,t){return this.each((typeof t=="function"?tbt:ebt)(e,t))}function*rbt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var sJ=[null];function hl(e,t){this._groups=e,this._parents=t}function nk(){return new hl([[document.documentElement]],sJ)}function ibt(){return this}hl.prototype=nk.prototype={constructor:hl,select:Pvt,selectAll:Dvt,selectChild:Fvt,selectChildren:Uvt,filter:Vvt,data:Kvt,enter:Hvt,exit:Qvt,join:Jvt,merge:Zvt,selection:ibt,order:e1t,sort:t1t,call:r1t,nodes:i1t,node:s1t,size:o1t,empty:a1t,each:l1t,attr:m1t,style:b1t,property:x1t,classed:A1t,text:P1t,html:M1t,raise:L1t,lower:j1t,append:B1t,insert:U1t,remove:H1t,clone:G1t,datum:Y1t,on:Z1t,dispatch:nbt,[Symbol.iterator]:rbt};function Fo(e){return typeof e=="string"?new hl([[document.querySelector(e)]],[document.documentElement]):new hl([[e]],sJ)}function sbt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ude(e,t){if(e=sbt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function obt(e){return typeof e=="string"?new hl([document.querySelectorAll(e)],[document.documentElement]):new hl([hAe(e)],sJ)}const PV={capture:!0,passive:!1};function NV(e){e.preventDefault(),e.stopImmediatePropagation()}function abt(e){var t=e.document.documentElement,n=Fo(e).on("dragstart.drag",NV,PV);"onselectstart"in t?n.on("selectstart.drag",NV,PV):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function lbt(e,t){var n=e.document.documentElement,r=Fo(e).on("dragstart.drag",null);t&&(r.on("click.drag",NV,PV),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function SS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function rk(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function iv(){}var ub=.7,ZE=1/ub,cE="\\s*([+-]?\\d+)\\s*",uI="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ubt=/^#([0-9a-f]{3,8})$/,cbt=new RegExp(`^rgb\\(${cE},${cE},${cE}\\)$`),dbt=new RegExp(`^rgb\\(${zh},${zh},${zh}\\)$`),fbt=new RegExp(`^rgba\\(${cE},${cE},${cE},${uI}\\)$`),hbt=new RegExp(`^rgba\\(${zh},${zh},${zh},${uI}\\)$`),pbt=new RegExp(`^hsl\\(${uI},${zh},${zh}\\)$`),mbt=new RegExp(`^hsla\\(${uI},${zh},${zh},${uI}\\)$`),Vde={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};SS(iv,cb,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Hde,formatHex:Hde,formatHex8:gbt,formatHsl:ybt,formatRgb:qde,toString:qde});function Hde(){return this.rgb().formatHex()}function gbt(){return this.rgb().formatHex8()}function ybt(){return SAe(this).formatHsl()}function qde(){return this.rgb().formatRgb()}function cb(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ubt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Wde(t):n===3?new yo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?wN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?wN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=cbt.exec(e))?new yo(t[1],t[2],t[3],1):(t=dbt.exec(e))?new yo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fbt.exec(e))?wN(t[1],t[2],t[3],t[4]):(t=hbt.exec(e))?wN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pbt.exec(e))?Kde(t[1],t[2]/100,t[3]/100,1):(t=mbt.exec(e))?Kde(t[1],t[2]/100,t[3]/100,t[4]):Vde.hasOwnProperty(e)?Wde(Vde[e]):e==="transparent"?new yo(NaN,NaN,NaN,0):null}function Wde(e){return new yo(e>>16&255,e>>8&255,e&255,1)}function wN(e,t,n,r){return r<=0&&(e=t=n=NaN),new yo(e,t,n,r)}function oJ(e){return e instanceof iv||(e=cb(e)),e?(e=e.rgb(),new yo(e.r,e.g,e.b,e.opacity)):new yo}function fy(e,t,n,r){return arguments.length===1?oJ(e):new yo(e,t,n,r??1)}function yo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}SS(yo,fy,rk(iv,{brighter(e){return e=e==null?ZE:Math.pow(ZE,e),new yo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ub:Math.pow(ub,e),new yo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yo(z1(this.r),z1(this.g),z1(this.b),h$(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Gde,formatHex:Gde,formatHex8:vbt,formatRgb:Yde,toString:Yde}));function Gde(){return`#${R1(this.r)}${R1(this.g)}${R1(this.b)}`}function vbt(){return`#${R1(this.r)}${R1(this.g)}${R1(this.b)}${R1((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yde(){const e=h$(this.opacity);return`${e===1?"rgb(":"rgba("}${z1(this.r)}, ${z1(this.g)}, ${z1(this.b)}${e===1?")":`, ${e})`}`}function h$(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function z1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function R1(e){return e=z1(e),(e<16?"0":"")+e.toString(16)}function Kde(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Wd(e,t,n,r)}function SAe(e){if(e instanceof Wd)return new Wd(e.h,e.s,e.l,e.opacity);if(e instanceof iv||(e=cb(e)),!e)return new Wd;if(e instanceof Wd)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Wd(o,a,l,e.opacity)}function cI(e,t,n,r){return arguments.length===1?SAe(e):new Wd(e,t,n,r??1)}function Wd(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}SS(Wd,cI,rk(iv,{brighter(e){return e=e==null?ZE:Math.pow(ZE,e),new Wd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ub:Math.pow(ub,e),new Wd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new yo(IB(e>=240?e-240:e+120,i,r),IB(e,i,r),IB(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Wd(Xde(this.h),EN(this.s),EN(this.l),h$(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=h$(this.opacity);return`${e===1?"hsl(":"hsla("}${Xde(this.h)}, ${EN(this.s)*100}%, ${EN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Xde(e){return e=(e||0)%360,e<0?e+360:e}function EN(e){return Math.max(0,Math.min(1,e||0))}function IB(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const TAe=Math.PI/180,CAe=180/Math.PI,p$=18,AAe=.96422,IAe=1,RAe=.82521,kAe=4/29,dE=6/29,PAe=3*dE*dE,bbt=dE*dE*dE;function NAe(e){if(e instanceof Uh)return new Uh(e.l,e.a,e.b,e.opacity);if(e instanceof hm)return OAe(e);e instanceof yo||(e=oJ(e));var t=NB(e.r),n=NB(e.g),r=NB(e.b),i=RB((.2225045*t+.7168786*n+.0606169*r)/IAe),s,o;return t===n&&n===r?s=o=i:(s=RB((.4360747*t+.3850649*n+.1430804*r)/AAe),o=RB((.0139322*t+.0971045*n+.7141733*r)/RAe)),new Uh(116*i-16,500*(s-i),200*(i-o),e.opacity)}function m$(e,t,n,r){return arguments.length===1?NAe(e):new Uh(e,t,n,r??1)}function Uh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}SS(Uh,m$,rk(iv,{brighter(e){return new Uh(this.l+p$*(e??1),this.a,this.b,this.opacity)},darker(e){return new Uh(this.l-p$*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=AAe*kB(t),e=IAe*kB(e),n=RAe*kB(n),new yo(PB(3.1338561*t-1.6168667*e-.4906146*n),PB(-.9787684*t+1.9161415*e+.033454*n),PB(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function RB(e){return e>bbt?Math.pow(e,1/3):e/PAe+kAe}function kB(e){return e>dE?e*e*e:PAe*(e-kAe)}function PB(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function NB(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function _bt(e){if(e instanceof hm)return new hm(e.h,e.c,e.l,e.opacity);if(e instanceof Uh||(e=NAe(e)),e.a===0&&e.b===0)return new hm(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*CAe;return new hm(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function g$(e,t,n,r){return arguments.length===1?_bt(e):new hm(e,t,n,r??1)}function hm(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function OAe(e){if(isNaN(e.h))return new Uh(e.l,0,0,e.opacity);var t=e.h*TAe;return new Uh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}SS(hm,g$,rk(iv,{brighter(e){return new hm(this.h,this.c,this.l+p$*(e??1),this.opacity)},darker(e){return new hm(this.h,this.c,this.l-p$*(e??1),this.opacity)},rgb(){return OAe(this).rgb()}}));var DAe=-.14861,aJ=1.78277,lJ=-.29227,N6=-.90649,dI=1.97294,Qde=dI*N6,Jde=dI*aJ,Zde=aJ*lJ-N6*DAe;function wbt(e){if(e instanceof U1)return new U1(e.h,e.s,e.l,e.opacity);e instanceof yo||(e=oJ(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Zde*r+Qde*t-Jde*n)/(Zde+Qde-Jde),s=r-i,o=(dI*(n-i)-lJ*s)/N6,a=Math.sqrt(o*o+s*s)/(dI*i*(1-i)),l=a?Math.atan2(o,s)*CAe-120:NaN;return new U1(l<0?l+360:l,a,i,e.opacity)}function OV(e,t,n,r){return arguments.length===1?wbt(e):new U1(e,t,n,r??1)}function U1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}SS(U1,OV,rk(iv,{brighter(e){return e=e==null?ZE:Math.pow(ZE,e),new U1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ub:Math.pow(ub,e),new U1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*TAe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new yo(255*(t+n*(DAe*r+aJ*i)),255*(t+n*(lJ*r+N6*i)),255*(t+n*(dI*r)),this.opacity)}}));function MAe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function $Ae(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return MAe((n-r/t)*t,o,i,s,a)}}function LAe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return MAe((n-r/t)*t,i,s,o,a)}}const O6=e=>()=>e;function FAe(e,t){return function(n){return e+n*t}}function Ebt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function D6(e,t){var n=t-e;return n?FAe(e,n>180||n<-180?n-360*Math.round(n/360):n):O6(isNaN(e)?t:e)}function xbt(e){return(e=+e)==1?vo:function(t,n){return n-t?Ebt(t,n,e):O6(isNaN(t)?n:t)}}function vo(e,t){var n=t-e;return n?FAe(e,n):O6(isNaN(e)?t:e)}const fI=function e(t){var n=xbt(t);function r(i,s){var o=n((i=fy(i)).r,(s=fy(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=vo(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function jAe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=fy(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var Sbt=jAe($Ae),Tbt=jAe(LAe);function uJ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function BAe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Cbt(e,t){return(BAe(t)?uJ:zAe)(e,t)}function zAe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=gg(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function UAe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function kc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function VAe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=gg(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var DV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,OB=new RegExp(DV.source,"g");function Abt(e){return function(){return e}}function Ibt(e){return function(t){return e(t)+""}}function cJ(e,t){var n=DV.lastIndex=OB.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=DV.exec(e))&&(i=OB.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:kc(r,i)})),n=OB.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?Ibt(l[0].x):Abt(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function gg(e,t){var n=typeof t,r;return t==null||n==="boolean"?O6(t):(n==="number"?kc:n==="string"?(r=cb(t))?(t=r,fI):cJ:t instanceof cb?fI:t instanceof Date?UAe:BAe(t)?uJ:Array.isArray(t)?zAe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?VAe:kc)(e,t)}function Rbt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function kbt(e,t){var n=D6(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function ik(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var efe=180/Math.PI,MV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function HAe(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*efe,skewX:Math.atan(l)*efe,scaleX:o,scaleY:a}}var xN;function Pbt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?MV:HAe(t.a,t.b,t.c,t.d,t.e,t.f)}function Nbt(e){return e==null||(xN||(xN=document.createElementNS("http://www.w3.org/2000/svg","g")),xN.setAttribute("transform",e),!(e=xN.transform.baseVal.consolidate()))?MV:(e=e.matrix,HAe(e.a,e.b,e.c,e.d,e.e,e.f))}function qAe(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,d,f,h,p){if(u!==d||c!==f){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:kc(u,d)},{i:m-2,x:kc(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function o(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:kc(u,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:kc(u,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(u,c,d,f,h,p){if(u!==d||c!==f){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:kc(u,d)},{i:m-2,x:kc(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,d,f),o(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var p=-1,m=f.length,g;++p<m;)d[(g=f[p]).i]=g.x(h);return d.join("")}}}var WAe=qAe(Pbt,"px, ","px)","deg)"),GAe=qAe(Nbt,", ",")",")"),Obt=1e-12;function tfe(e){return((e=Math.exp(e))+1/e)/2}function Dbt(e){return((e=Math.exp(e))-1/e)/2}function Mbt(e){return((e=Math.exp(2*e))-1)/(e+1)}const $bt=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],u=s[2],c=o[0],d=o[1],f=o[2],h=c-a,p=d-l,m=h*h+p*p,g,y;if(m<Obt)y=Math.log(f/u)/t,g=function(x){return[a+x*h,l+x*p,u*Math.exp(t*x*y)]};else{var v=Math.sqrt(m),_=(f*f-u*u+r*m)/(2*u*n*v),w=(f*f-u*u-r*m)/(2*f*n*v),E=Math.log(Math.sqrt(_*_+1)-_),S=Math.log(Math.sqrt(w*w+1)-w);y=(S-E)/t,g=function(x){var T=x*y,I=tfe(E),P=u/(n*v)*(I*Mbt(t*T+E)-Dbt(E));return[a+P*h,l+P*p,u*I/tfe(t*T+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);function YAe(e){return function(t,n){var r=e((t=cI(t)).h,(n=cI(n)).h),i=vo(t.s,n.s),s=vo(t.l,n.l),o=vo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Lbt=YAe(D6);var Fbt=YAe(vo);function jbt(e,t){var n=vo((e=m$(e)).l,(t=m$(t)).l),r=vo(e.a,t.a),i=vo(e.b,t.b),s=vo(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function KAe(e){return function(t,n){var r=e((t=g$(t)).h,(n=g$(n)).h),i=vo(t.c,n.c),s=vo(t.l,n.l),o=vo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Bbt=KAe(D6);var zbt=KAe(vo);function XAe(e){return function t(n){n=+n;function r(i,s){var o=e((i=OV(i)).h,(s=OV(s)).h),a=vo(i.s,s.s),l=vo(i.l,s.l),u=vo(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=t,r}(1)}const Ubt=XAe(D6);var Vbt=XAe(vo);function dJ(e,t){t===void 0&&(t=e,e=gg);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Hbt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const qbt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:gg,interpolateArray:Cbt,interpolateBasis:$Ae,interpolateBasisClosed:LAe,interpolateCubehelix:Ubt,interpolateCubehelixLong:Vbt,interpolateDate:UAe,interpolateDiscrete:Rbt,interpolateHcl:Bbt,interpolateHclLong:zbt,interpolateHsl:Lbt,interpolateHslLong:Fbt,interpolateHue:kbt,interpolateLab:jbt,interpolateNumber:kc,interpolateNumberArray:uJ,interpolateObject:VAe,interpolateRgb:fI,interpolateRgbBasis:Sbt,interpolateRgbBasisClosed:Tbt,interpolateRound:ik,interpolateString:cJ,interpolateTransformCss:WAe,interpolateTransformSvg:GAe,interpolateZoom:$bt,piecewise:dJ,quantize:Hbt},Symbol.toStringTag,{value:"Module"}));var ex=0,DC=0,zT=0,QAe=1e3,y$,MC,v$=0,db=0,M6=0,hI=typeof performance=="object"&&performance.now?performance:Date,JAe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function $6(){return db||(JAe(Wbt),db=hI.now()+M6)}function Wbt(){db=0}function pI(){this._call=this._time=this._next=null}pI.prototype=fJ.prototype={constructor:pI,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?$6():+n)+(t==null?0:+t),!this._next&&MC!==this&&(MC?MC._next=this:y$=this,MC=this),this._call=e,this._time=n,$V()},stop:function(){this._call&&(this._call=null,this._time=1/0,$V())}};function fJ(e,t,n){var r=new pI;return r.restart(e,t,n),r}function Gbt(){$6(),++ex;for(var e=y$,t;e;)(t=db-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ex}function nfe(){db=(v$=hI.now())+M6,ex=DC=0;try{Gbt()}finally{ex=0,Kbt(),db=0}}function Ybt(){var e=hI.now(),t=e-v$;t>QAe&&(M6-=t,v$=e)}function Kbt(){for(var e,t=y$,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:y$=n);MC=e,$V(r)}function $V(e){if(!ex){DC&&(DC=clearTimeout(DC));var t=e-db;t>24?(e<1/0&&(DC=setTimeout(nfe,e-hI.now()-M6)),zT&&(zT=clearInterval(zT))):(zT||(v$=hI.now(),zT=setInterval(Ybt,QAe)),ex=1,JAe(nfe))}}function rfe(e,t,n){var r=new pI;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Xbt(e,t,n){var r=new pI,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?$6():+a,r._restart(function l(u){u+=i,r._restart(l,i+=o,a),s(u)},o,a)},r.restart(e,t,n),r)}var Qbt=k6("start","end","cancel","interrupt"),Jbt=[],ZAe=0,ife=1,LV=2,dD=3,sfe=4,FV=5,fD=6;function L6(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Zbt(e,n,{name:t,index:r,group:i,on:Qbt,tween:Jbt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ZAe})}function hJ(e,t){var n=Ff(e,t);if(n.state>ZAe)throw new Error("too late; already scheduled");return n}function Ep(e,t){var n=Ff(e,t);if(n.state>dD)throw new Error("too late; already running");return n}function Ff(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Zbt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=fJ(s,0,n.time);function s(u){n.state=ife,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,d,f,h;if(n.state!==ife)return l();for(c in r)if(h=r[c],h.name===n.name){if(h.state===dD)return rfe(o);h.state===sfe?(h.state=fD,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=fD,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(rfe(function(){n.state===dD&&(n.state=sfe,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=LV,n.on.call("start",e,e.__data__,n.index,n.group),n.state===LV){for(n.state=dD,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=FV,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===FV&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=fD,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function jV(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>LV&&r.state<FV,r.state=fD,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function e_t(e){return this.each(function(){jV(this,e)})}function t_t(e,t){var n,r;return function(){var i=Ep(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function n_t(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Ep(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}s.tween=i}}function r_t(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ff(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?t_t:n_t)(n,e,t))}function pJ(e,t,n){var r=e._id;return e.each(function(){var i=Ep(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ff(i,r).value[t]}}function eIe(e,t){var n;return(typeof t=="number"?kc:t instanceof cb?fI:(n=cb(t))?(t=n,fI):cJ)(e,t)}function i_t(e){return function(){this.removeAttribute(e)}}function s_t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function o_t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function a_t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function l_t(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function u_t(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function c_t(e,t){var n=P6(e),r=n==="transform"?GAe:eIe;return this.attrTween(e,typeof t=="function"?(n.local?u_t:l_t)(n,r,pJ(this,"attr."+e,t)):t==null?(n.local?s_t:i_t)(n):(n.local?a_t:o_t)(n,r,t))}function d_t(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function f_t(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function h_t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&f_t(e,s)),n}return i._value=t,i}function p_t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&d_t(e,s)),n}return i._value=t,i}function m_t(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=P6(e);return this.tween(n,(r.local?h_t:p_t)(r,t))}function g_t(e,t){return function(){hJ(this,e).delay=+t.apply(this,arguments)}}function y_t(e,t){return t=+t,function(){hJ(this,e).delay=t}}function v_t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?g_t:y_t)(t,e)):Ff(this.node(),t).delay}function b_t(e,t){return function(){Ep(this,e).duration=+t.apply(this,arguments)}}function __t(e,t){return t=+t,function(){Ep(this,e).duration=t}}function w_t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?b_t:__t)(t,e)):Ff(this.node(),t).duration}function E_t(e,t){if(typeof t!="function")throw new Error;return function(){Ep(this,e).ease=t}}function x_t(e){var t=this._id;return arguments.length?this.each(E_t(t,e)):Ff(this.node(),t).ease}function S_t(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ep(this,e).ease=n}}function T_t(e){if(typeof e!="function")throw new Error;return this.each(S_t(this._id,e))}function C_t(e){typeof e!="function"&&(e=mAe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new Ym(r,this._parents,this._name,this._id)}function A_t(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],u=n[a],c=l.length,d=o[a]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;a<r;++a)o[a]=t[a];return new Ym(o,this._parents,this._name,this._id)}function I_t(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function R_t(e,t,n){var r,i,s=I_t(t)?hJ:Ep;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function k_t(e,t){var n=this._id;return arguments.length<2?Ff(this.node(),n).on.on(e):this.each(R_t(n,e,t))}function P_t(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function N_t(){return this.on("end.remove",P_t(this._id))}function O_t(e){var t=this._name,n=this._id;typeof e!="function"&&(e=rJ(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,u=s[o]=new Array(l),c,d,f=0;f<l;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,L6(u[f],t,n,f,u,Ff(c,n)));return new Ym(s,this._parents,t,n)}function D_t(e){var t=this._name,n=this._id;typeof e!="function"&&(e=pAe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,p=Ff(c,n),m=0,g=f.length;m<g;++m)(h=f[m])&&L6(h,t,n,m,f,p);s.push(f),o.push(c)}return new Ym(s,o,t,n)}var M_t=nk.prototype.constructor;function $_t(){return new M_t(this._groups,this._parents)}function L_t(e,t){var n,r,i;return function(){var s=JE(this,e),o=(this.style.removeProperty(e),JE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function tIe(e){return function(){this.style.removeProperty(e)}}function F_t(e,t,n){var r,i=n+"",s;return function(){var o=JE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function j_t(e,t,n){var r,i,s;return function(){var o=JE(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),JE(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function B_t(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=Ep(this,e),u=l.on,c=l.value[s]==null?a||(a=tIe(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(o,i=c),l.on=r}}function z_t(e,t,n){var r=(e+="")=="transform"?WAe:eIe;return t==null?this.styleTween(e,L_t(e,r)).on("end.style."+e,tIe(e)):typeof t=="function"?this.styleTween(e,j_t(e,r,pJ(this,"style."+e,t))).each(B_t(this._id,e)):this.styleTween(e,F_t(e,r,t),n).on("end.style."+e,null)}function U_t(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function V_t(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&U_t(e,o,n)),r}return s._value=t,s}function H_t(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,V_t(e,t,n??""))}function q_t(e){return function(){this.textContent=e}}function W_t(e){return function(){var t=e(this);this.textContent=t??""}}function G_t(e){return this.tween("text",typeof e=="function"?W_t(pJ(this,"text",e)):q_t(e==null?"":e+""))}function Y_t(e){return function(t){this.textContent=e.call(this,t)}}function K_t(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Y_t(i)),t}return r._value=e,r}function X_t(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,K_t(e))}function Q_t(){for(var e=this._name,t=this._id,n=nIe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var c=Ff(l,t);L6(l,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ym(r,this._parents,e,n)}function J_t(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var u=Ep(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&s()})}var Z_t=0;function Ym(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function nIe(){return++Z_t}var Vp=nk.prototype;Ym.prototype={constructor:Ym,select:O_t,selectAll:D_t,selectChild:Vp.selectChild,selectChildren:Vp.selectChildren,filter:C_t,merge:A_t,selection:$_t,transition:Q_t,call:Vp.call,nodes:Vp.nodes,node:Vp.node,size:Vp.size,empty:Vp.empty,each:Vp.each,on:k_t,attr:c_t,attrTween:m_t,style:z_t,styleTween:H_t,text:G_t,textTween:X_t,remove:N_t,tween:r_t,delay:v_t,duration:w_t,ease:x_t,easeVarying:T_t,end:J_t,[Symbol.iterator]:Vp[Symbol.iterator]};function ewt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var twt={time:null,delay:0,duration:250,ease:ewt};function nwt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function rwt(e){var t,n;e instanceof Ym?(t=e._id,e=e._name):(t=nIe(),(n=twt).time=$6(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&L6(l,e,t,u,o,n||nwt(l,t));return new Ym(r,this._parents,e,t)}nk.prototype.interrupt=e_t;nk.prototype.transition=rwt;const DB=e=>()=>e;function iwt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function swt(e){e.stopImmediatePropagation()}function MB(e){e.preventDefault(),e.stopImmediatePropagation()}var ofe={name:"drag"},$B={name:"space"},B_={name:"handle"},z_={name:"center"};const{abs:afe,max:fa,min:ha}=Math;function lfe(e){return[+e[0],+e[1]]}function BV(e){return[lfe(e[0]),lfe(e[1])]}var hD={name:"x",handles:["w","e"].map(mI),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},pD={name:"y",handles:["n","s"].map(mI),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},owt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(mI),input:function(e){return e==null?null:BV(e)},output:function(e){return e}},Hp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ufe={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},cfe={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},awt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},lwt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function mI(e){return{type:e}}function uwt(e){return!e.ctrlKey&&!e.button}function cwt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function dwt(){return navigator.maxTouchPoints||"ontouchstart"in this}function LB(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function fwt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function hwt(){return mJ(hD)}function pwt(){return mJ(pD)}function mwt(){return mJ(owt)}function mJ(e){var t=cwt,n=uwt,r=dwt,i=!0,s=k6("start","brush","end"),o=6,a;function l(g){var y=g.property("__brush",m).selectAll(".overlay").data([mI("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Hp.overlay).merge(y).each(function(){var _=LB(this).extent;Fo(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),g.selectAll(".selection").data([mI("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Hp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(_){return _.type});v.exit().remove(),v.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return Hp[_.type]}),g.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(g,y,v){g.tween?g.on("start.brush",function(_){c(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){c(this,arguments).end(_)}).tween("brush",function(){var _=this,w=_.__brush,E=c(_,arguments),S=w.selection,x=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),T=gg(S,x);function I(P){w.selection=P===1&&x===null?null:T(P),u.call(_),E.brush()}return S!==null&&x!==null?I:I(1)}):g.each(function(){var _=this,w=arguments,E=_.__brush,S=e.input(typeof y=="function"?y.apply(_,w):y,E.extent),x=c(_,w).beforestart();jV(_),E.selection=S===null?null:S,u.call(_),x.start(v).brush(v).end(v)})},l.clear=function(g,y){l.move(g,null,y)};function u(){var g=Fo(this),y=LB(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var _=g.__brush.emitter;return _&&(!v||!_.clean)?_:new d(g,y,v)}function d(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}d.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var _=Fo(this.that).datum();s.call(g,this.that,new iwt(g,{sourceEvent:y,target:l,selection:e.output(this.state.selection),mode:v,dispatch:s}),_)}};function f(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,_=(i&&g.metaKey?v="overlay":v)==="selection"?ofe:i&&g.altKey?z_:B_,w=e===pD?null:awt[v],E=e===hD?null:lwt[v],S=LB(y),x=S.extent,T=S.selection,I=x[0][0],P,k,D=x[0][1],R,M,$=x[1][0],L,B,U=x[1][1],z,N,V=0,W=0,F,H=w&&E&&i&&g.shiftKey,G,Q,ie=Array.from(g.touches||[g],ye=>{const ae=ye.identifier;return ye=Ude(ye,y),ye.point0=ye.slice(),ye.identifier=ae,ye});jV(y);var se=c(y,arguments,!0).beforestart();if(v==="overlay"){T&&(F=!0);const ye=[ie[0],ie[1]||ie[0]];S.selection=T=[[P=e===pD?I:ha(ye[0][0],ye[1][0]),R=e===hD?D:ha(ye[0][1],ye[1][1])],[L=e===pD?$:fa(ye[0][0],ye[1][0]),z=e===hD?U:fa(ye[0][1],ye[1][1])]],ie.length>1&&We(g)}else P=T[0][0],R=T[0][1],L=T[1][0],z=T[1][1];k=P,M=R,B=L,N=z;var ne=Fo(y).attr("pointer-events","none"),ce=ne.selectAll(".overlay").attr("cursor",Hp[v]);if(g.touches)se.moved=de,se.ended=Fe;else{var Ee=Fo(g.view).on("mousemove.brush",de,!0).on("mouseup.brush",Fe,!0);i&&Ee.on("keydown.brush",Ne,!0).on("keyup.brush",je,!0),abt(g.view)}u.call(y),se.start(g,_.name);function de(ye){for(const ae of ye.changedTouches||[ye])for(const Pe of ie)Pe.identifier===ae.identifier&&(Pe.cur=Ude(ae,y));if(H&&!G&&!Q&&ie.length===1){const ae=ie[0];afe(ae.cur[0]-ae[0])>afe(ae.cur[1]-ae[1])?Q=!0:G=!0}for(const ae of ie)ae.cur&&(ae[0]=ae.cur[0],ae[1]=ae.cur[1]);F=!0,MB(ye),We(ye)}function We(ye){const ae=ie[0],Pe=ae.point0;var Be;switch(V=ae[0]-Pe[0],W=ae[1]-Pe[1],_){case $B:case ofe:{w&&(V=fa(I-P,ha($-L,V)),k=P+V,B=L+V),E&&(W=fa(D-R,ha(U-z,W)),M=R+W,N=z+W);break}case B_:{ie[1]?(w&&(k=fa(I,ha($,ie[0][0])),B=fa(I,ha($,ie[1][0])),w=1),E&&(M=fa(D,ha(U,ie[0][1])),N=fa(D,ha(U,ie[1][1])),E=1)):(w<0?(V=fa(I-P,ha($-P,V)),k=P+V,B=L):w>0&&(V=fa(I-L,ha($-L,V)),k=P,B=L+V),E<0?(W=fa(D-R,ha(U-R,W)),M=R+W,N=z):E>0&&(W=fa(D-z,ha(U-z,W)),M=R,N=z+W));break}case z_:{w&&(k=fa(I,ha($,P-V*w)),B=fa(I,ha($,L+V*w))),E&&(M=fa(D,ha(U,R-W*E)),N=fa(D,ha(U,z+W*E)));break}}B<k&&(w*=-1,Be=P,P=L,L=Be,Be=k,k=B,B=Be,v in ufe&&ce.attr("cursor",Hp[v=ufe[v]])),N<M&&(E*=-1,Be=R,R=z,z=Be,Be=M,M=N,N=Be,v in cfe&&ce.attr("cursor",Hp[v=cfe[v]])),S.selection&&(T=S.selection),G&&(k=T[0][0],B=T[1][0]),Q&&(M=T[0][1],N=T[1][1]),(T[0][0]!==k||T[0][1]!==M||T[1][0]!==B||T[1][1]!==N)&&(S.selection=[[k,M],[B,N]],u.call(y),se.brush(ye,_.name))}function Fe(ye){if(swt(ye),ye.touches){if(ye.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else lbt(ye.view,F),Ee.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ne.attr("pointer-events","all"),ce.attr("cursor",Hp.overlay),S.selection&&(T=S.selection),fwt(T)&&(S.selection=null,u.call(y)),se.end(ye,_.name)}function Ne(ye){switch(ye.keyCode){case 16:{H=w&&E;break}case 18:{_===B_&&(w&&(L=B-V*w,P=k+V*w),E&&(z=N-W*E,R=M+W*E),_=z_,We(ye));break}case 32:{(_===B_||_===z_)&&(w<0?L=B-V:w>0&&(P=k-V),E<0?z=N-W:E>0&&(R=M-W),_=$B,ce.attr("cursor",Hp.selection),We(ye));break}default:return}MB(ye)}function je(ye){switch(ye.keyCode){case 16:{H&&(G=Q=H=!1,We(ye));break}case 18:{_===z_&&(w<0?L=B:w>0&&(P=k),E<0?z=N:E>0&&(R=M),_=B_,We(ye));break}case 32:{_===$B&&(ye.altKey?(w&&(L=B-V*w,P=k+V*w),E&&(z=N-W*E,R=M+W*E),_=z_):(w<0?L=B:w>0&&(P=k),E<0?z=N:E>0&&(R=M),_=B_),ce.attr("cursor",Hp[v]),We(ye));break}default:return}MB(ye)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=BV(t.apply(this,arguments)),g.dim=e,g}return l.extent=function(g){return arguments.length?(t=typeof g=="function"?g:DB(BV(g)),l):t},l.filter=function(g){return arguments.length?(n=typeof g=="function"?g:DB(!!g),l):n},l.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:DB(!!g),l):r},l.handleSize=function(g){return arguments.length?(o=+g,l):o},l.keyModifiers=function(g){return arguments.length?(i=!!g,l):i},l.on=function(){var g=s.on.apply(s,arguments);return g===s?l:g},l}const zV=Math.PI,UV=2*zV,Xv=1e-6,gwt=UV-Xv;function rIe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ywt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return rIe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let gJ=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?rIe:ywt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-t,u=i-n,c=o-t,d=a-n,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Xv)if(!(Math.abs(d*l-u*c)>Xv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=l*l+u*u,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(f),_=s*Math.tan((zV-Math.acos((m+f-g)/(2*y*v)))/2),w=_/v,E=_/y;Math.abs(w-1)>Xv&&this._append`L${t+w*c},${n+w*d}`,this._append`A${s},${s},0,0,${+(d*h>c*p)},${this._x1=t+E*l},${this._y1=n+E*u}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,c=n+l,d=1^o,f=o?i-s:s-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Xv||Math.abs(this._y1-c)>Xv)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%UV+UV),f>gwt?this._append`A${r},${r},0,1,${d},${t-a},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=c}`:f>Xv&&this._append`A${r},${r},0,${+(f>=zV)},${d},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function F6(){return new gJ}F6.prototype=gJ.prototype;const Rm=11102230246251565e-32,pa=134217729,vwt=(3+8*Rm)*Rm;function FB(e,t,n,r,i){let s,o,a,l,u=t[0],c=r[0],d=0,f=0;c>u==c>-u?(s=u,u=t[++d]):(s=c,c=r[++f]);let h=0;if(d<e&&f<n)for(c>u==c>-u?(o=u+s,a=s-(o-u),u=t[++d]):(o=c+s,a=s-(o-c),c=r[++f]),s=o,a!==0&&(i[h++]=a);d<e&&f<n;)c>u==c>-u?(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=t[++d]):(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=r[++f]),s=o,a!==0&&(i[h++]=a);for(;d<e;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=t[++d],s=o,a!==0&&(i[h++]=a);for(;f<n;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=r[++f],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function bwt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function sk(e){return new Float64Array(e)}const _wt=(3+16*Rm)*Rm,wwt=(2+12*Rm)*Rm,Ewt=(9+64*Rm)*Rm*Rm,U_=sk(4),dfe=sk(8),ffe=sk(12),hfe=sk(16),Wa=sk(4);function xwt(e,t,n,r,i,s,o){let a,l,u,c,d,f,h,p,m,g,y,v,_,w,E,S,x,T;const I=e-i,P=n-i,k=t-s,D=r-s;w=I*D,f=pa*I,h=f-(f-I),p=I-h,f=pa*D,m=f-(f-D),g=D-m,E=p*g-(w-h*m-p*m-h*g),S=k*P,f=pa*k,h=f-(f-k),p=k-h,f=pa*P,m=f-(f-P),g=P-m,x=p*g-(S-h*m-p*m-h*g),y=E-x,d=E-y,U_[0]=E-(y+d)+(d-x),v=w+y,d=v-w,_=w-(v-d)+(y-d),y=_-S,d=_-y,U_[1]=_-(y+d)+(d-S),T=v+y,d=T-v,U_[2]=v-(T-d)+(y-d),U_[3]=T;let R=bwt(4,U_),M=wwt*o;if(R>=M||-R>=M||(d=e-I,a=e-(I+d)+(d-i),d=n-P,u=n-(P+d)+(d-i),d=t-k,l=t-(k+d)+(d-s),d=r-D,c=r-(D+d)+(d-s),a===0&&l===0&&u===0&&c===0)||(M=Ewt*o+vwt*Math.abs(R),R+=I*c+D*a-(k*u+P*l),R>=M||-R>=M))return R;w=a*D,f=pa*a,h=f-(f-a),p=a-h,f=pa*D,m=f-(f-D),g=D-m,E=p*g-(w-h*m-p*m-h*g),S=l*P,f=pa*l,h=f-(f-l),p=l-h,f=pa*P,m=f-(f-P),g=P-m,x=p*g-(S-h*m-p*m-h*g),y=E-x,d=E-y,Wa[0]=E-(y+d)+(d-x),v=w+y,d=v-w,_=w-(v-d)+(y-d),y=_-S,d=_-y,Wa[1]=_-(y+d)+(d-S),T=v+y,d=T-v,Wa[2]=v-(T-d)+(y-d),Wa[3]=T;const $=FB(4,U_,4,Wa,dfe);w=I*c,f=pa*I,h=f-(f-I),p=I-h,f=pa*c,m=f-(f-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=k*u,f=pa*k,h=f-(f-k),p=k-h,f=pa*u,m=f-(f-u),g=u-m,x=p*g-(S-h*m-p*m-h*g),y=E-x,d=E-y,Wa[0]=E-(y+d)+(d-x),v=w+y,d=v-w,_=w-(v-d)+(y-d),y=_-S,d=_-y,Wa[1]=_-(y+d)+(d-S),T=v+y,d=T-v,Wa[2]=v-(T-d)+(y-d),Wa[3]=T;const L=FB($,dfe,4,Wa,ffe);w=a*c,f=pa*a,h=f-(f-a),p=a-h,f=pa*c,m=f-(f-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=l*u,f=pa*l,h=f-(f-l),p=l-h,f=pa*u,m=f-(f-u),g=u-m,x=p*g-(S-h*m-p*m-h*g),y=E-x,d=E-y,Wa[0]=E-(y+d)+(d-x),v=w+y,d=v-w,_=w-(v-d)+(y-d),y=_-S,d=_-y,Wa[1]=_-(y+d)+(d-S),T=v+y,d=T-v,Wa[2]=v-(T-d)+(y-d),Wa[3]=T;const B=FB(L,ffe,4,Wa,hfe);return hfe[B-1]}function SN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),l=o-a,u=Math.abs(o+a);return Math.abs(l)>=_wt*u?l:-xwt(e,t,n,r,i,s,u)}const pfe=Math.pow(2,-52),TN=new Uint32Array(512);class b${static from(t,n=Iwt,r=Rwt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new b$(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let I=0;I<o;I++){const P=t[2*I],k=t[2*I+1];P<a&&(a=P),k<l&&(l=k),P>u&&(u=P),k>c&&(c=k),this._ids[I]=I}const d=(a+u)/2,f=(l+c)/2;let h,p,m;for(let I=0,P=1/0;I<o;I++){const k=jB(d,f,t[2*I],t[2*I+1]);k<P&&(h=I,P=k)}const g=t[2*h],y=t[2*h+1];for(let I=0,P=1/0;I<o;I++){if(I===h)continue;const k=jB(g,y,t[2*I],t[2*I+1]);k<P&&k>0&&(p=I,P=k)}let v=t[2*p],_=t[2*p+1],w=1/0;for(let I=0;I<o;I++){if(I===h||I===p)continue;const P=Cwt(g,y,v,_,t[2*I],t[2*I+1]);P<w&&(m=I,w=P)}let E=t[2*m],S=t[2*m+1];if(w===1/0){for(let k=0;k<o;k++)this._dists[k]=t[2*k]-t[0]||t[2*k+1]-t[1];Fw(this._ids,this._dists,0,o-1);const I=new Uint32Array(o);let P=0;for(let k=0,D=-1/0;k<o;k++){const R=this._ids[k],M=this._dists[R];M>D&&(I[P++]=R,D=M)}this.hull=I.subarray(0,P),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(SN(g,y,v,_,E,S)<0){const I=p,P=v,k=_;p=m,v=E,_=S,m=I,E=P,S=k}const x=Awt(g,y,v,_,E,S);this._cx=x.x,this._cy=x.y;for(let I=0;I<o;I++)this._dists[I]=jB(t[2*I],t[2*I+1],x.x,x.y);Fw(this._ids,this._dists,0,o-1),this._hullStart=h;let T=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,_)]=p,s[this._hashKey(E,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let I=0,P,k;I<this._ids.length;I++){const D=this._ids[I],R=t[2*D],M=t[2*D+1];if(I>0&&Math.abs(R-P)<=pfe&&Math.abs(M-k)<=pfe||(P=R,k=M,D===h||D===p||D===m))continue;let $=0;for(let N=0,V=this._hashKey(R,M);N<this._hashSize&&($=s[(V+N)%this._hashSize],!($!==-1&&$!==r[$]));N++);$=n[$];let L=$,B;for(;B=r[L],SN(R,M,t[2*L],t[2*L+1],t[2*B],t[2*B+1])>=0;)if(L=B,L===$){L=-1;break}if(L===-1)continue;let U=this._addTriangle(L,D,r[L],-1,-1,i[L]);i[D]=this._legalize(U+2),i[L]=U,T++;let z=r[L];for(;B=r[z],SN(R,M,t[2*z],t[2*z+1],t[2*B],t[2*B+1])<0;)U=this._addTriangle(z,D,B,i[D],-1,i[z]),i[D]=this._legalize(U+2),r[z]=z,T--,z=B;if(L===$)for(;B=n[L],SN(R,M,t[2*B],t[2*B+1],t[2*L],t[2*L+1])<0;)U=this._addTriangle(B,D,L,-1,i[L],i[B]),this._legalize(U+2),i[B]=U,r[L]=L,T--,L=B;this._hullStart=n[D]=L,r[L]=n[z]=D,r[D]=z,s[this._hashKey(R,M)]=D,s[this._hashKey(t[2*L],t[2*L+1])]=L}this.hull=new Uint32Array(T);for(let I=0,P=this._hullStart;I<T;I++)this.hull[I]=P,P=r[P];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Swt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=TN[--s];continue}const u=a-a%3,c=l+(t+1)%3,d=u+(a+2)%3,f=n[o],h=n[t],p=n[c],m=n[d];if(Twt(i[2*f],i[2*f+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=f;const y=r[d];if(y===-1){let _=this._hullStart;do{if(this._hullTri[_]===d){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,d);const v=u+(a+1)%3;s<TN.length&&(TN[s++]=v)}else{if(s===0)break;t=TN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Swt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function jB(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Twt(e,t,n,r,i,s,o,a){const l=e-o,u=t-a,c=n-o,d=r-a,f=i-o,h=s-a,p=l*l+u*u,m=c*c+d*d,g=f*f+h*h;return l*(d*g-m*h)-u*(c*g-m*f)+p*(c*h-d*f)<0}function Cwt(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,u=s-t,c=o*o+a*a,d=l*l+u*u,f=.5/(o*u-a*l),h=(u*c-a*d)*f,p=(o*d-l*c)*f;return h*h+p*p}function Awt(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,u=s-t,c=o*o+a*a,d=l*l+u*u,f=.5/(o*u-a*l),h=e+(u*c-a*d)*f,p=t+(o*d-l*c)*f;return{x:h,y:p}}function Fw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;UT(e,i,s),t[e[n]]>t[e[r]]&&UT(e,n,r),t[e[s]]>t[e[r]]&&UT(e,s,r),t[e[n]]>t[e[s]]&&UT(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;UT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Fw(e,t,s,r),Fw(e,t,n,o-1)):(Fw(e,t,n,o-1),Fw(e,t,s,r))}}function UT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Iwt(e){return e[0]}function Rwt(e){return e[1]}const mfe=1e-6;class k1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>mfe||Math.abs(this._y1-s)>mfe)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class VV{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let kwt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,_;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,S=r[m+2]*2,x=t[w],T=t[w+1],I=t[E],P=t[E+1],k=t[S],D=t[S+1],R=I-x,M=P-T,$=k-x,L=D-T,B=(R*L-M*$)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const z of n)s+=t[z*2],o+=t[z*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-x)*L-(o-T)*$);v=(x+k)/2-U*L,_=(T+D)/2+U*$}else{const U=1/B,z=R*R+M*M,N=$*$+L*L;v=x+(L*z-M*N)*U,_=T+(R*N-$*z)*U}a[g]=v,a[g+1]=_}let l=n[n.length-1],u,c=l*4,d,f=t[2*l],h,p=t[2*l+1];i.fill(0);for(let m=0;m<n.length;++m)l=n[m],u=c,d=f,h=p,c=l*4,f=t[2*l],p=t[2*l+1],i[u+2]=i[c]=h-p,i[u+3]=i[c+1]=f-d}render(t){const n=t==null?t=new k1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,d=r.length;c<d;++c){const f=r[c];if(f<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(f/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let l,u=s[s.length-1];for(let c=0;c<s.length;++c){l=u,u=s[c];const d=Math.floor(i[u]/3)*2,f=o[d],h=o[d+1],p=l*4,m=this._project(f,h,a[p+2],a[p+3]);m&&this._renderSegment(f,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new k1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new k1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new VV;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+l-2)%l]&&n[(s+3)%o]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let l=o;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=i[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],l=n[r-1],u,c=this._regioncode(a,l),d,f=0;for(let h=0;h<r;h+=2)if(s=a,o=l,a=n[h],l=n[h+1],u=c,c=this._regioncode(a,l),u===0&&c===0)d=f,f=0,i?i.push(a,l):i=[a,l];else{let p,m,g,y,v;if(u===0){if((p=this._clipSegment(s,o,a,l,u,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,l,s,o,c,u))===null)continue;[y,v,m,g]=p,d=f,f=this._edgecode(m,g),d&&f&&this._edge(t,d,f,i,i.length),i?i.push(m,g):i=[m,g]}d=f,f=this._edgecode(y,v),d&&f&&this._edge(t,d,f,i,i.length),i?i.push(y,v):i=[y,v]}if(i)d=f,f=this._edgecode(i[0],i[1]),d&&f&&this._edge(t,d,f,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let l,u,c=s||o;c&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),s?(t=l,n=u,s=this._regioncode(t,n)):(r=l,i=u,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,c=a.length,d,f=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)d=f,f=this._edgecode(a[u],a[u+1]),d&&f&&(u=this._edge(t,d,f,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(l=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(l=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,l=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,l=n+(s=o)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Pwt=2*Math.PI,V_=Math.pow;function Nwt(e){return e[0]}function Owt(e){return e[1]}function Dwt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Mwt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class yJ{static from(t,n=Nwt,r=Owt,i){return new yJ("length"in t?$wt(t,n,r,i):Float64Array.from(Lwt(t,n,r,i)))}constructor(t){this._delaunator=new b$(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Dwt(t)){this.collinear=Int32Array.from({length:n.length/2},(f,h)=>h).sort((f,h)=>n[2*f]-n[2*h]||n[2*f+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],d=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let f=0,h=n.length/2;f<h;++f){const p=Mwt(n[2*f],n[2*f+1],d);n[2*f]=p[0],n[2*f+1]=p[1]}this._delaunator=new b$(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const c=s[l%3===2?l-2:l+1];(r[l]===-1||o[c]===-1)&&(o[c]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new kwt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const d=a.indexOf(t);d>0&&(yield a[d-1]),d<a.length-1&&(yield a[d+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=o[u],u=u%3===2?u-2:u+1,o[u]!==t)return;if(u=s[u],u===-1){const d=r[(i[t]+1)%r.length];d!==c&&(yield d);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,d=V_(n-u[t*2],2)+V_(r-u[t*2+1],2);const f=i[t];let h=f;do{let p=l[h];const m=V_(n-u[p*2],2)+V_(r-u[p*2+1],2);if(m<d&&(d=m,c=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&V_(n-u[h*2],2)+V_(r-u[h*2+1],2)<d)return h;break}}while(h!==f);return c}render(t){const n=t==null?t=new k1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l<o)continue;const u=s[o]*2,c=s[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new k1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],l=i[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,Pwt)}return r&&r.value()}renderHull(t){const n=t==null?t=new k1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new VV;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new k1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new VV;return this.renderTriangle(t,n),n.value()}}function $wt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Lwt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var gfe={},BB={},zB=34,VT=10,UB=13;function iIe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Fwt(e,t){var n=iIe(e);return function(r,i){return t(n(r),i,e)}}function yfe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Dl(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function jwt(e){return e<0?"-"+Dl(-e,6):e>9999?"+"+Dl(e,6):Dl(e,4)}function Bwt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":jwt(e.getUTCFullYear())+"-"+Dl(e.getUTCMonth()+1,2)+"-"+Dl(e.getUTCDate(),2)+(i?"T"+Dl(t,2)+":"+Dl(n,2)+":"+Dl(r,2)+"."+Dl(i,3)+"Z":r?"T"+Dl(t,2)+":"+Dl(n,2)+":"+Dl(r,2)+"Z":n||t?"T"+Dl(t,2)+":"+Dl(n,2)+"Z":"")}function sIe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(d,f){var h,p,m=i(d,function(g,y){if(h)return h(g,y-1);p=g,h=f?Fwt(g,f):iIe(g)});return m.columns=p||[],m}function i(d,f){var h=[],p=d.length,m=0,g=0,y,v=p<=0,_=!1;d.charCodeAt(p-1)===VT&&--p,d.charCodeAt(p-1)===UB&&--p;function w(){if(v)return BB;if(_)return _=!1,gfe;var S,x=m,T;if(d.charCodeAt(x)===zB){for(;m++<p&&d.charCodeAt(m)!==zB||d.charCodeAt(++m)===zB;);return(S=m)>=p?v=!0:(T=d.charCodeAt(m++))===VT?_=!0:T===UB&&(_=!0,d.charCodeAt(m)===VT&&++m),d.slice(x+1,S-1).replace(/""/g,'"')}for(;m<p;){if((T=d.charCodeAt(S=m++))===VT)_=!0;else if(T===UB)_=!0,d.charCodeAt(m)===VT&&++m;else if(T!==n)continue;return d.slice(x,S)}return v=!0,d.slice(x,p)}for(;(y=w())!==BB;){for(var E=[];y!==gfe&&y!==BB;)E.push(y),y=w();f&&(E=f(E,g++))==null||h.push(E)}return h}function s(d,f){return d.map(function(h){return f.map(function(p){return c(h[p])}).join(e)})}function o(d,f){return f==null&&(f=yfe(d)),[f.map(c).join(e)].concat(s(d,f)).join(`
`)}function a(d,f){return f==null&&(f=yfe(d)),s(d,f).join(`
`)}function l(d){return d.map(u).join(`
`)}function u(d){return d.map(c).join(e)}function c(d){return d==null?"":d instanceof Date?Bwt(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}var zwt=sIe(","),Uwt=zwt.parse;function Vwt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Hwt(e,t){return fetch(e,t).then(Vwt)}function qwt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Hwt(t,n).then(function(i){return e(i,r)})}}var Wwt=qwt(Uwt);function Gwt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,l=0,u=0;for(s=0;s<o;++s)a=n[s],l+=a.x,u+=a.y;for(l=(l/o-e)*r,u=(u/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=l,a.y-=u}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Ywt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return oIe(this.cover(t,n),t,n,e)}function oIe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,l=e._y0,u=e._x1,c=e._y1,d,f,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(d=(a+u)/2))?a=d:u=d,(g=n>=(f=(l+c)/2))?l=f:c=f,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(d=(a+u)/2))?a=d:u=d,(g=n>=(f=(l+c)/2))?l=f:c=f;while((y=g<<1|m)===(v=(p>=f)<<1|h>=d));return i[v]=s,i[y]=o,e}function Kwt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<l&&(l=i),i>c&&(c=i),s<u&&(u=s),s>d&&(d=s));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<r;++n)oIe(this,o[n],a[n],e[n]);return this}function Xwt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=s;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,o*=2,u){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Qwt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Jwt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function rl(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Zwt(e,t,n){var r,i=this._x0,s=this._y0,o,a,l,u,c=this._x1,d=this._y1,f=[],h=this._root,p,m;for(h&&f.push(new rl(h,i,s,c,d)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,d=t+n,n*=n);p=f.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>d||(l=p.x1)<i||(u=p.y1)<s))if(h.length){var g=(o+l)/2,y=(a+u)/2;f.push(new rl(h[3],g,y,l,u),new rl(h[2],o,y,g,u),new rl(h[1],g,a,l,y),new rl(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=f[f.length-1],f[f.length-1]=f[f.length-1-m],f[f.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),w=v*v+_*_;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,d=t+E,r=h.data}}return r}function eEt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,u=this._y1,c,d,f,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(f=(o+l)/2))?o=f:l=f,(m=d>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function tEt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function nEt(){return this._root}function rEt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function iEt(e){var t=[],n,r=this._root,i,s,o,a,l;for(r&&t.push(new rl(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(s+a)/2,c=(o+l)/2;(i=r[3])&&t.push(new rl(i,u,c,a,l)),(i=r[2])&&t.push(new rl(i,s,c,u,l)),(i=r[1])&&t.push(new rl(i,u,o,a,c)),(i=r[0])&&t.push(new rl(i,s,o,u,c))}return this}function sEt(e){var t=[],n=[],r;for(this._root&&t.push(new rl(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,u=r.y1,c=(o+l)/2,d=(a+u)/2;(s=i[0])&&t.push(new rl(s,o,a,c,d)),(s=i[1])&&t.push(new rl(s,c,a,l,d)),(s=i[2])&&t.push(new rl(s,o,d,c,u)),(s=i[3])&&t.push(new rl(s,c,d,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function oEt(e){return e[0]}function aEt(e){return arguments.length?(this._x=e,this):this._x}function lEt(e){return e[1]}function uEt(e){return arguments.length?(this._y=e,this):this._y}function vJ(e,t,n){var r=new bJ(t??oEt,n??lEt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function bJ(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function vfe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var xl=vJ.prototype=bJ.prototype;xl.copy=function(){var e=new bJ(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=vfe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=vfe(r));return e};xl.add=Ywt;xl.addAll=Kwt;xl.cover=Xwt;xl.data=Qwt;xl.extent=Jwt;xl.find=Zwt;xl.remove=eEt;xl.removeAll=tEt;xl.root=nEt;xl.size=rEt;xl.visit=iEt;xl.visitAfter=sEt;xl.x=aEt;xl.y=uEt;function sl(e){return function(){return e}}function w0(e){return(e()-.5)*1e-6}function cEt(e){return e.x+e.vx}function dEt(e){return e.y+e.vy}function fEt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=sl(e==null?1:+e));function o(){for(var u,c=t.length,d,f,h,p,m,g,y=0;y<s;++y)for(d=vJ(t,cEt,dEt).visitAfter(a),u=0;u<c;++u)f=t[u],m=n[f.index],g=m*m,h=f.x+f.vx,p=f.y+f.vy,d.visit(v);function v(_,w,E,S,x){var T=_.data,I=_.r,P=m+I;if(T){if(T.index>f.index){var k=h-T.x-T.vx,D=p-T.y-T.vy,R=k*k+D*D;R<P*P&&(k===0&&(k=w0(r),R+=k*k),D===0&&(D=w0(r),R+=D*D),R=(P-(R=Math.sqrt(R)))/R*i,f.vx+=(k*=R)*(P=(I*=I)/(g+I)),f.vy+=(D*=R)*P,T.vx-=k*(P=1-P),T.vy-=D*P)}return}return w>h+P||S<h-P||E>p+P||x<p-P}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,d;for(n=new Array(c),u=0;u<c;++u)d=t[u],n[d.index]=+e(d,u,t)}}return o.initialize=function(u,c){t=u,r=c,l()},o.iterations=function(u){return arguments.length?(s=+u,o):s},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(e=typeof u=="function"?u:sl(+u),l(),o):e},o}function hEt(e){return e.index}function bfe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function pEt(e){var t=hEt,n=d,r,i=sl(30),s,o,a,l,u,c=1;e==null&&(e=[]);function d(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function f(g){for(var y=0,v=e.length;y<c;++y)for(var _=0,w,E,S,x,T,I,P;_<v;++_)w=e[_],E=w.source,S=w.target,x=S.x+S.vx-E.x-E.vx||w0(u),T=S.y+S.vy-E.y-E.vy||w0(u),I=Math.sqrt(x*x+T*T),I=(I-s[_])/I*g*r[_],x*=I,T*=I,S.vx-=x*(P=l[_]),S.vy-=T*P,E.vx+=x*(P=1-P),E.vy+=T*P}function h(){if(o){var g,y=o.length,v=e.length,_=new Map(o.map((E,S)=>[t(E,S,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=bfe(_,w.source)),typeof w.target!="object"&&(w.target=bfe(_,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,l=new Array(v);g<v;++g)w=e[g],l[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return f.initialize=function(g,y){o=g,u=y,h()},f.links=function(g){return arguments.length?(e=g,h(),f):e},f.id=function(g){return arguments.length?(t=g,f):t},f.iterations=function(g){return arguments.length?(c=+g,f):c},f.strength=function(g){return arguments.length?(n=typeof g=="function"?g:sl(+g),p(),f):n},f.distance=function(g){return arguments.length?(i=typeof g=="function"?g:sl(+g),m(),f):i},f}const mEt=1664525,gEt=1013904223,_fe=4294967296;function yEt(){let e=1;return()=>(e=(mEt*e+gEt)%_fe)/_fe}function vEt(e){return e.x}function bEt(e){return e.y}var _Et=10,wEt=Math.PI*(3-Math.sqrt(5));function EEt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,l=fJ(d),u=k6("tick","end"),c=yEt();e==null&&(e=[]);function d(){f(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function f(m){var g,y=e.length,v;m===void 0&&(m=1);for(var _=0;_<m;++_)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=_Et*Math.sqrt(.5+m),_=m*wEt;y.x=v*Math.cos(_),y.y=v*Math.sin(_)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:f,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,_=e.length,w,E,S,x,T;for(y==null?y=1/0:y*=y,v=0;v<_;++v)x=e[v],w=m-x.x,E=g-x.y,S=w*w+E*E,S<y&&(T=x,y=S);return T},on:function(m,g){return arguments.length>1?(u.on(m,g),t):u.on(m)}}}function xEt(){var e,t,n,r,i=sl(-30),s,o=1,a=1/0,l=.81;function u(h){var p,m=e.length,g=vJ(e,vEt,bEt).visitAfter(d);for(r=h,p=0;p<m;++p)t=e[p],g.visit(f)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function d(h){var p=0,m,g,y=0,v,_,w;if(h.length){for(v=_=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,_+=g*m.y);h.x=v/y,h.y=_/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function f(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,_=g-p,w=y*y+v*v;if(_*_/l<w)return w<a&&(y===0&&(y=w0(n),w+=y*y),v===0&&(v=w0(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=w0(n),w+=y*y),v===0&&(v=w0(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(_=s[h.data.index]*r/w,t.vx+=y*_,t.vy+=v*_);while(h=h.next)}return u.initialize=function(h,p){e=h,n=p,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:sl(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function SEt(e){var t=sl(.1),n,r,i;typeof e!="function"&&(e=sl(e==null?0:+e));function s(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:sl(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:sl(+a),o(),s):e},s}function TEt(e){var t=sl(.1),n,r,i;typeof e!="function"&&(e=sl(e==null?0:+e));function s(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:sl(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:sl(+a),o(),s):e},s}function CEt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function _$(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function tx(e){return e=_$(Math.abs(e)),e?e[1]:NaN}function AEt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function IEt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var REt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function fb(e){if(!(t=REt.exec(e)))throw new Error("invalid format: "+e);var t;return new _J({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}fb.prototype=_J.prototype;function _J(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}_J.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kEt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var aIe;function PEt(e,t){var n=_$(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(aIe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+_$(e,Math.max(0,t+s-1))[0]}function wfe(e,t){var n=_$(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Efe={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:CEt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>wfe(e*100,t),r:wfe,s:PEt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function xfe(e){return e}var Sfe=Array.prototype.map,Tfe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function lIe(e){var t=e.grouping===void 0||e.thousands===void 0?xfe:AEt(Sfe.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?xfe:IEt(Sfe.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d){d=fb(d);var f=d.fill,h=d.align,p=d.sign,m=d.symbol,g=d.zero,y=d.width,v=d.comma,_=d.precision,w=d.trim,E=d.type;E==="n"?(v=!0,E="g"):Efe[E]||(_===void 0&&(_=12),w=!0,E="g"),(g||f==="0"&&h==="=")&&(g=!0,f="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",x=m==="$"?r:/[%p]/.test(E)?o:"",T=Efe[E],I=/[defgprs%]/.test(E);_=_===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function P(k){var D=S,R=x,M,$,L;if(E==="c")R=T(k)+R,k="";else{k=+k;var B=k<0||1/k<0;if(k=isNaN(k)?l:T(Math.abs(k),_),w&&(k=kEt(k)),B&&+k==0&&p!=="+"&&(B=!1),D=(B?p==="("?p:a:p==="-"||p==="("?"":p)+D,R=(E==="s"?Tfe[8+aIe/3]:"")+R+(B&&p==="("?")":""),I){for(M=-1,$=k.length;++M<$;)if(L=k.charCodeAt(M),48>L||L>57){R=(L===46?i+k.slice(M+1):k.slice(M))+R,k=k.slice(0,M);break}}}v&&!g&&(k=t(k,1/0));var U=D.length+k.length+R.length,z=U<y?new Array(y-U+1).join(f):"";switch(v&&g&&(k=t(z+k,z.length?y-R.length:1/0),z=""),h){case"<":k=D+k+R+z;break;case"=":k=D+z+k+R;break;case"^":k=z.slice(0,U=z.length>>1)+D+k+R+z.slice(U);break;default:k=z+D+k+R;break}return s(k)}return P.toString=function(){return d+""},P}function c(d,f){var h=u((d=fb(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(tx(f)/3)))*3,m=Math.pow(10,-p),g=Tfe[8+p/3];return function(y){return h(m*y)+g}}return{format:u,formatPrefix:c}}var CN,TS,wJ;NEt({thousands:",",grouping:[3],currency:["$",""]});function NEt(e){return CN=lIe(e),TS=CN.format,wJ=CN.formatPrefix,CN}function uIe(e){return Math.max(0,-tx(Math.abs(e)))}function cIe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(tx(t)/3)))*3-tx(Math.abs(e)))}function dIe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,tx(t)-tx(e))+1}var Gt=1e-6,w$=1e-12,Hn=Math.PI,cs=Hn/2,E$=Hn/4,pl=Hn*2,bs=180/Hn,Bn=Hn/180,ur=Math.abs,CS=Math.atan,td=Math.atan2,Kt=Math.cos,AN=Math.ceil,fIe=Math.exp,HV=Math.hypot,x$=Math.log,VB=Math.pow,Ut=Math.sin,Bc=Math.sign||function(e){return e>0?1:e<0?-1:0},ml=Math.sqrt,EJ=Math.tan;function hIe(e){return e>1?0:e<-1?Hn:Math.acos(e)}function cu(e){return e>1?cs:e<-1?-cs:Math.asin(e)}function Ho(){}function S$(e,t){e&&Afe.hasOwnProperty(e.type)&&Afe[e.type](e,t)}var Cfe={Feature:function(e,t){S$(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)S$(n[r].geometry,t)}},Afe={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){qV(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)qV(n[r],t,0)},Polygon:function(e,t){Ife(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Ife(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)S$(n[r],t)}};function qV(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Ife(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)qV(e[n],t,1);t.polygonEnd()}function om(e,t){e&&Cfe.hasOwnProperty(e.type)?Cfe[e.type](e,t):S$(e,t)}var T$=new ll,C$=new ll,pIe,mIe,WV,GV,YV,ep={point:Ho,lineStart:Ho,lineEnd:Ho,polygonStart:function(){T$=new ll,ep.lineStart=OEt,ep.lineEnd=DEt},polygonEnd:function(){var e=+T$;C$.add(e<0?pl+e:e),this.lineStart=this.lineEnd=this.point=Ho},sphere:function(){C$.add(pl)}};function OEt(){ep.point=MEt}function DEt(){gIe(pIe,mIe)}function MEt(e,t){ep.point=gIe,pIe=e,mIe=t,e*=Bn,t*=Bn,WV=e,GV=Kt(t=t/2+E$),YV=Ut(t)}function gIe(e,t){e*=Bn,t*=Bn,t=t/2+E$;var n=e-WV,r=n>=0?1:-1,i=r*n,s=Kt(t),o=Ut(t),a=YV*o,l=GV*s+a*Kt(i),u=a*r*Ut(i);T$.add(td(u,l)),WV=e,GV=s,YV=o}function $Et(e){return C$=new ll,om(e,ep),C$*2}function A$(e){return[td(e[1],e[0]),cu(e[2])]}function hb(e){var t=e[0],n=e[1],r=Kt(n);return[r*Kt(t),r*Ut(t),Ut(n)]}function IN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function nx(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function HB(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function RN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function I$(e){var t=ml(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Hi,zl,ns,Du,Qv,yIe,vIe,fE,eA,Zg,Km,nm={point:KV,lineStart:Rfe,lineEnd:kfe,polygonStart:function(){nm.point=_Ie,nm.lineStart=LEt,nm.lineEnd=FEt,eA=new ll,ep.polygonStart()},polygonEnd:function(){ep.polygonEnd(),nm.point=KV,nm.lineStart=Rfe,nm.lineEnd=kfe,T$<0?(Hi=-(ns=180),zl=-(Du=90)):eA>Gt?Du=90:eA<-Gt&&(zl=-90),Km[0]=Hi,Km[1]=ns},sphere:function(){Hi=-(ns=180),zl=-(Du=90)}};function KV(e,t){Zg.push(Km=[Hi=e,ns=e]),t<zl&&(zl=t),t>Du&&(Du=t)}function bIe(e,t){var n=hb([e*Bn,t*Bn]);if(fE){var r=nx(fE,n),i=[r[1],-r[0],0],s=nx(i,r);I$(s),s=A$(s);var o=e-Qv,a=o>0?1:-1,l=s[0]*bs*a,u,c=ur(o)>180;c^(a*Qv<l&&l<a*e)?(u=s[1]*bs,u>Du&&(Du=u)):(l=(l+360)%360-180,c^(a*Qv<l&&l<a*e)?(u=-s[1]*bs,u<zl&&(zl=u)):(t<zl&&(zl=t),t>Du&&(Du=t))),c?e<Qv?Nu(Hi,e)>Nu(Hi,ns)&&(ns=e):Nu(e,ns)>Nu(Hi,ns)&&(Hi=e):ns>=Hi?(e<Hi&&(Hi=e),e>ns&&(ns=e)):e>Qv?Nu(Hi,e)>Nu(Hi,ns)&&(ns=e):Nu(e,ns)>Nu(Hi,ns)&&(Hi=e)}else Zg.push(Km=[Hi=e,ns=e]);t<zl&&(zl=t),t>Du&&(Du=t),fE=n,Qv=e}function Rfe(){nm.point=bIe}function kfe(){Km[0]=Hi,Km[1]=ns,nm.point=KV,fE=null}function _Ie(e,t){if(fE){var n=e-Qv;eA.add(ur(n)>180?n+(n>0?360:-360):n)}else yIe=e,vIe=t;ep.point(e,t),bIe(e,t)}function LEt(){ep.lineStart()}function FEt(){_Ie(yIe,vIe),ep.lineEnd(),ur(eA)>Gt&&(Hi=-(ns=180)),Km[0]=Hi,Km[1]=ns,fE=null}function Nu(e,t){return(t-=e)<0?t+360:t}function jEt(e,t){return e[0]-t[0]}function Pfe(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function BEt(e){var t,n,r,i,s,o,a;if(Du=ns=-(Hi=zl=1/0),Zg=[],om(e,nm),n=Zg.length){for(Zg.sort(jEt),t=1,r=Zg[0],s=[r];t<n;++t)i=Zg[t],Pfe(r,i[0])||Pfe(r,i[1])?(Nu(r[0],i[1])>Nu(r[0],r[1])&&(r[1]=i[1]),Nu(i[0],r[1])>Nu(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Nu(r[1],i[0]))>o&&(o=a,Hi=i[0],ns=r[1])}return Zg=Km=null,Hi===1/0||zl===1/0?[[NaN,NaN],[NaN,NaN]]:[[Hi,zl],[ns,Du]]}var $C,R$,k$,P$,N$,O$,D$,M$,XV,QV,JV,wIe,EIe,el,tl,nl,Jd={sphere:Ho,point:xJ,lineStart:Nfe,lineEnd:Ofe,polygonStart:function(){Jd.lineStart=VEt,Jd.lineEnd=HEt},polygonEnd:function(){Jd.lineStart=Nfe,Jd.lineEnd=Ofe}};function xJ(e,t){e*=Bn,t*=Bn;var n=Kt(t);ok(n*Kt(e),n*Ut(e),Ut(t))}function ok(e,t,n){++$C,k$+=(e-k$)/$C,P$+=(t-P$)/$C,N$+=(n-N$)/$C}function Nfe(){Jd.point=zEt}function zEt(e,t){e*=Bn,t*=Bn;var n=Kt(t);el=n*Kt(e),tl=n*Ut(e),nl=Ut(t),Jd.point=UEt,ok(el,tl,nl)}function UEt(e,t){e*=Bn,t*=Bn;var n=Kt(t),r=n*Kt(e),i=n*Ut(e),s=Ut(t),o=td(ml((o=tl*s-nl*i)*o+(o=nl*r-el*s)*o+(o=el*i-tl*r)*o),el*r+tl*i+nl*s);R$+=o,O$+=o*(el+(el=r)),D$+=o*(tl+(tl=i)),M$+=o*(nl+(nl=s)),ok(el,tl,nl)}function Ofe(){Jd.point=xJ}function VEt(){Jd.point=qEt}function HEt(){xIe(wIe,EIe),Jd.point=xJ}function qEt(e,t){wIe=e,EIe=t,e*=Bn,t*=Bn,Jd.point=xIe;var n=Kt(t);el=n*Kt(e),tl=n*Ut(e),nl=Ut(t),ok(el,tl,nl)}function xIe(e,t){e*=Bn,t*=Bn;var n=Kt(t),r=n*Kt(e),i=n*Ut(e),s=Ut(t),o=tl*s-nl*i,a=nl*r-el*s,l=el*i-tl*r,u=HV(o,a,l),c=cu(u),d=u&&-c/u;XV.add(d*o),QV.add(d*a),JV.add(d*l),R$+=c,O$+=c*(el+(el=r)),D$+=c*(tl+(tl=i)),M$+=c*(nl+(nl=s)),ok(el,tl,nl)}function WEt(e){$C=R$=k$=P$=N$=O$=D$=M$=0,XV=new ll,QV=new ll,JV=new ll,om(e,Jd);var t=+XV,n=+QV,r=+JV,i=HV(t,n,r);return i<w$&&(t=O$,n=D$,r=M$,R$<Gt&&(t=k$,n=P$,r=N$),i=HV(t,n,r),i<w$)?[NaN,NaN]:[td(n,t)*bs,cu(r/i)*bs]}function ZV(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function eH(e,t){return ur(e)>Hn&&(e-=Math.round(e/pl)*pl),[e,t]}eH.invert=eH;function SIe(e,t,n){return(e%=pl)?t||n?ZV(Mfe(e),$fe(t,n)):Mfe(e):t||n?$fe(t,n):eH}function Dfe(e){return function(t,n){return t+=e,ur(t)>Hn&&(t-=Math.round(t/pl)*pl),[t,n]}}function Mfe(e){var t=Dfe(e);return t.invert=Dfe(-e),t}function $fe(e,t){var n=Kt(e),r=Ut(e),i=Kt(t),s=Ut(t);function o(a,l){var u=Kt(l),c=Kt(a)*u,d=Ut(a)*u,f=Ut(l),h=f*n+c*r;return[td(d*i-h*s,c*n-f*r),cu(h*i+d*s)]}return o.invert=function(a,l){var u=Kt(l),c=Kt(a)*u,d=Ut(a)*u,f=Ut(l),h=f*i-d*s;return[td(d*i+f*s,c*n+h*r),cu(h*n-c*r)]},o}function GEt(e){e=SIe(e[0]*Bn,e[1]*Bn,e.length>2?e[2]*Bn:0);function t(n){return n=e(n[0]*Bn,n[1]*Bn),n[0]*=bs,n[1]*=bs,n}return t.invert=function(n){return n=e.invert(n[0]*Bn,n[1]*Bn),n[0]*=bs,n[1]*=bs,n},t}function YEt(e,t,n,r,i,s){if(n){var o=Kt(t),a=Ut(t),l=r*n;i==null?(i=t+r*pl,s=t-l/2):(i=Lfe(o,i),s=Lfe(o,s),(r>0?i<s:i>s)&&(i+=r*pl));for(var u,c=i;r>0?c>s:c<s;c-=l)u=A$([o,-a*Kt(c),-a*Ut(c)]),e.point(u[0],u[1])}}function Lfe(e,t){t=hb(t),t[0]-=e,I$(t);var n=hIe(-t[1]);return((-t[2]<0?-n:n)+pl-Gt)%pl}function TIe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Ho,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function mD(e,t){return ur(e[0]-t[0])<Gt&&ur(e[1]-t[1])<Gt}function kN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function CIe(e,t,n,r,i){var s=[],o=[],a,l;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(mD(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Gt}s.push(v=new kN(g,p,null,!0)),o.push(v.o=new kN(g,null,v,!1)),s.push(v=new kN(y,p,null,!1)),o.push(v.o=new kN(y,null,v,!0))}}),!!s.length){for(o.sort(t),Ffe(s),Ffe(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var u=s[0],c,d;;){for(var f=u,h=!0;f.v;)if((f=f.n)===u)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(a=0,l=c.length;a<l;++a)i.point((d=c[a])[0],d[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(h)for(c=f.p.z,a=c.length-1;a>=0;--a)i.point((d=c[a])[0],d[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,c=f.z,h=!h}while(!f.v);i.lineEnd()}}}function Ffe(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function qB(e){return ur(e[0])<=Hn?e[0]:Bc(e[0])*((ur(e[0])+Hn)%pl-Hn)}function KEt(e,t){var n=qB(t),r=t[1],i=Ut(r),s=[Ut(n),-Kt(n),0],o=0,a=0,l=new ll;i===1?r=cs+Gt:i===-1&&(r=-cs-Gt);for(var u=0,c=e.length;u<c;++u)if(f=(d=e[u]).length)for(var d,f,h=d[f-1],p=qB(h),m=h[1]/2+E$,g=Ut(m),y=Kt(m),v=0;v<f;++v,p=w,g=S,y=x,h=_){var _=d[v],w=qB(_),E=_[1]/2+E$,S=Ut(E),x=Kt(E),T=w-p,I=T>=0?1:-1,P=I*T,k=P>Hn,D=g*S;if(l.add(td(D*I*Ut(P),y*x+D*Kt(P))),o+=k?T+I*pl:T,k^p>=n^w>=n){var R=nx(hb(h),hb(_));I$(R);var M=nx(s,R);I$(M);var $=(k^T>=0?-1:1)*cu(M[2]);(r>$||r===$&&(R[0]||R[1]))&&(a+=k^T>=0?1:-1)}}return(o<-Gt||o<Gt&&l<-w$)^a&1}function AIe(e,t,n,r){return function(i){var s=t(i),o=TIe(),a=t(o),l=!1,u,c,d,f={point:h,lineStart:m,lineEnd:g,polygonStart:function(){f.point=y,f.lineStart=v,f.lineEnd=_,c=[],u=[]},polygonEnd:function(){f.point=h,f.lineStart=m,f.lineEnd=g,c=dAe(c);var w=KEt(u,r);c.length?(l||(i.polygonStart(),l=!0),CIe(c,QEt,w,n,i)):w&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){f.point=p,s.lineStart()}function g(){f.point=h,s.lineEnd()}function y(w,E){d.push([w,E]),a.point(w,E)}function v(){a.lineStart(),d=[]}function _(){y(d[0][0],d[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),S,x=E.length,T,I,P;if(d.pop(),u.push(d),d=null,!!x){if(w&1){if(I=E[0],(T=I.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),S=0;S<T;++S)i.point((P=I[S])[0],P[1]);i.lineEnd()}return}x>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(XEt))}}return f}}function XEt(e){return e.length>1}function QEt(e,t){return((e=e.x)[0]<0?e[1]-cs-Gt:cs-e[1])-((t=t.x)[0]<0?t[1]-cs-Gt:cs-t[1])}const jfe=AIe(function(){return!0},JEt,ext,[-Hn,-cs]);function JEt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Hn:-Hn,l=ur(s-t);ur(l-Hn)<Gt?(e.point(t,n=(n+o)/2>0?cs:-cs),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&l>=Hn&&(ur(t-r)<Gt&&(t-=r*Gt),ur(s-a)<Gt&&(s-=a*Gt),n=ZEt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function ZEt(e,t,n,r){var i,s,o=Ut(e-n);return ur(o)>Gt?CS((Ut(t)*(s=Kt(r))*Ut(n)-Ut(r)*(i=Kt(t))*Ut(e))/(i*s*o)):(t+r)/2}function ext(e,t,n,r){var i;if(e==null)i=n*cs,r.point(-Hn,i),r.point(0,i),r.point(Hn,i),r.point(Hn,0),r.point(Hn,-i),r.point(0,-i),r.point(-Hn,-i),r.point(-Hn,0),r.point(-Hn,i);else if(ur(e[0]-t[0])>Gt){var s=e[0]<t[0]?Hn:-Hn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function txt(e){var t=Kt(e),n=2*Bn,r=t>0,i=ur(t)>Gt;function s(c,d,f,h){YEt(h,e,n,f,c,d)}function o(c,d){return Kt(c)*Kt(d)>t}function a(c){var d,f,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],_,w=o(g,y),E=r?w?0:u(g,y):w?u(g+(g<0?Hn:-Hn),y):0;if(!d&&(p=h=w)&&c.lineStart(),w!==h&&(_=l(d,v),(!_||mD(d,_)||mD(v,_))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),_=l(v,d),c.point(_[0],_[1])):(_=l(d,v),c.point(_[0],_[1],2),c.lineEnd()),d=_;else if(i&&d&&r^w){var S;!(E&f)&&(S=l(v,d,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}w&&(!d||!mD(d,v))&&c.point(v[0],v[1]),d=v,h=w,f=E},lineEnd:function(){h&&c.lineEnd(),d=null},clean:function(){return m|(p&&h)<<1}}}function l(c,d,f){var h=hb(c),p=hb(d),m=[1,0,0],g=nx(h,p),y=IN(g,g),v=g[0],_=y-v*v;if(!_)return!f&&c;var w=t*y/_,E=-t*v/_,S=nx(m,g),x=RN(m,w),T=RN(g,E);HB(x,T);var I=S,P=IN(x,I),k=IN(I,I),D=P*P-k*(IN(x,x)-1);if(!(D<0)){var R=ml(D),M=RN(I,(-P-R)/k);if(HB(M,x),M=A$(M),!f)return M;var $=c[0],L=d[0],B=c[1],U=d[1],z;L<$&&(z=$,$=L,L=z);var N=L-$,V=ur(N-Hn)<Gt,W=V||N<Gt;if(!V&&U<B&&(z=B,B=U,U=z),W?V?B+U>0^M[1]<(ur(M[0]-$)<Gt?B:U):B<=M[1]&&M[1]<=U:N>Hn^($<=M[0]&&M[0]<=L)){var F=RN(I,(-P+R)/k);return HB(F,x),[M,A$(F)]}}}function u(c,d){var f=r?e:Hn-e,h=0;return c<-f?h|=1:c>f&&(h|=2),d<-f?h|=4:d>f&&(h|=8),h}return AIe(o,a,s,r?[0,-e]:[-Hn,e-Hn])}function nxt(e,t,n,r,i,s){var o=e[0],a=e[1],l=t[0],u=t[1],c=0,d=1,f=l-o,h=u-a,p;if(p=n-o,!(!f&&p>0)){if(p/=f,f<0){if(p<c)return;p<d&&(d=p)}else if(f>0){if(p>d)return;p>c&&(c=p)}if(p=i-o,!(!f&&p<0)){if(p/=f,f<0){if(p>d)return;p>c&&(c=p)}else if(f>0){if(p<c)return;p<d&&(d=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<d&&(d=p)}else if(h>0){if(p>d)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>d)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<d&&(d=p)}return c>0&&(e[0]=o+c*f,e[1]=a+c*h),d<1&&(t[0]=o+d*f,t[1]=a+d*h),!0}}}}}var LC=1e9,PN=-LC;function IIe(e,t,n,r){function i(u,c){return e<=u&&u<=n&&t<=c&&c<=r}function s(u,c,d,f){var h=0,p=0;if(u==null||(h=o(u,d))!==(p=o(c,d))||l(u,c)<0^d>0)do f.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+d+4)%4)!==p);else f.point(c[0],c[1])}function o(u,c){return ur(u[0]-e)<Gt?c>0?0:3:ur(u[0]-n)<Gt?c>0?2:1:ur(u[1]-t)<Gt?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var d=o(u,1),f=o(c,1);return d!==f?d-f:d===0?c[1]-u[1]:d===1?u[0]-c[0]:d===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,d=TIe(),f,h,p,m,g,y,v,_,w,E,S,x={point:T,lineStart:D,lineEnd:R,polygonStart:P,polygonEnd:k};function T($,L){i($,L)&&c.point($,L)}function I(){for(var $=0,L=0,B=h.length;L<B;++L)for(var U=h[L],z=1,N=U.length,V=U[0],W,F,H=V[0],G=V[1];z<N;++z)W=H,F=G,V=U[z],H=V[0],G=V[1],F<=r?G>r&&(H-W)*(r-F)>(G-F)*(e-W)&&++$:G<=r&&(H-W)*(r-F)<(G-F)*(e-W)&&--$;return $}function P(){c=d,f=[],h=[],S=!0}function k(){var $=I(),L=S&&$,B=(f=dAe(f)).length;(L||B)&&(u.polygonStart(),L&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),B&&CIe(f,a,$,s,u),u.polygonEnd()),c=u,f=h=p=null}function D(){x.point=M,h&&h.push(p=[]),E=!0,w=!1,v=_=NaN}function R(){f&&(M(m,g),y&&w&&d.rejoin(),f.push(d.result())),x.point=T,w&&c.lineEnd()}function M($,L){var B=i($,L);if(h&&p.push([$,L]),E)m=$,g=L,y=B,E=!1,B&&(c.lineStart(),c.point($,L));else if(B&&w)c.point($,L);else{var U=[v=Math.max(PN,Math.min(LC,v)),_=Math.max(PN,Math.min(LC,_))],z=[$=Math.max(PN,Math.min(LC,$)),L=Math.max(PN,Math.min(LC,L))];nxt(U,z,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(z[0],z[1]),B||c.lineEnd(),S=!1):B&&(c.lineStart(),c.point($,L),S=!1)}v=$,_=L,w=B}return x}}function Bfe(e,t,n){var r=Yl(e,t-Gt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function zfe(e,t,n){var r=Yl(e,t-Gt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function rxt(){var e,t,n,r,i,s,o,a,l=10,u=l,c=90,d=360,f,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Yl(AN(r/c)*c,n,c).map(p).concat(Yl(AN(a/d)*d,o,d).map(m)).concat(Yl(AN(t/l)*l,e,l).filter(function(_){return ur(_%c)>Gt}).map(f)).concat(Yl(AN(s/u)*u,i,u).filter(function(_){return ur(_%d)>Gt}).map(h))}return y.lines=function(){return v().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.extentMajor(_).extentMinor(_):y.extentMinor()},y.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),a>o&&(_=a,a=o,o=_),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],s=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),s>i&&(_=s,s=i,i=_),y.precision(g)):[[t,s],[e,i]]},y.step=function(_){return arguments.length?y.stepMajor(_).stepMinor(_):y.stepMinor()},y.stepMajor=function(_){return arguments.length?(c=+_[0],d=+_[1],y):[c,d]},y.stepMinor=function(_){return arguments.length?(l=+_[0],u=+_[1],y):[l,u]},y.precision=function(_){return arguments.length?(g=+_,f=Bfe(s,i,90),h=zfe(t,e,g),p=Bfe(a,o,90),m=zfe(r,n,g),y):g},y.extentMajor([[-180,-90+Gt],[180,90-Gt]]).extentMinor([[-180,-80-Gt],[180,80+Gt]])}const gI=e=>e;var WB=new ll,tH=new ll,RIe,kIe,nH,rH,am={point:Ho,lineStart:Ho,lineEnd:Ho,polygonStart:function(){am.lineStart=ixt,am.lineEnd=oxt},polygonEnd:function(){am.lineStart=am.lineEnd=am.point=Ho,WB.add(ur(tH)),tH=new ll},result:function(){var e=WB/2;return WB=new ll,e}};function ixt(){am.point=sxt}function sxt(e,t){am.point=PIe,RIe=nH=e,kIe=rH=t}function PIe(e,t){tH.add(rH*e-nH*t),nH=e,rH=t}function oxt(){PIe(RIe,kIe)}var rx=1/0,$$=rx,yI=-rx,L$=yI,F$={point:axt,lineStart:Ho,lineEnd:Ho,polygonStart:Ho,polygonEnd:Ho,result:function(){var e=[[rx,$$],[yI,L$]];return yI=L$=-($$=rx=1/0),e}};function axt(e,t){e<rx&&(rx=e),e>yI&&(yI=e),t<$$&&($$=t),t>L$&&(L$=t)}var iH=0,sH=0,FC=0,j$=0,B$=0,jw=0,oH=0,aH=0,jC=0,NIe,OIe,Eh,xh,Dc={point:pb,lineStart:Ufe,lineEnd:Vfe,polygonStart:function(){Dc.lineStart=cxt,Dc.lineEnd=dxt},polygonEnd:function(){Dc.point=pb,Dc.lineStart=Ufe,Dc.lineEnd=Vfe},result:function(){var e=jC?[oH/jC,aH/jC]:jw?[j$/jw,B$/jw]:FC?[iH/FC,sH/FC]:[NaN,NaN];return iH=sH=FC=j$=B$=jw=oH=aH=jC=0,e}};function pb(e,t){iH+=e,sH+=t,++FC}function Ufe(){Dc.point=lxt}function lxt(e,t){Dc.point=uxt,pb(Eh=e,xh=t)}function uxt(e,t){var n=e-Eh,r=t-xh,i=ml(n*n+r*r);j$+=i*(Eh+e)/2,B$+=i*(xh+t)/2,jw+=i,pb(Eh=e,xh=t)}function Vfe(){Dc.point=pb}function cxt(){Dc.point=fxt}function dxt(){DIe(NIe,OIe)}function fxt(e,t){Dc.point=DIe,pb(NIe=Eh=e,OIe=xh=t)}function DIe(e,t){var n=e-Eh,r=t-xh,i=ml(n*n+r*r);j$+=i*(Eh+e)/2,B$+=i*(xh+t)/2,jw+=i,i=xh*e-Eh*t,oH+=i*(Eh+e),aH+=i*(xh+t),jC+=i*3,pb(Eh=e,xh=t)}function MIe(e){this._context=e}MIe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,pl);break}}},result:Ho};var lH=new ll,GB,$Ie,LIe,BC,zC,vI={point:Ho,lineStart:function(){vI.point=hxt},lineEnd:function(){GB&&FIe($Ie,LIe),vI.point=Ho},polygonStart:function(){GB=!0},polygonEnd:function(){GB=null},result:function(){var e=+lH;return lH=new ll,e}};function hxt(e,t){vI.point=FIe,$Ie=BC=e,LIe=zC=t}function FIe(e,t){BC-=e,zC-=t,lH.add(ml(BC*BC+zC*zC)),BC=e,zC=t}let Hfe,z$,qfe,Wfe;class Gfe{constructor(t){this._append=t==null?jIe:pxt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==qfe||this._append!==z$){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,qfe=r,z$=this._append,Wfe=this._,this._=i}this._+=Wfe;break}}}result(){const t=this._;return this._="",t.length?t:null}}function jIe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function pxt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return jIe;if(t!==Hfe){const n=10**t;Hfe=t,z$=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return z$}function BIe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),om(a,i(s))),s.result()}return o.area=function(a){return om(a,i(am)),am.result()},o.measure=function(a){return om(a,i(vI)),vI.result()},o.bounds=function(a){return om(a,i(F$)),F$.result()},o.centroid=function(a){return om(a,i(Dc)),Dc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,gI):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Gfe(n)):new MIe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new Gfe(n)),o},o.projection(e).digits(n).context(t)}function j6(e){return function(t){var n=new uH;for(var r in e)n[r]=e[r];return n.stream=t,n}}function uH(){}uH.prototype={constructor:uH,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function SJ(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),om(n,e.stream(F$)),t(F$.result()),r!=null&&e.clipExtent(r),e}function B6(e,t,n){return SJ(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function TJ(e,t,n){return B6(e,[[0,0],t],n)}function CJ(e,t,n){return SJ(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function AJ(e,t,n){return SJ(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Yfe=16,mxt=Kt(30*Bn);function Kfe(e,t){return+t?yxt(e,t):gxt(e)}function gxt(e){return j6({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function yxt(e,t){function n(r,i,s,o,a,l,u,c,d,f,h,p,m,g){var y=u-r,v=c-i,_=y*y+v*v;if(_>4*t&&m--){var w=o+f,E=a+h,S=l+p,x=ml(w*w+E*E+S*S),T=cu(S/=x),I=ur(ur(S)-1)<Gt||ur(s-d)<Gt?(s+d)/2:td(E,w),P=e(I,T),k=P[0],D=P[1],R=k-r,M=D-i,$=v*R-y*M;($*$/_>t||ur((y*R+v*M)/_-.5)>.3||o*f+a*h+l*p<mxt)&&(n(r,i,s,o,a,l,k,D,I,w/=x,E/=x,S,m,g),g.point(k,D),n(k,D,I,w,E,S,u,c,d,f,h,p,m,g))}}return function(r){var i,s,o,a,l,u,c,d,f,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(T,I){T=e(T,I),r.point(T[0],T[1])}function v(){d=NaN,g.point=_,r.lineStart()}function _(T,I){var P=hb([T,I]),k=e(T,I);n(d,f,c,h,p,m,d=k[0],f=k[1],c=T,h=P[0],p=P[1],m=P[2],Yfe,r),r.point(d,f)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=S,g.lineEnd=x}function S(T,I){_(i=T,I),s=d,o=f,a=h,l=p,u=m,g.point=_}function x(){n(d,f,c,h,p,m,s,o,i,a,l,u,Yfe,r),g.lineEnd=w,w()}return g}}var vxt=j6({point:function(e,t){this.stream.point(e*Bn,t*Bn)}});function bxt(e){return j6({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function _xt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Xfe(e,t,n,r,i,s){if(!s)return _xt(e,t,n,r,i);var o=Kt(s),a=Ut(s),l=o*e,u=a*e,c=o/e,d=a/e,f=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[l*m-u*g+t,n-u*m-l*g]}return p.invert=function(m,g){return[r*(c*m-d*g+f),i*(h-d*m-c*g)]},p}function xp(e){return zIe(function(){return e})()}function zIe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,l=0,u=0,c,d=0,f=1,h=1,p=null,m=jfe,g=null,y,v,_,w=gI,E=.5,S,x,T,I,P;function k($){return T($[0]*Bn,$[1]*Bn)}function D($){return $=T.invert($[0],$[1]),$&&[$[0]*bs,$[1]*bs]}k.stream=function($){return I&&P===$?I:I=vxt(bxt(c)(m(S(w(P=$)))))},k.preclip=function($){return arguments.length?(m=$,p=void 0,M()):m},k.postclip=function($){return arguments.length?(w=$,g=y=v=_=null,M()):w},k.clipAngle=function($){return arguments.length?(m=+$?txt(p=$*Bn):(p=null,jfe),M()):p*bs},k.clipExtent=function($){return arguments.length?(w=$==null?(g=y=v=_=null,gI):IIe(g=+$[0][0],y=+$[0][1],v=+$[1][0],_=+$[1][1]),M()):g==null?null:[[g,y],[v,_]]},k.scale=function($){return arguments.length?(n=+$,R()):n},k.translate=function($){return arguments.length?(r=+$[0],i=+$[1],R()):[r,i]},k.center=function($){return arguments.length?(s=$[0]%360*Bn,o=$[1]%360*Bn,R()):[s*bs,o*bs]},k.rotate=function($){return arguments.length?(a=$[0]%360*Bn,l=$[1]%360*Bn,u=$.length>2?$[2]%360*Bn:0,R()):[a*bs,l*bs,u*bs]},k.angle=function($){return arguments.length?(d=$%360*Bn,R()):d*bs},k.reflectX=function($){return arguments.length?(f=$?-1:1,R()):f<0},k.reflectY=function($){return arguments.length?(h=$?-1:1,R()):h<0},k.precision=function($){return arguments.length?(S=Kfe(x,E=$*$),M()):ml(E)},k.fitExtent=function($,L){return B6(k,$,L)},k.fitSize=function($,L){return TJ(k,$,L)},k.fitWidth=function($,L){return CJ(k,$,L)},k.fitHeight=function($,L){return AJ(k,$,L)};function R(){var $=Xfe(n,0,0,f,h,d).apply(null,t(s,o)),L=Xfe(n,r-$[0],i-$[1],f,h,d);return c=SIe(a,l,u),x=ZV(t,L),T=ZV(c,x),S=Kfe(x,E),M()}function M(){return I=P=null,k}return function(){return t=e.apply(this,arguments),k.invert=t.invert&&D,R()}}function IJ(e){var t=0,n=Hn/3,r=zIe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Bn,n=s[1]*Bn):[t*bs,n*bs]},i}function wxt(e){var t=Kt(e);function n(r,i){return[r*t,Ut(i)/t]}return n.invert=function(r,i){return[r/t,cu(i*t)]},n}function Ext(e,t){var n=Ut(e),r=(n+Ut(t))/2;if(ur(r)<Gt)return wxt(e);var i=1+n*(2*r-n),s=ml(i)/r;function o(a,l){var u=ml(i-2*r*Ut(l))/r;return[u*Ut(a*=r),s-u*Kt(a)]}return o.invert=function(a,l){var u=s-l,c=td(a,ur(u))*Bc(u);return u*r<0&&(c-=Hn*Bc(a)*Bc(u)),[c/r,cu((i-(a*a+u*u)*r*r)/(2*r))]},o}function U$(){return IJ(Ext).scale(155.424).center([0,33.6442])}function UIe(){return U$().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function xxt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Sxt(){var e,t,n=UIe(),r,i=U$().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=U$().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(f,h){l=[f,h]}};function c(f){var h=f[0],p=f[1];return l=null,r.point(h,p),l||(s.point(h,p),l)||(a.point(h,p),l)}c.invert=function(f){var h=n.scale(),p=n.translate(),m=(f[0]-p[0])/h,g=(f[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(f)},c.stream=function(f){return e&&t===f?e:e=xxt([n.stream(t=f),i.stream(f),o.stream(f)])},c.precision=function(f){return arguments.length?(n.precision(f),i.precision(f),o.precision(f),d()):n.precision()},c.scale=function(f){return arguments.length?(n.scale(f),i.scale(f*.35),o.scale(f),c.translate(n.translate())):n.scale()},c.translate=function(f){if(!arguments.length)return n.translate();var h=n.scale(),p=+f[0],m=+f[1];return r=n.translate(f).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(u),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Gt,m+.12*h+Gt],[p-.214*h-Gt,m+.234*h-Gt]]).stream(u),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Gt,m+.166*h+Gt],[p-.115*h-Gt,m+.234*h-Gt]]).stream(u),d()},c.fitExtent=function(f,h){return B6(c,f,h)},c.fitSize=function(f,h){return TJ(c,f,h)},c.fitWidth=function(f,h){return CJ(c,f,h)},c.fitHeight=function(f,h){return AJ(c,f,h)};function d(){return e=t=null,c}return c.scale(1070)}function VIe(e){return function(t,n){var r=Kt(t),i=Kt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Ut(t),s*Ut(n)]}}function ak(e){return function(t,n){var r=ml(t*t+n*n),i=e(r),s=Ut(i),o=Kt(i);return[td(t*s,r*o),cu(r&&n*s/r)]}}var HIe=VIe(function(e){return ml(2/(1+e))});HIe.invert=ak(function(e){return 2*cu(e/2)});function Txt(){return xp(HIe).scale(124.75).clipAngle(180-.001)}var qIe=VIe(function(e){return(e=hIe(e))&&e/Ut(e)});qIe.invert=ak(function(e){return e});function Cxt(){return xp(qIe).scale(79.4188).clipAngle(180-.001)}function z6(e,t){return[e,x$(EJ((cs+t)/2))]}z6.invert=function(e,t){return[e,2*CS(fIe(t))-cs]};function Axt(){return WIe(z6).scale(961/pl)}function WIe(e){var t=xp(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,l,u;t.scale=function(d){return arguments.length?(r(d),c()):r()},t.translate=function(d){return arguments.length?(i(d),c()):i()},t.center=function(d){return arguments.length?(n(d),c()):n()},t.clipExtent=function(d){return arguments.length?(d==null?o=a=l=u=null:(o=+d[0][0],a=+d[0][1],l=+d[1][0],u=+d[1][1]),c()):o==null?null:[[o,a],[l,u]]};function c(){var d=Hn*r(),f=t(GEt(t.rotate()).invert([0,0]));return s(o==null?[[f[0]-d,f[1]-d],[f[0]+d,f[1]+d]]:e===z6?[[Math.max(f[0]-d,o),a],[Math.min(f[0]+d,l),u]]:[[o,Math.max(f[1]-d,a)],[l,Math.min(f[1]+d,u)]])}return c()}function NN(e){return EJ((cs+e)/2)}function Ixt(e,t){var n=Kt(e),r=e===t?Ut(e):x$(n/Kt(t))/x$(NN(t)/NN(e)),i=n*VB(NN(e),r)/r;if(!r)return z6;function s(o,a){i>0?a<-cs+Gt&&(a=-cs+Gt):a>cs-Gt&&(a=cs-Gt);var l=i/VB(NN(a),r);return[l*Ut(r*o),i-l*Kt(r*o)]}return s.invert=function(o,a){var l=i-a,u=Bc(r)*ml(o*o+l*l),c=td(o,ur(l))*Bc(l);return l*r<0&&(c-=Hn*Bc(o)*Bc(l)),[c/r,2*CS(VB(i/u,1/r))-cs]},s}function Rxt(){return IJ(Ixt).scale(109.5).parallels([30,30])}function V$(e,t){return[e,t]}V$.invert=V$;function kxt(){return xp(V$).scale(152.63)}function Pxt(e,t){var n=Kt(e),r=e===t?Ut(e):(n-Kt(t))/(t-e),i=n/r+e;if(ur(r)<Gt)return V$;function s(o,a){var l=i-a,u=r*o;return[l*Ut(u),i-l*Kt(u)]}return s.invert=function(o,a){var l=i-a,u=td(o,ur(l))*Bc(l);return l*r<0&&(u-=Hn*Bc(o)*Bc(l)),[u/r,i-Bc(r)*ml(o*o+l*l)]},s}function Nxt(){return IJ(Pxt).scale(131.154).center([0,13.9389])}var tA=1.340264,nA=-.081106,rA=893e-6,iA=.003796,H$=ml(3)/2,Oxt=12;function GIe(e,t){var n=cu(H$*Ut(t)),r=n*n,i=r*r*r;return[e*Kt(n)/(H$*(tA+3*nA*r+i*(7*rA+9*iA*r))),n*(tA+nA*r+i*(rA+iA*r))]}GIe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,l;s<Oxt&&(a=n*(tA+nA*r+i*(rA+iA*r))-t,l=tA+3*nA*r+i*(7*rA+9*iA*r),n-=o=a/l,r=n*n,i=r*r*r,!(ur(o)<w$));++s);return[H$*e*(tA+3*nA*r+i*(7*rA+9*iA*r))/Kt(n),cu(Ut(n)/H$)]};function Dxt(){return xp(GIe).scale(177.158)}function YIe(e,t){var n=Kt(t),r=Kt(e)*n;return[n*Ut(e)/r,Ut(t)/r]}YIe.invert=ak(CS);function Mxt(){return xp(YIe).scale(144.049).clipAngle(60)}function $xt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,l=null,u,c,d,f=1,h=1,p=j6({point:function(w,E){var S=_([w,E]);this.stream.point(S[0],S[1])}}),m=gI,g,y;function v(){return f=e*r,h=e*i,g=y=null,_}function _(w){var E=w[0]*f,S=w[1]*h;if(s){var x=S*o-E*a;E=E*o+S*a,S=x}return[E+t,S+n]}return _.invert=function(w){var E=w[0]-t,S=w[1]-n;if(s){var x=S*o+E*a;E=E*o-S*a,S=x}return[E/f,S/h]},_.stream=function(w){return g&&y===w?g:g=p(m(y=w))},_.postclip=function(w){return arguments.length?(m=w,l=u=c=d=null,v()):m},_.clipExtent=function(w){return arguments.length?(m=w==null?(l=u=c=d=null,gI):IIe(l=+w[0][0],u=+w[0][1],c=+w[1][0],d=+w[1][1]),v()):l==null?null:[[l,u],[c,d]]},_.scale=function(w){return arguments.length?(e=+w,v()):e},_.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},_.angle=function(w){return arguments.length?(s=w%360*Bn,a=Ut(s),o=Kt(s),v()):s*bs},_.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},_.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},_.fitExtent=function(w,E){return B6(_,w,E)},_.fitSize=function(w,E){return TJ(_,w,E)},_.fitWidth=function(w,E){return CJ(_,w,E)},_.fitHeight=function(w,E){return AJ(_,w,E)},_}function KIe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}KIe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(ur(i)>Gt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Lxt(){return xp(KIe).scale(175.295)}function XIe(e,t){return[Kt(t)*Ut(e),Ut(t)]}XIe.invert=ak(cu);function Fxt(){return xp(XIe).scale(249.5).clipAngle(90+Gt)}function QIe(e,t){var n=Kt(t),r=1+Kt(e)*n;return[n*Ut(e)/r,Ut(t)/r]}QIe.invert=ak(function(e){return 2*CS(e)});function jxt(){return xp(QIe).scale(250).clipAngle(142)}function JIe(e,t){return[x$(EJ((cs+t)/2)),-e]}JIe.invert=function(e,t){return[-t,2*CS(fIe(e))-cs]};function Bxt(){var e=WIe(JIe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function zxt(e,t){return e.parent===t.parent?1:2}function Uxt(e){return e.reduce(Vxt,0)/e.length}function Vxt(e,t){return e+t.x}function Hxt(e){return 1+e.reduce(qxt,0)}function qxt(e,t){return Math.max(e,t.y)}function Wxt(e){for(var t;t=e.children;)e=t[0];return e}function Gxt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Yxt(){var e=zxt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(f){var h=f.children;h?(f.x=Uxt(h),f.y=Hxt(h)):(f.x=o?a+=e(f,o):0,f.y=0,o=f)});var l=Wxt(s),u=Gxt(s),c=l.x-e(l,u)/2,d=u.x+e(u,l)/2;return s.eachAfter(r?function(f){f.x=(f.x-s.x)*t,f.y=(s.y-f.y)*n}:function(f){f.x=(f.x-c)/(d-c)*t,f.y=(1-(s.y?f.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Kxt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Xxt(){return this.eachAfter(Kxt)}function Qxt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Jxt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Zxt(e,t){for(var n=this,r=[n],i=[],s,o,a,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function eSt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function tSt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function nSt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function rSt(e){for(var t=this,n=iSt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function iSt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function sSt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function oSt(){return Array.from(this)}function aSt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function lSt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*uSt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function RJ(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=fSt)):t===void 0&&(t=dSt);for(var n=new ix(e),r,i=[n],s,o,a,l;r=i.pop();)if((o=t(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)i.push(s=o[a]=new ix(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(ZIe)}function cSt(){return RJ(this).eachBefore(hSt)}function dSt(e){return e.children}function fSt(e){return Array.isArray(e)?e[1]:null}function hSt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function ZIe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function ix(e){this.data=e,this.depth=this.height=0,this.parent=null}ix.prototype=RJ.prototype={constructor:ix,count:Xxt,each:Qxt,eachAfter:Zxt,eachBefore:Jxt,find:eSt,sum:tSt,sort:nSt,path:rSt,ancestors:sSt,descendants:oSt,leaves:aSt,links:lSt,copy:cSt,[Symbol.iterator]:uSt};function gD(e){return e==null?null:eRe(e)}function eRe(e){if(typeof e!="function")throw new Error;return e}function h1(){return 0}function cw(e){return function(){return e}}const pSt=1664525,mSt=1013904223,Qfe=4294967296;function gSt(){let e=1;return()=>(e=(pSt*e+mSt)%Qfe)/Qfe}function ySt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vSt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function bSt(e,t){for(var n=0,r=(e=vSt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&tRe(o,s)?++n:(o=wSt(i=_St(i,s)),n=0);return o}function _St(e,t){var n,r;if(YB(t,e))return[t];for(n=0;n<e.length;++n)if(ON(t,e[n])&&YB(UC(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(ON(UC(e[n],e[r]),t)&&ON(UC(e[n],t),e[r])&&ON(UC(e[r],t),e[n])&&YB(nRe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function ON(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function tRe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function YB(e,t){for(var n=0;n<t.length;++n)if(!tRe(e,t[n]))return!1;return!0}function wSt(e){switch(e.length){case 1:return ESt(e[0]);case 2:return UC(e[0],e[1]);case 3:return nRe(e[0],e[1],e[2])}}function ESt(e){return{x:e.x,y:e.y,r:e.r}}function UC(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,l=s-n,u=o-r,c=a-i,d=Math.sqrt(l*l+u*u);return{x:(n+s+l/d*c)/2,y:(r+o+u/d*c)/2,r:(d+i+a)/2}}function nRe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,l=t.r,u=n.x,c=n.y,d=n.r,f=r-o,h=r-u,p=i-a,m=i-c,g=l-s,y=d-s,v=r*r+i*i-s*s,_=v-o*o-a*a+l*l,w=v-u*u-c*c+d*d,E=h*p-f*m,S=(p*w-m*_)/(E*2)-r,x=(m*g-p*y)/E,T=(h*_-f*w)/(E*2)-i,I=(f*y-h*g)/E,P=x*x+I*I-1,k=2*(s+S*x+T*I),D=S*S+T*T-s*s,R=-(Math.abs(P)>1e-6?(k+Math.sqrt(k*k-4*P*D))/(2*P):D/k);return{x:r+S+x*R,y:i+T+I*R,r:R}}function Jfe(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,l,u=r*r+o*o;u?(s=t.r+n.r,s*=s,l=e.r+n.r,l*=l,s>l?(i=(u+l-s)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(u+s-l)/(2*u),a=Math.sqrt(Math.max(0,s/u-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Zfe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function ehe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function DN(e){this._=e,this.next=null,this.previous=null}function xSt(e,t){if(!(s=(e=ySt(e)).length))return 0;var n,r,i,s,o,a,l,u,c,d,f;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Jfe(r,n,i=e[2]),n=new DN(n),r=new DN(r),i=new DN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<s;++l){Jfe(n._,r._,i=e[l]),i=new DN(i),u=r.next,c=n.previous,d=r._.r,f=n._.r;do if(d<=f){if(Zfe(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}d+=u._.r,u=u.next}else{if(Zfe(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue e}f+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=ehe(n);(i=i.next)!==r;)(a=ehe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=bSt(n,t),l=0;l<s;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function SSt(e){return Math.sqrt(e.value)}function TSt(){var e=null,t=1,n=1,r=h1;function i(s){const o=gSt();return s.x=t/2,s.y=n/2,e?s.eachBefore(the(e)).eachAfter(KB(r,.5,o)).eachBefore(nhe(1)):s.eachBefore(the(SSt)).eachAfter(KB(h1,1,o)).eachAfter(KB(r,s.r/Math.min(t,n),o)).eachBefore(nhe(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=gD(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:cw(+s),i):r},i}function the(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function KB(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,l;if(a)for(s=0;s<o;++s)i[s].r+=a;if(l=xSt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=l+a}}}function nhe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function rRe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function lk(e,t,n,r,i){for(var s=e.children,o,a=-1,l=s.length,u=e.value&&(r-t)/e.value;++a<l;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*u}function CSt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(rRe),o}function s(o,a){return function(l){l.children&&lk(l,l.x0,o*(l.depth+1)/a,l.x1,o*(l.depth+2)/a);var u=l.x0,c=l.y0,d=l.x1-n,f=l.y1-n;d<u&&(u=d=(u+d)/2),f<c&&(c=f=(c+f)/2),l.x0=u,l.y0=c,l.x1=d,l.y1=f}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var ASt={depth:-1},rhe={},XB={};function ISt(e){return e.id}function RSt(e){return e.parentId}function ihe(){var e=ISt,t=RSt,n;function r(i){var s=Array.from(i),o=e,a=t,l,u,c,d,f,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>kSt(n(w,E,i))),v=y.map(she),_=new Set(y).add("");for(const w of v)_.has(w)||(_.add(w),y.push(w),v.push(she(w)),s.push(XB));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,l=s.length;c<l;++c)u=s[c],h=s[c]=new ix(u),(p=o(u,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?rhe:h)),(p=a(u,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<l;++c)if(h=s[c],p=h.parent){if(f=g.get(p),!f)throw new Error("missing: "+p);if(f===rhe)throw new Error("ambiguous: "+p);f.children?f.children.push(h):f.children=[h],h.parent=f}else{if(d)throw new Error("multiple roots");d=h}if(!d)throw new Error("no root");if(n!=null){for(;d.data===XB&&d.children.length===1;)d=d.children[0],--l;for(let y=s.length-1;y>=0&&(h=s[y],h.data===XB);--y)h.data=null}if(d.parent=ASt,d.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(ZIe),d.parent=null,l>0)throw new Error("cycle");return d}return r.id=function(i){return arguments.length?(e=gD(i),r):e},r.parentId=function(i){return arguments.length?(t=gD(i),r):t},r.path=function(i){return arguments.length?(n=gD(i),r):n},r}function kSt(e){e=`${e}`;let t=e.length;return cH(e,t-1)&&!cH(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function she(e){let t=e.length;if(t<2)return"";for(;--t>1&&!cH(e,t););return e.slice(0,t)}function cH(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function PSt(e,t){return e.parent===t.parent?1:2}function QB(e){var t=e.children;return t?t[0]:e.t}function JB(e){var t=e.children;return t?t[t.length-1]:e.t}function NSt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function OSt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function DSt(e,t,n){return e.a.parent===t.parent?e.a:n}function yD(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}yD.prototype=Object.create(ix.prototype);function MSt(e){for(var t=new yD(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new yD(s[o],o)),i.parent=n;return(t.parent=new yD(null,0)).children=[t],t}function $St(){var e=PSt,t=1,n=1,r=null;function i(u){var c=MSt(u);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)u.eachBefore(l);else{var d=u,f=u,h=u;u.eachBefore(function(v){v.x<d.x&&(d=v),v.x>f.x&&(f=v),v.depth>h.depth&&(h=v)});var p=d===f?1:e(d,f)/2,m=p-d.x,g=t/(f.x+p+m),y=n/(h.depth||1);u.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return u}function s(u){var c=u.children,d=u.parent.children,f=u.i?d[u.i-1]:null;if(c){OSt(u);var h=(c[0].z+c[c.length-1].z)/2;f?(u.z=f.z+e(u._,f._),u.m=u.z-h):u.z=h}else f&&(u.z=f.z+e(u._,f._));u.parent.A=a(u,f,u.parent.A||d[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,d){if(c){for(var f=u,h=u,p=c,m=f.parent.children[0],g=f.m,y=h.m,v=p.m,_=m.m,w;p=JB(p),f=QB(f),p&&f;)m=QB(m),h=JB(h),h.a=u,w=p.z+v-f.z-g+e(p._,f._),w>0&&(NSt(DSt(p,u,d),u,w),g+=w,y+=w),v+=p.m,g+=f.m,_+=m.m,y+=h.m;p&&!JB(h)&&(h.t=p,h.m+=v-y),f&&!QB(m)&&(m.t=f,m.m+=g-_,d=u)}return d}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function U6(e,t,n,r,i){for(var s=e.children,o,a=-1,l=s.length,u=e.value&&(i-n)/e.value;++a<l;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*u}var iRe=(1+Math.sqrt(5))/2;function sRe(e,t,n,r,i,s){for(var o=[],a=t.children,l,u,c=0,d=0,f=a.length,h,p,m=t.value,g,y,v,_,w,E,S;c<f;){h=i-n,p=s-r;do g=a[d++].value;while(!g&&d<f);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),S=g*g*E,w=Math.max(v/S,S/y);d<f;++d){if(g+=u=a[d].value,u<y&&(y=u),u>v&&(v=u),S=g*g*E,_=Math.max(v/S,S/y),_>w){g-=u;break}w=_}o.push(l={value:g,dice:h<p,children:a.slice(c,d)}),l.dice?lk(l,n,r,i,m?r+=p*g/m:s):U6(l,n,r,m?n+=h*g/m:i,s),m-=g,c=d}return o}const oRe=function e(t){function n(r,i,s,o,a){sRe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(iRe);function LSt(){var e=oRe,t=!1,n=1,r=1,i=[0],s=h1,o=h1,a=h1,l=h1,u=h1;function c(f){return f.x0=f.y0=0,f.x1=n,f.y1=r,f.eachBefore(d),i=[0],t&&f.eachBefore(rRe),f}function d(f){var h=i[f.depth],p=f.x0+h,m=f.y0+h,g=f.x1-h,y=f.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),f.x0=p,f.y0=m,f.x1=g,f.y1=y,f.children&&(h=i[f.depth+1]=s(f)/2,p+=u(f)-h,m+=o(f)-h,g-=a(f)-h,y-=l(f)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(f,p,m,g,y))}return c.round=function(f){return arguments.length?(t=!!f,c):t},c.size=function(f){return arguments.length?(n=+f[0],r=+f[1],c):[n,r]},c.tile=function(f){return arguments.length?(e=eRe(f),c):e},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(s=typeof f=="function"?f:cw(+f),c):s},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(o=typeof f=="function"?f:cw(+f),c):o},c.paddingRight=function(f){return arguments.length?(a=typeof f=="function"?f:cw(+f),c):a},c.paddingBottom=function(f){return arguments.length?(l=typeof f=="function"?f:cw(+f),c):l},c.paddingLeft=function(f){return arguments.length?(u=typeof f=="function"?f:cw(+f),c):u},c}function FSt(e,t,n,r,i){var s=e.children,o,a=s.length,l,u=new Array(a+1);for(u[0]=l=o=0;o<a;++o)u[o+1]=l+=s[o].value;c(0,a,e.value,t,n,r,i);function c(d,f,h,p,m,g,y){if(d>=f-1){var v=s[d];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var _=u[d],w=h/2+_,E=d+1,S=f-1;E<S;){var x=E+S>>>1;u[x]<w?E=x+1:S=x}w-u[E-1]<u[E]-w&&d+1<E&&--E;var T=u[E]-_,I=h-T;if(g-p>y-m){var P=h?(p*I+g*T)/h:g;c(d,E,T,p,m,P,y),c(E,f,I,P,m,g,y)}else{var k=h?(m*I+y*T)/h:y;c(d,E,T,p,m,g,k),c(E,f,I,p,k,g,y)}}}function jSt(e,t,n,r,i){(e.depth&1?U6:lk)(e,t,n,r,i)}const BSt=function e(t){function n(r,i,s,o,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,c,d,f=-1,h,p=l.length,m=r.value;++f<p;){for(u=l[f],c=u.children,d=u.value=0,h=c.length;d<h;++d)u.value+=c[d].value;u.dice?lk(u,i,s,o,m?s+=(a-s)*u.value/m:a):U6(u,i,s,m?i+=(o-i)*u.value/m:o,a),m-=u.value}else r._squarify=l=sRe(t,r,i,s,o,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(iRe);function jf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function sv(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const dH=Symbol("implicit");function AS(){var e=new jde,t=[],n=[],r=dH;function i(s){let o=e.get(s);if(o===void 0){if(r!==dH)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new jde;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return AS(t,n).unknown(r)},jf.apply(i,arguments),i}function V6(){var e=AS().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,l=0,u=0,c=.5;delete e.unknown;function d(){var f=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,f-l+u*2),a&&(s=Math.floor(s)),p+=(m-p-s*(f-l))*c,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var g=Yl(f).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),d()):t()},e.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},e.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,a=!0,d()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(f){return arguments.length?(a=!!f,d()):a},e.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),d()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},e.paddingOuter=function(f){return arguments.length?(u=+f,d()):u},e.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),d()):c},e.copy=function(){return V6(t(),[r,i]).round(a).paddingInner(l).paddingOuter(u).align(c)},jf.apply(d(),arguments)}function zSt(e){return function(){return e}}function fH(e){return+e}var ohe=[0,1];function Kl(e){return e}function hH(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:zSt(isNaN(t)?NaN:.5)}function USt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function VSt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=hH(i,r),s=n(o,s)):(r=hH(r,i),s=n(s,o)),function(a){return s(r(a))}}function HSt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=hH(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=cy(e,a,1,r)-1;return s[l](i[l](a))}}function uk(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function H6(){var e=ohe,t=ohe,n=gg,r,i,s,o=Kl,a,l,u;function c(){var f=Math.min(e.length,t.length);return o!==Kl&&(o=USt(e[0],e[f-1])),a=f>2?HSt:VSt,l=u=null,d}function d(f){return f==null||isNaN(f=+f)?s:(l||(l=a(e.map(r),t,n)))(r(o(f)))}return d.invert=function(f){return o(i((u||(u=a(t,e.map(r),kc)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,fH),c()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=ik,c()},d.clamp=function(f){return arguments.length?(o=f?!0:Kl,c()):o!==Kl},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,h){return r=f,i=h,c()}}function aRe(){return H6()(Kl,Kl)}function lRe(e,t,n,r){var i=dy(e,t,n),s;switch(r=fb(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=cIe(i,o))&&(r.precision=s),wJ(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=dIe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=uIe(i))&&(r.precision=s-(r.type==="%")*2);break}}return TS(r)}function t_(e){var t=e.domain;return e.ticks=function(n){var r=t();return CV(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return lRe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);c-- >0;){if(u=AV(o,a,n),u===l)return r[i]=o,r[s]=a,t(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function il(){var e=aRe();return e.copy=function(){return uk(e,il())},jf.apply(e,arguments),t_(e)}function uRe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,fH),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return uRe(e).unknown(t)},e=arguments.length?Array.from(e,fH):[0,1],t_(n)}function cRe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function ahe(e){return Math.log(e)}function lhe(e){return Math.exp(e)}function qSt(e){return-Math.log(-e)}function WSt(e){return-Math.exp(-e)}function GSt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function YSt(e){return e===10?GSt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function KSt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function uhe(e){return(t,n)=>-e(-t,n)}function kJ(e){const t=e(ahe,lhe),n=t.domain;let r=10,i,s;function o(){return i=KSt(r),s=YSt(r),n()[0]<0?(i=uhe(i),s=uhe(s),e(qSt,WSt)):e(ahe,lhe),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let f=i(u),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-f<g){if(f=Math.floor(f),h=Math.ceil(h),u>0){for(;f<=h;++f)for(p=1;p<r;++p)if(m=f<0?p/s(-f):p*s(f),!(m<u)){if(m>c)break;y.push(m)}}else for(;f<=h;++f)for(p=r-1;p>=1;--p)if(m=f>0?p/s(-f):p*s(f),!(m<u)){if(m>c)break;y.push(m)}y.length*2<g&&(y=CV(u,c,g))}else y=CV(f,h,Math.min(h-f,g)).map(s);return d?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=fb(l)).precision==null&&(l.trim=!0),l=TS(l)),a===1/0)return l;const u=Math.max(1,r*a/t.ticks().length);return c=>{let d=c/s(Math.round(i(c)));return d*r<r-.5&&(d*=r),d<=u?l(c):""}},t.nice=()=>n(cRe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function dRe(){const e=kJ(H6()).domain([1,10]);return e.copy=()=>uk(e,dRe()).base(e.base()),jf.apply(e,arguments),e}function che(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function dhe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function PJ(e){var t=1,n=e(che(t),dhe(t));return n.constant=function(r){return arguments.length?e(che(t=+r),dhe(t)):t},t_(n)}function fRe(){var e=PJ(H6());return e.copy=function(){return uk(e,fRe()).constant(e.constant())},jf.apply(e,arguments)}function fhe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function XSt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function QSt(e){return e<0?-e*e:e*e}function NJ(e){var t=e(Kl,Kl),n=1;function r(){return n===1?e(Kl,Kl):n===.5?e(XSt,QSt):e(fhe(n),fhe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},t_(t)}function OJ(){var e=NJ(H6());return e.copy=function(){return uk(e,OJ()).exponent(e.exponent())},jf.apply(e,arguments),e}function JSt(){return OJ.apply(null,arguments).exponent(.5)}function hRe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=lAe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[cy(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Im),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return hRe().domain(e).range(t).unknown(r)},jf.apply(s,arguments)}function pRe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[cy(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return pRe().domain([e,t]).range(i).unknown(s)},jf.apply(t_(o),arguments)}function mRe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[cy(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return mRe().domain(e).range(t).unknown(n)},jf.apply(i,arguments)}const ZB=new Date,e9=new Date;function so(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),t(s,a),e(s);while(u<s&&s<o);return l},i.filter=s=>so(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(ZB.setTime(+s),e9.setTime(+o),e(ZB),e(e9),Math.floor(n(ZB,e9))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const sx=so(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);sx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?so(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):sx);sx.range;const pm=1e3,zc=pm*60,mm=zc*60,Xm=mm*24,DJ=Xm*7,hhe=Xm*30,t9=Xm*365,gm=so(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*pm)},(e,t)=>(t-e)/pm,e=>e.getUTCSeconds());gm.range;const q6=so(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*pm)},(e,t)=>{e.setTime(+e+t*zc)},(e,t)=>(t-e)/zc,e=>e.getMinutes());q6.range;const W6=so(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*zc)},(e,t)=>(t-e)/zc,e=>e.getUTCMinutes());W6.range;const G6=so(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*pm-e.getMinutes()*zc)},(e,t)=>{e.setTime(+e+t*mm)},(e,t)=>(t-e)/mm,e=>e.getHours());G6.range;const Y6=so(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*mm)},(e,t)=>(t-e)/mm,e=>e.getUTCHours());Y6.range;const km=so(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zc)/Xm,e=>e.getDate()-1);km.range;const q0=so(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xm,e=>e.getUTCDate()-1);q0.range;const gRe=so(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xm,e=>Math.floor(e/Xm));gRe.range;function n_(e){return so(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*zc)/DJ)}const IS=n_(0),q$=n_(1),ZSt=n_(2),eTt=n_(3),ox=n_(4),tTt=n_(5),nTt=n_(6);IS.range;q$.range;ZSt.range;eTt.range;ox.range;tTt.range;nTt.range;function r_(e){return so(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/DJ)}const RS=r_(0),W$=r_(1),rTt=r_(2),iTt=r_(3),ax=r_(4),sTt=r_(5),oTt=r_(6);RS.range;W$.range;rTt.range;iTt.range;ax.range;sTt.range;oTt.range;const bI=so(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());bI.range;const _I=so(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());_I.range;const tp=so(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());tp.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:so(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});tp.range;const np=so(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());np.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:so(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});np.range;function yRe(e,t,n,r,i,s){const o=[[gm,1,pm],[gm,5,5*pm],[gm,15,15*pm],[gm,30,30*pm],[s,1,zc],[s,5,5*zc],[s,15,15*zc],[s,30,30*zc],[i,1,mm],[i,3,3*mm],[i,6,6*mm],[i,12,12*mm],[r,1,Xm],[r,2,2*Xm],[n,1,DJ],[t,1,hhe],[t,3,3*hhe],[e,1,t9]];function a(u,c,d){const f=c<u;f&&([u,c]=[c,u]);const h=d&&typeof d.range=="function"?d:l(u,c,d),p=h?h.range(u,+c+1):[];return f?p.reverse():p}function l(u,c,d){const f=Math.abs(c-u)/d,h=xS(([,,g])=>g).right(o,f);if(h===o.length)return e.every(dy(u/t9,c/t9,d));if(h===0)return sx.every(Math.max(dy(u,c,d),1));const[p,m]=o[f/o[h-1][2]<o[h][2]/f?h-1:h];return p.every(m)}return[a,l]}const[aTt,lTt]=yRe(np,_I,RS,gRe,Y6,W6),[uTt,cTt]=yRe(tp,bI,IS,km,G6,q6);function n9(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r9(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function HT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function vRe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,u=qT(i),c=WT(i),d=qT(s),f=WT(s),h=qT(o),p=WT(o),m=qT(a),g=WT(a),y=qT(l),v=WT(l),_={a:B,A:U,b:z,B:N,c:null,d:bhe,e:bhe,f:OTt,g:VTt,G:qTt,H:kTt,I:PTt,j:NTt,L:bRe,m:DTt,M:MTt,p:V,q:W,Q:Ehe,s:xhe,S:$Tt,u:LTt,U:FTt,V:jTt,w:BTt,W:zTt,x:null,X:null,y:UTt,Y:HTt,Z:WTt,"%":whe},w={a:F,A:H,b:G,B:Q,c:null,d:_he,e:_he,f:XTt,g:oCt,G:lCt,H:GTt,I:YTt,j:KTt,L:wRe,m:QTt,M:JTt,p:ie,q:se,Q:Ehe,s:xhe,S:ZTt,u:eCt,U:tCt,V:nCt,w:rCt,W:iCt,x:null,X:null,y:sCt,Y:aCt,Z:uCt,"%":whe},E={a:P,A:k,b:D,B:R,c:M,d:yhe,e:yhe,f:CTt,g:ghe,G:mhe,H:vhe,I:vhe,j:ETt,L:TTt,m:wTt,M:xTt,p:I,q:_Tt,Q:ITt,s:RTt,S:STt,u:mTt,U:gTt,V:yTt,w:pTt,W:vTt,x:$,X:L,y:ghe,Y:mhe,Z:bTt,"%":ATt};_.x=S(n,_),_.X=S(r,_),_.c=S(t,_),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(ne,ce){return function(Ee){var de=[],We=-1,Fe=0,Ne=ne.length,je,ye,ae;for(Ee instanceof Date||(Ee=new Date(+Ee));++We<Ne;)ne.charCodeAt(We)===37&&(de.push(ne.slice(Fe,We)),(ye=phe[je=ne.charAt(++We)])!=null?je=ne.charAt(++We):ye=je==="e"?" ":"0",(ae=ce[je])&&(je=ae(Ee,ye)),de.push(je),Fe=We+1);return de.push(ne.slice(Fe,We)),de.join("")}}function x(ne,ce){return function(Ee){var de=HT(1900,void 0,1),We=T(de,ne,Ee+="",0),Fe,Ne;if(We!=Ee.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(ce&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(Fe=r9(HT(de.y,0,1)),Ne=Fe.getUTCDay(),Fe=Ne>4||Ne===0?W$.ceil(Fe):W$(Fe),Fe=q0.offset(Fe,(de.V-1)*7),de.y=Fe.getUTCFullYear(),de.m=Fe.getUTCMonth(),de.d=Fe.getUTCDate()+(de.w+6)%7):(Fe=n9(HT(de.y,0,1)),Ne=Fe.getDay(),Fe=Ne>4||Ne===0?q$.ceil(Fe):q$(Fe),Fe=km.offset(Fe,(de.V-1)*7),de.y=Fe.getFullYear(),de.m=Fe.getMonth(),de.d=Fe.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),Ne="Z"in de?r9(HT(de.y,0,1)).getUTCDay():n9(HT(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(Ne+5)%7:de.w+de.U*7-(Ne+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,r9(de)):n9(de)}}function T(ne,ce,Ee,de){for(var We=0,Fe=ce.length,Ne=Ee.length,je,ye;We<Fe;){if(de>=Ne)return-1;if(je=ce.charCodeAt(We++),je===37){if(je=ce.charAt(We++),ye=E[je in phe?ce.charAt(We++):je],!ye||(de=ye(ne,Ee,de))<0)return-1}else if(je!=Ee.charCodeAt(de++))return-1}return de}function I(ne,ce,Ee){var de=u.exec(ce.slice(Ee));return de?(ne.p=c.get(de[0].toLowerCase()),Ee+de[0].length):-1}function P(ne,ce,Ee){var de=h.exec(ce.slice(Ee));return de?(ne.w=p.get(de[0].toLowerCase()),Ee+de[0].length):-1}function k(ne,ce,Ee){var de=d.exec(ce.slice(Ee));return de?(ne.w=f.get(de[0].toLowerCase()),Ee+de[0].length):-1}function D(ne,ce,Ee){var de=y.exec(ce.slice(Ee));return de?(ne.m=v.get(de[0].toLowerCase()),Ee+de[0].length):-1}function R(ne,ce,Ee){var de=m.exec(ce.slice(Ee));return de?(ne.m=g.get(de[0].toLowerCase()),Ee+de[0].length):-1}function M(ne,ce,Ee){return T(ne,t,ce,Ee)}function $(ne,ce,Ee){return T(ne,n,ce,Ee)}function L(ne,ce,Ee){return T(ne,r,ce,Ee)}function B(ne){return o[ne.getDay()]}function U(ne){return s[ne.getDay()]}function z(ne){return l[ne.getMonth()]}function N(ne){return a[ne.getMonth()]}function V(ne){return i[+(ne.getHours()>=12)]}function W(ne){return 1+~~(ne.getMonth()/3)}function F(ne){return o[ne.getUTCDay()]}function H(ne){return s[ne.getUTCDay()]}function G(ne){return l[ne.getUTCMonth()]}function Q(ne){return a[ne.getUTCMonth()]}function ie(ne){return i[+(ne.getUTCHours()>=12)]}function se(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var ce=S(ne+="",_);return ce.toString=function(){return ne},ce},parse:function(ne){var ce=x(ne+="",!1);return ce.toString=function(){return ne},ce},utcFormat:function(ne){var ce=S(ne+="",w);return ce.toString=function(){return ne},ce},utcParse:function(ne){var ce=x(ne+="",!0);return ce.toString=function(){return ne},ce}}}var phe={"-":"",_:" ",0:"0"},To=/^\s*\d+/,dTt=/^%/,fTt=/[\\^$*+?|[\]().{}]/g;function Ir(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function hTt(e){return e.replace(fTt,"\\$&")}function qT(e){return new RegExp("^(?:"+e.map(hTt).join("|")+")","i")}function WT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function pTt(e,t,n){var r=To.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function mTt(e,t,n){var r=To.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function gTt(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function yTt(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function vTt(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function mhe(e,t,n){var r=To.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function ghe(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function bTt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _Tt(e,t,n){var r=To.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function wTt(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function yhe(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function ETt(e,t,n){var r=To.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function vhe(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function xTt(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function STt(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function TTt(e,t,n){var r=To.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function CTt(e,t,n){var r=To.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ATt(e,t,n){var r=dTt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ITt(e,t,n){var r=To.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function RTt(e,t,n){var r=To.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function bhe(e,t){return Ir(e.getDate(),t,2)}function kTt(e,t){return Ir(e.getHours(),t,2)}function PTt(e,t){return Ir(e.getHours()%12||12,t,2)}function NTt(e,t){return Ir(1+km.count(tp(e),e),t,3)}function bRe(e,t){return Ir(e.getMilliseconds(),t,3)}function OTt(e,t){return bRe(e,t)+"000"}function DTt(e,t){return Ir(e.getMonth()+1,t,2)}function MTt(e,t){return Ir(e.getMinutes(),t,2)}function $Tt(e,t){return Ir(e.getSeconds(),t,2)}function LTt(e){var t=e.getDay();return t===0?7:t}function FTt(e,t){return Ir(IS.count(tp(e)-1,e),t,2)}function _Re(e){var t=e.getDay();return t>=4||t===0?ox(e):ox.ceil(e)}function jTt(e,t){return e=_Re(e),Ir(ox.count(tp(e),e)+(tp(e).getDay()===4),t,2)}function BTt(e){return e.getDay()}function zTt(e,t){return Ir(q$.count(tp(e)-1,e),t,2)}function UTt(e,t){return Ir(e.getFullYear()%100,t,2)}function VTt(e,t){return e=_Re(e),Ir(e.getFullYear()%100,t,2)}function HTt(e,t){return Ir(e.getFullYear()%1e4,t,4)}function qTt(e,t){var n=e.getDay();return e=n>=4||n===0?ox(e):ox.ceil(e),Ir(e.getFullYear()%1e4,t,4)}function WTt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ir(t/60|0,"0",2)+Ir(t%60,"0",2)}function _he(e,t){return Ir(e.getUTCDate(),t,2)}function GTt(e,t){return Ir(e.getUTCHours(),t,2)}function YTt(e,t){return Ir(e.getUTCHours()%12||12,t,2)}function KTt(e,t){return Ir(1+q0.count(np(e),e),t,3)}function wRe(e,t){return Ir(e.getUTCMilliseconds(),t,3)}function XTt(e,t){return wRe(e,t)+"000"}function QTt(e,t){return Ir(e.getUTCMonth()+1,t,2)}function JTt(e,t){return Ir(e.getUTCMinutes(),t,2)}function ZTt(e,t){return Ir(e.getUTCSeconds(),t,2)}function eCt(e){var t=e.getUTCDay();return t===0?7:t}function tCt(e,t){return Ir(RS.count(np(e)-1,e),t,2)}function ERe(e){var t=e.getUTCDay();return t>=4||t===0?ax(e):ax.ceil(e)}function nCt(e,t){return e=ERe(e),Ir(ax.count(np(e),e)+(np(e).getUTCDay()===4),t,2)}function rCt(e){return e.getUTCDay()}function iCt(e,t){return Ir(W$.count(np(e)-1,e),t,2)}function sCt(e,t){return Ir(e.getUTCFullYear()%100,t,2)}function oCt(e,t){return e=ERe(e),Ir(e.getUTCFullYear()%100,t,2)}function aCt(e,t){return Ir(e.getUTCFullYear()%1e4,t,4)}function lCt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ax(e):ax.ceil(e),Ir(e.getUTCFullYear()%1e4,t,4)}function uCt(){return"+0000"}function whe(){return"%"}function Ehe(e){return+e}function xhe(e){return Math.floor(+e/1e3)}var H_,MJ,xRe,K6,SRe;cCt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cCt(e){return H_=vRe(e),MJ=H_.format,xRe=H_.parse,K6=H_.utcFormat,SRe=H_.utcParse,H_}function dCt(e){return new Date(e)}function fCt(e){return e instanceof Date?+e:+new Date(+e)}function $J(e,t,n,r,i,s,o,a,l,u){var c=aRe(),d=c.invert,f=c.domain,h=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),v=u("%b %d"),_=u("%B"),w=u("%Y");function E(S){return(l(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?_:w)(S)}return c.invert=function(S){return new Date(d(S))},c.domain=function(S){return arguments.length?f(Array.from(S,fCt)):f().map(dCt)},c.ticks=function(S){var x=f();return e(x[0],x[x.length-1],S??10)},c.tickFormat=function(S,x){return x==null?E:u(x)},c.nice=function(S){var x=f();return(!S||typeof S.range!="function")&&(S=t(x[0],x[x.length-1],S??10)),S?f(cRe(x,S)):c},c.copy=function(){return uk(c,$J(e,t,n,r,i,s,o,a,l,u))},c}function TRe(){return jf.apply($J(uTt,cTt,tp,bI,IS,km,G6,q6,gm,MJ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hCt(){return jf.apply($J(aTt,lTt,np,_I,RS,q0,Y6,W6,gm,K6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function X6(){var e=0,t=1,n,r,i,s,o=Kl,a=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(s(d)-n)*i,a?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(o=d,u):o};function c(d){return function(f){var h,p;return arguments.length?([h,p]=f,o=d(h,p),u):[o(0),o(1)]}}return u.range=c(gg),u.rangeRound=c(ik),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return s=d,n=d(e),r=d(t),i=n===r?0:1/(r-n),u}}function ov(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function LJ(){var e=t_(X6()(Kl));return e.copy=function(){return ov(e,LJ())},sv.apply(e,arguments)}function CRe(){var e=kJ(X6()).domain([1,10]);return e.copy=function(){return ov(e,CRe()).base(e.base())},sv.apply(e,arguments)}function ARe(){var e=PJ(X6());return e.copy=function(){return ov(e,ARe()).constant(e.constant())},sv.apply(e,arguments)}function FJ(){var e=NJ(X6());return e.copy=function(){return ov(e,FJ()).exponent(e.exponent())},sv.apply(e,arguments)}function pCt(){return FJ.apply(null,arguments).exponent(.5)}function Q6(){var e=0,t=.5,n=1,r=1,i,s,o,a,l,u=Kl,c,d=!1,f;function h(m){return isNaN(m=+m)?f:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:l),u(d?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(d=!!m,h):d},h.interpolator=function(m){return arguments.length?(u=m,h):u};function p(m){return function(g){var y,v,_;return arguments.length?([y,v,_]=g,u=dJ(m,[y,v,_]),h):[u(0),u(.5),u(1)]}}return h.range=p(gg),h.rangeRound=p(ik),h.unknown=function(m){return arguments.length?(f=m,h):f},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function IRe(){var e=t_(Q6()(Kl));return e.copy=function(){return ov(e,IRe())},sv.apply(e,arguments)}function RRe(){var e=kJ(Q6()).domain([.1,1,10]);return e.copy=function(){return ov(e,RRe()).base(e.base())},sv.apply(e,arguments)}function kRe(){var e=PJ(Q6());return e.copy=function(){return ov(e,kRe()).constant(e.constant())},sv.apply(e,arguments)}function jJ(){var e=NJ(Q6());return e.copy=function(){return ov(e,jJ()).exponent(e.exponent())},sv.apply(e,arguments)}function mCt(){return jJ.apply(null,arguments).exponent(.5)}function Bf(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const gCt=Bf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),yCt=Bf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),vCt=Bf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),bCt=Bf("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),_Ct=Bf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),wCt=Bf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),ECt=Bf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),xCt=Bf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),SCt=Bf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),TCt=Bf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),PRe=Bf("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Fr(e){return function(){return e}}const She=Math.abs,ma=Math.atan2,Nv=Math.cos,CCt=Math.max,i9=Math.min,Zf=Math.sin,P1=Math.sqrt,va=1e-12,lx=Math.PI,G$=lx/2,NRe=2*lx;function ACt(e){return e>1?0:e<-1?lx:Math.acos(e)}function The(e){return e>=1?G$:e<=-1?-G$:Math.asin(e)}function J6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new gJ(t)}function ICt(e){return e.innerRadius}function RCt(e){return e.outerRadius}function kCt(e){return e.startAngle}function PCt(e){return e.endAngle}function NCt(e){return e&&e.padAngle}function OCt(e,t,n,r,i,s,o,a){var l=n-e,u=r-t,c=o-i,d=a-s,f=d*l-c*u;if(!(f*f<va))return f=(c*(t-s)-d*(e-i))/f,[e+f*l,t+f*u]}function MN(e,t,n,r,i,s,o){var a=e-n,l=t-r,u=(o?s:-s)/P1(a*a+l*l),c=u*l,d=-u*a,f=e+c,h=t+d,p=n+c,m=r+d,g=(f+p)/2,y=(h+m)/2,v=p-f,_=m-h,w=v*v+_*_,E=i-s,S=f*m-p*h,x=(_<0?-1:1)*P1(CCt(0,E*E*w-S*S)),T=(S*_-v*x)/w,I=(-S*v-_*x)/w,P=(S*_+v*x)/w,k=(-S*v+_*x)/w,D=T-g,R=I-y,M=P-g,$=k-y;return D*D+R*R>M*M+$*$&&(T=P,I=k),{cx:T,cy:I,x01:-c,y01:-d,x11:T*(i/E-1),y11:I*(i/E-1)}}function DCt(){var e=ICt,t=RCt,n=Fr(0),r=null,i=kCt,s=PCt,o=NCt,a=null,l=J6(u);function u(){var c,d,f=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-G$,m=s.apply(this,arguments)-G$,g=She(m-p),y=m>p;if(a||(a=c=l()),h<f&&(d=h,h=f,f=d),!(h>va))a.moveTo(0,0);else if(g>NRe-va)a.moveTo(h*Nv(p),h*Zf(p)),a.arc(0,0,h,p,m,!y),f>va&&(a.moveTo(f*Nv(m),f*Zf(m)),a.arc(0,0,f,m,p,y));else{var v=p,_=m,w=p,E=m,S=g,x=g,T=o.apply(this,arguments)/2,I=T>va&&(r?+r.apply(this,arguments):P1(f*f+h*h)),P=i9(She(h-f)/2,+n.apply(this,arguments)),k=P,D=P,R,M;if(I>va){var $=The(I/f*Zf(T)),L=The(I/h*Zf(T));(S-=$*2)>va?($*=y?1:-1,w+=$,E-=$):(S=0,w=E=(p+m)/2),(x-=L*2)>va?(L*=y?1:-1,v+=L,_-=L):(x=0,v=_=(p+m)/2)}var B=h*Nv(v),U=h*Zf(v),z=f*Nv(E),N=f*Zf(E);if(P>va){var V=h*Nv(_),W=h*Zf(_),F=f*Nv(w),H=f*Zf(w),G;if(g<lx)if(G=OCt(B,U,F,H,V,W,z,N)){var Q=B-G[0],ie=U-G[1],se=V-G[0],ne=W-G[1],ce=1/Zf(ACt((Q*se+ie*ne)/(P1(Q*Q+ie*ie)*P1(se*se+ne*ne)))/2),Ee=P1(G[0]*G[0]+G[1]*G[1]);k=i9(P,(f-Ee)/(ce-1)),D=i9(P,(h-Ee)/(ce+1))}else k=D=0}x>va?D>va?(R=MN(F,H,B,U,h,D,y),M=MN(V,W,z,N,h,D,y),a.moveTo(R.cx+R.x01,R.cy+R.y01),D<P?a.arc(R.cx,R.cy,D,ma(R.y01,R.x01),ma(M.y01,M.x01),!y):(a.arc(R.cx,R.cy,D,ma(R.y01,R.x01),ma(R.y11,R.x11),!y),a.arc(0,0,h,ma(R.cy+R.y11,R.cx+R.x11),ma(M.cy+M.y11,M.cx+M.x11),!y),a.arc(M.cx,M.cy,D,ma(M.y11,M.x11),ma(M.y01,M.x01),!y))):(a.moveTo(B,U),a.arc(0,0,h,v,_,!y)):a.moveTo(B,U),!(f>va)||!(S>va)?a.lineTo(z,N):k>va?(R=MN(z,N,V,W,f,-k,y),M=MN(B,U,F,H,f,-k,y),a.lineTo(R.cx+R.x01,R.cy+R.y01),k<P?a.arc(R.cx,R.cy,k,ma(R.y01,R.x01),ma(M.y01,M.x01),!y):(a.arc(R.cx,R.cy,k,ma(R.y01,R.x01),ma(R.y11,R.x11),!y),a.arc(0,0,f,ma(R.cy+R.y11,R.cx+R.x11),ma(M.cy+M.y11,M.cx+M.x11),y),a.arc(M.cx,M.cy,k,ma(M.y11,M.x11),ma(M.y01,M.x01),!y))):a.arc(0,0,f,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-lx/2;return[Nv(d)*c,Zf(d)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Fr(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Fr(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Fr(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Fr(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Fr(+c),u):i},u.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Fr(+c),u):s},u.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Fr(+c),u):o},u.context=function(c){return arguments.length?(a=c??null,u):a},u}function ORe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function DRe(e){this._context=e}DRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function BJ(e){return new DRe(e)}function MRe(e){return e[0]}function $Re(e){return e[1]}function Y$(e,t){var n=Fr(!0),r=null,i=BJ,s=null,o=J6(a);e=typeof e=="function"?e:e===void 0?MRe:Fr(e),t=typeof t=="function"?t:t===void 0?$Re:Fr(t);function a(l){var u,c=(l=ORe(l)).length,d,f=!1,h;for(r==null&&(s=i(h=o())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(d,u,l),+t(d,u,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:Fr(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:Fr(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Fr(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function LRe(e,t,n){var r=null,i=Fr(!0),s=null,o=BJ,a=null,l=J6(u);e=typeof e=="function"?e:e===void 0?MRe:Fr(+e),t=typeof t=="function"?t:Fr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?$Re:Fr(+n);function u(d){var f,h,p,m=(d=ORe(d)).length,g,y=!1,v,_=new Array(m),w=new Array(m);for(s==null&&(a=o(v=l())),f=0;f<=m;++f){if(!(f<m&&i(g=d[f],f,d))===y)if(y=!y)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=f-1;p>=h;--p)a.point(_[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(_[f]=+e(g,f,d),w[f]=+t(g,f,d),a.point(r?+r(g,f,d):_[f],n?+n(g,f,d):w[f]))}if(v)return a=null,v+""||null}function c(){return Y$().defined(i).curve(o).context(s)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Fr(+d),r=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Fr(+d),u):e},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Fr(+d),u):r},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Fr(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:Fr(+d),u):t},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Fr(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Fr(!!d),u):i},u.curve=function(d){return arguments.length?(o=d,s!=null&&(a=o(s)),u):o},u.context=function(d){return arguments.length?(d==null?s=a=null:a=o(s=d),u):s},u}const MCt={draw(e,t){const n=P1(t/lx);e.moveTo(n,0),e.arc(0,0,n,0,NRe)}};function $Ct(e,t){let n=null,r=J6(i);e=typeof e=="function"?e:Fr(e||MCt),t=typeof t=="function"?t:Fr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Fr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Fr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function hy(){}function K$(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Z6(e){this._context=e}Z6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:K$(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:K$(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pH(e){return new Z6(e)}function FRe(e){this._context=e}FRe.prototype={areaStart:hy,areaEnd:hy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:K$(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function LCt(e){return new FRe(e)}function jRe(e){this._context=e}jRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:K$(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function FCt(e){return new jRe(e)}function BRe(e,t){this._basis=new Z6(e),this._beta=t}BRe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*s),this._beta*t[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const jCt=function e(t){function n(r){return t===1?new Z6(r):new BRe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function X$(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function zJ(e,t){this._context=e,this._k=(1-t)/6}zJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:X$(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:X$(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const BCt=function e(t){function n(r){return new zJ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function UJ(e,t){this._context=e,this._k=(1-t)/6}UJ.prototype={areaStart:hy,areaEnd:hy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:X$(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zCt=function e(t){function n(r){return new UJ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function VJ(e,t){this._context=e,this._k=(1-t)/6}VJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:X$(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const UCt=function e(t){function n(r){return new VJ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function HJ(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>va){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>va){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*u+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function zRe(e,t){this._context=e,this._alpha=t}zRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:HJ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const VCt=function e(t){function n(r){return t?new zRe(r,t):new zJ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function URe(e,t){this._context=e,this._alpha=t}URe.prototype={areaStart:hy,areaEnd:hy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:HJ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const HCt=function e(t){function n(r){return t?new URe(r,t):new UJ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function VRe(e,t){this._context=e,this._alpha=t}VRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:HJ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qCt=function e(t){function n(r){return t?new VRe(r,t):new VJ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function HRe(e){this._context=e}HRe.prototype={areaStart:hy,areaEnd:hy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function WCt(e){return new HRe(e)}function Che(e){return e<0?-1:1}function Ahe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Che(s)+Che(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Ihe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function s9(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function Q$(e){this._context=e}Q$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:s9(this,this._t0,Ihe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,s9(this,Ihe(this,n=Ahe(this,e,t)),n);break;default:s9(this,this._t0,n=Ahe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function qRe(e){this._context=new WRe(e)}(qRe.prototype=Object.create(Q$.prototype)).point=function(e,t){Q$.prototype.point.call(this,t,e)};function WRe(e){this._context=e}WRe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function GCt(e){return new Q$(e)}function YCt(e){return new qRe(e)}function GRe(e){this._context=e}GRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Rhe(e),i=Rhe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Rhe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function KCt(e){return new GRe(e)}function e4(e,t){this._context=e,this._t=t}e4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function XCt(e){return new e4(e,.5)}function QCt(e){return new e4(e,0)}function JCt(e){return new e4(e,1)}function VC(e,t,n){this.k=e,this.x=t,this.y=n}VC.prototype={constructor:VC,scale:function(e){return e===1?this:new VC(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new VC(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};VC.prototype;function ck({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1,dropdownColumn:l=!1,columnList:u,setColumn:c,stringTicks:d=!1}){const f=A.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),h=A.useCallback(p=>(s?K6("%B"):TS(".2s"))(p),[s]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:120,children:b.jsx(dl,{children:b.jsx(Tn,{gap:3,children:b.jsx(nt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?b.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:p,offset:m})=>b.jsxs("g",{transform:`translate(${m}, ${n})`,children:[b.jsx("line",{y2:"6",stroke:"currentColor"}),o?b.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,b.jsx("foreignObject",{x:0-f/2,y:10,width:f,height:20,children:b.jsx(dl,{children:b.jsx(on,{withinPortal:!0,label:p,children:b.jsx(nt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:d?p:+p==0?0:h(s?new Date(p):p)})})})})]},`${p}test`))]})}const ZCt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:ck},Symbol.toStringTag,{value:"Module"}));function t4({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=A.useMemo(()=>{const l=i.reduce((u,{value:c})=>{const{length:d}=`${c}`;return d>u?d:u},0);return l>20?120:l*6},[i]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:b.jsx(dl,{children:b.jsx(Tn,{gap:3,children:b.jsx(nt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?b.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:l,offset:u})=>b.jsxs("g",{transform:`translate(${n}, ${u})`,children:[b.jsx("line",{x2:"-6",stroke:"currentColor"}),s?b.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,b.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:b.jsx("foreignObject",{width:a,height:20,children:b.jsx(Tn,{style:{width:"100%",height:"100%"},justify:"right",children:b.jsx(nt,{lineClamp:1,style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:l})})})},l)]},l))]})}const e2t=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:t4},Symbol.toStringTag,{value:"Module"})),Pl={top:15,left:160,right:50,bottom:130};function mH({barsTable:e,fullTable:t,parameters:n,data:r,setSelection:i}){const[s,{height:o,width:a}]=of(),l=A.useMemo(()=>a-Pl.left-Pl.right,[a]),u=A.useMemo(()=>o-Pl.top-Pl.bottom,[o]),c=A.useMemo(()=>t==null?void 0:t.groupby(n.category).count(),[]),d=A.useMemo(()=>{const g=Array.from(new Set(r.map(y=>y[n.category])));return AS(PRe).domain(g)},[r,n.category]),f=A.useMemo(()=>c?il([Pl.left,l+Pl.left]).domain([0,Yc(c.objects().map(g=>g.count))]).nice():null,[c,l]),h=A.useMemo(()=>c?V6([Pl.top,u+Pl.top]).domain(c.array(n.category).sort()).paddingInner(.1):null,[c,u,n.category]),p=A.useMemo(()=>!f||!h||!d||!e?null:e.objects().map((g,y)=>g[n.category]===null||g.count===null?null:b.jsxs("g",{style:{cursor:"pointer"},children:[b.jsx("rect",{onClick:v=>i(r.filter(_=>_[n.category]===g[n.category]).map(_=>_[n.ids]),v),x:Pl.left,y:h(g[n.category]),fill:d(g[n.category]),height:h.bandwidth(),width:f(g.count)-Pl.left},y),b.jsx("text",{x:f(g.count)+5,y:h(g[n.category])+h.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:g.count})]},y)),[e,d,r,n.category,n.ids,i,f,h]),m=A.useMemo(()=>!f||!h||!d||!c?null:c.objects().map((g,y)=>g[n.category]===null||g.count===null?null:b.jsx("g",{style:{cursor:"pointer"},children:b.jsx("rect",{opacity:.7,onClick:v=>i(r.filter(_=>_[n.category]===g[n.category]).map(_=>_[n.ids]),v),x:Pl.left,y:h(g[n.category]),fill:"lightgray",height:h.bandwidth(),width:f(g.count)-Pl.left},y)},y)),[d,r,c,n.category,n.ids,i,f,h]);return h&&f?b.jsxs("svg",{ref:s,style:{height:"500px",width:"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[b.jsx(ck,{xScale:f,yRange:h.range(),vertPosition:u+Pl.top,showLines:!1,label:"Count",ticks:f.ticks(5).map(g=>({value:g.toString(),offset:f(g)}))}),h?b.jsx(t4,{yScale:h,horizontalPosition:Pl.left,xRange:f.range(),label:n.category,ticks:d.domain().map(g=>({value:g,offset:h(g)+h.bandwidth()/2}))}):null,m,p]}):b.jsx(ws,{})}const t2t=Object.freeze(Object.defineProperty({__proto__:null,Bar:mH,default:mH},Symbol.toStringTag,{value:"Module"})),Tr=Array.isArray;function du(e){return e!=null?Tr(e)?e:[e]:[]}function n2t(e=0,t=1/0){return`${khe(e)} < row_number() && row_number() <= ${khe(t)}`}function khe(e){return e<0?`count() + ${e}`:e}class YRe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(n2t(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,du(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Ln(e){throw Error(e)}function gl(e){return typeof e=="number"}function Ni(e){return typeof e=="function"}function n4(e,t){const n=Array(e);if(Ni(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let r2t=class extends YRe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){Ln("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){Ln("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){Ln("Not implemented")}getter(t){Ln("Not implemented")}objects(t){Ln("Not implemented")}object(t){Ln("Not implemented")}[Symbol.iterator](){Ln("Not implemented")}print(t={}){gl(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,l=this._data;r.sort((u,c)=>a(u,c,l))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=n4(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let l=0,u;l<a;++l)u=s[l],i[n[u]].push(u);else if(o)for(let l=o.next(0);l>=0;l=o.next(l+1))i[n[l]].push(l);else for(let l=0;l<a;++l)i[n[l]].push(l);if(t&&!s&&this.isOrdered()){const l=this._order,u=this._data;for(let c=0;c<r;++c)i[c].sort((d,f)=>l(d,f,u))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let l=i||0;if(l>o)return;const u=Math.min(o,l+r),c=()=>l=this._total;if(n&&this.isOrdered()||s&&this._index){const d=this.indices(),f=this._data;for(;l<u;++l)t(d[l],f,c)}else if(s){let d=u-l+1;for(l=s.nth(l);--d&&l>-1;l=s.next(l+1))t(l,a,c)}else for(;l<u;++l)t(l,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},i2t=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},s2t=function(e){return e&&Ni(e.get)?e:new i2t(e)};function Qm(e){return e instanceof Date}function La(e){return e===Object(e)}function J$(e){return e instanceof RegExp}function na(e){return typeof e=="string"}function o2t(e,t){const n=r=>Ln(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Phe(e.entries(),t):Qm(e)?n("Date"):J$(e)?n("RegExp"):na(e)?n():Tr(e)?a2t(e,t):Ni(e[Symbol.iterator])?l2t(e,t):La(e)?Phe(Object.entries(e),t):n()}function Phe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function a2t(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const l=e[a];for(let u=0;u<o;++u)s[u][a]=l[t[u]]}}else t&&t.forEach(i);return r}function l2t(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:u2t}=Object.prototype;function Ef(e,t){return u2t.call(e,t)}function mc(e){return e?new Nhe({...e.data()},e.columnNames()):new Nhe}class Nhe{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Ef(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const wr=void 0,c2t=Object.getPrototypeOf(Int8Array);function dk(e){return e instanceof c2t}function N1(e){return Tr(e)||dk(e)}function Zd(e){return e!=null&&e===e}const GT=e=>N1(e)||na(e),d2t={compact:e=>N1(e)?e.filter(t=>Zd(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>GT(e)?e.includes(t,n):!1,indexof:(e,t)=>GT(e)?e.indexOf(t):-1,join:(e,t)=>N1(e)?e.join(t):wr,lastindexof:(e,t)=>GT(e)?e.lastIndexOf(t):-1,length:e=>GT(e)?e.length:0,pluck:(e,t)=>N1(e)?e.map(n=>Zd(n)?n[t]:wr):wr,reverse:e=>N1(e)?e.slice().reverse():na(e)?e.split("").reverse().join(""):wr,slice:(e,t,n)=>GT(e)?e.slice(t,n):wr};function f2t(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function vD(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const eh=e=>(e<10?"0":"")+e,h2t=e=>e<0?"-"+vD(-e,6):e>9999?"+"+vD(e,6):vD(e,4);function KRe(e,t,n,r,i,s,o,a,l){const u=a?"Z":"";return h2t(e)+"-"+eh(t+1)+"-"+eh(n)+(!l||o?"T"+eh(r)+":"+eh(i)+":"+eh(s)+"."+vD(o,3)+u:s?"T"+eh(r)+":"+eh(i)+":"+eh(s)+u:i||r||!a?"T"+eh(r)+":"+eh(i)+u:"")}function XRe(e,t){return isNaN(e)?"Invalid Date":KRe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function r4(e,t){return isNaN(e)?"Invalid Date":KRe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const p2t=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function m2t(e){return e.match(p2t)&&!isNaN(Date.parse(e))}function g2t(e,t=Date.parse){return m2t(e)?t(e):e}const QRe=6e4,JRe=864e5,ZRe=6048e5,os=new Date,as=new Date,ys=e=>(os.setTime(typeof e=="string"?g2t(e):e),os);function y2t(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function v2t(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function b2t(e){as.setTime(+e),as.setHours(0,0,0,0),os.setTime(+as),os.setMonth(0),os.setDate(1);const t=(as.getTimezoneOffset()-os.getTimezoneOffset())*QRe;return Math.floor(1+(as-os-t)/JRe)}function _2t(e){as.setTime(+e),as.setUTCHours(0,0,0,0);const t=Date.UTC(as.getUTCFullYear(),0,1);return Math.floor(1+(as-t)/JRe)}function w2t(e,t){const n=t||0;as.setTime(+e),as.setDate(as.getDate()-(as.getDay()+7-n)%7),as.setHours(0,0,0,0),os.setTime(+e),os.setMonth(0),os.setDate(1),os.setDate(1-(os.getDay()+7-n)%7),os.setHours(0,0,0,0);const r=(as.getTimezoneOffset()-os.getTimezoneOffset())*QRe;return Math.floor((1+(as-os)-r)/ZRe)}function E2t(e,t){const n=t||0;return as.setTime(+e),as.setUTCDate(as.getUTCDate()-(as.getUTCDay()+7-n)%7),as.setUTCHours(0,0,0,0),os.setTime(+e),os.setUTCMonth(0),os.setUTCDate(1),os.setUTCDate(1-(os.getUTCDay()+7-n)%7),os.setUTCHours(0,0,0,0),Math.floor((1+(as-os))/ZRe)}const x2t={format_date:(e,t)=>XRe(ys(e),!t),format_utcdate:(e,t)=>r4(ys(e),!t),timestamp:e=>+ys(e),year:e=>ys(e).getFullYear(),quarter:e=>Math.floor(ys(e).getMonth()/3),month:e=>ys(e).getMonth(),date:e=>ys(e).getDate(),dayofweek:e=>ys(e).getDay(),hours:e=>ys(e).getHours(),minutes:e=>ys(e).getMinutes(),seconds:e=>ys(e).getSeconds(),milliseconds:e=>ys(e).getMilliseconds(),utcyear:e=>ys(e).getUTCFullYear(),utcquarter:e=>Math.floor(ys(e).getUTCMonth()/3),utcmonth:e=>ys(e).getUTCMonth(),utcdate:e=>ys(e).getUTCDate(),utcdayofweek:e=>ys(e).getUTCDay(),utchours:e=>ys(e).getUTCHours(),utcminutes:e=>ys(e).getUTCMinutes(),utcseconds:e=>ys(e).getUTCSeconds(),utcmilliseconds:e=>ys(e).getUTCMilliseconds(),datetime:y2t,dayofyear:b2t,week:w2t,utcdatetime:v2t,utcdayofyear:_2t,utcweek:E2t,now:Date.now};function qJ(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Qm(e)||Qm(t)?+e==+t:J$(e)&&J$(t)?e+""==t+"":La(e)&&La(t)?S2t(e,t):!1}function S2t(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Ohe(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Ohe(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!qJ(e[o],t[o]))return!1}return!0}function Ohe(e,t,n=qJ){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const T2t={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let C2t=Math.random;function kS(){return C2t()}const A2t={random:kS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function WJ(e){return e instanceof Map}function I2t(e){return e instanceof Set}function bD(e){return WJ(e)||I2t(e)}function o9(e){return Array.from(e)}const R2t={has:(e,t)=>bD(e)?e.has(t):e!=null?Ef(e,t):!1,keys:e=>WJ(e)?o9(e.keys()):e!=null?Object.keys(e):[],values:e=>bD(e)?o9(e.values()):e!=null?Object.values(e):[],entries:e=>bD(e)?o9(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):wr};function k2t(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Ef(t,e))return t[e];return n!==void 0?n:e}function P2t(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const N2t={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Bw={bin:f2t,equal:qJ,recode:k2t,sequence:P2t,...d2t,...x2t,...T2t,...A2t,...R2t,...N2t};function wI(e){return typeof e=="bigint"}function rp(e){return e===void 0?e+"":wI(e)?e+"n":JSON.stringify(e)}function Pn(e,t=[],n=[]){return new O2t(e,du(t),du(n))}let O2t=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${rp(n)}]`),...this.params.map(rp)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const eke=e=>Pn("any",e),tke=()=>Pn("count"),nke=e=>Pn("array_agg",e),rke=e=>Pn("array_agg_distinct",e),ike=(e,t)=>Pn("map_agg",[e,t]),ske=(e,t)=>Pn("object_agg",[e,t]),oke=(e,t)=>Pn("entries_agg",[e,t]),sA={...Bw,row_object:(...e)=>Pn("row_object",null,e.flat()),count:tke,any:eke,array_agg:nke,array_agg_distinct:rke,object_agg:ske,map_agg:ike,entries_agg:oke,valid:e=>Pn("valid",e),invalid:e=>Pn("invalid",e),distinct:e=>Pn("distinct",e),mode:e=>Pn("mode",e),sum:e=>Pn("sum",e),product:e=>Pn("product",e),mean:e=>Pn("mean",e),average:e=>Pn("average",e),variance:e=>Pn("variance",e),variancep:e=>Pn("variancep",e),stdev:e=>Pn("stdev",e),stdevp:e=>Pn("stdevp",e),min:e=>Pn("min",e),max:e=>Pn("max",e),quantile:(e,t)=>Pn("quantile",e,t),median:e=>Pn("median",e),covariance:(e,t)=>Pn("covariance",[e,t]),covariancep:(e,t)=>Pn("covariancep",[e,t]),corr:(e,t)=>Pn("corr",[e,t]),bins:(e,t,n,r)=>Pn("bins",e,[t,n,r]),row_number:()=>Pn("row_number"),rank:()=>Pn("rank"),avg_rank:()=>Pn("avg_rank"),dense_rank:()=>Pn("dense_rank"),percent_rank:()=>Pn("percent_rank"),cume_dist:()=>Pn("cume_dist"),ntile:e=>Pn("ntile",null,e),lag:(e,t,n)=>Pn("lag",e,[t,n]),lead:(e,t,n)=>Pn("lead",e,[t,n]),first_value:e=>Pn("first_value",e),last_value:e=>Pn("last_value",e),nth_value:(e,t)=>Pn("nth_value",e,t),fill_down:(e,t)=>Pn("fill_down",e,t),fill_up:(e,t)=>Pn("fill_up",e,t)};function D2t(e,t){e=bD(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function M2t(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,d)=>c+d,0);if(o===i)return e;const a=Array(o);let l=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=l++]=r[c]);const u=new Uint32Array(n.length);return t.scan(c=>u[c]=s[n[c]]),{...e,keys:u,rows:a,size:l}}function $2t(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,l=o,u=null;if(n){u=new Int32Array(o),t(p=>u[i[p]]=1);const h=u.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),l=0;for(let p=0;p<o;++p)u[p]&&(a[u[p]=l++]=s[p])}}let c=-1;const d=new Uint32Array(r);return t(l!==o?h=>d[++c]=u[i[h]]:h=>d[++c]=i[h]),{...e,keys:d,rows:a,size:l}}function L2t(e,t,n,r){const i=r==="map"||r===!0?ike:r==="entries"?oke:r==="object"?ske:Ln('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=D2t(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:nke(o)});for(let l=s.length;--l>=0;)a=a.groupby(s.slice(0,l)).rollup({[o]:i(s[l],o)});return a.get(o)}const F2t="ArrayPattern",j2t="ArrowFunctionExpression",B2t="FunctionExpression",W0="Identifier",PS="Literal",ake="MemberExpression",z2t="ObjectExpression",lke="ObjectPattern",uke="Property",fk="Column",U2t="Constant",V2t="Dictionary",H2t="Function",q2t="Parameter",cke="Op",gi=(e,t)=>{const n=W2t[e.type];return n?n(e,t):Ln(`Unsupported expression construct: ${e.type}`)},a9=(e,t)=>"("+gi(e.left,t)+" "+e.operator+" "+gi(e.right,t)+")",l9=(e,t)=>"("+uh(e.params,t)+")=>"+gi(e.body,t),Dhe=(e,t)=>gi(e.callee,t)+"("+uh(e.arguments,t)+")",uh=(e,t,n=",")=>e.map(r=>gi(r,t)).join(n),dke=e=>e.computed?`[${rp(e.name)}]`:`.${e.name}`,Mhe=(e,t,n)=>{const r=e.table||"";return`data${r}${dke(e)}.${n}(${t.index}${r})`},W2t={Constant:e=>e.raw,Column:(e,t)=>Mhe(e,t,"get"),Dictionary:(e,t)=>Mhe(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${dke(e)}`,Op:(e,t)=>`op(${rp(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+gi(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=gi(e.object,t),i=gi(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Dhe,NewExpression:(e,t)=>"new "+Dhe(e,t),ArrayExpression:(e,t)=>"["+uh(e.elements,t)+"]",AssignmentExpression:a9,BinaryExpression:a9,LogicalExpression:a9,UnaryExpression:(e,t)=>"("+e.operator+gi(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+gi(e.test,t)+"?"+gi(e.consequent,t)+":"+gi(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+uh(e.properties,t)+"})",Property:(e,t)=>{const n=gi(e.key,t);return(e.computed?`[${n}]`:n)+":"+gi(e.value,t)},ArrowFunctionExpression:l9,FunctionExpression:l9,FunctionDeclaration:l9,ArrayPattern:(e,t)=>"["+uh(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+uh(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+uh(e.declarations,t,","),VariableDeclarator:(e,t)=>gi(e.id,t)+"="+gi(e.init,t),SpreadElement:(e,t)=>"..."+gi(e.argument,t),BlockStatement:(e,t)=>"{"+uh(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>gi(e.expression,t),IfStatement:(e,t)=>"if ("+gi(e.test,t)+")"+gi(e.consequent,t)+(e.alternate?" else "+gi(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+gi(e.discriminant,t)+") {"+uh(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+gi(e.test,t):"default")+": "+uh(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+gi(e.argument,t),Program:(e,t)=>gi(e.body[0],t)};function Z$(e,t={index:"row"}){return gi(e,t)}function G2t(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const l=Math.ceil(Math.log(n)/a),u=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(u)/a)-l));Math.ceil(u/s)>n;)s*=10;const d=c.length;for(let f=0;f<d;++f){const h=s/c[f];h>=i&&u/h<=n&&(s=h)}}if(r){let l=Math.log(s);const u=l>=0?0:~~(-l/a)+1,c=Math.pow(10,-u-1);l=Math.floor(e/s+c)*s,e=e<l?l-s:l,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function ux(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Qm(e)?+e:Tr(e)||dk(e)?`[${e.map(ux)}]`:J$(e)?e+"":Y2t(e)}function Y2t(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${ux(e[r])}`;return t+="}",t}function e3(e,t){const n=e.length;return n===1?(r,i)=>ux(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=ux(a)}return s}}function K2t(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=ux(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=ux(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function rm(){}function X2t(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Fs(e){return e.init=e.init||rm,e.add=e.add||rm,e.rem=e.rem||rm,e}function $he(e,t){return e.product_v=!1,e.product=t}const fke={count:{create:()=>Fs({value:e=>e.count}),param:[]},array_agg:{create:()=>Fs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Fs({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Fs({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Fs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Fs({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:wr}),param:[1]},valid:{create:()=>Fs({value:e=>e.valid}),param:[1]},invalid:{create:()=>Fs({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=K2t(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Fs({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Fs({value:e=>{let t=wr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:wr,add:(e,t)=>wI(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>$he(e,1),value:e=>e.valid?e.product_v?$he(e,X2t(e.list.values())):e.product:void 0,add:(e,t)=>wI(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:wr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Fs({value:e=>e.valid?e.mean:wr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):wr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Fs({value:e=>e.valid>1?e.dev/e.valid:wr}),param:[1],req:["variance"]},stdev:{create:()=>Fs({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):wr}),param:[1],req:["variance"]},stdevp:{create:()=>Fs({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):wr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=wr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===wr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=wr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===wr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Fs({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Fs({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):wr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Fs({value:e=>e.valid>1?e.cov/e.valid:wr}),param:[2],req:["covariance"]},corr:{create:()=>Fs({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):wr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Fs({value:i=>G2t(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Lhe={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Fhe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},hke={row_number:{create(){return{init:rm,value:e=>e.index+1}},param:[]},rank:Lhe,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Lhe.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Fhe,ntile:{create(e){e=+e,e>0||Ln("ntile num must be greater than zero.");const{init:t,value:n}=Fhe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=wr){return e=+e||1,{init:rm,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=wr){return e=+e||1,{init:rm,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:rm,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:rm,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Ln("nth_value nth must be greater than zero."),{init:rm,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):wr}}},param:[1,1]},fill_down:{create(e=wr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Zd(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=wr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=Q2t(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function Q2t(e,t,n){for(const r=e.size;n<r;++n)if(Zd(e.value(n,t)))return n;return-1}function GJ(e){return Ef(fke,e)}function YJ(e){return Ef(hke,e)}function pke(e){return Ef(Bw,e)||e==="row_object"}function mke(e){return GJ(e)&&fke[e]}function gke(e){return YJ(e)&&hke[e]}function YT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const KJ={escape:(e,t,n)=>YT(e,t,n),expr:(e,t)=>YT(`(row,data,op)=>${e}`,Bw,t),expr2:(e,t)=>YT(`(row0,data0,row,data)=>${e}`,Bw,t),join:(e,t)=>YT(`(row1,data1,row2,data2)=>${e}`,Bw,t),param:(e,t)=>YT(e,Bw,t)},J2t={"==":1,"!=":1,"===":1,"!==":1};function yke(e,t,n=0,r,i){if(e.type=fk,e.name=t,e.table=n,i&&r&&Ni(r.keyFor)){const s=J2t[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===PS&&Z2t(i,e,s,r.keyFor(s.value))}return e}function Z2t(e,t,n,r){return r<0?(e.type=PS,e.value=!1,e.raw="false"):(t.type=V2t,n.value=r,n.raw=r+""),!0}function i4(e){return Tr(e)?e:WJ(e)?e.entries():e?Object.entries(e):[]}const vke="row_object";function bke(e,t){e.type=z2t;const n=e.properties=[];for(const r of i4(t)){const[i,s]=Tr(r)?r:[r,r];n.push({type:uke,key:{type:PS,raw:rp(s)},value:yke({computed:!0},i)})}return e}function _ke(e){return Z$(bke({},e))}function wke(e){return KJ.expr(_ke(e))}const eAt=new TextDecoder("utf-8"),gH=e=>eAt.decode(e),tAt=new TextEncoder,s4=e=>tAt.encode(e),nAt=e=>typeof e=="boolean",Fl=e=>typeof e=="function",av=e=>e!=null&&Object(e)===e,o4=e=>av(e)&&Fl(e.then),XJ=e=>av(e)&&Fl(e[Symbol.iterator]),a4=e=>av(e)&&Fl(e[Symbol.asyncIterator]),rAt=e=>av(e)&&"done"in e&&"value"in e,Eke=e=>"_getDOMStream"in e&&"_getNodeStream"in e,iAt=e=>av(e)&&Fl(e.abort)&&Fl(e.getWriter)&&!Eke(e),sAt=e=>av(e)&&Fl(e.end)&&Fl(e.write)&&nAt(e.writable)&&!Eke(e),oAt=e=>av(e)&&Fl(e.clear)&&Fl(e.bytes)&&Fl(e.position)&&Fl(e.setPosition)&&Fl(e.capacity)&&Fl(e.getBufferIdentifier)&&Fl(e.createLong),QJ=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function aAt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,l=0,u=0,c=e.length;++l<c;){if(o=t[u],a=e[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++u]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++u]=a);continue}t[u]=new Uint8Array(o.buffer,n,r-n+s)}return t}function yH(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function ip(e,t){const n=aAt(e),r=n.reduce((c,d)=>c+d.byteLength,0);let i,s,o,a=0,l=-1;const u=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++l<c;){if(i=n[l],s=i.subarray(0,Math.min(i.length,u-a)),u<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?yH(o,s,a):o=s;break}yH(o||(o=new Uint8Array(u)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function Bs(e,t){let n=rAt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=s4(n)),n instanceof ArrayBuffer?new e(n):n instanceof QJ?new e(n):oAt(n)?Bs(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const KT=e=>Bs(Int32Array,e),jhe=e=>Bs(BigInt64Array,e),hr=e=>Bs(Uint8Array,e),vH=e=>(e.next(),e);function*lAt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof QJ?n(t):XJ(t)?t:n(t);return yield*vH(function*(i){let s=null;do s=i.next(yield Bs(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const uAt=e=>lAt(Uint8Array,e);function xke(e,t){return T1(this,arguments,function*(){if(o4(t))return yield lr(yield lr(yield*N8(O2(xke(e,yield lr(t))))));const r=function(o){return T1(this,arguments,function*(){yield yield lr(yield lr(o))})},i=function(o){return T1(this,arguments,function*(){yield lr(yield*N8(O2(vH(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof QJ?r(t):XJ(t)?i(t):a4(t)?t:r(t);return yield lr(yield*N8(O2(vH(function(o){return T1(this,arguments,function*(){let a=null;do a=yield lr(o.next(yield yield lr(Bs(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield lr(new e)})}const cAt=e=>xke(Uint8Array,e);function Ske(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function dAt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Bhe={fromIterable(e){return $N(fAt(e))},fromAsyncIterable(e){return $N(hAt(e))},fromDOMStream(e){return $N(pAt(e))},fromNodeStream(e){return $N(gAt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},$N=e=>(e.next(),e);function*fAt(e){let t,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?ip(r,o)[0]:([i,r,a]=ip(r,o),i)}({cmd:s,size:o}=(yield null)||{cmd:"read",size:0});const u=uAt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?u.next():u.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!t)}catch(c){(n=!0)&&typeof u.throw=="function"&&u.throw(c)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function hAt(e){return T1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function u(){return o==="peek"?ip(i,a)[0]:([s,i,l]=ip(i,a),s)}({cmd:o,size:a}=(yield yield lr(null))||{cmd:"read",size:0});const c=cAt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield lr(c.next()):yield lr(c.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield lr(u()));while(a<l);while(!n)}catch(d){(r=!0)&&typeof c.throw=="function"&&(yield lr(c.throw(d)))}finally{r===!1&&typeof c.return=="function"&&(yield lr(c.return(new Uint8Array(0))))}return yield lr(null)})}function pAt(e){return T1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function u(){return o==="peek"?ip(i,a)[0]:([s,i,l]=ip(i,a),s)}({cmd:o,size:a}=(yield yield lr(null))||{cmd:"read",size:0});const c=new mAt(e);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield lr(c.read()):yield lr(c.read(a-l)),!n&&s.byteLength>0&&(i.push(hr(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield lr(u()));while(a<l);while(!n)}catch(d){(r=!0)&&(yield lr(c.cancel(d)))}finally{r===!1?yield lr(c.cancel()):e.locked&&c.releaseLock()}return yield lr(null)})}class mAt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return sm(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return sm(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=hr(n)),n})}}const u9=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function gAt(e){return T1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,u=[],c;function d(){return o==="peek"?ip(u,a)[0]:([c,u,l]=ip(u,a),c)}if({cmd:o,size:a}=(yield yield lr(null))||{cmd:"read",size:0},e.isTTY)return yield yield lr(new Uint8Array(0)),yield lr(null);try{n[0]=u9(e,"end"),n[1]=u9(e,"error");do{if(n[2]=u9(e,"readable"),[r,s]=yield lr(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(c=hr(e.read(a-l)),c.byteLength<a-l&&(c=hr(e.read()))):c=hr(e.read()),c.byteLength>0&&(u.push(c),l+=c.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield lr(d()));while(a<l)}while(!i)}finally{yield lr(f(n,r==="error"?s:null))}return yield lr(null);function f(h,p){return c=u=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var qs;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(qs||(qs={}));var yl;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(yl||(yl={}));var Zs;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Zs||(Zs={}));var nd;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(nd||(nd={}));var Wt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Wt||(Wt={}));var rd;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(rd||(rd={}));const c9=2,Sh=4,lm=4,Br=4,e0=new Int32Array(2),zhe=new Float32Array(e0.buffer),Uhe=new Float64Array(e0.buffer),LN=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var bH;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(bH||(bH={}));let t3=class Tke{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new Tke(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return e0[0]=this.readInt32(t),zhe[0]}readFloat64(t){return e0[LN?0:1]=this.readInt32(t),e0[LN?1:0]=this.readInt32(t+4),Uhe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){zhe[0]=n,this.writeInt32(t,e0[0])}writeFloat64(t,n){Uhe[0]=n,this.writeInt32(t,e0[LN?0:1]),this.writeInt32(t+4,e0[LN?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Sh+lm)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<lm;n++)t+=String.fromCharCode(this.readInt8(this.position_+Sh+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Sh;const i=this.bytes_.subarray(t,t+r);return n===bH.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Sh}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=lm)throw new Error("FlatBuffers: file identifier must be length "+lm);for(let n=0;n<lm;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Sh+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},Cke=class Ake{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=t3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=Ake.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=t3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Sh,0),this.writeInt32(this.offset()-t+Sh)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*c9;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let u=c9;u<s;u+=c9)if(this.bb.readInt16(a+u)!=this.bb.readInt16(l+u))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Br:0;if(n){const s=n;if(this.prep(this.minalign,Sh+lm+i),s.length!=lm)throw new TypeError("FlatBuffers: file identifier must be length "+lm);for(let o=lm-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Sh+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Sh,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};var n3;(function(e){e[e.BUFFER=0]="BUFFER"})(n3||(n3={}));var r3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(r3||(r3={}));class t0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new t0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Br),(n||new t0).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):r3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):n3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,r3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,n3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return t0.startBodyCompression(t),t0.addCodec(t,n),t0.addMethod(t,r),t0.endBodyCompression(t)}}let Ike=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Rke=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Jp=class _H{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new _H).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Br),(n||new _H).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Rke).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Ike).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new t0).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},dw=class wH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new wH).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Br),(n||new wH).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Jp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var cx;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(cx||(cx={}));var i3;(function(e){e[e.DenseArray=0]="DenseArray"})(i3||(i3={}));class Mu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Mu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Br),(n||new Mu).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Mu.startInt(t),Mu.addBitWidth(t,n),Mu.addIsSigned(t,r),Mu.endInt(t)}}class um{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new um).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Br),(n||new um).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Mu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):i3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,i3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Vs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Vs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Br),(n||new Vs).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Vs.startKeyValue(t),Vs.addKey(t,n),Vs.addValue(t,r),Vs.endKeyValue(t)}}let Vhe=class HC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new HC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Br),(n||new HC).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return HC.startBinary(t),HC.endBinary(t)}},Hhe=class qC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new qC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Br),(n||new qC).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return qC.startBool(t),qC.endBool(t)}},_D=class fw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new fw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Br),(n||new fw).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):nd.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,nd.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return fw.startDate(t),fw.addUnit(t,n),fw.endDate(t)}},hw=class Wg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Wg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Br),(n||new Wg).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Wg.startDecimal(t),Wg.addPrecision(t,n),Wg.addScale(t,r),Wg.addBitWidth(t,i),Wg.endDecimal(t)}},wD=class pw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new pw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Br),(n||new pw).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Wt.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Wt.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return pw.startDuration(t),pw.addUnit(t,n),pw.endDuration(t)}},ED=class mw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new mw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Br),(n||new mw).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return mw.startFixedSizeBinary(t),mw.addByteWidth(t,n),mw.endFixedSizeBinary(t)}},xD=class gw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new gw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Br),(n||new gw).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return gw.startFixedSizeList(t),gw.addListSize(t,n),gw.endFixedSizeList(t)}};class Th{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Th).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Br),(n||new Th).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Zs.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,Zs.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Th.startFloatingPoint(t),Th.addPrecision(t,n),Th.endFloatingPoint(t)}}class Ch{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Ch).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Br),(n||new Ch).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):rd.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,rd.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Ch.startInterval(t),Ch.addUnit(t,n),Ch.endInterval(t)}}let qhe=class WC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeBinary(t,n){return(n||new WC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,n){return t.setPosition(t.position()+Br),(n||new WC).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return WC.startLargeBinary(t),WC.endLargeBinary(t)}},Whe=class GC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeUtf8(t,n){return(n||new GC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,n){return t.setPosition(t.position()+Br),(n||new GC).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return GC.startLargeUtf8(t),GC.endLargeUtf8(t)}},Ghe=class YC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new YC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Br),(n||new YC).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return YC.startList(t),YC.endList(t)}},SD=class yw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new yw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Br),(n||new yw).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return yw.startMap(t),yw.addKeysSorted(t,n),yw.endMap(t)}},Yhe=class KC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new KC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Br),(n||new KC).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return KC.startNull(t),KC.endNull(t)}};class O1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new O1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Br),(n||new O1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return O1.startStruct_(t),O1.endStruct_(t)}}let XC=class Jv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Jv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Br),(n||new Jv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Wt.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Wt.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Jv.startTime(t),Jv.addUnit(t,n),Jv.addBitWidth(t,r),Jv.endTime(t)}},QC=class Zv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Zv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Br),(n||new Zv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Wt.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Wt.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Zv.startTimestamp(t),Zv.addUnit(t,n),Zv.addTimezone(t,r),Zv.endTimestamp(t)}},e1=class t1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new t1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Br),(n||new t1).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):yl.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,yl.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return t1.startUnion(t),t1.addMode(t,n),t1.addTypeIds(t,r),t1.endUnion(t)}},Khe=class JC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new JC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Br),(n||new JC).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return JC.startUtf8(t),JC.endUtf8(t)}};var mi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(mi||(mi={}));let xc=class TD{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new TD).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Br),(n||new TD).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):mi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new um).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new TD).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Vs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,mi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},ch=class Xp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Xp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Br),(n||new Xp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):cx.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new xc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Vs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,cx.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Xp.startSchema(t),Xp.addEndianness(t,n),Xp.addFields(t,r),Xp.addCustomMetadata(t,i),Xp.addFeatures(t,s),Xp.endSchema(t)}};var Os;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Os||(Os={}));var oe;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(oe||(oe={}));var Zp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Zp||(Zp={}));const yAt=void 0;function mb(e){if(e===null)return"null";if(e===yAt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>mb(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const vAt=Symbol.for("isArrowBigNum");function zf(e,...t){return t.length===0?Object.setPrototypeOf(Bs(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}zf.prototype[vAt]=!0;zf.prototype.toJSON=function(){return`"${xI(this)}"`};zf.prototype.valueOf=function(){return kke(this)};zf.prototype.toString=function(){return xI(this)};zf.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return kke(this);case"string":return xI(this);case"default":return bAt(this)}return xI(this)};function hE(...e){return zf.apply(this,e)}function pE(...e){return zf.apply(this,e)}function EI(...e){return zf.apply(this,e)}Object.setPrototypeOf(hE.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(pE.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(EI.prototype,Object.create(Uint32Array.prototype));Object.assign(hE.prototype,zf.prototype,{constructor:hE,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(pE.prototype,zf.prototype,{constructor:pE,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(EI.prototype,zf.prototype,{constructor:EI,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function kke(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),l=BigInt(0);if(o){for(const u of s)a+=~u*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const u of s)a+=u*(BigInt(1)<<BigInt(32)*l++);return a}const xI=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return d9(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return d9(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${d9(t)}`},bAt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:xI(e);function d9(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class JJ{static new(t,n){switch(n){case!0:return new hE(t);case!1:return new pE(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new hE(t)}return t.byteLength===16?new EI(t):new pE(t)}static signed(t){return new hE(t)}static unsigned(t){return new pE(t)}static decimal(t){return new EI(t)}constructor(t,n){return JJ.new(t,n)}}function Jo(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var Pke,Nke,Oke,Dke,Mke,$ke,Lke,Fke,jke,Bke,zke,Uke,Vke,Hke,qke,Wke,Gke,Yke,Kke,Xke,Qke,Jke;class xn{static isNull(t){return(t==null?void 0:t.typeId)===oe.Null}static isInt(t){return(t==null?void 0:t.typeId)===oe.Int}static isFloat(t){return(t==null?void 0:t.typeId)===oe.Float}static isBinary(t){return(t==null?void 0:t.typeId)===oe.Binary}static isLargeBinary(t){return(t==null?void 0:t.typeId)===oe.LargeBinary}static isUtf8(t){return(t==null?void 0:t.typeId)===oe.Utf8}static isLargeUtf8(t){return(t==null?void 0:t.typeId)===oe.LargeUtf8}static isBool(t){return(t==null?void 0:t.typeId)===oe.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===oe.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===oe.Date}static isTime(t){return(t==null?void 0:t.typeId)===oe.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===oe.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===oe.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===oe.Duration}static isList(t){return(t==null?void 0:t.typeId)===oe.List}static isStruct(t){return(t==null?void 0:t.typeId)===oe.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===oe.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===oe.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===oe.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===oe.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===oe.Dictionary}static isDenseUnion(t){return xn.isUnion(t)&&t.mode===yl.Dense}static isSparseUnion(t){return xn.isUnion(t)&&t.mode===yl.Sparse}constructor(t){this.typeId=t}}Pke=Symbol.toStringTag;xn[Pke]=(e=>(e.children=null,e.ArrayType=Array,e.OffsetArrayType=Int32Array,e[Symbol.toStringTag]="DataType"))(xn.prototype);class Jm extends xn{constructor(){super(oe.Null)}toString(){return"Null"}}Nke=Symbol.toStringTag;Jm[Nke]=(e=>e[Symbol.toStringTag]="Null")(Jm.prototype);class vl extends xn{constructor(t,n){super(oe.Int),this.isSigned=t,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Oke=Symbol.toStringTag;vl[Oke]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(vl.prototype);class ZJ extends vl{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class eZ extends vl{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class py extends vl{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class tZ extends vl{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class nZ extends vl{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class rZ extends vl{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class iZ extends vl{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class sZ extends vl{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(ZJ.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(eZ.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(py.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(tZ.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(nZ.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(rZ.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(iZ.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(sZ.prototype,"ArrayType",{value:BigUint64Array});class my extends xn{constructor(t){super(oe.Float),this.precision=t}get ArrayType(){switch(this.precision){case Zs.HALF:return Uint16Array;case Zs.SINGLE:return Float32Array;case Zs.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Dke=Symbol.toStringTag;my[Dke]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(my.prototype);class Zke extends my{constructor(){super(Zs.HALF)}}class oZ extends my{constructor(){super(Zs.SINGLE)}}class aZ extends my{constructor(){super(Zs.DOUBLE)}}Object.defineProperty(Zke.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(oZ.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(aZ.prototype,"ArrayType",{value:Float64Array});class SI extends xn{constructor(){super(oe.Binary)}toString(){return"Binary"}}Mke=Symbol.toStringTag;SI[Mke]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(SI.prototype);class s3 extends xn{constructor(){super(oe.LargeBinary)}toString(){return"LargeBinary"}}$ke=Symbol.toStringTag;s3[$ke]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(s3.prototype);class dx extends xn{constructor(){super(oe.Utf8)}toString(){return"Utf8"}}Lke=Symbol.toStringTag;dx[Lke]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(dx.prototype);class o3 extends xn{constructor(){super(oe.LargeUtf8)}toString(){return"LargeUtf8"}}Fke=Symbol.toStringTag;o3[Fke]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(o3.prototype);class TI extends xn{constructor(){super(oe.Bool)}toString(){return"Bool"}}jke=Symbol.toStringTag;TI[jke]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(TI.prototype);class a3 extends xn{constructor(t,n,r=128){super(oe.Decimal),this.scale=t,this.precision=n,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}Bke=Symbol.toStringTag;a3[Bke]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(a3.prototype);class fx extends xn{constructor(t){super(oe.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${nd[this.unit]}>`}}zke=Symbol.toStringTag;fx[zke]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(fx.prototype);class _At extends fx{constructor(){super(nd.DAY)}}class wAt extends fx{constructor(){super(nd.MILLISECOND)}}class Zm extends xn{constructor(t,n){super(oe.Time),this.unit=t,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${Wt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Uke=Symbol.toStringTag;Zm[Uke]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Zm.prototype);class EAt extends Zm{constructor(){super(Wt.SECOND,32)}}class xAt extends Zm{constructor(){super(Wt.MILLISECOND,32)}}class SAt extends Zm{constructor(){super(Wt.MICROSECOND,64)}}class TAt extends Zm{constructor(){super(Wt.NANOSECOND,64)}}class l3 extends xn{constructor(t,n){super(oe.Timestamp),this.unit=t,this.timezone=n}toString(){return`Timestamp<${Wt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Vke=Symbol.toStringTag;l3[Vke]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(l3.prototype);class hx extends xn{constructor(t){super(oe.Interval),this.unit=t}toString(){return`Interval<${rd[this.unit]}>`}}Hke=Symbol.toStringTag;hx[Hke]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(hx.prototype);class CAt extends hx{constructor(){super(rd.DAY_TIME)}}class AAt extends hx{constructor(){super(rd.YEAR_MONTH)}}class u3 extends xn{constructor(t){super(oe.Duration),this.unit=t}toString(){return`Duration<${Wt[this.unit]}>`}}qke=Symbol.toStringTag;u3[qke]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(u3.prototype);class px extends xn{constructor(t){super(oe.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}Wke=Symbol.toStringTag;px[Wke]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(px.prototype);class Aa extends xn{constructor(t){super(oe.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Gke=Symbol.toStringTag;Aa[Gke]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Aa.prototype);class CI extends xn{constructor(t,n,r){super(oe.Union),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}Yke=Symbol.toStringTag;CI[Yke]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(CI.prototype);class c3 extends xn{constructor(t){super(oe.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}Kke=Symbol.toStringTag;c3[Kke]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(c3.prototype);class mx extends xn{constructor(t,n){super(oe.FixedSizeList),this.listSize=t,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}Xke=Symbol.toStringTag;mx[Xke]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(mx.prototype);class AI extends xn{constructor(t,n=!1){var r,i,s;if(super(oe.Map),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Qke=Symbol.toStringTag;AI[Qke]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(AI.prototype);const IAt=(e=>()=>++e)(-1);class gy extends xn{constructor(t,n,r,i){super(oe.Dictionary),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?IAt():Jo(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}Jke=Symbol.toStringTag;gy[Jke]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(gy.prototype);function fh(e){const t=e;switch(e.typeId){case oe.Decimal:return e.bitWidth/32;case oe.Timestamp:return 2;case oe.Date:return 1+t.unit;case oe.Interval:return 1+t.unit;case oe.FixedSizeList:return t.listSize;case oe.FixedSizeBinary:return t.byteWidth;default:return 1}}class zn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return RAt(this,t,n)}getVisitFnByTypeId(t,n=!0){return vw(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitLargeUtf8(t,...n){return null}visitBinary(t,...n){return null}visitLargeBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function RAt(e,t,n=!0){return typeof t=="number"?vw(e,t,n):typeof t=="string"&&t in oe?vw(e,oe[t],n):t&&t instanceof xn?vw(e,Xhe(t),n):t!=null&&t.type&&t.type instanceof xn?vw(e,Xhe(t.type),n):vw(e,oe.NONE,n)}function vw(e,t,n=!0){let r=null;switch(t){case oe.Null:r=e.visitNull;break;case oe.Bool:r=e.visitBool;break;case oe.Int:r=e.visitInt;break;case oe.Int8:r=e.visitInt8||e.visitInt;break;case oe.Int16:r=e.visitInt16||e.visitInt;break;case oe.Int32:r=e.visitInt32||e.visitInt;break;case oe.Int64:r=e.visitInt64||e.visitInt;break;case oe.Uint8:r=e.visitUint8||e.visitInt;break;case oe.Uint16:r=e.visitUint16||e.visitInt;break;case oe.Uint32:r=e.visitUint32||e.visitInt;break;case oe.Uint64:r=e.visitUint64||e.visitInt;break;case oe.Float:r=e.visitFloat;break;case oe.Float16:r=e.visitFloat16||e.visitFloat;break;case oe.Float32:r=e.visitFloat32||e.visitFloat;break;case oe.Float64:r=e.visitFloat64||e.visitFloat;break;case oe.Utf8:r=e.visitUtf8;break;case oe.LargeUtf8:r=e.visitLargeUtf8;break;case oe.Binary:r=e.visitBinary;break;case oe.LargeBinary:r=e.visitLargeBinary;break;case oe.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case oe.Date:r=e.visitDate;break;case oe.DateDay:r=e.visitDateDay||e.visitDate;break;case oe.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case oe.Timestamp:r=e.visitTimestamp;break;case oe.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case oe.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case oe.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case oe.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case oe.Time:r=e.visitTime;break;case oe.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case oe.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case oe.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case oe.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case oe.Decimal:r=e.visitDecimal;break;case oe.List:r=e.visitList;break;case oe.Struct:r=e.visitStruct;break;case oe.Union:r=e.visitUnion;break;case oe.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case oe.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case oe.Dictionary:r=e.visitDictionary;break;case oe.Interval:r=e.visitInterval;break;case oe.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case oe.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case oe.Duration:r=e.visitDuration;break;case oe.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case oe.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case oe.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case oe.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case oe.FixedSizeList:r=e.visitFixedSizeList;break;case oe.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${oe[t]}'`)}function Xhe(e){switch(e.typeId){case oe.Null:return oe.Null;case oe.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?oe.Int8:oe.Uint8;case 16:return n?oe.Int16:oe.Uint16;case 32:return n?oe.Int32:oe.Uint32;case 64:return n?oe.Int64:oe.Uint64}return oe.Int}case oe.Float:switch(e.precision){case Zs.HALF:return oe.Float16;case Zs.SINGLE:return oe.Float32;case Zs.DOUBLE:return oe.Float64}return oe.Float;case oe.Binary:return oe.Binary;case oe.LargeBinary:return oe.LargeBinary;case oe.Utf8:return oe.Utf8;case oe.LargeUtf8:return oe.LargeUtf8;case oe.Bool:return oe.Bool;case oe.Decimal:return oe.Decimal;case oe.Time:switch(e.unit){case Wt.SECOND:return oe.TimeSecond;case Wt.MILLISECOND:return oe.TimeMillisecond;case Wt.MICROSECOND:return oe.TimeMicrosecond;case Wt.NANOSECOND:return oe.TimeNanosecond}return oe.Time;case oe.Timestamp:switch(e.unit){case Wt.SECOND:return oe.TimestampSecond;case Wt.MILLISECOND:return oe.TimestampMillisecond;case Wt.MICROSECOND:return oe.TimestampMicrosecond;case Wt.NANOSECOND:return oe.TimestampNanosecond}return oe.Timestamp;case oe.Date:switch(e.unit){case nd.DAY:return oe.DateDay;case nd.MILLISECOND:return oe.DateMillisecond}return oe.Date;case oe.Interval:switch(e.unit){case rd.DAY_TIME:return oe.IntervalDayTime;case rd.YEAR_MONTH:return oe.IntervalYearMonth}return oe.Interval;case oe.Duration:switch(e.unit){case Wt.SECOND:return oe.DurationSecond;case Wt.MILLISECOND:return oe.DurationMillisecond;case Wt.MICROSECOND:return oe.DurationMicrosecond;case Wt.NANOSECOND:return oe.DurationNanosecond}return oe.Duration;case oe.Map:return oe.Map;case oe.List:return oe.List;case oe.Struct:return oe.Struct;case oe.Union:switch(e.mode){case yl.Dense:return oe.DenseUnion;case yl.Sparse:return oe.SparseUnion}return oe.Union;case oe.FixedSizeBinary:return oe.FixedSizeBinary;case oe.FixedSizeList:return oe.FixedSizeList;case oe.Dictionary:return oe.Dictionary}throw new Error(`Unrecognized type '${oe[e.typeId]}'`)}zn.prototype.visitInt8=null;zn.prototype.visitInt16=null;zn.prototype.visitInt32=null;zn.prototype.visitInt64=null;zn.prototype.visitUint8=null;zn.prototype.visitUint16=null;zn.prototype.visitUint32=null;zn.prototype.visitUint64=null;zn.prototype.visitFloat16=null;zn.prototype.visitFloat32=null;zn.prototype.visitFloat64=null;zn.prototype.visitDateDay=null;zn.prototype.visitDateMillisecond=null;zn.prototype.visitTimestampSecond=null;zn.prototype.visitTimestampMillisecond=null;zn.prototype.visitTimestampMicrosecond=null;zn.prototype.visitTimestampNanosecond=null;zn.prototype.visitTimeSecond=null;zn.prototype.visitTimeMillisecond=null;zn.prototype.visitTimeMicrosecond=null;zn.prototype.visitTimeNanosecond=null;zn.prototype.visitDenseUnion=null;zn.prototype.visitSparseUnion=null;zn.prototype.visitIntervalDayTime=null;zn.prototype.visitIntervalYearMonth=null;zn.prototype.visitDuration=null;zn.prototype.visitDurationSecond=null;zn.prototype.visitDurationMillisecond=null;zn.prototype.visitDurationMicrosecond=null;zn.prototype.visitDurationNanosecond=null;const ePe=new Float64Array(1),q_=new Uint32Array(ePe.buffer);function tPe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function nPe(e){if(e!==e)return 32256;ePe[0]=e;const t=(q_[1]&2147483648)>>16&65535;let n=q_[1]&2146435072,r=0;return n>=1089470464?q_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(q_[1]&1048575)>>10):n<=1056964608?(r=1048576+(q_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(q_[1]&1048575)+512>>10),t|n|r&65535}class ln extends zn{}function fn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const kAt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},lZ=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},PAt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},NAt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},rPe=(e,t,n,r)=>{if(n+1<t.length){const i=Jo(t[n]),s=Jo(t[n+1]);e.set(r.subarray(0,s-i),i)}},OAt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},yg=({values:e},t,n)=>{e[t]=n},uZ=({values:e},t,n)=>{e[t]=n},iPe=({values:e},t,n)=>{e[t]=nPe(n)},DAt=(e,t,n)=>{switch(e.type.precision){case Zs.HALF:return iPe(e,t,n);case Zs.SINGLE:case Zs.DOUBLE:return uZ(e,t,n)}},cZ=({values:e},t,n)=>{kAt(e,t,n.valueOf())},dZ=({values:e},t,n)=>{lZ(e,t*2,n.valueOf())},sPe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},oPe=({values:e,valueOffsets:t},n,r)=>rPe(e,t,n,r),aPe=({values:e,valueOffsets:t},n,r)=>rPe(e,t,n,s4(r)),lPe=(e,t,n)=>{e.type.unit===nd.DAY?cZ(e,t,n):dZ(e,t,n)},fZ=({values:e},t,n)=>lZ(e,t*2,n/1e3),hZ=({values:e},t,n)=>lZ(e,t*2,n),pZ=({values:e},t,n)=>PAt(e,t*2,n),mZ=({values:e},t,n)=>NAt(e,t*2,n),uPe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return fZ(e,t,n);case Wt.MILLISECOND:return hZ(e,t,n);case Wt.MICROSECOND:return pZ(e,t,n);case Wt.NANOSECOND:return mZ(e,t,n)}},gZ=({values:e},t,n)=>{e[t]=n},yZ=({values:e},t,n)=>{e[t]=n},vZ=({values:e},t,n)=>{e[t]=n},bZ=({values:e},t,n)=>{e[t]=n},cPe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return gZ(e,t,n);case Wt.MILLISECOND:return yZ(e,t,n);case Wt.MICROSECOND:return vZ(e,t,n);case Wt.NANOSECOND:return bZ(e,t,n)}},dPe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},MAt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=id.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n.get(++o))},$At=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=id.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const u of l)if(s(r,o,u),++o>=a)break},LAt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),FAt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),jAt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),BAt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),zAt=(e,t,n)=>{const r=e.type.children.map(s=>id.getVisitFn(s.type)),i=n instanceof Map?jAt(t,n):n instanceof Cr?FAt(t,n):Array.isArray(n)?LAt(t,n):BAt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},UAt=(e,t,n)=>{e.type.mode===yl.Dense?fPe(e,t,n):hPe(e,t,n)},fPe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];id.visit(i,e.valueOffsets[t],n)},hPe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];id.visit(i,t,n)},VAt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},pPe=(e,t,n)=>{e.type.unit===rd.DAY_TIME?_Z(e,t,n):wZ(e,t,n)},_Z=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},wZ=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},EZ=({values:e},t,n)=>{e[t]=n},xZ=({values:e},t,n)=>{e[t]=n},SZ=({values:e},t,n)=>{e[t]=n},TZ=({values:e},t,n)=>{e[t]=n},mPe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return EZ(e,t,n);case Wt.MILLISECOND:return xZ(e,t,n);case Wt.MICROSECOND:return SZ(e,t,n);case Wt.NANOSECOND:return TZ(e,t,n)}},HAt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=id.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};ln.prototype.visitBool=fn(OAt);ln.prototype.visitInt=fn(yg);ln.prototype.visitInt8=fn(yg);ln.prototype.visitInt16=fn(yg);ln.prototype.visitInt32=fn(yg);ln.prototype.visitInt64=fn(yg);ln.prototype.visitUint8=fn(yg);ln.prototype.visitUint16=fn(yg);ln.prototype.visitUint32=fn(yg);ln.prototype.visitUint64=fn(yg);ln.prototype.visitFloat=fn(DAt);ln.prototype.visitFloat16=fn(iPe);ln.prototype.visitFloat32=fn(uZ);ln.prototype.visitFloat64=fn(uZ);ln.prototype.visitUtf8=fn(aPe);ln.prototype.visitLargeUtf8=fn(aPe);ln.prototype.visitBinary=fn(oPe);ln.prototype.visitLargeBinary=fn(oPe);ln.prototype.visitFixedSizeBinary=fn(sPe);ln.prototype.visitDate=fn(lPe);ln.prototype.visitDateDay=fn(cZ);ln.prototype.visitDateMillisecond=fn(dZ);ln.prototype.visitTimestamp=fn(uPe);ln.prototype.visitTimestampSecond=fn(fZ);ln.prototype.visitTimestampMillisecond=fn(hZ);ln.prototype.visitTimestampMicrosecond=fn(pZ);ln.prototype.visitTimestampNanosecond=fn(mZ);ln.prototype.visitTime=fn(cPe);ln.prototype.visitTimeSecond=fn(gZ);ln.prototype.visitTimeMillisecond=fn(yZ);ln.prototype.visitTimeMicrosecond=fn(vZ);ln.prototype.visitTimeNanosecond=fn(bZ);ln.prototype.visitDecimal=fn(dPe);ln.prototype.visitList=fn(MAt);ln.prototype.visitStruct=fn(zAt);ln.prototype.visitUnion=fn(UAt);ln.prototype.visitDenseUnion=fn(fPe);ln.prototype.visitSparseUnion=fn(hPe);ln.prototype.visitDictionary=fn(VAt);ln.prototype.visitInterval=fn(pPe);ln.prototype.visitIntervalDayTime=fn(_Z);ln.prototype.visitIntervalYearMonth=fn(wZ);ln.prototype.visitDuration=fn(mPe);ln.prototype.visitDurationSecond=fn(EZ);ln.prototype.visitDurationMillisecond=fn(xZ);ln.prototype.visitDurationMicrosecond=fn(SZ);ln.prototype.visitDurationNanosecond=fn(TZ);ln.prototype.visitFixedSizeList=fn(HAt);ln.prototype.visitMap=fn($At);const id=new ln,Fd=Symbol.for("parent"),mE=Symbol.for("rowIndex");class CZ{constructor(t,n){return this[Fd]=t,this[mE]=n,new Proxy(this,new WAt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[mE],n=this[Fd],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=fu.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${mb(t)}: ${mb(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new qAt(this[Fd],this[mE])}}class qAt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,fu.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(CZ.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Fd]:{writable:!0,enumerable:!1,configurable:!1,value:null},[mE]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class WAt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Fd].type.children.map(n=>n.name)}has(t,n){return t[Fd].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Fd].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Fd].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=fu.visit(t[Fd].children[r],t[mE]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Fd].type.children.findIndex(s=>s.name===n);return i!==-1?(id.visit(t[Fd].children[i],t[mE],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Zt extends zn{}function un(e){return(t,n)=>t.getValid(n)?e(t,n):null}const GAt=(e,t)=>864e5*e[t],AZ=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),YAt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,KAt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,gPe=e=>new Date(e),XAt=(e,t)=>gPe(GAt(e,t)),QAt=(e,t)=>gPe(AZ(e,t)),JAt=(e,t)=>null,yPe=(e,t,n)=>{if(n+1>=t.length)return null;const r=Jo(t[n]),i=Jo(t[n+1]);return e.subarray(r,i)},ZAt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},vPe=({values:e},t)=>XAt(e,t),bPe=({values:e},t)=>QAt(e,t*2),lv=({stride:e,values:t},n)=>t[e*n],eIt=({stride:e,values:t},n)=>tPe(t[e*n]),_Pe=({values:e},t)=>e[t],tIt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),wPe=({values:e,valueOffsets:t},n)=>yPe(e,t,n),EPe=({values:e,valueOffsets:t},n)=>{const r=yPe(e,t,n);return r!==null?gH(r):null},nIt=({values:e},t)=>e[t],rIt=({type:e,values:t},n)=>e.precision!==Zs.HALF?t[n]:tPe(t[n]),iIt=(e,t)=>e.type.unit===nd.DAY?vPe(e,t):bPe(e,t),xPe=({values:e},t)=>1e3*AZ(e,t*2),SPe=({values:e},t)=>AZ(e,t*2),TPe=({values:e},t)=>YAt(e,t*2),CPe=({values:e},t)=>KAt(e,t*2),sIt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return xPe(e,t);case Wt.MILLISECOND:return SPe(e,t);case Wt.MICROSECOND:return TPe(e,t);case Wt.NANOSECOND:return CPe(e,t)}},APe=({values:e},t)=>e[t],IPe=({values:e},t)=>e[t],RPe=({values:e},t)=>e[t],kPe=({values:e},t)=>e[t],oIt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return APe(e,t);case Wt.MILLISECOND:return IPe(e,t);case Wt.MICROSECOND:return RPe(e,t);case Wt.NANOSECOND:return kPe(e,t)}},aIt=({values:e,stride:t},n)=>JJ.decimal(e.subarray(t*n,t*(n+1))),lIt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,l=i[0].slice(s,o-s);return new Cr([l])},uIt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new l4(o.slice(i,s-i))},cIt=(e,t)=>new CZ(e,t),dIt=(e,t)=>e.type.mode===yl.Dense?PPe(e,t):NPe(e,t),PPe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return fu.visit(r,e.valueOffsets[t])},NPe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return fu.visit(r,t)},fIt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},hIt=(e,t)=>e.type.unit===rd.DAY_TIME?OPe(e,t):DPe(e,t),OPe=({values:e},t)=>e.subarray(2*t,2*(t+1)),DPe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},MPe=({values:e},t)=>e[t],$Pe=({values:e},t)=>e[t],LPe=({values:e},t)=>e[t],FPe=({values:e},t)=>e[t],pIt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return MPe(e,t);case Wt.MILLISECOND:return $Pe(e,t);case Wt.MICROSECOND:return LPe(e,t);case Wt.NANOSECOND:return FPe(e,t)}},mIt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new Cr([s])};Zt.prototype.visitNull=un(JAt);Zt.prototype.visitBool=un(ZAt);Zt.prototype.visitInt=un(nIt);Zt.prototype.visitInt8=un(lv);Zt.prototype.visitInt16=un(lv);Zt.prototype.visitInt32=un(lv);Zt.prototype.visitInt64=un(_Pe);Zt.prototype.visitUint8=un(lv);Zt.prototype.visitUint16=un(lv);Zt.prototype.visitUint32=un(lv);Zt.prototype.visitUint64=un(_Pe);Zt.prototype.visitFloat=un(rIt);Zt.prototype.visitFloat16=un(eIt);Zt.prototype.visitFloat32=un(lv);Zt.prototype.visitFloat64=un(lv);Zt.prototype.visitUtf8=un(EPe);Zt.prototype.visitLargeUtf8=un(EPe);Zt.prototype.visitBinary=un(wPe);Zt.prototype.visitLargeBinary=un(wPe);Zt.prototype.visitFixedSizeBinary=un(tIt);Zt.prototype.visitDate=un(iIt);Zt.prototype.visitDateDay=un(vPe);Zt.prototype.visitDateMillisecond=un(bPe);Zt.prototype.visitTimestamp=un(sIt);Zt.prototype.visitTimestampSecond=un(xPe);Zt.prototype.visitTimestampMillisecond=un(SPe);Zt.prototype.visitTimestampMicrosecond=un(TPe);Zt.prototype.visitTimestampNanosecond=un(CPe);Zt.prototype.visitTime=un(oIt);Zt.prototype.visitTimeSecond=un(APe);Zt.prototype.visitTimeMillisecond=un(IPe);Zt.prototype.visitTimeMicrosecond=un(RPe);Zt.prototype.visitTimeNanosecond=un(kPe);Zt.prototype.visitDecimal=un(aIt);Zt.prototype.visitList=un(lIt);Zt.prototype.visitStruct=un(cIt);Zt.prototype.visitUnion=un(dIt);Zt.prototype.visitDenseUnion=un(PPe);Zt.prototype.visitSparseUnion=un(NPe);Zt.prototype.visitDictionary=un(fIt);Zt.prototype.visitInterval=un(hIt);Zt.prototype.visitIntervalDayTime=un(OPe);Zt.prototype.visitIntervalYearMonth=un(DPe);Zt.prototype.visitDuration=un(pIt);Zt.prototype.visitDurationSecond=un(MPe);Zt.prototype.visitDurationMillisecond=un($Pe);Zt.prototype.visitDurationMicrosecond=un(LPe);Zt.prototype.visitDurationNanosecond=un(FPe);Zt.prototype.visitFixedSizeList=un(mIt);Zt.prototype.visitMap=un(uIt);const fu=new Zt,Gd=Symbol.for("keys"),gE=Symbol.for("vals");class l4{constructor(t){return this[Gd]=new Cr([t.children[0]]).memoize(),this[gE]=t.children[1],new Proxy(this,new yIt)}[Symbol.iterator](){return new gIt(this[Gd],this[gE])}get size(){return this[Gd].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Gd],n=this[gE],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=fu.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${mb(t)}: ${mb(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class gIt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),fu.visit(this.vals,t)]})}}class yIt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Gd].toArray().map(String)}has(t,n){return t[Gd].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Gd].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Gd].indexOf(n);if(r!==-1){const i=fu.visit(Reflect.get(t,gE),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Gd].indexOf(n);return i!==-1?(id.visit(Reflect.get(t,gE),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(l4.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Gd]:{writable:!0,enumerable:!1,configurable:!1,value:null},[gE]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Qhe;function jPe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Qhe=s,s=o,o=Qhe),o>i&&(o=i),r?r(e,s,o):[s,o]}const Jhe=e=>e!==e;function NS(e){if(typeof e!=="object"||e===null)return Jhe(e)?Jhe:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?dAt(e,n):!1:e instanceof Map?bIt(e):Array.isArray(e)?vIt(e):e instanceof Cr?_It(e):wIt(e,!0)}function vIt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=NS(e[n]);return u4(t)}function bIt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=NS(r);return u4(n)}function _It(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=NS(e.get(n));return u4(t)}function wIt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=NS(e[n[i]]);return u4(r,n)}function u4(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return EIt(e,n);case Map:return Zhe(e,n,n.keys());case l4:case CZ:case Object:case void 0:return Zhe(e,n,t||Object.keys(n))}return n instanceof Cr?xIt(e,n):!1}}function EIt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function xIt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Zhe(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let l=s.next(),u=r.next(),c=i.next();for(;o<a&&!u.done&&!c.done&&!l.done&&!(u.value!==c.value||!e[o](l.value));++o,u=r.next(),c=i.next(),l=s.next());return o===a&&u.done&&c.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function BPe(e,t,n,r){return(n&1<<r)!==0}function SIt(e,t,n,r){return(n&1<<r)>>r}function d3(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):zPe(new IZ(n,e,t,null,BPe)).subarray(0,r)),i}return n}function zPe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class IZ{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function EH(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new IZ(e,t,n-t,e,SIt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return EH(e,t,i)+EH(e,r,n)+TIt(e,i>>3,r-i>>3)}function TIt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=f9(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=f9(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=f9(s.getUint8(i)),i+=1;return r}function f9(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const CIt=-1;class Pr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return xn.isSparseUnion(t)?this.children.some(n=>n.nullable):xn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(xn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=CIt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-EH(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof Pr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=fh(t),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l)))}getValid(t){const{type:n}=this;if(xn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===yl.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(xn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===yl.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,l=o+t,u=1<<l%8,c=l>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(d3(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const d=s[c];r=(d&u)!==0,n?s[c]=d|u:s[c]=d&~u}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Pr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===oe.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(d3(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Zp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Zp.TYPE])&&(o[Zp.TYPE]=s.subarray(t,t+n)),(s=o[Zp.OFFSET])&&(o[Zp.OFFSET]=s.subarray(t,t+n+1))||(s=o[Zp.DATA])&&(o[Zp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Pr.prototype.children=Object.freeze([]);class oA extends zn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Pr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=Bs(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=Bs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=Bs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.data),s=hr(t.nullBitmap),o=KT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,l,[o,i,s])}visitLargeUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.data),s=hr(t.nullBitmap),o=jhe(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,l,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.data),s=hr(t.nullBitmap),o=KT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,l,[o,i,s])}visitLargeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.data),s=hr(t.nullBitmap),o=jhe(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,l,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=Bs(n.ArrayType,t.data),{["length"]:o=s.length/fh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=Bs(n.ArrayType,t.data),{["length"]:o=s.length/fh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=Bs(n.ArrayType,t.data),{["length"]:o=s.length/fh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=Bs(n.ArrayType,t.data),{["length"]:o=s.length/fh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=Bs(n.ArrayType,t.data),{["length"]:o=s.length/fh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=hr(t.nullBitmap),o=KT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,l,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=hr(t.nullBitmap),{length:o=i.reduce((l,{length:u})=>Math.max(l,u),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Bs(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(xn.isSparseUnion(n))return new Pr(n,r,o,a,[void 0,void 0,void 0,s],i);const l=KT(t.valueOffsets);return new Pr(n,r,o,a,[l,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=Bs(n.indices.ArrayType,t.data),{["dictionary"]:o=new Cr([new oA().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,l,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=Bs(n.ArrayType,t.data),{["length"]:o=s.length/fh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=Bs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new oA().visit({type:n.valueType})}=t,s=hr(t.nullBitmap),{["length"]:o=i.length/fh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Pr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new oA().visit({type:n.childType})}=t,s=hr(t.nullBitmap),o=KT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Pr(n,r,a,l,[o,void 0,s],[i])}}const AIt=new oA;function Ea(e){return AIt.visit(e)}class epe{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function IIt(e){return e.some(t=>t.nullable)}function UPe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function VPe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function HPe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],l=t[s],{length:u}=a;if(l>=r)break;if(n>=l+u)continue;if(l>=n&&l+u<=r){i.push(a);continue}const c=Math.max(0,n-l),d=Math.min(r-l,u);i.push(a.slice(c,d-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function RZ(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function kZ(e,t){return e.getValid(t)}function f3(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return RZ(r,this._offsets,n,t)}}function qPe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=RZ(s,this._offsets,r,n);return t=void 0,o}}function WPe(e){let t;function n(r,i,s){let o=s,a=0,l=0;for(let u=i-1,c=r.length;++u<c;){const d=r[u];if(~(a=e(d,t,o)))return l+a;o=0,l+=d.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):RZ(s,this._offsets,i,n);return t=void 0,o}}class en extends zn{}function RIt(e,t){return t===null&&e.length>0?0:-1}function kIt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new IZ(n,e.offset+(t||0),e.length,n,BPe)){if(!i)return r;++r}return-1}function mn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case oe.Union:break;case oe.Dictionary:break;default:return kIt(e,n)}const r=fu.getVisitFn(e),i=NS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function GPe(e,t,n){const r=fu.getVisitFn(e),i=NS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}en.prototype.visitNull=RIt;en.prototype.visitBool=mn;en.prototype.visitInt=mn;en.prototype.visitInt8=mn;en.prototype.visitInt16=mn;en.prototype.visitInt32=mn;en.prototype.visitInt64=mn;en.prototype.visitUint8=mn;en.prototype.visitUint16=mn;en.prototype.visitUint32=mn;en.prototype.visitUint64=mn;en.prototype.visitFloat=mn;en.prototype.visitFloat16=mn;en.prototype.visitFloat32=mn;en.prototype.visitFloat64=mn;en.prototype.visitUtf8=mn;en.prototype.visitLargeUtf8=mn;en.prototype.visitBinary=mn;en.prototype.visitLargeBinary=mn;en.prototype.visitFixedSizeBinary=mn;en.prototype.visitDate=mn;en.prototype.visitDateDay=mn;en.prototype.visitDateMillisecond=mn;en.prototype.visitTimestamp=mn;en.prototype.visitTimestampSecond=mn;en.prototype.visitTimestampMillisecond=mn;en.prototype.visitTimestampMicrosecond=mn;en.prototype.visitTimestampNanosecond=mn;en.prototype.visitTime=mn;en.prototype.visitTimeSecond=mn;en.prototype.visitTimeMillisecond=mn;en.prototype.visitTimeMicrosecond=mn;en.prototype.visitTimeNanosecond=mn;en.prototype.visitDecimal=mn;en.prototype.visitList=mn;en.prototype.visitStruct=mn;en.prototype.visitUnion=mn;en.prototype.visitDenseUnion=GPe;en.prototype.visitSparseUnion=GPe;en.prototype.visitDictionary=mn;en.prototype.visitInterval=mn;en.prototype.visitIntervalDayTime=mn;en.prototype.visitIntervalYearMonth=mn;en.prototype.visitDuration=mn;en.prototype.visitDurationSecond=mn;en.prototype.visitDurationMillisecond=mn;en.prototype.visitDurationMicrosecond=mn;en.prototype.visitDurationNanosecond=mn;en.prototype.visitFixedSizeList=mn;en.prototype.visitMap=mn;const h3=new en;class tn extends zn{}function cn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===oe.Timestamp||t instanceof vl&&t.bitWidth!==64||t instanceof Zm&&t.bitWidth!==64||t instanceof my&&t.precision!==Zs.HALF))return new epe(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new epe(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new PIt(o)})}class PIt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}tn.prototype.visitNull=cn;tn.prototype.visitBool=cn;tn.prototype.visitInt=cn;tn.prototype.visitInt8=cn;tn.prototype.visitInt16=cn;tn.prototype.visitInt32=cn;tn.prototype.visitInt64=cn;tn.prototype.visitUint8=cn;tn.prototype.visitUint16=cn;tn.prototype.visitUint32=cn;tn.prototype.visitUint64=cn;tn.prototype.visitFloat=cn;tn.prototype.visitFloat16=cn;tn.prototype.visitFloat32=cn;tn.prototype.visitFloat64=cn;tn.prototype.visitUtf8=cn;tn.prototype.visitLargeUtf8=cn;tn.prototype.visitBinary=cn;tn.prototype.visitLargeBinary=cn;tn.prototype.visitFixedSizeBinary=cn;tn.prototype.visitDate=cn;tn.prototype.visitDateDay=cn;tn.prototype.visitDateMillisecond=cn;tn.prototype.visitTimestamp=cn;tn.prototype.visitTimestampSecond=cn;tn.prototype.visitTimestampMillisecond=cn;tn.prototype.visitTimestampMicrosecond=cn;tn.prototype.visitTimestampNanosecond=cn;tn.prototype.visitTime=cn;tn.prototype.visitTimeSecond=cn;tn.prototype.visitTimeMillisecond=cn;tn.prototype.visitTimeMicrosecond=cn;tn.prototype.visitTimeNanosecond=cn;tn.prototype.visitDecimal=cn;tn.prototype.visitList=cn;tn.prototype.visitStruct=cn;tn.prototype.visitUnion=cn;tn.prototype.visitDenseUnion=cn;tn.prototype.visitSparseUnion=cn;tn.prototype.visitDictionary=cn;tn.prototype.visitInterval=cn;tn.prototype.visitIntervalDayTime=cn;tn.prototype.visitIntervalYearMonth=cn;tn.prototype.visitDuration=cn;tn.prototype.visitDurationSecond=cn;tn.prototype.visitDurationMillisecond=cn;tn.prototype.visitDurationMicrosecond=cn;tn.prototype.visitDurationNanosecond=cn;tn.prototype.visitFixedSizeList=cn;tn.prototype.visitMap=cn;const PZ=new tn;var YPe;const KPe={},XPe={};class Cr{constructor(t){var n,r,i;const s=t[0]instanceof Cr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Pr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:u}=KPe[o.typeId],c=s[0];this.isValid=d=>kZ(c,d),this.get=d=>a(c,d),this.set=(d,f)=>l(c,d,f),this.indexOf=d=>u(c,d),this._offsets=[0,c.length];break}default:Object.setPrototypeOf(this,XPe[o.typeId]),this._offsets=VPe(s);break}this.data=s,this.type=o,this.stride=fh(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullable(){return IIt(this.data)}get nullCount(){return UPe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${oe[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}[Symbol.iterator](){return PZ.visit(this)}concat(...t){return new Cr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new Cr(jPe(this,t,n,({data:r,_offsets:i},s,o)=>HPe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case oe.Int:case oe.Float:case oe.Decimal:case oe.Time:case oe.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new Cr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return xn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(xn.isDictionary(this.type)){const t=new p3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Cr(n)}return new p3(this)}unmemoize(){if(xn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Cr(n)}return this}}YPe=Symbol.toStringTag;Cr[YPe]=(e=>{e.type=xn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(oe).map(n=>oe[n]).filter(n=>typeof n=="number"&&n!==oe.NONE);for(const n of t){const r=fu.getVisitFnByTypeId(n),i=id.getVisitFnByTypeId(n),s=h3.getVisitFnByTypeId(n);KPe[n]={get:r,set:i,indexOf:s},XPe[n]=Object.create(e,{isValid:{value:f3(kZ)},get:{value:f3(fu.getVisitFnByTypeId(n))},set:{value:qPe(id.getVisitFnByTypeId(n))},indexOf:{value:WPe(h3.getVisitFnByTypeId(n))}})}return"Vector"})(Cr.prototype);class p3 extends Cr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new p3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Cr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function NIt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${OIt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function OIt(e){return typeof e!="bigint"?mb(e):`${mb(e)}n`}function h9(e,t){const n=Math.ceil(e)*t-1;return(n-n%64+64||64)/t}function tpe(e,t=0){return e.length>=t?e.subarray(0,t):yH(new e.constructor(t),e,0)}class hk{constructor(t,n=0,r=1){this.length=Math.ceil(n/r),this.buffer=new t(this.length),this.stride=r,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?h9(r*1,this.BYTES_PER_ELEMENT):h9(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=h9(t*this.stride,this.BYTES_PER_ELEMENT);const n=tpe(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(t){return this.buffer=tpe(this.buffer,t)}}class pk extends hk{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class QPe extends pk{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class JPe extends pk{constructor(t){super(t.OffsetArrayType,1,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&r>=0&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0),super.flush(t+1)}}let wu=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=fh(t),this._nulls=new QPe,n&&n.length>0&&(this._isValid=NIt(n))}toVector(){return new Cr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,l)=>a+l.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:l,_offsets:u,_values:c,_nulls:d}=this;(n=l==null?void 0:l.flush(o))?i=u==null?void 0:u.flush(o):(i=u==null?void 0:u.flush(o))?t=c==null?void 0:c.flush(u.last()):t=c==null?void 0:c.flush(o),a>0&&(r=d==null?void 0:d.flush(o));const f=this.children.map(h=>h.flush());return this.clear(),Ea({type:s,length:o,nullCount:a,children:f,child:f[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};wu.prototype.length=1;wu.prototype.stride=1;wu.prototype.children=null;wu.prototype.finished=!1;wu.prototype.nullValues=null;wu.prototype._isValid=()=>!0;class vg extends wu{constructor(t){super(t),this._values=new pk(this.ArrayType,0,this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class OS extends wu{constructor(t){super(t),this._pendingLength=0,this._offsets=new JPe(t.type)}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof l4?n[Gd].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class xH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}class ku{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new ku).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Br),(n||new ku).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qs.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new ch).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new xH).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new xH).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Vs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,qs.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class jr{constructor(t=[],n,r,i=qs.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=TH(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new jr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new jr(n,this.metadata)}assign(...t){const n=t[0]instanceof jr?t[0]:Array.isArray(t[0])?new jr(t[0]):new jr(t),r=[...this.fields],i=FN(FN(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(u=>u.name===a.name);return~l?(r[l]=a.clone({metadata:FN(FN(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=TH(s,new Map);return new jr([...r,...s],i,new Map([...this.dictionaries,...o]))}}jr.prototype.fields=null;jr.prototype.metadata=null;jr.prototype.dictionaries=null;let Jr=class SH{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new SH(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],SH.new(n,r,i,s)}};Jr.prototype.type=null;Jr.prototype.name=null;Jr.prototype.nullable=null;Jr.prototype.metadata=null;function FN(e,t){return new Map([...e||new Map,...t||new Map])}function TH(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(xn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&TH(s.children,t)}return t}var DIt=Cke,MIt=t3;class CH{static decode(t){t=new MIt(hr(t));const n=ku.getRootAsFooter(t),r=jr.decode(n.schema(),new Map,n.version());return new $It(r,n)}static encode(t){const n=new DIt,r=jr.encode(n,t.schema);ku.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())yy.encode(n,o);const i=n.endVector();ku.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())yy.encode(n,o);const s=n.endVector();return ku.startFooter(n),ku.addSchema(n,r),ku.addVersion(n,qs.V5),ku.addRecordBatches(n,i),ku.addDictionaries(n,s),ku.finishFooterBuffer(n,ku.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=qs.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class $It extends CH{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return yy.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return yy.decode(n)}return null}}class yy{static decode(t){return new yy(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return xH.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Jo(r),this.bodyLength=Jo(n)}}const jN=Object.freeze({done:!0,value:void 0});class ZPe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class LIt extends ZPe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return sm(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(jN);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Bhe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Bhe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return sm(this,void 0,void 0,function*(){return yield this.abort(t),jN})}return(t){return sm(this,void 0,void 0,function*(){return yield this.close(),jN})}read(t){return sm(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return sm(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(jN)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class p9 extends LIt{write(t){if((t=hr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?gH(this.toUint8Array(!0)):this.toUint8Array(!1).then(gH)}toUint8Array(t=!1){return t?ip(this._values)[0]:sm(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var l=!0,u=O2(this),c;c=yield u.next(),n=c.done,!n;l=!0){s=c.value,l=!1;const d=s;o.push(d),a+=d.byteLength}}catch(d){r={error:d}}finally{try{!l&&!n&&(i=u.return)&&(yield i.call(u))}finally{if(r)throw r.error}}return ip(o,a)[0]})}}class eNe extends OS{constructor(t){super(t),this._values=new hk(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,hr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const l=a.length;i.set(a,s),r.set(o,l),s+=l}}}class tNe extends OS{constructor(t){super(t),this._values=new hk(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,hr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,BigInt(0));else{const l=a.length;i.set(a,s),r.set(o,BigInt(l)),s+=l}}}class FIt extends wu{constructor(t){super(t),this._values=new QPe}setValue(t,n){this._values.set(t,+n)}}class c4 extends vg{}c4.prototype._setValue=lPe;class nNe extends c4{}nNe.prototype._setValue=cZ;class rNe extends c4{}rNe.prototype._setValue=dZ;class iNe extends vg{}iNe.prototype._setValue=dPe;class jIt extends wu{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new gy(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=m3({type:this.type.indices,nullValues:n}),this.dictionary=m3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class sNe extends vg{}sNe.prototype._setValue=sPe;class BIt extends wu{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new mx(this.type.listSize,new Jr(n,t.type,!0)),r}}class d4 extends vg{setValue(t,n){this._values.set(t,n)}}class zIt extends d4{setValue(t,n){super.setValue(t,nPe(n))}}class UIt extends d4{}class VIt extends d4{}class f4 extends vg{}f4.prototype._setValue=pPe;class oNe extends f4{}oNe.prototype._setValue=_Z;class aNe extends f4{}aNe.prototype._setValue=wZ;class DS extends vg{}DS.prototype._setValue=mPe;class lNe extends DS{}lNe.prototype._setValue=EZ;class uNe extends DS{}uNe.prototype._setValue=xZ;class cNe extends DS{}cNe.prototype._setValue=SZ;class dNe extends DS{}dNe.prototype._setValue=TZ;class bg extends vg{setValue(t,n){this._values.set(t,n)}}class HIt extends bg{}class qIt extends bg{}class WIt extends bg{}class GIt extends bg{}class YIt extends bg{}class KIt extends bg{}class XIt extends bg{}class QIt extends bg{}class JIt extends OS{constructor(t){super(t),this._offsets=new JPe(t.type)}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new px(new Jr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,l=n.set(i,a).buffer[i];for(let u=-1;++u<a;)r.set(l+u,o[u])}}}class ZIt extends OS{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new AI(new Jr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const l of s.entries())if(r.set(o,l),++o>=a)break}}}class eRt extends wu{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class tRt extends wu{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new Aa([...this.type.children,new Jr(n,t.type,!0)]),r}}class MS extends vg{}MS.prototype._setValue=uPe;class fNe extends MS{}fNe.prototype._setValue=fZ;class hNe extends MS{}hNe.prototype._setValue=hZ;class pNe extends MS{}pNe.prototype._setValue=pZ;class mNe extends MS{}mNe.prototype._setValue=mZ;class $S extends vg{}$S.prototype._setValue=cPe;class gNe extends $S{}gNe.prototype._setValue=gZ;class yNe extends $S{}yNe.prototype._setValue=yZ;class vNe extends $S{}vNe.prototype._setValue=vZ;class bNe extends $S{}bNe.prototype._setValue=bZ;class NZ extends wu{constructor(t){super(t),this._typeIds=new pk(Int8Array,0,1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Jr(n,t.type)];return this.type=new CI(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class nRt extends NZ{}class rRt extends NZ{constructor(t){super(t),this._offsets=new pk(Int32Array)}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class _Ne extends OS{constructor(t){super(t),this._values=new hk(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,s4(n))}_flushPending(t,n){}}_Ne.prototype._flushPending=eNe.prototype._flushPending;class wNe extends OS{constructor(t){super(t),this._values=new hk(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,s4(n))}_flushPending(t,n){}}wNe.prototype._flushPending=tNe.prototype._flushPending;class iRt extends zn{visitNull(){return eRt}visitBool(){return FIt}visitInt(){return bg}visitInt8(){return HIt}visitInt16(){return qIt}visitInt32(){return WIt}visitInt64(){return GIt}visitUint8(){return YIt}visitUint16(){return KIt}visitUint32(){return XIt}visitUint64(){return QIt}visitFloat(){return d4}visitFloat16(){return zIt}visitFloat32(){return UIt}visitFloat64(){return VIt}visitUtf8(){return _Ne}visitLargeUtf8(){return wNe}visitBinary(){return eNe}visitLargeBinary(){return tNe}visitFixedSizeBinary(){return sNe}visitDate(){return c4}visitDateDay(){return nNe}visitDateMillisecond(){return rNe}visitTimestamp(){return MS}visitTimestampSecond(){return fNe}visitTimestampMillisecond(){return hNe}visitTimestampMicrosecond(){return pNe}visitTimestampNanosecond(){return mNe}visitTime(){return $S}visitTimeSecond(){return gNe}visitTimeMillisecond(){return yNe}visitTimeMicrosecond(){return vNe}visitTimeNanosecond(){return bNe}visitDecimal(){return iNe}visitList(){return JIt}visitStruct(){return tRt}visitUnion(){return NZ}visitDenseUnion(){return rRt}visitSparseUnion(){return nRt}visitDictionary(){return jIt}visitInterval(){return f4}visitIntervalDayTime(){return oNe}visitIntervalYearMonth(){return aNe}visitDuration(){return DS}visitDurationSecond(){return lNe}visitDurationMillisecond(){return uNe}visitDurationMicrosecond(){return cNe}visitDurationNanosecond(){return dNe}visitFixedSizeList(){return BIt}visitMap(){return ZIt}}const sRt=new iRt;class nn extends zn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function Sl(e,t){return t instanceof e.constructor}function i_(e,t){return e===t||Sl(e,t)}function _g(e,t){return e===t||Sl(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function h4(e,t){return e===t||Sl(e,t)&&e.precision===t.precision}function oRt(e,t){return e===t||Sl(e,t)&&e.byteWidth===t.byteWidth}function OZ(e,t){return e===t||Sl(e,t)&&e.unit===t.unit}function mk(e,t){return e===t||Sl(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function gk(e,t){return e===t||Sl(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function aRt(e,t){return e===t||Sl(e,t)&&e.children.length===t.children.length&&vy.compareManyFields(e.children,t.children)}function lRt(e,t){return e===t||Sl(e,t)&&e.children.length===t.children.length&&vy.compareManyFields(e.children,t.children)}function DZ(e,t){return e===t||Sl(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&vy.compareManyFields(e.children,t.children)}function uRt(e,t){return e===t||Sl(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&vy.visit(e.indices,t.indices)&&vy.visit(e.dictionary,t.dictionary)}function MZ(e,t){return e===t||Sl(e,t)&&e.unit===t.unit}function yk(e,t){return e===t||Sl(e,t)&&e.unit===t.unit}function cRt(e,t){return e===t||Sl(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&vy.compareManyFields(e.children,t.children)}function dRt(e,t){return e===t||Sl(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&vy.compareManyFields(e.children,t.children)}nn.prototype.visitNull=i_;nn.prototype.visitBool=i_;nn.prototype.visitInt=_g;nn.prototype.visitInt8=_g;nn.prototype.visitInt16=_g;nn.prototype.visitInt32=_g;nn.prototype.visitInt64=_g;nn.prototype.visitUint8=_g;nn.prototype.visitUint16=_g;nn.prototype.visitUint32=_g;nn.prototype.visitUint64=_g;nn.prototype.visitFloat=h4;nn.prototype.visitFloat16=h4;nn.prototype.visitFloat32=h4;nn.prototype.visitFloat64=h4;nn.prototype.visitUtf8=i_;nn.prototype.visitLargeUtf8=i_;nn.prototype.visitBinary=i_;nn.prototype.visitLargeBinary=i_;nn.prototype.visitFixedSizeBinary=oRt;nn.prototype.visitDate=OZ;nn.prototype.visitDateDay=OZ;nn.prototype.visitDateMillisecond=OZ;nn.prototype.visitTimestamp=mk;nn.prototype.visitTimestampSecond=mk;nn.prototype.visitTimestampMillisecond=mk;nn.prototype.visitTimestampMicrosecond=mk;nn.prototype.visitTimestampNanosecond=mk;nn.prototype.visitTime=gk;nn.prototype.visitTimeSecond=gk;nn.prototype.visitTimeMillisecond=gk;nn.prototype.visitTimeMicrosecond=gk;nn.prototype.visitTimeNanosecond=gk;nn.prototype.visitDecimal=i_;nn.prototype.visitList=aRt;nn.prototype.visitStruct=lRt;nn.prototype.visitUnion=DZ;nn.prototype.visitDenseUnion=DZ;nn.prototype.visitSparseUnion=DZ;nn.prototype.visitDictionary=uRt;nn.prototype.visitInterval=MZ;nn.prototype.visitIntervalDayTime=MZ;nn.prototype.visitIntervalYearMonth=MZ;nn.prototype.visitDuration=yk;nn.prototype.visitDurationSecond=yk;nn.prototype.visitDurationMillisecond=yk;nn.prototype.visitDurationMicrosecond=yk;nn.prototype.visitDurationNanosecond=yk;nn.prototype.visitFixedSizeList=cRt;nn.prototype.visitMap=dRt;const vy=new nn;function AH(e,t){return vy.compareSchemas(e,t)}function m3(e){const t=e.type,n=new(sRt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:l}=a,u=s(a,o);n.children.push(m3(Object.assign(Object.assign({},u),{type:l})))}}return n}function m9(e,t){return fRt(e,t.map(n=>n.data.concat()))}function fRt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((d,f)=>Math.max(d,f.length),0)};let s=0,o=0,a=-1;const l=t.length;let u,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)c[a]=u=t[a].shift(),o=Math.min(o,u?u.length:o);Number.isFinite(o)&&(c=hRt(n,o,c,t,i),o>0&&(r[s++]=Ea({type:new Aa(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(d=>new $u(e,d))]}function hRt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const u=n[a],c=u==null?void 0:u.length;if(c>=t)c===t?n[a]=u:(n[a]=u.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(u.slice(t,c-t))));else{const d=e[a];e[a]=d.clone({nullable:!0}),n[a]=(s=u==null?void 0:u._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Ea({type:d.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var ENe;class Ul{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new jr([]),this._offsets=[0],this;let i,s;t[0]instanceof jr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=l=>{if(l){if(l instanceof $u)return[l];if(l instanceof Ul)return l.batches;if(l instanceof Pr){if(l.type instanceof Aa)return[new $u(new jr(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(u=>o(u));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(u=>o(u));if(typeof l=="object"){const u=Object.keys(l),c=u.map(h=>new Cr([l[h]])),d=i??new jr(u.map((h,p)=>new Jr(String(h),c[p].type,c[p].nullable))),[,f]=m9(d,c);return f.length===0?[new $u(l)]:f}}}return[]},a=t.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new jr([]),!(i instanceof jr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof $u))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!AH(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??VPe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=UPe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}[Symbol.iterator](){return this.batches.length>0?PZ.visit(new Cr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Ul(n,r.map(i=>new $u(n,i)))}slice(t,n){const r=this.schema;[t,n]=jPe({length:this.numRows},t,n);const i=HPe(this.data,this._offsets,t,n);return new Ul(r,i.map(s=>new $u(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Ea({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new Cr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new Cr([Ea({type:new Jm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((l,u)=>this.getChildAt(u));[s[t],a[t]]=[o,n],[r,i]=m9(r,a)}return new Ul(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Ul(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,l,u)=>{const[c,d]=a,f=n.findIndex(h=>h.name===l.name);return~f?d[f]=u:c.push(u),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):t.getChildAt(l)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Ul(...m9(s,o))}}ENe=Symbol.toStringTag;Ul[ENe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=f3(kZ),e.get=f3(fu.getVisitFn(oe.Struct)),e.set=qPe(id.getVisitFn(oe.Struct)),e.indexOf=WPe(h3.getVisitFn(oe.Struct)),"Table"))(Ul.prototype);var xNe;let $u=class ZC{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof jr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ea({nullCount:0,type:new Aa(this.schema.fields),children:this.schema.fields.map(n=>Ea({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Pr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=npe(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,u,c)=>(l.children[c]=n[u],l.length=Math.max(l.length,n[u].length),l.fields[c]=Jr.new({name:u,type:n[u].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new jr(r),a=Ea({type:new Aa(r),length:s,children:i,nullCount:0});[this.schema,this.data]=npe(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=SNe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return fu.visit(this.data,t)}set(t,n){return id.visit(this.data,t,n)}indexOf(t,n){return h3.visit(this.data,t,n)}[Symbol.iterator](){return PZ.visit(new Cr([this.data]))}toArray(){return[...this]}concat(...t){return new Ul(this.schema,[this,...t])}slice(t,n){const[r]=new Cr([this.data]).slice(t,n).data;return new ZC(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Cr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new Cr([Ea({type:new Jm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new jr(s,new Map(this.schema.metadata)),i=Ea({type:new Aa(s),children:o})}return new ZC(r,i)}select(t){const n=this.schema.select(t),r=new Aa(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new ZC(n,Ea({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Ea({type:new Aa(n.fields),length:this.numRows,children:r});return new ZC(n,i)}};xNe=Symbol.toStringTag;$u[xNe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))($u.prototype);function npe(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,l]of e.fields.entries()){const u=t[a];(!u||u.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=u==null?void 0:u._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Ea({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Ea({type:new Aa(i),length:n,children:s})]}function SNe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],l=t[s];for(const u of[l,...((i=l==null?void 0:l.dictionary)===null||i===void 0?void 0:i.data)||[]])SNe(a.children,u==null?void 0:u.children,n);if(xn.isDictionary(a)){const{id:u}=a;if(!n.has(u))l!=null&&l.dictionary&&n.set(u,l.dictionary);else if(n.get(u)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class pRt extends $u{constructor(t){const n=t.fields.map(i=>Ea({type:i.type})),r=Ea({type:new Aa(t.fields),nullCount:0,children:n});super(t,r)}}let jg=class rh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new rh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Br),(n||new rh).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qs.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Os.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Vs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,qs.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,Os.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return rh.startMessage(t),rh.addVersion(t,n),rh.addHeaderType(t,r),rh.addHeader(t,i),rh.addBodyLength(t,s),rh.addCustomMetadata(t,o),rh.endMessage(t)}};class mRt extends zn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Yhe.startNull(n),Yhe.endNull(n)}visitInt(t,n){return Mu.startInt(n),Mu.addBitWidth(n,t.bitWidth),Mu.addIsSigned(n,t.isSigned),Mu.endInt(n)}visitFloat(t,n){return Th.startFloatingPoint(n),Th.addPrecision(n,t.precision),Th.endFloatingPoint(n)}visitBinary(t,n){return Vhe.startBinary(n),Vhe.endBinary(n)}visitLargeBinary(t,n){return qhe.startLargeBinary(n),qhe.endLargeBinary(n)}visitBool(t,n){return Hhe.startBool(n),Hhe.endBool(n)}visitUtf8(t,n){return Khe.startUtf8(n),Khe.endUtf8(n)}visitLargeUtf8(t,n){return Whe.startLargeUtf8(n),Whe.endLargeUtf8(n)}visitDecimal(t,n){return hw.startDecimal(n),hw.addScale(n,t.scale),hw.addPrecision(n,t.precision),hw.addBitWidth(n,t.bitWidth),hw.endDecimal(n)}visitDate(t,n){return _D.startDate(n),_D.addUnit(n,t.unit),_D.endDate(n)}visitTime(t,n){return XC.startTime(n),XC.addUnit(n,t.unit),XC.addBitWidth(n,t.bitWidth),XC.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return QC.startTimestamp(n),QC.addUnit(n,t.unit),r!==void 0&&QC.addTimezone(n,r),QC.endTimestamp(n)}visitInterval(t,n){return Ch.startInterval(n),Ch.addUnit(n,t.unit),Ch.endInterval(n)}visitDuration(t,n){return wD.startDuration(n),wD.addUnit(n,t.unit),wD.endDuration(n)}visitList(t,n){return Ghe.startList(n),Ghe.endList(n)}visitStruct(t,n){return O1.startStruct_(n),O1.endStruct_(n)}visitUnion(t,n){e1.startTypeIdsVector(n,t.typeIds.length);const r=e1.createTypeIdsVector(n,t.typeIds);return e1.startUnion(n),e1.addMode(n,t.mode),e1.addTypeIds(n,r),e1.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return um.startDictionaryEncoding(n),um.addId(n,BigInt(t.id)),um.addIsOrdered(n,t.isOrdered),r!==void 0&&um.addIndexType(n,r),um.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return ED.startFixedSizeBinary(n),ED.addByteWidth(n,t.byteWidth),ED.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return xD.startFixedSizeList(n),xD.addListSize(n,t.listSize),xD.endFixedSizeList(n)}visitMap(t,n){return SD.startMap(n),SD.addKeysSorted(n,t.keysSorted),SD.endMap(n)}}const g9=new mRt;function gRt(e,t=new Map){return new jr(vRt(e,t),CD(e.metadata),t)}function TNe(e){return new rc(e.count,CNe(e.columns),ANe(e.columns))}function yRt(e){return new sp(TNe(e.data),e.id,e.isDelta)}function vRt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Jr.fromJSON(n,t))}function rpe(e,t){return(e.children||[]).filter(Boolean).map(n=>Jr.fromJSON(n,t))}function CNe(e){return(e||[]).reduce((t,n)=>[...t,new by(n.count,bRt(n.VALIDITY)),...CNe(n.children)],[])}function ANe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Nh(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Nh(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Nh(t.length,i.OFFSET.length)),i.DATA&&t.push(new Nh(t.length,i.DATA.length)),t=ANe(i.children,t)}return t}function bRt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function _Rt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=spe(e,rpe(e,t)),i=new Jr(e.name,o,e.nullable,CD(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?ipe(r):new py,a=new gy(t.get(n),r,n,s.isOrdered),i=new Jr(e.name,a,e.nullable,CD(e.metadata))):(r=(r=s.indexType)?ipe(r):new py,t.set(n,o=spe(e,rpe(e,t))),a=new gy(o,r,n,s.isOrdered),i=new Jr(e.name,a,e.nullable,CD(e.metadata))),i||null}function CD(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function ipe(e){return new vl(e.isSigned,e.bitWidth)}function spe(e,t){const n=e.type.name;switch(n){case"NONE":return new Jm;case"null":return new Jm;case"binary":return new SI;case"largebinary":return new s3;case"utf8":return new dx;case"largeutf8":return new o3;case"bool":return new TI;case"list":return new px((t||[])[0]);case"struct":return new Aa(t||[]);case"struct_":return new Aa(t||[])}switch(n){case"int":{const r=e.type;return new vl(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new my(Zs[r.precision])}case"decimal":{const r=e.type;return new a3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new fx(nd[r.unit])}case"time":{const r=e.type;return new Zm(Wt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new l3(Wt[r.unit],r.timezone)}case"interval":{const r=e.type;return new hx(rd[r.unit])}case"duration":{const r=e.type;return new u3(Wt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new CI(yl[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new c3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new mx(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new AI((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var wRt=Cke,ERt=t3;class Ah{static fromJSON(t,n){const r=new Ah(0,qs.V5,n);return r._createHeader=xRt(t,n),r}static decode(t){t=new ERt(hr(t));const n=jg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Ah(r,i,s);return o._createHeader=SRt(n,s),o}static encode(t){const n=new wRt;let r=-1;return t.isSchema()?r=jr.encode(n,t.header()):t.isRecordBatch()?r=rc.encode(n,t.header()):t.isDictionaryBatch()&&(r=sp.encode(n,t.header())),jg.startMessage(n),jg.addVersion(n,qs.V5),jg.addHeader(n,r),jg.addHeaderType(n,t.headerType),jg.addBodyLength(n,BigInt(t.bodyLength)),jg.finishMessageBuffer(n,jg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof jr)return new Ah(0,qs.V5,Os.Schema,t);if(t instanceof rc)return new Ah(n,qs.V5,Os.RecordBatch,t);if(t instanceof sp)return new Ah(n,qs.V5,Os.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Os.Schema}isRecordBatch(){return this.headerType===Os.RecordBatch}isDictionaryBatch(){return this.headerType===Os.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Jo(t)}}class rc{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Jo(t)}}class sp{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Jo(n)}}class Nh{constructor(t,n){this.offset=Jo(t),this.length=Jo(n)}}class by{constructor(t,n){this.length=Jo(t),this.nullCount=Jo(n)}}function xRt(e,t){return()=>{switch(t){case Os.Schema:return jr.fromJSON(e);case Os.RecordBatch:return rc.fromJSON(e);case Os.DictionaryBatch:return sp.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Os[t]}, type: ${t} }`)}}function SRt(e,t){return()=>{switch(t){case Os.Schema:return jr.decode(e.header(new ch),new Map,e.version());case Os.RecordBatch:return rc.decode(e.header(new Jp),e.version());case Os.DictionaryBatch:return sp.decode(e.header(new dw),e.version())}throw new Error(`Unrecognized Message type: { name: ${Os[t]}, type: ${t} }`)}}Jr.encode=MRt;Jr.decode=ORt;Jr.fromJSON=_Rt;jr.encode=DRt;jr.decode=TRt;jr.fromJSON=gRt;rc.encode=$Rt;rc.decode=CRt;rc.fromJSON=TNe;sp.encode=LRt;sp.decode=ARt;sp.fromJSON=yRt;by.encode=FRt;by.decode=RRt;Nh.encode=jRt;Nh.decode=IRt;function TRt(e,t=new Map,n=qs.V5){const r=NRt(e,t);return new jr(r,AD(e),t,n)}function CRt(e,t=qs.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new rc(e.length(),kRt(e),PRt(e,t))}function ARt(e,t=qs.V5){return new sp(rc.decode(e.data(),t),e.id(),e.isDelta())}function IRt(e){return new Nh(e.offset(),e.length())}function RRt(e){return new by(e.length(),e.nullCount())}function kRt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=by.decode(n));return t}function PRt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<qs.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Nh.decode(r));return n}function NRt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Jr.decode(r,t));return n}function ope(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Jr.decode(r,t));return n}function ORt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=lpe(e,ope(e,t)),r=new Jr(e.name(),i,e.nullable(),AD(e))):t.has(n=Jo(a.id()))?(s=(s=a.indexType())?ape(s):new py,o=new gy(t.get(n),s,n,a.isOrdered()),r=new Jr(e.name(),o,e.nullable(),AD(e))):(s=(s=a.indexType())?ape(s):new py,t.set(n,i=lpe(e,ope(e,t))),o=new gy(i,s,n,a.isOrdered()),r=new Jr(e.name(),o,e.nullable(),AD(e))),r||null}function AD(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function ape(e){return new vl(e.isSigned(),e.bitWidth())}function lpe(e,t){const n=e.typeType();switch(n){case mi.NONE:return new Jm;case mi.Null:return new Jm;case mi.Binary:return new SI;case mi.LargeBinary:return new s3;case mi.Utf8:return new dx;case mi.LargeUtf8:return new o3;case mi.Bool:return new TI;case mi.List:return new px((t||[])[0]);case mi.Struct_:return new Aa(t||[])}switch(n){case mi.Int:{const r=e.type(new Mu);return new vl(r.isSigned(),r.bitWidth())}case mi.FloatingPoint:{const r=e.type(new Th);return new my(r.precision())}case mi.Decimal:{const r=e.type(new hw);return new a3(r.scale(),r.precision(),r.bitWidth())}case mi.Date:{const r=e.type(new _D);return new fx(r.unit())}case mi.Time:{const r=e.type(new XC);return new Zm(r.unit(),r.bitWidth())}case mi.Timestamp:{const r=e.type(new QC);return new l3(r.unit(),r.timezone())}case mi.Interval:{const r=e.type(new Ch);return new hx(r.unit())}case mi.Duration:{const r=e.type(new wD);return new u3(r.unit())}case mi.Union:{const r=e.type(new e1);return new CI(r.mode(),r.typeIdsArray()||[],t||[])}case mi.FixedSizeBinary:{const r=e.type(new ED);return new c3(r.byteWidth())}case mi.FixedSizeList:{const r=e.type(new xD);return new mx(r.listSize(),(t||[])[0])}case mi.Map:{const r=e.type(new SD);return new AI((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${mi[n]}" (${n})`)}function DRt(e,t){const n=t.fields.map(s=>Jr.encode(e,s));ch.startFieldsVector(e,n.length);const r=ch.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?ch.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),l=e.createString(`${o}`);return Vs.startKeyValue(e),Vs.addKey(e,a),Vs.addValue(e,l),Vs.endKeyValue(e)})):-1;return ch.startSchema(e),ch.addFields(e,r),ch.addEndianness(e,BRt?cx.Little:cx.Big),i!==-1&&ch.addCustomMetadata(e,i),ch.endSchema(e)}function MRt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;xn.isDictionary(s)?(o=s.dictionary.typeId,i=g9.visit(s,e),r=g9.visit(s.dictionary,e)):r=g9.visit(s,e);const a=(s.children||[]).map(c=>Jr.encode(e,c)),l=xc.createChildrenVector(e,a),u=t.metadata&&t.metadata.size>0?xc.createCustomMetadataVector(e,[...t.metadata].map(([c,d])=>{const f=e.createString(`${c}`),h=e.createString(`${d}`);return Vs.startKeyValue(e),Vs.addKey(e,f),Vs.addValue(e,h),Vs.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),xc.startField(e),xc.addType(e,r),xc.addTypeType(e,o),xc.addChildren(e,l),xc.addNullable(e,!!t.nullable),n!==-1&&xc.addName(e,n),i!==-1&&xc.addDictionary(e,i),u!==-1&&xc.addCustomMetadata(e,u),xc.endField(e)}function $Rt(e,t){const n=t.nodes||[],r=t.buffers||[];Jp.startNodesVector(e,n.length);for(const o of n.slice().reverse())by.encode(e,o);const i=e.endVector();Jp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Nh.encode(e,o);const s=e.endVector();return Jp.startRecordBatch(e),Jp.addLength(e,BigInt(t.length)),Jp.addNodes(e,i),Jp.addBuffers(e,s),Jp.endRecordBatch(e)}function LRt(e,t){const n=rc.encode(e,t.data);return dw.startDictionaryBatch(e),dw.addId(e,BigInt(t.id)),dw.addIsDelta(e,t.isDelta),dw.addData(e,n),dw.endDictionaryBatch(e)}function FRt(e,t){return Rke.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function jRt(e,t){return Ike.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const BRt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),IH="ARROW1",$Z=new Uint8Array(IH.length);for(let e=0;e<IH.length;e+=1)$Z[e]=IH.codePointAt(e);$Z.length;class Qi extends zn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof $u?s.data.children:s.data),r=new Qi;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof Cr)return this.visitMany(t.data),this;const{type:n}=t;if(!xn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(xn.isUnion(n))this.nodes.push(new by(r,0));else{const{nullCount:i}=t;xn.isNull(n)||cf.call(this,i<=0?new Uint8Array(0):d3(t.offset,r,t.nullBitmap)),this.nodes.push(new by(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function cf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Nh(this._byteLength,t)),this._byteLength+=t,this}function zRt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(cf.call(this,i),n.mode===yl.Sparse)return RH.call(this,e);if(n.mode===yl.Dense){if(e.offset<=0)return cf.call(this,s),RH.call(this,e);{const o=new Int32Array(r),a=Object.create(null),l=Object.create(null);for(let u,c,d=-1;++d<r;)(u=i[d])!==void 0&&((c=a[u])===void 0&&(c=a[u]=s[d]),o[d]=s[d]-c,l[u]=((t=l[u])!==null&&t!==void 0?t:0)+1);cf.call(this,o),this.visitMany(e.children.map((u,c)=>{const d=n.typeIds[c],f=a[d],h=l[d];return u.slice(f,Math.min(r,h))}))}}return this}function URt(e){let t;return e.nullCount>=e.length?cf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?cf.call(this,d3(e.offset,e.length,t)):cf.call(this,zPe(e.values))}function wg(e){return cf.call(this,e.values.subarray(0,e.length*e.stride))}function p4(e){const{length:t,values:n,valueOffsets:r}=e,i=Jo(r[0]),s=Jo(r[t]),o=Math.min(s-i,n.byteLength-i);return cf.call(this,Ske(-i,t+1,r)),cf.call(this,n.subarray(i,i+o)),this}function LZ(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return cf.call(this,Ske(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function RH(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Qi.prototype.visitBool=URt;Qi.prototype.visitInt=wg;Qi.prototype.visitFloat=wg;Qi.prototype.visitUtf8=p4;Qi.prototype.visitLargeUtf8=p4;Qi.prototype.visitBinary=p4;Qi.prototype.visitLargeBinary=p4;Qi.prototype.visitFixedSizeBinary=wg;Qi.prototype.visitDate=wg;Qi.prototype.visitTimestamp=wg;Qi.prototype.visitTime=wg;Qi.prototype.visitDecimal=wg;Qi.prototype.visitList=LZ;Qi.prototype.visitStruct=RH;Qi.prototype.visitUnion=zRt;Qi.prototype.visitInterval=wg;Qi.prototype.visitDuration=wg;Qi.prototype.visitFixedSizeList=LZ;Qi.prototype.visitMap=LZ;class INe extends ZPe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new p9,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,av(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return o4(t)?t.then(n=>this.writeAll(n)):a4(t)?zZ(this,t):BZ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof p9?this._sink=t:(this._sink=new p9,t&&iAt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&sAt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!AH(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Ul&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof $u&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!AH(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof $u?t instanceof pRt||this._writeRecordBatch(t):t instanceof Ul?this.writeAll(t.batches):XJ(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Ah.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,l=a-s-o;return t.headerType===Os.RecordBatch?this._recordBatchBlocks.push(new yy(a,t.bodyLength,this._position)):t.headerType===Os.DictionaryBatch&&this._dictionaryBlocks.push(new yy(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(l)}_write(t){if(this._started){const n=hr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Ah.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write($Z)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Qi.assemble(t),o=new rc(t.numRows,r,i),a=Ah.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Qi.assemble(new Cr([t])),l=new rc(t.length,s,o),u=new sp(l,n,r),c=Ah.from(u,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class FZ extends INe{static writeAll(t,n){const r=new FZ(n);return o4(t)?t.then(i=>r.writeAll(i)):a4(t)?zZ(r,t):BZ(r,t)}}class jZ extends INe{static writeAll(t){const n=new jZ;return o4(t)?t.then(r=>n.writeAll(r)):a4(t)?zZ(n,t):BZ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=CH.encode(new CH(t,qs.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function BZ(e,t){let n=t;t instanceof Ul&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function zZ(e,t){var n,r,i,s,o,a,l;return sm(this,void 0,void 0,function*(){try{for(n=!0,r=O2(t);i=yield r.next(),s=i.done,!s;n=!0){l=i.value,n=!1;const u=l;e.write(u)}}catch(u){o={error:u}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function VRt(e,t="stream"){return(t==="stream"?FZ:jZ).writeAll(e).toUint8Array(!0)}function UZ(e,t=1){return(e*t+63&-64||64)/t}function _y(e,t,n=e.BYTES_PER_ELEMENT){return new e(UZ(t,n))}function VZ(e){return e instanceof Pr?e:new Pr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function HRt(e){return new Cr([VZ(e)])}const HZ=new TextEncoder;function qRt(e,t,n){const r=HZ.encode(n);return e.set(r,t),r.length}function WRt(e,t,n){return HZ.encodeInto(n,e.subarray(t)).written}const GRt=HZ.encodeInto?WRt:qRt;function upe(e,t){const n=_y(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function YRt(e,t){const n=_y(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function KRt(e,t){const n=_y(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function XRt(e,t){const n=_y(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function QRt(e){const t=m3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function JRt(e,t,n){const r=_y(Int32Array,t+1),i=_y(Uint8Array,3*n);let s=0;return{set(o,a){s+=GRt(i,s,o),r[a+1]=s},data:()=>{const o=UZ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function ZRt(e,t){const n=[],r=_y(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,l){const u=String(a);let c=i[u];c===void 0&&(o+=u.length,i[u]=c=++s,n.push(u)),r[l]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:ekt(e.dictionary,n,o)})}}function ekt(e,t,n){const r=JRt(e,t.length,n);return t.forEach(r.set),HRt(r.data())}function tkt(e,t){const n=_y(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function nkt(e,t,n=!0){let r;switch(e.typeId){case oe.Int:r=e.bitWidth<64?upe:null;break;case oe.Float:r=e.precision>0?upe:null;break;case oe.Dictionary:r=e.dictionary.typeId===oe.Utf8&&e.indices.typeId===oe.Int&&e.indices.bitWidth<64?ZRt:null;break;case oe.Bool:r=YRt;break;case oe.Date:r=e.unit?XRt:KRt;break}return r==null?QRt(e):n?tkt(r(e,t),t):r(e,t)}function rkt(e,t){const n=e.length,r=UZ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),VZ({type:t,length:n,buffers:[null,i]})}function RNe(e,t,n,r,i=!0){const s=nkt(r,e,i);return t(n,s.set),VZ(s.data())}function qZ(e){if(e instanceof xn||e==null)return e;switch(e){case oe.Binary:return new SI;case oe.Bool:return new TI;case oe.DateDay:return new _At;case oe.DateMillisecond:case oe.Date:return new wAt;case oe.Dictionary:return new gy(new dx,new py);case oe.Float16:return new Zke;case oe.Float32:return new oZ;case oe.Float64:case oe.Float:return new aZ;case oe.Int8:return new ZJ;case oe.Int16:return new eZ;case oe.Int32:case oe.Int:return new py;case oe.Int64:return new tZ;case oe.IntervalDayTime:return new CAt;case oe.Interval:case oe.IntervalYearMonth:return new AAt;case oe.Null:return new Jm;case oe.TimeMicrosecond:return new SAt;case oe.TimeMillisecond:case oe.Time:return new xAt;case oe.TimeNanosecond:return new TAt;case oe.TimeSecond:return new EAt;case oe.Uint8:return new nZ;case oe.Uint16:return new rZ;case oe.Uint32:return new iZ;case oe.Uint64:return new sZ;case oe.Utf8:return new dx;default:Ln(`Unsupported type code: ${rp(e)}. Use a data type constructor instead?`)}}function ikt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function kNe(e,t){const n=kH();return e(t,n.add),n}function kH(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Qm(t))++e.dates,ikt(t)&&++e.utcdays;else if(N1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=kH());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=kH())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return qZ(skt(e))}};return e}function skt(e){const t=e.count-e.nulls;if(t===0)return oe.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?oe.Float64:n<128?oe.Int8:n<32768?oe.Int16:oe.Int32:n>=2**32?oe.Float64:n<256?oe.Uint8:n<65536?oe.Uint16:oe.Uint32}else{if(e.nums===t)return oe.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?oe.Int64:Ln(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?oe.Uint64:Ln(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return oe.Bool;if(e.utcdays===t)return oe.DateDay;if(e.dates===t)return oe.DateMillisecond;if(e.arrays===t){const n=Jr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new mx(e.minlen,n):new px(n)}else if(e.structs===t){const n=e.struct_prof;return new Aa(Object.keys(n).map(r=>Jr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return oe.Dictionary;Ln("Type inference failure")}}}}function okt(e,t,n,r,i,s=!0){if(i=qZ(i),!i){const o=kNe(r,t);s=o.nulls>0,i=o.type()}return RNe(n,r,t,i,s)}function akt(e,t,n,r,i,s=!0){i=qZ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),l=lkt(o);if(l&&a&&cpe(l.type,i))return l;const u=o.data;if(dk(u)){const c=ukt(u);if(a&&c&&cpe(c,i))return rkt(u,c);i=i||c,s=!1}if(!i){const c=kNe(r,o);s=c.nulls>0,i=c.type()}return RNe(n,r,o,i,s)}function lkt(e){return e instanceof Cr?e:e.vector instanceof Cr?e.vector:null}function ukt(e){const n={Float32Array:oZ,Float64Array:aZ,Int8Array:ZJ,Int16Array:eZ,Int32Array:py,Uint8Array:nZ,Uint16Array:rZ,Uint32Array:iZ,BigInt64Array:tZ,BigUint64Array:sZ}[e.constructor.name];return n?new n:null}function cpe(e,t){return!e||!t?!0:e.compareTo(t)}function ckt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function dkt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&N1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const fkt=()=>Ln("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function hkt(){try{return Ul}catch{fkt()}}function PNe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=pkt(e,t),a={};i.forEach(u=>{const c=r(e,u,s,o,n[u]);c.length!==s&&Ln("Column length mismatch"),a[u]=c});const l=hkt();return new l(a)}function pkt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=Ni(n)?n(e):Tr(n)?n:null;if(Tr(e))return{dataFrom:okt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:ckt(e,r,i)};if(mkt(e))return{dataFrom:akt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:dkt(e,r,i)};Ln("Unsupported input data type")}function mkt(e){return e&&Ni(e.reify)}function gkt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return VRt(PNe(e,r),n)}function ykt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function vkt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(l=>{if(++n,l==null){++r;return}const u=typeof l;if(u==="object"&&Qm(l))++i,ykt(l)&&++s;else if(u==="number"&&(++o,l===l&&(l|0)!==l)){const c=l+"",d=c.indexOf(".");if(d>=0){const f=c.indexOf("e"),h=f>0?f:c.length;a=Math.max(a,h-d-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function m4(e,t){return Ni(t)?t(e):t||e.columnNames()}function NNe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const l=vkt(bkt(e,a),n);o[a]=i[a]||l.align,s[a]=r[a]||l.format}),{align:o,format:s}}function bkt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function WZ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let l=0;l<o;++l){const u=t[l];i.cell(s[t[l]].get(a),u,l)}},!0,n,r)}function _kt(e,t={}){const n=m4(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=u=>u==null?"":Qm(u)?r4(u,!0):s.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u,a=n.map(o);let l="";return WZ(e,n,t.limit||1/0,t.offset,{row(){l+=a.join(i)+`
`},cell(u,c,d){a[d]=o(r[c]?r[c](u):u)}}),l+a.join(i)}function ONe(e,t={}){if(Ni(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Qm(e))return t.utc?r4(e):XRe(e);{const r=JSON.stringify(e,(s,o)=>dk(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function g4(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function wkt(e,t={}){const n=m4(e,t.columns),{align:r,format:i}=NNe(e,n,t),s=Ekt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",l=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),u=(m,g)=>l(ONe(m,g)),c=o?(m,g)=>m==null?o(m):u(m,g):u;let d=-1,f=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",_=s[m]&&s[m](g,f,d)||"",w=(v?`text-align: ${v};`+(_?" ":""):"")+_;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",d)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return WZ(e,n,t.limit,t.offset,{row(m){d=m,p+=(++f?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function Ekt(e){return g4(e.style,t=>Ni(t)?t:()=>t)}function xkt(e,t=!0,n=!1){return e===void 0||e?t:n}const Skt=e=>Qm(e)?r4(e,!0):e;function Tkt(e,t={}){const n=xkt(t.schema),r=t.format||{},i=m4(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const l=e.column(o),u=r[o]||Skt;let c=-1;e.scan(d=>{const f=l.get(d);s+=(++c?",":"")+JSON.stringify(u(f))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function Ckt(e,t={}){const n=m4(e,t.columns),{align:r,format:i}=NNe(e,n,t),s=l=>l==="c"?":-:":l==="r"?"-:":":-",o=l=>l.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(l=>s(r[l])).join("|")+"|";return WZ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(l,u){a+=o(ONe(l,i[u]))+"|"}}),a+`
`}function DNe(e,t){for(const[n,r]of i4(t))e.set(n,r);return e}function Akt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function eg(e,t,n=new Map){return t=gl(t)?e.columnName(t):t,na(t)?n.set(t,t):Tr(t)?t.forEach(r=>eg(e,r,n)):Ni(t)?eg(e,t(e),n):La(t)?DNe(n,t):Ln(`Invalid column selection: ${rp(t)}`),n}function y4(e,t){return e.toObject=t,e}function MNe(e){return Tr(e)?e.map(MNe):e&&e.toObject?e.toObject():e}function gx(){return y4(e=>e.columnNames(),()=>({all:[]}))}function $Ne(...e){return e=e.flat(),y4(t=>{const n=eg(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:MNe(e)}))}function Ikt(e,t){return y4(n=>{let r=gl(e)?e:n.columnIndex(e),i=gl(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function Rkt(e){return na(e)&&(e=RegExp(Akt(e))),y4(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function kkt(e){return dk(e.data)?e.data.constructor:Array}class Ih extends r2t{static from(t,n){return new Ih(o2t(t,n),n)}static new(t,n){if(t instanceof Ih)return t;const r={},i=[];for(const[s,o]of i4(t))r[s]=o,i.push(s);return new Ih(r,n||i)}constructor(t,n,r,i,s,o){g4(t,s2t,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Ih(t||this._data,n||(t?null:this._names),o,i!==void 0?i:M2t(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=mc(r).groupby(r.groups());return t.forEach(s=>{s=Ih.new(s),s.numRows()!==n&&Ln("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):Ln(`Unrecognized column: ${t}`)}object(t=0){return dpe(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=eg(this,t.columns||gx()),o=wke(s),a=[];if(this.scan((l,u)=>a.push(o(l,u)),!0,r,i),n&&this.isGrouped()){const l=[];return this.scan(u=>l.push(u),!0,r,i),L2t(this,l,a,n)}return a}*[Symbol.iterator](){const t=dpe(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?l=>t.forEach(l):l=>this.scan(l,!0),a=r.length;i={};for(let l=0;l<a;++l){const u=r[l],c=this.column(u),d=i[u]=new(kkt(c))(n);let f=-1;o(h=>d[++f]=c.get(h))}this.isGrouped()&&(s=$2t(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return PNe(this,t)}toArrowBuffer(t){return gkt(this,t)}toCSV(t){return _kt(this,t)}toHTML(t){return wkt(this,t)}toJSON(t){return Tkt(this,t)}toMarkdown(t){return Ckt(this,t)}}function dpe(e){let t=e._builder;if(!t){const n=wke(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class Pkt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function pr(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=Nkt[e.type];s&&s(e,t,n)}const BN=(e,t,n)=>{pr(e.argument,t,n,e)},y9=(e,t,n)=>{pr(e.left,t,n,e),pr(e.right,t,n,e)},fpe=(e,t,n)=>{pr(e.test,t,n,e),pr(e.consequent,t,n,e),e.alternate&&pr(e.alternate,t,n,e)},v9=(e,t,n)=>{dh(e.params,t,n,e),pr(e.body,t,n,e)},hpe=(e,t,n)=>{pr(e.callee,t,n,e),dh(e.arguments,t,n,e)},dh=(e,t,n,r)=>{e.forEach(i=>pr(i,t,n,r))},Nkt={TemplateLiteral:(e,t,n)=>{dh(e.expressions,t,n,e),dh(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{pr(e.object,t,n,e),pr(e.property,t,n,e)},CallExpression:hpe,NewExpression:hpe,ArrayExpression:(e,t,n)=>{dh(e.elements,t,n,e)},AssignmentExpression:y9,AwaitExpression:BN,BinaryExpression:y9,LogicalExpression:y9,UnaryExpression:BN,UpdateExpression:BN,ConditionalExpression:fpe,ObjectExpression:(e,t,n)=>{dh(e.properties,t,n,e)},Property:(e,t,n)=>{pr(e.key,t,n,e),pr(e.value,t,n,e)},ArrowFunctionExpression:v9,FunctionExpression:v9,FunctionDeclaration:v9,VariableDeclaration:(e,t,n)=>{dh(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{pr(e.id,t,n,e),pr(e.init,t,n,e)},SpreadElement:(e,t,n)=>{pr(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{dh(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{pr(e.expression,t,n,e)},IfStatement:fpe,ForStatement:(e,t,n)=>{pr(e.init,t,n,e),pr(e.test,t,n,e),pr(e.update,t,n,e),pr(e.body,t,n,e)},WhileStatement:(e,t,n)=>{pr(e.test,t,n,e),pr(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{pr(e.body,t,n,e),pr(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{pr(e.discriminant,t,n,e),dh(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&pr(e.test,t,n,e),dh(e.consequent,t,n,e)},ReturnStatement:BN,Program:(e,t,n)=>{pr(e.body[0],t,n,e)}};function LNe(e){delete e.start,delete e.end,delete e.optional}function ppe(e){LNe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function Okt(e){return pr(e,null,{Column:ppe,Constant:ppe,Default:LNe}),e}function Ws(e,t){return t&&t.type===e}function Dkt(e){return Ws(B2t,e)||Ws(j2t,e)}function Mkt(e){return Ni(e)?e:()=>e}const $kt="Escaped functions are not valid as rollup or pivot values.";function Lkt(e,t,n){e.aggronly&&Ln($kt);const r="(row,data)=>fn("+_ke(e.table.columnNames())+",$)";return{escape:KJ.escape(r,Mkt(t.expr),n)}}var Fkt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],FNe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],jkt="-----------------------------------------------------------------------------------------------------------------------------------------------------",jNe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",b9={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},_9="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Bkt={5:_9,"5module":_9+" export import",6:_9+" const class extends export import super"},zkt=/^in(stanceof)?$/,Ukt=new RegExp("["+jNe+"]"),Vkt=new RegExp("["+jNe+jkt+"]");function PH(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function tg(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&Ukt.test(String.fromCharCode(e)):t===!1?!1:PH(e,FNe)}function yx(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&Vkt.test(String.fromCharCode(e)):t===!1?!1:PH(e,FNe)||PH(e,Fkt)}var _r=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function bc(e,t){return new _r(e,{beforeExpr:!0,binop:t})}var _c={beforeExpr:!0},Nl={startsExpr:!0},GZ={};function sr(e,t){return t===void 0&&(t={}),t.keyword=e,GZ[e]=new _r(e,t)}var K={num:new _r("num",Nl),regexp:new _r("regexp",Nl),string:new _r("string",Nl),name:new _r("name",Nl),privateId:new _r("privateId",Nl),eof:new _r("eof"),bracketL:new _r("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new _r("]"),braceL:new _r("{",{beforeExpr:!0,startsExpr:!0}),braceR:new _r("}"),parenL:new _r("(",{beforeExpr:!0,startsExpr:!0}),parenR:new _r(")"),comma:new _r(",",_c),semi:new _r(";",_c),colon:new _r(":",_c),dot:new _r("."),question:new _r("?",_c),questionDot:new _r("?."),arrow:new _r("=>",_c),template:new _r("template"),invalidTemplate:new _r("invalidTemplate"),ellipsis:new _r("...",_c),backQuote:new _r("`",Nl),dollarBraceL:new _r("${",{beforeExpr:!0,startsExpr:!0}),eq:new _r("=",{beforeExpr:!0,isAssign:!0}),assign:new _r("_=",{beforeExpr:!0,isAssign:!0}),incDec:new _r("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new _r("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:bc("||",1),logicalAND:bc("&&",2),bitwiseOR:bc("|",3),bitwiseXOR:bc("^",4),bitwiseAND:bc("&",5),equality:bc("==/!=/===/!==",6),relational:bc("</>/<=/>=",7),bitShift:bc("<</>>/>>>",8),plusMin:new _r("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:bc("%",10),star:bc("*",10),slash:bc("/",10),starstar:new _r("**",{beforeExpr:!0}),coalesce:bc("??",1),_break:sr("break"),_case:sr("case",_c),_catch:sr("catch"),_continue:sr("continue"),_debugger:sr("debugger"),_default:sr("default",_c),_do:sr("do",{isLoop:!0,beforeExpr:!0}),_else:sr("else",_c),_finally:sr("finally"),_for:sr("for",{isLoop:!0}),_function:sr("function",Nl),_if:sr("if"),_return:sr("return",_c),_switch:sr("switch"),_throw:sr("throw",_c),_try:sr("try"),_var:sr("var"),_const:sr("const"),_while:sr("while",{isLoop:!0}),_with:sr("with"),_new:sr("new",{beforeExpr:!0,startsExpr:!0}),_this:sr("this",Nl),_super:sr("super",Nl),_class:sr("class",Nl),_extends:sr("extends",_c),_export:sr("export"),_import:sr("import",Nl),_null:sr("null",Nl),_true:sr("true",Nl),_false:sr("false",Nl),_in:sr("in",{beforeExpr:!0,binop:7}),_instanceof:sr("instanceof",{beforeExpr:!0,binop:7}),_typeof:sr("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:sr("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:sr("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},yd=/\r\n?|\n|\u2028|\u2029/,Hkt=new RegExp(yd.source,"g");function LS(e){return e===10||e===13||e===8232||e===8233}function BNe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(LS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var zNe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Pc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,UNe=Object.prototype,qkt=UNe.hasOwnProperty,Wkt=UNe.toString,vk=Object.hasOwn||function(e,t){return qkt.call(e,t)},mpe=Array.isArray||function(e){return Wkt.call(e)==="[object Array]"},gpe=Object.create(null);function E0(e){return gpe[e]||(gpe[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function wy(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var Gkt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,II=function(t,n){this.line=t,this.column=n};II.prototype.offset=function(t){return new II(this.line,this.column+t)};var v4=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function VNe(e,t){for(var n=1,r=0;;){var i=BNe(e,r,t);if(i<0)return new II(n,t-r);++n,r=i}}var NH={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},ype=!1;function Ykt(e){var t={};for(var n in NH)t[n]=e&&vk(e,n)?e[n]:NH[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!ype&&typeof console=="object"&&console.warn&&(ype=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),mpe(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return mpe(t.onComment)&&(t.onComment=Kkt(t,t.onComment)),t}function Kkt(e,t){return function(n,r,i,s,o,a){var l={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(l.loc=new v4(this,o,a)),e.ranges&&(l.range=[i,s]),t.push(l)}}var RI=1,FS=2,YZ=4,HNe=8,qNe=16,WNe=32,KZ=64,GNe=128,bk=256,XZ=RI|FS|bk;function QZ(e,t){return FS|(e?YZ:0)|(t?HNe:0)}var g3=0,JZ=1,Eg=2,YNe=3,KNe=4,XNe=5,ro=function(t,n,r){this.options=t=Ykt(t),this.sourceFile=t.sourceFile,this.keywords=E0(Bkt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=b9[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=E0(i);var s=(i?i+" ":"")+b9.strict;this.reservedWordsStrict=E0(s),this.reservedWordsStrictBind=E0(s+" "+b9.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(yd).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(RI),this.regexpState=null,this.privateNameStack=[]},Sp={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};ro.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Sp.inFunction.get=function(){return(this.currentVarScope().flags&FS)>0};Sp.inGenerator.get=function(){return(this.currentVarScope().flags&HNe)>0&&!this.currentVarScope().inClassFieldInit};Sp.inAsync.get=function(){return(this.currentVarScope().flags&YZ)>0&&!this.currentVarScope().inClassFieldInit};Sp.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&bk)return!1;if(t.flags&FS)return(t.flags&YZ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Sp.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&KZ)>0||n||this.options.allowSuperOutsideMethod};Sp.allowDirectSuper.get=function(){return(this.currentThisScope().flags&GNe)>0};Sp.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Sp.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(FS|bk))>0||n};Sp.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&bk)>0};ro.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};ro.parse=function(t,n){return new this(n,t).parse()};ro.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};ro.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(ro.prototype,Sp);var Tl=ro.prototype,Xkt=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;Tl.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Pc.lastIndex=e,e+=Pc.exec(this.input)[0].length;var t=Xkt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Pc.lastIndex=e+t[0].length;var n=Pc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||yd.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Pc.lastIndex=e,e+=Pc.exec(this.input)[0].length,this.input[e]===";"&&e++}};Tl.eat=function(e){return this.type===e?(this.next(),!0):!1};Tl.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};Tl.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Tl.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Tl.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||yd.test(this.input.slice(this.lastTokEnd,this.start))};Tl.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Tl.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};Tl.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Tl.expect=function(e){this.eat(e)||this.unexpected()};Tl.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var b4=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Tl.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Tl.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};Tl.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Tl.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var jt=ro.prototype;jt.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var ZZ={kind:"loop"},Qkt={kind:"switch"};jt.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Pc.lastIndex=this.pos;var t=Pc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(tg(r,!0)){for(var i=n+1;yx(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!zkt.test(s))return!0}return!1};jt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Pc.lastIndex=this.pos;var e=Pc.exec(this.input),t=this.pos+e[0].length,n;return!yd.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(yx(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};jt.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){Pc.lastIndex=this.pos;var o=Pc.exec(this.input),a=this.pos+o[0].length,l=this.input.charCodeAt(a);if(l===40||l===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var u=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,u,c,e):this.parseExpressionStatement(i,c)}};jt.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};jt.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};jt.parseDoStatement=function(e){return this.next(),this.labels.push(ZZ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};jt.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ZZ),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=this.containsEsc,l=new b4,u=this.start,c=t>-1?this.parseExprSubscripts(l,"await"):this.parseExpression(!0,l);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===K._in&&this.unexpected(t),e.await=!0):o&&this.options.ecmaVersion>=8&&(c.start===u&&!a&&c.type==="Identifier"&&c.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),s&&o&&this.raise(c.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(c,!1,l),this.checkLValPattern(c),this.parseForIn(e,c)):(this.checkExpressionErrors(l,!0),t>-1&&this.unexpected(t),this.parseFor(e,c))};jt.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,aA|(n?0:OH),!1,t)};jt.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};jt.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};jt.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(Qkt),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};jt.parseThrowStatement=function(e){return this.next(),yd.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var Jkt=[];jt.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?WNe:0),this.checkLValPattern(e,t?KNe:Eg),this.expect(K.parenR),e};jt.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};jt.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};jt.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(ZZ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};jt.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};jt.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};jt.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,l=this.labels.length-1;l>=0;l--){var u=this.labels[l];if(u.statementStart===e.start)u.statementStart=this.start,u.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};jt.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};jt.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};jt.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};jt.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};jt.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};jt.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?JZ:Eg,!1)};var aA=1,OH=2,QNe=4;jt.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&OH&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&aA&&(e.id=t&QNe&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&OH)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?JZ:Eg:YNe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(QZ(e.async,e.generator)),t&aA||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&aA?"FunctionDeclaration":"FunctionExpression")};jt.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};jt.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&Zkt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};jt.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var l=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=l:r=l)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var u=!n.static&&y3(n,"constructor"),c=u&&e;u&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=u?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};jt.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};jt.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};jt.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&y3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};jt.parseClassField=function(e){if(y3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&y3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};jt.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(bk|KZ);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};jt.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Eg,!1)):(t===!0&&this.unexpected(),e.id=null)};jt.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};jt.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};jt.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];vk(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function Zkt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function y3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}jt.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};jt.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};jt.parseExportDeclaration=function(e){return this.parseStatement(null)};jt.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,aA|QNe,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};jt.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),vk(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};jt.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var l=a[o];l&&this.checkPatternExport(e,l)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};jt.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};jt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};jt.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};jt.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};jt.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=Jkt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};jt.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Eg),this.finishNode(e,"ImportSpecifier")};jt.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Eg),this.finishNode(e,"ImportDefaultSpecifier")};jt.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Eg),this.finishNode(e,"ImportNamespaceSpecifier")};jt.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};jt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return Gkt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};jt.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};jt.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var vd=ro.prototype;vd.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};vd.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};vd.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};vd.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};vd.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};vd.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};vd.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};vd.parseBindingListItem=function(e){return e};vd.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};vd.checkLValSimple=function(e,t,n){t===void 0&&(t=g3);var r=t!==g3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Eg&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(vk(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==XNe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};vd.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=g3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var l=a[o];l&&this.checkLValInnerPattern(l,t,n)}break;default:this.checkLValSimple(e,t,n)}};vd.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=g3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var kd=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},ji={b_stat:new kd("{",!1),b_expr:new kd("{",!0),b_tmpl:new kd("${",!1),p_stat:new kd("(",!1),p_expr:new kd("(",!0),q_tmpl:new kd("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new kd("function",!1),f_expr:new kd("function",!0),f_expr_gen:new kd("function",!0,!1,null,!0),f_gen:new kd("function",!1,!1,null,!0)},jS=ro.prototype;jS.initialContext=function(){return[ji.b_stat]};jS.curContext=function(){return this.context[this.context.length-1]};jS.braceIsBlock=function(e){var t=this.curContext();return t===ji.f_expr||t===ji.f_stat?!0:e===K.colon&&(t===ji.b_stat||t===ji.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?yd.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===ji.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};jS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};jS.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};jS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===ji.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?ji.b_stat:ji.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(ji.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?ji.p_stat:ji.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==ji.p_stat)&&!(e===K._return&&yd.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===ji.b_stat)?this.context.push(ji.f_expr):this.context.push(ji.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===ji.q_tmpl?this.context.pop():this.context.push(ji.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===ji.f_expr?this.context[t]=ji.f_expr_gen:this.context[t]=ji.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var _n=ro.prototype;_n.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};_n.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};_n.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new b4,r=!0);var a=this.start,l=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,a,l)),this.type.isAssign){var c=this.startNodeAt(a,l);return c.operator=this.value,this.type===K.eq&&(u=this.toAssignable(u,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(u):this.checkLValSimple(u),c.left=u,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),u};_n.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};_n.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};_n.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var l=this.value;this.next();var u=this.start,c=this.startLoc,d=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),u,c,s,i),f=this.buildBinary(t,n,e,d,l,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(f,t,n,r,i)}return e};_n.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};_n.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),l=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,l,r),this.checkExpressionErrors(e,!0),l?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&JNe(a.argument)?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&DH(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,l?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(i,s);u.operator=this.value,u.prefix=!1,u.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(u,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function JNe(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&JNe(e.expression)}function DH(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&DH(e.expression)||e.type==="ParenthesizedExpression"&&DH(e.expression)}_n.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};_n.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var l=this.startNodeAt(t,n);l.expression=a,a=this.finishNode(l,"ChainExpression")}return a}e=a}};_n.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};_n.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};_n.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,l=a&&this.eat(K.questionDot);r&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(K.bracketL);if(u||l&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,u?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!u,a&&(c.optional=l),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var d=new b4,f=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,d);if(i&&!l&&this.shouldParseAsyncArrow())return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=f,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(d,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=l),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(l||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};_n.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,l=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&l.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(ji.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[l],!1,t);if(this.options.ecmaVersion>=8&&l.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return l=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[l],!0,t)}return l;case K.regexp:var u=this.value;return r=this.parseLiteral(u.value),r.regex={pattern:u.pattern,flags:u.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,d=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(d)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),d;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(ji.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};_n.parseExprAtomDefault=function(){this.unexpected()};_n.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};_n.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};_n.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};_n.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};_n.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};_n.shouldParseArrow=function(e){return!this.canInsertSemicolon()};_n.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,l=[],u=!0,c=!1,d=new b4,f=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(u?u=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else l.push(this.parseMaybeAssign(!1,d,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(l)&&this.eat(K.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=h,this.parseParenArrowList(n,r,l,t);(!l.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(d,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=h||this.awaitPos,l.length>1?(i=this.startNodeAt(o,a),i.expressions=l,this.finishNodeAt(i,"SequenceExpression",m,g)):i=l[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};_n.parseParenItem=function(e){return e};_n.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var ePt=[];_n.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=ePt,this.finishNode(e,"NewExpression")};_n.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};_n.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};_n.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!yd.test(this.input.slice(this.lastTokEnd,this.start))};_n.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};_n.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};_n.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};_n.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};_n.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};_n.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};_n.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(QZ(t,r.generator)|KZ|(n?GNe:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};_n.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(QZ(n,!1)|qNe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};_n.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var l=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,XNe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=l}this.exitScope()};_n.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};_n.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,JZ,t?null:n)}};_n.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};_n.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};_n.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};_n.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};_n.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};_n.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};_n.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var v3=ro.prototype;v3.raise=function(e,t){var n=VNe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};v3.raiseRecoverable=v3.raise;v3.curPosition=function(){if(this.options.locations)return new II(this.curLine,this.pos-this.lineStart)};var uv=ro.prototype,tPt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};uv.enterScope=function(e){this.scopeStack.push(new tPt(e))};uv.exitScope=function(){this.scopeStack.pop()};uv.treatFunctionsAsVarInScope=function(e){return e.flags&FS||!this.inModule&&e.flags&RI};uv.declareName=function(e,t,n){var r=!1;if(t===Eg){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&RI&&delete this.undefinedExports[e]}else if(t===KNe){var s=this.currentScope();s.lexical.push(e)}else if(t===YNe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var l=this.scopeStack[a];if(l.lexical.indexOf(e)>-1&&!(l.flags&WNe&&l.lexical[0]===e)||!this.treatFunctionsAsVarInScope(l)&&l.functions.indexOf(e)>-1){r=!0;break}if(l.var.push(e),this.inModule&&l.flags&RI&&delete this.undefinedExports[e],l.flags&XZ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};uv.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};uv.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};uv.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&XZ)return t}};uv.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&XZ&&!(t.flags&qNe))return t}};var _4=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new v4(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},_k=ro.prototype;_k.startNode=function(){return new _4(this,this.start,this.startLoc)};_k.startNodeAt=function(e,t){return new _4(this,e,t)};function ZNe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}_k.finishNode=function(e,t){return ZNe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};_k.finishNodeAt=function(e,t,n,r){return ZNe.call(this,e,t,n,r)};_k.copyNode=function(e){var t=new _4(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var eOe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",tOe=eOe+" Extended_Pictographic",nOe=tOe,rOe=nOe+" EBase EComp EMod EPres ExtPict",iOe=rOe,nPt=iOe,rPt={9:eOe,10:tOe,11:nOe,12:rOe,13:iOe,14:nPt},iPt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",sPt={9:"",10:"",11:"",12:"",13:"",14:iPt},vpe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",sOe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",oOe=sOe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",aOe=oOe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",lOe=aOe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",uOe=lOe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",oPt=uOe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",aPt={9:sOe,10:oOe,11:aOe,12:lOe,13:uOe,14:oPt},cOe={};function lPt(e){var t=cOe[e]={binary:E0(rPt[e]+" "+vpe),binaryOfStrings:E0(sPt[e]),nonBinary:{General_Category:E0(vpe),Script:E0(aPt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var w9=0,bpe=[9,10,11,12,13,14];w9<bpe.length;w9+=1){var uPt=bpe[w9];lPt(uPt)}var Pt=ro.prototype,b3=function(t,n){this.parent=t,this.base=n||this};b3.prototype.separatedFrom=function(t){for(var n=this;n;n=n.parent)for(var r=t;r;r=r.parent)if(n.base===r.base&&n!==r)return!0;return!1};b3.prototype.sibling=function(){return new b3(this.parent,this.base)};var Tp=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=cOe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};Tp.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Tp.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Tp.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Tp.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Tp.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Tp.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Tp.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Tp.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Tp.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Pt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};function cPt(e){for(var t in e)return!0;return!1}Pt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&cPt(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))};Pt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames[r]||e.raise("Invalid named capture referenced")}};Pt.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new b3(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Pt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Pt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Pt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Pt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Pt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Pt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Pt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Pt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Pt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Pt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Pt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Pt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Pt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return dOe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function dOe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Pt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!dOe(n);)e.advance();return e.pos!==t};Pt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Pt.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,n=e.groupNames[e.lastStringValue];if(n)if(t)for(var r=0,i=n;r<i.length;r+=1){var s=i[r];s.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");t?(n||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}};Pt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Pt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=wy(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=wy(e.lastIntValue);return!0}return!1};Pt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),dPt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function dPt(e){return tg(e,!0)||e===36||e===95}Pt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),fPt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function fPt(e){return yx(e,!0)||e===36||e===95||e===8204||e===8205}Pt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Pt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Pt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Pt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Pt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Pt.regexp_eatZero=function(e){return e.current()===48&&!w4(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Pt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Pt.regexp_eatControlLetter=function(e){var t=e.current();return fOe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function fOe(e){return e>=65&&e<=90||e>=97&&e<=122}Pt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&hPt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function hPt(e){return e>=0&&e<=1114111}Pt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Pt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var hOe=0,ng=1,Mc=2;Pt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(pPt(t))return e.lastIntValue=-1,e.advance(),ng;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Mc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return hOe};function pPt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Pt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),ng}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return hOe};Pt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){vk(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Pt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return ng;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Mc;e.raise("Invalid property name")};Pt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";pOe(t=e.current());)e.lastStringValue+=wy(t),e.advance();return e.lastStringValue!==""};function pOe(e){return fOe(e)||e===95}Pt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";mPt(t=e.current());)e.lastStringValue+=wy(t),e.advance();return e.lastStringValue!==""};function mPt(e){return pOe(e)||w4(e)}Pt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Pt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Mc&&e.raise("Negated character class may contain strings"),!0}return!1};Pt.regexp_classContents=function(e){return e.current()===93?ng:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),ng)};Pt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Pt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||yOe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Pt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Pt.regexp_classSetExpression=function(e){var t=ng,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Mc&&(t=Mc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Mc&&(t=ng);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Mc&&(t=Mc)}};Pt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Pt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?ng:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Pt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Mc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Pt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Pt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Mc&&(t=Mc);return t};Pt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?ng:Mc};Pt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&gPt(n)||yPt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function gPt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function yPt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Pt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return vPt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function vPt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Pt.regexp_eatClassControlLetter=function(e){var t=e.current();return w4(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Pt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Pt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;w4(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function w4(e){return e>=48&&e<=57}Pt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;mOe(n=e.current());)e.lastIntValue=16*e.lastIntValue+gOe(n),e.advance();return e.pos!==t};function mOe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function gOe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Pt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Pt.regexp_eatOctalDigit=function(e){var t=e.current();return yOe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function yOe(e){return e>=48&&e<=55}Pt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!mOe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+gOe(i),e.advance()}return!0};var eee=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new v4(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},nr=ro.prototype;nr.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new eee(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};nr.getToken=function(){return this.next(),new eee(this)};typeof Symbol<"u"&&(nr[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});nr.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};nr.readToken=function(e){return tg(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};nr.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};nr.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=BNe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};nr.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!LS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};nr.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&zNe.test(String.fromCharCode(e)))++this.pos;else break e}}};nr.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};nr.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};nr.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};nr.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};nr.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};nr.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};nr.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||yd.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};nr.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};nr.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};nr.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};nr.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),tg(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+wy(t)+"'")};nr.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+wy(e)+"'")};nr.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};nr.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(yd.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Tp(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var l=null;try{l=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:l})};nr.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,l=0,u=t??1/0;l<u;++l,++this.pos){var c=this.input.charCodeAt(this.pos),d=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),l===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?d=c-97+10:c>=65?d=c-65+10:c>=48&&c<=57?d=c-48:d=1/0,d>=e)break;a=c,o=o*e+d}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function bPt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function vOe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}nr.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=vOe(this.input.slice(t,this.pos)),++this.pos):tg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};nr.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=vOe(this.input.slice(t,this.pos));return++this.pos,tg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),tg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=bPt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};nr.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};nr.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(LS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var bOe={};nr.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===bOe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};nr.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw bOe;this.raise(e,t)};nr.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(LS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};nr.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};nr.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return wy(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return LS(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}};nr.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};nr.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(yx(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?tg:yx)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=wy(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};nr.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=GZ[e]),this.finishToken(t,e)};var _Pt="8.12.1";ro.acorn={Parser:ro,version:_Pt,defaultOptions:NH,Position:II,SourceLocation:v4,getLineInfo:VNe,Node:_4,TokenType:_r,tokTypes:K,keywordTypes:GZ,TokContext:kd,tokContexts:ji,isIdentifierChar:yx,isIdentifierStart:tg,Token:eee,isNewLine:LS,lineBreak:yd,lineBreakG:Hkt,nonASCIIwhitespace:zNe};function wPt(e,t){return ro.parse(e,t)}const tee={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},EPt={ecmaVersion:11},_pe="$",xPt="d",SPt="d1",TPt="d2",Lo=e=>(t,n)=>n.error(t,e+" not allowed"),CPt=Lo("Aggregate function"),APt=Lo("Window function"),IPt="Invalid argument",nee="Invalid column reference",RPt=nee+" (must be input to an aggregate function)",_Oe="Invalid function call",kPt="Invalid member expression",PPt="Invalid operator parameter",NPt="Invalid param reference",OPt="Invalid variable reference",DPt="Variable not accessible in operator call",MPt="Unsupported variable declaration",$Pt="Unsupported destructuring pattern",wOe="Table expressions do not support closures",EOe="Use aq.escape(fn) to use a function as-is (including closures)",LPt="use table.params({ name: value }) to define dynamic parameters",FPt="use aq.addFunction(name, fn) to add new op functions",jPt=`
Note: ${wOe}. ${EOe}, or ${LPt}.`,xOe=`
Note: ${wOe}. ${EOe}, or ${FPt}.`,BPt=`The ${vke} method is not valid in multi-table expressions.`;function zPt(e,t){const n=UPt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,Dkt(r)?(HPt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=SPt),e.scope.add(e.tuple2=TPt),e.scope.add(e.$param=_pe)):(e.scope.add(e.tuple=xPt),e.scope.add(e.$param=_pe)),pr(r,e,ree),e.root}function UPt(e){try{const t=e.field?VPt(e):Tr(e)?rp(e):e;return wPt(`expr=(${t})`,EPt).body[0].expression.right}catch{Ln(`Expression parse error: ${e+""}`)}}function VPt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const ree={FunctionDeclaration:Lo("Function definitions"),ForStatement:Lo("For loops"),ForOfStatement:Lo("For-of loops"),ForInStatement:Lo("For-in loops"),WhileStatement:Lo("While loops"),DoWhileStatement:Lo("Do-while loops"),AwaitExpression:Lo("Await expressions"),ArrowFunctionExpression:Lo("Function definitions"),AssignmentExpression:Lo("Assignments"),FunctionExpression:Lo("Function definitions"),NewExpression:Lo('Use of "new"'),UpdateExpression:Lo("Update expressions"),VariableDeclarator(e,t){LH(e.id,t)},Identifier(e,t,n){COe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,OPt,jPt)},CallExpression(e,t){const n=SOe(e.callee),r=mke(n)||gke(n);if(r){if((t.join||t.aggregate===!1)&&GJ(n)&&CPt(e,t),(t.join||t.window===!1)&&YJ(n)&&APt(e,t),t.$op=1,t.ast)$H(e,n,t),e.arguments.forEach(i=>pr(i,t,MH));else{const i=t.op(qPt(t,r,n,e.arguments));Object.assign(e,{type:cke,name:i.id})}return t.$op=0,!1}else pke(n)?$H(e,n,t):t.error(e,_Oe,xOe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Ws(W0,r))return;const{name:s}=r;if(TOe(e)&&Ws(W0,i)&&Ef(tee,i.name)){ROe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return wpe(e,o,t,AOe,n);if(s===t.$param)return wpe(e,o,t,GPt);t.paramsRef.has(s)?kI(e,t.paramsRef.get(s)):t.columnRef.has(s)?IOe(r,s,t,e):Ef(t.params,s)&&kI(r,s)}};function wpe(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Ws(PS,s))a=s.value;else try{pr(s,n,ree,e),a=n.param(s)}catch{n.error(e,kPt)}return r(e,a,t,n,i),!1}const MH={...ree,VariableDeclarator:Lo("Variable declaration in operator call"),Identifier(e,t,n){COe(e,t,n)&&t.error(e,DPt)},CallExpression(e,t){const n=SOe(e.callee);pke(n)?$H(e,n,t):t.error(e,_Oe,xOe)}};function HPt(e,t){e.generator&&Lo("Generator functions")(e,t),e.async&&Lo("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,l)=>t.columnRef.set(a,[l,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(XT(t,n[0],"tuple1",i(1)),r>1&&XT(t,n[1],"tuple2",i(2)),r>2&&XT(t,n[2],"$param",s)):(XT(t,n[0],"tuple",i(0)),r>1&&XT(t,n[1],"$param",s))),t.root=e.body}function XT(e,t,n,r){Ws(W0,t)?(e.scope.add(t.name),e[n]=t.name):Ws(lke,t)&&t.properties.forEach(i=>{const s=Ws(W0,i.key)?i.key.name:Ws(PS,i.key)?i.key.value:e.error(i,IPt);Ws(W0,i.value)||e.error(i.value,$Pt),r(i.value.name,s)})}function qPt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((l,u)=>{u<o?(pr(l,e,MH),i.push(e.field(l))):u<a?(pr(l,e,MH),s.push(e.param(l))):e.error(l,PPt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function SOe(e){return Ws(W0,e)?e.name:Ws(ake,e)?TOe(e)?WPt(e.property.name):e.property.name:null}function TOe(e){return Ws(W0,e.object)&&e.object.name==="Math"}function WPt(e){return e==="max"?"greatest":e==="min"?"least":e}function COe(e,t,n){const{name:r}=e;if(!(Ws(ake,n)&&n.property===e)){if(!(Ws(uke,n)&&n.key===e))if(t.paramsRef.has(r))kI(e,t.paramsRef.get(r));else if(t.columnRef.has(r))IOe(e,r,t,n);else if(Ef(t.params,r))kI(e,r);else if(Ef(tee,r))ROe(e,r);else return!0}}function AOe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,nee),r.aggronly&&!r.$op&&r.error(e,RPt),yke(e,t,n,o,i)}function IOe(e,t,n,r){const[i,s]=n.columnRef.get(t);AOe(e,i,s,n,r)}function GPt(e,t,n,r){r.params&&!Ef(r.params,t)&&r.error(e,NPt),kI(e,t)}function kI(e,t){e.type=q2t,e.name=t}function ROe(e,t){e.type=U2t,e.name=t,e.raw=tee[t]}function $H(e,t,n){if(t===vke){const r=n.table;r||n.error(e,BPt),bke(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=gl(s)?r.columnName(s):s;return r.column(o)||n.error(i,nee),o}):r.columnNames())}else e.callee={type:H2t,name:t}}function LH(e,t){Ws(W0,e)?t.scope.add(e.name):Ws(F2t,e)?e.elements.forEach(n=>LH(n,t)):Ws(lke,e)?e.properties.forEach(n=>LH(n.value,t)):t.error(e.id,MPt)}const YPt={[fk]:1,[cke]:1};function hu(e,t={}){const n=t.generate||Z$,r=t.compiler||KJ,i=XPt(t),s={},o={},a=[],l=[];let u=0,c=-1;const d=t.join?r.join:t.index==1?r.expr2:r.expr,f={op(m){const g=KPt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++u)},param(m){return Ws(PS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?Okt(g):d(n(g),i));l.push(y),YPt[g.type]&&y!==g&&La(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,_=m.end-6,w=String(f.spec).slice(v,_);Ln(`${g}: "${w}"${y}`)}};Object.assign(f,t,{params:i});for(const[m,g]of i4(e))f.value(m+"",g.escape?Lkt(f,g,i):zPt(f,g));if(t.ast)return{names:a,exprs:l};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:l,ops:p}}function KPt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function XPt(e){return(e.table?E9(e.table):e.join?{...E9(e.join[1]),...E9(e.join[0])}:{})||{}}function E9(e){return e&&Ni(e.params)?e.params():{}}const kOe="Expr",Pd="ExprList",POe="ExprNumber",e2="ExprObject",zw="JoinKeys",_3="JoinValues",Sc="Options",iee="OrderKeys",Gg="SelectionList",p1="TableRef",Uw="TableRefList",QPt="Descending",JPt="Query",ZPt="Selection",eNt="Verb",tNt="Window";function E4(e,t){return e&&e.expr?new Epe({...e,...t}):new Epe(t,e)}class Epe{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Ni(this.expr)?{func:!0}:{}}}}function nNt(e){return E4(e,{desc:!0})}function gb(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return E4(e,t?{expr:t,...r}:r)}function rNt(e,t,n){return E4(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function iNt(e){const t=n=>n;return t.toString=()=>e,t}function xpe(e,t){return t=t&&Ni(t.query)?t.query():t,t&&Ni(t.evaluate)?t.evaluate(null,e):e(t)}function NOe(e){return La(e)&&(Tr(e.all)||Tr(e.matches)||Tr(e.not)||Tr(e.range))}function PI(e){return e&&Ni(e.toObject)?e.toObject():Ni(e)?{expr:String(e),func:!0}:Tr(e)?e.map(PI):La(e)?g4(e,t=>PI(t)):e}function see(e){return Tr(e)?e.map(see):La(e)?Tr(e.verbs)?aee.from(e):Tr(e.all)?gx():Tr(e.range)?Ikt(...e.range):Tr(e.match)?Rkt(RegExp(...e.match)):Tr(e.not)?$Ne(e.not.map(PI)):sNt(e):e}function sNt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=gb(n):e.func===!0&&(t=n=iNt(n)),La(e.window)){const{frame:r,peers:i}=e.window;t=n=rNt(n,r,i)}e.desc===!0&&(t=nNt(n))}return e===t?g4(e,r=>see(r)):t}function oNt(e){return Tr(e)?e.map(aNt):e}function aNt(e){const t=[];return du(e).forEach(n=>{gl(n)?t.push(n):na(n)?t.push(gb(n,null)):La(n)&&n.expr||Ni(n)?t.push(n):Ln(`Invalid key value: ${n+""}`)}),t}function lNt(e){return Tr(e)?e.map(uNt):e}function uNt(e,t){return t<2?du(e):e}function cNt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(La(r)&&!Ni(r))for(const i in r)t.push(r[i]);else n=gl(r)?r:na(r)?gb(n):Ni(r)?n:Ln(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const dNt={[kOe]:$Oe,[Pd]:vx,[POe]:yNt,[e2]:Ey,[zw]:vNt,[_3]:bNt,[iee]:vx,[Gg]:mNt};function fNt(e,t,n){return t===p1?Spe(e):t===Uw?e.map(Spe):OOe(PI(e),t,n)}function OOe(e,t,n){return t===Sc?e&&hNt(e,n):dNt[t](e)}function hNt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?OOe(i,t[r]):i}return n}function pNt(e,t){return hu({expr:e},{...t,ast:!0}).exprs[0]}function oee(e){return{type:fk,name:e}}function DOe(e){return{type:fk,index:e}}function Ey(e,t){if(na(e))return pNt(e,t);if(e.expr){let n;if(e.field===!0?n=oee(e.expr):e.func===!0&&(n=Ey(e.expr,t)),n)return e.desc&&(n={type:QPt,expr:n}),e.window&&(n={type:tNt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Ey(e[n],t),as:n}))}function MOe(e){const t=ZPt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:vx(e.not)}:e.range?{type:t,operator:"range",arguments:vx(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Ln("Invalid input")}function mNt(e){return du(e).map(gNt).flat()}function gNt(e){return NOe(e)?MOe(e):gl(e)?DOe(e):na(e)?oee(e):La(e)?Object.keys(e).map(t=>({type:fk,name:t,as:e[t]})):Ln("Invalid input")}function $Oe(e){return NOe(e)?MOe(e):gl(e)?DOe(e):na(e)?oee(e):La(e)?Ey(e):Ln("Invalid input")}function vx(e){return du(e).map($Oe).flat()}function yNt(e){return gl(e)?e:Ey(e)}function vNt(e){return Tr(e)?e.map(vx):Ey(e,{join:!0})}function bNt(e){return Tr(e)?e.map((t,n)=>n<2?vx(t):Ey(t,{join:!0})):Ey(e,{join:!0})}function Spe(e){return e&&Ni(e.toAST)?e.toAST():e}class LOe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],l=o===zw?oNt(a):o===_3?lNt(a):o===iee?cNt(a):a;this[i.name]=l!==void 0?l:i.default})}static from(t){const n=FH[t.verb],r=(n.schema||[]).map(({name:i})=>see(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===p1?xpe(n,o):s===Uw?o.map(a=>xpe(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=PI(this[n])}),t}toAST(){const t={type:eNt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=fNt(this[n],r,i)}),t}}function Qr(e,t){return Object.assign((...n)=>new LOe(e,t,n),{schema:t})}const FH={count:Qr("count",[{name:"options",type:Sc}]),derive:Qr("derive",[{name:"values",type:e2},{name:"options",type:Sc,props:{before:Gg,after:Gg}}]),filter:Qr("filter",[{name:"criteria",type:e2}]),groupby:Qr("groupby",[{name:"keys",type:Pd}]),orderby:Qr("orderby",[{name:"keys",type:iee}]),relocate:Qr("relocate",[{name:"columns",type:Gg},{name:"options",type:Sc,props:{before:Gg,after:Gg}}]),rename:Qr("rename",[{name:"columns",type:Gg}]),rollup:Qr("rollup",[{name:"values",type:e2}]),sample:Qr("sample",[{name:"size",type:POe},{name:"options",type:Sc,props:{weight:kOe}}]),select:Qr("select",[{name:"columns",type:Gg}]),ungroup:Qr("ungroup"),unorder:Qr("unorder"),reify:Qr("reify"),dedupe:Qr("dedupe",[{name:"keys",type:Pd,default:[]}]),impute:Qr("impute",[{name:"values",type:e2},{name:"options",type:Sc,props:{expand:Pd}}]),fold:Qr("fold",[{name:"values",type:Pd},{name:"options",type:Sc}]),pivot:Qr("pivot",[{name:"keys",type:Pd},{name:"values",type:Pd},{name:"options",type:Sc}]),spread:Qr("spread",[{name:"values",type:Pd},{name:"options",type:Sc}]),unroll:Qr("unroll",[{name:"values",type:Pd},{name:"options",type:Sc,props:{drop:Pd}}]),lookup:Qr("lookup",[{name:"table",type:p1},{name:"on",type:zw},{name:"values",type:Pd}]),join:Qr("join",[{name:"table",type:p1},{name:"on",type:zw},{name:"values",type:_3},{name:"options",type:Sc}]),cross:Qr("cross",[{name:"table",type:p1},{name:"values",type:_3},{name:"options",type:Sc}]),semijoin:Qr("semijoin",[{name:"table",type:p1},{name:"on",type:zw}]),antijoin:Qr("antijoin",[{name:"table",type:p1},{name:"on",type:zw}]),concat:Qr("concat",[{name:"tables",type:Uw}]),union:Qr("union",[{name:"tables",type:Uw}]),intersect:Qr("intersect",[{name:"tables",type:Uw}]),except:Qr("except",[{name:"tables",type:Uw}])};let aee=class FOe extends YRe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new FOe(t.map(LOe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Tpe(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Tpe(this,"toAST",{type:JPt})}};function Tpe(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function _Nt(e,t){return new aee(e._verbs.concat(t),e._params,e._table)}for(const e in FH){const t=FH[e];aee.prototype["__"+e]=function(n,...r){return _Nt(n,t(...r))}}function BS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,l)=>`${r[o]}${l} = ${r[o]}[${l}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function wNt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function lee(e,t){const n=mc();return t.forEach((r,i)=>{const s=na(r)?r:i;if(s){const o=e.column(i)||Ln(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function jOe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||Ln("relocate requires a before or after option."),i&&s&&Ln("relocate accepts only one of the before or after options."),t=eg(e,t);const o=[...eg(e,i?n:r).keys()],a=i?o[0]:o.pop(),l=new Map;return e.columnNames().forEach(u=>{const c=!t.has(u);if(u===a){s&&c&&l.set(u,u);for(const[d,f]of t)l.set(d,f);if(s)return}c&&l.set(u,u)}),lee(e,l)}function wk(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function uee(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ENt(e,t=0,n=e.length){let r=n?e[t++]:wr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function xNt(e,t=0,n=e.length){let r=n?e[t++]:wr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function zN(e){return wI(e)?e:+e}function SNt(e,t){const n=e.length;if(!n)return wr;if((t=+t)<=0||n<2)return zN(e[0]);if(t>=1)return zN(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=zN(e[i]);return wI(s)?s:s+(zN(e[i+1])-s)*(r-i)}class TNt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:ENt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:xNt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(uee)),SNt(this._sorted,t)}}const w3=(e,t,n)=>BS(t,"{"+wk(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function CNt(e,t){const{ops:n,output:r}=ANt(e,t),i=e[0].fields,s=i.length,o=s===0?cee:s===1?INt:s===2?RNt:Ln("Unsupported field count: "+s);return new o(i,n,r,t)}function ANt(e,t){const n={},r=[];function i(o,a=[]){const l=o+":"+a;if(n[l])return n[l];const u=mke(o),c=u.create(...a);return t<0&&u.stream&&u.stream.forEach(d=>i(d,[])),u.req&&u.req.forEach(d=>i(d,[])),n[l]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class cee extends Pkt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new TNt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class INt extends cee{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=w3(n,s,"add"),this._rem=w3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Zd(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Zd(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class RNt extends cee{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=w3(n,s,"add"),this._rem=w3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Zd(i)&&Zd(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Zd(i)&&Zd(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function s_(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=zS(e,t),o=i?(a,l)=>s[a][i[l]]:a=>s[a][0];n=n.map(a=>l=>a(l,r,o))}return n}function zS(e,t,n){if(!t.length)return n;const r=BOe(t),i=e.groups(),s=i?i.size:1;return n=n||n4(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=UOe(e,o,i);for(let l=0;l<s;++l)o.write(a[l],n,l)}):r.forEach(o=>{const a=zOe(e,o);o.write(a,n,0)}),n}function BOe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(CNt(r[i],t));return n}function zOe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function UOe(e,t,n){const{keys:r,size:i}=n,s=n4(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),l=a.length;for(let u=0;u<l;++u){const c=a[u];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let l=a.next(0);l>=0;l=a.next(l+1))t.add(s[r[l]],l,o)}else{const a=e.totalRows();for(let l=0;l<a;++l)t.add(s[r[l]],l,o)}return s}function VOe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const l=e.add(r[a],Array(s)),u=n[a];for(let c=0;c<s;++c)l[c]=u(i[c])}}function HOe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Cpe=HOe(uee);function kNt(e,t,n,r,i){let s,o,a,l,u;const c=m=>o[m-1]===o[m],d=r.length,f=i.length,h=r.length?BS(["w","r","k"],"{"+wk(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,l=y,u=v,a=i?i.map(_=>_.init()):null;for(let _=0;_<d;++_)r[_].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,_=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Cpe.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Cpe.right(o,o[p.i1-1])));for(let E=0;E<f;++E){const S=i[E],x=a[E];for(let T=_;T<p.i0;++T)S.rem(x,s[T],e);for(let T=w;T<p.i1;++T)S.add(x,s[T],e);S.write(x,l,u)}return h(p,l,u),l}};return p}const PNt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),NNt=e=>!!e.peers;function ONt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=gke(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function DNt(e,t,n,r={},i){const s=e.data(),o=MNt(i,s),a=o.length,l=BS(["r","d","op"],"{"+wk(t,(u,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((u,c)=>{const d=u.length,f=$Nt(e,u);for(let p=0;p<a;++p)o[p].init(u,f,r,c);const h=p=>r[p][c];for(let p=0;p<d;++p){for(let m=0;m<a;++m)o[m].step(p);l(u[p],s,h)}})}function MNt(e,t){const n={};return e.forEach(r=>{const i=PNt(r),s=NNt(r),o=`${i},${s}`,{aggOps:a,winOps:l}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});GJ(r.name)?a.push(r):l.push(ONt(r))}),Object.values(n).map(r=>kNt(t,r.frame,r.peers,r.winOps,BOe(r.aggOps,r.frame[0]!=null?-1:1)))}function $Nt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function LNt(e){return YJ(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function dee(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=mc(i.drop?null:e),a=t.map(f=>o.add(f,Array(s))),[l,u]=FNt(r),c=e.isGrouped()?e.groups().size:1,d=zS(e,l,n4(r.length,()=>Array(c)));return u.length?DNt(e,a,n,d,u):jNt(e,a,n,d),e.create(o)}function FNt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(LNt(s)?n:t).push(s)}return[t,n]}function jNt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(u,c)=>r[u][o[c]]:u=>r[u][0],l=t.length;for(let u=0;u<l;++u){const c=n[u],d=t[u];if(i)for(let f=i.next(0);f>=0;f=i.next(f+1))d[f]=c(f,s,a);else{const f=e.totalRows();for(let h=0;h<f;++h)d[h]=c(h,s,a)}}}function BNt(e,t,n={}){const r=dee(e,hu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:jOe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function zNt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const UN=2147483648,UNt=4294967295;class qOe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&UN>>>t}set(t){this._bits[t>>5]|=UN>>>t}clear(t){this._bits[t>>5]&=~(UN>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&UNt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=UN>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function VNt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new qOe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function HNt(e,t){const n=hu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=dee(e,n,{drop:!0}).column("p");r=s=>i[s]}return VNt(e,r)}function WOe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),l=s_(e,r,n),u=mc(),c=new Set(t),d=[],f=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=u.add(w,[]);c.has(w)||(d.push(e.column(w)),f.push(E))}}),t.forEach(w=>{a.has(w)||(u.has(w)||u.add(w,[]),h.push(u.data[w]))});const p=o?u.add(o,[]):null;let m=0;const g=d.length,y=h.length,v=(w,E)=>{for(let S=0;S<g;++S)f[S].length=m+E,f[S].fill(d[S].get(w),m,m+E)},_=p?(w,E)=>{for(let S=0;S<E;++S)p[w+S]=S}:()=>{};if(y===1){const w=l[0],E=h[0];e.scan((S,x)=>{const T=du(w(S,x)),I=Math.min(T.length,s);v(S,I);for(let P=0;P<I;++P)E[m+P]=T[P];_(m,I),m+=I})}else e.scan((w,E)=>{let S=0;const x=l.map(T=>{const I=du(T(w,E));return S=Math.min(Math.max(S,I.length),s),I});v(w,S);for(let T=0;T<y;++T){const I=h[T],P=x[T];for(let k=0;k<S;++k)I[m+k]=P[k]}_(m,S),m+=S});return e.create(u.new())}function qNt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=s_(e,r,n);return WOe(e,{names:[s,o],exprs:[()=>t,(l,u)=>a.map(c=>c(l,u))]},{...i,drop:t})}function xf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=gl(o)?t.columnName(o):o,na(o)?i.set(o,gb(o)):Ni(o)?eg(t,o).forEach(s):La(o)?DNe(i,o):Ln(`Invalid ${e} value: ${o+""}`)};return du(n).forEach(s),r.preparse&&r.preparse(i),hu(i,{table:t,...r})}function WNt(e,t,n){return qNt(e,xf("fold",e,t),n)}function Ape(e,t,n,r){const i=n&&n.length;return GNt(i?YNt(e,n,r):e,t,i)}function GNt(e,{names:t,exprs:n,ops:r},i){const s=s_(e,r,n),o=i?null:mc(e),a=e.totalRows();return t.forEach((l,u)=>{const c=e.column(l),d=i?c.data:o.add(l,Array(a)),f=s[u];e.scan(h=>{const p=c.get(h);d[h]=Zd(p)?p:f(h)})}),i?e:e.create(o)}function YNt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,l=e3(o);e.scan((p,m)=>a.add(l(p,m)));const u=e.columnNames(),c=mc(),d=u.map(p=>c.add(p,[]));u.forEach((p,m)=>{const g=i[p],y=d[m];e.scan(v=>y.push(g.get(v)))});const f=e3(o.map((p,m)=>g=>g[m])),h=BS("v","{"+d.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",d,u.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Ipe(r,n,(y,v)=>{a.has(f(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Ipe(r,n,p=>{a.has(f(p))||h(p)});return e.create(c.new())}function Ipe(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),l=[];if(e){const{get:c,rows:d,size:f}=e;o[0]=f,l.push((h,p)=>{const m=d[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,d)=>{const f=d+r;o[d+i]=c.length,l.push((h,p)=>h[f]=c[p])});const u=Array(r+t.length);for(let c=0;c<s;++c)l[c](u,0);n(u,a);for(let c=s-1;c>=0;){const d=++a[c];d<o[c]?(l[c](u,d),n(u,a),c=s-1):(a[c]=0,l[c](u,0),--c)}}function fee(e,{names:t,exprs:n,ops:r}){const i=mc(),s=e.groups();return s&&VOe(i,s),KNt(t,n,s,zS(e,r),i),e.create(i.new())}function KNt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(l,u)=>r[l][u],a=e.length;for(let l=0;l<a;++l){const u=t[l];if(u.field!=null)i.add(e[l],r[u.field]);else if(s>1){const c=i.add(e[l],Array(s));for(let d=0;d<s;++d)c[d]=u(d,null,o)}else i.add(e[l],[u(0,null,o)])}}function XNt(e,t,n={}){if(t=hu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:Ln(`Invalid impute column ${rp(r)}`)),n.expand){const r={preparse:QNt,aggronly:!0},i=xf("impute",e,n.expand,r),s=fee(e.ungroup(),i);return Ape(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Ape(e,t)}function QNt(e){e.forEach((t,n)=>t.field?e.set(n,rke(t+"")):0)}function JNt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function GOe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function ZNt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function eOt(e,t){const n=["i","a","j","b"];return BS(n,"{"+wk(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function tOt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),l=a.length,u=new Int32Array(l),c=t.data(),d=t.indices(!1),f=d.length,h=new Int32Array(f),p=r.length,m=mc(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=eOt(g,y);if((Tr(n)?rOt:nOt)(v,n,o,c,a,d,u,h,l,f),s.left)for(let w=0;w<l;++w)u[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<f;++w)h[w]||v(-1,o,d[w],c);return e.create(m.new())}function nOt(e,t,n,r,i,s,o,a,l,u){for(let c=0;c<l;++c){const d=i[c];for(let f=0;f<u;++f){const h=s[f];t(d,n,h,r)&&(e(d,n,h,r),o[c]=1,a[f]=1)}}}function rOt(e,[t,n],r,i,s,o,a,l,u,c){let d,f,h,p,m,g,y,v,_=e;u>=c?(d=r,f=t,h=a,p=s,m=i,g=n,y=l,v=o):(d=i,f=n,h=l,p=o,m=r,g=t,y=a,v=s,_=(S,x,T,I)=>e(T,I,S,x));const w=ZNt(v,m,g),E=p.length;for(let S=0;S<E;++S){const x=p[S],T=w.get(f(x,d));if(T){const I=T.length;for(let P=0;P<I;++P){const k=T[P];_(x,d,v[k],m),y[k]=1}h[S]=1}}}function E3(e,t,n){const r=new Map;du(n).forEach((s,o)=>{s=gl(s)?t.columnName(s):s,na(s)?r.set(o,gb(s)):Ni(s)||La(s)&&s.expr?r.set(o,s):Ln(`Invalid ${e} key value: ${s+""}`)});const i=hu(r,{table:t,aggregate:!1,window:!1});return e3(i.exprs,!0)}function iOt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function hee(e,t,n){if(n)na(n)?n=[n,n]:Tr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=iOt(e.columnNames(),t.columnNames());r.length||Ln("Natural join requires shared column names."),n=[r,r]}return n}function YOe(e,t,n,r){return n.length!==r.length&&Ln("Mismatched number of join keys"),[E3("join",e,n),E3("join",t,r)]}const sOt={aggregate:!1,window:!1},oOt={...sOt,index:1};function Rpe(e,t,n,r,i={}){n=hee(e,t,n);const s={join:[e,t]};let o;if(Tr(n)){const[a,l]=n.map(du);o=YOe(e,t,a,l),r||(r=aOt(e,a,l,i))}else o=hu({on:n},s).exprs[0],r||(r=[gx(),gx()]);return tOt(e,t,o,lOt(e,t,r,s,i&&i.suffix),i)}function aOt(e,t,n,r){const i=[];t.forEach((o,a)=>na(o)&&o===n[a]?i.push(o):0);const s=$Ne(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const l=`[${rp(a)}]`;return o.has(a)?{[a]:`(a, b) => a${l} == null ? b${l} : a${l}`}:a}),s]}return r.right?[s,gx()]:[gx(),s]}function lOt(e,t,n,r,i=[]){if(Tr(n)){let s,o,a,l=n.length;s=o=a={names:[],exprs:[]},l--&&(s=xf("join",e,n[0],r)),l--&&(o=xf("join",t,n[1],oOt)),l--&&(a=hu(n[2],r));const u=new Set,c=new Set(s.names);return o.names.forEach(d=>{c.has(d)&&u.add(d)}),u.size&&(i[0]!==""&&kpe(s.names,u,i[0]||"_1"),i[1]!==""&&kpe(o.names,u,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return hu(n,r)}function kpe(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function uOt(e,t,n,r={}){const i=new qOe(e.totalRows());return(Tr(n)?cOt:dOt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function cOt(e,t,n,[r,i]){const s=GOe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function dOt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const l=t.indices(!1),u=n.indices(!1);for(let c=0;c<i;++c){const d=l[c];for(let f=0;f<s;++f)if(r(d,o,u[f],a)){e.set(d);break}}}else for(let l=0;l<i;++l)for(let u=0;u<s;++u)if(r(l,o,u,a)){e.set(l);break}}function Ppe(e,t,n,r){n=hee(e,t,n);const i=Tr(n)?YOe(e,t,...n.map(du)):hu({on:n},{join:[e,t]}).exprs[0];return uOt(e,t,i,r)}function fOt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=mc(e),l=e.totalRows();i.forEach(f=>a.add(f,Array(l).fill(wr)));const u=GOe(t,r),c=BS(["lr","rr","data"],"{"+wk(i,(f,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(f=>a.data[f]),s_(t,o,s)),d=t.data();return e.scan((f,h)=>{const p=u.get(n(f,h));p>=0&&c(f,p,d)}),e.create(a)}function hOt(e,t,n,r){return n=hee(e,t,n),fOt(e,t,[E3("lookup",e,n[0]),E3("lookup",t,n[1])],xf("lookup",t,r))}const jH=(e,t)=>e??t;function pOt(e,t,n,r={}){const{keys:i,keyColumn:s}=mOt(e,t,r),o=jH(r.valueSeparator,"_"),a=n.names.length>1?(u,c)=>c+o+i[u]:u=>i[u],l=i.map(u=>zS(e,n.ops.map(c=>{if(c.name==="count"){const f=h=>u===s[h]?1:NaN;return f.toString=()=>u+":1",{...c,name:"sum",fields:[f]}}const d=c.fields.map(f=>{const h=(p,m)=>u===s[p]?f(p,m):NaN;return h.toString=()=>u+":"+f,h});return{...c,fields:d}})));return e.create(gOt(n,a,e.groups(),l))}function mOt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=jH(n.sort,!0),s=jH(n.keySeparator,"_"),o=s_(e,t.ops,t.exprs),a=o.length===1?o[0]:(d,f)=>o.map(h=>h(d,f)).join(s),l=Array(e.totalRows());e.scan((d,f)=>l[d]=a(d,f));const u=zS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[d=>l[d]],params:[]}])[0][0],c=i?u.sort():u;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:l}}function gOt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=mc(),a=i.length,l=e.length;let u;const c=(d,f)=>u[d][f];r&&VOe(o,r);for(let d=0;d<l;++d){const f=t[d];if(f.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[d]),i[h][f.field]);else if(s>1)for(let h=0;h<a;++h){u=i[h];const p=o.add(n(h,e[d]),Array(s));for(let m=0;m<s;++m)p[m]=f(m,null,c)}else for(let h=0;h<a;++h)u=i[h],o.add(n(h,e[d]),[f(0,null,c)])}return o.new()}function yOt(e,t,n,r){return pOt(e,xf("fold",e,t),xf("fold",e,n,{preparse:vOt,aggronly:!0}),r)}function vOt(e){e.forEach((t,n)=>t.field?e.set(n,eke(t+"")):0)}function bOt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),lee(e,eg(e,t,n))}function Npe(e,t){return fee(e,hu(t,{table:e,aggronly:!0,window:!1}))}function _Ot(e,t,n,r){return(t?r?EOt:wOt:r?SOt:xOt)(e.length,e,n,r)}function wOt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*kS()|0];return t}function EOt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let l=0;l<i;++l)s[l]=o+=r(n[l]);const a=HOe(uee).right;for(let l=0;l<e;++l)t[l]=n[a(s,o*kS())];return t}function xOt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*kS();s<e&&(t[s|0]=n[i])}return t}function SOt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(kS())/r(n[a]);o.sort((a,l)=>s[a]-s[l]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function TOt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=kS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function COt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,d)=>{let f=t(d);return a+=f=i?f:Math.min(c.length,f),f});const l=new Uint32Array(a);let u=0;return o.forEach((c,d)=>{const f=t[d],h=l.subarray(u,u+=f);!i&&f===c.length?h.set(c):_Ot(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&TOt(l),e.reify(l)}function AOt(e,t,n={}){return COt(e,IOt(e,t),ROt(e,n.weight),n)}const KOe=e=>t=>e.get(t)||0;function IOt(e,t){return gl(t)?()=>t:KOe(fee(e,hu({size:t},{table:e,window:!1})).column("size"))}function ROt(e,t){return t==null?null:(t=gl(t)?e.columnName(t):t,KOe(na(t)?e.column(t):dee(e,hu({w:t},{table:e}),{drop:!0}).column("w")))}function kOt(e,t){return lee(e,eg(e,t))}function POt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),l=s_(e,r,n),u=mc(),c=t.reduce((f,h,p)=>f.set(h,p),new Map),d=(f,h)=>{const p=NOt(e,l[f],a),m=p.length;for(let g=0;g<m;++g)u.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(f=>{c.has(f)?(o||u.add(f,e.column(f)),d(c.get(f),f),c.delete(f)):u.add(f,e.column(f))}),c.forEach(d),e.create(u)}function NOt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=du(t(s,o)),l=Math.min(a.length,n);for(;i.length<l;)i.push(Array(r).fill(wr));for(let u=0;u<l;++u)i[u][s]=a[u]}),i}function OOt(e,t,n){return POt(e,xf("spread",e,t),n)}function DOt(e,t){return e.concat(t).dedupe()}function MOt(e,t,n){return WOe(e,xf("unroll",e,t),n&&n.drop?{...n,drop:xf("unroll",e,n.drop).names}:n)}function $Ot(e,t){return e.create({groups:LOt(e,t)})}function LOt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=s_(e,r,n);const o=e3(s),a=e.totalRows(),l=new Uint32Array(a),u={},c=[],d=e.data(),f=e.mask();if(f)for(let h=f.next(0);h>=0;h=f.next(h+1)){const p=o(h,d)+"",m=u[p];l[h]=m??(u[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,d)+"",m=u[p];l[h]=m??(u[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,d))),{keys:l,get:s,names:t,rows:c,size:c.length}}function FOt(e,t){return $Ot(e,xf("groupby",e,t))}function jOt(e,t){return e.create({order:t})}const BOt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function zOt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:l}=hu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([Z$(p,{index:"a",op:o}),Z$(p,{index:"b",op:a})])},window:!1}),u=zS(e,l),c=(h,p)=>u[h][p],d=n.length;let f="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<d;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];f+=BOt(m,g,-p,p)}return f+="0;};",Function("op","keys","fn","data",f)(c,s,i,e.data())}function UOt(e,t){return jOt(e,VOt(e,t))}function VOt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(La(o)&&!Ni(o))for(const a in o)i(o[a]);else i(gl(o)?gb(s,e.columnName(o)):na(o)?gb(s):Ni(o)?s:Ln(`Invalid orderby field: ${s+""}`))}),zOt(e,r)}function HOt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=mc();return e.columnNames().forEach(o=>{const a=Array(r);let l=0;i.forEach(u=>{const c=u.column(o)||{get:()=>wr};u.scan(d=>a[l++]=c.get(d))}),s.add(o,a)}),e.create(s.new())}function qOt(e,t){const n=mc(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},l=new Uint32Array(a+1);s.forEach(f=>n.add(f,null));const u=r?UOe(e,t,r):[zOe(e,t)];t.outputs().map(f=>n.add(f,[]));const c=l.length-1;let d=0;for(let f=0;f<c;++f)d+=l[f+1]=t.write(u[f],n.data,l[f]);if(r){const f=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(d),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],f),v,v+=l[y+1])})}return e.create(n.new())}function WOt(e){return e.isGrouped()?e.create({groups:null}):e}function GOt(e){return e.isOrdered()?e.create({order:null}):e}const YOt={__antijoin:(e,t,n)=>Ppe(e,t,n,{anti:!0}),__count:(e,t={})=>Npe(e,{[t.as||"count"]:tke()}),__cross:(e,t,n,r)=>Rpe(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:HOt,__dedupe:wNt,__derive:BNt,__except:zNt,__filter:HNt,__fold:WNt,__impute:XNt,__intersect:JNt,__join:Rpe,__lookup:hOt,__pivot:yOt,__relocate:jOe,__rename:bOt,__rollup:Npe,__sample:AOt,__select:kOt,__semijoin:Ppe,__spread:OOt,__union:DOt,__unroll:MOt,__groupby:FOt,__orderby:UOt,__ungroup:WOt,__unorder:GOt,__reduce:qOt};Object.assign(Ih.prototype,YOt);function KOt(e,t){return Ih.new(e,t)}function pee(e,t){return Ih.from(e,t)}function VN(e,t={}){const n=`d[${JSON.stringify(e)}]`,{maxbins:r,nice:i,minstep:s,step:o,offset:a}=t,l=[r,i,s,o];let u=l.length;for(;u&&l[--u]==null;)l.pop();const c=l.length?", "+l.map(d=>d+"").join(", "):"";return`d => op.bin(${n}, ...op.bins(${n}${c}), ${a||0})`}function m1(e){return E4(e,{escape:!0,toString(){Ln("Escaped values can not be serialized.")}})}Ih.prototype;function Yd(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function xy(e){return!!e&&!!e[$i]}function rg(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===iDt}(e)||Array.isArray(e)||!!e[jpe]||!!(!((t=e.constructor)===null||t===void 0)&&t[jpe])||mee(e)||gee(e))}function yb(e,t,n){n===void 0&&(n=!1),US(e)===0?(n?Object.keys:vE)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function US(e){var t=e[$i];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:mee(e)?2:gee(e)?3:0}function yE(e,t){return US(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function XOt(e,t){return US(e)===2?e.get(t):e[t]}function XOe(e,t,n){var r=US(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function QOe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function mee(e){return nDt&&e instanceof Map}function gee(e){return rDt&&e instanceof Set}function n1(e){return e.o||e.t}function yee(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ZOe(e);delete t[$i];for(var n=vE(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function vee(e,t){return t===void 0&&(t=!1),bee(e)||xy(e)||!rg(e)||(US(e)>1&&(e.set=e.add=e.clear=e.delete=QOt),Object.freeze(e),t&&yb(e,function(n,r){return vee(r,!0)},!0)),e}function QOt(){Yd(2)}function bee(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Vh(e){var t=VH[e];return t||Yd(18,e),t}function JOt(e,t){VH[e]||(VH[e]=t)}function BH(){return NI}function x9(e,t){t&&(Vh("Patches"),e.u=[],e.s=[],e.v=t)}function x3(e){zH(e),e.p.forEach(ZOt),e.p=null}function zH(e){e===NI&&(NI=e.l)}function Ope(e){return NI={p:[],l:NI,h:e,m:!0,_:0}}function ZOt(e){var t=e[$i];t.i===0||t.i===1?t.j():t.g=!0}function S9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Vh("ES5").S(t,e,r),r?(n[$i].P&&(x3(t),Yd(4)),rg(e)&&(e=S3(t,e),t.l||T3(t,e)),t.u&&Vh("Patches").M(n[$i].t,e,t.u,t.s)):e=S3(t,n,[]),x3(t),t.u&&t.v(t.u,t.s),e!==JOe?e:void 0}function S3(e,t,n){if(bee(t))return t;var r=t[$i];if(!r)return yb(t,function(a,l){return Dpe(e,r,t,a,l,n)},!0),t;if(r.A!==e)return t;if(!r.P)return T3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=yee(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),yb(s,function(a,l){return Dpe(e,r,i,a,l,n,o)}),T3(e,i,!1),n&&e.u&&Vh("Patches").N(r,n,e.u,e.s)}return r.o}function Dpe(e,t,n,r,i,s,o){if(xy(i)){var a=S3(e,i,s&&t&&t.i!==3&&!yE(t.R,r)?s.concat(r):void 0);if(XOe(n,r,a),!xy(a))return;e.m=!1}else o&&n.add(i);if(rg(i)&&!bee(i)){if(!e.h.D&&e._<1)return;S3(e,i),t&&t.A.l||T3(e,i)}}function T3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&vee(t,n)}function T9(e,t){var n=e[$i];return(n?n1(n):e)[t]}function Mpe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function d0(e){e.P||(e.P=!0,e.l&&d0(e.l))}function C9(e){e.o||(e.o=yee(e.t))}function UH(e,t,n){var r=mee(t)?Vh("MapSet").F(t,n):gee(t)?Vh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:BH(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,u=OI;o&&(l=[a],u=t2);var c=Proxy.revocable(l,u),d=c.revoke,f=c.proxy;return a.k=f,a.j=d,f}(t,n):Vh("ES5").J(t,n);return(n?n.A:BH()).p.push(r),r}function eDt(e){return xy(e)||Yd(22,e),function t(n){if(!rg(n))return n;var r,i=n[$i],s=US(n);if(i){if(!i.P&&(i.i<4||!Vh("ES5").K(i)))return i.t;i.I=!0,r=$pe(n,s),i.I=!1}else r=$pe(n,s);return yb(r,function(o,a){i&&XOt(i.t,o)===a||XOe(r,o,t(a))}),s===3?new Set(r):r}(e)}function $pe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return yee(e)}function tDt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[$i];return OI.get(l,s)},set:function(l){var u=this[$i];OI.set(u,s,l)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][$i];if(!a.P)switch(a.i){case 5:r(a)&&d0(a);break;case 4:n(a)&&d0(a)}}}function n(s){for(var o=s.t,a=s.k,l=vE(a),u=l.length-1;u>=0;u--){var c=l[u];if(c!==$i){var d=o[c];if(d===void 0&&!yE(o,c))return!0;var f=a[c],h=f&&f[$i];if(h?h.t!==d:!QOe(f,d))return!0}}var p=!!o[$i];return l.length!==vE(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};JOt("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(c,d){if(c){for(var f=Array(d.length),h=0;h<d.length;h++)Object.defineProperty(f,""+h,e(h,!0));return f}var p=ZOe(d);delete p[$i];for(var m=vE(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(d),p)}(a,s),u={i:a?5:4,A:o?o.A:BH(),P:!1,I:!1,R:{},l:o,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,$i,{value:u,writable:!0}),l},S:function(s,o,a){a?xy(o)&&o[$i].A===s&&t(s.p):(s.u&&function l(u){if(u&&typeof u=="object"){var c=u[$i];if(c){var d=c.t,f=c.k,h=c.R,p=c.i;if(p===4)yb(f,function(_){_!==$i&&(d[_]!==void 0||yE(d,_)?h[_]||l(f[_]):(h[_]=!0,d0(c)))}),yb(d,function(_){f[_]!==void 0||yE(f,_)||(h[_]=!1,d0(c))});else if(p===5){if(r(c)&&(d0(c),h.length=!0),f.length<d.length)for(var m=f.length;m<d.length;m++)h[m]=!1;else for(var g=d.length;g<f.length;g++)h[g]=!0;for(var y=Math.min(f.length,d.length),v=0;v<y;v++)f.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&l(f[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Lpe,NI,_ee=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",nDt=typeof Map<"u",rDt=typeof Set<"u",Fpe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",JOe=_ee?Symbol.for("immer-nothing"):((Lpe={})["immer-nothing"]=!0,Lpe),jpe=_ee?Symbol.for("immer-draftable"):"__$immer_draftable",$i=_ee?Symbol.for("immer-state"):"__$immer_state",iDt=""+Object.prototype.constructor,vE=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ZOe=Object.getOwnPropertyDescriptors||function(e){var t={};return vE(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},VH={},OI={get:function(e,t){if(t===$i)return e;var n=n1(e);if(!yE(n,t))return function(i,s,o){var a,l=Mpe(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!rg(r)?r:r===T9(e.t,t)?(C9(e),e.o[t]=UH(e.A.h,r,e)):r},has:function(e,t){return t in n1(e)},ownKeys:function(e){return Reflect.ownKeys(n1(e))},set:function(e,t,n){var r=Mpe(n1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=T9(n1(e),t),s=i==null?void 0:i[$i];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(QOe(n,i)&&(n!==void 0||yE(e.t,t)))return!0;C9(e),d0(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return T9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,C9(e),d0(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=n1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Yd(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Yd(12)}},t2={};yb(OI,function(e,t){t2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),t2.deleteProperty=function(e,t){return t2.set.call(this,e,t,void 0)},t2.set=function(e,t,n){return OI.set.call(this,e[0],t,n,e[0])};var sDt=function(){function e(n){var r=this;this.O=Fpe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return l.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var u;if(typeof s!="function"&&Yd(6),o!==void 0&&typeof o!="function"&&Yd(7),rg(i)){var c=Ope(r),d=UH(r,i,void 0),f=!0;try{u=s(d),f=!1}finally{f?x3(c):zH(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(m){return x9(c,o),S9(m,c)},function(m){throw x3(c),m}):(x9(c,o),S9(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===JOe&&(u=void 0),r.D&&vee(u,!0),o){var h=[],p=[];Vh("Patches").M(i,u,h,p),o(h,p)}return u}Yd(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return r.produceWithPatches(u,function(h){return i.apply(void 0,[h].concat(d))})};var o,a,l=r.produce(i,s,function(u,c){o=u,a=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){rg(n)||Yd(8),xy(n)&&(n=eDt(n));var r=Ope(this),i=UH(this,n,void 0);return i[$i].C=!0,zH(r),i},t.finishDraft=function(n,r){var i=n&&n[$i],s=i.A;return x9(s,r),S9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Fpe&&Yd(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Vh("Patches").$;return xy(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),ic=new sDt,oDt=ic.produce;ic.produceWithPatches.bind(ic);ic.setAutoFreeze.bind(ic);ic.setUseProxies.bind(ic);ic.applyPatches.bind(ic);ic.createDraft.bind(ic);ic.finishDraft.bind(ic);const eDe=oDt;function DI(e){"@babel/helpers - typeof";return DI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DI(e)}function aDt(e,t){if(DI(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(DI(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lDt(e){var t=aDt(e,"string");return DI(t)=="symbol"?t:t+""}function uDt(e,t,n){return(t=lDt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bpe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zpe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Bpe(Object(n),!0).forEach(function(r){uDt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bpe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _a(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Upe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),A9=function(){return Math.random().toString(36).substring(7).split("").join(".")},C3={INIT:"@@redux/INIT"+A9(),REPLACE:"@@redux/REPLACE"+A9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+A9()}};function cDt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function tDe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(_a(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(_a(1));return n(tDe)(e,t)}if(typeof e!="function")throw new Error(_a(2));var i=e,s=t,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function c(){if(l)throw new Error(_a(3));return s}function d(m){if(typeof m!="function")throw new Error(_a(4));if(l)throw new Error(_a(5));var g=!0;return u(),a.push(m),function(){if(g){if(l)throw new Error(_a(6));g=!1,u();var v=a.indexOf(m);a.splice(v,1),o=null}}}function f(m){if(!cDt(m))throw new Error(_a(7));if(typeof m.type>"u")throw new Error(_a(8));if(l)throw new Error(_a(9));try{l=!0,s=i(s,m)}finally{l=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(_a(10));i=m,f({type:C3.REPLACE})}function p(){var m,g=d;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(_a(11));function _(){v.next&&v.next(c())}_();var w=g(_);return{unsubscribe:w}}},m[Upe]=function(){return this},m}return f({type:C3.INIT}),r={dispatch:f,subscribe:d,getState:c,replaceReducer:h},r[Upe]=p,r}function dDt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:C3.INIT});if(typeof r>"u")throw new Error(_a(12));if(typeof n(void 0,{type:C3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(_a(13))})}function fDt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{dDt(n)}catch(a){o=a}return function(l,u){if(l===void 0&&(l={}),o)throw o;for(var c=!1,d={},f=0;f<s.length;f++){var h=s[f],p=n[h],m=l[h],g=p(m,u);if(typeof g>"u")throw u&&u.type,new Error(_a(14));d[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(l).length,c?d:l}}function A3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function hDt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(_a(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(l){return l(o)});return s=A3.apply(void 0,a)(i.dispatch),zpe(zpe({},i),{},{dispatch:s})}}}function nDe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var HH=nDe();HH.withExtraArgument=nDe;var rDe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ek=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},vb=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},pDt=Object.defineProperty,mDt=Object.defineProperties,gDt=Object.getOwnPropertyDescriptors,Vpe=Object.getOwnPropertySymbols,yDt=Object.prototype.hasOwnProperty,vDt=Object.prototype.propertyIsEnumerable,Hpe=function(e,t,n){return t in e?pDt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},G0=function(e,t){for(var n in t||(t={}))yDt.call(t,n)&&Hpe(e,n,t[n]);if(Vpe)for(var r=0,i=Vpe(t);r<i.length;r++){var n=i[r];vDt.call(t,n)&&Hpe(e,n,t[n])}return e},I9=function(e,t){return mDt(e,gDt(t))},xk=function(e,t,n){return new Promise(function(r,i){var s=function(l){try{a(n.next(l))}catch(u){i(u)}},o=function(l){try{a(n.throw(l))}catch(u){i(u)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(s,o)};a((n=n.apply(e,t)).next())})},bDt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?A3:A3.apply(null,arguments)};function iDe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var _Dt=function(e){return e&&typeof e.match=="function"};function Hh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return G0(G0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function wDt(e){return iDe(e)&&"type"in e}var EDt=function(e){rDe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,vb([void 0],n[0].concat(this)))):new(t.bind.apply(t,vb([void 0],n.concat(this))))},t}(Array),xDt=function(e){rDe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,vb([void 0],n[0].concat(this)))):new(t.bind.apply(t,vb([void 0],n.concat(this))))},t}(Array);function qH(e){return rg(e)?eDe(e,function(){}):e}function SDt(e){return typeof e=="boolean"}function TDt(){return function(t){return CDt(t)}}function CDt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new EDt;return n&&(SDt(n)?r.push(HH):r.push(HH.withExtraArgument(n.extraArgument))),r}var ADt=!0;function IDt(e){var t=TDt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,l=a===void 0?!0:a,u=n.preloadedState,c=u===void 0?void 0:u,d=n.enhancers,f=d===void 0?void 0:d,h;if(typeof i=="function")h=i;else if(iDe(i))h=fDt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=hDt.apply(void 0,p),g=A3;l&&(g=bDt(G0({trace:!ADt},typeof l=="object"&&l)));var y=new xDt(m),v=y;Array.isArray(f)?v=vb([m],f):typeof f=="function"&&(v=f(y));var _=g.apply(void 0,v);return tDe(h,c,_)}function sDe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function RDt(e){return typeof e=="function"}function kDt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?sDe(t):[t,n,r],s=i[0],o=i[1],a=i[2],l;if(RDt(e))l=function(){return qH(e())};else{var u=qH(e);l=function(){return u}}function c(d,f){d===void 0&&(d=l());var h=vb([s[f.type]],o.filter(function(p){var m=p.matcher;return m(f)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(xy(p)){var g=p,y=m(g,f);return y===void 0?p:y}else{if(rg(p))return eDe(p,function(v){return m(v,f)});var y=m(p,f);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},d)}return c.getInitialState=l,c}function PDt(e,t){return e+"/"+t}function NDt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:qH(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var d=r[c],f=PDt(t,c),h,p;"reducer"in d?(h=d.reducer,p=d.prepare):h=d,s[c]=h,o[f]=h,a[c]=p?Hh(f,p):Hh(f)});function l(){var c=typeof e.extraReducers=="function"?sDe(e.extraReducers):[e.extraReducers],d=c[0],f=d===void 0?{}:d,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=G0(G0({},f),o);return kDt(n,function(v){for(var _ in y)v.addCase(_,y[_]);for(var w=0,E=p;w<E.length;w++){var S=E[w];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var u;return{name:t,reducer:function(c,d){return u||(u=l()),u(c,d)},actions:a,caseReducers:s,getInitialState:function(){return u||(u=l()),u.getInitialState()}}}var ODt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",oDe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=ODt[Math.random()*64|0];return t},DDt=["name","message","stack","code"],R9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),qpe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),MDt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=DDt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Hh(t+"/fulfilled",function(u,c,d,f){return{payload:u,meta:I9(G0({},f||{}),{arg:d,requestId:c,requestStatus:"fulfilled"})}}),s=Hh(t+"/pending",function(u,c,d){return{payload:void 0,meta:I9(G0({},d||{}),{arg:c,requestId:u,requestStatus:"pending"})}}),o=Hh(t+"/rejected",function(u,c,d,f,h){return{payload:f,error:(r&&r.serializeError||MDt)(u||"Rejected"),meta:I9(G0({},h||{}),{arg:d,requestId:c,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){},u}();function l(u){return function(c,d,f){var h=r!=null&&r.idGenerator?r.idGenerator(u):oDe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return xk(this,null,function(){var v,_,w,E,S,x,T;return Ek(this,function(I){switch(I.label){case 0:return I.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,u,{getState:d,extra:f}),LDt(E)?[4,E]:[3,2];case 1:E=I.sent(),I.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(P,k){return p.signal.addEventListener("abort",function(){return k({name:"AbortError",message:m||"Aborted"})})}),c(s(h,u,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:u},{getState:d,extra:f}))),[4,Promise.race([S,Promise.resolve(n(u,{dispatch:c,getState:d,extra:f,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(P,k){return new R9(P,k)},fulfillWithValue:function(P,k){return new qpe(P,k)}})).then(function(P){if(P instanceof R9)throw P;return P instanceof qpe?i(P.payload,h,u,P.meta):i(P,h,u)})])];case 3:return w=I.sent(),[3,5];case 4:return x=I.sent(),w=x instanceof R9?o(null,h,u,x.payload,x.meta):o(x,h,u),[3,5];case 5:return T=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,T||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:u,unwrap:function(){return y.then($Dt)}})}}return Object.assign(l,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function $Dt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function LDt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var FDt=function(e,t){return _Dt(e)?e.match(t):e(t)};function Wpe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return FDt(r,n)})}}var wee=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},WH=function(){},aDe=function(e,t){return t===void 0&&(t=WH),e.catch(t),e},lDe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},bE=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},jDt="task",uDe="listener",cDe="completed",Eee="cancelled",BDt="task-"+Eee,zDt="task-"+cDe,dDe=uDe+"-"+Eee,UDt=uDe+"-"+cDe,x4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=jDt+" "+Eee+" (reason: "+t+")"}return e}(),_E=function(e){if(e.aborted)throw new x4(e.reason)};function fDe(e,t){var n=WH;return new Promise(function(r,i){var s=function(){return i(new x4(e.reason))};if(e.aborted){s();return}n=lDe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=WH})}var VDt=function(e,t){return xk(void 0,null,function(){var n,r;return Ek(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof x4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},I3=function(e){return function(t){return aDe(fDe(e,t).then(function(n){return _E(e),n}))}},hDe=function(e){var t=I3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},HDt=Object.assign,Gpe={},Sk="listenerMiddleware",qDt=function(e,t){var n=function(r){return lDe(e,function(){return bE(r,e.reason)})};return function(r,i){wee(r,"taskExecutor");var s=new AbortController;n(s);var o=VDt(function(){return xk(void 0,null,function(){var a;return Ek(this,function(l){switch(l.label){case 0:return _E(e),_E(s.signal),[4,r({pause:I3(s.signal),delay:hDe(s.signal),signal:s.signal})];case 1:return a=l.sent(),_E(s.signal),[2,a]}})})},function(){return bE(s,zDt)});return i!=null&&i.autoJoin&&t.push(o),{result:I3(e)(o),cancel:function(){bE(s,BDt)}}}},WDt=function(e,t){var n=function(r,i){return xk(void 0,null,function(){var s,o,a,l;return Ek(this,function(u){switch(u.label){case 0:_E(t),s=function(){},o=new Promise(function(c,d){var f=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){f(),d()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,fDe(t,Promise.race(a))];case 2:return l=u.sent(),_E(t),[2,l];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return aDe(n(r,i))}},pDe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Hh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return wee(s,"options.listener"),{predicate:i,type:t,effect:s}},GDt=function(e){var t=pDe(e),n=t.type,r=t.predicate,i=t.effect,s=oDe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},GH=function(e){e.pending.forEach(function(t){bE(t,dDe)})},YDt=function(e){return function(){e.forEach(GH),e.clear()}},Ype=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},KDt=Hh(Sk+"/add"),XDt=Hh(Sk+"/removeAll"),QDt=Hh(Sk+"/remove"),JDt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,vb([Sk+"/error"],e))};function ZDt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?JDt:i;wee(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&GH(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},l=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=GDt(h)),o(p)},u=function(h){var p=pDe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(_){var w=typeof m=="string"?_.type===m:_.predicate===y;return w&&_.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&GH(v)),!!v},c=function(h,p,m,g){return xk(t,null,function(){var y,v,_,w;return Ek(this,function(E){switch(E.label){case 0:y=new AbortController,v=WDt(l,y.signal),_=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,HDt({},m,{getOriginalState:g,condition:function(S,x){return v(S,x).then(Boolean)},take:v,delay:hDe(y.signal),pause:I3(y.signal),extra:r,signal:y.signal,fork:qDt(y.signal,_),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,x,T){S!==y&&(bE(S,dDe),T.delete(S))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof x4||Ype(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(_)];case 5:return E.sent(),bE(y,UDt),h.pending.delete(y),[7];case 6:return[2]}})})},d=YDt(n),f=function(h){return function(p){return function(m){if(!wDt(m))return p(m);if(KDt.match(m))return l(m.payload);if(XDt.match(m)){d();return}if(QDt.match(m))return u(m.payload);var g=h.getState(),y=function(){if(g===Gpe)throw new Error(Sk+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var _=h.getState(),w=Array.from(n.values()),E=0,S=w;E<S.length;E++){var x=S[E],T=!1;try{T=x.predicate(m,_,g)}catch(I){T=!1,Ype(s,I,{raisedBy:"predicate"})}T&&c(x,m,h,y)}}finally{g=Gpe}return v}}};return{middleware:f,startListening:l,stopListening:u,clearListeners:d}}var Kpe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);tDt();function eMt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let HN;const tMt=new Uint8Array(16);function nMt(){if(!HN&&(HN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!HN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return HN(tMt)}const Po=[];for(let e=0;e<256;++e)Po.push((e+256).toString(16).slice(1));function rMt(e,t=0){return(Po[e[t+0]]+Po[e[t+1]]+Po[e[t+2]]+Po[e[t+3]]+"-"+Po[e[t+4]]+Po[e[t+5]]+"-"+Po[e[t+6]]+Po[e[t+7]]+"-"+Po[e[t+8]]+Po[e[t+9]]+"-"+Po[e[t+10]]+Po[e[t+11]]+Po[e[t+12]]+Po[e[t+13]]+Po[e[t+14]]+Po[e[t+15]]).toLowerCase()}const iMt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Xpe={randomUUID:iMt};function Qpe(e,t,n){if(Xpe.randomUUID&&!t&&!e)return Xpe.randomUUID();e=e||{};const r=e.random||(e.rng||nMt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,rMt(r)}class qh{static get(){let t=Qpe();for(;this.ids.has(t);)t=Qpe();return this.ids.set(t,!0),t}}qh.ids=new Map;function df(e){return"parent"in e}function sMt(e){return!df(e)}function oMt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((l,u)=>(l[u]=[],i&&i[u]&&l[u].push({type:u,id:qh.get(),val:i[u],createdOn:Date.now()}),l),s),a=r?[{id:qh.get(),createdOn:Date.now(),val:r}]:[];return{id:qh.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function aMt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},l=Object.keys(i||{}).reduce((c,d)=>(c[d]=[],i&&i[d]&&c[d].push({type:d,id:qh.get(),val:i[d],createdOn:Date.now()}),c),a),u=s?[{id:qh.get(),createdOn:Date.now(),val:s}]:[];return{id:qh.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:l,artifacts:u,sideEffects:r,state:t,level:e.level+1}}function ls(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=gMt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function bb(e){return!!e&&!!e[sc]}function Sy(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===yMt}(e)||Array.isArray(e)||!!e[lA]||!!(!((t=e.constructor)===null||t===void 0)&&t[lA])||S4(e)||T4(e))}function bx(e,t,n){n===void 0&&(n=!1),Ty(e)===0?(n?Object.keys:Iee)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Ty(e){var t=e[sc];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:S4(e)?2:T4(e)?3:0}function MI(e,t){return Ty(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ID(e,t){return Ty(e)===2?e.get(t):e[t]}function mDe(e,t,n){var r=Ty(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function lMt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function S4(e){return pMt&&e instanceof Map}function T4(e){return mMt&&e instanceof Set}function r1(e){return e.o||e.t}function xee(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=vMt(e);delete t[sc];for(var n=Iee(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function See(e,t){return t===void 0&&(t=!1),Tee(e)||bb(e)||!Sy(e)||(Ty(e)>1&&(e.set=e.add=e.clear=e.delete=uMt),Object.freeze(e),t&&bx(e,function(n,r){return See(r,!0)},!0)),e}function uMt(){ls(2)}function Tee(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Wh(e){var t=QH[e];return t||ls(18,e),t}function cMt(e,t){QH[e]||(QH[e]=t)}function Jpe(){return{}.NODE_ENV==="production"||_x||ls(0),_x}function k9(e,t){t&&(Wh("Patches"),e.u=[],e.s=[],e.v=t)}function R3(e){YH(e),e.p.forEach(dMt),e.p=null}function YH(e){e===_x&&(_x=e.l)}function Zpe(e){return _x={p:[],l:_x,h:e,m:!0,_:0}}function dMt(e){var t=e[sc];t.i===0||t.i===1?t.j():t.O=!0}function P9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Wh("ES5").S(t,e,r),r?(n[sc].P&&(R3(t),ls(4)),Sy(e)&&(e=k3(t,e),t.l||P3(t,e)),t.u&&Wh("Patches").M(n[sc].t,e,t.u,t.s)):e=k3(t,n,[]),R3(t),t.u&&t.v(t.u,t.s),e!==Aee?e:void 0}function k3(e,t,n){if(Tee(t))return t;var r=t[sc];if(!r)return bx(t,function(s,o){return eme(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return P3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=xee(r.k):r.o;bx(r.i===3?new Set(i):i,function(s,o){return eme(e,r,i,s,o,n)}),P3(e,i,!1),n&&e.u&&Wh("Patches").R(r,n,e.u,e.s)}return r.o}function eme(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&ls(5),bb(i)){var o=k3(e,i,s&&t&&t.i!==3&&!MI(t.D,r)?s.concat(r):void 0);if(mDe(n,r,o),!bb(o))return;e.m=!1}if(Sy(i)&&!Tee(i)){if(!e.h.F&&e._<1)return;k3(e,i),t&&t.A.l||P3(e,i)}}function P3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&See(t,n)}function N9(e,t){var n=e[sc];return(n?r1(n):e)[t]}function tme(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function KH(e){e.P||(e.P=!0,e.l&&KH(e.l))}function O9(e){e.o||(e.o=xee(e.t))}function XH(e,t,n){var r=S4(t)?Wh("MapSet").N(t,n):T4(t)?Wh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Jpe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,u=JH;o&&(l=[a],u=n2);var c=Proxy.revocable(l,u),d=c.revoke,f=c.proxy;return a.k=f,a.j=d,f}(t,n):Wh("ES5").J(t,n);return(n?n.A:Jpe()).p.push(r),r}function fMt(e){return bb(e)||ls(22,e),function t(n){if(!Sy(n))return n;var r,i=n[sc],s=Ty(n);if(i){if(!i.P&&(i.i<4||!Wh("ES5").K(i)))return i.t;i.I=!0,r=nme(n,s),i.I=!1}else r=nme(n,s);return bx(r,function(o,a){i&&ID(i.t,o)===a||mDe(r,o,t(a))}),s===3?new Set(r):r}(e)}function nme(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return xee(e)}function hMt(){function e(r){if(!Sy(r))return r;if(Array.isArray(r))return r.map(e);if(S4(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(T4(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return MI(r,lA)&&(i[lA]=r[lA]),i}function t(r){return bb(r)?e(r):r}var n="add";cMt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,l=r,u=0;u<o.length-1;u++){var c=Ty(l),d=""+o[u];c!==0&&c!==1||d!=="__proto__"&&d!=="constructor"||ls(24),typeof l=="function"&&d==="prototype"&&ls(24),typeof(l=ID(l,d))!="object"&&ls(15,o.join("/"))}var f=Ty(l),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(f){case 2:return l.set(p,h);case 3:ls(16);default:return l[p]=h}case n:switch(f){case 1:return p==="-"?l.push(h):l.splice(p,0,h);case 2:return l.set(p,h);case 3:return l.add(h);default:return l[p]=h}case"remove":switch(f){case 1:return l.splice(p,1);case 2:return l.delete(p);case 3:return l.delete(s.value);default:return delete l[p]}default:ls(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,l,u,c){var d=a.t,f=a.o;bx(a.D,function(h,p){var m=ID(d,h),g=ID(f,h),y=p?MI(d,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=l.concat(h);u.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,l,u,c){var d=a.t,f=a.D,h=a.o;if(h.length<d.length){var p=[h,d];d=p[0],h=p[1];var m=[c,u];u=m[0],c=m[1]}for(var g=0;g<d.length;g++)if(f[g]&&h[g]!==d[g]){var y=l.concat([g]);u.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(d[g])})}for(var v=d.length;v<h.length;v++){var _=l.concat([v]);u.push({op:n,path:_,value:t(h[v])})}d.length<h.length&&c.push({op:"replace",path:l.concat(["length"]),value:d.length})}(r,i,s,o);case 3:return function(a,l,u,c){var d=a.t,f=a.o,h=0;d.forEach(function(p){if(!f.has(p)){var m=l.concat([h]);u.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,f.forEach(function(p){if(!d.has(p)){var m=l.concat([h]);u.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===Aee?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var rme,_x,Cee=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",pMt=typeof Map<"u",mMt=typeof Set<"u",ime=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Aee=Cee?Symbol.for("immer-nothing"):((rme={})["immer-nothing"]=!0,rme),lA=Cee?Symbol.for("immer-draftable"):"__$immer_draftable",sc=Cee?Symbol.for("immer-state"):"__$immer_state",gMt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},yMt=""+Object.prototype.constructor,Iee=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,vMt=Object.getOwnPropertyDescriptors||function(e){var t={};return Iee(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},QH={},JH={get:function(e,t){if(t===sc)return e;var n=r1(e);if(!MI(n,t))return function(i,s,o){var a,l=tme(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Sy(r)?r:r===N9(e.t,t)?(O9(e),e.o[t]=XH(e.A.h,r,e)):r},has:function(e,t){return t in r1(e)},ownKeys:function(e){return Reflect.ownKeys(r1(e))},set:function(e,t,n){var r=tme(r1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=N9(r1(e),t),s=i==null?void 0:i[sc];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(lMt(n,i)&&(n!==void 0||MI(e.t,t)))return!0;O9(e),KH(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return N9(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,O9(e),KH(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=r1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){ls(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ls(12)}},n2={};bx(JH,function(e,t){n2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),n2.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&ls(13),n2.set.call(this,e,t,void 0)},n2.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&ls(14),JH.set.call(this,e[0],t,n,e[0])};var bMt=function(){function e(n){var r=this;this.g=ime,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return l.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var u;if(typeof s!="function"&&ls(6),o!==void 0&&typeof o!="function"&&ls(7),Sy(i)){var c=Zpe(r),d=XH(r,i,void 0),f=!0;try{u=s(d),f=!1}finally{f?R3(c):YH(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(m){return k9(c,o),P9(m,c)},function(m){throw R3(c),m}):(k9(c,o),P9(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===Aee&&(u=void 0),r.F&&See(u,!0),o){var h=[],p=[];Wh("Patches").M(i,u,h,p),o(h,p)}return u}ls(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return r.produceWithPatches(u,function(h){return i.apply(void 0,[h].concat(d))})};var o,a,l=r.produce(i,s,function(u,c){o=u,a=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Sy(n)||ls(8),bb(n)&&(n=fMt(n));var r=Zpe(this),i=XH(this,n,void 0);return i[sc].C=!0,YH(r),i},t.finishDraft=function(n,r){var i=n&&n[sc];({}).NODE_ENV!=="production"&&(i&&i.C||ls(9),i.I&&ls(10));var s=i.A;return k9(s,r),P9(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!ime&&ls(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Wh("Patches").$;return bb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),oc=new bMt,_Mt=oc.produce;oc.produceWithPatches.bind(oc);oc.setAutoFreeze.bind(oc);oc.setUseProxies.bind(oc);oc.applyPatches.bind(oc);oc.createDraft.bind(oc);oc.finishDraft.bind(oc);function wMt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=oMt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return NDt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,l){const{id:u,meta:c}=l.payload,d=a.nodes[u].meta,f=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:qh.get(),val:c[p],createdOn:Date.now()}),h),d);a.nodes[l.payload.id].meta=f},addArtifact(a,l){a.nodes[l.payload.id].artifacts.push({id:qh.get(),createdOn:Date.now(),val:l.payload.artifact})},changeCurrent(a,l){a.current=l.payload},addNode(a,{payload:l}){a.nodes[l.id]=l,a.nodes[l.parent].children.push(l.id),a.current=l.id},load(a,{payload:l}){return l}}})}function EMt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=wMt(e),s=ZDt();s.startListening({matcher:Wpe(r.changeCurrent,r.addNode),effect:(a,l)=>{l.cancelActiveListeners(),t.forEach(u=>{const c=Wpe(r.addNode)(a),{skipOnNew:d}=u.config;d&&c||u.func(c?"new":"traversal")})}});const o=IDt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,l){const u={id:qh.get(),func:a,config:l};return t.set(u.id,u),()=>t.delete(u.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var xMt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),SMt=Object.prototype.hasOwnProperty;function ZH(e,t){return SMt.call(e,t)}function eq(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)ZH(e,i)&&r.push(i);return r}function Xl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function tq(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function i1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function gDe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function nq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(nq(e[t]))return!0}else if(typeof e=="object"){for(var r=eq(e),i=r.length,s=0;s<i;s++)if(nq(e[r[s]]))return!0}}return!1}function sme(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var yDe=function(e){xMt(t,e);function t(n,r,i,s,o){var a=this.constructor,l=e.call(this,sme(n,{name:r,index:i,operation:s,tree:o}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=sme(n,{name:r,index:i,operation:s,tree:o}),l}return t}(Error),rs=yDe,TMt=Xl,Vw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=N3(n,this.path);r&&(r=Xl(r));var i=V1(n,{op:"remove",path:this.from}).removed;return V1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=N3(n,this.from);return V1(n,{op:"add",path:this.path,value:Xl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:$I(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},CMt={add:function(e,t,n){return tq(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Vw.move,copy:Vw.copy,test:Vw.test,_get:Vw._get};function N3(e,t){if(t=="")return e;var n={op:"_get",path:t};return V1(e,n),n.value}function V1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):O3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=N3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=$I(e,t.value),o.test===!1)throw new rs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new rs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Xl(e));var a=t.path||"",l=a.split("/"),u=e,c=1,d=l.length,f=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=O3;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=gDe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(u[h]===void 0?f=l.slice(0,c).join("/"):c==d-1&&(f=t.path),f!==void 0&&p(t,0,e,f)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!tq(h))throw new rs("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);tq(h)&&(h=~~h)}if(c>=d){if(n&&t.op==="add"&&h>u.length)throw new rs("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=CMt[t.op].call(t,u,h,e);if(o.test===!1)throw new rs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=d){var o=Vw[t.op].call(t,u,h,e);if(o.test===!1)throw new rs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(u=u[h],n&&c<d&&(!u||typeof u!="object"))throw new rs("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function C4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new rs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Xl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=V1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function AMt(e,t,n){var r=V1(e,t);if(r.test===!1)throw new rs("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function O3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new rs("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Vw[e.op]){if(typeof e.path!="string")throw new rs("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new rs('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new rs("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new rs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&nq(e.value))throw new rs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new rs("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new rs("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=vDe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new rs("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new rs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function vDe(e,t,n){try{if(!Array.isArray(e))throw new rs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)C4(Xl(t),Xl(e),n||!0);else{n=n||O3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof rs)return i;throw i}}function $I(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!$I(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!$I(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const IMt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:rs,_areEquals:$I,applyOperation:V1,applyPatch:C4,applyReducer:AMt,deepClone:TMt,getValueByPointer:N3,validate:vDe,validator:O3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Ree=new WeakMap,RMt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),kMt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function PMt(e){return Ree.get(e)}function NMt(e,t){return e.observers.get(t)}function OMt(e,t){e.observers.delete(t.callback)}function DMt(e,t){t.unobserve()}function MMt(e,t){var n=[],r,i=PMt(e);if(!i)i=new RMt(e),Ree.set(e,i);else{var s=NMt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Xl(e),t){r.callback=t,r.next=null;var o=function(){rq(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){rq(r),clearTimeout(r.next),OMt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new kMt(t,r)),r}function rq(e,t){t===void 0&&(t=!1);var n=Ree.get(e.object);kee(n.value,e.object,e.patches,"",t),e.patches.length&&C4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function kee(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=eq(t),o=eq(e),a=!1,l=o.length-1;l>=0;l--){var u=o[l],c=e[u];if(ZH(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?kee(c,d,n,r+"/"+i1(u),i):c!==d&&(i&&n.push({op:"test",path:r+"/"+i1(u),value:Xl(c)}),n.push({op:"replace",path:r+"/"+i1(u),value:Xl(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+i1(u),value:Xl(c)}),n.push({op:"remove",path:r+"/"+i1(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var l=0;l<s.length;l++){var u=s[l];!ZH(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+i1(u),value:Xl(t[u])})}}}function bDe(e,t,n){n===void 0&&(n=!1);var r=[];return kee(e,t,r,"",n),r}const $Mt=Object.freeze(Object.defineProperty({__proto__:null,compare:bDe,generate:rq,observe:MMt,unobserve:DMt},Symbol.toStringTag,{value:"Module"}));Object.assign({},IMt,$Mt,{JsonPatchError:yDe,deepClone:Xl,escapePathComponent:i1,unescapePathComponent:gDe});var r2=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(r2||{});function RD(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=_De(i,e,t);s.shift();const o=s.map(l=>t[l]).map(l=>l.state.val).reduce((l,u)=>[...l,...u],[]),a=RD(i,t);return C4(a,Xl(o),!0,!1).newDocument}function LMt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function iq({registry:e,initialState:t}){let n=!1;const r=eMt(),i=EMt(t);function s(c){return i.backend.nodes[c]}r.listen(r2.TRAVERSAL_START,()=>{n=!0}),r.listen(r2.TRAVERSAL_END,()=>{n=!1});const o={add(c,d=i.current.id){i.update(i.addMetadata({id:d,meta:c}))},latestOfType(c,d=i.current.id){var f;return(f=i.backend.nodes[d].meta[c])==null?void 0:f.at(-1)},allOfType(c,d=i.current.id){return i.backend.nodes[d].meta[c]},latest(c=i.current.id){const d=i.backend.nodes[c].meta,f=Object.keys(d).reduce((h,p)=>{const m=d[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(f).length>0?f:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,d=i.current.id){i.update(i.addArtifact({id:d,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},l={add(c,d=i.current.id){o.add({annotation:c},d)},latest(c=i.current.id){var d;return(d=o.latestOfType("annotation",c))==null?void 0:d.val},all(c=i.current.id){var d;return(d=o.allOfType("annotation",c))==null?void 0:d.map(f=>f.val)}},u={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var d;return!!((d=o.latestOfType("bookmark",c))!=null&&d.val)},toggle(c=i.current.id){u.is(c)?u.remove(c):u.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return RD(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:d,sideEffects:f,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=RD(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:d};else{const v=bDe(y,d);if(LMt(d,v)==="checkpoint")g={type:"checkpoint",val:d};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:_}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=aMt({label:c,state:g,parent:this.current,sideEffects:f,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,d){const f=e.get(d.type),h=RD(this.current,this.graph.backend.nodes);if(f.config.hasSideEffects){const{do:p=d,undo:m}=f.func(d.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:f.config.eventType})}else{const p=f.func(h,d.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:f.config.eventType})}},async to(c){r.fire(r2.TRAVERSAL_START);const d=_De(i.current,i.backend.nodes[c],i.backend.nodes),f=[];for(let h=0;h<d.length-1;++h){const p=s(d[h]),m=s(d[h+1]);jMt(p,m)?df(p)&&f.push(...p.sideEffects.undo):df(m)&&f.push(...m.sideEffects.do)}for(const h of f){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(r2.TRAVERSAL_END)},undo(){const{current:c}=i;return df(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:d}=i;return d.children.length>0?this.to(d.children[c==="oldest"?0:d.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,d=!1){return i.currentChange(c,{skipOnNew:d})},done(){console.log("Setup later for URL sharing.")},tree(){return wDe(i.root,i.backend.nodes)},on(c,d){r.listen(c,d)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const d=JSON.parse(c),f=d.current;d.current=d.root,i.update(i.load(d)),this.to(f)},importObject(c){const d=c.current;c.current=c.root,i.update(i.load(c)),this.to(d)},metadata:o,artifact:a,annotations:l,bookmarks:u}}function FMt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;df(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)df(r)&&(r=n[r.parent]),df(i)&&(i=n[i.parent]);return r.id}function _De(e,t,n){const r=FMt(e,t,n),i=n[r],s=[],o=[];let[a,l]=[e,t];for(;a.id!==i.id;)s.push(a),df(a)&&(a=n[a.parent]);for(s.push(a);l.id!==i.id;)o.push(l),df(l)&&(l=n[l.parent]);const u=o.reverse();return[...s,...u].map(c=>c.id)}function jMt(e,t){if(df(e)&&e.parent===t.id)return!0;if(df(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function wDe(e,t){return{...e,children:e.children.map(n=>wDe(t[n],t)),name:`${e.label}`}}hMt();function BMt(e){return e.length===2?_Mt(e):e}class LI{static create(){return new LI}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:BMt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Hh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var zMt="Expected a function",ome=NaN,UMt="[object Symbol]",VMt=/^\s+|\s+$/g,HMt=/^[-+]0x[0-9a-f]+$/i,qMt=/^0b[01]+$/i,WMt=/^0o[0-7]+$/i,GMt=parseInt,YMt=typeof Ys=="object"&&Ys&&Ys.Object===Object&&Ys,KMt=typeof self=="object"&&self&&self.Object===Object&&self,XMt=YMt||KMt||Function("return this")(),QMt=Object.prototype,JMt=QMt.toString,ZMt=Math.max,e$t=Math.min,D9=function(){return XMt.Date.now()};function t$t(e,t,n){var r,i,s,o,a,l,u=0,c=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(zMt);t=ame(t)||0,sq(n)&&(c=!!n.leading,d="maxWait"in n,s=d?ZMt(ame(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function h(S){var x=r,T=i;return r=i=void 0,u=S,o=e.apply(T,x),o}function p(S){return u=S,a=setTimeout(y,t),c?h(S):o}function m(S){var x=S-l,T=S-u,I=t-x;return d?e$t(I,s-T):I}function g(S){var x=S-l,T=S-u;return l===void 0||x>=t||x<0||d&&T>=s}function y(){var S=D9();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,f&&r?h(S):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function w(){return a===void 0?o:v(D9())}function E(){var S=D9(),x=g(S);if(r=arguments,i=this,l=S,x){if(a===void 0)return p(l);if(d)return a=setTimeout(y,t),h(l)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=_,E.flush=w,E}function sq(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function n$t(e){return!!e&&typeof e=="object"}function r$t(e){return typeof e=="symbol"||n$t(e)&&JMt.call(e)==UMt}function ame(e){if(typeof e=="number")return e;if(r$t(e))return ome;if(sq(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=sq(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(VMt,"");var n=qMt.test(e);return n||WMt.test(e)?GMt(e.slice(2),n?2:8):HMt.test(e)?ome:+e}var i$t=t$t;const Dd=bu(i$t);function EDe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=A.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=A.useMemo(()=>TS(".2s"),[]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:b.jsx(dl,{children:b.jsx(Tn,{gap:3,children:b.jsx(nt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),b.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>b.jsxs("g",{transform:`translate(${n}, ${a})`,children:[b.jsx("line",{x2:"-6",stroke:"currentColor"}),b.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),b.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const s$t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:EDe},Symbol.toStringTag,{value:"Module"})),M9=15;function xDe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0,currSelected:a,svgRef:l}){const[u,c]=A.useState([0,0]),[d,f]=A.useState(!1);return A.useEffect(()=>{const h=Fo(l.current);if(h){const p=h.node().getBoundingClientRect();h.on("mousemove",m=>{const g=[m.clientX-p.x,m.clientY-p.y];if(c(g),d){const y=i.filter(v=>Math.abs(e(v[r.x])-g[0])<M9&&Math.abs(t(v[r.y])-g[1])<M9);if(m.ctrlKey||m.metaKey||!o){const v=new Set(a);y.forEach(w=>{v.has(w[r.ids])&&v.delete(w[r.ids])});const _=Array.from(v);n([[u[0],u[1]],[u[0],u[1]]],e,t,_.length===0?"clear":"drag",s.id,_)}else{const v=Array.from(new Set([...a,...y.map(_=>_[r.ids])]));v.length>0&&n([[u[0],u[1]],[u[0],u[1]]],e,t,"drag",s.id,v)}}}),h.on("mousedown",m=>{f(!0),m.stopPropagation(),m.preventDefault()}),h.on("mouseup",()=>{f(!1)})}},[u,s.id,a,i,d,o,r,n,l,e,t]),b.jsx("circle",{style:{cursor:d?"pointer":"default",pointerEvents:"none"},r:M9,fill:"darkgray",opacity:.5,cx:s.x1,cy:s.y1})}const o$t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:xDe},Symbol.toStringTag,{value:"Module"}));function g1(e){const t=A.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return A.useLayoutEffect(()=>{t.current=e}),A.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const li={top:15,left:100,right:15,bottom:130};function SDe({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,initialParams:i,data:s,brushedPoints:o,onClose:a,isPaintbrushSelect:l,setIsPaintbrushSelect:u}){const[c,{height:d,width:f}]=of(),[h,p]=A.useState(i),[m]=of(),[g]=of(),y=A.useMemo(()=>f-li.left-li.right,[f]),v=A.useMemo(()=>d-li.top-li.bottom,[d]),_=A.useMemo(()=>{const R=Array.from(new Set(s.map(M=>M[h.category])));return AS(PRe).domain(R)},[s,h.category]),{xMin:w,yMin:E,xMax:S,yMax:x}=A.useMemo(()=>{const R=s.map(z=>+z[h.x]).filter(z=>z!==null),[M,$]=gh(R),L=s.map(z=>+z[h.y]).filter(z=>z!==null),[B,U]=gh(L);return{xMin:M,xMax:$,yMin:B,yMax:U}},[s,h.x,h.y]),T=A.useMemo(()=>{const R=S-w;return y<=0?null:h.dataType==="date"?TRe([li.left,y+li.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):il([li.left,y+li.left]).domain([w-R/10,S+R/10]).nice()},[h.dataType,y,S,w]),I=A.useMemo(()=>{const R=x-E;return v<=0?null:il([v+li.top,li.top]).domain([E-R/10,x+R/10]).nice()},[v,x,E]);A.useMemo(()=>{if(!T||!I)return()=>null;if(r==="Axis Selection"){const R=hwt().extent([[li.left,li.top+v-5],[li.left+y,li.top+v+5]]).on("brush end",$=>{$.sourceEvent!==void 0&&n([[$.selection[0],null],[$.selection[1],null]],T,I,$.mode,t.id)}),M=pwt().extent([[li.left-5,li.top],[li.left+5,li.top+v]]).on("brush end",$=>{$.sourceEvent!==void 0&&n([[null,$.selection[0]],[null,$.selection[1]]],T,I,$.mode,t.id)});return m.current&&g.current&&(Fo(g.current).call(M),Fo(m.current).call(R),t.hasBrush||(Fo(g.current).call(M.move,[I(x),I(E)]),Fo(m.current).call(R.move,[T(new Date("2015-01-02")),T(new Date("2015-12-31"))]),n([[T(new Date("2015-01-02")),I(x)],[T(new Date("2015-12-31")),I(E)]],T,I,"drag",t.id))),()=>{Fo(g.current).call(M.move,[I(x),I(E)]),Fo(m.current).call(R.move,[T(new Date("2015-01-02")),T(new Date("2015-12-31"))]),n([[T(new Date("2015-01-02")),I(x)],[T(new Date("2015-12-31")),I(E)]],T,I,"clear",t.id)}}if(r==="Rectangular Selection"){const R=mwt().extent([[li.left,li.top],[li.left+y,li.top+v]]).on("brush",M=>{M.sourceEvent!==void 0&&n([[M.selection[0][0],M.selection[0][1]],[M.selection[1][0],M.selection[1][1]]],T,I,M.mode,t.id)}).on("end",M=>{M.selection===null&&M.sourceEvent!==void 0&&(Fo(c.current).call(R.move,null),e(null))});return Fo(c.current).call(R),()=>{Fo(c.current).call(R.move,null),n([[null,null],[null,null]],T,I,"clear",t.id)}}return r==="Slider Selection"?()=>n([[T(w),I(x)],[T(S),I(E)]],T,I,"clear",t.id):r==="Paintbrush Selection"?()=>n([[T(w),I(x)],[T(S),I(E)]],T,I,"clear",t.id,[]):()=>null},[t,r,m,g,v,c,n,y,S,w,T,x,E,I]),A.useEffect(()=>{r==="Slider Selection"&&T&&I&&n([[T(w),I(x)],[T(S),I(E)]],T,I,null,t.id)},[r,S,w,T,x,E,I]);const P=A.useMemo(()=>o.length===0?null:new Set(o),[o]),k=A.useMemo(()=>!T||!I?null:s.filter(R=>h.year?+R.Year===h.year:!0).map((R,M)=>{if(R[h.x]===null||R[h.y]===null)return null;const $=h.dataType==="date"?T(new Date(R[h.x])):T(R[h.x]);return b.jsx(on,{withinPortal:!0,label:R[h.ids],children:b.jsx("circle",{opacity:P&&!P.has(R[h.ids])?.3:.7,r:3,fill:P&&!P.has(R[h.ids])?"lightgray":h.hideCat?"gray":_(R[h.category]),cx:$,cy:I(R[h.y])},M)},M)}),[P,_,s,T,I,h]);A.useEffect(()=>{r==="Axis Selection"&&obt(".handle").style("fill","darkgrey")},[t,r]);const D=g1(R=>{p({...h,year:R?+R:void 0})});return b.jsxs(ci,{gap:0,children:[b.jsx(Tn,{mr:li.right,style:{justifyContent:"space-between"},children:h.year?b.jsxs(ci,{gap:0,children:[b.jsx(nt,{size:"12px",ml:li.left,children:h.year}),b.jsx(e6,{min:2008,max:2022,value:h.year,onChange:D,ml:li.left,style:{width:"150px"},label:h.year})]}):null}),b.jsxs(Tn,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[b.jsxs("svg",{id:"scatterSvgBrushStudy",ref:c,style:{height:"500px",width:h.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[T&&I?b.jsxs("g",{children:[b.jsx(EDe,{yScale:I,label:h.y,horizontalPosition:li.left,xRange:T.range()}),b.jsx(ck,{xScale:T,yRange:I.range(),isDate:h.dataType==="date",vertPosition:v+li.top,label:h.x,ticks:T.ticks(h.brushType==="Axis Selection"?12:5).map(R=>({value:R.toString(),offset:T(R)}))})]}):null,k,b.jsx("g",{id:"brushXRef",ref:m}),b.jsx("g",{id:"brushYRef",ref:g}),T&&I&&r==="Paintbrush Selection"?b.jsx(xDe,{currSelected:o,svgRef:c,brushState:t,setBrushedSpace:n,params:h,data:s.filter(R=>h.year?+R.Year===h.year:!0),isSelect:l,xScale:T,yScale:I}):null]}),r==="Slider Selection"&&T&&I?b.jsxs(ci,{style:{flexGrow:1},gap:50,children:[b.jsxs(ci,{gap:0,children:[b.jsx(nt,{children:h.x}),b.jsx(ZA,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],labelAlwaysOn:!1,onChange:R=>{n([[T(R[0]),t.y1],[T(R[1]),t.y2]],T,I,"drag",t.id)},style:{width:"300px"},marks:T.ticks(5).map(R=>({value:R,label:R})),value:[T.invert(t.x1),T.invert(t.x2)]})]}),b.jsxs(ci,{gap:0,children:[b.jsx(nt,{children:h.y}),b.jsx(ZA,{minRange:1,label:null,min:I.domain()[0],max:I.domain()[1],onChange:R=>{n([[t.x1,I(R[1])],[t.x2,I(R[0])]],T,I,"drag",t.id)},style:{width:"300px"},marks:I.ticks(5).map(R=>({value:R,label:R})),value:[I.invert(t.y2),I.invert(t.y1)]})]})]}):null]})]})}const a$t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:SDe},Symbol.toStringTag,{value:"Module"})),Cu={top:15,left:100,right:15,bottom:130};function TDe({setFilteredTable:e,brushState:t,setSelection:n,brushType:r,initialParams:i,data:s,brushedPoints:o,onClose:a,isPaintbrushSelect:l,dataTable:u}){const[c,{height:d,width:f}]=of(),[h,p]=A.useState(i),m=A.useMemo(()=>f-Cu.left-Cu.right,[f]),g=A.useMemo(()=>d-Cu.top-Cu.bottom,[d]),y=A.useMemo(()=>h.hideCat?u.groupby(t.xCol).count():u.groupby(t.xCol,"Survived").count(),[t.xCol,u,h.hideCat]),v=A.useMemo(()=>{if(!s)return null;const x=pee(s);return h.hideCat?x.groupby(t.xCol).count():x.groupby(t.xCol,"Survived").count()},[t.xCol,s,h.hideCat]),_=A.useMemo(()=>y?il([Cu.top,g+Cu.top]).domain([0,Yc(y.objects().map(x=>x.count))].reverse()).nice():null,[y,g]),w=A.useMemo(()=>y?V6([Cu.left,m+Cu.left]).domain(y.array(t.xCol).sort()).paddingInner(.1):null,[y,m,t.xCol]),E=A.useMemo(()=>!w||!_||!v?null:v.objects().map((x,T)=>b.jsxs("g",{children:[h.hideCat?b.jsx("rect",{onClick:I=>n(u.objects().filter(P=>P[t.xCol]===x[t.xCol]).map(P=>P.Name),I),x:w(x[t.xCol]),y:g-(g-_(x.count)),fill:"gray",width:w.bandwidth(),height:Cu.top+g-_(x.count)}):b.jsx("rect",{onClick:I=>n(u.objects().filter(P=>P[t.xCol]===x[t.xCol]&&P.Survived===x.Survived).map(P=>P.Name),I),x:x.Survived==="Yes"?w(x[t.xCol]):w(x[t.xCol])+w.bandwidth()/2,y:g-(g-_(x.count)),fill:x.Survived==="Yes"?"#f28e2c":"#4e79a7",width:w.bandwidth()/2,height:Cu.top+g-_(x.count)}),b.jsx("text",{x:w(x[t.xCol])+(h.hideCat?w.bandwidth()/2:x.Survived==="Yes"?w.bandwidth()/4:w.bandwidth()*.75),y:_(x.count)-10,style:{textAnchor:"middle",dominantBaseline:"middle",fontSize:14},children:x.count})]},`${T}fullRects`)),[v,t.xCol,u,g,h.hideCat,n,w,_]),S=A.useMemo(()=>!w||!_||!y?null:y.objects().map((x,T)=>b.jsx("g",{style:{cursor:"pointer"},children:b.jsx("rect",{onClick:I=>n(u.objects().filter(P=>P[t.xCol]===x[t.xCol]&&(h.hideCat?!0:P.Survived===x.Survived)).map(P=>P.Name),I),opacity:.7,x:x.Survived==="Yes"||h.hideCat?w(x[t.xCol]):w(x[t.xCol])+w.bandwidth()/2,fill:"lightgray",width:h.hideCat?w.bandwidth():w.bandwidth()/2,y:g-(g-_(x.count)),height:Cu.top+g-_(x.count)})},`${T}survRects`)),[y,t.xCol,u,g,h.hideCat,n,w,_]);return _&&w&&v?b.jsx(ci,{gap:0,children:b.jsxs("svg",{id:"scatterSvgBrushStudy",ref:c,style:{height:"500px",width:h.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[b.jsx(ck,{xScale:w,yRange:_.range(),vertPosition:g+Cu.top,showLines:!1,stringTicks:!0,label:t.xCol,ticks:[...new Set(u.array(t.xCol))].map(x=>({value:x,offset:w(x)+w.bandwidth()/2}))}),_?b.jsx(t4,{label:"Count",yScale:_,horizontalPosition:Cu.left,xRange:w.range(),ticks:_.ticks(5).map(x=>({value:x.toString(),offset:_(x)}))}):null,S,E]})}):null}const l$t=Object.freeze(Object.defineProperty({__proto__:null,Histogram:TDe},Symbol.toStringTag,{value:"Module"})),th={top:15,left:100,right:15,bottom:130};function CDe({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,initialParams:i,data:s,allData:o,setSelection:a,brushedPoints:l,onClose:u,isPaintbrushSelect:c}){const[d,{height:f,width:h}]=of(),[p,m]=A.useState(i),g=A.useMemo(()=>h-th.left-th.right,[h]),y=A.useMemo(()=>f-th.top-th.bottom,[f]),v=A.useMemo(()=>il([th.top,y+th.top]).domain([0,Yc(o.map(x=>+x[t.yCol]))].reverse()).nice(),[o,t.yCol,y]),_=A.useMemo(()=>V6([th.left,g+th.left]).domain([...new Set(o.map(x=>x[t.xCol].toString()))].sort()).paddingInner(.01),[g,o,t.xCol]),w=A.useMemo(()=>pee(o.map(x=>({...x,Age:+x.Age}))),[o]),E=A.useMemo(()=>new Set(s.map(x=>x[p.ids])),[s,p.ids]),S=A.useMemo(()=>{let x=p.hideCat?w.groupby(t.xCol,{group:VN(t.yCol,{maxbins:20}),group_max:VN(t.yCol,{maxbins:20,offset:1})}):w.groupby(t.xCol,"Survived",{group:VN(t.yCol,{maxbins:20}),group_max:VN(t.yCol,{maxbins:20,offset:1})});x=x.rollup({ids:sA.array_agg(p.ids),count:sA.count()}).orderby("group");const T=x.derive({ids:m1(D=>D.ids.filter(R=>E.has(R))),count:m1(D=>D.ids.filter(R=>E.has(R)).length)}).orderby("group"),I=il([0,_.bandwidth()/2]).domain([0,Yc(x.array("count"))]),P=Y$(D=>I(D[1])+_.bandwidth()/2,D=>v(D[0])).curve(pH),k=Y$(D=>_.bandwidth()/2-I(D[1]),D=>v(D[0])).curve(pH);return b.jsx("g",{children:_.domain().map(D=>b.jsx("g",{style:{cursor:"pointer"},children:p.hideCat?b.jsxs("g",{children:[b.jsx("path",{onClick:R=>a(x.objects().filter(M=>M[t.xCol]===D).map(M=>M.ids).flat(),R),opacity:.7,transform:`translate(${_(D)}, 0)`,d:`${P(x.objects().filter(R=>R[t.xCol]===D).map(R=>[R.group,R.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),b.jsx("path",{onClick:R=>a(x.objects().filter(M=>M[t.xCol]===D).map(M=>M.ids).flat(),R),opacity:.7,transform:`translate(${_(D)}, 0)`,d:`${k(x.objects().filter(R=>R[t.xCol]===D).map(R=>[R.group,R.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),b.jsx("path",{onClick:R=>a(x.objects().filter(M=>M[t.xCol]===D).map(M=>M.ids).flat(),R),transform:`translate(${_(D)}, 0)`,d:`${P(T.objects().filter(R=>R[t.xCol]===D).map(R=>[R.group,R.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"gray"}),b.jsx("path",{onClick:R=>a(x.objects().filter(M=>M[t.xCol]===D).map(M=>M.ids).flat(),R),transform:`translate(${_(D)}, 0)`,d:`${k(T.objects().filter(R=>R[t.xCol]===D).map(R=>[R.group,R.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"gray"})]}):b.jsxs("g",{children:[b.jsx("path",{onClick:R=>a(x.objects().filter(M=>M[t.xCol]===D&&M.Survived==="Yes").map(M=>M.ids).flat(),R),opacity:.7,transform:`translate(${_(D)}, 0)`,d:`${P(x.objects().filter(R=>R[t.xCol]===D&&R.Survived==="Yes").map(R=>[R.group,R.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),b.jsx("path",{onClick:R=>a(x.objects().filter(M=>M[t.xCol]===D&&M.Survived==="No").map(M=>M.ids).flat(),R),opacity:.7,transform:`translate(${_(D)}, 0)`,d:`${k(x.objects().filter(R=>R[t.xCol]===D&&R.Survived==="No").map(R=>[R.group,R.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),b.jsx("path",{onClick:R=>a(x.objects().filter(M=>M[t.xCol]===D&&M.Survived==="Yes").map(M=>M.ids).flat(),R),transform:`translate(${_(D)}, 0)`,d:`${P(T.objects().filter(R=>R[t.xCol]===D&&R.Survived==="Yes").map(R=>[R.group,R.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"#f28e2c"}),b.jsx("path",{onClick:R=>a(x.objects().filter(M=>M[t.xCol]===D&&M.Survived==="No").map(M=>M.ids).flat(),R),transform:`translate(${_(D)}, 0)`,d:`${k(T.objects().filter(R=>R[t.xCol]===D&&R.Survived==="No").map(R=>[R.group,R.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"#4e79a7"})]})},D))})},[t.xCol,t.yCol,E,w,p.hideCat,p.ids,a,_,v]);return b.jsx(ci,{gap:0,children:b.jsxs("svg",{id:"scatterSvgBrushStudy",ref:d,style:{height:"500px",width:p.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[b.jsx(ck,{xScale:_,yRange:v.range(),vertPosition:y+th.top,showLines:!1,stringTicks:!0,label:t.xCol,ticks:_.domain().map(x=>({value:x,offset:_(x)+_.bandwidth()/2}))}),v?b.jsx(t4,{label:t.yCol,yScale:v,horizontalPosition:th.left,xRange:_.range(),ticks:v.ticks(5).map(x=>({value:x.toString(),offset:v(x)}))}):null,S]})})}const u$t=Object.freeze(Object.defineProperty({__proto__:null,Violin:CDe},Symbol.toStringTag,{value:"Module"}));function lme({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=A.useState(null),[s,o]=A.useState(e.brushState?{...e.brushState,selection:[]}:{0:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,xCol:e.x,yCol:e.y,id:0,type:"scatter"},selection:[]}),[a,l]=A.useState(!0),[u,c]=A.useState(null);A.useEffect(()=>{Wwt(`${pc}ThinkAloud/data/${e.dataset}.csv`).then(S=>{c(S)})},[e]);const d=A.useMemo(()=>u?pee(u):null,[u]);A.useEffect(()=>{if(n){const S=n.all.brush||n.all;o(S);const x=new Set(S.selection);if(d){const T=d.filter(m1(I=>x.has(I[e.ids])));i(T)}}},[d,e.ids,n]);const{actions:f,trrack:h}=A.useMemo(()=>{const S=LI.create(),x=S.register("brush",(D,R)=>(D.all={brush:R},D)),T=S.register("brushMove",(D,R)=>(D.all={brush:R},D)),I=S.register("brushResize",(D,R)=>(D.all={brush:R},D)),P=S.register("brushClear",(D,R)=>(D.all={brush:R},D)),k=iq({registry:S,initialState:{all:s}});return{actions:{brush:x,brushMove:T,brushResize:I,clearBrush:P},trrack:k}},[]),p=A.useCallback((S,x)=>{S==="drag"?h.apply("Move Brush",f.brushMove(x)):(S==="handle"||S==="click")&&h.apply("Brush",f.brush(x)),t({status:!0,provenanceGraph:h.graph.backend,answers:{}})},[f,t,h]),m=A.useMemo(()=>Dd(p,50,{maxWait:50}),[p]),g=A.useCallback((S,x,T,I,P,k)=>{if(!x||!T)return;const D=s[P],R=x.invert(S[0][0]||D.x1),M=x.invert(S[1][0]||D.x2),$=T.invert(S[1][1]||D.y2),L=T.invert(S[0][1]||D.y1);let B=null;if(I==="clear")B=d;else if(k){const N=new Set(k);B=d.filter(m1(V=>N.has(V[e.ids])))}else e.brushType==="Axis Selection"?B=d.filter(m1(N=>new Date(N[e.x])>=new Date(R)&&new Date(N[e.x])<=new Date(M)&&N[e.y]>=$&&N[e.y]<=L)):B=d.filter(m1(N=>N[e.x]>=R&&N[e.x]<=M&&N[e.y]>=$&&N[e.y]<=L));const U={xCol:D.xCol,yCol:D.yCol,x1:S[0][0]||(D==null?void 0:D.x1)||0,x2:S[1][0]||(D==null?void 0:D.x2)||0,y1:S[0][1]||(D==null?void 0:D.y1)||0,y2:S[1][1]||(D==null?void 0:D.y2)||0,hasBrush:I!=="clear",id:P},z=I!=="clear"?B==null?void 0:B.array(e.ids):[];o({...s,[P]:U,selection:z}),I==="drag"||I==="handle"||I==="click"?m(I,{...s,[P]:U,selection:z}):I==="clear"&&h.apply("Clear Brush",f.clearBrush({...s,[P]:U,selection:z})),i(B)},[s,d,e,h,m,f]),y=A.useMemo(()=>r?r==null?void 0:r.groupby(e.category).count():d?d==null?void 0:d.groupby(e.category).count():null,[r,d,e.category]),v=A.useCallback(S=>{i(S)},[]),_=A.useCallback((S,x)=>{const T=new Set(x.ctrlKey||x.metaKey?[...s.selection,...S]:S),I=d.filter(m1(P=>T.has(P[e.ids])));o({...s,selection:[...T]}),i(I),p("click",{...s,selection:[...T]})},[s,d,p,e.ids]),w=A.useMemo(()=>(d==null?void 0:d.objects())||[],[d]),E=A.useMemo(()=>(r==null?void 0:r.objects())||[],[r]);return u?b.jsxs(ci,{gap:"xs",children:[b.jsxs(Tn,{children:[b.jsx(yn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:s.selection.length===0,onClick:()=>{i(null),o({...s,selection:[]})},children:"Clear Selection"}),e.brushType==="Paintbrush Selection"?b.jsx(rX,{defaultChecked:!0,value:a?"Select":"De-Select",onChange:S=>l(S==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:s.selection.length===0}]}):null,e.columns&&!e.hideCat?b.jsxs(b.Fragment,{children:[b.jsx(qc,{color:"#f28e2c"}),b.jsx(nt,{children:"Survived"}),b.jsx(qc,{color:"#4e79a7"}),b.jsx(nt,{children:"Died"})]}):null]}),b.jsxs(Tn,{children:[Object.entries(s).map(S=>{const[x,T]=S;return x==="selection"?null:T.type==="histogram"?b.jsx(TDe,{onClose:I=>{const{[I]:P,...k}=s;o(k)},dataTable:d,setSelection:_,brushedPoints:s.selection,data:E.length>0?E:w,initialParams:{...e,x:T.xCol,y:T.yCol},brushType:e.brushType,brushState:T,isPaintbrushSelect:a,setFilteredTable:v},x):T.type==="violin"?b.jsx(CDe,{onClose:I=>{const{[I]:P,...k}=s;o(k)},allData:w,setSelection:_,brushedPoints:s.selection,data:E.length>0?E:w,initialParams:{...e,x:T.xCol,y:T.yCol},brushType:e.brushType,setBrushedSpace:g,brushState:T,isPaintbrushSelect:a,setFilteredTable:v},x):b.jsx(SDe,{onClose:I=>{const{[I]:P,...k}=s;o(k)},brushedPoints:s.selection,data:w,initialParams:{...e,x:T.xCol,y:T.yCol},brushType:e.brushType,setBrushedSpace:g,brushState:T,isPaintbrushSelect:a,setFilteredTable:v,setIsPaintbrushSelect:l},x)}),e.hideCat?null:b.jsx(mH,{fullTable:d,setSelection:_,data:w,parameters:e,barsTable:y})]})]}):b.jsx(ws,{})}const c$t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:lme,default:lme},Symbol.toStringTag,{value:"Module"})),d$t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function ADe(e,t){return function(n){return t.map(r=>[r,uAe(n,i=>e(r-i))])}}function IDe(e){return function(t){return Math.abs(t/=e)<=1?.75*(1-t*t)/e:0}}function RDe(e,t){return e*t/(t-1)}function kDe(e,t,n){let r=Math.sqrt(RDe(t,n));return typeof e=="number"&&(r=Math.min(r,e/1.34)),1.06*r*n**-.2}function f$t({values:e,xScale:t,ticks:n}){const r=KOt({values:e}).rollup({variance:sA.variance("values"),q1:sA.quantile("values",.25),q3:sA.quantile("values",.75)}).objects()[0];return ADe(IDe(kDe(r.q3-r.q1,r.variance,e.length)),t.ticks(n))(e)}const h$t=Object.freeze(Object.defineProperty({__proto__:null,kdeCalc:f$t,kernelDensityEstimator:ADe,kernelEpanechnikov:IDe,silvermans:kDe,toSampleVariance:RDe},Symbol.toStringTag,{value:"Module"}));var PDe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:Ys,()=>(()=>{var n={d:(c,d)=>{for(var f in d)n.o(d,f)&&!n.o(c,f)&&Object.defineProperty(c,f,{enumerable:!0,get:d[f]})},o:(c,d)=>Object.prototype.hasOwnProperty.call(c,d),r:c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}},r={};function i(c){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},i(c)}function s(c){return function(d){if(Array.isArray(d))return o(d)}(c)||function(d){if(typeof Symbol<"u"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}(c)||function(d,f){if(d){if(typeof d=="string")return o(d,f);var h=Object.prototype.toString.call(d).slice(8,-1);if(h==="Object"&&d.constructor&&(h=d.constructor.name),h==="Map"||h==="Set")return Array.from(d);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return o(d,f)}}(c)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(c,d){(d==null||d>c.length)&&(d=c.length);for(var f=0,h=new Array(d);f<d;f++)h[f]=c[f];return h}function a(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function l(c,d){for(var f=0;f<d.length;f++){var h=d[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,(p=h.key,m=void 0,m=function(g,y){if(i(g)!=="object"||g===null)return g;var v=g[Symbol.toPrimitive];if(v!==void 0){var _=v.call(g,y||"default");if(i(_)!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(g)}(p,"string"),i(m)==="symbol"?m:String(m)),h)}var p,m}n.r(r),n.d(r,{default:()=>u});var u=function(){function c(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=h.sampleRate;a(this,c),this._context=this._createContext(p),p||(p=this._context.sampleRate),this._sampleRate=p}var d,f;return d=c,f=[{key:"_createContext",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:44100;return window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,new AudioContext({sampleRate:h})}},{key:"context",get:function(){return this._context}},{key:"fetchAudio",value:async function(){for(var h=this,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return await Promise.all(m.map(async function(y){var v;return v=y instanceof File||y instanceof Blob?await y.arrayBuffer():await fetch(y).then(function(_){return _.headers.has("Content-Type")&&!_.headers.get("Content-Type").includes("audio/")&&console.warn("Crunker: Attempted to fetch an audio file, but its MIME type is `".concat(_.headers.get("Content-Type").split(";")[0],"`. We'll try and continue anyway. (file: \"").concat(y,'")')),_.arrayBuffer()}),await h._context.decodeAudioData(v)}))}},{key:"mergeAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._sampleRate*this._maxDuration(h),this._sampleRate);return h.forEach(function(m){for(var g=0;g<m.numberOfChannels;g++){for(var y=p.getChannelData(g),v=m.getChannelData(g),_=m.getChannelData(g).length-1;_>=0;_--)y[_]+=v[_];p.getChannelData(g).set(y)}}),p}},{key:"concatAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._totalLength(h),this._sampleRate),m=0;return h.forEach(function(g){for(var y=0;y<g.numberOfChannels;y++)p.getChannelData(y).set(g.getChannelData(y),m);m+=g.length}),p}},{key:"padAudio",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(m===0)return h;if(p<0)throw new Error('Crunker: Parameter "padStart" in padAudio must be positive');if(m<0)throw new Error('Crunker: Parameter "seconds" in padAudio must be positive');for(var g=this._context.createBuffer(h.numberOfChannels,Math.ceil(h.length+m*h.sampleRate),h.sampleRate),y=0;y<h.numberOfChannels;y++){var v=h.getChannelData(y);g.getChannelData(y).set(v.subarray(0,Math.ceil(p*h.sampleRate)+1),0),g.getChannelData(y).set(v.subarray(Math.ceil(p*h.sampleRate)+2,g.length+1),Math.ceil((p+m)*h.sampleRate))}return g}},{key:"sliceAudio",value:function(h,p,m){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(p>=m)throw new Error('Crunker: "start" time should be less than "end" time in sliceAudio method');for(var v=Math.round((m-p)*this._sampleRate),_=Math.round(p*this._sampleRate),w=this._context.createBuffer(h.numberOfChannels,v,this._sampleRate),E=0;E<h.numberOfChannels;E++)for(var S=h.getChannelData(E),x=w.getChannelData(E),T=0;T<v;T++)x[T]=S[_+T],T<g*this._sampleRate&&(x[T]*=T/(g*this._sampleRate)),T>v-y*this._sampleRate&&(x[T]*=(v-T)/(y*this._sampleRate));return w}},{key:"play",value:function(h){var p=this._context.createBufferSource();return p.buffer=h,p.connect(this._context.destination),p.start(),p}},{key:"export",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"audio/wav",m=this._interleave(h),g=this._writeHeaders(m,h.numberOfChannels,h.sampleRate),y=new Blob([g],{type:p});return{blob:y,url:this._renderURL(y),element:this._renderAudioElement(y)}}},{key:"download",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"crunker",m=document.createElement("a");return m.style.display="none",m.href=this._renderURL(h),m.download="".concat(p,".").concat(h.type.split("/")[1]),m.click(),m}},{key:"notSupported",value:function(h){return this._isSupported()?void 0:h()}},{key:"close",value:function(){return this._context.close(),this}},{key:"_maxDuration",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.duration})))}},{key:"_maxNumberOfChannels",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.numberOfChannels})))}},{key:"_totalLength",value:function(h){return h.map(function(p){return p.length}).reduce(function(p,m){return p+m},0)}},{key:"_isSupported",value:function(){return"AudioContext"in window||"webkitAudioContext"in window||"mozAudioContext"in window}},{key:"_writeHeaders",value:function(h,p,m){var g=2*p,y=2*h.length,v=36+y,_=new ArrayBuffer(8+v),w=new DataView(_);return this._writeString(w,0,"RIFF"),w.setUint32(4,v,!0),this._writeString(w,8,"WAVE"),this._writeString(w,12,"fmt "),w.setUint32(16,16,!0),w.setUint16(20,1,!0),w.setUint16(22,p,!0),w.setUint32(24,m,!0),w.setUint32(28,m*g,!0),w.setUint16(32,g,!0),w.setUint16(34,16,!0),this._writeString(w,36,"data"),w.setUint32(40,y,!0),this._floatTo16BitPCM(w,h,44)}},{key:"_floatTo16BitPCM",value:function(h,p,m){for(var g=0;g<p.length;g++,m+=2){var y=Math.max(-1,Math.min(1,p[g]));h.setInt16(m,y<0?32768*y:32767*y,!0)}return h}},{key:"_writeString",value:function(h,p,m){for(var g=0;g<m.length;g++)h.setUint8(p+g,m.charCodeAt(g))}},{key:"_interleave",value:function(h){if(h.numberOfChannels===1)return h.getChannelData(0);for(var p=[],m=0;m<h.numberOfChannels;m++)p.push(h.getChannelData(m));for(var g=p.reduce(function(w,E){return w+E.length},0),y=new Float32Array(g),v=0,_=0;v<g;)p.forEach(function(w){y[v++]=w[_]}),_++;return y}},{key:"_renderAudioElement",value:function(h){var p=document.createElement("audio");return p.controls=!0,p.src=this._renderURL(h),p}},{key:"_renderURL",value:function(h){return(window.URL||window.webkitURL).createObjectURL(h)}}],f&&l(d.prototype,f),Object.defineProperty(d,"prototype",{writable:!1}),c}();return r})())})(PDe);var p$t=PDe.exports;const m$t=bu(p$t),qN=3,W_=25,WN=25,GN=20,ume=1;function g$t({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0}){const[a,l]=A.useState(!1),[u,{width:c}]=of();return b.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{cursor:"pointer"},children:[b.jsx("rect",{opacity:1,fill:a||s?"cornflowerblue":"lightgray",x:e(t.startTime)+ume,width:e(t.endTime)-e(t.startTime)-ume*2,y:r-W_,height:W_}),b.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-qN,width:c+qN*2,y:r-W_-WN-o,height:GN,fill:"whitesmoke"}),b.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-qN,x2:c+e(t.startTime)+qN,y1:r-W_-WN+GN-o,y2:r-W_-WN+GN-o}),b.jsx("foreignObject",{x:e(t.startTime),width:c,y:r-W_-WN-o,height:GN,children:b.jsx(dl,{style:{width:"fit-content"},children:b.jsx(nt,{lineClamp:1,ref:u,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n})})})]})}function y$t({xScale:e,answer:t,height:n,labelHeight:r=0}){return b.jsx("g",{children:b.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const cme=25,v$t=8;function NDe({xScale:e,participantData:t,width:n,height:r,setSelectedTask:i,trialFilter:s}){const{analysisTrialName:o}=Qo(u=>u),a=A.useMemo(()=>{let u=0;const c=Object.entries(t.answers||{}).filter(d=>s?d[0]===s:!0).sort((d,f)=>d[1].startTime-f[1].startTime);return c.map((d,f)=>{const[h,p]=d,m=f>0?c[f-u-1]:null;return m&&m[0].length*v$t+e(m[1].startTime)>e(p.startTime)?u+=1:u=0,{line:b.jsx(y$t,{labelHeight:u*cme,answer:p,height:r,xScale:e},h),label:b.jsx(g$t,{labelHeight:u*cme,isSelected:s?!1:o===h,setSelectedTask:i,answer:p,height:r,name:h,xScale:e},h)}})},[r,t.answers,o,i,s,e]),l=A.useMemo(()=>Object.entries(t.answers||{}).sort((c,d)=>c[1].startTime-d[1].startTime).map(c=>{const[d,f]=c,h=[];let p=[-1,-1],m="visible";if(f.windowEvents)for(let g=0;g<f.windowEvents.length;g+=1)f.windowEvents[g][1]==="visibility"&&(f.windowEvents[g][2]==="hidden"&&m==="visible"?(p=[f.windowEvents[g][0],-1],m="hidden"):f.windowEvents[g][2]==="visible"&&m==="hidden"&&(p[1]=f.windowEvents[g][0],h.push(p),p=[-1,-1],m="visible"));return h.map((g,y)=>b.jsx(on,{withinPortal:!0,label:"Browsed away",children:b.jsx("rect",{x:e(g[0]),width:e(g[1])-e(g[0]),y:r-5,height:10})},y))}),[r,t,e]);return s?null:b.jsxs("svg",{style:{width:n,height:r,overflow:"visible"},children:[a.map(u=>u.line),a.map(u=>u.label),l]})}function b$t({cx:e,cy:t,r:n,color:r}){return b.jsx("circle",{cx:e,cy:t,r:n,fill:r})}function _$t({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){return b.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(o=>{const[a,l]=o;return b.jsx("g",{onClick:()=>i(a,l.createdOn,s),children:b.jsx(b$t,{color:a===r?"cornflowerblue":"lightgray",cx:e(l.createdOn),cy:n/2,r:5})},a)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?b.jsx("circle",{fill:"cornflowerblue",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null]})}const dme={left:5,top:0,right:5,bottom:0};function w$t({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,playTime:o,setPlayTime:a,isPlaying:l,setIsPlaying:u,setSelectedTask:c}){const d=A.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),{index:f}=wf(),h=_p(),p=f?h:null,m=A.useMemo(()=>!p||!t?null:Object.keys(t.answers).find(v=>v.startsWith(p))||null,[t,p]);A.useEffect(()=>{if(!m||!t)return;const v=t.answers[m].provenanceGraph;if(!v)return;const{startTime:_}=t.answers.introduction_0,w=_+o;if(!i||!v.nodes[i]){s(v.root);return}let E=v.nodes[i];for(;;)if(w<E.createdOn){if(sMt(E))break;{const S=E.parent;if(w<v.nodes[S].createdOn)E=v.nodes[S];else break}}else if(E.children.length>0){const S=E.children[0];if(w>v.nodes[S].createdOn)E=v.nodes[S];else break}else break;E.id!==i&&s(E.id)},[i,t,o,s,m]);const g=A.useCallback((v,_)=>{a(_,(_-e.domain()[0])/d),s(v)},[s,a,d,e]),y=A.useMemo(()=>Object.entries(t.answers).filter(v=>m?m===v[0]:!0).map(v=>{const[_,w]=v;return b.jsx(_$t,{taskName:_,answer:w,height:r,currentNode:i,setCurrentNode:g,xScale:e},_)}),[i,g,r,t.answers,m,e]);return b.jsx(ci,{children:b.jsxs("svg",{style:{width:n,height:r},children:[b.jsx("line",{stroke:"black",strokeWidth:1,x1:dme.left,x2:n+dme.left,y1:r/2,y2:r/2}),y]})})}const fme={top:5,left:5,right:5,bottom:5};function E$t({transcriptLines:e,xScale:t,startTime:n,currentShownTranscription:r}){const i=A.useMemo(()=>e.map(s=>b.jsxs("g",{children:[b.jsx("line",{stroke:r>=s.lineStart&&r<=s.lineEnd?"cornflowerblue":"lightgray",strokeWidth:5,y1:fme.top,y2:fme.top,x1:t(n+s.start*1e3)+2,x2:t(n+s.end*1e3)-2}),s.tags.map((o,a)=>b.jsx("g",{children:o.map((l,u)=>{const c=t(n+s.start*1e3),d=t(n+s.end*1e3);return l?b.jsx("foreignObject",{x:c+(d-c)/s.tags.length*(a+.5)-6+(-(o.length-1)*15/2+u*15),y:30,height:"20px",width:"20px",children:b.jsx(on,{label:l.name,withArrow:!0,arrowSize:6,children:b.jsx(qc,{size:12,color:l.color})})},l.name):null})},a))]},s.start)),[r,n,e,t]);return b.jsx("svg",{style:{width:"100%",height:"50px"},children:i})}function ODe({selectedTags:e,removeFunc:t,isLink:n=!1,participantId:r="",currentTask:i="",size:s="md"}){return e.map((o,a)=>{if(!o||!o.id)return null;const l=cI(o.color).l;return b.jsx(on,{label:o.name,withinPortal:!0,children:b.jsx(sb,{size:s,component:n?xX:null,style:{width:"80px"},to:`${pc}ThinkAloud/analysis/${r}/ui/reviewer-${i}`,target:"_blank",withRemoveButton:!!t,styles:{root:{backgroundColor:o.color,color:l>.7?"black":"white"}},onRemove:()=>t?t(o.id):null,children:o.name},o.id+a)},r+i+a)})}function uA({tags:e,selectedTags:t,onSelectTags:n,disabled:r=!1,taskTags:i,partTags:s}){const o=LR(),a=h=>n([...t,[...e,...i||[],...s||[]].find(p=>p.id===h)]),l=h=>n(t.filter(p=>p!==void 0&&p.id!==h)),u=b.jsx(ODe,{selectedTags:t,removeFunc:l}),c=e.filter(h=>h!==void 0&&!t.find(p=>p&&p.id===h.id)).map(h=>b.jsx(sn.Option,{value:h.id,children:b.jsxs(Tn,{gap:"sm",children:[b.jsx(qc,{size:10,color:h.color}),b.jsx("span",{children:h.name})]})},h.id)),d=i?i.filter(h=>!t.find(p=>p.id===h.id)).map(h=>b.jsx(sn.Option,{value:h.id,children:b.jsxs(Tn,{gap:"sm",children:[b.jsx(qc,{size:10,color:h.color}),b.jsx("span",{children:h.name})]})},h.id)):null,f=s?s.filter(h=>!t.find(p=>p.id===h.id)).map(h=>b.jsx(sn.Option,{value:h.id,children:b.jsxs(Tn,{gap:"sm",children:[b.jsx(qc,{size:10,color:h.color}),b.jsx("span",{children:h.name})]})},h.id)):null;return b.jsxs(sn,{disabled:r,width:300,store:o,onOptionSubmit:a,withinPortal:!0,children:[b.jsx(sn.DropdownTarget,{children:b.jsx(HE,{style:{width:"400px"},pointer:!0,onClick:()=>o.toggleDropdown(),children:b.jsxs(sb.Group,{children:[t.length>0?u:b.jsx(Kr.Placeholder,{children:"Add tags"}),b.jsx(sn.EventsTarget,{children:b.jsx(HE.Field,{type:"hidden",onBlur:()=>o.closeDropdown()})})]})})}),b.jsx(sn.Dropdown,{children:b.jsxs(sn.Options,{children:[c.length===0?b.jsx(sn.Empty,{children:"No additional tags"}):i||s?b.jsx(sn.Group,{label:"Text Tags",children:c}):c,i?b.jsx(sn.Group,{label:"Task Tags",children:d}):null,s?b.jsx(sn.Group,{label:"Participant Tags",children:f}):null]})})]})}function x$t({annotation:e,setAnnotation:t,start:n,current:r,end:i,text:s,tags:o,selectedTags:a,onTextChange:l,deleteRowCallback:u,addRowCallback:c,onSelectTags:d,addRef:f}){const[h,p]=A.useState(e);return b.jsxs(Tn,{justify:"space-between",style:{width:"100%"},wrap:"nowrap",children:[b.jsx(Tn,{wrap:"nowrap",gap:0,style:{width:"100%",backgroundColor:r>=n&&r<=i?"rgba(100, 149, 237, 0.3)":"white"},children:b.jsx(KA,{ref:m=>m?f(m):null,autosize:!0,minRows:1,maxRows:3,style:{width:"100%"},variant:"unstyled",value:s,onChange:m=>{l(m.currentTarget.value)},onKeyDown:m=>{m.key==="Enter"&&m.currentTarget.selectionStart!==null?c(m.currentTarget.selectionStart):m.key==="Backspace"&&m.currentTarget.selectionStart===0&&m.currentTarget.selectionEnd===0&&(u(),m.preventDefault(),m.stopPropagation())}})}),b.jsxs(Tn,{wrap:"nowrap",style:{width:"300px"},children:[b.jsx(AF,{orientation:"vertical",size:"xs"}),b.jsx(uA,{onSelectTags:d,selectedTags:a,tags:o}),b.jsxs($n,{children:[b.jsx($n.Target,{children:b.jsx(vnt,{style:{color:e.length>0?"cornflowerblue":"lightgray",cursor:"pointer"}})}),b.jsx($n.Dropdown,{children:b.jsx(KA,{value:h,onChange:m=>p(m.currentTarget.value),placeholder:"Add Annotation",onBlur:()=>t(h)})})]})]})]})}var No=[];for(var $9=0;$9<256;++$9)No.push(($9+256).toString(16).slice(1));function S$t(e,t=0){return(No[e[t+0]]+No[e[t+1]]+No[e[t+2]]+No[e[t+3]]+"-"+No[e[t+4]]+No[e[t+5]]+"-"+No[e[t+6]]+No[e[t+7]]+"-"+No[e[t+8]]+No[e[t+9]]+"-"+No[e[t+10]]+No[e[t+11]]+No[e[t+12]]+No[e[t+13]]+No[e[t+14]]+No[e[t+15]]).toLowerCase()}var YN,T$t=new Uint8Array(16);function C$t(){if(!YN&&(YN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!YN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return YN(T$t)}var A$t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const hme={randomUUID:A$t};function FI(e,t,n){if(hme.randomUUID&&!t&&!e)return hme.randomUUID();e=e||{};var r=e.random||(e.rng||C$t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,S$t(r)}function pme({addTagCallback:e,currentNames:t,editTag:n=!1,editableTag:r}){const[i,s]=A.useState(n?r.name:""),[o,a]=A.useState(n?r.color:"#fd7e14"),l=A.useCallback(()=>{const u=FI();e({color:o,name:i,id:u})},[e,o,i]);return b.jsxs(ci,{gap:"xs",children:[b.jsxs(Tn,{children:[b.jsx(qc,{color:o}),b.jsx(lf,{required:!0,placeholder:"Enter tag name",value:i,onChange:u=>s(u.currentTarget.value),error:t.includes(i)&&(!n||r.name!==i)?"Tag with this name already exists":null})]}),b.jsx(MK,{withPicker:n,style:{width:"100%"},value:o,onChange:u=>a(u),swatches:["#2e2e2e","#868e96","#fa5252","#e64980","#be4bdb","#7950f2","#4c6ef5","#228be6","#15aabf","#12b886","#40c057","#82c91e","#fab005","#fd7e14"]}),b.jsx(yn,{disabled:n&&o===r.color&&(i.length===0||t.includes(i)),size:"compact-sm",onClick:()=>l(),children:n?"Edit Tag":"Add Tag"})]})}function oq({createTagCallback:e,editTagCallback:t,tags:n,email:r=""}){const[i,s]=A.useState(!1);return b.jsxs($n,{withinPortal:!1,children:[b.jsx($n.Target,{children:b.jsxs(ci,{justify:"center",style:{width:"300px",cursor:"pointer"},children:[b.jsxs(Tn,{children:[b.jsx(ESe,{}),b.jsx(nt,{children:"Tags"})]}),r?b.jsx(nt,{ta:"center",style:{justifyContent:"end",alignContent:"end"},c:"dimmed",children:r}):null]})}),n?b.jsx($n.Dropdown,{children:b.jsxs(ci,{style:{width:"300px"},gap:"xs",children:[n.length===0?b.jsx(nt,{color:"dimmed",children:"No tags found. Create new tags below."}):null,n.map(o=>b.jsxs(Tn,{justify:"space-between",children:[b.jsxs(Tn,{children:[b.jsx(qc,{color:o.color}),b.jsx(nt,{children:o.name})]}),b.jsxs($n,{trapFocus:!0,withinPortal:!1,children:[b.jsx($n.Target,{children:b.jsx(wSe,{color:"lightgray"})}),b.jsx($n.Dropdown,{children:b.jsx(pme,{editTag:!0,currentNames:n.map(a=>a.name),addTagCallback:a=>{t(o,{...a,id:o.id})},editableTag:o})})]})]},o.id)),b.jsxs($n,{trapFocus:!0,opened:i,withinPortal:!1,children:[b.jsx($n.Target,{children:b.jsx(yn,{variant:"light",onClick:()=>s(!i),children:"Create new tag"})}),b.jsx($n.Dropdown,{children:b.jsx(pme,{currentNames:n.map(o=>o.name),addTagCallback:o=>{s(!1),e(o)}})})]})]})}):b.jsx(ws,{})]})}var mme={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DDe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},I$t=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Pee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,u=l?e[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,h=u&63;l||(h=64,o||(f=64)),r.push(n[c],n[d],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(DDe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):I$t(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const u=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new R$t;const f=s<<2|a>>4;if(r.push(f),u!==64){const h=a<<4&240|u>>2;if(r.push(h),d!==64){const p=u<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class R$t extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k$t=function(e){const t=DDe(e);return Pee.encodeByteArray(t,!0)},D3=function(e){return k$t(e).replace(/\./g,"")},MDe=function(e){try{return Pee.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $De(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P$t=()=>$De().__FIREBASE_DEFAULTS__,N$t=()=>{if(typeof process>"u"||typeof mme>"u")return;const e=mme.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},O$t=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&MDe(e[1]);return t&&JSON.parse(t)},A4=()=>{try{return P$t()||N$t()||O$t()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},LDe=e=>{var t,n;return(n=(t=A4())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},D$t=e=>{const t=LDe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},FDe=()=>{var e;return(e=A4())===null||e===void 0?void 0:e.config},jDe=e=>{var t;return(t=A4())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M$t(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[D3(JSON.stringify(n)),D3(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $$t(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zo())}function L$t(){var e;const t=(e=A4())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function F$t(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function j$t(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function B$t(){const e=Zo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function z$t(){return!L$t()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nee(){try{return typeof indexedDB=="object"}catch{return!1}}function U$t(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$t="FirebaseError";class Cp extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=V$t,Object.setPrototypeOf(this,Cp.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,VS.prototype.create)}}class VS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?H$t(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Cp(i,a,r)}}function H$t(e,t){return e.replace(q$t,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const q$t=/\{\$([^}]+)}/g;function W$t(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function BI(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(gme(s)&&gme(o)){if(!BI(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function gme(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function G$t(e,t){const n=new Y$t(e,t);return n.subscribe.bind(n)}class Y$t{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");K$t(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=L9),i.error===void 0&&(i.error=L9),i.complete===void 0&&(i.complete=L9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function K$t(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function L9(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X$t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$t=1e3,J$t=2,Z$t=4*60*60*1e3,e3t=.5;function t3t(e,t=Q$t,n=J$t){const r=t*Math.pow(n,e),i=Math.round(e3t*r*(Math.random()-.5)*2);return Math.min(Z$t,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(e){return e&&e._delegate?e._delegate:e}class op{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3t{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new jI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(i3t(t))try{this.getOrInitializeService({instanceIdentifier:s1})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=s1){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=s1){return this.instances.has(t)}getOptions(t=s1){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:r3t(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=s1){return this.component?this.component.multipleInstances?t:s1:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function r3t(e){return e===s1?void 0:e}function i3t(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3t{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new n3t(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ar;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ar||(ar={}));const o3t={debug:ar.DEBUG,verbose:ar.VERBOSE,info:ar.INFO,warn:ar.WARN,error:ar.ERROR,silent:ar.SILENT},a3t=ar.INFO,l3t={[ar.DEBUG]:"log",[ar.VERBOSE]:"log",[ar.INFO]:"info",[ar.WARN]:"warn",[ar.ERROR]:"error"},u3t=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=l3t[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class I4{constructor(t){this.name=t,this._logLevel=a3t,this._logHandler=u3t,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ar))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?o3t[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ar.DEBUG,...t),this._logHandler(this,ar.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ar.VERBOSE,...t),this._logHandler(this,ar.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ar.INFO,...t),this._logHandler(this,ar.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ar.WARN,...t),this._logHandler(this,ar.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ar.ERROR,...t),this._logHandler(this,ar.ERROR,...t)}}const c3t=(e,t)=>t.some(n=>e instanceof n);let yme,vme;function d3t(){return yme||(yme=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f3t(){return vme||(vme=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const BDe=new WeakMap,aq=new WeakMap,zDe=new WeakMap,F9=new WeakMap,Oee=new WeakMap;function h3t(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(Y0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&BDe.set(n,e)}).catch(()=>{}),Oee.set(t,e),t}function p3t(e){if(aq.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});aq.set(e,t)}let lq={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return aq.get(e);if(t==="objectStoreNames")return e.objectStoreNames||zDe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Y0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function m3t(e){lq=e(lq)}function g3t(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(j9(this),t,...n);return zDe.set(r,t.sort?t.sort():[t]),Y0(r)}:f3t().includes(e)?function(...t){return e.apply(j9(this),t),Y0(BDe.get(this))}:function(...t){return Y0(e.apply(j9(this),t))}}function y3t(e){return typeof e=="function"?g3t(e):(e instanceof IDBTransaction&&p3t(e),c3t(e,d3t())?new Proxy(e,lq):e)}function Y0(e){if(e instanceof IDBRequest)return h3t(e);if(F9.has(e))return F9.get(e);const t=y3t(e);return t!==e&&(F9.set(e,t),Oee.set(t,e)),t}const j9=e=>Oee.get(e);function v3t(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=Y0(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Y0(o.result),l.oldVersion,l.newVersion,Y0(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const b3t=["get","getKey","getAll","getAllKeys","count"],_3t=["put","add","delete","clear"],B9=new Map;function bme(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(B9.get(t))return B9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=_3t.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||b3t.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return B9.set(t,s),s}m3t(e=>({...e,get:(t,n,r)=>bme(t,n)||e.get(t,n,r),has:(t,n)=>!!bme(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3t{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(E3t(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function E3t(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const uq="@firebase/app",_me="0.10.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=new I4("@firebase/app"),x3t="@firebase/app-compat",S3t="@firebase/analytics-compat",T3t="@firebase/analytics",C3t="@firebase/app-check-compat",A3t="@firebase/app-check",I3t="@firebase/auth",R3t="@firebase/auth-compat",k3t="@firebase/database",P3t="@firebase/database-compat",N3t="@firebase/functions",O3t="@firebase/functions-compat",D3t="@firebase/installations",M3t="@firebase/installations-compat",$3t="@firebase/messaging",L3t="@firebase/messaging-compat",F3t="@firebase/performance",j3t="@firebase/performance-compat",B3t="@firebase/remote-config",z3t="@firebase/remote-config-compat",U3t="@firebase/storage",V3t="@firebase/storage-compat",H3t="@firebase/firestore",q3t="@firebase/vertexai-preview",W3t="@firebase/firestore-compat",G3t="firebase",Y3t="10.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cq="[DEFAULT]",K3t={[uq]:"fire-core",[x3t]:"fire-core-compat",[T3t]:"fire-analytics",[S3t]:"fire-analytics-compat",[A3t]:"fire-app-check",[C3t]:"fire-app-check-compat",[I3t]:"fire-auth",[R3t]:"fire-auth-compat",[k3t]:"fire-rtdb",[P3t]:"fire-rtdb-compat",[N3t]:"fire-fn",[O3t]:"fire-fn-compat",[D3t]:"fire-iid",[M3t]:"fire-iid-compat",[$3t]:"fire-fcm",[L3t]:"fire-fcm-compat",[F3t]:"fire-perf",[j3t]:"fire-perf-compat",[B3t]:"fire-rc",[z3t]:"fire-rc-compat",[U3t]:"fire-gcs",[V3t]:"fire-gcs-compat",[H3t]:"fire-fst",[W3t]:"fire-fst-compat",[q3t]:"fire-vertex","fire-js":"fire-js",[G3t]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=new Map,X3t=new Map,dq=new Map;function wme(e,t){try{e.container.addComponent(t)}catch(n){_b.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ig(e){const t=e.name;if(dq.has(t))return _b.debug(`There were multiple attempts to register component ${t}.`),!1;dq.set(t,e);for(const n of M3.values())wme(n,e);for(const n of X3t.values())wme(n,e);return!0}function HS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Oh(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3t={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},K0=new VS("app","Firebase",Q3t);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3t{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new op("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw K0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_=Y3t;function UDe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:cq,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw K0.create("bad-app-name",{appName:String(i)});if(n||(n=FDe()),!n)throw K0.create("no-options");const s=M3.get(i);if(s){if(BI(n,s.options)&&BI(r,s.config))return s;throw K0.create("duplicate-app",{appName:i})}const o=new s3t(i);for(const l of dq.values())o.addComponent(l);const a=new J3t(n,r,o);return M3.set(i,a),a}function Dee(e=cq){const t=M3.get(e);if(!t&&e===cq&&FDe())return UDe();if(!t)throw K0.create("no-app",{appName:e});return t}function ff(e,t,n){var r;let i=(r=K3t[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),_b.warn(a.join(" "));return}ig(new op(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3t="firebase-heartbeat-database",eLt=1,zI="firebase-heartbeat-store";let z9=null;function VDe(){return z9||(z9=v3t(Z3t,eLt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(zI)}catch(n){console.warn(n)}}}}).catch(e=>{throw K0.create("idb-open",{originalErrorMessage:e.message})})),z9}async function tLt(e){try{const n=(await VDe()).transaction(zI),r=await n.objectStore(zI).get(HDe(e));return await n.done,r}catch(t){if(t instanceof Cp)_b.warn(t.message);else{const n=K0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});_b.warn(n.message)}}}async function Eme(e,t){try{const r=(await VDe()).transaction(zI,"readwrite");await r.objectStore(zI).put(t,HDe(e)),await r.done}catch(n){if(n instanceof Cp)_b.warn(n.message);else{const r=K0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_b.warn(r.message)}}}function HDe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nLt=1024,rLt=30*24*60*60*1e3;class iLt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oLt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=xme();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=rLt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xme(),{heartbeatsToSend:r,unsentEntries:i}=sLt(this._heartbeatsCache.heartbeats),s=D3(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function xme(){return new Date().toISOString().substring(0,10)}function sLt(e,t=nLt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Sme(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Sme(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class oLt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nee()?U$t().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tLt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Eme(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Eme(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Sme(e){return D3(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aLt(e){ig(new op("platform-logger",t=>new w3t(t),"PRIVATE")),ig(new op("heartbeat",t=>new iLt(t),"PRIVATE")),ff(uq,_me,e),ff(uq,_me,"esm2017"),ff("fire-js","")}aLt("");function qDe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lLt=qDe,WDe=new VS("auth","Firebase",qDe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=new I4("@firebase/auth");function uLt(e,...t){$3.logLevel<=ar.WARN&&$3.warn(`Auth (${o_}): ${e}`,...t)}function kD(e,...t){$3.logLevel<=ar.ERROR&&$3.error(`Auth (${o_}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(e,...t){throw $ee(e,...t)}function hf(e,...t){return $ee(e,...t)}function Mee(e,t,n){const r=Object.assign(Object.assign({},lLt()),{[t]:n});return new VS("auth","Firebase",r).create(t,{appName:e.name})}function X0(e){return Mee(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cLt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&ap(e,"argument-error"),Mee(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $ee(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return WDe.create(e,...t)}function vn(e,t,...n){if(!e)throw $ee(t,...n)}function ym(e){const t="INTERNAL ASSERTION FAILED: "+e;throw kD(t),new Error(t)}function sg(e,t){e||ym(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fq(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function dLt(){return Tme()==="http:"||Tme()==="https:"}function Tme(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fLt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dLt()||F$t()||"connection"in navigator)?navigator.onLine:!0}function hLt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(t,n){this.shortDelay=t,this.longDelay=n,sg(n>t,"Short delay should be less than long delay!"),this.isMobile=$$t()||j$t()}get(){return fLt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lee(e,t){sg(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GDe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ym("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ym("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ym("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pLt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mLt=new Ck(3e4,6e4);function R4(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function qS(e,t,n,r,i={}){return YDe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=Tk(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),GDe.fetch()(XDe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},s))})}async function YDe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},pLt),t);try{const i=new gLt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw KN(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw KN(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw KN(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw KN(e,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Mee(e,c,u);ap(e,c)}}catch(i){if(i instanceof Cp)throw i;ap(e,"network-request-failed",{message:String(i)})}}async function KDe(e,t,n,r,i={}){const s=await qS(e,t,n,r,i);return"mfaPendingCredential"in s&&ap(e,"multi-factor-auth-required",{_serverResponse:s}),s}function XDe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Lee(e.config,i):`${e.config.apiScheme}://${i}`}class gLt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hf(this.auth,"network-request-failed")),mLt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function KN(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=hf(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yLt(e,t){return qS(e,"POST","/v1/accounts:delete",t)}async function QDe(e,t){return qS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function vLt(e,t=!1){const n=wi(e),r=await n.getIdToken(t),i=Fee(r);vn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:cA(U9(i.auth_time)),issuedAtTime:cA(U9(i.iat)),expirationTime:cA(U9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function U9(e){return Number(e)*1e3}function Fee(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return kD("JWT malformed, contained fewer than 3 sections"),null;try{const i=MDe(n);return i?JSON.parse(i):(kD("Failed to decode base64 JWT payload"),null)}catch(i){return kD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Cme(e){const t=Fee(e);return vn(t,"internal-error"),vn(typeof t.exp<"u","internal-error"),vn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UI(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Cp&&bLt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function bLt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Lt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cA(this.lastLoginAt),this.creationTime=cA(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L3(e){var t;const n=e.auth,r=await e.getIdToken(),i=await UI(e,QDe(n,{idToken:r}));vn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?JDe(s.providerUserInfo):[],a=ELt(e.providerData,o),l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new hq(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,d)}async function wLt(e){const t=wi(e);await L3(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function ELt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function JDe(e){return e.map(t=>{var{providerId:n}=t,r=IR(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xLt(e,t){const n=await YDe(e,{},async()=>{const r=Tk({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=XDe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",GDe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function SLt(e,t){return qS(e,"POST","/v2/accounts:revokeToken",R4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){vn(t.idToken,"internal-error"),vn(typeof t.idToken<"u","internal-error"),vn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Cme(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){vn(t.length!==0,"internal-error");const n=Cme(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(vn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await xLt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new wE;return r&&(vn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(vn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(vn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new wE,this.toJSON())}_performRefresh(){return ym("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(e,t){vn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class vm{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=IR(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _Lt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hq(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await UI(this,this.stsTokenManager.getToken(this.auth,t));return vn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return vLt(this,t)}reload(){return wLt(this)}_assign(t){this!==t&&(vn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new vm(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){vn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await L3(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Oh(this.auth.app))return Promise.reject(X0(this.auth));const t=await this.getIdToken();return await UI(this,yLt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:w,isAnonymous:E,providerData:S,stsTokenManager:x}=n;vn(_&&x,t,"internal-error");const T=wE.fromJSON(this.name,x);vn(typeof _=="string",t,"internal-error"),Bg(d,t.name),Bg(f,t.name),vn(typeof w=="boolean",t,"internal-error"),vn(typeof E=="boolean",t,"internal-error"),Bg(h,t.name),Bg(p,t.name),Bg(m,t.name),Bg(g,t.name),Bg(y,t.name),Bg(v,t.name);const I=new vm({uid:_,auth:t,email:f,emailVerified:w,displayName:d,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:T,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(I.providerData=S.map(P=>Object.assign({},P))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(t,n,r=!1){const i=new wE;i.updateFromServerResponse(n);const s=new vm({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await L3(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];vn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?JDe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new wE;a.updateFromIdToken(r);const l=new vm({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new hq(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ame=new Map;function bm(e){sg(e instanceof Function,"Expected a class definition");let t=Ame.get(e);return t?(sg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ame.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZDe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}ZDe.type="NONE";const Ime=ZDe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(e,t,n){return`firebase:${e}:${t}:${n}`}class EE{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=PD(this.userKey,i.apiKey,s),this.fullPersistenceKey=PD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?vm._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new EE(bm(Ime),t,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||bm(Ime);const o=PD(r,t.config.apiKey,t.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const d=vm._fromJSON(t,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new EE(s,t,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new EE(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rme(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(nMe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(eMe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(iMe(t))return"Blackberry";if(sMe(t))return"Webos";if(jee(t))return"Safari";if((t.includes("chrome/")||tMe(t))&&!t.includes("edge/"))return"Chrome";if(rMe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function eMe(e=Zo()){return/firefox\//i.test(e)}function jee(e=Zo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function tMe(e=Zo()){return/crios\//i.test(e)}function nMe(e=Zo()){return/iemobile/i.test(e)}function rMe(e=Zo()){return/android/i.test(e)}function iMe(e=Zo()){return/blackberry/i.test(e)}function sMe(e=Zo()){return/webos/i.test(e)}function k4(e=Zo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function TLt(e=Zo()){var t;return k4(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function CLt(){return B$t()&&document.documentMode===10}function oMe(e=Zo()){return k4(e)||rMe(e)||sMe(e)||iMe(e)||/windows phone/i.test(e)||nMe(e)}function ALt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aMe(e,t=[]){let n;switch(e){case"Browser":n=Rme(Zo());break;case"Worker":n=`${Rme(Zo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${o_}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ILt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const l=t(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RLt(e,t={}){return qS(e,"GET","/v2/passwordPolicy",R4(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kLt=6;class PLt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:kLt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NLt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kme(this),this.idTokenSubscription=new kme(this),this.beforeStateQueue=new ILt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WDe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=bm(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await EE.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await QDe(this,{idToken:t}),r=await vm._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Oh(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return vn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await L3(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=hLt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Oh(this.app))return Promise.reject(X0(this));const n=t?wi(t):null;return n&&vn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&vn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Oh(this.app)?Promise.reject(X0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Oh(this.app)?Promise.reject(X0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bm(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await RLt(this),n=new PLt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new VS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await SLt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&bm(t)||this._popupRedirectResolver;vn(n,this,"argument-error"),this.redirectPersistenceManager=await EE.create(this,[bm(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(vn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return vn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=aMe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&uLt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ak(e){return wi(e)}class kme{constructor(t){this.auth=t,this.observer=null,this.addObserver=G$t(n=>this.observer=n)}get next(){return vn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bee={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OLt(e){Bee=e}function DLt(e){return Bee.loadJS(e)}function MLt(){return Bee.gapiScript}function $Lt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LLt(e,t){const n=HS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(BI(s,t??{}))return i;ap(i,"already-initialized")}return n.initialize({options:t})}function FLt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(bm);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function jLt(e,t,n){const r=Ak(e);vn(r._canInitEmulator,r,"emulator-config-failed"),vn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=lMe(t),{host:o,port:a}=BLt(t),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),zLt()}function lMe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function BLt(e){const t=lMe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Pme(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Pme(o)}}}function Pme(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function zLt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uMe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ym("not implemented")}_getIdTokenResponse(t){return ym("not implemented")}_linkToIdToken(t,n){return ym("not implemented")}_getReauthenticationResolver(t){return ym("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xE(e,t){return KDe(e,"POST","/v1/accounts:signInWithIdp",R4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ULt="http://localhost";class wb extends uMe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new wb(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ap("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=IR(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new wb(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return xE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,xE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,xE(t,n)}buildRequest(){const t={requestUri:ULt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Tk(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zee{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik extends zee{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0 extends Ik{constructor(){super("facebook.com")}static credential(t){return wb._fromParams({providerId:f0.PROVIDER_ID,signInMethod:f0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return f0.credentialFromTaggedObject(t)}static credentialFromError(t){return f0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return f0.credential(t.oauthAccessToken)}catch{return null}}}f0.FACEBOOK_SIGN_IN_METHOD="facebook.com";f0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm extends Ik{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return wb._fromParams({providerId:cm.PROVIDER_ID,signInMethod:cm.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return cm.credentialFromTaggedObject(t)}static credentialFromError(t){return cm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return cm.credential(n,r)}catch{return null}}}cm.GOOGLE_SIGN_IN_METHOD="google.com";cm.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0 extends Ik{constructor(){super("github.com")}static credential(t){return wb._fromParams({providerId:h0.PROVIDER_ID,signInMethod:h0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return h0.credentialFromTaggedObject(t)}static credentialFromError(t){return h0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return h0.credential(t.oauthAccessToken)}catch{return null}}}h0.GITHUB_SIGN_IN_METHOD="github.com";h0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0 extends Ik{constructor(){super("twitter.com")}static credential(t,n){return wb._fromParams({providerId:p0.PROVIDER_ID,signInMethod:p0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return p0.credentialFromTaggedObject(t)}static credentialFromError(t){return p0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return p0.credential(n,r)}catch{return null}}}p0.TWITTER_SIGN_IN_METHOD="twitter.com";p0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VLt(e,t){return KDe(e,"POST","/v1/accounts:signUp",R4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await vm._fromIdTokenResponse(t,r,i),o=Nme(r);return new Cy({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Nme(r);return new Cy({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Nme(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HLt(e){var t;if(Oh(e.app))return Promise.reject(X0(e));const n=Ak(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new Cy({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await VLt(n,{returnSecureToken:!0}),i=await Cy._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3 extends Cp{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,F3.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new F3(t,n,r,i)}}function cMe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?F3._fromErrorAndOperation(e,s,t,r):s})}async function qLt(e,t,n=!1){const r=await UI(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Cy._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WLt(e,t,n=!1){const{auth:r}=e;if(Oh(r.app))return Promise.reject(X0(r));const i="reauthenticate";try{const s=await UI(e,cMe(r,i,t,e),n);vn(s.idToken,r,"internal-error");const o=Fee(s.idToken);vn(o,r,"internal-error");const{sub:a}=o;return vn(e.uid===a,r,"user-mismatch"),Cy._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ap(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GLt(e,t,n=!1){if(Oh(e.app))return Promise.reject(X0(e));const r="signIn",i=await cMe(e,r,t),s=await Cy._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function YLt(e,t,n,r){return wi(e).onIdTokenChanged(t,n,r)}function KLt(e,t,n){return wi(e).beforeAuthStateChanged(t,n)}function XLt(e,t,n,r){return wi(e).onAuthStateChanged(t,n,r)}function QLt(e){return wi(e).signOut()}const j3="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dMe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(j3,"1"),this.storage.removeItem(j3),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JLt(){const e=Zo();return jee(e)||k4(e)}const ZLt=1e3,eFt=10;class fMe extends dMe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=JLt()&&ALt(),this.fallbackToPolling=oMe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);CLt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,eFt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},ZLt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}fMe.type="LOCAL";const tFt=fMe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hMe extends dMe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}hMe.type="SESSION";const pMe=hMe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nFt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new P4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await nFt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}P4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uee(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rFt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Uee("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(){return window}function iFt(e){Gh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mMe(){return typeof Gh().WorkerGlobalScope<"u"&&typeof Gh().importScripts=="function"}async function sFt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oFt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function aFt(){return mMe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gMe="firebaseLocalStorageDb",lFt=1,B3="firebaseLocalStorage",yMe="fbase_key";class Rk{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function N4(e,t){return e.transaction([B3],t?"readwrite":"readonly").objectStore(B3)}function uFt(){const e=indexedDB.deleteDatabase(gMe);return new Rk(e).toPromise()}function pq(){const e=indexedDB.open(gMe,lFt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(B3,{keyPath:yMe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(B3)?t(r):(r.close(),await uFt(),t(await pq()))})})}async function Ome(e,t,n){const r=N4(e,!0).put({[yMe]:t,value:n});return new Rk(r).toPromise()}async function cFt(e,t){const n=N4(e,!1).get(t),r=await new Rk(n).toPromise();return r===void 0?null:r.value}function Dme(e,t){const n=N4(e,!0).delete(t);return new Rk(n).toPromise()}const dFt=800,fFt=3;class vMe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pq(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>fFt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mMe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=P4._getInstance(aFt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await sFt(),!this.activeServiceWorker)return;this.sender=new rFt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||oFt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await pq();return await Ome(t,j3,"1"),await Dme(t,j3),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ome(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>cFt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dme(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=N4(i,!1).getAll();return new Rk(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dFt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vMe.type="LOCAL";const hFt=vMe;new Ck(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bMe(e,t){return t?bm(t):(vn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vee extends uMe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return xE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return xE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return xE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function pFt(e){return GLt(e.auth,new Vee(e),e.bypassAuthState)}function mFt(e){const{auth:t,user:n}=e;return vn(n,t,"internal-error"),WLt(n,new Vee(e),e.bypassAuthState)}async function gFt(e){const{auth:t,user:n}=e;return vn(n,t,"internal-error"),qLt(n,new Vee(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Me{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return pFt;case"linkViaPopup":case"linkViaRedirect":return gFt;case"reauthViaPopup":case"reauthViaRedirect":return mFt;default:ap(this.auth,"internal-error")}}resolve(t){sg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){sg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yFt=new Ck(2e3,1e4);async function vFt(e,t,n){if(Oh(e.app))return Promise.reject(hf(e,"operation-not-supported-in-this-environment"));const r=Ak(e);cLt(e,t,zee);const i=bMe(r,n);return new D1(r,"signInViaPopup",t,i).executeNotNull()}class D1 extends _Me{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,D1.currentPopupAction&&D1.currentPopupAction.cancel(),D1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return vn(t,this.auth,"internal-error"),t}async onExecution(){sg(this.filter.length===1,"Popup operations only handle one event");const t=Uee();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(hf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,yFt.get())};t()}}D1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bFt="pendingRedirect",ND=new Map;class _Ft extends _Me{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=ND.get(this.auth._key());if(!t){try{const r=await wFt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}ND.set(this.auth._key(),t)}return this.bypassAuthState||ND.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wFt(e,t){const n=SFt(t),r=xFt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function EFt(e,t){ND.set(e._key(),t)}function xFt(e){return bm(e._redirectPersistence)}function SFt(e){return PD(bFt,e.config.apiKey,e.name)}async function TFt(e,t,n=!1){if(Oh(e.app))return Promise.reject(X0(e));const r=Ak(e),i=bMe(r,t),o=await new _Ft(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CFt=10*60*1e3;class AFt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!IFt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!wMe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(hf(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=CFt&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mme(t))}saveEventToCache(t){this.cachedEventUids.add(Mme(t)),this.lastProcessedEventTime=Date.now()}}function Mme(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function wMe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function IFt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wMe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RFt(e,t={}){return qS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kFt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PFt=/^https?/;async function NFt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await RFt(e);for(const n of t)try{if(OFt(n))return}catch{}ap(e,"unauthorized-domain")}function OFt(e){const t=fq(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!PFt.test(n))return!1;if(kFt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DFt=new Ck(3e4,6e4);function $me(){const e=Gh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function MFt(e){return new Promise((t,n)=>{var r,i,s;function o(){$me(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{$me(),n(hf(e,"network-request-failed"))},timeout:DFt.get()})}if(!((i=(r=Gh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Gh().gapi)===null||s===void 0)&&s.load)o();else{const a=$Lt("iframefcb");return Gh()[a]=()=>{gapi.load?o():n(hf(e,"network-request-failed"))},DLt(`${MLt()}?onload=${a}`).catch(l=>n(l))}}).catch(t=>{throw OD=null,t})}let OD=null;function $Ft(e){return OD=OD||MFt(e),OD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LFt=new Ck(5e3,15e3),FFt="__/auth/iframe",jFt="emulator/auth/iframe",BFt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zFt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UFt(e){const t=e.config;vn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Lee(t,jFt):`https://${e.config.authDomain}/${FFt}`,r={apiKey:t.apiKey,appName:e.name,v:o_},i=zFt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Tk(r).slice(1)}`}async function VFt(e){const t=await $Ft(e),n=Gh().gapi;return vn(n,e,"internal-error"),t.open({where:document.body,url:UFt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BFt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=hf(e,"network-request-failed"),a=Gh().setTimeout(()=>{s(o)},LFt.get());function l(){Gh().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HFt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qFt=500,WFt=600,GFt="_blank",YFt="http://localhost";class Lme{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KFt(e,t,n,r=qFt,i=WFt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},HFt),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Zo().toLowerCase();n&&(a=tMe(u)?GFt:n),eMe(u)&&(t=t||YFt,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(TLt(u)&&a!=="_self")return XFt(t||"",a),new Lme(null);const d=window.open(t||"",a,c);vn(d,e,"popup-blocked");try{d.focus()}catch{}return new Lme(d)}function XFt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QFt="__/auth/handler",JFt="emulator/auth/handler",ZFt=encodeURIComponent("fac");async function Fme(e,t,n,r,i,s){vn(e.config.authDomain,e,"auth-domain-config-required"),vn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:o_,eventId:i};if(t instanceof zee){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",W$t(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(t instanceof Ik){const c=t.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await e._getAppCheckToken(),u=l?`#${ZFt}=${encodeURIComponent(l)}`:"";return`${e6t(e)}?${Tk(a).slice(1)}${u}`}function e6t({config:e}){return e.emulator?Lee(e,JFt):`https://${e.authDomain}/${QFt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V9="webStorageSupport";class t6t{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pMe,this._completeRedirectFn=TFt,this._overrideRedirectResult=EFt}async _openPopup(t,n,r,i){var s;sg((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Fme(t,n,r,fq(),i);return KFt(t,o,Uee())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Fme(t,n,r,fq(),i);return iFt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(sg(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await VFt(t),r=new AFt(t);return n.register("authEvent",i=>(vn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(V9,{type:V9},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[V9];o!==void 0&&n(!!o),ap(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=NFt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return oMe()||jee()||k4()}}const EMe=t6t;var jme="@firebase/auth",Bme="1.7.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6t{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){vn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6t(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function i6t(e){ig(new op("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;vn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aMe(e)},u=new NLt(r,i,s,l);return FLt(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),ig(new op("auth-internal",t=>{const n=Ak(t.getProvider("auth").getImmediate());return(r=>new n6t(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ff(jme,Bme,r6t(e)),ff(jme,Bme,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6t=5*60,o6t=jDe("authIdTokenMaxAge")||s6t;let zme=null;const a6t=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>o6t)return;const i=n==null?void 0:n.token;zme!==i&&(zme=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function z3(e=Dee()){const t=HS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=LLt(e,{popupRedirectResolver:EMe,persistence:[hFt,tFt,pMe]}),r=jDe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=a6t(s.toString());KLt(n,o,()=>o(n.currentUser)),YLt(n,a=>o(a))}}const i=LDe("auth");return i&&jLt(n,`http://${i}`),n}function l6t(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}OLt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=hf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",l6t().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});i6t("Browser");var u6t="firebase",c6t="10.12.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ff(u6t,c6t,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xMe="firebasestorage.googleapis.com",SMe="storageBucket",d6t=2*60*1e3,f6t=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends Cp{constructor(t,n,r=0){super(H9(t),`Firebase Storage: ${n} (${H9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ms.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return H9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hs;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hs||(hs={}));function H9(e){return"storage/"+e}function Hee(){const e="An unknown error occurred, please check the error payload for server response.";return new ms(hs.UNKNOWN,e)}function h6t(e){return new ms(hs.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function p6t(e){return new ms(hs.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function m6t(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ms(hs.UNAUTHENTICATED,e)}function g6t(){return new ms(hs.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function y6t(e){return new ms(hs.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function v6t(){return new ms(hs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function b6t(){return new ms(hs.CANCELED,"User canceled the upload/download.")}function _6t(e){return new ms(hs.INVALID_URL,"Invalid URL '"+e+"'.")}function w6t(e){return new ms(hs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function E6t(){return new ms(hs.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+SMe+"' property when initializing the app?")}function x6t(){return new ms(hs.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function S6t(){return new ms(hs.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function T6t(e){return new ms(hs.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function mq(e){return new ms(hs.INVALID_ARGUMENT,e)}function TMe(){return new ms(hs.APP_DELETED,"The Firebase app was deleted.")}function C6t(e){return new ms(hs.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function dA(e,t){return new ms(hs.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function QT(e){throw new ms(hs.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=ol.makeFromUrl(t,n)}catch{return new ol(t,"")}if(r.path==="")return r;throw w6t(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${c}/b/${i}/o${f}`,"i"),p={bucket:1,path:3},m=n===xMe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),_=[{regex:a,indices:l,postModify:s},{regex:h,indices:p,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let w=0;w<_.length;w++){const E=_[w],S=E.regex.exec(t);if(S){const x=S[E.indices.bucket];let T=S[E.indices.path];T||(T=""),r=new ol(x,T),E.postModify(r);break}}if(r==null)throw _6t(t);return r}}class A6t{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6t(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...g){u||(u=!0,t.apply(null,g))}function d(g){i=setTimeout(()=>{i=null,e(h,l())},g)}function f(){s&&clearTimeout(s)}function h(g,...y){if(u){f();return}if(g){f(),c.call(null,g,...y);return}if(l()||o){f(),c.call(null,g,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,d(_)}let p=!1;function m(g){p||(p=!0,f(),!u&&(i!==null?(g||(a=2),clearTimeout(i),d(0)):g||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function R6t(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6t(e){return e!==void 0}function P6t(e){return typeof e=="object"&&!Array.isArray(e)}function qee(e){return typeof e=="string"||e instanceof String}function Ume(e){return Wee()&&e instanceof Blob}function Wee(){return typeof Blob<"u"}function gq(e,t,n,r){if(r<t)throw mq(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw mq(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function CMe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(H1||(H1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6t(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6t{constructor(t,n,r,i,s,o,a,l,u,c,d,f=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new XN(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===H1.NO_ERROR,l=s.getStatus();if(!a||N6t(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===H1.ABORT;r(!1,new XN(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new XN(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());k6t(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Hee();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?TMe():b6t();o(l)}else{const l=v6t();o(l)}};this.canceled_?n(!1,new XN(!1,null,!0)):this.backoffId_=I6t(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&R6t(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class XN{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function D6t(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function M6t(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function $6t(e,t){t&&(e["X-Firebase-GMPID"]=t)}function L6t(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function F6t(e,t,n,r,i,s,o=!0){const a=CMe(e.urlParams),l=e.url+a,u=Object.assign({},e.headers);return $6t(u,t),D6t(u,n),M6t(u,s),L6t(u,r),new O6t(l,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function B6t(...e){const t=j6t();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(Wee())return new Blob(e);throw new ms(hs.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function z6t(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6t(e){if(typeof atob>"u")throw T6t("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class q9{constructor(t,n){this.data=t,this.contentType=n||null}}function V6t(e,t){switch(e){case Dh.RAW:return new q9(AMe(t));case Dh.BASE64:case Dh.BASE64URL:return new q9(IMe(e,t));case Dh.DATA_URL:return new q9(q6t(t),W6t(t))}throw Hee()}function AMe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function H6t(e){let t;try{t=decodeURIComponent(e)}catch{throw dA(Dh.DATA_URL,"Malformed data URL.")}return AMe(t)}function IMe(e,t){switch(e){case Dh.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw dA(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Dh.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw dA(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=U6t(t)}catch(i){throw i.message.includes("polyfill")?i:dA(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class RMe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw dA(Dh.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=G6t(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function q6t(e){const t=new RMe(e);return t.base64?IMe(Dh.BASE64,t.rest):H6t(t.rest)}function W6t(e){return new RMe(e).contentType}function G6t(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(t,n){let r=0,i="";Ume(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Ume(this.data_)){const r=this.data_,i=z6t(r,t,n);return i===null?null:new m0(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new m0(r,!0)}}static getBlob(...t){if(Wee()){const n=t.map(r=>r instanceof m0?r.data_:r);return new m0(B6t.apply(null,n))}else{const n=t.map(o=>qee(o)?V6t(Dh.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new m0(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gee(e){let t;try{t=JSON.parse(e)}catch{return null}return P6t(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y6t(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function K6t(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function kMe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6t(e,t){return t}class Ga{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||X6t}}let QN=null;function Q6t(e){return!qee(e)||e.length<2?e:kMe(e)}function PMe(){if(QN)return QN;const e=[];e.push(new Ga("bucket")),e.push(new Ga("generation")),e.push(new Ga("metageneration")),e.push(new Ga("name","fullPath",!0));function t(s,o){return Q6t(o)}const n=new Ga("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ga("size");return i.xform=r,e.push(i),e.push(new Ga("timeCreated")),e.push(new Ga("updated")),e.push(new Ga("md5Hash",null,!0)),e.push(new Ga("cacheControl",null,!0)),e.push(new Ga("contentDisposition",null,!0)),e.push(new Ga("contentEncoding",null,!0)),e.push(new Ga("contentLanguage",null,!0)),e.push(new Ga("contentType",null,!0)),e.push(new Ga("metadata","customMetadata",!0)),QN=e,QN}function J6t(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new ol(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function Z6t(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return J6t(r,e),r}function NMe(e,t,n){const r=Gee(t);return r===null?null:Z6t(e,r,n)}function e4t(e,t,n,r){const i=Gee(t);if(i===null||!qee(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=e.bucket,d=e.fullPath,f="/b/"+o(c)+"/o/"+o(d),h=kk(f,n,r),p=CMe({alt:"media",token:u});return h+p})[0]}function t4t(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vme="prefixes",Hme="items";function n4t(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Vme])for(const i of n[Vme]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new ol(t,s));r.prefixes.push(o)}if(n[Hme])for(const i of n[Hme]){const s=e._makeStorageReference(new ol(t,i.name));r.items.push(s)}return r}function r4t(e,t,n){const r=Gee(n);return r===null?null:n4t(e,t,r)}class O4{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yee(e){if(!e)throw Hee()}function i4t(e,t){function n(r,i){const s=NMe(e,i,t);return Yee(s!==null),s}return n}function s4t(e,t){function n(r,i){const s=r4t(e,t,i);return Yee(s!==null),s}return n}function o4t(e,t){function n(r,i){const s=NMe(e,i,t);return Yee(s!==null),e4t(s,i,e.host,e._protocol)}return n}function Kee(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=g6t():i=m6t():n.getStatus()===402?i=p6t(e.bucket):n.getStatus()===403?i=y6t(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function OMe(e){const t=Kee(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=h6t(e.path)),s.serverResponse=i.serverResponse,s}return n}function a4t(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=kk(o,e.host,e._protocol),l="GET",u=e.maxOperationRetryTime,c=new O4(a,l,s4t(e,t.bucket),u);return c.urlParams=s,c.errorHandler=Kee(t),c}function l4t(e,t,n){const r=t.fullServerUrl(),i=kk(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new O4(i,s,o4t(e,n),o);return a.errorHandler=OMe(t),a}function u4t(e,t){const n=t.fullServerUrl(),r=kk(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(l,u){}const a=new O4(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=OMe(t),a}function c4t(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function d4t(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=c4t(null,t)),r}function f4t(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let w=0;w<2;w++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=d4t(t,r,i),c=t4t(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=m0.getBlob(d,r,f);if(h===null)throw x6t();const p={name:u.fullPath},m=kk(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new O4(m,g,i4t(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=Kee(t),v}class h4t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=H1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=H1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=H1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw QT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw QT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw QT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw QT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw QT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class p4t extends h4t{initXhr(){this.xhr_.responseType="text"}}function D4(){return new p4t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(t,n){this._service=t,n instanceof ol?this._location=n:this._location=ol.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Eb(t,n)}get root(){const t=new ol(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kMe(this._location.path)}get storage(){return this._service}get parent(){const t=Y6t(this._location.path);if(t===null)return null;const n=new ol(this._location.bucket,t);return new Eb(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw C6t(t)}}function m4t(e,t,n){e._throwIfRoot("uploadBytes");const r=f4t(e.storage,e._location,PMe(),new m0(t,!0),n);return e.storage.makeRequestWithTokens(r,D4).then(i=>({metadata:i,ref:e}))}function g4t(e){const t={prefixes:[],items:[]};return DMe(e,t).then(()=>t)}async function DMe(e,t,n){const i=await y4t(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await DMe(e,t,i.nextPageToken)}function y4t(e,t){t!=null&&typeof t.maxResults=="number"&&gq("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=a4t(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,D4)}function v4t(e){e._throwIfRoot("getDownloadURL");const t=l4t(e.storage,e._location,PMe());return e.storage.makeRequestWithTokens(t,D4).then(n=>{if(n===null)throw S6t();return n})}function b4t(e){e._throwIfRoot("deleteObject");const t=u4t(e.storage,e._location);return e.storage.makeRequestWithTokens(t,D4)}function _4t(e,t){const n=K6t(e._location.path,t),r=new ol(e._location.bucket,n);return new Eb(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4t(e){return/^[A-Za-z]+:\/\//.test(e)}function E4t(e,t){return new Eb(e,t)}function MMe(e,t){if(e instanceof Xee){const n=e;if(n._bucket==null)throw E6t();const r=new Eb(n,n._bucket);return t!=null?MMe(r,t):r}else return t!==void 0?_4t(e,t):e}function x4t(e,t){if(t&&w4t(t)){if(e instanceof Xee)return E4t(e,t);throw mq("To use ref(service, url), the first argument must be a Storage instance.")}else return MMe(e,t)}function qme(e,t){const n=t==null?void 0:t[SMe];return n==null?null:ol.makeFromBucketSpec(n,e)}function S4t(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:M$t(i,e.app.options.projectId))}class Xee{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=xMe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=d6t,this._maxUploadRetryTime=f6t,this._requests=new Set,i!=null?this._bucket=ol.makeFromBucketSpec(i,this._host):this._bucket=qme(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=ol.makeFromBucketSpec(this._url,t):this._bucket=qme(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){gq("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){gq("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Eb(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new A6t(TMe());{const o=F6t(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Wme="@firebase/storage",Gme="0.12.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Me="storage";function Ov(e,t,n){return e=wi(e),m4t(e,t,n)}function JT(e){return e=wi(e),g4t(e)}function Dv(e){return e=wi(e),v4t(e)}function Yme(e){return e=wi(e),b4t(e)}function pi(e,t){return e=wi(e),x4t(e,t)}function G_(e=Dee(),t){e=wi(e);const r=HS(e,$Me).getImmediate({identifier:t}),i=D$t("storage");return i&&T4t(r,...i),r}function T4t(e,t,n,r={}){S4t(e,t,n,r)}function C4t(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Xee(n,r,i,t,o_)}function A4t(){ig(new op($Me,C4t,"PUBLIC").setMultipleInstances(!0)),ff(Wme,Gme,""),ff(Wme,Gme,"esm2017")}A4t();var Kme=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var q1,LMe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(x,T){function I(){}I.prototype=T.prototype,x.D=T.prototype,x.prototype=new I,x.prototype.constructor=x,x.C=function(P,k,D){for(var R=Array(arguments.length-2),M=2;M<arguments.length;M++)R[M-2]=arguments[M];return T.prototype[k].apply(P,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,T,I){I||(I=0);var P=Array(16);if(typeof T=="string")for(var k=0;16>k;++k)P[k]=T.charCodeAt(I++)|T.charCodeAt(I++)<<8|T.charCodeAt(I++)<<16|T.charCodeAt(I++)<<24;else for(k=0;16>k;++k)P[k]=T[I++]|T[I++]<<8|T[I++]<<16|T[I++]<<24;T=x.g[0],I=x.g[1],k=x.g[2];var D=x.g[3],R=T+(D^I&(k^D))+P[0]+3614090360&4294967295;T=I+(R<<7&4294967295|R>>>25),R=D+(k^T&(I^k))+P[1]+3905402710&4294967295,D=T+(R<<12&4294967295|R>>>20),R=k+(I^D&(T^I))+P[2]+606105819&4294967295,k=D+(R<<17&4294967295|R>>>15),R=I+(T^k&(D^T))+P[3]+3250441966&4294967295,I=k+(R<<22&4294967295|R>>>10),R=T+(D^I&(k^D))+P[4]+4118548399&4294967295,T=I+(R<<7&4294967295|R>>>25),R=D+(k^T&(I^k))+P[5]+1200080426&4294967295,D=T+(R<<12&4294967295|R>>>20),R=k+(I^D&(T^I))+P[6]+2821735955&4294967295,k=D+(R<<17&4294967295|R>>>15),R=I+(T^k&(D^T))+P[7]+4249261313&4294967295,I=k+(R<<22&4294967295|R>>>10),R=T+(D^I&(k^D))+P[8]+1770035416&4294967295,T=I+(R<<7&4294967295|R>>>25),R=D+(k^T&(I^k))+P[9]+2336552879&4294967295,D=T+(R<<12&4294967295|R>>>20),R=k+(I^D&(T^I))+P[10]+4294925233&4294967295,k=D+(R<<17&4294967295|R>>>15),R=I+(T^k&(D^T))+P[11]+2304563134&4294967295,I=k+(R<<22&4294967295|R>>>10),R=T+(D^I&(k^D))+P[12]+1804603682&4294967295,T=I+(R<<7&4294967295|R>>>25),R=D+(k^T&(I^k))+P[13]+4254626195&4294967295,D=T+(R<<12&4294967295|R>>>20),R=k+(I^D&(T^I))+P[14]+2792965006&4294967295,k=D+(R<<17&4294967295|R>>>15),R=I+(T^k&(D^T))+P[15]+1236535329&4294967295,I=k+(R<<22&4294967295|R>>>10),R=T+(k^D&(I^k))+P[1]+4129170786&4294967295,T=I+(R<<5&4294967295|R>>>27),R=D+(I^k&(T^I))+P[6]+3225465664&4294967295,D=T+(R<<9&4294967295|R>>>23),R=k+(T^I&(D^T))+P[11]+643717713&4294967295,k=D+(R<<14&4294967295|R>>>18),R=I+(D^T&(k^D))+P[0]+3921069994&4294967295,I=k+(R<<20&4294967295|R>>>12),R=T+(k^D&(I^k))+P[5]+3593408605&4294967295,T=I+(R<<5&4294967295|R>>>27),R=D+(I^k&(T^I))+P[10]+38016083&4294967295,D=T+(R<<9&4294967295|R>>>23),R=k+(T^I&(D^T))+P[15]+3634488961&4294967295,k=D+(R<<14&4294967295|R>>>18),R=I+(D^T&(k^D))+P[4]+3889429448&4294967295,I=k+(R<<20&4294967295|R>>>12),R=T+(k^D&(I^k))+P[9]+568446438&4294967295,T=I+(R<<5&4294967295|R>>>27),R=D+(I^k&(T^I))+P[14]+3275163606&4294967295,D=T+(R<<9&4294967295|R>>>23),R=k+(T^I&(D^T))+P[3]+4107603335&4294967295,k=D+(R<<14&4294967295|R>>>18),R=I+(D^T&(k^D))+P[8]+1163531501&4294967295,I=k+(R<<20&4294967295|R>>>12),R=T+(k^D&(I^k))+P[13]+2850285829&4294967295,T=I+(R<<5&4294967295|R>>>27),R=D+(I^k&(T^I))+P[2]+4243563512&4294967295,D=T+(R<<9&4294967295|R>>>23),R=k+(T^I&(D^T))+P[7]+1735328473&4294967295,k=D+(R<<14&4294967295|R>>>18),R=I+(D^T&(k^D))+P[12]+2368359562&4294967295,I=k+(R<<20&4294967295|R>>>12),R=T+(I^k^D)+P[5]+4294588738&4294967295,T=I+(R<<4&4294967295|R>>>28),R=D+(T^I^k)+P[8]+2272392833&4294967295,D=T+(R<<11&4294967295|R>>>21),R=k+(D^T^I)+P[11]+1839030562&4294967295,k=D+(R<<16&4294967295|R>>>16),R=I+(k^D^T)+P[14]+4259657740&4294967295,I=k+(R<<23&4294967295|R>>>9),R=T+(I^k^D)+P[1]+2763975236&4294967295,T=I+(R<<4&4294967295|R>>>28),R=D+(T^I^k)+P[4]+1272893353&4294967295,D=T+(R<<11&4294967295|R>>>21),R=k+(D^T^I)+P[7]+4139469664&4294967295,k=D+(R<<16&4294967295|R>>>16),R=I+(k^D^T)+P[10]+3200236656&4294967295,I=k+(R<<23&4294967295|R>>>9),R=T+(I^k^D)+P[13]+681279174&4294967295,T=I+(R<<4&4294967295|R>>>28),R=D+(T^I^k)+P[0]+3936430074&4294967295,D=T+(R<<11&4294967295|R>>>21),R=k+(D^T^I)+P[3]+3572445317&4294967295,k=D+(R<<16&4294967295|R>>>16),R=I+(k^D^T)+P[6]+76029189&4294967295,I=k+(R<<23&4294967295|R>>>9),R=T+(I^k^D)+P[9]+3654602809&4294967295,T=I+(R<<4&4294967295|R>>>28),R=D+(T^I^k)+P[12]+3873151461&4294967295,D=T+(R<<11&4294967295|R>>>21),R=k+(D^T^I)+P[15]+530742520&4294967295,k=D+(R<<16&4294967295|R>>>16),R=I+(k^D^T)+P[2]+3299628645&4294967295,I=k+(R<<23&4294967295|R>>>9),R=T+(k^(I|~D))+P[0]+4096336452&4294967295,T=I+(R<<6&4294967295|R>>>26),R=D+(I^(T|~k))+P[7]+1126891415&4294967295,D=T+(R<<10&4294967295|R>>>22),R=k+(T^(D|~I))+P[14]+2878612391&4294967295,k=D+(R<<15&4294967295|R>>>17),R=I+(D^(k|~T))+P[5]+4237533241&4294967295,I=k+(R<<21&4294967295|R>>>11),R=T+(k^(I|~D))+P[12]+1700485571&4294967295,T=I+(R<<6&4294967295|R>>>26),R=D+(I^(T|~k))+P[3]+2399980690&4294967295,D=T+(R<<10&4294967295|R>>>22),R=k+(T^(D|~I))+P[10]+4293915773&4294967295,k=D+(R<<15&4294967295|R>>>17),R=I+(D^(k|~T))+P[1]+2240044497&4294967295,I=k+(R<<21&4294967295|R>>>11),R=T+(k^(I|~D))+P[8]+1873313359&4294967295,T=I+(R<<6&4294967295|R>>>26),R=D+(I^(T|~k))+P[15]+4264355552&4294967295,D=T+(R<<10&4294967295|R>>>22),R=k+(T^(D|~I))+P[6]+2734768916&4294967295,k=D+(R<<15&4294967295|R>>>17),R=I+(D^(k|~T))+P[13]+1309151649&4294967295,I=k+(R<<21&4294967295|R>>>11),R=T+(k^(I|~D))+P[4]+4149444226&4294967295,T=I+(R<<6&4294967295|R>>>26),R=D+(I^(T|~k))+P[11]+3174756917&4294967295,D=T+(R<<10&4294967295|R>>>22),R=k+(T^(D|~I))+P[2]+718787259&4294967295,k=D+(R<<15&4294967295|R>>>17),R=I+(D^(k|~T))+P[9]+3951481745&4294967295,x.g[0]=x.g[0]+T&4294967295,x.g[1]=x.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+D&4294967295}r.prototype.u=function(x,T){T===void 0&&(T=x.length);for(var I=T-this.blockSize,P=this.B,k=this.h,D=0;D<T;){if(k==0)for(;D<=I;)i(this,x,D),D+=this.blockSize;if(typeof x=="string"){for(;D<T;)if(P[k++]=x.charCodeAt(D++),k==this.blockSize){i(this,P),k=0;break}}else for(;D<T;)if(P[k++]=x[D++],k==this.blockSize){i(this,P),k=0;break}}this.h=k,this.o+=T},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var T=1;T<x.length-8;++T)x[T]=0;var I=8*this.o;for(T=x.length-8;T<x.length;++T)x[T]=I&255,I/=256;for(this.u(x),x=Array(16),T=I=0;4>T;++T)for(var P=0;32>P;P+=8)x[I++]=this.g[T]>>>P&255;return x};function s(x,T){var I=a;return Object.prototype.hasOwnProperty.call(I,x)?I[x]:I[x]=T(x)}function o(x,T){this.h=T;for(var I=[],P=!0,k=x.length-1;0<=k;k--){var D=x[k]|0;P&&D==T||(I[k]=D,P=!1)}this.g=I}var a={};function l(x){return-128<=x&&128>x?s(x,function(T){return new o([T|0],0>T?-1:0)}):new o([x|0],0>x?-1:0)}function u(x){if(isNaN(x)||!isFinite(x))return d;if(0>x)return g(u(-x));for(var T=[],I=1,P=0;x>=I;P++)T[P]=x/I|0,I*=4294967296;return new o(T,0)}function c(x,T){if(x.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(x.charAt(0)=="-")return g(c(x.substring(1),T));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(T,8)),P=d,k=0;k<x.length;k+=8){var D=Math.min(8,x.length-k),R=parseInt(x.substring(k,k+D),T);8>D?(D=u(Math.pow(T,D)),P=P.j(D).add(u(R))):(P=P.j(I),P=P.add(u(R)))}return P}var d=l(0),f=l(1),h=l(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var x=0,T=1,I=0;I<this.g.length;I++){var P=this.i(I);x+=(0<=P?P:4294967296+P)*T,T*=4294967296}return x},e.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(p(this))return"0";if(m(this))return"-"+g(this).toString(x);for(var T=u(Math.pow(x,6)),I=this,P="";;){var k=w(I,T).g;I=y(I,k.j(T));var D=((0<I.g.length?I.g[0]:I.h)>>>0).toString(x);if(I=k,p(I))return D+P;for(;6>D.length;)D="0"+D;P=D+P}},e.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function p(x){if(x.h!=0)return!1;for(var T=0;T<x.g.length;T++)if(x.g[T]!=0)return!1;return!0}function m(x){return x.h==-1}e.l=function(x){return x=y(this,x),m(x)?-1:p(x)?0:1};function g(x){for(var T=x.g.length,I=[],P=0;P<T;P++)I[P]=~x.g[P];return new o(I,~x.h).add(f)}e.abs=function(){return m(this)?g(this):this},e.add=function(x){for(var T=Math.max(this.g.length,x.g.length),I=[],P=0,k=0;k<=T;k++){var D=P+(this.i(k)&65535)+(x.i(k)&65535),R=(D>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);P=R>>>16,D&=65535,R&=65535,I[k]=R<<16|D}return new o(I,I[I.length-1]&-2147483648?-1:0)};function y(x,T){return x.add(g(T))}e.j=function(x){if(p(this)||p(x))return d;if(m(this))return m(x)?g(this).j(g(x)):g(g(this).j(x));if(m(x))return g(this.j(g(x)));if(0>this.l(h)&&0>x.l(h))return u(this.m()*x.m());for(var T=this.g.length+x.g.length,I=[],P=0;P<2*T;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(var k=0;k<x.g.length;k++){var D=this.i(P)>>>16,R=this.i(P)&65535,M=x.i(k)>>>16,$=x.i(k)&65535;I[2*P+2*k]+=R*$,v(I,2*P+2*k),I[2*P+2*k+1]+=D*$,v(I,2*P+2*k+1),I[2*P+2*k+1]+=R*M,v(I,2*P+2*k+1),I[2*P+2*k+2]+=D*M,v(I,2*P+2*k+2)}for(P=0;P<T;P++)I[P]=I[2*P+1]<<16|I[2*P];for(P=T;P<2*T;P++)I[P]=0;return new o(I,0)};function v(x,T){for(;(x[T]&65535)!=x[T];)x[T+1]+=x[T]>>>16,x[T]&=65535,T++}function _(x,T){this.g=x,this.h=T}function w(x,T){if(p(T))throw Error("division by zero");if(p(x))return new _(d,d);if(m(x))return T=w(g(x),T),new _(g(T.g),g(T.h));if(m(T))return T=w(x,g(T)),new _(g(T.g),T.h);if(30<x.g.length){if(m(x)||m(T))throw Error("slowDivide_ only works with positive integers.");for(var I=f,P=T;0>=P.l(x);)I=E(I),P=E(P);var k=S(I,1),D=S(P,1);for(P=S(P,2),I=S(I,2);!p(P);){var R=D.add(P);0>=R.l(x)&&(k=k.add(I),D=R),P=S(P,1),I=S(I,1)}return T=y(x,k.j(T)),new _(k,T)}for(k=d;0<=x.l(T);){for(I=Math.max(1,Math.floor(x.m()/T.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),D=u(I),R=D.j(T);m(R)||0<R.l(x);)I-=P,D=u(I),R=D.j(T);p(D)&&(D=f),k=k.add(D),x=y(x,R)}return new _(k,x)}e.A=function(x){return w(this,x).h},e.and=function(x){for(var T=Math.max(this.g.length,x.g.length),I=[],P=0;P<T;P++)I[P]=this.i(P)&x.i(P);return new o(I,this.h&x.h)},e.or=function(x){for(var T=Math.max(this.g.length,x.g.length),I=[],P=0;P<T;P++)I[P]=this.i(P)|x.i(P);return new o(I,this.h|x.h)},e.xor=function(x){for(var T=Math.max(this.g.length,x.g.length),I=[],P=0;P<T;P++)I[P]=this.i(P)^x.i(P);return new o(I,this.h^x.h)};function E(x){for(var T=x.g.length+1,I=[],P=0;P<T;P++)I[P]=x.i(P)<<1|x.i(P-1)>>>31;return new o(I,x.h)}function S(x,T){var I=T>>5;T%=32;for(var P=x.g.length-I,k=[],D=0;D<P;D++)k[D]=0<T?x.i(D+I)>>>T|x.i(D+I+1)<<32-T:x.i(D+I);return new o(k,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,LMe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,q1=o}).apply(typeof Kme<"u"?Kme:typeof self<"u"?self:typeof window<"u"?window:{});var JN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FMe,jMe,i2,BMe,DD,yq,zMe,UMe,VMe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,j,q){return C==Array.prototype||C==Object.prototype||(C[j]=q.value),C};function n(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof JN=="object"&&JN];for(var j=0;j<C.length;++j){var q=C[j];if(q&&q.Math==Math)return q}throw Error("Cannot find global object")}var r=n(this);function i(C,j){if(j)e:{var q=r;C=C.split(".");for(var J=0;J<C.length-1;J++){var Te=C[J];if(!(Te in q))break e;q=q[Te]}C=C[C.length-1],J=q[C],j=j(J),j!=J&&j!=null&&t(q,C,{configurable:!0,writable:!0,value:j})}}function s(C,j){C instanceof String&&(C+="");var q=0,J=!1,Te={next:function(){if(!J&&q<C.length){var $e=q++;return{value:j($e,C[$e]),done:!1}}return J=!0,{done:!0,value:void 0}}};return Te[Symbol.iterator]=function(){return Te},Te}i("Array.prototype.values",function(C){return C||function(){return s(this,function(j,q){return q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(C){var j=typeof C;return j=j!="object"?j:C?Array.isArray(C)?"array":j:"null",j=="array"||j=="object"&&typeof C.length=="number"}function u(C){var j=typeof C;return j=="object"&&C!=null||j=="function"}function c(C,j,q){return C.call.apply(C.bind,arguments)}function d(C,j,q){if(!C)throw Error();if(2<arguments.length){var J=Array.prototype.slice.call(arguments,2);return function(){var Te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Te,J),C.apply(j,Te)}}return function(){return C.apply(j,arguments)}}function f(C,j,q){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,f.apply(null,arguments)}function h(C,j){var q=Array.prototype.slice.call(arguments,1);return function(){var J=q.slice();return J.push.apply(J,arguments),C.apply(this,J)}}function p(C,j){function q(){}q.prototype=j.prototype,C.aa=j.prototype,C.prototype=new q,C.prototype.constructor=C,C.Qb=function(J,Te,$e){for(var gt=Array(arguments.length-2),ai=2;ai<arguments.length;ai++)gt[ai-2]=arguments[ai];return j.prototype[Te].apply(J,gt)}}function m(C){const j=C.length;if(0<j){const q=Array(j);for(let J=0;J<j;J++)q[J]=C[J];return q}return[]}function g(C,j){for(let q=1;q<arguments.length;q++){const J=arguments[q];if(l(J)){const Te=C.length||0,$e=J.length||0;C.length=Te+$e;for(let gt=0;gt<$e;gt++)C[Te+gt]=J[gt]}else C.push(J)}}class y{constructor(j,q){this.i=j,this.j=q,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function v(C){return/^[\s\xa0]*$/.test(C)}function _(){var C=a.navigator;return C&&(C=C.userAgent)?C:""}function w(C){return w[" "](C),C}w[" "]=function(){};var E=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function S(C,j,q){for(const J in C)j.call(q,C[J],J,C)}function x(C,j){for(const q in C)j.call(void 0,C[q],q,C)}function T(C){const j={};for(const q in C)j[q]=C[q];return j}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(C,j){let q,J;for(let Te=1;Te<arguments.length;Te++){J=arguments[Te];for(q in J)C[q]=J[q];for(let $e=0;$e<I.length;$e++)q=I[$e],Object.prototype.hasOwnProperty.call(J,q)&&(C[q]=J[q])}}function k(C){var j=1;C=C.split(":");const q=[];for(;0<j&&C.length;)q.push(C.shift()),j--;return C.length&&q.push(C.join(":")),q}function D(C){a.setTimeout(()=>{throw C},0)}function R(){var C=z;let j=null;return C.g&&(j=C.g,C.g=C.g.next,C.g||(C.h=null),j.next=null),j}class M{constructor(){this.h=this.g=null}add(j,q){const J=$.get();J.set(j,q),this.h?this.h.next=J:this.g=J,this.h=J}}var $=new y(()=>new L,C=>C.reset());class L{constructor(){this.next=this.g=this.h=null}set(j,q){this.h=j,this.g=q,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,z=new M,N=()=>{const C=a.Promise.resolve(void 0);B=()=>{C.then(V)}};var V=()=>{for(var C;C=R();){try{C.h.call(C.g)}catch(q){D(q)}var j=$;j.j(C),100>j.h&&(j.h++,C.next=j.g,j.g=C)}U=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(C,j){this.type=C,this.g=this.target=j,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var C=!1,j=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const q=()=>{};a.addEventListener("test",q,j),a.removeEventListener("test",q,j)}catch{}return C}();function G(C,j){if(F.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var q=this.type=C.type,J=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=j,j=C.relatedTarget){if(E){e:{try{w(j.nodeName);var Te=!0;break e}catch{}Te=!1}Te||(j=null)}}else q=="mouseover"?j=C.fromElement:q=="mouseout"&&(j=C.toElement);this.relatedTarget=j,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:Q[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&G.aa.h.call(this)}}p(G,F);var Q={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),se=0;function ne(C,j,q,J,Te){this.listener=C,this.proxy=null,this.src=j,this.type=q,this.capture=!!J,this.ha=Te,this.key=++se,this.da=this.fa=!1}function ce(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function Ee(C){this.src=C,this.g={},this.h=0}Ee.prototype.add=function(C,j,q,J,Te){var $e=C.toString();C=this.g[$e],C||(C=this.g[$e]=[],this.h++);var gt=We(C,j,J,Te);return-1<gt?(j=C[gt],q||(j.fa=!1)):(j=new ne(j,this.src,$e,!!J,Te),j.fa=q,C.push(j)),j};function de(C,j){var q=j.type;if(q in C.g){var J=C.g[q],Te=Array.prototype.indexOf.call(J,j,void 0),$e;($e=0<=Te)&&Array.prototype.splice.call(J,Te,1),$e&&(ce(j),C.g[q].length==0&&(delete C.g[q],C.h--))}}function We(C,j,q,J){for(var Te=0;Te<C.length;++Te){var $e=C[Te];if(!$e.da&&$e.listener==j&&$e.capture==!!q&&$e.ha==J)return Te}return-1}var Fe="closure_lm_"+(1e6*Math.random()|0),Ne={};function je(C,j,q,J,Te){if(Array.isArray(j)){for(var $e=0;$e<j.length;$e++)je(C,j[$e],q,J,Te);return null}return q=tt(q),C&&C[ie]?C.K(j,q,u(J)?!!J.capture:!!J,Te):ye(C,j,q,!1,J,Te)}function ye(C,j,q,J,Te,$e){if(!j)throw Error("Invalid event type");var gt=u(Te)?!!Te.capture:!!Te,ai=he(C);if(ai||(C[Fe]=ai=new Ee(C)),q=ai.add(j,q,J,gt,$e),q.proxy)return q;if(J=ae(),q.proxy=J,J.src=C,J.listener=q,C.addEventListener)H||(Te=gt),Te===void 0&&(Te=!1),C.addEventListener(j.toString(),J,Te);else if(C.attachEvent)C.attachEvent(ft(j.toString()),J);else if(C.addListener&&C.removeListener)C.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return q}function ae(){function C(q){return j.call(C.src,C.listener,q)}const j=Se;return C}function Pe(C,j,q,J,Te){if(Array.isArray(j))for(var $e=0;$e<j.length;$e++)Pe(C,j[$e],q,J,Te);else J=u(J)?!!J.capture:!!J,q=tt(q),C&&C[ie]?(C=C.i,j=String(j).toString(),j in C.g&&($e=C.g[j],q=We($e,q,J,Te),-1<q&&(ce($e[q]),Array.prototype.splice.call($e,q,1),$e.length==0&&(delete C.g[j],C.h--)))):C&&(C=he(C))&&(j=C.g[j.toString()],C=-1,j&&(C=We(j,q,J,Te)),(q=-1<C?j[C]:null)&&Be(q))}function Be(C){if(typeof C!="number"&&C&&!C.da){var j=C.src;if(j&&j[ie])de(j.i,C);else{var q=C.type,J=C.proxy;j.removeEventListener?j.removeEventListener(q,J,C.capture):j.detachEvent?j.detachEvent(ft(q),J):j.addListener&&j.removeListener&&j.removeListener(J),(q=he(j))?(de(q,C),q.h==0&&(q.src=null,j[Fe]=null)):ce(C)}}}function ft(C){return C in Ne?Ne[C]:Ne[C]="on"+C}function Se(C,j){if(C.da)C=!0;else{j=new G(j,this);var q=C.listener,J=C.ha||C.src;C.fa&&Be(C),C=q.call(J,j)}return C}function he(C){return C=C[Fe],C instanceof Ee?C:null}var Ve="__closure_events_fn_"+(1e9*Math.random()>>>0);function tt(C){return typeof C=="function"?C:(C[Ve]||(C[Ve]=function(j){return C.handleEvent(j)}),C[Ve])}function ge(){W.call(this),this.i=new Ee(this),this.M=this,this.F=null}p(ge,W),ge.prototype[ie]=!0,ge.prototype.removeEventListener=function(C,j,q,J){Pe(this,C,j,q,J)};function ke(C,j){var q,J=C.F;if(J)for(q=[];J;J=J.F)q.push(J);if(C=C.M,J=j.type||j,typeof j=="string")j=new F(j,C);else if(j instanceof F)j.target=j.target||C;else{var Te=j;j=new F(J,C),P(j,Te)}if(Te=!0,q)for(var $e=q.length-1;0<=$e;$e--){var gt=j.g=q[$e];Te=Ye(gt,J,!0,j)&&Te}if(gt=j.g=C,Te=Ye(gt,J,!0,j)&&Te,Te=Ye(gt,J,!1,j)&&Te,q)for($e=0;$e<q.length;$e++)gt=j.g=q[$e],Te=Ye(gt,J,!1,j)&&Te}ge.prototype.N=function(){if(ge.aa.N.call(this),this.i){var C=this.i,j;for(j in C.g){for(var q=C.g[j],J=0;J<q.length;J++)ce(q[J]);delete C.g[j],C.h--}}this.F=null},ge.prototype.K=function(C,j,q,J){return this.i.add(String(C),j,!1,q,J)},ge.prototype.L=function(C,j,q,J){return this.i.add(String(C),j,!0,q,J)};function Ye(C,j,q,J){if(j=C.i.g[String(j)],!j)return!0;j=j.concat();for(var Te=!0,$e=0;$e<j.length;++$e){var gt=j[$e];if(gt&&!gt.da&&gt.capture==q){var ai=gt.listener,Io=gt.ha||gt.src;gt.fa&&de(C.i,gt),Te=ai.call(Io,J)!==!1&&Te}}return Te&&!J.defaultPrevented}function Xe(C,j,q){if(typeof C=="function")q&&(C=f(C,q));else if(C&&typeof C.handleEvent=="function")C=f(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:a.setTimeout(C,j||0)}function xt(C){C.g=Xe(()=>{C.g=null,C.i&&(C.i=!1,xt(C))},C.l);const j=C.h;C.h=null,C.m.apply(null,j)}class An extends W{constructor(j,q){super(),this.m=j,this.l=q,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:xt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gr(C){W.call(this),this.h=C,this.g={}}p(gr,W);var yr=[];function kr(C){S(C.g,function(j,q){this.g.hasOwnProperty(q)&&Be(j)},C),C.g={}}gr.prototype.N=function(){gr.aa.N.call(this),kr(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xt=a.JSON.stringify,Dn=a.JSON.parse,rr=class{stringify(C){return a.JSON.stringify(C,void 0)}parse(C){return a.JSON.parse(C,void 0)}};function ir(){}ir.prototype.h=null;function ao(C){return C.h||(C.h=C.i())}function Oi(){}var Ui={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Un(){F.call(this,"d")}p(Un,F);function Wn(){F.call(this,"c")}p(Wn,F);var Zi={},Ed=null;function Va(){return Ed=Ed||new ge}Zi.La="serverreachability";function gc(C){F.call(this,Zi.La,C)}p(gc,F);function mt(C){const j=Va();ke(j,new gc(j))}Zi.STAT_EVENT="statevent";function fi(C,j){F.call(this,Zi.STAT_EVENT,C),this.stat=j}p(fi,F);function wn(C){const j=Va();ke(j,new fi(j,C))}Zi.Ma="timingevent";function $r(C,j){F.call(this,Zi.Ma,C),this.size=j}p($r,F);function ni(C,j){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){C()},j)}function ri(){this.g=!0}ri.prototype.xa=function(){this.g=!1};function ue(C,j,q,J,Te,$e){C.info(function(){if(C.g)if($e)for(var gt="",ai=$e.split("&"),Io=0;Io<ai.length;Io++){var Sr=ai[Io].split("=");if(1<Sr.length){var aa=Sr[0];Sr=Sr[1];var la=aa.split("_");gt=2<=la.length&&la[1]=="type"?gt+(aa+"="+Sr+"&"):gt+(aa+"=redacted&")}}else gt=null;else gt=$e;return"XMLHTTP REQ ("+J+") [attempt "+Te+"]: "+j+`
`+q+`
`+gt})}function te(C,j,q,J,Te,$e,gt){C.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+Te+"]: "+j+`
`+q+`
`+$e+" "+gt})}function pe(C,j,q,J){C.info(function(){return"XMLHTTP TEXT ("+j+"): "+Re(C,q)+(J?" "+J:"")})}function Ie(C,j){C.info(function(){return"TIMEOUT: "+j})}ri.prototype.info=function(){};function Re(C,j){if(!C.g)return j;if(!j)return null;try{var q=JSON.parse(j);if(q){for(C=0;C<q.length;C++)if(Array.isArray(q[C])){var J=q[C];if(!(2>J.length)){var Te=J[1];if(Array.isArray(Te)&&!(1>Te.length)){var $e=Te[0];if($e!="noop"&&$e!="stop"&&$e!="close")for(var gt=1;gt<Te.length;gt++)Te[gt]=""}}}}return Xt(q)}catch{return j}}var dt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},rn;function Gn(){}p(Gn,ir),Gn.prototype.g=function(){return new XMLHttpRequest},Gn.prototype.i=function(){return{}},rn=new Gn;function Qn(C,j,q,J){this.j=C,this.i=j,this.l=q,this.R=J||1,this.U=new gr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new In}function In(){this.i=null,this.g="",this.h=!1}var vr={},zr={};function Qt(C,j,q){C.L=1,C.v=Jn(Ze(j)),C.m=q,C.P=!0,br(C,null)}function br(C,j){C.F=Date.now(),Vi(C),C.A=Ze(C.v);var q=C.A,J=C.R;Array.isArray(J)||(J=[String(J)]),AP(q.i,"t",J),C.C=0,q=C.j.J,C.h=new In,C.g=Hoe(C.j,q?j:null,!C.m),0<C.O&&(C.M=new An(f(C.Y,C,C.g),C.O)),j=C.U,q=C.g,J=C.ca;var Te="readystatechange";Array.isArray(Te)||(Te&&(yr[0]=Te.toString()),Te=yr);for(var $e=0;$e<Te.length;$e++){var gt=je(q,Te[$e],J||j.handleEvent,!1,j.h||j);if(!gt)break;j.g[gt.key]=gt}j=C.H?T(C.H):{},C.m?(C.u||(C.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,j)):(C.u="GET",C.g.ea(C.A,C.u,null,j)),mt(),ue(C.i,C.u,C.A,C.l,C.R,C.m)}Qn.prototype.ca=function(C){C=C.target;const j=this.M;j&&gs(C)==3?j.j():this.Y(C)},Qn.prototype.Y=function(C){try{if(C==this.g)e:{const la=gs(this.g);var j=this.g.Ba();const R_=this.g.Z();if(!(3>la)&&(la!=3||this.g&&(this.h.h||this.g.oa()||oa(this.g)))){this.J||la!=4||j==7||(j==8||0>=R_?mt(3):mt(2)),hi(this);var q=this.g.Z();this.X=q;t:if(ii(this)){var J=oa(this.g);C="";var Te=J.length,$e=gs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){es(this),Ao(this);var gt="";break t}this.h.i=new a.TextDecoder}for(j=0;j<Te;j++)this.h.h=!0,C+=this.h.i.decode(J[j],{stream:!($e&&j==Te-1)});J.length=0,this.h.g+=C,this.C=0,gt=this.h.g}else gt=this.g.oa();if(this.o=q==200,te(this.i,this.u,this.A,this.l,this.R,la,q),this.o){if(this.T&&!this.K){t:{if(this.g){var ai,Io=this.g;if((ai=Io.g?Io.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ai)){var Sr=ai;break t}}Sr=null}if(q=Sr)pe(this.i,this.l,q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ts(this,q);else{this.o=!1,this.s=3,wn(12),es(this),Ao(this);break e}}if(this.P){q=!0;let xd;for(;!this.J&&this.C<gt.length;)if(xd=dr(this,gt),xd==zr){la==4&&(this.s=4,wn(14),q=!1),pe(this.i,this.l,null,"[Incomplete Response]");break}else if(xd==vr){this.s=4,wn(15),pe(this.i,this.l,gt,"[Invalid Chunk]"),q=!1;break}else pe(this.i,this.l,xd,null),ts(this,xd);if(ii(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),la!=4||gt.length!=0||this.h.h||(this.s=1,wn(16),q=!1),this.o=this.o&&q,!q)pe(this.i,this.l,gt,"[Invalid Chunked Response]"),es(this),Ao(this);else if(0<gt.length&&!this.W){this.W=!0;var aa=this.j;aa.g==this&&aa.ba&&!aa.M&&(aa.j.info("Great, no buffering proxy detected. Bytes received: "+gt.length),i8(aa),aa.M=!0,wn(11))}}else pe(this.i,this.l,gt,null),ts(this,gt);la==4&&es(this),this.o&&!this.J&&(la==4?Boe(this.j,this):(this.o=!1,Vi(this)))}else Rv(this.g),q==400&&0<gt.indexOf("Unknown SID")?(this.s=3,wn(12)):(this.s=0,wn(13)),es(this),Ao(this)}}}catch{}finally{}};function ii(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function dr(C,j){var q=C.C,J=j.indexOf(`
`,q);return J==-1?zr:(q=Number(j.substring(q,J)),isNaN(q)?vr:(J+=1,J+q>j.length?zr:(j=j.slice(J,J+q),C.C=J+q,j)))}Qn.prototype.cancel=function(){this.J=!0,es(this)};function Vi(C){C.S=Date.now()+C.I,lo(C,C.I)}function lo(C,j){if(C.B!=null)throw Error("WatchDog timer not null");C.B=ni(f(C.ba,C),j)}function hi(C){C.B&&(a.clearTimeout(C.B),C.B=null)}Qn.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(Ie(this.i,this.A),this.L!=2&&(mt(),wn(17)),es(this),this.s=2,Ao(this)):lo(this,this.S-C)};function Ao(C){C.j.G==0||C.J||Boe(C.j,C)}function es(C){hi(C);var j=C.M;j&&typeof j.ma=="function"&&j.ma(),C.M=null,kr(C.U),C.g&&(j=C.g,C.g=null,j.abort(),j.ma())}function ts(C,j){try{var q=C.j;if(q.G!=0&&(q.g==C||Xf(q.h,C))){if(!C.K&&Xf(q.h,C)&&q.G==3){try{var J=q.Da.g.parse(j)}catch{J=null}if(Array.isArray(J)&&J.length==3){var Te=J;if(Te[0]==0){e:if(!q.u){if(q.g)if(q.g.F+3e3<C.F)DP(q),NP(q);else break e;r8(q),wn(18)}}else q.za=Te[1],0<q.za-q.T&&37500>Te[2]&&q.F&&q.v==0&&!q.C&&(q.C=ni(f(q.Za,q),6e3));if(1>=yc(q.h)&&q.ca){try{q.ca()}catch{}q.ca=void 0}}else kv(q,11)}else if((C.K||q.g==C)&&DP(q),!v(j))for(Te=q.Da.g.parse(j),j=0;j<Te.length;j++){let Sr=Te[j];if(q.T=Sr[0],Sr=Sr[1],q.G==2)if(Sr[0]=="c"){q.K=Sr[1],q.ia=Sr[2];const aa=Sr[3];aa!=null&&(q.la=aa,q.j.info("VER="+q.la));const la=Sr[4];la!=null&&(q.Aa=la,q.j.info("SVER="+q.Aa));const R_=Sr[5];R_!=null&&typeof R_=="number"&&0<R_&&(J=1.5*R_,q.L=J,q.j.info("backChannelRequestTimeoutMs_="+J)),J=q;const xd=C.g;if(xd){const $P=xd.g?xd.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($P){var $e=J.h;$e.g||$P.indexOf("spdy")==-1&&$P.indexOf("quic")==-1&&$P.indexOf("h2")==-1||($e.j=$e.l,$e.g=new Set,$e.h&&(Y($e,$e.h),$e.h=null))}if(J.D){const s8=xd.g?xd.g.getResponseHeader("X-HTTP-Session-Id"):null;s8&&(J.ya=s8,Lt(J.I,J.D,s8))}}q.G=3,q.l&&q.l.ua(),q.ba&&(q.R=Date.now()-C.F,q.j.info("Handshake RTT: "+q.R+"ms")),J=q;var gt=C;if(J.qa=Voe(J,J.J?J.ia:null,J.W),gt.K){fe(J.h,gt);var ai=gt,Io=J.L;Io&&(ai.I=Io),ai.B&&(hi(ai),Vi(ai)),J.g=gt}else Foe(J);0<q.i.length&&OP(q)}else Sr[0]!="stop"&&Sr[0]!="close"||kv(q,7);else q.G==3&&(Sr[0]=="stop"||Sr[0]=="close"?Sr[0]=="stop"?kv(q,7):A_(q):Sr[0]!="noop"&&q.l&&q.l.ta(Sr),q.v=0)}}mt(4)}catch{}}var ia=class{constructor(C,j){this.g=C,this.map=j}};function Ha(C){this.l=C||10,a.PerformanceNavigationTiming?(C=a.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uo(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function yc(C){return C.h?1:C.g?C.g.size:0}function Xf(C,j){return C.h?C.h==j:C.g?C.g.has(j):!1}function Y(C,j){C.g?C.g.add(j):C.h=j}function fe(C,j){C.h&&C.h==j?C.h=null:C.g&&C.g.has(j)&&C.g.delete(j)}Ha.prototype.cancel=function(){if(this.i=ee(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function ee(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let j=C.i;for(const q of C.g.values())j=j.concat(q.D);return j}return m(C.i)}function be(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(l(C)){for(var j=[],q=C.length,J=0;J<q;J++)j.push(C[J]);return j}j=[],q=0;for(J in C)j[q++]=C[J];return j}function we(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(l(C)||typeof C=="string"){var j=[];C=C.length;for(var q=0;q<C;q++)j.push(q);return j}j=[],q=0;for(const J in C)j[q++]=J;return j}}}function ve(C,j){if(C.forEach&&typeof C.forEach=="function")C.forEach(j,void 0);else if(l(C)||typeof C=="string")Array.prototype.forEach.call(C,j,void 0);else for(var q=we(C),J=be(C),Te=J.length,$e=0;$e<Te;$e++)j.call(void 0,J[$e],q&&q[$e],C)}var ze=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qe(C,j){if(C){C=C.split("&");for(var q=0;q<C.length;q++){var J=C[q].indexOf("="),Te=null;if(0<=J){var $e=C[q].substring(0,J);Te=C[q].substring(J+1)}else $e=C[q];j($e,Te?decodeURIComponent(Te.replace(/\+/g," ")):"")}}}function Je(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof Je){this.h=C.h,ct(this,C.j),this.o=C.o,this.g=C.g,At(this,C.s),this.l=C.l;var j=C.i,q=new vc;q.i=j.i,j.g&&(q.g=new Map(j.g),q.h=j.h),Rn(this,q),this.m=C.m}else C&&(j=String(C).match(ze))?(this.h=!1,ct(this,j[1]||"",!0),this.o=Ur(j[2]||""),this.g=Ur(j[3]||"",!0),At(this,j[4]),this.l=Ur(j[5]||"",!0),Rn(this,j[6]||"",!0),this.m=Ur(j[7]||"")):(this.h=!1,this.i=new vc(null,this.h))}Je.prototype.toString=function(){var C=[],j=this.j;j&&C.push(Vr(j,Qf,!0),":");var q=this.g;return(q||j=="file")&&(C.push("//"),(j=this.o)&&C.push(Vr(j,Qf,!0),"@"),C.push(encodeURIComponent(String(q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),q=this.s,q!=null&&C.push(":",String(q))),(q=this.l)&&(this.g&&q.charAt(0)!="/"&&C.push("/"),C.push(Vr(q,q.charAt(0)=="/"?vT:Fp,!0))),(q=this.i.toString())&&C.push("?",q),(q=this.m)&&C.push("#",Vr(q,CP)),C.join("")};function Ze(C){return new Je(C)}function ct(C,j,q){C.j=q?Ur(j,!0):j,C.j&&(C.j=C.j.replace(/:$/,""))}function At(C,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);C.s=j}else C.s=null}function Rn(C,j,q){j instanceof vc?(C.i=j,bT(C.i,C.h)):(q||(j=Vr(j,Tv)),C.i=new vc(j,C.h))}function Lt(C,j,q){C.i.set(j,q)}function Jn(C){return Lt(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function Ur(C,j){return C?j?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function Vr(C,j,q){return typeof C=="string"?(C=encodeURI(C).replace(j,sa),q&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function sa(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var Qf=/[#\/\?@]/g,Fp=/[#\?:]/g,vT=/[#\?]/g,Tv=/[#\?@]/g,CP=/#/g;function vc(C,j){this.h=this.g=null,this.i=C||null,this.j=!!j}function Al(C){C.g||(C.g=new Map,C.h=0,C.i&&Qe(C.i,function(j,q){C.add(decodeURIComponent(j.replace(/\+/g," ")),q)}))}e=vc.prototype,e.add=function(C,j){Al(this),this.i=null,C=Bp(this,C);var q=this.g.get(C);return q||this.g.set(C,q=[]),q.push(j),this.h+=1,this};function jp(C,j){Al(C),j=Bp(C,j),C.g.has(j)&&(C.i=null,C.h-=C.g.get(j).length,C.g.delete(j))}function T_(C,j){return Al(C),j=Bp(C,j),C.g.has(j)}e.forEach=function(C,j){Al(this),this.g.forEach(function(q,J){q.forEach(function(Te){C.call(j,Te,J,this)},this)},this)},e.na=function(){Al(this);const C=Array.from(this.g.values()),j=Array.from(this.g.keys()),q=[];for(let J=0;J<j.length;J++){const Te=C[J];for(let $e=0;$e<Te.length;$e++)q.push(j[J])}return q},e.V=function(C){Al(this);let j=[];if(typeof C=="string")T_(this,C)&&(j=j.concat(this.g.get(Bp(this,C))));else{C=Array.from(this.g.values());for(let q=0;q<C.length;q++)j=j.concat(C[q])}return j},e.set=function(C,j){return Al(this),this.i=null,C=Bp(this,C),T_(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[j]),this.h+=1,this},e.get=function(C,j){return C?(C=this.V(C),0<C.length?String(C[0]):j):j};function AP(C,j,q){jp(C,j),0<q.length&&(C.i=null,C.g.set(Bp(C,j),m(q)),C.h+=q.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],j=Array.from(this.g.keys());for(var q=0;q<j.length;q++){var J=j[q];const $e=encodeURIComponent(String(J)),gt=this.V(J);for(J=0;J<gt.length;J++){var Te=$e;gt[J]!==""&&(Te+="="+encodeURIComponent(String(gt[J]))),C.push(Te)}}return this.i=C.join("&")};function Bp(C,j){return j=String(j),C.j&&(j=j.toLowerCase()),j}function bT(C,j){j&&!C.j&&(Al(C),C.i=null,C.g.forEach(function(q,J){var Te=J.toLowerCase();J!=Te&&(jp(this,J),AP(this,Te,q))},C)),C.j=j}function IP(C,j){const q=new ri;if(a.Image){const J=new Image;J.onload=h(Il,q,"TestLoadImage: loaded",!0,j,J),J.onerror=h(Il,q,"TestLoadImage: error",!1,j,J),J.onabort=h(Il,q,"TestLoadImage: abort",!1,j,J),J.ontimeout=h(Il,q,"TestLoadImage: timeout",!1,j,J),a.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=C}else j(!1)}function zp(C,j){const q=new ri,J=new AbortController,Te=setTimeout(()=>{J.abort(),Il(q,"TestPingServer: timeout",!1,j)},1e4);fetch(C,{signal:J.signal}).then($e=>{clearTimeout(Te),$e.ok?Il(q,"TestPingServer: ok",!0,j):Il(q,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(Te),Il(q,"TestPingServer: error",!1,j)})}function Il(C,j,q,J,Te){try{Te&&(Te.onload=null,Te.onerror=null,Te.onabort=null,Te.ontimeout=null),J(q)}catch{}}function n8(){this.g=new rr}function RP(C,j,q){const J=q||"";try{ve(C,function(Te,$e){let gt=Te;u(Te)&&(gt=Xt(Te)),j.push(J+$e+"="+encodeURIComponent(gt))})}catch(Te){throw j.push(J+"type="+encodeURIComponent("_badmap")),Te}}function Cv(C){this.l=C.Ub||null,this.j=C.eb||!1}p(Cv,ir),Cv.prototype.g=function(){return new Av(this.l,this.j)},Cv.prototype.i=function(C){return function(){return C}}({});function Av(C,j){ge.call(this),this.D=C,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Av,ge),e=Av.prototype,e.open=function(C,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=j,this.readyState=1,Ng(this)},e.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(j.body=C),(this.D||a).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Iv(this)),this.readyState=0},e.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,Ng(this)),this.g&&(this.readyState=3,Ng(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kP(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function kP(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}e.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var j=C.value?C.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!C.done}))&&(this.response=this.responseText+=j)}C.done?Iv(this):Ng(this),this.readyState==3&&kP(this)}},e.Ra=function(C){this.g&&(this.response=this.responseText=C,Iv(this))},e.Qa=function(C){this.g&&(this.response=C,Iv(this))},e.ga=function(){this.g&&Iv(this)};function Iv(C){C.readyState=4,C.l=null,C.j=null,C.v=null,Ng(C)}e.setRequestHeader=function(C,j){this.u.append(C,j)},e.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],j=this.h.entries();for(var q=j.next();!q.done;)q=q.value,C.push(q[0]+": "+q[1]),q=j.next();return C.join(`\r
`)};function Ng(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(Av.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function PP(C){let j="";return S(C,function(q,J){j+=J,j+=":",j+=q,j+=`\r
`}),j}function re(C,j,q){e:{for(J in q){var J=!1;break e}J=!0}J||(q=PP(q),typeof C=="string"?q!=null&&encodeURIComponent(String(q)):Lt(C,j,q))}function me(C){ge.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(me,ge);var Oe=/^https?$/i,Nt=["POST","PUT"];e=me.prototype,e.Ha=function(C){this.J=C},e.ea=function(C,j,q,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);j=j?j.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rn.g(),this.v=this.o?ao(this.o):ao(rn),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(j,String(C),!0),this.B=!1}catch($e){Yn(this,$e);return}if(C=q||"",q=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var Te in J)q.set(Te,J[Te]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const $e of J.keys())q.set($e,J.get($e));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(q.keys()).find($e=>$e.toLowerCase()=="content-type"),Te=a.FormData&&C instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Nt,j,void 0))||J||Te||q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$e,gt]of q)this.g.setRequestHeader($e,gt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oi(this),this.u=!0,this.g.send(C),this.u=!1}catch($e){Yn(this,$e)}};function Yn(C,j){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=j,C.m=5,Lr(C),Zn(C)}function Lr(C){C.A||(C.A=!0,ke(C,"complete"),ke(C,"error"))}e.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,ke(this,"complete"),ke(this,"abort"),Zn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zn(this,!0)),me.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?si(this):this.bb())},e.bb=function(){si(this)};function si(C){if(C.h&&typeof o<"u"&&(!C.v[1]||gs(C)!=4||C.Z()!=2)){if(C.u&&gs(C)==4)Xe(C.Ea,0,C);else if(ke(C,"readystatechange"),gs(C)==4){C.h=!1;try{const gt=C.Z();e:switch(gt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var q;if(!(q=j)){var J;if(J=gt===0){var Te=String(C.D).match(ze)[1]||null;!Te&&a.self&&a.self.location&&(Te=a.self.location.protocol.slice(0,-1)),J=!Oe.test(Te?Te.toLowerCase():"")}q=J}if(q)ke(C,"complete"),ke(C,"success");else{C.m=6;try{var $e=2<gs(C)?C.g.statusText:""}catch{$e=""}C.l=$e+" ["+C.Z()+"]",Lr(C)}}finally{Zn(C)}}}}function Zn(C,j){if(C.g){oi(C);const q=C.g,J=C.v[0]?()=>{}:null;C.g=null,C.v=null,j||ke(C,"ready");try{q.onreadystatechange=J}catch{}}}function oi(C){C.I&&(a.clearTimeout(C.I),C.I=null)}e.isActive=function(){return!!this.g};function gs(C){return C.g?C.g.readyState:0}e.Z=function(){try{return 2<gs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(C){if(this.g){var j=this.g.responseText;return C&&j.indexOf(C)==0&&(j=j.substring(C.length)),Dn(j)}};function oa(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function Rv(C){const j={};C=(C.g&&2<=gs(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<C.length;J++){if(v(C[J]))continue;var q=k(C[J]);const Te=q[0];if(q=q[1],typeof q!="string")continue;q=q.trim();const $e=j[Te]||[];j[Te]=$e,$e.push(q)}x(j,function(J){return J.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Up(C,j,q){return q&&q.internalChannelParams&&q.internalChannelParams[C]||j}function C_(C){this.Aa=0,this.i=[],this.j=new ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Up("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Up("baseRetryDelayMs",5e3,C),this.cb=Up("retryDelaySeedMs",1e4,C),this.Wa=Up("forwardChannelMaxRetries",2,C),this.wa=Up("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new Ha(C&&C.concurrentRequestLimit),this.Da=new n8,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=C_.prototype,e.la=8,e.G=1,e.connect=function(C,j,q,J){wn(0),this.W=C,this.H=j||{},q&&J!==void 0&&(this.H.OSID=q,this.H.OAID=J),this.F=this.X,this.I=Voe(this,null,this.W),OP(this)};function A_(C){if(Moe(C),C.G==3){var j=C.U++,q=Ze(C.I);if(Lt(q,"SID",C.K),Lt(q,"RID",j),Lt(q,"TYPE","terminate"),_T(C,q),j=new Qn(C,C.j,j),j.L=2,j.v=Jn(Ze(q)),q=!1,a.navigator&&a.navigator.sendBeacon)try{q=a.navigator.sendBeacon(j.v.toString(),"")}catch{}!q&&a.Image&&(new Image().src=j.v,q=!0),q||(j.g=Hoe(j.j,null),j.g.ea(j.v)),j.F=Date.now(),Vi(j)}Uoe(C)}function NP(C){C.g&&(i8(C),C.g.cancel(),C.g=null)}function Moe(C){NP(C),C.u&&(a.clearTimeout(C.u),C.u=null),DP(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&a.clearTimeout(C.s),C.s=null)}function OP(C){if(!uo(C.h)&&!C.s){C.s=!0;var j=C.Ga;B||N(),U||(B(),U=!0),z.add(j,C),C.B=0}}function pze(C,j){return yc(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=j.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=ni(f(C.Ga,C,j),zoe(C,C.B)),C.B++,!0)}e.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const Te=new Qn(this,this.j,C);let $e=this.o;if(this.S&&($e?($e=T($e),P($e,this.S)):$e=this.S),this.m!==null||this.O||(Te.H=$e,$e=null),this.P)e:{for(var j=0,q=0;q<this.i.length;q++){t:{var J=this.i[q];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(j+=J,4096<j){j=q;break e}if(j===4096||q===this.i.length-1){j=q+1;break e}}j=1e3}else j=1e3;j=Loe(this,Te,j),q=Ze(this.I),Lt(q,"RID",C),Lt(q,"CVER",22),this.D&&Lt(q,"X-HTTP-Session-Id",this.D),_T(this,q),$e&&(this.O?j="headers="+encodeURIComponent(String(PP($e)))+"&"+j:this.m&&re(q,this.m,$e)),Y(this.h,Te),this.Ua&&Lt(q,"TYPE","init"),this.P?(Lt(q,"$req",j),Lt(q,"SID","null"),Te.T=!0,Qt(Te,q,null)):Qt(Te,q,j),this.G=2}}else this.G==3&&(C?$oe(this,C):this.i.length==0||uo(this.h)||$oe(this))};function $oe(C,j){var q;j?q=j.l:q=C.U++;const J=Ze(C.I);Lt(J,"SID",C.K),Lt(J,"RID",q),Lt(J,"AID",C.T),_T(C,J),C.m&&C.o&&re(J,C.m,C.o),q=new Qn(C,C.j,q,C.B+1),C.m===null&&(q.H=C.o),j&&(C.i=j.D.concat(C.i)),j=Loe(C,q,1e3),q.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),Y(C.h,q),Qt(q,J,j)}function _T(C,j){C.H&&S(C.H,function(q,J){Lt(j,J,q)}),C.l&&ve({},function(q,J){Lt(j,J,q)})}function Loe(C,j,q){q=Math.min(C.i.length,q);var J=C.l?f(C.l.Na,C.l,C):null;e:{var Te=C.i;let $e=-1;for(;;){const gt=["count="+q];$e==-1?0<q?($e=Te[0].g,gt.push("ofs="+$e)):$e=0:gt.push("ofs="+$e);let ai=!0;for(let Io=0;Io<q;Io++){let Sr=Te[Io].g;const aa=Te[Io].map;if(Sr-=$e,0>Sr)$e=Math.max(0,Te[Io].g-100),ai=!1;else try{RP(aa,gt,"req"+Sr+"_")}catch{J&&J(aa)}}if(ai){J=gt.join("&");break e}}}return C=C.i.splice(0,q),j.D=C,J}function Foe(C){if(!C.g&&!C.u){C.Y=1;var j=C.Fa;B||N(),U||(B(),U=!0),z.add(j,C),C.v=0}}function r8(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=ni(f(C.Fa,C),zoe(C,C.v)),C.v++,!0)}e.Fa=function(){if(this.u=null,joe(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=ni(f(this.ab,this),C)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wn(10),NP(this),joe(this))};function i8(C){C.A!=null&&(a.clearTimeout(C.A),C.A=null)}function joe(C){C.g=new Qn(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var j=Ze(C.qa);Lt(j,"RID","rpc"),Lt(j,"SID",C.K),Lt(j,"AID",C.T),Lt(j,"CI",C.F?"0":"1"),!C.F&&C.ja&&Lt(j,"TO",C.ja),Lt(j,"TYPE","xmlhttp"),_T(C,j),C.m&&C.o&&re(j,C.m,C.o),C.L&&(C.g.I=C.L);var q=C.g;C=C.ia,q.L=1,q.v=Jn(Ze(j)),q.m=null,q.P=!0,br(q,C)}e.Za=function(){this.C!=null&&(this.C=null,NP(this),r8(this),wn(19))};function DP(C){C.C!=null&&(a.clearTimeout(C.C),C.C=null)}function Boe(C,j){var q=null;if(C.g==j){DP(C),i8(C),C.g=null;var J=2}else if(Xf(C.h,j))q=j.D,fe(C.h,j),J=1;else return;if(C.G!=0){if(j.o)if(J==1){q=j.m?j.m.length:0,j=Date.now()-j.F;var Te=C.B;J=Va(),ke(J,new $r(J,q)),OP(C)}else Foe(C);else if(Te=j.s,Te==3||Te==0&&0<j.X||!(J==1&&pze(C,j)||J==2&&r8(C)))switch(q&&0<q.length&&(j=C.h,j.i=j.i.concat(q)),Te){case 1:kv(C,5);break;case 4:kv(C,10);break;case 3:kv(C,6);break;default:kv(C,2)}}}function zoe(C,j){let q=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(q*=2),q*j}function kv(C,j){if(C.j.info("Error code "+j),j==2){var q=f(C.fb,C),J=C.Xa;const Te=!J;J=new Je(J||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ct(J,"https"),Jn(J),Te?IP(J.toString(),q):zp(J.toString(),q)}else wn(2);C.G=0,C.l&&C.l.sa(j),Uoe(C),Moe(C)}e.fb=function(C){C?(this.j.info("Successfully pinged google.com"),wn(2)):(this.j.info("Failed to ping google.com"),wn(1))};function Uoe(C){if(C.G=0,C.ka=[],C.l){const j=ee(C.h);(j.length!=0||C.i.length!=0)&&(g(C.ka,j),g(C.ka,C.i),C.h.i.length=0,m(C.i),C.i.length=0),C.l.ra()}}function Voe(C,j,q){var J=q instanceof Je?Ze(q):new Je(q);if(J.g!="")j&&(J.g=j+"."+J.g),At(J,J.s);else{var Te=a.location;J=Te.protocol,j=j?j+"."+Te.hostname:Te.hostname,Te=+Te.port;var $e=new Je(null);J&&ct($e,J),j&&($e.g=j),Te&&At($e,Te),q&&($e.l=q),J=$e}return q=C.D,j=C.ya,q&&j&&Lt(J,q,j),Lt(J,"VER",C.la),_T(C,J),J}function Hoe(C,j,q){if(j&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=C.Ca&&!C.pa?new me(new Cv({eb:q})):new me(C.pa),j.Ha(C.J),j}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function qoe(){}e=qoe.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function MP(){}MP.prototype.g=function(C,j){return new Tu(C,j)};function Tu(C,j){ge.call(this),this.g=new C_(j),this.l=C,this.h=j&&j.messageUrlParams||null,C=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(C?C["X-WebChannel-Content-Type"]=j.messageContentType:C={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(C?C["X-WebChannel-Client-Profile"]=j.va:C={"X-WebChannel-Client-Profile":j.va}),this.g.S=C,(C=j&&j.Sb)&&!v(C)&&(this.g.m=C),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!v(j)&&(this.g.D=j,C=this.h,C!==null&&j in C&&(C=this.h,j in C&&delete C[j])),this.j=new I_(this)}p(Tu,ge),Tu.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tu.prototype.close=function(){A_(this.g)},Tu.prototype.o=function(C){var j=this.g;if(typeof C=="string"){var q={};q.__data__=C,C=q}else this.u&&(q={},q.__data__=Xt(C),C=q);j.i.push(new ia(j.Ya++,C)),j.G==3&&OP(j)},Tu.prototype.N=function(){this.g.l=null,delete this.j,A_(this.g),delete this.g,Tu.aa.N.call(this)};function Woe(C){Un.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var j=C.__sm__;if(j){e:{for(const q in j){C=q;break e}C=void 0}(this.i=C)&&(C=this.i,j=j!==null&&C in j?j[C]:void 0),this.data=j}else this.data=C}p(Woe,Un);function Goe(){Wn.call(this),this.status=1}p(Goe,Wn);function I_(C){this.g=C}p(I_,qoe),I_.prototype.ua=function(){ke(this.g,"a")},I_.prototype.ta=function(C){ke(this.g,new Woe(C))},I_.prototype.sa=function(C){ke(this.g,new Goe)},I_.prototype.ra=function(){ke(this.g,"b")},MP.prototype.createWebChannel=MP.prototype.g,Tu.prototype.send=Tu.prototype.o,Tu.prototype.open=Tu.prototype.m,Tu.prototype.close=Tu.prototype.close,VMe=function(){return new MP},UMe=function(){return Va()},zMe=Zi,yq={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dt.NO_ERROR=0,dt.TIMEOUT=8,dt.HTTP_ERROR=6,DD=dt,kt.COMPLETE="complete",BMe=kt,Oi.EventType=Ui,Ui.OPEN="a",Ui.CLOSE="b",Ui.ERROR="c",Ui.MESSAGE="d",ge.prototype.listen=ge.prototype.K,i2=Oi,jMe=Cv,me.prototype.listenOnce=me.prototype.L,me.prototype.getLastError=me.prototype.Ka,me.prototype.getLastErrorCode=me.prototype.Ba,me.prototype.getStatus=me.prototype.Z,me.prototype.getResponseJson=me.prototype.Oa,me.prototype.getResponseText=me.prototype.oa,me.prototype.send=me.prototype.ea,me.prototype.setWithCredentials=me.prototype.Ha,FMe=me}).apply(typeof JN<"u"?JN:typeof self<"u"?self:typeof window<"u"?window:{});const Xme="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}$l.UNAUTHENTICATED=new $l(null),$l.GOOGLE_CREDENTIALS=new $l("google-credentials-uid"),$l.FIRST_PARTY=new $l("first-party-uid"),$l.MOCK_USER=new $l("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WS="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=new I4("@firebase/firestore");function ZT(){return xb.logLevel}function Ot(e,...t){if(xb.logLevel<=ar.DEBUG){const n=t.map(Qee);xb.debug(`Firestore (${WS}): ${e}`,...n)}}function og(e,...t){if(xb.logLevel<=ar.ERROR){const n=t.map(Qee);xb.error(`Firestore (${WS}): ${e}`,...n)}}function VI(e,...t){if(xb.logLevel<=ar.WARN){const n=t.map(Qee);xb.warn(`Firestore (${WS}): ${e}`,...n)}}function Qee(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(e="Unexpected state"){const t=`FIRESTORE (${WS}) INTERNAL ASSERTION FAILED: `+e;throw og(t),new Error(t)}function _i(e,t){e||bn()}function Cn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tt extends Cp{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4t{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class R4t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n($l.UNAUTHENTICATED))}shutdown(){}}class k4t{constructor(t){this.t=t,this.currentUser=$l.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Pm;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pm,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pm)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_i(typeof r.accessToken=="string"),new I4t(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return _i(t===null||typeof t=="string"),new $l(t)}}class P4t{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=$l.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class N4t{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new P4t(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n($l.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class O4t{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class D4t{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&Ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ot("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(_i(typeof n.token=="string"),this.R=n.token,new O4t(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4t(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HMe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=M4t(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function Nr(e,t){return e<t?-1:e>t?1:0}function wx(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Tt(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Tt(Ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Tt(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Tt(Ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return eo.fromMillis(Date.now())}static fromDate(t){return eo.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new eo(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Nr(this.nanoseconds,t.nanoseconds):Nr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Sn(t)}static min(){return new Sn(new eo(0,0))}static max(){return new Sn(new eo(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(t,n,r){n===void 0?n=0:n>t.length&&bn(),r===void 0?r=t.length-n:r>t.length-n&&bn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return HI.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof HI?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Ai extends HI{construct(t,n,r){return new Ai(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Tt(Ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ai(n)}static emptyPath(){return new Ai([])}}const $4t=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vo extends HI{construct(t,n,r){return new Vo(t,n,r)}static isValidIdentifier(t){return $4t.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vo(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Tt(Ke.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Tt(Ke.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Tt(Ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Tt(Ke.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Vo(n)}static emptyPath(){return new Vo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(t){this.path=t}static fromPath(t){return new Yt(Ai.fromString(t))}static fromName(t){return new Yt(Ai.fromString(t).popFirst(5))}static empty(){return new Yt(Ai.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ai.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ai.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Yt(new Ai(t.slice()))}}function L4t(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Sn.fromTimestamp(r===1e9?new eo(n+1,0):new eo(n,r));return new Ay(i,Yt.empty(),t)}function F4t(e){return new Ay(e.readTime,e.key,-1)}class Ay{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Ay(Sn.min(),Yt.empty(),-1)}static max(){return new Ay(Sn.max(),Yt.empty(),-1)}}function j4t(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Yt.comparator(e.documentKey,t.documentKey),n!==0?n:Nr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4t="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class z4t{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pk(e){if(e.code!==Ke.FAILED_PRECONDITION||e.message!==B4t)throw e;Ot("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&bn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new rt((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof rt?n:rt.resolve(n)}catch(n){return rt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):rt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):rt.reject(n)}static resolve(t){return new rt((n,r)=>{n(t)})}static reject(t){return new rt((n,r)=>{r(t)})}static waitFor(t){return new rt((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(t){let n=rt.resolve(!1);for(const r of t)n=n.next(i=>i?rt.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new rt((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(t[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new rt((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function U4t(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Nk(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jee{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Jee.oe=-1;function M4(e){return e==null}function U3(e){return e===0&&1/e==-1/0}function V4t(e){return typeof e=="number"&&Number.isInteger(e)&&!U3(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qme(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function a_(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function qMe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(t,n){this.comparator=t,this.root=n||jo.EMPTY}insert(t,n){return new Ji(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,jo.BLACK,null,null))}remove(t){return new Ji(this.comparator,this.root.remove(t,this.comparator).copy(null,null,jo.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ZN(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ZN(this.root,t,this.comparator,!1)}getReverseIterator(){return new ZN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ZN(this.root,t,this.comparator,!0)}}class ZN{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class jo{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??jo.RED,this.left=i??jo.EMPTY,this.right=s??jo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new jo(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return jo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return jo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,jo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,jo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw bn();const t=this.left.check();if(t!==this.right.check())throw bn();return t+(this.isRed()?0:1)}}jo.EMPTY=null,jo.RED=!0,jo.BLACK=!1;jo.EMPTY=new class{constructor(){this.size=0}get key(){throw bn()}get value(){throw bn()}get color(){throw bn()}get left(){throw bn()}get right(){throw bn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new jo(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t){this.comparator=t,this.data=new Ji(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jme(this.data.getIterator())}getIteratorFrom(t){return new Jme(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Go)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Go(this.comparator);return n.data=t,n}}class Jme{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(t){this.fields=t,t.sort(Vo.comparator)}static empty(){return new Vu([])}unionWith(t){let n=new Go(Vo.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Vu(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return wx(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WMe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new WMe("Invalid base64 string: "+s):s}}(t);return new Fa(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Fa(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Nr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Fa.EMPTY_BYTE_STRING=new Fa("");const H4t=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Iy(e){if(_i(!!e),typeof e=="string"){let t=0;const n=H4t.exec(e);if(_i(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ns(e.seconds),nanos:Ns(e.nanos)}}function Ns(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Sb(e){return typeof e=="string"?Fa.fromBase64String(e):Fa.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zee(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ete(e){const t=e.mapValue.fields.__previous_value__;return Zee(t)?ete(t):t}function qI(e){const t=Iy(e.mapValue.fields.__local_write_time__.timestampValue);return new eo(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4t{constructor(t,n,r,i,s,o,a,l,u){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class WI{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new WI("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof WI&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Tb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zee(e)?4:W4t(e)?9007199254740991:10:bn()}function lp(e,t){if(e===t)return!0;const n=Tb(e);if(n!==Tb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return qI(e).isEqual(qI(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Iy(i.timestampValue),a=Iy(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return Sb(i.bytesValue).isEqual(Sb(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Ns(i.geoPointValue.latitude)===Ns(s.geoPointValue.latitude)&&Ns(i.geoPointValue.longitude)===Ns(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ns(i.integerValue)===Ns(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ns(i.doubleValue),a=Ns(s.doubleValue);return o===a?U3(o)===U3(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return wx(e.arrayValue.values||[],t.arrayValue.values||[],lp);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Qme(o)!==Qme(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!lp(o[l],a[l])))return!1;return!0}(e,t);default:return bn()}}function GI(e,t){return(e.values||[]).find(n=>lp(n,t))!==void 0}function Ex(e,t){if(e===t)return 0;const n=Tb(e),r=Tb(t);if(n!==r)return Nr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Nr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Ns(s.integerValue||s.doubleValue),l=Ns(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return Zme(e.timestampValue,t.timestampValue);case 4:return Zme(qI(e),qI(t));case 5:return Nr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=Sb(s),l=Sb(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=Nr(a[u],l[u]);if(c!==0)return c}return Nr(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=Nr(Ns(s.latitude),Ns(o.latitude));return a!==0?a:Nr(Ns(s.longitude),Ns(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const c=Ex(a[u],l[u]);if(c)return c}return Nr(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===eO.mapValue&&o===eO.mapValue)return 0;if(s===eO.mapValue)return 1;if(o===eO.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const f=Nr(l[d],c[d]);if(f!==0)return f;const h=Ex(a[l[d]],u[c[d]]);if(h!==0)return h}return Nr(l.length,c.length)}(e.mapValue,t.mapValue);default:throw bn()}}function Zme(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Nr(e,t);const n=Iy(e),r=Iy(t),i=Nr(n.seconds,r.seconds);return i!==0?i:Nr(n.nanos,r.nanos)}function xx(e){return vq(e)}function vq(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Iy(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Sb(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Yt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=vq(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${vq(n.fields[o])}`;return i+"}"}(e.mapValue):bn()}function ege(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function bq(e){return!!e&&"integerValue"in e}function tte(e){return!!e&&"arrayValue"in e}function tge(e){return!!e&&"nullValue"in e}function nge(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function MD(e){return!!e&&"mapValue"in e}function fA(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return a_(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=fA(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=fA(e.arrayValue.values[n]);return t}return Object.assign({},e)}function W4t(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(t){this.value=t}static empty(){return new Hl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!MD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=fA(n)}setAll(t){let n=Vo.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=fA(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());MD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return lp(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];MD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){a_(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Hl(fA(this.value))}}function GMe(e){const t=[];return a_(e.fields,(n,r)=>{const i=new Vo([n]);if(MD(r)){const s=GMe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Vu(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Ca(t,0,Sn.min(),Sn.min(),Sn.min(),Hl.empty(),0)}static newFoundDocument(t,n,r,i){return new Ca(t,1,n,Sn.min(),r,i,0)}static newNoDocument(t,n){return new Ca(t,2,n,Sn.min(),Sn.min(),Hl.empty(),0)}static newUnknownDocument(t,n){return new Ca(t,3,n,Sn.min(),Sn.min(),Hl.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Sn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Hl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Hl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Sn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ca&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ca(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let V3=class{constructor(t,n){this.position=t,this.inclusive=n}};function rge(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Yt.comparator(Yt.fromName(o.referenceValue),n.key):r=Ex(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ige(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!lp(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(t,n="asc"){this.field=t,this.dir=n}}function G4t(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YMe=class{};class Ms extends YMe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new K4t(t,n,r):n==="array-contains"?new J4t(t,r):n==="in"?new Z4t(t,r):n==="not-in"?new ejt(t,r):n==="array-contains-any"?new tjt(t,r):new Ms(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new X4t(t,r):new Q4t(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ex(n,this.value)):n!==null&&Tb(this.value)===Tb(n)&&this.matchesComparison(Ex(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return bn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sf extends YMe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Sf(t,n)}matches(t){return KMe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function KMe(e){return e.op==="and"}function XMe(e){return Y4t(e)&&KMe(e)}function Y4t(e){for(const t of e.filters)if(t instanceof Sf)return!1;return!0}function _q(e){if(e instanceof Ms)return e.field.canonicalString()+e.op.toString()+xx(e.value);if(XMe(e))return e.filters.map(t=>_q(t)).join(",");{const t=e.filters.map(n=>_q(n)).join(",");return`${e.op}(${t})`}}function QMe(e,t){return e instanceof Ms?function(r,i){return i instanceof Ms&&r.op===i.op&&r.field.isEqual(i.field)&&lp(r.value,i.value)}(e,t):e instanceof Sf?function(r,i){return i instanceof Sf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&QMe(o,i.filters[a]),!0):!1}(e,t):void bn()}function JMe(e){return e instanceof Ms?function(n){return`${n.field.canonicalString()} ${n.op} ${xx(n.value)}`}(e):e instanceof Sf?function(n){return n.op.toString()+" {"+n.getFilters().map(JMe).join(" ,")+"}"}(e):"Filter"}class K4t extends Ms{constructor(t,n,r){super(t,n,r),this.key=Yt.fromName(r.referenceValue)}matches(t){const n=Yt.comparator(t.key,this.key);return this.matchesComparison(n)}}class X4t extends Ms{constructor(t,n){super(t,"in",n),this.keys=ZMe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Q4t extends Ms{constructor(t,n){super(t,"not-in",n),this.keys=ZMe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function ZMe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Yt.fromName(r.referenceValue))}class J4t extends Ms{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return tte(n)&&GI(n.arrayValue,this.value)}}class Z4t extends Ms{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&GI(this.value.arrayValue,n)}}class ejt extends Ms{constructor(t,n){super(t,"not-in",n)}matches(t){if(GI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!GI(this.value.arrayValue,n)}}class tjt extends Ms{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!tte(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>GI(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class njt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function sge(e,t=null,n=[],r=[],i=null,s=null,o=null){return new njt(e,t,n,r,i,s,o)}function nte(e){const t=Cn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>_q(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),M4(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>xx(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>xx(r)).join(",")),t.ue=n}return t.ue}function rte(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!G4t(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!QMe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ige(e.startAt,t.startAt)&&ige(e.endAt,t.endAt)}function wq(e){return Yt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rjt(e,t,n,r,i,s,o,a){return new GS(e,t,n,r,i,s,o,a)}function ite(e){return new GS(e)}function oge(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function e$e(e){return e.collectionGroup!==null}function hA(e){const t=Cn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Go(Vo.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new YI(s,r))}),n.has(Vo.keyField().canonicalString())||t.ce.push(new YI(Vo.keyField(),r))}return t.ce}function Yh(e){const t=Cn(e);return t.le||(t.le=ijt(t,hA(e))),t.le}function ijt(e,t){if(e.limitType==="F")return sge(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new YI(i.field,s)});const n=e.endAt?new V3(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new V3(e.startAt.position,e.startAt.inclusive):null;return sge(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Eq(e,t){const n=e.filters.concat([t]);return new GS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function xq(e,t,n){return new GS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $4(e,t){return rte(Yh(e),Yh(t))&&e.limitType===t.limitType}function t$e(e){return`${nte(Yh(e))}|lt:${e.limitType}`}function bw(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>JMe(i)).join(", ")}]`),M4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>xx(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>xx(i)).join(",")),`Target(${r})`}(Yh(e))}; limitType=${e.limitType})`}function L4(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Yt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of hA(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=rge(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,hA(r),i)||r.endAt&&!function(o,a,l){const u=rge(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,hA(r),i))}(e,t)}function sjt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function n$e(e){return(t,n)=>{let r=!1;for(const i of hA(e)){const s=ojt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ojt(e,t,n){const r=e.field.isKeyField()?Yt.comparator(t.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Ex(l,u):bn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return bn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){a_(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return qMe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ajt=new Ji(Yt.comparator);function ag(){return ajt}const r$e=new Ji(Yt.comparator);function s2(...e){let t=r$e;for(const n of e)t=t.insert(n.key,n);return t}function i$e(e){let t=r$e;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function M1(){return pA()}function s$e(){return pA()}function pA(){return new YS(e=>e.toString(),(e,t)=>e.isEqual(t))}const ljt=new Ji(Yt.comparator),ujt=new Go(Yt.comparator);function er(...e){let t=ujt;for(const n of e)t=t.add(n);return t}const cjt=new Go(Nr);function djt(){return cjt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$e(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:U3(t)?"-0":t}}function a$e(e){return{integerValue:""+e}}function fjt(e,t){return V4t(t)?a$e(t):o$e(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(){this._=void 0}}function hjt(e,t,n){return e instanceof KI?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Zee(s)&&(s=ete(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof XI?u$e(e,t):e instanceof QI?c$e(e,t):function(i,s){const o=l$e(i,s),a=age(o)+age(i.Pe);return bq(o)&&bq(i.Pe)?a$e(a):o$e(i.serializer,a)}(e,t)}function pjt(e,t,n){return e instanceof XI?u$e(e,t):e instanceof QI?c$e(e,t):n}function l$e(e,t){return e instanceof H3?function(r){return bq(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class KI extends F4{}class XI extends F4{constructor(t){super(),this.elements=t}}function u$e(e,t){const n=d$e(t);for(const r of e.elements)n.some(i=>lp(i,r))||n.push(r);return{arrayValue:{values:n}}}class QI extends F4{constructor(t){super(),this.elements=t}}function c$e(e,t){let n=d$e(t);for(const r of e.elements)n=n.filter(i=>!lp(i,r));return{arrayValue:{values:n}}}class H3 extends F4{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function age(e){return Ns(e.integerValue||e.doubleValue)}function d$e(e){return tte(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mjt{constructor(t,n){this.field=t,this.transform=n}}function gjt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof XI&&i instanceof XI||r instanceof QI&&i instanceof QI?wx(r.elements,i.elements,lp):r instanceof H3&&i instanceof H3?lp(r.Pe,i.Pe):r instanceof KI&&i instanceof KI}(e.transform,t.transform)}class yjt{constructor(t,n){this.version=t,this.transformResults=n}}class su{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new su}static exists(t){return new su(void 0,t)}static updateTime(t){return new su(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function $D(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class j4{}function f$e(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new B4(e.key,su.none()):new Ok(e.key,e.data,su.none());{const n=e.data,r=Hl.empty();let i=new Go(Vo.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new cv(e.key,r,new Vu(i.toArray()),su.none())}}function vjt(e,t,n){e instanceof Ok?function(i,s,o){const a=i.value.clone(),l=uge(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof cv?function(i,s,o){if(!$D(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=uge(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(h$e(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function mA(e,t,n,r){return e instanceof Ok?function(s,o,a,l){if(!$D(s.precondition,o))return a;const u=s.value.clone(),c=cge(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,n,r):e instanceof cv?function(s,o,a,l){if(!$D(s.precondition,o))return a;const u=cge(s.fieldTransforms,l,o),c=o.data;return c.setAll(h$e(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(e,t,n,r):function(s,o,a){return $D(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function bjt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=l$e(r.transform,i||null);s!=null&&(n===null&&(n=Hl.empty()),n.set(r.field,s))}return n||null}function lge(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&wx(r,i,(s,o)=>gjt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ok extends j4{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class cv extends j4{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function h$e(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function uge(e,t,n){const r=new Map;_i(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,pjt(o,a,n[i]))}return r}function cge(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,hjt(s,o,t))}return r}class B4 extends j4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _jt extends j4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wjt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&vjt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=mA(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=mA(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=s$e();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=f$e(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Sn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),er())}isEqual(t){return this.batchId===t.batchId&&wx(this.mutations,t.mutations,(n,r)=>lge(n,r))&&wx(this.baseMutations,t.baseMutations,(n,r)=>lge(n,r))}}class ste{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){_i(t.mutations.length===r.length);let i=function(){return ljt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ste(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ejt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xjt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ks,fr;function Sjt(e){switch(e){default:return bn();case Ke.CANCELLED:case Ke.UNKNOWN:case Ke.DEADLINE_EXCEEDED:case Ke.RESOURCE_EXHAUSTED:case Ke.INTERNAL:case Ke.UNAVAILABLE:case Ke.UNAUTHENTICATED:return!1;case Ke.INVALID_ARGUMENT:case Ke.NOT_FOUND:case Ke.ALREADY_EXISTS:case Ke.PERMISSION_DENIED:case Ke.FAILED_PRECONDITION:case Ke.ABORTED:case Ke.OUT_OF_RANGE:case Ke.UNIMPLEMENTED:case Ke.DATA_LOSS:return!0}}function p$e(e){if(e===void 0)return og("GRPC error has no .code"),Ke.UNKNOWN;switch(e){case ks.OK:return Ke.OK;case ks.CANCELLED:return Ke.CANCELLED;case ks.UNKNOWN:return Ke.UNKNOWN;case ks.DEADLINE_EXCEEDED:return Ke.DEADLINE_EXCEEDED;case ks.RESOURCE_EXHAUSTED:return Ke.RESOURCE_EXHAUSTED;case ks.INTERNAL:return Ke.INTERNAL;case ks.UNAVAILABLE:return Ke.UNAVAILABLE;case ks.UNAUTHENTICATED:return Ke.UNAUTHENTICATED;case ks.INVALID_ARGUMENT:return Ke.INVALID_ARGUMENT;case ks.NOT_FOUND:return Ke.NOT_FOUND;case ks.ALREADY_EXISTS:return Ke.ALREADY_EXISTS;case ks.PERMISSION_DENIED:return Ke.PERMISSION_DENIED;case ks.FAILED_PRECONDITION:return Ke.FAILED_PRECONDITION;case ks.ABORTED:return Ke.ABORTED;case ks.OUT_OF_RANGE:return Ke.OUT_OF_RANGE;case ks.UNIMPLEMENTED:return Ke.UNIMPLEMENTED;case ks.DATA_LOSS:return Ke.DATA_LOSS;default:return bn()}}(fr=ks||(ks={}))[fr.OK=0]="OK",fr[fr.CANCELLED=1]="CANCELLED",fr[fr.UNKNOWN=2]="UNKNOWN",fr[fr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fr[fr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fr[fr.NOT_FOUND=5]="NOT_FOUND",fr[fr.ALREADY_EXISTS=6]="ALREADY_EXISTS",fr[fr.PERMISSION_DENIED=7]="PERMISSION_DENIED",fr[fr.UNAUTHENTICATED=16]="UNAUTHENTICATED",fr[fr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fr[fr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fr[fr.ABORTED=10]="ABORTED",fr[fr.OUT_OF_RANGE=11]="OUT_OF_RANGE",fr[fr.UNIMPLEMENTED=12]="UNIMPLEMENTED",fr[fr.INTERNAL=13]="INTERNAL",fr[fr.UNAVAILABLE=14]="UNAVAILABLE",fr[fr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tjt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cjt=new q1([4294967295,4294967295],0);function dge(e){const t=Tjt().encode(e),n=new LMe;return n.update(t),new Uint8Array(n.digest())}function fge(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new q1([n,r],0),new q1([i,s],0)]}class ote{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new o2(`Invalid padding: ${n}`);if(r<0)throw new o2(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new o2(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new o2(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=q1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(q1.fromNumber(r)));return i.compare(Cjt)===1&&(i=new q1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=dge(t),[r,i]=fge(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new ote(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=dge(t),[r,i]=fge(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class o2 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,Dk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new z4(Sn.min(),i,new Ji(Nr),ag(),er())}}class Dk{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Dk(r,n,er(),er(),er())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class m$e{constructor(t,n){this.targetId=t,this.me=n}}class g$e{constructor(t,n,r=Fa.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class hge{constructor(){this.fe=0,this.ge=mge(),this.pe=Fa.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=er(),n=er(),r=er();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:bn()}}),new Dk(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=mge()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,_i(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ajt{constructor(t){this.Le=t,this.Be=new Map,this.ke=ag(),this.qe=pge(),this.Qe=new Ji(Nr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:bn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(wq(s))if(r===0){const o=new Yt(s.path);this.Ue(n,o,Ca.newNoDocument(o,Sn.min()))}else _i(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),l=a?this.Xe(a,t,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Sb(r).toUint8Array()}catch(l){if(l instanceof WMe)return VI("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ote(o,i,s)}catch(l){return VI(l instanceof o2?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&wq(a.target)){const l=new Yt(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ca.newNoDocument(l,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=er();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new z4(t,n,this.Qe,this.ke,r);return this.ke=ag(),this.qe=pge(),this.Qe=new Ji(Nr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new hge,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Go(Nr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||Ot("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new hge),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function pge(){return new Ji(Yt.comparator)}function mge(){return new Ji(Yt.comparator)}const Ijt={asc:"ASCENDING",desc:"DESCENDING"},Rjt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kjt={and:"AND",or:"OR"};class Pjt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Sq(e,t){return e.useProto3Json||M4(t)?t:{value:t}}function q3(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function y$e(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Njt(e,t){return q3(e,t.toTimestamp())}function Kh(e){return _i(!!e),Sn.fromTimestamp(function(n){const r=Iy(n);return new eo(r.seconds,r.nanos)}(e))}function ate(e,t){return Tq(e,t).canonicalString()}function Tq(e,t){const n=function(i){return new Ai(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function v$e(e){const t=Ai.fromString(e);return _i(x$e(t)),t}function Cq(e,t){return ate(e.databaseId,t.path)}function W9(e,t){const n=v$e(t);if(n.get(1)!==e.databaseId.projectId)throw new Tt(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Tt(Ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Yt(_$e(n))}function b$e(e,t){return ate(e.databaseId,t)}function Ojt(e){const t=v$e(e);return t.length===4?Ai.emptyPath():_$e(t)}function Aq(e){return new Ai(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function _$e(e){return _i(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function gge(e,t,n){return{name:Cq(e,t),fields:n.value.mapValue.fields}}function Djt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:bn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(_i(c===void 0||typeof c=="string"),Fa.fromBase64String(c||"")):(_i(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Fa.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(u){const c=u.code===void 0?Ke.UNKNOWN:p$e(u.code);return new Tt(c,u.message||"")}(o);n=new g$e(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=W9(e,r.document.name),s=Kh(r.document.updateTime),o=r.document.createTime?Kh(r.document.createTime):Sn.min(),a=new Hl({mapValue:{fields:r.document.fields}}),l=Ca.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new LD(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=W9(e,r.document),s=r.readTime?Kh(r.readTime):Sn.min(),o=Ca.newNoDocument(i,s),a=r.removedTargetIds||[];n=new LD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=W9(e,r.document),s=r.removedTargetIds||[];n=new LD([],s,i,null)}else{if(!("filter"in t))return bn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new xjt(i,s),a=r.targetId;n=new m$e(a,o)}}return n}function Mjt(e,t){let n;if(t instanceof Ok)n={update:gge(e,t.key,t.value)};else if(t instanceof B4)n={delete:Cq(e,t.key)};else if(t instanceof cv)n={update:gge(e,t.key,t.data),updateMask:Hjt(t.fieldMask)};else{if(!(t instanceof _jt))return bn();n={verify:Cq(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof KI)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof XI)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof QI)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof H3)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw bn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Njt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:bn()}(e,t.precondition)),n}function $jt(e,t){return e&&e.length>0?(_i(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Kh(i.updateTime):Kh(s);return o.isEqual(Sn.min())&&(o=Kh(s)),new yjt(o,i.transformResults||[])}(n,t))):[]}function Ljt(e,t){return{documents:[b$e(e,t.path)]}}function Fjt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=b$e(e,i);const s=function(u){if(u.length!==0)return E$e(Sf.create(u,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(f){return{field:_w(f.field),direction:zjt(f.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Sq(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{_t:n,parent:i}}function jjt(e){let t=Ojt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_i(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(d){const f=w$e(d);return f instanceof Sf&&XMe(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(p){return new YI(ww(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,M4(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,h=d.values||[];return new V3(h,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,h=d.values||[];return new V3(h,f)}(n.endAt)),rjt(t,i,o,s,a,"F",l,u)}function Bjt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function w$e(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ww(n.unaryFilter.field);return Ms.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ww(n.unaryFilter.field);return Ms.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ww(n.unaryFilter.field);return Ms.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ww(n.unaryFilter.field);return Ms.create(o,"!=",{nullValue:"NULL_VALUE"});default:return bn()}}(e):e.fieldFilter!==void 0?function(n){return Ms.create(ww(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Sf.create(n.compositeFilter.filters.map(r=>w$e(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return bn()}}(n.compositeFilter.op))}(e):bn()}function zjt(e){return Ijt[e]}function Ujt(e){return Rjt[e]}function Vjt(e){return kjt[e]}function _w(e){return{fieldPath:e.canonicalString()}}function ww(e){return Vo.fromServerFormat(e.fieldPath)}function E$e(e){return e instanceof Ms?function(n){if(n.op==="=="){if(nge(n.value))return{unaryFilter:{field:_w(n.field),op:"IS_NAN"}};if(tge(n.value))return{unaryFilter:{field:_w(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nge(n.value))return{unaryFilter:{field:_w(n.field),op:"IS_NOT_NAN"}};if(tge(n.value))return{unaryFilter:{field:_w(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_w(n.field),op:Ujt(n.op),value:n.value}}}(e):e instanceof Sf?function(n){const r=n.getFilters().map(i=>E$e(i));return r.length===1?r[0]:{compositeFilter:{op:Vjt(n.op),filters:r}}}(e):bn()}function Hjt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function x$e(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(t,n,r,i,s=Sn.min(),o=Sn.min(),a=Fa.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new x0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new x0(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new x0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new x0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qjt{constructor(t){this.ct=t}}function Wjt(e){const t=jjt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?xq(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gjt{constructor(){this._n=new Yjt}addToCollectionParentIndex(t,n){return this._n.add(n),rt.resolve()}getCollectionParents(t,n){return rt.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return rt.resolve()}deleteFieldIndex(t,n){return rt.resolve()}deleteAllFieldIndexes(t){return rt.resolve()}createTargetIndexes(t,n){return rt.resolve()}getDocumentsMatchingTarget(t,n){return rt.resolve(null)}getIndexType(t,n){return rt.resolve(0)}getFieldIndexes(t,n){return rt.resolve([])}getNextCollectionGroupToUpdate(t){return rt.resolve(null)}getMinOffset(t,n){return rt.resolve(Ay.min())}getMinOffsetFromCollectionGroup(t,n){return rt.resolve(Ay.min())}updateCollectionGroup(t,n,r){return rt.resolve()}updateIndexEntries(t,n){return rt.resolve()}}class Yjt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Go(Ai.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Go(Ai.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Sx(0)}static Ln(){return new Sx(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kjt{constructor(){this.changes=new YS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ca.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?rt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xjt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qjt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&mA(r.mutation,i,Vu.empty(),eo.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,er()).next(()=>r))}getLocalViewOfDocuments(t,n,r=er()){const i=M1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=s2();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=M1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,er()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=ag();const o=pA(),a=function(){return pA()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof cv)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),mA(c.mutation,u,c.mutation.getFieldMask(),eo.now())):o.set(u.key,Vu.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var d;return a.set(u,new Xjt(c,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){const r=pA();let i=new Ji((o,a)=>o-a),s=er();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Vu.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||er()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=s$e();c.forEach(f=>{if(!s.has(f)){const h=f$e(n.get(f),r.get(f));h!==null&&d.set(f,h),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,d))}return rt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Yt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):e$e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):rt.resolve(M1());let a=-1,l=s;return o.next(u=>rt.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?rt.resolve():this.remoteDocumentCache.getEntry(t,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,l,u,er())).next(c=>({batchId:a,changes:i$e(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Yt(n)).next(r=>{let i=s2();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=s2();return this.indexManager.getCollectionParents(t,s).next(a=>rt.forEach(a,l=>{const u=function(d,f){return new GS(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,r,i).next(c=>{c.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,Ca.newInvalidDocument(c)))});let a=s2();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&mA(c.mutation,u,Vu.empty(),eo.now()),L4(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jjt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return rt.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Kh(i.createTime)}}(n)),rt.resolve()}getNamedQuery(t,n){return rt.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Wjt(i.bundledQuery),readTime:Kh(i.readTime)}}(n)),rt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zjt{constructor(){this.overlays=new Ji(Yt.comparator),this.hr=new Map}getOverlay(t,n){return rt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=M1();return rt.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),rt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),rt.resolve()}getOverlaysForCollection(t,n,r){const i=M1(),s=n.length+1,o=new Yt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return rt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Ji((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=M1(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=M1(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return rt.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Ejt(n,r));let s=this.hr.get(n);s===void 0&&(s=er(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lte{constructor(){this.Pr=new Go(fo.Ir),this.Tr=new Go(fo.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new fo(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new fo(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Yt(new Ai([])),r=new fo(n,t),i=new fo(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Yt(new Ai([])),r=new fo(n,t),i=new fo(n,t+1);let s=er();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new fo(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class fo{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Yt.comparator(t.key,n.key)||Nr(t.pr,n.pr)}static Er(t,n){return Nr(t.pr,n.pr)||Yt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5t{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Go(fo.Ir)}checkEmpty(t){return rt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new wjt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new fo(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return rt.resolve(o)}lookupMutationBatch(t,n){return rt.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return rt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new fo(n,0),i=new fo(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),rt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Go(Nr);return n.forEach(i=>{const s=new fo(i,0),o=new fo(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),rt.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Yt.isDocumentKey(s)||(s=s.child(""));const o=new fo(new Yt(s),0);let a=new Go(Nr);return this.wr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.pr)),!0)},o),rt.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){_i(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return rt.forEach(n.mutations,i=>{const s=new fo(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new fo(n,0),i=this.wr.firstAfterOrEqual(r);return rt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,rt.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5t{constructor(t){this.vr=t,this.docs=function(){return new Ji(Yt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return rt.resolve(r?r.document.mutableCopy():Ca.newInvalidDocument(n))}getEntries(t,n){let r=ag();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ca.newInvalidDocument(i))}),rt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=ag();const o=n.path,a=new Yt(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||j4t(F4t(c),r)<=0||(i.has(c.key)||L4(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return rt.resolve(s)}getAllFromCollectionGroup(t,n,r,i){bn()}Fr(t,n){return rt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new n5t(this)}getSize(t){return rt.resolve(this.size)}}class n5t extends Kjt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),rt.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5t{constructor(t){this.persistence=t,this.Mr=new YS(n=>nte(n),rte),this.lastRemoteSnapshotVersion=Sn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new lte,this.targetCount=0,this.Lr=Sx.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),rt.resolve()}getLastRemoteSnapshotVersion(t){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return rt.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),rt.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new Sx(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,rt.resolve()}updateTargetData(t,n){return this.qn(n),rt.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,rt.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),rt.waitFor(s).next(()=>i)}getTargetCount(t){return rt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return rt.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),rt.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),rt.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),rt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return rt.resolve(r)}containsKey(t,n){return rt.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5t{constructor(t,n){this.Br={},this.overlays={},this.kr=new Jee(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new r5t(this),this.indexManager=new Gjt,this.remoteDocumentCache=function(i){return new t5t(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new qjt(n),this.$r=new Jjt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Zjt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new e5t(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){Ot("MemoryPersistence","Starting transaction:",t);const i=new s5t(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return rt.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class s5t extends z4t{constructor(t){super(),this.currentSequenceNumber=t}}class ute{constructor(t){this.persistence=t,this.zr=new lte,this.jr=null}static Hr(t){return new ute(t)}get Jr(){if(this.jr)return this.jr;throw bn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),rt.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),rt.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),rt.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.Jr,r=>{const i=Yt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,Sn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return rt.or([()=>rt.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cte{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=er(),i=er();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new cte(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5t{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5t{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return z$t()?8:U4t(Zo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new o5t;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(ZT()<=ar.DEBUG&&Ot("QueryEngine","SDK will not create cache indexes for query:",bw(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),rt.resolve()):(ZT()<=ar.DEBUG&&Ot("QueryEngine","Query:",bw(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(ZT()<=ar.DEBUG&&Ot("QueryEngine","The SDK decides to create cache indexes for query:",bw(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Yh(n))):rt.resolve())}ji(t,n){if(oge(n))return rt.resolve(null);let r=Yh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xq(n,null,"F"),r=Yh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=er(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(l=>{const u=this.Zi(n,a);return this.Xi(n,u,o,l.readTime)?this.ji(t,xq(n,null,"F")):this.es(t,u,n,l)}))})))}Hi(t,n,r,i){return oge(n)||i.isEqual(Sn.min())?rt.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?rt.resolve(null):(ZT()<=ar.DEBUG&&Ot("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bw(n)),this.es(t,o,n,L4t(i,-1)).next(a=>a))})}Zi(t,n){let r=new Go(n$e(t));return n.forEach((i,s)=>{L4(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return ZT()<=ar.DEBUG&&Ot("QueryEngine","Using full collection scan to execute query:",bw(n)),this.zi.getDocumentsMatchingQuery(t,n,Ay.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5t{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Ji(Nr),this.rs=new YS(s=>nte(s),rte),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Qjt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function u5t(e,t,n,r){return new l5t(e,t,n,r)}async function S$e(e,t){const n=Cn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=er();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})}function c5t(e,t){const n=Cn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,f=d.keys();let h=rt.resolve();return f.forEach(p=>{h=h.next(()=>c.getEntry(l,p)).next(m=>{const g=u.docVersions.get(p);_i(g!==null),m.version.compareTo(g)<0&&(d.applyToRemoteDocument(m,u),m.isValidDocument()&&(m.setReadTime(u.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=er();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function T$e(e){const t=Cn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function d5t(e,t){const n=Cn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,d)));let h=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?h=h.withResumeToken(Fa.EMPTY_BYTE_STRING,Sn.min()).withLastLimboFreeSnapshotVersion(Sn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(d,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let l=ag(),u=er();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(f5t(s,o,t.documentUpdates).next(c=>{l=c.cs,u=c.ls})),!r.isEqual(Sn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return rt.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.ns=i,s))}function f5t(e,t,n){let r=er(),i=er();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=ag();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Sn.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):Ot("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{cs:o,ls:i}})}function h5t(e,t){const n=Cn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function p5t(e,t){const n=Cn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,rt.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new x0(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function Iq(e,t,n){const r=Cn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Nk(o))throw o;Ot("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function yge(e,t,n){const r=Cn(e);let i=Sn.min(),s=er();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=Cn(l),f=d.rs.get(c);return f!==void 0?rt.resolve(d.ns.get(f)):d.Qr.getTargetData(u,c)}(r,o,Yh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:Sn.min(),n?s:er())).next(a=>(m5t(r,sjt(t),a),{documents:a,hs:s})))}function m5t(e,t,n){let r=e.ss.get(t)||Sn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class vge{constructor(){this.activeTargetIds=djt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class g5t{constructor(){this.no=new vge,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new vge,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5t{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bge{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ot("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Ot("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tO=null;function G9(){return tO===null?tO=function(){return 268435456+Math.round(2147483648*Math.random())}():tO++,"0x"+tO.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5t={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5t{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="WebChannelConnection";class _5t extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=G9(),l=this.vo(n,r.toUriEncodedString());Ot("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,s,o),this.Mo(n,l,u,i).then(c=>(Ot("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw VI("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+WS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=v5t[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=G9();return new Promise((o,a)=>{const l=new FMe;l.setWithCredentials(!0),l.listenOnce(BMe.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case DD.NO_ERROR:const c=l.getResponseJson();Ot(ga,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case DD.TIMEOUT:Ot(ga,`RPC '${t}' ${s} timed out`),a(new Tt(Ke.DEADLINE_EXCEEDED,"Request time out"));break;case DD.HTTP_ERROR:const d=l.getStatus();if(Ot(ga,`RPC '${t}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Ke).indexOf(y)>=0?y:Ke.UNKNOWN}(h.status);a(new Tt(p,h.message))}else a(new Tt(Ke.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Tt(Ke.UNAVAILABLE,"Connection failed."));break;default:bn()}}finally{Ot(ga,`RPC '${t}' ${s} completed.`)}});const u=JSON.stringify(i);Ot(ga,`RPC '${t}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Oo(t,n,r){const i=G9(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=VMe(),a=UMe(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new jMe({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Ot(ga,`Creating RPC '${t}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);let f=!1,h=!1;const p=new b5t({lo:g=>{h?Ot(ga,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(f||(Ot(ga,`Opening RPC '${t}' stream ${i} transport.`),d.open(),f=!0),Ot(ga,`RPC '${t}' stream ${i} sending:`,g),d.send(g))},ho:()=>d.close()}),m=(g,y,v)=>{g.listen(y,_=>{try{v(_)}catch(w){setTimeout(()=>{throw w},0)}})};return m(d,i2.EventType.OPEN,()=>{h||(Ot(ga,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(d,i2.EventType.CLOSE,()=>{h||(h=!0,Ot(ga,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(d,i2.EventType.ERROR,g=>{h||(h=!0,VI(ga,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new Tt(Ke.UNAVAILABLE,"The operation could not be completed")))}),m(d,i2.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];_i(!!v);const _=v,w=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(w){Ot(ga,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let S=function(I){const P=ks[I];if(P!==void 0)return p$e(P)}(E),x=w.message;S===void 0&&(S=Ke.INTERNAL,x="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new Tt(S,x)),d.close()}else Ot(ga,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,zMe.STAT_EVENT,g=>{g.stat===yq.PROXY?Ot(ga,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===yq.NOPROXY&&Ot(ga,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function Y9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(e){return new Pjt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C$e{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&Ot("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A$e{constructor(t,n,r,i,s,o,a,l){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new C$e(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Ke.RESOURCE_EXHAUSTED?(og(n.toString()),og("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new Tt(Ke.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return Ot("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(Ot("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class w5t extends A$e{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=Djt(this.serializer,t),r=function(s){if(!("targetChange"in s))return Sn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Sn.min():o.readTime?Kh(o.readTime):Sn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=Aq(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=wq(l)?{documents:Ljt(s,l)}:{query:Fjt(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=y$e(s,o.resumeToken);const u=Sq(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Sn.min())>0){a.readTime=q3(s,o.snapshotVersion.toTimestamp());const u=Sq(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,t);const r=Bjt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=Aq(this.serializer),n.removeTarget=t,this.i_(n)}}class E5t extends A$e{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(_i(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=$jt(t.writeResults,t.commitTime),r=Kh(t.commitTime);return this.listener.A_(r,n)}return _i(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=Aq(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Mjt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5t extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Tt(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,Tq(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Tt(Ke.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,Tq(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Tt(Ke.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class S5t{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(og(n),this.y_=!1):Ot("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5t{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{l_(this)&&(Ot("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Cn(l);u.M_.add(4),await $k(u),u.N_.set("Unknown"),u.M_.delete(4),await Mk(u)}(this))})}),this.N_=new S5t(r,i)}}async function Mk(e){if(l_(e))for(const t of e.x_)await t(!0)}async function $k(e){for(const t of e.x_)await t(!1)}function I$e(e,t){const n=Cn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),pte(n)?hte(n):KS(n).Xo()&&fte(n,t))}function dte(e,t){const n=Cn(e),r=KS(n);n.F_.delete(t),r.Xo()&&R$e(n,t),n.F_.size===0&&(r.Xo()?r.n_():l_(n)&&n.N_.set("Unknown"))}function fte(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Sn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}KS(e).P_(t)}function R$e(e,t){e.L_.xe(t),KS(e).I_(t)}function hte(e){e.L_=new Ajt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),KS(e).start(),e.N_.w_()}function pte(e){return l_(e)&&!KS(e).Zo()&&e.F_.size>0}function l_(e){return Cn(e).M_.size===0}function k$e(e){e.L_=void 0}async function C5t(e){e.N_.set("Online")}async function A5t(e){e.F_.forEach((t,n)=>{fte(e,t)})}async function I5t(e,t){k$e(e),pte(e)?(e.N_.D_(t),hte(e)):e.N_.set("Unknown")}async function R5t(e,t,n){if(e.N_.set("Online"),t instanceof g$e&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){Ot("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await W3(e,r)}else if(t instanceof LD?e.L_.Ke(t):t instanceof m$e?e.L_.He(t):e.L_.We(t),!n.isEqual(Sn.min()))try{const r=await T$e(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.F_.get(u);c&&s.F_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.F_.get(l);if(!c)return;s.F_.set(l,c.withResumeToken(Fa.EMPTY_BYTE_STRING,c.snapshotVersion)),R$e(s,l);const d=new x0(c.target,l,u,c.sequenceNumber);fte(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Ot("RemoteStore","Failed to raise snapshot:",r),await W3(e,r)}}async function W3(e,t,n){if(!Nk(t))throw t;e.M_.add(1),await $k(e),e.N_.set("Offline"),n||(n=()=>T$e(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Ot("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Mk(e)})}function P$e(e,t){return t().catch(n=>W3(e,n,t))}async function V4(e){const t=Cn(e),n=Ry(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;k5t(t);)try{const i=await h5t(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,P5t(t,i)}catch(i){await W3(t,i)}N$e(t)&&O$e(t)}function k5t(e){return l_(e)&&e.v_.length<10}function P5t(e,t){e.v_.push(t);const n=Ry(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function N$e(e){return l_(e)&&!Ry(e).Zo()&&e.v_.length>0}function O$e(e){Ry(e).start()}async function N5t(e){Ry(e).V_()}async function O5t(e){const t=Ry(e);for(const n of e.v_)t.d_(n.mutations)}async function D5t(e,t,n){const r=e.v_.shift(),i=ste.from(r,t,n);await P$e(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await V4(e)}async function M5t(e,t){t&&Ry(e).E_&&await async function(r,i){if(function(o){return Sjt(o)&&o!==Ke.ABORTED}(i.code)){const s=r.v_.shift();Ry(r).t_(),await P$e(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await V4(r)}}(e,t),N$e(e)&&O$e(e)}async function _ge(e,t){const n=Cn(e);n.asyncQueue.verifyOperationInProgress(),Ot("RemoteStore","RemoteStore received new credentials");const r=l_(n);n.M_.add(3),await $k(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Mk(n)}async function $5t(e,t){const n=Cn(e);t?(n.M_.delete(2),await Mk(n)):t||(n.M_.add(2),await $k(n),n.N_.set("Unknown"))}function KS(e){return e.B_||(e.B_=function(n,r,i){const s=Cn(n);return s.f_(),new w5t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:C5t.bind(null,e),To:A5t.bind(null,e),Ao:I5t.bind(null,e),h_:R5t.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),pte(e)?hte(e):e.N_.set("Unknown")):(await e.B_.stop(),k$e(e))})),e.B_}function Ry(e){return e.k_||(e.k_=function(n,r,i){const s=Cn(n);return s.f_(),new E5t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:N5t.bind(null,e),Ao:M5t.bind(null,e),R_:O5t.bind(null,e),A_:D5t.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await V4(e)):(await e.k_.stop(),e.v_.length>0&&(Ot("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mte{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Pm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new mte(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Tt(Ke.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gte(e,t){if(og("AsyncQueue",`${t}: ${e}`),Nk(e))return new Tt(Ke.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Yt.comparator(n.key,r.key):(n,r)=>Yt.comparator(n.key,r.key),this.keyedMap=s2(),this.sortedSet=new Ji(this.comparator)}static emptySet(t){return new SE(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof SE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new SE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wge{constructor(){this.q_=new Ji(Yt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):bn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Tx{constructor(t,n,r,i,s,o,a,l,u){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Tx(t,n,SE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&$4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5t{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class F5t{constructor(){this.queries=new YS(t=>t$e(t),$4),this.onlineState="Unknown",this.z_=new Set}}async function D$e(e,t){const n=Cn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new L5t,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=gte(o,`Initialization of query '${bw(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&yte(n)}async function M$e(e,t){const n=Cn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function j5t(e,t){const n=Cn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&yte(n)}function B5t(e,t,n){const r=Cn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function yte(e){e.z_.forEach(t=>{t.next()})}var Rq,Ege;(Ege=Rq||(Rq={})).J_="default",Ege.Cache="cache";class $$e{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Tx(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=Tx.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==Rq.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L$e{constructor(t){this.key=t}}class F$e{constructor(t){this.key=t}}class z5t{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=er(),this.mutatedKeys=er(),this.Ia=n$e(t),this.Ta=new SE(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new wge,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,d)=>{const f=i.get(c),h=L4(this.query,d)?d:null,p=!!f&&this.mutatedKeys.has(f.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;f&&h?f.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(f,h)||(r.track({type:2,doc:h}),g=!0,(l&&this.Ia(h,l)>0||u&&this.Ia(h,u)<0)&&(a=!0)):!f&&h?(r.track({type:0,doc:h}),g=!0):f&&!h&&(r.track({type:1,doc:f}),g=!0,(l||u)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,d)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bn()}};return m(h)-m(p)}(c.type,d.type)||this.Ia(c.doc,d.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,u=l!==this.ha;return this.ha=l,o.length!==0||u?{snapshot:new Tx(this.query,t.Ta,s,o,t.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new wge,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=er(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new F$e(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new L$e(r))}),n}pa(t){this.la=t.hs,this.Pa=er();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return Tx.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class U5t{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class V5t{constructor(t){this.key=t,this.wa=!1}}class H5t{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new YS(a=>t$e(a),$4),this.Da=new Map,this.Ca=new Set,this.va=new Ji(Yt.comparator),this.Fa=new Map,this.Ma=new lte,this.xa={},this.Oa=new Map,this.Na=Sx.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function q5t(e,t,n=!0){const r=H$e(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await j$e(r,t,n,!0),i}async function W5t(e,t){const n=H$e(e);await j$e(n,t,!0,!1)}async function j$e(e,t,n,r){const i=await p5t(e.localStore,Yh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await G5t(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&I$e(e.remoteStore,i),a}async function G5t(e,t,n,r,i){e.Ba=(d,f,h)=>async function(m,g,y,v){let _=g.view.da(y);_.Xi&&(_=await yge(m.localStore,g.query,!1).then(({documents:x})=>g.view.da(x,_)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(_,m.isPrimaryClient,w,E);return Sge(m,g.targetId,S.fa),S.snapshot}(e,d,f,h);const s=await yge(e.localStore,t,!0),o=new z5t(t,s.hs),a=o.da(s.documents),l=Dk.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),u=o.applyChanges(a,e.isPrimaryClient,l);Sge(e,n,u.fa);const c=new U5t(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),u.snapshot}async function Y5t(e,t,n){const r=Cn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!$4(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Iq(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dte(r.remoteStore,i.targetId),kq(r,i.targetId)}).catch(Pk)):(kq(r,i.targetId),await Iq(r.localStore,i.targetId,!0))}async function K5t(e,t){const n=Cn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dte(n.remoteStore,r.targetId))}async function X5t(e,t,n){const r=r8t(e);try{const i=await function(o,a){const l=Cn(o),u=eo.now(),c=a.reduce((h,p)=>h.add(p.key),er());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=ag(),m=er();return l.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,p)).next(g=>{d=g;const y=[];for(const v of a){const _=bjt(v,d.get(v.key).overlayedDocument);_!=null&&y.push(new cv(v.key,_,GMe(_.value.mapValue),su.exists(!0)))}return l.mutationQueue.addMutationBatch(h,u,y,a)}).next(g=>{f=g;const y=g.applyToLocalDocumentSet(d,m);return l.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:f.batchId,changes:i$e(d)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.xa[o.currentUser.toKey()];u||(u=new Ji(Nr)),u=u.insert(a,l),o.xa[o.currentUser.toKey()]=u}(r,i.batchId,n),await Lk(r,i.changes),await V4(r.remoteStore)}catch(i){const s=gte(i,"Failed to persist write");n.reject(s)}}async function B$e(e,t){const n=Cn(e);try{const r=await d5t(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(_i(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?_i(o.wa):i.removedDocuments.size>0&&(_i(o.wa),o.wa=!1))}),await Lk(n,r,t)}catch(r){await Pk(r)}}function xge(e,t,n){const r=Cn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Cn(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const f of d.U_)f.j_(a)&&(u=!0)}),u&&yte(l)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Q5t(e,t,n){const r=Cn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Ji(Yt.comparator);o=o.insert(s,Ca.newNoDocument(s,Sn.min()));const a=er().add(s),l=new z4(Sn.min(),new Map,new Ji(Nr),o,a);await B$e(r,l),r.va=r.va.remove(s),r.Fa.delete(t),vte(r)}else await Iq(r.localStore,t,!1).then(()=>kq(r,t,n)).catch(Pk)}async function J5t(e,t){const n=Cn(e),r=t.batch.batchId;try{const i=await c5t(n.localStore,t);U$e(n,r,null),z$e(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Lk(n,i)}catch(i){await Pk(i)}}async function Z5t(e,t,n){const r=Cn(e);try{const i=await function(o,a){const l=Cn(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(_i(d!==null),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,t);U$e(r,t,n),z$e(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Lk(r,i)}catch(i){await Pk(i)}}function z$e(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function U$e(e,t,n){const r=Cn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function kq(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||V$e(e,r)})}function V$e(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(dte(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),vte(e))}function Sge(e,t,n){for(const r of n)r instanceof L$e?(e.Ma.addReference(r.key,t),e8t(e,r)):r instanceof F$e?(Ot("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||V$e(e,r.key)):bn()}function e8t(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Ot("SyncEngine","New document in limbo: "+n),e.Ca.add(r),vte(e))}function vte(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Yt(Ai.fromString(t)),r=e.Na.next();e.Fa.set(r,new V5t(n)),e.va=e.va.insert(n,r),I$e(e.remoteStore,new x0(Yh(ite(n.path)),r,"TargetPurposeLimboResolution",Jee.oe))}}async function Lk(e,t,n){const r=Cn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,t,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=cte.Ki(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,u){const c=Cn(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>rt.forEach(u,f=>rt.forEach(f.qi,h=>c.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>rt.forEach(f.Qi,h=>c.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!Nk(d))throw d;Ot("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const h=c.ns.get(f),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(f,m)}}}(r.localStore,s))}async function t8t(e,t){const n=Cn(e);if(!n.currentUser.isEqual(t)){Ot("SyncEngine","User change. New user:",t.toKey());const r=await S$e(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new Tt(Ke.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Lk(n,r.us)}}function n8t(e,t){const n=Cn(e),r=n.Fa.get(t);if(r&&r.wa)return er().add(r.key);{let i=er();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function H$e(e){const t=Cn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=B$e.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=n8t.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Q5t.bind(null,t),t.Sa.h_=j5t.bind(null,t.eventManager),t.Sa.ka=B5t.bind(null,t.eventManager),t}function r8t(e){const t=Cn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=J5t.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Z5t.bind(null,t),t}class Tge{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=U4(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return u5t(this.persistence,new a5t,t.initialUser,this.serializer)}createPersistence(t){return new i5t(ute.Hr,this.serializer)}createSharedClientState(t){return new g5t}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class i8t{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xge(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=t8t.bind(null,this.syncEngine),await $5t(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new F5t}()}createDatastore(t){const n=U4(t.databaseInfo.databaseId),r=function(s){return new _5t(s)}(t.databaseInfo);return function(s,o,a,l){return new x5t(s,o,a,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new T5t(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>xge(this.syncEngine,n,0),function(){return bge.D()?new bge:new y5t}())}createSyncEngine(t,n){return function(i,s,o,a,l,u,c){const d=new H5t(i,s,o,a,l,u);return c&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=Cn(r);Ot("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await $k(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q$e{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):og("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8t{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=$l.UNAUTHENTICATED,this.clientId=HMe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Ot("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Ot("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Tt(Ke.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Pm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=gte(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function K9(e,t){e.asyncQueue.verifyOperationInProgress(),Ot("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await S$e(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Cge(e,t){e.asyncQueue.verifyOperationInProgress();const n=await W$e(e);Ot("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>_ge(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>_ge(t.remoteStore,i)),e._onlineComponents=t}function o8t(e){return e.name==="FirebaseError"?e.code===Ke.FAILED_PRECONDITION||e.code===Ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function W$e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ot("FirestoreClient","Using user provided OfflineComponentProvider");try{await K9(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!o8t(n))throw n;VI("Error using user provided cache. Falling back to memory cache: "+n),await K9(e,new Tge)}}else Ot("FirestoreClient","Using default OfflineComponentProvider"),await K9(e,new Tge);return e._offlineComponents}async function bte(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ot("FirestoreClient","Using user provided OnlineComponentProvider"),await Cge(e,e._uninitializedComponentsProvider._online)):(Ot("FirestoreClient","Using default OnlineComponentProvider"),await Cge(e,new i8t))),e._onlineComponents}function a8t(e){return W$e(e).then(t=>t.persistence)}function l8t(e){return bte(e).then(t=>t.remoteStore)}function u8t(e){return bte(e).then(t=>t.syncEngine)}async function G$e(e){const t=await bte(e),n=t.eventManager;return n.onListen=q5t.bind(null,t.syncEngine),n.onUnlisten=Y5t.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=W5t.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=K5t.bind(null,t.syncEngine),n}function c8t(e){return e.asyncQueue.enqueue(async()=>{const t=await a8t(e),n=await l8t(e);return t.setNetworkEnabled(!0),function(i){const s=Cn(i);return s.M_.delete(0),Mk(s)}(n)})}function d8t(e,t,n={}){const r=new Pm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new q$e({next:f=>{o.enqueueAndForget(()=>M$e(s,d));const h=f.docs.has(a);!h&&f.fromCache?u.reject(new Tt(Ke.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?u.reject(new Tt(Ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new $$e(ite(a.path),c,{includeMetadataChanges:!0,ra:!0});return D$e(s,d)}(await G$e(e),e.asyncQueue,t,n,r)),r.promise}function f8t(e,t,n={}){const r=new Pm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new q$e({next:f=>{o.enqueueAndForget(()=>M$e(s,d)),f.fromCache&&l.source==="server"?u.reject(new Tt(Ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new $$e(a,c,{includeMetadataChanges:!0,ra:!0});return D$e(s,d)}(await G$e(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y$e(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Age=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K$e(e,t,n){if(!n)throw new Tt(Ke.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function h8t(e,t,n,r){if(t===!0&&r===!0)throw new Tt(Ke.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Ige(e){if(!Yt.isDocumentKey(e))throw new Tt(Ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Rge(e){if(Yt.isDocumentKey(e))throw new Tt(Ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function H4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":bn()}function Tf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Tt(Ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=H4(e);throw new Tt(Ke.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kge{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Tt(Ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Tt(Ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}h8t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Y$e((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Tt(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Tt(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Tt(Ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class _te{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kge({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Tt(Ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Tt(Ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kge(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new R4t;switch(r.type){case"firstParty":return new N4t(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Tt(Ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Age.get(n);r&&(Ot("ComponentProvider","Removing Datastore"),Age.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new u_(this.firestore,t,this._query)}}class ul{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Q0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ul(this.firestore,t,this._key)}}class Q0 extends u_{constructor(t,n,r){super(t,n,ite(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ul(this.firestore,null,new Yt(t))}withConverter(t){return new Q0(this.firestore,t,this._path)}}function Cd(e,t,...n){if(e=wi(e),K$e("collection","path",t),e instanceof _te){const r=Ai.fromString(t,...n);return Rge(r),new Q0(e,null,r)}{if(!(e instanceof ul||e instanceof Q0))throw new Tt(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ai.fromString(t,...n));return Rge(r),new Q0(e.firestore,null,r)}}function js(e,t,...n){if(e=wi(e),arguments.length===1&&(t=HMe.newId()),K$e("doc","path",t),e instanceof _te){const r=Ai.fromString(t,...n);return Ige(r),new ul(e,null,new Yt(r))}{if(!(e instanceof ul||e instanceof Q0))throw new Tt(Ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ai.fromString(t,...n));return Ige(r),new ul(e.firestore,e instanceof Q0?e.converter:null,new Yt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8t{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new C$e(this,"async_queue_retry"),this.hu=()=>{const n=Y9();n&&Ot("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=Y9();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=Y9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Pm;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!Nk(t))throw t;Ot("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw og("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=mte.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&bn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class dv extends _te{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new p8t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||X$e(this),this._firestoreClient.terminate()}}function m8t(e,t,n){n||(n="(default)");const r=HS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(BI(s,t))return i;throw new Tt(Ke.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Tt(Ke.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Tt(Ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function Fk(e){return e._firestoreClient||X$e(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function X$e(e){var t,n,r;const i=e._freezeSettings(),s=function(a,l,u,c){return new q4t(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Y$e(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new s8t(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function g8t(e){return c8t(Fk(e=Tf(e,dv)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Cx(Fa.fromBase64String(t))}catch(n){throw new Tt(Ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Cx(Fa.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Tt(Ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wte=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Tt(Ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Tt(Ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Nr(this._lat,t._lat)||Nr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y8t=/^__.*__$/;class v8t{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new cv(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ok(t,this.data,n,this.fieldTransforms)}}class Q$e{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new cv(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function J$e(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bn()}}class Ete{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Ete(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return G3(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(J$e(this.fu)&&y8t.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class b8t{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||U4(t)}Fu(t,n,r,i=!1){return new Ete({fu:t,methodName:n,vu:r,path:Vo.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function W4(e){const t=e._freezeSettings(),n=U4(e._databaseId);return new b8t(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Z$e(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);Ste("Data must be an object, but it was:",o,r);const a=n3e(r,o);let l,u;if(s.merge)l=new Vu(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=Pq(t,d,n);if(!o.contains(f))throw new Tt(Ke.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);i3e(c,f)||c.push(f)}l=new Vu(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new v8t(new Hl(a),l,u)}class G4 extends q4{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof G4}}class xte extends q4{_toFieldTransform(t){return new mjt(t.path,new KI)}isEqual(t){return t instanceof xte}}function e3e(e,t,n,r){const i=e.Fu(1,t,n);Ste("Data must be an object, but it was:",i,r);const s=[],o=Hl.empty();a_(r,(l,u)=>{const c=Tte(t,l,n);u=wi(u);const d=i.Su(c);if(u instanceof G4)s.push(c);else{const f=Bk(u,d);f!=null&&(s.push(c),o.set(c,f))}});const a=new Vu(s);return new Q$e(o,a,i.fieldTransforms)}function t3e(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[Pq(t,r,n)],l=[i];if(s.length%2!=0)throw new Tt(Ke.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Pq(t,s[f])),l.push(s[f+1]);const u=[],c=Hl.empty();for(let f=a.length-1;f>=0;--f)if(!i3e(u,a[f])){const h=a[f];let p=l[f];p=wi(p);const m=o.Su(h);if(p instanceof G4)u.push(h);else{const g=Bk(p,m);g!=null&&(u.push(h),c.set(h,g))}}const d=new Vu(u);return new Q$e(c,d,o.fieldTransforms)}function _8t(e,t,n,r=!1){return Bk(n,e.Fu(r?4:3,t))}function Bk(e,t){if(r3e(e=wi(e)))return Ste("Unsupported field value:",t,e),n3e(e,t);if(e instanceof q4)return function(r,i){if(!J$e(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Bk(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=wi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fjt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=eo.fromDate(r);return{timestampValue:q3(i.serializer,s)}}if(r instanceof eo){const s=new eo(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:q3(i.serializer,s)}}if(r instanceof wte)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Cx)return{bytesValue:y$e(i.serializer,r._byteString)};if(r instanceof ul){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ate(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${H4(r)}`)}(e,t)}function n3e(e,t){const n={};return qMe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):a_(e,(r,i)=>{const s=Bk(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function r3e(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof eo||e instanceof wte||e instanceof Cx||e instanceof ul||e instanceof q4)}function Ste(e,t,n){if(!r3e(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=H4(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function Pq(e,t,n){if((t=wi(t))instanceof jk)return t._internalPath;if(typeof t=="string")return Tte(e,t);throw G3("Field path arguments must be of type string or ",e,!1,void 0,n)}const w8t=new RegExp("[~\\*/\\[\\]]");function Tte(e,t,n){if(t.search(w8t)>=0)throw G3(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new jk(...t.split("."))._internalPath}catch{throw G3(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function G3(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Tt(Ke.INVALID_ARGUMENT,a+e+l)}function i3e(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3e{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ul(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new E8t(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Y4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class E8t extends s3e{data(){return super.data()}}function Y4(e,t){return typeof t=="string"?Tte(e,t):t instanceof jk?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x8t(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Tt(Ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cte{}class o3e extends Cte{}function Pge(e,t,...n){let r=[];t instanceof Cte&&r.push(t),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Ate).length,a=s.filter(l=>l instanceof K4).length;if(o>1||o>0&&a>0)throw new Tt(Ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class K4 extends o3e{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new K4(t,n,r)}_apply(t){const n=this._parse(t);return a3e(t._query,n),new u_(t.firestore,t.converter,Eq(t._query,n))}_parse(t){const n=W4(t.firestore);return function(s,o,a,l,u,c,d){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Tt(Ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Oge(d,c);const h=[];for(const p of d)h.push(Nge(l,s,p));f={arrayValue:{values:h}}}else f=Nge(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Oge(d,c),f=_8t(a,o,d,c==="in"||c==="not-in");return Ms.create(u,c,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function S8t(e,t,n){const r=t,i=Y4("where",e);return K4._create(i,r,n)}class Ate extends Cte{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Ate(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Sf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)a3e(o,l),o=Eq(o,l)}(t._query,n),new u_(t.firestore,t.converter,Eq(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ite extends o3e{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Ite(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Tt(Ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Tt(Ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new YI(s,o)}(t._query,this._field,this._direction);return new u_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new GS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function T8t(e,t="asc"){const n=t,r=Y4("orderBy",e);return Ite._create(r,n)}function Nge(e,t,n){if(typeof(n=wi(n))=="string"){if(n==="")throw new Tt(Ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!e$e(t)&&n.indexOf("/")!==-1)throw new Tt(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ai.fromString(n));if(!Yt.isDocumentKey(r))throw new Tt(Ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ege(e,new Yt(r))}if(n instanceof ul)return ege(e,n._key);throw new Tt(Ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${H4(n)}.`)}function Oge(e,t){if(!Array.isArray(e)||e.length===0)throw new Tt(Ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function a3e(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Tt(Ke.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Tt(Ke.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class C8t{convertValue(t,n="none"){switch(Tb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ns(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Sb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw bn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return a_(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new wte(Ns(t.latitude),Ns(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=ete(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qI(t));default:return null}}convertTimestamp(t){const n=Iy(t);return new eo(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Ai.fromString(t);_i(x$e(r));const i=new WI(r.get(1),r.get(3)),s=new Yt(r.popFirst(5));return i.isEqual(n)||og(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3e(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class u3e extends s3e{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new FD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Y4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class FD extends u3e{data(t={}){return super.data(t)}}class A8t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new a2(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new FD(this._firestore,this._userDataWriter,r.key,r,new a2(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Tt(Ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new FD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new a2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new FD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new a2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:I8t(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function I8t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(e){e=Tf(e,ul);const t=Tf(e.firestore,dv);return d8t(Fk(t),e._key).then(n=>P8t(t,e,n))}class c3e extends C8t{constructor(t){super(),this.firestore=t}convertBytes(t){return new Cx(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ul(this.firestore,null,n)}}function eC(e){e=Tf(e,u_);const t=Tf(e.firestore,dv),n=Fk(t),r=new c3e(t);return x8t(e._query),f8t(n,e._query).then(i=>new A8t(t,r,e,i))}function Au(e,t,n){e=Tf(e,ul);const r=Tf(e.firestore,dv),i=l3e(e.converter,t,n);return X4(r,[Z$e(W4(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,su.none())])}function R8t(e,t,n,...r){e=Tf(e,ul);const i=Tf(e.firestore,dv),s=W4(i);let o;return o=typeof(t=wi(t))=="string"||t instanceof jk?t3e(s,"updateDoc",e._key,t,n,r):e3e(s,"updateDoc",e._key,t),X4(i,[o.toMutation(e._key,su.exists(!0))])}function k8t(e){return X4(Tf(e.firestore,dv),[new B4(e._key,su.none())])}function X4(e,t){return function(r,i){const s=new Pm;return r.asyncQueue.enqueueAndForget(async()=>X5t(await u8t(r),i,s)),s.promise}(Fk(e),t)}function P8t(e,t,n){const r=n.docs.get(t._key),i=new c3e(e);return new u3e(e,i,t._key,r,new a2(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8t{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=W4(t)}set(t,n,r){this._verifyNotCommitted();const i=Q9(t,this._firestore),s=l3e(i.converter,n,r),o=Z$e(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,su.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=Q9(t,this._firestore);let o;return o=typeof(n=wi(n))=="string"||n instanceof jk?t3e(this._dataReader,"WriteBatch.update",s._key,n,r,i):e3e(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,su.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Q9(t,this._firestore);return this._mutations=this._mutations.concat(new B4(n._key,su.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Tt(Ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Q9(e,t){if((e=wi(e)).firestore!==t)throw new Tt(Ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function O8t(){return new xte("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dge(e){return Fk(e=Tf(e,dv)),new N8t(e,t=>X4(e,t))}(function(t,n=!0){(function(i){WS=i})(o_),ig(new op("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new dv(new k4t(r.getProvider("auth-internal")),new D4t(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Tt(Ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new WI(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ff(Xme,"4.6.4",t),ff(Xme,"4.6.4","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq=new Map,d3e={activated:!1,tokenObservers:[]},D8t={initialized:!1,enabled:!1};function to(e){return Nq.get(e)||Object.assign({},d3e)}function M8t(e,t){return Nq.set(e,t),Nq.get(e)}function Q4(){return D8t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3e="https://content-firebaseappcheck.googleapis.com/v1",$8t="exchangeRecaptchaV3Token",L8t="exchangeDebugToken",Mge={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},F8t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new jI,this.pending.promise.catch(n=>{}),await B8t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new jI,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function B8t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ql=new VS("appCheck","AppCheck",z8t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ge(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Rte(e){if(!to(e).activated)throw Ql.create("use-before-activation",{appName:e.name})}function h3e(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=nO(n)+"d:"),r&&(o+=nO(r)+"h:"),o+=nO(i)+"m:"+nO(s)+"s",o}function nO(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kte({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(d){throw Ql.create("fetch-network-error",{originalErrorMessage:d==null?void 0:d.message})}if(o.status!==200)throw Ql.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(d){throw Ql.create("fetch-parse-error",{originalErrorMessage:d==null?void 0:d.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Ql.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=Number(l[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+u,issuedAtTimeMillis:c}}function U8t(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${f3e}/projects/${n}/apps/${r}:${$8t}?key=${i}`,body:{recaptcha_v3_token:t}}}function p3e(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${f3e}/projects/${n}/apps/${r}:${L8t}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8t="firebase-app-check-database",H8t=1,JI="firebase-app-check-store",m3e="debug-token";let rO=null;function g3e(){return rO||(rO=new Promise((e,t)=>{try{const n=indexedDB.open(V8t,H8t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Ql.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(JI,{keyPath:"compositeKey"})}}}catch(n){t(Ql.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),rO)}function q8t(e){return v3e(b3e(e))}function W8t(e,t){return y3e(b3e(e),t)}function G8t(e){return y3e(m3e,e)}function Y8t(){return v3e(m3e)}async function y3e(e,t){const r=(await g3e()).transaction(JI,"readwrite"),s=r.objectStore(JI).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var u;a(Ql.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})}async function v3e(e){const n=(await g3e()).transaction(JI,"readonly"),i=n.objectStore(JI).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const l=a.target.result;s(l?l.value:void 0)},n.onerror=a=>{var l;o(Ql.create("storage-get",{originalErrorMessage:(l=a.target.error)===null||l===void 0?void 0:l.message}))}})}function b3e(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=new I4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K8t(e){if(Nee()){let t;try{t=await q8t(e)}catch(n){ZI.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function J9(e,t){return Nee()?W8t(e,t).catch(n=>{ZI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function X8t(){let e;try{e=await Y8t()}catch{}if(e)return e;{const t=X$t();return G8t(t).catch(n=>ZI.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pte(){return Q4().enabled}async function Nte(){const e=Q4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function Q8t(){const e=$De(),t=Q4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new jI;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(X8t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8t={error:"UNKNOWN_ERROR"};function Z8t(e){return Pee.encodeString(JSON.stringify(e),!1)}async function Oq(e,t=!1){const n=e.app;Rte(n);const r=to(n);let i=r.token,s;if(i&&!Hw(i)&&(r.token=void 0,i=void 0),!i){const l=await r.cachedTokenPromise;l&&(Hw(l)?i=l:await J9(n,void 0))}if(!t&&i&&Hw(i))return{token:i.token};let o=!1;if(Pte()){r.exchangeTokenPromise||(r.exchangeTokenPromise=kte(p3e(n,await Nte()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const l=await r.exchangeTokenPromise;return await J9(n,l),r.token=l,{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await to(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?ZI.warn(l.message):ZI.error(l),s=l}let a;return i?s?Hw(i)?a={token:i.token,internalError:s}:a=Fge(s):(a={token:i.token},r.token=i,await J9(n,i)):a=Fge(s),o&&E3e(n,a),a}async function eBt(e){const t=e.app;Rte(t);const{provider:n}=to(t);if(Pte()){const r=await Nte(),{token:i}=await kte(p3e(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function _3e(e,t,n,r){const{app:i}=e,s=to(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Hw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Lge(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Lge(e))}function w3e(e,t){const n=to(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Lge(e){const{app:t}=e,n=to(t);let r=n.tokenRefresher;r||(r=tBt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function tBt(e){const{app:t}=e;return new j8t(async()=>{const n=to(t);let r;if(n.token?r=await Oq(e,!0):r=await Oq(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=to(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Mge.RETRIAL_MIN_WAIT,Mge.RETRIAL_MAX_WAIT)}function E3e(e,t){const n=to(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Hw(e){return e.expireTimeMillis-Date.now()>0}function Fge(e){return{token:Z8t(J8t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nBt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=to(this.app);for(const n of t)w3e(this.app,n.next);return Promise.resolve()}}function rBt(e,t){return new nBt(e,t)}function iBt(e){return{getToken:t=>Oq(e,t),getLimitedUseToken:()=>eBt(e),addTokenListener:t=>_3e(e,"INTERNAL",t),removeTokenListener:t=>w3e(e.app,t)}}const sBt="@firebase/app-check",oBt="0.8.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aBt="https://www.google.com/recaptcha/api.js";function lBt(e,t){const n=new jI,r=to(e);r.reCAPTCHAState={initialized:n};const i=uBt(e),s=$ge(!1);return s?jge(e,t,s,i,n):fBt(()=>{const o=$ge(!1);if(!o)throw new Error("no recaptcha");jge(e,t,o,i,n)}),n.promise}function jge(e,t,n,r,i){n.ready(()=>{dBt(e,t,n,r),i.resolve(n)})}function uBt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function cBt(e){Rte(e);const n=await to(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=to(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function dBt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{to(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{to(e).reCAPTCHAState.succeeded=!1}}),s=to(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function fBt(e){const t=document.createElement("script");t.src=aBt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ote{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;pBt(this._throttleData);const i=await cBt(this._app).catch(o=>{throw Ql.create("recaptcha-error")});if(!(!((t=to(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Ql.create("recaptcha-error");let s;try{s=await kte(U8t(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=hBt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Ql.create("throttled",{time:h3e(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=HS(t,"heartbeat"),lBt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Ote?this._siteKey===t._siteKey:!1}}function hBt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+F8t,httpStatus:e};{const n=t?t.backoffCount:0,r=t3t(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function pBt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Ql.create("throttled",{time:h3e(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mBt(e=Dee(),t){e=wi(e);const n=HS(e,"app-check");if(Q4().initialized||Q8t(),Pte()&&Nte().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Ql.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return gBt(e,t.provider,t.isTokenAutoRefreshEnabled),to(e).isTokenAutoRefreshEnabled&&_3e(r,"INTERNAL",()=>{}),r}function gBt(e,t,n){const r=M8t(e,Object.assign({},d3e));r.activated=!0,r.provider=t,r.cachedTokenPromise=K8t(e).then(i=>(i&&Hw(i)&&(r.token=i,E3e(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const yBt="app-check",Bge="app-check-internal";function vBt(){ig(new op(yBt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return rBt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Bge).initialize()})),ig(new op(Bge,e=>{const t=e.getProvider("app-check").getImmediate();return iBt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),ff(sBt,oBt)}vBt();function iO(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var x3e={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(u,c){if(!i[u]){if(!r[u]){var d=typeof iO=="function"&&iO;if(!c&&d)return d(u,!0);if(a)return a(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var h=i[u]={exports:{}};r[u][0].call(h.exports,function(p){var m=r[u][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[u].exports}for(var a=typeof iO=="function"&&iO,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var l=0,u=new o(p),c=s.document.createTextNode("");u.observe(c,{characterData:!0}),a=function(){c.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var d=new s.MessageChannel;d.port1.onmessage=p,a=function(){d.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var f,h=[];function p(){f=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}f=!1}r.exports=m;function m(g){h.push(g)===1&&!f&&a()}}).call(this,typeof Ys<"u"?Ys:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];r.exports=d;function d(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}d.prototype.catch=function(E){return this.then(null,E)},d.prototype.then=function(E,S){if(typeof E!="function"&&this.state===u||typeof S!="function"&&this.state===l)return this;var x=new this.constructor(o);if(this.state!==c){var T=this.state===u?E:S;h(x,T,this.outcome)}else this.queue.push(new f(x,E,S));return x};function f(E,S,x){this.promise=E,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}f.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},f.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},f.prototype.callRejected=function(E){a.reject(this.promise,E)},f.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,S,x){s(function(){var T;try{T=S(x)}catch(I){return a.reject(E,I)}T===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,T)})}a.resolve=function(E,S){var x=g(p,S);if(x.status==="error")return a.reject(E,x.value);var T=x.value;if(T)m(E,T);else{E.state=u,E.outcome=S;for(var I=-1,P=E.queue.length;++I<P;)E.queue[I].callFulfilled(S)}return E},a.reject=function(E,S){E.state=l,E.outcome=S;for(var x=-1,T=E.queue.length;++x<T;)E.queue[x].callRejected(S);return E};function p(E){var S=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof S=="function")return function(){S.apply(E,arguments)}}function m(E,S){var x=!1;function T(D){x||(x=!0,a.reject(E,D))}function I(D){x||(x=!0,a.resolve(E,D))}function P(){S(I,T)}var k=g(P);k.status==="error"&&T(k.value)}function g(E,S){var x={};try{x.value=E(S),x.status="success"}catch(T){x.status="error",x.value=T}return x}d.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}d.reject=v;function v(E){var S=new this(o);return a.reject(S,E)}d.all=_;function _(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=E.length,T=!1;if(!x)return this.resolve([]);for(var I=new Array(x),P=0,k=-1,D=new this(o);++k<x;)R(E[k],k);return D;function R(M,$){S.resolve(M).then(L,function(B){T||(T=!0,a.reject(D,B))});function L(B){I[$]=B,++P===x&&!T&&(T=!0,a.resolve(D,I))}}}d.race=w;function w(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=E.length,T=!1;if(!x)return this.resolve([]);for(var I=-1,P=new this(o);++I<x;)k(E[I]);return P;function k(D){S.resolve(D).then(function(R){T||(T=!0,a.resolve(P,R))},function(R){T||(T=!0,a.reject(P,R))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Ys<"u"?Ys:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,fe){if(!(Y instanceof fe))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=a();function u(){try{if(!l||!l.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),fe=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||fe)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,fe){Y=Y||[],fe=fe||{};try{return new Blob(Y,fe)}catch(ve){if(ve.name!=="TypeError")throw ve;for(var ee=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,be=new ee,we=0;we<Y.length;we+=1)be.append(Y[we]);return be.getBlob(fe.type)}}typeof Promise>"u"&&n(3);var d=Promise;function f(Y,fe){fe&&Y.then(function(ee){fe(null,ee)},function(ee){fe(ee)})}function h(Y,fe,ee){typeof fe=="function"&&Y.then(fe),typeof ee=="function"&&Y.catch(ee)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},_=Object.prototype.toString,w="readonly",E="readwrite";function S(Y){for(var fe=Y.length,ee=new ArrayBuffer(fe),be=new Uint8Array(ee),we=0;we<fe;we++)be[we]=Y.charCodeAt(we);return ee}function x(Y){return new d(function(fe){var ee=Y.transaction(g,E),be=c([""]);ee.objectStore(g).put(be,"key"),ee.onabort=function(we){we.preventDefault(),we.stopPropagation(),fe(!1)},ee.oncomplete=function(){var we=navigator.userAgent.match(/Chrome\/(\d+)/),ve=navigator.userAgent.match(/Edge\//);fe(ve||!we||parseInt(we[1],10)>=43)}}).catch(function(){return!1})}function T(Y){return typeof y=="boolean"?d.resolve(y):x(Y).then(function(fe){return y=fe,y})}function I(Y){var fe=v[Y.name],ee={};ee.promise=new d(function(be,we){ee.resolve=be,ee.reject=we}),fe.deferredOperations.push(ee),fe.dbReady?fe.dbReady=fe.dbReady.then(function(){return ee.promise}):fe.dbReady=ee.promise}function P(Y){var fe=v[Y.name],ee=fe.deferredOperations.pop();if(ee)return ee.resolve(),ee.promise}function k(Y,fe){var ee=v[Y.name],be=ee.deferredOperations.pop();if(be)return be.reject(fe),be.promise}function D(Y,fe){return new d(function(ee,be){if(v[Y.name]=v[Y.name]||W(),Y.db)if(fe)I(Y),Y.db.close();else return ee(Y.db);var we=[Y.name];fe&&we.push(Y.version);var ve=l.open.apply(l,we);fe&&(ve.onupgradeneeded=function(ze){var Qe=ve.result;try{Qe.createObjectStore(Y.storeName),ze.oldVersion<=1&&Qe.createObjectStore(g)}catch(Je){if(Je.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+ze.oldVersion+" to version "+ze.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw Je}}),ve.onerror=function(ze){ze.preventDefault(),be(ve.error)},ve.onsuccess=function(){var ze=ve.result;ze.onversionchange=function(Qe){Qe.target.close()},ee(ze),P(Y)}})}function R(Y){return D(Y,!1)}function M(Y){return D(Y,!0)}function $(Y,fe){if(!Y.db)return!0;var ee=!Y.db.objectStoreNames.contains(Y.storeName),be=Y.version<Y.db.version,we=Y.version>Y.db.version;if(be&&(Y.version!==fe&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),we||ee){if(ee){var ve=Y.db.version+1;ve>Y.version&&(Y.version=ve)}return!0}return!1}function L(Y){return new d(function(fe,ee){var be=new FileReader;be.onerror=ee,be.onloadend=function(we){var ve=btoa(we.target.result||"");fe({__local_forage_encoded_blob:!0,data:ve,type:Y.type})},be.readAsBinaryString(Y)})}function B(Y){var fe=S(atob(Y.data));return c([fe],{type:Y.type})}function U(Y){return Y&&Y.__local_forage_encoded_blob}function z(Y){var fe=this,ee=fe._initReady().then(function(){var be=v[fe._dbInfo.name];if(be&&be.dbReady)return be.dbReady});return h(ee,Y,Y),ee}function N(Y){I(Y);for(var fe=v[Y.name],ee=fe.forages,be=0;be<ee.length;be++){var we=ee[be];we._dbInfo.db&&(we._dbInfo.db.close(),we._dbInfo.db=null)}return Y.db=null,R(Y).then(function(ve){return Y.db=ve,$(Y)?M(Y):ve}).then(function(ve){Y.db=fe.db=ve;for(var ze=0;ze<ee.length;ze++)ee[ze]._dbInfo.db=ve}).catch(function(ve){throw k(Y,ve),ve})}function V(Y,fe,ee,be){be===void 0&&(be=1);try{var we=Y.db.transaction(Y.storeName,fe);ee(null,we)}catch(ve){if(be>0&&(!Y.db||ve.name==="InvalidStateError"||ve.name==="NotFoundError"))return d.resolve().then(function(){if(!Y.db||ve.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),M(Y)}).then(function(){return N(Y).then(function(){V(Y,fe,ee,be-1)})}).catch(ee);ee(ve)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function F(Y){var fe=this,ee={db:null};if(Y)for(var be in Y)ee[be]=Y[be];var we=v[ee.name];we||(we=W(),v[ee.name]=we),we.forages.push(fe),fe._initReady||(fe._initReady=fe.ready,fe.ready=z);var ve=[];function ze(){return d.resolve()}for(var Qe=0;Qe<we.forages.length;Qe++){var Je=we.forages[Qe];Je!==fe&&ve.push(Je._initReady().catch(ze))}var Ze=we.forages.slice(0);return d.all(ve).then(function(){return ee.db=we.db,R(ee)}).then(function(ct){return ee.db=ct,$(ee,fe._defaultConfig.version)?M(ee):ct}).then(function(ct){ee.db=we.db=ct,fe._dbInfo=ee;for(var At=0;At<Ze.length;At++){var Rn=Ze[At];Rn!==fe&&(Rn._dbInfo.db=ee.db,Rn._dbInfo.version=ee.version)}})}function H(Y,fe){var ee=this;Y=p(Y);var be=new d(function(we,ve){ee.ready().then(function(){V(ee._dbInfo,w,function(ze,Qe){if(ze)return ve(ze);try{var Je=Qe.objectStore(ee._dbInfo.storeName),Ze=Je.get(Y);Ze.onsuccess=function(){var ct=Ze.result;ct===void 0&&(ct=null),U(ct)&&(ct=B(ct)),we(ct)},Ze.onerror=function(){ve(Ze.error)}}catch(ct){ve(ct)}})}).catch(ve)});return f(be,fe),be}function G(Y,fe){var ee=this,be=new d(function(we,ve){ee.ready().then(function(){V(ee._dbInfo,w,function(ze,Qe){if(ze)return ve(ze);try{var Je=Qe.objectStore(ee._dbInfo.storeName),Ze=Je.openCursor(),ct=1;Ze.onsuccess=function(){var At=Ze.result;if(At){var Rn=At.value;U(Rn)&&(Rn=B(Rn));var Lt=Y(Rn,At.key,ct++);Lt!==void 0?we(Lt):At.continue()}else we()},Ze.onerror=function(){ve(Ze.error)}}catch(At){ve(At)}})}).catch(ve)});return f(be,fe),be}function Q(Y,fe,ee){var be=this;Y=p(Y);var we=new d(function(ve,ze){var Qe;be.ready().then(function(){return Qe=be._dbInfo,_.call(fe)==="[object Blob]"?T(Qe.db).then(function(Je){return Je?fe:L(fe)}):fe}).then(function(Je){V(be._dbInfo,E,function(Ze,ct){if(Ze)return ze(Ze);try{var At=ct.objectStore(be._dbInfo.storeName);Je===null&&(Je=void 0);var Rn=At.put(Je,Y);ct.oncomplete=function(){Je===void 0&&(Je=null),ve(Je)},ct.onabort=ct.onerror=function(){var Lt=Rn.error?Rn.error:Rn.transaction.error;ze(Lt)}}catch(Lt){ze(Lt)}})}).catch(ze)});return f(we,ee),we}function ie(Y,fe){var ee=this;Y=p(Y);var be=new d(function(we,ve){ee.ready().then(function(){V(ee._dbInfo,E,function(ze,Qe){if(ze)return ve(ze);try{var Je=Qe.objectStore(ee._dbInfo.storeName),Ze=Je.delete(Y);Qe.oncomplete=function(){we()},Qe.onerror=function(){ve(Ze.error)},Qe.onabort=function(){var ct=Ze.error?Ze.error:Ze.transaction.error;ve(ct)}}catch(ct){ve(ct)}})}).catch(ve)});return f(be,fe),be}function se(Y){var fe=this,ee=new d(function(be,we){fe.ready().then(function(){V(fe._dbInfo,E,function(ve,ze){if(ve)return we(ve);try{var Qe=ze.objectStore(fe._dbInfo.storeName),Je=Qe.clear();ze.oncomplete=function(){be()},ze.onabort=ze.onerror=function(){var Ze=Je.error?Je.error:Je.transaction.error;we(Ze)}}catch(Ze){we(Ze)}})}).catch(we)});return f(ee,Y),ee}function ne(Y){var fe=this,ee=new d(function(be,we){fe.ready().then(function(){V(fe._dbInfo,w,function(ve,ze){if(ve)return we(ve);try{var Qe=ze.objectStore(fe._dbInfo.storeName),Je=Qe.count();Je.onsuccess=function(){be(Je.result)},Je.onerror=function(){we(Je.error)}}catch(Ze){we(Ze)}})}).catch(we)});return f(ee,Y),ee}function ce(Y,fe){var ee=this,be=new d(function(we,ve){if(Y<0){we(null);return}ee.ready().then(function(){V(ee._dbInfo,w,function(ze,Qe){if(ze)return ve(ze);try{var Je=Qe.objectStore(ee._dbInfo.storeName),Ze=!1,ct=Je.openKeyCursor();ct.onsuccess=function(){var At=ct.result;if(!At){we(null);return}Y===0||Ze?we(At.key):(Ze=!0,At.advance(Y))},ct.onerror=function(){ve(ct.error)}}catch(At){ve(At)}})}).catch(ve)});return f(be,fe),be}function Ee(Y){var fe=this,ee=new d(function(be,we){fe.ready().then(function(){V(fe._dbInfo,w,function(ve,ze){if(ve)return we(ve);try{var Qe=ze.objectStore(fe._dbInfo.storeName),Je=Qe.openKeyCursor(),Ze=[];Je.onsuccess=function(){var ct=Je.result;if(!ct){be(Ze);return}Ze.push(ct.key),ct.continue()},Je.onerror=function(){we(Je.error)}}catch(ct){we(ct)}})}).catch(we)});return f(ee,Y),ee}function de(Y,fe){fe=m.apply(this,arguments);var ee=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||ee.name,Y.storeName=Y.storeName||ee.storeName);var be=this,we;if(!Y.name)we=d.reject("Invalid arguments");else{var ve=Y.name===ee.name&&be._dbInfo.db,ze=ve?d.resolve(be._dbInfo.db):R(Y).then(function(Qe){var Je=v[Y.name],Ze=Je.forages;Je.db=Qe;for(var ct=0;ct<Ze.length;ct++)Ze[ct]._dbInfo.db=Qe;return Qe});Y.storeName?we=ze.then(function(Qe){if(Qe.objectStoreNames.contains(Y.storeName)){var Je=Qe.version+1;I(Y);var Ze=v[Y.name],ct=Ze.forages;Qe.close();for(var At=0;At<ct.length;At++){var Rn=ct[At];Rn._dbInfo.db=null,Rn._dbInfo.version=Je}var Lt=new d(function(Jn,Ur){var Vr=l.open(Y.name,Je);Vr.onerror=function(sa){var Qf=Vr.result;Qf.close(),Ur(sa)},Vr.onupgradeneeded=function(){var sa=Vr.result;sa.deleteObjectStore(Y.storeName)},Vr.onsuccess=function(){var sa=Vr.result;sa.close(),Jn(sa)}});return Lt.then(function(Jn){Ze.db=Jn;for(var Ur=0;Ur<ct.length;Ur++){var Vr=ct[Ur];Vr._dbInfo.db=Jn,P(Vr._dbInfo)}}).catch(function(Jn){throw(k(Y,Jn)||d.resolve()).catch(function(){}),Jn})}}):we=ze.then(function(Qe){I(Y);var Je=v[Y.name],Ze=Je.forages;Qe.close();for(var ct=0;ct<Ze.length;ct++){var At=Ze[ct];At._dbInfo.db=null}var Rn=new d(function(Lt,Jn){var Ur=l.deleteDatabase(Y.name);Ur.onerror=function(){var Vr=Ur.result;Vr&&Vr.close(),Jn(Ur.error)},Ur.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Ur.onsuccess=function(){var Vr=Ur.result;Vr&&Vr.close(),Lt(Vr)}});return Rn.then(function(Lt){Je.db=Lt;for(var Jn=0;Jn<Ze.length;Jn++){var Ur=Ze[Jn];P(Ur._dbInfo)}}).catch(function(Lt){throw(k(Y,Lt)||d.resolve()).catch(function(){}),Lt})})}return f(we,fe),we}var We={_driver:"asyncStorage",_initStorage:F,_support:u(),iterate:G,getItem:H,setItem:Q,removeItem:ie,clear:se,length:ne,key:ce,keys:Ee,dropInstance:de};function Fe(){return typeof openDatabase=="function"}var Ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",je="~~local_forage_type~",ye=/^~~local_forage_type~([^~]+)~/,ae="__lfsc__:",Pe=ae.length,Be="arbf",ft="blob",Se="si08",he="ui08",Ve="uic8",tt="si16",ge="si32",ke="ur16",Ye="ui32",Xe="fl32",xt="fl64",An=Pe+Be.length,gr=Object.prototype.toString;function yr(Y){var fe=Y.length*.75,ee=Y.length,be,we=0,ve,ze,Qe,Je;Y[Y.length-1]==="="&&(fe--,Y[Y.length-2]==="="&&fe--);var Ze=new ArrayBuffer(fe),ct=new Uint8Array(Ze);for(be=0;be<ee;be+=4)ve=Ne.indexOf(Y[be]),ze=Ne.indexOf(Y[be+1]),Qe=Ne.indexOf(Y[be+2]),Je=Ne.indexOf(Y[be+3]),ct[we++]=ve<<2|ze>>4,ct[we++]=(ze&15)<<4|Qe>>2,ct[we++]=(Qe&3)<<6|Je&63;return Ze}function kr(Y){var fe=new Uint8Array(Y),ee="",be;for(be=0;be<fe.length;be+=3)ee+=Ne[fe[be]>>2],ee+=Ne[(fe[be]&3)<<4|fe[be+1]>>4],ee+=Ne[(fe[be+1]&15)<<2|fe[be+2]>>6],ee+=Ne[fe[be+2]&63];return fe.length%3===2?ee=ee.substring(0,ee.length-1)+"=":fe.length%3===1&&(ee=ee.substring(0,ee.length-2)+"=="),ee}function Xt(Y,fe){var ee="";if(Y&&(ee=gr.call(Y)),Y&&(ee==="[object ArrayBuffer]"||Y.buffer&&gr.call(Y.buffer)==="[object ArrayBuffer]")){var be,we=ae;Y instanceof ArrayBuffer?(be=Y,we+=Be):(be=Y.buffer,ee==="[object Int8Array]"?we+=Se:ee==="[object Uint8Array]"?we+=he:ee==="[object Uint8ClampedArray]"?we+=Ve:ee==="[object Int16Array]"?we+=tt:ee==="[object Uint16Array]"?we+=ke:ee==="[object Int32Array]"?we+=ge:ee==="[object Uint32Array]"?we+=Ye:ee==="[object Float32Array]"?we+=Xe:ee==="[object Float64Array]"?we+=xt:fe(new Error("Failed to get type for BinaryArray"))),fe(we+kr(be))}else if(ee==="[object Blob]"){var ve=new FileReader;ve.onload=function(){var ze=je+Y.type+"~"+kr(this.result);fe(ae+ft+ze)},ve.readAsArrayBuffer(Y)}else try{fe(JSON.stringify(Y))}catch(ze){console.error("Couldn't convert value into a JSON string: ",Y),fe(null,ze)}}function Dn(Y){if(Y.substring(0,Pe)!==ae)return JSON.parse(Y);var fe=Y.substring(An),ee=Y.substring(Pe,An),be;if(ee===ft&&ye.test(fe)){var we=fe.match(ye);be=we[1],fe=fe.substring(we[0].length)}var ve=yr(fe);switch(ee){case Be:return ve;case ft:return c([ve],{type:be});case Se:return new Int8Array(ve);case he:return new Uint8Array(ve);case Ve:return new Uint8ClampedArray(ve);case tt:return new Int16Array(ve);case ke:return new Uint16Array(ve);case ge:return new Int32Array(ve);case Ye:return new Uint32Array(ve);case Xe:return new Float32Array(ve);case xt:return new Float64Array(ve);default:throw new Error("Unkown type: "+ee)}}var rr={serialize:Xt,deserialize:Dn,stringToBuffer:yr,bufferToString:kr};function ir(Y,fe,ee,be){Y.executeSql("CREATE TABLE IF NOT EXISTS "+fe.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ee,be)}function ao(Y){var fe=this,ee={db:null};if(Y)for(var be in Y)ee[be]=typeof Y[be]!="string"?Y[be].toString():Y[be];var we=new d(function(ve,ze){try{ee.db=openDatabase(ee.name,String(ee.version),ee.description,ee.size)}catch(Qe){return ze(Qe)}ee.db.transaction(function(Qe){ir(Qe,ee,function(){fe._dbInfo=ee,ve()},function(Je,Ze){ze(Ze)})},ze)});return ee.serializer=rr,we}function Oi(Y,fe,ee,be,we,ve){Y.executeSql(ee,be,we,function(ze,Qe){Qe.code===Qe.SYNTAX_ERR?ze.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[fe.storeName],function(Je,Ze){Ze.rows.length?ve(Je,Qe):ir(Je,fe,function(){Je.executeSql(ee,be,we,ve)},ve)},ve):ve(ze,Qe)},ve)}function Ui(Y,fe){var ee=this;Y=p(Y);var be=new d(function(we,ve){ee.ready().then(function(){var ze=ee._dbInfo;ze.db.transaction(function(Qe){Oi(Qe,ze,"SELECT * FROM "+ze.storeName+" WHERE key = ? LIMIT 1",[Y],function(Je,Ze){var ct=Ze.rows.length?Ze.rows.item(0).value:null;ct&&(ct=ze.serializer.deserialize(ct)),we(ct)},function(Je,Ze){ve(Ze)})})}).catch(ve)});return f(be,fe),be}function Un(Y,fe){var ee=this,be=new d(function(we,ve){ee.ready().then(function(){var ze=ee._dbInfo;ze.db.transaction(function(Qe){Oi(Qe,ze,"SELECT * FROM "+ze.storeName,[],function(Je,Ze){for(var ct=Ze.rows,At=ct.length,Rn=0;Rn<At;Rn++){var Lt=ct.item(Rn),Jn=Lt.value;if(Jn&&(Jn=ze.serializer.deserialize(Jn)),Jn=Y(Jn,Lt.key,Rn+1),Jn!==void 0){we(Jn);return}}we()},function(Je,Ze){ve(Ze)})})}).catch(ve)});return f(be,fe),be}function Wn(Y,fe,ee,be){var we=this;Y=p(Y);var ve=new d(function(ze,Qe){we.ready().then(function(){fe===void 0&&(fe=null);var Je=fe,Ze=we._dbInfo;Ze.serializer.serialize(fe,function(ct,At){At?Qe(At):Ze.db.transaction(function(Rn){Oi(Rn,Ze,"INSERT OR REPLACE INTO "+Ze.storeName+" (key, value) VALUES (?, ?)",[Y,ct],function(){ze(Je)},function(Lt,Jn){Qe(Jn)})},function(Rn){if(Rn.code===Rn.QUOTA_ERR){if(be>0){ze(Wn.apply(we,[Y,Je,ee,be-1]));return}Qe(Rn)}})})}).catch(Qe)});return f(ve,ee),ve}function Zi(Y,fe,ee){return Wn.apply(this,[Y,fe,ee,1])}function Ed(Y,fe){var ee=this;Y=p(Y);var be=new d(function(we,ve){ee.ready().then(function(){var ze=ee._dbInfo;ze.db.transaction(function(Qe){Oi(Qe,ze,"DELETE FROM "+ze.storeName+" WHERE key = ?",[Y],function(){we()},function(Je,Ze){ve(Ze)})})}).catch(ve)});return f(be,fe),be}function Va(Y){var fe=this,ee=new d(function(be,we){fe.ready().then(function(){var ve=fe._dbInfo;ve.db.transaction(function(ze){Oi(ze,ve,"DELETE FROM "+ve.storeName,[],function(){be()},function(Qe,Je){we(Je)})})}).catch(we)});return f(ee,Y),ee}function gc(Y){var fe=this,ee=new d(function(be,we){fe.ready().then(function(){var ve=fe._dbInfo;ve.db.transaction(function(ze){Oi(ze,ve,"SELECT COUNT(key) as c FROM "+ve.storeName,[],function(Qe,Je){var Ze=Je.rows.item(0).c;be(Ze)},function(Qe,Je){we(Je)})})}).catch(we)});return f(ee,Y),ee}function mt(Y,fe){var ee=this,be=new d(function(we,ve){ee.ready().then(function(){var ze=ee._dbInfo;ze.db.transaction(function(Qe){Oi(Qe,ze,"SELECT key FROM "+ze.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(Je,Ze){var ct=Ze.rows.length?Ze.rows.item(0).key:null;we(ct)},function(Je,Ze){ve(Ze)})})}).catch(ve)});return f(be,fe),be}function fi(Y){var fe=this,ee=new d(function(be,we){fe.ready().then(function(){var ve=fe._dbInfo;ve.db.transaction(function(ze){Oi(ze,ve,"SELECT key FROM "+ve.storeName,[],function(Qe,Je){for(var Ze=[],ct=0;ct<Je.rows.length;ct++)Ze.push(Je.rows.item(ct).key);be(Ze)},function(Qe,Je){we(Je)})})}).catch(we)});return f(ee,Y),ee}function wn(Y){return new d(function(fe,ee){Y.transaction(function(be){be.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(we,ve){for(var ze=[],Qe=0;Qe<ve.rows.length;Qe++)ze.push(ve.rows.item(Qe).name);fe({db:Y,storeNames:ze})},function(we,ve){ee(ve)})},function(be){ee(be)})})}function $r(Y,fe){fe=m.apply(this,arguments);var ee=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||ee.name,Y.storeName=Y.storeName||ee.storeName);var be=this,we;return Y.name?we=new d(function(ve){var ze;Y.name===ee.name?ze=be._dbInfo.db:ze=openDatabase(Y.name,"","",0),Y.storeName?ve({db:ze,storeNames:[Y.storeName]}):ve(wn(ze))}).then(function(ve){return new d(function(ze,Qe){ve.db.transaction(function(Je){function Ze(Lt){return new d(function(Jn,Ur){Je.executeSql("DROP TABLE IF EXISTS "+Lt,[],function(){Jn()},function(Vr,sa){Ur(sa)})})}for(var ct=[],At=0,Rn=ve.storeNames.length;At<Rn;At++)ct.push(Ze(ve.storeNames[At]));d.all(ct).then(function(){ze()}).catch(function(Lt){Qe(Lt)})},function(Je){Qe(Je)})})}):we=d.reject("Invalid arguments"),f(we,fe),we}var ni={_driver:"webSQLStorage",_initStorage:ao,_support:Fe(),iterate:Un,getItem:Ui,setItem:Zi,removeItem:Ed,clear:Va,length:gc,key:mt,keys:fi,dropInstance:$r};function ri(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ue(Y,fe){var ee=Y.name+"/";return Y.storeName!==fe.storeName&&(ee+=Y.storeName+"/"),ee}function te(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function pe(){return!te()||localStorage.length>0}function Ie(Y){var fe=this,ee={};if(Y)for(var be in Y)ee[be]=Y[be];return ee.keyPrefix=ue(Y,fe._defaultConfig),pe()?(fe._dbInfo=ee,ee.serializer=rr,d.resolve()):d.reject()}function Re(Y){var fe=this,ee=fe.ready().then(function(){for(var be=fe._dbInfo.keyPrefix,we=localStorage.length-1;we>=0;we--){var ve=localStorage.key(we);ve.indexOf(be)===0&&localStorage.removeItem(ve)}});return f(ee,Y),ee}function dt(Y,fe){var ee=this;Y=p(Y);var be=ee.ready().then(function(){var we=ee._dbInfo,ve=localStorage.getItem(we.keyPrefix+Y);return ve&&(ve=we.serializer.deserialize(ve)),ve});return f(be,fe),be}function kt(Y,fe){var ee=this,be=ee.ready().then(function(){for(var we=ee._dbInfo,ve=we.keyPrefix,ze=ve.length,Qe=localStorage.length,Je=1,Ze=0;Ze<Qe;Ze++){var ct=localStorage.key(Ze);if(ct.indexOf(ve)===0){var At=localStorage.getItem(ct);if(At&&(At=we.serializer.deserialize(At)),At=Y(At,ct.substring(ze),Je++),At!==void 0)return At}}});return f(be,fe),be}function rn(Y,fe){var ee=this,be=ee.ready().then(function(){var we=ee._dbInfo,ve;try{ve=localStorage.key(Y)}catch{ve=null}return ve&&(ve=ve.substring(we.keyPrefix.length)),ve});return f(be,fe),be}function Gn(Y){var fe=this,ee=fe.ready().then(function(){for(var be=fe._dbInfo,we=localStorage.length,ve=[],ze=0;ze<we;ze++){var Qe=localStorage.key(ze);Qe.indexOf(be.keyPrefix)===0&&ve.push(Qe.substring(be.keyPrefix.length))}return ve});return f(ee,Y),ee}function Qn(Y){var fe=this,ee=fe.keys().then(function(be){return be.length});return f(ee,Y),ee}function In(Y,fe){var ee=this;Y=p(Y);var be=ee.ready().then(function(){var we=ee._dbInfo;localStorage.removeItem(we.keyPrefix+Y)});return f(be,fe),be}function vr(Y,fe,ee){var be=this;Y=p(Y);var we=be.ready().then(function(){fe===void 0&&(fe=null);var ve=fe;return new d(function(ze,Qe){var Je=be._dbInfo;Je.serializer.serialize(fe,function(Ze,ct){if(ct)Qe(ct);else try{localStorage.setItem(Je.keyPrefix+Y,Ze),ze(ve)}catch(At){(At.name==="QuotaExceededError"||At.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Qe(At),Qe(At)}})})});return f(we,ee),we}function zr(Y,fe){if(fe=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var ee=this.config();Y.name=Y.name||ee.name,Y.storeName=Y.storeName||ee.storeName}var be=this,we;return Y.name?we=new d(function(ve){Y.storeName?ve(ue(Y,be._defaultConfig)):ve(Y.name+"/")}).then(function(ve){for(var ze=localStorage.length-1;ze>=0;ze--){var Qe=localStorage.key(ze);Qe.indexOf(ve)===0&&localStorage.removeItem(Qe)}}):we=d.reject("Invalid arguments"),f(we,fe),we}var Qt={_driver:"localStorageWrapper",_initStorage:Ie,_support:ri(),iterate:kt,getItem:dt,setItem:vr,removeItem:In,clear:Re,length:Qn,key:rn,keys:Gn,dropInstance:zr},br=function(fe,ee){return fe===ee||typeof fe=="number"&&typeof ee=="number"&&isNaN(fe)&&isNaN(ee)},ii=function(fe,ee){for(var be=fe.length,we=0;we<be;){if(br(fe[we],ee))return!0;we++}return!1},dr=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Vi={},lo={},hi={INDEXEDDB:We,WEBSQL:ni,LOCALSTORAGE:Qt},Ao=[hi.INDEXEDDB._driver,hi.WEBSQL._driver,hi.LOCALSTORAGE._driver],es=["dropInstance"],ts=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(es),ia={description:"",driver:Ao.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ha(Y,fe){Y[fe]=function(){var ee=arguments;return Y.ready().then(function(){return Y[fe].apply(Y,ee)})}}function uo(){for(var Y=1;Y<arguments.length;Y++){var fe=arguments[Y];if(fe)for(var ee in fe)fe.hasOwnProperty(ee)&&(dr(fe[ee])?arguments[0][ee]=fe[ee].slice():arguments[0][ee]=fe[ee])}return arguments[0]}var yc=function(){function Y(fe){o(this,Y);for(var ee in hi)if(hi.hasOwnProperty(ee)){var be=hi[ee],we=be._driver;this[ee]=we,Vi[we]||this.defineDriver(be)}this._defaultConfig=uo({},ia),this._config=uo({},this._defaultConfig,fe),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(ee){if((typeof ee>"u"?"undefined":s(ee))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var be in ee){if(be==="storeName"&&(ee[be]=ee[be].replace(/\W/g,"_")),be==="version"&&typeof ee[be]!="number")return new Error("Database version must be a number.");this._config[be]=ee[be]}return"driver"in ee&&ee.driver?this.setDriver(this._config.driver):!0}else return typeof ee=="string"?this._config[ee]:this._config},Y.prototype.defineDriver=function(ee,be,we){var ve=new d(function(ze,Qe){try{var Je=ee._driver,Ze=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ee._driver){Qe(Ze);return}for(var ct=ts.concat("_initStorage"),At=0,Rn=ct.length;At<Rn;At++){var Lt=ct[At],Jn=!ii(es,Lt);if((Jn||ee[Lt])&&typeof ee[Lt]!="function"){Qe(Ze);return}}var Ur=function(){for(var Qf=function(vc){return function(){var Al=new Error("Method "+vc+" is not implemented by the current driver"),jp=d.reject(Al);return f(jp,arguments[arguments.length-1]),jp}},Fp=0,vT=es.length;Fp<vT;Fp++){var Tv=es[Fp];ee[Tv]||(ee[Tv]=Qf(Tv))}};Ur();var Vr=function(Qf){Vi[Je]&&console.info("Redefining LocalForage driver: "+Je),Vi[Je]=ee,lo[Je]=Qf,ze()};"_support"in ee?ee._support&&typeof ee._support=="function"?ee._support().then(Vr,Qe):Vr(!!ee._support):Vr(!0)}catch(sa){Qe(sa)}});return h(ve,be,we),ve},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(ee,be,we){var ve=Vi[ee]?d.resolve(Vi[ee]):d.reject(new Error("Driver not found."));return h(ve,be,we),ve},Y.prototype.getSerializer=function(ee){var be=d.resolve(rr);return h(be,ee),be},Y.prototype.ready=function(ee){var be=this,we=be._driverSet.then(function(){return be._ready===null&&(be._ready=be._initDriver()),be._ready});return h(we,ee,ee),we},Y.prototype.setDriver=function(ee,be,we){var ve=this;dr(ee)||(ee=[ee]);var ze=this._getSupportedDrivers(ee);function Qe(){ve._config.driver=ve.driver()}function Je(At){return ve._extend(At),Qe(),ve._ready=ve._initStorage(ve._config),ve._ready}function Ze(At){return function(){var Rn=0;function Lt(){for(;Rn<At.length;){var Jn=At[Rn];return Rn++,ve._dbInfo=null,ve._ready=null,ve.getDriver(Jn).then(Je).catch(Lt)}Qe();var Ur=new Error("No available storage method found.");return ve._driverSet=d.reject(Ur),ve._driverSet}return Lt()}}var ct=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=ct.then(function(){var At=ze[0];return ve._dbInfo=null,ve._ready=null,ve.getDriver(At).then(function(Rn){ve._driver=Rn._driver,Qe(),ve._wrapLibraryMethodsWithReady(),ve._initDriver=Ze(ze)})}).catch(function(){Qe();var At=new Error("No available storage method found.");return ve._driverSet=d.reject(At),ve._driverSet}),h(this._driverSet,be,we),this._driverSet},Y.prototype.supports=function(ee){return!!lo[ee]},Y.prototype._extend=function(ee){uo(this,ee)},Y.prototype._getSupportedDrivers=function(ee){for(var be=[],we=0,ve=ee.length;we<ve;we++){var ze=ee[we];this.supports(ze)&&be.push(ze)}return be},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var ee=0,be=ts.length;ee<be;ee++)Ha(this,ts[ee])},Y.prototype.createInstance=function(ee){return new Y(ee)},Y}(),Xf=new yc;r.exports=Xf},{3:3}]},{},[4])(4)})})(x3e);var bBt=x3e.exports;const Ew=bu(bBt);class S3e{constructor(t){Rl(this,"engine");Rl(this,"connected",!1);Rl(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function Y3(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function tC(e){return e.participantId!==void 0}class Nc extends S3e{constructor(){super("firebase");Rl(this,"RECAPTCHAV3TOKEN","6LeSJBYqAAAAADYgJYYVaLhVACl5Jy1sidBF7BsC");Rl(this,"firestore");Rl(this,"collectionPrefix","prod-");Rl(this,"studyCollection");Rl(this,"storage");Rl(this,"studyId","");Rl(this,"localForage",Ew.createInstance({name:"currentParticipantId"}));Rl(this,"participantData",null);const n=dQ.parse(`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`),r=UDe(n);this.firestore=m8t(r,{}),this.storage=G_();try{mBt(r,{provider:new Ote(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async saveAllParticipantAndTaskTags(n){const r=Bh(n);Object.values(r).forEach(o=>{o.partTags=o.partTags.map(a=>a.id),Object.values(o.taskTags).forEach(a=>{a=a.map(l=>l.id)})});const i=pi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/_participantTags`),s=new Blob([JSON.stringify(r)],{type:"application/json"});await Ov(i,s)}async getAllParticipantAndTaskTags(){const n=pi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/_participantTags`),r=await this._getFromFirebaseStorageByRef(n,"config"),i=pi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/participant/tags`),s=await this._getFromFirebaseStorageByRef(i,"config"),o=pi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/task/tags`),a=await this._getFromFirebaseStorageByRef(o,"config");return Object.values(r).forEach(l=>{l.partTags=l.partTags.map(u=>s?s.find(c=>c.id===u):u),Object.values(l.taskTags).forEach(u=>{u=u.map(c=>a?a.find(d=>d.id===c):c)})}),Promise.resolve(r)}async saveTags(n,r){const i=pi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/${r}/tags`),s=new Blob([JSON.stringify(n)],{type:"application/json"});await Ov(i,s)}async getTags(n){const r=pi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/${n}/tags`),i=await this._getFromFirebaseStorageByRef(r,"config");return Array.isArray(i)?Promise.resolve(i):Promise.resolve([])}async saveEditedTranscript(n,r,i,s){const o=s.map(u=>({...u,selectedTags:u.selectedTags.filter(c=>c!==void 0).map(c=>c.id)})),a=pi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/${r}/${n}/${i}`),l=new Blob([JSON.stringify(o)],{type:"application/json"});await Ov(a,l)}async getEditedTranscript(n,r,i){const s=pi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/${r}/${n}/${i}`),o=await this._getFromFirebaseStorageByRef(s,"config");if(!Array.isArray(o))return[];const a=pi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/text/tags`),l=await this._getFromFirebaseStorageByRef(a,"config"),u=o.map(c=>({...c,selectedTags:c.selectedTags.map(d=>l.find(f=>d===f.id))}));return Promise.resolve(u)}async connect(){try{await g8t(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=z3();if(!i.currentUser&&(await HLt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await Y3(JSON.stringify(r));if(this.studyCollection=Cd(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async _getFirebaseProvenance(n){const r=G_(),i=pi(r,`${this.studyId}/${n}_provenance`);let s={};try{const o=await Dv(i),l=await(await fetch(o)).text();s=JSON.parse(l)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async _getFirebaseWindowEvents(n){const r=G_(),i=pi(r,`${this.studyId}/${n}_windowEvents`);let s={};try{const o=await Dv(i),l=await(await fetch(o)).text();s=JSON.parse(l)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),l=await this.getModes(n);if(tC(a))return this.participantData=a,a;const u=await Y3(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:u,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},l.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const l=pi(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(l,"config")}),s=await Promise.all(i),o={};return n.forEach((a,l)=>o[a]=s[l]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=FI(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async saveAudio(n,r){n.addEventListener("dataavailable",i=>{const s=G_(),o=pi(s,`${this.studyId}/audio/${this.currentParticipantId}_${r}`);Ov(o,i.data).then(()=>{console.warn("Uploaded a blob or file!")})}),n.stop(),n.stream.getTracks().forEach(i=>i.stop())}async getAudio(n,r){const i=G_(),s=await Promise.all(n.map(async a=>await Dv(pi(i,`${this.studyId}/audio/${r}_${a}`))));return Promise.all(s.map(a=>new Promise(l=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const c=u.response,d=URL.createObjectURL(c);l(d)},u.open("GET",a),u.send()})))}async getTranscription(n,r){const i=G_(),s=await Promise.all(n.map(async a=>await Dv(pi(i,`${this.studyId}/audio/${r}_${a}.wav_transcription.txt`))));return Promise.all(s.map(a=>new Promise(l=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{u.response.text().then(d=>{l(d)})},u.open("GET",a),u.send()})))}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.getSequenceArray();if(!r)throw new Error("Latin square not initialized");const i=await this.getModes(this.studyId),s=js(this.studyCollection,"sequenceAssignment");await Au(s,{});const o=Cd(s,"sequenceAssignment"),a=js(o,this.currentParticipantId),l=Pge(o,S8t("participantId","==","")),u=await eC(l);if(u.docs.length>0){const g=u.docs[0],y=g.data().timestamp;i.dataCollectionEnabled&&(await k8t(g.ref),await Au(a,{participantId:this.currentParticipantId,timestamp:y}))}else i.dataCollectionEnabled&&await Au(a,{participantId:this.currentParticipantId,timestamp:O8t()});const c=Pge(o,T8t("timestamp","asc")),h=(await eC(c)).docs.map(g=>g.data()).findIndex(g=>g.participantId===n||this.currentParticipantId)%r.length,p=h===-1?Math.floor(Math.random()*r.length-1):h,m=r[p];if(!m)throw new Error("Latin square is empty");return m}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=pi(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await JT(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");tC(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return tC(r)?r:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=FI();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=Cd(this.firestore,"user-management"),i=await eC(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(l=>l.email===n.user.email);a&&(a.uid=n.user.uid),await Au(js(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Au(js(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Au(js(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Au(js(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Au(js(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=pi(this.storage,`${this.collectionPrefix}${n}/participants`),i=await JT(r),s=[],o=i.items.map(async a=>{const l=await this._getFromFirebaseStorageByRef(a,"participantData");tC(l)&&s.push(l)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=Cd(this.firestore,`${this.collectionPrefix}${n}`),s=pi(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!tC(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=js(i,"sequenceAssignment"),l=Cd(a,"sequenceAssignment"),u=js(l,r);await R8t(u,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=js(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await Au(s,{[r]:i},{merge:!0})}async getModes(n){const r=js(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await X9(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await Au(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),l=s.getUTCDate().toString().padStart(2,"0"),u=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),d=s.getUTCSeconds().toString().padStart(2,"0"),f=`${o}-${a}-${l}T${u}:${c}:${d}`,h=`${this.collectionPrefix}${n}-snapshot-${f}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=js(this.firestore,"metadata","collections"),i=await X9(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=js(this.firestore,"metadata","collections");await Au(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=js(this.firestore,"metadata","collections"),i=await X9(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Au(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=pi(this.storage,n),s=(await JT(r)).items.map(o=>Yme(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=pi(this.storage,n),o=(await JT(i)).items.map(a=>{const l=a.fullPath,u=l.replace(n,r);return this._copyFile(l,u)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=pi(this.storage,n),s=pi(this.storage,r),o=await Dv(i),l=await(await fetch(o)).blob();await Ov(s,l)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Cd(this.firestore,n),s=js(i,"sequenceAssignment"),o=Cd(s,"sequenceAssignment"),a=Cd(this.firestore,r),l=js(a,"sequenceAssignment");await Au(l,{});const u=Cd(l,"sequenceAssignment"),c=await eC(o),d=Dge(this.firestore);c.docs.forEach(f=>{const h=js(u,f.id);d.set(h,f.data())}),await d.commit()}async _deleteCollection(n){const r=Cd(this.firestore,n),i=js(r,"sequenceAssignment"),s=Cd(i,"sequenceAssignment"),o=await eC(s),a=Dge(this.firestore);o.forEach(l=>{const u=js(s,l.id);a.delete(u)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=pi(this.storage,n);return(await JT(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=pi(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await Dv(i),l=await(await fetch(o)).text();s=JSON.parse(l)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await Dv(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=pi(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await Ov(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await Ov(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=pi(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await Yme(i)}}const T3e=A.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),Ap=()=>A.useContext(T3e);function _Bt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=A.useState(t),[o,a]=A.useState(!1),{storageEngine:l}=Pi(),u=async()=>{const h=z3();try{await QLt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},d=async h=>l?await l.validateUser(h):!1;A.useEffect(()=>{s(t);let h;if(l instanceof Nc)try{h=z3()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},_=await d(v);v.isAdmin=!!_,s(v)}else u()},g=(async()=>{if(l instanceof Nc){const y=await(l==null?void 0:l.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=XLt(h,async _=>await p(_));return()=>v()}s(r)}else l&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[l,o]);const f=A.useMemo(()=>({user:i,triggerAuth:c,logout:u,verifyAdminStatus:d}),[i]);return b.jsx(T3e.Provider,{value:f,children:i.determiningStatus?b.jsx(uu,{visible:!0}):e})}async function wBt(e){return e?await e.getTags("text"):[]}function EBt({participant:e,playTime:t,setTranscriptLines:n,currentShownTranscription:r,setCurrentShownTranscription:i,transcriptList:s,setTranscriptList:o}){var D;const[a,l]=A.useState(null),u=Ap(),{trrackId:c,studyId:d,index:f}=wf(),h=_p(),p=f?h:null,{storageEngine:m}=Pi(),{value:g,execute:y}=Qd(wBt,[m]),v=A.useCallback(R=>{m&&m.saveTags(R,"text").then(()=>y(m))},[y,m]),_=Zh(),w=A.useRef([]),E=A.useMemo(()=>!p||!e?null:Object.keys(e.answers).find(R=>R.startsWith(p))||null,[e,p]),S=g1((R,M)=>{const $=[...s];$[R].text=M,o($)}),x=g1((R,M)=>{const $=[...s];$[R].selectedTags=M,o($)}),T=g1((R,M)=>{const $=[...s];$[R].annotation=M,o($)}),I=g1(R=>{if(R===0)return;const M=structuredClone(s);M[R-1].text=s[R-1].text+s[R].text,M[R-1].transcriptMappingEnd=s[R].transcriptMappingEnd,M[R-1].selectedTags=[...s[R-1].selectedTags,...s[R].selectedTags.filter($=>!s[R-1].selectedTags.find(L=>L.id===$.id))],M.splice(R,1),M.filter($=>$.transcriptMappingStart===M[R-1].transcriptMappingStart).forEach($=>{$.transcriptMappingEnd=M[R-1].transcriptMappingEnd}),o(M),setTimeout(()=>{w.current[R-1].focus(),w.current[R-1].setSelectionRange(s[R-1].text.length,s[R-1].text.length,"none")})}),P=g1((R,M)=>{const $=structuredClone(s),L=$[R];$.splice(R+1,0,{transcriptMappingEnd:L.transcriptMappingEnd,transcriptMappingStart:L.transcriptMappingStart,text:L.text.slice(M),selectedTags:L.selectedTags,annotation:""}),$[R].text=$[R].text.slice(0,M),o($),setTimeout(()=>{w.current[R+1].focus(),w.current[R+1].setSelectionRange(0,0)})});A.useEffect(()=>{const R=[];a&&s.length>a.results.length||(s.forEach((M,$)=>{a&&($===0||M.transcriptMappingStart!==s[$-1].transcriptMappingStart)&&R.push({start:$===0?0:a.results[M.transcriptMappingStart-1].resultEndTime,end:a.results[M.transcriptMappingEnd].resultEndTime,lineStart:M.transcriptMappingStart,lineEnd:M.transcriptMappingEnd,tags:s.filter(L=>L.transcriptMappingStart===M.transcriptMappingStart&&L.transcriptMappingEnd===M.transcriptMappingEnd).map(L=>L.selectedTags)})}),n(R))},[s,n,a]),A.useEffect(()=>{d&&c&&e&&(m==null||m.getTranscription(Gc(e.sequence).filter(R=>_.tasksToNotRecordAudio===void 0||!_.tasksToNotRecordAudio.includes(R)).filter(R=>p?R===p:!0),c).then(R=>{const M=R.map(B=>JSON.parse(B));let $=0;const L=M.map(B=>{const U=B.results.map(z=>({...z,resultEndTime:+z.resultEndTime.split("s")[0]+$}));return $+=+B.results[B.results.length-1].resultEndTime.split("s")[0],U}).flat();l({results:L}),s.length===0&&o(L.map((B,U)=>{var z;return{transcriptMappingStart:U,transcriptMappingEnd:U,text:((z=B.alternatives[0].transcript)==null?void 0:z.trim())||"",selectedTags:[],annotation:""}})),i(0)}))},[m,d,c,_.tasksToNotRecordAudio,e,p,o,i,s.length]),A.useEffect(()=>{if(a&&r!==null&&e&&t>0){let R=r;const M=E?e.answers[E].startTime:e.answers.audioTest.startTime,$=Math.abs(t-M)/1e3;if($>a.results[R].resultEndTime){for(;$>a.results[R].resultEndTime;)if(R+=1,R>a.results.length-1){R=a.results.length-1;break}}else if(R>0&&$<a.results[R-1].resultEndTime)for(;R>0&&$<a.results[R-1].resultEndTime;)R-=1;if(r===R)return;i(R)}},[r,e,t,i,a,E]);const k=A.useCallback((R,M)=>{if(!g)return;const $=g.findIndex(U=>U.id===R.id),L=Array.from(g);L[$]=M;const B=Array.from(s);B.forEach(U=>{U.selectedTags=U.selectedTags.map(z=>z.id===R.id?M:z)}),o(B),v(L)},[v,o,g,s]);return b.jsxs(ci,{gap:0,children:[b.jsxs(Tn,{mb:"sm",justify:"space-between",wrap:"nowrap",children:[b.jsx(nt,{style:{flexGrow:1,textAlign:"center"},children:"Transcript"}),b.jsx(oq,{createTagCallback:R=>{v([...g||[],R])},editTagCallback:k,tags:g||[],email:((D=u.user.user)==null?void 0:D.email)||""})]}),b.jsx(ci,{gap:5,children:g?s.map((R,M)=>b.jsx(x$t,{annotation:R.annotation,setAnnotation:$=>T(M,$),addRef:$=>{w.current[M]=$},onSelectTags:$=>x(M,$),addRowCallback:$=>P(M,$),deleteRowCallback:()=>I(M),onTextChange:$=>S(M,$),tags:g,selectedTags:R.selectedTags,text:R.text,start:R.transcriptMappingStart,end:R.transcriptMappingEnd,current:r===null?0:r},M)):b.jsx(ws,{})})]})}const Z9={left:5,top:0,right:5,bottom:0};function xBt(e,t){return t?t.getParticipantData(e):null}async function SBt(e,t,n,r){return e&&t&&n&&r?await e.getEditedTranscript(t,r,n):null}async function TBt(e,t){return t&&e?await t.getAllParticipantAndTaskTags():null}async function CBt(e,t){return e?await e.getTags(t):[]}const zge=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],Uge=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65a4333efc75f965e7fc0cb5","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","60743e408fd768b1a939ed4c","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function C3e({mini:e}){var Be,ft;const{trrackId:t,index:n}=wf(),r=_p(),i=Ap(),s=A.useMemo(()=>n?r:null,[r,n]),{storageEngine:o}=Pi(),[a,l]=A.useState(0),[u,{width:c}]=of(),[d,f]=A.useState(null),{value:h,status:p}=Qd(xBt,[t,o]),{value:m,execute:g}=Qd(TBt,[t,o]),{saveAnalysisState:y}=nc(),v=ed(),[_,w]=A.useState(!1),[E,S]=oqe(0,50),x=A.useRef(null),T=Zh(),I=md(),{analysisTrialName:P,analysisWaveformTime:k}=Qo(Se=>Se),{setAnalysisTrialName:D,setAnalysisParticipantName:R,setAnalysisWaveformTime:M}=nc(),{value:$,execute:L}=Qd(CBt,[o,"task"]),[B,U]=A.useState(!0),z=A.useRef(null),[N,V]=A.useState([]),[W,F]=A.useState(null),H=A.useMemo(()=>o&&t&&r?Dd(Se=>{var he;return o.saveEditedTranscript(t,((he=i.user.user)==null?void 0:he.email)||"temp",r,Se)},1e3,{maxWait:5e3}):Se=>null,[r,(Be=i.user.user)==null?void 0:Be.email,o,t]),G=A.useCallback(Se=>{F(Se),H(Se)},[H]),{value:Q,status:ie}=Qd(SBt,[o,h==null?void 0:h.participantId,r,(ft=i.user.user)==null?void 0:ft.email]);A.useEffect(()=>{Q&&F(Q)},[Q,ie]);const se=A.useMemo(()=>[...zge,...Uge],[]),ne=A.useMemo(()=>!s||!h?null:Object.keys(h.answers).find(Se=>Se.startsWith(s))||null,[h,s]);A.useEffect(()=>{if(ne&&h){const Se=LI.create(),he=iq({registry:Se,initialState:{}});h.answers[ne].provenanceGraph&&(he.importObject(Bh(h.answers[ne].provenanceGraph)),z.current=he)}},[h,ne]);const ce=A.useCallback(Se=>{var he;Se&&(ne&&h&&z.current&&(v(y(z.current.getState((he=h.answers[ne].provenanceGraph)==null?void 0:he.nodes[Se]))),z.current.to(Se)),f(Se))},[h,y,v,ne]),Ee=A.useCallback(Se=>{var he;if(!e){v(D(Se)),v(y(null)),l(0);const Ve=h?Object.keys(h.answers).find(tt=>tt.startsWith(Se)):"";if(h&&Ve&&h.answers[Ve].provenanceGraph){const tt=LI.create(),ge=iq({registry:tt,initialState:{}});ge.importObject(Bh(h.answers[Ve].provenanceGraph)),z.current=ge,ce(((he=h.answers[Ve].provenanceGraph)==null?void 0:he.root)||"")}else v(y(null)),f(null),z.current=null}},[ce,e,h,y,D,v]);A.useEffect(()=>{s&&Ee(s)},[Ee,s]);const de=g1((Se,he=!0)=>{if(h&&s&&ne&&(h.answers[ne].endTime-h.answers.audioTest_2.startTime)/1e3<Se){const Ve=Gc(h.sequence);Ee(Ve[Ve.indexOf(s)+1])}else h&&s&&z.current&&z.current.current.children.length>0&&(z.current.graph.backend.nodes[z.current.current.children[0]].createdOn-h.answers.audioTest_2.startTime)/1e3<Se&&ce(z.current.current.children[0]);if(h&&s){const Ve=ne?h.answers[ne].startTime:h.answers.audioTest_2.startTime;S(Se*1e3+Ve)}he&&v(M(Se))}),We=A.useCallback(Se=>{if(Se&&h&&t){const he=new m$t;o==null||o.getAudio(Gc(h.sequence).filter(Ve=>T.tasksToNotRecordAudio===void 0||!T.tasksToNotRecordAudio.includes(Ve)).filter(Ve=>s?Ve===s:!0),t).then(Ve=>{Se&&he.fetchAudio(...Ve).then(tt=>he.concatAudio(tt)).then(tt=>he.export(tt,"audio/mp3")).then(tt=>Se.loadBlob(tt.blob).then(()=>{U(!1)})).catch(tt=>{throw new Error(tt)}),Se.on("timeupdate",de)})}},[T.tasksToNotRecordAudio,h,o,de,s,t]),Fe=A.useMemo(()=>[],[]),Ne=Q2e({container:x.current,plugins:Fe,onMount:We,progressColor:"cornflowerblue",waveColor:"lightgray"}),je=A.useCallback((Se,he)=>{S(Se),Ne&&he&&setTimeout(()=>{Ne.seekTo(he)})},[S,Ne]),ye=A.useCallback(Se=>{w(Se),Ne&&(Se?Ne.play():Ne.pause())},[Ne]);A.useEffect(()=>{de(k,!1),Ne&&Math.abs(Ne.getCurrentTime()-k)>.8&&setTimeout(()=>{Ne.setTime(k)})},[k,de,Ne]);const ae=A.useMemo(()=>{if(!h)return null;const Se=Object.values(h.answers||{}).map(tt=>[tt.startTime,tt.endTime]).flat(),he=gh(Se);return il([Z9.left,c+Z9.left+Z9.right]).domain(ne?[h.answers[ne].startTime,h.answers[ne].endTime]:he).clamp(!0)},[h,ne,c]);A.useEffect(()=>{We(Ne)},[We,h,Ne]),A.useCallback(Se=>{var he;if(Se&&ne&&h&&z.current&&ae){const Ve=h.answers[ne].provenanceGraph.nodes[Se];v(y(z.current.getState((he=h.answers[ne].provenanceGraph)==null?void 0:he.nodes[Se]))),z.current.to(Se);const tt=ae.domain()[1]-ae.domain()[0];je(Ve.createdOn+1,(Ve.createdOn-ae.domain()[0])/tt)}},[je,h,y,v,ne,ae]);const Pe=A.useCallback(Se=>{if(!h)return;const he=se.indexOf(h.participantId);Se?I(`../../${s?"../":""}${se[he+1]}/ui/reviewer-${s||""}`,{relative:"path"}):I(`../../${s?"../":""}${se[he-1]}/ui/reviewer-${s||""}`,{relative:"path"})},[se,I,h,s]);return b.jsx(Tn,{wrap:"nowrap",gap:25,children:b.jsxs(ci,{ref:u,style:{width:"100%"},gap:e?0:25,children:[e?null:b.jsx(dl,{children:b.jsxs(Tn,{children:[b.jsx(Fn,{children:b.jsx(Ptt,{onClick:()=>Pe(!1)})}),b.jsx(nu,{style:{width:"300px"},value:h==null?void 0:h.participantId,onChange:Se=>{v(R(Se)),I(`../../${s?"../":""}${Se}/ui/reviewer-${s||""}`,{relative:"path"})},data:[...zge,...Uge]}),b.jsx(nu,{style:{width:"300px"},clearable:!0,value:s,data:h?[...Gc(h.sequence)]:[],onChange:Se=>I(`${s?"../":""}reviewer-${Se||""}`,{relative:"path"})}),b.jsx(Fn,{children:b.jsx(Ntt,{onClick:()=>Pe(!0)})})]})}),p==="success"&&h&&ae?e?null:b.jsx(NDe,{trialFilter:ne,xScale:ae,setSelectedTask:Ee,participantData:h,width:c,height:200}):e?null:b.jsx(dl,{style:{height:"275px"},children:b.jsx(ws,{})}),ae&&h!==null?b.jsxs(b.Fragment,{children:[b.jsxs(_e,{ref:x,ml:h&&ae?ae(h.answers.audioTest_2.startTime):0,mr:h&&ae?ae(h.answers["post-study-survey_13"].startTime):0,style:{overflow:"visible",width:`${h&&!s?ae(h.answers["post-study-survey_13"].startTime)-ae(h.answers.audioTest_2.startTime):ae.range()[1]-ae.range()[0]}px`},children:[b.jsx(G2e.Provider,{value:Ne,children:b.jsx(nJ,{id:"waveform"})}),B?b.jsx(ws,{}):null]}),e?null:b.jsx(E$t,{startTime:s?ae.domain()[0]:h.answers.audioTest_2.startTime,xScale:ae,transcriptLines:N,currentShownTranscription:a})]}):null,p==="success"&&h&&ae?b.jsx(w$t,{xScale:ae,setSelectedTask:Ee,playTime:E-h.answers.introduction_0.startTime,setPlayTime:je,isPlaying:_,setIsPlaying:ye,currentNode:d,setCurrentNode:ce,participantData:h,width:c,height:50}):null,b.jsxs(Tn,{align:"center",justify:"center",children:[b.jsx(Fn,{variant:"light",size:50,onClick:()=>ye(!_),children:_?b.jsx(wnt,{}):b.jsx(Ent,{})}),$&&m&&s&&t?b.jsx(uA,{tags:$||[],onSelectTags:Se=>{if(o&&m){const he=Bh(m);he[t]||(he[t]={partTags:[],taskTags:{}}),he[t].taskTags[s]=Se,o.saveAllParticipantAndTaskTags(he).then(()=>{g(t,o)})}},selectedTags:m&&m[t]?m[t].taskTags[s]||[]:[]}):null]}),s?b.jsx(ci,{children:h&&Q&&ie==="success"&&W&&!e?b.jsx(EBt,{transcriptList:W,setTranscriptList:G,setCurrentShownTranscription:l,currentShownTranscription:a,participant:h,playTime:E,setTranscriptLines:V}):e?null:b.jsx(ws,{})}):null]})})}const Vge=Object.assign({"../public/ThinkAloud/AddPlot.tsx":jyt,"../public/ThinkAloud/AudioTest.tsx":uvt,"../public/ThinkAloud/Bar.tsx":t2t,"../public/ThinkAloud/BrushPlot.tsx":c$t,"../public/ThinkAloud/Histogram.tsx":l$t,"../public/ThinkAloud/Paintbrush.tsx":o$t,"../public/ThinkAloud/Scatter.tsx":a$t,"../public/ThinkAloud/Violin.tsx":u$t,"../public/ThinkAloud/XAxisBar.tsx":ZCt,"../public/ThinkAloud/YAxis.tsx":s$t,"../public/ThinkAloud/YAxisBar.tsx":e2t,"../public/ThinkAloud/types.ts":d$t,"../public/ThinkAloud/useKdeCalc.tsx":h$t});function ABt({currentConfig:e,provState:t}){const n=rv(),r=_p(),i=`../public/${e.path}`,s=i in Vge?Vge[i].default:null,o=ed(),{updateResponseBlockValidation:a,setIframeAnswers:l}=nc(),u=A.useCallback(({status:c,provenanceGraph:d,answers:f})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:f,provenanceGraph:d})),o(l(f))},[o,a,r,n,l]);return b.jsxs(A.Suspense,{fallback:b.jsx("div",{children:"Loading..."}),children:[s?b.jsx(s,{parameters:e.parameters,setAnswer:u,provenanceState:t}):b.jsx(JR,{path:e.path}),n.toString().startsWith("reviewer-")?b.jsx(Hr.Footer,{p:"md",children:b.jsx(C3e,{mini:!0})}):null]})}function Hge({provState:e}){var I;const t=Zh(),n=Pi(),r=rv(),i=_p()||"Notfound",s=t.components[i],o=uQ(),a=A6(s)&&t.baseComponents?aQ({},(I=t.baseComponents)==null?void 0:I[s.baseComponent],s):s,l=a.instruction||"",{instructionLocation:u}=a,c=t.uiConfig.sidebar&&(u==="sidebar"||u===void 0),[d,f]=A.useState(null),h=ed(),{setIsRecording:p}=nc(),{analysisTrialName:m,analysisProvState:g,analysisParticipantName:y}=Qo(P=>P),{trrackId:v}=wf(),_=md(),[w,E]=A.useState(null);A.useEffect(()=>{i&&m&&v&&(i!==m||v!==y)&&_(`../../${y||v}/reviewer-${m}`,{relative:"path"})},[y,g,m,i,r,_,v]),A.useEffect(()=>{!r||!t||!t.recordStudyAudio||!n.storageEngine||(d&&w&&n.storageEngine.saveAudio(d,w),t.tasksToNotRecordAudio&&t.tasksToNotRecordAudio.includes(i)?(E(null),f(null),h(p(!1))):(navigator.mediaDevices.getUserMedia({audio:!0}).then(k=>{const D=new MediaRecorder(k);D.start(),f(D),h(p(!0))}),E(i)))},[i]),j2e();const{storageEngine:S}=Pi(),x=ed(),{setAlertModal:T}=nc();return A.useEffect(()=>{(S==null?void 0:S.getEngine())!=="firebase"&&x(T({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[T,S,x]),i==="end"?b.jsx(z2e,{}):i==="Notfound"?b.jsx(JR,{email:t.uiConfig.contactEmail}):b.jsxs(b.Fragment,{children:[u==="aboveStimulus"&&b.jsx(fl,{text:l}),b.jsx(u$,{status:o,config:a,location:"aboveStimulus"},`${r}-above-response-block`),b.jsxs(A.Suspense,{fallback:b.jsx("div",{children:"Loading..."}),children:[a.type==="markdown"&&b.jsx(dht,{currentConfig:a}),a.type==="website"&&b.jsx(lht,{currentConfig:a}),a.type==="image"&&b.jsx(cht,{currentConfig:a}),a.type==="react-component"&&b.jsx(ABt,{currentConfig:a,provState:g})]},`${r}-stimulus`),(u==="belowStimulus"||u===void 0&&!c)&&b.jsx(fl,{text:l}),b.jsx(u$,{status:o,config:a,location:"belowStimulus"},`${r}-below-response-block`)]})}function Dq(e){const[t]=SX();return b.jsx(EX,{...e,to:{pathname:e.to,search:t.toString()}})}function IBt(e,t=!1){return typeof e=="number"?qge(e,t):qge(e.length,t).map(r=>r.map(i=>e[i]))}function qge(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function A3e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=A3e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const u=Math.floor(Math.random()*r.length-1)+1;o.add(u)}const a=Array.from(o).sort((u,c)=>u-c);let l=0;for(let u=0;u<r.length;u+=1)u===a[l]&&(s.push(i.components),l+=1),s.push(r[u])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function RBt(e,t){const n=Bh(e);return A3e(n,t,"root")}function I3e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&I3e(s,t,i,o)})}function kBt(e){const t=[];return I3e(e,t,"",0),t}function Wge(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return IBt(i.sort(()=>.5-Math.random()),!0)}function PBt(e){const n=kBt(e.sequence).map(s=>({[s]:Wge(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=RBt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Wge(e,o))})}),i}function R3e(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>R3e(n,`${t}-${r}`))}}function NBt(){Qo(n=>n),nc();const e=Zh();ed();const t=bS();return wX(`/${t}`),Pi(),A.useMemo(()=>{let n=Bh(e.sequence);return n=R3e(n,"root"),n.components.push("end"),n},[e.sequence]),A.useState("participant"),null}function OBt(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function DBt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=Qo(S=>S),i=oQ(),s=ed(),{toggleShowHelpText:o,toggleStudyBrowser:a}=nc(),{storageEngine:l}=Pi(),u=Qo(S=>S.isRecording),c=rv(),d=i.length-1,f=typeof c=="number"?c/d*100:0,[h,p]=A.useState(!1),m=n==null?void 0:n.uiConfig.logoPath,g=n==null?void 0:n.uiConfig.withProgressBar,y=bS(),v=wX(`/${y}`),_=A.useRef(null),[w,E]=A.useState(!1);return A.useEffect(()=>{const S=_.current;S&&E(S.scrollWidth>S.offsetWidth)},[n]),b.jsx(Hr.Header,{p:"md",children:b.jsxs(jc,{mt:-7,align:"center",children:[b.jsx(jc.Col,{span:4,children:b.jsxs(It,{align:"center",children:[b.jsx(Zy,{w:40,src:`${pc}${m}`,alt:"Study Logo"}),b.jsx(Wc,{w:"md"}),b.jsx(Ti,{order:4,children:n==null?void 0:n.studyMetadata.title}),u?b.jsxs(Tn,{gap:20,wrap:"nowrap",children:[b.jsx(nt,{color:"red",children:"Recording audio"}),b.jsx(eAe,{})]}):null]})}),b.jsx(jc.Col,{span:4,children:g&&b.jsx(Xb,{radius:"md",size:"lg",value:f})}),b.jsx(jc.Col,{span:4,children:b.jsxs(Tn,{wrap:"nowrap",justify:"right",children:[!t&&b.jsx(on,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:b.jsx(Sm,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&b.jsx(yn,{variant:"outline",onClick:()=>s(o()),children:"Help"}),b.jsxs(dn,{shadow:"md",width:200,withinPortal:!0,opened:h,onChange:p,children:[b.jsx(dn.Target,{children:b.jsx(Fn,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:b.jsx(_Se,{})})}),b.jsxs(dn.Dropdown,{children:[e&&b.jsx(dn.Item,{leftSection:b.jsx(pnt,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),b.jsx(dn.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:b.jsx(lnt,{size:14}),children:"Contact"}),e&&b.jsx(dn.Item,{leftSection:b.jsx(ISe,{size:14}),onClick:()=>OBt(l,n,r,v),children:"Next Participant"})]})]})]})})]})})}function MBt(){var l;const e=(l=Zh())==null?void 0:l.uiConfig.sidebar,t=Zh(),n=_p(),r=t.components[n],i=A.useMemo(()=>{var u;return r?A6(r)&&t.baseComponents?aQ({},(u=t.baseComponents)==null?void 0:u[r.baseComponent],r):r:null},[r,t.baseComponents]),s=uQ(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?b.jsxs(Hr.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&b.jsx(Hr.Section,{bg:"gray.3",p:"md",children:b.jsxs(nt,{c:"gray.9",children:[b.jsx(nt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),b.jsx(fl,{text:o})]})}),b.jsx(Hr.Section,{p:"md",children:b.jsx(u$,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):b.jsx(Hr.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:b.jsx(u$,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function $Bt(){const{showHelpText:e,config:t}=Qo(l=>l),n=ed(),{toggleShowHelpText:r}=nc(),[i,s]=A.useState(""),[o,a]=A.useState(!0);return A.useEffect(()=>{async function l(){const u=await lQ(t.uiConfig.helpTextPath);u!==void 0&&s(u),a(!1)}l()},[t.uiConfig.helpTextPath]),b.jsx(Ss,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?b.jsx(fl,{text:i}):b.jsx(JR,{path:t.uiConfig.helpTextPath})})}function LBt(){const{alertModal:e}=Qo(o=>o),{setAlertModal:t}=nc(),n=ed(),[r,i]=A.useState(e.show),s=A.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return A.useEffect(()=>i(e.show),[e.show]),b.jsx(Ss,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:b.jsxs(aS,{color:"red",radius:"xs",title:"Alert",icon:b.jsx(Rtt,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[b.jsx(nt,{my:"md",children:e.message}),b.jsx(Tn,{w:"100%",justify:"end",children:b.jsx(yn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function FBt(){const e=A.useRef([]),t=Zh(),n=t.uiConfig.windowEventDebounceTime??100,r=Qo(f=>f.showStudyBrowser);A.useEffect(()=>{const f=Dd(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=Dd(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=Dd(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=Dd(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=Dd(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=Dd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=Dd(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),_=Dd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=Dd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",f,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",_),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",f,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",_),document.removeEventListener("visibilitychange",w)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=Pi(),o=bS(),[a,l]=A.useState(!1),[u,c]=A.useState(!1);A.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);l(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const d=A.useMemo(()=>a&&r,[a,r]);return b.jsx(U2e.Provider,{value:e,children:b.jsxs(Hr,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!d,mobile:!d}},children:[b.jsx(MBt,{}),b.jsx(NBt,{}),b.jsx(DBt,{studyNavigatorEnabled:a,dataCollectionEnabled:u}),b.jsx($Bt,{}),b.jsx(LBt,{}),b.jsx(Hr.Main,{children:b.jsx(ltt,{})})]})})}const e7={left:5,top:0,right:5,bottom:0};function jBt(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`;return`${t<10?`0${t}`:`${t}`}h ${s}m ${i}s`}function BBt({participant:e,maxDuration:t}){const n=md(),r=mg(),i=A.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const u=Object.values(e.answers).sort((c,d)=>c.startTime-d.startTime);return new Date(u[u.length-1].endTime-(u[1]?u[1].startTime:0)).getTime()},[e]),[s,{width:o}]=of(),a=A.useMemo(()=>!e.answers||Object.entries(e.answers).length===0?0:lI(Object.values(e.answers).map(c=>c.provenanceGraph?Object.keys(c.provenanceGraph.nodes).length:0)),[e]),l=A.useMemo(()=>{if(!e)return null;const u=Object.values(e.answers||{}).map(f=>[f.startTime,f.endTime]).flat(),c=gh(u);return il([e7.left,o+e7.left+e7.right]).domain(c).clamp(!0)},[e,o]);return b.jsx(dl,{children:b.jsxs(ci,{gap:25,ref:s,style:{width:"75%"},children:[b.jsxs(Tn,{justify:"space-between",children:[b.jsx(Qy,{size:"25px",component:xX,target:"_blank",to:`${r.pathname}/${e.participantId}/ui`,onClick:()=>n(`${e.participantId}/reviewer-${Gc(e.sequence)[0]}`),children:e.participantId}),b.jsx(nt,{size:"xl",children:`${a}`}),b.jsx(nt,{size:"xl",children:`${jBt(i)}`})]}),l?b.jsx(NDe,{xScale:l,setSelectedTask:()=>null,participantData:e,width:o,height:250}):null]},e.participantId)})}function zBt(e){return e?e.getAllParticipantsData():null}const UBt=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],VBt=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65a4333efc75f965e7fc0cb5","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","60743e408fd768b1a939ed4c","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function HBt(){const{storageEngine:e}=Pi(),{value:t,status:n}=Qd(zBt,[e]),r=A.useMemo(()=>{if(!(n!=="success"||!t))return Yc(t==null?void 0:t.map(i=>{if(!i.answers||Object.entries(i.answers).length===0)return 0;const s=Object.values(i.answers).sort((o,a)=>o.startTime-a.startTime);return new Date(s[s.length-1].endTime-s[0].startTime).getTime()}))},[t,n]);return n==="success"&&t?b.jsx(ci,{gap:50,style:{width:"100%"},children:t==null?void 0:t.filter(i=>VBt.includes(i.participantId)||UBt.includes(i.participantId)).map(i=>b.jsx(BBt,{maxDuration:r,participant:i},i.participantId))}):b.jsx(ws,{})}function qBt({setProvState:e}){return b.jsx("div",{children:b.jsx(Hr.Main,{p:"sm",children:b.jsx(C3e,{mini:!1})})})}var WBt={VITE_BASE_PATH:"/ThinkAloud/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LeSJBYqAAAAADYgJYYVaLhVACl5Jy1sidBF7BsC",VITE_REVISIT_MODE:"private",BASE_URL:"/ThinkAloud/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function GBt(e){const t=await(await fetch(`${pc}${e}`)).text();return eyt(t)}async function J4(e,t){const n=t.configsList.find(r=>RSe(r)===e);if(n){const r=t.configs[n];return await GBt(`${r.path}`)}return null}async function YBt(e){const t={},n=e.configsList.filter(i=>WBt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>J4(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function KBt({studyId:e,config:t}){const{sequence:n}=Qo(i=>i),r=A.useMemo(()=>{if(e&&t&&n){const i=[];return i.push({path:"/",element:b.jsx(Dq,{to:"0",replace:!0})}),i.push({path:"/:index",element:t.errors.length>0?b.jsxs(b.Fragment,{children:[b.jsx(Ti,{order:2,mb:8,children:"Error loading config"}),b.jsx(eV,{issues:t.errors,type:"error"})]}):b.jsx(Hge,{})}),i.push({path:"/analysis/:trrackId/:index/",element:b.jsx(Hge,{})}),i.push({path:"/analysis/:trrackId/ui/:index?/",element:b.jsx(Hr,{header:{height:70},navbar:{collapsed:{desktop:!0,mobile:!0},width:0,breakpoint:"xs"},aside:{collapsed:{desktop:!0,mobile:!0},width:0,breakpoint:"xs"},children:b.jsx(qBt,{setProvState:()=>null})})}),i.push({path:"/analysis",element:b.jsx(HBt,{})}),i.push({path:"/end",element:b.jsx(z2e,{})}),[{element:b.jsx(FBt,{}),children:i}]}return[]},[t,n,e]);return gSe(r)}function XBt({globalConfig:e}){const t=bS(),[n,r]=A.useState(null);e.configsList.includes(t),A.useEffect(()=>{J4(t,e).then(u=>{r(u)})},[e,t]);const[i,s]=A.useState(null),{storageEngine:o}=Pi(),[a]=SX();return A.useEffect(()=>{async function u(){if(!o||!n||!t)return;await o.initializeStudyDb(t,n),await o.getSequenceArray()||await o.setSequenceArray(await PBt(n));const d=n.uiConfig.urlParticipantIdParam&&a.get(n.uiConfig.urlParticipantIdParam)||void 0,f=Object.fromEntries(a.entries()),h=await fetch("https://api.ipify.org?format=json").catch(v=>""),p=h instanceof Response?await h.json():{ip:""},m={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:p.ip},g=await o.initializeParticipantSession(t,f,n,m,d),y=await iht(t,n,g.sequence,m,g.answers);s(y)}u()},[o,n,t,a]),i?b.jsx(HCe.Provider,{value:i,children:b.jsx(Ict,{store:i.store,children:b.jsx(KBt,{studyId:t,config:n})})}):b.jsx(uu,{visible:!0})}function gA({studyIds:e}){const t=md(),{studyId:n}=wf(),r=mg(),i=e.map(f=>({value:f,label:f})),{storageEngine:s}=Pi(),{user:o,logout:a}=Ap(),[l,u]=A.useState(!1),c=r.pathname.includes("analysis"),d=[{name:"Studies",leftIcon:b.jsx(tnt,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:b.jsx(jtt,{}),href:"/analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:b.jsx(TSe,{}),href:"/settings",needAdmin:!0}];return b.jsx(Hr.Header,{p:"md",children:b.jsxs(jc,{mt:-7,align:"center",children:[b.jsx(jc.Col,{span:6,children:b.jsxs(It,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[b.jsx(Zy,{w:40,src:`${pc}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),b.jsx(Wc,{w:"md"}),b.jsx(Ti,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),b.jsx(jc.Col,{span:6,children:b.jsxs(It,{justify:"flex-end",direction:"row",children:[c&&b.jsx(nu,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:f=>t(`/analysis/stats/${f}`),mr:16}),b.jsx(IK,{opened:!1,onClick:()=>u(!0),style:{visibility:l?"hidden":void 0}}),b.jsx(yp,{opened:l,onClose:()=>u(!1),position:"right",withCloseButton:!1,children:b.jsxs(It,{direction:"column",mt:20,children:[b.jsx(nt,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),d.map(f=>f.needAdmin?o.isAdmin?b.jsx(yn,{leftSection:f.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(f.href),u(!1)},children:f.name},`menu-item-${f.name}`):null:b.jsx(yn,{leftSection:f.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(f.href),u(!1)},children:f.name},`menu-item-${f.name}`)),b.jsxs(_e,{ml:10,children:[b.jsx(AF,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?b.jsx(nt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),u(!1)},children:"Logout"}):b.jsx(nt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),u(!1)},children:"Login"}):null]})]})})]})})]})})}function k3e({allParticipants:e,studyId:t}){const[n,{close:r,open:i}]=M2(!1),[s,{close:o,open:a}]=M2(!1),[l,{open:u,close:c}]=M2(!1);return b.jsxs(b.Fragment,{children:[b.jsxs(Tn,{children:[b.jsxs($n,{opened:n,children:[b.jsx($n.Target,{children:b.jsx(yn,{variant:"light",disabled:e.length===0,onClick:()=>{tJ(JSON.stringify(e,null,2),`${t}_all.json`)},onMouseEnter:i,onMouseLeave:r,px:4,children:b.jsx(Qtt,{})})}),b.jsx($n.Dropdown,{children:b.jsx(nt,{children:"Download all participants data as JSON"})})]}),b.jsxs($n,{opened:s,children:[b.jsx($n.Target,{children:b.jsx(yn,{variant:"light",disabled:e.length===0,onClick:u,onMouseEnter:a,onMouseLeave:o,px:4,children:b.jsx(CSe,{})})}),b.jsx($n.Dropdown,{children:b.jsx(nt,{children:"Download all participants data as a tidy CSV"})})]})]}),l&&b.jsx(syt,{opened:l,close:c,filename:`${t}_all_tidy.csv`,data:e,studyId:t})]})}function QBt({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return b.jsxs(or.Td,{children:[t.toFixed(1)," ","s"]})}function JBt(e){const{metaData:t}=e;return b.jsx(or.Td,{children:b.jsx(aX,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:b.jsxs(ci,{gap:"xs",children:[b.jsxs(_e,{children:["IP:"," ",t.ip]}),b.jsxs(_e,{children:["Language:"," ",t.language]}),b.jsxs(_e,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),b.jsxs(_e,{children:["User Agent:"," ",t.userAgent]})]})})})}function ZBt({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=Pi(),{studyId:s}=wf(),{user:o}=Ap(),a=async g=>{i&&s&&(o.isAdmin?(await i.rejectParticipant(s,g),await r()):console.warn("You are not authorized to perform this action."))},[l,u]=A.useState([]),[c,d]=A.useState(!1),f=()=>jU({title:"Confirm rejecting participants",children:b.jsxs(nt,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",b.jsx(nt,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{d(!0);const g=l.map(async y=>await a(y));await Promise.all(g),u([]),await r(),d(!1)}});function h(g){g==="all"?l.length===[...e,...t].length?u([]):u([...e,...t].map(y=>y.participantId)):l.includes(g)?u(l.filter(y=>y!==g)):u([...l,g])}sQ(n.sequence);const p=[b.jsx(or.Th,{children:b.jsx(It,{justify:"center",children:b.jsx(_f,{mb:-4,checked:l.length===[...e,...t].length,onChange:()=>h("all")})})},"action"),b.jsx(or.Th,{children:"ID"},"ID"),b.jsx(or.Th,{children:"Status"},"status"),b.jsx(or.Th,{children:"Meta"},"meta"),b.jsx(or.Th,{children:"Total Duration"},"total-duration")],m=[...e,...t].map(g=>b.jsxs(or.Tr,{children:[b.jsx(or.Td,{children:b.jsx(It,{justify:"center",children:b.jsx(_f,{mb:-4,checked:l.includes(g.participantId),onChange:()=>h(g.participantId)})})}),b.jsx(or.Td,{style:{whiteSpace:"nowrap"},children:g.participantId}),b.jsx(or.Td,{children:b.jsxs(It,{direction:"row",align:"center",children:[g.rejected?b.jsx(on,{label:"Rejected",children:b.jsx(i6,{size:16,color:"red",style:{marginBottom:-3}})}):g.completed?b.jsx(on,{label:"Completed",children:b.jsx(bSe,{size:16,color:"teal",style:{marginBottom:-3}})}):b.jsx(on,{label:"In Progress",children:b.jsx(xSe,{size:16,color:"orange",style:{marginBottom:-3}})}),!g.completed&&b.jsxs(nt,{size:"sm",mb:-1,ml:4,children:[(Object.entries(g.answers).filter(([y,v])=>v.endTime!==void 0).length/(Gc(g.sequence).length-1)*100).toFixed(2),"%"]})]})}),g.metadata?b.jsx(JBt,{metaData:g.metadata}):b.jsx(or.Td,{children:"N/A"}),b.jsx(QBt,{cellData:{startTime:Math.min(...Object.values(g.answers).map(y=>y.startTime)),endTime:Math.max(...Object.values(g.answers).map(y=>y.endTime)),answer:{},windowEvents:[]}},`cell-${g.participantId}-total-duration`)]},g.participantId));return[...e,...t].length>0?b.jsxs(b.Fragment,{children:[b.jsx(uu,{visible:c,overlayProps:{blur:2}}),b.jsxs(It,{justify:"space-between",mb:8,p:8,children:[b.jsx(Tn,{children:b.jsx(nu,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(g=>({value:g.participantId,label:g.participantId})),searchable:!0,value:null,leftSection:b.jsx(SSe,{size:14}),onChange:g=>g&&h(g)})}),b.jsxs(Tn,{children:[b.jsx(k3e,{allParticipants:[...e,...t],studyId:s||""}),b.jsx(yn,{disabled:l.length===0||!o.isAdmin,onClick:f,color:"red",children:"Reject Participants"})]})]}),b.jsx(It,{direction:"column",style:{width:"100%",overflow:"auto"},children:b.jsxs(or,{striped:!0,withTableBorder:!0,children:[b.jsx(or.Thead,{children:b.jsx(or.Tr,{children:p})}),b.jsx(or.Tbody,{children:m})]})})]}):b.jsx(It,{justify:"center",align:"center",style:{height:"100%"},children:b.jsx(nt,{children:"No data available"})})}const Y_=14;function P3e({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return b.jsxs(It,{ml:4,gap:4,children:[b.jsx(on,{label:"Completed",children:b.jsx(Sm,{variant:"light",color:"green",leftSection:b.jsx(bSe,{width:Y_,height:Y_,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),b.jsx(on,{label:"In Progress",children:b.jsx(Sm,{variant:"light",color:"orange",leftSection:b.jsx(xSe,{width:Y_,height:Y_,style:{paddingTop:1}}),pb:1,children:t})}),b.jsx(on,{label:"Rejected",children:b.jsx(Sm,{variant:"light",color:"red",leftSection:b.jsx(i6,{width:Y_,height:Y_,style:{paddingTop:1}}),pb:1,children:n})})]})}function e9t({studyId:e,refresh:t}){const[n,r]=A.useState(!1),[i,s]=A.useState(!1),[o,a]=A.useState(!1),[l,u]=A.useState(""),[c,d]=A.useState([]),[f,h]=A.useState(""),[p,m]=A.useState(!1),[g,y]=A.useState(!1),{storageEngine:v}=Pi(),_=v,w=A.useCallback(async()=>{y(!0);const D=await _.getSnapshots(e);d(D),y(!1)},[_,e]);A.useEffect(()=>{w()},[w]);const E=async()=>{m(!0),await _.createSnapshot(e,!1),w(),m(!1),await t()},S=async()=>{m(!0),h(""),r(!1),await _.createSnapshot(e,!0),w(),m(!1),await t()},x=async D=>{m(!0),await _.restoreSnapshot(e,D),w(),m(!1),await t()},T=async()=>{m(!0),h(""),s(!1),await _.removeSnapshotOrLive(l,!0),w(),m(!1),await t()},I=async()=>{m(!0),h(""),a(!1),await _.removeSnapshotOrLive(e,!0),w(),m(!1),await t()},P=()=>jU({title:"Create a Snapshot",children:b.jsx(nt,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>E()}),k=D=>jU({title:"Restore Snapshot",children:b.jsx(nt,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>x(D)});return b.jsxs(b.Fragment,{children:[b.jsx(uu,{visible:p}),b.jsxs(It,{justify:"space-between",align:"center",children:[b.jsxs(_e,{style:{width:"70%"},children:[b.jsx(Ti,{order:5,children:"Create a Snapshot"}),b.jsxs(nt,{children:["This will create a snapshot of the live"," ",b.jsx(nt,{span:!0,fw:700,children:e})," ","database. It will"," ",b.jsx(nt,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),b.jsx(on,{label:"Create a snapshot",children:b.jsx(yn,{onClick:P,children:"Snapshot"})})]}),b.jsx(Wc,{h:"lg"}),b.jsxs(It,{justify:"space-between",align:"center",children:[b.jsxs(_e,{style:{width:"70%"},children:[b.jsx(Ti,{order:5,children:"Archive Data"}),b.jsxs(nt,{children:["This will create a snapshot of the live"," ",b.jsx(nt,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),b.jsx(on,{label:"Snapshot and Delete Data",children:b.jsx(yn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),b.jsx(Wc,{h:"lg"}),b.jsxs(It,{justify:"space-between",align:"center",children:[b.jsxs(_e,{style:{width:"70%"},children:[b.jsx(Ti,{order:5,children:"Delete Data"}),b.jsxs(nt,{children:["This will delete the live"," ",b.jsx(nt,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),b.jsx(on,{label:"Delete Data",children:b.jsx(yn,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),b.jsx(Wc,{h:"xl"}),b.jsxs(It,{direction:"column",children:[b.jsx(It,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:b.jsx(Ti,{order:5,children:"Snapshots"})}),b.jsxs(_e,{style:{position:"relative"},children:[b.jsx(uu,{visible:g}),c.length>0?c.map(D=>b.jsxs(It,{justify:"space-between",mb:"xs",children:[b.jsx(nt,{children:D}),b.jsxs(It,{direction:"row",gap:"xs",children:[b.jsx(on,{label:"Restore Snapshot",children:b.jsx(Fn,{color:"blue",variant:"subtle",onClick:()=>{k(D)},children:b.jsx(hnt,{})})}),b.jsx(on,{label:"Delete Snapshot",children:b.jsx(Fn,{color:"red",variant:"subtle",onClick:()=>{s(!0),u(D)},children:b.jsx(ASe,{})})})]})]},D)):b.jsx(nt,{children:"No snapshots."})]})]}),b.jsxs(Ss,{opened:n,onClose:()=>{r(!1),h("")},title:b.jsx(nt,{children:"Archive Data"}),children:[b.jsx(nt,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),b.jsx(lf,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:D=>h(D.target.value)}),b.jsxs(It,{mt:"sm",justify:"right",children:[b.jsx(yn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),b.jsx(yn,{color:"red",onClick:S,disabled:f!==e,children:"Archive"})]})]}),b.jsxs(Ss,{opened:i,onClose:()=>{s(!1),h("")},title:b.jsx(nt,{children:"Delete Snapshot"}),children:[b.jsxs(nt,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",b.jsx(nt,{span:!0,fw:700,children:"irreversible"}),"."]}),b.jsx(lf,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:D=>h(D.target.value)}),b.jsxs(It,{mt:"sm",justify:"right",children:[b.jsx(yn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),b.jsx(yn,{color:"red",onClick:T,disabled:f!==e,children:"Delete"})]})]}),b.jsxs(Ss,{opened:o,onClose:()=>{a(!1),h("")},title:b.jsx(nt,{children:"Delete Live Data"}),children:[b.jsxs(nt,{mb:"sm",children:["This will permanently delete the live"," ",b.jsx(nt,{span:!0,fw:700,children:e})," ","data. This action is"," ",b.jsx(nt,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),b.jsx(lf,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:D=>h(D.target.value)}),b.jsxs(It,{mt:"sm",justify:"right",children:[b.jsx(yn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),b.jsx(yn,{color:"red",onClick:I,disabled:f!==e,children:"Delete"})]})]})]})}function t9t({studyId:e}){const{storageEngine:t}=Pi(),[n,r]=A.useState(!1),[i,s]=A.useState(!1),[o,a]=A.useState(!1),[l,u]=A.useState(!1);A.useEffect(()=>{(async()=>{if(t){const f=await t.getModes(e);s(f.dataCollectionEnabled),a(f.studyNavigatorEnabled),u(f.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(d,f)=>{t&&(await t.setMode(e,d,f),d==="dataCollectionEnabled"?s(f):d==="studyNavigatorEnabled"?a(f):d==="analyticsInterfacePubliclyAccessible"&&u(f))};return n&&b.jsxs(ci,{children:[b.jsx(z0,{label:"Data Collection Enabled",checked:i,onChange:d=>c("dataCollectionEnabled",d.currentTarget.checked)}),b.jsx(z0,{label:"Study Navigator Enabled",checked:o,onChange:d=>c("studyNavigatorEnabled",d.currentTarget.checked)}),b.jsx(z0,{label:"Analytics Interface Publicly Accessible",checked:l,onChange:d=>c("analyticsInterfacePubliclyAccessible",d.currentTarget.checked)})]})}function n9t({studyId:e,refresh:t}){const{storageEngine:n}=Pi();return b.jsx(Mf,{children:b.jsxs(Ll,{multiple:!0,variant:"contained",children:[b.jsxs(Ll.Item,{value:"ReVISit Modes",children:[b.jsx(Ll.Control,{children:b.jsx(Ti,{order:5,children:"ReVISit Modes"})}),b.jsx(Ll.Panel,{children:b.jsx(t9t,{studyId:e})})]},"modes"),b.jsxs(Ll.Item,{value:"Data Management",children:[b.jsx(Ll.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:b.jsx(Ti,{order:5,children:"Data Management"})}),b.jsx(Ll.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&b.jsx(e9t,{studyId:e,refresh:t})})]},"dataManagement")]})})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function S0(e,t){return typeof e=="function"?e(t):e}function ac(e,t){return n=>{t.setState(r=>({...r,[e]:S0(n,r[e])}))}}function Z4(e){return e instanceof Function}function r9t(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function N3e(e,t){const n=[],r=i=>{i.forEach(s=>{n.push(s);const o=t(s);o!=null&&o.length&&r(o)})};return r(e),n}function Ht(e,t,n){let r=[],i;return s=>{let o;n.key&&n.debug&&(o=Date.now());const a=e(s);if(!(a.length!==r.length||a.some((c,d)=>r[d]!==c)))return i;r=a;let u;if(n.key&&n.debug&&(u=Date.now()),i=t(...a),n==null||n.onChange==null||n.onChange(i),n.key&&n.debug&&n!=null&&n.debug()){const c=Math.round((Date.now()-o)*100)/100,d=Math.round((Date.now()-u)*100)/100,f=d/16,h=(p,m)=>{for(p=String(p);p.length<m;)p=" "+p;return p};console.info(`%c ${h(d,5)} /${h(c,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,n==null?void 0:n.key)}return i}}function qt(e,t,n,r){return{debug:()=>{var i;return(i=e==null?void 0:e.debugAll)!=null?i:e[t]},key:!1,onChange:r}}function i9t(e,t,n,r){const i=()=>{var o;return(o=s.getValue())!=null?o:e.options.renderFallbackValue},s={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(r),renderValue:i,getContext:Ht(()=>[e,n,t,s],(o,a,l,u)=>({table:o,column:a,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),qt(e.options,"debugCells"))};return e._features.forEach(o=>{o.createCell==null||o.createCell(s,n,t,e)},{}),s}function s9t(e,t,n,r){var i,s;const a={...e._getDefaultColumnDef(),...t},l=a.accessorKey;let u=(i=(s=a.id)!=null?s:l?l.replace(".","_"):void 0)!=null?i:typeof a.header=="string"?a.header:void 0,c;if(a.accessorFn?c=a.accessorFn:l&&(l.includes(".")?c=f=>{let h=f;for(const m of l.split(".")){var p;h=(p=h)==null?void 0:p[m]}return h}:c=f=>f[a.accessorKey]),!u)throw new Error;let d={id:`${String(u)}`,accessorFn:c,parent:r,depth:n,columnDef:a,columns:[],getFlatColumns:Ht(()=>[!0],()=>{var f;return[d,...(f=d.columns)==null?void 0:f.flatMap(h=>h.getFlatColumns())]},qt(e.options,"debugColumns")),getLeafColumns:Ht(()=>[e._getOrderColumnsFn()],f=>{var h;if((h=d.columns)!=null&&h.length){let p=d.columns.flatMap(m=>m.getLeafColumns());return f(p)}return[d]},qt(e.options,"debugColumns"))};for(const f of e._features)f.createColumn==null||f.createColumn(d,e);return d}const ya="debugHeaders";function Gge(e,t,n){var r;let s={id:(r=n.id)!=null?r:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],a=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(a),o.push(l)};return a(s),o},getContext:()=>({table:e,header:s,column:t})};return e._features.forEach(o=>{o.createHeader==null||o.createHeader(s,e)}),s}const o9t={createTable:e=>{e.getHeaderGroups=Ht(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>{var s,o;const a=(s=r==null?void 0:r.map(d=>n.find(f=>f.id===d)).filter(Boolean))!=null?s:[],l=(o=i==null?void 0:i.map(d=>n.find(f=>f.id===d)).filter(Boolean))!=null?o:[],u=n.filter(d=>!(r!=null&&r.includes(d.id))&&!(i!=null&&i.includes(d.id)));return sO(t,[...a,...u,...l],e)},qt(e.options,ya)),e.getCenterHeaderGroups=Ht(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>(n=n.filter(s=>!(r!=null&&r.includes(s.id))&&!(i!=null&&i.includes(s.id))),sO(t,n,e,"center")),qt(e.options,ya)),e.getLeftHeaderGroups=Ht(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,r)=>{var i;const s=(i=r==null?void 0:r.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?i:[];return sO(t,s,e,"left")},qt(e.options,ya)),e.getRightHeaderGroups=Ht(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,r)=>{var i;const s=(i=r==null?void 0:r.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?i:[];return sO(t,s,e,"right")},qt(e.options,ya)),e.getFooterGroups=Ht(()=>[e.getHeaderGroups()],t=>[...t].reverse(),qt(e.options,ya)),e.getLeftFooterGroups=Ht(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),qt(e.options,ya)),e.getCenterFooterGroups=Ht(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),qt(e.options,ya)),e.getRightFooterGroups=Ht(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),qt(e.options,ya)),e.getFlatHeaders=Ht(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),qt(e.options,ya)),e.getLeftFlatHeaders=Ht(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),qt(e.options,ya)),e.getCenterFlatHeaders=Ht(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),qt(e.options,ya)),e.getRightFlatHeaders=Ht(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),qt(e.options,ya)),e.getCenterLeafHeaders=Ht(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),qt(e.options,ya)),e.getLeftLeafHeaders=Ht(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),qt(e.options,ya)),e.getRightLeafHeaders=Ht(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),qt(e.options,ya)),e.getLeafHeaders=Ht(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,r)=>{var i,s,o,a,l,u;return[...(i=(s=t[0])==null?void 0:s.headers)!=null?i:[],...(o=(a=n[0])==null?void 0:a.headers)!=null?o:[],...(l=(u=r[0])==null?void 0:u.headers)!=null?l:[]].map(c=>c.getLeafHeaders()).flat()},qt(e.options,ya))}};function sO(e,t,n,r){var i,s;let o=0;const a=function(f,h){h===void 0&&(h=1),o=Math.max(o,h),f.filter(p=>p.getIsVisible()).forEach(p=>{var m;(m=p.columns)!=null&&m.length&&a(p.columns,h+1)},0)};a(e);let l=[];const u=(f,h)=>{const p={depth:h,id:[r,`${h}`].filter(Boolean).join("_"),headers:[]},m=[];f.forEach(g=>{const y=[...m].reverse()[0],v=g.column.depth===p.depth;let _,w=!1;if(v&&g.column.parent?_=g.column.parent:(_=g.column,w=!0),y&&(y==null?void 0:y.column)===_)y.subHeaders.push(g);else{const E=Gge(n,_,{id:[r,h,_.id,g==null?void 0:g.id].filter(Boolean).join("_"),isPlaceholder:w,placeholderId:w?`${m.filter(S=>S.column===_).length}`:void 0,depth:h,index:m.length});E.subHeaders.push(g),m.push(E)}p.headers.push(g),g.headerGroup=p}),l.push(p),h>0&&u(m,h-1)},c=t.map((f,h)=>Gge(n,f,{depth:o,index:h}));u(c,o-1),l.reverse();const d=f=>f.filter(p=>p.column.getIsVisible()).map(p=>{let m=0,g=0,y=[0];p.subHeaders&&p.subHeaders.length?(y=[],d(p.subHeaders).forEach(_=>{let{colSpan:w,rowSpan:E}=_;m+=w,y.push(E)})):m=1;const v=Math.min(...y);return g=g+v,p.colSpan=m,p.rowSpan=g,{colSpan:m,rowSpan:g}});return d((i=(s=l[0])==null?void 0:s.headers)!=null?i:[]),l}const zk=(e,t,n,r,i,s,o)=>{let a={id:t,index:r,original:n,depth:i,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(a._valuesCache.hasOwnProperty(l))return a._valuesCache[l];const u=e.getColumn(l);if(u!=null&&u.accessorFn)return a._valuesCache[l]=u.accessorFn(a.original,r),a._valuesCache[l]},getUniqueValues:l=>{if(a._uniqueValuesCache.hasOwnProperty(l))return a._uniqueValuesCache[l];const u=e.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(a._uniqueValuesCache[l]=u.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[l]):(a._uniqueValuesCache[l]=[a.getValue(l)],a._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=a.getValue(l))!=null?u:e.options.renderFallbackValue},subRows:s??[],getLeafRows:()=>N3e(a.subRows,l=>l.subRows),getParentRow:()=>a.parentId?e.getRow(a.parentId,!0):void 0,getParentRows:()=>{let l=[],u=a;for(;;){const c=u.getParentRow();if(!c)break;l.push(c),u=c}return l.reverse()},getAllCells:Ht(()=>[e.getAllLeafColumns()],l=>l.map(u=>i9t(e,a,u,u.id)),qt(e.options,"debugRows")),_getAllCellsByColumnId:Ht(()=>[a.getAllCells()],l=>l.reduce((u,c)=>(u[c.column.id]=c,u),{}),qt(e.options,"debugRows"))};for(let l=0;l<e._features.length;l++){const u=e._features[l];u==null||u.createRow==null||u.createRow(a,e)}return a},a9t={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},O3e=(e,t,n)=>{var r;const i=n.toLowerCase();return!!(!((r=e.getValue(t))==null||(r=r.toString())==null||(r=r.toLowerCase())==null)&&r.includes(i))};O3e.autoRemove=e=>pf(e);const D3e=(e,t,n)=>{var r;return!!(!((r=e.getValue(t))==null||(r=r.toString())==null)&&r.includes(n))};D3e.autoRemove=e=>pf(e);const M3e=(e,t,n)=>{var r;return((r=e.getValue(t))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};M3e.autoRemove=e=>pf(e);const $3e=(e,t,n)=>{var r;return(r=e.getValue(t))==null?void 0:r.includes(n)};$3e.autoRemove=e=>pf(e)||!(e!=null&&e.length);const L3e=(e,t,n)=>!n.some(r=>{var i;return!((i=e.getValue(t))!=null&&i.includes(r))});L3e.autoRemove=e=>pf(e)||!(e!=null&&e.length);const F3e=(e,t,n)=>n.some(r=>{var i;return(i=e.getValue(t))==null?void 0:i.includes(r)});F3e.autoRemove=e=>pf(e)||!(e!=null&&e.length);const j3e=(e,t,n)=>e.getValue(t)===n;j3e.autoRemove=e=>pf(e);const B3e=(e,t,n)=>e.getValue(t)==n;B3e.autoRemove=e=>pf(e);const Dte=(e,t,n)=>{let[r,i]=n;const s=e.getValue(t);return s>=r&&s<=i};Dte.resolveFilterValue=e=>{let[t,n]=e,r=typeof t!="number"?parseFloat(t):t,i=typeof n!="number"?parseFloat(n):n,s=t===null||Number.isNaN(r)?-1/0:r,o=n===null||Number.isNaN(i)?1/0:i;if(s>o){const a=s;s=o,o=a}return[s,o]};Dte.autoRemove=e=>pf(e)||pf(e[0])&&pf(e[1]);const hh={includesString:O3e,includesStringSensitive:D3e,equalsString:M3e,arrIncludes:$3e,arrIncludesAll:L3e,arrIncludesSome:F3e,equals:j3e,weakEquals:B3e,inNumberRange:Dte};function pf(e){return e==null||e===""}const l9t={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:ac("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);return typeof r=="string"?hh.includesString:typeof r=="number"?hh.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?hh.equals:Array.isArray(r)?hh.arrIncludes:hh.weakEquals},e.getFilterFn=()=>{var n,r;return Z4(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(r=t.options.filterFns)==null?void 0:r[e.columnDef.filterFn])!=null?n:hh[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,r,i;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((r=t.options.enableColumnFilters)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(r=>r.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,r;return(n=(r=t.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(r=>{const i=e.getFilterFn(),s=r==null?void 0:r.find(c=>c.id===e.id),o=S0(n,s?s.value:void 0);if(Yge(i,o,e)){var a;return(a=r==null?void 0:r.filter(c=>c.id!==e.id))!=null?a:[]}const l={id:e.id,value:o};if(s){var u;return(u=r==null?void 0:r.map(c=>c.id===e.id?l:c))!=null?u:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),r=i=>{var s;return(s=S0(t,i))==null?void 0:s.filter(o=>{const a=n.find(l=>l.id===o.id);if(a){const l=a.getFilterFn();if(Yge(l,o.value,a))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(r)},e.resetColumnFilters=t=>{var n,r;e.setColumnFilters(t?[]:(n=(r=e.initialState)==null?void 0:r.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function Yge(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const u9t=(e,t,n)=>n.reduce((r,i)=>{const s=i.getValue(e);return r+(typeof s=="number"?s:0)},0),c9t=(e,t,n)=>{let r;return n.forEach(i=>{const s=i.getValue(e);s!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}),r},d9t=(e,t,n)=>{let r;return n.forEach(i=>{const s=i.getValue(e);s!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}),r},f9t=(e,t,n)=>{let r,i;return n.forEach(s=>{const o=s.getValue(e);o!=null&&(r===void 0?o>=o&&(r=i=o):(r>o&&(r=o),i<o&&(i=o)))}),[r,i]},h9t=(e,t)=>{let n=0,r=0;if(t.forEach(i=>{let s=i.getValue(e);s!=null&&(s=+s)>=s&&(++n,r+=s)}),n)return r/n},p9t=(e,t)=>{if(!t.length)return;const n=t.map(s=>s.getValue(e));if(!r9t(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),i=n.sort((s,o)=>s-o);return n.length%2!==0?i[r]:(i[r-1]+i[r])/2},m9t=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),g9t=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,y9t=(e,t)=>t.length,jD={sum:u9t,min:c9t,max:d9t,extent:f9t,mean:h9t,median:p9t,unique:m9t,uniqueCount:g9t,count:y9t},v9t={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:ac("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(r=>r!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,r;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((r=t.options.enableGrouping)!=null?r:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);if(typeof r=="number")return jD.sum;if(Object.prototype.toString.call(r)==="[object Date]")return jD.extent},e.getAggregationFn=()=>{var n,r;if(!e)throw new Error;return Z4(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(r=t.options.aggregationFns)==null?void 0:r[e.columnDef.aggregationFn])!=null?n:jD[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,r;e.setGrouping(t?[]:(n=(r=e.initialState)==null?void 0:r.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const r=t.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(e._groupingValuesCache[n]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,r)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var i;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((i=n.subRows)!=null&&i.length)}}};function b9t(e,t,n){if(!(t!=null&&t.length)||!n)return e;const r=e.filter(s=>!t.includes(s.id));return n==="remove"?r:[...t.map(s=>e.find(o=>o.id===s)).filter(Boolean),...r]}const _9t={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:ac("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=Ht(n=>[yA(t,n)],n=>n.findIndex(r=>r.id===e.id),qt(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var r;return((r=yA(t,n)[0])==null?void 0:r.id)===e.id},e.getIsLastColumn=n=>{var r;const i=yA(t,n);return((r=i[i.length-1])==null?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=Ht(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,r)=>i=>{let s=[];if(!(t!=null&&t.length))s=i;else{const o=[...t],a=[...i];for(;a.length&&o.length;){const l=o.shift(),u=a.findIndex(c=>c.id===l);u>-1&&s.push(a.splice(u,1)[0])}s=[...s,...a]}return b9t(s,n,r)},qt(e.options,"debugTable"))}},t7=()=>({left:[],right:[]}),w9t={getInitialState:e=>({columnPinning:t7(),...e}),getDefaultOptions:e=>({onColumnPinningChange:ac("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const r=e.getLeafColumns().map(i=>i.id).filter(Boolean);t.setColumnPinning(i=>{var s,o;if(n==="right"){var a,l;return{left:((a=i==null?void 0:i.left)!=null?a:[]).filter(d=>!(r!=null&&r.includes(d))),right:[...((l=i==null?void 0:i.right)!=null?l:[]).filter(d=>!(r!=null&&r.includes(d))),...r]}}if(n==="left"){var u,c;return{left:[...((u=i==null?void 0:i.left)!=null?u:[]).filter(d=>!(r!=null&&r.includes(d))),...r],right:((c=i==null?void 0:i.right)!=null?c:[]).filter(d=>!(r!=null&&r.includes(d)))}}return{left:((s=i==null?void 0:i.left)!=null?s:[]).filter(d=>!(r!=null&&r.includes(d))),right:((o=i==null?void 0:i.right)!=null?o:[]).filter(d=>!(r!=null&&r.includes(d)))}})},e.getCanPin=()=>e.getLeafColumns().some(r=>{var i,s,o;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((s=(o=t.options.enableColumnPinning)!=null?o:t.options.enablePinning)!=null?s:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(a=>a.id),{left:r,right:i}=t.getState().columnPinning,s=n.some(a=>r==null?void 0:r.includes(a)),o=n.some(a=>i==null?void 0:i.includes(a));return s?"left":o?"right":!1},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();return i?(n=(r=t.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=Ht(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,r,i)=>{const s=[...r??[],...i??[]];return n.filter(o=>!s.includes(o.column.id))},qt(t.options,"debugRows")),e.getLeftVisibleCells=Ht(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,r)=>(r??[]).map(s=>n.find(o=>o.column.id===s)).filter(Boolean).map(s=>({...s,position:"left"})),qt(t.options,"debugRows")),e.getRightVisibleCells=Ht(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,r)=>(r??[]).map(s=>n.find(o=>o.column.id===s)).filter(Boolean).map(s=>({...s,position:"right"})),qt(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,r;return e.setColumnPinning(t?t7():(n=(r=e.initialState)==null?void 0:r.columnPinning)!=null?n:t7())},e.getIsSomeColumnsPinned=t=>{var n;const r=e.getState().columnPinning;if(!t){var i,s;return!!((i=r.left)!=null&&i.length||(s=r.right)!=null&&s.length)}return!!((n=r[t])!=null&&n.length)},e.getLeftLeafColumns=Ht(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),qt(e.options,"debugColumns")),e.getRightLeafColumns=Ht(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),qt(e.options,"debugColumns")),e.getCenterLeafColumns=Ht(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r)=>{const i=[...n??[],...r??[]];return t.filter(s=>!i.includes(s.id))},qt(e.options,"debugColumns"))}},oO={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},n7=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),E9t={getDefaultColumnDef:()=>oO,getInitialState:e=>({columnSizing:{},columnSizingInfo:n7(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ac("columnSizing",e),onColumnSizingInfoChange:ac("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,r,i;const s=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:oO.minSize,(r=s??e.columnDef.size)!=null?r:oO.size),(i=e.columnDef.maxSize)!=null?i:oO.maxSize)},e.getStart=Ht(n=>[n,yA(t,n),t.getState().columnSizing],(n,r)=>r.slice(0,e.getIndex(n)).reduce((i,s)=>i+s.getSize(),0),qt(t.options,"debugColumns")),e.getAfter=Ht(n=>[n,yA(t,n),t.getState().columnSizing],(n,r)=>r.slice(e.getIndex(n)+1).reduce((i,s)=>i+s.getSize(),0),qt(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:r,...i}=n;return i})},e.getCanResize=()=>{var n,r;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((r=t.options.enableColumnResizing)!=null?r:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var s;n+=(s=i.column.getSize())!=null?s:0}};return r(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const r=t.getColumn(e.column.id),i=r==null?void 0:r.getCanResize();return s=>{if(!r||!i||(s.persist==null||s.persist(),r7(s)&&s.touches&&s.touches.length>1))return;const o=e.getSize(),a=e?e.getLeafHeaders().map(y=>[y.column.id,y.column.getSize()]):[[r.id,r.getSize()]],l=r7(s)?Math.round(s.touches[0].clientX):s.clientX,u={},c=(y,v)=>{typeof v=="number"&&(t.setColumnSizingInfo(_=>{var w,E;const S=t.options.columnResizeDirection==="rtl"?-1:1,x=(v-((w=_==null?void 0:_.startOffset)!=null?w:0))*S,T=Math.max(x/((E=_==null?void 0:_.startSize)!=null?E:0),-.999999);return _.columnSizingStart.forEach(I=>{let[P,k]=I;u[P]=Math.round(Math.max(k+k*T,0)*100)/100}),{..._,deltaOffset:x,deltaPercentage:T}}),(t.options.columnResizeMode==="onChange"||y==="end")&&t.setColumnSizing(_=>({..._,...u})))},d=y=>c("move",y),f=y=>{c("end",y),t.setColumnSizingInfo(v=>({...v,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},h=n||typeof document<"u"?document:null,p={moveHandler:y=>d(y.clientX),upHandler:y=>{h==null||h.removeEventListener("mousemove",p.moveHandler),h==null||h.removeEventListener("mouseup",p.upHandler),f(y.clientX)}},m={moveHandler:y=>(y.cancelable&&(y.preventDefault(),y.stopPropagation()),d(y.touches[0].clientX),!1),upHandler:y=>{var v;h==null||h.removeEventListener("touchmove",m.moveHandler),h==null||h.removeEventListener("touchend",m.upHandler),y.cancelable&&(y.preventDefault(),y.stopPropagation()),f((v=y.touches[0])==null?void 0:v.clientX)}},g=x9t()?{passive:!1}:!1;r7(s)?(h==null||h.addEventListener("touchmove",m.moveHandler,g),h==null||h.addEventListener("touchend",m.upHandler,g)):(h==null||h.addEventListener("mousemove",p.moveHandler,g),h==null||h.addEventListener("mouseup",p.upHandler,g)),t.setColumnSizingInfo(y=>({...y,startOffset:l,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?n7():(n=e.initialState.columnSizingInfo)!=null?n:n7())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0}}};let aO=null;function x9t(){if(typeof aO=="boolean")return aO;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return aO=e,aO}function r7(e){return e.type==="touchstart"}const S9t={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:ac("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(r=>({...r,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,r;const i=e.columns;return(n=i.length?i.some(s=>s.getIsVisible()):(r=t.getState().columnVisibility)==null?void 0:r[e.id])!=null?n:!0},e.getCanHide=()=>{var n,r;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((r=t.options.enableHiding)!=null?r:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=Ht(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),qt(t.options,"debugRows")),e.getVisibleCells=Ht(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,r,i)=>[...n,...r,...i],qt(t.options,"debugRows"))},createTable:e=>{const t=(n,r)=>Ht(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(s=>s.getIsVisible==null?void 0:s.getIsVisible()),qt(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var r;e.setColumnVisibility(n?{}:(r=e.initialState.columnVisibility)!=null?r:{})},e.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((i,s)=>({...i,[s.id]:n||!(s.getCanHide!=null&&s.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;e.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function yA(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const T9t={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},C9t={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:ac("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const r=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,r,i,s;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=t.options.enableGlobalFilter)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&((s=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?s:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>hh.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:r}=e.options;return Z4(r)?r:r==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[r])!=null?t:hh[r]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},A9t={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:ac("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetExpanded)!=null?r:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=r=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(r),e.toggleAllRowsExpanded=r=>{r??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=r=>{var i,s;e.setExpanded(r?{}:(i=(s=e.initialState)==null?void 0:s.expanded)!=null?i:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const r=e.getState().expanded;return r===!0||Object.values(r).some(Boolean)},e.getIsAllRowsExpanded=()=>{const r=e.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||e.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},e.getExpandedDepth=()=>{let r=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(s=>{const o=s.split(".");r=Math.max(r,o.length)}),r},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(r=>{var i;const s=r===!0?!0:!!(r!=null&&r[e.id]);let o={};if(r===!0?Object.keys(t.getRowModel().rowsById).forEach(a=>{o[a]=!0}):o=r,n=(i=n)!=null?i:!s,!s&&n)return{...o,[e.id]:!0};if(s&&!n){const{[e.id]:a,...l}=o;return l}return r})},e.getIsExpanded=()=>{var n;const r=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:r===!0||r!=null&&r[e.id])},e.getCanExpand=()=>{var n,r,i;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((r=t.options.enableExpanding)!=null?r:!0)&&!!((i=e.subRows)!=null&&i.length)},e.getIsAllParentsExpanded=()=>{let n=!0,r=e;for(;n&&r.parentId;)r=t.getRow(r.parentId,!0),n=r.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},Mq=0,$q=10,i7=()=>({pageIndex:Mq,pageSize:$q}),I9t={getInitialState:e=>({...e,pagination:{...i7(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:ac("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetPageIndex)!=null?r:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=r=>{const i=s=>S0(r,s);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(i)},e.resetPagination=r=>{var i;e.setPagination(r?i7():(i=e.initialState.pagination)!=null?i:i7())},e.setPageIndex=r=>{e.setPagination(i=>{let s=S0(r,i.pageIndex);const o=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return s=Math.max(0,Math.min(s,o)),{...i,pageIndex:s}})},e.resetPageIndex=r=>{var i,s;e.setPageIndex(r?Mq:(i=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageIndex)!=null?i:Mq)},e.resetPageSize=r=>{var i,s;e.setPageSize(r?$q:(i=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageSize)!=null?i:$q)},e.setPageSize=r=>{e.setPagination(i=>{const s=Math.max(1,S0(r,i.pageSize)),o=i.pageSize*i.pageIndex,a=Math.floor(o/s);return{...i,pageIndex:a,pageSize:s}})},e.setPageCount=r=>e.setPagination(i=>{var s;let o=S0(r,(s=e.options.pageCount)!=null?s:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...i,pageCount:o}}),e.getPageOptions=Ht(()=>[e.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((s,o)=>o)),i},qt(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:r}=e.getState().pagination,i=e.getPageCount();return i===-1?!0:i===0?!1:r<i-1},e.previousPage=()=>e.setPageIndex(r=>r-1),e.nextPage=()=>e.setPageIndex(r=>r+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var r;return(r=e.options.pageCount)!=null?r:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var r;return(r=e.options.rowCount)!=null?r:e.getPrePaginationRowModel().rows.length}}},s7=()=>({top:[],bottom:[]}),R9t={getInitialState:e=>({rowPinning:s7(),...e}),getDefaultOptions:e=>({onRowPinningChange:ac("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,r,i)=>{const s=r?e.getLeafRows().map(l=>{let{id:u}=l;return u}):[],o=i?e.getParentRows().map(l=>{let{id:u}=l;return u}):[],a=new Set([...o,e.id,...s]);t.setRowPinning(l=>{var u,c;if(n==="bottom"){var d,f;return{top:((d=l==null?void 0:l.top)!=null?d:[]).filter(m=>!(a!=null&&a.has(m))),bottom:[...((f=l==null?void 0:l.bottom)!=null?f:[]).filter(m=>!(a!=null&&a.has(m))),...Array.from(a)]}}if(n==="top"){var h,p;return{top:[...((h=l==null?void 0:l.top)!=null?h:[]).filter(m=>!(a!=null&&a.has(m))),...Array.from(a)],bottom:((p=l==null?void 0:l.bottom)!=null?p:[]).filter(m=>!(a!=null&&a.has(m)))}}return{top:((u=l==null?void 0:l.top)!=null?u:[]).filter(m=>!(a!=null&&a.has(m))),bottom:((c=l==null?void 0:l.bottom)!=null?c:[]).filter(m=>!(a!=null&&a.has(m)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:i}=t.options;return typeof r=="function"?r(e):(n=r??i)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:r,bottom:i}=t.getState().rowPinning,s=n.some(a=>r==null?void 0:r.includes(a)),o=n.some(a=>i==null?void 0:i.includes(a));return s?"top":o?"bottom":!1},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();if(!i)return-1;const s=(n=t._getPinnedRows(i))==null?void 0:n.map(o=>{let{id:a}=o;return a});return(r=s==null?void 0:s.indexOf(e.id))!=null?r:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,r;return e.setRowPinning(t?s7():(n=(r=e.initialState)==null?void 0:r.rowPinning)!=null?n:s7())},e.getIsSomeRowsPinned=t=>{var n;const r=e.getState().rowPinning;if(!t){var i,s;return!!((i=r.top)!=null&&i.length||(s=r.bottom)!=null&&s.length)}return!!((n=r[t])!=null&&n.length)},e._getPinnedRows=Ht(t=>[e.getRowModel().rows,e.getState().rowPinning[t],t],(t,n,r)=>{var i;return((i=e.options.keepPinnedRows)==null||i?(n??[]).map(o=>{const a=e.getRow(o,!0);return a.getIsAllParentsExpanded()?a:null}):(n??[]).map(o=>t.find(a=>a.id===o))).filter(Boolean).map(o=>({...o,position:r}))},qt(e.options,"debugRows")),e.getTopRows=()=>e._getPinnedRows("top"),e.getBottomRows=()=>e._getPinnedRows("bottom"),e.getCenterRows=Ht(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,r)=>{const i=new Set([...n??[],...r??[]]);return t.filter(s=>!i.has(s.id))},qt(e.options,"debugRows"))}},k9t={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:ac("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const r={...n},i=e.getPreGroupedRowModel().flatRows;return t?i.forEach(s=>{s.getCanSelect()&&(r[s.id]=!0)}):i.forEach(s=>{delete r[s.id]}),r})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const r=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),i={...n};return e.getRowModel().rows.forEach(s=>{Lq(i,s.id,r,!0,e)}),i}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=Ht(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?o7(e,n):{rows:[],flatRows:[],rowsById:{}},qt(e.options,"debugTable")),e.getFilteredSelectedRowModel=Ht(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?o7(e,n):{rows:[],flatRows:[],rowsById:{}},qt(e.options,"debugTable")),e.getGroupedSelectedRowModel=Ht(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?o7(e,n):{rows:[],flatRows:[],rowsById:{}},qt(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let r=!!(t.length&&Object.keys(n).length);return r&&t.some(i=>i.getCanSelect()&&!n[i.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:n}=e.getState();let r=!!t.length;return r&&t.some(i=>!n[i.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,r)=>{const i=e.getIsSelected();t.setRowSelection(s=>{var o;if(n=typeof n<"u"?n:!i,e.getCanSelect()&&i===n)return s;const a={...s};return Lq(a,e.id,n,(o=r==null?void 0:r.selectChildren)!=null?o:!0,t),a})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return Mte(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return Fq(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return Fq(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return r=>{var i;n&&e.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},Lq=(e,t,n,r,i)=>{var s;const o=i.getRow(t,!0);n?(o.getCanMultiSelect()||Object.keys(e).forEach(a=>delete e[a]),o.getCanSelect()&&(e[t]=!0)):delete e[t],r&&(s=o.subRows)!=null&&s.length&&o.getCanSelectSubRows()&&o.subRows.forEach(a=>Lq(e,a.id,n,r,i))};function o7(e,t){const n=e.getState().rowSelection,r=[],i={},s=function(o,a){return o.map(l=>{var u;const c=Mte(l,n);if(c&&(r.push(l),i[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:s(l.subRows)}),c)return l}).filter(Boolean)};return{rows:s(t.rows),flatRows:r,rowsById:i}}function Mte(e,t){var n;return(n=t[e.id])!=null?n:!1}function Fq(e,t,n){var r;if(!((r=e.subRows)!=null&&r.length))return!1;let i=!0,s=!1;return e.subRows.forEach(o=>{if(!(s&&!i)&&(o.getCanSelect()&&(Mte(o,t)?s=!0:i=!1),o.subRows&&o.subRows.length)){const a=Fq(o,t);a==="all"?s=!0:(a==="some"&&(s=!0),i=!1)}}),i?"all":s?"some":!1}const jq=/([0-9]+)/gm,P9t=(e,t,n)=>z3e(ky(e.getValue(n)).toLowerCase(),ky(t.getValue(n)).toLowerCase()),N9t=(e,t,n)=>z3e(ky(e.getValue(n)),ky(t.getValue(n))),O9t=(e,t,n)=>$te(ky(e.getValue(n)).toLowerCase(),ky(t.getValue(n)).toLowerCase()),D9t=(e,t,n)=>$te(ky(e.getValue(n)),ky(t.getValue(n))),M9t=(e,t,n)=>{const r=e.getValue(n),i=t.getValue(n);return r>i?1:r<i?-1:0},$9t=(e,t,n)=>$te(e.getValue(n),t.getValue(n));function $te(e,t){return e===t?0:e>t?1:-1}function ky(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function z3e(e,t){const n=e.split(jq).filter(Boolean),r=t.split(jq).filter(Boolean);for(;n.length&&r.length;){const i=n.shift(),s=r.shift(),o=parseInt(i,10),a=parseInt(s,10),l=[o,a].sort();if(isNaN(l[0])){if(i>s)return 1;if(s>i)return-1;continue}if(isNaN(l[1]))return isNaN(o)?-1:1;if(o>a)return 1;if(a>o)return-1}return n.length-r.length}const y1={alphanumeric:P9t,alphanumericCaseSensitive:N9t,text:O9t,textCaseSensitive:D9t,datetime:M9t,basic:$9t},L9t={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:ac("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of n){const s=i==null?void 0:i.getValue(e.id);if(Object.prototype.toString.call(s)==="[object Date]")return y1.datetime;if(typeof s=="string"&&(r=!0,s.split(jq).length>1))return y1.alphanumeric}return r?y1.text:y1.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,r;if(!e)throw new Error;return Z4(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(r=t.options.sortingFns)==null?void 0:r[e.columnDef.sortingFn])!=null?n:y1[e.columnDef.sortingFn]},e.toggleSorting=(n,r)=>{const i=e.getNextSortingOrder(),s=typeof n<"u"&&n!==null;t.setSorting(o=>{const a=o==null?void 0:o.find(h=>h.id===e.id),l=o==null?void 0:o.findIndex(h=>h.id===e.id);let u=[],c,d=s?n:i==="desc";if(o!=null&&o.length&&e.getCanMultiSort()&&r?a?c="toggle":c="add":o!=null&&o.length&&l!==o.length-1?c="replace":a?c="toggle":c="replace",c==="toggle"&&(s||i||(c="remove")),c==="add"){var f;u=[...o,{id:e.id,desc:d}],u.splice(0,u.length-((f=t.options.maxMultiSortColCount)!=null?f:Number.MAX_SAFE_INTEGER))}else c==="toggle"?u=o.map(h=>h.id===e.id?{...h,desc:d}:h):c==="remove"?u=o.filter(h=>h.id!==e.id):u=[{id:e.id,desc:d}];return u})},e.getFirstSortDir=()=>{var n,r;return((n=(r=e.columnDef.sortDescFirst)!=null?r:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var r,i;const s=e.getFirstSortDir(),o=e.getIsSorted();return o?o!==s&&((r=t.options.enableSortingRemoval)==null||r)&&(!(n&&(i=t.options.enableMultiRemove)!=null)||i)?!1:o==="desc"?"asc":"desc":s},e.getCanSort=()=>{var n,r;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((r=t.options.enableSorting)!=null?r:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,r;return(n=(r=e.columnDef.enableMultiSort)!=null?r:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const r=(n=t.getState().sorting)==null?void 0:n.find(i=>i.id===e.id);return r?r.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,r;return(n=(r=t.getState().sorting)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return r=>{n&&(r.persist==null||r.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(r):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,r;e.setSorting(t?[]:(n=(r=e.initialState)==null?void 0:r.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},F9t=[o9t,S9t,_9t,w9t,a9t,l9t,T9t,C9t,L9t,v9t,A9t,I9t,R9t,k9t,E9t];function j9t(e){var t,n;const r=[...F9t,...(t=e._features)!=null?t:[]];let i={_features:r};const s=i._features.reduce((f,h)=>Object.assign(f,h.getDefaultOptions==null?void 0:h.getDefaultOptions(i)),{}),o=f=>i.options.mergeOptions?i.options.mergeOptions(s,f):{...s,...f};let l={...{},...(n=e.initialState)!=null?n:{}};i._features.forEach(f=>{var h;l=(h=f.getInitialState==null?void 0:f.getInitialState(l))!=null?h:l});const u=[];let c=!1;const d={_features:r,options:{...s,...e},initialState:l,_queue:f=>{u.push(f),c||(c=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();c=!1}).catch(h=>setTimeout(()=>{throw h})))},reset:()=>{i.setState(i.initialState)},setOptions:f=>{const h=S0(f,i.options);i.options=o(h)},getState:()=>i.options.state,setState:f=>{i.options.onStateChange==null||i.options.onStateChange(f)},_getRowId:(f,h,p)=>{var m;return(m=i.options.getRowId==null?void 0:i.options.getRowId(f,h,p))!=null?m:`${p?[p.id,h].join("."):h}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(f,h)=>{let p=(h?i.getPrePaginationRowModel():i.getRowModel()).rowsById[f];if(!p&&(p=i.getCoreRowModel().rowsById[f],!p))throw new Error;return p},_getDefaultColumnDef:Ht(()=>[i.options.defaultColumn],f=>{var h;return f=(h=f)!=null?h:{},{header:p=>{const m=p.header.column.columnDef;return m.accessorKey?m.accessorKey:m.accessorFn?m.id:null},cell:p=>{var m,g;return(m=(g=p.renderValue())==null||g.toString==null?void 0:g.toString())!=null?m:null},...i._features.reduce((p,m)=>Object.assign(p,m.getDefaultColumnDef==null?void 0:m.getDefaultColumnDef()),{}),...f}},qt(e,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:Ht(()=>[i._getColumnDefs()],f=>{const h=function(p,m,g){return g===void 0&&(g=0),p.map(y=>{const v=s9t(i,y,g,m),_=y;return v.columns=_.columns?h(_.columns,v,g+1):[],v})};return h(f)},qt(e,"debugColumns")),getAllFlatColumns:Ht(()=>[i.getAllColumns()],f=>f.flatMap(h=>h.getFlatColumns()),qt(e,"debugColumns")),_getAllFlatColumnsById:Ht(()=>[i.getAllFlatColumns()],f=>f.reduce((h,p)=>(h[p.id]=p,h),{}),qt(e,"debugColumns")),getAllLeafColumns:Ht(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(f,h)=>{let p=f.flatMap(m=>m.getLeafColumns());return h(p)},qt(e,"debugColumns")),getColumn:f=>i._getAllFlatColumnsById()[f]};Object.assign(i,d);for(let f=0;f<i._features.length;f++){const h=i._features[f];h==null||h.createTable==null||h.createTable(i)}return i}function B9t(){return e=>Ht(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(i,s,o){s===void 0&&(s=0);const a=[];for(let u=0;u<i.length;u++){const c=zk(e,e._getRowId(i[u],u,o),i[u],u,s,void 0,o==null?void 0:o.id);if(n.flatRows.push(c),n.rowsById[c.id]=c,a.push(c),e.options.getSubRows){var l;c.originalSubRows=e.options.getSubRows(i[u],u),(l=c.originalSubRows)!=null&&l.length&&(c.subRows=r(c.originalSubRows,s+1,c))}}return a};return n.rows=r(t),n},qt(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function z9t(){return e=>Ht(()=>[e.getState().expanded,e.getPreExpandedRowModel(),e.options.paginateExpandedRows],(t,n,r)=>!n.rows.length||t!==!0&&!Object.keys(t??{}).length||!r?n:U3e(n),qt(e.options,"debugTable"))}function U3e(e){const t=[],n=r=>{var i;t.push(r),(i=r.subRows)!=null&&i.length&&r.getIsExpanded()&&r.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function U9t(){return(e,t)=>Ht(()=>{var n;return[(n=e.getColumn(t))==null?void 0:n.getFacetedRowModel()]},n=>{var r;if(!n)return;const i=(r=n.flatRows[0])==null?void 0:r.getUniqueValues(t);if(typeof i>"u")return;let s=[i,i];for(let o=0;o<n.flatRows.length;o++){const a=n.flatRows[o].getUniqueValues(t);for(let l=0;l<a.length;l++){const u=a[l];u<s[0]?s[0]=u:u>s[1]&&(s[1]=u)}}return s},qt(e.options,"debugTable"))}function V3e(e,t,n){return n.options.filterFromLeafRows?V9t(e,t,n):H9t(e,t,n)}function V9t(e,t,n){var r;const i=[],s={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,a=function(l,u){u===void 0&&(u=0);const c=[];for(let f=0;f<l.length;f++){var d;let h=l[f];const p=zk(n,h.id,h.original,h.index,h.depth,void 0,h.parentId);if(p.columnFilters=h.columnFilters,(d=h.subRows)!=null&&d.length&&u<o){if(p.subRows=a(h.subRows,u+1),h=p,t(h)&&!p.subRows.length){c.push(h),s[h.id]=h,i.push(h);continue}if(t(h)||p.subRows.length){c.push(h),s[h.id]=h,i.push(h);continue}}else h=p,t(h)&&(c.push(h),s[h.id]=h,i.push(h))}return c};return{rows:a(e),flatRows:i,rowsById:s}}function H9t(e,t,n){var r;const i=[],s={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,a=function(l,u){u===void 0&&(u=0);const c=[];for(let f=0;f<l.length;f++){let h=l[f];if(t(h)){var d;if((d=h.subRows)!=null&&d.length&&u<o){const m=zk(n,h.id,h.original,h.index,h.depth,void 0,h.parentId);m.subRows=a(h.subRows,u+1),h=m}c.push(h),i.push(h),s[h.id]=h}}return c};return{rows:a(e),flatRows:i,rowsById:s}}function q9t(){return(e,t)=>Ht(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter,e.getFilteredRowModel()],(n,r,i)=>{if(!n.rows.length||!(r!=null&&r.length)&&!i)return n;const s=[...r.map(a=>a.id).filter(a=>a!==t),i?"__global__":void 0].filter(Boolean),o=a=>{for(let l=0;l<s.length;l++)if(a.columnFilters[s[l]]===!1)return!1;return!0};return V3e(n.rows,o,e)},qt(e.options,"debugTable"))}function W9t(){return(e,t)=>Ht(()=>{var n;return[(n=e.getColumn(t))==null?void 0:n.getFacetedRowModel()]},n=>{if(!n)return new Map;let r=new Map;for(let s=0;s<n.flatRows.length;s++){const o=n.flatRows[s].getUniqueValues(t);for(let a=0;a<o.length;a++){const l=o[a];if(r.has(l)){var i;r.set(l,((i=r.get(l))!=null?i:0)+1)}else r.set(l,1)}}return r},qt(e.options,"debugTable"))}function G9t(){return e=>Ht(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,r)=>{if(!t.rows.length||!(n!=null&&n.length)&&!r){for(let f=0;f<t.flatRows.length;f++)t.flatRows[f].columnFilters={},t.flatRows[f].columnFiltersMeta={};return t}const i=[],s=[];(n??[]).forEach(f=>{var h;const p=e.getColumn(f.id);if(!p)return;const m=p.getFilterFn();m&&i.push({id:f.id,filterFn:m,resolvedValue:(h=m.resolveFilterValue==null?void 0:m.resolveFilterValue(f.value))!=null?h:f.value})});const o=(n??[]).map(f=>f.id),a=e.getGlobalFilterFn(),l=e.getAllLeafColumns().filter(f=>f.getCanGlobalFilter());r&&a&&l.length&&(o.push("__global__"),l.forEach(f=>{var h;s.push({id:f.id,filterFn:a,resolvedValue:(h=a.resolveFilterValue==null?void 0:a.resolveFilterValue(r))!=null?h:r})}));let u,c;for(let f=0;f<t.flatRows.length;f++){const h=t.flatRows[f];if(h.columnFilters={},i.length)for(let p=0;p<i.length;p++){u=i[p];const m=u.id;h.columnFilters[m]=u.filterFn(h,m,u.resolvedValue,g=>{h.columnFiltersMeta[m]=g})}if(s.length){for(let p=0;p<s.length;p++){c=s[p];const m=c.id;if(c.filterFn(h,m,c.resolvedValue,g=>{h.columnFiltersMeta[m]=g})){h.columnFilters.__global__=!0;break}}h.columnFilters.__global__!==!0&&(h.columnFilters.__global__=!1)}}const d=f=>{for(let h=0;h<o.length;h++)if(f.columnFilters[o[h]]===!1)return!1;return!0};return V3e(t.rows,d,e)},qt(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function Y9t(){return e=>Ht(()=>[e.getState().grouping,e.getPreGroupedRowModel()],(t,n)=>{if(!n.rows.length||!t.length)return n;const r=t.filter(l=>e.getColumn(l)),i=[],s={},o=function(l,u,c){if(u===void 0&&(u=0),u>=r.length)return l.map(p=>(p.depth=u,i.push(p),s[p.id]=p,p.subRows&&(p.subRows=o(p.subRows,u+1,p.id)),p));const d=r[u],f=K9t(l,d);return Array.from(f.entries()).map((p,m)=>{let[g,y]=p,v=`${d}:${g}`;v=c?`${c}>${v}`:v;const _=o(y,u+1,v),w=u?N3e(y,S=>S.subRows):y,E=zk(e,v,w[0].original,m,u,void 0,c);return Object.assign(E,{groupingColumnId:d,groupingValue:g,subRows:_,leafRows:w,getValue:S=>{if(r.includes(S)){if(E._valuesCache.hasOwnProperty(S))return E._valuesCache[S];if(y[0]){var x;E._valuesCache[S]=(x=y[0].getValue(S))!=null?x:void 0}return E._valuesCache[S]}if(E._groupingValuesCache.hasOwnProperty(S))return E._groupingValuesCache[S];const T=e.getColumn(S),I=T==null?void 0:T.getAggregationFn();if(I)return E._groupingValuesCache[S]=I(S,w,y),E._groupingValuesCache[S]}}),_.forEach(S=>{i.push(S),s[S.id]=S}),E})},a=o(n.rows,0);return a.forEach(l=>{i.push(l),s[l.id]=l}),{rows:a,flatRows:i,rowsById:s}},qt(e.options,"debugTable","getGroupedRowModel",()=>{e._queue(()=>{e._autoResetExpanded(),e._autoResetPageIndex()})}))}function K9t(e,t){const n=new Map;return e.reduce((r,i)=>{const s=`${i.getGroupingValue(t)}`,o=r.get(s);return o?o.push(i):r.set(s,[i]),r},n)}function X9t(e){return t=>Ht(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,r)=>{if(!r.rows.length)return r;const{pageSize:i,pageIndex:s}=n;let{rows:o,flatRows:a,rowsById:l}=r;const u=i*s,c=u+i;o=o.slice(u,c);let d;t.options.paginateExpandedRows?d={rows:o,flatRows:a,rowsById:l}:d=U3e({rows:o,flatRows:a,rowsById:l}),d.flatRows=[];const f=h=>{d.flatRows.push(h),h.subRows.length&&h.subRows.forEach(f)};return d.rows.forEach(f),d},qt(t.options,"debugTable"))}function Q9t(){return e=>Ht(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const r=e.getState().sorting,i=[],s=r.filter(l=>{var u;return(u=e.getColumn(l.id))==null?void 0:u.getCanSort()}),o={};s.forEach(l=>{const u=e.getColumn(l.id);u&&(o[l.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const a=l=>{const u=l.map(c=>({...c}));return u.sort((c,d)=>{for(let h=0;h<s.length;h+=1){var f;const p=s[h],m=o[p.id],g=m.sortUndefined,y=(f=p==null?void 0:p.desc)!=null?f:!1;let v=0;if(g){const _=c.getValue(p.id),w=d.getValue(p.id),E=_===void 0,S=w===void 0;if(E||S){if(g==="first")return E?-1:1;if(g==="last")return E?1:-1;v=E&&S?0:E?g:-g}}if(v===0&&(v=m.sortingFn(c,d,p.id)),v!==0)return y&&(v*=-1),m.invertSorting&&(v*=-1),v}return c.index-d.index}),u.forEach(c=>{var d;i.push(c),(d=c.subRows)!=null&&d.length&&(c.subRows=a(c.subRows))}),u};return{rows:a(n.rows),flatRows:i,rowsById:n.rowsById}},qt(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function J9t(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=A.useState(()=>({current:j9t(t)})),[r,i]=A.useState(()=>n.current.initialState);return n.current.setOptions(s=>({...s,...e,state:{...r,...e.state},onStateChange:o=>{i(o),e.onStateChange==null||e.onStateChange(o)}})),n.current}/**
   * match-sorter-utils
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */const H3e={:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"AE",:"A",:"A",:"A",:"C",:"C",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"I",:"I",:"I",:"I",:"I",:"I",:"D",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"U",:"U",:"U",:"U",:"Y",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"ae",:"a",:"a",:"a",:"c",:"c",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"i",:"i",:"i",:"i",:"i",:"i",:"d",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"u",:"u",:"u",:"u",:"y",:"y",:"A",:"a",:"A",:"a",:"A",:"a",:"C",:"c",:"C",:"c",:"C",:"c",:"C",:"c",C:"C",c:"c",:"D",:"d",:"D",:"d",:"E",:"e",:"E",:"e",:"E",:"e",:"E",:"e",:"E",:"e",:"G",:"G",:"g",:"g",:"G",:"g",:"G",:"g",:"G",:"g",:"H",:"h",:"H",:"h",:"H",:"h",:"I",:"i",:"I",:"i",:"I",:"i",:"I",:"i",:"I",:"i",:"IJ",:"ij",:"J",:"j",:"K",:"k",:"K",:"k",K:"K",k:"k",:"L",:"l",:"L",:"l",:"L",:"l",:"L",:"l",:"l",:"l",:"M",:"m",M:"M",m:"m",:"N",:"n",:"N",:"n",:"N",:"n",:"n",N:"N",n:"n",:"O",:"o",:"O",:"o",:"O",:"o",:"OE",:"oe",P:"P",p:"p",:"R",:"r",:"R",:"r",:"R",:"r",R:"R",r:"r",:"R",:"r",:"S",:"s",:"S",:"s",:"S",:"S",:"s",:"s",:"S",:"s",:"T",:"t",:"t",:"T",:"T",:"t",:"T",:"t",T:"T",t:"t",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",V:"V",v:"v",:"W",:"w",:"W",:"w",X:"X",x:"x",:"Y",:"y",:"Y",Y:"Y",y:"y",:"Z",:"z",:"Z",:"z",:"Z",:"z",:"s",:"f",:"O",:"o",:"U",:"u",:"A",:"a",:"I",:"i",:"O",:"o",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"A",:"a",:"AE",:"ae",:"O",:"o",:"TH",:"th",:"P",:"p",:"S",:"s",X:"X",x:"x",:"",:"",:"",:"",A:"A",a:"a",E:"E",e:"e",I:"I",i:"i",:"N",:"n",:"O",:"o",:"O",:"o",:"U",:"u",:"W",:"w",:"Y",:"y",:"A",:"a",:"E",:"e",:"I",:"i",:"O",:"o",:"R",:"r",:"U",:"u",B:"B",b:"b",:"C",:"c",:"E",:"e",F:"F",f:"f",:"G",:"g",:"H",:"h",J:"J",:"j",:"K",:"k",M:"M",m:"m",P:"P",p:"p",Q:"Q",q:"q",:"R",:"r",:"S",:"s",V:"V",v:"v",W:"W",w:"w",X:"X",x:"x",Y:"Y",y:"y",A:"A",a:"a",B:"B",b:"b",:"D",:"d",:"E",:"e",:"E",:"e",:"H",:"h",I:"I",i:"i",:"I",:"i",M:"M",m:"m",O:"O",o:"o",Q:"Q",q:"q",U:"U",u:"u",X:"X",x:"x",Z:"Z",z:"z"},Z9t=Object.keys(H3e).join("|"),e7t=new RegExp(Z9t,"g");function t7t(e){return e.replace(e7t,t=>H3e[t])}/**
 * @name match-sorter
 * @license MIT license.
 * @copyright (c) 2099 Kent C. Dodds
 * @author Kent C. Dodds <me@kentcdodds.com> (https://kentcdodds.com)
 */const Ja={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};function n7t(e,t,n){var r;if(n=n||{},n.threshold=(r=n.threshold)!=null?r:Ja.MATCHES,!n.accessors){const o=Kge(e,t,n);return{rankedValue:e,rank:o,accessorIndex:-1,accessorThreshold:n.threshold,passed:o>=n.threshold}}const i=a7t(e,n.accessors),s={rankedValue:e,rank:Ja.NO_MATCH,accessorIndex:-1,accessorThreshold:n.threshold,passed:!1};for(let o=0;o<i.length;o++){const a=i[o];let l=Kge(a.itemValue,t,n);const{minRanking:u,maxRanking:c,threshold:d=n.threshold}=a.attributes;l<u&&l>=Ja.MATCHES?l=u:l>c&&(l=c),l=Math.min(l,c),l>=d&&l>s.rank&&(s.rank=l,s.passed=!0,s.accessorIndex=o,s.accessorThreshold=d,s.rankedValue=a.itemValue)}return s}function Kge(e,t,n){return e=Xge(e,n),t=Xge(t,n),t.length>e.length?Ja.NO_MATCH:e===t?Ja.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase(),t=t.toLowerCase(),e===t?Ja.EQUAL:e.startsWith(t)?Ja.STARTS_WITH:e.includes(` ${t}`)?Ja.WORD_STARTS_WITH:e.includes(t)?Ja.CONTAINS:t.length===1?Ja.NO_MATCH:r7t(e).includes(t)?Ja.ACRONYM:i7t(e,t))}function r7t(e){let t="";return e.split(" ").forEach(r=>{r.split("-").forEach(s=>{t+=s.substr(0,1)})}),t}function i7t(e,t){let n=0,r=0;function i(l,u,c){for(let d=c,f=u.length;d<f;d++)if(u[d]===l)return n+=1,d+1;return-1}function s(l){const u=1/l,c=n/t.length;return Ja.MATCHES+c*u}const o=i(t[0],e,0);if(o<0)return Ja.NO_MATCH;r=o;for(let l=1,u=t.length;l<u;l++){const c=t[l];if(r=i(c,e,r),!(r>-1))return Ja.NO_MATCH}const a=r-o;return s(a)}function s7t(e,t){return e.rank===t.rank?0:e.rank>t.rank?-1:1}function Xge(e,t){let{keepDiacritics:n}=t;return e=`${e}`,n||(e=t7t(e)),e}function o7t(e,t){let n=t;typeof t=="object"&&(n=t.accessor);const r=n(e);return r==null?[]:Array.isArray(r)?r:[String(r)]}function a7t(e,t){const n=[];for(let r=0,i=t.length;r<i;r++){const s=t[r],o=l7t(s),a=o7t(e,s);for(let l=0,u=a.length;l<u;l++)n.push({itemValue:a[l],attributes:o})}return n}const Qge={maxRanking:1/0,minRanking:-1/0};function l7t(e){return typeof e=="function"?Qge:{...Qge,...e}}function nC(e,t,n){let r=n.initialDeps??[],i;return()=>{var s,o,a,l;let u;n.key&&((s=n.debug)!=null&&s.call(n))&&(u=Date.now());const c=e();if(!(c.length!==r.length||c.some((h,p)=>r[p]!==h)))return i;r=c;let f;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(f=Date.now()),i=t(...c),n.key&&((a=n.debug)!=null&&a.call(n))){const h=Math.round((Date.now()-u)*100)/100,p=Math.round((Date.now()-f)*100)/100,m=p/16,g=(y,v)=>{for(y=String(y);y.length<v;)y=" "+y;return y};console.info(`%c ${g(p,5)} /${g(h,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*m,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(l=n==null?void 0:n.onChange)==null||l.call(n,i),i}}function a7(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const u7t=(e,t)=>Math.abs(e-t)<1,c7t=(e,t,n)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,i),n)}},d7t=e=>e,q3e=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let i=t;i<=n;i++)r.push(i);return r},f7t=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const i=o=>{const{width:a,height:l}=o;t({width:Math.round(a),height:Math.round(l)})};if(i(n.getBoundingClientRect()),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(o=>{const a=o[0];if(a!=null&&a.borderBoxSize){const l=a.borderBoxSize[0];if(l){i({width:l.inlineSize,height:l.blockSize});return}}i(n.getBoundingClientRect())});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},Jge={passive:!0},h7t=typeof window>"u"?!0:"onscrollend"in window,p7t=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let i=0;const s=h7t?()=>{}:c7t(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),o=u=>()=>{i=n[e.options.horizontal?"scrollLeft":"scrollTop"],s(),t(i,u)},a=o(!0),l=o(!1);return l(),n.addEventListener("scroll",a,Jge),n.addEventListener("scrollend",l,Jge),()=>{n.removeEventListener("scroll",a),n.removeEventListener("scrollend",l)}},m7t=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[n.options.horizontal?"width":"height"])},g7t=(e,{adjustments:t=0,behavior:n},r)=>{var i,s;const o=e+t;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class y7t{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{this._measureElement(s.target,s)})}));return{disconnect:()=>{var i;return(i=r())==null?void 0:i.disconnect()},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:d7t,rangeExtractor:q3e,onChange:()=>{},measureElement:m7t,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,...n}},this.notify=(n,r)=>{var i,s;const{startIndex:o,endIndex:a}=this.range??{startIndex:void 0,endIndex:void 0},l=this.calculateRange();(n||o!==(l==null?void 0:l.startIndex)||a!==(l==null?void 0:l.endIndex))&&((s=(i=this.options).onChange)==null||s.call(i,this,r))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.scrollElement=null},this._didMount=()=>(this.measureElementCache.forEach(this.observer.observe),()=>{this.observer.disconnect(),this.cleanup()}),this._willUpdate=()=>{var n;const r=this.options.getScrollElement();this.scrollElement!==r&&(this.cleanup(),this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this._scrollToOffset(this.scrollOffset,{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.scrollOffset<i?"forward":"backward":null,this.scrollOffset=i;const o=this.isScrolling;this.isScrolling=s,this.notify(o!==s,s)})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.getMeasurementOptions=nC(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey],(n,r,i,s)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s}),{key:!1}),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let o=r-1;o>=0;o--){const a=n[o];if(i.has(a.lane))continue;const l=s.get(a.lane);if(l==null||a.end>l.end?s.set(a.lane,a):a.end<l.end&&i.set(a.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((o,a)=>o.end===a.end?o.index-a.index:o.end-a.end)[0]:void 0},this.getMeasurements=nC(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s},o)=>{const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const l=this.measurementsCache.slice(0,a);for(let u=a;u<n;u++){const c=s(u),d=this.options.lanes===1?l[u-1]:this.getFurthestMeasurement(l,u),f=d?d.end+this.options.gap:r+i,h=o.get(c),p=typeof h=="number"?h:this.options.estimateSize(u),m=f+p,g=d?d.lane:u%this.options.lanes;l[u]={index:u,start:f,size:p,end:m,key:c,lane:g}}return this.measurementsCache=l,l},{key:!1,debug:()=>this.options.debug}),this.calculateRange=nC(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(n,r,i)=>this.range=n.length>0&&r>0?v7t({measurements:n,outerSize:r,scrollOffset:i}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=nC(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(n,r,i,s)=>r===null?[]:n({startIndex:r.startIndex,endIndex:r.endIndex,overscan:i,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.measurementsCache[this.indexFromElement(n)];if(!i||!n.isConnected){this.measureElementCache.forEach((a,l)=>{a===n&&(this.observer.unobserve(n),this.measureElementCache.delete(l))});return}const s=this.measureElementCache.get(i.key);s!==n&&(s&&this.observer.unobserve(s),this.observer.observe(n),this.measureElementCache.set(i.key,n));const o=this.options.measureElement(n,r,this);this.resizeItem(i,o)},this.resizeItem=(n,r)=>{const i=this.itemSizeCache.get(n.key)??n.size,s=r-i;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,s,this):n.start<this.scrollOffset+this.scrollAdjustments)&&this._scrollToOffset(this.scrollOffset,{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,r)),this.notify(!0,!1))},this.measureElement=n=>{n&&this._measureElement(n,void 0)},this.getVirtualItems=nC(()=>[this.getIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,o=n.length;s<o;s++){const a=n[s],l=r[a];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();return a7(r[W3e(0,r.length-1,i=>a7(r[i]).start,n)])},this.getOffsetForAlignment=(n,r)=>{const i=this.getSize();r==="auto"&&(n<=this.scrollOffset?r="start":n>=this.scrollOffset+i?r="end":r="start"),r==="start"?n=n:r==="end"?n=n-i:r==="center"&&(n=n-i/2);const s=this.options.horizontal?"scrollWidth":"scrollHeight",a=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[s]:this.scrollElement[s]:0)-this.getSize();return Math.max(Math.min(a,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=a7(this.getMeasurements()[n]);if(r==="auto")if(i.end>=this.scrollOffset+this.getSize()-this.options.scrollPaddingEnd)r="end";else if(i.start<=this.scrollOffset+this.options.scrollPaddingStart)r="start";else return[this.scrollOffset,r];const s=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(s,r),r]},this.isDynamicMode=()=>this.measureElementCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const[s,o]=this.getOffsetForIndex(n,r);this._scrollToOffset(s,{adjustments:void 0,behavior:i}),i!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.measureElementCache.has(this.options.getItemKey(n))){const[l]=this.getOffsetForIndex(n,o);u7t(l,this.scrollOffset)||this.scrollToIndex(n,{align:o,behavior:i})}else this.scrollToIndex(n,{align:o,behavior:i})}))},this.scrollBy=(n,{behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.scrollOffset+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;return r.length===0?i=this.options.paddingStart:i=this.options.lanes===1?((n=r[r.length-1])==null?void 0:n.end)??0:Math.max(...r.slice(-this.options.lanes).map(s=>s.end)),i-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{var n,r;this.itemSizeCache=new Map,(r=(n=this.options).onChange)==null||r.call(n,this,!1)},this.setOptions(t),this.scrollRect=this.options.initialRect,this.scrollOffset=typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(n=>{this.itemSizeCache.set(n.key,n.size)}),this.notify(!1,!1)}}const W3e=(e,t,n,r)=>{for(;e<=t;){const i=(e+t)/2|0,s=n(i);if(s<r)e=i+1;else if(s>r)t=i-1;else return i}return e>0?e-1:0};function v7t({measurements:e,outerSize:t,scrollOffset:n}){const r=e.length-1,s=W3e(0,r,a=>e[a].start,n);let o=s;for(;o<r&&e[o].end<n+t;)o++;return{startIndex:s,endIndex:o}}const b7t=typeof document<"u"?A.useLayoutEffect:A.useEffect;function _7t(e){const t=A.useReducer(()=>({}),{})[1],n={...e,onChange:(i,s)=>{var o;s?nS.flushSync(t):t(),(o=e.onChange)==null||o.call(e,i,s)}},[r]=A.useState(()=>new y7t(n));return r.setOptions(n),A.useEffect(()=>r._didMount(),[]),b7t(()=>r._willUpdate()),r}function G3e(e){return _7t({observeElementRect:f7t,observeElementOffset:p7t,scrollToFn:g7t,...e})}var Y3e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ys,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",u="day",c="week",d="month",f="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var $=["th","st","nd","rd"],L=M%100;return"["+M+($[(L-20)%10]||$[L]||$[0])+"]"}},_=function(M,$,L){var B=String(M);return!B||B.length>=$?M:""+Array($+1-B.length).join(L)+M},w={s:_,z:function(M){var $=-M.utcOffset(),L=Math.abs($),B=Math.floor(L/60),U=L%60;return($<=0?"+":"-")+_(B,2,"0")+":"+_(U,2,"0")},m:function M($,L){if($.date()<L.date())return-M(L,$);var B=12*(L.year()-$.year())+(L.month()-$.month()),U=$.clone().add(B,d),z=L-U<0,N=$.clone().add(B+(z?-1:1),d);return+(-(B+(L-U)/(z?U-N:N-U))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:d,y:h,w:c,d:u,D:p,h:l,m:a,s:o,ms:s,Q:f}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},E="en",S={};S[E]=v;var x="$isDayjsObject",T=function(M){return M instanceof D||!(!M||!M[x])},I=function M($,L,B){var U;if(!$)return E;if(typeof $=="string"){var z=$.toLowerCase();S[z]&&(U=z),L&&(S[z]=L,U=z);var N=$.split("-");if(!U&&N.length>1)return M(N[0])}else{var V=$.name;S[V]=$,U=V}return!B&&U&&(E=U),U||!B&&E},P=function(M,$){if(T(M))return M.clone();var L=typeof $=="object"?$:{};return L.date=M,L.args=arguments,new D(L)},k=w;k.l=I,k.i=T,k.w=function(M,$){return P(M,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var D=function(){function M(L){this.$L=I(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[x]=!0}var $=M.prototype;return $.parse=function(L){this.$d=function(B){var U=B.date,z=B.utc;if(U===null)return new Date(NaN);if(k.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var N=U.match(g);if(N){var V=N[2]-1||0,W=(N[7]||"0").substring(0,3);return z?new Date(Date.UTC(N[1],V,N[3]||1,N[4]||0,N[5]||0,N[6]||0,W)):new Date(N[1],V,N[3]||1,N[4]||0,N[5]||0,N[6]||0,W)}}return new Date(U)}(L),this.init()},$.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},$.$utils=function(){return k},$.isValid=function(){return this.$d.toString()!==m},$.isSame=function(L,B){var U=P(L);return this.startOf(B)<=U&&U<=this.endOf(B)},$.isAfter=function(L,B){return P(L)<this.startOf(B)},$.isBefore=function(L,B){return this.endOf(B)<P(L)},$.$g=function(L,B,U){return k.u(L)?this[B]:this.set(U,L)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(L,B){var U=this,z=!!k.u(B)||B,N=k.p(L),V=function(ne,ce){var Ee=k.w(U.$u?Date.UTC(U.$y,ce,ne):new Date(U.$y,ce,ne),U);return z?Ee:Ee.endOf(u)},W=function(ne,ce){return k.w(U.toDate()[ne].apply(U.toDate("s"),(z?[0,0,0,0]:[23,59,59,999]).slice(ce)),U)},F=this.$W,H=this.$M,G=this.$D,Q="set"+(this.$u?"UTC":"");switch(N){case h:return z?V(1,0):V(31,11);case d:return z?V(1,H):V(0,H+1);case c:var ie=this.$locale().weekStart||0,se=(F<ie?F+7:F)-ie;return V(z?G-se:G+(6-se),H);case u:case p:return W(Q+"Hours",0);case l:return W(Q+"Minutes",1);case a:return W(Q+"Seconds",2);case o:return W(Q+"Milliseconds",3);default:return this.clone()}},$.endOf=function(L){return this.startOf(L,!1)},$.$set=function(L,B){var U,z=k.p(L),N="set"+(this.$u?"UTC":""),V=(U={},U[u]=N+"Date",U[p]=N+"Date",U[d]=N+"Month",U[h]=N+"FullYear",U[l]=N+"Hours",U[a]=N+"Minutes",U[o]=N+"Seconds",U[s]=N+"Milliseconds",U)[z],W=z===u?this.$D+(B-this.$W):B;if(z===d||z===h){var F=this.clone().set(p,1);F.$d[V](W),F.init(),this.$d=F.set(p,Math.min(this.$D,F.daysInMonth())).$d}else V&&this.$d[V](W);return this.init(),this},$.set=function(L,B){return this.clone().$set(L,B)},$.get=function(L){return this[k.p(L)]()},$.add=function(L,B){var U,z=this;L=Number(L);var N=k.p(B),V=function(H){var G=P(z);return k.w(G.date(G.date()+Math.round(H*L)),z)};if(N===d)return this.set(d,this.$M+L);if(N===h)return this.set(h,this.$y+L);if(N===u)return V(1);if(N===c)return V(7);var W=(U={},U[a]=r,U[l]=i,U[o]=n,U)[N]||1,F=this.$d.getTime()+L*W;return k.w(F,this)},$.subtract=function(L,B){return this.add(-1*L,B)},$.format=function(L){var B=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var z=L||"YYYY-MM-DDTHH:mm:ssZ",N=k.z(this),V=this.$H,W=this.$m,F=this.$M,H=U.weekdays,G=U.months,Q=U.meridiem,ie=function(ce,Ee,de,We){return ce&&(ce[Ee]||ce(B,z))||de[Ee].slice(0,We)},se=function(ce){return k.s(V%12||12,ce,"0")},ne=Q||function(ce,Ee,de){var We=ce<12?"AM":"PM";return de?We.toLowerCase():We};return z.replace(y,function(ce,Ee){return Ee||function(de){switch(de){case"YY":return String(B.$y).slice(-2);case"YYYY":return k.s(B.$y,4,"0");case"M":return F+1;case"MM":return k.s(F+1,2,"0");case"MMM":return ie(U.monthsShort,F,G,3);case"MMMM":return ie(G,F);case"D":return B.$D;case"DD":return k.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return ie(U.weekdaysMin,B.$W,H,2);case"ddd":return ie(U.weekdaysShort,B.$W,H,3);case"dddd":return H[B.$W];case"H":return String(V);case"HH":return k.s(V,2,"0");case"h":return se(1);case"hh":return se(2);case"a":return ne(V,W,!0);case"A":return ne(V,W,!1);case"m":return String(W);case"mm":return k.s(W,2,"0");case"s":return String(B.$s);case"ss":return k.s(B.$s,2,"0");case"SSS":return k.s(B.$ms,3,"0");case"Z":return N}return null}(ce)||N.replace(":","")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(L,B,U){var z,N=this,V=k.p(B),W=P(L),F=(W.utcOffset()-this.utcOffset())*r,H=this-W,G=function(){return k.m(N,W)};switch(V){case h:z=G()/12;break;case d:z=G();break;case f:z=G()/3;break;case c:z=(H-F)/6048e5;break;case u:z=(H-F)/864e5;break;case l:z=H/i;break;case a:z=H/r;break;case o:z=H/n;break;default:z=H}return U?z:k.a(z)},$.daysInMonth=function(){return this.endOf(d).$D},$.$locale=function(){return S[this.$L]},$.locale=function(L,B){if(!L)return this.$L;var U=this.clone(),z=I(L,B,!0);return z&&(U.$L=z),U},$.clone=function(){return k.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},M}(),R=D.prototype;return P.prototype=R,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",u],["$M",d],["$y",h],["$D",p]].forEach(function(M){R[M[1]]=function($){return this.$g($,M[0],M[1])}}),P.extend=function(M,$){return M.$i||(M($,D,P),M.$i=!0),P},P.locale=I,P.isDayjs=T,P.unix=function(M){return P(1e3*M)},P.en=S[E],P.Ls=S,P.p={},P})})(Y3e);var w7t=Y3e.exports;const St=bu(w7t);function E7t({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>St(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function x7t({formatter:e,...t}){return(e||E7t)(t)}function S7t({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function K3e({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var l,u,c;const o=S7t({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(u=(l=e.current)==null?void 0:l[o.levelIndex])==null?void 0:u[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?K3e({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function T7t(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function C7t(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function Lte({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=T7t(i.key);if(s){i.preventDefault();const o=C7t(e);K3e({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}function A7t(e,t){if(!e||!t)return t;const n=e.getHours(),r=e.getMinutes(),i=e.getSeconds(),s=e.getMilliseconds(),o=new Date(t);return o.setHours(n),o.setMinutes(r),o.setSeconds(i),o.setMilliseconds(s),o}var X3e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ys,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,l=function(f,h,p){p===void 0&&(p={});var m=new Date(f),g=function(y,v){v===void 0&&(v={});var _=v.timeZoneName||"short",w=y+"|"+_,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:_}),r[w]=E),E}(h,p);return g.formatToParts(m)},u=function(f,h){for(var p=l(f,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,_=y.value,w=n[v];w>=0&&(m[w]=parseInt(_,10))}var E=m[3],S=E===24?0:E,x=m[0]+"-"+m[1]+"-"+m[2]+" "+S+":"+m[4]+":"+m[5]+":000",T=+f;return(o.utc(x).valueOf()-(T-=T%1e3))/6e4},c=s.prototype;c.tz=function(f,h){f===void 0&&(f=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:f}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var _=v.utcOffset();v=v.add(p-_,"minute")}return v.$x.$timezone=f,v},c.offsetName=function(f){var h=this.$x.$timezone||o.tz.guess(),p=l(this.valueOf(),h,{timeZoneName:f}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var d=c.startOf;c.startOf=function(f,h){if(!this.$x||!this.$x.$timezone)return d.call(this,f,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return d.call(p,f,h).tz(this.$x.$timezone,!0)},o.tz=function(f,h,p){var m=p&&h,g=p||h||a,y=u(+o(),g);if(typeof f!="string")return o(f).tz(g);var v=function(S,x,T){var I=S-60*x*1e3,P=u(I,T);if(x===P)return[I,x];var k=u(I-=60*(P-x)*1e3,T);return P===k?[I,P]:[S-60*Math.min(P,k)*1e3,Math.max(P,k)]}(o.utc(f,m).valueOf(),y,g),_=v[0],w=v[1],E=o(_).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(f){a=f}}})})(X3e);var I7t=X3e.exports;const R7t=bu(I7t);var Q3e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ys,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var l=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},l.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},l.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var u=l.parse;l.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),u.call(this,m)};var c=l.init;l.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var d=l.utcOffset;l.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?d.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var S=E.match(r);if(!S)return null;var x=(""+S[0]).match(i)||["-",0,0],T=x[0],I=60*+x[1]+ +x[2];return I===0?0:T==="+"?I:-I}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,_=this;if(g)return _.$offset=v,_.$u=m===0,_;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(_=this.local().add(v+w,n)).$offset=v,_.$x.$localOffset=w}else _=this.utc();return _};var f=l.format;l.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,g)},l.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var h=l.toDate;l.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=l.diff;l.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),_=a(m).local();return p.call(v,_,g,y)}}})})(Q3e);var k7t=Q3e.exports;const P7t=bu(k7t);St.extend(P7t);St.extend(R7t);function N7t(e,t){return t?St(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const Zge=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=N7t(e,t);return n==="remove"&&(r*=-1),St(e).add(r,"minutes").toDate()};function Nm(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>Zge(i,n,e)):Zge(t,n,e)}function O7t({minDate:e,maxDate:t,timezone:n}){const r=Nm("add",new Date,n);return!e&&!t?r:e&&St(r).isBefore(e)?e:t&&St(r).isAfter(t)?t:r}const D7t={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},M7t=A.createContext(D7t);function Eu(){const e=A.useContext(M7t),t=A.useCallback(o=>o||e.locale,[e.locale]),n=A.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=A.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=A.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=A.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function $7t(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function Fte({value:e,type:t,name:n,form:r}){return b.jsx("input",{type:"hidden",value:$7t(e,t),name:n,form:r})}Fte.displayName="@mantine/dates/HiddenDatesInput";var J3e={day:"m_396ce5cb"};const L7t={},F7t=(e,{size:t})=>({day:{"--day-size":Jt(t,"day-size")}}),jte=Le((e,t)=>{const n=xe("Day",L7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,date:u,disabled:c,__staticSelector:d,weekend:f,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:_,static:w,highlightToday:E,...S}=n,x=vt({name:d||"Day",classes:J3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:F7t,rootSelector:"day"}),T=Eu();return b.jsx(xs,{...x("day",{style:_?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":St(u).isSame(Nm("add",new Date,T.getTimezone()),"day")||void 0,"data-hidden":_||void 0,"data-highlight-today":E||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&f||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...S,children:(m==null?void 0:m(u))||u.getDate()})});jte.classes=J3e;jte.displayName="@mantine/dates/Day";function j7t({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=St().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(St(r).add(s,"days").locale(e).format(t)):i.push(t(St(r).add(s,"days").toDate()));return i}var Z3e={weekday:"m_18a3eca"};const B7t={},z7t=(e,{size:t})=>({weekdaysRow:{"--wr-fz":Js(t),"--wr-spacing":Qu(t)}}),Bte=Le((e,t)=>{const n=xe("WeekdaysRow",B7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,locale:u,firstDayOfWeek:c,weekdayFormat:d,cellComponent:f="th",__staticSelector:h,...p}=n,m=vt({name:h||"WeekdaysRow",classes:Z3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:z7t,rootSelector:"weekdaysRow"}),g=Eu(),y=j7t({locale:g.getLocale(u),format:d,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,_)=>b.jsx(f,{...m("weekday"),children:v},_));return b.jsx(_e,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});Bte.classes=Z3e;Bte.displayName="@mantine/dates/WeekdaysRow";function U7t(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function V7t(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function H7t({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=U7t(s,t),a=V7t(i,t),l=[];for(;a<=o;){const u=[];for(let c=0;c<7;c+=1)u.push(new Date(a)),a.setDate(a.getDate()+1);l.push(u)}if(n&&l.length<6){const u=l[l.length-1],c=u[u.length-1],d=new Date(c);for(d.setDate(d.getDate()+1);l.length<6;){const f=[];for(let h=0;h<7;h+=1)f.push(new Date(d)),d.setDate(d.getDate()+1);l.push(f)}}return l}function eLe(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function tLe(e,t){return t instanceof Date?St(e).isAfter(St(t).subtract(1,"day"),"day"):!0}function nLe(e,t){return t instanceof Date?St(e).isBefore(St(t).add(1,"day"),"day"):!0}function q7t(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var d;return nLe(c,n)&&tLe(c,t)&&!(i!=null&&i(c))&&!((d=r==null?void 0:r(c))!=null&&d.disabled)&&(!s||eLe(c,o))}),l=a.find(c=>{var d;return(d=r==null?void 0:r(c))==null?void 0:d.selected});if(l)return l;const u=a.find(c=>St().isSame(c,"date"));return u||a[0]}var rLe={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const W7t={withCellSpacing:!0},ej=Le((e,t)=>{const n=xe("Month",W7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,locale:c,firstDayOfWeek:d,weekdayFormat:f,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:_,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:S,static:x,__getDayRef:T,__onDayKeyDown:I,__onDayClick:P,__onDayMouseEnter:k,__preventFocus:D,__stopPropagation:R,withCellSpacing:M,size:$,highlightToday:L,...B}=n,U=vt({name:u||"Month",classes:rLe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,rootSelector:"month"}),z=Eu(),N=H7t({month:h,firstDayOfWeek:z.getFirstDayOfWeek(d),consistentWeeks:z.consistentWeeks}),V=q7t(N,y,v,m,g,w,h),{resolvedClassNames:W,resolvedStyles:F}=gp({classNames:r,styles:o,props:n}),H=N.map((G,Q)=>{const ie=G.map((se,ne)=>{const ce=!eLe(se,h),Ee=(S==null?void 0:S(se))||St(se).locale(c||z.locale).format("D MMMM YYYY"),de=m==null?void 0:m(se),We=St(se).isSame(V,"date");return b.jsx("td",{...U("monthCell"),"data-with-spacing":M||void 0,children:b.jsx(jte,{__staticSelector:u||"Month",classNames:W,styles:F,unstyled:a,"data-mantine-stop-propagation":R||void 0,highlightToday:L,renderDay:_,date:se,size:$,weekend:z.getWeekendDays(p).includes(se.getDay()),outside:ce,hidden:w?ce:!1,"aria-label":Ee,static:x,disabled:(g==null?void 0:g(se))||!nLe(se,v)||!tLe(se,y),ref:Fe=>T==null?void 0:T(Q,ne,Fe),...de,onKeyDown:Fe=>{var Ne;(Ne=de==null?void 0:de.onKeyDown)==null||Ne.call(de,Fe),I==null||I(Fe,{rowIndex:Q,cellIndex:ne,date:se})},onMouseEnter:Fe=>{var Ne;(Ne=de==null?void 0:de.onMouseEnter)==null||Ne.call(de,Fe),k==null||k(Fe,se)},onClick:Fe=>{var Ne;(Ne=de==null?void 0:de.onClick)==null||Ne.call(de,Fe),P==null||P(Fe,se)},onMouseDown:Fe=>{var Ne;(Ne=de==null?void 0:de.onMouseDown)==null||Ne.call(de,Fe),D&&Fe.preventDefault()},tabIndex:D||!We?-1:0})},se.toString())});return b.jsx("tr",{...U("monthRow"),children:ie},Q)});return b.jsxs(_e,{component:"table",...U("month"),size:$,ref:t,...B,children:[!E&&b.jsx("thead",{...U("monthThead"),children:b.jsx(Bte,{__staticSelector:u||"Month",locale:c,firstDayOfWeek:d,weekdayFormat:f,size:$,classNames:W,styles:F,unstyled:a})}),b.jsx("tbody",{...U("monthTbody"),children:H})]})});ej.classes=rLe;ej.displayName="@mantine/dates/Month";var iLe={pickerControl:"m_dc6a3c71"};const G7t={},Y7t=(e,{size:t})=>({pickerControl:{"--dpc-fz":Js(t),"--dpc-size":Jt(t,"dpc-size")}}),tj=Le((e,t)=>{const n=xe("PickerControl",G7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,firstInRange:u,lastInRange:c,inRange:d,__staticSelector:f,selected:h,disabled:p,...m}=n,g=vt({name:f||"PickerControl",classes:iLe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Y7t,rootSelector:"pickerControl"});return b.jsx(xs,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":d&&!p&&!h||void 0,"data-first-in-range":u&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});tj.classes=iLe;tj.displayName="@mantine/dates/PickerControl";function sLe(e,t,n){return!t&&!n?!1:!!(t&&St(e).isBefore(t,"year")||n&&St(e).isAfter(n,"year"))}function K7t(e,t,n,r){const i=e.flat().filter(a=>{var l;return!sLe(a,t,n)&&!((l=r==null?void 0:r(a))!=null&&l.disabled)}),s=i.find(a=>{var l;return(l=r==null?void 0:r(a))==null?void 0:l.selected});if(s)return s;const o=i.find(a=>St().isSame(a,"year"));return o||i[0]}function oLe(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var aLe={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const X7t={yearsListFormat:"YYYY",withCellSpacing:!0},nj=Le((e,t)=>{const n=xe("YearsList",X7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,decade:u,yearsListFormat:c,locale:d,minDate:f,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:_,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:x,...T}=n,I=vt({name:m||"YearsList",classes:aLe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,rootSelector:"yearsList"}),P=Eu(),k=oLe(u),D=K7t(k,f,h,p),R=k.map((M,$)=>{const L=M.map((B,U)=>{const z=p==null?void 0:p(B),N=St(B).isSame(D,"year");return b.jsx("td",{...I("yearsListCell"),"data-with-spacing":S||void 0,children:b.jsx(tj,{...I("yearsListControl"),size:x,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:sLe(B,f,h),ref:V=>g==null?void 0:g($,U,V),...z,onKeyDown:V=>{var W;(W=z==null?void 0:z.onKeyDown)==null||W.call(z,V),y==null||y(V,{rowIndex:$,cellIndex:U,date:B})},onClick:V=>{var W;(W=z==null?void 0:z.onClick)==null||W.call(z,V),v==null||v(V,B)},onMouseEnter:V=>{var W;(W=z==null?void 0:z.onMouseEnter)==null||W.call(z,V),_==null||_(V,B)},onMouseDown:V=>{var W;(W=z==null?void 0:z.onMouseDown)==null||W.call(z,V),w&&V.preventDefault()},tabIndex:w||!N?-1:0,children:St(B).locale(P.getLocale(d)).format(c)})},U)});return b.jsx("tr",{...I("yearsListRow"),children:L},$)});return b.jsx(_e,{component:"table",ref:t,size:x,...I("yearsList"),...T,children:b.jsx("tbody",{children:R})})});nj.classes=aLe;nj.displayName="@mantine/dates/YearsList";function lLe(e,t,n){return!t&&!n?!1:!!(t&&St(e).isBefore(t,"month")||n&&St(e).isAfter(n,"month"))}function Q7t(e,t,n,r){const i=e.flat().filter(a=>{var l;return!lLe(a,t,n)&&!((l=r==null?void 0:r(a))!=null&&l.disabled)}),s=i.find(a=>{var l;return(l=r==null?void 0:r(a))==null?void 0:l.selected});if(s)return s;const o=i.find(a=>St().isSame(a,"month"));return o||i[0]}function J7t(e){const t=St(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(St(t).add(r,"months").toDate()),r+=1;return n}var uLe={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const Z7t={monthsListFormat:"MMM",withCellSpacing:!0},rj=Le((e,t)=>{const n=xe("MonthsList",Z7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,year:c,monthsListFormat:d,locale:f,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:_,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:x,...T}=n,I=vt({name:u||"MonthsList",classes:uLe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,rootSelector:"monthsList"}),P=Eu(),k=J7t(c),D=Q7t(k,h,p,m),R=k.map((M,$)=>{const L=M.map((B,U)=>{const z=m==null?void 0:m(B),N=St(B).isSame(D,"month");return b.jsx("td",{...I("monthsListCell"),"data-with-spacing":S||void 0,children:b.jsx(tj,{...I("monthsListControl"),size:x,unstyled:a,__staticSelector:u||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:lLe(B,h,p),ref:V=>g==null?void 0:g($,U,V),...z,onKeyDown:V=>{var W;(W=z==null?void 0:z.onKeyDown)==null||W.call(z,V),y==null||y(V,{rowIndex:$,cellIndex:U,date:B})},onClick:V=>{var W;(W=z==null?void 0:z.onClick)==null||W.call(z,V),v==null||v(V,B)},onMouseEnter:V=>{var W;(W=z==null?void 0:z.onMouseEnter)==null||W.call(z,V),_==null||_(V,B)},onMouseDown:V=>{var W;(W=z==null?void 0:z.onMouseDown)==null||W.call(z,V),w&&V.preventDefault()},tabIndex:w||!N?-1:0,children:St(B).locale(P.getLocale(f)).format(d)})},U)});return b.jsx("tr",{...I("monthsListRow"),children:L},$)});return b.jsx(_e,{component:"table",ref:t,size:x,...I("monthsList"),...T,children:b.jsx("tbody",{children:R})})});rj.classes=uLe;rj.displayName="@mantine/dates/MonthsList";var cLe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const ezt={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},tzt=(e,{size:t})=>({calendarHeader:{"--dch-control-size":Jt(t,"dch-control-size"),"--dch-fz":Js(t)}}),fv=Le((e,t)=>{const n=xe("CalendarHeader",ezt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,nextIcon:u,previousIcon:c,nextLabel:d,previousLabel:f,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:_,levelControlAriaLabel:w,withNext:E,withPrevious:S,__staticSelector:x,__preventFocus:T,__stopPropagation:I,...P}=n,k=vt({name:x||"CalendarHeader",classes:cLe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:tzt,rootSelector:"calendarHeader"}),D=T?R=>R.preventDefault():void 0;return b.jsxs(_e,{...k("calendarHeader"),ref:t,...P,children:[S&&b.jsx(xs,{...k("calendarHeaderControl"),"data-direction":"previous","aria-label":f,onClick:p,unstyled:a,onMouseDown:D,disabled:v,"data-disabled":v||void 0,tabIndex:T||v?-1:0,"data-mantine-stop-propagation":I||void 0,children:c||b.jsx(YA,{...k("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),b.jsx(xs,{component:_?"button":"div",...k("calendarHeaderLevel"),onClick:_?m:void 0,unstyled:a,onMouseDown:_?D:void 0,disabled:!_,"data-static":!_||void 0,"aria-label":w,tabIndex:T||!_?-1:0,"data-mantine-stop-propagation":I||void 0,children:g}),E&&b.jsx(xs,{...k("calendarHeaderControl"),"data-direction":"next","aria-label":d,onClick:h,unstyled:a,onMouseDown:D,disabled:y,"data-disabled":y||void 0,tabIndex:T||y?-1:0,"data-mantine-stop-propagation":I||void 0,children:u||b.jsx(YA,{...k("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});fv.classes=cLe;fv.displayName="@mantine/dates/CalendarHeader";function nzt(e){const t=oLe(e);return[t[0][0],t[3][0]]}const rzt={decadeLabelFormat:"YYYY"},ij=Le((e,t)=>{const n=xe("DecadeLevel",rzt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:l,__getControlRef:u,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,nextDisabled:E,previousDisabled:S,levelControlAriaLabel:x,withNext:T,withPrevious:I,decadeLabelFormat:P,classNames:k,styles:D,unstyled:R,__staticSelector:M,__stopPropagation:$,size:L,...B}=n,U=Eu(),[z,N]=nzt(r),V={__staticSelector:M||"DecadeLevel",classNames:k,styles:D,unstyled:R,size:L},W=typeof E=="boolean"?E:o?!St(N).endOf("year").isBefore(o):!1,F=typeof S=="boolean"?S:s?!St(z).startOf("year").isAfter(s):!1,H=(G,Q)=>St(G).locale(i||U.locale).format(Q);return b.jsxs(_e,{"data-decade-level":!0,size:L,ref:t,...B,children:[b.jsx(fv,{label:typeof P=="function"?P(z,N):`${H(z,P)}  ${H(N,P)}`,__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,nextDisabled:W,previousDisabled:F,hasNextLevel:!1,levelControlAriaLabel:x,withNext:T,withPrevious:I,...V}),b.jsx(nj,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:l,__getControlRef:u,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...V})]})});ij.classes={...nj.classes,...fv.classes};ij.displayName="@mantine/dates/DecadeLevel";const izt={yearLabelFormat:"YYYY"},sj=Le((e,t)=>{const n=xe("YearLevel",izt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:l,__getControlRef:u,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,onLevelClick:E,nextDisabled:S,previousDisabled:x,hasNextLevel:T,levelControlAriaLabel:I,withNext:P,withPrevious:k,yearLabelFormat:D,__staticSelector:R,__stopPropagation:M,size:$,classNames:L,styles:B,unstyled:U,...z}=n,N=Eu(),V={__staticSelector:R||"YearLevel",classNames:L,styles:B,unstyled:U,size:$},W=typeof S=="boolean"?S:o?!St(r).endOf("year").isBefore(o):!1,F=typeof x=="boolean"?x:s?!St(r).startOf("year").isAfter(s):!1;return b.jsxs(_e,{"data-year-level":!0,size:$,ref:t,...z,children:[b.jsx(fv,{label:typeof D=="function"?D(r):St(r).locale(i||N.locale).format(D),__preventFocus:p,__stopPropagation:M,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:F,hasNextLevel:T,levelControlAriaLabel:I,withNext:P,withPrevious:k,...V}),b.jsx(rj,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:l,__getControlRef:u,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,__preventFocus:p,__stopPropagation:M,withCellSpacing:h,...V})]})});sj.classes={...fv.classes,...rj.classes};sj.displayName="@mantine/dates/YearLevel";const szt={monthLabelFormat:"MMMM YYYY"},oj=Le((e,t)=>{const n=xe("MonthLevel",szt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:l,excludeDate:u,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:_,withCellSpacing:w,highlightToday:E,__preventFocus:S,__stopPropagation:x,nextIcon:T,previousIcon:I,nextLabel:P,previousLabel:k,onNext:D,onPrevious:R,onLevelClick:M,nextDisabled:$,previousDisabled:L,hasNextLevel:B,levelControlAriaLabel:U,withNext:z,withPrevious:N,monthLabelFormat:V,classNames:W,styles:F,unstyled:H,__staticSelector:G,size:Q,static:ie,...se}=n,ne=Eu(),ce={__staticSelector:G||"MonthLevel",classNames:W,styles:F,unstyled:H,size:Q},Ee=typeof $=="boolean"?$:d?!St(r).endOf("month").isBefore(d):!1,de=typeof L=="boolean"?L:c?!St(r).startOf("month").isAfter(c):!1;return b.jsxs(_e,{"data-month-level":!0,size:Q,ref:t,...se,children:[b.jsx(fv,{label:typeof V=="function"?V(r):St(r).locale(i||ne.locale).format(V),__preventFocus:S,__stopPropagation:x,nextIcon:T,previousIcon:I,nextLabel:P,previousLabel:k,onNext:D,onPrevious:R,onLevelClick:M,nextDisabled:Ee,previousDisabled:de,hasNextLevel:B,levelControlAriaLabel:U,withNext:z,withPrevious:N,...ce}),b.jsx(ej,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:l,excludeDate:u,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:_,__preventFocus:S,__stopPropagation:x,static:ie,withCellSpacing:w,highlightToday:E,...ce})]})});oj.classes={...ej.classes,...fv.classes};oj.displayName="@mantine/dates/MonthLevel";var dLe={levelsGroup:"m_30b26e33"};const ozt={},hv=Le((e,t)=>{const n=xe("LevelsGroup",ozt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,...c}=n,d=vt({name:u||"LevelsGroup",classes:dLe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,rootSelector:"levelsGroup"});return b.jsx(_e,{ref:t,...d("levelsGroup"),...c})});hv.classes=dLe;hv.displayName="@mantine/dates/LevelsGroup";const azt={numberOfColumns:1},aj=Le((e,t)=>{const n=xe("DecadeLevelGroup",azt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:l,__onControlClick:u,__onControlMouseEnter:c,withCellSpacing:d,__preventFocus:f,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:_,previousDisabled:w,classNames:E,styles:S,unstyled:x,__staticSelector:T,__stopPropagation:I,numberOfColumns:P,levelControlAriaLabel:k,decadeLabelFormat:D,size:R,vars:M,...$}=n,L=A.useRef([]),B=Array(P).fill(0).map((U,z)=>{const N=St(r).add(z*10,"years").toDate();return b.jsx(ij,{size:R,yearsListFormat:a,decade:N,withNext:z===P-1,withPrevious:z===0,decadeLabelFormat:D,__onControlClick:u,__onControlMouseEnter:c,__onControlKeyDown:(V,W)=>Lte({levelIndex:z,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:V,controlsRef:L}),__getControlRef:(V,W,F)=>{Array.isArray(L.current[z])||(L.current[z]=[]),Array.isArray(L.current[z][V])||(L.current[z][V]=[]),L.current[z][V][W]=F},levelControlAriaLabel:typeof k=="function"?k(N):k,locale:i,minDate:s,maxDate:o,__preventFocus:f,__stopPropagation:I,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:_,previousDisabled:w,getYearControlProps:l,__staticSelector:T||"DecadeLevelGroup",classNames:E,styles:S,unstyled:x,withCellSpacing:d},z)});return b.jsx(hv,{classNames:E,styles:S,__staticSelector:T||"DecadeLevelGroup",ref:t,size:R,unstyled:x,...$,children:B})});aj.classes={...hv.classes,...ij.classes};aj.displayName="@mantine/dates/DecadeLevelGroup";const lzt={numberOfColumns:1},lj=Le((e,t)=>{const n=xe("YearLevelGroup",lzt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:l,__onControlClick:u,__onControlMouseEnter:c,withCellSpacing:d,__preventFocus:f,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:_,nextDisabled:w,previousDisabled:E,hasNextLevel:S,classNames:x,styles:T,unstyled:I,__staticSelector:P,__stopPropagation:k,numberOfColumns:D,levelControlAriaLabel:R,yearLabelFormat:M,size:$,vars:L,...B}=n,U=A.useRef([]),z=Array(D).fill(0).map((N,V)=>{const W=St(r).add(V,"years").toDate();return b.jsx(sj,{size:$,monthsListFormat:a,year:W,withNext:V===D-1,withPrevious:V===0,yearLabelFormat:M,__stopPropagation:k,__onControlClick:u,__onControlMouseEnter:c,__onControlKeyDown:(F,H)=>Lte({levelIndex:V,rowIndex:H.rowIndex,cellIndex:H.cellIndex,event:F,controlsRef:U}),__getControlRef:(F,H,G)=>{Array.isArray(U.current[V])||(U.current[V]=[]),Array.isArray(U.current[V][F])||(U.current[V][F]=[]),U.current[V][F][H]=G},levelControlAriaLabel:typeof R=="function"?R(W):R,locale:i,minDate:s,maxDate:o,__preventFocus:f,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:_,nextDisabled:w,previousDisabled:E,hasNextLevel:S,getMonthControlProps:l,classNames:x,styles:T,unstyled:I,__staticSelector:P||"YearLevelGroup",withCellSpacing:d},V)});return b.jsx(hv,{classNames:x,styles:T,__staticSelector:P||"YearLevelGroup",ref:t,size:$,unstyled:I,...B,children:z})});lj.classes={...sj.classes,...hv.classes};lj.displayName="@mantine/dates/YearLevelGroup";const uzt={numberOfColumns:1},uj=Le((e,t)=>{const n=xe("MonthLevelGroup",uzt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:l,excludeDate:u,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,highlightToday:_,__preventFocus:w,nextIcon:E,previousIcon:S,nextLabel:x,previousLabel:T,onNext:I,onPrevious:P,onLevelClick:k,nextDisabled:D,previousDisabled:R,hasNextLevel:M,classNames:$,styles:L,unstyled:B,numberOfColumns:U,levelControlAriaLabel:z,monthLabelFormat:N,__staticSelector:V,__stopPropagation:W,size:F,static:H,vars:G,...Q}=n,ie=A.useRef([]),se=Array(U).fill(0).map((ne,ce)=>{const Ee=St(r).add(ce,"months").toDate();return b.jsx(oj,{month:Ee,withNext:ce===U-1,withPrevious:ce===0,monthLabelFormat:N,__stopPropagation:W,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(de,We)=>Lte({levelIndex:ce,rowIndex:We.rowIndex,cellIndex:We.cellIndex,event:de,controlsRef:ie}),__getDayRef:(de,We,Fe)=>{Array.isArray(ie.current[ce])||(ie.current[ce]=[]),Array.isArray(ie.current[ce][de])||(ie.current[ce][de]=[]),ie.current[ce][de][We]=Fe},levelControlAriaLabel:typeof z=="function"?z(Ee):z,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:l,excludeDate:u,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:w,nextIcon:E,previousIcon:S,nextLabel:x,previousLabel:T,onNext:I,onPrevious:P,onLevelClick:k,nextDisabled:D,previousDisabled:R,hasNextLevel:M,classNames:$,styles:L,unstyled:B,__staticSelector:V||"MonthLevelGroup",size:F,static:H,withCellSpacing:v,highlightToday:_},ce)});return b.jsx(hv,{classNames:$,styles:L,__staticSelector:V||"MonthLevelGroup",ref:t,size:F,...Q,children:se})});uj.classes={...hv.classes,...oj.classes};uj.displayName="@mantine/dates/MonthLevelGroup";var fLe={input:"m_6fa5e2aa"};const czt={},cj=Le((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:l,modalProps:u,dropdownType:c,children:d,formattedValue:f,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:_,shouldClear:w,readOnly:E,disabled:S,value:x,name:T,form:I,type:P,...k}=ZY("PickerInputBase",czt,e),D=_||(g&&w&&!E&&!S?b.jsx(Xy,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),R=()=>{P==="range"&&Array.isArray(x)&&x[0]&&!x[1]&&y(),h.close()};return b.jsxs(b.Fragment,{children:[c==="modal"&&!E&&b.jsx(Ss,{opened:p,onClose:R,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...u,children:d}),b.jsx(Kr.Wrapper,{...r,children:b.jsxs($n,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...l,disabled:(l==null?void 0:l.disabled)||c==="modal"||E,onClose:()=>{var M;(M=l==null?void 0:l.onClose)==null||M.call(l),R()},children:[b.jsx($n.Target,{children:b.jsx(Kr,{"aria-label":f||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:S,component:"button",type:"button",multiline:!0,onClick:M=>{m==null||m(M),h.toggle()},rightSection:D,...n,ref:t,classNames:{...s,input:yt(fLe.input,s==null?void 0:s.input)},...k,children:f||b.jsx(Kr.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),b.jsx($n.Dropdown,{"data-dates-dropdown":!0,children:d})]})}),b.jsx(Fte,{value:x,name:T,form:I,type:P})]})});cj.classes=fLe;cj.displayName="@mantine/dates/PickerInputBase";const e0e=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function eR({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=A.useRef(e),o=Eu(),[a,l,u]=Xi({value:Nm("add",t,o.getTimezone(),!i),defaultValue:Nm("add",n,o.getTimezone(),!i),finalValue:e0e(e),onChange:d=>{r==null||r(Nm("remove",d,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:e0e(e),l(c))),[c,l,u]}function l7(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function dzt(e){return e===0?"month":e===1?"year":"decade"}function rC(e,t,n){return dzt(Lc(l7(e,0),l7(t,0),l7(n,2)))}const fzt={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},XS=Le((e,t)=>{const n=xe("Calendar",fzt,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:l,date:u,defaultDate:c,onDateChange:d,numberOfColumns:f,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:_,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:S,weekendDays:x,getDayProps:T,excludeDate:I,renderDay:P,hideOutsideDates:k,hideWeekdays:D,getDayAriaLabel:R,monthLabelFormat:M,nextIcon:$,previousIcon:L,__onDayClick:B,__onDayMouseEnter:U,withCellSpacing:z,highlightToday:N,monthsListFormat:V,getMonthControlProps:W,yearLabelFormat:F,yearsListFormat:H,getYearControlProps:G,decadeLabelFormat:Q,classNames:ie,styles:se,unstyled:ne,minDate:ce,maxDate:Ee,locale:de,__staticSelector:We,size:Fe,__preventFocus:Ne,__stopPropagation:je,onNextDecade:ye,onPreviousDecade:ae,onNextYear:Pe,onPreviousYear:Be,onNextMonth:ft,onPreviousMonth:Se,static:he,__timezoneApplied:Ve,...tt}=n,{resolvedClassNames:ge,resolvedStyles:ke}=gp({classNames:ie,styles:se,props:n}),[Ye,Xe]=Xi({value:a?rC(a,s,i):void 0,defaultValue:o?rC(o,s,i):void 0,finalValue:rC(void 0,s,i),onChange:l}),[xt,An]=eR({type:"default",value:u,defaultValue:c,onChange:d,applyTimezone:!Ve}),gr={__staticSelector:We||"Calendar",styles:ke,classNames:ge,unstyled:ne,size:Fe},yr=Eu(),kr=h||f||1,Xt=xt||Nm("add",new Date,yr.getTimezone()),Dn=()=>{const Un=St(Xt).add(kr,"month").toDate();ft==null||ft(Un),An(Un)},rr=()=>{const Un=St(Xt).subtract(kr,"month").toDate();Se==null||Se(Un),An(Un)},ir=()=>{const Un=St(Xt).add(kr,"year").toDate();Pe==null||Pe(Un),An(Un)},ao=()=>{const Un=St(Xt).subtract(kr,"year").toDate();Be==null||Be(Un),An(Un)},Oi=()=>{const Un=St(Xt).add(10*kr,"year").toDate();ye==null||ye(Un),An(Un)},Ui=()=>{const Un=St(Xt).subtract(10*kr,"year").toDate();ae==null||ae(Un),An(Un)};return b.jsxs(_e,{ref:t,size:Fe,"data-calendar":!0,...tt,children:[Ye==="month"&&b.jsx(uj,{month:Xt,minDate:ce,maxDate:Ee,firstDayOfWeek:E,weekdayFormat:S,weekendDays:x,getDayProps:T,excludeDate:I,renderDay:P,hideOutsideDates:k,hideWeekdays:D,getDayAriaLabel:R,onNext:Dn,onPrevious:rr,hasNextLevel:i!=="month",onLevelClick:()=>Xe("year"),numberOfColumns:f,locale:de,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:$,previousLabel:p==null?void 0:p.previousMonth,previousIcon:L,monthLabelFormat:M,__onDayClick:B,__onDayMouseEnter:U,__preventFocus:Ne,__stopPropagation:je,static:he,withCellSpacing:z,highlightToday:N,...gr}),Ye==="year"&&b.jsx(lj,{year:Xt,numberOfColumns:f,minDate:ce,maxDate:Ee,monthsListFormat:V,getMonthControlProps:W,locale:de,onNext:ir,onPrevious:ao,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>Xe("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:$,previousLabel:p==null?void 0:p.previousYear,previousIcon:L,yearLabelFormat:F,__onControlMouseEnter:v,__onControlClick:(Un,Wn)=>{w&&An(Wn),Xe(rC("month",s,i)),g==null||g(Wn)},__preventFocus:Ne,__stopPropagation:je,withCellSpacing:z,...gr}),Ye==="decade"&&b.jsx(aj,{decade:Xt,minDate:ce,maxDate:Ee,yearsListFormat:H,getYearControlProps:G,locale:de,onNext:Oi,onPrevious:Ui,numberOfColumns:f,nextLabel:p==null?void 0:p.nextDecade,nextIcon:$,previousLabel:p==null?void 0:p.previousDecade,previousIcon:L,decadeLabelFormat:Q,__onControlMouseEnter:y,__onControlClick:(Un,Wn)=>{_&&An(Wn),Xe(rC("year",s,i)),m==null||m(Wn)},__preventFocus:Ne,__stopPropagation:je,withCellSpacing:z,...gr})]})});XS.classes={...aj.classes,...lj.classes,...uj.classes};XS.displayName="@mantine/dates/Calendar";function hLe(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:l,defaultDate:u,onDateChange:c,numberOfColumns:d,columnsToScroll:f,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:_,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:x,withCellSpacing:T,highlightToday:I,__updateDateOnYearSelect:P,__updateDateOnMonthSelect:k,firstDayOfWeek:D,weekdayFormat:R,weekendDays:M,getDayProps:$,excludeDate:L,renderDay:B,hideOutsideDates:U,hideWeekdays:z,getDayAriaLabel:N,monthLabelFormat:V,monthsListFormat:W,getMonthControlProps:F,yearLabelFormat:H,yearsListFormat:G,getYearControlProps:Q,decadeLabelFormat:ie,allowSingleDateInRange:se,allowDeselect:ne,minDate:ce,maxDate:Ee,locale:de,...We}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:l,defaultDate:u,onDateChange:c,numberOfColumns:d,columnsToScroll:f,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:_,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:x,withCellSpacing:T,highlightToday:I,__updateDateOnYearSelect:P,__updateDateOnMonthSelect:k,firstDayOfWeek:D,weekdayFormat:R,weekendDays:M,getDayProps:$,excludeDate:L,renderDay:B,hideOutsideDates:U,hideWeekdays:z,getDayAriaLabel:N,monthLabelFormat:V,monthsListFormat:W,getMonthControlProps:F,yearLabelFormat:H,yearsListFormat:G,getYearControlProps:Q,decadeLabelFormat:ie,allowSingleDateInRange:se,allowDeselect:ne,minDate:ce,maxDate:Ee,locale:de},others:We}}function t0e(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return St(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&St(n[1]).endOf("day").add(1,"ms").isAfter(e)}function hzt({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:l=!0}){const[u,c]=eR({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:l}),[d,f]=A.useState(e==="range"&&u[0]&&!u[1]?u[0]:null),[h,p]=A.useState(null),m=S=>{if(e==="range"){if(d instanceof Date&&!u[1]){if(St(S).isSame(d,t)&&!s){f(null),p(null),c([null,null]);return}const x=[S,d];x.sort((T,I)=>T.getTime()-I.getTime()),c(x),p(null),f(null);return}if(u[0]&&!u[1]&&St(S).isSame(u[0],t)&&!s){f(null),p(null),c([null,null]);return}c([S,null]),p(null),f(S);return}if(e==="multiple"){u.some(x=>St(x).isSame(S,t))?c(u.filter(x=>!St(x).isSame(S,t))):c([...u,S]);return}u&&o&&St(S).isSame(u,t)?c(null):c(S)},g=S=>d instanceof Date&&h instanceof Date?t0e(S,[h,d]):u[0]instanceof Date&&u[1]instanceof Date?t0e(S,u):!1,y=e==="range"?S=>{a==null||a(S),p(null)}:a,v=S=>u[0]instanceof Date&&St(S).isSame(u[0],t)?!(h&&St(h).isBefore(u[0])):!1,_=S=>u[1]instanceof Date?St(S).isSame(u[1],t):!(u[0]instanceof Date)||!h?!1:St(h).isBefore(u[0])&&St(S).isSame(u[0],t),w=S=>{if(e==="range")return{selected:u.some(T=>T&&St(T).isSame(S,t)),inRange:g(S),firstInRange:v(S),lastInRange:_(S),"data-autofocus":!!u[0]&&St(u[0]).isSame(S,t)||void 0};if(e==="multiple")return{selected:u.some(T=>T&&St(T).isSame(S,t)),"data-autofocus":!!u[0]&&St(u[0]).isSame(S,t)||void 0};const x=St(u).isSame(S,t);return{selected:x,"data-autofocus":x||void 0}},E=e==="range"&&d?p:()=>{};return A.useEffect(()=>{e==="range"&&!u[0]&&!u[1]&&f(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:u,setValue:c}}const pzt={type:"default",defaultLevel:"month",numberOfColumns:1},dj=Le((e,t)=>{const n=xe("DatePicker",pzt,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:l,onChange:u,__staticSelector:c,getDayProps:d,allowSingleDateInRange:f,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:_,...w}=n,{onDateChange:E,onRootMouseLeave:S,onHoveredDateChange:x,getControlProps:T}=hzt({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:f,value:l,defaultValue:a,onChange:u,onMouseLeave:p,applyTimezone:!_}),{resolvedClassNames:I,resolvedStyles:P}=gp({classNames:r,styles:i,props:n}),k=Eu();return b.jsx(XS,{ref:t,minLevel:"month",classNames:I,styles:P,__staticSelector:c||"DatePicker",onMouseLeave:S,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(D,R)=>{x(R),y==null||y(D,R)},__onDayClick:(D,R)=>{E(R),v==null||v(D,R)},getDayProps:D=>({...T(D),...d==null?void 0:d(D)}),...w,date:Nm("add",w.date,k.getTimezone(),_),__timezoneApplied:!0})});dj.classes=XS.classes;dj.displayName="@mantine/dates/DatePicker";function mzt(e,t){if(e===null)return null;const n=Nm("add",new Date(e),t);return Number.isNaN(n.getTime())||!e?null:n}function gzt({date:e,maxDate:t,minDate:n}){return!(e==null||Number.isNaN(e.getTime())||t&&St(e).isAfter(t,"date")||n&&St(e).isBefore(n,"date"))}const yzt={valueFormat:"MMMM D, YYYY",fixOnBlur:!0,preserveTime:!0},zte=Le((e,t)=>{const n=ZY("DateInput",yzt,e),{inputProps:r,wrapperProps:i,value:s,defaultValue:o,onChange:a,clearable:l,clearButtonProps:u,popoverProps:c,getDayProps:d,locale:f,valueFormat:h,dateParser:p,minDate:m,maxDate:g,fixOnBlur:y,onFocus:v,onBlur:_,onClick:w,readOnly:E,name:S,form:x,rightSection:T,unstyled:I,classNames:P,styles:k,allowDeselect:D,preserveTime:R,date:M,defaultDate:$,onDateChange:L,...B}=n,[U,z]=A.useState(!1),{calendarProps:N,others:V}=hLe(B),W=Eu(),H=p||(Be=>{const ft=St(Be,h,W.getLocale(f)).toDate();return Number.isNaN(ft.getTime())?mzt(Be,W.getTimezone()):ft}),G=D!==void 0?D:l,Q=Be=>Be?St(Be).locale(W.getLocale(f)).format(h):"",[ie,se,ne]=eR({type:"default",value:s,defaultValue:o,onChange:a}),[ce,Ee]=eR({type:"default",value:M,defaultValue:o||$,onChange:L});A.useEffect(()=>{ne&&Ee(s)},[ne,s]);const[de,We]=A.useState(Q(ie));A.useEffect(()=>{We(Q(ie))},[W.getLocale(f)]);const Fe=Be=>{const ft=Be.currentTarget.value;if(We(ft),z(!0),ft.trim()===""&&l)se(null);else{const Se=H(ft);gzt({date:Se,minDate:m,maxDate:g})&&(se(Se),Ee(Se))}},Ne=Be=>{_==null||_(Be),z(!1),y&&We(Q(ie))},je=Be=>{v==null||v(Be),z(!0)},ye=Be=>{w==null||w(Be),z(!0)},ae=Be=>({...d==null?void 0:d(Be),selected:St(ie).isSame(Be,"day"),onClick:()=>{const ft=R?A7t(ie,Be):Be,Se=l&&G&&St(ie).isSame(Be,"day")?null:ft;se(Se),!ne&&We(Q(Se)),z(!1)}}),Pe=T||(l&&ie&&!E?b.jsx(Xy,{variant:"transparent",onMouseDown:Be=>Be.preventDefault(),tabIndex:-1,onClick:()=>{se(null),!ne&&We(""),z(!1)},unstyled:I,size:r.size||"sm",...u}):null);return Ju(()=>{s!==void 0&&!U&&We(Q(s))},[s]),b.jsxs(b.Fragment,{children:[b.jsx(Kr.Wrapper,{...i,__staticSelector:"DateInput",children:b.jsxs($n,{opened:U,trapFocus:!1,position:"bottom-start",disabled:E,withRoles:!1,unstyled:I,...c,children:[b.jsx($n.Target,{children:b.jsx(Kr,{"data-dates-input":!0,"data-read-only":E||void 0,autoComplete:"off",ref:t,value:de,onChange:Fe,onBlur:Ne,onFocus:je,onClick:ye,readOnly:E,rightSection:Pe,...r,...V,__staticSelector:"DateInput"})}),b.jsx($n.Dropdown,{onMouseDown:Be=>Be.preventDefault(),"data-dates-dropdown":!0,children:b.jsx(XS,{__staticSelector:"DateInput",__timezoneApplied:!0,...N,classNames:P,styles:k,unstyled:I,__preventFocus:!0,minDate:m,maxDate:g,locale:f,getDayProps:ae,size:r.size,date:ce,onDateChange:Ee})})]})}),b.jsx(Fte,{name:S,form:x,value:ie,type:"default"})]})});zte.classes={...Kr.classes,...XS.classes};zte.displayName="@mantine/dates/DateInput";function vzt({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:l,valueFormatter:u}){const c=Eu(),[d,f]=M2(!1),[h,p]=eR({type:e,value:t,defaultValue:n,onChange:r}),m=x7t({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(l),formatter:u}),g=_=>{o&&(e==="default"&&f.close(),e==="range"&&_[0]&&_[1]&&f.close()),p(a&&e==="multiple"?[..._].sort((w,E)=>w.getTime()-E.getTime()):_)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:d,dropdownHandlers:f}}const bzt={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},Ute=Le((e,t)=>{const n=xe("DatePickerInput",bzt,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:l,locale:u,classNames:c,styles:d,unstyled:f,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:_,vars:w,defaultDate:E,valueFormatter:S,...x}=n,{resolvedClassNames:T,resolvedStyles:I}=gp({classNames:c,styles:d,props:n}),{calendarProps:P,others:k}=hLe(x),{_value:D,setValue:R,formattedValue:M,dropdownHandlers:$,dropdownOpened:L,onClear:B,shouldClear:U}=vzt({type:r,value:i,defaultValue:s,onChange:o,locale:u,format:a,labelSeparator:l,closeOnChange:h,sortDates:y,valueFormatter:S}),z=Array.isArray(D)?D[0]||E:D||E,N=Eu();return b.jsx(cj,{formattedValue:M,dropdownOpened:L,dropdownHandlers:$,classNames:T,styles:I,unstyled:f,ref:t,onClear:B,shouldClear:U,value:D,size:p,variant:m,dropdownType:g,...k,type:r,__staticSelector:"DatePickerInput",children:b.jsx(dj,{...P,size:p,variant:m,type:r,value:D,defaultDate:z||O7t({maxDate:_,minDate:v,timezone:N.getTimezone()}),onChange:R,locale:u,classNames:T,styles:I,unstyled:f,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:_,date:Nm("add",P.date,N.getTimezone()),__timezoneApplied:!0})})});Ute.classes={...cj.classes,...dj.classes};Ute.displayName="@mantine/dates/DatePickerInput";const TE=e=>{var t,n,r,i;return(i=(t=e.id)!==null&&t!==void 0?t:(r=(n=e.accessorKey)===null||n===void 0?void 0:n.toString)===null||r===void 0?void 0:r.call(n))!==null&&i!==void 0?i:e.header},K3=e=>{const t=[],n=r=>{r.forEach(i=>{i.columns?n(i.columns):t.push(i)})};return n(e),t},pLe=({columnDefs:e,tableOptions:t})=>{const{aggregationFns:n={},defaultDisplayColumn:r,filterFns:i={},sortingFns:s={},state:{columnFilterFns:o={}}={}}=t;return e.map(a=>{var l,u;if(a.id||(a.id=TE(a)),a.columnDefType||(a.columnDefType="data"),!((l=a.columns)===null||l===void 0)&&l.length)a.columnDefType="group",a.columns=pLe({columnDefs:a.columns,tableOptions:t});else if(a.columnDefType==="data"){if(Array.isArray(a.aggregationFn)){const c=a.aggregationFn;a.aggregationFn=(d,f,h)=>c.map(p=>{var m;return(m=n[p])===null||m===void 0?void 0:m.call(n,d,f,h)})}Object.keys(i).includes(o[a.id])&&(a.filterFn=(u=i[o[a.id]])!==null&&u!==void 0?u:i.fuzzy,a._filterFn=o[a.id]),Object.keys(s).includes(a.sortingFn)&&(a.sortingFn=s[a.sortingFn])}else a.columnDefType==="display"&&(a=Object.assign(Object.assign({},r),a));return a})},mLe=(e,t,n)=>{e.getCanPin()&&e.pin(t.getIsPinned());const r=[...n];return r.splice(r.indexOf(t.id),0,r.splice(r.indexOf(e.id),1)[0]),r},_zt=e=>{const{filterVariant:t}=e;return t==="multi-select"?"arrIncludesSome":t!=null&&t.includes("range")?"betweenInclusive":["checkbox","date","select"].includes(t||"")?"equals":"fuzzy"},wzt=(e,t,n=-1,r=0,i,s)=>zk(e,"mrt-row-create",Object.assign({},...K3(e.options.columns).map(o=>({[TE(o)]:""}))),n,r,i,s);function c_({header:e,id:t,size:n,tableOptions:r}){const{defaultDisplayColumn:i,displayColumnDefOptions:s,localization:o}=r;return Object.assign(Object.assign(Object.assign(Object.assign({},i),{header:e?o[e]:"",size:n}),s==null?void 0:s[t]),{id:t})}const gLe=e=>{const{enableRowPinning:t,rowPinningDisplayMode:n}=e;return!!(t&&!(n!=null&&n.startsWith("select")))},yLe=e=>{const{enableRowDragging:t,enableRowOrdering:n}=e;return!!(t||n)},Vte=e=>{const{enableExpanding:t,enableGrouping:n,renderDetailPanel:r,state:{grouping:i}}=e;return!!(t||n&&(i!=null&&i.length)||r)},Hte=e=>{const{createDisplayMode:t,editDisplayMode:n,enableEditing:r,enableRowActions:i,state:{creatingRow:s}}=e;return!!(i||s&&t==="row"||r&&["modal","row"].includes(n??""))},vLe=e=>!!e.enableRowSelection,bLe=e=>!!e.enableRowNumbers,_Le=e=>e.layoutMode==="grid-no-grow",Ezt=e=>[gLe(e)&&"mrt-row-pin",yLe(e)&&"mrt-row-drag",e.positionActionsColumn==="first"&&Hte(e)&&"mrt-row-actions",e.positionExpandColumn==="first"&&Vte(e)&&"mrt-row-expand",vLe(e)&&"mrt-row-select",bLe(e)&&"mrt-row-numbers"].filter(Boolean),xzt=e=>[e.positionActionsColumn==="last"&&Hte(e)&&"mrt-row-actions",e.positionExpandColumn==="last"&&Vte(e)&&"mrt-row-expand",_Le(e)&&"mrt-row-spacer"].filter(Boolean),qte=(e,t=!1)=>{const{state:{columnOrder:n=[]}}=e,r=Ezt(e),i=xzt(e),s=K3(e.columns).map(a=>TE(a));let o=t?s:Array.from(new Set([...n,...s]));return o=o.filter(a=>!r.includes(a)&&!i.includes(a)),[...r,...o,...i]},Szt=(e,t,n)=>{let r=0;return e.columnFiltersMeta[n]&&(r=s7t(e.columnFiltersMeta[n],t.columnFiltersMeta[n])),r===0?y1.alphanumeric(e,t,n):r},Tzt=Object.assign(Object.assign({},y1),{fuzzy:Szt}),Czt=(e,t)=>Math.max(...Object.values(t.columnFiltersMeta).map(n=>n.rank))-Math.max(...Object.values(e.columnFiltersMeta).map(n=>n.rank)),_t=(e,t)=>e instanceof Function?e(t):e,wLe=(e,t)=>{const{getCenterRows:n,getPrePaginationRowModel:r,getRowModel:i,getState:s,getTopRows:o,options:{createDisplayMode:a,enablePagination:l,enableRowPinning:u,manualPagination:c,positionCreatingRow:d,rowPinningDisplayMode:f}}=e,{creatingRow:h,pagination:p}=s(),m=Azt(e);let g=[];if(!m)g=!u||f!=null&&f.includes("sticky")?t?r().rows:i().rows:n();else{if(g=r().rows.sort((y,v)=>Czt(y,v)),l&&!c&&!t){const y=p.pageIndex*p.pageSize;g=g.slice(y,y+p.pageSize)}u&&!(f!=null&&f.includes("sticky"))&&(g=g.filter(y=>!y.getIsPinned()))}if(u&&(f!=null&&f.includes("sticky"))){const y=g.filter(v=>v.getIsPinned()).map(v=>v.id);g=[...o().filter(v=>!y.includes(v.id)),...g]}if(d!==void 0&&h&&a==="row"){const y=isNaN(+d)?d==="top"?0:g.length:+d;g=[...g.slice(0,y),h,...g.slice(y)]}return g},ELe=e=>{const{getState:t,options:{enableGlobalFilterRankedResults:n,manualExpanding:r,manualFiltering:i,manualGrouping:s,manualSorting:o}}=e,{expanded:a,globalFilterFn:l}=t();return!r&&!i&&!s&&!o&&n&&l==="fuzzy"&&a!==!0&&!Object.values(a).some(Boolean)},Azt=e=>{const{globalFilter:t,sorting:n}=e.getState();return ELe(e)&&t&&!Object.values(n).some(Boolean)},X3=({row:e,table:t})=>{const{options:{enableRowSelection:n}}=t;return e.getIsSelected()||_t(n,e)&&e.getCanSelectSubRows()&&e.getIsAllSubRowsSelected()},Izt=({renderedRowIndex:e=0,row:t,table:n})=>(r,i)=>{var s;const{getState:o,options:{enableBatchRowSelection:a,enableMultiRowSelection:l,enableRowPinning:u,manualPagination:c,rowPinningDisplayMode:d},refs:{lastSelectedRowId:f}}=n,{pagination:{pageIndex:h,pageSize:p}}=o(),m=c?0:p*h,g=X3({row:t,table:n});t.toggleSelected(i??!g);const y=new Set([t.id]);if(a&&l&&r.nativeEvent.shiftKey&&f.current!==null){const v=wLe(n,!0),_=v.findIndex(w=>w.id===f.current);if(_!==-1){const w=X3({row:v==null?void 0:v[_],table:n}),E=e+m,[S,x]=_<E?[_,E]:[E,_];if(g!==w)for(let T=S;T<=x;T++)v[T].toggleSelected(!g),y.add(v[T].id)}}f.current=t.id,t.getCanSelectSubRows()&&t.getIsAllSubRowsSelected()&&((s=t.subRows)===null||s===void 0||s.forEach(v=>v.toggleSelected(!1))),u&&(d!=null&&d.includes("select"))&&y.forEach(v=>{n.getRow(v).pin(g?!1:d!=null&&d.includes("bottom")?"bottom":"top")})},xLe=({table:e})=>(t,n,r)=>{const{options:{enableRowPinning:i,rowPinningDisplayMode:s,selectAllMode:o},refs:{lastSelectedRowId:a}}=e;o==="all"||r?e.toggleAllRowsSelected(n??t.target.checked):e.toggleAllPageRowsSelected(n??t.target.checked),i&&(s!=null&&s.includes("select"))&&e.setRowPinning({bottom:[],top:[]}),a.current=null},mf=e=>e.replace(/[^a-zA-Z0-9]/g,"_"),Rzt=e=>{var t,n;return typeof e.primaryShade=="number"?e.primaryShade:(n=(t=e.primaryShade)===null||t===void 0?void 0:t.dark)!==null&&n!==void 0?n:7},kzt=(e,t)=>e.colors[e.primaryColor][t??Rzt(e)];function Q3(e,t){const n=`data-${e}`;switch(typeof t){case"boolean":return t?{[n]:""}:null;case"number":return{[n]:`${t}`};case"string":return{[n]:t};default:return null}}const Pzt=Object.assign({},jD),SLe=(e,t,n,r)=>{const i=n7t(e.getValue(t),n,{threshold:Ja.MATCHES});return r(i),i.passed};SLe.autoRemove=e=>!e;const TLe=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim().includes(n.toString().toLowerCase().trim());TLe.autoRemove=e=>!e;const CLe=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim().startsWith(n.toString().toLowerCase().trim());CLe.autoRemove=e=>!e;const ALe=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim().endsWith(n.toString().toLowerCase().trim());ALe.autoRemove=e=>!e;const fj=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim()===(n==null?void 0:n.toString().toLowerCase().trim());fj.autoRemove=e=>!e;const ILe=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim()!==n.toString().toLowerCase().trim();ILe.autoRemove=e=>!e;const hj=(e,t,n)=>!isNaN(+n)&&!isNaN(+e.getValue(t))?+e.getValue(t)>+n:e.getValue(t).toString().toLowerCase().trim()>(n==null?void 0:n.toString().toLowerCase().trim());hj.autoRemove=e=>!e;const Wte=(e,t,n)=>fj(e,t,n)||hj(e,t,n);Wte.autoRemove=e=>!e;const pj=(e,t,n)=>!isNaN(+n)&&!isNaN(+e.getValue(t))?+e.getValue(t)<+n:e.getValue(t).toString().toLowerCase().trim()<(n==null?void 0:n.toString().toLowerCase().trim());pj.autoRemove=e=>!e;const Gte=(e,t,n)=>fj(e,t,n)||pj(e,t,n);Gte.autoRemove=e=>!e;const RLe=(e,t,n)=>(["",void 0].includes(n[0])||hj(e,t,n[0]))&&(!isNaN(+n[0])&&!isNaN(+n[1])&&+n[0]>+n[1]||["",void 0].includes(n[1])||pj(e,t,n[1]));RLe.autoRemove=e=>!e;const kLe=(e,t,n)=>(["",void 0].includes(n[0])||Wte(e,t,n[0]))&&(!isNaN(+n[0])&&!isNaN(+n[1])&&+n[0]>+n[1]||["",void 0].includes(n[1])||Gte(e,t,n[1]));kLe.autoRemove=e=>!e;const PLe=(e,t,n)=>!e.getValue(t).toString().trim();PLe.autoRemove=e=>!e;const NLe=(e,t,n)=>!!e.getValue(t).toString().trim();NLe.autoRemove=e=>!e;const Nzt=Object.assign(Object.assign({},hh),{between:RLe,betweenInclusive:kLe,contains:TLe,empty:PLe,endsWith:ALe,equals:fj,fuzzy:SLe,greaterThan:hj,greaterThanOrEqualTo:Wte,lessThan:pj,lessThanOrEqualTo:Gte,notEmpty:NLe,notEquals:ILe,startsWith:CLe});function Yte(e,t){var n;if(!t)return"";const r=`filter${t[0].toUpperCase()}${t.slice(1)}`;return(n=e[r])!==null&&n!==void 0?n:""}function an(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var Ozt={root:"MRT_EditActionButtons-module_root__BfxVZ"};const OLe=e=>{var{row:t,table:n,variant:r="icon"}=e,i=an(e,["row","table","variant"]);const{getState:s,options:{icons:{IconCircleX:o,IconDeviceFloppy:a},localization:l,onCreatingRowCancel:u,onCreatingRowSave:c,onEditingRowCancel:d,onEditingRowSave:f},refs:{editInputRefs:h},setCreatingRow:p,setEditingRow:m}=n,{creatingRow:g,editingRow:y,isSaving:v}=s(),_=(g==null?void 0:g.id)===t.id,w=(y==null?void 0:y.id)===t.id,E=()=>{_?(u==null||u({row:t,table:n}),p(null)):w&&(d==null||d({row:t,table:n}),m(null)),t._valuesCache={}},S=()=>{var x;(x=Object.values(h==null?void 0:h.current).filter(T=>{var I,P;return t.id===((P=(I=T==null?void 0:T.name)===null||I===void 0?void 0:I.split("_"))===null||P===void 0?void 0:P[0])}))===null||x===void 0||x.forEach(T=>{T.value!==void 0&&Object.hasOwn(t==null?void 0:t._valuesCache,T.name)&&(t._valuesCache[T.name]=T.value)}),_?c==null||c({exitCreatingMode:()=>p(null),row:t,table:n,values:t._valuesCache}):w&&(f==null||f({exitEditingMode:()=>m(null),row:t,table:n,values:t==null?void 0:t._valuesCache}))};return b.jsx(_e,Object.assign({className:yt("mrt-edit-action-buttons",Ozt.root),onClick:x=>x.stopPropagation()},i,{children:r==="icon"?b.jsxs(b.Fragment,{children:[b.jsx(on,{label:l.cancel,withinPortal:!0,children:b.jsx(Fn,{"aria-label":l.cancel,color:"red",onClick:E,variant:"subtle",children:b.jsx(o,{})})}),b.jsx(on,{label:l.save,withinPortal:!0,children:b.jsx(Fn,{"aria-label":l.save,color:"blue",loading:v,onClick:S,variant:"subtle",children:b.jsx(a,{})})})]}):b.jsxs(b.Fragment,{children:[b.jsx(yn,{onClick:E,variant:"subtle",children:l.cancel}),b.jsx(yn,{loading:v,onClick:S,variant:"filled",children:l.save})]})}))},Dzt=e=>{var{handleEdit:t,row:n,table:r}=e,i=an(e,["handleEdit","row","table"]);const{options:{editDisplayMode:s,enableEditing:o,icons:{IconDots:a,IconEdit:l},localization:u,positionActionsColumn:c,renderRowActionMenuItems:d}}=r;return b.jsxs(dn,{closeOnItemClick:!0,position:c==="first"?"bottom-start":c==="last"?"bottom-end":void 0,withinPortal:!0,children:[b.jsx(on,{label:u.rowActions,openDelay:1e3,withinPortal:!0,children:b.jsx(dn.Target,{children:b.jsx(Fn,Object.assign({"aria-label":u.rowActions,color:"gray",onClick:f=>f.stopPropagation(),size:"sm",variant:"subtle"},i,{children:b.jsx(a,{})}))})}),b.jsxs(dn.Dropdown,{onClick:f=>f.stopPropagation(),children:[o&&s!=="table"&&b.jsx(dn.Item,{leftSection:b.jsx(l,{}),onClick:t,children:u.edit}),d==null?void 0:d({row:n,table:r})]})]})},Mzt=({cell:e,row:t,table:n})=>{const{getState:r,options:{createDisplayMode:i,editDisplayMode:s,enableEditing:o,icons:{IconEdit:a},localization:{edit:l},renderRowActionMenuItems:u,renderRowActions:c},setEditingRow:d}=n,{creatingRow:f,editingRow:h}=r(),p=(f==null?void 0:f.id)===t.id,m=(h==null?void 0:h.id)===t.id,g=v=>{v.stopPropagation(),d(Object.assign({},t))},y=p&&i==="row"||m&&s==="row";return b.jsx(b.Fragment,{children:c&&!y?c({cell:e,row:t,table:n}):y?b.jsx(OLe,{row:t,table:n}):!u&&_t(o,t)?b.jsx(on,{label:l,openDelay:1e3,position:"right",withinPortal:!0,children:b.jsx(Fn,{"aria-label":l,color:"gray",disabled:!!h&&h.id!==t.id,onClick:g,size:"md",variant:"subtle",children:b.jsx(a,{})})}):u?b.jsx(Dzt,{handleEdit:g,row:t,table:n}):null})},$zt=e=>Object.assign({Cell:({cell:t,row:n,table:r})=>b.jsx(Mzt,{cell:t,row:n,table:r})},c_({header:"actions",id:"mrt-row-actions",size:70,tableOptions:e}));var Lzt={"grab-icon":"MRT_GrabHandleButton-module_grab-icon__mQimy"};const Kte=({actionIconProps:e,onDragEnd:t,onDragStart:n,table:{options:{icons:{IconGripHorizontal:r},localization:{move:i}}}})=>{var s,o;return b.jsx(on,{label:(s=e==null?void 0:e.title)!==null&&s!==void 0?s:i,openDelay:1e3,withinPortal:!0,children:b.jsx(Fn,Object.assign({"aria-label":(o=e==null?void 0:e.title)!==null&&o!==void 0?o:i,draggable:!0},e,{className:yt("mrt-grab-handle-button",Lzt["grab-icon"],e==null?void 0:e.className),color:"gray",size:"sm",onClick:a=>{var l;a.stopPropagation(),(l=e==null?void 0:e.onClick)===null||l===void 0||l.call(e,a)},onDragEnd:t,onDragStart:n,title:void 0,variant:"transparent",children:b.jsx(r,{size:"100%"})}))})},Fzt=e=>{var{row:t,rowRef:n,table:r}=e,i=an(e,["row","rowRef","table"]);const{options:{mantineRowDragHandleProps:s}}=r,o=Object.assign(Object.assign({},_t(s,{row:t,table:r})),i),a=u=>{var c;(c=o==null?void 0:o.onDragStart)===null||c===void 0||c.call(o,u),u.dataTransfer.setDragImage(n.current,0,0),r.setDraggingRow(t)},l=u=>{var c;(c=o==null?void 0:o.onDragEnd)===null||c===void 0||c.call(o,u),r.setDraggingRow(null),r.setHoveredRow(null)};return b.jsx(Kte,{actionIconProps:o,onDragEnd:l,onDragStart:a,table:r})},jzt=e=>Object.assign({Cell:({row:t,rowRef:n,table:r})=>b.jsx(Fzt,{row:t,rowRef:n,table:r}),grow:!1},c_({header:"move",id:"mrt-row-drag",size:60,tableOptions:e}));var lO={root:"MRT_ExpandAllButton-module_root__gkBZD",chevron:"MRT_ExpandAllButton-module_chevron__Iep0j",up:"MRT_ExpandAllButton-module_up__Xth3U",right:"MRT_ExpandAllButton-module_right__bS4L-"};const Bzt=e=>{var t,n,{table:r}=e,i=an(e,["table"]);const{getCanSomeRowsExpand:s,getIsAllRowsExpanded:o,getIsSomeRowsExpanded:a,getState:l,options:{icons:{IconChevronsDown:u},localization:c,mantineExpandAllButtonProps:d,renderDetailPanel:f},toggleAllRowsExpanded:h}=r,{density:p,isLoading:m}=l(),g=Object.assign(Object.assign({},_t(d,{table:r})),i),y=o();return b.jsx(on,{label:((t=g==null?void 0:g.title)!==null&&t!==void 0?t:y)?c.collapseAll:c.expandAll,openDelay:1e3,withinPortal:!0,children:b.jsx(Fn,Object.assign({"aria-label":c.expandAll,color:"gray",variant:"subtle"},g,{className:yt("mrt-expand-all-button",lO.root,g==null?void 0:g.className,p),disabled:m||!f&&!s(),onClick:()=>h(!y),title:void 0,children:(n=g==null?void 0:g.children)!==null&&n!==void 0?n:b.jsx(u,{className:yt(lO.chevron,y?lO.up:a()?lO.right:void 0)})}))})};var iC={root:"MRT_ExpandButton-module_root__IFYio","root-ltr":"MRT_ExpandButton-module_root-ltr__FHNnp",chevron:"MRT_ExpandButton-module_chevron__XzC5P",right:"MRT_ExpandButton-module_right__-pC-A",up:"MRT_ExpandButton-module_up__TZGBo","root-rtl":"MRT_ExpandButton-module_root-rtl__zoudS"};const n0e=e=>{var t,n,{row:r,table:i}=e,s=an(e,["row","table"]);const o=El(),{options:{icons:{IconChevronDown:a},localization:l,mantineExpandButtonProps:u,positionExpandColumn:c,renderDetailPanel:d}}=i,f=Object.assign(Object.assign({},_t(u,{row:r,table:i})),s),h=r.getCanExpand(),p=r.getIsExpanded(),m=!!(d!=null&&d({row:r,table:i})),g=v=>{var _;v.stopPropagation(),r.toggleExpanded(),(_=f==null?void 0:f.onClick)===null||_===void 0||_.call(f,v)},y=o.dir==="rtl"||c==="last";return b.jsx(on,{disabled:!h&&!m,label:((t=f==null?void 0:f.title)!==null&&t!==void 0?t:p)?l.collapse:l.expand,openDelay:1e3,withinPortal:!0,children:b.jsx(Fn,Object.assign({"aria-label":l.expand,color:"gray",disabled:!h&&!m,variant:"subtle"},f,{__vars:{"--mrt-row-depth":`${r.depth}`},className:yt("mrt-expand-button",iC.root,iC[`root-${y?"rtl":"ltr"}`],f==null?void 0:f.className),onClick:g,title:void 0,children:(n=f==null?void 0:f.children)!==null&&n!==void 0?n:b.jsx(a,{className:yt("mrt-expand-button-chevron",iC.chevron,!h&&!d?iC.right:p?iC.up:void 0)})}))})},zzt=e=>{var t;const{defaultColumn:n,enableExpandAll:r,groupedColumnMode:i,positionExpandColumn:s,renderDetailPanel:o,state:{grouping:a}}=e,l=s==="last"?{align:"right"}:void 0;return Object.assign({Cell:({cell:u,column:c,row:d,table:f})=>{var h,p,m;const g={row:d,table:f},y=(h=d.subRows)===null||h===void 0?void 0:h.length;return e.groupedColumnMode==="remove"&&d.groupingColumnId?b.jsxs(It,{align:"center",gap:"0.25rem",children:[b.jsx(n0e,Object.assign({},g)),b.jsx(on,{label:f.getColumn(d.groupingColumnId).columnDef.header,openDelay:1e3,position:"right",children:b.jsx("span",{children:d.groupingValue})}),!!y&&b.jsxs("span",{children:["(",y,")"]})]}):b.jsxs(b.Fragment,{children:[b.jsx(n0e,Object.assign({},g)),(m=(p=c.columnDef).GroupedCell)===null||m===void 0?void 0:m.call(p,{cell:u,column:c,row:d,table:f})]})},Header:r?({table:u})=>{var c;return b.jsxs(It,{align:"center",children:[b.jsx(Bzt,{table:u}),i==="remove"&&((c=a==null?void 0:a.map(d=>u.getColumn(d).columnDef.header))===null||c===void 0?void 0:c.join(", "))]})}:void 0,mantineTableBodyCellProps:l,mantineTableHeadCellProps:l},c_({header:"expand",id:"mrt-row-expand",size:i==="remove"?(t=n==null?void 0:n.size)!==null&&t!==void 0?t:180:o?r?60:70:100,tableOptions:e}))},Uzt=e=>{const{localization:t,rowNumberDisplayMode:n}=e,{pagination:{pageIndex:r,pageSize:i}}=e.state;return Object.assign({Cell:({renderedRowIndex:s=0,row:o})=>{var a;return((a=n==="static"?s+i*r:o.index)!==null&&a!==void 0?a:0)+1},Header:()=>t.rowNumber,grow:!1},c_({header:"rowNumbers",id:"mrt-row-numbers",size:50,tableOptions:e}))},u7=e=>{var{pinningPosition:t,row:n,table:r}=e,i=an(e,["pinningPosition","row","table"]);const{options:{icons:{IconPinned:s,IconX:o},localization:a,rowPinningDisplayMode:l}}=r,u=n.getIsPinned(),[c,d]=A.useState(!1),f=h=>{d(!1),h.stopPropagation(),n.pin(u?!1:t)};return b.jsx(on,{label:u?a.unpin:a.pin,openDelay:1e3,opened:c,children:b.jsx(Fn,Object.assign({"aria-label":a.pin,color:"gray",onClick:f,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),size:"xs",style:{height:"24px",width:"24px"},variant:"subtle"},i,{children:u?b.jsx(o,{}):b.jsx(s,{fontSize:"small",style:{transform:`rotate(${l==="sticky"?135:t==="top"?180:0}deg)`}})}))})},Vzt=e=>{var{row:t,table:n}=e,r=an(e,["row","table"]);const{getState:i,options:{enableRowPinning:s,rowPinningDisplayMode:o}}=n,{density:a}=i();if(!_t(s,t))return null;const u=Object.assign({row:t,table:n},r);return o==="top-and-bottom"&&!t.getIsPinned()?b.jsxs(_e,{style:{display:"flex",flexDirection:a==="xs"?"row":"column"},children:[b.jsx(u7,Object.assign({pinningPosition:"top"},u)),b.jsx(u7,Object.assign({pinningPosition:"bottom"},u))]}):b.jsx(u7,Object.assign({pinningPosition:o==="bottom"?"bottom":"top"},u))},Hzt=e=>Object.assign({Cell:({row:t,table:n})=>b.jsx(Vzt,{row:t,table:n}),grow:!1},c_({header:"pin",id:"mrt-row-pin",size:60,tableOptions:e})),Bq=e=>{var t,{renderedRowIndex:n=0,row:r,table:i}=e,s=an(e,["renderedRowIndex","row","table"]);const{getState:o,options:{enableMultiRowSelection:a,localization:l,mantineSelectAllCheckboxProps:u,mantineSelectCheckboxProps:c,selectAllMode:d,selectDisplayMode:f}}=i,{density:h,isLoading:p}=o(),m=!r,g=m?d==="page"?i.getIsAllPageRowsSelected():i.getIsAllRowsSelected():void 0,y=m?g:X3({row:r,table:i}),v=Object.assign(Object.assign({},m?_t(u,{table:i}):_t(c,{row:r,table:i})),s),_=r?Izt({renderedRowIndex:n,row:r,table:i}):void 0,w=xLe({table:i}),E=Object.assign(Object.assign({"aria-label":m?l.toggleSelectAll:l.toggleSelectRow,checked:y,disabled:p||r&&!r.getCanSelect()||(r==null?void 0:r.id)==="mrt-row-create",onChange:S=>{S.stopPropagation(),m?w(S):_(S)},size:h==="xs"?"sm":"md"},v),{onClick:S=>{var x;S.stopPropagation(),(x=v==null?void 0:v.onClick)===null||x===void 0||x.call(v,S)},title:void 0});return b.jsx(on,{label:(t=v==null?void 0:v.title)!==null&&t!==void 0?t:m?l.toggleSelectAll:l.toggleSelectRow,openDelay:1e3,withinPortal:!0,children:b.jsx("span",{children:f==="switch"?b.jsx(z0,Object.assign({},E)):f==="radio"||a===!1?b.jsx(ay,Object.assign({},E)):b.jsx(_f,Object.assign({indeterminate:!y&&m?i.getIsSomeRowsSelected():(r==null?void 0:r.getIsSomeSelected())&&r.getCanSelectSubRows()},E))})})},qzt=e=>{const{enableMultiRowSelection:t,enableSelectAll:n}=e;return Object.assign({Cell:({renderedRowIndex:r,row:i,table:s})=>b.jsx(Bq,{renderedRowIndex:r,row:i,table:s}),Header:n&&t?({table:r})=>b.jsx(Bq,{table:r}):void 0,grow:!1},c_({header:"select",id:"mrt-row-select",size:n?60:70,tableOptions:e}))},Wzt={IconArrowAutofitContent:ktt,IconArrowsSort:Ott,IconBaselineDensityLarge:Mtt,IconBaselineDensityMedium:$tt,IconBaselineDensitySmall:Ltt,IconBoxMultiple:Ftt,IconChevronDown:Utt,IconChevronLeft:Htt,IconChevronLeftPipe:Vtt,IconChevronRight:Wtt,IconChevronRightPipe:qtt,IconChevronsDown:Gtt,IconCircleX:Ytt,IconClearAll:Ktt,IconColumns:Xtt,IconDeviceFloppy:Jtt,IconDots:Ztt,IconDotsVertical:_Se,IconEdit:wSe,IconEyeOff:ent,IconFilter:int,IconFilterCog:nnt,IconFilterOff:rnt,IconGripHorizontal:snt,IconMaximize:unt,IconMinimize:cnt,IconPinned:fnt,IconPinnedOff:dnt,IconSearch:SSe,IconSearchOff:mnt,IconSortAscending:gnt,IconSortDescending:ynt,IconX:i6},Gzt={actions:"Actions",and:"and",cancel:"Cancel",changeFilterMode:"Change filter mode",changeSearchMode:"Change search mode",clearFilter:"Clear filter",clearSearch:"Clear search",clearSelection:"Clear selection",clearSort:"Clear sort",clickToCopy:"Click to copy",copy:"Copy",collapse:"Collapse",collapseAll:"Collapse all",columnActions:"Column Actions",copiedToClipboard:"Copied to clipboard",dropToGroupBy:"Drop to group by {column}",edit:"Edit",expand:"Expand",expandAll:"Expand all",filterArrIncludes:"Includes",filterArrIncludesAll:"Includes all",filterArrIncludesSome:"Includes",filterBetween:"Between",filterBetweenInclusive:"Between Inclusive",filterByColumn:"Filter by {column}",filterContains:"Contains",filterEmpty:"Empty",filterEndsWith:"Ends With",filterEquals:"Equals",filterEqualsString:"Equals",filterFuzzy:"Fuzzy",filterGreaterThan:"Greater Than",filterGreaterThanOrEqualTo:"Greater Than Or Equal To",filterInNumberRange:"Between",filterIncludesString:"Contains",filterIncludesStringSensitive:"Contains",filterLessThan:"Less Than",filterLessThanOrEqualTo:"Less Than Or Equal To",filterMode:"Filter Mode: {filterType}",filterNotEmpty:"Not Empty",filterNotEquals:"Not Equals",filterStartsWith:"Starts With",filterWeakEquals:"Equals",filteringByColumn:"Filtering by {column} - {filterType} {filterValue}",goToFirstPage:"Go to first page",goToLastPage:"Go to last page",goToNextPage:"Go to next page",goToPreviousPage:"Go to previous page",grab:"Grab",groupByColumn:"Group by {column}",groupedBy:"Grouped by ",hideAll:"Hide all",hideColumn:"Hide {column} column",max:"Max",min:"Min",move:"Move",noRecordsToDisplay:"No records to display",noResultsFound:"No results found",of:"of",or:"or",pin:"Pin",pinToLeft:"Pin to left",pinToRight:"Pin to right",resetColumnSize:"Reset column size",resetOrder:"Reset order",rowActions:"Row Actions",rowNumber:"#",rowNumbers:"Row Numbers",rowsPerPage:"Rows per page",save:"Save",search:"Search",selectedCountOfRowCountRowsSelected:"{selectedCount} of {rowCount} row(s) selected",select:"Select",showAll:"Show all",showAllColumns:"Show all columns",showHideColumns:"Show/Hide columns",showHideFilters:"Show/Hide filters",showHideSearch:"Show/Hide search",sortByColumnAsc:"Sort by {column} ascending",sortByColumnDesc:"Sort by {column} descending",sortedByColumnAsc:"Sorted by {column} ascending",sortedByColumnDesc:"Sorted by {column} descending",thenBy:", then by ",toggleDensity:"Toggle density",toggleFullScreen:"Toggle full screen",toggleSelectAll:"Toggle select all",toggleSelectRow:"Toggle select row",toggleVisibility:"Toggle visibility",ungroupByColumn:"Ungroup by {column}",unpin:"Unpin",unpinAll:"Unpin all"},Yzt={filterVariant:"text",maxSize:1e3,minSize:40,size:180},DLe={columnDefType:"display",enableClickToCopy:!1,enableColumnActions:!1,enableColumnDragging:!1,enableColumnFilter:!1,enableColumnOrdering:!1,enableEditing:!1,enableGlobalFilter:!1,enableGrouping:!1,enableHiding:!1,enableResizing:!1,enableSorting:!1},Kzt=e=>{var t,{aggregationFns:n,autoResetExpanded:r=!1,columnFilterDisplayMode:i="subheader",columnResizeDirection:s,columnResizeMode:o="onChange",createDisplayMode:a="modal",defaultColumn:l,defaultDisplayColumn:u,editDisplayMode:c="modal",enableBatchRowSelection:d=!0,enableBottomToolbar:f=!0,enableColumnActions:h=!0,enableColumnFilters:p=!0,enableColumnOrdering:m=!1,enableColumnPinning:g=!1,enableColumnResizing:y=!1,enableColumnVirtualization:v,enableDensityToggle:_=!0,enableExpandAll:w=!0,enableExpanding:E,enableFacetedValues:S=!1,enableFilterMatchHighlighting:x=!0,enableFilters:T=!0,enableFullScreenToggle:I=!0,enableGlobalFilter:P=!0,enableGlobalFilterRankedResults:k=!0,enableGrouping:D=!1,enableHeaderActionsHoverReveal:R=!1,enableHiding:M=!0,enableMultiRowSelection:$=!0,enableMultiSort:L=!0,enablePagination:B=!0,enableRowPinning:U=!1,enableRowSelection:z=!1,enableRowVirtualization:N,enableSelectAll:V=!0,enableSorting:W=!0,enableStickyHeader:F=!1,enableTableFooter:H=!0,enableTableHead:G=!0,enableToolbarInternalActions:Q=!0,enableTopToolbar:ie=!0,filterFns:se,icons:ne,layoutMode:ce,localization:Ee,manualFiltering:de,manualGrouping:We,manualPagination:Fe,manualSorting:Ne,paginationDisplayMode:je="default",positionActionsColumn:ye="first",positionCreatingRow:ae="top",positionExpandColumn:Pe="first",positionGlobalFilter:Be="right",positionPagination:ft="bottom",positionToolbarAlertBanner:Se="top",positionToolbarDropZone:he="top",rowNumberDisplayMode:Ve="static",rowPinningDisplayMode:tt="sticky",selectAllMode:ge="page",sortingFns:ke}=e,Ye=an(e,["aggregationFns","autoResetExpanded","columnFilterDisplayMode","columnResizeDirection","columnResizeMode","createDisplayMode","defaultColumn","defaultDisplayColumn","editDisplayMode","enableBatchRowSelection","enableBottomToolbar","enableColumnActions","enableColumnFilters","enableColumnOrdering","enableColumnPinning","enableColumnResizing","enableColumnVirtualization","enableDensityToggle","enableExpandAll","enableExpanding","enableFacetedValues","enableFilterMatchHighlighting","enableFilters","enableFullScreenToggle","enableGlobalFilter","enableGlobalFilterRankedResults","enableGrouping","enableHeaderActionsHoverReveal","enableHiding","enableMultiRowSelection","enableMultiSort","enablePagination","enableRowPinning","enableRowSelection","enableRowVirtualization","enableSelectAll","enableSorting","enableStickyHeader","enableTableFooter","enableTableHead","enableToolbarInternalActions","enableTopToolbar","filterFns","icons","layoutMode","localization","manualFiltering","manualGrouping","manualPagination","manualSorting","paginationDisplayMode","positionActionsColumn","positionCreatingRow","positionExpandColumn","positionGlobalFilter","positionPagination","positionToolbarAlertBanner","positionToolbarDropZone","rowNumberDisplayMode","rowPinningDisplayMode","selectAllMode","sortingFns"]);const Xe=El();return ne=A.useMemo(()=>Object.assign(Object.assign({},Wzt),ne),[ne]),Ee=A.useMemo(()=>Object.assign(Object.assign({},Gzt),Ee),[Ee]),n=A.useMemo(()=>Object.assign(Object.assign({},Pzt),n),[]),se=A.useMemo(()=>Object.assign(Object.assign({},Nzt),se),[]),ke=A.useMemo(()=>Object.assign(Object.assign({},Tzt),ke),[]),l=A.useMemo(()=>Object.assign(Object.assign({},Yzt),l),[l]),u=A.useMemo(()=>Object.assign(Object.assign({},DLe),u),[u]),[v,N]=A.useMemo(()=>[v,N],[]),s||(s=Xe.dir||"ltr"),ce=ce||(y?"grid-no-grow":"semantic"),ce==="semantic"&&(N||v)&&(ce="grid"),N&&(F=!0),B===!1&&Fe===void 0&&(Fe=!0),!((t=Ye.data)===null||t===void 0)&&t.length||(de=!0,We=!0,Fe=!0,Ne=!0),Object.assign({aggregationFns:n,autoResetExpanded:r,columnFilterDisplayMode:i,columnResizeDirection:s,columnResizeMode:o,createDisplayMode:a,defaultColumn:l,defaultDisplayColumn:u,editDisplayMode:c,enableBatchRowSelection:d,enableBottomToolbar:f,enableColumnActions:h,enableColumnFilters:p,enableColumnOrdering:m,enableColumnPinning:g,enableColumnResizing:y,enableColumnVirtualization:v,enableDensityToggle:_,enableExpandAll:w,enableExpanding:E,enableFacetedValues:S,enableFilterMatchHighlighting:x,enableFilters:T,enableFullScreenToggle:I,enableGlobalFilter:P,enableGlobalFilterRankedResults:k,enableGrouping:D,enableHeaderActionsHoverReveal:R,enableHiding:M,enableMultiRowSelection:$,enableMultiSort:L,enablePagination:B,enableRowPinning:U,enableRowSelection:z,enableRowVirtualization:N,enableSelectAll:V,enableSorting:W,enableStickyHeader:F,enableTableFooter:H,enableTableHead:G,enableToolbarInternalActions:Q,enableTopToolbar:ie,filterFns:se,getCoreRowModel:B9t(),getExpandedRowModel:E||D?z9t():void 0,getFacetedMinMaxValues:S?U9t():void 0,getFacetedRowModel:S?q9t():void 0,getFacetedUniqueValues:S?W9t():void 0,getFilteredRowModel:p||P||T?G9t():void 0,getGroupedRowModel:D?Y9t():void 0,getPaginationRowModel:B?X9t():void 0,getSortedRowModel:W?Q9t():void 0,getSubRows:xt=>xt==null?void 0:xt.subRows,icons:ne,layoutMode:ce,localization:Ee,manualFiltering:de,manualGrouping:We,manualPagination:Fe,manualSorting:Ne,paginationDisplayMode:je,positionActionsColumn:ye,positionCreatingRow:ae,positionExpandColumn:Pe,positionGlobalFilter:Be,positionPagination:ft,positionToolbarAlertBanner:Se,positionToolbarDropZone:he,rowNumberDisplayMode:Ve,rowPinningDisplayMode:tt,selectAllMode:ge,sortingFns:ke},Ye)},c7={children:null,style:{minWidth:0,padding:0,width:0}},Xzt=e=>Object.assign(Object.assign(Object.assign(Object.assign({},c_({id:"mrt-row-spacer",size:0,tableOptions:e})),{grow:!0}),DLe),{mantineTableBodyCellProps:c7,mantineTableFooterCellProps:c7,mantineTableHeadCellProps:c7}),Qzt=e=>{const{getIsSomeRowsPinned:t,getPrePaginationRowModel:n,getState:r,options:{enablePagination:i,enableRowPinning:s,rowCount:o}}=e,{columnOrder:a,density:l,globalFilter:u,isFullScreen:c,isLoading:d,pagination:f,showSkeletons:h,sorting:p}=r(),m=e.options.columns.length,g=o??n().rows.length,y=A.useReducer(()=>({}),{})[1],v=A.useRef(),_=A.useRef();A.useEffect(()=>{typeof window<"u"&&(v.current=document.body.style.height)},[]),A.useEffect(()=>{if(typeof window<"u")if(c)_.current=document.body.getBoundingClientRect().top,document.body.style.height="100dvh";else{if(document.body.style.height=v.current,!_.current)return;window.scrollTo({behavior:"instant",top:-1*_.current})}},[c]),A.useEffect(()=>{m!==a.length&&e.setColumnOrder(qte(e.options))},[m]),A.useEffect(()=>{if(!i||d||h)return;const{pageIndex:E,pageSize:S}=f;E*S>=g&&e.setPageIndex(Math.ceil(g/S)-1)},[g]);const w=A.useRef(p);A.useEffect(()=>{p.length&&(w.current=p)},[p]),A.useEffect(()=>{ELe(e)&&(u?e.setSorting([]):e.setSorting(()=>w.current||[]))},[u]),A.useEffect(()=>{s&&t()&&setTimeout(()=>{y()},150)},[l])},Jzt=e=>{var t,n,r,i,s,o,a,l,u,c,d,f,h,p,m,g,y,v,_,w,E,S,x,T,I,P,k,D,R,M,$,L,B;const U=A.useRef(null),z=A.useRef(null),N=A.useRef({}),V=A.useRef({}),W=A.useRef(null),F=A.useRef(null),H=A.useRef({}),G=A.useRef(null),Q=A.useRef(null),ie=A.useRef(null),se=A.useRef(null),ne=A.useMemo(()=>{var $r,ni,ri;const ue=($r=e.initialState)!==null&&$r!==void 0?$r:{};return ue.columnOrder=(ni=ue.columnOrder)!==null&&ni!==void 0?ni:qte(Object.assign(Object.assign({},e),{state:Object.assign(Object.assign({},e.initialState),e.state)})),ue.globalFilterFn=(ri=e.globalFilterFn)!==null&&ri!==void 0?ri:"fuzzy",ue},[]);e.initialState=ne;const[ce,Ee]=A.useState((t=ne.creatingRow)!==null&&t!==void 0?t:null),[de,We]=A.useState(()=>Object.assign({},...K3(e.columns).map($r=>{var ni,ri,ue,te;return{[TE($r)]:$r.filterFn instanceof Function?(ni=$r.filterFn.name)!==null&&ni!==void 0?ni:"custom":(te=(ri=$r.filterFn)!==null&&ri!==void 0?ri:(ue=ne==null?void 0:ne.columnFilterFns)===null||ue===void 0?void 0:ue[TE($r)])!==null&&te!==void 0?te:_zt($r)}}))),[Fe,Ne]=A.useState((n=ne.columnOrder)!==null&&n!==void 0?n:[]),[je,ye]=A.useState((r=ne.columnSizingInfo)!==null&&r!==void 0?r:{}),[ae,Pe]=A.useState((i=ne==null?void 0:ne.density)!==null&&i!==void 0?i:"md"),[Be,ft]=A.useState((s=ne.draggingColumn)!==null&&s!==void 0?s:null),[Se,he]=A.useState((o=ne.draggingRow)!==null&&o!==void 0?o:null),[Ve,tt]=A.useState((a=ne.editingCell)!==null&&a!==void 0?a:null),[ge,ke]=A.useState((l=ne.editingRow)!==null&&l!==void 0?l:null),[Ye,Xe]=A.useState((u=ne.globalFilterFn)!==null&&u!==void 0?u:"fuzzy"),[xt,An]=A.useState((c=ne.grouping)!==null&&c!==void 0?c:[]),[gr,yr]=A.useState((d=ne.hoveredColumn)!==null&&d!==void 0?d:null),[kr,Xt]=A.useState((f=ne.hoveredRow)!==null&&f!==void 0?f:null),[Dn,rr]=A.useState((h=ne==null?void 0:ne.isFullScreen)!==null&&h!==void 0?h:!1),[ir,ao]=A.useState((p=ne==null?void 0:ne.pagination)!==null&&p!==void 0?p:{pageIndex:0,pageSize:10}),[Oi,Ui]=A.useState((m=ne==null?void 0:ne.showAlertBanner)!==null&&m!==void 0?m:!1),[Un,Wn]=A.useState((g=ne==null?void 0:ne.showColumnFilters)!==null&&g!==void 0?g:!1),[Zi,Ed]=A.useState((y=ne==null?void 0:ne.showGlobalFilter)!==null&&y!==void 0?y:!1),[Va,gc]=A.useState((v=ne==null?void 0:ne.showToolbarDropZone)!==null&&v!==void 0?v:!1);e.state=Object.assign({columnFilterFns:de,columnOrder:Fe,columnSizingInfo:je,creatingRow:ce,density:ae,draggingColumn:Be,draggingRow:Se,editingCell:Ve,editingRow:ge,globalFilterFn:Ye,grouping:xt,hoveredColumn:gr,hoveredRow:kr,isFullScreen:Dn,pagination:ir,showAlertBanner:Oi,showColumnFilters:Un,showGlobalFilter:Zi,showToolbarDropZone:Va},e.state);const mt=e,fi=A.useRef([]);mt.columns=mt.state.columnSizingInfo.isResizingColumn||mt.state.draggingColumn||mt.state.draggingRow?fi.current:pLe({columnDefs:[...[gLe(mt)&&Hzt(mt),yLe(mt)&&jzt(mt),Hte(mt)&&$zt(mt),Vte(mt)&&zzt(mt),vLe(mt)&&qzt(mt),bLe(mt)&&Uzt(mt)].filter(Boolean),...mt.columns,...[_Le(mt)&&Xzt(mt)].filter(Boolean)],tableOptions:mt}),fi.current=mt.columns,mt.data=A.useMemo(()=>(mt.state.isLoading||mt.state.showSkeletons)&&!mt.data.length?[...Array(Math.min(mt.state.pagination.pageSize,20)).fill(null)].map(()=>Object.assign({},...K3(mt.columns).map($r=>({[TE($r)]:null})))):mt.data,[mt.data,mt.state.isLoading,mt.state.showSkeletons]);const wn=J9t(Object.assign(Object.assign({onColumnOrderChange:Ne,onColumnSizingInfoChange:ye,onGroupingChange:An,onPaginationChange:ao},mt),{globalFilterFn:(_=mt.filterFns)===null||_===void 0?void 0:_[Ye??"fuzzy"]}));return wn.refs={bottomToolbarRef:z,editInputRefs:N,filterInputRefs:V,lastSelectedRowId:U,searchInputRef:W,tableContainerRef:F,tableFooterRef:se,tableHeadCellRefs:H,tableHeadRef:ie,tablePaperRef:G,topToolbarRef:Q},wn.setCreatingRow=$r=>{var ni,ri;let ue=$r;$r===!0&&(ue=wzt(wn)),(ri=(ni=mt==null?void 0:mt.onCreatingRowChange)===null||ni===void 0?void 0:ni.call(mt,ue))!==null&&ri!==void 0||Ee(ue)},wn.setColumnFilterFns=(w=mt.onColumnFilterFnsChange)!==null&&w!==void 0?w:We,wn.setDensity=(E=mt.onDensityChange)!==null&&E!==void 0?E:Pe,wn.setDraggingColumn=(S=mt.onDraggingColumnChange)!==null&&S!==void 0?S:ft,wn.setDraggingRow=(x=mt.onDraggingRowChange)!==null&&x!==void 0?x:he,wn.setEditingCell=(T=mt.onEditingCellChange)!==null&&T!==void 0?T:tt,wn.setEditingRow=(I=mt.onEditingRowChange)!==null&&I!==void 0?I:ke,wn.setGlobalFilterFn=(P=mt.onGlobalFilterFnChange)!==null&&P!==void 0?P:Xe,wn.setHoveredColumn=(k=mt.onHoveredColumnChange)!==null&&k!==void 0?k:yr,wn.setHoveredRow=(D=mt.onHoveredRowChange)!==null&&D!==void 0?D:Xt,wn.setIsFullScreen=(R=mt.onIsFullScreenChange)!==null&&R!==void 0?R:rr,wn.setShowAlertBanner=(M=mt.onShowAlertBannerChange)!==null&&M!==void 0?M:Ui,wn.setShowColumnFilters=($=mt.onShowColumnFiltersChange)!==null&&$!==void 0?$:Wn,wn.setShowGlobalFilter=(L=mt.onShowGlobalFilterChange)!==null&&L!==void 0?L:Ed,wn.setShowToolbarDropZone=(B=mt.onShowToolbarDropZoneChange)!==null&&B!==void 0?B:gc,Qzt(wn),wn},MLe=e=>Jzt(Kzt(e)),$Le=(e,t)=>{const n=q3e(e);return t===void 0||(t>=0&&t<Math.max(e.startIndex-e.overscan,0)&&n.unshift(t),t>=0&&t>e.endIndex+e.overscan&&n.push(t)),n},Zzt=e=>{var t,n,r,i;const{getLeftLeafColumns:s,getRightLeafColumns:o,getState:a,getVisibleLeafColumns:l,options:{columnVirtualizerInstanceRef:u,columnVirtualizerOptions:c,enableColumnPinning:d,enableColumnVirtualization:f},refs:{tableContainerRef:h}}=e,{columnPinning:p,draggingColumn:m}=a();if(!f)return;const g=_t(c,{table:e}),y=l(),[v,_]=A.useMemo(()=>d?[s().map(P=>P.getPinnedIndex()),o().map(P=>y.length-P.getPinnedIndex()-1).sort((P,k)=>P-k)]:[[],[]],[y.length,p,d]),w=v.length,E=_.length,S=A.useMemo(()=>m!=null&&m.id?y.findIndex(P=>P.id===(m==null?void 0:m.id)):void 0,[m==null?void 0:m.id]),x=G3e(Object.assign({count:y.length,estimateSize:P=>y[P].getSize(),getScrollElement:()=>h.current,horizontal:!0,overscan:3,rangeExtractor:A.useCallback(P=>{const k=$Le(P,S);return!w&&!E?k:[...new Set([...v,...k,..._])]},[v,_,S])},g)),T=x.getVirtualItems();x.virtualColumns=T;const I=T.length;if(I){const P=x.getTotalSize(),k=((t=T[w])===null||t===void 0?void 0:t.start)||0,D=((n=T[v.length-1])===null||n===void 0?void 0:n.end)||0,R=((r=T[I-E])===null||r===void 0?void 0:r.start)||0,M=((i=T[I-E-1])===null||i===void 0?void 0:i.end)||0;x.virtualPaddingLeft=k-D,x.virtualPaddingRight=P-M-(E?P-R:0)}return u&&(u.current=x),x},eUt=(e,t)=>{var n;const{getRowModel:r,getState:i,options:{enableRowVirtualization:s,renderDetailPanel:o,rowVirtualizerInstanceRef:a,rowVirtualizerOptions:l},refs:{tableContainerRef:u}}=e,{density:c,draggingRow:d,expanded:f}=i();if(!s)return;const h=_t(l,{table:e}),p=(n=t==null?void 0:t.length)!==null&&n!==void 0?n:r().rows.length,m=c==="xs"?42.7:c==="md"?54.7:70.7,g=G3e(Object.assign({count:o?p*2:p,estimateSize:y=>o&&y%2===1?f===!0?100:0:m,getScrollElement:()=>u.current,measureElement:typeof window<"u"&&navigator.userAgent.indexOf("Firefox")===-1?y=>y==null?void 0:y.getBoundingClientRect().height:void 0,overscan:4,rangeExtractor:A.useCallback(y=>{var v;return $Le(y,(v=d==null?void 0:d.index)!==null&&v!==void 0?v:0)},[d])},h));return g.virtualRows=g.getVirtualItems(),a&&(a.current=g),g},tUt=e=>{const{getRowModel:t,getState:n,options:{data:r,enableGlobalFilterRankedResults:i,positionCreatingRow:s}}=e,{creatingRow:o,expanded:a,globalFilter:l,pagination:u,rowPinning:c,sorting:d}=n();return A.useMemo(()=>wLe(e),[o,r,i,a,t().rows,l,u.pageIndex,u.pageSize,s,c,d])};var nUt={root:"MRT_TablePaper-module_root__q0v5L"},d7={root:"MRT_TableContainer-module_root__JIsGB","root-sticky":"MRT_TableContainer-module_root-sticky__uC4qx","root-fullscreen":"MRT_TableContainer-module_root-fullscreen__aM8Jg"},r0e={root:"MRT_Table-module_root__ms2uS","root-grid":"MRT_Table-module_root-grid__2Pynz"},Ad={root:"MRT_TableBody-module_root__kGhRy","root-grid":"MRT_TableBody-module_root-grid__WdOGg","root-no-rows":"MRT_TableBody-module_root-no-rows__iyi9K","root-virtualized":"MRT_TableBody-module_root-virtualized__TxPAi","empty-row-tr-grid":"MRT_TableBody-module_empty-row-tr-grid__LTgxw","empty-row-td-grid":"MRT_TableBody-module_empty-row-td-grid__pzlgG","empty-row-td-content":"MRT_TableBody-module_empty-row-td-content__Cc2XW",pinned:"MRT_TableBody-module_pinned__XHpcs"},f7={root:"MRT_TableBodyRow-module_root__2c3D4","root-grid":"MRT_TableBodyRow-module_root-grid__AwXTe","root-virtualized":"MRT_TableBodyRow-module_root-virtualized__zYgxq"},Mv={root:"MRT_TableBodyCell-module_root__Wf-zi","root-grid":"MRT_TableBodyCell-module_root-grid__zIuC-","root-virtualized":"MRT_TableBodyCell-module_root-virtualized__jLl8R","root-data-col":"MRT_TableBodyCell-module_root-data-col__HHcxc","root-nowrap":"MRT_TableBodyCell-module_root-nowrap__-k1Jo","root-cursor-pointer":"MRT_TableBodyCell-module_root-cursor-pointer__4kw7J","root-editable-hover":"MRT_TableBodyCell-module_root-editable-hover__2DKSa"};const h7=["string","number"],rUt=["text","autocomplete"],i0e=({cell:e,renderedColumnIndex:t=0,renderedRowIndex:n=0,table:r})=>{var i,s;const{getState:o,options:{enableFilterMatchHighlighting:a,mantineHighlightProps:l}}=r,{column:u,row:c}=e,{columnDef:d}=u,{globalFilter:f,globalFilterFn:h}=o(),p=u.getFilterValue(),m=_t(l,{cell:e,column:u,row:c,table:r});let g=e.getIsAggregated()&&d.AggregatedCell?d.AggregatedCell({cell:e,column:u,row:c,table:r}):c.getIsGrouped()&&!e.getIsGrouped()?null:e.getIsGrouped()&&d.GroupedCell?d.GroupedCell({cell:e,column:u,row:c,table:r}):void 0;const y=g!==void 0;if(y||(g=e.renderValue()),a&&d.enableFilterMatchHighlighting!==!1&&g&&h7.includes(typeof g)&&(p&&h7.includes(typeof p)&&rUt.includes(d.filterVariant)||f&&h7.includes(typeof f)&&u.getCanGlobalFilter())){let v=((s=(i=u.getFilterValue())!==null&&i!==void 0?i:f)!==null&&s!==void 0?s:"").toString();(p?d._filterFn:h)==="fuzzy"&&(v=v.split(" ")),g=b.jsx(jK,Object.assign({color:"yellow.3",highlight:v},m,{children:g==null?void 0:g.toString()}))}return d.Cell&&!y&&(g=d.Cell({cell:e,column:u,renderedCellValue:g,renderedColumnIndex:t,renderedRowIndex:n,row:c,table:r})),g};var iUt={root:"MRT_CopyButton-module_root__mkXy4"};const sUt=e=>{var{cell:t,children:n,table:r}=e,i=an(e,["cell","children","table"]);const{options:{localization:{clickToCopy:s,copiedToClipboard:o},mantineCopyButtonProps:a}}=r,{column:l,row:u}=t,{columnDef:c}=l,d={cell:t,column:l,row:u,table:r},f=Object.assign(Object.assign(Object.assign({},_t(a,d)),_t(c.mantineCopyButtonProps,d)),i);return b.jsx(Exe,{value:t.getValue(),children:({copied:h,copy:p})=>{var m;return b.jsx(on,{color:h?"green":void 0,label:(m=f==null?void 0:f.title)!==null&&m!==void 0?m:h?o:s,openDelay:1e3,withinPortal:!0,children:b.jsx(xs,Object.assign({},f,{className:yt("mrt-copy-button",iUt.root,f==null?void 0:f.className),onClick:g=>{g.stopPropagation(),p()},role:"presentation",title:void 0,children:n}))})}})},LLe=e=>{var t,{cell:n,table:r}=e,i=an(e,["cell","table"]);const{getState:s,options:{createDisplayMode:o,editDisplayMode:a,mantineEditSelectProps:l,mantineEditTextInputProps:u},refs:{editInputRefs:c},setCreatingRow:d,setEditingCell:f,setEditingRow:h}=r,{column:p,row:m}=n,{columnDef:g}=p,{creatingRow:y,editingRow:v}=s(),_=(y==null?void 0:y.id)===m.id,w=(v==null?void 0:v.id)===m.id,E=g.editVariant==="select",[S,x]=A.useState(()=>n.getValue()),T={cell:n,column:p,row:m,table:r},I=Object.assign(Object.assign(Object.assign({},_t(u,T)),_t(g.mantineEditTextInputProps,T)),i),P=Object.assign(Object.assign(Object.assign({},_t(l,T)),_t(g.mantineEditSelectProps,T)),i),k=$=>{m._valuesCache[p.id]=$,_?d(m):w&&h(m)},D=$=>{var L;(L=I.onBlur)===null||L===void 0||L.call(I,$),k(S),f(null)},R=$=>{var L,B;(L=I.onKeyDown)===null||L===void 0||L.call(I,$),$.key==="Enter"&&((B=c.current[n.id])===null||B===void 0||B.blur())};if(g.Edit)return(t=g.Edit)===null||t===void 0?void 0:t.call(g,{cell:n,column:p,row:m,table:r});const M={disabled:_t(g.enableEditing,m)===!1,label:["custom","modal"].includes(_?o:a)?p.columnDef.header:void 0,name:n.id,onClick:$=>{var L;$.stopPropagation(),(L=I==null?void 0:I.onClick)===null||L===void 0||L.call(I,$)},placeholder:["custom","modal"].includes(_?o:a)?void 0:g.header,value:S,variant:a==="table"?"unstyled":"default"};return E?b.jsx(nu,Object.assign({},M,{searchable:!0,value:S},P,{onBlur:D,onChange:$=>{var L;(L=P.onChange)===null||L===void 0||L.call(P,$),x($)},onClick:$=>{var L;$.stopPropagation(),(L=P==null?void 0:P.onClick)===null||L===void 0||L.call(P,$)},ref:$=>{$&&(c.current[n.id]=$,P.ref&&(P.ref.current=$))}})):b.jsx(lf,Object.assign({},M,{onKeyDown:R,value:S??""},I,{onBlur:D,onChange:$=>{var L;(L=I.onChange)===null||L===void 0||L.call(I,$),x($.target.value)},onClick:$=>{var L;$.stopPropagation(),(L=I==null?void 0:I.onClick)===null||L===void 0||L.call(I,$)},ref:$=>{$&&(c.current[n.id]=$,I.ref&&(I.ref.current=$))}}))},FLe=e=>{var t,n,r,i,s,o,a,{cell:l,numRows:u=1,renderedColumnIndex:c=0,renderedRowIndex:d=0,rowRef:f,table:h,virtualCell:p}=e,m=an(e,["cell","numRows","renderedColumnIndex","renderedRowIndex","rowRef","table","virtualCell"]);const g=El(),{getState:y,options:{columnResizeDirection:v,columnResizeMode:_,createDisplayMode:w,editDisplayMode:E,enableClickToCopy:S,enableColumnOrdering:x,enableColumnPinning:T,enableEditing:I,enableGrouping:P,layoutMode:k,mantineSkeletonProps:D,mantineTableBodyCellProps:R},refs:{editInputRefs:M},setEditingCell:$,setHoveredColumn:L}=h,{columnSizingInfo:B,creatingRow:U,density:z,draggingColumn:N,editingCell:V,editingRow:W,hoveredColumn:F,isLoading:H,showSkeletons:G}=y(),{column:Q,row:ie}=l,{columnDef:se}=Q,{columnDefType:ne}=se,ce={cell:l,column:Q,renderedColumnIndex:c,renderedRowIndex:d,row:ie,table:h},Ee=Object.assign(Object.assign(Object.assign({},_t(R,ce)),_t(se.mantineTableBodyCellProps,ce)),m),de=_t(D,ce),[We,Fe]=A.useState(100);A.useEffect(()=>{if(!H&&!G||We!==100)return;const ge=Q.getSize();Fe(ne==="display"?ge/2:Math.round(Math.random()*(ge-ge/3)+ge/3))},[H,G]);const Ne={minWidth:`max(calc(var(--col-${mf(Q==null?void 0:Q.id)}-size) * 1px), ${(t=se.minSize)!==null&&t!==void 0?t:30}px)`,width:`calc(var(--col-${mf(Q.id)}-size) * 1px)`};k==="grid"?Ne.flex=`${[0,!1].includes(se.grow)?0:`var(--col-${mf(Q.id)}-size)`} 0 auto`:k==="grid-no-grow"&&(Ne.flex=`${+(se.grow||0)} 0 auto`);const je=(N==null?void 0:N.id)===Q.id,ye=(F==null?void 0:F.id)===Q.id,ae=T&&se.columnDefType!=="group"&&Q.getIsPinned(),Pe=!l.getIsPlaceholder()&&_t(I,ie)&&_t(se.enableEditing,ie)!==!1,Be=Pe&&!["custom","modal"].includes(E)&&(E==="table"||(W==null?void 0:W.id)===ie.id||(V==null?void 0:V.id)===l.id)&&!ie.getIsGrouped(),ft=Pe&&w==="row"&&(U==null?void 0:U.id)===ie.id,Se=_t(S,l)||_t(se.enableClickToCopy,l)&&_t(se.enableClickToCopy,l)!==!1,he=ge=>{var ke;(ke=Ee==null?void 0:Ee.onDoubleClick)===null||ke===void 0||ke.call(Ee,ge),Pe&&E==="cell"&&($(l),setTimeout(()=>{var Ye;const Xe=M.current[l.id];Xe&&(Xe.focus(),(Ye=Xe.select)===null||Ye===void 0||Ye.call(Xe))},100))},Ve=ge=>{var ke;(ke=Ee==null?void 0:Ee.onDragEnter)===null||ke===void 0||ke.call(Ee,ge),P&&(F==null?void 0:F.id)==="drop-zone"&&L(null),x&&N&&L(se.enableColumnOrdering!==!1?Q:null)},tt={cell:l,renderedColumnIndex:c,renderedRowIndex:d,table:h};return b.jsx(t6,Object.assign({"data-column-pinned":ae||void 0,"data-dragging-column":je||void 0,"data-first-right-pinned":ae==="right"&&Q.getIsFirstColumn(ae)||void 0,"data-hovered-column-target":ye||void 0,"data-index":c,"data-last-left-pinned":ae==="left"&&Q.getIsLastColumn(ae)||void 0,"data-last-row":d===u-1||void 0,"data-resizing":_==="onChange"&&(B==null?void 0:B.isResizingColumn)===Q.id&&v||void 0},Ee,{__vars:Object.assign({"--mrt-cell-align":(n=Ee.align)!==null&&n!==void 0?n:g.dir==="rtl"?"right":"left","--mrt-table-cell-left":ae==="left"?`${Q.getStart(ae)}`:void 0,"--mrt-table-cell-right":ae==="right"?`${Q.getAfter(ae)}`:void 0},Ee.__vars),className:yt(Mv.root,(k==null?void 0:k.startsWith("grid"))&&Mv["root-grid"],p&&Mv["root-virtualized"],Pe&&E==="cell"&&Mv["root-cursor-pointer"],Pe&&["cell","table"].includes(E??"")&&ne!=="display"&&Mv["root-editable-hover"],ne==="data"&&Mv["root-data-col"],z==="xs"&&Mv["root-nowrap"],Ee==null?void 0:Ee.className),onDoubleClick:he,onDragEnter:Ve,style:ge=>Object.assign(Object.assign({},Ne),_t(Ee.style,ge)),children:(r=Ee.children)!==null&&r!==void 0?r:b.jsxs(b.Fragment,{children:[l.getIsPlaceholder()?(s=(i=se.PlaceholderCell)===null||i===void 0?void 0:i.call(se,{cell:l,column:Q,row:ie,table:h}))!==null&&s!==void 0?s:null:G!==!1&&(H||G)?b.jsx(iX,Object.assign({height:20,width:We},de)):ne==="display"&&(["mrt-row-expand","mrt-row-numbers","mrt-row-select"].includes(Q.id)||!ie.getIsGrouped())?(o=se.Cell)===null||o===void 0?void 0:o.call(se,Object.assign({column:Q,renderedCellValue:l.renderValue(),row:ie,rowRef:f},tt)):ft||Be?b.jsx(LLe,{cell:l,table:h}):Se&&se.enableClickToCopy!==!1?b.jsx(sUt,{cell:l,table:h,children:b.jsx(i0e,Object.assign({},tt))}):b.jsx(i0e,Object.assign({},tt)),l.getIsGrouped()&&!se.GroupedCell&&b.jsxs(b.Fragment,{children:[" (",(a=ie.subRows)===null||a===void 0?void 0:a.length,")"]})]})}))},oUt=A.memo(FLe,(e,t)=>t.cell===e.cell);var $v={root:"MRT_TableDetailPanel-module_root__vQAlM","root-grid":"MRT_TableDetailPanel-module_root-grid__7UMC6","root-virtual-row":"MRT_TableDetailPanel-module_root-virtual-row__r-X4Z",inner:"MRT_TableDetailPanel-module_inner__o-Fk-","inner-grid":"MRT_TableDetailPanel-module_inner-grid__WLZgF","inner-expanded":"MRT_TableDetailPanel-module_inner-expanded__6tg9T","inner-virtual":"MRT_TableDetailPanel-module_inner-virtual__TItRy"};const aUt=e=>{var t,n,{parentRowRef:r,renderedRowIndex:i=0,row:s,rowVirtualizer:o,striped:a,table:l,virtualRow:u}=e,c=an(e,["parentRowRef","renderedRowIndex","row","rowVirtualizer","striped","table","virtualRow"]);const{getState:d,getVisibleLeafColumns:f,options:{layoutMode:h,mantineDetailPanelProps:p,mantineTableBodyRowProps:m,renderDetailPanel:g}}=l,{isLoading:y}=d(),v=_t(m,{isDetailPanel:!0,row:s,table:l}),_=Object.assign(Object.assign({},_t(p,{row:s,table:l})),c),w=!y&&s.getIsExpanded()&&(g==null?void 0:g({row:s,table:l}));return b.jsx(Tm,Object.assign({"data-index":g?i*2+1:i,"data-striped":a,ref:E=>{var S;E&&((S=o==null?void 0:o.measureElement)===null||S===void 0||S.call(o,E))}},v,{__vars:Object.assign({"--mrt-parent-row-height":u?`${(n=(t=r.current)===null||t===void 0?void 0:t.getBoundingClientRect())===null||n===void 0?void 0:n.height}px`:void 0,"--mrt-virtual-row-start":u?`${u.start}px`:void 0},v==null?void 0:v.__vars),className:yt("mantine-Table-tr-detail-panel",$v.root,(h==null?void 0:h.startsWith("grid"))&&$v["root-grid"],u&&$v["root-virtual-row"],v==null?void 0:v.className),children:b.jsx(t6,Object.assign({colSpan:f().length,component:"td"},_,{__vars:{"--mrt-inner-width":`${l.getTotalSize()}px`},className:yt("mantine-Table-td-detail-panel",$v.inner,(h==null?void 0:h.startsWith("grid"))&&$v["inner-grid"],s.getIsExpanded()&&$v["inner-expanded"],u&&$v["inner-virtual"]),p:s.getIsExpanded()&&w?"md":0,children:o?s.getIsExpanded()&&w:b.jsx(Gb,{in:s.getIsExpanded(),children:w})}))}))},BD=e=>{var t,n,r,{columnVirtualizer:i,numRows:s,pinnedRowIds:o,renderedRowIndex:a=0,row:l,rowVirtualizer:u,table:c,tableProps:d,virtualRow:f}=e,h=an(e,["columnVirtualizer","numRows","pinnedRowIds","renderedRowIndex","row","rowVirtualizer","table","tableProps","virtualRow"]);const{getState:p,options:{enableRowOrdering:m,enableRowPinning:g,enableStickyFooter:y,enableStickyHeader:v,layoutMode:_,mantineTableBodyRowProps:w,memoMode:E,renderDetailPanel:S,rowPinningDisplayMode:x},refs:{tableFooterRef:T,tableHeadRef:I},setHoveredRow:P}=c,{density:k,draggingColumn:D,draggingRow:R,editingCell:M,editingRow:$,hoveredRow:L,isFullScreen:B,rowPinning:U}=p(),z=l.getVisibleCells(),{virtualColumns:N,virtualPaddingLeft:V,virtualPaddingRight:W}=i??{},F=X3({row:l,table:c}),H=g&&l.getIsPinned(),G=H&&(x==null?void 0:x.includes("sticky"))&&"sticky",Q=(R==null?void 0:R.id)===l.id,ie=(L==null?void 0:L.id)===l.id,se=Object.assign(Object.assign({},_t(w,{renderedRowIndex:a,row:l,table:c})),h),[ne,ce]=A.useMemo(()=>!g||!G||!o||!l.getIsPinned()?[]:[[...o].reverse().indexOf(l.id),o.indexOf(l.id)],[o,U]),Ee=(v||B)&&((t=I.current)===null||t===void 0?void 0:t.clientHeight)||0,de=y&&((n=T.current)===null||n===void 0?void 0:n.clientHeight)||0,We=parseInt((r=se==null?void 0:se.style)===null||r===void 0?void 0:r.height,10)||(k==="xs"?37:k==="md"?53:69),Fe=ye=>{m&&R&&P(l)},Ne=A.useRef(null);let je=d.striped;return je&&(je===!0&&(je="odd"),je==="odd"&&a%2!==0&&(je=!1),je==="even"&&a%2===0&&(je=!1)),b.jsxs(b.Fragment,{children:[b.jsxs(Tm,Object.assign({"data-dragging-row":Q||void 0,"data-hovered-row-target":ie||void 0,"data-index":S?a*2:a,"data-row-pinned":G||H||void 0,"data-selected":F||void 0,"data-striped":je,onDragEnter:Fe,ref:ye=>{ye&&(Ne.current=ye,u==null||u.measureElement(ye))}},se,{__vars:Object.assign(Object.assign({},se==null?void 0:se.__vars),{"--mrt-pinned-row-bottom":!f&&ne!==void 0&&H?`${ne*We+(y?de-1:0)}`:void 0,"--mrt-pinned-row-top":f?void 0:ce!==void 0&&H?`${ce*We+(v||B?Ee-1:0)}`:void 0,"--mrt-virtual-row-start":f?`${f.start}`:void 0}),className:yt(f7.root,(_==null?void 0:_.startsWith("grid"))&&f7["root-grid"],f&&f7["root-virtualized"],se==null?void 0:se.className),children:[V?b.jsx(_e,{component:"td",display:"flex",w:V}):null,(N??l.getVisibleCells()).map((ye,ae)=>{let Pe=ye;i&&(ae=ye.index,Pe=z[ae]);const Be={cell:Pe,numRows:s,renderedColumnIndex:ae,renderedRowIndex:a,rowRef:Ne,table:c,virtualCell:i?ye:void 0};return E==="cells"&&Pe.column.columnDef.columnDefType==="data"&&!D&&!R&&(M==null?void 0:M.id)!==Pe.id&&($==null?void 0:$.id)!==l.id?b.jsx(oUt,Object.assign({},Be),Pe.id):b.jsx(FLe,Object.assign({},Be),Pe.id)}),W?b.jsx(_e,{component:"td",display:"flex",w:W}):null]})),S&&!l.getIsGrouped()&&b.jsx(aUt,{parentRowRef:Ne,renderedRowIndex:a,row:l,rowVirtualizer:u,striped:je,table:c,virtualRow:f})]})},p7=A.memo(BD,(e,t)=>e.row===t.row),jLe=e=>{var t,n,r,i,s,{columnVirtualizer:o,table:a,tableProps:l}=e,u=an(e,["columnVirtualizer","table","tableProps"]);const{getBottomRows:c,getIsSomeRowsPinned:d,getRowModel:f,getState:h,getTopRows:p,options:{enableStickyFooter:m,enableStickyHeader:g,layoutMode:y,localization:v,mantineTableBodyProps:_,memoMode:w,renderDetailPanel:E,renderEmptyRowsFallback:S,rowPinningDisplayMode:x},refs:{tableFooterRef:T,tableHeadRef:I,tablePaperRef:P}}=a,{columnFilters:k,globalFilter:D,isFullScreen:R,rowPinning:M}=h(),$=Object.assign(Object.assign({},_t(_,{table:a})),u),L=(g||R)&&((t=I.current)===null||t===void 0?void 0:t.clientHeight)||0,B=m&&((n=T.current)===null||n===void 0?void 0:n.clientHeight)||0,U=A.useMemo(()=>{var F,H;return!(!((F=M.bottom)===null||F===void 0)&&F.length)&&!(!((H=M.top)===null||H===void 0)&&H.length)?[]:f().rows.filter(G=>G.getIsPinned()).map(G=>G.id)},[M,f().rows]),z=tUt(a),N=eUt(a,z),{virtualRows:V}=N??{},W={columnVirtualizer:o,numRows:z.length,table:a,tableProps:l};return b.jsxs(b.Fragment,{children:[!(x!=null&&x.includes("sticky"))&&d("top")&&b.jsx($2,Object.assign({},$,{__vars:Object.assign({"--mrt-table-head-height":`${L}`},$==null?void 0:$.__vars),className:yt(Ad.pinned,(y==null?void 0:y.startsWith("grid"))&&Ad["root-grid"],$==null?void 0:$.className),children:p().map((F,H)=>{const G=Object.assign(Object.assign({},W),{renderedRowIndex:H,row:F});return w==="rows"?b.jsx(p7,Object.assign({},G),F.id):b.jsx(BD,Object.assign({},G),F.id)})})),b.jsx($2,Object.assign({},$,{__vars:Object.assign({"--mrt-table-body-height":N?`${N.getTotalSize()}px`:void 0},$==null?void 0:$.__vars),className:yt(Ad.root,(y==null?void 0:y.startsWith("grid"))&&Ad["root-grid"],!z.length&&Ad["root-no-rows"],N&&Ad["root-virtualized"],$==null?void 0:$.className),children:(r=$==null?void 0:$.children)!==null&&r!==void 0?r:z.length?b.jsx(b.Fragment,{children:(V??z).map((F,H)=>{if(N)if(E){if(F.index%2===1)return null;H=F.index/2}else H=F.index;const G=N?z[H]:F,Q=Object.assign(Object.assign({},W),{pinnedRowIds:U,renderedRowIndex:H,row:G,rowVirtualizer:N,virtualRow:N?F:void 0}),ie=`${G.id}-${G.index}`;return w==="rows"?b.jsx(p7,Object.assign({},Q),ie):b.jsx(BD,Object.assign({},Q),ie)})}):b.jsx("tr",{className:yt("mrt-table-body-row",(y==null?void 0:y.startsWith("grid"))&&Ad["empty-row-tr-grid"]),children:b.jsx("td",{className:yt("mrt-table-body-cell",(y==null?void 0:y.startsWith("grid"))&&Ad["empty-row-td-grid"]),colSpan:a.getVisibleLeafColumns().length,children:(i=S==null?void 0:S({table:a}))!==null&&i!==void 0?i:b.jsx(nt,{__vars:{"--mrt-paper-width":`${(s=P.current)===null||s===void 0?void 0:s.clientWidth}`},className:yt(Ad["empty-row-td-content"]),children:D||k.length?v.noResultsFound:v.noRecordsToDisplay})})})})),!(x!=null&&x.includes("sticky"))&&d("bottom")&&b.jsx($2,Object.assign({},$,{__vars:Object.assign({"--mrt-table-footer-height":`${B}`},$==null?void 0:$.__vars),className:yt(Ad.pinned,(y==null?void 0:y.startsWith("grid"))&&Ad["root-grid"],$==null?void 0:$.className),children:c().map((F,H)=>{const G=Object.assign(Object.assign({},W),{renderedRowIndex:H,row:F});return w==="rows"?b.jsx(p7,Object.assign({},G),F.id):b.jsx(BD,Object.assign({},G),F.id)})}))]})},lUt=A.memo(jLe,(e,t)=>e.table.options.data===t.table.options.data);var m7={root:"MRT_TableFooter-module_root__-JXpw",grid:"MRT_TableFooter-module_grid__J3Ga-",sticky:"MRT_TableFooter-module_sticky__GcoK6"},s0e={root:"MRT_TableFooterRow-module_root__EuoPr","layout-mode-grid":"MRT_TableFooterRow-module_layout-mode-grid__dUEMF"},g7={root:"MRT_TableFooterCell-module_root__d8Scs",grid:"MRT_TableFooterCell-module_grid__H9jLk",group:"MRT_TableFooterCell-module_group__l3-p-"};const uUt=e=>{var t,n,r,i,s,{footer:o,renderedColumnIndex:a,table:l}=e,u=an(e,["footer","renderedColumnIndex","table"]);const c=El(),{options:{enableColumnPinning:d,layoutMode:f,mantineTableFooterCellProps:h}}=l,{column:p}=o,{columnDef:m}=p,{columnDefType:g}=m,y=d&&m.columnDefType!=="group"&&p.getIsPinned(),v={column:p,table:l},_=Object.assign(Object.assign(Object.assign({},_t(h,v)),_t(m.mantineTableFooterCellProps,v)),u),w={minWidth:`max(calc(var(--header-${mf(o==null?void 0:o.id)}-size) * 1px), ${(t=m.minSize)!==null&&t!==void 0?t:30}px)`,width:`calc(var(--header-${mf(o.id)}-size) * 1px)`};return f==="grid"?w.flex=`${[0,!1].includes(m.grow)?0:`var(--header-${mf(o.id)}-size)`} 0 auto`:f==="grid-no-grow"&&(w.flex=`${+(m.grow||0)} 0 auto`),b.jsx(qE,Object.assign({colSpan:o.colSpan,"data-column-pinned":y||void 0,"data-first-right-pinned":y==="right"&&p.getIsFirstColumn(y)||void 0,"data-index":a,"data-last-left-pinned":y==="left"&&p.getIsLastColumn(y)||void 0},_,{__vars:Object.assign({"--mrt-cell-align":(n=_.align)!==null&&n!==void 0?n:g==="group"?"center":c.dir==="rtl"?"right":"left","--mrt-table-cell-left":y==="left"?`${p.getStart(y)}`:void 0,"--mrt-table-cell-right":y==="right"?`${p.getAfter(y)}`:void 0},_==null?void 0:_.__vars),className:yt(g7.root,(f==null?void 0:f.startsWith("grid"))&&g7.grid,g==="group"&&g7.group,_==null?void 0:_.className),style:E=>Object.assign(Object.assign({},w),_t(_.style,E)),children:(r=_.children)!==null&&r!==void 0?r:o.isPlaceholder?null:(s=(i=_t(m.Footer,{column:p,footer:o,table:l}))!==null&&i!==void 0?i:m.footer)!==null&&s!==void 0?s:null}))},cUt=e=>{var t,{columnVirtualizer:n,footerGroup:r,table:i}=e,s=an(e,["columnVirtualizer","footerGroup","table"]);const{options:{layoutMode:o,mantineTableFooterRowProps:a}}=i,{virtualColumns:l,virtualPaddingLeft:u,virtualPaddingRight:c}=n??{};if(!(!((t=r.headers)===null||t===void 0)&&t.some(f=>typeof f.column.columnDef.footer=="string"&&!!f.column.columnDef.footer||f.column.columnDef.Footer)))return null;const d=Object.assign(Object.assign({},_t(a,{footerGroup:r,table:i})),s);return b.jsxs(Tm,Object.assign({className:yt(s0e.root,(o==null?void 0:o.startsWith("grid"))&&s0e["layout-mode-grid"])},d,{children:[u?b.jsx(_e,{component:"th",display:"flex",w:u}):null,(l??r.headers).map((f,h)=>{let p=f;return n&&(h=f.index,p=r.headers[h]),b.jsx(uUt,{footer:p,renderedColumnIndex:h,table:i},p.id)}),c?b.jsx(_e,{component:"th",display:"flex",w:c}):null]}))},dUt=e=>{var{columnVirtualizer:t,table:n}=e,r=an(e,["columnVirtualizer","table"]);const{getFooterGroups:i,getState:s,options:{enableStickyFooter:o,layoutMode:a,mantineTableFooterProps:l},refs:{tableFooterRef:u}}=n,{isFullScreen:c}=s(),d=Object.assign(Object.assign({},_t(l,{table:n})),r),f=(c||o)&&o!==!1;return b.jsx(cX,Object.assign({},d,{className:yt(m7.root,d==null?void 0:d.className,f&&m7.sticky,(a==null?void 0:a.startsWith("grid"))&&m7.grid),ref:h=>{u.current=h,d!=null&&d.ref&&(d.ref.current=h)},children:i().map(h=>b.jsx(cUt,{columnVirtualizer:t,footerGroup:h,table:n},h.id))}))};var zg={root:"MRT_TableHead-module_root__j9NkO","root-grid":"MRT_TableHead-module_root-grid__c3aGl","root-table-row-group":"MRT_TableHead-module_root-table-row-group__d9FO4","root-sticky":"MRT_TableHead-module_root-sticky__0kuDE","banner-tr":"MRT_TableHead-module_banner-tr__EhT-x","banner-th":"MRT_TableHead-module_banner-th__KwM5a",grid:"MRT_TableHead-module_grid__OJ-td"},y7={root:"MRT_TableHeadRow-module_root__hUKv4","layout-mode-grid":"MRT_TableHeadRow-module_layout-mode-grid__4ZGri",sticky:"MRT_TableHeadRow-module_sticky__Ej7Ax"},ko={root:"MRT_TableHeadCell-module_root__6y50a","root-grid":"MRT_TableHeadCell-module_root-grid__bAf1d","root-virtualized":"MRT_TableHeadCell-module_root-virtualized__CWLit","root-no-select":"MRT_TableHeadCell-module_root-no-select__BEOVU",content:"MRT_TableHeadCell-module_content__-pzSK","content-spaced":"MRT_TableHeadCell-module_content-spaced__S85Aa","content-center":"MRT_TableHeadCell-module_content-center__c-17L","content-right":"MRT_TableHeadCell-module_content-right__NSRZU","content-wrapper":"MRT_TableHeadCell-module_content-wrapper__py6aJ","content-wrapper-hidden-overflow":"MRT_TableHeadCell-module_content-wrapper-hidden-overflow__QY40r","content-wrapper-nowrap":"MRT_TableHeadCell-module_content-wrapper-nowrap__-4aIg",labels:"MRT_TableHeadCell-module_labels__oiMSr","labels-right":"MRT_TableHeadCell-module_labels-right__6ZJp-","labels-center":"MRT_TableHeadCell-module_labels-center__MM9q8","labels-sortable":"MRT_TableHeadCell-module_labels-sortable__tyuLr","labels-data":"MRT_TableHeadCell-module_labels-data__PvFGO","content-actions":"MRT_TableHeadCell-module_content-actions__utxbm"},fUt={"filter-mode-label":"MRT_TableHeadCellFilterContainer-module_filter-mode-label__8reK-"},hUt={root:"MRT_FilterCheckBox-module_root__59h9r"};const pUt=e=>{var t,n,r,{column:i,table:s}=e,o=an(e,["column","table"]);const{getState:a,options:{localization:l,mantineFilterCheckboxProps:u}}=s,{density:c}=a(),{columnDef:d}=i,f={column:i,table:s},h=Object.assign(Object.assign(Object.assign({},_t(u,f)),_t(d.mantineFilterCheckboxProps,f)),o),p=(t=l.filterByColumn)===null||t===void 0?void 0:t.replace("{column}",d.header),m=i.getFilterValue();return b.jsx(on,{label:(n=h==null?void 0:h.title)!==null&&n!==void 0?n:p,openDelay:1e3,withinPortal:!0,children:b.jsx(_f,Object.assign({checked:m==="true",className:yt("mrt-filter-checkbox",hUt.root),indeterminate:m===void 0,label:(r=h.title)!==null&&r!==void 0?r:p,size:c==="xs"?"sm":"md"},h,{onChange:g=>{var y;i.setFilterValue(i.getFilterValue()===void 0?"true":i.getFilterValue()==="true"?"false":void 0),(y=h==null?void 0:h.onChange)===null||y===void 0||y.call(h,g)},onClick:g=>{var y;g.stopPropagation(),(y=h==null?void 0:h.onClick)===null||y===void 0||y.call(h,g)},title:void 0}))})};var mUt={root:"MRT_FilterRangeFields-module_root__KfCcg"},sC={root:"MRT_FilterTextInput-module_root__Ss8Ql","date-filter":"MRT_FilterTextInput-module_date-filter__jOBLB","range-filter":"MRT_FilterTextInput-module_range-filter__JQHAL","not-filter-chip":"MRT_FilterTextInput-module_not-filter-chip__u8b1y","filter-chip-badge":"MRT_FilterTextInput-module_filter-chip-badge__Sel2k"};const zq=e=>{var t,n,r,i,s,o,a,l,{header:u,rangeFilterIndex:c,table:d}=e,f=an(e,["header","rangeFilterIndex","table"]);const{options:{columnFilterDisplayMode:h,columnFilterModeOptions:p,icons:{IconX:m},localization:g,mantineFilterAutocompleteProps:y,mantineFilterDateInputProps:v,mantineFilterMultiSelectProps:_={clearable:!0},mantineFilterSelectProps:w,mantineFilterTextInputProps:E,manualFiltering:S},refs:{filterInputRefs:x},setColumnFilterFns:T}=d,{column:I}=u,{columnDef:P}=I,k={column:I,rangeFilterIndex:c,table:d},D=Object.assign(Object.assign(Object.assign({},_t(E,k)),_t(P.mantineFilterTextInputProps,k)),f),R=Object.assign(Object.assign({},_t(w,k)),_t(P.mantineFilterSelectProps,k)),M=Object.assign(Object.assign({},_t(_,k)),_t(P.mantineFilterMultiSelectProps,k)),$=Object.assign(Object.assign({},_t(v,k)),_t(P.mantineFilterDateInputProps,k)),L=Object.assign(Object.assign({},_t(y,k)),_t(P.mantineFilterAutocompleteProps,k)),B=P.filterVariant==="range"||P.filterVariant==="date-range"||c!==void 0,U=P.filterVariant==="select",z=P.filterVariant==="multi-select",N=P.filterVariant==="date"||P.filterVariant==="date-range",V=P.filterVariant==="autocomplete",W=(t=P==null?void 0:P.columnFilterModeOptions)!==null&&t!==void 0?t:p,F=P._filterFn,H=["empty","notEmpty"].includes(F)?Yte(g,F):"",G=B?c===0?g.min:c===1?g.max:"":(n=D==null?void 0:D.placeholder)!==null&&n!==void 0?n:(r=g.filterByColumn)===null||r===void 0?void 0:r.replace("{column}",String(P.header)),Q=I.getFacetedUniqueValues(),ie=A.useMemo(()=>{var ae,Pe,Be;return((Be=(Pe=(ae=L==null?void 0:L.data)!==null&&ae!==void 0?ae:R==null?void 0:R.data)!==null&&Pe!==void 0?Pe:M==null?void 0:M.data)!==null&&Be!==void 0?Be:(V||U||z)&&Q?Array.from(Q.keys()).filter(ft=>ft!==null).sort((ft,Se)=>ft.localeCompare(Se)):[]).filter(ft=>ft!=null)},[L==null?void 0:L.data,Q,V,z,U,M==null?void 0:M.data,R==null?void 0:R.data]),se=A.useRef(!1),[ne,ce]=A.useState(()=>{var ae,Pe;return z?I.getFilterValue()||[]:B?((ae=I.getFilterValue())===null||ae===void 0?void 0:ae[c])||"":(Pe=I.getFilterValue())!==null&&Pe!==void 0?Pe:""}),[Ee]=Pwe(ne,S?400:200);A.useEffect(()=>{se.current&&(B?I.setFilterValue(ae=>{const Pe=Array.isArray(ae)?ae:["",""];return Pe[c]=Ee,Pe}):I.setFilterValue(Ee??void 0))},[Ee]),A.useEffect(()=>{if(!se.current){se.current=!0;return}const ae=I.getFilterValue();ae===void 0?de():ce(B&&c!==void 0?(ae??["",""])[c]:ae??"")},[I.getFilterValue()]);const de=()=>{z?(ce([]),I.setFilterValue([])):B?(ce(""),I.setFilterValue(ae=>{const Pe=Array.isArray(ae)?ae:["",""];return Pe[c]=void 0,Pe})):(ce(""),I.setFilterValue(void 0))};if(P.Filter)return b.jsx(b.Fragment,{children:(i=P.Filter)===null||i===void 0?void 0:i.call(P,{column:I,header:u,rangeFilterIndex:c,table:d})});const We=()=>{ce(""),I.setFilterValue(void 0),T(ae=>{var Pe;return Object.assign(Object.assign({},ae),{[u.id]:(Pe=W==null?void 0:W[0])!==null&&Pe!==void 0?Pe:"fuzzy"})})},Fe={"aria-label":G,className:yt("mrt-filter-text-input",sC.root,N?sC["date-filter"]:B?sC["range-filter"]:!H&&sC["not-filter-chip"]),disabled:!!H,onChange:ce,onClick:ae=>ae.stopPropagation(),placeholder:G,style:Object.assign({},z?M==null?void 0:M.style:U?R==null?void 0:R.style:N?$==null?void 0:$.style:D==null?void 0:D.style),title:G,value:ne,variant:"unstyled"},{className:Ne}=Fe,je=an(Fe,["className"]),ye=ne?b.jsx(Fn,{"aria-label":g.clearFilter,color:"var(--mantine-color-gray-7)",onClick:de,size:"sm",title:(s=g.clearFilter)!==null&&s!==void 0?s:"",variant:"transparent",children:b.jsx(m,{})}):null;return H?b.jsx(_e,{style:je.style,children:b.jsx(Sm,{className:sC["filter-chip-badge"],onClick:We,rightSection:ye,size:"lg",children:H})}):z?b.jsx(VF,Object.assign({},je,{searchable:!0},M,{className:yt(Ne,M.className),data:ie,onChange:ae=>ce(ae),ref:ae=>{ae&&(x.current[`${I.id}-${c??0}`]=ae,M.ref&&(M.ref.current=ae))},rightSection:!((o=ne==null?void 0:ne.toString())===null||o===void 0)&&o.length&&(M!=null&&M.clearable)?ye:void 0,style:je.style})):U?b.jsx(nu,Object.assign({},je,{clearable:!0,searchable:!0},R,{className:yt(Ne,R.className),clearButtonProps:{size:"md"},data:ie,ref:ae=>{ae&&(x.current[`${I.id}-${c??0}`]=ae,R.ref&&(R.ref.current=ae))},style:je.style})):N?b.jsx(zte,Object.assign({},je,{allowDeselect:!0,clearable:!0,popoverProps:{withinPortal:h!=="popover"}},$,{className:yt(Ne,$.className),onChange:ae=>je.onChange(ae===null?"":ae),ref:ae=>{ae&&(x.current[`${I.id}-${c??0}`]=ae,$.ref&&($.ref.current=ae))},style:je.style})):V?b.jsx(AK,Object.assign({},je,{onChange:ae=>ce(ae),rightSection:!((a=ne==null?void 0:ne.toString())===null||a===void 0)&&a.length?ye:void 0},L,{className:yt(Ne,L.className),data:ie,ref:ae=>{ae&&(x.current[`${I.id}-${c??0}`]=ae,L.ref&&(L.ref.current=ae))},style:je.style})):b.jsx(lf,Object.assign({},je,{onChange:ae=>ce(ae.target.value),rightSection:!((l=ne==null?void 0:ne.toString())===null||l===void 0)&&l.length?ye:void 0},D,{className:yt(Ne,D.className),mt:0,ref:ae=>{ae&&(x.current[`${I.id}-${c??0}`]=ae,D.ref&&(D.ref.current=ae))},style:je.style}))},gUt=e=>{var{header:t,table:n}=e,r=an(e,["header","table"]);return b.jsxs(_e,Object.assign({},r,{className:yt("mrt-filter-range-fields",mUt.root,r.className),children:[b.jsx(zq,{header:t,rangeFilterIndex:0,table:n}),b.jsx(zq,{header:t,rangeFilterIndex:1,table:n})]}))};var yUt={root:"MRT_FilterRangeSlider-module_root__uwYEk"};const vUt=e=>{var t,{header:n,table:r}=e,i=an(e,["header","table"]);const{options:{mantineFilterRangeSliderProps:s},refs:{filterInputRefs:o}}=r,{column:a}=n,{columnDef:l}=a,u={column:a,table:r},c=Object.assign(Object.assign(Object.assign({},_t(s,u)),_t(l.mantineFilterRangeSliderProps,u)),i);let[d,f]=c.min!==void 0&&c.max!==void 0?[c.min,c.max]:(t=a.getFacetedMinMaxValues())!==null&&t!==void 0?t:[0,1];Array.isArray(d)&&(d=d[0]),Array.isArray(f)&&(f=f[0]),d===null&&(d=0),f===null&&(f=1);const[h,p]=A.useState([d,f]),m=a.getFilterValue(),g=A.useRef(!1);return A.useEffect(()=>{g.current&&(m===void 0?p([d,f]):Array.isArray(m)&&p(m)),g.current=!0},[m,d,f]),b.jsx(ZA,Object.assign({className:yt("mrt-filter-range-slider",yUt.root),max:f,min:d,onChange:y=>{p(y)},onChangeEnd:y=>{Array.isArray(y)&&(y[0]<=d&&y[1]>=f?a.setFilterValue(void 0):a.setFilterValue(y))},value:h},c,{ref:y=>{y&&(o.current[`${a.id}-0`]=y,c!=null&&c.ref&&(c.ref=y))}}))};var bUt={symbol:"MRT_FilterOptionMenu-module_symbol__a1Bsy"};const _Ut=e=>[{divider:!1,label:e.filterFuzzy,option:"fuzzy",symbol:""},{divider:!1,label:e.filterContains,option:"contains",symbol:"*"},{divider:!1,label:e.filterStartsWith,option:"startsWith",symbol:"a"},{divider:!0,label:e.filterEndsWith,option:"endsWith",symbol:"z"},{divider:!1,label:e.filterEquals,option:"equals",symbol:"="},{divider:!0,label:e.filterNotEquals,option:"notEquals",symbol:""},{divider:!1,label:e.filterBetween,option:"between",symbol:""},{divider:!0,label:e.filterBetweenInclusive,option:"betweenInclusive",symbol:""},{divider:!1,label:e.filterGreaterThan,option:"greaterThan",symbol:">"},{divider:!1,label:e.filterGreaterThanOrEqualTo,option:"greaterThanOrEqualTo",symbol:""},{divider:!1,label:e.filterLessThan,option:"lessThan",symbol:"<"},{divider:!0,label:e.filterLessThanOrEqualTo,option:"lessThanOrEqualTo",symbol:""},{divider:!1,label:e.filterEmpty,option:"empty",symbol:""},{divider:!1,label:e.filterNotEmpty,option:"notEmpty",symbol:"!"}],uO=["between","betweenInclusive","inNumberRange"],v7=["empty","notEmpty"],wUt=["arrIncludesSome","arrIncludesAll","arrIncludes"],o0e=["range-slider","date-range","range"],BLe=({header:e,onSelect:t,table:n})=>{var r,i,s,o;const{getState:a,options:{columnFilterModeOptions:l,globalFilterModeOptions:u,localization:c,renderColumnFilterModeMenuItems:d,renderGlobalFilterModeMenuItems:f},setColumnFilterFns:h,setGlobalFilterFn:p}=n,{globalFilterFn:m}=a(),{column:g}=e??{},{columnDef:y}=g??{},v=g==null?void 0:g.getFilterValue();let _=(r=y==null?void 0:y.columnFilterModeOptions)!==null&&r!==void 0?r:l;o0e.includes(y==null?void 0:y.filterVariant)&&(_=[...uO,..._??[]].filter(x=>uO.includes(x)));const w=A.useMemo(()=>_Ut(c).filter(x=>y?_===void 0||(_==null?void 0:_.includes(x.option)):(!u||u.includes(x.option))&&["contains","fuzzy","startsWith"].includes(x.option)),[]),E=x=>{var T;const I=(T=y==null?void 0:y._filterFn)!==null&&T!==void 0?T:"";!e||!g?p(x):x!==I&&(h(P=>Object.assign(Object.assign({},P),{[e.id]:x})),v7.includes(x)?v!==" "&&!v7.includes(I)?g.setFilterValue(" "):v&&g.setFilterValue(v):(y==null?void 0:y.filterVariant)==="multi-select"||wUt.includes(x)?v instanceof String||v!=null&&v.length?g.setFilterValue([]):v&&g.setFilterValue(v):o0e.includes(y==null?void 0:y.filterVariant)||uO.includes(x)?!Array.isArray(v)||!(v!=null&&v.every(P=>P===""))&&!uO.includes(I)?g.setFilterValue(["",""]):g.setFilterValue(v):Array.isArray(v)?g.setFilterValue(""):v===" "&&v7.includes(I)?g.setFilterValue(void 0):g.setFilterValue(v)),t==null||t()},S=e&&y?y._filterFn:m;return b.jsx(dn.Dropdown,{children:(o=e&&g&&y?(s=(i=y.renderColumnFilterModeMenuItems)===null||i===void 0?void 0:i.call(y,{column:g,internalFilterOptions:w,onSelectFilterMode:E,table:n}))!==null&&s!==void 0?s:d==null?void 0:d({column:g,internalFilterOptions:w,onSelectFilterMode:E,table:n}):f==null?void 0:f({internalFilterOptions:w,onSelectFilterMode:E,table:n}))!==null&&o!==void 0?o:w.map(({divider:x,label:T,option:I,symbol:P},k)=>b.jsxs(A.Fragment,{children:[b.jsx(dn.Item,{color:I===S?"blue":void 0,leftSection:b.jsx("span",{className:bUt.symbol,children:P}),onClick:()=>E(I),value:I,children:T}),x&&b.jsx(dn.Divider,{})]},k))})},zLe=e=>{var t,n,{header:r,table:i}=e,s=an(e,["header","table"]);const{getState:o,options:{columnFilterDisplayMode:a,columnFilterModeOptions:l,enableColumnFilterModes:u,icons:{IconFilterCog:c},localization:d},refs:{filterInputRefs:f}}=i,{showColumnFilters:h}=o(),{column:p}=r,{columnDef:m}=p,g=m._filterFn,y=(t=m==null?void 0:m.columnFilterModeOptions)!==null&&t!==void 0?t:l,v=u&&m.enableColumnFilterModes!==!1&&(y===void 0||!!(y!=null&&y.length));return b.jsx(Gb,{in:h||a==="popover",children:b.jsxs(It,Object.assign({direction:"column"},s,{children:[b.jsxs(It,{align:"flex-end",children:[m.filterVariant==="checkbox"?b.jsx(pUt,{column:p,table:i}):m.filterVariant==="range-slider"?b.jsx(vUt,{header:r,table:i}):["date-range","range"].includes((n=m.filterVariant)!==null&&n!==void 0?n:"")||["between","betweenInclusive","inNumberRange"].includes(m._filterFn)?b.jsx(gUt,{header:r,table:i}):b.jsx(zq,{header:r,table:i}),v&&b.jsxs(dn,{withinPortal:a!=="popover",children:[b.jsx(on,{label:d.changeFilterMode,position:"bottom-start",withinPortal:!0,children:b.jsx(dn.Target,{children:b.jsx(Fn,{"aria-label":d.changeFilterMode,color:"gray",size:"md",variant:"subtle",children:b.jsx(c,{})})})}),b.jsx(BLe,{header:r,onSelect:()=>setTimeout(()=>{var _;return(_=f.current[`${p.id}-0`])===null||_===void 0?void 0:_.focus()},100),table:i})]})]}),v?b.jsx(nt,{c:"dimmed",className:fUt["filter-mode-label"],component:"label",children:d.filterMode.replace("{filterType}",Yte(d,g))}):null]}))})};var EUt={root:"MRT_TableHeadCellFilterLabel-module_root__Rur2R"};const xUt=e=>{var t,n,r,{header:i,table:s}=e,o=an(e,["header","table"]);const{options:{columnFilterDisplayMode:a,icons:{IconFilter:l},localization:u},refs:{filterInputRefs:c},setShowColumnFilters:d}=s,{column:f}=i,{columnDef:h}=f,p=f.getFilterValue(),[m,g]=A.useState(!1),y=Array.isArray(p)&&p.some(Boolean)||!!p&&!Array.isArray(p),v=h.filterVariant==="range"||["between","betweenInclusive","inNumberRange"].includes(h._filterFn),_=h._filterFn,w=a==="popover"&&!y?(t=u.filterByColumn)===null||t===void 0?void 0:t.replace("{column}",String(h.header)):u.filteringByColumn.replace("{column}",String(h.header)).replace("{filterType}",Yte(u,_)).replace("{filterValue}",`"${Array.isArray(f.getFilterValue())?f.getFilterValue().join(`" ${v?u.and:u.or} "`):f.getFilterValue()}"`).replace('" "',"");return b.jsx(b.Fragment,{children:b.jsxs($n,{keepMounted:h.filterVariant==="range-slider",onClose:()=>g(!1),opened:m,position:"top",shadow:"xl",width:360,withinPortal:!0,children:[b.jsx(Df,{mounted:a==="popover"||!!f.getFilterValue()&&!v||v&&(!!(!((n=f.getFilterValue())===null||n===void 0)&&n[0])||!!(!((r=f.getFilterValue())===null||r===void 0)&&r[1])),transition:"scale",children:()=>b.jsx($n.Target,{children:b.jsx(on,{disabled:m,label:w,multiline:!0,w:w.length>40?300:void 0,withinPortal:!0,children:b.jsx(Fn,Object.assign({className:yt("mrt-table-head-cell-filter-label-icon",EUt.root),size:18},Q3("active",y),{onClick:E=>{E.stopPropagation(),a==="popover"?g(S=>!S):d(!0),setTimeout(()=>{const S=c.current[`${f.id}-0`];S==null||S.focus(),S==null||S.select()},100)}},o,{children:b.jsx(l,{size:"100%"})}))})})}),a==="popover"&&b.jsx($n.Dropdown,{onClick:E=>E.stopPropagation(),onKeyDown:E=>E.key==="Enter"&&g(!1),onMouseDown:E=>E.stopPropagation(),children:b.jsx(zLe,{header:i,table:s})})]})})},SUt=e=>{var{column:t,table:n,tableHeadCellRef:r}=e,i=an(e,["column","table","tableHeadCellRef"]);const{getState:s,options:{enableColumnOrdering:o,mantineColumnDragHandleProps:a},setColumnOrder:l,setDraggingColumn:u,setHoveredColumn:c}=n,{columnDef:d}=t,{columnOrder:f,draggingColumn:h,hoveredColumn:p}=s(),m={column:t,table:n},g=Object.assign(Object.assign(Object.assign({},_t(a,m)),_t(d.mantineColumnDragHandleProps,m)),i),y=_=>{var w;(w=g==null?void 0:g.onDragStart)===null||w===void 0||w.call(g,_),u(t),_.dataTransfer.setDragImage(r.current,0,0)},v=_=>{var w;(w=g==null?void 0:g.onDragEnd)===null||w===void 0||w.call(g,_),(p==null?void 0:p.id)==="drop-zone"?t.toggleGrouping():o&&p&&(p==null?void 0:p.id)!==(h==null?void 0:h.id)&&l(mLe(t,p,f)),u(null),c(null)};return b.jsx(Kte,{actionIconProps:g,onDragEnd:v,onDragStart:y,table:n})};var b7={root:"MRT_TableHeadCellResizeHandle-module_root__paufe","root-ltr":"MRT_TableHeadCellResizeHandle-module_root-ltr__652AZ","root-rtl":"MRT_TableHeadCellResizeHandle-module_root-rtl__5VlSo","root-hide":"MRT_TableHeadCellResizeHandle-module_root-hide__-ILlD"};const TUt=e=>{var t,{header:n,table:r}=e,i=an(e,["header","table"]);const{getState:s,options:{columnResizeDirection:o,columnResizeMode:a},setColumnSizingInfo:l}=r,{density:u}=s(),{column:c}=n,d=n.getResizeHandler(),f=c.getIsResizing()&&a==="onEnd"?`translateX(${(o==="rtl"?-1:1)*((t=s().columnSizingInfo.deltaOffset)!==null&&t!==void 0?t:0)}px)`:void 0;return b.jsx(_e,Object.assign({onDoubleClick:()=>{l(h=>Object.assign(Object.assign({},h),{isResizingColumn:!1})),c.resetSize()},onMouseDown:d,onTouchStart:d,role:"separator"},i,{__vars:Object.assign({"--mrt-transform":f},i.__vars),className:yt("mrt-table-head-cell-resize-handle",b7.root,b7[`root-${o}`],!n.subHeaders.length&&a==="onChange"&&b7["root-hide"],u,i.className)}))};var a0e={"sort-icon":"MRT_TableHeadCellSortLabel-module_sort-icon__zs1xA","multi-sort-indicator":"MRT_TableHeadCellSortLabel-module_multi-sort-indicator__MGBj2"};const CUt=e=>{var{header:t,table:n}=e,r=an(e,["header","table"]);const{getState:i,options:{icons:{IconArrowsSort:s,IconSortAscending:o,IconSortDescending:a},localization:l}}=n,u=t.column,{columnDef:c}=u,{sorting:d}=i(),f=u.getIsSorted(),h=u.getSortIndex(),p=f?f==="desc"?l.sortedByColumnDesc.replace("{column}",c.header):l.sortedByColumnAsc.replace("{column}",c.header):u.getNextSortingOrder()==="desc"?l.sortByColumnDesc.replace("{column}",c.header):l.sortByColumnAsc.replace("{column}",c.header),m=b.jsx(Fn,Object.assign({"aria-label":p},Q3("sorted",f),r,{className:yt("mrt-table-head-sort-button",a0e["sort-icon"],r.className),children:f==="desc"?b.jsx(a,{size:"100%"}):f==="asc"?b.jsx(o,{size:"100%"}):b.jsx(s,{size:"100%"})}));return b.jsx(on,{label:p,openDelay:1e3,withinPortal:!0,children:d.length<2||h===-1?m:b.jsx(BK,{className:yt("mrt-table-head-multi-sort-indicator",a0e["multi-sort-indicator"]),inline:!0,label:h+1,offset:4,children:m})})};var l0e={left:"MRT_ColumnActionMenu-module_left__cfNmY",right:"MRT_ColumnActionMenu-module_right__-nK56"};const AUt=e=>{var t,n,r,i,s,o,a,l,u,c,{header:d,table:f}=e,h=an(e,["header","table"]);const{getState:p,options:{columnFilterDisplayMode:m,enableColumnFilters:g,enableColumnPinning:y,enableColumnResizing:v,enableGrouping:_,enableHiding:w,enableSorting:E,enableSortingRemoval:S,icons:{IconArrowAutofitContent:x,IconBoxMultiple:T,IconClearAll:I,IconColumns:P,IconDotsVertical:k,IconEyeOff:D,IconFilter:R,IconFilterOff:M,IconPinned:$,IconPinnedOff:L,IconSortAscending:B,IconSortDescending:U},localization:z,mantineColumnActionsButtonProps:N,renderColumnActionsMenuItems:V},refs:{filterInputRefs:W},setColumnOrder:F,setColumnSizingInfo:H,setShowColumnFilters:G,toggleAllColumnsVisible:Q}=f,{column:ie}=d,{columnDef:se}=ie,{columnSizing:ne,columnVisibility:ce}=p(),Ee={column:ie,table:f},de=Object.assign(Object.assign({},_t(N,Ee)),_t(se.mantineColumnActionsButtonProps,Ee)),We=()=>{ie.clearSorting()},Fe=()=>{ie.toggleSorting(!1)},Ne=()=>{ie.toggleSorting(!0)},je=()=>{H(Ve=>Object.assign(Object.assign({},Ve),{isResizingColumn:!1})),ie.resetSize()},ye=()=>{ie.toggleVisibility(!1)},ae=Ve=>{ie.pin(Ve)},Pe=()=>{ie.toggleGrouping(),F(Ve=>["mrt-row-expand",...Ve])},Be=()=>{ie.setFilterValue("")},ft=()=>{G(!0),setTimeout(()=>{var Ve;return(Ve=W.current[`${ie.id}-0`])===null||Ve===void 0?void 0:Ve.focus()},100)},Se=()=>{Q(!0)},he=b.jsxs(b.Fragment,{children:[E&&ie.getCanSort()&&b.jsxs(b.Fragment,{children:[S!==!1&&b.jsx(dn.Item,{disabled:!ie.getIsSorted(),leftSection:b.jsx(I,{}),onClick:We,children:z.clearSort}),b.jsx(dn.Item,{disabled:ie.getIsSorted()==="asc",leftSection:b.jsx(B,{}),onClick:Fe,children:(t=z.sortByColumnAsc)===null||t===void 0?void 0:t.replace("{column}",String(se.header))}),b.jsx(dn.Item,{disabled:ie.getIsSorted()==="desc",leftSection:b.jsx(U,{}),onClick:Ne,children:(n=z.sortByColumnDesc)===null||n===void 0?void 0:n.replace("{column}",String(se.header))}),(g||_||w)&&b.jsx(dn.Divider,{},3)]}),g&&m!=="popover"&&ie.getCanFilter()&&b.jsxs(b.Fragment,{children:[b.jsx(dn.Item,{disabled:!ie.getFilterValue(),leftSection:b.jsx(M,{}),onClick:Be,children:z.clearFilter}),b.jsx(dn.Item,{leftSection:b.jsx(R,{}),onClick:ft,children:(r=z.filterByColumn)===null||r===void 0?void 0:r.replace("{column}",String(se.header))}),(_||w)&&b.jsx(dn.Divider,{},2)]}),_&&ie.getCanGroup()&&b.jsxs(b.Fragment,{children:[b.jsx(dn.Item,{leftSection:b.jsx(T,{}),onClick:Pe,children:(i=z[ie.getIsGrouped()?"ungroupByColumn":"groupByColumn"])===null||i===void 0?void 0:i.replace("{column}",String(se.header))}),y&&b.jsx(dn.Divider,{})]}),y&&ie.getCanPin()&&b.jsxs(b.Fragment,{children:[b.jsx(dn.Item,{disabled:ie.getIsPinned()==="left"||!ie.getCanPin(),leftSection:b.jsx($,{className:l0e.left}),onClick:()=>ae("left"),children:z.pinToLeft}),b.jsx(dn.Item,{disabled:ie.getIsPinned()==="right"||!ie.getCanPin(),leftSection:b.jsx($,{className:l0e.right}),onClick:()=>ae("right"),children:z.pinToRight}),b.jsx(dn.Item,{disabled:!ie.getIsPinned(),leftSection:b.jsx(L,{}),onClick:()=>ae(!1),children:z.unpin}),w&&b.jsx(dn.Divider,{})]}),v&&ie.getCanResize()&&b.jsx(dn.Item,{disabled:!ne[ie.id],leftSection:b.jsx(x,{}),onClick:je,children:z.resetColumnSize},0),w&&b.jsxs(b.Fragment,{children:[b.jsx(dn.Item,{disabled:!ie.getCanHide(),leftSection:b.jsx(D,{}),onClick:ye,children:(s=z.hideColumn)===null||s===void 0?void 0:s.replace("{column}",String(se.header))},0),b.jsx(dn.Item,{disabled:!Object.values(ce).filter(Ve=>!Ve).length,leftSection:b.jsx(P,{}),onClick:Se,children:(o=z.showAllColumns)===null||o===void 0?void 0:o.replace("{column}",String(se.header))},1)]})]});return b.jsxs(dn,Object.assign({closeOnItemClick:!0,position:"bottom-start",withinPortal:!0},h,{children:[b.jsx(on,{label:(a=de==null?void 0:de.title)!==null&&a!==void 0?a:z.columnActions,openDelay:1e3,withinPortal:!0,children:b.jsx(dn.Target,{children:b.jsx(Fn,Object.assign({"aria-label":z.columnActions,color:"gray",size:"sm",variant:"subtle"},de,{children:b.jsx(k,{size:"100%"})}))})}),b.jsx(dn.Dropdown,{children:(c=(u=(l=se.renderColumnActionsMenuItems)===null||l===void 0?void 0:l.call(se,{column:ie,internalColumnMenuItems:he,table:f}))!==null&&u!==void 0?u:V==null?void 0:V({column:ie,internalColumnMenuItems:he,table:f}))!==null&&c!==void 0?c:he})]}))},IUt=e=>{var t,n,r,i,s,o,{columnVirtualizer:a,header:l,renderedHeaderIndex:u=0,table:c}=e,d=an(e,["columnVirtualizer","header","renderedHeaderIndex","table"]);const f=El(),{getState:h,options:{columnFilterDisplayMode:p,columnResizeDirection:m,columnResizeMode:g,enableColumnActions:y,enableColumnDragging:v,enableColumnOrdering:_,enableColumnPinning:w,enableGrouping:E,enableHeaderActionsHoverReveal:S,enableMultiSort:x,layoutMode:T,mantineTableHeadCellProps:I},refs:{tableHeadCellRefs:P},setHoveredColumn:k}=c,{columnSizingInfo:D,draggingColumn:R,grouping:M,hoveredColumn:$}=h(),{column:L}=l,{columnDef:B}=L,{columnDefType:U}=B,z={column:L,table:c},N=Object.assign(Object.assign(Object.assign({},_t(I,z)),_t(B.mantineTableHeadCellProps,z)),d),V={minWidth:`max(calc(var(--header-${mf(l==null?void 0:l.id)}-size) * 1px), ${(t=B.minSize)!==null&&t!==void 0?t:30}px)`,width:`calc(var(--header-${mf(l.id)}-size) * 1px)`};T==="grid"?V.flex=`${[0,!1].includes(B.grow)?0:`var(--header-${mf(l.id)}-size)`} 0 auto`:T==="grid-no-grow"&&(V.flex=`${+(B.grow||0)} 0 auto`);const W=w&&B.columnDefType!=="group"&&L.getIsPinned(),F=(R==null?void 0:R.id)===L.id,H=($==null?void 0:$.id)===L.id,{hovered:G,ref:Q}=eqe(),[ie,se]=A.useState(!1),ne=(y||B.enableColumnActions)&&B.enableColumnActions!==!1,ce=!S||ie||G&&!c.getVisibleFlatColumns().find(Ne=>Ne.getIsResizing()),Ee=v!==!1&&B.enableColumnDragging!==!1&&(v||_&&B.enableColumnOrdering!==!1||E&&B.enableGrouping!==!1&&!M.includes(L.id))&&ce,de=A.useMemo(()=>{let Ne=0;return L.getCanSort()&&Ne++,ce&&(Ne+=1.75),Ee&&(Ne+=1.25),Ne},[ce,Ee]),We=Ne=>{E&&($==null?void 0:$.id)==="drop-zone"&&k(null),_&&R&&U!=="group"&&k(B.enableColumnOrdering!==!1?L:null)},Fe=(B==null?void 0:B.Header)instanceof Function?(n=B==null?void 0:B.Header)===null||n===void 0?void 0:n.call(B,{column:L,header:l,table:c}):(r=B==null?void 0:B.Header)!==null&&r!==void 0?r:B.header;return b.jsxs(qE,Object.assign({colSpan:l.colSpan,"data-column-pinned":W||void 0,"data-dragging-column":F||void 0,"data-first-right-pinned":W==="right"&&L.getIsFirstColumn(W)||void 0,"data-hovered-column-target":H||void 0,"data-index":u,"data-last-left-pinned":W==="left"&&L.getIsLastColumn(W)||void 0,"data-resizing":g==="onChange"&&(D==null?void 0:D.isResizingColumn)===L.id&&m||void 0},N,{__vars:{"--mrt-table-cell-left":W==="left"?`${L.getStart(W)}`:void 0,"--mrt-table-cell-right":W==="right"?`${L.getAfter(W)}`:void 0},align:U==="group"?"center":f.dir==="rtl"?"right":"left",className:yt(ko.root,(T==null?void 0:T.startsWith("grid"))&&ko["root-grid"],x&&L.getCanSort()&&ko["root-no-select"],a&&ko["root-virtualized"],N==null?void 0:N.className),onDragEnter:We,ref:Ne=>{var je;Ne&&(P.current[L.id]=Ne,Q.current=Ne,U!=="group"&&((je=a==null?void 0:a.measureElement)===null||je===void 0||je.call(a,Ne)))},style:Ne=>Object.assign(Object.assign({},V),_t(N==null?void 0:N.style,Ne)),children:[l.isPlaceholder?null:(i=N.children)!==null&&i!==void 0?i:b.jsxs(It,{className:yt("mrt-table-head-cell-content",ko.content,(U==="group"||(N==null?void 0:N.align)==="center")&&ko["content-center"],(N==null?void 0:N.align)==="right"&&ko["content-right"],L.getCanResize()&&ko["content-spaced"]),children:[b.jsxs(It,{__vars:{"--mrt-table-head-cell-labels-padding-left":`${de}`},className:yt("mrt-table-head-cell-labels",ko.labels,L.getCanSort()&&U!=="group"&&ko["labels-sortable"],(N==null?void 0:N.align)==="right"?ko["labels-right"]:(N==null?void 0:N.align)==="center"&&ko["labels-center"],U==="data"&&ko["labels-data"]),onClick:L.getToggleSortingHandler(),children:[b.jsx(It,{className:yt("mrt-table-head-cell-content-wrapper",ko["content-wrapper"],U==="data"&&ko["content-wrapper-hidden-overflow"],((o=(s=B.header)===null||s===void 0?void 0:s.length)!==null&&o!==void 0?o:0)<20&&ko["content-wrapper-nowrap"]),children:Fe}),L.getCanFilter()&&(L.getIsFiltered()||ce)&&b.jsx(xUt,{header:l,table:c}),L.getCanSort()&&(L.getIsSorted()||ce)&&b.jsx(CUt,{header:l,table:c})]}),U!=="group"&&b.jsxs(It,{className:yt("mrt-table-head-cell-content-actions",ko["content-actions"]),children:[Ee&&b.jsx(SUt,{column:L,table:c,tableHeadCellRef:{current:P.current[L.id]}}),ne&&ce&&b.jsx(AUt,{header:l,table:c,opened:ie,onChange:se})]}),L.getCanResize()&&b.jsx(TUt,{header:l,table:c})]}),p==="subheader"&&L.getCanFilter()&&b.jsx(zLe,{header:l,table:c})]}))},RUt=e=>{var{columnVirtualizer:t,headerGroup:n,table:r}=e,i=an(e,["columnVirtualizer","headerGroup","table"]);const{getState:s,options:{enableStickyHeader:o,layoutMode:a,mantineTableHeadRowProps:l}}=r,{isFullScreen:u}=s(),{virtualColumns:c,virtualPaddingLeft:d,virtualPaddingRight:f}=t??{},h=Object.assign(Object.assign({},_t(l,{headerGroup:n,table:r})),i);return b.jsxs(Tm,Object.assign({},h,{className:yt(y7.root,(o||u)&&y7.sticky,(a==null?void 0:a.startsWith("grid"))&&y7["layout-mode-grid"],h==null?void 0:h.className),children:[d?b.jsx(_e,{component:"th",display:"flex",w:d}):null,(c??n.headers).map((p,m)=>{let g=p;return t&&(m=p.index,g=n.headers[m]),b.jsx(IUt,{columnVirtualizer:t,header:g,renderedHeaderIndex:m,table:r},g.id)}),f?b.jsx(_e,{component:"th",display:"flex",w:f}):null]}))};var K_={alert:"MRT_ToolbarAlertBanner-module_alert__PAhUK","alert-stacked":"MRT_ToolbarAlertBanner-module_alert-stacked__HR7Nq","alert-bottom":"MRT_ToolbarAlertBanner-module_alert-bottom__u9L-S","alert-badge":"MRT_ToolbarAlertBanner-module_alert-badge__GwDmX","toolbar-alert":"MRT_ToolbarAlertBanner-module_toolbar-alert__3sJGU","head-overlay":"MRT_ToolbarAlertBanner-module_head-overlay__Hw7jK"};const Xte=e=>{var t,n,r,{stackAlertBanner:i,table:s}=e,o=an(e,["stackAlertBanner","table"]);const{getFilteredSelectedRowModel:a,getPrePaginationRowModel:l,getState:u,options:{enableRowSelection:c,enableSelectAll:d,icons:{IconX:f},localization:h,mantineToolbarAlertBannerBadgeProps:p,mantineToolbarAlertBannerProps:m,manualPagination:g,positionToolbarAlertBanner:y,renderToolbarAlertBannerContent:v,rowCount:_}}=s,{density:w,grouping:E,rowSelection:S,showAlertBanner:x}=u(),T=Object.assign(Object.assign({},_t(m,{table:s})),o),I=_t(p,{table:s}),P=_??l().flatRows.length,k=A.useMemo(()=>g?Object.values(S).filter(Boolean).length:a().rows.length,[S,P,g]),D=k?b.jsxs(It,{align:"center",gap:"sm",children:[(n=(t=h.selectedCountOfRowCountRowsSelected)===null||t===void 0?void 0:t.replace("{selectedCount}",k.toString()))===null||n===void 0?void 0:n.replace("{rowCount}",P.toString()),b.jsx(yn,{onClick:M=>xLe({table:s})(M,!1,!0),size:"compact-xs",variant:"subtle",children:h.clearSelection})]}):null,R=E.length>0?b.jsxs(It,{children:[h.groupedBy," ",E.map((M,$)=>b.jsxs(A.Fragment,{children:[$>0?h.thenBy:"",b.jsxs(Sm,Object.assign({className:K_["alert-badge"],rightSection:b.jsx(Fn,{color:"white",onClick:()=>s.getColumn(M).toggleGrouping(),size:"xs",variant:"subtle",children:b.jsx(f,{style:{transform:"scale(0.8)"}})}),variant:"filled"},I,{children:[s.getColumn(M).columnDef.header," "]}))]},`${$}-${M}`))]}):null;return b.jsx(Gb,{in:x||!!D||!!R,transitionDuration:i?200:0,children:b.jsx(aS,Object.assign({color:"blue",icon:!1},T,{className:yt(K_.alert,i&&!y&&K_["alert-stacked"],!i&&y==="bottom"&&K_["alert-bottom"],T==null?void 0:T.className),children:(r=v==null?void 0:v({groupedAlert:R,selectedAlert:D,table:s}))!==null&&r!==void 0?r:b.jsxs(It,{className:yt(K_["toolbar-alert"],y==="head-overlay"&&K_["head-overlay"],w),children:[c&&d&&y==="head-overlay"&&b.jsx(Bq,{table:s}),b.jsxs(ci,{children:[T==null?void 0:T.children,D,R]})]})}))})},kUt=e=>{var{columnVirtualizer:t,table:n}=e,r=an(e,["columnVirtualizer","table"]);const{getHeaderGroups:i,getSelectedRowModel:s,getState:o,options:{enableStickyHeader:a,layoutMode:l,mantineTableHeadProps:u,positionToolbarAlertBanner:c},refs:{tableHeadRef:d}}=n,{isFullScreen:f,showAlertBanner:h}=o(),p=Object.assign(Object.assign({},_t(u,{table:n})),r),m=a||f;return b.jsx(uX,Object.assign({},p,{className:yt(zg.root,l!=null&&l.startsWith("grid")?zg["root-grid"]:zg["root-table-row-group"],m&&zg["root-sticky"],p==null?void 0:p.className),pos:m&&(l!=null&&l.startsWith("grid"))?"sticky":"relative",ref:g=>{d.current=g,p!=null&&p.ref&&(p.ref.current=g)},children:c==="head-overlay"&&(h||s().rows.length>0)?b.jsx(Tm,{className:yt(zg["banner-tr"],(l==null?void 0:l.startsWith("grid"))&&zg.grid),children:b.jsx(qE,{className:yt(zg["banner-th"],(l==null?void 0:l.startsWith("grid"))&&zg.grid),colSpan:n.getVisibleLeafColumns().length,children:b.jsx(Xte,{table:n})})}):i().map(g=>b.jsx(RUt,{columnVirtualizer:t,headerGroup:g,table:n},g.id))}))},PUt=e=>{var{table:t}=e,n=an(e,["table"]);const{getFlatHeaders:r,getState:i,options:{columns:s,enableTableFooter:o,enableTableHead:a,layoutMode:l,mantineTableProps:u,memoMode:c}}=t,{columnSizing:d,columnSizingInfo:f,columnVisibility:h,density:p}=i(),m=Object.assign(Object.assign({highlightOnHover:!0,horizontalSpacing:p,verticalSpacing:p},_t(u,{table:t})),n),g=A.useMemo(()=>{const E=r(),S={};for(let x=0;x<E.length;x++){const T=E[x],I=T.getSize();S[`--header-${mf(T.id)}-size`]=I,S[`--col-${mf(T.column.id)}-size`]=I}return S},[s,d,f,h]),v={columnVirtualizer:Zzt(t),table:t},{colorScheme:_}=eWe(),{stripedColor:w}=m;return b.jsxs(or,Object.assign({className:yt("mrt-table",r0e.root,(l==null?void 0:l.startsWith("grid"))&&r0e["root-grid"],m.className)},m,{__vars:Object.assign(Object.assign(Object.assign({},g),{"--mrt-striped-row-background-color":w,"--mrt-striped-row-hover-background-color":w?_==="dark"?Zqe(w,.08):kC(w,.12):void 0}),m.__vars),children:[a&&b.jsx(kUt,Object.assign({},v)),c==="table-body"||f.isResizingColumn?b.jsx(lUt,Object.assign({},v,{tableProps:m})):b.jsx(jLe,Object.assign({},v,{tableProps:m})),o&&b.jsx(dUt,Object.assign({},v))]}))},NUt=e=>{var t,{open:n,table:r}=e,i=an(e,["open","table"]);const{getState:s,options:{mantineCreateRowModalProps:o,mantineEditRowModalProps:a,onCreatingRowCancel:l,onEditingRowCancel:u,renderCreateRowModalContent:c,renderEditRowModalContent:d},setCreatingRow:f,setEditingRow:h}=r,{creatingRow:p,editingRow:m}=s(),g=p??m,y={row:g,table:r},v=Object.assign(Object.assign(Object.assign({},_t(a,y)),p&&_t(o,y)),i),_=g.getAllCells().filter(E=>E.column.columnDef.columnDefType==="data").map(E=>b.jsx(LLe,{cell:E,table:r},E.id)),w=()=>{var E;p?(l==null||l({row:g,table:r}),f(null)):(u==null||u({row:g,table:r}),h(null)),g._valuesCache={},(E=v.onClose)===null||E===void 0||E.call(v)};return A.createElement(Ss,Object.assign({opened:n,withCloseButton:!1},v,{key:g.id,onClose:w}),(t=p&&(c==null?void 0:c({internalEditComponents:_,row:g,table:r}))||(d==null?void 0:d({internalEditComponents:_,row:g,table:r})))!==null&&t!==void 0?t:b.jsxs(b.Fragment,{children:[b.jsx("form",{onSubmit:E=>E.preventDefault(),children:b.jsx(ci,{gap:"lg",pb:24,pt:16,children:_})}),b.jsx(It,{justify:"flex-end",children:b.jsx(OLe,{row:g,table:r,variant:"text"})})]}))},OUt=typeof window<"u"?A.useLayoutEffect:A.useEffect,DUt=e=>{var{table:t}=e,n=an(e,["table"]);const{getState:r,options:{createDisplayMode:i,editDisplayMode:s,enableStickyHeader:o,mantineLoadingOverlayProps:a,mantineTableContainerProps:l},refs:{bottomToolbarRef:u,tableContainerRef:c,topToolbarRef:d}}=t,{creatingRow:f,editingRow:h,isFullScreen:p,isLoading:m,showLoadingOverlay:g}=r(),[y,v]=A.useState(0),_=Object.assign(Object.assign({},_t(l,{table:t})),n),w=_t(a,{table:t});OUt(()=>{var x,T,I,P;const k=typeof document<"u"&&(T=(x=d.current)===null||x===void 0?void 0:x.offsetHeight)!==null&&T!==void 0?T:0,D=typeof document<"u"&&(P=(I=u==null?void 0:u.current)===null||I===void 0?void 0:I.offsetHeight)!==null&&P!==void 0?P:0;v(k+D)});const E=i==="modal"&&f,S=s==="modal"&&h;return b.jsxs(_e,Object.assign({},_,{__vars:Object.assign({"--mrt-top-toolbar-height":`${y}`},_==null?void 0:_.__vars),className:yt("mrt-table-container",d7.root,o&&d7["root-sticky"],p&&d7["root-fullscreen"],_==null?void 0:_.className),ref:x=>{x&&(c.current=x,_!=null&&_.ref&&(_.ref.current=x))},children:[b.jsx(uu,Object.assign({visible:m||g,zIndex:2},w)),b.jsx(PUt,{table:t}),(E||S)&&b.jsx(NUt,{open:!0,table:t})]}))};var oC={root:"MRT_BottomToolbar-module_root__VDeWo","root-fullscreen":"MRT_BottomToolbar-module_root-fullscreen__esE15","custom-toolbar-container":"MRT_BottomToolbar-module_custom-toolbar-container__XcDRF","paginator-container":"MRT_BottomToolbar-module_paginator-container__A3eWY","paginator-container-alert-banner":"MRT_BottomToolbar-module_paginator-container-alert-banner__gyqtO"},ULe={"common-toolbar-styles":"common-styles-module_common-toolbar-styles__DnjR8"},u0e={collapse:"MRT_ProgressBar-module_collapse__rOLJH","collapse-top":"MRT_ProgressBar-module_collapse-top__oCi0h"};const VLe=e=>{var{isTopToolbar:t,table:n}=e,r=an(e,["isTopToolbar","table"]);const{getState:i,options:{mantineProgressProps:s}}=n,{isSaving:o,showProgressBars:a}=i(),l=Object.assign(Object.assign({},_t(s,{isTopToolbar:t,table:n})),r);return b.jsx(Gb,{className:yt(u0e.collapse,t&&u0e["collapse-top"]),in:o||a,children:b.jsx(Xb,Object.assign({animated:!0,"aria-busy":"true","aria-label":"Loading",radius:0,value:100},l))})};var _7={root:"MRT_TablePagination-module_root__yZ8pm",pagesize:"MRT_TablePagination-module_pagesize__-vmTn","with-top-margin":"MRT_TablePagination-module_with-top-margin__aM5-m"};const c0e=[5,10,15,20,25,30,50,100].map(e=>e.toString()),HLe=e=>{var t,{position:n="bottom",table:r}=e,i=an(e,["position","table"]);const{getPrePaginationRowModel:s,getState:o,options:{enableToolbarInternalActions:a,icons:{IconChevronLeft:l,IconChevronLeftPipe:u,IconChevronRight:c,IconChevronRightPipe:d},localization:f,mantinePaginationProps:h,paginationDisplayMode:p,rowCount:m},setPageIndex:g,setPageSize:y}=r,{pagination:{pageIndex:v=0,pageSize:_=10},showGlobalFilter:w}=o(),E=Object.assign(Object.assign({},_t(h,{table:r})),i),S=m??s().rows.length,x=Math.ceil(S/_),T=x>2,I=v*_,P=Math.min(v*_+_,S),k=E??{},{rowsPerPageOptions:D=c0e,showRowsPerPage:R=!0,withEdges:M=T}=k,$=an(k,["rowsPerPageOptions","showRowsPerPage","withEdges"]),L=n==="top"&&a&&!w;return b.jsxs(_e,{className:yt("mrt-table-pagination",_7.root,L&&_7["with-top-margin"]),children:[(E==null?void 0:E.showRowsPerPage)!==!1&&b.jsxs(Tn,{gap:"xs",children:[b.jsx(nt,{id:"rpp-label",children:f.rowsPerPage}),b.jsx(nu,{allowDeselect:!1,"aria-labelledby":"rpp-label",className:_7.pagesize,data:(t=E==null?void 0:E.rowsPerPageOptions)!==null&&t!==void 0?t:c0e,onChange:B=>y(+B),value:_.toString()})]}),p==="pages"?b.jsx($f,Object.assign({firstIcon:u,lastIcon:d,nextIcon:c,onChange:B=>g(B-1),previousIcon:l,total:x,value:v+1,withEdges:M},$)):p==="default"?b.jsxs(b.Fragment,{children:[b.jsx(nt,{children:`${P===0?0:(I+1).toLocaleString()}-${P.toLocaleString()} ${f.of} ${S.toLocaleString()}`}),b.jsxs(Tn,{gap:6,children:[M&&b.jsx(Fn,{"aria-label":f.goToFirstPage,color:"gray",disabled:v<=0,onClick:()=>g(0),variant:"subtle",children:b.jsx(u,{})}),b.jsx(Fn,{"aria-label":f.goToPreviousPage,color:"gray",disabled:v<=0,onClick:()=>g(v-1),variant:"subtle",children:b.jsx(l,{})}),b.jsx(Fn,{"aria-label":f.goToNextPage,color:"gray",disabled:P>=S,onClick:()=>g(v+1),variant:"subtle",children:b.jsx(c,{})}),M&&b.jsx(Fn,{"aria-label":f.goToLastPage,color:"gray",disabled:P>=S,onClick:()=>g(x-1),variant:"subtle",children:b.jsx(d,{})})]})]}):null]})};var d0e={root:"MRT_ToolbarDropZone-module_root__eGTXb",hovered:"MRT_ToolbarDropZone-module_hovered__g7PeJ"};const qLe=e=>{var{table:t}=e,n=an(e,["table"]);const{getState:r,options:{enableGrouping:i,localization:s},setHoveredColumn:o,setShowToolbarDropZone:a}=t,{draggingColumn:l,grouping:u,hoveredColumn:c,showToolbarDropZone:d}=r(),f=h=>{o({id:"drop-zone"})};return A.useEffect(()=>{var h;((h=t.options.state)===null||h===void 0?void 0:h.showToolbarDropZone)!==void 0&&a(!!i&&!!l&&l.columnDef.enableGrouping!==!1&&!u.includes(l.id))},[i,l,u]),b.jsx(Df,{mounted:d,transition:"fade",children:()=>{var h,p;return b.jsx(It,Object.assign({className:yt("mrt-toolbar-dropzone",d0e.root,(c==null?void 0:c.id)==="drop-zone"&&d0e.hovered),onDragEnter:f},n,{children:b.jsx(nt,{children:s.dropToGroupBy.replace("{column}",(p=(h=l==null?void 0:l.columnDef)===null||h===void 0?void 0:h.header)!==null&&p!==void 0?p:"")})}))}})},MUt=e=>{var{table:t}=e,n=an(e,["table"]);const{getState:r,options:{enablePagination:i,mantineBottomToolbarProps:s,positionPagination:o,positionToolbarAlertBanner:a,positionToolbarDropZone:l,renderBottomToolbarCustomActions:u},refs:{bottomToolbarRef:c}}=t,{isFullScreen:d}=r(),f=HA("(max-width: 720px)"),h=Object.assign(Object.assign({},_t(s,{table:t})),n),p=f||!!u;return b.jsxs(_e,Object.assign({},h,{className:yt("mrt-bottom-toolbar",oC.root,ULe["common-toolbar-styles"],d&&oC["root-fullscreen"],h==null?void 0:h.className),ref:m=>{m&&(c.current=m,h!=null&&h.ref&&(h.ref.current=m))},children:[b.jsx(VLe,{isTopToolbar:!1,table:t}),a==="bottom"&&b.jsx(Xte,{stackAlertBanner:p,table:t}),["both","bottom"].includes(l??"")&&b.jsx(qLe,{table:t}),b.jsxs(_e,{className:oC["custom-toolbar-container"],children:[u?u({table:t}):b.jsx("span",{}),b.jsx(_e,{className:yt(oC["paginator-container"],p&&oC["paginator-container-alert-banner"]),children:i&&["both","bottom"].includes(o??"")&&b.jsx(HLe,{position:"bottom",table:t})})]})]}))};var cO={root:"MRT_TopToolbar-module_root__r4-V9","root-fullscreen":"MRT_TopToolbar-module_root-fullscreen__3itT8","actions-container":"MRT_TopToolbar-module_actions-container__-uL0u","actions-container-stack-alert":"MRT_TopToolbar-module_actions-container-stack-alert__OYDL6"},$Ut={root:"MRT_ToolbarInternalButtons-module_root__NKoUG"},f0e={root:"MRT_ShowHideColumnsMenu-module_root__2UWak",content:"MRT_ShowHideColumnsMenu-module_content__ehkWQ"},X_={root:"MRT_ShowHideColumnsMenuItems-module_root__wYgv-",menu:"MRT_ShowHideColumnsMenuItems-module_menu__CeATR",grab:"MRT_ShowHideColumnsMenuItems-module_grab__a-d-y",pin:"MRT_ShowHideColumnsMenuItems-module_pin__P437b",switch:"MRT_ShowHideColumnsMenuItems-module_switch__tMsdt",header:"MRT_ShowHideColumnsMenuItems-module_header__xVkKb"},w7={root:"MRT_ColumnPinningButtons-module_root__scTtW",left:"MRT_ColumnPinningButtons-module_left__W6Aog",right:"MRT_ColumnPinningButtons-module_right__7AJE3"};const LUt=({column:e,table:t})=>{const{options:{icons:{IconPinned:n,IconPinnedOff:r},localization:i}}=t;return b.jsx(It,{className:yt("mrt-column-pinning-buttons",w7.root),children:e.getIsPinned()?b.jsx(on,{label:i.unpin,withinPortal:!0,children:b.jsx(Fn,{color:"gray",onClick:()=>e.pin(!1),size:"md",variant:"subtle",children:b.jsx(r,{})})}):b.jsxs(b.Fragment,{children:[b.jsx(on,{label:i.pinToLeft,withinPortal:!0,children:b.jsx(Fn,{color:"gray",onClick:()=>e.pin("left"),size:"md",variant:"subtle",children:b.jsx(n,{className:w7.left})})}),b.jsx(on,{label:i.pinToRight,withinPortal:!0,children:b.jsx(Fn,{color:"gray",onClick:()=>e.pin("right"),size:"md",variant:"subtle",children:b.jsx(n,{className:w7.right})})})]})})},WLe=({allColumns:e,column:t,hoveredColumn:n,setHoveredColumn:r,table:i})=>{var s;const o=Is(),{getState:a,options:{enableColumnOrdering:l,enableColumnPinning:u,enableHiding:c,localization:d},setColumnOrder:f}=i,{columnOrder:h}=a(),{columnDef:p}=t,{columnDefType:m}=p,g=m!=="group"&&t.getIsVisible()||m==="group"&&t.getLeafColumns().some(T=>T.getIsVisible()),y=T=>{var I,P;m==="group"?(P=(I=T==null?void 0:T.columns)===null||I===void 0?void 0:I.forEach)===null||P===void 0||P.call(I,k=>{k.toggleVisibility(!g)}):T.toggleVisibility()},v=A.useRef(null),[_,w]=A.useState(!1),E=T=>{w(!0),T.dataTransfer.setDragImage(v.current,0,0)},S=T=>{w(!1),r(null),n&&f(mLe(t,n,h))},x=T=>{!_&&p.enableColumnOrdering!==!1&&r(t)};return!p.header||p.visibleInShowHideMenu===!1?null:b.jsxs(b.Fragment,{children:[b.jsx(dn.Item,Object.assign({className:X_.root,component:"span",onDragEnter:x,ref:v,style:{"--_column-depth":`${(t.depth+.5)*2}rem`,"--_hover-color":kzt(o)}},Q3("dragging",_),Q3("order-hovered",(n==null?void 0:n.id)===t.id),{children:b.jsxs(_e,{className:X_.menu,children:[m!=="group"&&l&&!e.some(T=>T.columnDef.columnDefType==="group")&&(p.enableColumnOrdering!==!1?b.jsx(Kte,{onDragEnd:S,onDragStart:E,table:i}):b.jsx(_e,{className:X_.grab})),u&&(t.getCanPin()?b.jsx(LUt,{column:t,table:i}):b.jsx(_e,{className:X_.pin})),c?b.jsx(on,{label:d.toggleVisibility,openDelay:1e3,withinPortal:!0,children:b.jsx(z0,{checked:g,className:X_.switch,disabled:!t.getCanHide(),label:p.header,onChange:()=>y(t)})}):b.jsx(nt,{className:X_.header,children:p.header})]})})),(s=t.columns)===null||s===void 0?void 0:s.map((T,I)=>b.jsx(WLe,{allColumns:e,column:T,hoveredColumn:n,setHoveredColumn:r,table:i},`${I}-${T.id}`))]})},FUt=({table:e})=>{const{getAllColumns:t,getAllLeafColumns:n,getCenterLeafColumns:r,getIsAllColumnsVisible:i,getIsSomeColumnsPinned:s,getIsSomeColumnsVisible:o,getLeftLeafColumns:a,getRightLeafColumns:l,getState:u,options:{enableColumnOrdering:c,enableColumnPinning:d,enableHiding:f,localization:h}}=e,{columnOrder:p,columnPinning:m}=u(),g=w=>{n().filter(E=>E.columnDef.enableHiding!==!1).forEach(E=>E.toggleVisibility(w))},y=A.useMemo(()=>{const w=t();return p.length>0&&!w.some(E=>E.columnDef.columnDefType==="group")?[...a(),...Array.from(new Set(p)).map(E=>r().find(S=>(S==null?void 0:S.id)===E)),...l()].filter(Boolean):w},[p,m,t(),r(),a(),l()]),[v,_]=A.useState(null);return b.jsxs(dn.Dropdown,{className:yt("mrt-show-hide-columns-menu",f0e.root),children:[b.jsxs(It,{className:f0e.content,children:[f&&b.jsx(yn,{disabled:!o(),onClick:()=>g(!1),variant:"subtle",children:h.hideAll}),c&&b.jsx(yn,{onClick:()=>e.setColumnOrder(qte(e.options)),variant:"subtle",children:h.resetOrder}),d&&b.jsx(yn,{disabled:!s(),onClick:()=>e.resetColumnPinning(!0),variant:"subtle",children:h.unpinAll}),f&&b.jsx(yn,{disabled:i(),onClick:()=>g(!0),variant:"subtle",children:h.showAll})]}),b.jsx(dn.Divider,{}),y.map((w,E)=>b.jsx(WLe,{allColumns:y,column:w,hoveredColumn:v,setHoveredColumn:_,table:e},`${E}-${w.id}`))]})},jUt=e=>{var{table:t,title:n}=e,r=an(e,["table","title"]);const{icons:{IconColumns:i},localization:{showHideColumns:s}}=t.options;return b.jsxs(dn,{closeOnItemClick:!1,withinPortal:!0,children:[b.jsx(on,{label:n??s,withinPortal:!0,children:b.jsx(dn.Target,{children:b.jsx(Fn,Object.assign({"aria-label":n??s,color:"gray",size:"lg",variant:"subtle"},r,{children:b.jsx(i,{})}))})}),b.jsx(FUt,{table:t})]})},BUt={md:"xs",xl:"md",xs:"xl"},zUt=e=>{var{table:{getState:t,options:{icons:{IconBaselineDensityLarge:n,IconBaselineDensityMedium:r,IconBaselineDensitySmall:i},localization:{toggleDensity:s}},setDensity:o},title:a}=e,l=an(e,["table","title"]);const{density:u}=t();return b.jsx(on,{label:a??s,withinPortal:!0,children:b.jsx(Fn,Object.assign({"aria-label":a??s,color:"gray",onClick:()=>o(c=>BUt[c]),size:"lg",variant:"subtle"},l,{children:u==="xs"?b.jsx(i,{}):u==="md"?b.jsx(r,{}):b.jsx(n,{})}))})},UUt=e=>{var{table:{getState:t,options:{icons:{IconFilter:n,IconFilterOff:r},localization:{showHideFilters:i}},setShowColumnFilters:s},title:o}=e,a=an(e,["table","title"]);const{showColumnFilters:l}=t();return b.jsx(on,{label:o??i,withinPortal:!0,children:b.jsx(Fn,Object.assign({"aria-label":o??i,color:"gray",onClick:()=>s(u=>!u),size:"lg",variant:"subtle"},a,{children:l?b.jsx(r,{}):b.jsx(n,{})}))})},VUt=e=>{var{table:{getState:t,options:{icons:{IconMaximize:n,IconMinimize:r},localization:{toggleFullScreen:i}},setIsFullScreen:s},title:o}=e,a=an(e,["table","title"]);const{isFullScreen:l}=t(),[u,c]=A.useState(!1),d=()=>{c(!1),s(f=>!f)};return b.jsx(on,{label:o??i,opened:u,withinPortal:!0,children:b.jsx(Fn,Object.assign({"aria-label":o??i,color:"gray",onClick:d,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),size:"lg",variant:"subtle"},a,{children:l?b.jsx(r,{}):b.jsx(n,{})}))})},HUt=e=>{var{table:{getState:t,options:{icons:{IconSearch:n,IconSearchOff:r},localization:{showHideSearch:i}},refs:{searchInputRef:s},setShowGlobalFilter:o},title:a}=e,l=an(e,["table","title"]);const{globalFilter:u,showGlobalFilter:c}=t(),d=()=>{o(!c),setTimeout(()=>{var f;return(f=s.current)===null||f===void 0?void 0:f.focus()},100)};return b.jsx(on,{label:a??i,withinPortal:!0,children:b.jsx(Fn,Object.assign({"aria-label":a??i,color:"gray",disabled:!!u,onClick:d,size:"lg",variant:"subtle"},l,{children:c?b.jsx(r,{}):b.jsx(n,{})}))})},qUt=e=>{var t,{table:n}=e,r=an(e,["table"]);const{options:{columnFilterDisplayMode:i,enableColumnFilters:s,enableColumnOrdering:o,enableColumnPinning:a,enableDensityToggle:l,enableFilters:u,enableFullScreenToggle:c,enableGlobalFilter:d,enableHiding:f,initialState:h,renderToolbarInternalActions:p}}=n;return b.jsx(It,Object.assign({},r,{className:yt("mrt-toolbar-internal-buttons",$Ut.root,r==null?void 0:r.className),children:(t=p==null?void 0:p({table:n}))!==null&&t!==void 0?t:b.jsxs(b.Fragment,{children:[u&&d&&!(h!=null&&h.showGlobalFilter)&&b.jsx(HUt,{table:n}),u&&s&&i!=="popover"&&b.jsx(UUt,{table:n}),(f||o||a)&&b.jsx(jUt,{table:n}),l&&b.jsx(zUt,{table:n}),c&&b.jsx(VUt,{table:n})]})}))};var h0e={root:"MRT_GlobalFilterTextInput-module_root__Xmcpv",collapse:"MRT_GlobalFilterTextInput-module_collapse__v311d"};const E7=e=>{var{table:t}=e,n=an(e,["table"]);const{getState:r,options:{enableGlobalFilterModes:i,icons:{IconSearch:s,IconX:o},localization:a,mantineSearchTextInputProps:l,manualFiltering:u},refs:{searchInputRef:c},setGlobalFilter:d}=t,{globalFilter:f,showGlobalFilter:h}=r(),p=Object.assign(Object.assign({},_t(l,{table:t})),n),m=A.useRef(!1),[g,y]=A.useState(f??""),[v]=Pwe(g,u?500:250);A.useEffect(()=>{d(v||void 0)},[v]);const _=()=>{y(""),d(void 0)};return A.useEffect(()=>{m.current&&(f===void 0?_():y(f)),m.current=!0},[f]),b.jsxs(Gb,{className:h0e.collapse,in:h,children:[i&&b.jsxs(dn,{withinPortal:!0,children:[b.jsx(dn.Target,{children:b.jsx(Fn,{"aria-label":a.changeSearchMode,color:"gray",size:"sm",variant:"transparent",children:b.jsx(s,{})})}),b.jsx(BLe,{onSelect:_,table:t})]}),b.jsx(lf,Object.assign({leftSection:!i&&b.jsx(s,{}),mt:0,mx:"sm",onChange:w=>y(w.target.value),placeholder:a.search,rightSection:g?b.jsx(Fn,{"aria-label":a.clearSearch,color:"gray",disabled:!(g!=null&&g.length),onClick:_,size:"sm",variant:"transparent",children:b.jsx(on,{label:a.clearSearch,withinPortal:!0,children:b.jsx(o,{})})}):null,value:g??"",variant:"filled"},p,{className:yt("mrt-global-filter-text-input",h0e.root,p==null?void 0:p.className),ref:w=>{w&&(c.current=w,p!=null&&p.ref&&(p.ref=w))}}))]})},WUt=e=>{var t,{table:n}=e,r=an(e,["table"]);const{getState:i,options:{enableGlobalFilter:s,enablePagination:o,enableToolbarInternalActions:a,mantineTopToolbarProps:l,positionGlobalFilter:u,positionPagination:c,positionToolbarAlertBanner:d,positionToolbarDropZone:f,renderTopToolbarCustomActions:h},refs:{topToolbarRef:p}}=n,{isFullScreen:m,showGlobalFilter:g}=i(),y=HA("(max-width:720px)"),v=HA("(max-width:1024px)"),_=Object.assign(Object.assign({},_t(l,{table:n})),r),w=y||!!h||g&&v,E={style:v?void 0:{zIndex:3},table:n};return b.jsxs(_e,Object.assign({},_,{className:yt(ULe["common-toolbar-styles"],cO.root,m&&cO["root-fullscreen"],_==null?void 0:_.className),ref:S=>{S&&(p.current=S,_!=null&&_.ref&&(_.ref.current=S))},children:[d==="top"&&b.jsx(Xte,{stackAlertBanner:w,table:n}),["both","top"].includes(f??"")&&b.jsx(qLe,{table:n}),b.jsxs(It,{className:yt(cO["actions-container"],w&&cO["actions-container-stack-alert"]),children:[s&&u==="left"&&b.jsx(E7,Object.assign({},E)),(t=h==null?void 0:h({table:n}))!==null&&t!==void 0?t:b.jsx("span",{}),a?b.jsxs(It,{justify:"end",wrap:"wrap-reverse",children:[s&&u==="right"&&b.jsx(E7,Object.assign({},E)),b.jsx(qUt,{table:n})]}):s&&u==="right"&&b.jsx(E7,Object.assign({},E))]}),o&&["both","top"].includes(c??"")&&b.jsx(It,{justify:"end",children:b.jsx(HLe,{position:"top",table:n})}),b.jsx(VLe,{isTopToolbar:!0,table:n})]}))},GUt=e=>{var t,n,{table:r}=e,i=an(e,["table"]);const{getState:s,options:{enableBottomToolbar:o,enableTopToolbar:a,mantinePaperProps:l,renderBottomToolbar:u,renderTopToolbar:c},refs:{tablePaperRef:d}}=r,{isFullScreen:f}=s(),h=Object.assign(Object.assign({},_t(l,{table:r})),i);return b.jsxs(kR,Object.assign({shadow:"xs",withBorder:!0},h,{className:yt("mrt-table-paper",nUt.root,f&&"mrt-table-paper-fullscreen",h==null?void 0:h.className),ref:p=>{d.current=p,h!=null&&h.ref&&(h.ref.current=p)},style:p=>Object.assign(Object.assign({zIndex:f?200:void 0},_t(h==null?void 0:h.style,p)),f?{border:0,borderRadius:0,bottom:0,height:"100vh",left:0,margin:0,maxHeight:"100vh",maxWidth:"100vw",padding:0,position:"fixed",right:0,top:0,width:"100vw"}:null),children:[a&&((t=_t(c,{table:r}))!==null&&t!==void 0?t:b.jsx(WUt,{table:r})),b.jsx(DUt,{table:r}),o&&((n=_t(u,{table:r}))!==null&&n!==void 0?n:b.jsx(MUt,{table:r}))]}))},YUt=e=>e.table!==void 0,KUt=e=>{let t;return YUt(e)?t=e.table:t=MLe(e),b.jsx(GUt,{table:t})};function p0e(e){const t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return n==="60"?`${t+1}:00`:`${t}:${+n<10?"0":""}${n}`}async function XUt(e,t,n,r){return e&&t&&n&&r?await e.getEditedTranscript(t,r,n):null}async function x7(e,t){return e?await e.getTags(t):[]}async function QUt(e){return e?await e.getAllParticipantAndTaskTags():{}}function JUt({completed:e,studyConfig:t}){const{storageEngine:n}=Pi(),[r,i]=A.useState(null),s=A.useMemo(()=>sQ(t.sequence).map(k=>k.componentName),[t.sequence]),o=Ap(),{value:a,execute:l}=Qd(x7,[n,"text"]),{value:u,execute:c}=Qd(x7,[n,"task"]),{value:d,execute:f}=Qd(x7,[n,"participant"]),{value:h,execute:p}=Qd(QUt,[n]),[m,g]=A.useState([]),[y,v]=A.useState([]),[_,w]=A.useState(150),E=A.useMemo(()=>{if(!r)return null;const k=gh(m.map(D=>D.tasks[r].wordCount||0));return il([0,_]).domain(k)},[r,m,_]),S=A.useMemo(()=>{if(!r){const D=gh(m.map(R=>R.interactionCount||0));return il([0,_]).domain(D)}const k=gh(m.map(D=>D.tasks[r].interactionCount||0));return il([0,_]).domain(k)},[r,m,_]),x=A.useMemo(()=>{if(!r){const D=gh(m.map(R=>R.timeSpent||0));return il([0,_]).domain(D)}const k=gh(m.map(D=>D.tasks[r].timeSpent||0));return il([0,_]).domain(k)},[r,m,_]),T=A.useCallback((k,D)=>{n&&n.saveTags(k,D).then(()=>{p(n),l(n,"text"),c(n,"task"),f(n,"participant")})},[f,p,c,l,n]);A.useEffect(()=>{if(!o||!n)return;const k=e.map(D=>{const R=Object.values(D.answers),M=gh(R.map(B=>[B.startTime,B.endTime]).flat()),$=lI(R.map(B=>B.provenanceGraph?Object.keys(B.provenanceGraph.nodes).length-1:0)),L={};return Object.entries(D.answers).forEach(B=>{const[U,z]=B,N=U.slice(0,U.lastIndexOf("_"));L[N]={interactionCount:z.provenanceGraph?Object.keys(z.provenanceGraph.nodes).length-1:0,wordCount:null,timeSpent:z.endTime-z.startTime,tags:[]}}),{timeSpent:M[1]-M[0],wordCount:null,interactionCount:$,id:D.participantId,tasks:L}});g(k)},[o,e,r,y,h,n]),A.useEffect(()=>{if(r&&o.user.user){const k=[...m];Promise.all(m.map((D,R)=>{var M;return XUt(n,D.id,r,(M=o.user.user)==null?void 0:M.email).then($=>{if($&&$.length>0){const L=lI($.map(U=>U.text.length)),B=$.map(U=>U.selectedTags.map(z=>({...z,startTime:U.transcriptMappingStart}))).flat();k[R].tasks[r].tags=B,k[R].tasks[r].wordCount=L}else k[R].tasks[r].wordCount=0})})).then(()=>g(k))}},[o.user.user,r,n]),A.useEffect(()=>{y.length!==0&&g(m.filter(k=>!!(h&&h[k.id]&&(h[k.id].partTags.find(R=>!!y.find(M=>M===R.name))||r&&h[k.id].taskTags[r].find(M=>!!y.find($=>$===M.name))))))},[r,y]);const I=A.useMemo(()=>r===null?[{accessorKey:"id",header:"Participant Id"},{accessorKey:"timeSpent",header:"Time Spent",id:"timeSpent",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:k})=>k.getValue()===null||k.getValue()===void 0?b.jsx(ws,{}):b.jsxs("svg",{style:{width:k.column.getSize(),height:"60px"},children:[b.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:x(k.getValue())}),b.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:p0e(k.getValue())})]}),size:150},{accessorKey:"interactionCount",header:"Interaction Count",id:"interactionCount",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:k})=>k.getValue()===null||k.getValue()===void 0?b.jsx(ws,{}):b.jsxs("svg",{style:{width:k.column.getSize(),height:"60px"},children:[b.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:S(k.getValue())}),b.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:k.getValue()})]}),size:150},{accessorKey:"id",id:"participantTags",header:"Participant Tags",renderColumnActionsMenuItems({internalColumnMenuItems:k}){return b.jsxs(b.Fragment,{children:[k,b.jsx(XA,{closeMenuOnClick:!1,children:b.jsx(oq,{tags:d||[],createTagCallback:D=>{T([...d||[],D],"participant")},editTagCallback:()=>null})})]})},Cell:({cell:k})=>b.jsx(uA,{tags:d||[],onSelectTags:D=>{if(n&&h){const R=Bh(h);R[k.getValue()]||(R[k.getValue()]={partTags:[],taskTags:{}}),R[k.getValue()].partTags=D,n.saveAllParticipantAndTaskTags(R).then(()=>{p(n)})}},selectedTags:h&&h[k.getValue()]?h[k.getValue()].partTags:[]}),size:150}]:[{accessorKey:"id",id:"id",header:"Participant Id",Cell:({cell:k})=>b.jsx(Qy,{size:"12px",component:xX,target:"_blank",to:`${pc}ThinkAloud/analysis/${k.getValue()}/reviewer-${r}`,children:k.getValue()}),size:150},{accessorKey:`tasks.${r}.timeSpent`,header:"Time Spent",id:"timeSpent",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:k})=>k.getValue()===null||k.getValue()===void 0?b.jsx(ws,{}):b.jsxs("svg",{style:{width:k.column.getSize(),height:"60px"},children:[b.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:x(k.getValue())}),b.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:p0e(k.getValue())})]}),size:150},{accessorKey:`tasks.${r}.wordCount`,header:"Word Count",id:"wordCount",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:k})=>k.getValue()===null||k.getValue()===void 0?b.jsx(ws,{}):b.jsxs("svg",{style:{width:k.column.getSize(),height:"60px"},children:[b.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:E?E(k.getValue()):0}),b.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:k.getValue()})]}),size:150},{accessorKey:`tasks.${r}.interactionCount`,header:"Interaction Count",id:"interactionCount",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:k})=>k.getValue()===null||k.getValue()===void 0?b.jsx(ws,{}):b.jsxs("svg",{style:{width:k.column.getSize(),height:"60px"},children:[b.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:S(k.getValue())}),b.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:k.getValue()})]}),size:150},{accessorKey:`tasks.${r}.tags`,header:"Tags",Cell:({cell:k,row:D})=>b.jsx(Yb,{type:"auto",h:40,children:b.jsx(Tn,{gap:2,children:b.jsx(ODe,{size:"xs",selectedTags:k.getValue(),currentTask:r,isLink:!0,participantId:D.getValue("id")})})}),size:150},{accessorKey:"id",id:"taskTags",header:"Task Tags",renderColumnActionsMenuItems({internalColumnMenuItems:k}){return b.jsxs(b.Fragment,{children:[k,b.jsx(XA,{closeMenuOnClick:!1,children:b.jsx(oq,{tags:u||[],createTagCallback:D=>{T([...u||[],D],"task")},editTagCallback:()=>null})})]})},Cell:({cell:k})=>b.jsx(uA,{tags:u||[],onSelectTags:D=>{if(n&&h){const R=Bh(h);R[k.getValue()]||(R[k.getValue()]={partTags:[],taskTags:{}}),R[k.getValue()].taskTags[r]=D,n.saveAllParticipantAndTaskTags(R).then(()=>{p(n)})}},selectedTags:h&&h[k.getValue()]?h[k.getValue()].taskTags[r]||[]:[]}),size:150}],[d,r,S,h,p,T,n,u,x,E]),P=MLe({columns:I,data:m,enableMultiSort:!0,enableDensityToggle:!1,enablePagination:!1,enableRowVirtualization:!0,initialState:{density:"xs"},mantineTableContainerProps:{style:{maxHeight:"77dvh"}},renderTopToolbarCustomActions:()=>b.jsxs(Tn,{gap:"xl",children:[b.jsxs(Tn,{children:[b.jsx(Ti,{order:5,children:"Select Task"}),b.jsx(nu,{clearable:!0,value:r,onChange:i,data:s})]}),b.jsxs(Tn,{children:[b.jsx(Ti,{order:5,children:"Filter by tags"}),a&&u&&d&&a.length>0?b.jsx(uA,{tags:a,onSelectTags:k=>v(k.map(D=>D.name)),selectedTags:[...a.filter(k=>y.includes(k.name)),...u.filter(k=>y.includes(k.name)),...d.filter(k=>y.includes(k.name))],partTags:d||[],taskTags:u||[]}):b.jsx(ws,{})]})]})});return b.jsx(_e,{px:"sm",style:{height:"100%"},children:b.jsx(KUt,{table:P})})}function ZUt(e){const{globalConfig:t}=e,{studyId:n}=wf(),[r,i]=A.useState([]),[s,o]=A.useState(void 0),[a,l]=A.useState(!1),{storageEngine:u}=Pi(),c=md(),{tab:d}=wf(),{user:f}=Ap(),h=A.useCallback(async()=>{if(l(!0),n){const y=await J4(n,t);if(!y||!u)return;await u.initializeStudyDb(n,y);const v=await u.getAllParticipantsData();i(v),o(y),l(!1)}},[t,u,n]);A.useEffect(()=>{h()},[t,u,n,h]);const[p,m,g]=A.useMemo(()=>{const y=r.filter(w=>!w.rejected&&w.completed),v=r.filter(w=>!w.rejected&&!w.completed),_=r.filter(w=>w.rejected);return[y,v,_]},[r]);return b.jsxs(Hr,{style:{height:"100%"},children:[b.jsx(gA,{studyIds:e.globalConfig.configsList}),b.jsx(Hr.Main,{children:b.jsxs(_e,{p:"sm",style:{height:"100%",minHeight:"100%",width:"100%"},children:[b.jsx(uu,{visible:a}),b.jsxs(It,{direction:"row",align:"center",children:[b.jsx(Ti,{order:5,children:n}),b.jsx(P3e,{completed:p.length,inProgress:m.length,rejected:g.length})]}),b.jsx(Wc,{h:"xs"}),b.jsxs($o,{variant:"outline",value:d,onChange:y=>c(`./../${y}`),style:{height:"100%"},children:[b.jsxs($o.List,{children:[b.jsx($o.Tab,{value:"table",leftSection:b.jsx(bnt,{size:16}),children:"Table View"}),b.jsx(on,{label:"Coming soon",position:"bottom",children:b.jsx($o.Tab,{value:"stats",leftSection:b.jsx(Btt,{size:16}),disabled:!0,children:"Trial Stats"})}),b.jsx(on,{label:"Coming soon",position:"bottom",children:b.jsx($o.Tab,{value:"replay",leftSection:b.jsx(Tue,{size:16}),disabled:!0,children:"Participant Replay"})}),b.jsx($o.Tab,{value:"thinkAloud",leftSection:b.jsx(Tue,{size:16}),children:"Think Aloud"}),b.jsx($o.Tab,{value:"manage",leftSection:b.jsx(TSe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),b.jsx($o.Panel,{value:"table",pt:"xs",children:s&&b.jsx(ZBt,{completed:p,inProgress:m,studyConfig:s,refresh:h})}),b.jsx($o.Panel,{value:"stats",pt:"xs",children:"statsboard"}),b.jsx($o.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),b.jsx($o.Panel,{value:"thinkAloud",pt:"xs",children:s&&b.jsx(JUt,{completed:p,studyConfig:s})}),b.jsx($o.Panel,{value:"manage",pt:"xs",children:n&&f.isAdmin?b.jsx(n9t,{studyId:n,refresh:h}):b.jsx(Mf,{mt:20,children:b.jsx(aS,{title:"Unauthorized Access",variant:"light",color:"red",icon:b.jsx(ont,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function m0e({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=Ap(),{storageEngine:o}=Pi(),[a,l]=A.useState(!1),u=wf();return A.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&u[t]){const d=await n(u[t]);d&&l(d)}else l(!0);if(a)try{r&&await i(r)||s()}catch(d){s(),console.warn(d)}})()},[r.isAdmin,a]),r.determiningStatus||!o?b.jsx(uu,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?b.jsx(EX,{to:"/login"}):b.jsx(b.Fragment,{children:e})}async function GLe(e,t,n){if(e instanceof Nc){t(!0);const r=new cm,i=z3();try{await vFt(i,r,EMe)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function eVt(){const{user:e}=Ap(),[t,n]=A.useState(null),[r,i]=A.useState(!1),{storageEngine:s}=Pi();return A.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?b.jsx(EX,{to:"/"}):b.jsx(Mf,{children:b.jsx(Kb,{padding:"lg",children:b.jsxs(It,{align:"center",direction:"column",justify:"center",children:[b.jsx(Zy,{maw:200,mt:50,mb:100,src:`${pc}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),b.jsxs(b.Fragment,{children:[b.jsx(nt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),b.jsx(yn,{onClick:()=>GLe(s,i,n),leftSection:b.jsx(_nt,{}),variant:"filled",children:"Sign In With Google"})]}),t?b.jsx(Sm,{size:"lg",color:"red",mt:30,children:t}):null,b.jsx(uu,{visible:r})]})})})}var YLe={exports:{}},tVt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",nVt=tVt,rVt=nVt;function KLe(){}function XLe(){}XLe.resetWarningCache=KLe;var iVt=function(){function e(r,i,s,o,a,l){if(l!==rVt){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:XLe,resetWarningCache:KLe};return n.PropTypes=n,n};YLe.exports=iVt();var sVt=YLe.exports;const g0e=bu(sVt),y0e={};function Uq(e,t){e===void 0&&(e=y0e),t===void 0&&(t=y0e);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var oVt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),aVt=Object.prototype.hasOwnProperty;function Vq(e,t){return aVt.call(e,t)}function Hq(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Vq(e,i)&&r.push(i);return r}function Hu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function qq(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function o1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function QLe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Wq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Wq(e[t]))return!0}else if(typeof e=="object"){for(var r=Hq(e),i=r.length,s=0;s<i;s++)if(Wq(e[r[s]]))return!0}}return!1}function v0e(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var JLe=function(e){oVt(t,e);function t(n,r,i,s,o){var a=this.constructor,l=e.call(this,v0e(n,{name:r,index:i,operation:s,tree:o}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=v0e(n,{name:r,index:i,operation:s,tree:o}),l}return t}(Error),is=JLe,lVt=Hu,qw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=J3(n,this.path);r&&(r=Hu(r));var i=W1(n,{op:"remove",path:this.from}).removed;return W1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=J3(n,this.from);return W1(n,{op:"add",path:this.path,value:Hu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:tR(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},uVt={add:function(e,t,n){return qq(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:qw.move,copy:qw.copy,test:qw.test,_get:qw._get};function J3(e,t){if(t=="")return e;var n={op:"_get",path:t};return W1(e,n),n.value}function W1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):Z3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=J3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=tR(e,t.value),o.test===!1)throw new is("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new is("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Hu(e));var a=t.path||"",l=a.split("/"),u=e,c=1,d=l.length,f=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=Z3;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=QLe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(u[h]===void 0?f=l.slice(0,c).join("/"):c==d-1&&(f=t.path),f!==void 0&&p(t,0,e,f)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!qq(h))throw new is("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);qq(h)&&(h=~~h)}if(c>=d){if(n&&t.op==="add"&&h>u.length)throw new is("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=uVt[t.op].call(t,u,h,e);if(o.test===!1)throw new is("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=d){var o=qw[t.op].call(t,u,h,e);if(o.test===!1)throw new is("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(u=u[h],n&&c<d&&(!u||typeof u!="object"))throw new is("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function mj(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new is("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Hu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=W1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function cVt(e,t,n){var r=W1(e,t);if(r.test===!1)throw new is("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Z3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new is("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(qw[e.op]){if(typeof e.path!="string")throw new is("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new is('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new is("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new is("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Wq(e.value))throw new is("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new is("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new is("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=ZLe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new is("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new is("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function ZLe(e,t,n){try{if(!Array.isArray(e))throw new is("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)mj(Hu(t),Hu(e),n||!0);else{n=n||Z3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof is)return i;throw i}}function tR(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!tR(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!tR(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const dVt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:is,_areEquals:tR,applyOperation:W1,applyPatch:mj,applyReducer:cVt,deepClone:lVt,getValueByPointer:J3,validate:ZLe,validator:Z3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Qte=new WeakMap,fVt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),hVt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function pVt(e){return Qte.get(e)}function mVt(e,t){return e.observers.get(t)}function gVt(e,t){e.observers.delete(t.callback)}function yVt(e,t){t.unobserve()}function vVt(e,t){var n=[],r,i=pVt(e);if(!i)i=new fVt(e),Qte.set(e,i);else{var s=mVt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Hu(e),t){r.callback=t,r.next=null;var o=function(){Gq(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){Gq(r),clearTimeout(r.next),gVt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new hVt(t,r)),r}function Gq(e,t){t===void 0&&(t=!1);var n=Qte.get(e.object);Jte(n.value,e.object,e.patches,"",t),e.patches.length&&mj(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Jte(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=Hq(t),o=Hq(e),a=!1,l=o.length-1;l>=0;l--){var u=o[l],c=e[u];if(Vq(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?Jte(c,d,n,r+"/"+o1(u),i):c!==d&&(i&&n.push({op:"test",path:r+"/"+o1(u),value:Hu(c)}),n.push({op:"replace",path:r+"/"+o1(u),value:Hu(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+o1(u),value:Hu(c)}),n.push({op:"remove",path:r+"/"+o1(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var l=0;l<s.length;l++){var u=s[l];!Vq(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+o1(u),value:Hu(t[u])})}}}function bVt(e,t,n){n===void 0&&(n=!1);var r=[];return Jte(e,t,r,"",n),r}const _Vt=Object.freeze(Object.defineProperty({__proto__:null,compare:bVt,generate:Gq,observe:vVt,unobserve:yVt},Symbol.toStringTag,{value:"Module"}));Object.assign({},dVt,_Vt,{JsonPatchError:JLe,deepClone:Hu,escapePathComponent:o1,unescapePathComponent:QLe});var wVt=/("(?:[^\\"]|\\.)*")|[:,]/g,EVt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,l,u){var c,d,f,h,p,m,g,y,v,_,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-l.length-u,w.length<=g&&(v=w.replace(wVt,function(S,x){return x||S+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=l+r,f=[],d=0,Array.isArray(a))for(_="[",c="]",g=a.length;d<g;d++)f.push(o(a[d],y,d===g-1?0:1)||"null");else for(_="{",c="}",m=Object.keys(a),g=m.length;d<g;d++)h=m[d],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(d===g-1?0:1)),E!==void 0&&f.push(p+E);if(f.length>0)return[_,r+f.join(`,
`+y),c].join(`
`+l)}return w}(t,"",0)};const S7=bu(EVt);function xu(e,t,n){return e.fields=t||[],e.fname=n,e}function fs(e){return e==null?null:e.fname}function Na(e){return e==null?null:e.fields}function eFe(e){return e.length===1?xVt(e[0]):SVt(e)}const xVt=e=>function(t){return t[e]},SVt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function He(e){throw Error(e)}function Ip(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,l;e=e+"";function u(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(l=e[a],l==="\\")s+=e.substring(o,a++),o=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;o===i&&l==='"'||o===i&&l==="'"?(o=a+1,r=l):l==="."&&!i?a>o?u():o=a+1:l==="["?(a>o&&u(),i=o=a+1):l==="]"&&(i||He("Access path missing open bracket: "+e),i>0&&u(),i=0,o=a+1)}return i&&He("Access path missing closing bracket: "+e),r&&He("Access path missing closing quote: "+e),a>o&&(a++,u()),t}function sd(e,t,n){const r=Ip(e);return e=r.length===1?r[0]:e,xu((n&&n.get||eFe)(r),[e],t||e)}const Uk=sd("id"),ja=xu(e=>e,[],"identity"),g0=xu(()=>0,[],"zero"),QS=xu(()=>1,[],"one"),od=xu(()=>!0,[],"true"),Yg=xu(()=>!1,[],"false");function TVt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const tFe=0,Zte=1,ene=2,nFe=3,rFe=4;function tne(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:TVt,r=e||tFe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=Zte&&n(t||"error","ERROR",arguments),this},warn(){return r>=ene&&n(t||"warn","WARN",arguments),this},info(){return r>=nFe&&n(t||"log","INFO",arguments),this},debug(){return r>=rFe&&n(t||"log","DEBUG",arguments),this}}}var Ge=Array.isArray;function bt(e){return e===Object(e)}const b0e=e=>e!=="__proto__";function JS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=CVt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;ZS(r,s,i[s],o)}return r},{})}function ZS(e,t,n,r){if(!b0e(t))return;let i,s;if(bt(n)&&!Ge(n)){s=bt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?ZS(s,i,n[i]):b0e(i)&&(s[i]=n[i])}else e[t]=n}function CVt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function cr(e){return e[e.length-1]}function Ra(e){return e==null||e===""?null:+e}const iFe=e=>t=>e*Math.exp(t),sFe=e=>t=>Math.log(e*t),oFe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),aFe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,eL=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function gj(e,t,n,r){const i=n(e[0]),s=n(cr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function lFe(e,t){return gj(e,t,Ra,ja)}function uFe(e,t){var n=Math.sign(e[0]);return gj(e,t,sFe(n),iFe(n))}function cFe(e,t,n){return gj(e,t,eL(n),eL(1/n))}function dFe(e,t,n){return gj(e,t,oFe(n),aFe(n))}function yj(e,t,n,r,i){const s=r(e[0]),o=r(cr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function nne(e,t,n){return yj(e,t,n,Ra,ja)}function rne(e,t,n){const r=Math.sign(e[0]);return yj(e,t,n,sFe(r),iFe(r))}function tL(e,t,n,r){return yj(e,t,n,eL(r),eL(1/r))}function ine(e,t,n,r){return yj(e,t,n,oFe(r),aFe(r))}function fFe(e){return 1+~~(new Date(e).getMonth()/3)}function hFe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function wt(e){return e!=null?Ge(e)?e:[e]:[]}function pFe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function On(e){return typeof e=="function"}const AVt="descending";function sne(e,t,n){n=n||{},t=wt(t)||[];const r=[],i=[],s={},o=n.comparator||IVt;return wt(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===AVt?-1:1),i.push(a=On(a)?a:sd(a,null,n)),(Na(a)||[]).forEach(u=>s[u]=1))}),i.length===0?null:xu(o(i,r),Object.keys(s))}const vj=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),IVt=(e,t)=>e.length===1?RVt(e[0],t[0]):kVt(e,t,e.length),RVt=(e,t)=>function(n,r){return vj(e(n),e(r))*t},kVt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=vj(s(r),s(i));return o*t[a]});function Ba(e){return On(e)?e:()=>e}function one(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Nn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function up(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function mFe(e,t){const n=e.length;let r=-1,i,s,o,a,l;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}return[a,l]}const PVt=Object.prototype.hasOwnProperty;function Vt(e,t){return PVt.call(e,t)}const dO={};function eT(e){let t={},n;function r(s){return Vt(t,s)&&t[s]!==dO}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===dO&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=dO),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const l=t[a];l!==dO&&(!n||!n(l))&&(s[a]=l,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function gFe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],l=cr(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const c=Math.abs(l-t);return u<c&&u<=o?r:c<=o?i:s}function ht(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Nn(r,n)}function Ww(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function pv(e){return typeof e=="boolean"}function J0(e){return Object.prototype.toString.call(e)==="[object Date]"}function yFe(e){return e&&On(e[Symbol.iterator])}function xr(e){return typeof e=="number"}function vFe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Et(e){return typeof e=="string"}function ane(e,t,n){e&&(e=t?wt(e).map(a=>a.replace(/\\(.)/g,"$1")):wt(e));const r=e&&e.length,i=n&&n.get||eFe,s=a=>i(t?[a]:Ip(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(l){return""+a(l)}}else{const a=e.map(s);o=function(l){let u=""+a[0](l),c=0;for(;++c<r;)u+="|"+a[c](l);return u}}return xu(o,e,"key")}function bFe(e,t){const n=e[0],r=cr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const NVt=1e4;function _Fe(e){e=+e||NVt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Vt(t,o)||Vt(n,o),get:o=>Vt(t,o)?t[o]:Vt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Vt(t,o)?t[o]=a:s(o,a)}}function wFe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,l=0,u=0;for(;a<i&&l<s;++u)o[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)o[u]=t[a];for(;l<s;++l,++u)o[u]=n[l];return o}function l2(e,t){let n="";for(;--t>=0;)n+=e;return n}function EFe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?l2(i,o)+s:r==="center"?l2(i,~~(o/2))+s+l2(i,Math.ceil(o/2)):s+l2(i,o)}function Vk(e){return e&&cr(e)-e[0]||0}function ut(e){return Ge(e)?"["+e.map(ut)+"]":bt(e)||Et(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function lne(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const OVt=e=>xr(e)||J0(e)?e:Date.parse(e);function une(e,t){return t=t||OVt,e==null||e===""?null:t(e)}function cne(e){return e==null||e===""?null:e+""}function Cf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function xFe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function n0(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function DVt(e){return e}function MVt(e){if(e==null)return DVt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,l){l||(t=n=0);var u=2,c=a.length,d=new Array(c);for(d[0]=(t+=a[0])*r+s,d[1]=(n+=a[1])*i+o;u<c;)d[u]=a[u],++u;return d}}function $Vt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function LVt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return _0e(e,n)})}:_0e(e,t)}function _0e(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=SFe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function SFe(e,t){var n=MVt(e.transform),r=e.arcs;function i(c,d){d.length&&d.pop();for(var f=r[c<0?~c:c],h=0,p=f.length;h<p;++h)d.push(n(f[h],h));c<0&&$Vt(d,p)}function s(c){return n(c)}function o(c){for(var d=[],f=0,h=c.length;f<h;++f)i(c[f],d);return d.length<2&&d.push(d[0]),d}function a(c){for(var d=o(c);d.length<4;)d.push(d[0]);return d}function l(c){return c.map(a)}function u(c){var d=c.type,f;switch(d){case"GeometryCollection":return{type:d,geometries:c.geometries.map(u)};case"Point":f=s(c.coordinates);break;case"MultiPoint":f=c.coordinates.map(s);break;case"LineString":f=o(c.arcs);break;case"MultiLineString":f=c.arcs.map(o);break;case"Polygon":f=l(c.arcs);break;case"MultiPolygon":f=c.arcs.map(l);break;default:return null}return{type:d,coordinates:f}}return u(t)}function FVt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(u,c){var d=e.arcs[u<0?~u:u],f;d.length<3&&!d[1][0]&&!d[1][1]&&(f=t[++o],t[o]=u,t[c]=f)}),t.forEach(function(u){var c=a(u),d=c[0],f=c[1],h,p;if(h=i[d])if(delete i[h.end],h.push(u),h.end=f,p=r[f]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[f])if(delete r[h.start],h.unshift(u),h.start=d,p=i[d]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=d]=i[h.end=f]=h});function a(u){var c=e.arcs[u<0?~u:u],d=c[0],f;return e.transform?(f=[0,0],c.forEach(function(h){f[0]+=h[0],f[1]+=h[1]})):f=c[c.length-1],u<0?[f,d]:[d,f]}function l(u,c){for(var d in u){var f=u[d];delete c[f.start],delete f.start,delete f.end,f.forEach(function(h){n[h<0?~h:h]=1}),s.push(f)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||s.push([u])}),s}function jVt(e){return SFe(e,BVt.apply(this,arguments))}function BVt(e,t,n){var r,i,s;if(arguments.length>1)r=zVt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:FVt(e,r)}}function zVt(e,t,n){var r=[],i=[],s;function o(d){var f=d<0?~d:d;(i[f]||(i[f]=[])).push({i:d,g:s})}function a(d){d.forEach(o)}function l(d){d.forEach(a)}function u(d){d.forEach(l)}function c(d){switch(s=d,d.type){case"GeometryCollection":d.geometries.forEach(c);break;case"LineString":a(d.arcs);break;case"MultiLineString":case"Polygon":l(d.arcs);break;case"MultiPolygon":u(d.arcs);break}}return c(t),i.forEach(n==null?function(d){r.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&r.push(d[0].i)}),r}const Yo="year",pu="quarter",Oa="month",Xs="week",mu="date",Ia="day",cp="dayofyear",lc="hours",uc="minutes",ad="seconds",Af="milliseconds",dne=[Yo,pu,Oa,Xs,mu,Ia,cp,lc,uc,ad,Af],T7=dne.reduce((e,t,n)=>(e[t]=1+n,e),{});function fne(e){const t=wt(e).slice(),n={};return t.length||He("Missing time unit."),t.forEach(i=>{Vt(T7,i)?n[i]=1:He(`Invalid time unit: ${i}.`)}),(n[Xs]||n[Ia]?1:0)+(n[pu]||n[Oa]||n[mu]?1:0)+(n[cp]?1:0)>1&&He(`Incompatible time units: ${e}`),t.sort((i,s)=>T7[i]-T7[s]),t}const UVt={[Yo]:"%Y ",[pu]:"Q%q ",[Oa]:"%b ",[mu]:"%d ",[Xs]:"W%U ",[Ia]:"%a ",[cp]:"%j ",[lc]:"%H:00",[uc]:"00:%M",[ad]:":%S",[Af]:".%L",[`${Yo}-${Oa}`]:"%Y-%m ",[`${Yo}-${Oa}-${mu}`]:"%Y-%m-%d ",[`${lc}-${uc}`]:"%H:%M"};function TFe(e,t){const n=Nn({},UVt,t),r=fne(e),i=r.length;let s="",o=0,a,l;for(o=0;o<i;)for(a=r.length;a>o;--a)if(l=r.slice(o,a).join("-"),n[l]!=null){s+=n[l],o=a;break}return s.trim()}const v1=new Date;function hne(e){return v1.setFullYear(e),v1.setMonth(0),v1.setDate(1),v1.setHours(0,0,0,0),v1}function CFe(e){return IFe(new Date(e))}function AFe(e){return Yq(new Date(e))}function IFe(e){return km.count(hne(e.getFullYear())-1,e)}function Yq(e){return IS.count(hne(e.getFullYear())-1,e)}function Kq(e){return hne(e).getDay()}function VVt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function RFe(e){return PFe(new Date(e))}function kFe(e){return Xq(new Date(e))}function PFe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return q0.count(t-1,e)}function Xq(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return RS.count(t-1,e)}function Qq(e){return v1.setTime(Date.UTC(e,0,1)),v1.getUTCDay()}function HVt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function NFe(e,t,n,r,i){const s=t||1,o=cr(e),a=(y,v,_)=>(_=_||y,qVt(n[_],r[_],y===o&&s,v)),l=new Date,u=Cf(e),c=u[Yo]?a(Yo):Ba(2012),d=u[Oa]?a(Oa):u[pu]?a(pu):g0,f=u[Xs]&&u[Ia]?a(Ia,1,Xs+Ia):u[Xs]?a(Xs,1):u[Ia]?a(Ia,1):u[mu]?a(mu,1):u[cp]?a(cp,1):QS,h=u[lc]?a(lc):g0,p=u[uc]?a(uc):g0,m=u[ad]?a(ad):g0,g=u[Af]?a(Af):g0;return function(y){l.setTime(+y);const v=c(l);return i(v,d(l),f(l,v),h(l),p(l),m(l),g(l))}}function qVt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function Ax(e,t,n){return t+e*7-(n+6)%7}const WVt={[Yo]:e=>e.getFullYear(),[pu]:e=>Math.floor(e.getMonth()/3),[Oa]:e=>e.getMonth(),[mu]:e=>e.getDate(),[lc]:e=>e.getHours(),[uc]:e=>e.getMinutes(),[ad]:e=>e.getSeconds(),[Af]:e=>e.getMilliseconds(),[cp]:e=>IFe(e),[Xs]:e=>Yq(e),[Xs+Ia]:(e,t)=>Ax(Yq(e),e.getDay(),Kq(t)),[Ia]:(e,t)=>Ax(1,e.getDay(),Kq(t))},GVt={[pu]:e=>3*e,[Xs]:(e,t)=>Ax(e,0,Kq(t))};function OFe(e,t){return NFe(e,t||1,WVt,GVt,VVt)}const YVt={[Yo]:e=>e.getUTCFullYear(),[pu]:e=>Math.floor(e.getUTCMonth()/3),[Oa]:e=>e.getUTCMonth(),[mu]:e=>e.getUTCDate(),[lc]:e=>e.getUTCHours(),[uc]:e=>e.getUTCMinutes(),[ad]:e=>e.getUTCSeconds(),[Af]:e=>e.getUTCMilliseconds(),[cp]:e=>PFe(e),[Xs]:e=>Xq(e),[Ia]:(e,t)=>Ax(1,e.getUTCDay(),Qq(t)),[Xs+Ia]:(e,t)=>Ax(Xq(e),e.getUTCDay(),Qq(t))},KVt={[pu]:e=>3*e,[Xs]:(e,t)=>Ax(e,0,Qq(t))};function DFe(e,t){return NFe(e,t||1,YVt,KVt,HVt)}const XVt={[Yo]:tp,[pu]:bI.every(3),[Oa]:bI,[Xs]:IS,[mu]:km,[Ia]:km,[cp]:km,[lc]:G6,[uc]:q6,[ad]:gm,[Af]:sx},QVt={[Yo]:np,[pu]:_I.every(3),[Oa]:_I,[Xs]:RS,[mu]:q0,[Ia]:q0,[cp]:q0,[lc]:Y6,[uc]:W6,[ad]:gm,[Af]:sx};function tT(e){return XVt[e]}function nT(e){return QVt[e]}function MFe(e,t,n){return e?e.offset(t,n):void 0}function $Fe(e,t,n){return MFe(tT(e),t,n)}function LFe(e,t,n){return MFe(nT(e),t,n)}function FFe(e,t,n,r){return e?e.range(t,n,r):void 0}function jFe(e,t,n,r){return FFe(tT(e),t,n,r)}function BFe(e,t,n,r){return FFe(nT(e),t,n,r)}const u2=1e3,c2=u2*60,d2=c2*60,bj=d2*24,JVt=bj*7,w0e=bj*30,Jq=bj*365,zFe=[Yo,Oa,mu,lc,uc,ad,Af],f2=zFe.slice(0,-1),h2=f2.slice(0,-1),p2=h2.slice(0,-1),ZVt=p2.slice(0,-1),eHt=[Yo,Xs],E0e=[Yo,Oa],UFe=[Yo],aC=[[f2,1,u2],[f2,5,5*u2],[f2,15,15*u2],[f2,30,30*u2],[h2,1,c2],[h2,5,5*c2],[h2,15,15*c2],[h2,30,30*c2],[p2,1,d2],[p2,3,3*d2],[p2,6,6*d2],[p2,12,12*d2],[ZVt,1,bj],[eHt,1,JVt],[E0e,1,w0e],[E0e,3,3*w0e],[UFe,1,Jq]];function VFe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Vk(t))/n;let i=xS(a=>a[2]).right(aC,r),s,o;return i===aC.length?(s=UFe,o=dy(t[0]/Jq,t[1]/Jq,n)):i?(i=aC[r/aC[i-1][2]<aC[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=zFe,o=Math.max(dy(t[0],t[1],n),1)),{units:s,step:o}}function m2(e){const t={};return n=>t[n]||(t[n]=e(n))}function tHt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=nHt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function nHt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function HFe(e){const t=m2(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=fb(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return tHt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=fb(o??",f");const a=dy(r,i,s),l=Math.max(Math.abs(r),Math.abs(i));let u;if(o.precision==null)switch(o.type){case"s":return isNaN(u=cIe(a,l))||(o.precision=u),n(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=dIe(a,l))||(o.precision=u-(o.type==="e"));break}case"f":case"%":{isNaN(u=uIe(a))||(o.precision=u-(o.type==="%")*2);break}}return t(o)}}}let Zq;qFe();function qFe(){return Zq=HFe({format:TS,formatPrefix:wJ})}function WFe(e){return HFe(lIe(e))}function nL(e){return arguments.length?Zq=WFe(e):Zq}function x0e(e,t,n){n=n||{},bt(n)||He(`Invalid time multi-format specifier: ${n}`);const r=t(ad),i=t(uc),s=t(lc),o=t(mu),a=t(Xs),l=t(Oa),u=t(pu),c=t(Yo),d=e(n[Af]||".%L"),f=e(n[ad]||":%S"),h=e(n[uc]||"%I:%M"),p=e(n[lc]||"%I %p"),m=e(n[mu]||n[Ia]||"%a %d"),g=e(n[Xs]||"%b %d"),y=e(n[Oa]||"%B"),v=e(n[pu]||"%B"),_=e(n[Yo]||"%Y");return w=>(r(w)<w?d:i(w)<w?f:s(w)<w?h:o(w)<w?p:l(w)<w?a(w)<w?m:g:c(w)<w?u(w)<w?y:v:_)(w)}function GFe(e){const t=m2(e.format),n=m2(e.utcFormat);return{timeFormat:r=>Et(r)?t(r):x0e(t,tT,r),utcFormat:r=>Et(r)?n(r):x0e(n,nT,r),timeParse:m2(e.parse),utcParse:m2(e.utcParse)}}let eW;YFe();function YFe(){return eW=GFe({format:MJ,parse:xRe,utcFormat:K6,utcParse:SRe})}function KFe(e){return GFe(vRe(e))}function nR(e){return arguments.length?eW=KFe(e):eW}const tW=(e,t)=>Nn({},e,t);function XFe(e,t){const n=e?WFe(e):nL(),r=t?KFe(t):nR();return tW(n,r)}function pne(e,t){const n=arguments.length;return n&&n!==2&&He("defaultLocale expects either zero or two arguments."),n?tW(nL(e),nR(t)):tW(nL(),nR())}function rHt(){return qFe(),YFe(),pne()}const iHt=/^(data:|([A-Za-z]+:)?\/\/)/,sHt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,oHt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,S0e="file://";function aHt(e,t){return n=>({options:n||{},sanitize:uHt,load:lHt,fileAccess:!!t,file:cHt(t),http:fHt(e)})}async function lHt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function uHt(e,t){t=Nn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=sHt.test(e.replace(oHt,""));(e==null||typeof e!="string"||!a)&&He("Sanitize failure, invalid URI: "+ut(e));const l=iHt.test(e);return(o=t.baseURL)&&!l&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(S0e))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(S0e.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function cHt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):dHt}async function dHt(){He("No file system access.")}function fHt(e){return e?async function(t,n){const r=Nn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?On(s[i])?s[i]():s.text():He(s.status+""+s.statusText)}:hHt}async function hHt(){He("No HTTP fetch method available.")}const pHt=e=>e!=null&&e===e,mHt=e=>e==="true"||e==="false"||e===!0||e===!1,gHt=e=>!Number.isNaN(Date.parse(e)),QFe=e=>!Number.isNaN(+e)&&!(e instanceof Date),yHt=e=>QFe(e)&&Number.isInteger(+e),nW={boolean:lne,integer:Ra,number:Ra,date:une,string:cne,unknown:ja},fO=[mHt,yHt,QFe,gHt],vHt=["boolean","integer","number","date"];function JFe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=fO.length,i=fO.map((s,o)=>o+1);for(let s=0,o=0,a,l;s<n;++s)for(l=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&pHt(l)&&!fO[a](l)&&(i[a]=0,++o,o===fO.length))return"string";return vHt[i.reduce((s,o)=>s===0?o:s,0)-1]}function ZFe(e,t){return t.reduce((n,r)=>(n[r]=JFe(e,r),n),{})}function T0e(e){const t=function(n,r){const i={delimiter:e};return mne(n,r?Nn(r,i):i)};return t.responseType="text",t}function mne(e,t){return t.header&&(e=t.header.map(ut).join(t.delimiter)+`
`+e),sIe(t.delimiter).parse(e+"")}mne.responseType="text";function bHt(e){return typeof Buffer=="function"&&On(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function gne(e,t){const n=t&&t.property?sd(t.property):ja;return bt(e)&&!bHt(e)?_Ht(n(e),t):n(JSON.parse(e))}gne.responseType="json";function _Ht(e,t){return!Ge(e)&&yFe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const wHt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function e6e(e,t){let n,r,i,s;return e=gne(e,t),t&&t.feature?(n=LVt,i=t.feature):t&&t.mesh?(n=jVt,i=t.mesh,s=wHt[t.filter]):He("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):He("Invalid TopoJSON object: "+i),r&&r.features||[r]}e6e.responseType="json";const zD={dsv:mne,csv:T0e(","),tsv:T0e("	"),json:gne,topojson:e6e};function yne(e,t){return arguments.length>1?(zD[e]=t,this):Vt(zD,e)?zD[e]:null}function t6e(e){const t=yne(e);return t&&t.responseType||"text"}function n6e(e,t,n,r){t=t||{};const i=yne(t.type||"json");return i||He("Unknown data format type: "+t.type),e=i(e,t),t.parse&&EHt(e,t.parse,n,r),Vt(e,"columns")&&delete e.columns,e}function EHt(e,t,n,r){if(!e.length)return;const i=nR();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,l,u,c,d;t==="auto"&&(t=ZFe(e,s)),s=Object.keys(t);const f=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!nW[p])throw Error("Illegal format pattern: "+h+":"+p);return nW[p]});for(l=0,c=e.length,d=s.length;l<c;++l)for(o=e[l],u=0;u<d;++u)a=s[u],o[a]=f[u](o[a])}const _j=aHt(typeof fetch<"u"&&fetch,null);function wj(e){const t=e||ja,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function UD(e,t){try{await t(e)}catch(n){e.error(n)}}const r6e=Symbol("vega_id");let xHt=1;function Ej(e){return!!(e&&zt(e))}function zt(e){return e[r6e]}function i6e(e,t){return e[r6e]=t,e}function Dr(e){const t=e===Object(e)?e:{data:e};return zt(t)?t:i6e(t,xHt++)}function vne(e){return xj(e,Dr({}))}function xj(e,t){for(const n in e)t[n]=e[n];return t}function s6e(e,t){return i6e(t,zt(e))}function d_(e,t){return e?t?(n,r)=>e(n,r)||zt(t(n))-zt(t(r)):(n,r)=>e(n,r)||zt(n)-zt(r):null}function o6e(e){return e&&e.constructor===f_}function f_(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:f_,insert(a){const l=wt(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){const l=On(a)?r:t,u=wt(a),c=u.length;for(let d=0;d<c;++d)l.push(u[d]);return this},modify(a,l,u){const c={field:l,value:Ba(u)};return On(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return On(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,l){const u={},c={};let d,f,h,p,m,g;for(d=0,f=l.length;d<f;++d)u[zt(l[d])]=1;for(d=0,f=t.length;d<f;++d)m=t[d],u[zt(m)]=-1;for(d=0,f=r.length;d<f;++d)p=r[d],l.forEach(v=>{p(v)&&(u[zt(v)]=-1)});for(d=0,f=e.length;d<f;++d)m=e[d],g=zt(m),u[g]?u[g]=1:a.add.push(Dr(e[d]));for(d=0,f=l.length;d<f;++d)m=l[d],u[zt(m)]<0&&a.rem.push(m);function y(v,_,w){w?v[_]=w(v):a.encode=_,o||(c[zt(v)]=v)}for(d=0,f=n.length;d<f;++d)h=n[d],m=h.tuple,p=h.field,g=u[zt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(d=0,f=i.length;d<f;++d)h=i[d],p=h.filter,l.forEach(v=>{p(v)&&u[zt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?l.filter(v=>u[zt(v)]>0):l.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const VD="_:mod:_";function Sj(){Object.defineProperty(this,VD,{writable:!0,value:{}})}Sj.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[VD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Ge(n)?1+n.length:-1),i},modified(e,t){const n=this[VD];if(arguments.length){if(Ge(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[VD]={},this}};let SHt=0;const THt="pulse",CHt=new Sj,AHt=1,IHt=2;function di(e,t,n,r){this.id=++SHt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function C0e(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}di.prototype={targets(){return this._targets||(this._targets=wj(Uk))},set(e){return this.value!==e?(this.value=e,1):0},skip:C0e(AHt),modified:C0e(IHt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new Sj,i=this._argops=this._argops||[],s=[];let o,a,l,u;const c=(d,f,h)=>{h instanceof di?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:d,index:f})):r.set(d,f,h)};for(o in e)if(a=e[o],o===THt)wt(a).forEach(d=>{d instanceof di?d!==this&&(d.targets().add(this),s.push(d)):He("Pulse parameters must be operator instances.")}),this.source=a;else if(Ge(a))for(r.set(o,-1,Array(l=a.length)),u=0;u<l;++u)c(o,u,a[u]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||CHt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function RHt(e,t,n,r){let i=1,s;return e instanceof di?s=e:e&&e.prototype instanceof di?s=new e:On(e)?s=new di(null,e):(i=0,s=new di(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function kHt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let PHt=0;function Tj(e,t,n){this.id=++PHt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Kg(e,t,n){return new Tj(e,t,n)}Tj.prototype={_filter:od,_apply:ja,targets(){return this._targets||(this._targets=wj(Uk))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Kg(e);return this.targets().add(t),t},apply(e){const t=Kg(null,e);return this.targets().add(t),t},merge(){const e=Kg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Kg();return this.targets().add(Kg(null,null,one(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Kg(null,null,()=>n=!0)),t.targets().add(Kg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=od,this._targets=null}};function NHt(e,t,n,r){const i=this,s=Kg(n,r),o=function(u){u.dataflow=i;try{s.receive(u)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=wt(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,o);return s}function OHt(e,t){const n=this.locale();return n6e(e,t,n.timeParse,n.utcParse)}function DHt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function MHt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:t6e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function $Ht(e,t,n){const r=this,i=r._pending||LHt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(od).insert(s.data||[])),i.done(),s}function LHt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const FHt={skip:!0};function jHt(e,t,n,r,i){return(e instanceof di?zHt:BHt)(this,e,t,n,r,i),this}function BHt(e,t,n,r,i,s){const o=Nn({},s,FHt);let a,l;On(n)||(n=Ba(n)),r===void 0?a=u=>e.touch(n(u)):On(r)?(l=new di(null,r,i,!1),a=u=>{l.evaluate(u);const c=n(u),d=l.value;o6e(d)?e.pulse(c,d,s):e.update(c,d,o)}):a=u=>e.update(n(u),r,o),t.apply(a)}function zHt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new di(null,UHt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function UHt(e,t){return t=On(t)?t:Ba(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function VHt(e){e.rank=++this._rank}function HHt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&He("Cycle detected in dataflow graph.")}const rL={},ph=1,r0=2,em=4,qHt=ph|r0,A0e=ph|em,Q_=ph|r0|em,I0e=8,lC=16,R0e=32,k0e=64;function Z0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function C7(e,t){const n=[];return n0(e,t,r=>n.push(r)),n}function P0e(e,t){const n={};return e.visit(t,r=>{n[zt(r)]=1}),r=>n[zt(r)]?null:r}function hO(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Z0.prototype={StopPropagation:rL,ADD:ph,REM:r0,MOD:em,ADD_REM:qHt,ADD_MOD:A0e,ALL:Q_,REFLOW:I0e,SOURCE:lC,NO_SOURCE:R0e,NO_FIELDS:k0e,fork(e){return new Z0(this.dataflow).init(this,e)},clone(){const e=this.fork(Q_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Q_|lC)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Z0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&k0e)&&(n.fields=e.fields),t&ph?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&r0?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&em?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&R0e?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Q_;return t&ph&&this.add.length||t&r0&&this.rem.length||t&em&&this.mod.length},reflow(e){if(e)return this.fork(Q_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(em,P0e(this,ph))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Ge(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Ge(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&ph&&(n.addF=hO(n.addF,t)),e&r0&&(n.remF=hO(n.remF,t)),e&em&&(n.modF=hO(n.modF,t)),e&lC&&(n.srcF=hO(n.srcF,t)),n},materialize(e){e=e||Q_;const t=this;return e&ph&&t.addF&&(t.add=C7(t.add,t.addF),t.addF=null),e&r0&&t.remF&&(t.rem=C7(t.rem,t.remF),t.remF=null),e&em&&t.modF&&(t.mod=C7(t.mod,t.modF),t.modF=null),e&lC&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&lC)return n0(n.source,n.srcF,r),n;e&ph&&n0(n.add,n.addF,r),e&r0&&n0(n.rem,n.remF,r),e&em&&n0(n.mod,n.modF,r);const i=n.source;if(e&I0e&&i){const s=n.add.length+n.mod.length;s===i.length||(s?n0(i,P0e(n,A0e),r):n0(i,n.srcF,r))}return n}};function bne(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const l in o.fields)a[l]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}ht(bne,Z0,{fork(e){const t=new Z0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Ge(e)?e.some(r=>n[r]):n[e]:0},filter(){He("MultiPulse does not support filtering.")},materialize(){He("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function WHt(e,t,n){const r=this,i=[];if(r._pulse)return a6e(r);if(r._pending&&await r._pending,t&&await UD(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new Z0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=wj(Uk);let o=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=rL),l!==rL&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),u=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const c=r._postrun.sort((d,f)=>f.priority-d.priority);r._postrun=[];for(let d=0;d<c.length;++d)await UD(r,c[d].callback)}return n&&await UD(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(d=>{try{d(r)}catch(f){r.error(f)}})})),r}async function GHt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function YHt(e,t,n){return this._pulse?a6e(this):(this.evaluate(e,t,n),this)}function KHt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function a6e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function XHt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function QHt(e,t){const n=e.source,r=this._clock;return n&&Ge(n)?new bne(this,r,n.map(i=>i.pulse),t):this._input[e.id]||JHt(this._pulse,n&&n.pulse)}function JHt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==rL&&(e.source=t.source),e)}const _ne={skip:!1,force:!1};function ZHt(e,t){const n=t||_ne;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function eqt(e,t,n){const r=n||_ne;return(e.set(t)||r.force)&&this.touch(e,r),this}function tqt(e,t,n){this.touch(e,n||_ne);const r=new Z0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function nqt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),l6e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,rqt(t,0,e)):r=n,r}}}function l6e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function rqt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,l6e(e,r,t,n)}function CE(){this.logger(tne()),this.logLevel(Zte),this._clock=0,this._rank=0,this._locale=pne();try{this._loader=_j()}catch{}this._touched=wj(Uk),this._input={},this._pulse=null,this._heap=nqt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function uC(e){return function(){return this._log[e].apply(this,arguments)}}CE.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:uC("error"),warn:uC("warn"),info:uC("info"),debug:uC("debug"),logLevel:uC("level"),cleanThreshold:1e4,add:RHt,connect:kHt,rank:VHt,rerank:HHt,pulse:tqt,touch:ZHt,update:eqt,changeset:f_,ingest:DHt,parse:OHt,preload:$Ht,request:MHt,events:NHt,on:jHt,evaluate:WHt,run:YHt,runAsync:GHt,runAfter:KHt,_enqueue:XHt,_getPulse:QHt};function Me(e,t){di.call(this,e,null,t)}ht(Me,di,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Ix={};function u6e(e){const t=c6e(e);return t&&t.Definition||null}function c6e(e){return e=e&&e.toLowerCase(),Vt(Ix,e)?Ix[e]:null}function*d6e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function wne(e,t,n){const r=Float64Array.from(d6e(e,n));return r.sort(Im),t.map(i=>lAe(r,i))}function Ene(e,t){return wne(e,[.25,.5,.75],t)}function xne(e,t){const n=e.length,r=mvt(e,t),i=Ene(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function f6e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,l,u,c,d,f;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,d=0,f=e.steps.length;d<f&&e.steps[d]<c;++d);a=e.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>t;)a*=n;for(d=0,f=i.length;d<f;++d)c=a/i[d],c>=u&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var ld=Math.random;function iqt(e){ld=e}function h6e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(d6e(e,r)),s=i.length,o=t;let a,l,u,c;for(u=0,c=Array(o);u<o;++u){for(a=0,l=0;l<s;++l)a+=i[~~(ld()*s)];c[u]=a/s}return c.sort(Im),[RV(c,n/2),RV(c,1-n/2)]}function p6e(e,t,n,r){r=r||(f=>f);const i=e.length,s=new Float64Array(i);let o=0,a=1,l=r(e[0]),u=l,c=l+t,d;for(;a<i;++a){if(d=r(e[a]),d>=c){for(u=(l+u)/2;o<a;++o)s[o]=u;c=d+t,l=d}u=d}for(u=(l+u)/2;o<a;++o)s[o]=u;return n?sqt(s,t+t/4):s}function sqt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function oqt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function aqt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*ld())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const m6e=Math.sqrt(2*Math.PI),lqt=Math.SQRT2;let cC=NaN;function Cj(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(cC===cC)n=cC,cC=NaN;else{do n=ld()*2-1,r=ld()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,cC=r*s}return e+n*t}function Sne(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*m6e)}function Aj(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function Ij(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*lqt*uqt(2*e-1)}function uqt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Tne(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Cj(n,r),pdf:s=>Sne(s,n,r),cdf:s=>Aj(s,n,r),icdf:s=>Ij(s,n,r)};return i.mean(e).stdev(t)}function Cne(e,t){const n=Tne();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=xne(e)),i):t},sample(){return e[~~(ld()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Ane(e,t){return e=e||0,t=t??1,Math.exp(e+Cj()*t)}function Ine(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*m6e*e)}function Rne(e,t,n){return Aj(Math.log(e),t,n)}function kne(e,t,n){return Math.exp(Ij(e,t,n))}function g6e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Ane(n,r),pdf:s=>Ine(s,n,r),cdf:s=>Rne(s,n,r),icdf:s=>kne(s,n,r)};return i.mean(e).stdev(t)}function y6e(e,t){let n=0,r;function i(o){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=o[u]==null?1:+o[u];for(u=0;u<n;++u)a[u]/=l;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=ld();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(o<l){a=e[u];break}return a.sample()},pdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(o);return a},cdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Pne(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*ld()}function Nne(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function One(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Dne(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function v6e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Pne(n,r),pdf:s=>Nne(s,n,r),cdf:s=>One(s,n,r),icdf:s=>Dne(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Mne(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Hk(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function Rj(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,l=0,u=0,c,d,f;for(f of e)s[a]=c=+t(f),o[a]=d=+n(f),++a,l+=(c-l)/a,u+=(d-u)/a;for(a=0;a<i;++a)s[a]-=l,o[a]-=u;return[s,o,l,u]}function qk(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function rT(e,t,n,r,i){let s=0,o=0;return qk(e,t,n,(a,l)=>{const u=l-i(a),c=l-r;s+=u*u,o+=c*c}),1-s/o}function $ne(e,t,n){let r=0,i=0,s=0,o=0,a=0;qk(e,t,n,(c,d)=>{++a,r+=(c-r)/a,i+=(d-i)/a,s+=(c*d-s)/a,o+=(c*c-o)/a});const l=Hk(r,i,s,o),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:rT(e,t,n,i,u)}}function b6e(e,t,n){let r=0,i=0,s=0,o=0,a=0;qk(e,t,n,(c,d)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(d-i)/a,s+=(c*d-s)/a,o+=(c*c-o)/a});const l=Hk(r,i,s,o),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:rT(e,t,n,i,u)}}function _6e(e,t,n){const[r,i,s,o]=Rj(e,t,n);let a=0,l=0,u=0,c=0,d=0,f,h,p;qk(e,t,n,(v,_)=>{f=r[d++],h=Math.log(_),p=f*_,a+=(_*h-a)/d,l+=(p-l)/d,u+=(p*h-u)/d,c+=(f*p-c)/d});const[m,g]=Hk(l/o,a/o,u/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:rT(e,t,n,o,y)}}function w6e(e,t,n){let r=0,i=0,s=0,o=0,a=0,l=0;qk(e,t,n,(d,f)=>{const h=Math.log(d),p=Math.log(f);++l,r+=(h-r)/l,i+=(p-i)/l,s+=(h*p-s)/l,o+=(h*h-o)/l,a+=(f-a)/l});const u=Hk(r,i,s,o),c=d=>u[0]*Math.pow(d,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:rT(e,t,n,a,c)}}function Lne(e,t,n){const[r,i,s,o]=Rj(e,t,n),a=r.length;let l=0,u=0,c=0,d=0,f=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,l+=(g-l)/h,u+=(g*p-u)/h,c+=(g*g-c)/h,d+=(p*m-d)/h,f+=(g*m-f)/h;const y=c-l*l,v=l*y-u*u,_=(f*l-d*u)/v,w=(d*y-f*u)/v,E=-_*l,S=x=>(x=x-s,_*x*x+w*x+E+o);return{coef:[E-w*s+_*s*s+o,w-2*_*s,_],predict:S,rSquared:rT(e,t,n,o,S)}}function E6e(e,t,n,r){if(r===0)return Mne(e,t,n);if(r===1)return $ne(e,t,n);if(r===2)return Lne(e,t,n);const[i,s,o,a]=Rj(e,t,n),l=i.length,u=[],c=[],d=r+1;let f,h,p,m,g;for(f=0;f<d;++f){for(p=0,m=0;p<l;++p)m+=Math.pow(i[p],f)*s[p];for(u.push(m),g=new Float64Array(d),h=0;h<d;++h){for(p=0,m=0;p<l;++p)m+=Math.pow(i[p],f+h);g[h]=m}c.push(g)}c.push(u);const y=dqt(c),v=_=>{_-=o;let w=a+y[0]+y[1]*_+y[2]*_*_;for(f=3;f<d;++f)w+=y[f]*Math.pow(_,f);return w};return{coef:cqt(d,y,-o,a),predict:v,rSquared:rT(e,t,n,a,v)}}function cqt(e,t,n,r){const i=Array(e);let s,o,a,l;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],l=1,i[s]+=a,o=1;o<=s;++o)l*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*l;return i[0]+=r,i}function dqt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const N0e=2,O0e=1e-12;function x6e(e,t,n,r){const[i,s,o,a]=Rj(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),d=new Float64Array(l),f=new Float64Array(l).fill(1);for(let h=-1;++h<=N0e;){const p=[0,u-1];for(let g=0;g<l;++g){const y=i[g],v=p[0],_=p[1],w=y-i[v]>i[_]-y?v:_;let E=0,S=0,x=0,T=0,I=0;const P=1/Math.abs(i[w]-y||1);for(let R=v;R<=_;++R){const M=i[R],$=s[R],L=fqt(Math.abs(y-M)*P)*f[R],B=M*L;E+=L,S+=B,x+=$*L,T+=$*B,I+=M*B}const[k,D]=Hk(S/E,x/E,T/E,I/E);c[g]=k+D*y,d[g]=Math.abs(s[g]-c[g]),hqt(i,g+1,p)}if(h===N0e)break;const m=cAe(d);if(Math.abs(m)<O0e)break;for(let g=0,y,v;g<l;++g)y=d[g]/(6*m),f[g]=y>=1?O0e:(v=1-y*y)*v}return pqt(i,c,o,a)}function fqt(e){return(e=1-e*e*e)*e*e}function hqt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function pqt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,l=[],u;for(;o<i;++o)u=e[o]+n,l[0]===u?l[1]+=(t[o]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[o]],s.push(l));return l[1]+=r,s}const mqt=.5*Math.PI/180;function kj(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,l=a/r,u=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)u.push(i(s+m/n*a));return u.push(i(o)),u}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let d=u[0],f=c[c.length-1];const h=1/a,p=gqt(d[1],c);for(;f;){const m=i((d[0]+f[0])/2);m[0]-d[0]>=l&&yqt(d,m,f,h,p)>mqt?c.push(m):(d=f,u.push(f),c.pop()),f=c[c.length-1]}return u}function gqt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function yqt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function vqt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function rW(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:vqt(e)}function S6e(e,t,n){return n||e+(t?"_"+t:"")}const A7=()=>{},bqt={init:A7,add:A7,rem:A7,idx:0},rR={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Wk=Object.keys(rR).filter(e=>e!=="__count__");function _qt(e,t){return(n,r)=>Nn({name:e,aggregate_param:r,out:n||e},bqt,t)}[...Wk,"__count__"].forEach(e=>{rR[e]=_qt(e,rR[e])});function T6e(e,t,n){return rR[e](n,t)}function C6e(e,t){return e.idx-t.idx}function wqt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=rR[i]())})};return e.forEach(n),Object.values(t).sort(C6e)}function Eqt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function xqt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Sqt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Tqt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function A6e(e,t){const n=t||ja,r=wqt(e),i=e.slice().sort(C6e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=Eqt,s.prototype.add=xqt,s.prototype.rem=Sqt,s.prototype.set=Tqt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Fne(e){this._key=e?sd(e):zt,this.reset()}const ra=Fne.prototype;ra.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};ra.add=function(e){this._add.push(e)};ra.rem=function(e){this._rem.push(e)};ra.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,l,u;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,l=0;a<r;++a)o[n(u=e[a])]?o[n(u)]=0:s[l++]=u;return this._rem=[],this._add=s};ra.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Vt(n,s)||(n[s]=1,++i);return i};ra.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=mFe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};ra.argmin=function(e){return this.extent(e)[0]||{}};ra.argmax=function(e){return this.extent(e)[1]||{}};ra.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};ra.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};ra.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Ene(this.values(),e),this._get=e),this._q};ra.q1=function(e){return this.quartile(e)[0]};ra.q2=function(e){return this.quartile(e)[1]};ra.q3=function(e){return this.quartile(e)[2]};ra.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=h6e(this.values(),1e3,.05,e),this._get=e),this._ci};ra.ci0=function(e){return this.ci(e)[0]};ra.ci1=function(e){return this.ci(e)[1]};function Py(e){Me.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Py.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Wk},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ht(Py,Me,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let l,u,c,d;for(l in a)for(c=a[l].tuple,u=0;u<i;++u)r[u][d=c[n[u]]]=d}s(e._prev),s(t);function o(a,l,u){const c=n[u],d=r[u++];for(const f in d){const h=a?a+"|"+f:f;l[c]=d[f],u<i?o(h,l,u):t[h]||e.cell(h,l)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const _=wt(Na(v)),w=_.length;let E=0,S;for(;E<w;++E)r[S=_[E]]||(r[S]=1,t.push(S))}this._dims=wt(e.groupby),this._dnames=this._dims.map(v=>{const _=fs(v);return i(v),n.push(_),_}),this.cellkey=e.key?e.key:rW(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=s.length,c={};let d,f,h,p,m,g,y;for(u!==o.length&&He("Unmatched number of fields and aggregate ops."),y=0;y<u;++y){if(d=s[y],f=o[y],h=a[y]||null,d==null&&f!=="count"&&He("Null aggregate field specified."),m=fs(d),g=S6e(f,m,l[y]),n.push(g),f==="count"){this._counts.push(g);continue}p=c[m],p||(i(d),p=c[m]=[],p.field=d,this._measures.push(p)),f!=="count"&&(this._countOnly=!1),p.push(T6e(f,h,g))}return this._measures=this._measures.map(v=>A6e(v,v.field)),Object.create(null)},cellkey:rW(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Fne),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?s6e(t.tuple,s):Dr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let l,u,c,d;if(r)for(u in r)l=r[u],(!i||l.num)&&o.push(l.tuple);for(c=0,d=this._alen;c<d;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,d=this._mlen;c<d;++c)l=n[c],(l.num===0&&i?o:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Cqt=1e-14;function jne(e){Me.call(this,null,e)}jne.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ht(jne,Me,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],l=o[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(Na(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const d=r(c);c[a]=d,c[l]=d==null?null:i+s*(1+(d-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=f6e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const l=function(u){let c=Ra(t(u));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(Cqt+(c-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=xu(l,Na(t),e.name||"bin_"+fs(t))}});function I6e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:l=>s.push(l),remove:l=>o[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),u&&l&&i.sort(l),s.length&&(i=l?wFe(l,i,s.sort(l)):i.concat(s),s=[]),i)}}function Bne(e){Me.call(this,[],e)}Bne.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ht(Bne,Me,{transform(e,t){const n=t.fork(t.ALL),r=I6e(zt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(d_(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function R6e(e){di.call(this,null,Aqt,e)}ht(R6e,di);function Aqt(e){return this.value&&!e.modified()?this.value:sne(e.fields,e.orders)}function zne(e){Me.call(this,null,e)}zne.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Iqt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ht(zne,Me,{transform(e,t){const n=d=>f=>{for(var h=Iqt(a(f),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||d(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,l=e.as||["text","count"],u=n(d=>i[d]=1+(i[d]||0)),c=n(d=>i[d]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=Dr({}),l[i]=a,l[s]=u,o.add.push(l)):u===0?(l&&o.rem.push(l),n[a]=null,r[a]=null):l[s]!==u&&(l[s]=u,o.mod.push(l));return o.modifies(t)}});function Une(e){Me.call(this,null,e)}Une.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ht(Une,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=Rqt(a,i,s,e.filter||od)):n.mod=a,n.source=this.value,n.modifies(r)}});function Rqt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,l,u;a<o;++a)for(s[t]=u=e[a],l=0;l<o;++l)s[n]=e[l],r(s)&&(i.push(Dr(s)),s={},s[t]=u);return i}const D0e={kde:Cne,mixture:y6e,normal:Tne,lognormal:g6e,uniform:v6e},kqt="distributions",M0e="function",Pqt="field";function k6e(e,t){const n=e[M0e];Vt(D0e,n)||He("Unknown distribution function: "+n);const r=D0e[n]();for(const i in e)i===Pqt?r.data((e.from||t()).map(e[i])):i===kqt?r[i](e[i].map(s=>k6e(s,t))):typeof r[i]===M0e&&r[i](e[i]);return r}function Vne(e){Me.call(this,null,e)}const P6e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Nqt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:P6e},{name:"weights",type:"number",array:!0}]};Vne.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:P6e.concat(Nqt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ht(Vne,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=k6e(e.distribution,Oqt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&He("Invalid density method: "+o),!e.extent&&!r.data&&He("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],l=e.extent||up(r.data()),u=kj(o,l,i,s).map(c=>{const d={};return d[a[0]]=c[0],d[a[1]]=c[1],Dr(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function Oqt(e){return()=>e.materialize(e.SOURCE).source}function N6e(e,t){return e?e.map((n,r)=>t[r]||fs(n)):null}function Hne(e,t,n){const r=[],i=d=>d(l);let s,o,a,l,u,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)l=e[o],u=t.map(i),c=s[u],c||(s[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}const O6e="bin";function qne(e){Me.call(this,null,e)}qne.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:O6e}]};const Dqt=(e,t)=>Vk(up(e,t))/30;ht(qne,Me,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Hne(t.source,e.groupby,ja),i=e.smooth||!1,s=e.field,o=e.step||Dqt(n,s),a=d_((p,m)=>s(p)-s(m)),l=e.as||O6e,u=r.length;let c=1/0,d=-1/0,f=0,h;for(;f<u;++f){const p=r[f].sort(a);h=-1;for(const m of p6e(p,o,i,s))m<c&&(c=m),m>d&&(d=m),p[++h][l]=m}return this.value={start:c,stop:d,step:o},t.reflow(!0).modifies(l)}});function D6e(e){di.call(this,null,Mqt,e),this.modified(!0)}ht(D6e,di);function Mqt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:xu(n=>t(n,e),Na(t),fs(t))}function Wne(e){Me.call(this,[void 0,void 0],e)}Wne.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ht(Wne,Me,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=Ra(r(a));l!=null&&(l<s&&(s=l),l>o&&(o=l))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=fs(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Gne(e,t){di.call(this,e),this.parent=t,this.count=0}ht(Gne,di,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Pj(e){Me.call(this,{},e),this._keys=eT();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ht(Pj,Me,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Vt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Gne(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=zt(l),c=s.get(u);c!==void 0&&(s.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);s.set(zt(l),u),a(u).add(l)}),o||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=zt(l),c=s.get(u),d=r(l);c===d?a(d).mod(l):(s.set(u,d),a(c).rem(l),a(d).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(s.get(zt(l))).mod(l)}),o&&t.visit(t.REFLOW,l=>{const u=zt(l),c=s.get(u),d=r(l);c!==d&&(s.set(u,d),a(c).rem(l),a(d).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function M6e(e){di.call(this,null,$qt,e)}ht(M6e,di);function $qt(e){return this.value&&!e.modified()?this.value:Ge(e.name)?wt(e.name).map(t=>sd(t)):sd(e.name,e.as)}function Yne(e){Me.call(this,eT(),e)}Yne.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ht(Yne,Me,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,d=>{const f=zt(d);r.has(f)?r.delete(f):o.push(d)}),t.visit(t.ADD,d=>{l(d,e)?s.push(d):r.set(zt(d),1)});function c(d){const f=zt(d),h=l(d,e),p=r.get(f);h&&p?(r.delete(f),s.push(d)):!h&&!p?(r.set(f,1),o.push(d)):u&&h&&!p&&a.push(d)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Kne(e){Me.call(this,[],e)}Kne.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ht(Kne,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=N6e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(p=>p(a)),u=l.reduce((p,m)=>Math.max(p,m.length),0);let c=0,d,f,h;for(;c<u;++c){for(f=vne(a),d=0;d<o;++d)f[i[d]]=(h=l[d][c])==null?null:h;s&&(f[s]=c),n.add.push(f)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Xne(e){Me.call(this,[],e)}Xne.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ht(Xne,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(fs),s=e.as||["key","value"],o=s[0],a=s[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,d;c<l;++c)d=vne(u),d[o]=i[c],d[a]=r[c](u),n.add.push(d)}),this.value=n.source=n.add,n.modifies(s)}});function Qne(e){Me.call(this,null,e)}Qne.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ht(Qne,Me,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function $6e(e){Me.call(this,[],e)}ht($6e,Me,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,l;if(s>0){for(o=[];--s>=0;)o.push(l=Dr(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const pO={value:"value",median:cAe,mean:uAe,min:IV,max:Yc},Lqt=[];function Jne(e){Me.call(this,[],e)}Jne.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Fqt(e){var t=e.method||pO.value,n;if(pO[t]==null)He("Unrecognized imputation method: "+t);else return t===pO.value?(n=e.value!==void 0?e.value:0,()=>n):pO[t]}function jqt(e){const t=e.field;return n=>n?t(n):NaN}ht(Jne,Me,{transform(e,t){var n=t.fork(t.ALL),r=Fqt(e),i=jqt(e),s=fs(e.field),o=fs(e.key),a=(e.groupby||[]).map(fs),l=Bqt(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,d=l.domain.length,f,h,p,m,g,y,v,_,w,E;for(g=0,_=l.length;g<_;++g)for(f=l[g],p=f.values,h=NaN,v=0;v<d;++v)if(f[v]==null){for(m=l.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(f,i):h,u.push(Dr(E))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function Bqt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},l={},u,c,d,f,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),f=0,m=e.length;f<m;++f)g=e[f],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(u=t?t.map(i):Lqt)+"",(d=l[c])||(d=l[c]=[],s.push(d),d.values=u),d[h-1]=g;return s.domain=o,s}function Zne(e){Py.call(this,e)}Zne.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Wk},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ht(Zne,Py,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{Nn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function ere(e){Me.call(this,null,e)}ere.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ht(ere,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Hne(r,e.groupby,e.field),s=(e.groupby||[]).map(fs),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,d=e.steps||e.minsteps||25,f=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&He("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=up(r,e.field)),d=f=e.steps||f),i.forEach(h=>{const p=Cne(h,o)[a],m=e.counts?h.length:1,g=c||up(h);kj(p,g,d,f).forEach(y=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=h.dims[_];v[l[0]]=y[0],v[l[1]]=y[1]*m,u.push(Dr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function L6e(e){di.call(this,null,zqt,e)}ht(L6e,di);function zqt(e){return this.value&&!e.modified()?this.value:ane(e.fields,e.flat)}function F6e(e){Me.call(this,[],e),this._pending=null}ht(F6e,Me,{transform(e,t){const n=t.dataflow;return this._pending?I7(this,t,this._pending):Uqt(e)?t.StopPropagation:e.values?I7(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=wt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>I7(this,t,wt(r.data)))}});function Uqt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function I7(e,t,n){n.forEach(Dr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function tre(e){Me.call(this,{},e)}tre.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ht(tre,Me,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let l=o?t.SOURCE:t.ADD,u=t,c=e.as,d,f,h;return i?(f=i.length,a>1&&!c&&He('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*f&&He('The "as" parameter has too few output field names.'),c=c||i.map(fs),d=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<f;++y,++g)p[c[g]]=s;else for(y=0;y<f;++y,++g)p[c[g]]=i[y](v)}):(c||He("Missing output field names."),d=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,d),u.modifies(c)}});function j6e(e){di.call(this,null,Vqt,e)}ht(j6e,di);function Vqt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function B6e(e){di.call(this,null,Hqt,e)}ht(B6e,di);function Hqt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function z6e(e){Me.call(this,null,e)}ht(z6e,Me,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function nre(e){Py.call(this,e)}nre.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Wk,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ht(nre,Py,{_transform:Py.prototype.transform,transform(e,t){return this._transform(qqt(e,t),t)}});function qqt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Na(n).concat(Na(r)),o=Gqt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>Wqt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function Wqt(e,t,n,r){return xu(i=>t(i)===e?n(i):NaN,r,e+"")}function Gqt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(vj),t?i.slice(0,t):i}function U6e(e){Pj.call(this,e)}ht(U6e,Pj,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(zt(s),n,t,s);return(e.modified("field")||r&&t.modified(Na(r)))&&He("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Dr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function rre(e){Me.call(this,null,e)}rre.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ht(rre,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=N6e(e.fields,e.as||[]),s=r?(a,l)=>Yqt(a,l,r,i):xj;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const l=zt(a);n.rem.push(o[l]),o[l]=null}),t.visit(t.ADD,a=>{const l=s(a,Dr({}));o[zt(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[zt(a)]))}),n}});function Yqt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function V6e(e){Me.call(this,null,e)}ht(V6e,Me,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function ire(e){Me.call(this,null,e)}ire.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Kqt=1e-14;ht(ire,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Hne(i,e.groupby,e.field),o=(e.groupby||[]).map(fs),a=[],l=e.step||.01,u=e.probs||Yl(l/2,1-Kqt,l),c=u.length;return s.forEach(d=>{const f=wne(d,u);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=d.dims[m];p[r[0]]=u[h],p[r[1]]=f[h],a.push(Dr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function H6e(e){Me.call(this,null,e)}ht(H6e,Me,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=zt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=vne(i);r[zt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[zt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function sre(e){Me.call(this,[],e),this.count=0}sre.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ht(sre,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,d)=>(c[zt(d)]=1,c),{});let o=this.value,a=this.count,l=0;function u(c){let d,f;o.length<i?o.push(c):(f=~~((a+1)*ld()),f<o.length&&f>=l&&(d=o[f],s[zt(d)]&&n.rem.push(d),o[f]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const d=zt(c);s[d]&&(s[d]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[zt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(l=a=o.length,t.visit(t.SOURCE,c=>{s[zt(c)]||u(c)}),l=-1),r&&o.length>i){const c=o.length-i;for(let d=0;d<c;++d)s[zt(o[d])]=-1,n.rem.push(o[d]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[zt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=o.filter(c=>!s[zt(c)])),this.count=a,this.value=n.source=o,n}});function ore(e){Me.call(this,null,e)}ore.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ht(ore,Me,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Yl(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Dr(s)}),n.add=t.add.concat(this.value),n}});function q6e(e){Me.call(this,null,e),this.modified(!0)}ht(q6e,Me,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function are(e){Me.call(this,null,e)}const W6e=["unit0","unit1"];are.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:dne,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:W6e}]};ht(are,Me,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?nT:tT)(s.unit).offset,a=e.as||W6e,l=a[0],u=a[1],c=s.step;let d=s.start||1/0,f=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Na(n)))&&(t=t.reflow(!0),h=t.SOURCE,d=1/0,f=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[l]=null,r&&(p[u]=null)):(p[l]=g=y=s(m),r&&(p[u]=y=o(g,c)),g<d&&(d=g),y>f&&(f=y))}),s.start=d,s.stop=f,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:VFe({extent:e.extent||up(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=fne(r),o=this.value||{},a=(n?DFe:OFe)(s,i);return a.unit=cr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function G6e(e){Me.call(this,eT(),e)}ht(G6e,Me,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function Y6e(e){Me.call(this,null,e)}ht(Y6e,Me,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(d_(e.sort)):t.source).map(e.field))}});function Xqt(e,t,n,r){const i=iR[e](t,n);return{init:i.init||g0,update:function(s,o){o[r]=i.next(s)}}}const iR={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=iR.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||He("ntile num must be greater than zero.");const n=iR.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||He("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Qqt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Qqt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Jqt=Object.keys(iR);function K6e(e){const t=wt(e.ops),n=wt(e.fields),r=wt(e.params),i=wt(e.aggregate_params),s=wt(e.as),o=this.outputs=[],a=this.windows=[],l={},u={},c=[],d=[];let f=!0;function h(p){wt(Na(p)).forEach(m=>l[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,_=fs(g),w=S6e(p,_,s[m]);if(h(g),o.push(w),Vt(iR,p))a.push(Xqt(p,g,y,w));else{if(g==null&&p!=="count"&&He("Null aggregate field specified."),p==="count"){c.push(w);return}f=!1;let E=u[_];E||(E=u[_]=[],E.field=g,d.push(E)),E.push(T6e(p,v,w))}}),(c.length||d.length)&&(this.cell=Zqt(d,c,f)),this.inputs=Object.keys(l)}const X6e=K6e.prototype;X6e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};X6e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function Zqt(e,t,n){e=e.map(l=>A6e(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Fne;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)s[u].add(s[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)s[u].rem(s[u].get(l),l)}},r.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=r.num;if(!n)for(u=0,c=s.length;u<c;++u)s[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)s[l].init()},r}function lre(e){Me.call(this,{},e),this._mlen=0,this._mods=[]}lre.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Jqt.concat(Wk)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ht(lre,Me,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=d_(e.sort),i=rW(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new K6e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)eWt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=I6e(zt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function eWt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),l=a.length,u=s?xS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Ba(-1)};t.init();for(let d=0;d<l;++d)tWt(c,o,d,l),s&&nWt(c,u),t.update(c,a[d])}function tWt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function nWt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const rWt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Py,bin:jne,collect:Bne,compare:R6e,countpattern:zne,cross:Une,density:Vne,dotbin:qne,expression:D6e,extent:Wne,facet:Pj,field:M6e,filter:Yne,flatten:Kne,fold:Xne,formula:Qne,generate:$6e,impute:Jne,joinaggregate:Zne,kde:ere,key:L6e,load:F6e,lookup:tre,multiextent:j6e,multivalues:B6e,params:z6e,pivot:nre,prefacet:U6e,project:rre,proxy:V6e,quantile:ire,relay:H6e,sample:sre,sequence:ore,sieve:q6e,subflow:Gne,timeunit:are,tupleindex:G6e,values:Y6e,window:lre},Symbol.toStringTag,{value:"Module"}));function ey(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const iWt=()=>typeof Image<"u"?Image:null;function ure(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const sWt="identity",Rx="linear",lg="log",Gk="pow",Yk="sqrt",Nj="symlog",Cb="time",Ab="utc",Xh="sequential",iT="diverging",kx="quantile",Oj="quantize",Dj="threshold",cre="ordinal",iW="point",Q6e="band",dre="bin-ordinal",oo="continuous",Kk="discrete",Xk="discretizing",bd="interpolating",fre="temporal";function oWt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function aWt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),o=l);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function hre(){const e=AS().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,l=0,u=.5;delete e.unknown;function c(){const d=t().length,f=r[1]<r[0],h=r[1-f],p=ure(d,a,l);let m=r[f-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(d-a))*u,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Yl(d).map(y=>m+i*y);return n(f?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),c()):t()},e.range=function(d){return arguments.length?(r=[+d[0],+d[1]],c()):r.slice()},e.rangeRound=function(d){return r=[+d[0],+d[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(d){return arguments.length?(o=!!d,c()):o},e.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),a=l,c()):a},e.paddingInner=function(d){return arguments.length?(a=Math.max(0,Math.min(1,d)),c()):a},e.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),c()):l},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),c()):u},e.invertRange=function(d){if(d[0]==null||d[1]==null)return;const f=r[1]<r[0],h=f?n().reverse():n(),p=h.length-1;let m=+d[0],g=+d[1],y,v,_;if(!(m!==m||g!==g)&&(g<m&&(_=m,m=g,g=_),!(g<h[0]||m>r[1-f])))return y=Math.max(0,cy(h,m)-1),v=m===g?y:cy(h,g)-1,m-h[y]>s+1e-10&&++y,f&&(_=y,y=p-v,v=p-_),y>v?void 0:t().slice(y,v+1)},e.invert=function(d){const f=e.invertRange([d,d]);return f&&f[0]},e.copy=function(){return hre().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(l).align(u)},c()}function J6e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return J6e(t())},e}function lWt(){return J6e(hre().paddingInner(1))}var uWt=Array.prototype.map;function cWt(e){return uWt.call(e,Ra)}const dWt=Array.prototype.slice;function Z6e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(cy(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=cWt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=dWt.call(r),n):t.slice()},n.tickFormat=function(r,i){return lRe(e[0],cr(e),r??10,i)},n.copy=function(){return Z6e().domain(n.domain()).range(n.range())},n}const iL=new Map,e4e=Symbol("vega_scale");function t4e(e){return e[e4e]=!0,e}function fWt(e){return e&&e[e4e]===!0}function hWt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?oWt(s):s.invertExtent?aWt(s):void 0),s.type=e,t4e(s)};return r.metadata=Cf(wt(n)),r}function Rr(e,t,n){return arguments.length>1?(iL.set(e,hWt(e,t,n)),this):n4e(e)?iL.get(e):void 0}Rr(sWt,uRe);Rr(Rx,il,oo);Rr(lg,dRe,[oo,lg]);Rr(Gk,OJ,oo);Rr(Yk,JSt,oo);Rr(Nj,fRe,oo);Rr(Cb,TRe,[oo,fre]);Rr(Ab,hCt,[oo,fre]);Rr(Xh,LJ,[oo,bd]);Rr(`${Xh}-${Rx}`,LJ,[oo,bd]);Rr(`${Xh}-${lg}`,CRe,[oo,bd,lg]);Rr(`${Xh}-${Gk}`,FJ,[oo,bd]);Rr(`${Xh}-${Yk}`,pCt,[oo,bd]);Rr(`${Xh}-${Nj}`,ARe,[oo,bd]);Rr(`${iT}-${Rx}`,IRe,[oo,bd]);Rr(`${iT}-${lg}`,RRe,[oo,bd,lg]);Rr(`${iT}-${Gk}`,jJ,[oo,bd]);Rr(`${iT}-${Yk}`,mCt,[oo,bd]);Rr(`${iT}-${Nj}`,kRe,[oo,bd]);Rr(kx,hRe,[Xk,kx]);Rr(Oj,pRe,Xk);Rr(Dj,mRe,Xk);Rr(dre,Z6e,[Kk,Xk]);Rr(cre,AS,Kk);Rr(Q6e,hre,Kk);Rr(iW,lWt,Kk);function n4e(e){return iL.has(e)}function h_(e,t){const n=iL.get(e);return n&&n.metadata[t]}function pre(e){return h_(e,oo)}function Px(e){return h_(e,Kk)}function sW(e){return h_(e,Xk)}function r4e(e){return h_(e,lg)}function pWt(e){return h_(e,fre)}function i4e(e){return h_(e,bd)}function s4e(e){return h_(e,kx)}const mWt=["clamp","base","constant","exponent"];function o4e(e,t){const n=t[0],r=cr(t)-n;return function(i){return e(n+i*r)}}function Mj(e,t,n){return dJ(mre(t||"rgb",n),e)}function a4e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function l4e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Ba(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=Rr(s)().domain([t,n]).range([0,1]),mWt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function mre(e,t){const n=qbt[gWt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function gWt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const yWt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},vWt={accent:yCt,category10:gCt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:vCt,observable10:bCt,paired:_Ct,pastel1:wCt,pastel2:ECt,set1:xCt,set2:SCt,set3:TCt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function u4e(e){if(Ge(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function c4e(e,t){for(const n in e)gre(n,t(e[n]))}const $0e={};c4e(vWt,u4e);c4e(yWt,e=>Mj(u4e(e)));function gre(e,t){return e=e&&e.toLowerCase(),arguments.length>1?($0e[e]=t,this):$0e[e]}const HD="symbol",bWt="discrete",_Wt="gradient",wWt=e=>Ge(e)?e.map(t=>String(t)):String(e),EWt=(e,t)=>e[1]-t[1],xWt=(e,t)=>t[1]-e[1];function yre(e,t,n){let r;return xr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Vk(e.domain())/n||1)+1))),bt(t)&&(r=t.step,t=t.interval),Et(t)&&(t=e.type===Cb?tT(t):e.type==Ab?nT(t):He("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function d4e(e,t,n){let r=e.range(),i=r[0],s=cr(r),o=EWt;if(i>s&&(r=s,s=i,i=r,o=xWt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],cr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function vre(e,t){return e.bins?d4e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function f4e(e,t,n,r,i,s){const o=t.type;let a=wWt;if(o===Cb||i===Cb)a=e.timeFormat(r);else if(o===Ab||i===Ab)a=e.utcFormat(r);else if(r4e(o)){const l=e.formatFloat(r);if(s||t.bins)a=l;else{const u=h4e(t,n,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function h4e(e,t,n){const r=vre(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/s));return u*i<i-.5&&(u*=i),u<=o};return n?r.filter(a):a}const oW={[kx]:"quantiles",[Oj]:"thresholds",[Dj]:"domain"},p4e={[kx]:"quantiles",[Oj]:"domain"};function m4e(e,t){return e.bins?CWt(e.bins):e.type===lg?h4e(e,t,!0):oW[e.type]?TWt(e[oW[e.type]]()):vre(e,t)}function SWt(e,t,n){const r=t[p4e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function TWt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function CWt(e){const t=e.slice(0,-1);return t.max=cr(e),t}const AWt=e=>oW[e.type]||e.bins;function g4e(e,t,n,r,i,s,o){const a=p4e[t.type]&&s!==Cb&&s!==Ab?SWt(e,t,i):f4e(e,t,n,i,s,o);return r===HD&&AWt(t)?IWt(a):r===bWt?RWt(a):kWt(a)}const IWt=e=>(t,n,r)=>{const i=L0e(r[n+1],L0e(r.max,1/0)),s=F0e(t,e),o=F0e(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},L0e=(e,t)=>e??t,RWt=e=>(t,n)=>n?e(t):null,kWt=e=>t=>e(t),F0e=(e,t)=>Number.isFinite(e)?t(e):null;function PWt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+cr(t),s=i-r;if(e.type===Dj){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function NWt(e,t,n,r){const i=r||t.type;return Et(n)&&pWt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Cb?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Ab?e.utcFormat("%A, %d %B %Y, %X UTC"):g4e(e,t,5,null,n,r,!0)}function y4e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=NWt(e,t,n.format,n.formatType);if(sW(t.type)){const s=m4e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Px(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(cr(s))}`}}let v4e=0;function OWt(){v4e=0}const sL="p_";function bre(e){return e&&e.gradient}function b4e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?sL:"";return i||(i=e.id="gradient_"+v4e++,r==="radial"?(e.x1=nh(e.x1,.5),e.y1=nh(e.y1,.5),e.r1=nh(e.r1,0),e.x2=nh(e.x2,.5),e.y2=nh(e.y2,.5),e.r2=nh(e.r2,.5),s=sL):(e.x1=nh(e.x1,0),e.y1=nh(e.y1,0),e.x2=nh(e.x2,1),e.y2=nh(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function nh(e,t){return e??t}function _4e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const j0e={basis:{curve:pH},"basis-closed":{curve:LCt},"basis-open":{curve:FCt},bundle:{curve:jCt,tension:"beta",value:.85},cardinal:{curve:BCt,tension:"tension",value:0},"cardinal-open":{curve:UCt,tension:"tension",value:0},"cardinal-closed":{curve:zCt,tension:"tension",value:0},"catmull-rom":{curve:VCt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:HCt,tension:"alpha",value:.5},"catmull-rom-open":{curve:qCt,tension:"alpha",value:.5},linear:{curve:BJ},"linear-closed":{curve:WCt},monotone:{horizontal:YCt,vertical:GCt},natural:{curve:KCt},step:{curve:XCt},"step-after":{curve:JCt},"step-before":{curve:QCt}};function _re(e,t,n){var r=Vt(j0e,e)&&j0e[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const DWt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},MWt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,$Wt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,LWt=/^((\s+,?\s*)|(,\s*))/,FWt=/^[01]/;function Nx(e){const t=[];return(e.match(MWt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=DWt[s],a=jWt(s,o,r.slice(1).trim()),l=a.length;if(l<o||l&&l%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),l!==o){s==="m"&&(i=i==="M"?"L":"l");for(let u=o;u<l;u+=o)t.push([i,...a.slice(u,u+o)])}}),t}function jWt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?FWt:$Wt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(LWt);l!==null&&(i+=l[0].length)}return r}const Ny=Math.PI/180,BWt=1e-14,b1=Math.PI/2,Rh=Math.PI*2,J_=Math.sqrt(3)/2;var R7={},k7={},w4e=[].join;function zWt(e,t,n,r,i,s,o,a,l){const u=w4e.call(arguments);if(R7[u])return R7[u];const c=o*Ny,d=Math.sin(c),f=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=f*(a-e)*.5+d*(l-t)*.5,p=f*(l-t)*.5-d*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=f/n,y=d/n,v=-d/r,_=f/r,w=g*a+y*l,E=v*a+_*l,S=g*e+y*t,x=v*e+_*t;let I=1/((S-w)*(S-w)+(x-E)*(x-E))-.25;I<0&&(I=0);let P=Math.sqrt(I);s==i&&(P=-P);const k=.5*(w+S)-P*(x-E),D=.5*(E+x)+P*(S-w),R=Math.atan2(E-D,w-k);let $=Math.atan2(x-D,S-k)-R;$<0&&s===1?$+=Rh:$>0&&s===0&&($-=Rh);const L=Math.ceil(Math.abs($/(b1+.001))),B=[];for(let U=0;U<L;++U){const z=R+U*$/L,N=R+(U+1)*$/L;B[U]=[k,D,z,N,n,r,d,f]}return R7[u]=B}function UWt(e){const t=w4e.call(e);if(k7[t])return k7[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7];const c=u*o,d=-l*a,f=l*o,h=u*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),_=Math.sin(v*.5),w=8/3*_*_/Math.sin(v),E=n+p-w*m,S=r+m+w*p,x=n+g,T=r+y,I=x+w*y,P=T-w*g;return k7[t]=[c*E+d*S,f*E+h*S,c*I+d*P,f*I+h*P,c*x+d*T,f*x+h*T]}const wc=["l",0,0,0,0,0,0,0];function VWt(e,t,n){const r=wc[0]=e[0];if(r==="a"||r==="A")wc[1]=t*e[1],wc[2]=n*e[2],wc[3]=e[3],wc[4]=e[4],wc[5]=e[5],wc[6]=t*e[6],wc[7]=n*e[7];else if(r==="h"||r==="H")wc[1]=t*e[1];else if(r==="v"||r==="V")wc[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)wc[i]=(i%2==1?t:n)*e[i];return wc}function sR(e,t,n,r,i,s){var o,a=null,l=0,u=0,c=0,d=0,f,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,_=t.length;v<_;++v){switch(o=t[v],(i!==1||s!==1)&&(o=VWt(o,i,s)),o[0]){case"l":l+=o[1],u+=o[2],e.lineTo(l+n,u+r);break;case"L":l=o[1],u=o[2],e.lineTo(l+n,u+r);break;case"h":l+=o[1],e.lineTo(l+n,u+r);break;case"H":l=o[1],e.lineTo(l+n,u+r);break;case"v":u+=o[1],e.lineTo(l+n,u+r);break;case"V":u=o[1],e.lineTo(l+n,u+r);break;case"m":l+=o[1],u+=o[2],g=l,y=u,e.moveTo(l+n,u+r);break;case"M":l=o[1],u=o[2],g=l,y=u,e.moveTo(l+n,u+r);break;case"c":f=l+o[5],h=u+o[6],c=l+o[3],d=u+o[4],e.bezierCurveTo(l+o[1]+n,u+o[2]+r,c+n,d+r,f+n,h+r),l=f,u=h;break;case"C":l=o[5],u=o[6],c=o[3],d=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,d+r,l+n,u+r);break;case"s":f=l+o[3],h=u+o[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+r,l+o[1]+n,u+o[2]+r,f+n,h+r),c=l+o[1],d=u+o[2],l=f,u=h;break;case"S":f=o[3],h=o[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+r,o[1]+n,o[2]+r,f+n,h+r),l=f,u=h,c=o[1],d=o[2];break;case"q":f=l+o[3],h=u+o[4],c=l+o[1],d=u+o[2],e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h;break;case"Q":f=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,f+n,h+r),l=f,u=h,c=o[1],d=o[2];break;case"t":f=l+o[1],h=u+o[2],a[0].match(/[QqTt]/)===null?(c=l,d=u):a[0]==="t"?(c=2*l-p,d=2*u-m):a[0]==="q"&&(c=2*l-c,d=2*u-d),p=c,m=d,e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h,c=l+o[1],d=u+o[2];break;case"T":f=o[1],h=o[2],c=2*l-c,d=2*u-d,e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h;break;case"a":B0e(e,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+l+n,o[7]+u+r]),l+=o[6],u+=o[7];break;case"A":B0e(e,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),l=o[6],u=o[7];break;case"z":case"Z":l=g,u=y,e.closePath();break}a=o}}function B0e(e,t,n,r){const i=zWt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=UWt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const z0e=.5773502691896257,U0e={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Rh)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=J_*n,i=r-n*z0e,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=J_*n,i=r-n*z0e;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=J_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=J_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=J_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=J_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function E4e(e){return Vt(U0e,e)?U0e[e]:HWt(e)}var P7={};function HWt(e){if(!Vt(P7,e)){const t=Nx(e);P7[e]={draw:function(n,r){sR(n,t,0,0,Math.sqrt(r)/2)}}}return P7[e]}const Ug=.448084975506;function qWt(e){return e.x}function WWt(e){return e.y}function GWt(e){return e.width}function YWt(e){return e.height}function qp(e){return typeof e=="function"?e:()=>+e}function mO(e,t,n){return Math.max(t,Math.min(e,n))}function x4e(){var e=qWt,t=WWt,n=GWt,r=YWt,i=qp(0),s=i,o=i,a=i,l=null;function u(c,d,f){var h,p=d??+e.call(this,c),m=f??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,_=mO(+i.call(this,c),0,v),w=mO(+s.call(this,c),0,v),E=mO(+o.call(this,c),0,v),S=mO(+a.call(this,c),0,v);if(l||(l=h=F6()),_<=0&&w<=0&&E<=0&&S<=0)l.rect(p,m,g,y);else{var x=p+g,T=m+y;l.moveTo(p+_,m),l.lineTo(x-w,m),l.bezierCurveTo(x-Ug*w,m,x,m+Ug*w,x,m+w),l.lineTo(x,T-S),l.bezierCurveTo(x,T-Ug*S,x-Ug*S,T,x-S,T),l.lineTo(p+E,T),l.bezierCurveTo(p+Ug*E,T,p,T-Ug*E,p,T-E),l.lineTo(p,m+_),l.bezierCurveTo(p,m+Ug*_,p+Ug*_,m,p+_,m),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=qp(c),u):e},u.y=function(c){return arguments.length?(t=qp(c),u):t},u.width=function(c){return arguments.length?(n=qp(c),u):n},u.height=function(c){return arguments.length?(r=qp(c),u):r},u.cornerRadius=function(c,d,f,h){return arguments.length?(i=qp(c),s=d!=null?qp(d):i,a=f!=null?qp(f):i,o=h!=null?qp(h):s,u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function S4e(){var e,t,n,r,i=null,s,o,a,l;function u(d,f,h){const p=h/2;if(s){var m=a-f,g=d-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*l,_=(g/=y)*l,w=Math.atan2(g,m);i.moveTo(o-v,a-_),i.lineTo(d-m*p,f-g*p),i.arc(d,f,p,w-Math.PI,w),i.lineTo(o+v,a+_),i.arc(o,a,l,w,w+Math.PI)}else i.arc(d,f,p,0,Rh);i.closePath()}else s=1;o=d,a=f,l=p}function c(d){var f,h=d.length,p,m=!1,g;for(i==null&&(i=g=F6()),f=0;f<=h;++f)!(f<h&&r(p=d[f],f,d))===m&&(m=!m)&&(s=0),m&&u(+e(p,f,d),+t(p,f,d),+n(p,f,d));if(g)return i=null,g+""||null}return c.x=function(d){return arguments.length?(e=d,c):e},c.y=function(d){return arguments.length?(t=d,c):t},c.size=function(d){return arguments.length?(n=d,c):n},c.defined=function(d){return arguments.length?(r=d,c):r},c.context=function(d){return arguments.length?(d==null?i=null:i=d,c):i},c}function Qk(e,t){return e??t}const Jk=e=>e.x||0,Zk=e=>e.y||0,KWt=e=>e.width||0,XWt=e=>e.height||0,QWt=e=>(e.x||0)+(e.width||0),JWt=e=>(e.y||0)+(e.height||0),ZWt=e=>e.startAngle||0,eGt=e=>e.endAngle||0,tGt=e=>e.padAngle||0,nGt=e=>e.innerRadius||0,rGt=e=>e.outerRadius||0,iGt=e=>e.cornerRadius||0,sGt=e=>Qk(e.cornerRadiusTopLeft,e.cornerRadius)||0,oGt=e=>Qk(e.cornerRadiusTopRight,e.cornerRadius)||0,aGt=e=>Qk(e.cornerRadiusBottomRight,e.cornerRadius)||0,lGt=e=>Qk(e.cornerRadiusBottomLeft,e.cornerRadius)||0,uGt=e=>Qk(e.size,64),cGt=e=>e.size||1,$j=e=>e.defined!==!1,dGt=e=>E4e(e.shape||"circle"),fGt=DCt().startAngle(ZWt).endAngle(eGt).padAngle(tGt).innerRadius(nGt).outerRadius(rGt).cornerRadius(iGt),hGt=LRe().x(Jk).y1(Zk).y0(JWt).defined($j),pGt=LRe().y(Zk).x1(Jk).x0(QWt).defined($j),mGt=Y$().x(Jk).y(Zk).defined($j),gGt=x4e().x(Jk).y(Zk).width(KWt).height(XWt).cornerRadius(sGt,oGt,aGt,lGt),yGt=$Ct().type(dGt).size(uGt),vGt=S4e().x(Jk).y(Zk).defined($j).size(cGt);function wre(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function bGt(e,t){return fGt.context(e)(t)}function _Gt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?pGt:hGt).curve(_re(r,n.orient,n.tension)).context(e)(t)}function wGt(e,t){const n=t[0],r=n.interpolate||"linear";return mGt.curve(_re(r,n.orient,n.tension)).context(e)(t)}function sT(e,t,n,r){return gGt.context(e)(t,n,r)}function EGt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function xGt(e,t){return yGt.context(e)(t)}function SGt(e,t){return vGt.context(e)(t)}var T4e=1;function C4e(){T4e=1}function Ere(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+T4e++),o=i.clipping[s]||(i.clipping[s]={id:s});return On(r)?o.path=r(null):wre(n)?o.path=sT(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function $s(e){this.clear(),e&&this.union(e)}$s.prototype={clone(){return new $s(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,c=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+c,a*r-l*o+u,l*r+a*o+c,a*s-l*i+u,l*s+a*i+c,a*s-l*o+u,l*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Lj(e){this.mark=e,this.bounds=this.bounds||new $s}function Fj(e){Lj.call(this,e),this.items=this.items||[]}ht(Fj,Lj);class A4e{constructor(t){this._pending=0,this._loader=t||_j()}pending(){return this._pending}sanitizeURL(t){const n=this;return V0e(n),n._loader.sanitize(t,{context:"href"}).then(r=>(dC(n),r)).catch(()=>(dC(n),null))}loadImage(t){const n=this,r=iWt();return V0e(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Vt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>dC(n),o.onerror=()=>dC(n),o.src=s,o}).catch(i=>(dC(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function V0e(e){e._pending+=1}function dC(e){e._pending-=1}function xg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?TGt(t,r):0))}return e}function TGt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const CGt=Rh-1e-8;let jj,qD,WD,$1,aW,GD,lW,uW;const T0=(e,t)=>jj.add(e,t),YD=(e,t)=>T0(qD=e,WD=t),H0e=e=>T0(e,jj.y1),q0e=e=>T0(jj.x1,e),_1=(e,t)=>aW*e+lW*t,w1=(e,t)=>GD*e+uW*t,N7=(e,t)=>T0(_1(e,t),w1(e,t)),O7=(e,t)=>YD(_1(e,t),w1(e,t));function eP(e,t){return jj=e,t?($1=t*Ny,aW=uW=Math.cos($1),GD=Math.sin($1),lW=-GD):(aW=uW=1,$1=GD=lW=0),AGt}const AGt={beginPath(){},closePath(){},moveTo:O7,lineTo:O7,rect(e,t,n,r){$1?(N7(e+n,t),N7(e+n,t+r),N7(e,t+r),O7(e,t)):(T0(e+n,t+r),YD(e,t))},quadraticCurveTo(e,t,n,r){const i=_1(e,t),s=w1(e,t),o=_1(n,r),a=w1(n,r);W0e(qD,i,o,H0e),W0e(WD,s,a,q0e),YD(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=_1(e,t),a=w1(e,t),l=_1(n,r),u=w1(n,r),c=_1(i,s),d=w1(i,s);G0e(qD,o,l,c,H0e),G0e(WD,a,u,d,q0e),YD(c,d)},arc(e,t,n,r,i,s){if(r+=$1,i+=$1,qD=n*Math.cos(i)+e,WD=n*Math.sin(i)+t,Math.abs(i-r)>CGt)T0(e-n,t-n),T0(e+n,t+n);else{const o=u=>T0(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(o(r),o(i),i!==r)if(r=r%Rh,r<0&&(r+=Rh),i=i%Rh,i<0&&(i+=Rh),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Rh,a=r-r%b1,l=0;l<4&&a>i;++l,a-=b1)o(a);else for(a=r-r%b1+b1,l=0;l<4&&a<i;++l,a=a+b1)o(a)}}};function W0e(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function G0e(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let l=0,u=0,c;Math.abs(s)>BWt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),l=(-o+c)/s,u=(-o-c)/s)):l=.5*a/o,0<l&&l<1&&i(Y0e(l,e,t,n,r)),0<u&&u<1&&i(Y0e(u,e,t,n,r))}function Y0e(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var ty=(ty=ey(1,1))?ty.getContext("2d"):null;const cW=new $s;function xre(e){return function(t,n){if(!ty)return!0;e(ty,t),cW.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=cW;for(let a=i;a<=o;++a)for(let l=r;l<=s;++l)if(ty.isPointInPath(l,a))return!0;return!1}}function Sre(e,t){return t.contains(e.x||0,e.y||0)}function I4e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(cW.set(n,r,n+i,r+s))}function R4e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Gw(t,n,r,i,s)}function Gw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:l}=e,u=r-t,c=i-n;let d=0,f=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-u,p=-(s-t)),g===1&&(h=u,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>f)return!1;m>d&&(d=m)}else if(h>0){if(m<d)return!1;m<f&&(f=m)}}return!0}function Ox(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Nd(e,t){return e??t}function K0e(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function IGt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Nd(t.x1,.5)*r,n.y1+Nd(t.y1,.5)*i,Math.max(r,i)*Nd(t.r1,0),n.x1+Nd(t.x2,.5)*r,n.y1+Nd(t.y2,.5)*i,Math.max(r,i)*Nd(t.r2,.5));else{const o=Nd(t.x1,0),a=Nd(t.y1,0),l=Nd(t.x2,1),u=Nd(t.y2,0);if(o===l||a===u||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const c=ey(Math.ceil(r),Math.ceil(i)),d=c.getContext("2d");return d.scale(r,i),d.fillStyle=K0e(d.createLinearGradient(o,a,l,u),t.stops),d.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return K0e(s,t.stops)}function k4e(e,t,n){return bre(n)?IGt(e,n,t.bounds):n}function oL(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=k4e(e,t,t.fill),!0):!1}var RGt=[];function Dx(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=k4e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||RGt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function kGt(e,t){return e.zindex-t.zindex||e.index-t.index}function Tre(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(kGt)}function If(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Tre(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function aL(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Tre(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Cre(e){return function(t,n,r){If(n,i=>{(!r||r.intersects(i.bounds))&&P4e(e,t,i,i)})}}function PGt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&P4e(e,t,n.items[0],n.items)}}function P4e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Ox(t,n),n.fill&&oL(t,n,i)&&t.fill(),n.stroke&&Dx(t,n,i)&&t.stroke()))}function Bj(e){return e=e||od,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,aL(n,a=>{const l=a.bounds;if(!(l&&!l.contains(s,o)||!l)&&e(t,a,r,i,s,o))return a})}}function tP(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,l=o.stroke&&n.isPointInStroke,u,c;return l&&(u=o.strokeWidth,c=o.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||l&&n.isPointInStroke(i,s)}}function Are(e){return Bj(tP(e))}function G1(e,t){return"translate("+e+","+t+")"}function Ire(e){return"rotate("+e+")"}function NGt(e,t){return"scale("+e+","+t+")"}function N4e(e){return G1(e.x||0,e.y||0)}function OGt(e){return G1(e.x||0,e.y||0)+(e.angle?" "+Ire(e.angle):"")}function DGt(e){return G1(e.x||0,e.y||0)+(e.angle?" "+Ire(e.angle):"")+(e.scaleX||e.scaleY?" "+NGt(e.scaleX||1,e.scaleY||1):"")}function Rre(e,t,n){function r(o,a){o("transform",OGt(a)),o("d",t(null,a))}function i(o,a){return t(eP(o,a.angle),a),xg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var l=a.x||0,u=a.y||0,c=a.angle||0;o.translate(l,u),c&&o.rotate(c*=Ny),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Cre(s),pick:Are(s),isect:n||xre(s)}}var MGt=Rre("arc",bGt);function $Gt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function LGt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function FGt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function kre(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(eP(l),c),xg(l,c[0]))}function s(l,u){l.beginPath(),t(l,u)}const o=tP(s);function a(l,u,c,d,f,h){var p=u.items,m=u.bounds;return!p||!p.length||m&&!m.contains(f,h)?null:(c*=l.pixelRatio,d*=l.pixelRatio,o(l,p,c,d)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:PGt(s),pick:a,isect:Sre,tip:n}}var jGt=kre("area",_Gt,$Gt);function BGt(e,t){var n=t.clip;e.save(),On(n)?(e.beginPath(),n(e),e.clip()):O4e(e,t.group)}function O4e(e,t){e.beginPath(),wre(t)?sT(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function D4e(e){const t=Nd(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function zGt(e,t){e("transform",N4e(t))}function M4e(e,t){const n=D4e(t);e("d",sT(null,t,n,n))}function UGt(e,t){e("class","background"),e("aria-hidden",!0),M4e(e,t)}function VGt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?M4e(e,t):e("d","")}function HGt(e,t,n){const r=t.clip?Ere(n,t,t):null;e("clip-path",r)}function qGt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),xg(e,t),e.translate(t.x||0,t.y||0)}function oR(e,t,n,r){const i=D4e(t);e.beginPath(),sT(e,t,(n||0)+i,(r||0)+i)}const WGt=tP(oR),GGt=tP(oR,!1),YGt=tP(oR,!0);function KGt(e,t,n,r){If(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(oR(e,i,s,o),Ox(e,i),i.fill&&oL(e,i,l)&&e.fill(),i.stroke&&!a&&Dx(e,i,l)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&O4e(e,i),n&&n.translate(-s,-o),If(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&l&&(oR(e,i,s,o),Ox(e,i),Dx(e,i,l)&&e.stroke())})}function XGt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return aL(t,l=>{let u,c,d;const f=l.bounds;if(f&&!f.contains(i,s))return;c=l.x||0,d=l.y||0;const h=c+(l.width||0),p=d+(l.height||0),m=l.clip;if(m&&(i<c||i>h||s<d||s>p))return;if(e.save(),e.translate(c,d),c=i-c,d=s-d,m&&wre(l)&&!YGt(e,l,o,a))return e.restore(),null;const g=l.strokeForeground,y=t.interactive!==!1;return y&&g&&l.stroke&&GGt(e,l,o,a)?(e.restore(),l):(u=aL(l,v=>QGt(v,c,d)?this.pick(v,n,r,c,d):null),!u&&y&&(l.fill||!g&&l.stroke)&&WGt(e,l,o,a)&&(u=l),e.restore(),u||null)})}function QGt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var JGt={type:"group",tag:"g",nested:!1,attr:zGt,bound:qGt,draw:KGt,pick:XGt,isect:I4e,content:HGt,background:UGt,foreground:VGt},aR={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Pre(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Nre(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Ore(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function zj(e,t){return e==="center"?t/2:e==="right"?t:0}function Uj(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function ZGt(e,t,n){const r=Pre(t,n),i=Nre(t,r),s=Ore(t,r),o=(t.x||0)-zj(t.align,i),a=(t.y||0)-Uj(t.baseline,s),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,aR["xmlns:xlink"],"xlink:href"),e("transform",G1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function eYt(e,t){const n=t.image,r=Nre(t,n),i=Ore(t,n),s=(t.x||0)-zj(t.align,r),o=(t.y||0)-Uj(t.baseline,i);return e.set(s,o,s+r,o+i)}function tYt(e,t,n){If(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Pre(r,this);let s=Nre(r,i),o=Ore(r,i);if(s===0||o===0)return;let a=(r.x||0)-zj(r.align,s),l=(r.y||0)-Uj(r.baseline,o),u,c,d,f;r.aspect!==!1&&(c=i.width/i.height,d=r.width/r.height,c===c&&d===d&&c!==d&&(d<c?(f=s/c,l+=(o-f)/2,o=f):(f=o*c,a+=(s-f)/2,s=f))),(i.complete||i.toDataURL)&&(Ox(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,s,o))})}var nYt={type:"image",tag:"image",nested:!1,attr:ZGt,bound:eYt,draw:tYt,pick:Bj(),isect:od,get:Pre,xOffset:zj,yOffset:Uj},rYt=kre("line",wGt,LGt);function iYt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",DGt(t)),e("d",t.path)}function KD(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Ny,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=Nx(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),sR(e,l,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):sR(e,l,r,i,s,o)}function sYt(e,t){return KD(eP(e,t.angle),t)?e.set(0,0,0,0):xg(e,t,!0)}var oYt={type:"path",tag:"path",nested:!1,attr:iYt,bound:sYt,draw:Cre(KD),pick:Are(KD),isect:xre(KD)};function aYt(e,t){e("d",sT(null,t))}function lYt(e,t){var n,r;return xg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function X0e(e,t){e.beginPath(),sT(e,t)}var uYt={type:"rect",tag:"path",nested:!1,attr:aYt,bound:lYt,draw:Cre(X0e),pick:Are(X0e),isect:I4e};function cYt(e,t){e("transform",N4e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function dYt(e,t){var n,r;return xg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function $4e(e,t,n){var r,i,s,o;return t.stroke&&Dx(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function fYt(e,t,n){If(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&$4e(e,r,i)&&(Ox(e,r),e.stroke())}})}function hYt(e,t,n,r){return e.isPointInStroke?$4e(e,t,1)&&e.isPointInStroke(n,r):!1}var pYt={type:"rule",tag:"line",nested:!1,attr:cYt,bound:dYt,draw:fYt,pick:Bj(hYt),isect:R4e},mYt=Rre("shape",EGt),gYt=Rre("symbol",xGt,Sre);const Q0e=_Fe();var Gu={height:Rp,measureWidth:Dre,estimateWidth:lL,width:lL,canvas:L4e};L4e(!0);function L4e(e){Gu.width=e&&ty?Dre:lL}function lL(e,t){return F4e(Dy(e,t),Rp(e))}function F4e(e,t){return~~(.8*e.length*t)}function Dre(e,t){return Rp(e)<=0||!(t=Dy(e,t))?0:j4e(t,Vj(e))}function j4e(e,t){const n=`(${t}) ${e}`;let r=Q0e.get(n);return r===void 0&&(ty.font=t,r=ty.measureText(e).width,Q0e.set(n,r)),r}function Rp(e){return e.fontSize!=null?+e.fontSize||0:11}function Oy(e){return e.lineHeight!=null?e.lineHeight:Rp(e)+2}function yYt(e){return Ge(e)?e.length>1?e:e[0]:e}function nP(e){return yYt(e.lineBreak&&e.text&&!Ge(e.text)?e.text.split(e.lineBreak):e.text)}function Mre(e){const t=nP(e);return(Ge(t)?t.length-1:0)*Oy(e)}function Dy(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?bYt(e,n):n}function vYt(e){if(Gu.width===Dre){const t=Vj(e);return n=>j4e(n,t)}else if(Gu.width===lL){const t=Rp(e);return n=>F4e(n,t)}else return t=>Gu.width(e,t)}function bYt(e,t){var n=+e.limit,r=vYt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,l;if(n-=r(i),s){for(;o<a;)l=o+a>>>1,r(t.slice(l))>n?o=l+1:a=l;return i+t.slice(o)}else{for(;o<a;)l=1+(o+a>>>1),r(t.slice(0,l))<n?o=l:a=l-1;return t.slice(0,o)+i}}function rP(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Vj(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Rp(e)+"px "+rP(e,t)}function $re(e){var t=e.baseline,n=Rp(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Oy(e):t==="line-bottom"?.29*n-.5*Oy(e):0)}const _Yt={left:"start",center:"middle",right:"end"},vA=new $s;function Hj(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-b1,t+=r*Math.cos(i),n+=r*Math.sin(i)),vA.x1=t,vA.y1=n,vA}function wYt(e,t){var n=t.dx||0,r=(t.dy||0)+$re(t),i=Hj(t),s=i.x1,o=i.y1,a=t.angle||0,l;e("text-anchor",_Yt[t.align]||"start"),a?(l=G1(s,o)+" "+Ire(a),(n||r)&&(l+=" "+G1(n,r))):l=G1(s+n,o+r),e("transform",l)}function Lre(e,t,n){var r=Gu.height(t),i=t.align,s=Hj(t),o=s.x1,a=s.y1,l=t.dx||0,u=(t.dy||0)+$re(t)-Math.round(.8*r),c=nP(t),d;if(Ge(c)?(r+=Oy(t)*(c.length-1),d=c.reduce((f,h)=>Math.max(f,Gu.width(t,h)),0)):d=Gu.width(t,c),i==="center"?l-=d/2:i==="right"&&(l-=d),e.set(l+=o,u+=a,l+d,u+r),t.angle&&!n)e.rotate(t.angle*Ny,o,a);else if(n===2)return e.rotatedPoints(t.angle*Ny,o,a);return e}function EYt(e,t,n){If(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,l,u,c,d;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=Vj(r),e.textAlign=r.align||"left",s=Hj(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Ny),o=a=0),o+=r.dx||0,a+=(r.dy||0)+$re(r),c=nP(r),Ox(e,r),Ge(c))for(u=Oy(r),l=0;l<c.length;++l)d=Dy(r,c[l]),r.fill&&oL(e,r,i)&&e.fillText(d,o,a),r.stroke&&Dx(e,r,i)&&e.strokeText(d,o,a),a+=u;else d=Dy(r,c),r.fill&&oL(e,r,i)&&e.fillText(d,o,a),r.stroke&&Dx(e,r,i)&&e.strokeText(d,o,a);r.angle&&e.restore()}})}function xYt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Hj(t),a=o.x1,l=o.y1,u=Lre(vA,t,1),c=-t.angle*Ny,d=Math.cos(c),f=Math.sin(c),h=d*i-f*s+(a-d*a+f*l),p=f*i+d*s+(l-f*a-d*l);return u.contains(h,p)}function SYt(e,t){const n=Lre(vA,e,2);return Gw(t,n[0],n[1],n[2],n[3])||Gw(t,n[0],n[1],n[4],n[5])||Gw(t,n[4],n[5],n[6],n[7])||Gw(t,n[2],n[3],n[6],n[7])}var TYt={type:"text",tag:"text",nested:!1,attr:wYt,bound:Lre,draw:EYt,pick:Bj(xYt),isect:SYt},CYt=kre("trail",SGt,FGt),cc={arc:MGt,area:jGt,group:JGt,image:nYt,line:rYt,path:oYt,rect:uYt,rule:pYt,shape:mYt,symbol:gYt,text:TYt,trail:CYt};function dW(e,t,n){var r=cc[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new $s),e,n)}var J0e={mark:null};function B4e(e,t,n){var r=cc[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,l,u,c;if(r.nested)return o?u=s[0]:(J0e.mark=e,u=J0e),c=dW(u,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new $s,o)for(a=0,l=s.length;a<l;++a)t.union(dW(s[a],i,n));return e.bounds=t}const AYt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function z4e(e,t){return JSON.stringify(e,AYt,t)}function U4e(e){const t=typeof e=="string"?JSON.parse(e):e;return V4e(t)}function V4e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&V4e(n[i]);return t&&B4e(e),e}class H4e{constructor(t){arguments.length?this.root=U4e(t):(this.root=Z0e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Fj(this.root)])}toJSON(t){return z4e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Z0e(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Z0e(e,t){const n={bounds:new $s,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function C0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Fre(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Gs(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=C0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Oc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function q4e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function qj(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function IYt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=cc[i.marktype]).tip){for(o=qj(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let jre=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||_j(),this._tooltip=n||RYt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=C0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=IYt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let l=s.x1+i[0]+r.left,u=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:o,height:a,left:l,top:u,right:l+o,bottom:u+a}}};function RYt(e,t,n,r){e.element().setAttribute("title",r||"")}class iP{constructor(t){this._el=null,this._bgcolor=null,this._loader=new A4e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const kYt="keydown",PYt="keypress",NYt="keyup",W4e="dragenter",XD="dragleave",G4e="dragover",fW="pointerdown",OYt="pointerup",uL="pointermove",QD="pointerout",Y4e="pointerover",hW="mousedown",DYt="mouseup",K4e="mousemove",cL="mouseout",X4e="mouseover",dL="click",MYt="dblclick",$Yt="wheel",Q4e="mousewheel",fL="touchstart",hL="touchmove",pL="touchend",LYt=[kYt,PYt,NYt,W4e,XD,G4e,fW,OYt,uL,QD,Y4e,hW,DYt,K4e,cL,X4e,dL,MYt,$Yt,Q4e,fL,hL,pL],pW=uL,bA=cL,mW=dL;class sP extends jre{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=LYt,this.pointermove=tye([uL,K4e],[Y4e,X4e],[QD,cL]),this.dragover=tye([G4e],[W4e],[XD]),this.pointerout=nye([QD,cL]),this.dragleave=nye([XD])}initialize(t,n,r){return this._canvas=t&&Fre(t,"canvas"),[dL,hW,fW,uL,QD,XD].forEach(i=>eye(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(Q4e,t)}pointerdown(t){this._down=this._active,this.fire(fW,t)}mousedown(t){this._down=this._active,this.fire(hW,t)}click(t){this._down===this._active&&(this.fire(dL,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(fL,t,!0)}touchmove(t){this.fire(hL,t,!0)}touchend(t){this.fire(pL,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===mW&&i&&i.href?this.handleHref(n,i,i.href):(t===pW||t===bA)&&this.handleTooltip(n,i,t!==bA),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(eye(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=qj(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return cc[t.marktype].pick.call(this,o,t,n,r,i,s)}}const FYt=e=>e===fL||e===hL||e===pL?[fL,hL,pL]:[e];function eye(e,t){FYt(t).forEach(n=>jYt(e,n))}function jYt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function g2(e,t,n){t.forEach(r=>e.fire(r,n))}function tye(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?g2(this,e,r):((!i||!i.exit)&&g2(this,n,r),this._active=s,g2(this,t,r),g2(this,e,r))}}function nye(e){return function(t){g2(this,e,t),this._active=null}}function BYt(){return typeof window<"u"&&window.devicePixelRatio||1}function zYt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=o?BYt():i;e.width=t*l,e.height=n*l;for(const u in s)a[u]=s[u];return o&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class mL extends iP{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new $s,this._tempb=new $s}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:ey(1,1,this._options.type),t&&this._canvas&&(Oc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)zYt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||He("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,l=UYt(i,s,o);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):VYt(r,l.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=cc[n.marktype];n.clip&&BGt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const UYt=(e,t,n)=>new $s().set(0,0,t,n).translate(-e[0],-e[1]);function VYt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class J4e extends jre{constructor(t,n){super(t,n);const r=this;r._hrefHandler=D7(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=D7(r,(i,s)=>{r.handleTooltip(i,s,i.type!==bA)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(mW,this._hrefHandler),i.removeEventListener(pW,this._tooltipHandler),i.removeEventListener(bA,this._tooltipHandler)),this._svg=i=t&&Fre(t,"svg"),i&&(i.addEventListener(mW,this._hrefHandler),i.addEventListener(pW,this._tooltipHandler),i.addEventListener(bA,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:D7(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const D7=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},Z4e="aria-hidden",Bre="aria-label",zre="role",Ure="aria-roledescription",eje="graphics-object",Vre="graphics-symbol",tje=(e,t,n)=>({[zre]:e,[Ure]:t,[Bre]:n||void 0}),HYt=Cf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),rye={axis:{desc:"axis",caption:GYt},legend:{desc:"legend",caption:YYt},"title-text":{desc:"title",caption:e=>`Title text '${sye(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${sye(e)}'`}},iye={ariaRole:zre,ariaRoleDescription:Ure,description:Bre};function nje(e,t){const n=t.aria===!1;if(e(Z4e,n||void 0),n||t.description==null)for(const r in iye)e(iye[r],void 0);else{const r=t.mark.marktype;e(Bre,t.description),e(zre,t.ariaRole||(r==="group"?eje:Vre)),e(Ure,t.ariaRoleDescription||`${r} mark`)}}function rje(e){return e.aria===!1?{[Z4e]:!0}:HYt[e.role]?null:rye[e.role]?WYt(e,rye[e.role]):qYt(e)}function qYt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return tje(n?eje:Vre,`${t} mark container`,e.description)}function WYt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return tje(t.role||Vre,t.desc,n.description||r(n))}catch{return null}}function sye(e){return wt(e.text).join(" ")}function GYt(e){const t=e.datum,n=e.orient,r=t.title?ije(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Px(a)?"discrete":a} scale with ${y4e(o,s,e)}`}function YYt(e){const t=e.datum,n=t.title?ije(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,l=o.dataflow.locale();return XYt(r)+(n?` titled '${n}'`:"")+` for ${KYt(s)} with ${y4e(l,a,e)}`}function ije(e){try{return wt(cr(e.items).items[0].text).join(" ")}catch{return null}}function KYt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+cr(e)}function XYt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const sje=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),QYt=e=>sje(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Hre(){let e="",t="",n="";const r=[],i=()=>t=n="",s=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},o=(l,u)=>(u!=null&&(t+=` ${l}="${QYt(u)}"`),a),a={open(l){s(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),d=1;d<u;d++)c[d-1]=arguments[d];for(const f of c)for(const h in f)o(h,f[h]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:o,text:l=>(n+=sje(l),a),toString:()=>e};return a}const oje=e=>aje(Hre(),e)+"";function aje(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):aje(e,r)}return e.close()}const gL={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},yL={blend:"mix-blend-mode"},lje={fill:"none","stroke-miterlimit":10},fC=0,oye="http://www.w3.org/2000/xmlns/",Hs=aR.xmlns;class qre extends iP{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Gs(t,0,"svg",Hs),this._svg.setAttributeNS(oye,"xmlns",Hs),this._svg.setAttributeNS(oye,"xmlns:xlink",aR["xmlns:xlink"]),this._svg.setAttribute("version",aR.version),this._svg.setAttribute("class","marks"),Oc(t,1),this._root=Gs(this._svg,fC,"g",Hs),A0(this._root,lje),Oc(this._svg,fC+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(A0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Gs(t,fC,"rect",Hs),A0(r,{width:this._width,height:this._height,fill:n}));const i=oje(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Oc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=cc[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,aye(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(o,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,aye(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=cc[o],l=n.interactive===!1?"none":null,u=a.tag==="g",c=lye(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Oc(c,0),n._svg;c.setAttribute("class",q4e(n));const d=rje(n);for(const m in d)Ka(c,m,d[m]);u||Ka(c,"pointer-events",l),Ka(c,"clip-path",n.clip?Ere(this,n,n.group):null);let f=null,h=0;const p=m=>{const g=this.isDirty(m),y=lye(m,c,f,a.tag,s);g&&(this._update(a,y,m),u&&eKt(this,y,m,i)),f=y,++h};return a.nested?n.items.length&&p(n.items[0]):If(n,p),Oc(c,h),c}_update(t,n,r){_m=n,wa=n.__values__,nje(_A,r),t.attr(_A,r,this);const i=nKt[t.type];i&&i.call(this,t,n,r),_m&&this.style(_m,r)}style(t,n){if(n!=null){for(const r in gL){let i=r==="font"?rP(n):n[r];if(i===wa[r])continue;const s=gL[r];i==null?t.removeAttribute(s):(bre(i)&&(i=b4e(i,this._defs.gradient,uje())),t.setAttribute(s,i+"")),wa[r]=i}for(const r in yL)JD(t,yL[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Gs(t,fC+1,"defs",Hs)),i=JYt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Gs(t,fC+1,"defs",Hs)),i=ZYt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Oc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function aye(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function JYt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Gs(e,n++,"pattern",Hs);A0(o,{id:sL+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Gs(o,0,"rect",Hs),A0(o,{width:1,height:1,fill:`url(${uje()}#${t.id})`}),e=Gs(e,n++,"radialGradient",Hs),A0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Gs(e,n++,"linearGradient",Hs),A0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Gs(e,r,"stop",Hs),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Oc(e,r),n}function ZYt(e,t,n){let r;return e=Gs(e,n,"clipPath",Hs),e.setAttribute("id",t.id),t.path?(r=Gs(e,0,"path",Hs),r.setAttribute("d",t.path)):(r=Gs(e,0,"rect",Hs),A0(r,{x:0,y:0,width:t.width,height:t.height})),Oc(e,1),n+1}function eKt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;If(n,o=>{i=e.mark(t,o,i,r),++s}),Oc(t,1+s)}function lye(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=C0(o,r,Hs),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=C0(o,"path",Hs);s.appendChild(a),a.__data__=e;const l=C0(o,"g",Hs);s.appendChild(l),l.__data__=e;const u=C0(o,"path",Hs);s.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(s.ownerSVGElement!==i||tKt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function tKt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let _m=null,wa=null;const nKt={group(e,t,n){const r=_m=t.childNodes[2];wa=r.__values__,e.foreground(_A,n,this),wa=t.__values__,_m=t.childNodes[1],e.content(_A,n,this);const i=_m=t.childNodes[0];e.background(_A,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==wa.events&&(Ka(r,"pointer-events",s),Ka(i,"pointer-events",s),wa.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Ka(r,"display",null),this.style(i,n),Ka(i,"stroke",null),o&&(n.fill=null),wa=r.__values__,this.style(r,n),o&&(n.fill=o),_m=null}else Ka(r,"display","none")},image(e,t,n){n.smooth===!1?(JD(t,"image-rendering","optimizeSpeed"),JD(t,"image-rendering","pixelated")):JD(t,"image-rendering",null)},text(e,t,n){const r=nP(n);let i,s,o,a;Ge(r)?(s=r.map(l=>Dy(n,l)),i=s.join(`
`),i!==wa.text&&(Oc(t,0),o=t.ownerDocument,a=Oy(n),s.forEach((l,u)=>{const c=C0(o,"tspan",Hs);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),wa.text=i)):(s=Dy(n,r),s!==wa.text&&(t.textContent=s,wa.text=s)),Ka(t,"font-family",rP(n)),Ka(t,"font-size",Rp(n)+"px"),Ka(t,"font-style",n.fontStyle),Ka(t,"font-variant",n.fontVariant),Ka(t,"font-weight",n.fontWeight)}};function _A(e,t,n){t!==wa[e]&&(n?rKt(_m,e,t,n):Ka(_m,e,t),wa[e]=t)}function JD(e,t,n){n!==wa[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),wa[t]=n)}function A0(e,t){for(const n in t)Ka(e,n,t[n])}function Ka(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function rKt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function uje(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class cje extends iP{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Hre();n.open("svg",Nn({},aR,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",lje,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=cc[n.marktype],i=r.tag,s=[nje,r.attr];t.open("g",{class:q4e(n),"clip-path":n.clip?Ere(this,n,n.group):null},rje(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const u=nP(a);if(Ge(u)){const c={x:0,dy:Oy(a)};for(let d=0;d<u.length;++d)t.open("tspan",d?c:null).text(Dy(a,u[d])).close()}else t.text(Dy(a,u))}else if(i==="g"){const u=a.strokeForeground,c=a.fill,d=a.stroke;u&&d&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),If(a,f=>this.mark(t,f)),t.close(),u&&d?(c&&(a.fill=null),a.stroke=d,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):If(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,l,u,c)=>{s[c||a]=l};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&iKt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:sL+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function iKt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=rP(t),e["font-size"]=Rp(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in gL){let a=t[o];const l=gL[o];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(bre(a)&&(a=b4e(a,i.gradient,"")),e[l]=a)}for(const o in yL){const a=t[o];a!=null&&(s=s||[],s.push(`${yL[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const jd={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function sKt(e){jd.svgMarkTypes=e.svgMarkTypes??["text"],jd.svgOnTop=e.svgOnTop??!0,jd.debug=e.debug??!1}class gW extends iP{constructor(t){super(t),this._svgRenderer=new qre(t),this._canvasRenderer=new mL(t)}initialize(t,n,r,i,s){this._root_el=Gs(t,0,"div");const o=Gs(this._root_el,0,"div"),a=Gs(this._root_el,1,"div");return this._root_el.style.position="relative",jd.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=jd.svgOnTop?a:o,this._canvasEl=jd.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return jd.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!jd.svgMarkTypes.includes(s));this._svgRenderer.render(t,jd.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return jd.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class dje extends sP{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Gs(Gs(t,0,"div"),jd.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const fje="canvas",hje="hybrid",pje="png",mje="svg",gje="none",I0={Canvas:fje,PNG:pje,SVG:mje,Hybrid:hje,None:gje},Ib={};Ib[fje]=Ib[pje]={renderer:mL,headless:mL,handler:sP};Ib[mje]={renderer:qre,headless:cje,handler:J4e};Ib[hje]={renderer:gW,headless:gW,handler:dje};Ib[gje]={};function Wj(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Ib[e]=t,this):Ib[e]}function yje(e,t,n){const r=[],i=new $s().union(t),s=e.marktype;return s?vje(e,i,n,r):s==="group"?bje(e,i,n,r):He("Intersect scene must be mark node or group item.")}function vje(e,t,n,r){if(oKt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)bje(i[a],t,n,r);else for(const l=cc[s].isect;a<o;++a){const u=i[a];_je(u,t,l)&&r.push(u)}}return r}function oKt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function bje(e,t,n,r){n&&n(e.mark)&&_je(e,t,cc.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let l=0;l<s;++l)vje(i[l],t,n,r);t.translate(o,a)}return r}function _je(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const M7=new $s;function wje(e){const t=e.clip;if(On(t))t(eP(M7.clear()));else if(t)M7.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(M7)}const aKt=1e-9;function Wre(e,t,n){return e===t?!0:n==="path"?Eje(e,t):e instanceof Date&&t instanceof Date?+e==+t:xr(e)&&xr(t)?Math.abs(e-t)<=aKt:!e||!t||!bt(e)&&!bt(t)?e==t:lKt(e,t)}function Eje(e,t){return Wre(Nx(e),Nx(t))}function lKt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Wre(e[i],t[i],i))return!1;return typeof e==typeof t}function uKt(){C4e(),OWt()}const Mx="top",Kd="left",ef="right",My="bottom",cKt="top-left",dKt="top-right",fKt="bottom-left",hKt="bottom-right",Gre="start",yW="middle",Za="end",pKt="x",mKt="y",Gj="group",Yre="axis",Kre="title",gKt="frame",yKt="scope",Xre="legend",xje="row-header",Sje="row-footer",Tje="row-title",Cje="column-header",Aje="column-footer",Ije="column-title",vKt="padding",bKt="symbol",Rje="fit",kje="fit-x",Pje="fit-y",_Kt="pad",Qre="none",gO="all",vW="each",Jre="flush",R0="column",k0="row";function Nje(e){Me.call(this,null,e)}ht(Nje,Me,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=cc[i],o=s.bound;let a=r.bounds,l;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=yO(r,o),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===Gj||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(yO(u,o))),r.role){case Yre:case Xre:case Kre:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(yO(u,o))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(yO(u,o))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return wje(r),t.modifies("bounds")}});function yO(e,t,n){return t(e.bounds.clear(),e,n)}const uye=":vega_identifier:";function Zre(e){Me.call(this,0,e)}Zre.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ht(Zre,Me,{transform(e,t){const n=wKt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function wKt(e){return e._signals[uye]||(e._signals[uye]=e.add(0))}function Oje(e){Me.call(this,null,e)}ht(Oje,Me,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,EKt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===Gj?Fj:Lj;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function EKt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Dje(e){Me.call(this,null,e)}const cye={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!Mje(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},Mje=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),dye=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(Mje(i,s=e[n].bounds,t))return!0},xKt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},SKt=(e,t,n)=>{var r=e.range(),i=new $s;return t===Mx||t===My?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},fye=e=>(e.forEach(t=>t.opacity=1),e),hye=(e,t)=>e.reflow(t.modified()).modifies("opacity");ht(Dje,Me,{transform(e,t){const n=cye[e.method]||cye.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(fye(i),t=hye(t,e)),t;if(i=i.filter(xKt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=fye(i),t=hye(t,e),s.length>=3&&dye(s,r)){do s=n(s,r);while(s.length>=3&&dye(s,r));s.length<3&&!cr(i).opacity&&(s.length>1&&(cr(s).opacity=0),cr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=SKt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{o(l)||(l.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function $je(e){Me.call(this,null,e)}ht($je,Me,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const ba=new $s;function Yw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function TKt(e){var t=e.items[0].orient;return t===Kd||t===ef}function CKt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function AKt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,l=CKt(s),u=i.range,c=i.offset,d=i.position,f=i.minExtent,h=i.maxExtent,p=s.title&&i.items[l[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Mre(p),v=0,_=0,w,E;switch(ba.clear().union(g),g.clear(),(w=l[0])>-1&&g.union(i.items[w].bounds),(w=l[1])>-1&&g.union(i.items[w].bounds),a){case Mx:v=d||0,_=-c,E=Math.max(f,Math.min(h,-g.y1)),g.add(0,-E).add(u,0),p&&vO(e,p,E,m,y,0,-1,g);break;case Kd:v=-c,_=d||0,E=Math.max(f,Math.min(h,-g.x1)),g.add(-E,0).add(0,u),p&&vO(e,p,E,m,y,1,-1,g);break;case ef:v=n+c,_=d||0,E=Math.max(f,Math.min(h,g.x2)),g.add(0,0).add(E,u),p&&vO(e,p,E,m,y,1,1,g);break;case My:v=d||0,_=r+c,E=Math.max(f,Math.min(h,g.y2)),g.add(0,0).add(u,E),p&&vO(e,p,E,m,0,0,1,g);break;default:v=i.x,_=i.y}return xg(g.translate(v,_),i),Yw(i,"x",v+o)|Yw(i,"y",_+o)&&(i.bounds=ba,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function vO(e,t,n,r,i,s,o,a){const l=t.bounds;if(t.auto){const u=o*(n+i+r);let c=0,d=0;e.dirty(t),s?c=(t.x||0)-(t.x=u):d=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-d)),e.dirty(t)}a.union(l)}const pye=(e,t)=>Math.floor(Math.min(e,t)),mye=(e,t)=>Math.ceil(Math.max(e,t));function IKt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===Gj)switch(i.role){case Yre:case Xre:case Kre:break;case xje:o.rowheaders.push(...s);break;case Sje:o.rowfooters.push(...s);break;case Cje:o.colheaders.push(...s);break;case Aje:o.colfooters.push(...s);break;case Tje:o.rowtitle=s[0];break;case Ije:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function RKt(e){return new $s().set(0,0,e.width||0,e.height||0)}function kKt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Mi(e,t,n){const r=bt(e)?e[t]:e;return r??(n!==void 0?n:0)}function gye(e){return e<0?Math.ceil(-e):0}function Lje(e,t,n){var r=!n.nodirty,i=n.bounds===Jre?RKt:kKt,s=ba.set(0,0,0,0),o=Mi(n.align,R0),a=Mi(n.align,k0),l=Mi(n.padding,R0),u=Mi(n.padding,k0),c=n.columns||t.length,d=c<=0?1:Math.ceil(t.length/c),f=t.length,h=Array(f),p=Array(c),m=0,g=Array(f),y=Array(d),v=0,_=Array(f),w=Array(f),E=Array(f),S,x,T,I,P,k,D,R,M,$,L;for(x=0;x<c;++x)p[x]=0;for(x=0;x<d;++x)y[x]=0;for(x=0;x<f;++x)k=t[x],P=E[x]=i(k),k.x=k.x||0,_[x]=0,k.y=k.y||0,w[x]=0,T=x%c,I=~~(x/c),m=Math.max(m,D=Math.ceil(P.x2)),v=Math.max(v,R=Math.ceil(P.y2)),p[T]=Math.max(p[T],D),y[I]=Math.max(y[I],R),h[x]=l+gye(P.x1),g[x]=u+gye(P.y1),r&&e.dirty(t[x]);for(x=0;x<f;++x)x%c===0&&(h[x]=0),x<c&&(g[x]=0);if(o===vW)for(T=1;T<c;++T){for(L=0,x=T;x<f;x+=c)L<h[x]&&(L=h[x]);for(x=T;x<f;x+=c)h[x]=L+p[T-1]}else if(o===gO){for(L=0,x=0;x<f;++x)x%c&&L<h[x]&&(L=h[x]);for(x=0;x<f;++x)x%c&&(h[x]=L+m)}else for(o=!1,T=1;T<c;++T)for(x=T;x<f;x+=c)h[x]+=p[T-1];if(a===vW)for(I=1;I<d;++I){for(L=0,x=I*c,S=x+c;x<S;++x)L<g[x]&&(L=g[x]);for(x=I*c;x<S;++x)g[x]=L+y[I-1]}else if(a===gO){for(L=0,x=c;x<f;++x)L<g[x]&&(L=g[x]);for(x=c;x<f;++x)g[x]=L+v}else for(a=!1,I=1;I<d;++I)for(x=I*c,S=x+c;x<S;++x)g[x]+=y[I-1];for(M=0,x=0;x<f;++x)M=h[x]+(x%c?M:0),_[x]+=M-t[x].x;for(T=0;T<c;++T)for($=0,x=T;x<f;x+=c)$+=g[x],w[x]+=$-t[x].y;if(o&&Mi(n.center,R0)&&d>1)for(x=0;x<f;++x)P=o===gO?m:p[x%c],M=P-E[x].x2-t[x].x-_[x],M>0&&(_[x]+=M/2);if(a&&Mi(n.center,k0)&&c!==1)for(x=0;x<f;++x)P=a===gO?v:y[~~(x/c)],$=P-E[x].y2-t[x].y-w[x],$>0&&(w[x]+=$/2);for(x=0;x<f;++x)s.union(E[x].translate(_[x],w[x]));switch(M=Mi(n.anchor,pKt),$=Mi(n.anchor,mKt),Mi(n.anchor,R0)){case Za:M-=s.width();break;case yW:M-=s.width()/2}switch(Mi(n.anchor,k0)){case Za:$-=s.height();break;case yW:$-=s.height()/2}for(M=Math.round(M),$=Math.round($),s.clear(),x=0;x<f;++x)t[x].mark.bounds.clear();for(x=0;x<f;++x)k=t[x],k.x+=_[x]+=M,k.y+=w[x]+=$,s.union(k.mark.bounds.union(k.bounds.translate(_[x],w[x]))),r&&e.dirty(k);return s}function PKt(e,t,n){var r=IKt(t),i=r.marks,s=n.bounds===Jre?NKt:OKt,o=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,c,d,f,h,p,m,g;const y=Lje(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=Mi(n.headerBand,k0,null),c=bO(e,r.rowheaders,i,a,l,-Mi(o,"rowHeader"),pye,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Mi(n.headerBand,R0,null),d=bO(e,r.colheaders,i,a,a,-Mi(o,"columnHeader"),pye,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Mi(n.footerBand,k0,null),f=bO(e,r.rowfooters,i,a,l,Mi(o,"rowFooter"),mye,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Mi(n.footerBand,R0,null),h=bO(e,r.colfooters,i,a,a,Mi(o,"columnFooter"),mye,1,s,"y2",u-a,1,a,m)),r.rowtitle&&(p=Mi(n.titleAnchor,k0),g=Mi(o,"rowTitle"),g=p===Za?f+g:c-g,m=Mi(n.titleBand,k0,.5),yye(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=Mi(n.titleAnchor,R0),g=Mi(o,"columnTitle"),g=p===Za?h+g:d-g,m=Mi(n.titleBand,R0,.5),yye(e,r.coltitle,g,1,y,m))}function NKt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function OKt(e,t){return e.bounds[t]}function bO(e,t,n,r,i,s,o,a,l,u,c,d,f,h){var p=n.length,m=0,g=0,y,v,_,w,E,S,x,T,I;if(!p)return m;for(y=c;y<p;y+=d)n[y]&&(m=o(m,l(n[y],u)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=d){for(S=t[v],E=S.mark.bounds,_=y;_>=0&&(x=n[_])==null;_-=f);a?(T=h==null?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),I=m):(T=m,I=h==null?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),E.union(S.bounds.translate(T-(S.x||0),I-(S.y||0))),S.x=T,S.y=I,e.dirty(S),g=o(g,E[u])}return g}function yye(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function DKt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function MKt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function $Kt(e,t,n,r,i,s,o){const a=DKt(n,t),l=MKt(e,a("offset",0)),u=a("anchor",Gre),c=u===Za?1:u===yW?.5:0,d={align:vW,bounds:a("bounds",Jre),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Kd:d.anchor={x:Math.floor(r.x1)-l,column:Za,y:c*(o||r.height()+2*r.y1),row:u};break;case ef:d.anchor={x:Math.ceil(r.x2)+l,y:c*(o||r.height()+2*r.y1),row:u};break;case Mx:d.anchor={y:Math.floor(i.y1)-l,row:Za,x:c*(s||i.width()+2*i.x1),column:u};break;case My:d.anchor={y:Math.ceil(i.y2)+l,x:c*(s||i.width()+2*i.x1),column:u};break;case cKt:d.anchor={x:l,y:l};break;case dKt:d.anchor={x:s-l,y:l,column:Za};break;case fKt:d.anchor={x:l,y:o-l,row:Za};break;case hKt:d.anchor={x:s-l,y:o-l,column:Za,row:Za};break}return d}function LKt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),jKt(e,n,n.items[0].items[0]),s=FKt(n,s),l=2*n.padding,u=2*n.padding,s.empty()||(l=Math.ceil(s.width()+l),u=Math.ceil(s.height()+u)),r.type===bKt&&BKt(n.items[0].items[0].items[0].items),i!==Qre&&(n.x=o=0,n.y=a=0),n.width=l,n.height=u,xg(s.set(o,a,o+l,a+u),n),n.mark.bounds.clear().union(s),n}function FKt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function jKt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&hC(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,l=t.titlePadding||0,u=r-o.x,c=r-o.y;switch(o.orient){case Kd:i+=Math.ceil(o.bounds.width())+l;break;case ef:case My:break;default:s+=o.bounds.height()+l}switch((i||s)&&hC(e,n,i,s),o.orient){case Kd:c+=Z_(t,n,o,a,1,1);break;case ef:u+=Z_(t,n,o,Za,0,0)+l,c+=Z_(t,n,o,a,1,1);break;case My:u+=Z_(t,n,o,a,0,0),c+=Z_(t,n,o,Za,-1,0,1)+l;break;default:u+=Z_(t,n,o,a,0,0)}(u||c)&&hC(e,o,u,c),(u=Math.round(o.bounds.x1-r))<0&&(hC(e,n,-u,0),hC(e,o,-u,0))}}function Z_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(s||!l)&&!o?t.items[0]:t,c=u.bounds[i?"y2":"x2"]-e.padding,d=l&&s?c:0,f=l&&s?0:c,h=i<=0?0:Mre(n);return Math.round(r===Gre?d:r===Za?f-h:.5*(c-h))}function hC(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function BKt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function zKt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,l=s.anchor,u=s.offset,c=s.padding,d=s.items[0].items[0],f=s.items[1]&&s.items[1].items[0],h=a===Kd||a===ef?r:n,p=0,m=0,g=0,y=0,v=0,_;if(o!==Gj?a===Kd?(p=i.y2,h=i.y1):a===ef?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Kd&&(p=r,h=0),_=l===Gre?p:l===Za?h:(p+h)/2,f&&f.text){switch(a){case Mx:case My:v=d.bounds.height()+c;break;case Kd:y=d.bounds.width()+c;break;case ef:y=-d.bounds.width()-c;break}ba.clear().union(f.bounds),ba.translate(y-(f.x||0),v-(f.y||0)),Yw(f,"x",y)|Yw(f,"y",v)&&(e.dirty(f),f.bounds.clear().union(ba),f.mark.bounds.clear().union(ba),e.dirty(f)),ba.clear().union(f.bounds)}else ba.clear();switch(ba.union(d.bounds),a){case Mx:m=_,g=i.y1-ba.height()-u;break;case Kd:m=i.x1-ba.width()-u,g=_;break;case ef:m=i.x2+ba.width()+u,g=_;break;case My:m=_,g=i.y2+u;break;default:m=s.x,g=s.y}return Yw(s,"x",m)|Yw(s,"y",g)&&(ba.translate(m,g),e.dirty(s),s.bounds.clear().union(ba),t.bounds.clear().union(ba),e.dirty(s)),s.bounds}function Fje(e){Me.call(this,null,e)}ht(Fje,Me,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&PKt(n,r,e.layout),VKt(n,r,e)}),UKt(e.mark.group)?t.reflow():t}});function UKt(e){return e&&e.mark.role!=="legend-entry"}function VKt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new $s().set(0,0,i,s),a=o.clone(),l=o.clone(),u=[],c,d,f,h,p,m;for(p=0,m=r.length;p<m;++p)switch(d=r[p],d.role){case Yre:h=TKt(d)?a:l,h.union(AKt(e,d,i,s));break;case Kre:c=d;break;case Xre:u.push(LKt(e,d));break;case gKt:case yKt:case xje:case Sje:case Tje:case Cje:case Aje:case Ije:a.union(d.bounds),l.union(d.bounds);break;default:o.union(d.bounds)}if(u.length){const g={};u.forEach(y=>{f=y.orient||ef,f!==Qre&&(g[f]||(g[f]=[])).push(y)});for(const y in g){const v=g[y];Lje(e,v,$Kt(v,y,n.legends,a,l,i,s))}u.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===Rje||n.autosize.type===kje||n.autosize.type===Pje))switch(y.orient){case Kd:case ef:o.add(v.x1,0).add(v.x2,0);break;case Mx:case My:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(l),c&&o.union(zKt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),HKt(e,t,o,n)}function HKt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const f=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===vKt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Qre?(u=0,d=0,l=o,c=a):s===Rje?(l=Math.max(0,o-u-f),c=Math.max(0,a-d-h)):s===kje?(l=Math.max(0,o-u-f),a=c+d+h):s===Pje?(o=l+u+f,c=Math.max(0,a-d-h)):s===_Kt&&(o=l+u+f,a=c+d+h),e._resizeView(o,a,l,c,[u,d],i.resize)}const qKt=Object.freeze(Object.defineProperty({__proto__:null,bound:Nje,identifier:Zre,mark:Oje,overlap:Dje,render:$je,viewlayout:Fje},Symbol.toStringTag,{value:"Module"}));function jje(e){Me.call(this,null,e)}ht(jje,Me,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=yre(s,o,e.minstep),l=e.format||f4e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?d4e(s,e.values,a):vre(s,a);return i&&(r.rem=i),i=u.map((c,d)=>Dr({index:d/(u.length-1||1),value:c,label:l(c)})),e.extra&&i.length&&i.push(Dr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function Bje(e){Me.call(this,null,e)}function WKt(){return Dr({})}function GKt(e){const t=eT().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ht(Bje,Me,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||WKt,s=e.key||zt,o=this.value;return Ge(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&He("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=GKt(s)),t.visit(t.ADD,a=>{const l=s(a);let u=o.get(l);u?u.exit?(o.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),o.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=s(a),u=o.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=s(a),u=o.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function zje(e){Me.call(this,null,e)}ht(zje,Me,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Ge(s))if(n.changed()||s.every(d=>i[d]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Yg,l=i.enter||Yg,u=i.exit||Yg,c=(s&&!o?i[s]:a)||Yg;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{l(d,e),a(d,e)}),n.modifies(l.output),n.modifies(a.output),c!==Yg&&c!==a&&(t.visit(t.ADD,d=>{c(d,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==Yg&&(t.visit(t.REM,d=>{u(d,e)}),n.modifies(u.output)),o||c!==Yg){const d=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(d,f=>{const h=l(f,e)||r;(c(f,e)||h)&&n.mod.push(f)}),n.mod.length&&n.modifies(l.output)):t.visit(d,f=>{(c(f,e)||r)&&n.mod.push(f)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function Uje(e){Me.call(this,[],e)}ht(Uje,Me,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||HD,o=e.scale,a=+e.limit,l=yre(o,e.count==null?5:e.count,e.minstep),u=!!e.values||s===HD,c=e.format||g4e(n,o,l,s,e.formatSpecifier,e.formatType,u),d=e.values||m4e(o,l),f,h,p,m,g;return i&&(r.rem=i),s===HD?(a&&d.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=d.slice(0,a-1),g=!0):i=d,On(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Ba(m=p||8),i=i.map((y,v)=>Dr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=d[i.length],i.push(Dr({index:i.length,label:`${d.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===_Wt?(f=o.domain(),h=l4e(o,f[0],cr(f)),d.length<3&&!e.values&&f[0]!==cr(f)&&(d=[f[0],cr(f)]),i=d.map((y,v)=>Dr({index:v,label:c(y,v,d),value:y,perc:h(y)}))):(p=d.length-1,h=PWt(o),i=d.map((y,v)=>Dr({index:v,label:c(y,v,d),value:y,perc:v?h(y):0,perc2:v===p?1:h(d[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const YKt=e=>e.source.x,KKt=e=>e.source.y,XKt=e=>e.target.x,QKt=e=>e.target.y;function eie(e){Me.call(this,{},e)}eie.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ht(eie,Me,{transform(e,t){var n=e.sourceX||YKt,r=e.sourceY||KKt,i=e.targetX||XKt,s=e.targetY||QKt,o=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=vye.get(l+"-"+a)||vye.get(l);return u||He("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=u(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const Vje=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,JKt=(e,t,n,r)=>Vje(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Hje=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},ZKt=(e,t,n,r)=>Hje(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),qje=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},eXt=(e,t,n,r)=>qje(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),tXt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,nXt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,rXt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},iXt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},sXt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},oXt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*s+"C"+l*i+","+l*s+" "+l*o+","+l*a+" "+r*o+","+r*a},vye=eT({line:Vje,"line-radial":JKt,arc:Hje,"arc-radial":ZKt,curve:qje,"curve-radial":eXt,"orthogonal-horizontal":tXt,"orthogonal-vertical":nXt,"orthogonal-radial":rXt,"diagonal-horizontal":iXt,"diagonal-vertical":sXt,"diagonal-radial":oXt});function tie(e){Me.call(this,null,e)}tie.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ht(tie,Me,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||QS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(s),c=u.length,d=o,f=(a-o)/lI(u),h=Yl(c),p,m,g;for(e.sort&&h.sort((y,v)=>u[y]-u[v]),p=0;p<c;++p)g=u[h[p]],m=l[h[p]],m[r]=d,m[i]=d+=g*f;return this.value=u,t.reflow(e.modified()).modifies(n)}});const aXt=5;function lXt(e){const t=e.type;return!e.bins&&(t===Rx||t===Gk||t===Yk)}function Wje(e){return pre(e)&&e!==Xh}const uXt=Cf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Gje(e){Me.call(this,null,e),this.modified(!0)}ht(Gje,Me,{transform(e,t){var n=t.dataflow,r=this.value,i=cXt(e);(!r||i!==r.type)&&(this.value=r=Rr(i)());for(i in e)if(!uXt[i]){if(i==="padding"&&Wje(r.type))continue;On(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return gXt(r,e,mXt(r,e,fXt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function cXt(e){var t=e.type,n="",r;return t===Xh?Xh+"-"+Rx:(dXt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Xh+"-":r===3?iT+"-":""),(n+t||Rx).toLowerCase())}function dXt(e){const t=e.type;return pre(t)&&t!==Cb&&t!==Ab&&(e.scheme||e.range&&e.range.length&&e.range.every(Et))}function fXt(e,t,n){const r=hXt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&lXt(e),a,l;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return Wje(s)&&t.padding&&i[0]!==cr(i)&&(i=pXt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(Yje(s,i,n)),s===cre&&e.unknown(t.domainImplicit?dH:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&yre(e,t.nice)||null),i.length}function hXt(e,t,n){return t?(e.domain(Yje(e.type,t,n)),t.length):-1}function pXt(e,t,n,r,i,s){var o=Math.abs(cr(n)-n[0]),a=o/(o-2*r),l=e===lg?rne(t,null,a):e===Yk?tL(t,null,a,.5):e===Gk?tL(t,null,a,i||1):e===Nj?ine(t,null,a,s||1):nne(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function Yje(e,t,n){if(r4e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+ut(t))}return t}function mXt(e,t,n){let r=t.bins;if(r&&!Ge(r)){const i=e.domain(),s=i[0],o=cr(i),a=r.step;let l=r.start==null?s:r.start,u=r.stop==null?o:r.stop;a||He("Scale bins parameter missing step property."),l<s&&(l=a*Math.ceil(s/a)),u>o&&(u=a*Math.floor(o/a)),r=Yl(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===dre&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function gXt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=yXt(r,t,n);else if(t.scheme&&(s=vXt(r,t,n),On(s))){if(e.interpolator)return e.interpolator(s);He(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&i4e(r))return e.interpolator(Mj(bW(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(mre(t.interpolate,t.interpolateGamma)):On(e.round)?e.round(i):On(e.rangeRound)&&e.interpolate(i?ik:gg),s&&e.range(bW(s,t.reverse))}function yXt(e,t,n){e!==Q6e&&e!==iW&&He("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===iW?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*ure(n,i,r)]}function vXt(e,t,n){var r=t.schemeExtent,i,s;return Ge(t.scheme)?s=Mj(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=gre(i),s||He(`Unrecognized scheme name: ${t.scheme}`)),n=e===Dj?n+1:e===dre?n-1:e===kx||e===Oj?+t.schemeCount||aXt:n,i4e(e)?bye(s,r,t.reverse):On(s)?a4e(bye(s,r),n):e===cre?s:s.slice(0,n)}function bye(e,t,n){return On(e)&&(t||n)?o4e(e,bW(t||[0,1],n)):e}function bW(e,t){return t?e.slice().reverse():e}function Kje(e){Me.call(this,null,e)}ht(Kje,Me,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(d_(e.sort)),this.modified(n),t}});const _ye="zero",Xje="center",Qje="normalize",Jje=["y0","y1"];function nie(e){Me.call(this,null,e)}nie.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:_ye,values:[_ye,Xje,Qje]},{name:"as",type:"string",array:!0,length:2,default:Jje}]};ht(nie,Me,{transform(e,t){var n=e.as||Jje,r=n[0],i=n[1],s=d_(e.sort),o=e.field||QS,a=e.offset===Xje?bXt:e.offset===Qje?_Xt:wXt,l,u,c,d;for(l=EXt(t.source,e.groupby,s,o),u=0,c=l.length,d=l.max;u<c;++u)a(l[u],d,o,r,i);return t.reflow(e.modified()).modifies(n)}});function bXt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,l;a<o;++a)l=e[a],l[r]=s,l[i]=s+=Math.abs(n(l))}function _Xt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,l=0,u=0,c;l<a;++l)c=e[l],c[r]=o,c[i]=o=s*(u+=Math.abs(n(c)))}function wXt(e,t,n,r,i){for(var s=0,o=0,a=e.length,l=0,u,c;l<a;++l)c=e[l],u=+n(c),u<0?(c[r]=o,c[i]=o+=u):(c[r]=s,c[i]=s+=u)}function EXt(e,t,n,r){var i=[],s=m=>m(c),o,a,l,u,c,d,f,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,l=e.length;a<l;++a)c=e[a],d=t.map(s),f=o[d],f||(o[d]=f=[],i.push(f)),f.push(c);for(d=0,p=0,u=i.length;d<u;++d){for(f=i[d],a=0,h=0,l=f.length;a<l;++a)h+=Math.abs(r(f[a]));f.sum=h,h>p&&(p=h),n&&f.sort(n)}return i.max=p,i}const xXt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:jje,datajoin:Bje,encode:zje,legendentries:Uje,linkpath:eie,pie:tie,scale:Gje,sortitems:Kje,stack:nie},Symbol.toStringTag,{value:"Module"}));var SXt=Math.abs,_W=Math.cos,vL=Math.sin,TXt=1e-6,Zje=Math.PI,wW=Zje/2,wye=CXt(2);function Eye(e){return e>1?wW:e<-1?-wW:Math.asin(e)}function CXt(e){return e>0?Math.sqrt(e):0}function AXt(e,t){var n=e*vL(t),r=30,i;do t-=i=(t+vL(t)-n)/(1+_W(t));while(SXt(i)>TXt&&--r>0);return t/2}function IXt(e,t,n){function r(i,s){return[e*i*_W(s=AXt(n,s)),t*vL(s)]}return r.invert=function(i,s){return s=Eye(s/t),[i/(e*_W(s)),Eye((2*s+vL(2*s))/n)]},r}var RXt=IXt(wye/wW,wye,Zje);function kXt(){return xp(RXt).scale(169.529)}const PXt=BIe(),EW=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function NXt(e,t){return function n(){const r=t();return r.type=e,r.path=BIe().projection(r),r.copy=r.copy||function(){const i=n();return EW.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},t4e(r)}}function rie(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(bL[e]=NXt(e,t),this):bL[e]||null}function e5e(e){return e&&e.path||PXt}const bL={albers:UIe,albersusa:Sxt,azimuthalequalarea:Txt,azimuthalequidistant:Cxt,conicconformal:Rxt,conicequalarea:U$,conicequidistant:Nxt,equalEarth:Dxt,equirectangular:kxt,gnomonic:Mxt,identity:$xt,mercator:Axt,mollweide:kXt,naturalEarth1:Lxt,orthographic:Fxt,stereographic:jxt,transversemercator:Bxt};for(const e in bL)rie(e,bL[e]);function OXt(){}const Wp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function t5e(){var e=1,t=1,n=a;function r(l,u){return u.map(c=>i(l,c))}function i(l,u){var c=[],d=[];return s(l,u,f=>{n(f,l,u),DXt(f)>0?c.push([f]):d.push(f)}),d.forEach(f=>{for(var h=0,p=c.length,m;h<p;++h)if(MXt((m=c[h])[0],f)!==-1){m.push(f);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function s(l,u,c){var d=[],f=[],h,p,m,g,y,v;for(h=p=-1,g=l[0]>=u,Wp[g<<1].forEach(_);++h<e-1;)m=g,g=l[h+1]>=u,Wp[m|g<<1].forEach(_);for(Wp[g<<0].forEach(_);++p<t-1;){for(h=-1,g=l[p*e+e]>=u,y=l[p*e]>=u,Wp[g<<1|y<<2].forEach(_);++h<e-1;)m=g,g=l[p*e+e+h+1]>=u,v=y,y=l[p*e+h+1]>=u,Wp[m|g<<1|y<<2|v<<3].forEach(_);Wp[g|y<<3].forEach(_)}for(h=-1,y=l[p*e]>=u,Wp[y<<2].forEach(_);++h<e-1;)v=y,y=l[p*e+h+1]>=u,Wp[y<<2|v<<3].forEach(_);Wp[y<<3].forEach(_);function _(w){var E=[w[0][0]+h,w[0][1]+p],S=[w[1][0]+h,w[1][1]+p],x=o(E),T=o(S),I,P;(I=f[x])?(P=d[T])?(delete f[I.end],delete d[P.start],I===P?(I.ring.push(S),c(I.ring)):d[I.start]=f[P.end]={start:I.start,end:P.end,ring:I.ring.concat(P.ring)}):(delete f[I.end],I.ring.push(S),f[I.end=T]=I):(I=d[T])?(P=f[x])?(delete d[I.start],delete f[P.end],I===P?(I.ring.push(S),c(I.ring)):d[P.start]=f[I.end]={start:P.start,end:I.end,ring:P.ring.concat(I.ring)}):(delete d[I.start],I.ring.unshift(E),d[I.start=x]=I):d[x]=f[T]={start:x,end:T,ring:[E,S]}}}function o(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,c){l.forEach(d=>{var f=d[0],h=d[1],p=f|0,m=h|0,g,y=u[m*e+p];f>0&&f<e&&p===f&&(g=u[m*e+p-1],d[0]=f+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=u[(m-1)*e+p],d[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||He("invalid size"),e=u,t=c,r},r.smooth=function(l){return arguments.length?(n=l?a:OXt,r):n===a},r}function DXt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function MXt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=$Xt(e,t[n]))return i;return 0}function $Xt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],u=l[0],c=l[1],d=e[a],f=d[0],h=d[1];if(LXt(l,d,t))return 0;c>r!=h>r&&n<(f-u)*(r-c)/(h-c)+u&&(i=-i)}return i}function LXt(e,t,n){var r;return FXt(e,t,n)&&jXt(e[r=+(e[0]===t[0])],n[r],t[r])}function FXt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function jXt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function n5e(e,t,n){return function(r){var i=up(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,l=t?dy(s,o,e):a/(e+1);return Yl(s+l,o,l)}}function iie(e){Me.call(this,null,e)}iie.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ht(iie,Me,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||ja,s=t5e().smooth(e.smooth!==!1),o=e.thresholds||BXt(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const c=i(u),d=s.size([c.width,c.height])(c.values,Ge(o)?o:o(c.values));zXt(d,c,u,e),d.forEach(f=>{l.push(xj(u,Dr(a!=null?{[a]:f}:f)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function BXt(e,t,n){const r=n5e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Yc(t(i).values)))}function zXt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(On(i)&&(i=i(n,r)),On(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(xr(i)?i:i[0])||1,a=(xr(i)?i:i[1])||1,l=s&&s[0]||0,u=s&&s[1]||0;e.forEach(r5e(t,o,a,l,u))}function r5e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function l(d){d.forEach(u)}function u(d){a&&d.reverse(),d.forEach(c)}function c(d){d[0]=(d[0]-s)*t+r,d[1]=(d[1]-o)*n+i}return function(d){return d.coordinates.forEach(l),d}}function xye(e,t,n){const r=e>=0?e:xne(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function $7(e){return On(e)?e:Ba(+e)}function i5e(){var e=l=>l[0],t=l=>l[1],n=QS,r=[-1,-1],i=960,s=500,o=2;function a(l,u){const c=xye(r[0],l,e)>>o,d=xye(r[1],l,t)>>o,f=c?c+2:0,h=d?d+2:0,p=2*f+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;l.forEach(w=>{const E=f+(+e(w)>>o),S=h+(+t(w)>>o);E>=0&&E<p&&S>=0&&S<m&&(g[E+S*p]+=+n(w))}),c>0&&d>0?(ew(p,m,g,y,c),tw(p,m,y,g,d),ew(p,m,g,y,c),tw(p,m,y,g,d),ew(p,m,g,y,c),tw(p,m,y,g,d)):c>0?(ew(p,m,g,y,c),ew(p,m,y,g,c),ew(p,m,g,y,c),v=y):d>0&&(tw(p,m,g,y,d),tw(p,m,y,g,d),tw(p,m,g,y,d),v=y);const _=u?Math.pow(2,-2*o):1/lI(v);for(let w=0,E=p*m;w<E;++w)v[w]*=_;return{values:v,scale:1<<o,width:p,height:m,x1:f,y1:h,x2:f+(i>>o),y2:h+(s>>o)}}return a.x=function(l){return arguments.length?(e=$7(l),a):e},a.y=function(l){return arguments.length?(t=$7(l),a):t},a.weight=function(l){return arguments.length?(n=$7(l),a):n},a.size=function(l){if(!arguments.length)return[i,s];var u=+l[0],c=+l[1];return u>=0&&c>=0||He("invalid size"),i=u,s=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||He("invalid cell size"),o=Math.floor(Math.log(l)/Math.LN2),a):1<<o},a.bandwidth=function(l){return arguments.length?(l=wt(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&He("invalid bandwidth"),r=l,a):r},a}function ew(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+o*e]),a>=i&&(a>=s&&(l-=n[a-s+o*e]),r[a-i+o*e]=l/Math.min(a+1,e-1+s-a,s))}function tw(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[o+a*e]),a>=i&&(a>=s&&(l-=n[o+(a-s)*e]),r[o+(a-i)*e]=l/Math.min(a+1,t-1+s-a,s))}function sie(e){Me.call(this,null,e)}sie.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const UXt=["x","y","weight","size","cellSize","bandwidth"];function s5e(e,t){return UXt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ht(sie,Me,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=VXt(r,e.groupby),s=(e.groupby||[]).map(fs),o=s5e(i5e(),e),a=e.as||"grid",l=[];function u(c,d){for(let f=0;f<s.length;++f)c[s[f]]=d[f];return c}return l=i.map(c=>Dr(u({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function VXt(e,t){var n=[],r=c=>c(a),i,s,o,a,l,u;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function oie(e){Me.call(this,null,e)}oie.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ht(oie,Me,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t5e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||n5e(e.count||10,e.nice,!!i),o=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=s5e(i5e(),e)(i,!0),l=r5e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Ge(s)?s:s(i),i=r.size(o)(i,s),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Dr),n}});const xW="Feature",aie="FeatureCollection",HXt="MultiPoint";function lie(e){Me.call(this,null,e)}lie.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ht(lie,Me,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&ja,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(Na(a))||s&&t.modified(Na(s))||o&&t.modified(Na(o)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,c=>n.push(a(c))),s&&o&&(t.visit(l,c=>{var d=s(c),f=o(c);d!=null&&f!=null&&(d=+d)===d&&(f=+f)===f&&r.push([d,f])}),n=n.concat({type:xW,geometry:{type:HXt,coordinates:r}})),this.value={type:aie,features:n}}});function uie(e){Me.call(this,null,e)}uie.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ht(uie,Me,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||ja,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=e5e(e.projection),n.materialize().reflow()):o=i===ja||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=qXt(r,e.pointRadius);return n.visit(o,l=>l[s]=r(i(l))),r.pointRadius(a),n.modifies(s)}});function qXt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function cie(e){Me.call(this,null,e)}cie.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ht(cie,Me,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],l;function u(c){const d=n([r(c),i(c)]);d?(c[o]=d[0],c[a]=d[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(s)}});function die(e){Me.call(this,null,e)}die.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ht(die,Me,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=WXt(e5e(e.projection),e.field||sd("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function WXt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function fie(e){Me.call(this,[],e),this.generator=rxt()}fie.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ht(fie,Me,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)On(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(s6e(n[0],i)):t.add.push(Dr(i)),n[0]=i,t}});function hie(e){Me.call(this,null,e)}hie.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ht(hie,Me,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||ja,s=YXt(e.opacity,e),o=GXt(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?Yc(n.map(u=>Yc(i(u).values))):0};return n.forEach(u=>{const c=i(u),d=Nn({},u,l);r||(d.$max=Yc(c.values||[])),u[a]=KXt(c,d,o.dep?o:Ba(o(d)),s.dep?s:Ba(s(d)))}),t.reflow(!0).modifies(a)}});function GXt(e,t){let n;return On(e)?(n=r=>fy(e(r,t)),n.dep=o5e(e)):n=Ba(fy(e||"#888")),n}function YXt(e,t){let n;return On(e)?(n=r=>e(r,t),n.dep=o5e(e)):e?n=Ba(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function o5e(e){if(!On(e))return!1;const t=Cf(Na(e));return t.$x||t.$y||t.$value||t.$max}function KXt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||s,c=e.values,d=c?g=>c[g]:g0,f=ey(l-o,u-a),h=f.getContext("2d"),p=h.getImageData(0,0,l-o,u-a),m=p.data;for(let g=a,y=0;g<u;++g){t.$y=g-a;for(let v=o,_=g*i;v<l;++v,y+=4){t.$x=v-o,t.$value=d(v+_);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),f}function a5e(e){Me.call(this,null,e),this.modified(!0)}ht(a5e,Me,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=QXt(e.type),EW.forEach(r=>{e[r]!=null&&Sye(n,r,e[r])})):EW.forEach(r=>{e.modified(r)&&Sye(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&XXt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function XXt(e,t){const n=JXt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function QXt(e){const t=rie((e||"mercator").toLowerCase());return t||He("Unrecognized projection type: "+e),t()}function Sye(e,t,n){On(e[t])&&e[t](n)}function JXt(e){return e=wt(e),e.length===1?e[0]:{type:aie,features:e.reduce((t,n)=>t.concat(ZXt(n)),[])}}function ZXt(e){return e.type===aie?e.features:wt(e).filter(t=>t!=null).map(t=>t.type===xW?t:{type:xW,geometry:t})}const eQt=Object.freeze(Object.defineProperty({__proto__:null,contour:oie,geojson:lie,geopath:uie,geopoint:cie,geoshape:die,graticule:fie,heatmap:hie,isocontour:iie,kde2d:sie,projection:a5e},Symbol.toStringTag,{value:"Module"})),Tye={center:Gwt,collide:fEt,nbody:xEt,link:pEt,x:SEt,y:TEt},y2="forces",SW=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],tQt=["static","iterations"],l5e=["x","y","vx","vy"];function pie(e){Me.call(this,null,e)}pie.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:l5e}]};ht(pie,Me,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(SW),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&u5e(n,e,0,t)):(this.value=n=rQt(t.source,e),n.on("tick",nQt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(tQt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==y2||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(l5e)}});function nQt(e,t){return()=>e.touch(t).run()}function rQt(e,t){const n=EEt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),u5e(n,t,!0).on("end",()=>s=!0)}function u5e(e,t,n,r){var i=wt(t.forces),s,o,a,l;for(s=0,o=SW.length;s<o;++s)a=SW[s],a!==y2&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)l=y2+s,a=n||t.modified(y2,s)?sQt(i[s]):r&&iQt(i[s],r)?e.force(l):null,a&&e.force(l,a);for(o=e.numForces||0;s<o;++s)e.force(y2+s,null);return e.numForces=i.length,e}function iQt(e,t){var n,r;for(n in e)if(On(r=e[n])&&t.modified(Na(r)))return 1;return 0}function sQt(e){var t,n;Vt(Tye,e.force)||He("Unrecognized force: "+e.force),t=Tye[e.force]();for(n in e)On(t[n])&&oQt(t[n],e[n],e);return t}function oQt(e,t,n){e(On(t)?r=>t(r,n):t)}const aQt=Object.freeze(Object.defineProperty({__proto__:null,force:pie},Symbol.toStringTag,{value:"Module"}));function TW(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function mie(e){Me.call(this,null,e)}mie.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const lQt=e=>e.values;ht(mie,Me,{transform(e,t){t.source||He("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&Ej(o.data)&&i.rem.push(o.data)}),this.value=s=RJ({values:wt(e.keys).reduce((o,a)=>(o.key(a),o),uQt()).entries(i.source)},lQt),n&&s.each(o=>{o.children&&(o=Dr(o.data),i.add.push(o),i.source.push(o))}),TW(s,zt,zt)),i.source.root=s,i}});function uQt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],l={},u={};let c=-1,d,f,h;for(;++c<o;)d=a(f=i[c])+"",(h=l[d])?h.push(f):l[d]=[f];for(d in l)u[d]=n(l[d],s);return u}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Sg(e){Me.call(this,null,e)}const cQt=(e,t)=>e.parent===t.parent?1:2;ht(Sg,Me,{transform(e,t){(!t.source||!t.source.root)&&He(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(d_(e.sort,o=>o.data)),dQt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?cQt:QS);try{this.value=n(i)}catch(o){He(o)}return i.each(o=>fQt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function dQt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function fQt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const CW=["x","y","r","depth","children"];function gie(e){Sg.call(this,e)}gie.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:CW.length,default:CW}]};ht(gie,Sg,{layout:TSt,params:["radius","size","padding"],fields:CW});const AW=["x0","y0","x1","y1","depth","children"];function yie(e){Sg.call(this,e)}yie.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:AW.length,default:AW}]};ht(yie,Sg,{layout:CSt,params:["size","round","padding"],fields:AW});function vie(e){Me.call(this,null,e)}vie.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ht(vie,Me,{transform(e,t){t.source||He("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?TW(ihe().id(e.key).parentId(e.parentKey)(i.source),e.key,od):TW(ihe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Cye={tidy:$St,cluster:Yxt},IW=["x","y","depth","children"];function bie(e){Sg.call(this,e)}bie.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:IW.length,default:IW}]};ht(bie,Sg,{layout(e){const t=e||"tidy";if(Vt(Cye,t))return Cye[t]();He("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:IW});function _ie(e){Me.call(this,[],e)}_ie.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ht(_ie,Me,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||He("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[zt(o)]=1),r.each(o=>{const a=o.data,l=o.parent&&o.parent.data;l&&s[zt(a)]&&s[zt(l)]&&i.add.push(Dr({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[zt(o)]=1),n.forEach(o=>{(s[zt(o.source)]||s[zt(o.target)])&&i.mod.push(o)})),i}});const Aye={binary:FSt,dice:lk,slice:U6,slicedice:jSt,squarify:oRe,resquarify:BSt},RW=["x0","y0","x1","y1","depth","children"];function wie(e){Sg.call(this,e)}wie.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:RW.length,default:RW}]};ht(wie,Sg,{layout(){const e=LSt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Vt(Aye,t)?e.tile(Aye[t]):He("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:RW});const hQt=Object.freeze(Object.defineProperty({__proto__:null,nest:mie,pack:gie,partition:yie,stratify:vie,tree:bie,treelinks:_ie,treemap:wie},Symbol.toStringTag,{value:"Module"})),L7=4278190080;function pQt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function mQt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,l=ey(s,o).getContext("2d"),u=ey(s,o).getContext("2d"),c=a&&ey(s,o).getContext("2d");n.forEach(T=>ZD(l,T,!1)),ZD(u,t,!1),a&&ZD(c,t,!0);const d=F7(l,s,o),f=F7(u,s,o),h=a&&F7(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,_,w,E,S,x;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=d[w]&L7,x=f[w]&L7,S=a&&h[w]&L7,(E||S||x)&&(v=e(g),_=e(y),!i&&(E||x)&&p.set(v,_),a&&(E||S)&&m.set(v,_));return[p,m]}function F7(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function ZD(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>ZD(e,s.items,n))}):cc[r].draw(e,{items:n?t.map(gQt):t})}function gQt(e){const t=xj(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Gp=5,Ya=31,lR=32,i0=new Uint32Array(lR+1),Vd=new Uint32Array(lR+1);Vd[0]=0;i0[0]=~Vd[0];for(let e=1;e<=lR;++e)Vd[e]=Vd[e-1]<<1|1,i0[e]=~Vd[e];function yQt(e,t){const n=new Uint32Array(~~((e*t+lR)/lR));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Gp]&1<<(a&Ya)},set:(s,o)=>{const a=o*e+s;r(a>>>Gp,1<<(a&Ya))},clear:(s,o)=>{const a=o*e+s;i(a>>>Gp,~(1<<(a&Ya)))},getRange:(s,o,a,l)=>{let u=l,c,d,f,h;for(;u>=o;--u)if(c=u*e+s,d=u*e+a,f=c>>>Gp,h=d>>>Gp,f===h){if(n[f]&i0[c&Ya]&Vd[(d&Ya)+1])return!0}else{if(n[f]&i0[c&Ya]||n[h]&Vd[(d&Ya)+1])return!0;for(let p=f+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,l)=>{let u,c,d,f,h;for(;o<=l;++o)if(u=o*e+s,c=o*e+a,d=u>>>Gp,f=c>>>Gp,d===f)r(d,i0[u&Ya]&Vd[(c&Ya)+1]);else for(r(d,i0[u&Ya]),r(f,Vd[(c&Ya)+1]),h=d+1;h<f;++h)r(h,4294967295)},clearRange:(s,o,a,l)=>{let u,c,d,f,h;for(;o<=l;++o)if(u=o*e+s,c=o*e+a,d=u>>>Gp,f=c>>>Gp,d===f)i(d,Vd[u&Ya]|i0[(c&Ya)+1]);else for(i(d,Vd[u&Ya]),i(f,i0[(c&Ya)+1]),h=d+1;h<f;++h)i(h,0)},outOfBounds:(s,o,a,l)=>s<0||o<0||l>=t||a>=e}}function vQt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>yQt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function bQt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,l=a.length,u=o.datum.fontSize,c=Gu.width(o.datum,o.datum.text);let d=0,f,h,p,m,g,y,v;for(let _=0;_<l;++_)f=a[_].x,p=a[_].y,h=a[_].x2===void 0?f:a[_].x2,m=a[_].y2===void 0?p:a[_].y2,g=(f+h)/2,y=(p+m)/2,v=Math.abs(h-f+m-p),v>=d&&(d=v,o.x=g,o.y=y);return g=c/2,y=u/2,f=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",f<0&&h<=i?o.align="left":0<=f&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function _L(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function P0(e,t,n,r,i,s,o,a){const l=i*s/(r*2),u=e(t-l),c=e(t+l),d=e(n-(s=s/2)),f=e(n+s);return o.outOfBounds(u,d,c,f)||o.getRange(u,d,c,f)||a&&a.getRange(u,d,c,f)}function _Qt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function l(u,c,d,f,h){const p=e.invert(u),m=e.invert(c);let g=d,y=s,v;if(!_L(p,m,f,h,i,s)&&!P0(e,p,m,h,f,g,o,a)&&!P0(e,p,m,h,f,h,o,null)){for(;y-g>=1;)v=(g+y)/2,P0(e,p,m,h,f,v,o,a)?y=v:g=v;if(g>d)return[p,m,g,!0]}}return function(u){const c=u.datum.datum.items[r].items,d=c.length,f=u.datum.fontSize,h=Gu.width(u.datum,u.datum.text);let p=n?f:0,m=!1,g=!1,y=0,v,_,w,E,S,x,T,I,P,k,D,R,M,$,L,B,U;for(let z=0;z<d;++z){for(v=c[z].x,w=c[z].y,_=c[z].x2===void 0?v:c[z].x2,E=c[z].y2===void 0?w:c[z].y2,v>_&&(U=v,v=_,_=U),w>E&&(U=w,w=E,E=U),P=e(v),D=e(_),k=~~((P+D)/2),R=e(w),$=e(E),M=~~((R+$)/2),T=k;T>=P;--T)for(I=M;I>=R;--I)B=l(T,I,p,h,f),B&&([u.x,u.y,p,m]=B);for(T=k;T<=D;++T)for(I=M;I<=$;++I)B=l(T,I,p,h,f),B&&([u.x,u.y,p,m]=B);!m&&!n&&(L=Math.abs(_-v+E-w),S=(v+_)/2,x=(w+E)/2,L>=y&&!_L(S,x,h,f,i,s)&&!P0(e,S,x,f,h,f,o,null)&&(y=L,u.x=S,u.y=x,g=!0))}return m||g?(S=h/2,x=f/2,o.setRange(e(u.x-S),e(u.y-x),e(u.x+S),e(u.y+x)),u.align="center",u.baseline="middle",!0):!1}}const wQt=[-1,-1,1,1],EQt=[-1,1,-1,1];function xQt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[r].items,d=c.length,f=u.datum.fontSize,h=Gu.width(u.datum,u.datum.text),p=[];let m=n?f:0,g=!1,y=!1,v=0,_,w,E,S,x,T,I,P,k,D,R,M;for(let $=0;$<d;++$){for(_=c[$].x,E=c[$].y,w=c[$].x2===void 0?_:c[$].x2,S=c[$].y2===void 0?E:c[$].y2,p.push([e((_+w)/2),e((E+S)/2)]);p.length;)if([I,P]=p.pop(),!(o.get(I,P)||a.get(I,P)||l.get(I,P))){l.set(I,P);for(let L=0;L<4;++L)x=I+wQt[L],T=P+EQt[L],l.outOfBounds(x,T,x,T)||p.push([x,T]);if(x=e.invert(I),T=e.invert(P),k=m,D=s,!_L(x,T,h,f,i,s)&&!P0(e,x,T,f,h,k,o,a)&&!P0(e,x,T,f,h,f,o,null)){for(;D-k>=1;)R=(k+D)/2,P0(e,x,T,f,h,R,o,a)?D=R:k=R;k>m&&(u.x=x,u.y=T,m=k,g=!0)}}!g&&!n&&(M=Math.abs(w-_+S-E),x=(_+w)/2,T=(E+S)/2,M>=v&&!_L(x,T,h,f,i,s)&&!P0(e,x,T,f,h,f,o,null)&&(v=M,u.x=x,u.y=T,y=!0))}return g||y?(x=h/2,T=f/2,o.setRange(e(u.x-x),e(u.y-T),e(u.x+x),e(u.y+T)),u.align="center",u.baseline="middle",!0):!1}}const SQt=["right","center","left"],TQt=["bottom","middle","top"];function CQt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],l=r.length;return function(u){const c=u.boundary,d=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let f=u.textWidth??0,h,p,m,g,y,v,_,w,E,S,x,T,I,P,k;for(let D=0;D<l;++D){if(h=(n[D]&3)-1,p=(n[D]>>>2&3)-1,m=h===0&&p===0||r[D]<0,g=h&&p?Math.SQRT1_2:1,y=r[D]<0?-1:1,v=c[1+h]+r[D]*h*g,x=c[4+p]+y*d*p/2+r[D]*p*g,w=x-d/2,E=x+d/2,T=e(v),P=e(w),k=e(E),!f)if(Iye(T,T,P,k,o,a,v,v,w,E,c,m))f=Gu.width(u.datum,u.datum.text);else continue;if(S=v+y*f*h/2,v=S-f/2,_=S+f/2,T=e(v),I=e(_),Iye(T,I,P,k,o,a,v,_,w,E,c,m))return u.x=h?h*y<0?_:v:S,u.y=p?p*y<0?E:w:x,u.align=SQt[h*y+1],u.baseline=TQt[p*y+1],o.setRange(T,P,I,k),!0}return!1}}function Iye(e,t,n,r,i,s,o,a,l,u,c,d){return!(i.outOfBounds(e,n,t,r)||(d&&s||i).getRange(e,n,t,r))}const j7=0,B7=4,z7=8,U7=0,V7=1,H7=2,AQt={"top-left":j7+U7,top:j7+V7,"top-right":j7+H7,left:B7+U7,middle:B7+V7,right:B7+H7,"bottom-left":z7+U7,bottom:z7+V7,"bottom-right":z7+H7},IQt={naive:bQt,"reduced-search":_Qt,floodfill:xQt};function RQt(e,t,n,r,i,s,o,a,l,u,c){if(!e.length)return e;const d=Math.max(r.length,i.length),f=kQt(r,d),h=PQt(i,d),p=NQt(e[0].datum),m=p==="group"&&e[0].datum.items[l].marktype,g=m==="area",y=OQt(p,m,a,l),v=u===null||u===1/0,_=g&&c==="naive";let w=-1,E=-1;const S=e.map(P=>{const k=v?Gu.width(P,P.text):void 0;return w=Math.max(w,k),E=Math.max(E,P.fontSize),{datum:P,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(P),textWidth:k}});u=u===null||u===1/0?Math.max(w,E)+Math.max(...r):u;const x=vQt(t[0],t[1],u);let T;if(!_){n&&S.sort((D,R)=>n(D.datum,R.datum));let P=!1;for(let D=0;D<h.length&&!P;++D)P=h[D]===5||f[D]<0;const k=(p&&o||g)&&e.map(D=>D.datum);T=s.length||k?mQt(x,k||[],s,P,g):pQt(x,o&&S)}const I=g?IQt[c](x,T,o,l):CQt(x,T,h,f);return S.forEach(P=>P.opacity=+I(P)),S}function kQt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function PQt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=AQt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function NQt(e){return e&&e.mark&&e.mark.marktype}function OQt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const kW=["x","y","opacity","align","baseline"],c5e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Eie(e){Me.call(this,null,e)}Eie.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:c5e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:kW.length,default:kW}]};ht(Eie,Me,{transform(e,t){function n(s){const o=e[s];return On(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&He("Size parameter should be specified as a [width, height] array.");const i=e.as||kW;return RQt(t.materialize(t.SOURCE).source||[],e.size,e.sort,wt(e.offset==null?1:e.offset),wt(e.anchor||c5e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const DQt=Object.freeze(Object.defineProperty({__proto__:null,label:Eie},Symbol.toStringTag,{value:"Module"}));function d5e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,l,u;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function xie(e){Me.call(this,null,e)}xie.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ht(xie,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=d5e(r,e.groupby),s=(e.groupby||[]).map(fs),o=s.length,a=e.as||[fs(e.x),fs(e.y)],l=[];i.forEach(u=>{x6e(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const d={};for(let f=0;f<o;++f)d[s[f]]=u.dims[f];d[a[0]]=c[0],d[a[1]]=c[1],l.push(Dr(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const PW={constant:Mne,linear:$ne,log:b6e,exp:_6e,pow:w6e,quad:Lne,poly:E6e},MQt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Sie(e){Me.call(this,null,e)}Sie.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(PW)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ht(Sie,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=d5e(r,e.groupby),s=(e.groupby||[]).map(fs),o=e.method||"linear",a=e.order==null?3:e.order,l=MQt(o,a),u=e.as||[fs(e.x),fs(e.y)],c=PW[o],d=[];let f=e.extent;Vt(PW,o)||He("Invalid regression method: "+o),f!=null&&o==="log"&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){d.push(Dr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=f||up(h,e.x),y=v=>{const _={};for(let w=0;w<s.length;++w)_[s[w]]=h.dims[w];_[u[0]]=v[0],_[u[1]]=v[1],d.push(Dr(_))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):kj(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const $Qt=Object.freeze(Object.defineProperty({__proto__:null,loess:xie,regression:Sie},Symbol.toStringTag,{value:"Module"}));function Tie(e){Me.call(this,null,e)}Tie.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const LQt=[-1e5,-1e5,1e5,1e5];ht(Tie,Me,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:LQt;const s=this.value=yJ.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const l=s.cellPolygon(o);r[o][n]=l&&!jQt(l)?FQt(l):null}return t.reflow(e.modified()).modifies(n)}});function FQt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function jQt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const BQt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Tie},Symbol.toStringTag,{value:"Module"}));var q7=Math.PI/180,v2=64,eM=2048;function zQt(){var e=[256,256],t,n,r,i,s,o,a,l=f5e,u=[],c=Math.random,d={};d.layout=function(){for(var p=f(ey()),m=GQt((e[0]>>5)*e[1]),g=null,y=u.length,v=-1,_=[],w=u.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,x)=>x.size-S.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,UQt(p,E,w,v),E.hasText&&h(m,E,g)&&(_.push(E),g?HQt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return _};function f(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(v2<<5)/m,p.height=eM/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,_=Math.hypot(e[0],e[1]),w=l(e),E=c()<.5?1:-1,S=-E,x,T,I;(x=w(S+=E))&&(T=~~x[0],I=~~x[1],!(Math.min(Math.abs(T),Math.abs(I))>=_));)if(m.x=y+T,m.y=v+I,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!VQt(m,p,e[0]))&&(!g||qQt(m,g))){for(var P=m.sprite,k=m.width>>5,D=e[0]>>5,R=m.x-(k<<4),M=R&127,$=32-M,L=m.y1-m.y0,B=(m.y+m.y0)*D+(R>>5),U,z=0;z<L;z++){U=0;for(var N=0;N<=k;N++)p[B+N]|=U<<$|(N<k?(U=P[z*k+N])>>>M:0);B+=D}return m.sprite=null,!0}return!1}return d.words=function(p){return arguments.length?(u=p,d):u},d.size=function(p){return arguments.length?(e=[+p[0],+p[1]],d):e},d.font=function(p){return arguments.length?(n=Lv(p),d):n},d.fontStyle=function(p){return arguments.length?(i=Lv(p),d):i},d.fontWeight=function(p){return arguments.length?(s=Lv(p),d):s},d.rotate=function(p){return arguments.length?(o=Lv(p),d):o},d.text=function(p){return arguments.length?(t=Lv(p),d):t},d.spiral=function(p){return arguments.length?(l=YQt[p]||p,d):l},d.fontSize=function(p){return arguments.length?(r=Lv(p),d):r},d.padding=function(p){return arguments.length?(a=Lv(p),d):a},d.random=function(p){return arguments.length?(c=p,d):c},d}function UQt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(v2<<5)/s,eM/s);var o=0,a=0,l=0,u=n.length,c,d,f,h,p;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,f=t.size<<1,t.rotate){var m=Math.sin(t.rotate*q7),g=Math.cos(t.rotate*q7),y=c*g,v=c*m,_=f*g,w=f*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,f=~~Math.max(Math.abs(v+_),Math.abs(v-_))}else c=c+31>>5<<5;if(f>l&&(l=f),o+c>=v2<<5&&(o=0,a+=l,l=0),a+f>=eM)break;i.translate((o+(c>>1))/s,(a+(f>>1))/s),t.rotate&&i.rotate(t.rotate*q7),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=f,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(v2<<5)/s,eM/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,d=c>>5,f=t.y1-t.y0,h=0;h<f*d;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var x=0,T=-1;for(p=0;p<f;p++){for(h=0;h<c;h++){var I=d*p+(h>>5),P=E[(a+p)*(v2<<5)+(o+h)<<2]?1<<31-h%32:0;S[I]|=P,x|=P}x?T=p:(t.y0++,f--,p--,a++)}t.y1=t.y0+T,t.sprite=S.slice(0,(t.y1-t.y0)*d)}}}function VQt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,l=e.y1-e.y0,u=(e.y+e.y0)*n+(s>>5),c,d=0;d<l;d++){c=0;for(var f=0;f<=i;f++)if((c<<a|(f<i?(c=r[d*i+f])>>>o:0))&t[u+f])return!0;u+=n}return!1}function HQt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function qQt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function f5e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function WQt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function GQt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Lv(e){return typeof e=="function"?e:function(){return e}}var YQt={archimedean:f5e,rectangular:WQt};const h5e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],KQt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Cie(e){Me.call(this,zQt(),e)}Cie.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:h5e}]};ht(Cie,Me,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&He("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return On(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||KQt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||h5e;let a=e.fontSize||14,l;if(On(a)?l=e.fontSizeRange:a=Ba(a),l){const p=a,m=Rr("sqrt")().domain(up(i,p)).range(l);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const u=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(ld).layout(),c=s.size(),d=c[0]>>1,f=c[1]>>1,h=u.length;for(let p=0,m,g;p<h;++p)m=u[p],g=m.datum,g[o[0]]=m.x+d,g[o[1]]=m.y+f,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const XQt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Cie},Symbol.toStringTag,{value:"Module"})),QQt=e=>new Uint8Array(e),JQt=e=>new Uint16Array(e),wA=e=>new Uint32Array(e);function ZQt(){let e=8,t=[],n=wA(0),r=_O(0,e),i=_O(0,e);return{data:()=>t,seen:()=>n=eJt(n,t.length),add(s){for(let o=0,a=t.length,l=s.length,u;o<l;++o)u=s[o],u._index=a++,t.push(u)},remove(s,o){const a=t.length,l=Array(a-s),u=t;let c,d,f;for(d=0;!o[d]&&d<a;++d)l[d]=t[d],u[d]=d;for(f=d;d<a;++d)c=t[d],o[d]?u[d]=-1:(u[d]=f,r[f]=r[d],i[f]=i[d],l[f]=c,c._index=f++),r[d]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=_O(s,e,r),i=_O(s,e))}}}function eJt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function _O(e,t,n){const r=(t<257?QQt:t<65537?JQt:wA)(e);return n&&r.set(n),r}function Rye(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),l=i.index,u=a[0],c=a[1],d=l.length;let f;for(f=0;f<u;++f)s[l[f]]|=r;for(f=c;f<d;++f)s[l[f]]|=r;return o}}}function kye(){let e=wA(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const c=n,d=l.length,f=wA(d);let h=Array(d),p,m,g;for(g=0;g<d;++g)h[g]=a(l[g]),f[g]=g;if(h=tJt(h,f),c)p=t,m=e,t=Array(c+d),e=wA(c+d),nJt(u,p,m,c,h,f,d,t,e);else{if(u>0)for(g=0;g<d;++g)f[g]+=u;t=h,e=f}return n=c+d,{index:f,value:h}}function i(a,l){const u=n;let c,d,f;for(d=0;!l[e[d]]&&d<u;++d);for(f=d;d<u;++d)l[c=e[d]]||(e[f]=c,t[f]=t[d],++f);n=u-a}function s(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function o(a,l){let u;return l?u=l.length:(l=t,u=n),[hvt(l,a[0],0,u),cy(l,a[1],0,u)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function tJt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),gvt(e,t)}function nJt(e,t,n,r,i,s,o,a,l){let u=0,c=0,d;for(d=0;u<r&&c<o;++d)t[u]<i[c]?(a[d]=t[u],l[d]=n[u++]):(a[d]=i[c],l[d]=s[c++]+e);for(;u<r;++u,++d)a[d]=t[u],l[d]=n[u];for(;c<o;++c,++d)a[d]=i[c],l[d]=s[c]+e}function Aie(e){Me.call(this,ZQt(),e),this._indices=null,this._dims=null}Aie.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ht(Aie,Me,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,l,u;for(;a<o;++a)l=n[a].fname,u=i[l]||(i[l]=kye()),s.push(Rye(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),d=n.rem=n.add,f=n.mod,h=i.length,p={};let m,g,y,v,_,w,E,S,x;if(u.set(l),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,S=v.length;E<S;++E)w[v[E]._index]=1;for(E=0;E<h;++E)x=r[E],(!o[E]||e.modified("fields",E)||t.modified(x.fields))&&(y=x.fname,(m=p[y])||(s[y]=g=kye(),p[y]=m=g.insert(x,t.source,0)),o[E]=Rye(g,E,i[E]).onAdd(m,l));for(E=0,S=a.data().length;E<S;++E)_[E]||(u[E]!==l[E]?d.push(E):w[E]&&l[E]!==c&&f.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,l={},u=n.add,c=i.size()+r.length,d=s.length;let f=i.size(),h,p,m;i.resize(c,d),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<d;++h)p=a[h].fname,m=l[p]||(l[p]=o[p].insert(a[h],r,f)),s[h].onAdd(m,g);for(;f<c;++f)y[f]=v,g[f]!==v&&u.push(f)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,l,u;for(a=0,l=o.length;a<l;++a)u=o[a]._index,i[u]!==s&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),l={},u=n.rem,c=t.rem;let d,f,h,p;for(d=0,f=c.length;d<f;++d)h=c[d]._index,l[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&u.push(h);for(h in r)r[h].remove(f,l);return this.reindex(t,f,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,l,u;for(n.filters=0,u=0;u<o;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<o;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),d=c[0],f=c[1],h=u[0],p=u[1],m=e.one;let g,y,v;if(d<h)for(g=d,y=Math.min(h,f);g<y;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d>h)for(g=h,y=Math.min(d,p);g<y;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(f>p)for(g=Math.max(d,p),y=f;g<y;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f<p)for(g=Math.max(h,f),y=p;g<y;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],d=a[0],f=a[1],h=e.one;let p,m,g;if(u<d)for(p=u,m=Math.min(d,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(u>d)for(p=d,m=Math.min(u,f);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>f)for(p=Math.max(u,f),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<f)for(p=Math.max(d,c),m=f;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Iie(e){Me.call(this,null,e)}Iie.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ht(Iie,Me,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),l=r.prev(),u=c=>a[c]&n?null:o[c];return s.filter(s.MOD,u),i&i-1?(s.filter(s.ADD,c=>{const d=a[c]&n;return!d&&d^l[c]&n?o[c]:null}),s.filter(s.REM,c=>{const d=a[c]&n;return d&&!(d^(d^l[c]&n))?o[c]:null})):(s.filter(s.ADD,u),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>u(c._index))}});const rJt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Aie,resolvefilter:Iie},Symbol.toStringTag,{value:"Module"})),iJt="RawCode",Rb="Literal",sJt="Property",oJt="Identifier",aJt="ArrayExpression",lJt="BinaryExpression",p5e="CallExpression",uJt="ConditionalExpression",cJt="LogicalExpression",dJt="MemberExpression",fJt="ObjectExpression",hJt="UnaryExpression";function Uf(e){this.type=e}Uf.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=pJt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function pJt(e){switch(e.type){case aJt:return e.elements;case lJt:case cJt:return[e.left,e.right];case p5e:return[e.callee].concat(e.arguments);case uJt:return[e.test,e.consequent,e.alternate];case dJt:return[e.object,e.property];case fJt:return e.properties;case sJt:return[e.key,e.value];case hJt:return[e.argument];case oJt:case Rb:case iJt:default:return[]}}var kp,Dt,Ue,Da,qr,Yj=1,oP=2,kb=3,mv=4,Kj=5,p_=6,jl=7,aP=8,mJt=9;kp={};kp[Yj]="Boolean";kp[oP]="<end>";kp[kb]="Identifier";kp[mv]="Keyword";kp[Kj]="Null";kp[p_]="Numeric";kp[jl]="Punctuator";kp[aP]="String";kp[mJt]="RegularExpression";var gJt="ArrayExpression",yJt="BinaryExpression",vJt="CallExpression",bJt="ConditionalExpression",m5e="Identifier",_Jt="Literal",wJt="LogicalExpression",EJt="MemberExpression",xJt="ObjectExpression",SJt="Property",TJt="UnaryExpression",bo="Unexpected token %0",CJt="Unexpected number",AJt="Unexpected string",IJt="Unexpected identifier",RJt="Unexpected reserved word",kJt="Unexpected end of input",NW="Invalid regular expression",W7="Invalid regular expression: missing /",g5e="Octal literals are not allowed in strict mode.",PJt="Duplicate data property in object literal not allowed in strict mode",qo="ILLEGAL",uR="Disabled.",NJt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),OJt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Xj(e,t){if(!e)throw new Error("ASSERT: "+t)}function im(e){return e>=48&&e<=57}function Rie(e){return"0123456789abcdefABCDEF".includes(e)}function EA(e){return"01234567".includes(e)}function DJt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function cR(e){return e===10||e===13||e===8232||e===8233}function lP(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&NJt.test(String.fromCharCode(e))}function wL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&OJt.test(String.fromCharCode(e))}const MJt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function y5e(){for(;Ue<Da;){const e=Dt.charCodeAt(Ue);if(DJt(e)||cR(e))++Ue;else break}}function OW(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Ue<Da&&Rie(Dt[Ue])?(r=Dt[Ue++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Ar({},bo,qo);return String.fromCharCode(i)}function $Jt(){var e,t,n,r;for(e=Dt[Ue],t=0,e==="}"&&Ar({},bo,qo);Ue<Da&&(e=Dt[Ue++],!!Rie(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Ar({},bo,qo),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function v5e(){var e,t;for(e=Dt.charCodeAt(Ue++),t=String.fromCharCode(e),e===92&&(Dt.charCodeAt(Ue)!==117&&Ar({},bo,qo),++Ue,e=OW("u"),(!e||e==="\\"||!lP(e.charCodeAt(0)))&&Ar({},bo,qo),t=e);Ue<Da&&(e=Dt.charCodeAt(Ue),!!wL(e));)++Ue,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Dt.charCodeAt(Ue)!==117&&Ar({},bo,qo),++Ue,e=OW("u"),(!e||e==="\\"||!wL(e.charCodeAt(0)))&&Ar({},bo,qo),t+=e);return t}function LJt(){var e,t;for(e=Ue++;Ue<Da;){if(t=Dt.charCodeAt(Ue),t===92)return Ue=e,v5e();if(wL(t))++Ue;else break}return Dt.slice(e,Ue)}function FJt(){var e,t,n;return e=Ue,t=Dt.charCodeAt(Ue)===92?v5e():LJt(),t.length===1?n=kb:MJt.hasOwnProperty(t)?n=mv:t==="null"?n=Kj:t==="true"||t==="false"?n=Yj:n=kb,{type:n,value:t,start:e,end:Ue}}function G7(){var e=Ue,t=Dt.charCodeAt(Ue),n,r=Dt[Ue],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Ue,{type:jl,value:String.fromCharCode(t),start:e,end:Ue};default:if(n=Dt.charCodeAt(Ue+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Ue+=2,{type:jl,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Ue};case 33:case 61:return Ue+=2,Dt.charCodeAt(Ue)===61&&++Ue,{type:jl,value:Dt.slice(e,Ue),start:e,end:Ue}}}if(o=Dt.substr(Ue,4),o===">>>=")return Ue+=4,{type:jl,value:o,start:e,end:Ue};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Ue+=3,{type:jl,value:s,start:e,end:Ue};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return Ue+=2,{type:jl,value:i,start:e,end:Ue};if(i==="//"&&Ar({},bo,qo),"<>=!+-*%&|^/".includes(r))return++Ue,{type:jl,value:r,start:e,end:Ue};Ar({},bo,qo)}function jJt(e){let t="";for(;Ue<Da&&Rie(Dt[Ue]);)t+=Dt[Ue++];return t.length===0&&Ar({},bo,qo),lP(Dt.charCodeAt(Ue))&&Ar({},bo,qo),{type:p_,value:parseInt("0x"+t,16),start:e,end:Ue}}function BJt(e){let t="0"+Dt[Ue++];for(;Ue<Da&&EA(Dt[Ue]);)t+=Dt[Ue++];return(lP(Dt.charCodeAt(Ue))||im(Dt.charCodeAt(Ue)))&&Ar({},bo,qo),{type:p_,value:parseInt(t,8),octal:!0,start:e,end:Ue}}function Pye(){var e,t,n;if(n=Dt[Ue],Xj(im(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Ue,e="",n!=="."){if(e=Dt[Ue++],n=Dt[Ue],e==="0"){if(n==="x"||n==="X")return++Ue,jJt(t);if(EA(n))return BJt(t);n&&im(n.charCodeAt(0))&&Ar({},bo,qo)}for(;im(Dt.charCodeAt(Ue));)e+=Dt[Ue++];n=Dt[Ue]}if(n==="."){for(e+=Dt[Ue++];im(Dt.charCodeAt(Ue));)e+=Dt[Ue++];n=Dt[Ue]}if(n==="e"||n==="E")if(e+=Dt[Ue++],n=Dt[Ue],(n==="+"||n==="-")&&(e+=Dt[Ue++]),im(Dt.charCodeAt(Ue)))for(;im(Dt.charCodeAt(Ue));)e+=Dt[Ue++];else Ar({},bo,qo);return lP(Dt.charCodeAt(Ue))&&Ar({},bo,qo),{type:p_,value:parseFloat(e),start:t,end:Ue}}function zJt(){var e="",t,n,r,i,s=!1;for(t=Dt[Ue],Xj(t==="'"||t==='"',"String literal must starts with a quote"),n=Ue,++Ue;Ue<Da;)if(r=Dt[Ue++],r===t){t="";break}else if(r==="\\")if(r=Dt[Ue++],!r||!cR(r.charCodeAt(0)))switch(r){case"u":case"x":Dt[Ue]==="{"?(++Ue,e+=$Jt()):e+=OW(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:EA(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Ue<Da&&EA(Dt[Ue])&&(s=!0,i=i*8+"01234567".indexOf(Dt[Ue++]),"0123".includes(r)&&Ue<Da&&EA(Dt[Ue])&&(i=i*8+"01234567".indexOf(Dt[Ue++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Dt[Ue]===`
`&&++Ue;else{if(cR(r.charCodeAt(0)))break;e+=r}return t!==""&&Ar({},bo,qo),{type:aP,value:e,octal:s,start:n,end:Ue}}function UJt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Ar({},NW)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ar({},NW)}try{return new RegExp(e,t)}catch{return null}}function VJt(){var e,t,n,r,i;for(e=Dt[Ue],Xj(e==="/","Regular expression literal must start with a slash"),t=Dt[Ue++],n=!1,r=!1;Ue<Da;)if(e=Dt[Ue++],t+=e,e==="\\")e=Dt[Ue++],cR(e.charCodeAt(0))&&Ar({},W7),t+=e;else if(cR(e.charCodeAt(0)))Ar({},W7);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Ar({},W7),i=t.substr(1,t.length-2),{value:i,literal:t}}function HJt(){var e,t,n;for(t="",n="";Ue<Da&&(e=Dt[Ue],!!wL(e.charCodeAt(0)));)++Ue,e==="\\"&&Ue<Da?Ar({},bo,qo):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ar({},NW,n),{value:n,literal:t}}function qJt(){var e,t,n,r;return qr=null,y5e(),e=Ue,t=VJt(),n=HJt(),r=UJt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Ue}}function WJt(e){return e.type===kb||e.type===mv||e.type===Yj||e.type===Kj}function b5e(){if(y5e(),Ue>=Da)return{type:oP,start:Ue,end:Ue};const e=Dt.charCodeAt(Ue);return lP(e)?FJt():e===40||e===41||e===59?G7():e===39||e===34?zJt():e===46?im(Dt.charCodeAt(Ue+1))?Pye():G7():im(e)?Pye():G7()}function ql(){const e=qr;return Ue=e.end,qr=b5e(),Ue=e.end,e}function _5e(){const e=Ue;qr=b5e(),Ue=e}function GJt(e){const t=new Uf(gJt);return t.elements=e,t}function Nye(e,t,n){const r=new Uf(e==="||"||e==="&&"?wJt:yJt);return r.operator=e,r.left=t,r.right=n,r}function YJt(e,t){const n=new Uf(vJt);return n.callee=e,n.arguments=t,n}function KJt(e,t,n){const r=new Uf(bJt);return r.test=e,r.consequent=t,r.alternate=n,r}function kie(e){const t=new Uf(m5e);return t.name=e,t}function b2(e){const t=new Uf(_Jt);return t.value=e.value,t.raw=Dt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Oye(e,t,n){const r=new Uf(EJt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function XJt(e){const t=new Uf(xJt);return t.properties=e,t}function Dye(e,t,n){const r=new Uf(SJt);return r.key=t,r.value=n,r.kind=e,r}function QJt(e,t){const n=new Uf(TJt);return n.operator=e,n.argument=t,n.prefix=!0,n}function Ar(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(Xj(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=Ue,n.description=i,n}function Qj(e){e.type===oP&&Ar(e,kJt),e.type===p_&&Ar(e,CJt),e.type===aP&&Ar(e,AJt),e.type===kb&&Ar(e,IJt),e.type===mv&&Ar(e,RJt),Ar(e,bo,e.value)}function Ma(e){const t=ql();(t.type!==jl||t.value!==e)&&Qj(t)}function Ii(e){return qr.type===jl&&qr.value===e}function Y7(e){return qr.type===mv&&qr.value===e}function JJt(){const e=[];for(Ue=qr.start,Ma("[");!Ii("]");)Ii(",")?(ql(),e.push(null)):(e.push(Pb()),Ii("]")||Ma(","));return ql(),GJt(e)}function Mye(){Ue=qr.start;const e=ql();return e.type===aP||e.type===p_?(e.octal&&Ar(e,g5e),b2(e)):kie(e.value)}function ZJt(){var e,t,n,r;if(Ue=qr.start,e=qr,e.type===kb)return n=Mye(),Ma(":"),r=Pb(),Dye("init",n,r);if(e.type===oP||e.type===jl)Qj(e);else return t=Mye(),Ma(":"),r=Pb(),Dye("init",t,r)}function eZt(){var e=[],t,n,r,i={},s=String;for(Ue=qr.start,Ma("{");!Ii("}");)t=ZJt(),t.key.type===m5e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Ar({},PJt):i[r]=!0,e.push(t),Ii("}")||Ma(",");return Ma("}"),XJt(e)}function tZt(){Ma("(");const e=Pie();return Ma(")"),e}const nZt={if:1};function rZt(){var e,t,n;if(Ii("("))return tZt();if(Ii("["))return JJt();if(Ii("{"))return eZt();if(e=qr.type,Ue=qr.start,e===kb||nZt[qr.value])n=kie(ql().value);else if(e===aP||e===p_)qr.octal&&Ar(qr,g5e),n=b2(ql());else{if(e===mv)throw new Error(uR);e===Yj?(t=ql(),t.value=t.value==="true",n=b2(t)):e===Kj?(t=ql(),t.value=null,n=b2(t)):Ii("/")||Ii("/=")?(n=b2(qJt()),_5e()):Qj(ql())}return n}function iZt(){const e=[];if(Ma("("),!Ii(")"))for(;Ue<Da&&(e.push(Pb()),!Ii(")"));)Ma(",");return Ma(")"),e}function sZt(){Ue=qr.start;const e=ql();return WJt(e)||Qj(e),kie(e.value)}function oZt(){return Ma("."),sZt()}function aZt(){Ma("[");const e=Pie();return Ma("]"),e}function lZt(){var e,t,n;for(e=rZt();;)if(Ii("."))n=oZt(),e=Oye(".",e,n);else if(Ii("("))t=iZt(),e=YJt(e,t);else if(Ii("["))n=aZt(),e=Oye("[",e,n);else break;return e}function $ye(){const e=lZt();if(qr.type===jl&&(Ii("++")||Ii("--")))throw new Error(uR);return e}function tM(){var e,t;if(qr.type!==jl&&qr.type!==mv)t=$ye();else{if(Ii("++")||Ii("--"))throw new Error(uR);if(Ii("+")||Ii("-")||Ii("~")||Ii("!"))e=ql(),t=tM(),t=QJt(e.value,t);else{if(Y7("delete")||Y7("void")||Y7("typeof"))throw new Error(uR);t=$ye()}}return t}function Lye(e){let t=0;if(e.type!==jl&&e.type!==mv)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function uZt(){var e,t,n,r,i,s,o,a,l,u;if(e=qr,l=tM(),r=qr,i=Lye(r),i===0)return l;for(r.prec=i,ql(),t=[e,qr],o=tM(),s=[l,r,o];(i=Lye(qr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),t.pop(),n=Nye(a,l,o),s.push(n);r=ql(),r.prec=i,s.push(r),t.push(qr),n=tM(),s.push(n)}for(u=s.length-1,n=s[u],t.pop();u>1;)t.pop(),n=Nye(s[u-1].value,s[u-2],n),u-=2;return n}function Pb(){var e,t,n;return e=uZt(),Ii("?")&&(ql(),t=Pb(),Ma(":"),n=Pb(),e=KJt(e,t,n)),e}function Pie(){const e=Pb();if(Ii(","))throw new Error(uR);return e}function Nie(e){Dt=e,Ue=0,Da=Dt.length,qr=null,_5e();const t=Pie();if(qr.type!==oP)throw new Error("Unexpect token after expression.");return t}var w5e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function E5e(e){function t(o,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,l){return u=>t(o,u,a,l)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&He("Missing arguments to clamp function."),o.length>3&&He("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&He("Missing arguments to if function."),o.length>3&&He("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function cZt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function x5e(e){e=e||{};const t=e.allowed?Cf(e.allowed):{},n=e.forbidden?Cf(e.forbidden):{},r=e.constants||w5e,i=(e.functions||E5e)(d),s=e.globalvar,o=e.fieldvar,a=On(s)?s:p=>`${s}["${p}"]`;let l={},u={},c=0;function d(p){if(Et(p))return p;const m=f[p.type];return m==null&&He("Unsupported type: "+p.type),m(p)}const f={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Vt(n,m)?He("Illegal identifier: "+m):Vt(r,m)?r[m]:Vt(t,m)?m:(l[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=d(p.object);m&&(c+=1);const y=d(p.property);return g===o&&(u[cZt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&He("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Vt(i,m)&&i[m];return y||He("Unrecognized function: "+m),On(y)?y(g):y+"("+g.map(d).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(d).join(",")+"]",BinaryExpression:p=>"("+d(p.left)+" "+p.operator+" "+d(p.right)+")",UnaryExpression:p=>"("+p.operator+d(p.argument)+")",ConditionalExpression:p=>"("+d(p.test)+"?"+d(p.consequent)+":"+d(p.alternate)+")",LogicalExpression:p=>"("+d(p.left)+p.operator+d(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(d).join(",")+"}",Property:p=>{c+=1;const m=d(p.key);return c-=1,m+":"+d(p.value)}};function h(p){const m={code:d(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},m}return h.functions=i,h.constants=r,h}const Fye=Symbol("vega_selection_getter");function S5e(e){return(!e.getter||!e.getter[Fye])&&(e.getter=sd(e.field),e.getter[Fye]=!0),e.getter}const Oie="intersect",jye="union",dZt="vlMulti",fZt="vlPoint",Bye="or",hZt="and",yh="_vgsid_",dR=sd(yh),pZt="E",mZt="R",gZt="R-E",yZt="R-LE",vZt="R-RE",EL="index:unit";function zye(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=S5e(a)(e),J0(o)&&(o=Ra(o)),J0(r[s])&&(r[s]=Ra(r[s])),Ge(r[s])&&J0(r[s][0])&&(r[s]=r[s].map(Ra)),a.type===pZt){if(Ge(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===mZt){if(!Ww(o,r[s]))return!1}else if(a.type===vZt){if(!Ww(o,r[s],!0,!1))return!1}else if(a.type===gZt){if(!Ww(o,r[s],!1,!1))return!1}else if(a.type===yZt&&!Ww(o,r[s],!1,!0))return!1;return!0}function bZt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[EL]&&r[EL].value:void 0,o=n===Oie,a=i.length,l=0,u,c,d,f,h;l<a;++l)if(u=i[l],s&&o){if(c=c||{},d=c[f=u.unit]||0,d===-1)continue;if(h=zye(t,u),c[f]=h?-1:++d,h&&s.size===1)return!0;if(!h&&d===s.get(f).count)return!1}else if(h=zye(t,u),o^h)return h;return a&&o}const T5e=xS(dR),_Zt=T5e.left,wZt=T5e.right;function EZt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[EL]&&r[EL].value:void 0,o=n===Oie,a=dR(t),l=_Zt(i,a);if(l===i.length||dR(i[l])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(wZt(i,a)-l<s.size)return!1}return!0}function xZt(e,t){return e.map(n=>Nn(t.fields?{values:t.fields.map(r=>S5e(r)(n.datum))}:{[yh]:dR(n.datum)},t))}function SZt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},l={},u,c,d,f,h,p,m,g,y,v,_=s.length,w=0,E,S;w<_;++w)if(u=s[w],f=u.unit,c=u.fields,d=u.values,c&&d){for(E=0,S=c.length;E<S;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[f]||(m[f]=[]),l[h.field]=y=h.type.charAt(0),v=K7[`${y}_union`],m[f]=v(g,wt(d[E]));n&&(g=a[f]||(a[f]=[]),g.push(wt(d).reduce((x,T,I)=>(x[c[I].field]=T,x),{})))}else h=yh,p=dR(u),m=o[h]||(o[h]={}),g=m[f]||(m[f]=[]),g.push(p),n&&(g=a[f]||(a[f]=[]),g.push({[yh]:p}));if(t=t||jye,o[yh]?o[yh]=K7[`${yh}_${t}`](...Object.values(o[yh])):Object.keys(o).forEach(x=>{o[x]=Object.keys(o[x]).map(T=>o[x][T]).reduce((T,I)=>T===void 0?I:K7[`${l[x]}_${t}`](T,I))}),s=Object.keys(a),n&&s.length){const x=r?fZt:dZt;o[x]=t===jye?{[Bye]:s.reduce((T,I)=>(T.push(...a[I]),T),[])}:{[hZt]:s.map(T=>({[Bye]:a[T]}))}}return o}var K7={[`${yh}_union`]:Svt,[`${yh}_intersect`]:Evt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Ra(t[0]),r=Ra(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Ra(t[0]),r=Ra(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const TZt=":",CZt="@";function Die(e,t,n,r){t[0].type!==Rb&&He("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&cr(t).value,o="unit",a=CZt+o,l=TZt+i;s===Oie&&!Vt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Vt(r,l)||(r[l]=n.getData(i).tuplesRef())}function C5e(e){const t=this.context.data[e];return t?t.values.value:[]}function AZt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function IZt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(od).insert(t)),1}function RZt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const uP=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},kZt=uP("format"),A5e=uP("timeFormat"),PZt=uP("utcFormat"),NZt=uP("timeParse"),OZt=uP("utcParse"),wO=new Date(2e3,0,1);function Jj(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(wO.setYear(2e3),wO.setMonth(e),wO.setDate(t),A5e.call(this,wO,n))}function DZt(e){return Jj.call(this,e,1,"%B")}function MZt(e){return Jj.call(this,e,1,"%b")}function $Zt(e){return Jj.call(this,0,2+e,"%A")}function LZt(e){return Jj.call(this,0,2+e,"%a")}const FZt=":",jZt="@",DW="%",I5e="$";function Mie(e,t,n,r){t[0].type!==Rb&&He("First argument to data functions must be a string literal.");const i=t[0].value,s=FZt+i;if(!Vt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function BZt(e,t,n,r){t[0].type!==Rb&&He("First argument to indata must be a string literal."),t[1].type!==Rb&&He("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=jZt+s;Vt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function cl(e,t,n,r){if(t[0].type===Rb)Uye(n,r,t[0].value);else for(e in n.scales)Uye(n,r,e)}function Uye(e,t,n){const r=DW+n;if(!Vt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Pp(e,t){if(On(e))return e;if(Et(e)){const n=t.scales[e];return n&&fWt(n.value)?n.value:void 0}}function zZt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=cl,n._range=cl,n._scale=cl;const r=i=>"_["+(i.type===Rb?ut(DW+i.value):ut(DW)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function $ie(e,t){return function(n,r,i){if(n){const s=Pp(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const UZt=$ie("area",$Et),VZt=$ie("bounds",BEt),HZt=$ie("centroid",WEt);function qZt(e,t){const n=Pp(e,(t||this).context);return n&&n.scale()}function WZt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Lie(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function GZt(){return Lie(this.context.dataflow,"warn",arguments)}function YZt(){return Lie(this.context.dataflow,"info",arguments)}function KZt(){return Lie(this.context.dataflow,"debug",arguments)}function X7(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function MW(e){const t=fy(e),n=X7(t.r),r=X7(t.g),i=X7(t.b);return .2126*n+.7152*r+.0722*i}function XZt(e,t){const n=MW(e),r=MW(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function QZt(){const e=[].slice.call(arguments);return e.unshift({}),Nn(...e)}function R5e(e,t){return e===t||e!==e&&t!==t?!0:Ge(e)?Ge(t)&&e.length===t.length?JZt(e,t):!1:bt(e)&&bt(t)?k5e(e,t):!1}function JZt(e,t){for(let n=0,r=e.length;n<r;++n)if(!R5e(e[n],t[n]))return!1;return!0}function k5e(e,t){for(const n in e)if(!R5e(e[n],t[n]))return!1;return!0}function Vye(e){return t=>k5e(e,t)}function ZZt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],l=a.input,u=o.stamp();let c=a.changes,d,f;if(o._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(a.changes=c=o.changeset(),c.stamp=u,o.runAfter(()=>{a.modified=!0,o.pulse(l,c).run()},!0,1)),n&&(d=n===!0?od:Ge(n)||Ej(n)?n:Vye(n),c.remove(d)),t&&c.insert(t),r&&(d=Vye(r),l.value.some(d)?c.remove(d):c.insert(r)),i)for(f in s)c.modify(i,f,s[f]);return 1}function een(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function ten(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Hye={};function nen(e,t){const n=Hye[t]||(Hye[t]=sd(t));return Ge(e)?e.map(n):n(e)}function Fie(e){return Ge(e)||ArrayBuffer.isView(e)?e:null}function jie(e){return Fie(e)||(Et(e)?e:null)}function ren(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Fie(e).join(...n)}function ien(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jie(e).indexOf(...n)}function sen(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jie(e).lastIndexOf(...n)}function oen(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jie(e).slice(...n)}function aen(e,t,n){return On(n)&&He("Function argument passed to replace."),String(e).replace(t,n)}function len(e){return Fie(e).slice().reverse()}function uen(e,t,n){return ure(e||0,t||0,n||0)}function cen(e,t){const n=Pp(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function den(e,t){const n=Pp(e,(t||this).context);return n?n.copy():void 0}function fen(e,t){const n=Pp(e,(t||this).context);return n?n.domain():[]}function hen(e,t,n){const r=Pp(e,(n||this).context);return r?Ge(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function pen(e,t){const n=Pp(e,(t||this).context);return n&&n.range?n.range():[]}function men(e,t,n){const r=Pp(e,(n||this).context);return r?r(t):void 0}function gen(e,t,n,r,i){e=Pp(e,(i||this).context);const s=_4e(t,n);let o=e.domain(),a=o[0],l=cr(o),u=ja;return l-a?u=l4e(e,a,l):e=(e.interpolator?Rr("sequential")().interpolator(e.interpolator()):Rr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),l!==cr(o)&&o.push(l)),o.forEach(c=>s.stop(u(c),e(c))),s}function yen(e,t,n){const r=Pp(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function ven(e){let t=null;return function(n){return n?sR(n,t=t||Nx(e)):e}}const P5e=e=>e.data;function N5e(e,t){const n=C5e.call(t,e);return n.root&&n.root.lookup||{}}function ben(e,t,n){const r=N5e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(P5e):void 0}function _en(e,t){const n=N5e(e,this)[t];return n?n.ancestors().map(P5e):void 0}const O5e=()=>typeof window<"u"&&window||null;function wen(){const e=O5e();return e?e.screen:{}}function Een(){const e=O5e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function xen(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function D5e(e,t,n){if(!e)return[];const[r,i]=e,s=new $s().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return yje(o,s,Sen(t))}function Sen(e){let t=null;if(e){const n=wt(e.marktype),r=wt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Ten(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=wt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Cen(e){return wt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function Aen(e,t,n){const{x:r,y:i,mark:s}=n,o=new $s().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<o.x1&&(o.x1=l),l>o.x2&&(o.x2=l),u<o.y1&&(o.y1=u),u>o.y2&&(o.y2=u);return o.translate(r,i),D5e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(l=>Ien(l.x,l.y,t))}function Ien(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[l,u]=n[i];u>t!=a>t&&e<(o-l)*(t-u)/(a-u)+l&&r++}return r&1}const fR={random(){return ld()},cumulativeNormal:Aj,cumulativeLogNormal:Rne,cumulativeUniform:One,densityNormal:Sne,densityLogNormal:Ine,densityUniform:Nne,quantileNormal:Ij,quantileLogNormal:kne,quantileUniform:Dne,sampleNormal:Cj,sampleLogNormal:Ane,sampleUniform:Pne,isArray:Ge,isBoolean:pv,isDate:J0,isDefined(e){return e!==void 0},isNumber:xr,isObject:bt,isRegExp:vFe,isString:Et,isTuple:Ej,isValid(e){return e!=null&&e===e},toBoolean:lne,toDate(e){return une(e)},toNumber:Ra,toString:cne,indexof:ien,join:ren,lastindexof:sen,replace:aen,reverse:len,slice:oen,flush:gFe,lerp:bFe,merge:QZt,pad:EFe,peek:cr,pluck:nen,span:Vk,inrange:Ww,truncate:xFe,rgb:fy,lab:m$,hcl:g$,hsl:cI,luminance:MW,contrast:XZt,sequence:Yl,format:kZt,utcFormat:PZt,utcParse:OZt,utcOffset:LFe,utcSequence:BFe,timeFormat:A5e,timeParse:NZt,timeOffset:$Fe,timeSequence:jFe,timeUnitSpecifier:TFe,monthFormat:DZt,monthAbbrevFormat:MZt,dayFormat:$Zt,dayAbbrevFormat:LZt,quarter:fFe,utcquarter:hFe,week:AFe,utcweek:kFe,dayofyear:CFe,utcdayofyear:RFe,warn:GZt,info:YZt,debug:KZt,extent(e){return up(e)},inScope:WZt,intersect:D5e,clampRange:pFe,pinchDistance:een,pinchAngle:ten,screen:wen,containerSize:xen,windowSize:Een,bandspace:uen,setdata:IZt,pathShape:ven,panLinear:lFe,panLog:uFe,panPow:cFe,panSymlog:dFe,zoomLinear:nne,zoomLog:rne,zoomPow:tL,zoomSymlog:ine,encode:RZt,modify:ZZt,lassoAppend:Ten,lassoPath:Cen,intersectLasso:Aen},Ren=["view","item","group","xy","x","y"],ken="event.vega.",M5e="this.",Bie={},$5e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ut(I5e+e)}]`,functions:Pen,constants:w5e,visitors:Bie},$W=x5e($5e);function Pen(e){const t=E5e(e);Ren.forEach(n=>t[n]=ken+n);for(const n in fR)t[n]=M5e+n;return Nn(t,zZt(e,fR,Bie)),t}function Rs(e,t,n){return arguments.length===1?fR[e]:(fR[e]=t,n&&(Bie[e]=n),$W&&($W.functions[e]=M5e+e),this)}Rs("bandwidth",cen,cl);Rs("copy",den,cl);Rs("domain",fen,cl);Rs("range",pen,cl);Rs("invert",hen,cl);Rs("scale",men,cl);Rs("gradient",gen,cl);Rs("geoArea",UZt,cl);Rs("geoBounds",VZt,cl);Rs("geoCentroid",HZt,cl);Rs("geoShape",yen,cl);Rs("geoScale",qZt,cl);Rs("indata",AZt,BZt);Rs("data",C5e,Mie);Rs("treePath",ben,Mie);Rs("treeAncestors",_en,Mie);Rs("vlSelectionTest",bZt,Die);Rs("vlSelectionIdTest",EZt,Die);Rs("vlSelectionResolve",SZt,Die);Rs("vlSelectionTuples",xZt);function dp(e,t){const n={};let r;try{e=Et(e)?e:ut(e)+"",r=Nie(e)}catch{He("Expression parse error: "+e)}r.visit(s=>{if(s.type!==p5e)return;const o=s.callee.name,a=$5e.visitors[o];a&&a(o,s.arguments,t,n)});const i=$W(r);return i.globals.forEach(s=>{const o=I5e+s;!Vt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:Nn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Nen(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Oen=Cf(["rule"]),qye=Cf(["group","image","rect"]);function Den(e,t){let n="";return Oen[t]||(e.x2&&(e.x?(qye[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(qye[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function zie(e){return(e+"").toLowerCase()}function Men(e){return zie(e)==="operator"}function $en(e){return zie(e)==="collect"}function pC(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Len(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Fen={operator:(e,t)=>pC(e,["_"],t.code),parameter:(e,t)=>pC(e,["datum","_"],t.code),event:(e,t)=>pC(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return pC(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+ut(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Den(r,n),i+="return m;",pC(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(ut).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let l,u;return s.path?(l=`a${s.path}`,u=`b${s.path}`):((n=n||{})["f"+o]=s,l=`this.f${o}(a)`,u=`this.f${o}(b)`),Len(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function jen(e){const t=this;Men(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Ben(e){const t=this;if(e.params){const n=t.get(e.id);n||He("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function zen(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Ge(i)?i.map(s=>Wye(s,n,t)):Wye(i,n,t)}return t}function Wye(e,t,n){if(!e||!bt(e))return e;for(let r=0,i=Gye.length,s;r<i;++r)if(s=Gye[r],Vt(e,s.key))return s.parse(e,t,n);return e}var Gye=[{key:"$ref",parse:Uen},{key:"$key",parse:Hen},{key:"$expr",parse:Ven},{key:"$field",parse:qen},{key:"$encode",parse:Gen},{key:"$compare",parse:Wen},{key:"$context",parse:Yen},{key:"$subflow",parse:Ken},{key:"$tupleid",parse:Xen}];function Uen(e,t){return t.get(e.$ref)||He("Operator not defined: "+e.$ref)}function Ven(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=xu(t.parameterExpression(e.$expr),e.$fields))}function Hen(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=ane(e.$key,e.$flat,t.expr.codegen))}function qen(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=sd(e.$field,e.$name,t.expr.codegen))}function Wen(e,t){const n="c:"+e.$compare+"_"+e.$order,r=wt(e.$compare).map(i=>i&&i.$tupleid?zt:i);return t.fn[n]||(t.fn[n]=sne(r,e.$order,t.expr.codegen))}function Gen(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=xu(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function Yen(e,t){return t}function Ken(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),l=o.signals.parent;return l&&l.set(s),a.detachSubflow=()=>t.detach(o),a}}function Xen(){return zt}function Qen(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&He("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Jen(e){var t=this,n=bt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||He("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const Zen={skip:!0};function etn(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function ttn(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],Zen)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(od).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function L5e(e,t,n,r){return new F5e(e,t,n,r)}function F5e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Fen,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Yye(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}F5e.prototype=Yye.prototype={fork(){const e=new Yye(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),$en(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[zie(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Nen,parseOperator:jen,parseOperatorParameters:Ben,parseParameters:zen,parseStream:Qen,parseUpdate:Jen,getState:etn,setState:ttn};function ntn(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),j5e(t,e.description()))}function j5e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function rtn(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const Q7="default";function itn(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:Q7,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Et(i)?i:i.user:Q7,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Et(r)||(i=r.item,r=r.user),LW(e,r&&r!==Q7?r:i||r),i},{cursor:t})}function LW(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function xL(e,t){var n=e._runtime.data;return Vt(n,t)||He("Unrecognized data set: "+t),n[t]}function stn(e,t){return arguments.length<2?xL(this,e).values.value:Zj.call(this,e,f_().remove(od).insert(t))}function Zj(e,t){o6e(t)||He("Second argument to changes must be a changeset.");const n=xL(this,e);return n.modified=!0,this.pulse(n.input,t)}function otn(e,t){return Zj.call(this,e,f_().insert(t))}function atn(e,t){return Zj.call(this,e,f_().remove(t))}function B5e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function z5e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function e5(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function ltn(e){var t=e5(e),n=B5e(e),r=z5e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function utn(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=e5(e),o=t.changedTouches?t.changedTouches[0]:t,s=qj(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=ctn(e,n,s),t}function ctn(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,l;if(o){for(l=t;l;l=l.mark.group)if(l.mark.name===o){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Et(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Ba(e),item:Ba(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Kye="view",dtn="timer",ftn="window",htn={trap:!1};function ptn(e){const t=Nn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Ge(r[s])&&(r[s]=Cf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function U5e(e,t,n,r){e._eventListeners.push({type:n,sources:wt(t),handler:r})}function mtn(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function EO(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||bt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function gtn(e,t,n){var r=this,i=new Tj(n),s=function(u,c){r.runAsync(null,()=>{e===Kye&&mtn(r,t)&&u.preventDefault(),i.receive(utn(r,u,c))})},o;if(e===dtn)EO(r,"timer",t)&&r.timer(s,t);else if(e===Kye)EO(r,"view",t)&&r.addEventListener(t,s,htn);else if(e===ftn?EO(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&EO(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=o.length;a<l;++a)o[a].addEventListener(t,s);U5e(r,o,t,s)}return i}function Xye(e){return e.item}function Qye(e){return e.item.mark.source}function Jye(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function ytn(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Xye),Qye,Jye(e)),this.on(this.events("view","pointerout",Xye),Qye,Jye(t)),this}function vtn(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function Yu(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const btn="vega-bind",_tn="vega-bind-name",wtn="vega-bind-radio";function Etn(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=one(r.debounce,i.update))),(r.input==null&&r.element?xtn:Ttn)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function xtn(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),U5e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(Stn(i))}}function Stn(e){return typeof Event<"u"?new Event(e):{type:e}}function Ttn(e,t,n,r){const i=r.signal(n.signal),s=Yu("div",{class:btn}),o=n.input==="radio"?s:s.appendChild(Yu("label"));o.appendChild(Yu("span",{class:_tn},n.name||n.signal)),t.appendChild(s);let a=Ctn;switch(n.input){case"checkbox":a=Atn;break;case"select":a=Itn;break;case"radio":a=Rtn;break;case"range":a=ktn;break}a(e,o,n,i)}function Ctn(e,t,n,r){const i=Yu("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function Atn(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Yu("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function Itn(e,t,n,r){const i=Yu("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const l={value:o};SL(o,r)&&(l.selected=!0),i.appendChild(Yu("option",l,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,l=n.options.length;a<l;++a)if(SL(n.options[a],o)){i.selectedIndex=a;return}}}function Rtn(e,t,n,r){const i=Yu("span",{class:wtn}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const l={type:"radio",name:n.signal,value:o};SL(o,r)&&(l.checked=!0);const u=Yu("input",l);u.addEventListener("change",()=>e.update(o));const c=Yu("label",{},(s[a]||o)+"");return c.prepend(u),i.appendChild(c),u}),e.set=o=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)SL(a[u].value,o)&&(a[u].checked=!0)}}function ktn(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||dy(s,i,100),a=Yu("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const l=Yu("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function SL(e,t){return e===t||e+""==t+""}function V5e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,B5e(e),z5e(e),e5(e),i,s).background(e.background())}function Uie(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Ptn(e,t,n,r){const i=new r(e.loader(),Uie(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,e5(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Ntn(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=Wj(r);e=n._el=e?J7(n,e,!0):null,ntn(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||sP,a=e?s.renderer:s.headless;return n._renderer=a?V5e(n,n._renderer,e,a):null,n._handler=Ptn(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=J7(n,t,!0):e.appendChild(Yu("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=J7(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{Etn(n,l.element||t,l)})),n}function J7(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const mC=e=>+e||0,Otn=e=>({top:e,bottom:e,left:e,right:e});function Zye(e){return bt(e)?{top:mC(e.top),bottom:mC(e.bottom),left:mC(e.left),right:mC(e.right)}:Otn(mC(e))}async function Vie(e,t,n,r){const i=Wj(t),s=i&&i.headless;return s||He("Unrecognized renderer type: "+t),await e.runAsync(),V5e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function Dtn(e,t){e!==I0.Canvas&&e!==I0.SVG&&e!==I0.PNG&&He("Unrecognized image type: "+e);const n=await Vie(this,e,t);return e===I0.SVG?Mtn(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Mtn(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function $tn(e,t){return(await Vie(this,I0.Canvas,e,t)).canvas()}async function Ltn(e){return(await Vie(this,I0.SVG,e)).svg()}function Ftn(e,t,n){return L5e(e,Ix,fR,n).parse(t)}function jtn(e){var t=this._runtime.scales;return Vt(t,e)||He("Unrecognized scale or projection: "+e),t[e].value}var H5e="width",q5e="height",Hie="padding",eve={skip:!0};function W5e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Hie?r.left+r.right:0)}function G5e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Hie?r.top+r.bottom:0)}function Btn(e){var t=e._signals,n=t[H5e],r=t[q5e],i=t[Hie];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=W5e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=G5e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function ztn(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(H5e,n,eve),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(q5e,r,eve),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(l=>l.resize())},!1,1)}function Utn(e){return this._runtime.getState(e||{data:Vtn,signals:Htn,recurse:!0})}function Vtn(e,t){return t.modified&&Ge(t.input.value)&&!e.startsWith("_:vega:_")}function Htn(e,t){return!(e==="parent"||t instanceof Ix.proxy)}function qtn(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Wtn(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Xbt(n,t))}function Gtn(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Ytn(r))}function Ytn(e){return e==null?"":Ge(e)?Y5e(e):bt(e)&&!J0(e)?Ktn(e):e+""}function Ktn(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Ge(n)?Y5e(n):K5e(n))}).join(`
`)}function Y5e(e){return"["+e.map(K5e).join(", ")+"]"}function K5e(e){return Ge(e)?"[]":bt(e)&&!J0(e)?"{}":e}function Xtn(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function X5e(e,t){const n=this;if(t=t||{},CE.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=Nn({},e.locale,t.locale);n.locale(XFe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||I0.Canvas,n._scenegraph=new H4e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Gtn,n._redraw=!0,n._handler=new sP().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=ptn(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Ftn(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:Nn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=W5e(n,n._width),n._viewHeight=G5e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Btn(n),rtn(n),itn(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function xO(e,t){return Vt(e._signals,t)?e._signals[t]:He("Unrecognized signal name: "+ut(t))}function Q5e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function tve(e,t,n,r){let i=Q5e(n,r);return i||(i=Uie(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function nve(e,t,n){const r=Q5e(t,n);return r&&t._targets.remove(r),e}ht(X5e,CE,{async evaluate(e,t,n){if(await CE.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,ltn(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&UD(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&j5e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=xO(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Zye(e)):Zye(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Wj(e)||He("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(CE.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(xO(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:ztn,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Uie(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return tve(this,e,xO(this,e),t)},removeSignalListener(e,t){return nve(this,xO(this,e),t)},addDataListener(e,t){return tve(this,e,xL(this,e).values,t)},removeDataListener(e,t){return nve(this,xL(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=LW(this,null);this._globalCursor=!!e,t&&LW(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Wtn,events:gtn,finalize:vtn,hover:ytn,data:stn,change:Zj,insert:otn,remove:atn,scale:jtn,initialize:Ntn,toImageURL:Dtn,toCanvas:$tn,toSVG:Ltn,getState:Utn,setState:qtn,_watchPixelRatio:Xtn});const Qtn="view",TL="[",CL="]",J5e="{",Z5e="}",Jtn=":",e8e=",",Ztn="@",enn=">",tnn=/[[\]{}]/,nnn={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let t8e,n8e;function gv(e,t,n){return t8e=t||Qtn,n8e=n||nnn,r8e(e.trim()).map(FW)}function rnn(e){return n8e[e]}function xA(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function r8e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=xA(e,i,e8e,TL+J5e,CL+Z5e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function FW(e){return e[0]==="["?inn(e):snn(e)}function inn(e){const t=e.length;let n=1,r;if(n=xA(e,n,CL,TL,CL),n===t)throw"Empty between selector: "+e;if(r=r8e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==enn)throw"Expected '>' after between selector: "+e;r=r.map(FW);const i=FW(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function snn(e){const t={source:t8e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,l,u;if(e[o-1]===Z5e){if(a=e.lastIndexOf(J5e),a>=0){try{r=onn(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===Ztn&&(i=++a),l=xA(e,a,Jtn),l<o&&(n.push(e.substring(s,l).trim()),s=a=++l),a=xA(e,a,TL),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),u=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=xA(e,a,CL),a===o)throw"Unmatched left bracket: "+e;if(u.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==TL)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||tnn.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):rnn(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function onn(e){const t=e.split(e8e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function ann(e){return bt(e)?e:{type:e||"pad"}}const gC=e=>+e||0,lnn=e=>({top:e,bottom:e,left:e,right:e});function unn(e){return bt(e)?e.signal?e:{top:gC(e.top),bottom:gC(e.bottom),left:gC(e.left),right:gC(e.right)}:lnn(gC(e))}const _o=e=>bt(e)&&!Ge(e)?Nn({},e):{value:e};function rve(e,t,n,r){return n!=null?(bt(n)&&!Ge(n)||Ge(n)&&n.length&&bt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function ea(e,t,n){for(const r in t)rve(e,r,t[r]);for(const r in n)rve(e,r,n[r],"update")}function oT(e,t,n){for(const r in t)n&&Vt(n,r)||(e[r]=Nn(e[r]||{},t[r]));return e}function xw(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const qie="mark",Wie="frame",Gie="scope",cnn="axis",dnn="axis-domain",fnn="axis-grid",hnn="axis-label",pnn="axis-tick",mnn="axis-title",gnn="legend",ynn="legend-band",vnn="legend-entry",bnn="legend-gradient",i8e="legend-label",_nn="legend-symbol",wnn="legend-title",Enn="title",xnn="title-text",Snn="title-subtitle";function Tnn(e,t,n,r,i){const s={},o={};let a,l,u,c;l="lineBreak",t==="text"&&i[l]!=null&&!xw(l,e)&&Z7(s,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Wie?i.group:n===qie?Nn({},i.mark,i[t]):null;for(l in c)u=xw(l,e)||(l==="fill"||l==="stroke")&&(xw("fill",e)||xw("stroke",e)),u||Z7(s,l,c[l]);wt(r).forEach(d=>{const f=i.style&&i.style[d];for(const h in f)xw(h,e)||Z7(s,h,f[h])}),e=Nn({},e);for(l in s)c=s[l],c.signal?(a=a||{})[l]=c:o[l]=c;return e.enter=Nn(o,e.enter),a&&(e.update=Nn(a,e.update)),e}function Z7(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const s8e=e=>Et(e)?ut(e):e.signal?`(${e.signal})`:o8e(e);function t5(e){if(e.gradient!=null)return Ann(e);let t=e.signal?`(${e.signal})`:e.color?Cnn(e.color):e.field!=null?o8e(e.field):e.value!==void 0?ut(e.value):void 0;return e.scale!=null&&(t=Inn(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${nM(e.exponent)})`),e.mult!=null&&(t+=`*${nM(e.mult)}`),e.offset!=null&&(t+=`+${nM(e.offset)}`),e.round&&(t=`round(${t})`),t}const SO=(e,t,n,r)=>`(${e}(${[t,n,r].map(t5).join(",")})+'')`;function Cnn(e){return e.c?SO("hcl",e.h,e.c,e.l):e.h||e.s?SO("hsl",e.h,e.s,e.l):e.l||e.a?SO("lab",e.l,e.a,e.b):e.r||e.g||e.b?SO("rgb",e.r,e.g,e.b):null}function Ann(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ut(n));for(;t.length&&cr(t)==null;)t.pop();return t.unshift(s8e(e.gradient)),`gradient(${t.join(",")})`}function nM(e){return bt(e)?"("+t5(e)+")":e}function o8e(e){return a8e(bt(e)?e:{datum:e})}function a8e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):He("Invalid field reference: "+ut(e));return e.signal||(r=Et(r)?Ip(r).map(ut).join("]["):a8e(r)),t+"["+r+"]"}function Inn(e,t){const n=s8e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+nM(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Rnn(e){let t="";return e.forEach(n=>{const r=t5(n);t+=n.test?`(${n.test})?${r}:`:r}),cr(t)===":"&&(t+="null"),t}function l8e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=Tnn(e,t,n,r,i.config);for(const a in e)o[a]=knn(e[a],t,s,i);return s}function knn(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=Nnn(Pnn(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function Pnn(e){return Ge(e)?Rnn(e):t5(e)}function Nnn(e,t,n,r){const i=dp(e,t);return i.$fields.forEach(s=>r[s]=1),Nn(n,i.$params),i.$expr}const Onn="outer",Dnn=["value","update","init","react","bind"];function ive(e,t){He(e+' for "outer" push: '+ut(t))}function u8e(e,t){const n=e.name;if(e.push===Onn)t.signals[n]||ive("No prior signal definition",n),Dnn.forEach(r=>{e[r]!==void 0&&ive("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function jW(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function n5(e,t,n,r){return new jW(e,t,n,r)}function AL(e,t){return n5("operator",e,t)}function Bt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function hR(e,t){return t?{$field:e,$name:t}:{$field:e}}const BW=hR("key");function sve(e,t){return{$compare:e,$order:t}}function Mnn(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const $nn="ascending",Lnn="descending";function Fnn(e){return bt(e)?(e.order===Lnn?"-":"+")+r5(e.op,e.field):""}function r5(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Yie="scope",zW="view";function no(e){return e&&e.signal}function jnn(e){return e&&e.expr}function rM(e){if(no(e))return!0;if(bt(e)){for(const t in e)if(rM(e[t]))return!0}return!1}function Bd(e,t){return e??t}function Y1(e){return e&&e.signal||e}const ove="timer";function pR(e,t){return(e.merge?znn:e.stream?Unn:e.type?Vnn:He("Invalid stream specification: "+ut(e)))(e,t)}function Bnn(e){return e===Yie?zW:e||zW}function znn(e,t){const n=e.merge.map(i=>pR(i,t)),r=Kie({merge:n},e,t);return t.addStream(r).id}function Unn(e,t){const n=pR(e.stream,t),r=Kie({stream:n},e,t);return t.addStream(r).id}function Vnn(e,t){let n;e.type===ove?(n=t.event(ove,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Bnn(e.source),e.type);const r=Kie({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Kie(e,t,n){let r=t.between;return r&&(r.length!==2&&He('Stream "between" parameter must have 2 entries: '+ut(t)),e.between=[pR(r[0],n),pR(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Hnn(t.marktype,t.markname,t.markrole)),t.source===Yie&&r.push("inScope(event.item)"),r.length&&(e.filter=dp("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Hnn(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const qnn={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Wnn(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||He("Signal update missing events specification."),Et(s)&&(s=gv(s,t.isSubscope()?Yie:zW)),s=wt(s).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[Ynn(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&He("Signal encode and update are mutually exclusive."),o="encode(item(),"+ut(r)+")"),i.update=Et(o)?dp(o,t):o.expr!=null?dp(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:qnn,$params:{$value:t.signalRef(o.signal)}}:He("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(Nn(Gnn(l,t),i)))}function Gnn(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):pR(e,t)}}function Ynn(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Knn(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?He("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=dp(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Wnn(i,t,n.id))}const ti=e=>(t,n,r)=>n5(e,n,t||void 0,r),c8e=ti("aggregate"),Xnn=ti("axisticks"),d8e=ti("bound"),Vf=ti("collect"),ave=ti("compare"),Qnn=ti("datajoin"),f8e=ti("encode"),Jnn=ti("expression"),Znn=ti("facet"),ern=ti("field"),trn=ti("key"),nrn=ti("legendentries"),rrn=ti("load"),irn=ti("mark"),srn=ti("multiextent"),orn=ti("multivalues"),arn=ti("overlap"),lrn=ti("params"),h8e=ti("prefacet"),urn=ti("projection"),crn=ti("proxy"),drn=ti("relay"),p8e=ti("render"),frn=ti("scale"),m_=ti("sieve"),hrn=ti("sortitems"),m8e=ti("viewlayout"),prn=ti("values");let mrn=0;const g8e={min:"min",max:"max",count:"sum"};function grn(e,t){const n=e.type||"linear";n4e(n)||He("Unrecognized scale type: "+ut(n)),t.addScale(e.name,{type:n,domain:void 0})}function yrn(e,t){const n=t.getScale(e.name).params;let r;n.domain=y8e(e.domain,e,t),e.range!=null&&(n.range=b8e(e,t,n)),e.interpolate!=null&&Arn(e.interpolate,n),e.nice!=null&&(n.nice=Crn(e.nice,t)),e.bins!=null&&(n.bins=Trn(e.bins,t));for(r in e)Vt(n,r)||r==="name"||(n[r]=Uc(e[r],t))}function Uc(e,t){return bt(e)?e.signal?t.signalRef(e.signal):He("Unsupported object: "+ut(e)):e}function iM(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Uc(n,t))}function i5(e){He("Can not find data set: "+ut(e))}function y8e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&He("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Ge(e)?vrn:e.fields?_rn:brn)(e,t,n)}function vrn(e,t,n){return e.map(r=>Uc(r,n))}function brn(e,t,n){const r=n.getData(e.data);return r||i5(e.data),Px(t.type)?r.valuesRef(n,e.field,v8e(e.sort,!1)):s4e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function _rn(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Et(o)?{data:r,field:o}:Ge(o)||o.signal?wrn(o,n):o,s.push(o),s),[]);return(Px(t.type)?Ern:s4e(t.type)?xrn:Srn)(e,n,i)}function wrn(e,t){const n="_:vega:_"+mrn++,r=Vf({});if(Ge(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+ut(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,m_({})]),{data:n,field:"data"}}function Ern(e,t,n){const r=v8e(e.sort,!0);let i,s;const o=n.map(u=>{const c=t.getData(u.data);return c||i5(u.data),c.countsRef(t,u.field,r)}),a={groupby:BW,pulse:o};r&&(i=r.op||"count",s=r.field?r5(i,r.field):"count",a.ops=[g8e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(c8e(a));const l=t.add(Vf({pulse:Bt(i)}));return s=t.add(prn({field:BW,sort:t.sortRef(r),pulse:Bt(l)})),Bt(s)}function v8e(e,t){return e&&(!e.field&&!e.op?bt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?He("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!g8e[e.op]&&He("Multiple domain scales can not be sorted using "+e.op)),e}function xrn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||i5(i.data),s.domainRef(t,i.field)});return Bt(t.add(orn({values:r})))}function Srn(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||i5(i.data),s.extentRef(t,i.field)});return Bt(t.add(srn({extents:r})))}function Trn(e,t){return e.signal||Ge(e)?iM(e,t):t.objectProperty(e)}function Crn(e,t){return e.signal?t.signalRef(e.signal):bt(e)?{interval:Uc(e.interval),step:Uc(e.step)}:Uc(e)}function Arn(e,t){t.interpolate=Uc(e.type||e),e.gamma!=null&&(t.interpolateGamma=Uc(e.gamma))}function b8e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Et(i)){if(r&&Vt(r,i))return e=Nn({},e,{range:r[i]}),b8e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Px(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:He("Unrecognized scale range value: "+ut(i))}else if(i.scheme){n.scheme=Ge(i.scheme)?iM(i.scheme,t):Uc(i.scheme,t),i.extent&&(n.schemeExtent=iM(i.extent,t)),i.count&&(n.schemeCount=Uc(i.count,t));return}else if(i.step){n.rangeStep=Uc(i.step,t);return}else{if(Px(e.type)&&!Ge(i))return y8e(i,e,t);Ge(i)||He("Unsupported range type: "+ut(i))}return i.map(s=>(Ge(s)?iM:Uc)(s,t))}function Irn(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=UW(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=UW(n[i],i,t));t.addProjection(e.name,r)}function UW(e,t,n){return Ge(e)?e.map(r=>UW(r,t,n)):bt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:He("Unsupported parameter object: "+ut(e)):e}const Hf="top",aT="left",lT="right",$y="bottom",_8e="center",Rrn="vertical",krn="start",Prn="middle",Nrn="end",VW="index",Xie="label",Orn="offset",$x="perc",Drn="perc2",Kc="value",cP="guide-label",Qie="guide-title",Mrn="group-title",$rn="group-subtitle",lve="symbol",sM="gradient",HW="discrete",qW="size",Lrn="shape",Frn="fill",jrn="stroke",Brn="strokeWidth",zrn="strokeDash",Urn="opacity",Jie=[qW,Lrn,Frn,jrn,Brn,zrn,Urn],dP={name:1,style:1,interactive:1},mr={value:0},Xc={value:1},s5="group",w8e="rect",Zie="rule",Vrn="symbol",g_="text";function mR(e){return e.type=s5,e.interactive=e.interactive||!1,e}function Su(e,t){const n=(r,i)=>Bd(e[r],Bd(t[r],i));return n.isVertical=r=>Rrn===Bd(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Bd(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Bd(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Bd(e.columns,Bd(t.columns,+n.isVertical(!0))),n}function E8e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Hrn(e,t,n){const r=t.config.style[n];return r&&r[e]}function o5(e,t,n){return`item.anchor === '${krn}' ? ${e} : item.anchor === '${Nrn}' ? ${t} : ${n}`}const ese=o5(ut(aT),ut(lT),ut(_8e));function qrn(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},bt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function x8e(e,t){return t?e?bt(e)?Object.assign({},e,{offset:x8e(e.offset,t)}):{value:e,offset:t}:t:e}function dc(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=oT(e.encode,t,dP)):e.interactive=!1,e}function Wrn(e,t,n,r){const i=Su(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let l,u,c,d,f;s?(u=[0,1],c=[0,0],d=o,f=a):(u=[0,0],c=[1,0],d=a,f=o);const h={enter:l={opacity:mr,x:mr,y:mr,width:_o(d),height:_o(f)},update:Nn({},l,{opacity:Xc,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:mr}};return ea(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),dc({type:w8e,role:bnn,encode:h},r)}function Grn(e,t,n,r,i){const s=Su(e,n),o=s.isVertical(),a=s.gradientThickness(),l=s.gradientLength();let u,c,d,f,h="";o?(u="y",d="y2",c="x",f="width",h="1-"):(u="x",d="x2",c="y",f="height");const p={opacity:mr,fill:{scale:t,field:Kc}};p[u]={signal:h+"datum."+$x,mult:l},p[c]=mr,p[d]={signal:h+"datum."+Drn,mult:l},p[f]=_o(a);const m={enter:p,update:Nn({},p,{opacity:Xc}),exit:{opacity:mr}};return ea(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),dc({type:w8e,role:ynn,key:Kc,from:i,encode:m},r)}const Yrn=`datum.${$x}<=0?"${aT}":datum.${$x}>=1?"${lT}":"${_8e}"`,Krn=`datum.${$x}<=0?"${$y}":datum.${$x}>=1?"${Hf}":"${Prn}"`;function uve(e,t,n,r){const i=Su(e,t),s=i.isVertical(),o=_o(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,c,d,f,h="";const p={enter:u={opacity:mr},update:c={opacity:Xc,text:{field:Xie}},exit:{opacity:mr}};return ea(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Bd(e.labelLimit,t.gradientLabelLimit)}),s?(u.align={value:"left"},u.baseline=c.baseline={signal:Krn},d="y",f="x",h="1-"):(u.align=c.align={signal:Yrn},u.baseline={value:"top"},d="x",f="y"),u[d]=c[d]={signal:h+"datum."+$x,mult:a},u[f]=c[f]=o,o.offset=Bd(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+VW}:void 0,dc({type:g_,role:i8e,style:cP,key:Kc,from:r,encode:p,overlap:l},n)}function Xrn(e,t,n,r,i){const s=Su(e,t),o=n.entries,a=!!(o&&o.interactive),l=o?o.name:void 0,u=s("clipHeight"),c=s("symbolOffset"),d={data:"value"},f=`(${i}) ? datum.${Orn} : datum.${qW}`,h=u?_o(u):{field:qW},p=`datum.${VW}`,m=`max(1, ${i})`;let g,y,v,_,w;h.mult=.5,g={enter:y={opacity:mr,x:{signal:f,mult:.5,offset:c},y:h},update:v={opacity:Xc,x:y.x,y:y.y},exit:{opacity:mr}};let E=null,S=null;e.fill||(E=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),ea(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Jie.forEach(P=>{e[P]&&(v[P]=y[P]={scale:e[P],field:Kc})});const x=dc({type:Vrn,role:_nn,key:Kc,from:d,clip:u?!0:void 0,encode:g},n.symbols),T=_o(c);T.offset=s("labelOffset"),g={enter:y={opacity:mr,x:{signal:f,offset:T},y:h},update:v={opacity:Xc,text:{field:Xie},x:y.x,y:y.y},exit:{opacity:mr}},ea(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const I=dc({type:g_,role:i8e,style:cP,key:Kc,from:d,encode:g},n.labels);return g={enter:{noBound:{value:!u},width:mr,height:u?_o(u):mr,opacity:mr},exit:{opacity:mr},update:v={opacity:Xc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${_}`,v.column.signal=`floor(${p} / ${_})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:VW}},mR({role:Gie,from:r,encode:oT(g,o,dP),marks:[x,I],name:l,interactive:a,sort:w})}function Qrn(e,t){const n=Su(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const tse='item.orient === "left"',nse='item.orient === "right"',a5=`(${tse} || ${nse})`,Jrn=`datum.vgrad && ${a5}`,Zrn=o5('"top"','"bottom"','"middle"'),ein=o5('"right"','"left"','"center"'),tin=`datum.vgrad && ${nse} ? (${ein}) : (${a5} && !(datum.vgrad && ${tse})) ? "left" : ${ese}`,nin=`item._anchor || (${a5} ? "middle" : "start")`,rin=`${Jrn} ? (${tse} ? -90 : 90) : 0`,iin=`${a5} ? (datum.vgrad ? (${nse} ? "bottom" : "top") : ${Zrn}) : "top"`;function sin(e,t,n,r){const i=Su(e,t),s={enter:{opacity:mr},update:{opacity:Xc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:mr}};return ea(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:nin},angle:{signal:rin},align:{signal:tin},baseline:{signal:iin},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),dc({type:g_,role:wnn,style:Qie,from:r,encode:s},n)}function oin(e,t){let n;return bt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+cve(e.path)+")":e.sphere&&(n="geoShape("+cve(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function cve(e){return bt(e)&&e.signal?e.signal:ut(e)}function S8e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===s5?Gie:t||qie}function ain(e){return{marktype:e.type,name:e.name||void 0,role:e.role||S8e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function lin(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function rse(e,t){const n=u6e(e.type);n||He("Unrecognized transform type: "+ut(e.type));const r=n5(n.type.toLowerCase(),null,T8e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function T8e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=uin(o,t,n)}return r}function uin(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return cin(e,t,n);if(i===void 0){e.required&&He("Missing required "+ut(t.type)+" parameter: "+ut(e.name));return}else{if(r==="param")return din(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!no(i)?i.map(s=>dve(e,s,n)):dve(e,i,n)}function dve(e,t,n){const r=e.type;if(no(t))return hve(r)?He("Expression references can not be signals."):ez(r)?n.fieldRef(t):pve(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||ez(r);return i&&fin(t)?n.exprRef(t.expr,t.as):i&&hin(t)?hR(t.field,t.as):hve(r)?dp(t,n):pin(r)?Bt(n.getData(t).values):ez(r)?hR(t):pve(r)?n.compareRef(t):t}}function cin(e,t,n){return Et(t.from)||He('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function din(e,t,n){const r=t[e.name];return e.array?(Ge(r)||He("Expected an array of sub-parameters. Instead: "+ut(r)),r.map(i=>fve(e,i,n))):fve(e,r,n)}function fve(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||He("Unsupported parameter: "+ut(t));const s=Nn(T8e(i,t,n),i.key);return Bt(n.add(lrn(s)))}const fin=e=>e&&e.expr,hin=e=>e&&e.field,pin=e=>e==="data",hve=e=>e==="expr",ez=e=>e==="field",pve=e=>e==="compare";function min(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||He("Only group marks can be faceted."),r.field!=null?o=a=oM(r,n):(e.data?a=Bt(n.getData(e.data).aggregate):(s=rse(Nn({type:"aggregate",groupby:wt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=oM(r,n),o=a=Bt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Bt(n.add(Vf(null,[{}]))),o||(o=oM(e,n)),{key:i,pulse:o,parent:a}}function oM(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Bt(t.getData(e.data).output)}function Nb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Nb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Bt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new Nb(e,s,i,r,o)};function C8e(e){return Et(e)?e:null}function mve(e,t,n){const r=r5(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function yC(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),l=Fnn(s);let u=C8e(i),c,d;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=a[u]),!c){const f=s?{field:BW,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Bt(t.output)};l&&(f.sort=e.sortRef(s)),d=e.add(n5(r,void 0,f)),o&&(t.index[i]=d),c=Bt(d),u!=null&&(a[u]=c)}return c}Nb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=C8e(t);let o,a,l;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&mve(e,o.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Bt(r.output)},n&&n.field&&mve(e,l,n),a=e.add(c8e(l)),o=e.add(Vf({pulse:Bt(a)})),o={agg:a,ref:Bt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Bt(this.values)},extentRef(e,t){return yC(e,this,"extent","extent",t,!1)},domainRef(e,t){return yC(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return yC(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return yC(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return yC(e,this,"indata","tupleindex",t,!0,!0)}};function gin(e,t,n){const r=e.from.facet,i=r.name,s=oM(r,t);let o;r.name||He("Facet must have a name: "+ut(r)),r.data||He("Facet must reference a data set: "+ut(r)),r.field?o=t.add(h8e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(Znn({key:t.keyRef(r.groupby),group:Bt(t.proxy(n.parent)),pulse:s})):He("Facet must specify groupby or field: "+ut(r));const a=t.fork(),l=a.add(Vf()),u=a.add(m_({pulse:Bt(l)}));a.addData(i,new Nb(a,l,l,u)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function yin(e,t,n){const r=t.add(h8e({pulse:n.pulse})),i=t.fork();i.add(m_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function A8e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,l=t.add(AL()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(d=>d??"null").join(",")+"),0)",c=dp(u,t);l.update=c.$expr,l.params=c.$params}function l5(e,t){const n=S8e(e),r=e.type===s5,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Gie||n===Wie,a,l,u,c,d,f,h;const p=n===qie||o||i,m=min(e.from,r,t);l=t.add(Qnn({key:m.key||(e.key?hR(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Bt(l);l=u=t.add(Vf({pulse:g})),l=t.add(irn({markdef:ain(e),interactive:lin(e.interactive,t),clip:oin(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Bt(l)}));const y=Bt(l);l=c=t.add(f8e(l8e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const x=rse(S,t),T=x.metadata;(T.generates||T.changes)&&He("Mark transforms should not generate new data."),T.nomod||(c.params.mod=!0),x.params.pulse=Bt(l),t.add(l=x)}),e.sort&&(l=t.add(hrn({sort:t.compareRef(e.sort),pulse:Bt(l)})));const v=Bt(l);(i||o)&&(o=t.add(m8e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),f=Bt(o));const _=t.add(d8e({mark:y,pulse:f||v}));h=Bt(_),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,f||h,g),i?gin(e,t,m):p?yin(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(_))),s&&(h=vin(s,h,t));const w=t.add(p8e({pulse:h})),E=t.add(m_({pulse:Bt(w)},void 0,t.parent()));e.name!=null&&(d=e.name,t.addData(d,new Nb(t,u,w,E)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&He("Marks only support modify triggers."),A8e(S,t,d)}))}function vin(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:no(s)?n.signalRef(s.signal):s,method:no(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=no(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Bt(n.add(arn(o)))}function bin(e,t){const n=t.config.legend,r=e.encode||{},i=Su(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,l=s.style,u={};let c=0,d,f,h;Jie.forEach(_=>e[_]?(u[_]=e[_],c=c||e[_]):0),c||He("Missing valid scale for legend.");const p=_in(e,t.scaleType(c)),m={title:e.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Bt(t.add(Vf(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Bt(t.add(nrn(f={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===sM?(h=[Wrn(e,c,n,r.gradient),uve(e,n,r.labels,v)],f.count=f.count||t.signalRef(`max(2,2*floor((${Y1(i.gradientLength())})/100))`)):p===HW?h=[Grn(e,c,n,r.gradient,v),uve(e,n,r.labels,v)]:(d=Qrn(e,n),h=[Xrn(e,n,r,v,Y1(d.columns))],f.size=xin(e,t,h[0].marks)),h=[mR({role:vnn,from:g,encode:y,marks:h,layout:d,interactive:a})],m.title&&h.push(sin(e,n,r.title,g)),l5(mR({role:gnn,from:g,encode:oT(Ein(i,e,n),s,dP),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:l}),t)}function _in(e,t){let n=e.type||lve;return!e.type&&win(e)===1&&(e.fill||e.stroke)&&(n=pre(t)?sM:sW(t)?HW:lve),n!==sM?n:sW(t)?HW:sM}function win(e){return Jie.reduce((t,n)=>t+(e[n]?1:0),0)}function Ein(e,t,n){const r={enter:{},update:{}};return ea(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function xin(e,t,n){const r=Y1(gve("size",e,n)),i=Y1(gve("strokeWidth",e,n)),s=Y1(Sin(n[1].encode,t,cP));return dp(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function gve(e,t,n){return t[e]?`scale("${t[e]}",datum)`:E8e(e,n[0].encode)}function Sin(e,t,n){return E8e("fontSize",e)||Hrn("fontSize",t,n)}const Tin=`item.orient==="${aT}"?-90:item.orient==="${lT}"?90:0`;function Cin(e,t){e=Et(e)?{text:e}:e;const n=Su(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,l=[],u={},c=Bt(t.add(Vf(null,[u])));return l.push(Rin(e,n,Ain(e),c)),e.subtitle&&l.push(kin(e,n,r.subtitle,c)),l5(mR({role:Enn,from:c,encode:Iin(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function Ain(e){const t=e.encode;return t&&t.title||Nn({name:e.name,interactive:e.interactive,style:e.style},t)}function Iin(e,t){const n={enter:{},update:{}};return ea(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:ese},angle:{signal:Tin},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),oT(n,t,dP)}function Rin(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ea(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),dc({type:g_,role:xnn,style:Mrn,from:r,encode:o},n)}function kin(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ea(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),dc({type:g_,role:Snn,style:$rn,from:r,encode:o},n)}function Pin(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(rse(r,t))}),e.on&&e.on.forEach(r=>{A8e(r,t,e.name)}),t.addDataPipeline(e.name,Nin(e,t,n))}function Nin(e,t,n){const r=[];let i=null,s=!1,o=!1,a,l,u,c,d;for(e.values?no(e.values)||rM(e.format)?(r.push(yve(t,e)),r.push(i=Fv())):r.push(i=Fv({$ingest:e.values,$format:e.format})):e.url?rM(e.url)||rM(e.format)?(r.push(yve(t,e)),r.push(i=Fv())):r.push(i=Fv({$request:e.url,$format:e.format})):e.source&&(i=a=wt(e.source).map(f=>Bt(t.getData(f).output)),r.push(null)),l=0,u=n.length;l<u;++l)c=n[l],d=c.metadata,!i&&!d.source&&r.push(i=Fv()),r.push(c),d.generates&&(o=!0),d.modifies&&!o&&(s=!0),d.source?i=c:d.changes&&(i=null);return a&&(u=a.length-1,r[0]=drn({derive:s,pulse:u?a:a[0]}),(s||u)&&r.splice(1,0,Fv())),i||r.push(Fv()),r.push(m_({})),r}function Fv(e){const t=Vf({},e);return t.metadata={source:!0},t}function yve(e,t){return rrn({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const I8e=e=>e===$y||e===Hf,u5=(e,t,n)=>no(e)?$in(e.signal,t,n):e===aT||e===Hf?t:n,wo=(e,t,n)=>no(e)?Din(e.signal,t,n):I8e(e)?t:n,gf=(e,t,n)=>no(e)?Min(e.signal,t,n):I8e(e)?n:t,R8e=(e,t,n)=>no(e)?Lin(e.signal,t,n):e===Hf?{value:t}:{value:n},Oin=(e,t,n)=>no(e)?Fin(e.signal,t,n):e===lT?{value:t}:{value:n},Din=(e,t,n)=>k8e(`${e} === '${Hf}' || ${e} === '${$y}'`,t,n),Min=(e,t,n)=>k8e(`${e} !== '${Hf}' && ${e} !== '${$y}'`,t,n),$in=(e,t,n)=>ise(`${e} === '${aT}' || ${e} === '${Hf}'`,t,n),Lin=(e,t,n)=>ise(`${e} === '${Hf}'`,t,n),Fin=(e,t,n)=>ise(`${e} === '${lT}'`,t,n),k8e=(e,t,n)=>(t=t!=null?_o(t):t,n=n!=null?_o(n):n,vve(t)&&vve(n)?(t=t?t.signal||ut(t.value):null,n=n?n.signal||ut(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Nn({test:e},t)].concat(n||[])),vve=e=>e==null||Object.keys(e).length===1,ise=(e,t,n)=>({signal:`${e} ? (${Kw(t)}) : (${Kw(n)})`}),jin=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${aT}' ? (${Kw(r)}) : `:"")+(n!=null?`${e} === '${$y}' ? (${Kw(n)}) : `:"")+(i!=null?`${e} === '${lT}' ? (${Kw(i)}) : `:"")+(t!=null?`${e} === '${Hf}' ? (${Kw(t)}) : `:"")+"(null)"}),Kw=e=>no(e)?e.signal:e==null?null:ut(e),Bin=(e,t)=>t===0?0:no(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},AE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function nw(e,t,n,r){let i;if(t&&Vt(t,e))return t[e];if(Vt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Qie][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[cP][i]}return null}function bve(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function zin(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,l,u;if(no(o)){const d=bve([n.axisX,n.axisY]),f=bve([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of d)a[u]=wo(o,nw(u,n.axisX,i,r),nw(u,n.axisY,i,r));l={};for(u of f)l[u]=jin(o.signal,nw(u,n.axisTop,i,r),nw(u,n.axisBottom,i,r),nw(u,n.axisLeft,i,r),nw(u,n.axisRight,i,r))}else a=o===Hf||o===$y?n.axisX:n.axisY,l=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||l||s?Nn({},i,a,l,s):i}function Uin(e,t,n,r){const i=Su(e,t),s=e.orient;let o,a;const l={enter:o={opacity:mr},update:a={opacity:Xc},exit:{opacity:mr}};ea(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=_ve(e,0),c=_ve(e,1);return o.x=a.x=wo(s,u,mr),o.x2=a.x2=wo(s,c),o.y=a.y=gf(s,u,mr),o.y2=a.y2=gf(s,c),dc({type:Zie,role:dnn,from:r,encode:l},n)}function _ve(e,t){return{scale:e.scale,range:t}}function Vin(e,t,n,r,i){const s=Su(e,t),o=e.orient,a=e.gridScale,l=u5(o,1,-1),u=Hin(e.offset,l);let c,d,f;const h={enter:c={opacity:mr},update:f={opacity:Xc},exit:d={opacity:mr}};ea(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Kc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=wo(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:Nn(m,{mult:l,offset:u});return c.x=f.x=wo(o,p,g),c.y=f.y=gf(o,p,g),c.x2=f.x2=gf(o,y),c.y2=f.y2=wo(o,y),d.x=wo(o,p),d.y=gf(o,p),dc({type:Zie,role:fnn,key:Kc,from:r,encode:h},n)}function Hin(e,t){if(t!==1)if(!bt(e))e=no(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Nn({},e);for(;n.mult!=null;)if(bt(n.mult))n=n.mult=Nn({},n.mult);else return n.mult=no(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function qin(e,t,n,r,i,s){const o=Su(e,t),a=e.orient,l=u5(a,-1,1);let u,c,d;const f={enter:u={opacity:mr},update:d={opacity:Xc},exit:c={opacity:mr}};ea(f,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=_o(i);h.mult=l;const p={scale:e.scale,field:Kc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return d.y=u.y=wo(a,mr,p),d.y2=u.y2=wo(a,h),c.x=wo(a,p),d.x=u.x=gf(a,mr,p),d.x2=u.x2=gf(a,h),c.y=gf(a,p),dc({type:Zie,role:pnn,key:Kc,from:r,encode:f},n)}function tz(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Win(e,t,n,r,i,s){const o=Su(e,t),a=e.orient,l=e.scale,u=u5(a,-1,1),c=Y1(o("labelFlush")),d=Y1(o("labelFlushOffset")),f=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=_o(i);g.mult=u,g.offset=_o(o("labelPadding")||0),g.offset.mult=u;const y={scale:l,field:Kc,band:.5,offset:x8e(s.offset,o("labelOffset"))},v=wo(a,p?tz(l,c,'"left"','"right"','"center"'):{value:"center"},Oin(a,"left","right")),_=wo(a,R8e(a,"bottom","top"),p?tz(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=tz(l,c,`-(${d})`,d,0);p=p&&d;const E={opacity:mr,x:wo(a,y,g),y:gf(a,y,g)},S={enter:E,update:m={opacity:Xc,text:{field:Xie},x:E.x,y:E.y,align:v,baseline:_},exit:{opacity:mr,x:E.x,y:E.y}};ea(S,{dx:!f&&p?wo(a,w):null,dy:!h&&p?gf(a,w):null}),ea(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:f,baseline:h});const x=o("labelBound");let T=o("labelOverlap");return T=T||x?{separation:o("labelSeparation"),method:T,order:"datum.index",bound:x?{scale:l,orient:a,tolerance:x}:null}:void 0,m.align!==v&&(m.align=AE(m.align,v)),m.baseline!==_&&(m.baseline=AE(m.baseline,_)),dc({type:g_,role:hnn,style:cP,key:Kc,from:r,encode:S,overlap:T},n)}function Gin(e,t,n,r){const i=Su(e,t),s=e.orient,o=u5(s,-1,1);let a,l;const u={enter:a={opacity:mr,anchor:_o(i("titleAnchor",null)),align:{signal:ese}},update:l=Nn({},a,{opacity:Xc,text:_o(e.title)}),exit:{opacity:mr}},c={signal:`lerp(range("${e.scale}"), ${o5(0,1,.5)})`};return l.x=wo(s,c),l.y=gf(s,c),a.angle=wo(s,mr,Bin(o,90)),a.baseline=wo(s,R8e(s,$y,Hf),{value:$y}),l.angle=a.angle,l.baseline=a.baseline,ea(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Yin(i,s,u,n),u.update.align=AE(u.update.align,a.align),u.update.angle=AE(u.update.angle,a.angle),u.update.baseline=AE(u.update.baseline,a.baseline),dc({type:g_,role:mnn,style:Qie,from:r,encode:u},n)}function Yin(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=AE(_o(a),n.update[l]),!1):!xw(l,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?_o(o):wo(t,_o(o),_o(s))}function Kin(e,t){const n=zin(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,l=Su(e,n),u=qrn(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},d=Bt(t.add(Vf({},[c]))),f=Bt(t.add(Xnn({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(Vin(e,n,r.grid,f,u)),c.ticks&&(p=l("tickSize"),h.push(qin(e,n,r.ticks,f,p,u))),c.labels&&(p=c.ticks?p:0,h.push(Win(e,n,r.labels,f,p,u))),c.domain&&h.push(Uin(e,n,r.domain,d)),c.title&&h.push(Gin(e,n,r.title,d)),l5(mR({role:cnn,from:d,encode:oT(Xin(l,e),i,dP),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:o,style:a}),t)}function Xin(e,t){const n={enter:{},update:{}};return ea(n,{orient:e("orient"),offset:e("offset")||0,position:Bd(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function P8e(e,t,n){const r=wt(e.signals),i=wt(e.scales);return n||r.forEach(s=>u8e(s,t)),wt(e.projections).forEach(s=>Irn(s,t)),i.forEach(s=>grn(s,t)),wt(e.data).forEach(s=>Pin(s,t)),i.forEach(s=>yrn(s,t)),(n||r).forEach(s=>Knn(s,t)),wt(e.axes).forEach(s=>Kin(s,t)),wt(e.marks).forEach(s=>l5(s,t)),wt(e.legends).forEach(s=>bin(s,t)),e.title&&Cin(e.title,t),t.parseLambdas(),t}const Qin=e=>oT({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Jin(e,t){const n=t.config,r=Bt(t.root=t.add(AL())),i=Zin(e,n);i.forEach(u=>u8e(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Vf()),o=t.add(f8e(l8e(Qin(e.encode),s5,Wie,e.style,t,{pulse:Bt(s)}))),a=t.add(m8e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Bt(o)}));t.operators.pop(),t.pushState(Bt(o),Bt(a),null),P8e(e,t,i),t.operators.push(a);let l=t.add(d8e({mark:r,pulse:Bt(a)}));return l=t.add(p8e({pulse:Bt(l)})),l=t.add(m_({pulse:Bt(l)})),t.addData("root",new Nb(t,s,s,l)),t}function vC(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Zin(e,t){const n=o=>Bd(e[o],t[o]),r=[vC("background",n("background")),vC("autosize",ann(n("autosize"))),vC("padding",unn(n("padding"))),vC("width",n("width")||0),vC("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return wt(e.signals).forEach(o=>{Vt(i,o.name)?o=Nn(i[o.name],o):r.push(o),s[o.name]=o}),wt(t.signals).forEach(o=>{!Vt(s,o.name)&&!Vt(i,o.name)&&r.push(o)}),r}function N8e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function wve(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}N8e.prototype=wve.prototype={parse(e){return P8e(e,this)},fork(){return new wve(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof jW?Bt(e):e;return this.add(crn({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Bt(this.add(m_({pulse:e})))),this._parent.push(t),this._lookup.push(n?Bt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return cr(this._parent)},encode(){return cr(this._encode)},lookup(){return cr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Et(e))return hR(e,t);e.signal||He("Unsupported field reference: "+ut(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Bt(this.add(ern(i)))}return r},compareRef(e){let t=!1;const n=s=>no(s)?(t=!0,this.signalRef(s.signal)):jnn(s)?(t=!0,this.exprRef(s.expr)):s,r=wt(e.field).map(n),i=wt(e.order).map(n);return t?Bt(this.add(ave({fields:r,orders:i}))):sve(r,i)},keyRef(e,t){let n=!1;const r=s=>no(s)?(n=!0,Bt(i[s.signal])):s,i=this.signals;return e=wt(e).map(r),n?Bt(this.add(trn({fields:e,flat:t}))):Mnn(e,t)},sortRef(e){if(!e)return e;const t=r5(e.op,e.field),n=e.order||$nn;return n.signal?Bt(this.add(ave({fields:t,orders:this.signalRef(n.signal)}))):sve(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Vt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&He("Duplicate signal name: "+ut(e));const n=t instanceof jW?t:this.add(AL(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||He("Unrecognized signal name: "+ut(e)),this.signals[e]},signalRef(e){return this.signals[e]?Bt(this.signals[e]):(Vt(this.lambdas,e)||(this.lambdas[e]=this.add(AL(null))),Bt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=dp(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!bt(e)?e:this.signalRef(e.signal||sse(e))},exprRef(e,t){const n={expr:dp(e,this)};return t&&(n.expr.$name=t),Bt(this.add(Jnn(n)))},addBinding(e,t){this.bindings||He("Nested signals do not support binding: "+ut(e)),this.bindings.push(Nn({signal:e},t))},addScaleProj(e,t){Vt(this.scales,e)&&He("Duplicate scale or projection name: "+ut(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,frn(t))},addProjection(e,t){this.addScaleProj(e,urn(t))},getScale(e){return this.scales[e]||He("Unrecognized scale name: "+ut(e)),this.scales[e]},scaleRef(e){return Bt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Vt(this.data,e)&&He("Duplicate data set name: "+ut(e)),this.data[e]=t},getData(e){return this.data[e]||He("Undefined data set name: "+ut(e)),this.data[e]},addDataPipeline(e,t){return Vt(this.data,e)&&He("Duplicate data set name: "+ut(e)),this.addData(e,Nb.fromEntries(this,t))}};function sse(e){return(Ge(e)?esn:tsn)(e)}function esn(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(bt(i)?i.signal||sse(i):ut(i))}return n+"]"}function tsn(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+ut(r)+":"+(bt(i)?i.signal||sse(i):ut(i));return t+"}"}function nsn(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function rsn(e,t,n){return bt(e)||He("Input Vega specification must be an object."),t=JS(nsn(),t,e.config),Jin(e,new N8e(t,n)).toRuntime()}var isn="5.30.0";Nn(Ix,rWt,qKt,xXt,eQt,aQt,DQt,hQt,$Qt,BQt,XQt,rJt);const ssn=Object.freeze(Object.defineProperty({__proto__:null,Bounds:$s,CanvasHandler:sP,CanvasRenderer:mL,DATE:mu,DAY:Ia,DAYOFYEAR:cp,Dataflow:CE,Debug:rFe,Error:Zte,EventStream:Tj,Gradient:_4e,GroupItem:Fj,HOURS:lc,Handler:jre,HybridHandler:dje,HybridRenderer:gW,Info:nFe,Item:Lj,MILLISECONDS:Af,MINUTES:uc,MONTH:Oa,Marks:cc,MultiPulse:bne,None:tFe,Operator:di,Parameters:Sj,Pulse:Z0,QUARTER:pu,RenderType:I0,Renderer:iP,ResourceLoader:A4e,SECONDS:ad,SVGHandler:J4e,SVGRenderer:qre,SVGStringRenderer:cje,Scenegraph:H4e,TIME_UNITS:dne,Transform:Me,View:X5e,WEEK:Xs,Warn:ene,YEAR:Yo,accessor:xu,accessorFields:Na,accessorName:fs,array:wt,ascending:vj,bandwidthNRD:xne,bin:f6e,bootstrapCI:h6e,boundClip:wje,boundContext:eP,boundItem:dW,boundMark:B4e,boundStroke:xg,changeset:f_,clampRange:pFe,codegenExpression:x5e,compare:sne,constant:Ba,cumulativeLogNormal:Rne,cumulativeNormal:Aj,cumulativeUniform:One,dayofyear:CFe,debounce:one,defaultLocale:pne,definition:u6e,densityLogNormal:Ine,densityNormal:Sne,densityUniform:Nne,domChild:Gs,domClear:Oc,domCreate:C0,domFind:Fre,dotbin:p6e,error:He,expressionFunction:Rs,extend:Nn,extent:up,extentIndex:mFe,falsy:Yg,fastmap:eT,field:sd,flush:gFe,font:Vj,fontFamily:rP,fontSize:Rp,format:zD,formatLocale:nL,formats:yne,hasOwnProperty:Vt,id:Uk,identity:ja,inferType:JFe,inferTypes:ZFe,ingest:Dr,inherits:ht,inrange:Ww,interpolate:mre,interpolateColors:Mj,interpolateRange:o4e,intersect:yje,intersectBoxLine:Gw,intersectPath:xre,intersectPoint:Sre,intersectRule:R4e,isArray:Ge,isBoolean:pv,isDate:J0,isFunction:On,isIterable:yFe,isNumber:xr,isObject:bt,isRegExp:vFe,isString:Et,isTuple:Ej,key:ane,lerp:bFe,lineHeight:Oy,loader:_j,locale:XFe,logger:tne,lruCache:_Fe,markup:Hre,merge:wFe,mergeConfig:JS,multiLineOffset:Mre,one:QS,pad:EFe,panLinear:lFe,panLog:uFe,panPow:cFe,panSymlog:dFe,parse:rsn,parseExpression:Nie,parseSelector:gv,path:F6,pathCurves:_re,pathEqual:Eje,pathParse:Nx,pathRectangle:x4e,pathRender:sR,pathSymbols:E4e,pathTrail:S4e,peek:cr,point:qj,projection:rie,quantileLogNormal:kne,quantileNormal:Ij,quantileUniform:Dne,quantiles:wne,quantizeInterpolator:a4e,quarter:fFe,quartiles:Ene,get random(){return ld},randomInteger:aqt,randomKDE:Cne,randomLCG:oqt,randomLogNormal:g6e,randomMixture:y6e,randomNormal:Tne,randomUniform:v6e,read:n6e,regressionConstant:Mne,regressionExp:_6e,regressionLinear:$ne,regressionLoess:x6e,regressionLog:b6e,regressionPoly:E6e,regressionPow:w6e,regressionQuad:Lne,renderModule:Wj,repeat:l2,resetDefaultLocale:rHt,resetSVGClipId:C4e,resetSVGDefIds:uKt,responseType:t6e,runtimeContext:L5e,sampleCurve:kj,sampleLogNormal:Ane,sampleNormal:Cj,sampleUniform:Pne,scale:Rr,sceneEqual:Wre,sceneFromJSON:U4e,scenePickVisit:aL,sceneToJSON:z4e,sceneVisit:If,sceneZOrder:Tre,scheme:gre,serializeXML:oje,setHybridRendererOptions:sKt,setRandom:iqt,span:Vk,splitAccessPath:Ip,stringValue:ut,textMetrics:Gu,timeBin:VFe,timeFloor:OFe,timeFormatLocale:nR,timeInterval:tT,timeOffset:$Fe,timeSequence:jFe,timeUnitSpecifier:TFe,timeUnits:fne,toBoolean:lne,toDate:une,toNumber:Ra,toSet:Cf,toString:cne,transform:c6e,transforms:Ix,truncate:xFe,truthy:od,tupleid:zt,typeParsers:nW,utcFloor:DFe,utcInterval:nT,utcOffset:LFe,utcSequence:BFe,utcdayofyear:RFe,utcquarter:hFe,utcweek:kFe,version:isn,visitArray:n0,week:AFe,writeConfig:ZS,zero:g0,zoomLinear:nne,zoomLog:rne,zoomPow:tL,zoomSymlog:ine},Symbol.toStringTag,{value:"Module"}));function osn(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var asn={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},lsn={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},usn={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const csn=Array.prototype.slice,jv=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,csn.call(t,1))},dsn=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var fsn={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:dsn,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return jv("join",arguments)},indexof:function(){return jv("indexOf",arguments)},lastindexof:function(){return jv("lastIndexOf",arguments)},slice:function(){return jv("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return jv("substring",arguments,String)},split:function(){return jv("split",arguments,String)},replace:function(){return jv("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const hsn=["view","item","group","xy","x","y"],WW=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&WW.add(setImmediate);const psn={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:asn[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),WW.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||fsn[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>lsn[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>usn[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,WW.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function bC(e,t,n,r,i,s){const o=a=>psn[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,hsn.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var msn={operator(e,t){const n=t.ast,r=e.functions;return i=>bC(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>bC(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>bC(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return bC(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const l=o.datum;let u=0,c;for(const d in r)c=bC(r[d].ast,i,a,l,void 0,o),o[d]!==c&&(o[d]=c,u=1);return n!=="rule"&&osn(o,r,s),u}}};const gsn="vega-lite",ysn='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',vsn="5.19.0",bsn=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],_sn="https://vega.github.io/vega-lite/",wsn="Vega-Lite is a concise high-level language for interactive visualization.",Esn=["vega","chart","visualization"],xsn="build/vega-lite.js",Ssn="build/vega-lite.min.js",Tsn="build/vega-lite.min.js",Csn="build/src/index",Asn="build/src/index.d.ts",Isn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},Rsn=["bin","build","src","vega-lite*","tsconfig.json"],ksn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Psn={type:"git",url:"https://github.com/vega/vega-lite.git"},Nsn="BSD-3-Clause",Osn={url:"https://github.com/vega/vega-lite/issues"},Dsn={"@babel/core":"^7.24.7","@babel/preset-env":"^7.24.7","@babel/preset-typescript":"^7.24.7","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.13.0","@typescript-eslint/parser":"^7.13.0",ajv:"^8.16.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.2",puppeteer:"^15.0.0","release-it":"17.2.1",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.1","ts-jest":"^29.1.4","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},Msn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.3","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},$sn={vega:"^5.24.0"},Lsn={node:">=18"},Fsn="yarn@1.22.19",jsn={name:gsn,author:ysn,version:vsn,collaborators:bsn,homepage:_sn,description:wsn,keywords:Esn,main:xsn,unpkg:Ssn,jsdelivr:Tsn,module:Csn,types:Asn,bin:Isn,files:Rsn,scripts:ksn,repository:Psn,license:Nsn,bugs:Osn,devDependencies:Dsn,dependencies:Msn,peerDependencies:$sn,engines:Lsn,packageManager:Fsn};function ose(e){return!!e.or}function ase(e){return!!e.and}function lse(e){return!!e.not}function aM(e,t){if(lse(e))aM(e.not,t);else if(ase(e))for(const n of e.and)aM(n,t);else if(ose(e))for(const n of e.or)aM(n,t);else t(e)}function IE(e,t){return lse(e)?{not:IE(e.not,t)}:ase(e)?{and:e.and.map(n=>IE(n,t))}:ose(e)?{or:e.or.map(n=>IE(n,t))}:t(e)}const pn=structuredClone;function O8e(e){throw new Error(e)}function Lx(e,t){const n={};for(const r of t)Vt(e,r)&&(n[r]=e[r]);return n}function ou(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>ei(e)).join(",")})`};function tr(e){if(xr(e))return e;const t=Et(e)?e:ei(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function GW(e){return e===!1||e===null}function Kn(e,t){return e.includes(t)}function Fx(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function use(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function D8e(e,...t){for(const n of t)Bsn(e,n??{});return e}function Bsn(e,t){for(const n of et(t))ZS(e,n,t[n],!0)}function Mh(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function zsn(e,t){const n=et(e),r=et(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function M8e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function cse(e,t){for(const n of e)if(t.has(n))return!0;return!1}function YW(e){const t=new Set;for(const n of e){const i=Ip(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function dse(e,t){return e===void 0||t===void 0?!0:cse(YW(e),YW(t))}function Zr(e){return et(e).length===0}const et=Object.keys,Ko=Object.values,Ly=Object.entries;function gR(e){return e===!0||e===!1}function Bi(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function SA(e,t){return lse(e)?`!(${SA(e.not,t)})`:ase(e)?`(${e.and.map(n=>SA(n,t)).join(") && (")})`:ose(e)?`(${e.or.map(n=>SA(n,t)).join(") || (")})`:t(e)}function IL(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&IL(e[n],t)&&delete e[n],Zr(e)}function fP(e){return e.charAt(0).toUpperCase()+e.substr(1)}function fse(e,t="datum"){const n=Ip(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(ut).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function $8e(e,t="datum"){return`${t}[${ut(Ip(e).join("."))}]`}function Usn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function ud(e){return`${Ip(e).map(Usn).join("\\.")}`}function Ob(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function uT(e){return`${Ip(e).join(".")}`}function jx(e){return e?Ip(e).length:0}function Cs(...e){for(const t of e)if(t!==void 0)return t}let L8e=42;function F8e(e){const t=++L8e;return e?String(e)+t:t}function Vsn(){L8e=42}function j8e(e){return B8e(e)?e:`__${e}`}function B8e(e){return e.startsWith("__")}function yR(e){if(e!==void 0)return(e%360+360)%360}function c5(e){return xr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Eve=Object.getPrototypeOf(structuredClone({}));function qu(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!qu(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!qu(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Eve.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Eve.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!qu(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function ei(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(s&&(s+=","),s+=JSON.stringify(l)+":"+u)}return t.splice(o,1),`{${s}}`}(e)}const Om="row",Dm="column",d5="facet",zi="x",Co="y",qf="x2",Np="y2",yv="xOffset",cT="yOffset",Wf="radius",Tg="radius2",_d="theta",Cg="theta2",Gf="latitude",Yf="longitude",Kf="latitude2",cd="longitude2",gu="color",Op="fill",Dp="stroke",yu="shape",Ag="size",y_="angle",Ig="opacity",vv="fillOpacity",bv="strokeOpacity",_v="strokeWidth",wv="strokeDash",hP="text",Bx="order",pP="detail",f5="key",Db="tooltip",h5="href",p5="url",m5="description",Hsn={x:1,y:1,x2:1,y2:1},z8e={theta:1,theta2:1,radius:1,radius2:1};function U8e(e){return e in z8e}const hse={longitude:1,longitude2:1,latitude:1,latitude2:1};function V8e(e){switch(e){case Gf:return"y";case Kf:return"y2";case Yf:return"x";case cd:return"x2"}}function H8e(e){return e in hse}const qsn=et(hse),pse={...Hsn,...z8e,...hse,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function RE(e){return e===gu||e===Op||e===Dp}const q8e={row:1,column:1,facet:1},Vc=et(q8e),mse={...pse,...q8e},Wsn=et(mse),{order:h0n,detail:p0n,tooltip:m0n,...Gsn}=mse,{row:g0n,column:y0n,facet:v0n,...Ysn}=Gsn;function Ksn(e){return!!Ysn[e]}function W8e(e){return!!mse[e]}const Xsn=[qf,Np,Kf,cd,Cg,Tg];function G8e(e){return v_(e)!==e}function v_(e){switch(e){case qf:return zi;case Np:return Co;case Kf:return Gf;case cd:return Yf;case Cg:return _d;case Tg:return Wf}return e}function Fy(e){if(U8e(e))switch(e){case _d:return"startAngle";case Cg:return"endAngle";case Wf:return"outerRadius";case Tg:return"innerRadius"}return e}function Mp(e){switch(e){case zi:return qf;case Co:return Np;case Gf:return Kf;case Yf:return cd;case _d:return Cg;case Wf:return Tg}}function vu(e){switch(e){case zi:case qf:return"width";case Co:case Np:return"height"}}function Y8e(e){switch(e){case zi:return"xOffset";case Co:return"yOffset";case qf:return"x2Offset";case Np:return"y2Offset";case _d:return"thetaOffset";case Wf:return"radiusOffset";case Cg:return"theta2Offset";case Tg:return"radius2Offset"}}function gse(e){switch(e){case zi:return"xOffset";case Co:return"yOffset"}}function Qsn(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Jsn=et(pse),{x:b0n,y:_0n,x2:w0n,y2:E0n,xOffset:x0n,yOffset:S0n,latitude:T0n,longitude:C0n,latitude2:A0n,longitude2:I0n,theta:R0n,theta2:k0n,radius:P0n,radius2:N0n,...yse}=pse,Zsn=et(yse),vse={x:1,y:1},Rg=et(vse);function As(e){return e in vse}const bse={theta:1,radius:1},eon=et(bse);function g5(e){return e==="width"?zi:Co}const K8e={xOffset:1,yOffset:1};function mP(e){return e in K8e}const{text:O0n,tooltip:D0n,href:M0n,url:$0n,description:L0n,detail:F0n,key:j0n,order:B0n,...X8e}=yse,ton=et(X8e);function non(e){return!!yse[e]}function ron(e){switch(e){case gu:case Op:case Dp:case Ag:case yu:case Ig:case _v:case wv:return!0;case vv:case bv:case y_:return!1}}const Q8e={...vse,...bse,...K8e,...X8e},_se=et(Q8e);function $p(e){return!!Q8e[e]}function ion(e,t){return oon(e)[t]}const J8e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:z0n,...son}=J8e;function oon(e){switch(e){case gu:case Op:case Dp:case m5:case pP:case f5:case Db:case h5:case Bx:case Ig:case vv:case bv:case _v:case d5:case Om:case Dm:return J8e;case zi:case Co:case yv:case cT:case Gf:case Yf:return son;case qf:case Np:case Kf:case cd:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Ag:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case wv:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case yu:return{point:"always",geoshape:"always"};case hP:return{text:"always"};case y_:return{point:"always",square:"always",text:"always"};case p5:return{image:"always"};case _d:return{text:"always",arc:"always"};case Wf:return{text:"always",arc:"always"};case Cg:case Tg:return{arc:"always"}}}function nz(e){switch(e){case zi:case Co:case _d:case Wf:case yv:case cT:case Ag:case y_:case _v:case Ig:case vv:case bv:case qf:case Np:case Cg:case Tg:return;case d5:case Om:case Dm:case yu:case wv:case hP:case Db:case h5:case p5:case m5:return"discrete";case gu:case Op:case Dp:return"flexible";case Gf:case Yf:case Kf:case cd:case pP:case f5:case Bx:return}}const aon={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},lon={count:1,min:1,max:1};function ug(e){return!!e&&!!e.argmin}function Ev(e){return!!e&&!!e.argmax}function wse(e){return Et(e)&&!!aon[e]}const uon=new Set(["count","valid","missing","distinct"]);function y5(e){return Et(e)&&uon.has(e)}function con(e){return Et(e)&&Kn(["min","max"],e)}const don=new Set(["count","sum","distinct","valid","missing"]),fon=new Set(["mean","average","median","q1","q3","min","max"]);function Z8e(e){return pv(e)&&(e=k5(e,void 0)),"bin"+et(e).map(t=>v5(e[t])?Bi(`_${t}_${Ly(e[t])}`):Bi(`_${t}_${e[t]}`)).join("")}function Ei(e){return e===!0||b_(e)&&!e.binned}function Bo(e){return e==="binned"||b_(e)&&e.binned===!0}function b_(e){return bt(e)}function v5(e){return e==null?void 0:e.param}function xve(e){switch(e){case Om:case Dm:case Ag:case gu:case Op:case Dp:case _v:case Ig:case vv:case bv:case yu:return 6;case wv:return 4;default:return 10}}function gP(e){return!!(e!=null&&e.expr)}function xa(e,{level:t}={level:0}){const n=et(e||{}),r={};for(const i of n)r[i]=t===0?Lu(e[i]):xa(e[i],{level:t-1});return r}function eBe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:d,subtitleFontWeight:f,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...d?{subtitleFontStyle:d}:{},...f?{subtitleFontWeight:f}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=Lx(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:_,nonMarkTitleProperties:y,subtitle:v}}function s0(e){return Et(e)||Ge(e)&&Et(e[0])}function Mt(e){return!!(e!=null&&e.signal)}function xv(e){return!!e.step}function hon(e){return Ge(e)?!1:"fields"in e&&!("data"in e)}function pon(e){return Ge(e)?!1:"fields"in e&&"data"in e}function wm(e){return Ge(e)?!1:"field"in e&&"data"in e}const mon={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},gon=et(mon),yon={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},KW=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function tBe(e){const t=Ge(e.condition)?e.condition.map(Sve):Sve(e.condition);return{...Lu(e),condition:t}}function Lu(e){if(gP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Sve(e){if(gP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Ri(e){if(gP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Mt(e)?e:e!==void 0?{value:e}:void 0}function von(e){return Mt(e)?e.signal:ut(e)}function Tve(e){return Mt(e)?e.signal:ut(e.value)}function tf(e){return Mt(e)?e.signal:e==null?null:ut(e)}function bon(e,t,n){for(const r of n){const i=fp(r,t.markDef,t.config);i!==void 0&&(e[r]=Ri(i))}return e}function nBe(e){return[].concat(e.type,e.style??[])}function Wr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:fp(e,t,n,r)}function fp(e,t,n,{vgChannel:r}={}){return Cs(r?RL(e,t,n.style):void 0,RL(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function RL(e,t,n){return rBe(e,nBe(t),n)}function rBe(e,t,n){t=wt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function iBe(e,t){return wt(e).reduce((n,r)=>(n.field.push(pt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function sBe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(qu(i,r))return;n.push(r)}),n}function oBe(e,t){return qu(e,t)||!t?e:e?[...wt(e),...wt(t)].join(", "):t}function aBe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((s0(n)||Mt(n))&&(s0(r)||Mt(r)))return{explicit:e.explicit,value:oBe(n,r)};if(s0(n)||Mt(n))return{explicit:e.explicit,value:n};if(s0(r)||Mt(r))return{explicit:e.explicit,value:r};if(!s0(n)&&!Mt(n)&&!s0(r)&&!Mt(r))return{explicit:e.explicit,value:sBe(n,r)};throw new Error("It should never reach here")}function Ese(e){return`Invalid specification ${ei(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const _on='Autosize "fit" only works for single views and layered views.';function Cve(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Ave(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Ive(e){return e?`Dropping "fit-${e}" because spec has discrete ${vu(e)}.`:'Dropping "fit" because spec has discrete size.'}function xse(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Rve(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function won(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Eon(e){return`The "nearest" transform is not supported for ${e} marks.`}function lBe(e){return`Selection not supported for ${e} yet.`}function xon(e){return`Cannot find a selection named "${e}".`}const Son="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Ton="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Con="Legend bindings are only supported for selections over an individual field or encoding channel.";function Aon(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Ion(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Ron="The same selection must be used to override scale domains in a layered view.",kon='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Pon(e){return`Unknown repeated value "${e}".`}function kve(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Non="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Oon(e){return`Unrecognized parse "${e}".`}function Pve(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Don="Attempt to add the same child twice.";function Mon(e){return`Ignoring an invalid transform: ${ei(e)}.`}const $on='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Nve(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Lon(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${ei(t)} is overridden by a child projection ${ei(n)}.`}const Fon="Arc marks uses theta channel rather than angle, replacing angle with theta.";function jon(e){return`${e}Offset dropped because ${e} is continuous`}function Bon(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${ei(n)}}.`}function uBe(e){return`Invalid field type "${e}".`}function zon(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Uon(e){return`Invalid aggregation operator "${e}".`}function cBe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Von(e){return`Position range does not support relative band size for ${e}.`}function XW(e,t){return`Dropping ${ei(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Hon="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function b5(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function qon(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Won(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Gon(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Yon(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function rz(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Kon(e){return`The ${e} for range marks cannot be an expression`}function Xon(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Qon(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Jon(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Zon(e){return`Cannot use the relative band size with ${e} scale.`}function ean(e){return`Using unaggregated domain with raw field has no effect (${ei(e)}).`}function tan(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function nan(e){return`Unaggregated domain is currently unsupported for log scale (${ei(e)}).`}function ran(e){return`Cannot apply size to non-oriented mark "${e}".`}function ian(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function san(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function dBe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function fBe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function oan(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${ei(n)} and ${ei(r)}). Using ${ei(n)}.`}function aan(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${ei(n)} and ${ei(r)}). Using the union of the two domains.`}function lan(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function uan(e){return`Dropping sort property ${ei(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Ove="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",can="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",dan="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",fan="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function han(e){return`Cannot stack "${e}" if there is already "${e}2".`}function pan(e){return`Stack is applied to a non-linear scale (${e}).`}function man(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function kL(e,t){return`Invalid ${e}: ${ei(t)}.`}function gan(e){return`Dropping day from datetime ${ei(e)} as day cannot be combined with other units.`}function yan(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function van(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function ban(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Dve(e){return`1D error band does not support ${e}.`}function hBe(e){return`Channel ${e} is required for "binned" bin.`}function _an(e){return`Channel ${e} should not be used with "binned" bin.`}function wan(e){return`Domain for ${e} is required for threshold scale.`}const pBe=tne(ene);let zx=pBe;function Ean(e){return zx=e,zx}function xan(){return zx=pBe,zx}function st(...e){zx.warn(...e)}function San(...e){zx.debug(...e)}function __(e){if(e&&bt(e)){for(const t of Tse)if(t in e)return!0}return!1}const mBe=["january","february","march","april","may","june","july","august","september","october","november","december"],Tan=mBe.map(e=>e.substr(0,3)),gBe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Can=gBe.map(e=>e.substr(0,3));function Aan(e){if(c5(e)&&(e=+e),xr(e))return e>4&&st(kL("quarter",e)),e-1;throw new Error(kL("quarter",e))}function Ian(e){if(c5(e)&&(e=+e),xr(e))return e-1;{const t=e.toLowerCase(),n=mBe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Tan.indexOf(r);if(i!==-1)return i;throw new Error(kL("month",e))}}function Ran(e){if(c5(e)&&(e=+e),xr(e))return e%7;{const t=e.toLowerCase(),n=gBe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Can.indexOf(r);if(i!==-1)return i;throw new Error(kL("day",e))}}function Sse(e,t){const n=[];if(t&&e.day!==void 0&&et(e).length>1&&(st(gan(e)),e=pn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Ian(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Aan(e.quarter):e.quarter;n.push(xr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?Ran(e.day):e.day;n.push(xr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Mb(e){const n=Sse(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function kan(e){const n=Sse(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Pan(e){const t=Sse(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const yBe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Tse=et(yBe);function Nan(e){return!!yBe[e]}function w_(e){return bt(e)?e.binned:vBe(e)}function vBe(e){return e&&e.startsWith("binned")}function Cse(e){return e.startsWith("utc")}function Oan(e){return e.substring(3)}const Dan={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function _5(e){return Tse.filter(t=>_Be(e,t))}function bBe(e){const t=_5(e);return t[t.length-1]}function _Be(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Man(e,t,{end:n}={end:!1}){const r=fse(t),i=Cse(e)?"utc":"";function s(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let o;const a={};for(const l of Tse)_Be(e,l)&&(a[l]=s(l),o=l);return n&&(a[o]+="+1"),kan(a)}function wBe(e){if(!e)return;const t=_5(e);return`timeUnitSpecifier(${ei(t)}, ${ei(Dan)})`}function $an(e,t,n){if(!e)return;const r=wBe(e);return`${n||Cse(e)?"utc":"time"}Format(${t}, ${r})`}function xo(e){if(!e)return;let t;return Et(e)?vBe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:bt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Cse(t.unit)&&(t.utc=!0,t.unit=Oan(t.unit)),t}function Lan(e){const{utc:t,...n}=xo(e);return n.unit?(t?"utc":"")+et(n).map(r=>Bi(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+et(n).map(r=>Bi(`_${r}_${n[r]}`)).join("")}function EBe(e,t=n=>n){const n=xo(e),r=bBe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=xBe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(Mb(a))} - ${t(Mb(i))}`}}const Fan={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function jan(e){return!!Fan[e]}function xBe(e,t=1){if(jan(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Ban(e){return e==null?void 0:e.param}function Ase(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Ise(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Rse(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function kse(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Pse(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Nse(e){if(e!=null&&e.field){if(Ge(e.range)&&e.range.length===2)return!0;if(Mt(e.range))return!0}return!1}function Ose(e){return!!(e!=null&&e.field)&&(Ge(e.oneOf)||Ge(e.in))}function zan(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function SBe(e){return Ose(e)||Ase(e)||Nse(e)||Ise(e)||kse(e)||Rse(e)||Pse(e)}function ih(e,t){return P5(e,{timeUnit:t,wrapTime:!0})}function Uan(e,t){return e.map(n=>ih(n,t))}function TBe(e,t=!0){const{field:n}=e,r=xo(e.timeUnit),{unit:i,binned:s}=r||{},o=pt(e,{expr:"datum"}),a=i?`time(${s?o:Man(i,n)})`:o;if(Ase(e))return`${a}===${ih(e.equal,i)}`;if(Ise(e)){const l=e.lt;return`${a}<${ih(l,i)}`}else if(kse(e)){const l=e.gt;return`${a}>${ih(l,i)}`}else if(Rse(e)){const l=e.lte;return`${a}<=${ih(l,i)}`}else if(Pse(e)){const l=e.gte;return`${a}>=${ih(l,i)}`}else{if(Ose(e))return`indexof([${Uan(e.oneOf,i).join(",")}], ${a}) !== -1`;if(zan(e))return w5(a,e.valid);if(Nse(e)){const{range:l}=e,u=Mt(l)?{signal:`${l.signal}[0]`}:l[0],c=Mt(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&t)return"inrange("+a+", ["+ih(u,i)+", "+ih(c,i)+"])";const d=[];return u!==null&&d.push(`${a} >= ${ih(u,i)}`),c!==null&&d.push(`${a} <= ${ih(c,i)}`),d.length>0?d.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${ei(e)}`)}function w5(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Van(e){return SBe(e)&&e.timeUnit?{...e,timeUnit:xo(e.timeUnit)}:e}const yP={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Han(e){return e==="quantitative"||e==="temporal"}function CBe(e){return e==="ordinal"||e==="nominal"}const $b=yP.quantitative,Dse=yP.ordinal,Ux=yP.temporal,Mse=yP.nominal,dT=yP.geojson;function qan(e){if(e)switch(e=e.toLowerCase(),e){case"q":case $b:return"quantitative";case"t":case Ux:return"temporal";case"o":case Dse:return"ordinal";case"n":case Mse:return"nominal";case dT:return"geojson"}}const Uo={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},QW={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Wan(e,t){const n=QW[e],r=QW[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Gan={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Mve(e){return Gan[e]}const ABe=new Set(["linear","log","pow","sqrt","symlog"]),IBe=new Set([...ABe,"time","utc"]);function RBe(e){return ABe.has(e)}const kBe=new Set(["quantile","quantize","threshold"]),Yan=new Set([...IBe,...kBe,"sequential","identity"]),Kan=new Set(["ordinal","bin-ordinal","point","band"]);function So(e){return Kan.has(e)}function Rf(e){return Yan.has(e)}function $h(e){return IBe.has(e)}function Vx(e){return kBe.has(e)}const Xan={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function Qan(e){return!Et(e)&&!!e.name}function PBe(e){return e==null?void 0:e.param}function Jan(e){return e==null?void 0:e.unionWith}function Zan(e){return bt(e)&&"field"in e}const eln={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:U0n,domain:V0n,range:H0n,rangeMax:q0n,rangeMin:W0n,scheme:G0n,...tln}=eln,nln=et(tln);function JW(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return $h(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return $h(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return $h(e);case"nice":return $h(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Rf(e)&&!Kn(["log","time","utc","threshold","quantile"],e)}}function NBe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return RE(e)?void 0:Jon(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function rln(e,t){return Kn([Dse,Mse],t)?e===void 0||So(e):t===Ux?Kn([Uo.TIME,Uo.UTC,void 0],e):t===$b?RBe(e)||Vx(e)||e===void 0:!0}function iln(e,t,n=!1){if(!$p(e))return!1;switch(e){case zi:case Co:case yv:case cT:case _d:case Wf:return $h(t)||t==="band"?!0:t==="point"?!n:!1;case Ag:case _v:case Ig:case vv:case bv:case y_:return $h(t)||Vx(t)||Kn(["band","point","ordinal"],t);case gu:case Op:case Dp:return t!=="band";case wv:case yu:return t==="ordinal"||Vx(t)}}function sln(e){return bt(e)&&"value"in e}const Cl={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},OBe=Cl.arc,E5=Cl.area,x5=Cl.bar,oln=Cl.image,S5=Cl.line,T5=Cl.point,aln=Cl.rect,PL=Cl.rule,DBe=Cl.text,$se=Cl.tick,lln=Cl.trail,Lse=Cl.circle,Fse=Cl.square,MBe=Cl.geoshape;function Sv(e){return["line","area","trail"].includes(e)}function vR(e){return["rect","bar","image","arc"].includes(e)}const uln=new Set(et(Cl));function hp(e){return e.type}const cln=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],dln=["fill","fillOpacity"],fln=[...cln,...dln],hln={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},$ve=et(hln),pln={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},mln={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},gln={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},$Be=et(gln);function Lb(e){return e&&e.band!=null}const yln={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},LBe=5,vln={binSpacing:1,continuousBandSize:LBe,minBandSize:.25,timeUnitBandPosition:.5},bln={binSpacing:0,continuousBandSize:LBe,minBandSize:.25,timeUnitBandPosition:.5},_ln={thickness:1};function wln(e){return hp(e)?e.type:e}function FBe(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function jse({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!Rf(r)||i)return"always-valid";const s=FBe(Wr("invalid",e,t),{isPath:Sv(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":s}function Eln(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function jBe({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function BBe({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var c;const o=n==null?void 0:n.get("type"),a=Pf(t),l=y5(a==null?void 0:a.aggregate),u=jse({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:l});if(a&&u==="show"){const d=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:w5(pt(a,{expr:"datum"}),!1),...xln(d,n,r)}}}function xln(e,t,n){if(sln(e)){const{value:r}=e;return Mt(r)?{signal:r.signal}:{value:r}}return jBe({scale:t,scaleName:n,mode:"zeroOrMin"})}function Bse(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=v_(t),l=zse(e),u=BBe({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return u!==void 0?[u,l]:l}function Sln(e){const{datum:t}=e;return __(t)?Mb(t):`${ei(t)}`}function K1(e,t,n,r){const i={};if(t&&(i.scale=t),Lp(e)){const{datum:s}=e;__(s)?i.signal=Mb(s):Mt(s)?i.signal=s.signal:gP(s)?i.signal=s.expr:i.value=s}else i.field=pt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function NL({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Mt(o)&&0<o&&o<1?"datum":void 0,l=pt(t,{expr:a,suffix:i}),u=n!==void 0?pt(n,{expr:a}):pt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const d=o===0?l:u;c.field=d}else{const d=Mt(o)?`(1-${o.signal}) * ${l} + ${o.signal} * ${u}`:`${1-o} * ${l} + ${o} * ${u}`;c.signal=`scale("${e}", ${d})`}return r&&(c.offset=r),c}function Tln({scaleName:e,fieldDef:t}){const n=pt(t,{expr:"datum"}),r=pt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function zse({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(t){if(En(t)){const d=o==null?void 0:o.get("type");if(bl(t)){c??(c=jy({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:f,timeUnit:h,type:p}=t;if(Ei(f)||c&&h&&p===Ux)return a!=null&&a.impute?K1(t,s,{binSuffix:"mid"},{offset:l}):c&&!So(d)?NL({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:l}):K1(t,s,wP(t,e)?{binSuffix:"range"}:{},{offset:l});if(Bo(f)){if(ot(n))return NL({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});st(hBe(e===zi?qf:Np))}}return K1(t,s,So(d)?{binSuffix:"range"}:{},{offset:l,band:d==="band"?c??t.bandPosition??.5:void 0})}else if(kf(t)){const d=t.value,f=l?{offset:l}:{};return{...TA(e,d),...f}}}return On(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function TA(e,t){return Kn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Kn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Ri(t)}function Fb(e){return e&&e!=="number"&&e!=="time"}function zBe(e,t,n){return`${e}(${t}${n?`, ${ei(n)}`:""})`}const Cln="  ";function Use({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var l,u;if(Fb(n))return nf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=UBe(e,r,i),a=Hx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return nf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return nf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&ot(e)&&e.timeUnit===void 0)return nf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(Wx(e)){const c=Iln({field:o,timeUnit:ot(e)?(l=xo(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:E_(e)&&((u=e.scale)==null?void 0:u.type)===Uo.UTC});return c?{signal:c}:void 0}if(t=ZW({type:a,specifiedFormat:t,config:s,normalizeStack:i}),ot(e)&&Ei(e.bin)){const c=pt(e,{expr:r,binSuffix:"end"});return{signal:vP(o,c,t,n,s)}}else return t||Hx(e)==="quantitative"?{signal:`${qBe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function UBe(e,t,n){return ot(e)?n?`${pt(e,{expr:t,suffix:"end"})}-${pt(e,{expr:t,suffix:"start"})}`:pt(e,{expr:t}):Sln(e)}function nf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=UBe(e,r,i)),o!=="datum.value"&&ot(e)&&Ei(e.bin)){const a=pt(e,{expr:r,binSuffix:"end"});return{signal:vP(o,a,t,n,s)}}return{signal:zBe(n,o,t)}}function VBe(e,t,n,r,i,s){var o;if(!(Et(r)&&Fb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Hx(e)==="quantitative"&&(i.normalizedNumberFormatType&&qx(e)&&e.stack==="normalize"||i.numberFormatType))){if(qx(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return ZW({type:"quantitative",config:i,normalizeStack:!0});if(Wx(e)){const a=ot(e)?(o=xo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:Aln({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return ZW({type:t,specifiedFormat:n,config:i})}}function HBe(e,t,n){var r;if(e&&(Mt(e)||e==="number"||e==="time"))return e;if(Wx(t)&&n!=="time"&&n!=="utc")return ot(t)&&((r=xo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function ZW({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Et(t))return t;if(e===$b)return r?n.normalizedNumberFormat:n.numberFormat}function Aln({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:wBe(t)}:r?void 0:n.timeFormat)}function qBe(e,t){return`format(${e}, "${t||""}")`}function Lve(e,t,n,r){return Fb(n)?zBe(n,e,t):qBe(e,(Et(t)?t:void 0)??r.numberFormat)}function vP(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return vP(e,t,i.numberFormat,i.numberFormatType,i);const s=Lve(e,n,r,i),o=Lve(t,n,r,i);return`${w5(e,!1)} ? "null" : ${s} + "${Cln}" + ${o}`}function Iln({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Et(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):$an(t,e,s)}const C5="min",Rln={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Fve(e){return e in Rln}function kln(e){return!!(e!=null&&e.encoding)}function Mm(e){return e&&(e.op==="count"||!!e.field)}function WBe(e){return e&&Ge(e)}function bP(e){return"row"in e||"column"in e}function Vse(e){return!!e&&"header"in e}function A5(e){return"facet"in e}function Pln(e){return e.param}function Nln(e){return e&&!Et(e)&&"repeat"in e}function jve(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Hse(e){return"sort"in e}function jy({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(En(e)&&e.bandPosition!==void 0)return e.bandPosition;if(ot(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return fp("timeUnitBandPosition",n,r);if(Ei(s))return .5}}function GBe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var u,c,d;const a=vu(e),l=Wr(o?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(ot(t)){const{timeUnit:f,bin:h}=t;if(f&&!n)return{band:fp("timeUnitBandSize",r,i)};if(Ei(h)&&!So(s))return{band:1}}if(vR(r.type))return s?So(s)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(d=i[r.type])==null?void 0:d.discreteBandSize}function YBe(e,t,n,r){return Ei(e.bin)||e.timeUnit&&bl(e)&&e.type==="temporal"?jy({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function KBe(e){return e&&!!e.sort&&!e.field}function I5(e){return e&&"condition"in e}function R5(e){const t=e==null?void 0:e.condition;return!!t&&!Ge(t)&&ot(t)}function _P(e){const t=e==null?void 0:e.condition;return!!t&&!Ge(t)&&En(t)}function Oln(e){const t=e==null?void 0:e.condition;return!!t&&(Ge(t)||kf(t))}function ot(e){return e&&(!!e.field||e.aggregate==="count")}function Hx(e){return e==null?void 0:e.type}function Lp(e){return e&&"datum"in e}function N0(e){return bl(e)&&!DL(e)||OL(e)}function Bve(e){return bl(e)&&e.type==="quantitative"&&!e.bin||OL(e)}function OL(e){return Lp(e)&&xr(e.datum)}function En(e){return ot(e)||Lp(e)}function bl(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function kf(e){return e&&"value"in e&&"value"in e}function E_(e){return e&&("scale"in e||"sort"in e)}function qx(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function XBe(e){return e&&"legend"in e}function QBe(e){return e&&("format"in e||"formatType"in e)}function Dln(e){return ou(e,["legend","axis","header","scale"])}function Mln(e){return"op"in e}function pt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(Lln(e))n=j8e("count");else{let o;if(!t.nofn)if(Mln(e))o=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;Ei(a)?(o=Z8e(a),i=(t.binSuffix??"")+(t.suffix??"")):l?Ev(l)?(s=`["${n}"]`,n=`argmax_${l.argmax}`):ug(l)?(s=`["${n}"]`,n=`argmin_${l.argmin}`):o=String(l):u&&!w_(u)&&(o=Lan(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?uT(n):t.expr?$8e(n,t.expr)+s:ud(n)+s}function DL(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ot(e)&&!!e.bin;case"temporal":return!1}throw new Error(uBe(e.type))}function $ln(e){var t;return E_(e)&&Vx((t=e.scale)==null?void 0:t.type)}function Lln(e){return e.aggregate==="count"}function Fln(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Ei(r))return`${n} (binned)`;if(i&&!w_(i)){const a=(o=xo(i))==null?void 0:o.unit;if(a)return`${n} (${_5(a).join("-")})`}else if(s)return Ev(s)?`${n} for max ${s.argmax}`:ug(s)?`${n} for min ${s.argmin}`:`${fP(s)} of ${n}`;return n}function jln(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Ev(t))return`${i} for argmax(${t.argmax})`;if(ug(t))return`${i} for argmin(${t.argmin})`;const s=r&&!w_(r)?xo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Ei(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const JBe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return jln(e);default:return Fln(e,t)}};let ZBe=JBe;function e9e(e){ZBe=e}function Bln(){e9e(JBe)}function kE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=qse(e))==null?void 0:a.title;if(!ot(e))return i??e.title;const s=e,o=r?Wse(s,t):void 0;return n?Cs(i,s.title,o):i??s.title??o}function qse(e){if(qx(e)&&e.axis)return e.axis;if(XBe(e)&&e.legend)return e.legend;if(Vse(e)&&e.header)return e.header}function Wse(e,t){return ZBe(e,t)}function ML(e){if(QBe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=qse(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function zln(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Hse(e)&&Ge(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Ev(n)&&!ug(n))return"quantitative";if(E_(e)&&((s=e.scale)!=null&&s.type))switch(QW[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Pf(e){if(ot(e))return e;if(R5(e))return e.condition}function Qs(e){if(En(e))return e;if(_P(e))return e.condition}function t9e(e,t,n,r={}){if(Et(e)||xr(e)||pv(e)){const i=Et(e)?"string":xr(e)?"number":"boolean";return st(Bon(t,i,e)),{value:e}}return En(e)?$L(e,t,n,r):_P(e)?{...e,condition:$L(e.condition,t,n,r)}:e}function $L(e,t,n,r){if(QBe(e)){const{format:i,formatType:s,...o}=e;if(Fb(s)&&!n.customFormatTypes)return st(Nve(t)),$L(o,t,n,r)}else{const i=qx(e)?"axis":XBe(e)?"legend":Vse(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(Fb(o)&&!n.customFormatTypes)return st(Nve(t)),$L({...e,[i]:a},t,n,r)}}return ot(e)?Gse(e,t,r):Uln(e)}function Uln(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=xr(n)?"quantitative":Et(n)?"nominal":__(n)?"temporal":void 0,{...e,type:t}}function Gse(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!wse(r)&&!Ev(r)&&!ug(r)&&(st(Uon(r)),delete a.aggregate),i&&(a.timeUnit=xo(i)),o&&(a.field=`${o}`),Ei(s)&&(a.bin=k5(s,t)),Bo(s)&&!As(t)&&st(_an(t)),bl(a)){const{type:l}=a,u=qan(l);l!==u&&(a.type=u),l!=="quantitative"&&y5(r)&&(st(zon(l,r)),a.type="quantitative")}else if(!G8e(t)){const l=zln(a,t);a.type=l}if(bl(a)){const{compatible:l,warning:u}=Vln(a,t)||{};l===!1&&st(u)}if(Hse(a)&&Et(a.sort)){const{sort:l}=a;if(Fve(l))return{...a,sort:{encoding:l}};const u=l.substr(1);if(l.charAt(0)==="-"&&Fve(u))return{...a,sort:{encoding:u,order:"descending"}}}if(Vse(a)){const{header:l}=a;if(l){const{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function k5(e,t){return pv(e)?{maxbins:xve(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:xve(t)}:e}const rw={compatible:!0};function Vln(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Om:case Dm:case d5:return DL(e)?rw:{compatible:!1,warning:Won(t)};case zi:case Co:case yv:case cT:case gu:case Op:case Dp:case hP:case pP:case f5:case Db:case h5:case p5:case y_:case _d:case Wf:case m5:return rw;case Yf:case cd:case Gf:case Kf:return n!==$b?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:rw;case Ig:case vv:case bv:case _v:case Ag:case Cg:case Tg:case qf:case Np:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:rw;case yu:case wv:return!DL(e)&&!$ln(e)?{compatible:!1,warning:Gon(t)}:rw;case Bx:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:rw}}function Wx(e){const{formatType:t}=ML(e);return t==="time"||!t&&Hln(e)}function Hln(e){return e&&(e.type==="temporal"||ot(e)&&!!e.timeUnit)}function P5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const s=t&&((l=xo(t))==null?void 0:l.unit);let o=s||n==="temporal",a;return gP(e)?a=e.expr:Mt(e)?a=e.signal:__(e)?(o=!0,a=Mb(e)):(Et(e)||xr(e))&&o&&(a=`datetime(${ei(e)})`,Nan(s)&&(xr(e)&&e<1e4||Et(e)&&isNaN(Date.parse(e)))&&(a=Mb({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:ei(e)}function n9e(e,t){const{type:n}=e;return t.map(r=>{const i=ot(e)&&!w_(e.timeUnit)?e.timeUnit:void 0,s=P5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function wP(e,t){return Ei(e.bin)?$p(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const zve={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function EP(e){return e==null?void 0:e.condition}const r9e=["domain","grid","labels","ticks","title"],qln={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},i9e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Wln={...i9e,style:1,labelExpr:1,encoding:1};function Uve(e){return!!Wln[e]}const Gln={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},s9e=et(Gln);function kg(e){return"mark"in e}class N5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return kg(t)?wln(t.mark)===this.name:!1}}function X1(e,t){const n=e&&e[t];return n?Ge(n)?Fx(n,r=>!!r.field):ot(n)||R5(n):!1}function o9e(e,t){const n=e&&e[t];return n?Ge(n)?Fx(n,r=>!!r.field):ot(n)||Lp(n)||_P(n):!1}function a9e(e,t){if(As(t)){const n=e[t];if((ot(n)||Lp(n))&&(CBe(n.type)||ot(n)&&n.timeUnit)){const r=gse(t);return o9e(e,r)}}return!1}function l9e(e){return Fx(Wsn,t=>{if(X1(e,t)){const n=e[t];if(Ge(n))return Fx(n,r=>!!r.aggregate);{const r=Pf(n);return r&&!!r.aggregate}}return!1})}function u9e(e,t){const n=[],r=[],i=[],s=[],o={};return Yse(e,(a,l)=>{if(ot(a)){const{field:u,aggregate:c,bin:d,timeUnit:f,...h}=a;if(c||f||d){const p=qse(a),m=p==null?void 0:p.title;let g=pt(a,{forAs:!0});const y={...m?[]:{title:kE(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Ev(c)?(v="argmax",g=pt({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${u}`):ug(c)?(v="argmin",g=pt({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const _={op:v,as:g};u&&(_.field=u),s.push(_)}}else if(n.push(g),bl(a)&&Ei(d)){if(r.push({bin:d,field:u,as:g}),n.push(pt(a,{binSuffix:"end"})),wP(a,l)&&n.push(pt(a,{binSuffix:"range"})),As(l)){const v={field:`${g}_end`};o[`${l}2`]=v}y.bin="binned",G8e(l)||(y.type=$b)}else if(f&&!w_(f)){i.push({timeUnit:f,field:u,as:g});const v=bl(a)&&a.type!==Ux&&"time";v&&(l===hP||l===Db?y.formatType=v:non(l)?y.legend={formatType:v,...y.legend}:As(l)&&(y.axis={formatType:v,...y.axis}))}o[l]=y}else n.push(u),o[l]=e[l]}else o[l]=e[l]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function Yln(e,t,n){const r=ion(t,n);if(r){if(r==="binned"){const i=e[t===qf?zi:Co];return!!(ot(i)&&ot(e[t])&&Bo(i.bin))}}else return!1;return!0}function Kln(e,t,n,r){const i={};for(const s of et(e))W8e(s)||st(qon(s));for(let s of Jsn){if(!e[s])continue;const o=e[s];if(mP(s)){const a=Qsn(s),l=i[a];if(ot(l)&&Han(l.type)&&ot(o)&&!l.timeUnit){st(jon(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(st(Fon),s=_d),!Yln(e,s,t)){st(b5(s,t));continue}if(s===Ag&&t==="line"){const a=Pf(e[s]);if(a!=null&&a.aggregate){st(Hon);continue}}if(s===gu&&(n?"fill"in e:"stroke"in e)){st(cBe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===pP||s===Bx&&!Ge(o)&&!kf(o)||s===Db&&Ge(o)){if(o){if(s===Bx){const a=e[s];if(KBe(a)){i[s]=a;continue}}i[s]=wt(o).reduce((a,l)=>(ot(l)?a.push(Gse(l,s)):st(XW(l,s)),a),[])}}else{if(s===Db&&o===null)i[s]=null;else if(!ot(o)&&!Lp(o)&&!kf(o)&&!I5(o)&&!Mt(o)){st(XW(o,s));continue}i[s]=t9e(o,s,r)}}return i}function O5(e,t){const n={};for(const r of et(e)){const i=t9e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Xln(e){const t=[];for(const n of et(e))if(X1(e,n)){const r=e[n],i=wt(r);for(const s of i)ot(s)?t.push(s):R5(s)&&t.push(s.condition)}return t}function Yse(e,t,n){if(e)for(const r of et(e)){const i=e[r];if(Ge(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function Qln(e,t,n,r){return e?et(e).reduce((i,s)=>{const o=e[s];return Ge(o)?o.reduce((a,l)=>t.call(r,a,l,s),i):t.call(r,i,o,s)},n):n}function c9e(e,t){return et(t).reduce((n,r)=>{switch(r){case zi:case Co:case h5:case m5:case p5:case qf:case Np:case yv:case cT:case _d:case Cg:case Wf:case Tg:case Gf:case Yf:case Kf:case cd:case hP:case yu:case y_:case Db:return n;case Bx:if(e==="line"||e==="trail")return n;case pP:case f5:{const i=t[r];if(Ge(i)||ot(i))for(const s of wt(i))s.aggregate||n.push(pt(s,{}));return n}case Ag:if(e==="trail")return n;case gu:case Op:case Dp:case Ig:case vv:case bv:case wv:case _v:{const i=Pf(t[r]);return i&&!i.aggregate&&n.push(pt(i,{})),n}}},[])}function Jln(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Ge(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Ge(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function eG(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const l=r?` of ${Kse(t)}`:"";return{field:o+t.field,type:t.type,title:Mt(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),s=Xln(n).map(Dln);return{tooltip:[...i,...Mh(s,tr)]}}function Kse(e){const{title:t,field:n}=e;return Cs(t,n)}function Xse(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:d={}})=>{const f=Kse(n);return d9e(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...f!==void 0?{title:f}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Et(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...d}})}}function d9e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...hp(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...pv(e[t])?{}:e[t]}}]:[]}function f9e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:TO(s,n),continuousAxisChannelDef2:TO(o,n),continuousAxisChannelDefError:TO(a,n),continuousAxisChannelDefError2:TO(l,n),continuousAxis:i}}function TO(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&st(ban(n,t)),r}else return e}function h9e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(hp(n)&&n.orient)return n.orient;if(N0(i)){if(N0(s)){const o=ot(i)&&i.aggregate,a=ot(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Wx(s)&&!Wx(i)?"horizontal":"vertical"}return"horizontal"}else{if(N0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const LL="boxplot",Zln=["box","median","outliers","rule","ticks"],eun=new N5(LL,m9e);function p9e(e){return xr(e)?"tukey":e}function m9e(e,{config:t}){e={...e,encoding:O5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=hp(n)?n:{type:n};i&&st(lBe("boxplot"));const l=a.extent??t.boxplot.extent,u=Wr("size",a,t),c=a.invalid,d=p9e(l),{bins:f,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:S}=tun(e,l,t),x=uT(m.field),{color:T,size:I,...P}=_,k=ae=>Xse(a,g,m,ae,t.boxplot),D=k(P),R=k(_),M=(bt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",$=k({...P,...I?{size:I}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...T||{value:M}}}}),L=eG([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=d==="min-max"?L:eG([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),z=[...D({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...D({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...D({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...D({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],N=[...d!=="tukey"?z:[],...R({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:L}),...$({partName:"median",mark:{type:"tick",invalid:c,...bt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:L})];if(d==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:N};const V=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,F=`(${W} - ${V})`,H=`${V} - ${l} * ${F}`,G=`${W} + ${l} * ${F}`,Q=`datum["${m.field}"]`,ie={joinaggregate:g9e(m.field),groupby:y},se={transform:[{filter:`(${H} <= ${Q}) && (${Q} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${x}`},{op:"max",field:m.field,as:`upper_whisker_${x}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${x}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${x}`},...v],groupby:y}],layer:z},{tooltip:ne,...ce}=P,{scale:Ee,axis:de}=m,We=Kse(m),Fe=ou(de,["title"]),Ne=d9e(a,"outliers",t.boxplot,{transform:[{filter:`(${Q} < ${H}) || (${Q} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...We!==void 0?{title:We}:{},...Ee!==void 0?{scale:Ee}:{},...Zr(Fe)?{}:{axis:Fe}},...ce,...T?{color:T}:{},...S?{tooltip:S}:{}}})[0];let je;const ye=[...f,...h,ie];return Ne?je={transform:ye,layer:[Ne,se]}:(je=se,je.transform.unshift(...ye)),{...o,layer:[je,{transform:p,layer:N}]}}function g9e(e){const t=uT(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function tun(e,t,n){const r=h9e(e,LL),{continuousAxisChannelDef:i,continuousAxis:s}=f9e(e,r,LL),o=i.field,a=uT(o),l=p9e(t),u=[...g9e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:d,...f}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=Jln(f),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:_}=u9e(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,S=[...m,...g,{aggregate:[...y,...u],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const Qse="errorbar",nun=["ticks","rule"],run=new N5(Qse,y9e);function y9e(e,{config:t}){e={...e,encoding:O5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:l,tooltipEncoding:u}=v9e(e,Qse,t);delete s.size;const c=Xse(a,i,r,s,t.errorbar),d=a.thickness,f=a.size,h={type:"tick",orient:o,aria:!1,...d!==void 0?{thickness:d}:{},...f!==void 0?{size:f}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...d!==void 0?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function iun(e,t){const{encoding:n}=e;if(sun(n))return{orient:h9e(e,t),inputType:"raw"};const r=oun(n),i=aun(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(En(a)&&En(l))throw new Error(`${t} cannot have both x2 and y2`);if(En(a)){if(N0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(En(l)){if(N0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(En(l)&&!En(a))throw new Error(`${t} cannot have xError2 without xError`);if(En(c)&&!En(u))throw new Error(`${t} cannot have yError2 without yError`);if(En(a)&&En(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(En(a)){if(N0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(En(u)){if(N0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function sun(e){return(En(e.x)||En(e.y))&&!En(e.x2)&&!En(e.y2)&&!En(e.xError)&&!En(e.xError2)&&!En(e.yError)&&!En(e.yError2)}function oun(e){return En(e.x2)||En(e.y2)}function aun(e){return En(e.xError)||En(e.xError2)||En(e.yError)||En(e.yError2)}function v9e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,l=hp(r)?r:{type:r};s&&st(lBe(t));const{orient:u,inputType:c}=iun(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:f,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=f9e(e,u,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:_}=lun(l,d,f,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:x,...T}=i,{bins:I,timeUnits:P,aggregate:k,groupby:D,encoding:R}=u9e(T,n),M=[...k,...g],$=c!=="raw"?[]:D,L=eG(v,d,R,_);return{transform:[...a.transform??[],...I,...P,...M.length===0?[]:[{aggregate:M,groupby:$}],...y],groupby:$,continuousAxisChannelDef:d,continuousAxis:m,encodingWithoutContinuousAxis:R,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:L}}function lun(e,t,n,r,i,s,o,a){let l=[],u=[];const c=t.field;let d,f=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&st(van(h,p,o)),p==="stderr"||p==="stdev")l=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],d=[{fieldPrefix:"center_",titlePrefix:fP(h)},{fieldPrefix:"upper_",titlePrefix:Vve(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Vve(h,p,"-")}],f=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),l=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],d=[{fieldPrefix:"upper_",titlePrefix:kE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:kE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:kE({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&st(yan(e.center,e.extent)),s==="aggregated-upper-lower"?(d=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?u.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):u.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of u)d.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Ob(Ob(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:f}}function Vve(e,t,n){return`${fP(e)} ${n} ${t}`}const Jse="errorband",uun=["band","borders"],cun=new N5(Jse,b9e);function b9e(e,{config:t}){e={...e,encoding:O5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:l}=v9e(e,Jse,t),u=o,c=Xse(u,i,r,s,t.errorband),d=e.encoding.x!==void 0&&e.encoding.y!==void 0;let f={type:d?"area":"rect"},h={type:d?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return d?(f={...f,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?st(Dve("interpolate")):u.tension&&st(Dve("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const _9e={};function Zse(e,t,n){const r=new N5(e,t);_9e[e]={normalizer:r,parts:n}}function dun(){return et(_9e)}Zse(LL,m9e,Zln);Zse(Qse,y9e,nun);Zse(Jse,b9e,uun);const fun=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],w9e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},E9e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},hun=et(w9e),pun=et(E9e),mun={header:1,headerRow:1,headerColumn:1,headerFacet:1},x9e=et(mun),S9e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],gun={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},yun={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Nf="_vgsid_",vun={point:{on:"click",fields:[Nf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function eoe(e){return e==="legend"||!!(e!=null&&e.legend)}function iz(e){return eoe(e)&&bt(e)}function toe(e){return!!(e!=null&&e.select)}function T9e(e){const t=[];for(const n of e||[]){if(toe(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function bun(e){return D5(e)||roe(e)||noe(e)}function noe(e){return"concat"in e}function D5(e){return"vconcat"in e}function roe(e){return"hconcat"in e}function C9e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function pp(e){return bt(e)&&e.step!==void 0}function Hve(e){return e.view||e.width||e.height}const qve=20,_un={align:1,bounds:1,center:1,columns:1,spacing:1},wun=et(_un);function Eun(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(A5(e)&&!bP(e.facet)||noe(e))&&(i.columns=o),D5(e)&&(i.columns=1);for(const a of wun)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=xr(l)?l:{row:l.row??s,column:l.column??s}}else i[a]=e[a];return i}function tG(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function FL(e,t){const n=jL(e,t);return pp(n)?n.step:A9e}function jL(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Cs(n,{step:e.step})}const A9e=20,xun={continuousWidth:200,continuousHeight:200,step:A9e},Sun={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:xun,mark:mln,arc:{},area:{},bar:vln,circle:{},geoshape:{},image:{},line:{},point:{},rect:bln,rule:{color:"black"},square:{},text:{color:"black"},tick:_ln,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Xan,projection:{},legend:gun,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:vun,style:{},title:{},facet:{spacing:qve},concat:{spacing:qve},normalizedNumberFormat:".0%"},Yp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Wve={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Gve={blue:Yp[0],orange:Yp[1],red:Yp[2],teal:Yp[3],green:Yp[4],yellow:Yp[5],purple:Yp[6],pink:Yp[7],brown:Yp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Tun(e={}){return{signals:[{name:"color",value:bt(e)?{...Gve,...e}:Gve}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Cun(e){return{signals:[{name:"fontSize",value:bt(e)?{...Wve,...e}:Wve}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Aun(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function I9e(e){const t=et(e||{}),n={};for(const r of t){const i=e[r];n[r]=EP(i)?tBe(i):Lu(i)}return n}function Iun(e){const t=et(e),n={};for(const r of t)n[r]=I9e(e[r]);return n}const Run=[...$Be,...s9e,...x9e,"background","padding","legend","lineBreak","scale","style","title","view"];function R9e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=JS({},pn(Sun),n?Aun(n):{},t?Tun(t):{},r?Cun(r):{},s||{});i&&ZS(o,"selection",i,!0);const a=ou(o,Run);for(const l of["background","lineBreak","padding"])o[l]&&(a[l]=Lu(o[l]));for(const l of $Be)o[l]&&(a[l]=xa(o[l]));for(const l of s9e)o[l]&&(a[l]=I9e(o[l]));for(const l of x9e)o[l]&&(a[l]=xa(o[l]));if(o.legend&&(a.legend=xa(o.legend)),o.scale){const{invalid:l,...u}=o.scale,c=xa(l,{level:1});a.scale={...xa(u),...et(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=Iun(o.style)),o.title&&(a.title=xa(o.title)),o.view&&(a.view=xa(o.view)),a}const kun=new Set(["view",...uln]),Pun=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Nun={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...pln};function Oun(e){e=pn(e);for(const t of Pun)delete e[t];if(e.axis)for(const t in e.axis)EP(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of fun)delete e.legend[t];if(e.mark){for(const t of $ve)delete e.mark[t];e.mark.tooltip&&bt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(T9e(e.params)),delete e.params);for(const t of kun){for(const r of $ve)delete e[t][r];const n=Nun[t];if(n)for(const r of n)delete e[t][r];Mun(e,t)}for(const t of dun())delete e[t];Dun(e);for(const t in e)bt(e[t])&&Zr(e[t])&&delete e[t];return Zr(e)?void 0:e}function Dun(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=eBe(e.title);Zr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Zr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Zr(r)?delete e.title:e.title=r}function Mun(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Zr(s)||(e.style[n??t]=s),delete e[t]}function M5(e){return"layer"in e}function $un(e){return"repeat"in e}function Lun(e){return!Ge(e.repeat)&&e.repeat.layer}class ioe{map(t,n){return A5(t)?this.mapFacet(t,n):$un(t)?this.mapRepeat(t,n):roe(t)?this.mapHConcat(t,n):D5(t)?this.mapVConcat(t,n):noe(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(M5(t))return this.mapLayer(t,n);if(kg(t))return this.mapUnit(t,n);throw new Error(Ese(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Fun={zero:1,center:1,normalize:1};function jun(e){return e in Fun}const Bun=new Set([OBe,x5,E5,PL,T5,Lse,Fse,S5,DBe,$se]),zun=new Set([x5,E5,OBe]);function iw(e){return ot(e)&&Hx(e)==="quantitative"&&!e.bin}function Yve(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(ot(o)&&ot(a))if(iw(o)&&iw(a)){if(o.stack)return t;if(a.stack)return i;const l=ot(o)&&!!o.aggregate,u=ot(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(iw(o))return t;if(iw(a))return i}else{if(iw(o))return s&&n==="vertical"?void 0:t;if(iw(a))return s&&n==="horizontal"?void 0:i}}function Uun(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function k9e(e,t){var m,g;const n=hp(e)?e:{type:e},r=n.type;if(!Bun.has(r))return null;const i=Yve(t,"x",n)||Yve(t,"theta",n);if(!i)return null;const s=t[i],o=ot(s)?pt(s,{}):void 0,a=Uun(i),l=[],u=new Set;if(t[a]){const y=t[a],v=ot(y)?pt(y,{}):void 0;v&&v!==o&&(l.push(a),u.add(v))}const c=a==="x"?"xOffset":"yOffset",d=t[c],f=ot(d)?pt(d,{}):void 0;f&&f!==o&&(l.push(c),u.add(f));const h=Zsn.reduce((y,v)=>{if(v!=="tooltip"&&X1(t,v)){const _=t[v];for(const w of wt(_)){const E=Pf(w);if(E.aggregate)continue;const S=pt(E,{});(!S||!u.has(S))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?pv(s.stack)?p=s.stack?"zero":null:p=s.stack:zun.has(r)&&(p="zero"),!p||!jun(p)||l9e(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Uo.LINEAR&&s!=null&&s.stack&&st(pan(s.scale.type)),En(t[Mp(i)])?(s.stack!==void 0&&st(han(i)),null):(ot(s)&&s.aggregate&&!don.has(s.aggregate)&&st(man(s.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:s.impute===null?!1:Sv(r),stackBy:h,offset:p}))}function P9e(e,t,n){const r=xa(e),i=Wr("orient",r,n);if(r.orient=Wun(r.type,t,i),i!==void 0&&i!==r.orient&&st(Qon(r.orient,i)),r.type==="bar"&&r.orient){const l=Wr("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:yln[r.orient];for(const c of u)r[c]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Wr("opacity",r,n),o=Wr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=Hun(r.type,t)),Wr("cursor",r,n)===void 0&&(r.cursor=Vun(r,t,n)),r}function Vun(e,t,n){return t.href||e.href||Wr("href",e,n)?"pointer":e.cursor}function Hun(e,t){if(Kn([T5,$se,Lse,Fse],e)&&!l9e(t))return .7}function qun(e,t,{graticule:n}){if(n)return!1;const r=fp("filled",e,t),i=e.type;return Cs(r,i!==T5&&i!==S5&&i!==PL)}function Wun(e,t,n){switch(e){case T5:case Lse:case Fse:case DBe:case aln:case oln:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case x5:if(ot(r)&&(Bo(r.bin)||ot(i)&&i.aggregate&&!r.aggregate))return"vertical";if(ot(i)&&(Bo(i.bin)||ot(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(ot(r)&&r.type===$b&&!Ei(r.bin)||OL(r))&&ot(i)&&Bo(i.bin)?"horizontal":"vertical";if(!o)return(ot(i)&&i.type===$b&&!Ei(i.bin)||OL(i))&&ot(r)&&Bo(r.bin)?"vertical":"horizontal"}case PL:if(s&&!(ot(r)&&Bo(r.bin))&&o&&!(ot(i)&&Bo(i.bin)))return;case E5:if(o)return ot(i)&&Bo(i.bin)?"horizontal":"vertical";if(s)return ot(r)&&Bo(r.bin)?"vertical":"horizontal";if(e===PL){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case S5:case $se:{const a=Bve(r),l=Bve(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=bl(r)&&r.type===Ux,c=bl(i)&&i.type===Ux;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function Gun(e){const{point:t,line:n,...r}=e;return et(r).length>1?r:r.type}function Yun(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ou(e[t],["point","line"])});return e}function sz(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?bt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?bt(t.point)?t.point:{}:void 0}function Kve(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Kun{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(kg(t)){const{mark:r,encoding:i}=t,s=hp(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!sz(s,n[s.type],i);case"area":return!!sz(s,n[s.type],i)||!!Kve(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:l,encoding:u,...c}=t,d=O5(u,i),f=hp(a)?a:{type:a},h=sz(f,i[f.type],d),p=f.type==="area"&&Kve(f,i[f.type]),m=[{name:l,...s?{params:s}:{},mark:Gun({...f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{},...f}),encoding:ou(d,["shape"])}],g=k9e(P9e(f,d,i),d);let y=d;if(g){const{fieldChannel:v,offset:_}=g;y={...d,[v]:{...d[v],..._?{stack:_}:{}}}}return y=ou(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...Lx(f,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...Lx(f,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:Yun(i)})}}function Xun(e,t){return t?bP(e)?O9e(e,t):N9e(e,t):e}function oz(e,t){return t?O9e(e,t):e}function nG(e,t,n){const r=t[e];if(Nln(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};st(Pon(r.repeat));return}return t}function N9e(e,t){if(e=nG("field",e,t),e!==void 0){if(e===null)return null;if(Hse(e)&&Mm(e.sort)){const n=nG("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Xve(e,t){if(ot(e))return N9e(e,t);{const n=nG("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Qve(e,t){if(En(e)){const n=Xve(e,t);if(n)return n;if(I5(e))return{condition:e.condition}}else{if(_P(e)){const n=Xve(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function O9e(e,t){const n={};for(const r in e)if(Vt(e,r)){const i=e[r];if(Ge(i))n[r]=i.map(s=>Qve(s,t)).filter(s=>s);else{const s=Qve(i,t);s!==void 0&&(n[r]=s)}}return n}class Qun{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(kg(t)){const{encoding:n,mark:r}=t;if(r==="line"||hp(r)&&r.type==="line")for(const i of Xsn){const s=v_(i),o=n[s];if(n[i]&&(ot(o)&&!Bo(o.bin)||Lp(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return st(Xon(!!i.x2,!!i.y2)),r({...t,mark:bt(s)?{...s,type:"rule"}:"rule"},n)}}class Jun extends ioe{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[eun,run,cun,new Kun,new Qun]}map(t,n){if(kg(t)){const r=X1(t.encoding,Om),i=X1(t.encoding,Dm),s=X1(t.encoding,d5);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=oz(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(o,n.config))return l.run(o,n,a);return o}mapRepeat(t,n){return Lun(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:i}},n):{...s,layer:l.map(d=>{const f={...u,layer:d},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Bi(d)}`,p=this.mapLayerOrUnit(i,{...n,repeater:f,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Ge(r)&&t.columns&&(t=ou(t,["columns"]),st(kve("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!Ge(r)&&r.row||[l?l.row:null],d=!Ge(r)&&r.column||[l?l.column:null],f=Ge(r)&&r||[l?l.repeat:null];for(const p of f)for(const m of c)for(const g of d){const y={repeat:p,row:m,column:g,layer:l.layer},v=(i.name?`${i.name}_`:"")+u+"child__"+(Ge(r)?`${Bi(p)}`:(r.row?`row_${Bi(m)}`:"")+(r.column?`column_${Bi(g)}`:"")),_=this.map(i,{...n,repeater:y,repeaterPrefix:v});_.name=v,a.push(ou(_,["data"]))}const h=Ge(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return bP(r)&&t.columns&&(t=ou(t,["columns"]),st(kve("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,l=Zve({parentProjection:o,projection:i}),u=Jve({parentEncoding:s,encoding:oz(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:l,projection:u,height:c,view:d,params:f,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=oz(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...l?{width:l}:{},...c?{height:c}:{},...d?{view:d}:{},...u?{projection:u}:{},mark:a,encoding:y,...f?{params:f}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&st(Yon([...r?[Om]:[],...i?[Dm]:[]]));const o={},a={};for(const l of[Om,Dm]){const u=t[l];if(u){const{align:c,center:d,spacing:f,columns:h,...p}=u;o[l]=p;for(const m of["align","center","spacing"])u[m]!==void 0&&(a[m]??(a[m]={}),a[m][l]=u[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:l,columns:u,...c}=s;return{facetMapping:Xun(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,l={...i,parentEncoding:Jve({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Zve({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function Jve({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...et(e),...et(t)]);for(const s of i){const o=t[s],a=e[s];if(En(o)){const l={...a,...o};r[s]=l}else _P(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||kf(a)||Mt(a)||En(a)||Ge(a))&&(r[s]=a)}}else r=t;return!r||Zr(r)?void 0:r}function Zve(e){const{parentProjection:t,projection:n}=e;return t&&n&&st(Lon({parentProjection:t,projection:n})),n??t}function soe(e){return"filter"in e}function Zun(e){return(e==null?void 0:e.stop)!==void 0}function D9e(e){return"lookup"in e}function ecn(e){return"data"in e}function tcn(e){return"param"in e}function ncn(e){return"pivot"in e}function rcn(e){return"density"in e}function icn(e){return"quantile"in e}function scn(e){return"regression"in e}function ocn(e){return"loess"in e}function acn(e){return"sample"in e}function lcn(e){return"window"in e}function ucn(e){return"joinaggregate"in e}function ccn(e){return"flatten"in e}function dcn(e){return"calculate"in e}function M9e(e){return"bin"in e}function fcn(e){return"impute"in e}function hcn(e){return"timeUnit"in e}function pcn(e){return"aggregate"in e}function mcn(e){return"stack"in e}function gcn(e){return"fold"in e}function ycn(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function vcn(e){return e.map(t=>soe(t)?{filter:IE(t.filter,Van)}:t)}class bcn extends ioe{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=e1e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=e1e(t,n),t.encoding){const r={};for(const[i,s]of Ly(t.encoding))r[i]=$9e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Ly(r).map(([s,o])=>{const{init:a,bind:l,empty:u,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=u!=="none";for(const d of Ko(n.selectionPredicates[s]??{}))d.empty=u!=="none";return{name:s,value:a,select:c,bind:l}})}:t}}function e1e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(soe(s))return{filter:rG(s,t)};if(M9e(s)&&b_(s.bin))return{...s,bin:L9e(s.bin)};if(D9e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function $9e(e,t){var r,i;const n=pn(e);if(ot(n)&&b_(n.bin)&&(n.bin=L9e(n.bin)),E_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(I5(n))if(Ge(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:l,...u}=s;return a?s:{...u,test:rG(s,t)}});else{const{selection:s,param:o,test:a,...l}=$9e(n.condition,t);n.condition=o?n.condition:{...l,test:rG(n.condition,t)}}return n}function L9e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function rG(e,t){const n=r=>IE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):IE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class iG extends ioe{map(t,n){const r=n.selections??[];if(t.params&&!kg(t)){const i=[];for(const s of t.params)toe(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Et(a)&&(a===t.name||i.includes(a))||Ge(a)&&a.map(l=>i.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=iG.prototype[e];iG.prototype[e]=function(n,r){return t.call(this,n,_cn(n,r))}}function _cn(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function F9e(e,t){t===void 0&&(t=R9e(e.config));const n=Scn(e,t),{width:r,height:i}=e,s=Tcn(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const wcn=new Jun,Ecn=new bcn,xcn=new iG;function Scn(e,t={}){const n={config:t};return xcn.map(wcn.map(Ecn.map(e,n),n),n)}function t1e(e){return Et(e)?{type:e}:e??{}}function Tcn(e,t,n){let{width:r,height:i}=t;const s=kg(e)||M5(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(st(Cve("width")),r=void 0),i=="container"&&(st(Cve("height")),i=void 0));const a={type:"pad",...o,...n?t1e(n.autosize):{},...t1e(e.autosize)};if(a.type==="fit"&&!s&&(st(_on),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&st(Ave("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&st(Ave("height")),!qu(a,{type:"pad"}))return a}function Ccn(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function Acn(e){return e?`fit-${g5(e)}`:"fit"}const Icn=["background","padding"];function n1e(e,t){const n={};for(const r of Icn)e&&e[r]!==void 0&&(n[r]=Lu(e[r]));return t&&(n.params=e.params),n}class Pg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Pg(pn(this.explicit),pn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Cs(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of et(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function mh(e){return{explicit:!0,value:e}}function Ru(e){return{explicit:!1,value:e}}function j9e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:$5(t,n,r,i)}}function $5(e,t,n,r){return e.explicit&&t.explicit&&st(oan(n,r,e.value,t.value)),e}function By(e,t,n,r,i=$5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:qu(e.value,t.value)?e:i(e,t,n,r)}class Rcn extends Pg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Gx(e){return"url"in e}function bR(e){return"values"in e}function B9e(e){return"name"in e&&!Gx(e)&&!bR(e)&&!ny(e)}function ny(e){return e&&(z9e(e)||U9e(e)||ooe(e))}function z9e(e){return"sequence"in e}function U9e(e){return"sphere"in e}function ooe(e){return"graticule"in e}var ds;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(ds||(ds={}));function V9e({invalid:e,isPath:t}){switch(FBe(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function kcn(e){const{marks:t,scales:n}=V9e(e);return t===n?ds.Main:n==="include-invalid-values"?ds.PreFilterInvalid:ds.PostFilterInvalid}function H9e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=ud(i.field),i}function jb(e,t=!0,n=ja){if(Ge(e)){const r=e.map(i=>jb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(__(e))return n(t?Mb(e):Pan(e));return t?n(ei(e)):e}function Pcn(e,t){for(const n of Ko(e.component.selection??{})){const r=n.name;let i=`${r}${Uy}, ${n.resolve==="global"?"true":`{unit: ${Q1(e)}}`}`;for(const s of B5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+adn,on:[{events:{signal:n.name+Uy},update:`modify(${ut(n.name+Bb)}, ${i})`}]})}return aoe(t)}function Ncn(e,t){if(e.component.selection&&et(e.component.selection).length){const n=ut(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:gv("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return aoe(t)}function Ocn(e,t){let n=!1;for(const r of Ko(e.component.selection??{})){const i=r.name,s=ut(i+Bb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${l7e}(${s}, ${ut(a)}${l}`})}n=!0;for(const a of B5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),aoe(t)}function Dcn(e,t){const n=[...t],r=Q1(e,{escape:!1});for(const i of Ko(e.component.selection??{})){const s={name:i.name+Bb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Nf}}]),i.init){const a=i.project.items.map(H9e);s.values=i.project.hasSelectionId?i.init.map(l=>({unit:r,[Nf]:jb(l,!1)[0]})):i.init.map(l=>({unit:r,fields:a,values:jb(l,!1)}))}n.filter(a=>a.name===i.name+Bb).length||n.push(s)}return n}function q9e(e,t){for(const n of Ko(e.component.selection??{}))for(const r of B5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Mcn(e,t){for(const n of e.children)Wi(n)&&(t=q9e(n,t));return t}function $cn(e,t,n,r){const i=h7e(e,t.param,t);return{signal:Rf(n.get("type"))&&Ge(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function aoe(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Xr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){st(Don);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class au extends Xr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${F8e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function az(e){return e.as!==void 0}function r1e(e){return`${e}_end`}class Qh extends Xr{clone(){return new Qh(null,pn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:l}=s;if(l){let u;if(w_(l)){if(Wi(n)){const{mark:c,markDef:d,config:f}=n,h=jy({fieldDef:s,markDef:d,config:f});(vR(c)||h)&&(u={timeUnit:xo(l),field:a})}}else u={as:pt(s,{forAs:!0}),field:a,timeUnit:l};if(Wi(n)){const{mark:c,markDef:d,config:f}=n,h=jy({fieldDef:s,markDef:d,config:f});vR(c)&&As(o)&&h!==.5&&(u.rectBandPosition=h)}u&&(i[tr(u)]=u)}return i},{});return Zr(r)?null:new Qh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=xo(r),o={...i,timeUnit:s};return new Qh(t,{[tr(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Ly(this.timeUnits)){const s=az(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Ko(this.timeUnits).map(t=>az(t)?t.as:r1e(t.field)))}dependentFields(){return new Set(Ko(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${tr(this.timeUnits)}`}assemble(){const t=[];for(const n of Ko(this.timeUnits)){const{rectBandPosition:r}=n,i=xo(n.timeUnit);if(az(n)){const{field:s,as:o}=n,{unit:a,utc:l,...u}=i,c=[o,`${o}_end`];t.push({field:ud(s),type:"timeunit",...a?{units:_5(a)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...i1e(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=W9e({timeUnit:i,field:o}),l=r1e(o);t.push({type:"formula",expr:a,as:l}),t.push(...i1e([o,l],r,i))}}return t}}const L5="offsetted_rect_start",F5="offsetted_rect_end";function W9e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=bBe(r),{part:o,step:a}=xBe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function i1e([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:s1e([W9e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${L5}`},{type:"formula",expr:s1e([i,s],n+.5),as:`${e}_${F5}`}]}return[]}function s1e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const xP="_tuple_fields";class Lcn{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Fcn={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Lcn),s={},o={},a=new Set,l=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Bi(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Bi(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},u=t.type,c=e.config.selection[u],d=n.value!==void 0?wt(n.value):null;let{fields:f,encodings:h}=bt(n.select)?n.select:{};if(!f&&!h&&d){for(const p of d)if(bt(p))for(const m of et(p))Ksn(m)?(h||(h=[])).push(m):u==="interval"?(st(kon),h=c.encodings):(f??(f=[])).push(m)}!f&&!h&&(h=c.encodings,"fields"in c&&(f=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){st(won(p,m.aggregate));continue}else if(!g){st(Rve(p));continue}if(m.timeUnit&&!w_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[tr(y)]=y}if(!s[g]){const y=u==="interval"&&$p(p)&&Rf(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...l(v,"data"),...l(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Nf,H8e(p)?(v.geoChannel=p,v.channel=V8e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else st(Rve(p))}for(const p of f??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...l(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Nf}d&&(t.init=d.map(p=>i.items.map(m=>bt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Zr(o)||(i.timeUnit=new Qh(null,o))},signals:(e,t,n)=>{const r=t.name+xP;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(H9e)})}},$m={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!$p(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&st(Ton),!s||!Rf(o)){st(Son);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||o1e(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(l7e)>=0)i.update=`{${r.map(o=>`${ut(ud(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${ut(ud(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!o1e(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function sG(e,t){return`domain(${ut(e.scaleName(t))})`}function o1e(e){return e.parent&&gT(e.parent)&&!e.parent.parent}const PE="_brush",G9e="_scale_trigger",_C="geo_interval_init_tick",Y9e="_init",jcn="_center",Bcn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...bt(n.select)?n.select:{}};i.fields=[Nf],i.encodings||(i.encodings=n.value?et(n.value):[Yf,Gf]),n.select={type:"interval",...i}}if(t.translate&&!$m.defined(t)){const i=`!event.item || event.item.mark.name !== ${ut(t.name+PE)}`;for(const s of t.events){if(!s.between){st(`${s} is not an ordered event stream for interval selections.`);continue}const o=wt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Uy,s=Ko(t.project.hasChannel).filter(a=>a.channel===zi||a.channel===Co),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,l)=>a.concat(zcn(e,t,l,o&&o[l.index])),[])),e.hasProjection){const a=ut(e.projectionName()),l=e.projectionName()+jcn,{x:u,y:c}=t.project.hasChannel,d=u&&u.signals.visual,f=c&&c.signals.visual,h=u?o&&o[u.index]:`${l}[0]`,p=c?o&&o[c.index]:`${l}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${d?d+"[0]":"0"}, ${f?f+"[0]":"0"}],[${d?d+"[1]":m("width")}, ${f?f+"[1]":m("height")}]]`;o&&(n.unshift({name:r+Y9e,init:`[scale(${a}, [${u?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${c?p[1]:p}])]`}),(!u||!c)&&(n.find(S=>S.name===l)||n.unshift({name:l,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${ut(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Q1(e)}}`,_=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:_C}]:[]],update:_}]})}else{if(!$m.defined(t)){const u=r+G9e,c=s.map(d=>{const f=d.channel,{data:h,visual:p}=d.signals,m=ut(e.scaleName(f)),g=e.getScaleComponent(f).get("type"),y=Rf(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:s.map(d=>({scale:e.scaleName(d.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const a=s.map(u=>u.signals.data),l=`unit: ${Q1(e)}, fields: ${r+xP}, values`;return n.concat({name:i,...o?{init:`{${l}: ${jb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Wi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===_C).length||n.unshift({name:_C,value:null,on:[{events:"timer{1}",update:`${_C} === null ? {} : ${_C}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,l=`data(${ut(t.name+Bb)})`;if($m.defined(t)||!i&&!s)return n;const u={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of et(u))u[g]=[{test:`${l}.length && ${l}[0].unit === ${Q1(e)}`,...u[g]},{value:0}];const{fill:c,fillOpacity:d,cursor:f,...h}=t.mark,p=et(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=f??(t.translate?"move":null);return[{name:`${r+PE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:d}},update:u}},...n,{name:r+PE,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}};function zcn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=ut(i?e.scaleName(s):e.projectionName()),l=f=>`scale(${a}, ${f})`,u=e.getSizeSignalRef(s===zi?"width":"height").signal,c=`${s}(unit)`,d=t.events.reduce((f,h)=>[...f,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${u})]`}],[]);if(i){const f=n.signals.data,h=$m.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:jb(r,!0,l)}:{value:[]};return d.push({events:{signal:t.name+G9e},update:Rf(m)?`[${l(`${f}[0]`)}, ${l(`${f}[1]`)}]`:"[0, 0]"}),h?[{name:f,on:[]}]:[{name:o,...g,on:d},{name:f,...r?{init:jb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const f=s===zi?0:1,h=t.name+Y9e,p=r?{init:`[${h}[0][${f}], ${h}[1][${f}]]`}:{value:[]};return[{name:o,...p,on:d}]}}const Ucn={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+xP,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Ko(e.component.selection??{}).reduce((d,f)=>f.type==="interval"?d.concat(f.name+PE):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${Q1(e)}, `;if(t.project.hasSelectionId)u+=`${Nf}: ${o}[${ut(Nf)}]`;else{const d=s.items.map(f=>{const h=e.fieldDef(f.channel);return h!=null&&h.bin?`[${o}[${ut(e.vgField(f.channel,{}))}], ${o}[${ut(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${o}[${ut(f.field)}]`}).join(", ");u+=`fields: ${i}, values: [${d}]`}const c=t.events;return n.concat([{name:r+Uy,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}};function fT({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=I5(t)&&t.condition;let o=[];s&&(o=wt(s).map(u=>{const c=i(u);if(Pln(u)){const{param:d,empty:f}=u;return{test:f7e(e,{param:d,empty:f}),...c}}else return{test:UL(e,u.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function loe(e,t="text"){const n=e.encoding[t];return fT({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>j5(r,e.config),invalidValueRef:void 0})}function j5(e,t,n="datum"){if(e){if(kf(e))return Ri(e.value);if(En(e)){const{format:r,formatType:i}=ML(e);return Use({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function K9e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Ge(o))return{tooltip:a1e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return fT({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:u=>{const c=j5(u,i,a);if(c)return c;if(u===null)return;let d=Wr("tooltip",r,i);if(d===!0&&(d={content:"encoding"}),Et(d))return{value:d};if(bt(d))return Mt(d)?d:d.content==="encoding"?a1e(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function X9e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function l(c,d){const f=v_(d),h=bl(c)?c:{...c,type:e[f].type},p=h.title||Wse(h,i),m=wt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(As(d)){const y=d==="x"?"x2":"y2",v=Pf(e[y]);if(Bo(h.bin)&&v){const _=pt(h,{expr:o}),w=pt(v,{expr:o}),{format:E,formatType:S}=ML(h);g=vP(_,w,E,S,i),s[y]=!0}}if((As(d)||d===_d||d===Wf)&&t&&t.fieldChannel===d&&t.offset==="normalize"){const{format:y,formatType:v}=ML(h);g=Use({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=j5(h,i,o).signal),a.push({channel:d,key:m,value:g})}Yse(e,(c,d)=>{ot(c)?l(c,d):R5(c)&&l(c.condition,d)});const u={};for(const{channel:c,key:d,value:f}of a)!s[c]&&!u[d]&&(u[d]=f);return u}function a1e(e,t,n,{reactiveGeom:r}={}){const i=X9e(e,t,n,{reactiveGeom:r}),s=Ly(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Vcn(e){const{markDef:t,config:n}=e,r=Wr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Hcn(e),...qcn(e)}}function Hcn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Wr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in yon?{}:{ariaRoleDescription:{value:t}}}function qcn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return fT({model:e,channelDef:s,vgChannel:"description",mainRefFn:l=>j5(l,e.config),invalidValueRef:void 0});const o=Wr("description",n,r);if(o!=null)return{description:Ri(o)};if(r.aria===!1)return{};const a=X9e(t,i,r);if(!Zr(a))return{description:{signal:Ly(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function go(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:l}=n;a===void 0&&(l??(l=Wr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),l!==void 0&&(a=Ri(l)));const u=i[e],c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},d=BBe({...c,scaleChannel:e,channelDef:u});return fT({model:t,channelDef:u,vgChannel:o??e,invalidValueRef:d,mainRefFn:h=>zse({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function Q9e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Wr("filled",n,i),a=Kn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,l=Wr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,u=Wr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",d={...l?{fill:Ri(l)}:{},...u?{stroke:Ri(u)}:{}};return n.color&&(o?n.fill:n.stroke)&&st(cBe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...go("color",e,{vgChannel:c,defaultValue:o?l:u}),...go("fill",e,{defaultValue:r.fill?l:void 0}),...go("stroke",e,{defaultValue:r.stroke?u:void 0})}}function Wcn(e){const{encoding:t,mark:n}=e,r=t.order;return!Sv(n)&&kf(r)?fT({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>Ri(i.value),invalidValueRef:void 0}):{}}function Yx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:zse({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Ri(o),bandPosition:i})};const l=t[s];return l?{offsetType:"visual",offset:l}:{}}function ka(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,l=i[e],u=i[Mp(e)],c=t.scaleName(e),d=t.getScaleComponent(e),{offset:f,offsetType:h}=Yx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=uoe({model:t,defaultPos:n,channel:e,scaleName:c,scale:d}),m=!l&&As(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Gcn({channel:e,channelDef:l,channel2Def:u,markDef:s,config:o,scaleName:c,scale:d,stack:a,offset:f,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function Gcn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(En(n)&&i&&t===i.fieldChannel){if(ot(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return NL({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return K1(n,r,{suffix:"end"},{offset:s})}return Bse(e)}function uoe({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=v_(n),l=Fy(n),u=Wr(n,s,o,{vgChannel:l});if(u!==void 0)return TA(n,u);switch(t){case"zeroOrMin":return l1e({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return l1e({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[vu(n)],mult:.5}}}}function l1e({mainChannel:e,config:t,...n}){const r=jBe(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const Ycn={left:"x",center:"xc",right:"x2"},Kcn={top:"y",middle:"yc",bottom:"y2"};function J9e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Fy(e);const i=e==="x"?"align":"baseline",s=Wr(i,t,n);let o;return Mt(s)?(st(Kon(i)),o=void 0):o=s,e==="x"?Ycn[o||(r==="top"?"left":"center")]:Kcn[o||r]}function BL(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Z9e(e,t,{defaultPos:n,defaultPos2:r}):ka(e,t,{defaultPos:n})}function Z9e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Mp(e),a=vu(e),l=Xcn(t,r,o),u=l[a]?J9e(e,i,s):Fy(e);return{...ka(e,t,{defaultPos:n,vgChannel:u}),...l}}function Xcn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,l=v_(n),u=vu(n),c=Fy(n),d=r[l],f=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=n in r||n in s?Yx({channel:n,markDef:s,encoding:r,model:e}):Yx({channel:l,markDef:s,encoding:r,model:e});if(!d&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=vu(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=Qcn({channel:n,channelDef:d,channel2Def:r[n],markDef:s,config:a,scaleName:f,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:CO(n,s)||CO(n,{[n]:RL(n,s,a.style),[u]:RL(u,s,a.style)})||CO(n,a[i])||CO(n,a.mark)||{[c]:uoe({model:e,defaultPos:t,channel:n,scaleName:f,scale:h})()}}function Qcn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u}){return En(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?K1(t,s,{suffix:"start"},{offset:l}):Bse({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function CO(e,t){const n=vu(e),r=Fy(e);if(t[r]!==void 0)return{[r]:TA(e,t[r])};if(t[e]!==void 0)return{[r]:TA(e,t[e])};if(t[n]){const i=t[n];if(Lb(i))st(Von(n));else return{[n]:TA(e,i)}}}function zy(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Mp(t),a=vu(t),l=r[t],u=r[o],c=e.getScaleComponent(t),d=c?c.get("type"):void 0,f=i.orient,h=r[a]??r.size??Wr("size",i,n,{vgChannel:a}),p=Y8e(t),m=s==="bar"&&(t==="x"?f==="vertical":f==="horizontal");return ot(l)&&(Ei(l.bin)||Bo(l.bin)||l.timeUnit&&!u)&&!(h&&!Lb(h))&&!r[p]&&!So(d)?edn({fieldDef:l,fieldDef2:u,channel:t,model:e}):(En(l)&&So(d)||m)&&!u?Zcn(l,t,e):Z9e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Jcn(e,t,n,r,i,s,o){if(Lb(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const c=fp("minBandSize",{type:o},r);return{signal:c?`max(${tf(c)}, ${u})`:u}}else i.band!==1&&(st(Zon(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Mt(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(xv(l)&&xr(l.step))return{value:l.step-2}}if(!s){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c}=r.scale,d=Cs(l,o==="bar"?u:c);if(Mt(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(xr(d))return{signal:`${1-d} * ${e}`}}return{value:FL(r.view,e)-2}}function Zcn(e,t,n){var I,P;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=vu(t),d=Mp(t),f=Y8e(t),h=n.scaleName(f),p=n.getScaleComponent(gse(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=go("size",n,{vgChannel:c,defaultRef:Ri(r.size)}):st(ran(r.type)));const y=!!g,v=GBe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(I=u||p)==null?void 0:I.get("type"),useVlSizeChannel:m});g=g||{[c]:Jcn(c,h||l,p||u,s,v,!!e,r.type)};const _=((P=u||p)==null?void 0:P.get("type"))==="band"&&Lb(v)&&!y?"top":"middle",w=J9e(t,r,s,_),E=w==="xc"||w==="yc",{offset:S,offsetType:x}=Yx({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),T=Bse({channel:t,channelDef:e,markDef:r,config:s,scaleName:l,scale:u,stack:o,offset:S,defaultRef:uoe({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:E?x==="encoding"?0:.5:Mt(v)?{signal:`(1-${v})/2`}:Lb(v)?(1-v.band)/2:0});if(c)return{[w]:T,...g};{const k=Fy(d),D=g[c],R=S?{...D,offset:S}:D;return{[w]:T,[k]:Ge(T)?[T[0],{...T[1],offset:R}]:{...T,offset:R}}}}function u1e(e,t,n,r,i,s,o){if(U8e(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(Mt(n)||Mt(i)||Mt(r)||s){const u=tf(n),c=tf(i),d=tf(r),f=tf(s),p=s?`(${o} < ${f} ? ${a?"":"-"}0.5 * (${f} - (${o})) : ${l})`:l,m=d?`${d} + `:"",g=u?`(${u} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-l:+i+l)}function edn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var P;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,c=a.get("reverse"),d=GBe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:u}),f=(P=r.component.axes[n])==null?void 0:P[0],h=(f==null?void 0:f.get("translate"))??.5,p=As(n)?Wr("binSpacing",s,i)??0:0,m=Mp(n),g=Fy(n),y=Fy(m),v=fp("minBandSize",s,i),{offset:_}=Yx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=Yx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=Tln({fieldDef:e,scaleName:l}),S=u1e(n,p,c,h,_,v,E),x=u1e(m,p,c,h,w??_,v,E),T=Mt(d)?{signal:`(1-${d.signal})/2`}:Lb(d)?(1-d.band)/2:.5,I=jy({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Ei(e.bin)||e.timeUnit){const k=e.timeUnit&&I!==.5;return{[y]:c1e({fieldDef:e,scaleName:l,bandPosition:T,offset:x,useRectOffsetField:k}),[g]:c1e({fieldDef:e,scaleName:l,bandPosition:Mt(T)?{signal:`1-${T.signal}`}:1-T,offset:S,useRectOffsetField:k})}}else if(Bo(e.bin)){const k=K1(e,l,{},{offset:x});if(ot(t))return{[y]:k,[g]:K1(t,l,{},{offset:S})};if(b_(e.bin)&&e.bin.step)return{[y]:k,[g]:{signal:`scale("${l}", ${pt(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}st(hBe(m))}function c1e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return NL({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:L5,endSuffix:F5}:{}})}const tdn=new Set(["aria","width","height"]);function wd(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Q9e(e):{};return{...ndn(e.markDef,t),...d1e("fill",n),...d1e("stroke",r),...go("opacity",e),...go("fillOpacity",e),...go("strokeOpacity",e),...go("strokeWidth",e),...go("strokeDash",e),...Wcn(e),...K9e(e),...loe(e,"href"),...Vcn(e)}}function d1e(e,t){return t?{[e]:t}:{}}function ndn(e,t){return gon.reduce((n,r)=>(!tdn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Ri(e[r])),n),{})}function coe(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var u;let o;if(!$p(s)||!(o=e.getScaleType(s)))return;const a=y5(i.aggregate),l=jse({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(Eln(l)){const c=e.vgField(s,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(s=>w5(s,!0)).join(" && ")}}}function f1e(e,t){if(t!==void 0)return{[e]:Ri(t)}}const lz="voronoi",e7e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(lz)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Sv(s))return st(Eon(s)),n;const o={name:e.getName(lz),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...K9e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{const d=u.name??"";d===e.component.mark[0].name?a=c:d.indexOf(lz)>=0&&(l=!0)}),l||n.splice(a+1,0,o),n}},t7e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!eoe(e.bind),parse:(e,t,n)=>u7e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=e7e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const c=Bi(`${r}_${l.field}`);n.filter(f=>f.name===c).length||n.unshift({name:c,...o?{init:jb(o[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${ut(l.field)}] : null`}]:[],bind:s[l.field]??s[l.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(u=>u.name===r+Uy)[0],o=r+xP,a=i.items.map(u=>Bi(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(s.update=`${l} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},zL="_toggle",n7e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+zL,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Uy,r=t.name+zL;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Q1(e)}}, `)+`${r} ? ${n} : null`}},rdn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Et(t.clear)?gv(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(t7e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Bi(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+Uy);r(i,"null"),n7e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+zL),r(i,"false"))}return n}},r7e={defined:e=>{const t=e.resolve==="global"&&e.bind&&eoe(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Nf;return t&&!n&&st(Con),t&&n},parse:(e,t,n)=>{const r=pn(n);if(r.select=Et(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},u7e(t,r),bt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=wt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=iz(t.bind)?t.bind.legend:"click",s=Et(i)?gv(i,"view"):wt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=iz(t.bind)&&t.bind.legend,s=o=>a=>{const l=pn(a);return l.markname=o,l};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Bi(o.field)}_legend`,l=`${r}_${a}`;if(n.filter(c=>c.name===l).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(f=>f.name===r+Uy),o=r+xP,a=i.items.filter(f=>f.hasLegend).map(f=>Bi(`${r}_${Bi(f.field)}_legend`)),u=`${a.map(f=>`${f} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(f=>({signal:f})),update:u}):a.length>0&&(s.update=u,delete s.value,delete s.on);const c=n.find(f=>f.name===r+zL),d=iz(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:d}):c.on[0].events=d),n}};function idn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Ko(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&r7e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const i7e="_translate_anchor",s7e="_translate_delta",sdn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=$m.defined(t),s=r+i7e,{x:o,y:a}=t.project.hasChannel;let l=gv(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+PE,u))),n.push({name:s,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?sG(e,zi):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?sG(e,Co):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+s7e,value:{},on:[{events:l,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&h1e(e,t,o,"width",n),a!==void 0&&h1e(e,t,a,"height",n),n}};function h1e(e,t,n,r,i){const s=t.name,o=s+i7e,a=s+s7e,l=n.channel,u=$m.defined(t),c=i.filter(E=>E.name===n.signals[u?"data":"visual"])[0],d=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(l),h=f&&f.get("type"),p=f&&f.get("reverse"),m=u?l===zi?p?"":"-":p?"-":"":"",g=`${o}.extent_${l}`,y=`${m}${a}.${l} / ${u?`${d}`:`span(${g})`}`,v=!u||!f?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=u?h==="pow"?`, ${f.get("exponent")??1}`:h==="symlog"?`, ${f.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${_})`;c.on.push({events:{signal:a},update:u?w:`clampRange(${w}, 0, ${d})`})}const o7e="_zoom_anchor",a7e="_zoom_delta",odn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=$m.defined(t),s=r+a7e,{x:o,y:a}=t.project.hasChannel,l=ut(e.scaleName(zi)),u=ut(e.scaleName(Co));let c=gv(t.zoom,"scope");return i||(c=c.map(d=>(d.markname=r+PE,d))),n.push({name:r+o7e,on:[{events:c,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(d=>d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&p1e(e,t,o,"width",n),a!==void 0&&p1e(e,t,a,"height",n),n}};function p1e(e,t,n,r,i){const s=t.name,o=n.channel,a=$m.defined(t),l=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],u=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),d=c&&c.get("type"),f=a?sG(e,o):l.name,h=s+a7e,p=`${s}${o7e}.${o}`,m=!a||!c?"zoomLinear":d==="log"?"zoomLog":d==="symlog"?"zoomSymlog":d==="pow"?"zoomPow":"zoomLinear",g=a?d==="pow"?`, ${c.get("exponent")??1}`:d==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${f}, ${p}, ${h}${g})`;l.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${u})`})}const Bb="_store",Uy="_tuple",adn="_modify",l7e="vlSelectionResolve",B5=[Ucn,Bcn,Fcn,n7e,t7e,$m,r7e,rdn,sdn,odn,e7e];function ldn(e){let t=e.parent;for(;t&&!Ku(t);)t=t.parent;return t}function Q1(e,{escape:t}={escape:!0}){let n=t?ut(e.name):e.name;const r=ldn(e);if(r){const{facet:i}=r;for(const s of Vc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${ut(r.vgField(s))}])`)}return n}function doe(e){return Ko(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function u7e(e,t){(Et(t.select)||!t.select.on)&&delete e.events,(Et(t.select)||!t.select.clear)&&delete e.clear,(Et(t.select)||!t.select.toggle)&&delete e.toggle}function oG(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...oG(e.object)),t.push(...oG(e.property))),t)}function c7e(e){return e.object.type==="MemberExpression"?c7e(e.object):e.object.name==="datum"}function d7e(e){const t=Nie(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&c7e(r)&&n.add(oG(r).slice(1).join("."))}),n}class hT extends Xr{clone(){return new hT(null,this.model,pn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=UL(this.model,this.filter,this),this._dependentFields=d7e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function udn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Bi(i.name),o=i.select,a=Et(o)?o:o.type,l=bt(o)?pn(o):{type:a},u=r[a];for(const f in u)f==="fields"||f==="encodings"||(f==="mark"&&(l[f]={...u[f],...l[f]}),(l[f]===void 0||l[f]===!0)&&(l[f]=pn(u[f]??l[f])));const c=n[s]={...l,name:s,type:a,init:i.value,bind:i.bind,events:Et(l.on)?gv(l.on,"scope"):wt(pn(l.on))},d=pn(i);for(const f of B5)f.defined(c)&&f.parse&&f.parse(e,c,d)}return n}function f7e(e,t,n,r="datum"){const i=Et(t)?t:t.param,s=Bi(i),o=ut(s+Bb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const f=n??e.component.data.raw,h=a.project.timeUnit.clone();f.parent?h.insertAsParentOf(f):f.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${ut(a.resolve)})`,c=`${l}${o}, ${r}${u}`,d=`length(data(${o}))`;return t.empty===!1?`${d} && ${c}`:`!${d} || ${c}`}function h7e(e,t,n){const r=Bi(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&st(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ut(s)}.`);else if(i&&!s){const a=o.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,st((a.length?"Multiple ":"No ")+`matching ${ut(i)} encoding found for selection ${ut(n.param)}. Using "field": ${ut(s)}.`)):s=a[0].field}return`${o.name}[${ut(ud(s))}]`}function cdn(e,t){for(const[n,r]of Ly(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new au(new hT(t,e,{param:n}),i,ds.Lookup,e.component.data.outputNodeRefCounts)}}function UL(e,t,n){return SA(t,r=>Et(r)?r:Ban(r)?f7e(e,r,n):TBe(r))}function ddn(e,t){if(e)return Ge(e)&&!s0(e)?e.map(n=>Wse(n,t)).join(", "):e}function uz(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function _2(e,t,n,r={header:!1}){var d,f;const{disable:i,orient:s,scale:o,labelExpr:a,title:l,zindex:u,...c}=e.combine();if(!i){for(const h in c){const p=qln[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(EP(m)){const{condition:g,...y}=m,v=wt(g),_=zve[h];if(_){const{vgProp:w,part:E}=_,S=[...v.map(x=>{const{test:T,...I}=x;return{test:UL(null,T),...I}}),y];uz(c,E,w,S),delete c[h]}else if(_===null){const w={signal:v.map(E=>{const{test:S,...x}=E;return`${UL(null,S)} ? ${Tve(x)} : `}).join("")+Tve(y)};c[h]=w}}else if(Mt(m)){const g=zve[h];if(g){const{vgProp:y,part:v}=g;uz(c,v,y,m),delete c[h]}}Kn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Zr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Cs(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(f=(d=c.encode)==null?void 0:d.labels)!=null&&f.update&&Mt(c.encode.labels.update.text)&&(p=Ob(a,"datum.label",c.encode.labels.update.text.signal)),uz(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of r9e)e.hasAxisPart(p)||delete c.encode[p];Zr(c.encode)&&delete c.encode}const h=ddn(l,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Cs(u,0)}}}}function p7e(e){const{axes:t}=e.component,n=[];for(const r of Rg)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function fdn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>_2(i,"grid",t)),...r.map(i=>_2(i,"grid",t)),...n.map(i=>_2(i,"main",t)),...r.map(i=>_2(i,"main",t))].filter(i=>i)}function m1e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...et(o),...et(a)]),u={};for(const c of l.values())u[c]={signal:`${r.signal} === "${s}" ? ${tf(o[c])} : ${tf(a[c])}`};return u}return t[i]})])}function hdn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:RBe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Mt(n)?"axisOrient":`axis${fP(n)}`,a=[...i,...i.map(u=>s+u.substr(4))],l=["axis",o,s];return{vlOnlyAxisConfig:m1e(a,r,e,n),vgAxisConfig:m1e(l,r,e,n),axisConfigStyle:pdn([...l,...a],r)}}function pdn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=wt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function aG(e,t,n,r={}){var s;const i=rBe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const g1e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??mdn(n,e),gridScale:({model:e,channel:t})=>gdn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||g7e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||m7e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??vdn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??bdn(t.type,n,ot(t)&&!!t.timeUnit,ot(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??wdn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:Edn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=y7e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return sBe(i?[jve(i)]:[],ot(o)?[jve(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>xdn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Sdn(n,t)};function mdn(e,t){return!So(e)&&ot(t)&&!Ei(t==null?void 0:t.bin)&&!Bo(t==null?void 0:t.bin)}function gdn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function ydn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Mt(s)?s:yR(s);{const{configValue:o}=aG("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?yR(o):n===zi&&Kn([Mse,Dse],e.type)&&!(ot(e)&&e.timeUnit)?270:void 0}}function lG(e){return`(((${e.signal} % 360) + 360) % 360)`}function m7e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Mt(e)){const i=lG(e),s=Mt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Mt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Mt(e)){const i=lG(e),s=Mt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Mt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function g7e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Mt(e)){const o=lG(e),a=Mt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Mt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function vdn(e,t){if(t==="x"&&Kn(["quantitative","temporal"],e))return!0}function bdn(e,t,n,r){if(n&&!bt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function _dn(e){return e==="x"?"bottom":"left"}function wdn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!So(t)&&t!=="log"){if(ot(e)){if(Ei(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Kn(["month","hours","day","quarter"],(i=xo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Edn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(ot(t)){const{timeUnit:n}=t;if(n){const r=EBe(n);if(r)return{signal:r}}}}function y7e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return oBe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function xdn(e,t){const n=e.values;if(Ge(n))return n9e(t,n);if(Mt(n))return n}function Sdn(e,t){return e==="rect"&&DL(t)?1:0}class Kx extends Xr{clone(){return new Kx(null,pn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=d7e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(E_(r)&&WBe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,l=a.map((u,c)=>`${TBe({field:s,timeUnit:o,equal:u})} ? ${c} : `).join("")+a.length;t=new Kx(t,{calculate:l,as:Xx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${tr(this.transform)}`}}function Xx(e,t,n){return pt(e,{prefix:t,suffix:"sort_index",...n})}function z5(e,t){return Kn(["top","bottom"],t)?"column":Kn(["left","right"],t)||e==="row"?"row":"column"}function Qx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Cs((t||{})[e],i[e],n.header[e])}function U5(e,t,n,r){const i={};for(const s of e){const o=Qx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const foe=["row","column"],hoe=["header","footer"];function Tdn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=U5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=z5(t,a),u=yR(o);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...b7e(u,l),...v7e(l,u,s),..._7e(r,i,t,hun,w9e)}}}function v7e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=g7e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function b7e(e,t){const n=m7e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Cdn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of hoe)if(n[i])for(const s of n[i]){const o=Idn(e,t,i,n,s);o!=null&&r.push(o)}return r}function Adn(e,t){const{sort:n}=e;return Mm(n)?{field:pt(n,{expr:"datum"}),order:n.order??"ascending"}:Ge(n)?{field:Xx(e,t,{expr:"datum"}),order:"ascending"}:{field:pt(e,{expr:"datum"}),order:n??"ascending"}}function uG(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:l}=U5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=Use({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=z5(t,a);return{text:{signal:l?Ob(Ob(l,"datum.label",u),"datum.value",pt(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...b7e(s,c),...v7e(c,s,o),..._7e(n,e,t,pun,E9e)}}function Idn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:d}=U5(["labelOrient"],o.header,a,t);(t==="row"&&!Kn(["top","bottom"],d)||t==="column"&&!Kn(["left","right"],d))&&(s=uG(o,t,a))}const l=Ku(e)&&!bP(e.facet),u=i.axes,c=(u==null?void 0:u.length)>0;if(s||c){const d=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Adn(o,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[d]:i.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const Rdn={column:{start:0,end:1},row:{start:1,end:0}};function kdn(e,t){return Rdn[t][e]}function Pdn(e,t){const n={};for(const r of Vc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=U5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=z5(r,o),l=kdn(s,a);l!==void 0&&(n[a]=l)}}return Zr(n)?void 0:n}function _7e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=Qx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function poe(e){return[...AO(e,"width"),...AO(e,"height"),...AO(e,"childWidth"),...AO(e,"childHeight")]}function AO(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(So(o)&&xv(a)){const l=e.scaleName(n);return Ku(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[y1e(l,a)]:[y1e(l,a),{name:i,update:w7e(l,s,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=tG(e.config.view,s?"width":"height"),l=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function y1e(e,t){const n=`${e}_step`;return Mt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function w7e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Cs(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${tf(o)}, ${tf(s)}) * ${e}_step`}function E7e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function x7e(e,t){return et(e).reduce((n,r)=>({...n,...fT({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>Ri(i.value),invalidValueRef:void 0})}),{})}function S7e(e,t){if(Ku(t))return e==="theta"?"independent":"shared";if(gT(t))return"shared";if(woe(t))return As(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function moe(e,t){const n=e.scale[t],r=As(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&st(lan(t)),"independent"):e[r][t]||"shared"}const Ndn={...yun,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},T7e=et(Ndn);class Odn extends Pg{}const v1e={symbols:Ddn,gradient:Mdn,labels:$dn,entries:Ldn};function Ddn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:l,mark:u}=n,c=o.filled&&u!=="trail";let d={...bon({},n,fln),...Q9e(n,{filled:c})};const f=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,m=f===void 0?C7e(a.opacity)??o.opacity:void 0;if(d.fill){if(r==="fill"||c&&r===gu)delete d.fill;else if(d.fill.field)h?delete d.fill:(d.fill=Ri(l.legend.symbolBaseFillColor??"black"),d.fillOpacity=Ri(m??1));else if(Ge(d.fill)){const g=cG(a.fill??a.color)??o.fill??(c&&o.color);g&&(d.fill=Ri(g))}}if(d.stroke){if(r==="stroke"||!c&&r===gu)delete d.stroke;else if(d.stroke.field||p)delete d.stroke;else if(Ge(d.stroke)){const g=Cs(cG(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(d.stroke={value:g})}}if(r!==Ig){const g=ot(t)&&I7e(n,i,t);g?d.opacity=[{test:g,...Ri(m??1)},Ri(l.legend.unselectedOpacity)]:m&&(d.opacity=Ri(m))}return d={...d,...e},Zr(d)?void 0:d}function Mdn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?C7e(o.opacity)||s.opacity:void 0;return u&&(a.opacity=Ri(u)),a={...a,...e},Zr(a)?void 0:a}function $dn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=ot(t)?I7e(n,i,t):void 0,l=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=s;let d;Fb(c)?d=nf({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:o}):u===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?d=nf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&ot(t)&&t.timeUnit===void 0&&(d=nf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const f={...l?{opacity:l}:{},...d?{text:d}:{},...e};return Zr(f)?void 0:f}function Ldn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function C7e(e){return A7e(e,(t,n)=>Math.max(t,n.value))}function cG(e){return A7e(e,(t,n)=>Cs(t,n.value))}function A7e(e,t){if(Oln(e))return wt(e.condition).reduce(t,e.value);if(kf(e))return e.value}function I7e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=ut(n.field);return r.map(s=>`(!length(data(${ut(Bi(s)+Bb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const b1e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return VBe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return HBe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Hdn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??qdn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??jdn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>kE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(RE(n)&&$h(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Fdn(t,e)};function Fdn(e,t){const n=e.values;if(Ge(n))return n9e(t,n);if(Mt(n))return n}function jdn(e,t,n,r){if(t!=="shape"){const i=cG(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Bdn(e){const{legend:t}=e;return Cs(t.type,zdn(e))}function zdn({channel:e,timeUnit:t,scaleType:n}){if(RE(e)){if(Kn(["quarter","month","day"],t))return"symbol";if($h(n))return"gradient"}return"symbol"}function Udn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Vdn(n,t)}function Vdn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Hdn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if($h(i))return n==="horizontal"?r==="top"||r==="bottom"?_1e(t,"width",o,s):o:_1e(t,"height",l,a)}function _1e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function qdn(e){if(Kn(["quantile","threshold","log","symlog"],e))return"greedy"}function R7e(e){const t=Wi(e)?Wdn(e):Xdn(e);return e.component.legends=t,t}function Wdn(e){const{encoding:t}=e,n={};for(const r of[gu,...S9e]){const i=Qs(t[r]);!i||!e.getScaleComponent(r)||r===yu&&ot(i)&&i.type===dT||(n[r]=Kdn(e,r))}return n}function Gdn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Ydn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Kdn(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Odn({},Gdn(e,t));idn(e,t,a);const l=n!==void 0?!n:o.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),c=Qs(i[t]),d=ot(c)?(w=xo(c.timeUnit))==null?void 0:w.unit:void 0,f=n.orient||s.legend.orient||"right",h=Bdn({legend:n,channel:t,timeUnit:d,scaleType:u}),p=Udn({legend:n,legendType:h,orient:f,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:u,orient:f,legendType:h,direction:p};for(const E of T7e){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const S=E in b1e?b1e[E](m):n[E];if(S!==void 0){const x=Ydn(S,E,n,e.fieldDef(t));(x||s.legend[E]===void 0)&&a.set(E,S,x)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const S=x7e(g[E]??{},e),x=E in v1e?v1e[E](S,_):S;x!==void 0&&!Zr(x)&&(v[E]={...y!=null&&y.length&&ot(c)?{name:`${Bi(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:x})}return Zr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Xdn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){R7e(r);for(const i of et(r.component.legends))n.legend[i]=moe(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=k7e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of et(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function k7e(e,t){var s,o,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of T7e){const c=By(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(d,f)=>{switch(u){case"symbolType":return Qdn(d,f);case"title":return aBe(d,f);case"type":return i=!0,Ru("symbol")}return $5(d,f,u,"legend")});e.setWithExplicit(u,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&IL(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&IL(e.explicit,["encode","gradient"])),e}function Qdn(e,t){return t.value==="circle"?t:e}function Jdn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function P7e(e){const t=e.component.legends,n={};for(const i of et(t)){const s=e.getScaleComponent(i),o=ei(s.get("domains"));if(n[o])for(const a of n[o])k7e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Ko(n).flat().map(i=>Zdn(i,e.config)).filter(i=>i!==void 0)}function Zdn(e,t){var o,a,l;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const u=s.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!s.stroke&&(u.stroke={value:"transparent"});for(const c of S9e)s[c]&&delete u[c]}if(s.title||delete s.title,r!==void 0){let u=r;(l=(a=s.encode)==null?void 0:a.labels)!=null&&l.update&&Mt(s.encode.labels.update.text)&&(u=Ob(r,"datum.label",s.encode.labels.update.text.signal)),Jdn(s,"labels","text",{signal:u})}return s}}function efn(e){return gT(e)||woe(e)?tfn(e):N7e(e)}function tfn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),N7e(e))}function N7e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const l=Mt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Kn(o,l)||o.push(l),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const nfn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class O7e extends Pg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function D7e(e){e.component.projection=Wi(e)?rfn(e):ofn(e)}function rfn(e){if(e.hasProjection){const t=xa(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?ifn(e):void 0,s=new O7e(e.projectionName(!0),{...xa(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function ifn(e){const t=[],{encoding:n}=e;for(const r of[[Yf,Gf],[cd,Kf]])(Qs(n[r[0]])||Qs(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(yu)&&e.typedFieldDef(yu).type===dT&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(ds.Main)),t}function sfn(e,t){const n=use(nfn,i=>!!(!Vt(e.explicit,i)&&!Vt(t.explicit,i)||Vt(e.explicit,i)&&Vt(t.explicit,i)&&qu(e.get(i),t.get(i))));if(qu(e.size,t.size)){if(n)return e;if(qu(e.explicit,{}))return t;if(qu(t.explicit,{}))return e}return null}function ofn(e){if(e.children.length===0)return;let t;for(const r of e.children)D7e(r);const n=use(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=sfn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new O7e(r,t.specifiedProjection,t.size,pn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function afn(e,t,n,r){if(wP(t,n)){const i=Wi(e)?e.axis(n)??e.legend(n)??{}:{},s=pt(t,{expr:"datum"}),o=pt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:pt(t,{binSuffix:"range",forAs:!0}),formula:vP(s,o,i.format,i.formatType,r)}}return{}}function M7e(e,t){return`${Z8e(e)}_${t}`}function lfn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function goe(e,t,n){const r=k5(n,void 0)??{},i=M7e(r,t);return e.getName(`${i}_bins`)}function ufn(e){return"as"in e}function w1e(e,t,n){let r,i;ufn(e)?r=Et(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[pt(e,{forAs:!0}),pt(e,{binSuffix:"end",forAs:!0})];const s={...k5(t,void 0)},o=M7e(s,e.field),{signal:a,extentSignal:l}=lfn(n,o);if(v5(s.extent)){const c=s.extent;i=h7e(n,c.param,c),delete s.extent}const u={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:o,binComponent:u}}class Jh extends Xr{clone(){return new Jh(null,pn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(bl(s)&&Ei(s.bin)){const{key:a,binComponent:l}=w1e(s,s.bin,n);i[a]={...l,...i[a],...afn(n,s,o,n.config)}}return i},{});return Zr(r)?null:new Jh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=w1e(n,n.bin,r);return new Jh(t,{[i]:s})}merge(t,n){for(const r of et(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Mh([...this.bins[r].as,...t.bins[r].as],tr)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Ko(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Ko(this.bins).map(t=>t.field))}hash(){return`Bin ${tr(this.bins)}`}assemble(){return Ko(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:ud(t.field),as:r,signal:t.signal,...v5(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:ud(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:pt({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function cfn(e,t,n,r){var s;const i=Wi(r)?r.encoding[Mp(t)]:void 0;if(bl(n)&&Wi(r)&&YBe(n,i,r.markDef,r.config)){e.add(pt(n,{})),e.add(pt(n,{suffix:"end"}));const{mark:o,markDef:a,config:l}=r,u=jy({fieldDef:n,markDef:a,config:l});vR(o)&&u!==.5&&As(t)&&(e.add(pt(n,{suffix:L5})),e.add(pt(n,{suffix:F5}))),n.bin&&wP(n,t)&&e.add(pt(n,{binSuffix:"range"}))}else if(H8e(t)){const o=V8e(t);e.add(r.getName(o))}else e.add(pt(n));return E_(n)&&Zan((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function dfn(e,t){for(const n of et(t)){const r=t[n];for(const i of et(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class yf extends Xr{clone(){return new yf(null,new Set(this.dimensions),pn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:l,field:u}=o;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([pt(o,{forAs:!0})]);else{if(ug(l)||Ev(l)){const c=ug(l)?"argmin":"argmax",d=l[c];i[d]??(i[d]={}),i[d][c]=new Set([pt({op:c,field:d},{forAs:!0})])}else i[u]??(i[u]={}),i[u][l]=new Set([pt(o,{forAs:!0})]);$p(a)&&n.scaleDomain(a)==="unaggregated"&&(i[u]??(i[u]={}),i[u].min=new Set([pt({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([pt({field:u,aggregate:"max"},{forAs:!0})]))}else cfn(s,a,o,n)}),s.size+et(i).length===0)?null:new yf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:l}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([l||pt(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([l||pt(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+et(i).length===0?null:new yf(t,r,i)}merge(t){return M8e(this.dimensions,t.dimensions)?(dfn(this.measures,t.measures),!0):(San("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...et(this.measures)])}producedFields(){const t=new Set;for(const n of et(this.measures))for(const r of et(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${tr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of et(this.measures))for(const o of et(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:ud(s));return{type:"aggregate",groupby:[...this.dimensions].map(ud),ops:t,fields:n,as:r}}}class pT extends Xr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Vc){const o=n.facet[s];if(o){const{bin:a,sort:l}=o;this[s]={name:n.getName(`${s}_domain`),fields:[pt(o),...Ei(a)?[pt(o,{binSuffix:"end"})]:[]],...Mm(l)?{sortField:l}:Ge(l)?{sortIndexField:Xx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Vc)this[n]&&(t+=` ${n.charAt(0)}:${tr(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Vc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Vc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Rg){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(So(i)&&xv(s)){const o=V5(this.childModel,n),a=_oe(o);a?t[n]=a:st(xse(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=C5,field:d}=l;s.push(d),o.push(c),a.push(pt(l,{forAs:!0}))}else u&&(s.push(u),o.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const u of foe){for(const c of hoe){const d=(r[u]&&r[u][c])??[];for(const f of d)if(((l=f.axes)==null?void 0:l.length)>0){s[u]=!0;break}}if(s[u]){const c=`length(data("${this.facet.name}"))`,d=u==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[Dm,Om])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function E1e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function ffn(e,t){const n=fse(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=E1e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=E1e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return st(Oon(t)),null}function hfn(e){const t={};return aM(e.filter,n=>{if(SBe(n)){let r=null;Ase(n)?r=Lu(n.equal):Rse(n)?r=Lu(n.lte):Ise(n)?r=Lu(n.lt):kse(n)?r=Lu(n.gt):Pse(n)?r=Lu(n.gte):Nse(n)?r=n.range[0]:Ose(n)&&(r=(n.oneOf??n.in)[0]),r&&(__(r)?t[n.field]="date":xr(r)?t[n.field]="number":Et(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function pfn(e){const t={};function n(r){Wx(r)?t[r.field]="date":r.type==="quantitative"&&con(r.aggregate)?t[r.field]="number":jx(r.field)>1?r.field in t||(t[r.field]="flatten"):E_(r)&&Mm(r.sort)&&jx(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Wi(e)||Ku(e))&&e.forEachFieldDef((r,i)=>{if(bl(r))n(r);else{const s=v_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Wi(e)){const{mark:r,markDef:i,encoding:s}=e;if(Sv(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];ot(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function mfn(e){const t={};if(Wi(e)&&e.component.selection)for(const n of et(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&jx(i.field)>1&&(t[i.field]="flatten")}return t}class Pa extends Xr{clone(){return new Pa(null,pn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${tr(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!ny(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of et(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:st(Pve(a,r[a],l.value)))}for(const a of et(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:st(Pve(a,n[a],l)))}const s=new Pg(n,r);i.copyAll(s);const o={};for(const a of et(s.combine())){const l=s.get(a);l!==null&&(o[a]=l)}return et(o).length===0||i.parseNothing?null:new Pa(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of et(this._parse)){const r=this._parse[n];jx(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(et(this._parse))}dependentFields(){return new Set(et(this._parse))}assembleTransforms(t=!1){return et(this._parse).filter(n=>t?jx(n)>1:!0).map(n=>{const r=ffn(n,this._parse[n]);return r?{type:"formula",expr:r,as:uT(n)}:null}).filter(n=>n!==null)}}class Vy extends Xr{clone(){return new Vy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Nf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Nf}}}class SP extends Xr{clone(){return new SP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${tr(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class TP extends Xr{clone(){return new TP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${tr(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class zb extends Xr{constructor(t){super(null),t??(t={name:"source"});let n;if(ny(t)||(n=t.format?{...ou(t.format,["parse"])}:{}),bR(t))this._data={values:t.values};else if(Gx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Kn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else U9e(t)?this._data={values:[{type:"Sphere"}]}:(B9e(t)||ny(t))&&(this._data={});this._generator=ny(t),t.name&&(this._name=t.name),n&&!Zr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var x1e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},gfn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},w2;function yoe(e){return e instanceof zb||e instanceof SP||e instanceof TP}class voe{constructor(){w2.set(this,void 0),x1e(this,w2,!1,"f")}setModified(){x1e(this,w2,!0,"f")}get modifiedFlag(){return gfn(this,w2,"f")}}w2=new WeakMap;class x_ extends voe{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class boe extends voe{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class yfn extends boe{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of et(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class vfn extends boe{constructor(t){super(),this.requiresSelectionId=t&&doe(t)}run(t){t instanceof Vy&&(this.requiresSelectionId&&(yoe(t.parent)||t.parent instanceof yf||t.parent instanceof Pa)||(this.setModified(),t.remove()))}}class bfn extends voe{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Qh&&(r=t.producedFields(),cse(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class _fn extends boe{constructor(){super()}run(t){t instanceof au&&!t.isRequired()&&(this.setModified(),t.remove())}}class wfn extends x_{run(t){if(!yoe(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Pa)if(t instanceof Pa)this.setModified(),t.merge(n);else{if(dse(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Efn extends x_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Pa);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const l of et(a))l in i?i[l]!==a[l]&&s.add(l):i[l]=a[l]}for(const o of s)delete i[o];if(!Zr(i)){this.setModified();const o=new Pa(t,i);for(const a of n){if(a instanceof Pa)for(const l of et(i))delete a.parse[l];t.removeChild(a),a.parent=o,a instanceof Pa&&et(a.parse).length===0&&a.remove()}}}}}class xfn extends x_{run(t){t instanceof au||t.numChildren()>0||t instanceof pT||t instanceof zb||(this.setModified(),t.remove())}}class Sfn extends x_{run(t){const n=t.children.filter(i=>i instanceof Qh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Tfn extends x_{run(t){const n=t.children.filter(i=>i instanceof yf),r={};for(const i of n){const s=tr(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of et(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Cfn extends x_{constructor(t){super(),this.model=t}run(t){const n=!(yoe(t)||t instanceof hT||t instanceof Pa||t instanceof Vy),r=[],i=[];for(const s of t.children)s instanceof Jh&&(n&&!dse(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Jh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Afn extends x_{run(t){const n=[...t.children];if(!Fx(n,o=>o instanceof au)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof au){let a=o;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof au)a=l;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class S_ extends Xr{clone(){return new S_(null,pn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Mh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??pt(t)}hash(){return`JoinAggregateTransform ${tr(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class Jx extends Xr{clone(){return new Jx(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const l=n.reduceFieldDef((u,c,d)=>{const f=$p(d)&&n.getScaleComponent(d);if(f){const h=f.get("type"),{aggregate:p}=c,m=jse({scaleChannel:d,markDef:s,config:i,scaleType:h,isCountAggregate:y5(p)});m!=="show"&&m!=="always-valid"&&(u[c.field]=c)}return u},{});return et(l).length?new Jx(t,l):null}dependentFields(){return new Set(et(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${tr(this.filter)}`}assemble(){const t=et(this.filter).reduce((n,r)=>{const i=this.filter[r],s=pt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${dG(s)}))`):i.type==="quantitative"&&n.push(dG(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function dG(e){return`isValid(${e}) && isFinite(+${e})`}function Ifn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=pt(r);return i&&t.push(i),t},[])}function Rfn(e){return Ge(e)&&e.every(t=>Et(t))&&e.length>1}class Lm extends Xr{clone(){return new Lm(null,pn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const d of n.sort)a.push(d.field),l.push(Cs(d.order,"ascending"));const u={field:a,order:l};let c;return Rfn(s)?c=s:Et(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Lm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:l}=r,u=s.map(h=>{const p=i[h];return Pf(p)}).filter(h=>!!h),c=Ifn(n),d=n.encoding.order;let f;if(Ge(d)||ot(d))f=iBe(d);else{const h=KBe(d)?d.sort:o==="y"?"descending":"ascending";f=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new Lm(t,{dimensionFieldDefs:u,stackField:n.vgField(o),facetby:[],stackby:c,sort:f,offset:a,impute:l,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${tr(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[pt(i,{binSuffix:"mid"})]:[pt(i,{}),pt(i,{binSuffix:"end"})]:[pt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:l,as:u}=this._stack;if(l)for(const c of r){const{bandPosition:d=.5,bin:f}=c;if(f){const h=pt(c,{expr:"datum"}),p=pt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${dG(h)} ? ${d}*${h}+${1-d}*${p} : ${h}`,as:pt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:pt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:u,offset:a}),t}}class mT extends Xr{clone(){return new mT(null,pn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Mh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??pt(t)}hash(){return`WindowTransform ${tr(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const d of this.transform.window)n.push(d.op),r.push(this.getDefaultName(d)),i.push(d.param===void 0?null:d.param),t.push(d.field===void 0?null:d.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(d=>wse(d)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)a.push(d.field),l.push(d.order??"ascending");const u={field:a,order:l},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:u,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function kfn(e){function t(n){if(!(n instanceof pT)){const r=n.clone();if(r instanceof au){const i=hG+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof yf||r instanceof Lm||r instanceof mT||r instanceof S_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function fG(e){if(e instanceof pT)if(e.numChildren()===1&&!(e.children[0]instanceof au)){const t=e.children[0];(t instanceof yf||t instanceof Lm||t instanceof mT||t instanceof S_)&&t.addDimensions(e.fields),t.swapWithParent(),fG(e)}else{const t=e.model.component.data.main;$7e(t);const n=kfn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(fG)}function $7e(e){if(e instanceof au&&e.type===ds.Main&&e.numChildren()===1){const t=e.children[0];t instanceof pT||(t.swapWithParent(),$7e(e))}}const hG="scale_",IO=5;function pG(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!pG(t.children))return!1}return!0}function Id(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function S1e(e,t,n){let r=e.sources,i=!1;return i=Id(new _fn,r)||i,i=Id(new vfn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Id(new xfn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Id(new wfn,r)||i,i=Id(new Cfn(t),r)||i,i=Id(new bfn,r)||i,i=Id(new Efn,r)||i,i=Id(new Tfn,r)||i,i=Id(new Sfn,r)||i,i=Id(new yfn,r)||i,i=Id(new Afn,r)||i),e.sources=r,i}function Pfn(e,t){pG(e.sources);let n=0,r=0;for(let i=0;i<IO&&S1e(e,t,!0);i++)n++;e.sources.map(fG);for(let i=0;i<IO&&S1e(e,t,!1);i++)r++;pG(e.sources),Math.max(n,r)===IO&&st(`Maximum optimization runs(${IO}) reached.`)}class po{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new po(()=>t(n))}}function L7e(e){Wi(e)?Nfn(e):Ofn(e)}function Nfn(e){const t=e.component.scales;for(const n of et(t)){const r=Mfn(e,n);if(t[n].setWithExplicit("domains",r),Lfn(e,n),e.component.data.isFaceted){let s=e;for(;!Ku(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)wm(a)&&(a.data=hG+a.data.replace(hG,""))}}}function Ofn(e){for(const n of e.children)L7e(n);const t=e.component.scales;for(const n of et(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=By(r,o.getWithExplicit("domains"),"domains","scale",mG);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&st(Ron),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Dfn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=T1e(t,n);if(!i){st(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=T1e(t,n);if(i)return"unaggregated"}return e}function Mfn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Dfn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Qs(r.x2)?Qs(r.x)?By(Xg(n,i,e,"x"),Xg(n,i,e,"x2"),"domain","scale",mG):Xg(n,i,e,"x2"):t==="y"&&Qs(r.y2)?Qs(r.y)?By(Xg(n,i,e,"y"),Xg(n,i,e,"y2"),"domain","scale",mG):Xg(n,i,e,"y2"):Xg(n,i,e,t)}function $fn(e,t,n){return e.map(r=>({signal:`{data: ${P5(r,{timeUnit:n,type:t})}}`}))}function cz(e,t,n){var i;const r=(i=xo(n))==null?void 0:i.unit;return t==="temporal"||r?$fn(e,t,r):[e]}function Xg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:l}=n,u=Qs(i[r]),{type:c}=u,d=u.timeUnit,f=kcn({invalid:fp("invalid",s,a),isPath:Sv(o)});if(Jan(t)){const m=Xg(e,void 0,n,r),g=cz(t.unionWith,c,d);return mh([...g,...m.value])}else{if(Mt(t))return mh([t]);if(t&&t!=="unaggregated"&&!PBe(t))return mh(cz(t,c,d))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Ru([[0,1]]);const m=n.requestDataName(f);return Ru([{data:m,field:n.vgField(r,{suffix:"start"})},{data:m,field:n.vgField(r,{suffix:"end"})}])}const h=$p(r)&&ot(u)?Ffn(n,r,e):void 0;if(Lp(u)){const m=cz([u.datum],c,d);return Ru(m)}const p=u;if(t==="unaggregated"){const{field:m}=u;return Ru([{data:n.requestDataName(f),field:pt({field:m,aggregate:"min"})},{data:n.requestDataName(f),field:pt({field:m,aggregate:"max"})}])}else if(Ei(p.bin)){if(So(e))return Ru(e==="bin-ordinal"?[]:[{data:gR(h)?n.requestDataName(f):n.requestDataName(ds.Raw),field:n.vgField(r,wP(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!bt(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:m}=p;if(Ei(m)){const g=goe(n,p.field,m);return Ru([new po(()=>{const y=n.getSignalName(g);return`[${y}.start, ${y}.stop]`})])}else return Ru([{data:n.requestDataName(f),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Kn(["time","utc"],e)){const m=i[Mp(r)];if(YBe(p,m,s,a)){const g=n.requestDataName(f),y=jy({fieldDef:p,fieldDef2:m,markDef:s,config:a}),v=vR(o)&&y!==.5&&As(r);return Ru([{data:g,field:n.vgField(r,v?{suffix:L5}:{})},{data:g,field:n.vgField(r,{suffix:v?F5:"end"})}])}}return Ru(h?[{data:gR(h)?n.requestDataName(f):n.requestDataName(ds.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(f),field:n.vgField(r)}])}function dz(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":C5),...r?{field:ud(r)}:{},...i?{order:i}:{}}}function Lfn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=PBe(r)&&r,o=b_(i)&&v5(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Ffn(e,t,n){if(!So(n))return;const r=e.fieldDef(t),i=r.sort;if(WBe(i))return{op:"min",field:Xx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Mm(i)){const a=s&&!o.has(i.field);return dz(i,a)}else if(kln(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:c,field:d}=u,f=s&&!o.has(d);if(ug(c)||Ev(c))return dz({field:pt(u),order:l},f);if(wse(c)||!c)return dz({op:c,field:d,order:l},f)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Kn(["ascending",void 0],i))return!0}}function T1e(e,t){const{aggregate:n,type:r}=e;return n?Et(n)&&!fon.has(n)?{valid:!1,reason:tan(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:nan(e)}:{valid:!0}:{valid:!1,reason:ean(e)}}function mG(e,t,n,r){return e.explicit&&t.explicit&&st(aan(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function jfn(e){const t=Mh(e.map(o=>{if(wm(o)){const{sort:a,...l}=o;return l}return o}),tr),n=Mh(e.map(o=>{if(wm(o)){const a=o.sort;return a!==void 0&&!gR(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),tr);if(t.length===0)return;if(t.length===1){const o=e[0];if(wm(o)&&n.length>0){let a=n[0];if(n.length>1){st(Ove);const l=n.filter(u=>bt(u)&&"op"in u&&u.op!=="min");n.every(u=>bt(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(bt(a)&&"field"in a){const l=a.field;o.field===l&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Mh(n.map(o=>gR(o)||!("op"in o)||Et(o.op)&&o.op in lon?o:(st(uan(o)),!0)),tr);let i;r.length===1?i=r[0]:r.length>1&&(st(Ove),i=!0);const s=Mh(e.map(o=>wm(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function _oe(e){if(wm(e)&&Et(e.field))return e.field;if(hon(e)){let t;for(const n of e.fields)if(wm(n)&&Et(n.field)){if(!t)t=n.field;else if(t!==n.field)return st(can),t}return st(dan),t}else if(pon(e)){st(fan);const t=e.fields[0];return Et(t)?t:void 0}}function V5(e,t){const r=e.component.scales[t].get("domains").map(i=>(wm(i)&&(i.data=e.lookupDataSource(i.data)),i));return jfn(r)}function F7e(e){return gT(e)||woe(e)?e.children.reduce((t,n)=>t.concat(F7e(n)),C1e(e)):C1e(e)}function C1e(e){return et(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:l,range:u,reverse:c,...d}=i,f=Bfn(i.range,s,n,e),h=V5(e,n),p=a?$cn(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:f,...c!==void 0?{reverse:c}:{},...d}),t},[])}function Bfn(e,t,n,r){if(As(n)){if(xv(e))return{step:{signal:`${t}_step`}}}else if(bt(e)&&wm(e))return{...e,data:r.lookupDataSource(e.data)};return e}class j7e extends Pg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Kn([Uo.LOG,Uo.TIME,Uo.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Kn([Uo.LINEAR,Uo.SQRT,Uo.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(Ge(a)){const l=a[0],u=a[a.length-1];if(xr(l)&&xr(u))if(l<=0&&u>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const zfn=["range","scheme"];function Ufn(e){const t=e.component.scales;for(const n of _se){const r=t[n];if(!r)continue;const i=Vfn(n,e);r.setWithExplicit("range",i)}}function A1e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=vu(t),o=e.getName(s);if(bt(r)&&r.binned&&r.step!==void 0)return new po(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${l})`});if(Ei(r)){const a=goe(e,i,r);return new po(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(o)} / (${u})`})}}}function Vfn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const d of zfn)if(n[d]!==void 0){const f=JW(s,d),h=NBe(e,d);if(!f)st(dBe(s,d,e));else if(h)st(h);else switch(d){case"range":{const p=n.range;if(Ge(p)){if(As(e))return mh(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return po.fromName(y,g)}return m}))}else if(bt(p))return mh({data:t.requestDataName(ds.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return mh(p)}case"scheme":return mh(Hfn(n[d]))}}const o=e===zi||e==="xOffset"?"width":"height",a=r[o];if(pp(a)){if(As(e))if(So(s)){const d=z7e(a,t,e);if(d)return mh({step:d})}else st(fBe(o));else if(mP(e)){const d=e===yv?"x":"y";if(t.getScaleComponent(d).get("type")==="band"){const p=U7e(a,s);if(p)return mh(p)}}}const{rangeMin:l,rangeMax:u}=n,c=qfn(e,t);return(l!==void 0||u!==void 0)&&JW(s,"rangeMin")&&Ge(c)&&c.length===2?mh([l??c[0],u??c[1]]):Ru(c)}function Hfn(e){return Qan(e)?{scheme:e.name,...ou(e,["name"])}:{scheme:e}}function B7e(e,t,n,{center:r}={}){const i=vu(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Co&&Rf(n)?r?[po.fromName(a=>`${o(a)}/2`,s),po.fromName(a=>`-${o(a)}/2`,s)]:[po.fromName(o,s),0]:r?[po.fromName(a=>`-${o(a)}/2`,s),po.fromName(a=>`${o(a)}/2`,s)]:[0,po.fromName(o,s)]}function qfn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Qs(s[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case zi:case Co:{if(Kn(["point","band"],l)){const d=V7e(e,n,r.view);if(pp(d))return{step:z7e(d,t,e)}}return B7e(e,t,l)}case yv:case cT:return Wfn(e,t,l);case Ag:{const d=Kfn(i,r),f=Xfn(i,n,t,r);return Vx(l)?Yfn(d,f,Gfn(l,r,u,e)):[d,f]}case _d:return[0,Math.PI*2];case y_:return[0,360];case Wf:return[0,new po(()=>{const d=t.getSignalName(Ku(t.parent)?"child_width":"width"),f=t.getSignalName(Ku(t.parent)?"child_height":"height");return`min(${d},${f})/2`})];case _v:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case wv:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case yu:return"symbol";case gu:case Op:case Dp:return l==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Ig:case vv:case bv:return[r.scale.minOpacity,r.scale.maxOpacity]}}function z7e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=gse(n),o=r[s];if(C9e({step:e,offsetIsDiscrete:En(o)&&CBe(o.type)})==="offset"&&o9e(r,s)){const l=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(l.get("type")==="band"){const f=l.get("paddingInner")??l.get("padding")??0,h=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${f}, ${h})`}const d=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${von(d)})`}}else return e.step}function U7e(e,t){if(C9e({step:e,offsetIsDiscrete:So(t)})==="offset")return{step:e.step}}function Wfn(e,t,n){const r=e===yv?"x":"y",i=t.getScaleComponent(r);if(!i)return B7e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:l}=t;if(s==="band"){const u=V7e(r,t.size,t.config.view);if(pp(u)){const c=U7e(u,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const u=t.encoding[r];if(ot(u)&&u.timeUnit){const c=EBe(u.timeUnit,p=>`scale('${o}', ${p})`),d=t.config.scale.bandWithNestedOffsetPaddingInner,f=jy({fieldDef:u,markDef:a,config:l})-.5,h=f!==0?` + ${f}`:"";if(d){const p=Mt(d)?`${d.signal}/2`+h:`${d/2+f}`,m=Mt(d)?`(1 - ${d.signal}/2)`+h:`${1-d/2+f}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return O8e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function V7e(e,t,n){const r=e===zi?"width":"height",i=t[r];return i||jL(n,r)}function Gfn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Ge(n)?n.length+1:(st(wan(r)),3)}}function Yfn(e,t,n){const r=()=>{const i=tf(t),s=tf(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Mt(t)?new po(r):{signal:r()}}function Kfn(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(b5("size",e))}const I1e=.95;function Xfn(e,t,n,r){const i={x:A1e(n,"x"),y:A1e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=R1e(t,i,r.view);return xr(s)?s-1:new po(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=R1e(t,i,r.view);return xr(s)?Math.pow(I1e*s,2):new po(()=>`pow(${I1e} * ${s.signal}, 2)`)}}throw new Error(b5("size",e))}function R1e(e,t,n){const r=pp(e.width)?e.width.step:FL(n,"width"),i=pp(e.height)?e.height.step:FL(n,"height");return t.x||t.y?new po(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function H7e(e,t){Wi(e)?Qfn(e,t):W7e(e,t)}function Qfn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of et(n)){const l=o[a],u=n[a],c=e.getScaleComponent(a),d=Qs(i[a]),f=l[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=JW(h,t),y=NBe(a,t);if(f!==void 0&&(g?y&&st(y):st(dBe(h,t,a))),g&&y===void 0)if(f!==void 0){const v=d.timeUnit,_=d.type;switch(t){case"domainMax":case"domainMin":__(l[t])||_==="temporal"||v?u.set(t,{signal:P5(l[t],{type:_,timeUnit:v})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const v=t in k1e?k1e[t]({model:e,channel:a,fieldOrDatumDef:d,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:s,config:r,hasNestedOffsetScale:a9e(i,a),hasSecondaryRangeChannel:!!i[Mp(a)]}):r.scale[t];v!==void 0&&u.set(t,v,!1)}}}const k1e={bins:({model:e,fieldOrDatumDef:t})=>ot(t)?Jfn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Zfn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>ehn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>thn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>nhn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>rhn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=ot(e)?e.sort:void 0;return ihn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>shn(e,t,n,r,i,s.scale,o)};function q7e(e){Wi(e)?Ufn(e):W7e(e,"range")}function W7e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?q7e(r):H7e(r,t);for(const r of et(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=By(i,a,t,"scale",j9e((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Jfn(e,t){const n=t.bin;if(Ei(n)){const r=goe(e,t.field,n);return new po(()=>e.getSignalName(r))}else if(Bo(n)&&b_(n)&&n.step!==void 0)return{step:n.step}}function Zfn(e,t){if(Kn([gu,Op,Dp],e)&&t!=="nominal")return"hcl"}function ehn(e,t,n,r,i,s){var o;if(!((o=Pf(s))!=null&&o.bin||Ge(n)||i!=null||r!=null||Kn([Uo.TIME,Uo.UTC],e)))return As(t)?!0:void 0}function thn(e,t,n,r,i,s){if(As(e)){if($h(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(ot(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Uo.POINT)return n.pointPadding}}function nhn(e,t,n,r,i,s=!1){if(e===void 0){if(As(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:l,bandWithNestedOffsetPaddingInner:u}=i;return s?u:Cs(o,n==="bar"?a:l)}else if(mP(t)&&r===Uo.BAND)return i.offsetBandPaddingInner}}function rhn(e,t,n,r,i,s=!1){if(e===void 0){if(As(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Uo.BAND)return Cs(o,Mt(r)?{signal:`${r.signal}/2`}:r/2)}else if(mP(t)){if(n===Uo.POINT)return .5;if(n===Uo.BAND)return i.offsetBandPaddingOuter}}}function ihn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Rf(e)&&t==="descending"?Mt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Rf(e)&&t==="descending")return!0}function shn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Rf(i)){if(Ge(n)){const l=n[0],u=n[n.length-1];if(xr(l)&&l<=0&&xr(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Vx(i))return!0;if(!(ot(t)&&t.bin)&&Kn([...Rg,...eon],e)){const{orient:l,type:u}=r;return Kn(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Kn(["bar","area"],u)&&!o?!0:s==null?void 0:s.zero}return!1}function ohn(e,t,n,r,i=!1){const s=ahn(t,n,r,i),{type:o}=e;return $p(t)?o!==void 0?iln(t,o)?ot(n)&&!rln(o,n.type)?(st(san(o,s)),s):o:(st(ian(t,o,s)),s):s:null}function ahn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(RE(e)||nz(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&st(rz(e,"ordinal")),"ordinal";if(As(e)||mP(e)){if(Kn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in bse)return"band";const s=n[vu(e)];return Lb(s)||qx(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return RE(e)?"time":nz(e)==="discrete"?(st(rz(e,"temporal")),"ordinal"):ot(t)&&t.timeUnit&&xo(t.timeUnit).utc?"utc":"time";case"quantitative":return RE(e)?ot(t)&&Ei(t.bin)?"bin-ordinal":"linear":nz(e)==="discrete"?(st(rz(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(uBe(t.type))}function lhn(e,{ignoreRange:t}={}){G7e(e),L7e(e);for(const n of nln)H7e(e,n);t||q7e(e)}function G7e(e){Wi(e)?e.component.scales=uhn(e):e.component.scales=dhn(e)}function uhn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of _se){const o=Qs(t[s]);if(o&&n===MBe&&s===yu&&o.type===dT)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const l=a9e(t,s),u=ohn(a,s,o,r,l);i[s]=new j7e(e.scaleName(`${s}`,!0),{value:u,explicit:a.type===u})}}return i}const chn=j9e((e,t)=>Mve(e)-Mve(t));function dhn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){G7e(s);for(const o of et(s.component.scales))if((t=i.scale)[o]??(t[o]=S7e(o,e)),i.scale[o]==="shared"){const a=r[o],l=s.component.scales[o].getWithExplicit("type");a?Wan(a.value,l.value)?r[o]=By(a,l,"type","scale",chn):(i.scale[o]="independent",delete r[o]):r[o]=l}}for(const s of et(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new j7e(o,a);for(const l of e.children){const u=l.component.scales[s];u&&(l.renameScale(u.get("name"),o),u.merged=!0)}}return n}class fz{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Wi(e){return(e==null?void 0:e.type)==="unit"}function Ku(e){return(e==null?void 0:e.type)==="facet"}function woe(e){return(e==null?void 0:e.type)==="concat"}function gT(e){return(e==null?void 0:e.type)==="layer"}class Eoe{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=l=>{var u,c,d;return(u=l.from)!=null&&u.data&&(l.from.data=this.lookupDataSource(l.from.data)),(d=(c=l.from)==null?void 0:c.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l},this.parent=r,this.config=s,this.view=xa(a),this.name=t.name??i,this.title=s0(t.title)?{text:t.title}:t.title?xa(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new fz,this.projectionNameMap=r?r.projectionNameMap:new fz,this.signalNameMap=r?r.signalNameMap:new fz,this.data=t.data,this.description=t.description,this.transforms=vcn(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Eun(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:A5(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Pg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?pn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){lhn(this)}parseProjection(){D7e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){R7e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of et(r)){const o=r[s];o!==void 0&&(i[s]=Ri(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Ri(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Zr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=Pdn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Vc)t[r].title&&n.push(Tdn(this,r));for(const r of foe)n=n.concat(Cdn(this,r));return n}assembleAxes(){return fdn(this.component.axes,this.config)}assembleLegends(){return P7e(this)}assembleProjections(){return efn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...eBe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Kn(["unit","layer"],this.type)?Kn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Zr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Ku(this.parent)?F7e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Bi((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(ds[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Ku(this.parent)){const n=E7e(t),r=g5(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(So(s)&&xv(o)){const a=i.get("name"),l=V5(this,r),u=_oe(l);if(u){const c=pt({aggregate:"distinct",field:u},{expr:"datum"});return{signal:w7e(a,i,c)}}else return st(xse(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(W8e(t)&&$p(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(xon(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class Y7e extends Eoe{vgField(t,n={}){const r=this.fieldDef(t);if(r)return pt(r,n)}reduceFieldDef(t,n){return Qln(this.getMapping(),(r,i,s)=>{const o=Pf(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Yse(this.getMapping(),(r,i)=>{const s=Pf(r);s&&t(s,i)},n)}}class H5 extends Xr{clone(){return new H5(null,pn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=pn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${tr(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class q5 extends Xr{clone(){return new q5(null,pn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=pn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${tr(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class W5 extends Xr{clone(){return new W5(this.parent,pn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=pn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${tr(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class G5 extends Xr{clone(){return new G5(null,pn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=pn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${tr(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class NE extends Xr{clone(){return new NE(null,pn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Yf,Gf],[cd,Kf]]){const s=i.map(o=>{const a=Qs(n.encoding[o]);return ot(a)?a.field:Lp(a)?{expr:`${a.datum}`}:kf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new NE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(yu)){const i=n.typedFieldDef(yu);i.type===dT&&(t=new NE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Et);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${tr(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class _R extends Xr{clone(){return new _R(null,this.projection,pn(this.fields),pn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Yf,Gf],[cd,Kf]]){const i=r.map(o=>{const a=Qs(n.encoding[o]);return ot(a)?a.field:Lp(a)?{expr:`${a.datum}`}:kf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===cd?"2":"";(i[0]||i[1])&&(t=new _R(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Et))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${tr(this.fields)} ${tr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class J1 extends Xr{clone(){return new J1(null,pn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new J1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(ot(i)&&ot(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:l,value:u,frame:c,keyvals:d}=o.impute,f=c9e(n.mark,r);return new J1(t,{impute:o.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...d!==void 0?{keyvals:d}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${tr(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:Zun(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}class Y5 extends Xr{clone(){return new Y5(null,pn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=pn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${tr(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class wR extends Xr{clone(){return new wR(null,pn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(ecn(o)){let l=Q7e(o.data,s);l||(l=new zb(o.data),s.push(l));const u=n.getName(`lookup_${i}`);a=new au(l,u,ds.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(tcn(o)){const l=o.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(Bi(l),l)}catch{throw new Error(Aon(l))}if(a=u.materialized,!a)throw new Error(Ion(l))}return new wR(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?wt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${tr({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:wt(this.transform.as)}:{}};else{let n=this.transform.as;Et(n)||(st($on),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class K5 extends Xr{clone(){return new K5(null,pn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=pn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${tr(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class X5 extends Xr{clone(){return new X5(null,pn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=pn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${tr(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class Q5 extends Xr{clone(){return new Q5(null,pn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Mh((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${tr(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class J5 extends Xr{clone(){return new J5(null,pn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${tr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function K7e(e){let t=0;function n(r,i){if(r instanceof zb&&!r.isGenerator&&!Gx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Pa&&(r.parent instanceof zb&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof pT){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof SP||r instanceof TP||r instanceof Jx||r instanceof hT||r instanceof Kx||r instanceof _R||r instanceof yf||r instanceof wR||r instanceof mT||r instanceof S_||r instanceof G5||r instanceof W5||r instanceof H5||r instanceof Y5||r instanceof K5||r instanceof X5||r instanceof Vy||r instanceof J5||r instanceof Q5||r instanceof q5)&&i.transform.push(r.assemble()),(r instanceof Jh||r instanceof Qh||r instanceof J1||r instanceof Lm||r instanceof NE)&&i.transform.push(...r.assemble()),r instanceof au&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof au?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof au&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function fhn(e){const t=[],n=K7e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function hhn(e,t){const n=[],r=K7e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function phn(e){return e==="top"||e==="left"||Mt(e)?"header":"footer"}function mhn(e){for(const t of Vc)ghn(e,t);P1e(e,"x"),P1e(e,"y")}function ghn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],l=Qx("title",null,r,t);let u=kE(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=Ge(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Qx("labelOrient",a.header,r,t),d=a.header!==null?Cs((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,f=Kn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[f]:t==="facet"?[]:[X7e(e,t,d)]}}}function X7e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function P1e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=moe(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const l=phn(a.get("orient"));o[l]??(o[l]=[X7e(e,s,!1)]);const u=_2(a,"main",e.config,{header:!0});u&&o[l][0].axes.push(u),a.mainExtracted=!0}}}}function yhn(e){xoe(e),VL(e,"width"),VL(e,"height")}function vhn(e){xoe(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";VL(e,t),VL(e,n)}function xoe(e){for(const t of e.children)t.parseLayoutSize()}function VL(e,t){const n=E7e(t),r=g5(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??S7e(r,e);if(u==="independent"&&l.value==="step"){o=void 0;break}if(o){if(u==="independent"&&o.value!==l.value){o=void 0;break}o=By(o,l,n,"")}else o=l}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function bhn(e){const{size:t,component:n}=e;for(const r of Rg){const i=vu(r);if(t[i]){const s=t[i];n.layoutSize.set(i,pp(s)?"step":s,!0)}else{const s=_hn(e,i);n.layoutSize.set(i,s,!1)}}}function _hn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(So(s)){const a=jL(r.view,t);return xv(o)||pp(a)?"step":a}else return tG(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return tG(r.view,t);{const s=jL(r.view,t);return pp(s)?s.step:s}}}function gG(e,t,n){return pt(t,{suffix:`by_${pt(e)}`,...n})}class CA extends Y7e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Ioe(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!bP(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=et(t),r={};for(const i of n){if(![Om,Dm].includes(i)){st(b5(i,"facet"));break}const s=t[i];if(s.field===void 0){st(XW(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Gse(t,n);return r.header?r.header=xa(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Z5(this),this.child.parseData()}parseLayoutSize(){xoe(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),mhn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Vc)for(const r of hoe){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=Qx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const l=z5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof CA))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof CA?{...this.channelHasField("column")?{encode:{update:{columns:{field:pt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof CA){if(this.child.channelHasField("column")){const i=pt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Rg){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(So(o)&&xv(a)){const l=V5(this.child,i),u=_oe(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):st(xse(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of Vc){const d=this.facet[c];if(d){l.push(pt(d));const{bin:f,sort:h}=d;if(Ei(f)&&l.push(pt(d,{binSuffix:"end"})),Mm(h)){const{field:p,op:m=C5}=h,g=gG(d,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Ge(h)){const p=Xx(d,c);s.push(p),o.push("max"),a.push(p)}}}const u=!!r&&!!i;return{name:t,data:n,groupby:l,...u||s.length>0?{aggregate:{...u?{cross:u}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Mm(r.sort)?[gG(r,r.sort,{expr:"datum"})]:Ge(r.sort)?[Xx(r,t,{expr:"datum"})]:[pt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Mm(i)?i.order:!Ge(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return uG(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of foe)if(t[s]){const o=Qx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return uG(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=fhn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Vc.map(l=>this.facetSortFields(l)).flat(),order:Vc.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Ncn(this,[]))}]}getMapping(){return this.facet}}function whn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Mm(s.sort)){const{field:o,op:a=C5}=s.sort;e=i=new S_(e,{joinaggregate:[{op:a,field:o,as:gG(s,s.sort,{forAs:!0})}],groupby:[pt(s)]})}return i}return null}function Q7e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||u)&&c!==u)continue;const d=(s=a.format)==null?void 0:s.mesh;if(!((l||d)&&l!==d)){if(bR(e)&&bR(a)){if(qu(e.values,a.values))return o}else if(Gx(e)&&Gx(a)){if(e.url===a.url)return o}else if(B9e(e)&&e.name===o.dataName)return o}}return null}function Ehn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new zb({values:[]});return t.push(r),r}const n=Q7e(e.data,t);if(n)return ny(e.data)||(n.data.format=D8e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new zb(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function xhn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(dcn(i))o=e=new Kx(e,i),s="derived";else if(soe(i)){const a=hfn(i);o=e=Pa.makeWithAncestors(e,{},a,n)??e,e=new hT(e,t,i.filter)}else if(M9e(i))o=e=Jh.makeFromTransform(e,i,t),s="number";else if(hcn(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Pa(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Qh.makeFromTransform(e,i);else if(pcn(i))o=e=yf.makeFromTransform(e,i),s="number",doe(t)&&(e=new Vy(e));else if(D9e(i))o=e=wR.make(e,t,i,r++),s="derived";else if(lcn(i))o=e=new mT(e,i),s="number";else if(ucn(i))o=e=new S_(e,i),s="number";else if(mcn(i))o=e=Lm.makeFromTransform(e,i),s="derived";else if(gcn(i))o=e=new G5(e,i),s="derived";else if(ycn(i))o=e=new q5(e,i),s="derived";else if(ccn(i))o=e=new W5(e,i),s="derived";else if(ncn(i))o=e=new Q5(e,i),s="derived";else if(acn(i))e=new J5(e,i);else if(fcn(i))o=e=J1.makeFromTransform(e,i),s="derived";else if(rcn(i))o=e=new H5(e,i),s="derived";else if(icn(i))o=e=new K5(e,i),s="derived";else if(scn(i))o=e=new X5(e,i),s="derived";else if(ocn(i))o=e=new Y5(e,i),s="derived";else{st(Mon(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function Z5(e){var g;let t=Ehn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(ny(i)||Gx(i)||bR(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Rcn;ny(i)?(z9e(i)?t=new TP(t,i.sequence):ooe(i)&&(t=new SP(t,i.graticule)),o.parseNothing=!0):((g=i==null?void 0:i.format)==null?void 0:g.parse)===null&&(o.parseNothing=!0),t=Pa.makeExplicit(t,e,o)??t,t=new Vy(t);const a=e.parent&&gT(e.parent);(Wi(e)||Ku(e))&&a&&(t=Jh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=xhn(t,e,o));const l=mfn(e),u=pfn(e);t=Pa.makeWithAncestors(t,{},{...l,...u},o)??t,Wi(e)&&(t=NE.parseAll(t,e),t=_R.parseAll(t,e)),(Wi(e)||Ku(e))&&(a||(t=Jh.makeFromEncoding(t,e)??t),t=Qh.makeFromEncoding(t,e)??t,t=Kx.parseAllForSortIndex(t,e));const c=t=RO(ds.Raw,e,t);if(Wi(e)){const y=yf.makeFromEncoding(t,e);y&&(t=y,doe(e)&&(t=new Vy(t))),t=J1.makeFromEncoding(t,e)??t,t=Lm.makeFromEncoding(t,e)??t}let d,f;if(Wi(e)){const{markDef:y,mark:v,config:_}=e,w=Wr("invalid",y,_),{marks:E,scales:S}=f=V9e({invalid:w,isPath:Sv(v)});E!==S&&S==="include-invalid-values"&&(d=t=RO(ds.PreFilterInvalid,e,t)),E==="exclude-invalid-values"&&(t=Jx.make(t,e,f)??t)}const h=t=RO(ds.Main,e,t);let p;if(Wi(e)&&f){const{marks:y,scales:v}=f;y==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=Jx.make(t,e,f)??t,p=t=RO(ds.PostFilterInvalid,e,t))}Wi(e)&&cdn(e,h);let m=null;if(Ku(e)){const y=e.getName("facet");t=whn(t,e.facet)??t,m=new pT(t,e,y,h.getSource()),n[y]=m}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:m,ancestorParse:o,preFilterInvalid:d,postFilterInvalid:p}}function RO(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new au(n,s,e,i);return r[s]=o,o}class Shn extends Eoe{constructor(t,n,r,i){var s,o,a,l;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((l=(a=t.resolve)==null?void 0:a.axis)==null?void 0:l.y)==="shared")&&st(Non),this.children=this.getChildren(t).map((u,c)=>Ioe(u,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=Z5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of et(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return D5(t)?t.vconcat:roe(t)?t.hconcat:t.concat}parseLayoutSize(){vhn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=poe(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Thn(e){return e===!1||e===null}const Chn={disable:1,gridScale:1,scale:1,...i9e,labelExpr:1,encode:1},J7e=et(Chn);class Soe extends Pg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Soe(pn(this.explicit),pn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Thn(this.get(t))}hasOrientSignalRef(){return Mt(this.explicit.orient)}}function Ahn(e,t,n){const{encoding:r,config:i}=e,s=Qs(r[t])??Qs(r[Mp(t)]),o=e.axis(t)||{},{format:a,formatType:l}=o;if(Fb(l))return{text:nf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(Hx(s)==="quantitative"){if(qx(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:nf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:nf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Hx(s)==="temporal"&&i.timeFormatType&&ot(s)&&!s.timeUnit)return{text:nf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Ihn(e){return Rg.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Mhn(n,e)]),t),{})}const Rhn={bottom:"top",top:"bottom",left:"right",right:"left"};function khn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of et(i.component.axes))n.axis[s]=moe(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Phn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Rg){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:l}=o.getWithExplicit("orient");if(!Mt(a)){if(r[a]>0&&!l){const u=Rhn[a];r[a]>r[u]&&o.set("orient",u,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Phn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Nhn(i,s)}}}else return t.map(n=>n.clone());return e}function Nhn(e,t){for(const n of J7e){const r=By(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return aBe(i,s);case"gridScale":return{explicit:i.explicit,value:Cs(i.value,s.value)}}return $5(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Ohn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Mt(n.labelAngle)?n.labelAngle:yR(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===y7e(r,i))return!0}return e===n[t]}const Dhn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Mhn(e,t){var y,v;let n=t.axis(e);const r=new Soe,i=Qs(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||_dn(e),l=t.getScaleComponent(e).get("type"),u=hdn(e,l,a,t.config),c=n!==void 0?!n:aG("disable",o.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const d=ydn(i,n,e,o.style,u),f=HBe(n.formatType,i,l),h=VBe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:d,format:h,formatType:f,mark:s,config:o};for(const _ of J7e){const w=_ in g1e?g1e[_](p):Uve(_)?n[_]:void 0,E=w!==void 0,S=Ohn(w,_,n,t,e);if(E&&S)r.set(_,w,S);else{const{configValue:x=void 0,configFrom:T=void 0}=Uve(_)&&_!=="values"?aG(_,o.style,n.style,u):{},I=x!==void 0;E&&!I?r.set(_,w,S):(T!=="vgAxisConfig"||Dhn.has(_)&&I||EP(x)||Mt(x))&&r.set(_,x,!1)}}const m=n.encoding??{},g=r9e.reduce((_,w)=>{if(!r.hasAxisPart(w))return _;const E=x7e(m[w]??{},t),S=w==="labels"?Ahn(t,e,E):E;return S!==void 0&&!Zr(S)&&(_[w]={update:S}),_},{});return Zr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function $hn({encoding:e,size:t}){for(const n of Rg){const r=vu(n);pp(t[r])&&N0(e[n])&&(delete t[r],st(fBe(r)))}return t}const Lhn={vgMark:"arc",encodeEntry:e=>({...wd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ka("x",e,{defaultPos:"mid"}),...ka("y",e,{defaultPos:"mid"}),...zy(e,"radius"),...zy(e,"theta")})},Fhn={vgMark:"area",encodeEntry:e=>({...wd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...BL("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...BL("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...coe(e)})},jhn={vgMark:"rect",encodeEntry:e=>({...wd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...zy(e,"x"),...zy(e,"y")})},Bhn={vgMark:"shape",encodeEntry:e=>({...wd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&ot(n)&&n.type===dT?{field:pt(n,{expr:"datum"})}:{}}]}},zhn={vgMark:"image",encodeEntry:e=>({...wd(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...zy(e,"x"),...zy(e,"y"),...loe(e,"url")})},Uhn={vgMark:"line",encodeEntry:e=>({...wd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ka("x",e,{defaultPos:"mid"}),...ka("y",e,{defaultPos:"mid"}),...go("size",e,{vgChannel:"strokeWidth"}),...coe(e)})},Vhn={vgMark:"trail",encodeEntry:e=>({...wd(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ka("x",e,{defaultPos:"mid"}),...ka("y",e,{defaultPos:"mid"}),...go("size",e),...coe(e)})};function Toe(e,t){const{config:n}=e;return{...wd(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ka("x",e,{defaultPos:"mid"}),...ka("y",e,{defaultPos:"mid"}),...go("size",e),...go("angle",e),...Hhn(e,n,t)}}function Hhn(e,t,n){return n?{shape:{value:n}}:go("shape",e)}const qhn={vgMark:"symbol",encodeEntry:e=>Toe(e)},Whn={vgMark:"symbol",encodeEntry:e=>Toe(e,"circle")},Ghn={vgMark:"symbol",encodeEntry:e=>Toe(e,"square")},Yhn={vgMark:"rect",encodeEntry:e=>({...wd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...zy(e,"x"),...zy(e,"y")})},Khn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...wd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...BL("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...BL("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...go("size",e,{vgChannel:"strokeWidth"})}}},Xhn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...wd(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ka("x",e,{defaultPos:"mid"}),...ka("y",e,{defaultPos:"mid"}),...loe(e),...go("size",e,{vgChannel:"fontSize"}),...go("angle",e),...f1e("align",Qhn(e.markDef,n,t)),...f1e("baseline",Jhn(e.markDef,n,t)),...ka("radius",e,{defaultPos:null}),...ka("theta",e,{defaultPos:null})}}};function Qhn(e,t,n){if(Wr("align",e,n)===void 0)return"center"}function Jhn(e,t,n){if(Wr("baseline",e,n)===void 0)return"middle"}const Zhn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...wd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ka("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ka("y",e,{defaultPos:"mid",vgChannel:"yc"}),...go("size",e,{defaultValue:epn(e),vgChannel:i}),[s]:Ri(Wr("thickness",n,t))}}};function epn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=Wr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&xv(a)&&xr(a.step)?a.step*3/4:FL(t.view,i)*3/4}}const kO={arc:Lhn,area:Fhn,bar:jhn,circle:Whn,geoshape:Bhn,image:zhn,line:Uhn,point:qhn,rect:Yhn,rule:Khn,square:Ghn,text:Xhn,tick:Zhn,trail:Vhn};function tpn(e){if(Kn([S5,E5,lln],e.mark)){const t=c9e(e.mark,e.encoding);if(t.length>0)return npn(e,t)}else if(e.mark===x5){const t=KW.some(n=>Wr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return rpn(e)}return Coe(e)}const N1e="faceted_path_";function npn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:N1e+e.requestDataName(ds.Main),data:e.requestDataName(ds.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Coe(e,{fromPrefix:N1e})}]}const O1e="stack_group_";function rpn(e){var u;const[t]=Coe(e,{fromPrefix:O1e}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,d)=>{const f=[r({prefix:"min",suffix:"start",expr:d}),r({prefix:"max",suffix:"start",expr:d}),r({prefix:"min",suffix:"end",expr:d}),r({prefix:"max",suffix:"end",expr:d})];return`${c}(${f.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...Lx(t.encode.update,["y","yc","y2","height",...KW]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ou(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...Lx(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ou(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of KW){const d=fp(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):d&&(s[c]=Ri(d)),d&&(t.encode.update[c]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const c of e.stack.groupbyChannels){const d=e.fieldDef(c),f=pt(d);f&&a.push(f),(d!=null&&d.bin||d!=null&&d.timeUnit)&&a.push(pt(d,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,d)=>{if(t.encode.update[d])return{...c,[d]:t.encode.update[d]};{const f=fp(d,e.markDef,e.config);return f!==void 0?{...c,[d]:Ri(f)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(ds.Main),name:O1e+e.requestDataName(ds.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function ipn(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Ge(o)&&kf(o)&&GW(o.value)||!o&&GW(Wr("order",i,s)))){if((Ge(o)||ot(o))&&!n)return iBe(o,{expr:"datum"});if(Sv(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(ot(l))return{field:a}}}}function Coe(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Cs(r.clip,spn(e),opn(e)),a=nBe(r),l=i.key,u=ipn(e),c=apn(e),d=Wr("aria",r,s),f=kO[n].postEncodingTransform?kO[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:kO[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...d===!1?{aria:d}:{},from:{data:t.fromPrefix+e.requestDataName(ds.Main)},encode:{update:kO[n].encodeEntry(e)},...f?{transform:f}:{}}]}function spn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function opn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function apn(e){if(!e.component.selection)return null;const t=et(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=et(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class Z7e extends Y7e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Hve(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=hp(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=qun(o,s,{graticule:t.data&&ooe(t.data)}));const l=this.encoding=Kln(t.encoding||{},a,o.filled,s);this.markDef=P9e(o,l,s),this.size=$hn({encoding:l,size:Hve(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=k9e(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>toe(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===MBe,r=t&&qsn.some(i=>En(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return _se.reduce((r,i)=>{const s=Qs(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=xa(t);return Ge(n)&&(i.domain=n.map(Lu)),Ge(r)&&(i.range=r.map(Lu)),i}initAxes(t){return Rg.reduce((n,r)=>{const i=t[r];if(En(i)||r===zi&&En(t.x2)||r===Co&&En(t.y2)){const s=En(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=et(t),r={};for(const i of n){const s=t[i];r[i]=EP(s)?tBe(s):Lu(s)}return r}initLegends(t){return ton.reduce((n,r)=>{const i=Qs(t[r]);if(i&&ron(r)){const s=i.legend;n[r]=s&&xa(s)}return n},{})}parseData(){this.component.data=Z5(this)}parseLayoutSize(){bhn(this)}parseSelections(){this.component.selection=udn(this,this.selection)}parseMarkGroup(){this.component.mark=tpn(this)}parseAxesAndHeaders(){this.component.axes=Ihn(this)}assembleSelectionTopLevelSignals(t){return Ocn(this,t)}assembleSignals(){return[...p7e(this),...Pcn(this,[])]}assembleSelectionData(t){return Dcn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return poe(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!gT(this.parent))&&(t=q9e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return X1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Pf(n)}typedFieldDef(t){const n=this.fieldDef(t);return bl(n)?n:null}}class Aoe extends Eoe{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(M5(a))return new Aoe(a,this,this.getName(`layer_${l}`),o,s);if(kg(a))return new Z7e(a,this,this.getName(`layer_${l}`),o,s);throw new Error(Ese(a))})}parseData(){this.component.data=Z5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){yhn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of et(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){khn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),p7e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),poe(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of wt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Mcn(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),P7e(this))}}function Ioe(e,t,n,r,i){if(A5(e))return new CA(e,t,n,i);if(M5(e))return new Aoe(e,t,n,r,i);if(kg(e))return new Z7e(e,t,n,r,i);if(bun(e))return new Shn(e,t,n,i);throw new Error(Ese(e))}function lpn(e,t={}){t.logger&&Ean(t.logger),t.fieldTitle&&e9e(t.fieldTitle);try{const n=R9e(JS(t.config,e.config)),r=F9e(e,n),i=Ioe(r,null,"",void 0,n);return i.parse(),Pfn(i.component.data,i),{spec:cpn(i,upn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&xan(),t.fieldTitle&&Bln()}}function upn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Et(t)&&(t={type:t}),i&&s&&Ccn(t.type)){if(i==="step"&&s==="step")st(Ive()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";st(Ive(g5(o)));const a=o==="width"?"height":"width";t.type=Acn(a)}}return{...et(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...n1e(n,!1),...n1e(e,!0)}}function cpn(e,t,n={},r){const i=e.config?Oun(e.config):void 0,s=[].concat(e.assembleSelectionData([]),hhn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:d,...f}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...f,...a?{title:a}:{},...l?{style:l}:{},...u?{encode:{update:u}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...T9e(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const dpn=jsn.version,fpn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:jx,accessPathWithDatum:fse,compile:lpn,contains:Kn,deepEqual:qu,deleteNestedProperty:IL,duplicate:pn,entries:Ly,every:use,fieldIntersection:dse,flatAccessWithDatum:$8e,getFirstDefined:Cs,hasIntersection:cse,hash:tr,internalField:j8e,isBoolean:gR,isEmpty:Zr,isEqual:zsn,isInternalField:B8e,isNullOrFalse:GW,isNumeric:c5,keys:et,logicalExpr:SA,mergeDeep:D8e,never:O8e,normalize:F9e,normalizeAngle:yR,omit:ou,pick:Lx,prefixGenerator:YW,removePathFromField:uT,replaceAll:Ob,replacePathInField:ud,resetIdCounter:Vsn,setEqual:M8e,some:Fx,stringify:ei,titleCase:fP,unique:Mh,uniqueId:F8e,vals:Ko,varName:Bi,version:dpn},Symbol.toStringTag,{value:"Module"}));function eze(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var hpn="vega-themes",ppn="2.15.0",mpn="Themes for stylized Vega and Vega-Lite visualizations.",gpn=["vega","vega-lite","themes","style"],ypn="BSD-3-Clause",vpn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},bpn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],_pn="build/vega-themes.js",Roe="build/vega-themes.module.js",wpn="build/vega-themes.min.js",Epn="build/vega-themes.min.js",xpn="build/vega-themes.module.d.ts",Spn={type:"git",url:"https://github.com/vega/vega-themes.git"},Tpn=["src","build"],Cpn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Apn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Ipn={vega:"*","vega-lite":"*"},Rpn={},kpn={name:hpn,version:ppn,description:mpn,keywords:gpn,license:ypn,author:vpn,contributors:bpn,main:_pn,module:Roe,unpkg:wpn,jsdelivr:Epn,types:xpn,repository:Spn,files:Tpn,scripts:Cpn,devDependencies:Apn,peerDependencies:Ipn,dependencies:Rpn};const sw="#fff",D1e="#888",Ppn={background:"#333",view:{stroke:D1e},title:{color:sw,subtitleColor:sw},style:{"guide-label":{fill:sw},"guide-title":{fill:sw}},axis:{domainColor:sw,gridColor:D1e,tickColor:sw}},Bv="#4572a7",Npn={background:"#fff",arc:{fill:Bv},area:{fill:Bv},line:{stroke:Bv,strokeWidth:2},path:{stroke:Bv},rect:{fill:Bv},shape:{stroke:Bv},symbol:{fill:Bv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},zv="#30a2da",hz="#cbcbcb",Opn="#999",Dpn="#333",M1e="#f0f0f0",$1e="#333",Mpn={arc:{fill:zv},area:{fill:zv},axis:{domainColor:hz,grid:!0,gridColor:hz,gridWidth:1,labelColor:Opn,labelFontSize:10,titleColor:Dpn,tickColor:hz,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:M1e,group:{fill:M1e},legend:{labelColor:$1e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:$1e,titleFontSize:14,titlePadding:10},line:{stroke:zv,strokeWidth:2},path:{stroke:zv,strokeWidth:.5},rect:{fill:zv},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:zv},bar:{binSpacing:2,fill:zv,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Uv="#000",$pn={group:{fill:"#e5e5e5"},arc:{fill:Uv},area:{fill:Uv},line:{stroke:Uv},path:{stroke:Uv},rect:{fill:Uv},shape:{stroke:Uv},symbol:{fill:Uv,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Lpn=22,Fpn="normal",L1e="Benton Gothic, sans-serif",F1e=11.5,jpn="normal",Vv="#82c6df",pz="Benton Gothic Bold, sans-serif",j1e="normal",B1e=13,wC={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Bpn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:pz,fontSize:Lpn,fontWeight:Fpn},arc:{fill:Vv},area:{fill:Vv},line:{stroke:Vv,strokeWidth:2},path:{stroke:Vv},rect:{fill:Vv},shape:{stroke:Vv},symbol:{fill:Vv,size:30},axis:{labelFont:L1e,labelFontSize:F1e,labelFontWeight:jpn,titleFont:pz,titleFontSize:B1e,titleFontWeight:j1e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:L1e,labelFontSize:F1e,symbolType:"square",titleFont:pz,titleFontSize:B1e,titleFontWeight:j1e},range:{category:wC["category-6"],diverging:wC["fireandice-6"],heatmap:wC["fire-7"],ordinal:wC["fire-7"],ramp:wC["fire-7"]}},Hv="#ab5787",PO="#979797",zpn={background:"#f9f9f9",arc:{fill:Hv},area:{fill:Hv},line:{stroke:Hv},path:{stroke:Hv},rect:{fill:Hv},shape:{stroke:Hv},symbol:{fill:Hv,size:30},axis:{domainColor:PO,domainWidth:.5,gridWidth:.2,labelColor:PO,tickColor:PO,tickWidth:.2,titleColor:PO},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},qv="#3e5c69",Upn={background:"#fff",arc:{fill:qv},area:{fill:qv},line:{stroke:qv},path:{stroke:qv},rect:{fill:qv},shape:{stroke:qv},symbol:{fill:qv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Ec="#1696d2",z1e="#000000",Vpn="#FFFFFF",NO="Lato",mz="Lato",Hpn="Lato",qpn="#DEDDDD",Wpn=18,EC={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Gpn={background:Vpn,title:{anchor:"start",fontSize:Wpn,font:NO},axisX:{domain:!0,domainColor:z1e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:mz,labelAngle:0,tickColor:z1e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:NO},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:qpn,gridWidth:1,labelFontSize:12,labelFont:mz,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:NO,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:mz,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:NO,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:EC["six-groups-cat-1"],diverging:EC["diverging-colors"],heatmap:EC["diverging-colors"],ordinal:EC["six-groups-seq"],ramp:EC["shades-blue"]},area:{fill:Ec},rect:{fill:Ec},line:{color:Ec,stroke:Ec,strokeWidth:5},trail:{color:Ec,stroke:Ec,strokeWidth:0,size:1},path:{stroke:Ec,strokeWidth:.5},point:{filled:!0},text:{font:Hpn,color:Ec,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Ec,stroke:null}},arc:{fill:Ec},shape:{stroke:Ec},symbol:{fill:Ec,size:30}},Wv="#3366CC",U1e="#ccc",OO="Arial, sans-serif",Ypn={arc:{fill:Wv},area:{fill:Wv},path:{stroke:Wv},rect:{fill:Wv},shape:{stroke:Wv},symbol:{stroke:Wv},circle:{fill:Wv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:OO,fontSize:12},"guide-title":{font:OO,fontSize:12},"group-title":{font:OO,fontSize:12}},title:{font:OO,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:U1e,tickColor:U1e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},koe=e=>e*(1/3+1),V1e=koe(9),H1e=koe(10),q1e=koe(12),xC="Segoe UI",W1e="wf_standard-font, helvetica, arial, sans-serif",G1e="#252423",SC="#605E5C",Y1e="transparent",Kpn="#C8C6C4",Od="#118DFF",Xpn="#12239E",Qpn="#E66C37",Jpn="#6B007B",Zpn="#E044A7",emn="#744EC2",tmn="#D9B300",nmn="#D64550",tze=Od,nze="#DEEFFF",K1e=[nze,tze],rmn=[nze,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",tze],imn={view:{stroke:Y1e},background:Y1e,font:xC,header:{titleFont:W1e,titleFontSize:q1e,titleColor:G1e,labelFont:xC,labelFontSize:H1e,labelColor:SC},axis:{ticks:!1,grid:!1,domain:!1,labelColor:SC,labelFontSize:V1e,titleFont:W1e,titleColor:G1e,titleFontSize:q1e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Kpn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Od},line:{stroke:Od,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:xC,fontSize:V1e,fill:SC},arc:{fill:Od},area:{fill:Od,line:!0,opacity:.6},path:{stroke:Od},rect:{fill:Od},point:{fill:Od,filled:!0,size:75},shape:{stroke:Od},symbol:{fill:Od,strokeWidth:1.5,size:50},legend:{titleFont:xC,titleFontWeight:"bold",titleColor:SC,labelFont:xC,labelFontSize:H1e,labelColor:SC,symbolType:"circle",symbolSize:75},range:{category:[Od,Xpn,Qpn,Jpn,Zpn,emn,tmn,nmn],diverging:K1e,heatmap:K1e,ordinal:rmn}},gz='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',smn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',yz=400,DO={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},omn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],amn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function e8({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=DO.gridBg[e],i=DO.textPrimary[e],s=DO.textSecondary[e],o=n==="dark"?omn:amn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:gz,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:smn,labelFontWeight:yz,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:DO.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:gz,fill:s,fontWeight:yz},"guide-title":{font:gz,fill:s,fontWeight:yz}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const lmn=e8({theme:"white",background:"#ffffff"}),umn=e8({theme:"g10",background:"#f4f4f4"}),cmn=e8({theme:"g90",background:"#262626"}),dmn=e8({theme:"g100",background:"#161616"}),fmn=kpn.version,hmn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:umn,carbong100:dmn,carbong90:cmn,carbonwhite:lmn,dark:Ppn,excel:Npn,fivethirtyeight:Mpn,ggplot2:$pn,googlecharts:Ypn,latimes:Bpn,powerbi:imn,quartz:zpn,urbaninstitute:Gpn,version:fmn,vox:Upn},Symbol.toStringTag,{value:"Module"}));function pmn(e,t,n,r){if(Ge(e))return`[${e.map(i=>t(Et(i)?i:X1e(i,n))).join(", ")}]`;if(bt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let c=a[u];c!==void 0&&(bt(c)&&(c=X1e(c,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function mmn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function X1e(e,t){return JSON.stringify(e,mmn(t))}var gmn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const rze="vg-tooltip-element",ymn={offsetX:10,offsetY:10,id:rze,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:vmn,maxDepth:2,formatTooltip:pmn,baseURL:""};function vmn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function bmn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return gmn.toString().replace(rze,e)}function _mn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class wmn{constructor(t){this.options={...ymn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=bmn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=_mn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var vz={};function Emn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class xmn{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}}var Smn=xmn;const Tmn=Object.freeze({loose:!0}),Cmn=Object.freeze({}),Amn=e=>e?typeof e!="object"?Tmn:e:Cmn;var Poe=Amn,yG={exports:{}};const Imn="2.0.0",ize=256,Rmn=Number.MAX_SAFE_INTEGER||9007199254740991,kmn=16,Pmn=ize-6,Nmn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Noe={MAX_LENGTH:ize,MAX_SAFE_COMPONENT_LENGTH:kmn,MAX_SAFE_BUILD_LENGTH:Pmn,MAX_SAFE_INTEGER:Rmn,RELEASE_TYPES:Nmn,SEMVER_SPEC_VERSION:Imn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Omn=typeof process=="object"&&vz&&vz.NODE_DEBUG&&/\bsemver\b/i.test(vz.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var t8=Omn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Noe,s=t8;t=e.exports={};const o=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let c=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[d,r]],h=m=>{for(const[g,y]of f)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),_=c++;s(m,_,g),u[m]=_,l[_]=g,o[_]=new RegExp(g,y?"g":void 0),a[_]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(yG,yG.exports);var Ooe=yG.exports;const Q1e=/^[0-9]+$/,sze=(e,t)=>{const n=Q1e.test(e),r=Q1e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Dmn=(e,t)=>sze(t,e);var Mmn={compareIdentifiers:sze,rcompareIdentifiers:Dmn};const MO=t8,{MAX_LENGTH:J1e,MAX_SAFE_INTEGER:$O}=Noe,{safeRe:Z1e,t:ebe}=Ooe,$mn=Poe,{compareIdentifiers:ow}=Mmn;let Lmn=class sh{constructor(t,n){if(n=$mn(n),t instanceof sh){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>J1e)throw new TypeError(`version is longer than ${J1e} characters`);MO("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Z1e[ebe.LOOSE]:Z1e[ebe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>$O||this.major<0)throw new TypeError("Invalid major version");if(this.minor>$O||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>$O||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<$O)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(MO("SemVer.compare",this.version,this.options,t),!(t instanceof sh)){if(typeof t=="string"&&t===this.version)return 0;t=new sh(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof sh||(t=new sh(t,this.options)),ow(this.major,t.major)||ow(this.minor,t.minor)||ow(this.patch,t.patch)}comparePre(t){if(t instanceof sh||(t=new sh(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(MO("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ow(r,i)}while(++n)}compareBuild(t){t instanceof sh||(t=new sh(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(MO("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ow(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),ow(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Doe=Lmn;const tbe=Doe,Fmn=(e,t,n)=>new tbe(e,n).compare(new tbe(t,n));var yT=Fmn;const jmn=yT,Bmn=(e,t,n)=>jmn(e,t,n)===0;var zmn=Bmn;const Umn=yT,Vmn=(e,t,n)=>Umn(e,t,n)!==0;var Hmn=Vmn;const qmn=yT,Wmn=(e,t,n)=>qmn(e,t,n)>0;var Gmn=Wmn;const Ymn=yT,Kmn=(e,t,n)=>Ymn(e,t,n)>=0;var Xmn=Kmn;const Qmn=yT,Jmn=(e,t,n)=>Qmn(e,t,n)<0;var Zmn=Jmn;const egn=yT,tgn=(e,t,n)=>egn(e,t,n)<=0;var ngn=tgn;const rgn=zmn,ign=Hmn,sgn=Gmn,ogn=Xmn,agn=Zmn,lgn=ngn,ugn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return rgn(e,n,r);case"!=":return ign(e,n,r);case">":return sgn(e,n,r);case">=":return ogn(e,n,r);case"<":return agn(e,n,r);case"<=":return lgn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var cgn=ugn,bz,nbe;function dgn(){if(nbe)return bz;nbe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,d){if(d=n(d),c instanceof t){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const d=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],f=c.match(d);if(!f)throw new TypeError(`Invalid comparator: ${c}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new a(f[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,d).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,d).test(c.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}bz=t;const n=Poe,{safeRe:r,t:i}=Ooe,s=cgn,o=t8,a=Doe,l=oze();return bz}var _z,rbe;function oze(){if(rbe)return _z;rbe=1;class e{constructor(M,$){if($=r($),M instanceof e)return M.loose===!!$.loose&&M.includePrerelease===!!$.includePrerelease?M:new e(M.raw,$);if(M instanceof i)return this.raw=M.value,this.set=[[M]],this.format(),this;if(this.options=$,this.loose=!!$.loose,this.includePrerelease=!!$.includePrerelease,this.raw=M.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map(M=>M.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(M){const L=((this.options.includePrerelease&&f)|(this.options.loose&&h))+":"+M,B=n.get(L);if(B)return B;const U=this.options.loose,z=U?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];M=M.replace(z,k(this.options.includePrerelease)),s("hyphen replace",M),M=M.replace(a[l.COMPARATORTRIM],u),s("comparator trim",M),M=M.replace(a[l.TILDETRIM],c),s("tilde trim",M),M=M.replace(a[l.CARETTRIM],d),s("caret trim",M);let N=M.split(" ").map(H=>y(H,this.options)).join(" ").split(/\s+/).map(H=>P(H,this.options));U&&(N=N.filter(H=>(s("loose invalid filter",H,this.options),!!H.match(a[l.COMPARATORLOOSE])))),s("range list",N);const V=new Map,W=N.map(H=>new i(H,this.options));for(const H of W){if(p(H))return[H];V.set(H.value,H)}V.size>1&&V.has("")&&V.delete("");const F=[...V.values()];return n.set(L,F),F}intersects(M,$){if(!(M instanceof e))throw new TypeError("a Range is required");return this.set.some(L=>g(L,$)&&M.set.some(B=>g(B,$)&&L.every(U=>B.every(z=>U.intersects(z,$)))))}test(M){if(!M)return!1;if(typeof M=="string")try{M=new o(M,this.options)}catch{return!1}for(let $=0;$<this.set.length;$++)if(D(this.set[$],M,this.options))return!0;return!1}}_z=e;const t=Smn,n=new t,r=Poe,i=dgn(),s=t8,o=Doe,{safeRe:a,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:d}=Ooe,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:h}=Noe,p=R=>R.value==="<0.0.0-0",m=R=>R.value==="",g=(R,M)=>{let $=!0;const L=R.slice();let B=L.pop();for(;$&&L.length;)$=L.every(U=>B.intersects(U,M)),B=L.pop();return $},y=(R,M)=>(s("comp",R,M),R=E(R,M),s("caret",R),R=_(R,M),s("tildes",R),R=x(R,M),s("xrange",R),R=I(R,M),s("stars",R),R),v=R=>!R||R.toLowerCase()==="x"||R==="*",_=(R,M)=>R.trim().split(/\s+/).map($=>w($,M)).join(" "),w=(R,M)=>{const $=M.loose?a[l.TILDELOOSE]:a[l.TILDE];return R.replace($,(L,B,U,z,N)=>{s("tilde",R,L,B,U,z,N);let V;return v(B)?V="":v(U)?V=`>=${B}.0.0 <${+B+1}.0.0-0`:v(z)?V=`>=${B}.${U}.0 <${B}.${+U+1}.0-0`:N?(s("replaceTilde pr",N),V=`>=${B}.${U}.${z}-${N} <${B}.${+U+1}.0-0`):V=`>=${B}.${U}.${z} <${B}.${+U+1}.0-0`,s("tilde return",V),V})},E=(R,M)=>R.trim().split(/\s+/).map($=>S($,M)).join(" "),S=(R,M)=>{s("caret",R,M);const $=M.loose?a[l.CARETLOOSE]:a[l.CARET],L=M.includePrerelease?"-0":"";return R.replace($,(B,U,z,N,V)=>{s("caret",R,B,U,z,N,V);let W;return v(U)?W="":v(z)?W=`>=${U}.0.0${L} <${+U+1}.0.0-0`:v(N)?U==="0"?W=`>=${U}.${z}.0${L} <${U}.${+z+1}.0-0`:W=`>=${U}.${z}.0${L} <${+U+1}.0.0-0`:V?(s("replaceCaret pr",V),U==="0"?z==="0"?W=`>=${U}.${z}.${N}-${V} <${U}.${z}.${+N+1}-0`:W=`>=${U}.${z}.${N}-${V} <${U}.${+z+1}.0-0`:W=`>=${U}.${z}.${N}-${V} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?z==="0"?W=`>=${U}.${z}.${N}${L} <${U}.${z}.${+N+1}-0`:W=`>=${U}.${z}.${N}${L} <${U}.${+z+1}.0-0`:W=`>=${U}.${z}.${N} <${+U+1}.0.0-0`),s("caret return",W),W})},x=(R,M)=>(s("replaceXRanges",R,M),R.split(/\s+/).map($=>T($,M)).join(" ")),T=(R,M)=>{R=R.trim();const $=M.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return R.replace($,(L,B,U,z,N,V)=>{s("xRange",R,L,B,U,z,N,V);const W=v(U),F=W||v(z),H=F||v(N),G=H;return B==="="&&G&&(B=""),V=M.includePrerelease?"-0":"",W?B===">"||B==="<"?L="<0.0.0-0":L="*":B&&G?(F&&(z=0),N=0,B===">"?(B=">=",F?(U=+U+1,z=0,N=0):(z=+z+1,N=0)):B==="<="&&(B="<",F?U=+U+1:z=+z+1),B==="<"&&(V="-0"),L=`${B+U}.${z}.${N}${V}`):F?L=`>=${U}.0.0${V} <${+U+1}.0.0-0`:H&&(L=`>=${U}.${z}.0${V} <${U}.${+z+1}.0-0`),s("xRange return",L),L})},I=(R,M)=>(s("replaceStars",R,M),R.trim().replace(a[l.STAR],"")),P=(R,M)=>(s("replaceGTE0",R,M),R.trim().replace(a[M.includePrerelease?l.GTE0PRE:l.GTE0],"")),k=R=>(M,$,L,B,U,z,N,V,W,F,H,G)=>(v(L)?$="":v(B)?$=`>=${L}.0.0${R?"-0":""}`:v(U)?$=`>=${L}.${B}.0${R?"-0":""}`:z?$=`>=${$}`:$=`>=${$}${R?"-0":""}`,v(W)?V="":v(F)?V=`<${+W+1}.0.0-0`:v(H)?V=`<${W}.${+F+1}.0-0`:G?V=`<=${W}.${F}.${H}-${G}`:R?V=`<${W}.${F}.${+H+1}-0`:V=`<=${V}`,`${$} ${V}`.trim()),D=(R,M,$)=>{for(let L=0;L<R.length;L++)if(!R[L].test(M))return!1;if(M.prerelease.length&&!$.includePrerelease){for(let L=0;L<R.length;L++)if(s(R[L].semver),R[L].semver!==i.ANY&&R[L].semver.prerelease.length>0){const B=R[L].semver;if(B.major===M.major&&B.minor===M.minor&&B.patch===M.patch)return!0}return!1}return!0};return _z}const fgn=oze(),hgn=(e,t,n)=>{try{t=new fgn(t,n)}catch{return!1}return t.test(e)};var pgn=hgn,aze=Emn(pgn);function mgn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function l(c){c.source===r&&(a=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){a<=0||(r.postMessage(n,o),setTimeout(u,s),a-=1)}setTimeout(u,s)}var ggn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function lze(e,...t){for(const n of t)ygn(e,n);return e}function ygn(e,t){for(const n of Object.keys(t))ZS(e,n,t[n],!0)}const $d=ssn;let ER=fpn;const LO=typeof window<"u"?window:void 0;var lbe;ER===void 0&&((lbe=LO==null?void 0:LO.vl)!=null&&lbe.compile)&&(ER=LO.vl);const vgn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},bgn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},E2={vega:"Vega","vega-lite":"Vega-Lite"},HL={vega:$d.version,"vega-lite":ER?ER.version:"not available"},_gn={vega:e=>e,"vega-lite":(e,t)=>ER.compile(e,{config:t}).spec},wgn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Egn="chart-wrapper";function xgn(e){return typeof e=="function"}function ibe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${E2[r]} JSON Source`}function Sgn(e,t){if(e.$schema){const n=eze(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${E2[n.library]}, but mode argument sets ${E2[t]??t}.`);const r=n.library;return aze(HL[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${E2[r]} ${n.version}, but the current version of ${E2[r]} is v${HL[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function uze(e){return!!(e&&"load"in e)}function sbe(e){return uze(e)?e:$d.loader(e)}function Tgn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Et(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Cgn(e,t,n={}){let r,i;Et(t)?(i=sbe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Tgn(r),o=s.loader;(!i||o)&&(i=sbe(n.loader??o));const a=await obe(s,i),l=await obe(n,i),u={...lze(l,a),config:JS(l.config??{},a.config??{})};return await Ign(e,r,u,i)}async function obe(e,t){const n=Et(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Et(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Agn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Ign(e,t,n={},r){const i=n.theme?JS(hmn[n.theme],n.config??{}):n.config,s=pv(n.actions)?n.actions:lze({},vgn,n.actions??{}),o={...bgn,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??$d.Warn,u=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:S,rootContainer:x}=Agn(c);if(!S.getElementById(E)){const T=document.createElement("style");T.id=E,T.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?ggn.toString():n.defaultStyle,x.appendChild(T)}}const d=Sgn(t,n.mode);let f=_gn[d](t,i);if(d==="vega-lite"&&f.$schema){const E=eze(f.$schema);aze(HL.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${HL.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(Egn),c.appendChild(E),h=E}const p=n.patch;if(p&&(f=p instanceof Function?p(f):mj(f,p,!0,!1).newDocument),n.formatLocale&&$d.formatLocale(n.formatLocale),n.timeFormatLocale&&$d.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const S=n.expressionFunctions[E];"fn"in S?$d.expressionFunction(E,S.fn,S.visitor):S instanceof Function&&$d.expressionFunction(E,S)}const{ast:m}=n,g=$d.parse(f,d==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||$d.View)(g,{loader:r,logLevel:l,renderer:a,...m?{expr:$d.expressionInterpreter??n.expr??msn}:{}});if(y.addSignalListener("autosize",(E,S)=>{const{type:x}=S;x=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):x=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):x=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:S}=n,x=E&&!uze(E)?E==null?void 0:E.baseURL:void 0,T=xgn(S)?S:new wmn({baseURL:x,...S===!0?{}:S}).call;y.tooltip(T)}let{hover:v}=n;if(v===void 0&&(v=d==="vega"),v){const{hoverSet:E,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(E,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let _;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const x=document.createElement("details");x.title=o.CLICK_TO_VIEW_ACTIONS,c.append(x),E=x;const T=document.createElement("summary");T.innerHTML=wgn,x.append(T),_=I=>{x.contains(I.target)||x.removeAttribute("open")},document.addEventListener("click",_)}const S=document.createElement("div");if(E.append(S),S.classList.add("vega-actions"),s===!0||s.export!==!1){for(const x of["svg","png"])if(s===!0||s.export===!0||s.export[x]){const T=o[`${x.toUpperCase()}_ACTION`],I=document.createElement("a"),P=bt(n.scaleFactor)?n.scaleFactor[x]:n.scaleFactor;I.text=T,I.href="#",I.target="_blank",I.download=`${u}.${x}`,I.addEventListener("mousedown",async function(k){k.preventDefault();const D=await y.toImageURL(x,P);this.href=D}),S.append(I)}}if(s===!0||s.source!==!1){const x=document.createElement("a");x.text=o.SOURCE_ACTION,x.href="#",x.addEventListener("click",function(T){ibe(S7(t),n.sourceHeader??"",n.sourceFooter??"",d),T.preventDefault()}),S.append(x)}if(d==="vega-lite"&&(s===!0||s.compiled!==!1)){const x=document.createElement("a");x.text=o.COMPILED_ACTION,x.href="#",x.addEventListener("click",function(T){ibe(S7(f),n.sourceHeader??"",n.sourceFooter??"","vega"),T.preventDefault()}),S.append(x)}if(s===!0||s.editor!==!1){const x=n.editorUrl??"https://vega.github.io/editor/",T=document.createElement("a");T.text=o.EDITOR_ACTION,T.href="#",T.addEventListener("click",function(I){mgn(window,x,{config:i,mode:p?"vega":d,renderer:a,spec:S7(p?f:t)}),I.preventDefault()}),S.append(T)}}function w(){_&&document.removeEventListener("click",_),y.finalize()}return{view:y,spec:t,vgSpec:f,finalize:w,embedOptions:n}}function Rgn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function kgn(e,t,n){n&&(Rgn(n)?n(e.data(t)):e.change(t,$d.changeset().remove(()=>!0).insert(n)))}function Pgn(e,t){Object.keys(t).forEach(n=>{kgn(e,n,t[n])})}function cze(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const dze=()=>{};function wz(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Ngn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=cze([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!sD(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function abe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function Ez(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function x2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class fze extends us.PureComponent{constructor(){super(...arguments),x2(this,"containerRef",us.createRef()),x2(this,"resultPromise",void 0),x2(this,"handleError",t=>{const{onError:n=dze}=this.props;n(t,this.containerRef.current),console.warn(t)}),x2(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=cze([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Ngn(Ez(this.props),Ez(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!Uq(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&abe(a,s),i&&wz(a,i)),a.run()})}else Uq(i,s)||this.modifyView(o=>{s&&abe(o,s),i&&wz(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=Ez(this.props);this.resultPromise=Cgn(this.containerRef.current,a,o).then(l=>{if(l){const{view:u}=l;wz(u,r)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return us.createElement("div",{ref:this.containerRef,className:t,style:n})}}x2(fze,"propTypes",{className:g0e.string,onError:g0e.func});function vG(){return vG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vG.apply(this,arguments)}function bG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ogn={};class hze extends us.PureComponent{constructor(){super(...arguments),bG(this,"vegaEmbed",us.createRef()),bG(this,"handleNewView",t=>{this.update();const{onNewView:n=dze}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){Uq(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Pgn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return us.createElement(fze,vG({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}bG(hze,"defaultProps",{data:Ogn});function _G(){return _G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_G.apply(this,arguments)}function Dgn(e){return us.createElement(hze,_G({},e,{mode:"vega-lite"}))}function Mgn(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function $gn(e){const{studyId:t,allParticipants:n,config:r}=e,i=md(),[s,o]=of(),a=n.filter(_=>_.completed).map(_=>Math.max(...Object.values(_.answers).map(w=>w.endTime).filter(w=>w!==void 0))).filter(_=>Number.isFinite(_)),[l,u]=A.useState([new Date(new Date(Math.min(...a.length>0?a:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...a.length>0?a:[new Date().getTime()])).setHours(24,0,0,0))]),[c,d,f,h]=A.useMemo(()=>{const _=n.filter(S=>!S.rejected&&S.completed),w=n.filter(S=>!S.rejected&&!S.completed),E=n.filter(S=>S.rejected);return[_,w,E,_.filter(S=>Mgn(S.answers,l))]},[n,l]),p=A.useMemo(()=>{var _,w;return h.length>0?[{Date:(_=l[0])==null?void 0:_.getTime(),Participants:0},...h.map(E=>Math.max(...Object.values(E.answers).map(S=>S.endTime).flat())).sort((E,S)=>E-S).map((E,S)=>({Date:E,Participants:S})),{Date:(w=l[1])==null?void 0:w.getTime(),Participants:h.length}]:[]},[h,l]),m=A.useMemo(()=>{var _,w;return{width:o.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(_=l[0])==null?void 0:_.getTime(),(w=l[1])==null?void 0:w.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:p}}},[o.width,l,p]),[g,{close:y,open:v}]=M2(!1);return b.jsx(Mf,{children:b.jsxs(Kb,{ref:s,padding:"lg",shadow:"md",withBorder:!0,children:[b.jsxs(It,{align:"center",mb:"xs",justify:"space-between",children:[b.jsxs(It,{direction:"row",align:"center",children:[b.jsx(Ti,{order:5,children:t}),b.jsx(P3e,{completed:c.length,inProgress:d.length,rejected:f.length,filteredCompleted:h.length})]}),b.jsxs(Tn,{children:[b.jsx(k3e,{allParticipants:n,studyId:t}),b.jsxs($n,{opened:g,children:[b.jsx($n.Target,{children:b.jsx(yn,{onClick:()=>i(`/analysis/stats/${t}`),onMouseEnter:v,onMouseLeave:y,px:4,children:b.jsx(ztt,{})})}),b.jsx($n.Dropdown,{children:b.jsx(nt,{children:"Analyze and manage study data"})})]})]})]}),b.jsx(Ute,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:l,onChange:u}),p.length>0?b.jsxs(b.Fragment,{children:[b.jsx(nt,{mt:16,children:"Finished Participants"}),b.jsx(Dgn,{spec:m,actions:!1})]}):b.jsx(_e,{h:293.4,children:b.jsx(dl,{style:{height:"100%"},children:b.jsx(nt,{children:"Not enough participants for chart"})})})]})})}function Lgn(e){const{globalConfig:t}=e,[n,r]=A.useState(!1),[i,s]=A.useState({}),[o,a]=A.useState({}),[l,u]=A.useState({}),{storageEngine:c}=Pi(),{user:d}=Ap();A.useEffect(()=>{(async()=>{r(!0);const p={},m={},g={},y=async _=>{const w=await J4(_,t);if(c){if(p[_]=await c.getAllParticipantsDataByStudy(_),w===null)return;if(m[_]=w,c instanceof Nc){const E=await c.getModes(_);g[_]=E.analyticsInterfacePubliclyAccessible}}};await(async()=>{const _=t.configsList.map(w=>y(w));try{await Promise.all(_),s(p),a(m),u(g)}catch(w){console.error("Error fetching data:",w)}finally{r(!1)}})()})()},[t,c]);const f=t.configsList.map(h=>i[h]&&(l[h]||d.isAdmin?b.jsx(jc.Col,{span:{md:12,xl:6},children:b.jsx($gn,{studyId:h,allParticipants:i[h],config:o[h]})},`${h}-panel`):null));return b.jsxs(_e,{children:[b.jsx(Ti,{mb:20,order:4,children:"Your Studies:"}),b.jsxs(jc,{children:[f.length>0?f:b.jsx(Mf,{mt:100,children:b.jsx(nt,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),b.jsx(uu,{visible:n})]})]})}function Fgn({globalConfig:e}){return b.jsxs(Hr,{children:[b.jsx(gA,{studyIds:e.configsList}),b.jsx(Hr.Main,{children:b.jsx(Mf,{fluid:!0,children:b.jsx(Lgn,{globalConfig:e})})})]})}function jgn(){const{user:e,triggerAuth:t}=Ap(),{storageEngine:n}=Pi(),[r,i]=A.useState(!1),[s,o]=A.useState([]),[a,l]=A.useState(!1),[u,c]=A.useState(!1),[d,f]=A.useState(!1),[h,p]=A.useState(!1),[m,g]=A.useState(""),[y,v]=A.useState(null),_=q2e({initialValues:{email:""},validate:{email:Syt("Invalid email")}});A.useEffect(()=>{(async()=>{if(l(!0),n instanceof Nc){const k=await(n==null?void 0:n.getUserManagementData("authentication"));i(k==null?void 0:k.isEnabled);const D=await(n==null?void 0:n.getUserManagementData("adminUsers"));D&&D.adminUsersList&&o(D==null?void 0:D.adminUsersList.map(R=>R.email))}else i(!1);l(!1)})()},[n]);const w=async()=>{if(l(!0),n instanceof Nc){const P=await GLe(n,l);P&&P.email&&v({email:P.email,uid:P.uid}),p(!0)}l(!1)},E=async P=>{l(!0),n instanceof Nc&&P&&(await n.changeAuth(!0),await n.addAdminUser(P),o([P.email]),i(!0),t()),p(!1),l(!1)},S=async()=>{if(l(!0),n instanceof Nc){await n.addAdminUser({email:_.values.email,uid:null});const P=await n.getUserManagementData("adminUsers");o(P==null?void 0:P.adminUsersList.map(k=>k.email))}l(!1),c(!1),_.setValues({email:""})},x=P=>{f(!0),g(P)},T=async()=>{if(l(!0),n instanceof Nc){await n.removeAdminUser(m);const P=await n.getUserManagementData("adminUsers");o(P==null?void 0:P.adminUsersList.map(k=>k.email))}f(!1),l(!1)},I=A.useMemo(()=>n instanceof Nc,[n]);return b.jsxs(b.Fragment,{children:[b.jsx(Mf,{children:b.jsxs(Kb,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[b.jsx(Ti,{mb:20,order:3,children:"Authentication"}),r?b.jsx(It,{children:b.jsx(nt,{children:"Authentication is enabled."})}):b.jsxs(It,{justify:"space-between",children:[b.jsx(_e,{children:b.jsx(nt,{children:"Authentication is currently disabled."})}),b.jsx(on,{label:"You can only enable auth when using Firebase",disabled:I,children:b.jsx(yn,{onClick:P=>I?w():P.preventDefault(),color:"green","data-disabled":I?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?b.jsxs(It,{mt:40,direction:"column",children:[b.jsxs(It,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[b.jsx(Ti,{order:6,children:"Enabled Users"}),b.jsx(ISe,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(P=>{var k;return b.jsxs(It,{justify:"space-between",mb:10,children:[b.jsx(nt,{children:P}),P===((k=e.user)==null?void 0:k.email)?b.jsx(nt,{color:"blue",size:"xs",children:"You"}):b.jsx(Fn,{variant:"subtle",onClick:()=>x(P),children:b.jsx(ASe,{color:"red"})})]},P)}):null]}):null]})}),b.jsx(Ss,{opened:u,onClose:()=>c(!1),title:"Add Admin User",children:b.jsxs(_e,{component:"form",onSubmit:_.onSubmit(()=>S()),children:[b.jsx(lf,{leftSection:b.jsx(Dtt,{}),placeholder:"User Gmail Account",..._.getInputProps("email")}),b.jsxs(It,{mt:30,justify:"right",children:[b.jsx(yn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),b.jsx(yn,{type:"submit",children:"Save"})]})]})}),b.jsxs(Ss,{opened:d,size:"large",onClose:()=>f(!1),title:b.jsxs(nt,{fw:700,children:["Remove",m,"?"]}),children:[b.jsxs(nt,{mt:40,children:["Are you sure you want to remove",b.jsx("b",{children:m})," ","as an administrator?"]}),b.jsxs(It,{mt:40,justify:"right",children:[b.jsx(yn,{mr:5,variant:"subtle",color:"red",onClick:()=>f(!1),children:"Cancel"}),b.jsx(yn,{onClick:()=>T(),children:"Yes, I'm sure."})]})]}),b.jsxs(Ss,{opened:h,size:"md",onClose:()=>f(!1),title:b.jsx(nt,{fw:700,children:"Enable Authentication?"}),children:[b.jsxs(nt,{mt:40,children:["User"," ",b.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),b.jsxs(It,{mt:40,justify:"right",children:[b.jsx(yn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),b.jsx(yn,{onClick:()=>E(y),children:"Yes, I'm sure."})]})]}),b.jsx(uu,{visible:a})]})}class Bgn extends S3e{constructor(){super("localStorage");Rl(this,"studyDatabase");Rl(this,"studyId")}saveAllParticipantAndTaskTags(n){throw new Error("Method not implemented.")}getAllParticipantAndTaskTags(){throw new Error("Method not implemented.")}saveTags(n){throw new Error("Method not implemented.")}getTags(){throw new Error("Method not implemented.")}getEditedTranscript(n){throw new Error("Method not implemented.")}saveEditedTranscript(n,r,i,s){throw new Error("Method not implemented.")}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}getTranscription(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await Ew.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await Y3(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var d;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const l=await this.getModes(n),u=await Y3(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:u,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return l.dataCollectionEnabled&&await((d=this.studyDatabase)==null?void 0:d.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await Ew.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=FI();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=Ew.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=FI();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await Ew.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await Ew.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function zgn(){let e,t=!1;{const n=new Nc;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new Bgn;await n.connect(),e=n}return e}async function Ugn(){const t=await(await fetch(`${pc}global.json`)).text();return J0t(t)}function Vgn(){const[e,t]=A.useState(null),[n,r]=A.useState({});A.useEffect(()=>{async function a(){e&&r(await YBt(e))}a()},[e]),A.useEffect(()=>{e||Ugn().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Pi();A.useEffect(()=>{if(i!==void 0)return;async function a(){const l=await zgn();s(l)}a()},[s,i]);const o=async a=>i instanceof Nc?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?b.jsx(vtt,{basename:pc,children:b.jsx(_Bt,{children:b.jsx(Att,{children:b.jsx(Hr,{padding:"md",header:{height:70},children:b.jsxs(ctt,{children:[b.jsx(Kp,{path:"/",element:b.jsxs(b.Fragment,{children:[b.jsx(gA,{studyIds:e.configsList}),b.jsx(oct,{globalConfig:e,studyConfigs:n})]})}),b.jsx(Kp,{path:"/:studyId/*",element:b.jsx(XBt,{globalConfig:e})}),b.jsx(Kp,{path:"/analysis/dashboard",element:b.jsx(Fgn,{globalConfig:e})}),b.jsx(Kp,{path:"/analysis",element:b.jsx(Dq,{to:"/analysis/dashboard"})}),b.jsx(Kp,{path:"/analysis/stats/:studyId/:tab",element:b.jsx(m0e,{paramToCheck:"studyId",paramCallback:o,children:b.jsx(ZUt,{globalConfig:e})})}),b.jsx(Kp,{path:"/analysis/stats/:studyId",element:b.jsx(Dq,{to:"./table",replace:!0})}),b.jsx(Kp,{path:"/settings",element:b.jsx(Hr,{children:b.jsxs(m0e,{children:[b.jsx(gA,{studyIds:e.configsList}),b.jsx(Hr.Main,{children:b.jsx(jgn,{})})]})})}),b.jsx(Kp,{path:"/login",element:b.jsxs(Hr,{children:[b.jsx(gA,{studyIds:e.configsList}),b.jsx(Hr.Main,{children:b.jsx(eVt,{})})]})})]})})})})}):null}xz.createRoot(document.getElementById("root")).render(b.jsx(us.StrictMode,{children:b.jsx(_et,{children:b.jsx(Hwe,{children:b.jsx(Vgn,{})})})}))});export default Hgn();
