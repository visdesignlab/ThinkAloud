var U7e=Object.defineProperty;var V7e=(e,t,n)=>t in e?U7e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var H7e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var gl=(e,t,n)=>V7e(e,typeof t!="symbol"?t+"":t,n);var V0n=H7e((Qyn,Voe)=>{function q7e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var qi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Nbe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Obe={exports:{}},QL={},Dbe={exports:{}},Fn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ik=Symbol.for("react.element"),W7e=Symbol.for("react.portal"),G7e=Symbol.for("react.fragment"),Y7e=Symbol.for("react.strict_mode"),K7e=Symbol.for("react.profiler"),X7e=Symbol.for("react.provider"),Q7e=Symbol.for("react.context"),J7e=Symbol.for("react.forward_ref"),Z7e=Symbol.for("react.suspense"),eUe=Symbol.for("react.memo"),tUe=Symbol.for("react.lazy"),lae=Symbol.iterator;function nUe(e){return e===null||typeof e!="object"?null:(e=lae&&e[lae]||e["@@iterator"],typeof e=="function"?e:null)}var Mbe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$be=Object.assign,Lbe={};function eS(e,t,n){this.props=e,this.context=t,this.refs=Lbe,this.updater=n||Mbe}eS.prototype.isReactComponent={};eS.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};eS.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Fbe(){}Fbe.prototype=eS.prototype;function RG(e,t,n){this.props=e,this.context=t,this.refs=Lbe,this.updater=n||Mbe}var PG=RG.prototype=new Fbe;PG.constructor=RG;$be(PG,eS.prototype);PG.isPureReactComponent=!0;var uae=Array.isArray,jbe=Object.prototype.hasOwnProperty,NG={current:null},Bbe={key:!0,ref:!0,__self:!0,__source:!0};function zbe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)jbe.call(t,r)&&!Bbe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ik,type:e,key:s,ref:o,props:i,_owner:NG.current}}function rUe(e,t){return{$$typeof:Ik,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function OG(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ik}function iUe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var cae=/\/+/g;function u8(e,t){return typeof e=="object"&&e!==null&&e.key!=null?iUe(""+e.key):t.toString(36)}function qO(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ik:case W7e:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+u8(o,0):r,uae(i)?(n="",e!=null&&(n=e.replace(cae,"$&/")+"/"),qO(i,t,n,"",function(u){return u})):i!=null&&(OG(i)&&(i=rUe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(cae,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",uae(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+u8(s,a);o+=qO(s,t,n,l,i)}else if(l=nUe(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+u8(s,a++),o+=qO(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function qP(e,t,n){if(e==null)return e;var r=[],i=0;return qO(e,r,"","",function(s){return t.call(n,s,i++)}),r}function sUe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var il={current:null},WO={transition:null},oUe={ReactCurrentDispatcher:il,ReactCurrentBatchConfig:WO,ReactCurrentOwner:NG};function Ube(){throw Error("act(...) is not supported in production builds of React.")}Fn.Children={map:qP,forEach:function(e,t,n){qP(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return qP(e,function(){t++}),t},toArray:function(e){return qP(e,function(t){return t})||[]},only:function(e){if(!OG(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Fn.Component=eS;Fn.Fragment=G7e;Fn.Profiler=K7e;Fn.PureComponent=RG;Fn.StrictMode=Y7e;Fn.Suspense=Z7e;Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oUe;Fn.act=Ube;Fn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=$be({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=NG.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)jbe.call(t,l)&&!Bbe.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ik,type:e.type,key:i,ref:s,props:r,_owner:o}};Fn.createContext=function(e){return e={$$typeof:Q7e,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:X7e,_context:e},e.Consumer=e};Fn.createElement=zbe;Fn.createFactory=function(e){var t=zbe.bind(null,e);return t.type=e,t};Fn.createRef=function(){return{current:null}};Fn.forwardRef=function(e){return{$$typeof:J7e,render:e}};Fn.isValidElement=OG;Fn.lazy=function(e){return{$$typeof:tUe,_payload:{_status:-1,_result:e},_init:sUe}};Fn.memo=function(e,t){return{$$typeof:eUe,type:e,compare:t===void 0?null:t}};Fn.startTransition=function(e){var t=WO.transition;WO.transition={};try{e()}finally{WO.transition=t}};Fn.unstable_act=Ube;Fn.useCallback=function(e,t){return il.current.useCallback(e,t)};Fn.useContext=function(e){return il.current.useContext(e)};Fn.useDebugValue=function(){};Fn.useDeferredValue=function(e){return il.current.useDeferredValue(e)};Fn.useEffect=function(e,t){return il.current.useEffect(e,t)};Fn.useId=function(){return il.current.useId()};Fn.useImperativeHandle=function(e,t,n){return il.current.useImperativeHandle(e,t,n)};Fn.useInsertionEffect=function(e,t){return il.current.useInsertionEffect(e,t)};Fn.useLayoutEffect=function(e,t){return il.current.useLayoutEffect(e,t)};Fn.useMemo=function(e,t){return il.current.useMemo(e,t)};Fn.useReducer=function(e,t,n){return il.current.useReducer(e,t,n)};Fn.useRef=function(e){return il.current.useRef(e)};Fn.useState=function(e){return il.current.useState(e)};Fn.useSyncExternalStore=function(e,t,n){return il.current.useSyncExternalStore(e,t,n)};Fn.useTransition=function(){return il.current.useTransition()};Fn.version="18.3.1";Dbe.exports=Fn;var A=Dbe.exports;const Vi=rl(A),mM=q7e({__proto__:null,default:Vi},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aUe=A,lUe=Symbol.for("react.element"),uUe=Symbol.for("react.fragment"),cUe=Object.prototype.hasOwnProperty,dUe=aUe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fUe={key:!0,ref:!0,__self:!0,__source:!0};function Vbe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)cUe.call(t,r)&&!fUe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:lUe,type:e,key:s,ref:o,props:i,_owner:dUe.current}}QL.Fragment=uUe;QL.jsx=Vbe;QL.jsxs=Vbe;Obe.exports=QL;var b=Obe.exports,T7={},Hbe={exports:{}},Ku={},qbe={exports:{}},Wbe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,V){var M=U.length;U.push(V);e:for(;0<M;){var z=M-1>>>1,q=U[z];if(0<i(q,V))U[z]=V,U[M]=q,M=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var V=U[0],M=U.pop();if(M!==V){U[0]=M;e:for(var z=0,q=U.length,j=q>>>1;z<j;){var H=2*(z+1)-1,G=U[H],J=H+1,re=U[J];if(0>i(G,M))J<q&&0>i(re,G)?(U[z]=re,U[J]=M,z=J):(U[z]=G,U[H]=M,z=H);else if(J<q&&0>i(re,M))U[z]=re,U[J]=M,z=J;else break e}}return V}function i(U,V){var M=U.sortIndex-V.sortIndex;return M!==0?M:U.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var V=n(u);V!==null;){if(V.callback===null)r(u);else if(V.startTime<=U)r(u),V.sortIndex=V.expirationTime,t(l,V);else break;V=n(u)}}function w(U){if(m=!1,_(U),!p)if(n(l)!==null)p=!0,O(x);else{var V=n(u);V!==null&&F(w,V.startTime-U)}}function x(U,V){p=!1,m&&(m=!1,y(T),T=-1),h=!0;var M=f;try{for(_(V),d=n(l);d!==null&&(!(d.expirationTime>V)||U&&!P());){var z=d.callback;if(typeof z=="function"){d.callback=null,f=d.priorityLevel;var q=z(d.expirationTime<=V);V=e.unstable_now(),typeof q=="function"?d.callback=q:d===n(l)&&r(l),_(V)}else r(l);d=n(l)}if(d!==null)var j=!0;else{var H=n(u);H!==null&&F(w,H.startTime-V),j=!1}return j}finally{d=null,f=M,h=!1}}var S=!1,E=null,T=-1,I=5,k=-1;function P(){return!(e.unstable_now()-k<I)}function L(){if(E!==null){var U=e.unstable_now();k=U;var V=!0;try{V=E(!0,U)}finally{V?R():(S=!1,E=null)}}else S=!1}var R;if(typeof v=="function")R=function(){v(L)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,D=$.port2;$.port1.onmessage=L,R=function(){D.postMessage(null)}}else R=function(){g(L,0)};function O(U){E=U,S||(S=!0,R())}function F(U,V){T=g(function(){U(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,O(x))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(U){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var M=f;f=V;try{return U()}finally{f=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,V){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var M=f;f=U;try{return V()}finally{f=M}},e.unstable_scheduleCallback=function(U,V,M){var z=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?z+M:z):M=z,U){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=M+q,U={id:c++,callback:V,priorityLevel:U,startTime:M,expirationTime:q,sortIndex:-1},M>z?(U.sortIndex=M,t(u,U),n(l)===null&&U===n(u)&&(m?(y(T),T=-1):m=!0,F(w,M-z))):(U.sortIndex=q,t(l,U),p||h||(p=!0,O(x))),U},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(U){var V=f;return function(){var M=f;f=V;try{return U.apply(this,arguments)}finally{f=M}}}})(Wbe);qbe.exports=Wbe;var hUe=qbe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pUe=A,Ou=hUe;function rt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gbe=new Set,NA={};function Bb(e,t){Mx(e,t),Mx(e+"Capture",t)}function Mx(e,t){for(NA[e]=t,e=0;e<t.length;e++)Gbe.add(t[e])}var Im=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C7=Object.prototype.hasOwnProperty,mUe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dae={},fae={};function gUe(e){return C7.call(fae,e)?!0:C7.call(dae,e)?!1:mUe.test(e)?fae[e]=!0:(dae[e]=!0,!1)}function yUe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function vUe(e,t,n,r){if(t===null||typeof t>"u"||yUe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function sl(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var ko={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ko[e]=new sl(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ko[t]=new sl(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ko[e]=new sl(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ko[e]=new sl(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ko[e]=new sl(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ko[e]=new sl(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ko[e]=new sl(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ko[e]=new sl(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ko[e]=new sl(e,5,!1,e.toLowerCase(),null,!1,!1)});var DG=/[\-:]([a-z])/g;function MG(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(DG,MG);ko[t]=new sl(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(DG,MG);ko[t]=new sl(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(DG,MG);ko[t]=new sl(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ko[e]=new sl(e,1,!1,e.toLowerCase(),null,!1,!1)});ko.xlinkHref=new sl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ko[e]=new sl(e,1,!1,e.toLowerCase(),null,!0,!0)});function $G(e,t,n,r){var i=ko.hasOwnProperty(t)?ko[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(vUe(t,n,i,r)&&(n=null),r||i===null?gUe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var rg=pUe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,WP=Symbol.for("react.element"),Cw=Symbol.for("react.portal"),Aw=Symbol.for("react.fragment"),LG=Symbol.for("react.strict_mode"),A7=Symbol.for("react.profiler"),Ybe=Symbol.for("react.provider"),Kbe=Symbol.for("react.context"),FG=Symbol.for("react.forward_ref"),I7=Symbol.for("react.suspense"),k7=Symbol.for("react.suspense_list"),jG=Symbol.for("react.memo"),Wg=Symbol.for("react.lazy"),Xbe=Symbol.for("react.offscreen"),hae=Symbol.iterator;function ET(e){return e===null||typeof e!="object"?null:(e=hae&&e[hae]||e["@@iterator"],typeof e=="function"?e:null)}var Ri=Object.assign,c8;function IC(e){if(c8===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);c8=t&&t[1]||""}return`
`+c8+e}var d8=!1;function f8(e,t){if(!e||d8)return"";d8=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{d8=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?IC(e):""}function bUe(e){switch(e.tag){case 5:return IC(e.type);case 16:return IC("Lazy");case 13:return IC("Suspense");case 19:return IC("SuspenseList");case 0:case 2:case 15:return e=f8(e.type,!1),e;case 11:return e=f8(e.type.render,!1),e;case 1:return e=f8(e.type,!0),e;default:return""}}function R7(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Aw:return"Fragment";case Cw:return"Portal";case A7:return"Profiler";case LG:return"StrictMode";case I7:return"Suspense";case k7:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Kbe:return(e.displayName||"Context")+".Consumer";case Ybe:return(e._context.displayName||"Context")+".Provider";case FG:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jG:return t=e.displayName||null,t!==null?t:R7(e.type)||"Memo";case Wg:t=e._payload,e=e._init;try{return R7(e(t))}catch{}}return null}function _Ue(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R7(t);case 8:return t===LG?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function J0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Qbe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function wUe(e){var t=Qbe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function GP(e){e._valueTracker||(e._valueTracker=wUe(e))}function Jbe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Qbe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function gM(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function P7(e,t){var n=t.checked;return Ri({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function pae(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=J0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zbe(e,t){t=t.checked,t!=null&&$G(e,"checked",t,!1)}function N7(e,t){Zbe(e,t);var n=J0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?O7(e,t.type,n):t.hasOwnProperty("defaultValue")&&O7(e,t.type,J0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mae(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function O7(e,t,n){(t!=="number"||gM(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var kC=Array.isArray;function Jw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+J0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function D7(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(rt(91));return Ri({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gae(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(rt(92));if(kC(n)){if(1<n.length)throw Error(rt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:J0(n)}}function e_e(e,t){var n=J0(t.value),r=J0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function yae(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function t_e(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function M7(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?t_e(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var YP,n_e=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(YP=YP||document.createElement("div"),YP.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=YP.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function OA(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var k2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xUe=["Webkit","ms","Moz","O"];Object.keys(k2).forEach(function(e){xUe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),k2[t]=k2[e]})});function r_e(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||k2.hasOwnProperty(e)&&k2[e]?(""+t).trim():t+"px"}function i_e(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=r_e(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var EUe=Ri({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $7(e,t){if(t){if(EUe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(rt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(rt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(rt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(rt(62))}}function L7(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var F7=null;function BG(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var j7=null,Zw=null,ex=null;function vae(e){if(e=Pk(e)){if(typeof j7!="function")throw Error(rt(280));var t=e.stateNode;t&&(t=nF(t),j7(e.stateNode,e.type,t))}}function s_e(e){Zw?ex?ex.push(e):ex=[e]:Zw=e}function o_e(){if(Zw){var e=Zw,t=ex;if(ex=Zw=null,vae(e),t)for(e=0;e<t.length;e++)vae(t[e])}}function a_e(e,t){return e(t)}function l_e(){}var h8=!1;function u_e(e,t,n){if(h8)return e(t,n);h8=!0;try{return a_e(e,t,n)}finally{h8=!1,(Zw!==null||ex!==null)&&(l_e(),o_e())}}function DA(e,t){var n=e.stateNode;if(n===null)return null;var r=nF(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(rt(231,t,typeof n));return n}var B7=!1;if(Im)try{var ST={};Object.defineProperty(ST,"passive",{get:function(){B7=!0}}),window.addEventListener("test",ST,ST),window.removeEventListener("test",ST,ST)}catch{B7=!1}function SUe(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var R2=!1,yM=null,vM=!1,z7=null,TUe={onError:function(e){R2=!0,yM=e}};function CUe(e,t,n,r,i,s,o,a,l){R2=!1,yM=null,SUe.apply(TUe,arguments)}function AUe(e,t,n,r,i,s,o,a,l){if(CUe.apply(this,arguments),R2){if(R2){var u=yM;R2=!1,yM=null}else throw Error(rt(198));vM||(vM=!0,z7=u)}}function zb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function c_e(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function bae(e){if(zb(e)!==e)throw Error(rt(188))}function IUe(e){var t=e.alternate;if(!t){if(t=zb(e),t===null)throw Error(rt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return bae(i),e;if(s===r)return bae(i),t;s=s.sibling}throw Error(rt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(rt(189))}}if(n.alternate!==r)throw Error(rt(190))}if(n.tag!==3)throw Error(rt(188));return n.stateNode.current===n?e:t}function d_e(e){return e=IUe(e),e!==null?f_e(e):null}function f_e(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=f_e(e);if(t!==null)return t;e=e.sibling}return null}var h_e=Ou.unstable_scheduleCallback,_ae=Ou.unstable_cancelCallback,kUe=Ou.unstable_shouldYield,RUe=Ou.unstable_requestPaint,rs=Ou.unstable_now,PUe=Ou.unstable_getCurrentPriorityLevel,zG=Ou.unstable_ImmediatePriority,p_e=Ou.unstable_UserBlockingPriority,bM=Ou.unstable_NormalPriority,NUe=Ou.unstable_LowPriority,m_e=Ou.unstable_IdlePriority,JL=null,Sh=null;function OUe(e){if(Sh&&typeof Sh.onCommitFiberRoot=="function")try{Sh.onCommitFiberRoot(JL,e,void 0,(e.current.flags&128)===128)}catch{}}var zd=Math.clz32?Math.clz32:$Ue,DUe=Math.log,MUe=Math.LN2;function $Ue(e){return e>>>=0,e===0?32:31-(DUe(e)/MUe|0)|0}var KP=64,XP=4194304;function RC(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _M(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=RC(a):(s&=o,s!==0&&(r=RC(s)))}else o=n&~i,o!==0?r=RC(o):s!==0&&(r=RC(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-zd(t),i=1<<n,r|=e[n],t&=~i;return r}function LUe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FUe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-zd(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=LUe(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function U7(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function g_e(){var e=KP;return KP<<=1,!(KP&4194240)&&(KP=64),e}function p8(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function kk(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zd(t),e[t]=n}function jUe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-zd(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function UG(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-zd(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kr=0;function y_e(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var v_e,VG,b_e,__e,w_e,V7=!1,QP=[],I0=null,k0=null,R0=null,MA=new Map,$A=new Map,t0=[],BUe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wae(e,t){switch(e){case"focusin":case"focusout":I0=null;break;case"dragenter":case"dragleave":k0=null;break;case"mouseover":case"mouseout":R0=null;break;case"pointerover":case"pointerout":MA.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$A.delete(t.pointerId)}}function TT(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=Pk(t),t!==null&&VG(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function zUe(e,t,n,r,i){switch(t){case"focusin":return I0=TT(I0,e,t,n,r,i),!0;case"dragenter":return k0=TT(k0,e,t,n,r,i),!0;case"mouseover":return R0=TT(R0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return MA.set(s,TT(MA.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,$A.set(s,TT($A.get(s)||null,e,t,n,r,i)),!0}return!1}function x_e(e){var t=_1(e.target);if(t!==null){var n=zb(t);if(n!==null){if(t=n.tag,t===13){if(t=c_e(n),t!==null){e.blockedOn=t,w_e(e.priority,function(){b_e(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function GO(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=H7(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);F7=r,n.target.dispatchEvent(r),F7=null}else return t=Pk(n),t!==null&&VG(t),e.blockedOn=n,!1;t.shift()}return!0}function xae(e,t,n){GO(e)&&n.delete(t)}function UUe(){V7=!1,I0!==null&&GO(I0)&&(I0=null),k0!==null&&GO(k0)&&(k0=null),R0!==null&&GO(R0)&&(R0=null),MA.forEach(xae),$A.forEach(xae)}function CT(e,t){e.blockedOn===t&&(e.blockedOn=null,V7||(V7=!0,Ou.unstable_scheduleCallback(Ou.unstable_NormalPriority,UUe)))}function LA(e){function t(i){return CT(i,e)}if(0<QP.length){CT(QP[0],e);for(var n=1;n<QP.length;n++){var r=QP[n];r.blockedOn===e&&(r.blockedOn=null)}}for(I0!==null&&CT(I0,e),k0!==null&&CT(k0,e),R0!==null&&CT(R0,e),MA.forEach(t),$A.forEach(t),n=0;n<t0.length;n++)r=t0[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<t0.length&&(n=t0[0],n.blockedOn===null);)x_e(n),n.blockedOn===null&&t0.shift()}var tx=rg.ReactCurrentBatchConfig,wM=!0;function VUe(e,t,n,r){var i=kr,s=tx.transition;tx.transition=null;try{kr=1,HG(e,t,n,r)}finally{kr=i,tx.transition=s}}function HUe(e,t,n,r){var i=kr,s=tx.transition;tx.transition=null;try{kr=4,HG(e,t,n,r)}finally{kr=i,tx.transition=s}}function HG(e,t,n,r){if(wM){var i=H7(e,t,n,r);if(i===null)S8(e,t,r,xM,n),wae(e,r);else if(zUe(i,e,t,n,r))r.stopPropagation();else if(wae(e,r),t&4&&-1<BUe.indexOf(e)){for(;i!==null;){var s=Pk(i);if(s!==null&&v_e(s),s=H7(e,t,n,r),s===null&&S8(e,t,r,xM,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else S8(e,t,r,null,n)}}var xM=null;function H7(e,t,n,r){if(xM=null,e=BG(r),e=_1(e),e!==null)if(t=zb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=c_e(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xM=e,null}function E_e(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PUe()){case zG:return 1;case p_e:return 4;case bM:case NUe:return 16;case m_e:return 536870912;default:return 16}default:return 16}}var f0=null,qG=null,YO=null;function S_e(){if(YO)return YO;var e,t=qG,n=t.length,r,i="value"in f0?f0.value:f0.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return YO=i.slice(e,1<r?1-r:void 0)}function KO(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function JP(){return!0}function Eae(){return!1}function Xu(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?JP:Eae,this.isPropagationStopped=Eae,this}return Ri(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=JP)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=JP)},persist:function(){},isPersistent:JP}),t}var tS={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},WG=Xu(tS),Rk=Ri({},tS,{view:0,detail:0}),qUe=Xu(Rk),m8,g8,AT,ZL=Ri({},Rk,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:GG,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==AT&&(AT&&e.type==="mousemove"?(m8=e.screenX-AT.screenX,g8=e.screenY-AT.screenY):g8=m8=0,AT=e),m8)},movementY:function(e){return"movementY"in e?e.movementY:g8}}),Sae=Xu(ZL),WUe=Ri({},ZL,{dataTransfer:0}),GUe=Xu(WUe),YUe=Ri({},Rk,{relatedTarget:0}),y8=Xu(YUe),KUe=Ri({},tS,{animationName:0,elapsedTime:0,pseudoElement:0}),XUe=Xu(KUe),QUe=Ri({},tS,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),JUe=Xu(QUe),ZUe=Ri({},tS,{data:0}),Tae=Xu(ZUe),eVe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tVe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nVe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rVe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nVe[e])?!!t[e]:!1}function GG(){return rVe}var iVe=Ri({},Rk,{key:function(e){if(e.key){var t=eVe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=KO(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tVe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:GG,charCode:function(e){return e.type==="keypress"?KO(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?KO(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sVe=Xu(iVe),oVe=Ri({},ZL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cae=Xu(oVe),aVe=Ri({},Rk,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:GG}),lVe=Xu(aVe),uVe=Ri({},tS,{propertyName:0,elapsedTime:0,pseudoElement:0}),cVe=Xu(uVe),dVe=Ri({},ZL,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fVe=Xu(dVe),hVe=[9,13,27,32],YG=Im&&"CompositionEvent"in window,P2=null;Im&&"documentMode"in document&&(P2=document.documentMode);var pVe=Im&&"TextEvent"in window&&!P2,T_e=Im&&(!YG||P2&&8<P2&&11>=P2),Aae=" ",Iae=!1;function C_e(e,t){switch(e){case"keyup":return hVe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A_e(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Iw=!1;function mVe(e,t){switch(e){case"compositionend":return A_e(t);case"keypress":return t.which!==32?null:(Iae=!0,Aae);case"textInput":return e=t.data,e===Aae&&Iae?null:e;default:return null}}function gVe(e,t){if(Iw)return e==="compositionend"||!YG&&C_e(e,t)?(e=S_e(),YO=qG=f0=null,Iw=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return T_e&&t.locale!=="ko"?null:t.data;default:return null}}var yVe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kae(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yVe[e.type]:t==="textarea"}function I_e(e,t,n,r){s_e(r),t=EM(t,"onChange"),0<t.length&&(n=new WG("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var N2=null,FA=null;function vVe(e){j_e(e,0)}function eF(e){var t=Pw(e);if(Jbe(t))return e}function bVe(e,t){if(e==="change")return t}var k_e=!1;if(Im){var v8;if(Im){var b8="oninput"in document;if(!b8){var Rae=document.createElement("div");Rae.setAttribute("oninput","return;"),b8=typeof Rae.oninput=="function"}v8=b8}else v8=!1;k_e=v8&&(!document.documentMode||9<document.documentMode)}function Pae(){N2&&(N2.detachEvent("onpropertychange",R_e),FA=N2=null)}function R_e(e){if(e.propertyName==="value"&&eF(FA)){var t=[];I_e(t,FA,e,BG(e)),u_e(vVe,t)}}function _Ve(e,t,n){e==="focusin"?(Pae(),N2=t,FA=n,N2.attachEvent("onpropertychange",R_e)):e==="focusout"&&Pae()}function wVe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return eF(FA)}function xVe(e,t){if(e==="click")return eF(t)}function EVe(e,t){if(e==="input"||e==="change")return eF(t)}function SVe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nf=typeof Object.is=="function"?Object.is:SVe;function jA(e,t){if(nf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!C7.call(t,i)||!nf(e[i],t[i]))return!1}return!0}function Nae(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Oae(e,t){var n=Nae(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nae(n)}}function P_e(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?P_e(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function N_e(){for(var e=window,t=gM();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=gM(e.document)}return t}function KG(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function TVe(e){var t=N_e(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&P_e(n.ownerDocument.documentElement,n)){if(r!==null&&KG(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Oae(n,s);var o=Oae(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var CVe=Im&&"documentMode"in document&&11>=document.documentMode,kw=null,q7=null,O2=null,W7=!1;function Dae(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;W7||kw==null||kw!==gM(r)||(r=kw,"selectionStart"in r&&KG(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),O2&&jA(O2,r)||(O2=r,r=EM(q7,"onSelect"),0<r.length&&(t=new WG("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kw)))}function ZP(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Rw={animationend:ZP("Animation","AnimationEnd"),animationiteration:ZP("Animation","AnimationIteration"),animationstart:ZP("Animation","AnimationStart"),transitionend:ZP("Transition","TransitionEnd")},_8={},O_e={};Im&&(O_e=document.createElement("div").style,"AnimationEvent"in window||(delete Rw.animationend.animation,delete Rw.animationiteration.animation,delete Rw.animationstart.animation),"TransitionEvent"in window||delete Rw.transitionend.transition);function tF(e){if(_8[e])return _8[e];if(!Rw[e])return e;var t=Rw[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in O_e)return _8[e]=t[n];return e}var D_e=tF("animationend"),M_e=tF("animationiteration"),$_e=tF("animationstart"),L_e=tF("transitionend"),F_e=new Map,Mae="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ly(e,t){F_e.set(e,t),Bb(t,[e])}for(var w8=0;w8<Mae.length;w8++){var x8=Mae[w8],AVe=x8.toLowerCase(),IVe=x8[0].toUpperCase()+x8.slice(1);Ly(AVe,"on"+IVe)}Ly(D_e,"onAnimationEnd");Ly(M_e,"onAnimationIteration");Ly($_e,"onAnimationStart");Ly("dblclick","onDoubleClick");Ly("focusin","onFocus");Ly("focusout","onBlur");Ly(L_e,"onTransitionEnd");Mx("onMouseEnter",["mouseout","mouseover"]);Mx("onMouseLeave",["mouseout","mouseover"]);Mx("onPointerEnter",["pointerout","pointerover"]);Mx("onPointerLeave",["pointerout","pointerover"]);Bb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bb("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var PC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kVe=new Set("cancel close invalid load scroll toggle".split(" ").concat(PC));function $ae(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,AUe(r,t,void 0,e),e.currentTarget=null}function j_e(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;$ae(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;$ae(i,a,u),s=l}}}if(vM)throw e=z7,vM=!1,z7=null,e}function si(e,t){var n=t[Q7];n===void 0&&(n=t[Q7]=new Set);var r=e+"__bubble";n.has(r)||(B_e(t,e,2,!1),n.add(r))}function E8(e,t,n){var r=0;t&&(r|=4),B_e(n,e,r,t)}var eN="_reactListening"+Math.random().toString(36).slice(2);function BA(e){if(!e[eN]){e[eN]=!0,Gbe.forEach(function(n){n!=="selectionchange"&&(kVe.has(n)||E8(n,!1,e),E8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[eN]||(t[eN]=!0,E8("selectionchange",!1,t))}}function B_e(e,t,n,r){switch(E_e(t)){case 1:var i=VUe;break;case 4:i=HUe;break;default:i=HG}n=i.bind(null,t,n,e),i=void 0,!B7||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function S8(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=_1(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}u_e(function(){var u=s,c=BG(n),d=[];e:{var f=F_e.get(e);if(f!==void 0){var h=WG,p=e;switch(e){case"keypress":if(KO(n)===0)break e;case"keydown":case"keyup":h=sVe;break;case"focusin":p="focus",h=y8;break;case"focusout":p="blur",h=y8;break;case"beforeblur":case"afterblur":h=y8;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Sae;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=GUe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=lVe;break;case D_e:case M_e:case $_e:h=XUe;break;case L_e:h=cVe;break;case"scroll":h=qUe;break;case"wheel":h=fVe;break;case"copy":case"cut":case"paste":h=JUe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Cae}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var v=u,_;v!==null;){_=v;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,y!==null&&(w=DA(v,y),w!=null&&m.push(zA(v,w,_)))),g)break;v=v.return}0<m.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==F7&&(p=n.relatedTarget||n.fromElement)&&(_1(p)||p[km]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?_1(p):null,p!==null&&(g=zb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(m=Sae,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=Cae,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?f:Pw(h),_=p==null?f:Pw(p),f=new m(w,v+"leave",h,n,c),f.target=g,f.relatedTarget=_,w=null,_1(c)===u&&(m=new m(y,v+"enter",p,n,c),m.target=_,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,_=m;_;_=O_(_))v++;for(_=0,w=y;w;w=O_(w))_++;for(;0<v-_;)m=O_(m),v--;for(;0<_-v;)y=O_(y),_--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=O_(m),y=O_(y)}m=null}else m=null;h!==null&&Lae(d,f,h,m,!1),p!==null&&g!==null&&Lae(d,g,p,m,!0)}}e:{if(f=u?Pw(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var x=bVe;else if(kae(f))if(k_e)x=EVe;else{x=wVe;var S=_Ve}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=xVe);if(x&&(x=x(e,u))){I_e(d,x,n,c);break e}S&&S(e,f,u),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&O7(f,"number",f.value)}switch(S=u?Pw(u):window,e){case"focusin":(kae(S)||S.contentEditable==="true")&&(kw=S,q7=u,O2=null);break;case"focusout":O2=q7=kw=null;break;case"mousedown":W7=!0;break;case"contextmenu":case"mouseup":case"dragend":W7=!1,Dae(d,n,c);break;case"selectionchange":if(CVe)break;case"keydown":case"keyup":Dae(d,n,c)}var E;if(YG)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Iw?C_e(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(T_e&&n.locale!=="ko"&&(Iw||T!=="onCompositionStart"?T==="onCompositionEnd"&&Iw&&(E=S_e()):(f0=c,qG="value"in f0?f0.value:f0.textContent,Iw=!0)),S=EM(u,T),0<S.length&&(T=new Tae(T,e,null,n,c),d.push({event:T,listeners:S}),E?T.data=E:(E=A_e(n),E!==null&&(T.data=E)))),(E=pVe?mVe(e,n):gVe(e,n))&&(u=EM(u,"onBeforeInput"),0<u.length&&(c=new Tae("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=E))}j_e(d,t)})}function zA(e,t,n){return{instance:e,listener:t,currentTarget:n}}function EM(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=DA(e,n),s!=null&&r.unshift(zA(e,s,i)),s=DA(e,t),s!=null&&r.push(zA(e,s,i))),e=e.return}return r}function O_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Lae(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=DA(n,s),l!=null&&o.unshift(zA(n,l,a))):i||(l=DA(n,s),l!=null&&o.push(zA(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var RVe=/\r\n?/g,PVe=/\u0000|\uFFFD/g;function Fae(e){return(typeof e=="string"?e:""+e).replace(RVe,`
`).replace(PVe,"")}function tN(e,t,n){if(t=Fae(t),Fae(e)!==t&&n)throw Error(rt(425))}function SM(){}var G7=null,Y7=null;function K7(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var X7=typeof setTimeout=="function"?setTimeout:void 0,NVe=typeof clearTimeout=="function"?clearTimeout:void 0,jae=typeof Promise=="function"?Promise:void 0,OVe=typeof queueMicrotask=="function"?queueMicrotask:typeof jae<"u"?function(e){return jae.resolve(null).then(e).catch(DVe)}:X7;function DVe(e){setTimeout(function(){throw e})}function T8(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),LA(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);LA(t)}function P0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Bae(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var nS=Math.random().toString(36).slice(2),ih="__reactFiber$"+nS,UA="__reactProps$"+nS,km="__reactContainer$"+nS,Q7="__reactEvents$"+nS,MVe="__reactListeners$"+nS,$Ve="__reactHandles$"+nS;function _1(e){var t=e[ih];if(t)return t;for(var n=e.parentNode;n;){if(t=n[km]||n[ih]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Bae(e);e!==null;){if(n=e[ih])return n;e=Bae(e)}return t}e=n,n=e.parentNode}return null}function Pk(e){return e=e[ih]||e[km],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pw(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(rt(33))}function nF(e){return e[UA]||null}var J7=[],Nw=-1;function Fy(e){return{current:e}}function hi(e){0>Nw||(e.current=J7[Nw],J7[Nw]=null,Nw--)}function ei(e,t){Nw++,J7[Nw]=e.current,e.current=t}var Z0={},ya=Fy(Z0),Ll=Fy(!1),Q1=Z0;function $x(e,t){var n=e.type.contextTypes;if(!n)return Z0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Fl(e){return e=e.childContextTypes,e!=null}function TM(){hi(Ll),hi(ya)}function zae(e,t,n){if(ya.current!==Z0)throw Error(rt(168));ei(ya,t),ei(Ll,n)}function z_e(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(rt(108,_Ue(e)||"Unknown",i));return Ri({},n,r)}function CM(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Z0,Q1=ya.current,ei(ya,e),ei(Ll,Ll.current),!0}function Uae(e,t,n){var r=e.stateNode;if(!r)throw Error(rt(169));n?(e=z_e(e,t,Q1),r.__reactInternalMemoizedMergedChildContext=e,hi(Ll),hi(ya),ei(ya,e)):hi(Ll),ei(Ll,n)}var qp=null,rF=!1,C8=!1;function U_e(e){qp===null?qp=[e]:qp.push(e)}function LVe(e){rF=!0,U_e(e)}function jy(){if(!C8&&qp!==null){C8=!0;var e=0,t=kr;try{var n=qp;for(kr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}qp=null,rF=!1}catch(i){throw qp!==null&&(qp=qp.slice(e+1)),h_e(zG,jy),i}finally{kr=t,C8=!1}}return null}var Ow=[],Dw=0,AM=null,IM=0,cc=[],dc=0,J1=null,tm=1,nm="";function qv(e,t){Ow[Dw++]=IM,Ow[Dw++]=AM,AM=e,IM=t}function V_e(e,t,n){cc[dc++]=tm,cc[dc++]=nm,cc[dc++]=J1,J1=e;var r=tm;e=nm;var i=32-zd(r)-1;r&=~(1<<i),n+=1;var s=32-zd(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,tm=1<<32-zd(t)+i|n<<i|r,nm=s+e}else tm=1<<s|n<<i|r,nm=e}function XG(e){e.return!==null&&(qv(e,1),V_e(e,1,0))}function QG(e){for(;e===AM;)AM=Ow[--Dw],Ow[Dw]=null,IM=Ow[--Dw],Ow[Dw]=null;for(;e===J1;)J1=cc[--dc],cc[dc]=null,nm=cc[--dc],cc[dc]=null,tm=cc[--dc],cc[dc]=null}var ku=null,wu=null,_i=!1,Td=null;function H_e(e,t){var n=bc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Vae(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ku=e,wu=P0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ku=e,wu=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=J1!==null?{id:tm,overflow:nm}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=bc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ku=e,wu=null,!0):!1;default:return!1}}function Z7(e){return(e.mode&1)!==0&&(e.flags&128)===0}function eU(e){if(_i){var t=wu;if(t){var n=t;if(!Vae(e,t)){if(Z7(e))throw Error(rt(418));t=P0(n.nextSibling);var r=ku;t&&Vae(e,t)?H_e(r,n):(e.flags=e.flags&-4097|2,_i=!1,ku=e)}}else{if(Z7(e))throw Error(rt(418));e.flags=e.flags&-4097|2,_i=!1,ku=e}}}function Hae(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ku=e}function nN(e){if(e!==ku)return!1;if(!_i)return Hae(e),_i=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!K7(e.type,e.memoizedProps)),t&&(t=wu)){if(Z7(e))throw q_e(),Error(rt(418));for(;t;)H_e(e,t),t=P0(t.nextSibling)}if(Hae(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(rt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){wu=P0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}wu=null}}else wu=ku?P0(e.stateNode.nextSibling):null;return!0}function q_e(){for(var e=wu;e;)e=P0(e.nextSibling)}function Lx(){wu=ku=null,_i=!1}function JG(e){Td===null?Td=[e]:Td.push(e)}var FVe=rg.ReactCurrentBatchConfig;function IT(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(rt(309));var r=n.stateNode}if(!r)throw Error(rt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(rt(284));if(!n._owner)throw Error(rt(290,e))}return e}function rN(e,t){throw e=Object.prototype.toString.call(t),Error(rt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qae(e){var t=e._init;return t(e._payload)}function W_e(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=M0(y,v),y.index=0,y.sibling=null,y}function s(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,w){return v===null||v.tag!==6?(v=O8(_,y.mode,w),v.return=y,v):(v=i(v,_),v.return=y,v)}function l(y,v,_,w){var x=_.type;return x===Aw?c(y,v,_.props.children,w,_.key):v!==null&&(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Wg&&qae(x)===v.type)?(w=i(v,_.props),w.ref=IT(y,v,_),w.return=y,w):(w=nD(_.type,_.key,_.props,null,y.mode,w),w.ref=IT(y,v,_),w.return=y,w)}function u(y,v,_,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=D8(_,y.mode,w),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function c(y,v,_,w,x){return v===null||v.tag!==7?(v=$1(_,y.mode,w,x),v.return=y,v):(v=i(v,_),v.return=y,v)}function d(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=O8(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case WP:return _=nD(v.type,v.key,v.props,null,y.mode,_),_.ref=IT(y,null,v),_.return=y,_;case Cw:return v=D8(v,y.mode,_),v.return=y,v;case Wg:var w=v._init;return d(y,w(v._payload),_)}if(kC(v)||ET(v))return v=$1(v,y.mode,_,null),v.return=y,v;rN(y,v)}return null}function f(y,v,_,w){var x=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return x!==null?null:a(y,v,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case WP:return _.key===x?l(y,v,_,w):null;case Cw:return _.key===x?u(y,v,_,w):null;case Wg:return x=_._init,f(y,v,x(_._payload),w)}if(kC(_)||ET(_))return x!==null?null:c(y,v,_,w,null);rN(y,_)}return null}function h(y,v,_,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(_)||null,a(v,y,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case WP:return y=y.get(w.key===null?_:w.key)||null,l(v,y,w,x);case Cw:return y=y.get(w.key===null?_:w.key)||null,u(v,y,w,x);case Wg:var S=w._init;return h(y,v,_,S(w._payload),x)}if(kC(w)||ET(w))return y=y.get(_)||null,c(v,y,w,x,null);rN(v,w)}return null}function p(y,v,_,w){for(var x=null,S=null,E=v,T=v=0,I=null;E!==null&&T<_.length;T++){E.index>T?(I=E,E=null):I=E.sibling;var k=f(y,E,_[T],w);if(k===null){E===null&&(E=I);break}e&&E&&k.alternate===null&&t(y,E),v=s(k,v,T),S===null?x=k:S.sibling=k,S=k,E=I}if(T===_.length)return n(y,E),_i&&qv(y,T),x;if(E===null){for(;T<_.length;T++)E=d(y,_[T],w),E!==null&&(v=s(E,v,T),S===null?x=E:S.sibling=E,S=E);return _i&&qv(y,T),x}for(E=r(y,E);T<_.length;T++)I=h(E,y,T,_[T],w),I!==null&&(e&&I.alternate!==null&&E.delete(I.key===null?T:I.key),v=s(I,v,T),S===null?x=I:S.sibling=I,S=I);return e&&E.forEach(function(P){return t(y,P)}),_i&&qv(y,T),x}function m(y,v,_,w){var x=ET(_);if(typeof x!="function")throw Error(rt(150));if(_=x.call(_),_==null)throw Error(rt(151));for(var S=x=null,E=v,T=v=0,I=null,k=_.next();E!==null&&!k.done;T++,k=_.next()){E.index>T?(I=E,E=null):I=E.sibling;var P=f(y,E,k.value,w);if(P===null){E===null&&(E=I);break}e&&E&&P.alternate===null&&t(y,E),v=s(P,v,T),S===null?x=P:S.sibling=P,S=P,E=I}if(k.done)return n(y,E),_i&&qv(y,T),x;if(E===null){for(;!k.done;T++,k=_.next())k=d(y,k.value,w),k!==null&&(v=s(k,v,T),S===null?x=k:S.sibling=k,S=k);return _i&&qv(y,T),x}for(E=r(y,E);!k.done;T++,k=_.next())k=h(E,y,T,k.value,w),k!==null&&(e&&k.alternate!==null&&E.delete(k.key===null?T:k.key),v=s(k,v,T),S===null?x=k:S.sibling=k,S=k);return e&&E.forEach(function(L){return t(y,L)}),_i&&qv(y,T),x}function g(y,v,_,w){if(typeof _=="object"&&_!==null&&_.type===Aw&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case WP:e:{for(var x=_.key,S=v;S!==null;){if(S.key===x){if(x=_.type,x===Aw){if(S.tag===7){n(y,S.sibling),v=i(S,_.props.children),v.return=y,y=v;break e}}else if(S.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Wg&&qae(x)===S.type){n(y,S.sibling),v=i(S,_.props),v.ref=IT(y,S,_),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}_.type===Aw?(v=$1(_.props.children,y.mode,w,_.key),v.return=y,y=v):(w=nD(_.type,_.key,_.props,null,y.mode,w),w.ref=IT(y,v,_),w.return=y,y=w)}return o(y);case Cw:e:{for(S=_.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=D8(_,y.mode,w),v.return=y,y=v}return o(y);case Wg:return S=_._init,g(y,v,S(_._payload),w)}if(kC(_))return p(y,v,_,w);if(ET(_))return m(y,v,_,w);rN(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=O8(_,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var Fx=W_e(!0),G_e=W_e(!1),kM=Fy(null),RM=null,Mw=null,ZG=null;function eY(){ZG=Mw=RM=null}function tY(e){var t=kM.current;hi(kM),e._currentValue=t}function tU(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function nx(e,t){RM=e,ZG=Mw=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nl=!0),e.firstContext=null)}function Dc(e){var t=e._currentValue;if(ZG!==e)if(e={context:e,memoizedValue:t,next:null},Mw===null){if(RM===null)throw Error(rt(308));Mw=e,RM.dependencies={lanes:0,firstContext:e}}else Mw=Mw.next=e;return t}var w1=null;function nY(e){w1===null?w1=[e]:w1.push(e)}function Y_e(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,nY(t)):(n.next=i.next,i.next=n),t.interleaved=n,Rm(e,r)}function Rm(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Gg=!1;function rY(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K_e(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fm(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function N0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ir&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Rm(e,n)}return i=r.interleaved,i===null?(t.next=t,nY(r)):(t.next=i.next,i.next=t),r.interleaved=t,Rm(e,n)}function XO(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,UG(e,n)}}function Wae(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function PM(e,t,n,r){var i=e.updateQueue;Gg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(f=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Ri({},d,f);break e;case 2:Gg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);eb|=o,e.lanes=o,e.memoizedState=d}}function Gae(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(rt(191,i));i.call(r)}}}var Nk={},Th=Fy(Nk),VA=Fy(Nk),HA=Fy(Nk);function x1(e){if(e===Nk)throw Error(rt(174));return e}function iY(e,t){switch(ei(HA,t),ei(VA,e),ei(Th,Nk),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:M7(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=M7(t,e)}hi(Th),ei(Th,t)}function jx(){hi(Th),hi(VA),hi(HA)}function X_e(e){x1(HA.current);var t=x1(Th.current),n=M7(t,e.type);t!==n&&(ei(VA,e),ei(Th,n))}function sY(e){VA.current===e&&(hi(Th),hi(VA))}var Ci=Fy(0);function NM(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var A8=[];function oY(){for(var e=0;e<A8.length;e++)A8[e]._workInProgressVersionPrimary=null;A8.length=0}var QO=rg.ReactCurrentDispatcher,I8=rg.ReactCurrentBatchConfig,Z1=0,Ii=null,Es=null,qs=null,OM=!1,D2=!1,qA=0,jVe=0;function Vo(){throw Error(rt(321))}function aY(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nf(e[n],t[n]))return!1;return!0}function lY(e,t,n,r,i,s){if(Z1=s,Ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,QO.current=e===null||e.memoizedState===null?VVe:HVe,e=n(r,i),D2){s=0;do{if(D2=!1,qA=0,25<=s)throw Error(rt(301));s+=1,qs=Es=null,t.updateQueue=null,QO.current=qVe,e=n(r,i)}while(D2)}if(QO.current=DM,t=Es!==null&&Es.next!==null,Z1=0,qs=Es=Ii=null,OM=!1,t)throw Error(rt(300));return e}function uY(){var e=qA!==0;return qA=0,e}function Wf(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qs===null?Ii.memoizedState=qs=e:qs=qs.next=e,qs}function Mc(){if(Es===null){var e=Ii.alternate;e=e!==null?e.memoizedState:null}else e=Es.next;var t=qs===null?Ii.memoizedState:qs.next;if(t!==null)qs=t,Es=e;else{if(e===null)throw Error(rt(310));Es=e,e={memoizedState:Es.memoizedState,baseState:Es.baseState,baseQueue:Es.baseQueue,queue:Es.queue,next:null},qs===null?Ii.memoizedState=qs=e:qs=qs.next=e}return qs}function WA(e,t){return typeof t=="function"?t(e):t}function k8(e){var t=Mc(),n=t.queue;if(n===null)throw Error(rt(311));n.lastRenderedReducer=e;var r=Es,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Z1&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ii.lanes|=c,eb|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,nf(r,t.memoizedState)||(Nl=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ii.lanes|=s,eb|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function R8(e){var t=Mc(),n=t.queue;if(n===null)throw Error(rt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);nf(s,t.memoizedState)||(Nl=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Q_e(){}function J_e(e,t){var n=Ii,r=Mc(),i=t(),s=!nf(r.memoizedState,i);if(s&&(r.memoizedState=i,Nl=!0),r=r.queue,cY(twe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||qs!==null&&qs.memoizedState.tag&1){if(n.flags|=2048,GA(9,ewe.bind(null,n,r,i,t),void 0,null),Zs===null)throw Error(rt(349));Z1&30||Z_e(n,t,i)}return i}function Z_e(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ii.updateQueue,t===null?(t={lastEffect:null,stores:null},Ii.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ewe(e,t,n,r){t.value=n,t.getSnapshot=r,nwe(t)&&rwe(e)}function twe(e,t,n){return n(function(){nwe(t)&&rwe(e)})}function nwe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nf(e,n)}catch{return!0}}function rwe(e){var t=Rm(e,1);t!==null&&Ud(t,e,1,-1)}function Yae(e){var t=Wf();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:WA,lastRenderedState:e},t.queue=e,e=e.dispatch=UVe.bind(null,Ii,e),[t.memoizedState,e]}function GA(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ii.updateQueue,t===null?(t={lastEffect:null,stores:null},Ii.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function iwe(){return Mc().memoizedState}function JO(e,t,n,r){var i=Wf();Ii.flags|=e,i.memoizedState=GA(1|t,n,void 0,r===void 0?null:r)}function iF(e,t,n,r){var i=Mc();r=r===void 0?null:r;var s=void 0;if(Es!==null){var o=Es.memoizedState;if(s=o.destroy,r!==null&&aY(r,o.deps)){i.memoizedState=GA(t,n,s,r);return}}Ii.flags|=e,i.memoizedState=GA(1|t,n,s,r)}function Kae(e,t){return JO(8390656,8,e,t)}function cY(e,t){return iF(2048,8,e,t)}function swe(e,t){return iF(4,2,e,t)}function owe(e,t){return iF(4,4,e,t)}function awe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lwe(e,t,n){return n=n!=null?n.concat([e]):null,iF(4,4,awe.bind(null,t,e),n)}function dY(){}function uwe(e,t){var n=Mc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&aY(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function cwe(e,t){var n=Mc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&aY(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function dwe(e,t,n){return Z1&21?(nf(n,t)||(n=g_e(),Ii.lanes|=n,eb|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nl=!0),e.memoizedState=n)}function BVe(e,t){var n=kr;kr=n!==0&&4>n?n:4,e(!0);var r=I8.transition;I8.transition={};try{e(!1),t()}finally{kr=n,I8.transition=r}}function fwe(){return Mc().memoizedState}function zVe(e,t,n){var r=D0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hwe(e))pwe(t,n);else if(n=Y_e(e,t,n,r),n!==null){var i=Ha();Ud(n,e,r,i),mwe(n,t,r)}}function UVe(e,t,n){var r=D0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hwe(e))pwe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,nf(a,o)){var l=t.interleaved;l===null?(i.next=i,nY(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=Y_e(e,t,i,r),n!==null&&(i=Ha(),Ud(n,e,r,i),mwe(n,t,r))}}function hwe(e){var t=e.alternate;return e===Ii||t!==null&&t===Ii}function pwe(e,t){D2=OM=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mwe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,UG(e,n)}}var DM={readContext:Dc,useCallback:Vo,useContext:Vo,useEffect:Vo,useImperativeHandle:Vo,useInsertionEffect:Vo,useLayoutEffect:Vo,useMemo:Vo,useReducer:Vo,useRef:Vo,useState:Vo,useDebugValue:Vo,useDeferredValue:Vo,useTransition:Vo,useMutableSource:Vo,useSyncExternalStore:Vo,useId:Vo,unstable_isNewReconciler:!1},VVe={readContext:Dc,useCallback:function(e,t){return Wf().memoizedState=[e,t===void 0?null:t],e},useContext:Dc,useEffect:Kae,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,JO(4194308,4,awe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return JO(4194308,4,e,t)},useInsertionEffect:function(e,t){return JO(4,2,e,t)},useMemo:function(e,t){var n=Wf();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Wf();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=zVe.bind(null,Ii,e),[r.memoizedState,e]},useRef:function(e){var t=Wf();return e={current:e},t.memoizedState=e},useState:Yae,useDebugValue:dY,useDeferredValue:function(e){return Wf().memoizedState=e},useTransition:function(){var e=Yae(!1),t=e[0];return e=BVe.bind(null,e[1]),Wf().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ii,i=Wf();if(_i){if(n===void 0)throw Error(rt(407));n=n()}else{if(n=t(),Zs===null)throw Error(rt(349));Z1&30||Z_e(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Kae(twe.bind(null,r,s,e),[e]),r.flags|=2048,GA(9,ewe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Wf(),t=Zs.identifierPrefix;if(_i){var n=nm,r=tm;n=(r&~(1<<32-zd(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=qA++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=jVe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},HVe={readContext:Dc,useCallback:uwe,useContext:Dc,useEffect:cY,useImperativeHandle:lwe,useInsertionEffect:swe,useLayoutEffect:owe,useMemo:cwe,useReducer:k8,useRef:iwe,useState:function(){return k8(WA)},useDebugValue:dY,useDeferredValue:function(e){var t=Mc();return dwe(t,Es.memoizedState,e)},useTransition:function(){var e=k8(WA)[0],t=Mc().memoizedState;return[e,t]},useMutableSource:Q_e,useSyncExternalStore:J_e,useId:fwe,unstable_isNewReconciler:!1},qVe={readContext:Dc,useCallback:uwe,useContext:Dc,useEffect:cY,useImperativeHandle:lwe,useInsertionEffect:swe,useLayoutEffect:owe,useMemo:cwe,useReducer:R8,useRef:iwe,useState:function(){return R8(WA)},useDebugValue:dY,useDeferredValue:function(e){var t=Mc();return Es===null?t.memoizedState=e:dwe(t,Es.memoizedState,e)},useTransition:function(){var e=R8(WA)[0],t=Mc().memoizedState;return[e,t]},useMutableSource:Q_e,useSyncExternalStore:J_e,useId:fwe,unstable_isNewReconciler:!1};function bd(e,t){if(e&&e.defaultProps){t=Ri({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function nU(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ri({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var sF={isMounted:function(e){return(e=e._reactInternals)?zb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ha(),i=D0(e),s=fm(r,i);s.payload=t,n!=null&&(s.callback=n),t=N0(e,s,i),t!==null&&(Ud(t,e,i,r),XO(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ha(),i=D0(e),s=fm(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=N0(e,s,i),t!==null&&(Ud(t,e,i,r),XO(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ha(),r=D0(e),i=fm(n,r);i.tag=2,t!=null&&(i.callback=t),t=N0(e,i,r),t!==null&&(Ud(t,e,r,n),XO(t,e,r))}};function Xae(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!jA(n,r)||!jA(i,s):!0}function gwe(e,t,n){var r=!1,i=Z0,s=t.contextType;return typeof s=="object"&&s!==null?s=Dc(s):(i=Fl(t)?Q1:ya.current,r=t.contextTypes,s=(r=r!=null)?$x(e,i):Z0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sF,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Qae(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sF.enqueueReplaceState(t,t.state,null)}function rU(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},rY(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Dc(s):(s=Fl(t)?Q1:ya.current,i.context=$x(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(nU(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&sF.enqueueReplaceState(i,i.state,null),PM(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Bx(e,t){try{var n="",r=t;do n+=bUe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function P8(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function iU(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var WVe=typeof WeakMap=="function"?WeakMap:Map;function ywe(e,t,n){n=fm(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$M||($M=!0,pU=r),iU(e,t)},n}function vwe(e,t,n){n=fm(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){iU(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){iU(e,t),typeof r!="function"&&(O0===null?O0=new Set([this]):O0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Jae(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new WVe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=oHe.bind(null,e,t,n),t.then(e,e))}function Zae(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ele(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=fm(-1,1),t.tag=2,N0(n,t,1))),n.lanes|=1),e)}var GVe=rg.ReactCurrentOwner,Nl=!1;function Na(e,t,n,r){t.child=e===null?G_e(t,null,n,r):Fx(t,e.child,n,r)}function tle(e,t,n,r,i){n=n.render;var s=t.ref;return nx(t,i),r=lY(e,t,n,r,s,i),n=uY(),e!==null&&!Nl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pm(e,t,i)):(_i&&n&&XG(t),t.flags|=1,Na(e,t,r,i),t.child)}function nle(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!bY(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,bwe(e,t,s,r,i)):(e=nD(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:jA,n(o,r)&&e.ref===t.ref)return Pm(e,t,i)}return t.flags|=1,e=M0(s,r),e.ref=t.ref,e.return=t,t.child=e}function bwe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(jA(s,r)&&e.ref===t.ref)if(Nl=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Nl=!0);else return t.lanes=e.lanes,Pm(e,t,i)}return sU(e,t,n,r,i)}function _we(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ei(Lw,pu),pu|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ei(Lw,pu),pu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ei(Lw,pu),pu|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ei(Lw,pu),pu|=r;return Na(e,t,i,n),t.child}function wwe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function sU(e,t,n,r,i){var s=Fl(n)?Q1:ya.current;return s=$x(t,s),nx(t,i),n=lY(e,t,n,r,s,i),r=uY(),e!==null&&!Nl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pm(e,t,i)):(_i&&r&&XG(t),t.flags|=1,Na(e,t,n,i),t.child)}function rle(e,t,n,r,i){if(Fl(n)){var s=!0;CM(t)}else s=!1;if(nx(t,i),t.stateNode===null)ZO(e,t),gwe(t,n,r),rU(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Dc(u):(u=Fl(n)?Q1:ya.current,u=$x(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Qae(t,o,r,u),Gg=!1;var f=t.memoizedState;o.state=f,PM(t,r,o,i),l=t.memoizedState,a!==r||f!==l||Ll.current||Gg?(typeof c=="function"&&(nU(t,n,c,r),l=t.memoizedState),(a=Gg||Xae(t,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,K_e(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:bd(t.type,a),o.props=u,d=t.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Dc(l):(l=Fl(n)?Q1:ya.current,l=$x(t,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Qae(t,o,r,l),Gg=!1,f=t.memoizedState,o.state=f,PM(t,r,o,i);var p=t.memoizedState;a!==d||f!==p||Ll.current||Gg?(typeof h=="function"&&(nU(t,n,h,r),p=t.memoizedState),(u=Gg||Xae(t,n,u,r,f,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return oU(e,t,n,r,s,i)}function oU(e,t,n,r,i,s){wwe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Uae(t,n,!1),Pm(e,t,s);r=t.stateNode,GVe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Fx(t,e.child,null,s),t.child=Fx(t,null,a,s)):Na(e,t,a,s),t.memoizedState=r.state,i&&Uae(t,n,!0),t.child}function xwe(e){var t=e.stateNode;t.pendingContext?zae(e,t.pendingContext,t.pendingContext!==t.context):t.context&&zae(e,t.context,!1),iY(e,t.containerInfo)}function ile(e,t,n,r,i){return Lx(),JG(i),t.flags|=256,Na(e,t,n,r),t.child}var aU={dehydrated:null,treeContext:null,retryLane:0};function lU(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ewe(e,t,n){var r=t.pendingProps,i=Ci.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ei(Ci,i&1),e===null)return eU(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=lF(o,r,0,null),e=$1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=lU(n),t.memoizedState=aU,e):fY(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return YVe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=M0(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=M0(a,s):(s=$1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?lU(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=aU,r}return s=e.child,e=s.sibling,r=M0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function fY(e,t){return t=lF({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function iN(e,t,n,r){return r!==null&&JG(r),Fx(t,e.child,null,n),e=fY(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function YVe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=P8(Error(rt(422))),iN(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=lF({mode:"visible",children:r.children},i,0,null),s=$1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Fx(t,e.child,null,o),t.child.memoizedState=lU(o),t.memoizedState=aU,s);if(!(t.mode&1))return iN(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(rt(419)),r=P8(s,r,void 0),iN(e,t,o,r)}if(a=(o&e.childLanes)!==0,Nl||a){if(r=Zs,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rm(e,i),Ud(r,e,i,-1))}return vY(),r=P8(Error(rt(421))),iN(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=aHe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,wu=P0(i.nextSibling),ku=t,_i=!0,Td=null,e!==null&&(cc[dc++]=tm,cc[dc++]=nm,cc[dc++]=J1,tm=e.id,nm=e.overflow,J1=t),t=fY(t,r.children),t.flags|=4096,t)}function sle(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),tU(e.return,t,n)}function N8(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Swe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Na(e,t,r.children,n),r=Ci.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sle(e,n,t);else if(e.tag===19)sle(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ei(Ci,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&NM(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),N8(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&NM(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}N8(t,!0,n,null,s);break;case"together":N8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ZO(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pm(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),eb|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(rt(153));if(t.child!==null){for(e=t.child,n=M0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=M0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function KVe(e,t,n){switch(t.tag){case 3:xwe(t),Lx();break;case 5:X_e(t);break;case 1:Fl(t.type)&&CM(t);break;case 4:iY(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ei(kM,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ei(Ci,Ci.current&1),t.flags|=128,null):n&t.child.childLanes?Ewe(e,t,n):(ei(Ci,Ci.current&1),e=Pm(e,t,n),e!==null?e.sibling:null);ei(Ci,Ci.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Swe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ei(Ci,Ci.current),r)break;return null;case 22:case 23:return t.lanes=0,_we(e,t,n)}return Pm(e,t,n)}var Twe,uU,Cwe,Awe;Twe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};uU=function(){};Cwe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,x1(Th.current);var s=null;switch(n){case"input":i=P7(e,i),r=P7(e,r),s=[];break;case"select":i=Ri({},i,{value:void 0}),r=Ri({},r,{value:void 0}),s=[];break;case"textarea":i=D7(e,i),r=D7(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=SM)}$7(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(NA.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(NA.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&si("scroll",e),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};Awe=function(e,t,n,r){n!==r&&(t.flags|=4)};function kT(e,t){if(!_i)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ho(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function XVe(e,t,n){var r=t.pendingProps;switch(QG(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(t),null;case 1:return Fl(t.type)&&TM(),Ho(t),null;case 3:return r=t.stateNode,jx(),hi(Ll),hi(ya),oY(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(nN(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Td!==null&&(yU(Td),Td=null))),uU(e,t),Ho(t),null;case 5:sY(t);var i=x1(HA.current);if(n=t.type,e!==null&&t.stateNode!=null)Cwe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(rt(166));return Ho(t),null}if(e=x1(Th.current),nN(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ih]=t,r[UA]=s,e=(t.mode&1)!==0,n){case"dialog":si("cancel",r),si("close",r);break;case"iframe":case"object":case"embed":si("load",r);break;case"video":case"audio":for(i=0;i<PC.length;i++)si(PC[i],r);break;case"source":si("error",r);break;case"img":case"image":case"link":si("error",r),si("load",r);break;case"details":si("toggle",r);break;case"input":pae(r,s),si("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},si("invalid",r);break;case"textarea":gae(r,s),si("invalid",r)}$7(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&tN(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&tN(r.textContent,a,e),i=["children",""+a]):NA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&si("scroll",r)}switch(n){case"input":GP(r),mae(r,s,!0);break;case"textarea":GP(r),yae(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=SM)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=t_e(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ih]=t,e[UA]=r,Twe(e,t,!1,!1),t.stateNode=e;e:{switch(o=L7(n,r),n){case"dialog":si("cancel",e),si("close",e),i=r;break;case"iframe":case"object":case"embed":si("load",e),i=r;break;case"video":case"audio":for(i=0;i<PC.length;i++)si(PC[i],e);i=r;break;case"source":si("error",e),i=r;break;case"img":case"image":case"link":si("error",e),si("load",e),i=r;break;case"details":si("toggle",e),i=r;break;case"input":pae(e,r),i=P7(e,r),si("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ri({},r,{value:void 0}),si("invalid",e);break;case"textarea":gae(e,r),i=D7(e,r),si("invalid",e);break;default:i=r}$7(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?i_e(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&n_e(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&OA(e,l):typeof l=="number"&&OA(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(NA.hasOwnProperty(s)?l!=null&&s==="onScroll"&&si("scroll",e):l!=null&&$G(e,s,l,o))}switch(n){case"input":GP(e),mae(e,r,!1);break;case"textarea":GP(e),yae(e);break;case"option":r.value!=null&&e.setAttribute("value",""+J0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Jw(e,!!r.multiple,s,!1):r.defaultValue!=null&&Jw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=SM)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ho(t),null;case 6:if(e&&t.stateNode!=null)Awe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(rt(166));if(n=x1(HA.current),x1(Th.current),nN(t)){if(r=t.stateNode,n=t.memoizedProps,r[ih]=t,(s=r.nodeValue!==n)&&(e=ku,e!==null))switch(e.tag){case 3:tN(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&tN(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ih]=t,t.stateNode=r}return Ho(t),null;case 13:if(hi(Ci),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_i&&wu!==null&&t.mode&1&&!(t.flags&128))q_e(),Lx(),t.flags|=98560,s=!1;else if(s=nN(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(rt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(rt(317));s[ih]=t}else Lx(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ho(t),s=!1}else Td!==null&&(yU(Td),Td=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ci.current&1?Rs===0&&(Rs=3):vY())),t.updateQueue!==null&&(t.flags|=4),Ho(t),null);case 4:return jx(),uU(e,t),e===null&&BA(t.stateNode.containerInfo),Ho(t),null;case 10:return tY(t.type._context),Ho(t),null;case 17:return Fl(t.type)&&TM(),Ho(t),null;case 19:if(hi(Ci),s=t.memoizedState,s===null)return Ho(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)kT(s,!1);else{if(Rs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=NM(e),o!==null){for(t.flags|=128,kT(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ei(Ci,Ci.current&1|2),t.child}e=e.sibling}s.tail!==null&&rs()>zx&&(t.flags|=128,r=!0,kT(s,!1),t.lanes=4194304)}else{if(!r)if(e=NM(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),kT(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_i)return Ho(t),null}else 2*rs()-s.renderingStartTime>zx&&n!==1073741824&&(t.flags|=128,r=!0,kT(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=rs(),t.sibling=null,n=Ci.current,ei(Ci,r?n&1|2:n&1),t):(Ho(t),null);case 22:case 23:return yY(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?pu&1073741824&&(Ho(t),t.subtreeFlags&6&&(t.flags|=8192)):Ho(t),null;case 24:return null;case 25:return null}throw Error(rt(156,t.tag))}function QVe(e,t){switch(QG(t),t.tag){case 1:return Fl(t.type)&&TM(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return jx(),hi(Ll),hi(ya),oY(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return sY(t),null;case 13:if(hi(Ci),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(rt(340));Lx()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return hi(Ci),null;case 4:return jx(),null;case 10:return tY(t.type._context),null;case 22:case 23:return yY(),null;case 24:return null;default:return null}}var sN=!1,ia=!1,JVe=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function $w(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ji(e,t,r)}else n.current=null}function cU(e,t,n){try{n()}catch(r){ji(e,t,r)}}var ole=!1;function ZVe(e,t){if(G7=wM,e=N_e(),KG(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Y7={focusedElem:e,selectionRange:n},wM=!1,Tt=t;Tt!==null;)if(t=Tt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Tt=e;else for(;Tt!==null;){t=Tt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:bd(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(rt(163))}}catch(w){ji(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Tt=e;break}Tt=t.return}return p=ole,ole=!1,p}function M2(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&cU(t,n,s)}i=i.next}while(i!==r)}}function oF(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function dU(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Iwe(e){var t=e.alternate;t!==null&&(e.alternate=null,Iwe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ih],delete t[UA],delete t[Q7],delete t[MVe],delete t[$Ve])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function kwe(e){return e.tag===5||e.tag===3||e.tag===4}function ale(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kwe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=SM));else if(r!==4&&(e=e.child,e!==null))for(fU(e,t,n),e=e.sibling;e!==null;)fU(e,t,n),e=e.sibling}function hU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(hU(e,t,n),e=e.sibling;e!==null;)hU(e,t,n),e=e.sibling}var fo=null,wd=!1;function Ig(e,t,n){for(n=n.child;n!==null;)Rwe(e,t,n),n=n.sibling}function Rwe(e,t,n){if(Sh&&typeof Sh.onCommitFiberUnmount=="function")try{Sh.onCommitFiberUnmount(JL,n)}catch{}switch(n.tag){case 5:ia||$w(n,t);case 6:var r=fo,i=wd;fo=null,Ig(e,t,n),fo=r,wd=i,fo!==null&&(wd?(e=fo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):fo.removeChild(n.stateNode));break;case 18:fo!==null&&(wd?(e=fo,n=n.stateNode,e.nodeType===8?T8(e.parentNode,n):e.nodeType===1&&T8(e,n),LA(e)):T8(fo,n.stateNode));break;case 4:r=fo,i=wd,fo=n.stateNode.containerInfo,wd=!0,Ig(e,t,n),fo=r,wd=i;break;case 0:case 11:case 14:case 15:if(!ia&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&cU(n,t,o),i=i.next}while(i!==r)}Ig(e,t,n);break;case 1:if(!ia&&($w(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ji(n,t,a)}Ig(e,t,n);break;case 21:Ig(e,t,n);break;case 22:n.mode&1?(ia=(r=ia)||n.memoizedState!==null,Ig(e,t,n),ia=r):Ig(e,t,n);break;default:Ig(e,t,n)}}function lle(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new JVe),t.forEach(function(r){var i=lHe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ld(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:fo=a.stateNode,wd=!1;break e;case 3:fo=a.stateNode.containerInfo,wd=!0;break e;case 4:fo=a.stateNode.containerInfo,wd=!0;break e}a=a.return}if(fo===null)throw Error(rt(160));Rwe(s,o,i),fo=null,wd=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ji(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Pwe(t,e),t=t.sibling}function Pwe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ld(t,e),Ff(e),r&4){try{M2(3,e,e.return),oF(3,e)}catch(m){ji(e,e.return,m)}try{M2(5,e,e.return)}catch(m){ji(e,e.return,m)}}break;case 1:ld(t,e),Ff(e),r&512&&n!==null&&$w(n,n.return);break;case 5:if(ld(t,e),Ff(e),r&512&&n!==null&&$w(n,n.return),e.flags&32){var i=e.stateNode;try{OA(i,"")}catch(m){ji(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Zbe(i,s),L7(a,o);var u=L7(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?i_e(i,d):c==="dangerouslySetInnerHTML"?n_e(i,d):c==="children"?OA(i,d):$G(i,c,d,u)}switch(a){case"input":N7(i,s);break;case"textarea":e_e(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Jw(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Jw(i,!!s.multiple,s.defaultValue,!0):Jw(i,!!s.multiple,s.multiple?[]:"",!1))}i[UA]=s}catch(m){ji(e,e.return,m)}}break;case 6:if(ld(t,e),Ff(e),r&4){if(e.stateNode===null)throw Error(rt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){ji(e,e.return,m)}}break;case 3:if(ld(t,e),Ff(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{LA(t.containerInfo)}catch(m){ji(e,e.return,m)}break;case 4:ld(t,e),Ff(e);break;case 13:ld(t,e),Ff(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(mY=rs())),r&4&&lle(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ia=(u=ia)||c,ld(t,e),ia=u):ld(t,e),Ff(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(Tt=e,c=e.child;c!==null;){for(d=Tt=c;Tt!==null;){switch(f=Tt,h=f.child,f.tag){case 0:case 11:case 14:case 15:M2(4,f,f.return);break;case 1:$w(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){ji(r,n,m)}}break;case 5:$w(f,f.return);break;case 22:if(f.memoizedState!==null){cle(d);continue}}h!==null?(h.return=f,Tt=h):cle(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=r_e("display",o))}catch(m){ji(e,e.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){ji(e,e.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ld(t,e),Ff(e),r&4&&lle(e);break;case 21:break;default:ld(t,e),Ff(e)}}function Ff(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(kwe(n)){var r=n;break e}n=n.return}throw Error(rt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(OA(i,""),r.flags&=-33);var s=ale(e);hU(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ale(e);fU(e,a,o);break;default:throw Error(rt(161))}}catch(l){ji(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function eHe(e,t,n){Tt=e,Nwe(e)}function Nwe(e,t,n){for(var r=(e.mode&1)!==0;Tt!==null;){var i=Tt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||sN;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ia;a=sN;var u=ia;if(sN=o,(ia=l)&&!u)for(Tt=i;Tt!==null;)o=Tt,l=o.child,o.tag===22&&o.memoizedState!==null?dle(i):l!==null?(l.return=o,Tt=l):dle(i);for(;s!==null;)Tt=s,Nwe(s),s=s.sibling;Tt=i,sN=a,ia=u}ule(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Tt=s):ule(e)}}function ule(e){for(;Tt!==null;){var t=Tt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ia||oF(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ia)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:bd(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Gae(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Gae(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&LA(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(rt(163))}ia||t.flags&512&&dU(t)}catch(f){ji(t,t.return,f)}}if(t===e){Tt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Tt=n;break}Tt=t.return}}function cle(e){for(;Tt!==null;){var t=Tt;if(t===e){Tt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Tt=n;break}Tt=t.return}}function dle(e){for(;Tt!==null;){var t=Tt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{oF(4,t)}catch(l){ji(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){ji(t,i,l)}}var s=t.return;try{dU(t)}catch(l){ji(t,s,l)}break;case 5:var o=t.return;try{dU(t)}catch(l){ji(t,o,l)}}}catch(l){ji(t,t.return,l)}if(t===e){Tt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Tt=a;break}Tt=t.return}}var tHe=Math.ceil,MM=rg.ReactCurrentDispatcher,hY=rg.ReactCurrentOwner,Ac=rg.ReactCurrentBatchConfig,ir=0,Zs=null,gs=null,To=0,pu=0,Lw=Fy(0),Rs=0,YA=null,eb=0,aF=0,pY=0,$2=null,Cl=null,mY=0,zx=1/0,zp=null,$M=!1,pU=null,O0=null,oN=!1,h0=null,LM=0,L2=0,mU=null,eD=-1,tD=0;function Ha(){return ir&6?rs():eD!==-1?eD:eD=rs()}function D0(e){return e.mode&1?ir&2&&To!==0?To&-To:FVe.transition!==null?(tD===0&&(tD=g_e()),tD):(e=kr,e!==0||(e=window.event,e=e===void 0?16:E_e(e.type)),e):1}function Ud(e,t,n,r){if(50<L2)throw L2=0,mU=null,Error(rt(185));kk(e,n,r),(!(ir&2)||e!==Zs)&&(e===Zs&&(!(ir&2)&&(aF|=n),Rs===4&&n0(e,To)),jl(e,r),n===1&&ir===0&&!(t.mode&1)&&(zx=rs()+500,rF&&jy()))}function jl(e,t){var n=e.callbackNode;FUe(e,t);var r=_M(e,e===Zs?To:0);if(r===0)n!==null&&_ae(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&_ae(n),t===1)e.tag===0?LVe(fle.bind(null,e)):U_e(fle.bind(null,e)),OVe(function(){!(ir&6)&&jy()}),n=null;else{switch(y_e(r)){case 1:n=zG;break;case 4:n=p_e;break;case 16:n=bM;break;case 536870912:n=m_e;break;default:n=bM}n=Bwe(n,Owe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Owe(e,t){if(eD=-1,tD=0,ir&6)throw Error(rt(327));var n=e.callbackNode;if(rx()&&e.callbackNode!==n)return null;var r=_M(e,e===Zs?To:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=FM(e,r);else{t=r;var i=ir;ir|=2;var s=Mwe();(Zs!==e||To!==t)&&(zp=null,zx=rs()+500,M1(e,t));do try{iHe();break}catch(a){Dwe(e,a)}while(!0);eY(),MM.current=s,ir=i,gs!==null?t=0:(Zs=null,To=0,t=Rs)}if(t!==0){if(t===2&&(i=U7(e),i!==0&&(r=i,t=gU(e,i))),t===1)throw n=YA,M1(e,0),n0(e,r),jl(e,rs()),n;if(t===6)n0(e,r);else{if(i=e.current.alternate,!(r&30)&&!nHe(i)&&(t=FM(e,r),t===2&&(s=U7(e),s!==0&&(r=s,t=gU(e,s))),t===1))throw n=YA,M1(e,0),n0(e,r),jl(e,rs()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(rt(345));case 2:Wv(e,Cl,zp);break;case 3:if(n0(e,r),(r&130023424)===r&&(t=mY+500-rs(),10<t)){if(_M(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ha(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=X7(Wv.bind(null,e,Cl,zp),t);break}Wv(e,Cl,zp);break;case 4:if(n0(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-zd(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=rs()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tHe(r/1960))-r,10<r){e.timeoutHandle=X7(Wv.bind(null,e,Cl,zp),r);break}Wv(e,Cl,zp);break;case 5:Wv(e,Cl,zp);break;default:throw Error(rt(329))}}}return jl(e,rs()),e.callbackNode===n?Owe.bind(null,e):null}function gU(e,t){var n=$2;return e.current.memoizedState.isDehydrated&&(M1(e,t).flags|=256),e=FM(e,t),e!==2&&(t=Cl,Cl=n,t!==null&&yU(t)),e}function yU(e){Cl===null?Cl=e:Cl.push.apply(Cl,e)}function nHe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!nf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function n0(e,t){for(t&=~pY,t&=~aF,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zd(t),r=1<<n;e[n]=-1,t&=~r}}function fle(e){if(ir&6)throw Error(rt(327));rx();var t=_M(e,0);if(!(t&1))return jl(e,rs()),null;var n=FM(e,t);if(e.tag!==0&&n===2){var r=U7(e);r!==0&&(t=r,n=gU(e,r))}if(n===1)throw n=YA,M1(e,0),n0(e,t),jl(e,rs()),n;if(n===6)throw Error(rt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wv(e,Cl,zp),jl(e,rs()),null}function gY(e,t){var n=ir;ir|=1;try{return e(t)}finally{ir=n,ir===0&&(zx=rs()+500,rF&&jy())}}function tb(e){h0!==null&&h0.tag===0&&!(ir&6)&&rx();var t=ir;ir|=1;var n=Ac.transition,r=kr;try{if(Ac.transition=null,kr=1,e)return e()}finally{kr=r,Ac.transition=n,ir=t,!(ir&6)&&jy()}}function yY(){pu=Lw.current,hi(Lw)}function M1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,NVe(n)),gs!==null)for(n=gs.return;n!==null;){var r=n;switch(QG(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&TM();break;case 3:jx(),hi(Ll),hi(ya),oY();break;case 5:sY(r);break;case 4:jx();break;case 13:hi(Ci);break;case 19:hi(Ci);break;case 10:tY(r.type._context);break;case 22:case 23:yY()}n=n.return}if(Zs=e,gs=e=M0(e.current,null),To=pu=t,Rs=0,YA=null,pY=aF=eb=0,Cl=$2=null,w1!==null){for(t=0;t<w1.length;t++)if(n=w1[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}w1=null}return e}function Dwe(e,t){do{var n=gs;try{if(eY(),QO.current=DM,OM){for(var r=Ii.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}OM=!1}if(Z1=0,qs=Es=Ii=null,D2=!1,qA=0,hY.current=null,n===null||n.return===null){Rs=1,YA=t,gs=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=To,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Zae(o);if(h!==null){h.flags&=-257,ele(h,o,a,s,t),h.mode&1&&Jae(s,u,t),t=h,l=u;var p=t.updateQueue;if(p===null){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}else{if(!(t&1)){Jae(s,u,t),vY();break e}l=Error(rt(426))}}else if(_i&&a.mode&1){var g=Zae(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),ele(g,o,a,s,t),JG(Bx(l,a));break e}}s=l=Bx(l,a),Rs!==4&&(Rs=2),$2===null?$2=[s]:$2.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=ywe(s,l,t);Wae(s,y);break e;case 1:a=l;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(O0===null||!O0.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=vwe(s,a,t);Wae(s,w);break e}}s=s.return}while(s!==null)}Lwe(n)}catch(x){t=x,gs===n&&n!==null&&(gs=n=n.return);continue}break}while(!0)}function Mwe(){var e=MM.current;return MM.current=DM,e===null?DM:e}function vY(){(Rs===0||Rs===3||Rs===2)&&(Rs=4),Zs===null||!(eb&268435455)&&!(aF&268435455)||n0(Zs,To)}function FM(e,t){var n=ir;ir|=2;var r=Mwe();(Zs!==e||To!==t)&&(zp=null,M1(e,t));do try{rHe();break}catch(i){Dwe(e,i)}while(!0);if(eY(),ir=n,MM.current=r,gs!==null)throw Error(rt(261));return Zs=null,To=0,Rs}function rHe(){for(;gs!==null;)$we(gs)}function iHe(){for(;gs!==null&&!kUe();)$we(gs)}function $we(e){var t=jwe(e.alternate,e,pu);e.memoizedProps=e.pendingProps,t===null?Lwe(e):gs=t,hY.current=null}function Lwe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=QVe(n,t),n!==null){n.flags&=32767,gs=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Rs=6,gs=null;return}}else if(n=XVe(n,t,pu),n!==null){gs=n;return}if(t=t.sibling,t!==null){gs=t;return}gs=t=e}while(t!==null);Rs===0&&(Rs=5)}function Wv(e,t,n){var r=kr,i=Ac.transition;try{Ac.transition=null,kr=1,sHe(e,t,n,r)}finally{Ac.transition=i,kr=r}return null}function sHe(e,t,n,r){do rx();while(h0!==null);if(ir&6)throw Error(rt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(rt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(jUe(e,s),e===Zs&&(gs=Zs=null,To=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oN||(oN=!0,Bwe(bM,function(){return rx(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ac.transition,Ac.transition=null;var o=kr;kr=1;var a=ir;ir|=4,hY.current=null,ZVe(e,n),Pwe(n,e),TVe(Y7),wM=!!G7,Y7=G7=null,e.current=n,eHe(n),RUe(),ir=a,kr=o,Ac.transition=s}else e.current=n;if(oN&&(oN=!1,h0=e,LM=i),s=e.pendingLanes,s===0&&(O0=null),OUe(n.stateNode),jl(e,rs()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($M)throw $M=!1,e=pU,pU=null,e;return LM&1&&e.tag!==0&&rx(),s=e.pendingLanes,s&1?e===mU?L2++:(L2=0,mU=e):L2=0,jy(),null}function rx(){if(h0!==null){var e=y_e(LM),t=Ac.transition,n=kr;try{if(Ac.transition=null,kr=16>e?16:e,h0===null)var r=!1;else{if(e=h0,h0=null,LM=0,ir&6)throw Error(rt(331));var i=ir;for(ir|=4,Tt=e.current;Tt!==null;){var s=Tt,o=s.child;if(Tt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Tt=u;Tt!==null;){var c=Tt;switch(c.tag){case 0:case 11:case 15:M2(8,c,s)}var d=c.child;if(d!==null)d.return=c,Tt=d;else for(;Tt!==null;){c=Tt;var f=c.sibling,h=c.return;if(Iwe(c),c===u){Tt=null;break}if(f!==null){f.return=h,Tt=f;break}Tt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Tt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Tt=o;else e:for(;Tt!==null;){if(s=Tt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:M2(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Tt=y;break e}Tt=s.return}}var v=e.current;for(Tt=v;Tt!==null;){o=Tt;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Tt=_;else e:for(o=v;Tt!==null;){if(a=Tt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:oF(9,a)}}catch(x){ji(a,a.return,x)}if(a===o){Tt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Tt=w;break e}Tt=a.return}}if(ir=i,jy(),Sh&&typeof Sh.onPostCommitFiberRoot=="function")try{Sh.onPostCommitFiberRoot(JL,e)}catch{}r=!0}return r}finally{kr=n,Ac.transition=t}}return!1}function hle(e,t,n){t=Bx(n,t),t=ywe(e,t,1),e=N0(e,t,1),t=Ha(),e!==null&&(kk(e,1,t),jl(e,t))}function ji(e,t,n){if(e.tag===3)hle(e,e,n);else for(;t!==null;){if(t.tag===3){hle(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(O0===null||!O0.has(r))){e=Bx(n,e),e=vwe(t,e,1),t=N0(t,e,1),e=Ha(),t!==null&&(kk(t,1,e),jl(t,e));break}}t=t.return}}function oHe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ha(),e.pingedLanes|=e.suspendedLanes&n,Zs===e&&(To&n)===n&&(Rs===4||Rs===3&&(To&130023424)===To&&500>rs()-mY?M1(e,0):pY|=n),jl(e,t)}function Fwe(e,t){t===0&&(e.mode&1?(t=XP,XP<<=1,!(XP&130023424)&&(XP=4194304)):t=1);var n=Ha();e=Rm(e,t),e!==null&&(kk(e,t,n),jl(e,n))}function aHe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Fwe(e,n)}function lHe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(rt(314))}r!==null&&r.delete(t),Fwe(e,n)}var jwe;jwe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ll.current)Nl=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Nl=!1,KVe(e,t,n);Nl=!!(e.flags&131072)}else Nl=!1,_i&&t.flags&1048576&&V_e(t,IM,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ZO(e,t),e=t.pendingProps;var i=$x(t,ya.current);nx(t,n),i=lY(null,t,r,e,i,n);var s=uY();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fl(r)?(s=!0,CM(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rY(t),i.updater=sF,t.stateNode=i,i._reactInternals=t,rU(t,r,e,n),t=oU(null,t,r,!0,s,n)):(t.tag=0,_i&&s&&XG(t),Na(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ZO(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=cHe(r),e=bd(r,e),i){case 0:t=sU(null,t,r,e,n);break e;case 1:t=rle(null,t,r,e,n);break e;case 11:t=tle(null,t,r,e,n);break e;case 14:t=nle(null,t,r,bd(r.type,e),n);break e}throw Error(rt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bd(r,i),sU(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bd(r,i),rle(e,t,r,i,n);case 3:e:{if(xwe(t),e===null)throw Error(rt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,K_e(e,t),PM(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Bx(Error(rt(423)),t),t=ile(e,t,r,n,i);break e}else if(r!==i){i=Bx(Error(rt(424)),t),t=ile(e,t,r,n,i);break e}else for(wu=P0(t.stateNode.containerInfo.firstChild),ku=t,_i=!0,Td=null,n=G_e(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Lx(),r===i){t=Pm(e,t,n);break e}Na(e,t,r,n)}t=t.child}return t;case 5:return X_e(t),e===null&&eU(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,K7(r,i)?o=null:s!==null&&K7(r,s)&&(t.flags|=32),wwe(e,t),Na(e,t,o,n),t.child;case 6:return e===null&&eU(t),null;case 13:return Ewe(e,t,n);case 4:return iY(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fx(t,null,r,n):Na(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bd(r,i),tle(e,t,r,i,n);case 7:return Na(e,t,t.pendingProps,n),t.child;case 8:return Na(e,t,t.pendingProps.children,n),t.child;case 12:return Na(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ei(kM,r._currentValue),r._currentValue=o,s!==null)if(nf(s.value,o)){if(s.children===i.children&&!Ll.current){t=Pm(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=fm(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),tU(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(rt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),tU(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Na(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,nx(t,n),i=Dc(i),r=r(i),t.flags|=1,Na(e,t,r,n),t.child;case 14:return r=t.type,i=bd(r,t.pendingProps),i=bd(r.type,i),nle(e,t,r,i,n);case 15:return bwe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bd(r,i),ZO(e,t),t.tag=1,Fl(r)?(e=!0,CM(t)):e=!1,nx(t,n),gwe(t,r,i),rU(t,r,i,n),oU(null,t,r,!0,e,n);case 19:return Swe(e,t,n);case 22:return _we(e,t,n)}throw Error(rt(156,t.tag))};function Bwe(e,t){return h_e(e,t)}function uHe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bc(e,t,n,r){return new uHe(e,t,n,r)}function bY(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cHe(e){if(typeof e=="function")return bY(e)?1:0;if(e!=null){if(e=e.$$typeof,e===FG)return 11;if(e===jG)return 14}return 2}function M0(e,t){var n=e.alternate;return n===null?(n=bc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function nD(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")bY(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Aw:return $1(n.children,i,s,t);case LG:o=8,i|=8;break;case A7:return e=bc(12,n,t,i|2),e.elementType=A7,e.lanes=s,e;case I7:return e=bc(13,n,t,i),e.elementType=I7,e.lanes=s,e;case k7:return e=bc(19,n,t,i),e.elementType=k7,e.lanes=s,e;case Xbe:return lF(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ybe:o=10;break e;case Kbe:o=9;break e;case FG:o=11;break e;case jG:o=14;break e;case Wg:o=16,r=null;break e}throw Error(rt(130,e==null?e:typeof e,""))}return t=bc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function $1(e,t,n,r){return e=bc(7,e,r,t),e.lanes=n,e}function lF(e,t,n,r){return e=bc(22,e,r,t),e.elementType=Xbe,e.lanes=n,e.stateNode={isHidden:!1},e}function O8(e,t,n){return e=bc(6,e,null,t),e.lanes=n,e}function D8(e,t,n){return t=bc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dHe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=p8(0),this.expirationTimes=p8(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=p8(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _Y(e,t,n,r,i,s,o,a,l){return e=new dHe(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=bc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rY(s),e}function fHe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cw,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function zwe(e){if(!e)return Z0;e=e._reactInternals;e:{if(zb(e)!==e||e.tag!==1)throw Error(rt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fl(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(rt(171))}if(e.tag===1){var n=e.type;if(Fl(n))return z_e(e,n,t)}return t}function Uwe(e,t,n,r,i,s,o,a,l){return e=_Y(n,r,!0,e,i,s,o,a,l),e.context=zwe(null),n=e.current,r=Ha(),i=D0(n),s=fm(r,i),s.callback=t??null,N0(n,s,i),e.current.lanes=i,kk(e,i,r),jl(e,r),e}function uF(e,t,n,r){var i=t.current,s=Ha(),o=D0(i);return n=zwe(n),t.context===null?t.context=n:t.pendingContext=n,t=fm(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=N0(i,t,o),e!==null&&(Ud(e,i,o,s),XO(e,i,o)),o}function jM(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ple(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function wY(e,t){ple(e,t),(e=e.alternate)&&ple(e,t)}function hHe(){return null}var Vwe=typeof reportError=="function"?reportError:function(e){console.error(e)};function xY(e){this._internalRoot=e}cF.prototype.render=xY.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(rt(409));uF(e,t,null,null)};cF.prototype.unmount=xY.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tb(function(){uF(null,e,null,null)}),t[km]=null}};function cF(e){this._internalRoot=e}cF.prototype.unstable_scheduleHydration=function(e){if(e){var t=__e();e={blockedOn:null,target:e,priority:t};for(var n=0;n<t0.length&&t!==0&&t<t0[n].priority;n++);t0.splice(n,0,e),n===0&&x_e(e)}};function EY(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function dF(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mle(){}function pHe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=jM(o);s.call(u)}}var o=Uwe(t,r,e,0,null,!1,!1,"",mle);return e._reactRootContainer=o,e[km]=o.current,BA(e.nodeType===8?e.parentNode:e),tb(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=jM(l);a.call(u)}}var l=_Y(e,0,!1,null,null,!1,!1,"",mle);return e._reactRootContainer=l,e[km]=l.current,BA(e.nodeType===8?e.parentNode:e),tb(function(){uF(t,l,n,r)}),l}function fF(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=jM(o);a.call(l)}}uF(t,o,e,i)}else o=pHe(n,t,e,i,r);return jM(o)}v_e=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=RC(t.pendingLanes);n!==0&&(UG(t,n|1),jl(t,rs()),!(ir&6)&&(zx=rs()+500,jy()))}break;case 13:tb(function(){var r=Rm(e,1);if(r!==null){var i=Ha();Ud(r,e,1,i)}}),wY(e,1)}};VG=function(e){if(e.tag===13){var t=Rm(e,134217728);if(t!==null){var n=Ha();Ud(t,e,134217728,n)}wY(e,134217728)}};b_e=function(e){if(e.tag===13){var t=D0(e),n=Rm(e,t);if(n!==null){var r=Ha();Ud(n,e,t,r)}wY(e,t)}};__e=function(){return kr};w_e=function(e,t){var n=kr;try{return kr=e,t()}finally{kr=n}};j7=function(e,t,n){switch(t){case"input":if(N7(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=nF(r);if(!i)throw Error(rt(90));Jbe(r),N7(r,i)}}}break;case"textarea":e_e(e,n);break;case"select":t=n.value,t!=null&&Jw(e,!!n.multiple,t,!1)}};a_e=gY;l_e=tb;var mHe={usingClientEntryPoint:!1,Events:[Pk,Pw,nF,s_e,o_e,gY]},RT={findFiberByHostInstance:_1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gHe={bundleType:RT.bundleType,version:RT.version,rendererPackageName:RT.rendererPackageName,rendererConfig:RT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rg.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=d_e(e),e===null?null:e.stateNode},findFiberByHostInstance:RT.findFiberByHostInstance||hHe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aN.isDisabled&&aN.supportsFiber)try{JL=aN.inject(gHe),Sh=aN}catch{}}Ku.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mHe;Ku.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!EY(t))throw Error(rt(200));return fHe(e,t,null,n)};Ku.createRoot=function(e,t){if(!EY(e))throw Error(rt(299));var n=!1,r="",i=Vwe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=_Y(e,1,!1,null,null,n,!1,r,i),e[km]=t.current,BA(e.nodeType===8?e.parentNode:e),new xY(t)};Ku.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(rt(188)):(e=Object.keys(e).join(","),Error(rt(268,e)));return e=d_e(t),e=e===null?null:e.stateNode,e};Ku.flushSync=function(e){return tb(e)};Ku.hydrate=function(e,t,n){if(!dF(t))throw Error(rt(200));return fF(null,e,t,!0,n)};Ku.hydrateRoot=function(e,t,n){if(!EY(e))throw Error(rt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Vwe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Uwe(t,null,e,1,n??null,i,!1,s,o),e[km]=t.current,BA(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new cF(t)};Ku.render=function(e,t,n){if(!dF(t))throw Error(rt(200));return fF(null,e,t,!1,n)};Ku.unmountComponentAtNode=function(e){if(!dF(e))throw Error(rt(40));return e._reactRootContainer?(tb(function(){fF(null,null,e,!1,function(){e._reactRootContainer=null,e[km]=null})}),!0):!1};Ku.unstable_batchedUpdates=gY;Ku.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!dF(n))throw Error(rt(200));if(e==null||e._reactInternals===void 0)throw Error(rt(38));return fF(e,t,n,!1,r)};Ku.version="18.3.1-next-f1338f8080-20240426";function Hwe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hwe)}catch(e){console.error(e)}}Hwe(),Hbe.exports=Ku;var rS=Hbe.exports;const yHe=rl(rS);var gle=rS;T7.createRoot=gle.createRoot,T7.hydrateRoot=gle.hydrateRoot;var sh=function(){return sh=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},sh.apply(this,arguments)};function Ok(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Kp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}function yle(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function vHe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Yn(e){return this instanceof Yn?(this.v=e,this):new Yn(e)}function E1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||l(h,m)})},p&&(i[h]=p(i[h])))}function l(h,p){try{u(r[h](p))}catch(m){f(s[0][3],m)}}function u(h){h.value instanceof Yn?Promise.resolve(h.value.v).then(c,d):f(s[0][2],h)}function c(h){l("next",h)}function d(h){l("throw",h)}function f(h,p){h(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}function M8(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Yn(e[i](o)),done:!1}:s?s(o):o}:s}}function F2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof yle=="function"?yle(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,l){o=e[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}var rD="right-scroll-bar-position",iD="width-before-scroll-bar",bHe="with-scroll-bars-hidden",_He="--removed-body-scroll-bar-size";function $8(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function wHe(e,t){var n=A.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var xHe=typeof window<"u"?A.useLayoutEffect:A.useEffect,vle=new WeakMap;function EHe(e,t){var n=wHe(null,function(r){return e.forEach(function(i){return $8(i,r)})});return xHe(function(){var r=vle.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||$8(a,null)}),s.forEach(function(a){i.has(a)||$8(a,o)})}vle.set(n,e)},[e]),n}function SHe(e){return e}function THe(e,t){t===void 0&&(t=SHe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return i}function CHe(e){e===void 0&&(e={});var t=THe(null);return t.options=sh({async:!0,ssr:!1},e),t}var qwe=function(e){var t=e.sideCar,n=Ok(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return A.createElement(r,sh({},n))};qwe.isSideCarExport=!0;function AHe(e,t){return e.useMedium(t),qwe}var Wwe=CHe(),L8=function(){},hF=A.forwardRef(function(e,t){var n=A.useRef(null),r=A.useState({onScrollCapture:L8,onWheelCapture:L8,onTouchMoveCapture:L8}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,l=e.className,u=e.removeScrollBar,c=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,_=Ok(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,x=EHe([n,t]),S=sh(sh({},_),i);return A.createElement(A.Fragment,null,c&&A.createElement(w,{sideCar:Wwe,removeScrollBar:u,shards:d,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?A.cloneElement(A.Children.only(a),sh(sh({},S),{ref:x})):A.createElement(y,sh({},S,{className:l,ref:x}),a))});hF.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};hF.classNames={fullWidth:iD,zeroRight:rD};var IHe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function kHe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=IHe();return t&&e.setAttribute("nonce",t),e}function RHe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function PHe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var NHe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=kHe())&&(RHe(t,n),PHe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},OHe=function(){var e=NHe();return function(t,n){A.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Gwe=function(){var e=OHe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},DHe={left:0,top:0,right:0,gap:0},F8=function(e){return parseInt(e||"",10)||0},MHe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[F8(n),F8(r),F8(i)]},$He=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return DHe;var t=MHe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},LHe=Gwe(),ix="data-scroll-locked",FHe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(bHe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ix,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(rD,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(iD,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(rD," .").concat(rD,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(iD," .").concat(iD,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ix,`] {
    `).concat(_He,": ").concat(a,`px;
  }
`)},ble=function(){var e=parseInt(document.body.getAttribute(ix)||"0",10);return isFinite(e)?e:0},jHe=function(){A.useEffect(function(){return document.body.setAttribute(ix,(ble()+1).toString()),function(){var e=ble()-1;e<=0?document.body.removeAttribute(ix):document.body.setAttribute(ix,e.toString())}},[])},BHe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;jHe();var s=A.useMemo(function(){return $He(i)},[i]);return A.createElement(LHe,{styles:FHe(s,!t,i,n?"":"!important")})},vU=!1;if(typeof window<"u")try{var lN=Object.defineProperty({},"passive",{get:function(){return vU=!0,!0}});window.addEventListener("test",lN,lN),window.removeEventListener("test",lN,lN)}catch{vU=!1}var D_=vU?{passive:!1}:!1,zHe=function(e){return e.tagName==="TEXTAREA"},Ywe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!zHe(e)&&n[t]==="visible")},UHe=function(e){return Ywe(e,"overflowY")},VHe=function(e){return Ywe(e,"overflowX")},_le=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Kwe(e,r);if(i){var s=Xwe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},HHe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},qHe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Kwe=function(e,t){return e==="v"?UHe(t):VHe(t)},Xwe=function(e,t){return e==="v"?HHe(t):qHe(t)},WHe=function(e,t){return e==="h"&&t==="rtl"?-1:1},GHe=function(e,t,n,r,i){var s=WHe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,l=t.contains(a),u=!1,c=o>0,d=0,f=0;do{var h=Xwe(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&Kwe(e,a)&&(d+=y,f+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(c&&(Math.abs(d)<1||!i)||!c&&(Math.abs(f)<1||!i))&&(u=!0),u},uN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},wle=function(e){return[e.deltaX,e.deltaY]},xle=function(e){return e&&"current"in e?e.current:e},YHe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},KHe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},XHe=0,M_=[];function QHe(e){var t=A.useRef([]),n=A.useRef([0,0]),r=A.useRef(),i=A.useState(XHe++)[0],s=A.useState(Gwe)[0],o=A.useRef(e);A.useEffect(function(){o.current=e},[e]),A.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=vHe([e.lockRef.current],(e.shards||[]).map(xle),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=A.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=uN(m),v=n.current,_="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],x,S=m.target,E=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in m&&E==="h"&&S.type==="range")return!1;var T=_le(E,S);if(!T)return!0;if(T?x=E:(x=E==="v"?"h":"v",T=_le(E,S)),!T)return!1;if(!r.current&&"changedTouches"in m&&(_||w)&&(r.current=x),!x)return!0;var I=r.current||x;return GHe(I,g,m,I==="h"?_:w,!0)},[]),l=A.useCallback(function(m){var g=m;if(!(!M_.length||M_[M_.length-1]!==s)){var y="deltaY"in g?wle(g):uN(g),v=t.current.filter(function(x){return x.name===g.type&&(x.target===g.target||g.target===x.shadowParent)&&YHe(x.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var _=(o.current.shards||[]).map(xle).filter(Boolean).filter(function(x){return x.contains(g.target)}),w=_.length>0?a(g,_[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),u=A.useCallback(function(m,g,y,v){var _={name:m,delta:g,target:y,should:v,shadowParent:JHe(y)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),c=A.useCallback(function(m){n.current=uN(m),r.current=void 0},[]),d=A.useCallback(function(m){u(m.type,wle(m),m.target,a(m,e.lockRef.current))},[]),f=A.useCallback(function(m){u(m.type,uN(m),m.target,a(m,e.lockRef.current))},[]);A.useEffect(function(){return M_.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,D_),document.addEventListener("touchmove",l,D_),document.addEventListener("touchstart",c,D_),function(){M_=M_.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,D_),document.removeEventListener("touchmove",l,D_),document.removeEventListener("touchstart",c,D_)}},[]);var h=e.removeScrollBar,p=e.inert;return A.createElement(A.Fragment,null,p?A.createElement(s,{styles:KHe(i)}):null,h?A.createElement(BHe,{gapMode:e.gapMode}):null)}function JHe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ZHe=AHe(Wwe,QHe);var pF=A.forwardRef(function(e,t){return A.createElement(hF,sh({},e,{ref:t,sideCar:ZHe}))});pF.classNames=hF.classNames;function ki(e){return Object.keys(e)}function j8(e){return e&&typeof e=="object"&&!Array.isArray(e)}function SY(e,t){const n={...e},r=t;return j8(e)&&j8(t)&&Object.keys(t).forEach(i=>{j8(r[i])&&i in e?n[i]=SY(n[i],r[i]):n[i]=r[i]}),n}function eqe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function tqe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function bU(e){const t=tqe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function B8(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function Qwe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?B8(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?B8(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?B8(s):s}}return r}return n}const xe=Qwe("rem",{shouldScale:!0}),BM=Qwe("em");function iS(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function Jwe(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function By(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==A.Fragment:!1}function js(e){const t=A.createContext(null);return[({children:i,value:s})=>b.jsx(t.Provider,{value:s,children:i}),()=>{const i=A.useContext(t);if(i===null)throw new Error(e);return i}]}function Ub(e=null){const t=A.createContext(e);return[({children:i,value:s})=>b.jsx(t.Provider,{value:s,children:i}),()=>A.useContext(t)]}function zM(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function UM(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function nqe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function rqe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function iqe(e,t,n){return UM(e,n)===UM(t,n)}function TY({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const l=Array.from(((p=UM(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>iqe(a.currentTarget,m,e)),u=l.findIndex(m=>a.currentTarget===m),c=rqe(u,l,r),d=nqe(u,l,r),f=s==="rtl"?d:c,h=s==="rtl"?c:d;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),i&&l[f].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),i&&l[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),i&&l[d].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[c].focus(),i&&l[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=l.length-1;!l[m].disabled&&l[m].focus();break}}}}const sqe={app:100,modal:200,popover:300,overlay:400,max:9999};function Kc(e){return sqe[e]}const oqe=()=>{};function aqe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||oqe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Ht(e,t="size",n=!0){if(e!==void 0)return Jwe(e)?n?xe(e):e:`var(--${t}-${e})`}function Du(e){return Ht(e,"mantine-spacing")}function br(e){return e===void 0?"var(--mantine-radius-default)":Ht(e,"mantine-radius")}function Os(e){return Ht(e,"mantine-font-size")}function Zwe(e){return Ht(e,"mantine-line-height",!1)}function CY(e){if(e)return Ht(e,"mantine-shadow",!1)}function xu(e,t){return n=>{e==null||e(n),t==null||t(n)}}function AY(e,t){return e in t.breakpoints?bU(t.breakpoints[e]):bU(e)}function VM(e,t){const n=e.map(r=>({value:r,px:AY(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function NC(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function lqe(e,t,n){var r;return n?Array.from(((r=UM(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function uqe(){const[e,t]=A.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function _c(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function j2(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function r0(e){const t=A.useRef(e);return A.useEffect(()=>{t.current=e}),A.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function mF(e,t){const n=r0(e),r=A.useRef(0);return A.useEffect(()=>()=>window.clearTimeout(r.current),[]),A.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const Ele=["mousedown","touchstart"];function cqe(e,t,n){const r=A.useRef();return A.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(u=>!!u&&!s.composedPath().includes(u))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Ele).forEach(s=>document.addEventListener(s,i)),()=>{(t||Ele).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function dqe({timeout:e=2e3}={}){const[t,n]=A.useState(null),[r,i]=A.useState(!1),[s,o]=A.useState(null),a=c=>{window.clearTimeout(s),o(window.setTimeout(()=>i(!1),e)),i(c)};return{copy:c=>{"clipboard"in navigator?navigator.clipboard.writeText(c).then(()=>a(!0)).catch(d=>n(d)):n(new Error("useClipboard: navigator.clipboard is not supported"))},reset:()=>{i(!1),n(null),window.clearTimeout(s)},error:t,copied:r}}function fqe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function hqe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function KA(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=A.useState(n?t:hqe(e)),s=A.useRef();return A.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),fqe(s.current,o=>i(o.matches))},[e]),r}function pqe(e,t){return KA("(prefers-color-scheme: dark)",e==="dark",t)?"dark":"light"}function exe(e,t,n={leading:!1}){const[r,i]=A.useState(e),s=A.useRef(!1),o=A.useRef(null),a=A.useRef(!1),l=()=>window.clearTimeout(o.current);return A.useEffect(()=>{s.current&&(!a.current&&n.leading?(a.current=!0,i(e)):(l(),o.current=window.setTimeout(()=>{a.current=!1,i(e)},t)))},[e,n.leading,t]),A.useEffect(()=>(s.current=!0,l),[]),[r,l]}const Vb=typeof document<"u"?A.useLayoutEffect:A.useEffect;function Mu(e,t){const n=A.useRef(!1);A.useEffect(()=>()=>{n.current=!1},[]),A.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function txe({opened:e,shouldReturnFocus:t=!0}){const n=A.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Mu(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function mqe(e,t="body > :not(script)"){const n=j2(),r=Array.from(document.querySelectorAll(t)).map(i=>{var l;if((l=i==null?void 0:i.shadowRoot)!=null&&l.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const gqe=/input|select|textarea|button|object/,nxe="a, input, select, textarea, button, object, [tabindex]";function yqe(e){return e.style.display==="none"}function vqe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(yqe(n))return!1;n=n.parentNode}return!0}function rxe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function _U(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(rxe(e));return(gqe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&vqe(e)}function ixe(e){const t=rxe(e);return(Number.isNaN(t)||t>=0)&&_U(e)}function bqe(e){return Array.from(e.querySelectorAll(nxe)).filter(ixe)}function _qe(e,t){const n=bqe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const l=n[t.shiftKey?n.length-1:0];l&&l.focus()}function wqe(e=!0){const t=A.useRef(),n=A.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(nxe));o=a.find(ixe)||a.find(_U)||null,!o&&_U(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=A.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=mqe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return A.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&_qe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const xqe=Vi.useId||(()=>{});function Eqe(){const e=xqe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Do(e){const t=Eqe(),[n,r]=A.useState(t);return Vb(()=>{r(j2())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function sxe(e,t,n){A.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function IY(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function oxe(...e){return t=>{e.forEach(n=>IY(n,t))}}function Ki(...e){return A.useCallback(oxe(...e),e)}function axe(e){return{x:_c(e.x,0,1),y:_c(e.y,0,1)}}function gF(e,t,n="ltr"){const r=A.useRef(null),i=A.useRef(!1),s=A.useRef(!1),o=A.useRef(0),[a,l]=A.useState(!1);return A.useEffect(()=>{i.current=!0},[]),A.useEffect(()=>{var v,_;const u=({x:w,y:x})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const S=r.current.getBoundingClientRect();if(S.width&&S.height){const E=_c((w-S.left)/S.width,0,1);e({x:n==="ltr"?E:1-E,y:_c((x-S.top)/S.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},d=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},f=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),l(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,l(!1),d(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{f(),w.preventDefault(),m(w)},m=w=>u({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),f(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),u({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(_=r.current)==null||_.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Pi({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=A.useState(t!==void 0?t:n),o=(a,...l)=>{s(a),r==null||r(a,...l)};return e!==void 0?[e,r,!0]:[i,o,!1]}function kg(e,t){const n=t-e+1;return Array.from({length:n},(r,i)=>i+e)}const cN="dots";function Sqe({total:e,siblings:t=1,boundaries:n=1,page:r,initialPage:i=1,onChange:s}){const o=Math.max(Math.trunc(e),0),[a,l]=Pi({value:r,onChange:s,defaultValue:i,finalValue:i}),u=m=>{m<=0?l(1):m>o?l(o):l(m)},c=()=>u(a+1),d=()=>u(a-1),f=()=>u(1),h=()=>u(o);return{range:A.useMemo(()=>{if(t*2+3+n*2>=o)return kg(1,o);const g=Math.max(a-t,n),y=Math.min(a+t,o-n),v=g>n+2,_=y<o-(n+1);if(!v&&_){const w=t*2+n+2;return[...kg(1,w),cN,...kg(o-(n-1),o)]}if(v&&!_){const w=n+1+2*t;return[...kg(1,n),cN,...kg(o-w,o)]}return[...kg(1,n),cN,...kg(g,y),cN,...kg(o-n+1,o)]},[o,t,a]),active:a,setPage:u,next:c,previous:d,first:f,last:h}}function kY(e,t){return KA("(prefers-reduced-motion: reduce)",e,t)}const Tqe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Vd(e){const t=A.useRef(0),n=A.useRef(null),[r,i]=A.useState(Tqe),s=A.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return A.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function Cqe(e){const[t,{width:n,height:r}]=Vd(e);return{ref:t,width:n,height:r}}function Aqe(){const[e,t]=A.useState(!1),n=A.useRef(null),r=A.useCallback(()=>t(!0),[]),i=A.useCallback(()=>t(!1),[]);return A.useEffect(()=>{if(n.current)return n.current.addEventListener("mouseenter",r),n.current.addEventListener("mouseleave",i),()=>{var s,o;(s=n.current)==null||s.removeEventListener("mouseenter",r),(o=n.current)==null||o.removeEventListener("mouseleave",i)}},[]),{ref:n,hovered:e}}function B2(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=A.useState(e),o=A.useCallback(()=>{s(u=>u||(n==null||n(),!0))},[n]),a=A.useCallback(()=>{s(u=>u&&(r==null||r(),!1))},[r]),l=A.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:l}]}function Iqe(e,t,n={autoInvoke:!1}){const r=A.useRef(null),i=A.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=A.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return A.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function kqe(e){const t=A.useRef();return A.useEffect(()=>{t.current=e},[e]),t.current}function Rqe(e,t,n){const r=A.useRef(),i=A.useRef(null);return A.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function Pqe(){const[e,t]=A.useState(!1);return A.useEffect(()=>t(!0),[]),e}function Nqe(e,t){const n=r0(e),r=A.useRef(),i=A.useRef(),s=A.useRef(!0),o=A.useRef(t),a=A.useRef(-1),l=()=>window.clearTimeout(a.current),u=A.useCallback((...f)=>{n(...f),r.current=f,i.current=f,s.current=!1},[n]),c=A.useCallback(()=>{r.current&&r.current!==i.current?(u(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[u]),d=A.useCallback((...f)=>{s.current?(u(...f),a.current=window.setTimeout(c,o.current)):r.current=f},[u,c]);return A.useEffect(()=>{o.current=t},[t]),[d,l]}function Oqe(e,t){const[n,r]=A.useState(e),[i,s]=Nqe(r,t);return A.useEffect(()=>s,[]),[n,i]}function Dqe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function Mqe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Vb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>Dqe(`${e}:${String(r)}`,i[0])}return[t,n]}var $qe={};function lxe(){return typeof process<"u"&&$qe?"production":"development"}function uxe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=uxe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function dt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=uxe(e))&&(r&&(r+=" "),r+=t);return r}const Lqe={};function Fqe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=dt(t[r],i):t[r]=i})}),t}function yF({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||Lqe);return Fqe(s)}function HM({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const RY=A.createContext(null);function zy(){const e=A.useContext(RY);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function jqe(){return zy().cssVariablesResolver}function Bqe(){return zy().classNamesPrefix}function vF(){return zy().getStyleNonce}function zqe(){return zy().withStaticClasses}function Uqe(){return zy().headless}function Vqe(){var e;return(e=zy().stylesTransform)==null?void 0:e.sx}function Hqe(){var e;return(e=zy().stylesTransform)==null?void 0:e.styles}function qqe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function Wqe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function Gqe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function Yqe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,l=r/60,u=a*(1-Math.abs(l%2-1)),c=s-a/2;let d,f,h;return l>=0&&l<1?(d=a,f=u,h=0):l>=1&&l<2?(d=u,f=a,h=0):l>=2&&l<3?(d=0,f=a,h=u):l>=3&&l<4?(d=0,f=u,h=a):l>=4&&l<5?(d=u,f=0,h=a):(d=a,f=0,h=u),{r:Math.round((d+c)*255),g:Math.round((f+c)*255),b:Math.round((h+c)*255),a:o||1}}function bF(e){return qqe(e)?Wqe(e):e.startsWith("rgb")?Gqe(e):e.startsWith("hsl")?Yqe(e):{r:0,g:0,b:0,a:1}}function OC(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=bF(e),o=1-t,a=l=>Math.round(l*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function XA(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function z8(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function Kqe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function Xqe(e){if(e.startsWith("oklch("))return(Kqe(e)||0)/100;const{r:t,g:n,b:r}=bF(e),i=t/255,s=n/255,o=r/255,a=z8(i),l=z8(s),u=z8(o);return .2126*a+.7152*l+.0722*u}function PT(e,t=.179){return e.startsWith("var(")?!1:Xqe(e)>t}function yf({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:PT(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:PT(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:PT(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][XA(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:PT(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:PT(e,t.luminanceThreshold),shade:s,variable:void 0}}function Rr(e,t){const n=yf({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function wU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Rr(n.from,t),i=Rr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Gf(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=bF(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const $_=Gf,Qqe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=yf({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${xe(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${xe(1)} solid transparent`}:{background:e,hover:OC(e,.1),color:a,border:`${xe(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${xe(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Gf(a,.1),hover:Gf(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${xe(1)} solid transparent`}}return{background:Gf(e,.1),hover:Gf(e,.12),color:e,border:`${xe(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${xe(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Gf(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${xe(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Gf(e,.05),color:e,border:`${xe(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${xe(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Gf(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${xe(1)} solid transparent`}}return{background:"transparent",hover:Gf(e,.12),color:e,border:`${xe(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${xe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${xe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${xe(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:OC(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${xe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:OC(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${xe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:OC(t.white,.01),color:e,border:`${xe(1)} solid transparent`}:n==="gradient"?{background:wU(r,t),hover:wU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${xe(1)} solid var(--mantine-color-default-border)`}:{}},Jqe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Sle="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",PY={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:Jqe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:Qqe,autoContrast:!1,luminanceThreshold:.3,fontFamily:Sle,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Sle,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:xe(34),lineHeight:"1.3"},h2:{fontSize:xe(26),lineHeight:"1.35"},h3:{fontSize:xe(22),lineHeight:"1.4"},h4:{fontSize:xe(18),lineHeight:"1.45"},h5:{fontSize:xe(16),lineHeight:"1.5"},h6:{fontSize:xe(14),lineHeight:"1.5"}}},fontSizes:{xs:xe(12),sm:xe(14),md:xe(16),lg:xe(18),xl:xe(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:xe(2),sm:xe(4),md:xe(8),lg:xe(16),xl:xe(32)},spacing:{xs:xe(10),sm:xe(12),md:xe(16),lg:xe(20),xl:xe(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${xe(1)} ${xe(3)} rgba(0, 0, 0, 0.05), 0 ${xe(1)} ${xe(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${xe(1)} ${xe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xe(10)} ${xe(15)} ${xe(-5)}, rgba(0, 0, 0, 0.04) 0 ${xe(7)} ${xe(7)} ${xe(-5)}`,md:`0 ${xe(1)} ${xe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xe(20)} ${xe(25)} ${xe(-5)}, rgba(0, 0, 0, 0.04) 0 ${xe(10)} ${xe(10)} ${xe(-5)}`,lg:`0 ${xe(1)} ${xe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xe(28)} ${xe(23)} ${xe(-7)}, rgba(0, 0, 0, 0.04) 0 ${xe(12)} ${xe(12)} ${xe(-7)}`,xl:`0 ${xe(1)} ${xe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xe(36)} ${xe(28)} ${xe(-7)}, rgba(0, 0, 0, 0.04) 0 ${xe(17)} ${xe(17)} ${xe(-7)}`},other:{},components:{}};function Tle(e){return e==="auto"||e==="dark"||e==="light"}function Zqe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Tle(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Tle(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const eWe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",Cle="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function U8(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Ale(e){if(!(e.primaryColor in e.colors))throw new Error(eWe);if(typeof e.primaryShade=="object"&&(!U8(e.primaryShade.dark)||!U8(e.primaryShade.light)))throw new Error(Cle);if(typeof e.primaryShade=="number"&&!U8(e.primaryShade))throw new Error(Cle)}function tWe(e,t){var r;if(!t)return Ale(e),e;const n=SY(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Ale(n),n}const NY=A.createContext(null),nWe=()=>A.useContext(NY)||PY;function ds(){const e=A.useContext(NY);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function cxe({theme:e,children:t,inherit:n=!0}){const r=nWe(),i=A.useMemo(()=>tWe(n?r:PY,e),[e,r,n]);return b.jsx(NY.Provider,{value:i,children:t})}cxe.displayName="@mantine/core/MantineThemeProvider";function rWe(){const e=ds(),t=vF(),n=ki(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=bU(e.breakpoints[i]),a=s?`${o-.1}px`:BM(o-.1),l=s?`${o}px`:BM(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return b.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function V8(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function NT(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function iWe(e,t){const n=V8(e.variables),r=n?NT(t,n):"",i=V8(e.dark),s=V8(e.light),o=i?NT(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=s?NT(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function np({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&yf({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Ile(e,t){return np({color:e.colors[e.primaryColor][XA(e,t)],theme:e,autoContrast:null})}function dN({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=XA(e,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:$_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:$_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:$_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...l}:l}const s=XA(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:$_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:$_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:$_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function sWe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function L_(e,t,n){ki(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const dxe=e=>{const t=XA(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:xe(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Ile(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Ile(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};L_(r.variables,e.breakpoints,"breakpoint"),L_(r.variables,e.spacing,"spacing"),L_(r.variables,e.fontSizes,"font-size"),L_(r.variables,e.lineHeights,"line-height"),L_(r.variables,e.shadows,"shadow"),L_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),ki(e.colors).forEach(s=>{const o=e.colors[s];if(sWe(o)){Object.assign(r.light,dN({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,dN({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,l)=>{r.variables[`--mantine-color-${s}-${l}`]=a}),Object.assign(r.light,dN({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,dN({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return ki(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function oWe({theme:e,generator:t}){const n=dxe(e),r=t==null?void 0:t(e);return r?SY(n,r):n}const H8=dxe(PY);function aWe(e){const t={variables:{},light:{},dark:{}};return ki(e.variables).forEach(n=>{H8.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),ki(e.light).forEach(n=>{H8.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),ki(e.dark).forEach(n=>{H8.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function lWe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function fxe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=ds(),r=vF(),i=jqe(),s=oWe({theme:n,generator:i}),o=e===":root"&&t,a=o?aWe(s):s,l=iWe(a,e);return l?b.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${l}${o?"":lWe(e)}`}}):null}fxe.displayName="@mantine/CssVariables";function uWe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function F_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function cWe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=A.useRef(),[s,o]=A.useState(()=>e.get(t)),a=r||s,l=A.useCallback(c=>{r||(F_(c,n),o(c),e.set(c))},[e.set,a,r]),u=A.useCallback(()=>{o(t),F_(t,n),e.clear()},[e.clear,t]);return A.useEffect(()=>(e.subscribe(l),e.unsubscribe),[e.subscribe,e.unsubscribe]),Vb(()=>{F_(e.get(t),n)},[]),A.useEffect(()=>{var d;if(r)return F_(r,n),()=>{};r===void 0&&F_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=f=>{s==="auto"&&F_(f.matches?"dark":"light",n)};return(d=i.current)==null||d.addEventListener("change",c),()=>{var f;return(f=i.current)==null?void 0:f.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:u}}function dWe({respectReducedMotion:e,getRootElement:t}){Vb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}uWe();function hxe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:u=Zqe(),defaultColorScheme:c="light",getRootElement:d=()=>document.documentElement,cssVariablesResolver:f,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=cWe({defaultColorScheme:c,forceColorScheme:h,manager:u,getRootElement:d});return dWe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:d}),b.jsx(RY.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:d,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:f,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:b.jsxs(cxe,{theme:e,children:[o&&b.jsx(fxe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&b.jsx(rWe,{}),t]})})}hxe.displayName="@mantine/core/MantineProvider";function rp({classNames:e,styles:t,props:n,stylesCtx:r}){const i=ds();return{resolvedClassNames:yF({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:HM({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const fWe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function hWe({theme:e,options:t,unstyled:n}){return dt((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||fWe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function pWe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return yF({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function kle({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return yF({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function mWe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function gWe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function yWe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function vWe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=yF({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function bWe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function _We({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:l,rootSelector:u,props:c,stylesCtx:d,withStaticClasses:f,headless:h,transformedStyles:p}){return dt(hWe({theme:e,options:t,unstyled:a||h}),vWe({theme:e,themeName:n,selector:r,props:c,stylesCtx:d}),bWe({options:t,classes:o,selector:r,unstyled:a}),kle({selector:r,stylesCtx:d,theme:e,classNames:s,props:c}),kle({selector:r,stylesCtx:d,theme:e,classNames:p,props:c}),pWe({selector:r,stylesCtx:d,options:t,props:c,theme:e}),mWe({rootSelector:u,selector:r,className:l}),gWe({selector:r,classes:o,unstyled:a||h}),f&&!h&&yWe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function wWe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return HM({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function xU({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...xU({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function xWe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...iS(n[r])}}),t),{})}function EWe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var l;return(l=xWe([a?{}:t==null?void 0:t(n,r,i),...o.map(u=>{var c,d,f;return(f=(d=(c=n.components)==null?void 0:c[u])==null?void 0:d.vars)==null?void 0:f.call(d,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:l[s]}function SWe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:l,vars:u,varsResolver:c,headless:d,withStylesTransform:f}){return{...!f&&wWe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!f&&HM({theme:e,styles:a,props:i,stylesCtx:s})[n],...!f&&HM({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...EWe({theme:e,props:i,stylesCtx:s,vars:u,varsResolver:c,selector:n,themeName:t,headless:d}),...o===n?xU({style:l,theme:e}):null,...xU({style:r==null?void 0:r.style,theme:e})}}function TWe({props:e,stylesCtx:t,themeName:n}){var o;const r=ds(),i=(o=Hqe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(u=>i(u,{props:e,theme:r,ctx:t})),...n.map(u=>{var c;return i((c=r.components[u])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function ft({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:l,styles:u,vars:c,varsResolver:d}){const f=ds(),h=Bqe(),p=zqe(),m=Uqe(),g=(Array.isArray(e)?e:[e]).filter(_=>_),{withStylesTransform:y,getTransformedStyles:v}=TWe({props:n,stylesCtx:r,themeName:g});return(_,w)=>({className:_We({theme:f,options:w,themeName:g,selector:_,classNamesPrefix:h,classNames:l,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,u])}),style:SWe({theme:f,themeName:g,selector:_,options:w,props:n,stylesCtx:r,rootSelector:o,styles:u,style:s,vars:c,varsResolver:d,headless:m,withStylesTransform:y})})}function CWe(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, white ${t*100}%)`;const{r:n,g:r,b:i,a:s}=bF(e),o=a=>Math.round(a+(255-a)*t);return`rgba(${o(n)}, ${o(r)}, ${o(i)}, ${s})`}function Uy(e,t){return typeof e=="boolean"?e:t.autoContrast}function Rle(e){const t=document.createElement("style");return t.setAttribute("data-mantine-styles","inline"),t.innerHTML="*, *::before, *::after {transition: none !important;}",t.setAttribute("data-mantine-disable-transition","true"),e&&t.setAttribute("nonce",e),document.head.appendChild(t),()=>document.querySelectorAll("[data-mantine-disable-transition]").forEach(r=>r.remove())}function AWe({keepTransitions:e}={}){const t=A.useRef(),n=A.useRef(),r=A.useContext(RY),i=vF(),s=A.useRef(i==null?void 0:i());if(!r)throw new Error("[@mantine/core] MantineProvider was not found in tree");const o=d=>{r.setColorScheme(d),t.current=e?()=>{}:Rle(s.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{var f;(f=t.current)==null||f.call(t)},10)},a=()=>{r.clearColorScheme(),t.current=e?()=>{}:Rle(s.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{var d;(d=t.current)==null||d.call(t)},10)},l=pqe("light",{getInitialValueInEffect:!1}),u=r.colorScheme==="auto"?l:r.colorScheme,c=A.useCallback(()=>o(u==="light"?"dark":"light"),[o,u]);return A.useEffect(()=>()=>{var d;(d=t.current)==null||d.call(t),window.clearTimeout(n.current)},[]),{colorScheme:r.colorScheme,setColorScheme:o,clearColorScheme:a,toggleColorScheme:c}}function be(e,t,n){var o;const r=ds(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...iS(n)}}function q8(e){return ki(e).reduce((t,n)=>e[n]!==void 0?`${t}${eqe(n)}:${e[n]};`:t,"").trim()}function IWe({selector:e,styles:t,media:n,container:r}){const i=t?q8(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${q8(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${q8(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function Dk(e){const t=vF();return b.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:IWe(e)}})}function Hb(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:l,ms:u,p:c,px:d,py:f,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:_,bg:w,c:x,opacity:S,ff:E,fz:T,fw:I,lts:k,ta:P,lh:L,fs:R,tt:$,td:D,w:O,miw:F,maw:U,h:V,mih:M,mah:z,bgsz:q,bgp:j,bgr:H,bga:G,pos:J,top:re,left:ie,bottom:te,right:ae,inset:_e,display:ce,flex:ze,hiddenFrom:Oe,visibleFrom:$e,lightHidden:Ne,darkHidden:pe,sx:ue,...Se}=e;return{styleProps:iS({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:l,ms:u,p:c,px:d,py:f,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:_,bg:w,c:x,opacity:S,ff:E,fz:T,fw:I,lts:k,ta:P,lh:L,fs:R,tt:$,td:D,w:O,miw:F,maw:U,h:V,mih:M,mah:z,bgsz:q,bgp:j,bgr:H,bga:G,pos:J,top:re,left:ie,bottom:te,right:ae,inset:_e,display:ce,flex:ze,hiddenFrom:Oe,visibleFrom:$e,lightHidden:Ne,darkHidden:pe,sx:ue}),rest:Se}}const kWe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function OY(e,t){const n=yf({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function RWe(e,t){const n=yf({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:OY(e,t)}function PWe(e,t){if(typeof e=="number")return xe(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${xe(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${OY(i.join(" "),t)}`),s.trim()}return e}const Ple={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function NWe(e){return typeof e=="string"&&e in Ple?Ple[e]:e}const OWe=["h1","h2","h3","h4","h5","h6"];function DWe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&OWe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?xe(e):e}function MWe(e){return e}const $We=["h1","h2","h3","h4","h5","h6"];function LWe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&$We.includes(e)?`var(--mantine-${e}-line-height)`:e}function FWe(e){return typeof e=="number"?xe(e):e}function jWe(e,t){if(typeof e=="number")return xe(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return xe(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const W8={color:OY,textColor:RWe,fontSize:DWe,spacing:jWe,identity:MWe,size:FWe,lineHeight:LWe,fontFamily:NWe,border:PWe};function Nle(e){return e.replace("(min-width: ","").replace("em)","")}function BWe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Nle(i))-Number(Nle(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function zWe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function UWe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function VWe(e){return typeof e=="object"&&e!==null?ki(e).filter(t=>t!=="base"):[]}function HWe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function pxe({styleProps:e,data:t,theme:n}){return BWe(ki(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=UWe(e[i]);if(!zWe(e[i]))return o.forEach(u=>{r.inlineStyles[u]=W8[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=VWe(e[i]);return o.forEach(u=>{a&&(r.styles[u]=W8[s.type](a,n)),l.forEach(c=>{const d=`(min-width: ${n.breakpoints[c]})`;r.media[d]={...r.media[d],[u]:W8[s.type](HWe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function _F(){return`__m__-${A.useId().replace(/:/g,"")}`}function DY(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...DY(r,t)}),{}):typeof e=="function"?e(t):e??{}}function mxe(e){return e.startsWith("data-")?e:`data-${e}`}function qWe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[mxe(n)]=e[n]),t},{})}function gxe(e){return e?typeof e=="string"?{[mxe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...gxe(n)}),{}):qWe(e):null}function EU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...EU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function WWe({theme:e,style:t,vars:n,styleProps:r}){const i=EU(t,e),s=EU(n,e);return{...i,...s,...r}}const yxe=A.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:l,lightHidden:u,darkHidden:c,renderRoot:d,__size:f,...h},p)=>{var T;const m=ds(),g=e||"div",{styleProps:y,rest:v}=Hb(h),_=Vqe(),w=(T=_==null?void 0:_())==null?void 0:T(y.sx),x=_F(),S=pxe({styleProps:y,theme:m,data:kWe}),E={ref:p,style:WWe({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:dt(r,w,{[x]:S.hasResponsiveStyles,"mantine-light-hidden":u,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":i,"data-size":Jwe(o)?void 0:o||void 0,size:f,...gxe(s),...v};return b.jsxs(b.Fragment,{children:[S.hasResponsiveStyles&&b.jsx(Dk,{selector:`.${x}`,styles:S.styles,media:S.media}),typeof d=="function"?d(E):b.jsx(g,{...E})]})});yxe.displayName="@mantine/core/Box";const ge=yxe;function vxe(e){return e}function GWe(e){const t=e;return n=>{const r=A.forwardRef((i,s)=>b.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function Pe(e){const t=A.forwardRef(e);return t.extend=vxe,t.withProps=n=>{const r=A.forwardRef((i,s)=>b.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function bs(e){const t=A.forwardRef(e);return t.withProps=n=>{const r=A.forwardRef((i,s)=>b.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=vxe,t}const YWe=A.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function ol(){return A.useContext(YWe)}function KWe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function G8(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const OT=typeof window<"u"&&window.requestAnimationFrame;function XWe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=A.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,l]=A.useState(r?{}:o),u=p=>{rS.flushSync(()=>l(p))},c=p=>{u(m=>({...m,...p}))};function d(p){const m=e||KWe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}Mu(()=>{typeof OT=="function"&&OT(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),OT(()=>{const p=G8(i);c({...d(p),height:p})})}:()=>{const p=G8(i);c({...d(p),willChange:"height",height:p}),OT(()=>c({height:s,overflow:"hidden"}))})},[r]);const f=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=G8(i);m===a.height?u({}):c({height:m}),n()}else a.height===s&&(u(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:oxe(i,y),onTransitionEnd:f,style:{boxSizing:"border-box",...p,...a}}}return h}const QWe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},qb=Pe((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:l,...u}=be("Collapse",QWe,e),c=ds(),d=kY(),h=(c.respectReducedMotion?d:!1)?0:i,p=XWe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?b.jsx(ge,{...u,children:n}):null:b.jsx(ge,{...p({style:{opacity:r||!l?1:0,transition:l?`opacity ${h}ms ${s}`:"none",...DY(o,c)},ref:t,...u}),children:n})});qb.displayName="@mantine/core/Collapse";const[JWe,Xc]=js("ScrollArea.Root component was not found in tree");function Ux(e,t){const n=r0(t);Vb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const ZWe=A.forwardRef((e,t)=>{const{style:n,...r}=e,i=Xc(),[s,o]=A.useState(0),[a,l]=A.useState(0),u=!!(s&&a);return Ux(i.scrollbarX,()=>{var d;const c=((d=i.scrollbarX)==null?void 0:d.offsetHeight)||0;i.onCornerHeightChange(c),l(c)}),Ux(i.scrollbarY,()=>{var d;const c=((d=i.scrollbarY)==null?void 0:d.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),u?b.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),eGe=A.forwardRef((e,t)=>{const n=Xc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?b.jsx(ZWe,{...e,ref:t}):null}),tGe={scrollHideDelay:1e3,type:"hover"},bxe=A.forwardRef((e,t)=>{const n=be("ScrollAreaRoot",tGe,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,l]=A.useState(null),[u,c]=A.useState(null),[d,f]=A.useState(null),[h,p]=A.useState(null),[m,g]=A.useState(null),[y,v]=A.useState(0),[_,w]=A.useState(0),[x,S]=A.useState(!1),[E,T]=A.useState(!1),I=Ki(t,k=>l(k));return b.jsx(JWe,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:u,onViewportChange:c,content:d,onContentChange:f,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:x,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:E,onScrollbarYEnabledChange:T,onCornerWidthChange:v,onCornerHeightChange:w},children:b.jsx(ge,{...o,ref:I,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${_}px`}})})});bxe.displayName="@mantine/core/ScrollAreaRoot";function _xe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function wF(e){const t=_xe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function wxe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function nGe(e,[t,n]){return Math.min(n,Math.max(t,e))}function Ole(e,t,n="ltr"){const r=wF(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,l=n==="ltr"?[0,o]:[o*-1,0],u=nGe(e,l);return wxe([0,o],[0,a])(u)}function rGe(e,t,n,r="ltr"){const i=wF(n),s=i/2,o=t||s,a=i-o,l=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,d=r==="ltr"?[0,c]:[c*-1,0];return wxe([l,u],d)(e)}function xxe(e,t){return e>0&&e<t}function qM(e){return e?parseInt(e,10):0}function L1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[iGe,Exe]=js("ScrollAreaScrollbar was not found in tree"),Sxe=A.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:l,onWheelScroll:u,onResize:c,...d}=e,f=Xc(),[h,p]=A.useState(null),m=Ki(t,T=>p(T)),g=A.useRef(null),y=A.useRef(""),{viewport:v}=f,_=n.content-n.viewport,w=r0(u),x=r0(a),S=mF(c,10),E=T=>{if(g.current){const I=T.clientX-g.current.left,k=T.clientY-g.current.top;l({x:I,y:k})}};return A.useEffect(()=>{const T=I=>{const k=I.target;(h==null?void 0:h.contains(k))&&w(I,_)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[v,h,_,w]),A.useEffect(x,[n,x]),Ux(h,S),Ux(f.content,S),b.jsx(iGe,{value:{scrollbar:h,hasThumb:r,onThumbChange:r0(i),onThumbPointerUp:r0(s),onThumbPositionChange:x,onThumbPointerDown:r0(o)},children:b.jsx("div",{...d,ref:m,"data-mantine-scrollbar":!0,style:{position:"absolute",...d.style},onPointerDown:L1(e.onPointerDown,T=>{T.preventDefault(),T.button===0&&(T.target.setPointerCapture(T.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",document.body.style.pointerEvents="none",E(T))}),onPointerMove:L1(e.onPointerMove,E),onPointerUp:L1(e.onPointerUp,T=>{T.preventDefault();const I=T.target;I.hasPointerCapture(T.pointerId)&&I.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=y.current,document.body.style.pointerEvents="auto",g.current=null})})})}),sGe=A.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Xc(),[a,l]=A.useState(),u=A.useRef(null),c=Ki(t,u,o.onScrollbarXChange);return A.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),b.jsx(Sxe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${wF(n)}px`},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(o.viewport){const h=o.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),xxe(h,f)&&d.preventDefault()}},onResize:()=>{u.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:qM(a.paddingLeft),paddingEnd:qM(a.paddingRight)}})}})}),oGe=A.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Xc(),[a,l]=A.useState(),u=A.useRef(null),c=Ki(t,u,o.onScrollbarYChange);return A.useEffect(()=>{u.current&&l(window.getComputedStyle(u.current))},[]),b.jsx(Sxe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${wF(n)}px`,...i},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(o.viewport){const h=o.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),xxe(h,f)&&d.preventDefault()}},onResize:()=>{u.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:qM(a.paddingTop),paddingEnd:qM(a.paddingBottom)}})}})}),MY=A.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=ol(),s=Xc(),o=A.useRef(null),a=A.useRef(0),[l,u]=A.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=_xe(l.viewport,l.content),d={...r,sizes:l,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},f=(h,p)=>rGe(h,a.current,l,p);return n==="horizontal"?b.jsx(sGe,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Ole(h,l,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=f(h,i))}}):n==="vertical"?b.jsx(oGe,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Ole(h,l);l.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=f(h))}}):null}),Txe=A.forwardRef((e,t)=>{const n=Xc(),{forceMount:r,...i}=e,[s,o]=A.useState(!1),a=e.orientation==="horizontal",l=mF(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?u:c)}},10);return Ux(n.viewport,l),Ux(n.content,l),r||s?b.jsx(MY,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),aGe=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Xc(),[s,o]=A.useState(!1);return A.useEffect(()=>{const{scrollArea:a}=i;let l=0;if(a){const u=()=>{window.clearTimeout(l),o(!0)},c=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?b.jsx(Txe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),lGe=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Xc(),s=e.orientation==="horizontal",[o,a]=A.useState("hidden"),l=mF(()=>a("idle"),100);return A.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,i.scrollHideDelay]),A.useEffect(()=>{const{viewport:u}=i,c=s?"scrollLeft":"scrollTop";if(u){let d=u[c];const f=()=>{const h=u[c];d!==h&&(a("scrolling"),l()),d=h};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[i.viewport,s,l]),n||o!=="hidden"?b.jsx(MY,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:L1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:L1(e.onPointerLeave,()=>a("idle"))}):null}),Dle=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Xc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return A.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?b.jsx(aGe,{...r,ref:t,forceMount:n}):i.type==="scroll"?b.jsx(lGe,{...r,ref:t,forceMount:n}):i.type==="auto"?b.jsx(Txe,{...r,ref:t,forceMount:n}):i.type==="always"?b.jsx(MY,{...r,ref:t}):null});function uGe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const cGe=A.forwardRef((e,t)=>{const{style:n,...r}=e,i=Xc(),s=Exe(),{onThumbPositionChange:o}=s,a=Ki(t,c=>s.onThumbChange(c)),l=A.useRef(),u=mF(()=>{l.current&&(l.current(),l.current=void 0)},100);return A.useEffect(()=>{const{viewport:c}=i;if(c){const d=()=>{if(u(),!l.current){const f=uGe(c,o);l.current=f,o()}};return o(),c.addEventListener("scroll",d),()=>c.removeEventListener("scroll",d)}},[i.viewport,u,o]),b.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:L1(e.onPointerDownCapture,c=>{const f=c.target.getBoundingClientRect(),h=c.clientX-f.left,p=c.clientY-f.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:L1(e.onPointerUp,s.onThumbPointerUp)})}),Mle=A.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Exe();return n||i.hasThumb?b.jsx(cGe,{ref:t,...r}):null}),Cxe=A.forwardRef(({children:e,style:t,...n},r)=>{const i=Xc(),s=Ki(r,i.onViewportChange);return b.jsx(ge,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:b.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});Cxe.displayName="@mantine/core/ScrollAreaViewport";var $Y={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const Axe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},dGe=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":xe(t)}}),Wb=Pe((e,t)=>{const n=be("ScrollArea",Axe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:l,vars:u,type:c,scrollHideDelay:d,viewportProps:f,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,onBottomReached:v,onTopReached:_,...w}=n,[x,S]=A.useState(!1),E=ft({name:"ScrollArea",props:n,classes:$Y,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dGe});return b.jsxs(bxe,{type:c==="never"?"always":c,scrollHideDelay:d,ref:t,scrollbars:y,...E("root"),...w,children:[b.jsx(Cxe,{...f,...E("viewport",{style:f==null?void 0:f.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:T=>{var L;(L=f==null?void 0:f.onScroll)==null||L.call(f,T),p==null||p({x:T.currentTarget.scrollLeft,y:T.currentTarget.scrollTop});const{scrollTop:I,scrollHeight:k,clientHeight:P}=T.currentTarget;I-(k-P)===0&&(v==null||v()),I===0&&(_==null||_())},children:m}),(y==="xy"||y==="x")&&b.jsx(Dle,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),children:b.jsx(Mle,{...E("thumb")})}),(y==="xy"||y==="y")&&b.jsx(Dle,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),children:b.jsx(Mle,{...E("thumb")})}),b.jsx(eGe,{...E("corner"),"data-hovered":x||void 0,"data-hidden":c==="never"||void 0})]})});Wb.displayName="@mantine/core/ScrollArea";const LY=Pe((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:l,offsetScrollbars:u,viewportRef:c,onScrollPositionChange:d,unstyled:f,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=be("ScrollAreaAutosize",Axe,e);return b.jsx(ge,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:b.jsx(ge,{style:{display:"flex",flexDirection:"column",flex:1},children:b.jsx(Wb,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:l,offsetScrollbars:u,viewportRef:c,onScrollPositionChange:d,unstyled:f,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});Wb.classes=$Y;LY.displayName="@mantine/core/ScrollAreaAutosize";LY.classes=$Y;Wb.Autosize=LY;var Ixe={root:"m_87cf2631"};const fGe={__staticSelector:"UnstyledButton"},os=bs((e,t)=>{const n=be("UnstyledButton",fGe,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:l,style:u,...c}=n,d=ft({name:s,props:n,classes:Ixe,className:r,style:u,classNames:a,styles:l,unstyled:o});return b.jsx(ge,{...d("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});os.classes=Ixe;os.displayName="@mantine/core/UnstyledButton";var kxe={root:"m_515a97f8"};const hGe={},FY=Pe((e,t)=>{const n=be("VisuallyHidden",hGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,...u}=n,c=ft({name:"VisuallyHidden",classes:kxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return b.jsx(ge,{component:"span",ref:t,...c("root"),...u})});FY.classes=kxe;FY.displayName="@mantine/core/VisuallyHidden";var Rxe={root:"m_1b7284a3"};const pGe={},mGe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:br(t),"--paper-shadow":CY(n)}}),Mk=bs((e,t)=>{const n=be("Paper",pGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:l,vars:u,radius:c,shadow:d,variant:f,mod:h,...p}=n,m=ft({name:"Paper",props:n,classes:Rxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mGe});return b.jsx(ge,{ref:t,mod:[{"data-with-border":l},h],...m("root"),variant:f,...p})});Mk.classes=Rxe;Mk.displayName="@mantine/core/Paper";function sS(e){return Pxe(e)?(e.nodeName||"").toLowerCase():"#document"}function Bl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ig(e){var t;return(t=(Pxe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Pxe(e){return e instanceof Node||e instanceof Bl(e).Node}function ai(e){return e instanceof Element||e instanceof Bl(e).Element}function $u(e){return e instanceof HTMLElement||e instanceof Bl(e).HTMLElement}function SU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Bl(e).ShadowRoot}function $k(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=$c(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function gGe(e){return["table","td","th"].includes(sS(e))}function xF(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function jY(e){const t=BY(),n=ai(e)?$c(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function yGe(e){let t=Nm(e);for(;$u(t)&&!ey(t);){if(jY(t))return t;if(xF(t))return null;t=Nm(t)}return null}function BY(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ey(e){return["html","body","#document"].includes(sS(e))}function $c(e){return Bl(e).getComputedStyle(e)}function EF(e){return ai(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Nm(e){if(sS(e)==="html")return e;const t=e.assignedSlot||e.parentNode||SU(e)&&e.host||ig(e);return SU(t)?t.host:t}function Nxe(e){const t=Nm(e);return ey(t)?e.ownerDocument?e.ownerDocument.body:e.body:$u(t)&&$k(t)?t:Nxe(t)}function hm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Nxe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Bl(i);if(s){const a=TU(o);return t.concat(o,o.visualViewport||[],$k(i)?i:[],a&&n?hm(a):[])}return t.concat(i,hm(i,[],n))}function TU(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function $le(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function QA(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&SU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Oxe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Dxe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function vGe(e){return wGe()?!1:!Lle()&&e.width===0&&e.height===0||Lle()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function bGe(){return/apple/i.test(navigator.vendor)}function Lle(){const e=/android/i;return e.test(Oxe())||e.test(Dxe())}function _Ge(){return Oxe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function wGe(){return Dxe().includes("jsdom/")}function CU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function xGe(e){return"nativeEvent"in e}function EGe(e){return e.matches("html,body")}function S1(e){return(e==null?void 0:e.ownerDocument)||document}function Y8(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function uw(e){return"composedPath"in e?e.composedPath()[0]:e.target}const SGe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function TGe(e){return $u(e)&&e.matches(SGe)}const Eu=Math.min,sa=Math.max,WM=Math.round,fN=Math.floor,ty=e=>({x:e,y:e}),CGe={left:"right",right:"left",bottom:"top",top:"bottom"},AGe={start:"end",end:"start"};function AU(e,t,n){return sa(e,Eu(t,n))}function Om(e,t){return typeof e=="function"?e(t):e}function rf(e){return e.split("-")[0]}function oS(e){return e.split("-")[1]}function zY(e){return e==="x"?"y":"x"}function UY(e){return e==="y"?"height":"width"}function Dm(e){return["top","bottom"].includes(rf(e))?"y":"x"}function VY(e){return zY(Dm(e))}function IGe(e,t,n){n===void 0&&(n=!1);const r=oS(e),i=VY(e),s=UY(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=GM(o)),[o,GM(o)]}function kGe(e){const t=GM(e);return[IU(e),t,IU(t)]}function IU(e){return e.replace(/start|end/g,t=>AGe[t])}function RGe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function PGe(e,t,n,r){const i=oS(e);let s=RGe(rf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(IU)))),s}function GM(e){return e.replace(/left|right|bottom|top/g,t=>CGe[t])}function NGe(e){return{top:0,right:0,bottom:0,left:0,...e}}function HY(e){return typeof e!="number"?NGe(e):{top:e,right:e,bottom:e,left:e}}function Vx(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Fle(e,t,n){let{reference:r,floating:i}=e;const s=Dm(t),o=VY(t),a=UY(o),l=rf(t),u=s==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(oS(t)){case"start":h[o]-=f*(n&&u?-1:1);break;case"end":h[o]+=f*(n&&u?-1:1);break}return h}const OGe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=Fle(u,r,l),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:_,data:w,reset:x}=await y({x:c,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:u,platform:o,elements:{reference:e,floating:t}});c=v??c,d=_??d,h={...h,[g]:{...h[g],...w}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(f=x.placement),x.rects&&(u=x.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):x.rects),{x:c,y:d}=Fle(u,f,l)),m=-1)}return{x:c,y:d,placement:f,strategy:i,middlewareData:h}};async function qY(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Om(t,e),p=HY(h),g=a[f?d==="floating"?"reference":"floating":d],y=Vx(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),v=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},x=Vx(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:_,strategy:l}):v);return{top:(y.top-x.top+p.top)/w.y,bottom:(x.bottom-y.bottom+p.bottom)/w.y,left:(y.left-x.left+p.left)/w.x,right:(x.right-y.right+p.right)/w.x}}const DGe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:u,padding:c=0}=Om(e,t)||{};if(u==null)return{};const d=HY(c),f={x:n,y:r},h=VY(i),p=UY(h),m=await o.getDimensions(u),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",_=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-f[h]-s.floating[p],x=f[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let E=S?S[_]:0;(!E||!await(o.isElement==null?void 0:o.isElement(S)))&&(E=a.floating[_]||s.floating[p]);const T=w/2-x/2,I=E/2-m[p]/2-1,k=Eu(d[y],I),P=Eu(d[v],I),L=k,R=E-m[p]-P,$=E/2-m[p]/2+T,D=AU(L,$,R),O=!l.arrow&&oS(i)!=null&&$!==D&&s.reference[p]/2-($<L?k:P)-m[p]/2<0,F=O?$<L?$-L:$-R:0;return{[h]:f[h]+F,data:{[h]:D,centerOffset:$-D-F,...O&&{alignmentOffset:F}},reset:O}}}),MGe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Om(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=rf(i),v=Dm(a),_=rf(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(u.floating)),x=f||(_||!m?[GM(a)]:kGe(a)),S=p!=="none";!f&&S&&x.push(...PGe(a,m,p,w));const E=[a,...x],T=await qY(t,g),I=[];let k=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&I.push(T[y]),d){const $=IGe(i,o,w);I.push(T[$[0]],T[$[1]])}if(k=[...k,{placement:i,overflows:I}],!I.every($=>$<=0)){var P,L;const $=(((P=s.flip)==null?void 0:P.index)||0)+1,D=E[$];if(D)return{data:{index:$,overflows:k},reset:{placement:D}};let O=(L=k.filter(F=>F.overflows[0]<=0).sort((F,U)=>F.overflows[1]-U.overflows[1])[0])==null?void 0:L.placement;if(!O)switch(h){case"bestFit":{var R;const F=(R=k.filter(U=>{if(S){const V=Dm(U.placement);return V===v||V==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(V=>V>0).reduce((V,M)=>V+M,0)]).sort((U,V)=>U[1]-V[1])[0])==null?void 0:R[0];F&&(O=F);break}case"initialPlacement":O=a;break}if(i!==O)return{reset:{placement:O}}}return{}}}};function Mxe(e){const t=Eu(...e.map(s=>s.left)),n=Eu(...e.map(s=>s.top)),r=sa(...e.map(s=>s.right)),i=sa(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function $Ge(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>Vx(Mxe(i)))}const LGe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:l,y:u}=Om(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),d=$Ge(c),f=Vx(Mxe(c)),h=HY(a);function p(){if(d.length===2&&d[0].left>d[1].right&&l!=null&&u!=null)return d.find(g=>l>g.left-h.left&&l<g.right+h.right&&u>g.top-h.top&&u<g.bottom+h.bottom)||f;if(d.length>=2){if(Dm(n)==="y"){const k=d[0],P=d[d.length-1],L=rf(n)==="top",R=k.top,$=P.bottom,D=L?k.left:P.left,O=L?k.right:P.right,F=O-D,U=$-R;return{top:R,bottom:$,left:D,right:O,width:F,height:U,x:D,y:R}}const g=rf(n)==="left",y=sa(...d.map(k=>k.right)),v=Eu(...d.map(k=>k.left)),_=d.filter(k=>g?k.left===v:k.right===y),w=_[0].top,x=_[_.length-1].bottom,S=v,E=y,T=E-S,I=x-w;return{top:w,bottom:x,left:S,right:E,width:T,height:I,x:S,y:w}}return f}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function FGe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=rf(n),a=oS(n),l=Dm(n)==="y",u=["left","top"].includes(o)?-1:1,c=s&&l?-1:1,d=Om(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}const jGe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await FGe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},BGe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...l}=Om(e,t),u={x:n,y:r},c=await qY(t,l),d=Dm(rf(i)),f=zY(d);let h=u[f],p=u[d];if(s){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=h+c[g],_=h-c[y];h=AU(v,h,_)}if(o){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=p+c[g],_=p-c[y];p=AU(v,p,_)}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},zGe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Om(e,t),c={x:n,y:r},d=Dm(i),f=zY(d);let h=c[f],p=c[d];const m=Om(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const _=f==="y"?"height":"width",w=s.reference[f]-s.floating[_]+g.mainAxis,x=s.reference[f]+s.reference[_]-g.mainAxis;h<w?h=w:h>x&&(h=x)}if(u){var y,v;const _=f==="y"?"width":"height",w=["top","left"].includes(rf(i)),x=s.reference[d]-s.floating[_]+(w&&((y=o.offset)==null?void 0:y[d])||0)+(w?0:g.crossAxis),S=s.reference[d]+s.reference[_]+(w?0:((v=o.offset)==null?void 0:v[d])||0)-(w?g.crossAxis:0);p<x?p=x:p>S&&(p=S)}return{[f]:h,[d]:p}}}},UGe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Om(e,t),l=await qY(t,a),u=rf(n),c=oS(n),d=Dm(n)==="y",{width:f,height:h}=r.floating;let p,m;u==="top"||u==="bottom"?(p=u,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=u,p=c==="end"?"top":"bottom");const g=h-l.top-l.bottom,y=f-l.left-l.right,v=Eu(h-l[p],g),_=Eu(f-l[m],y),w=!t.middlewareData.shift;let x=v,S=_;if(d?S=c||w?Eu(_,y):y:x=c||w?Eu(v,g):g,w&&!c){const T=sa(l.left,0),I=sa(l.right,0),k=sa(l.top,0),P=sa(l.bottom,0);d?S=f-2*(T!==0||I!==0?T+I:sa(l.left,l.right)):x=h-2*(k!==0||P!==0?k+P:sa(l.top,l.bottom))}await o({...t,availableWidth:S,availableHeight:x});const E=await i.getDimensions(s.floating);return f!==E.width||h!==E.height?{reset:{rects:!0}}:{}}}};function $xe(e){const t=$c(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=$u(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=WM(n)!==s||WM(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function WY(e){return ai(e)?e:e.contextElement}function sx(e){const t=WY(e);if(!$u(t))return ty(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=$xe(t);let o=(s?WM(n.width):n.width)/r,a=(s?WM(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const VGe=ty(0);function Lxe(e){const t=Bl(e);return!BY()||!t.visualViewport?VGe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function HGe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Bl(e)?!1:t}function nb(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=WY(e);let o=ty(1);t&&(r?ai(r)&&(o=sx(r)):o=sx(e));const a=HGe(s,n,r)?Lxe(s):ty(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const f=Bl(s),h=r&&ai(r)?Bl(r):r;let p=f,m=TU(p);for(;m&&r&&h!==p;){const g=sx(m),y=m.getBoundingClientRect(),v=$c(m),_=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,d*=g.y,l+=_,u+=w,p=Bl(m),m=TU(p)}}return Vx({width:c,height:d,x:l,y:u})}function qGe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=ig(r),a=t?xF(t.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=ty(1);const c=ty(0),d=$u(r);if((d||!d&&!s)&&((sS(r)!=="body"||$k(o))&&(l=EF(r)),$u(r))){const f=nb(r);u=sx(r),c.x=f.x+r.clientLeft,c.y=f.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x,y:n.y*u.y-l.scrollTop*u.y+c.y}}function WGe(e){return Array.from(e.getClientRects())}function Fxe(e){return nb(ig(e)).left+EF(e).scrollLeft}function GGe(e){const t=ig(e),n=EF(e),r=e.ownerDocument.body,i=sa(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=sa(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Fxe(e);const a=-n.scrollTop;return $c(r).direction==="rtl"&&(o+=sa(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function YGe(e,t){const n=Bl(e),r=ig(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=BY();(!u||u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function KGe(e,t){const n=nb(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=$u(e)?sx(e):ty(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function jle(e,t,n){let r;if(t==="viewport")r=YGe(e,n);else if(t==="document")r=GGe(ig(e));else if(ai(t))r=KGe(t,n);else{const i=Lxe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return Vx(r)}function jxe(e,t){const n=Nm(e);return n===t||!ai(n)||ey(n)?!1:$c(n).position==="fixed"||jxe(n,t)}function XGe(e,t){const n=t.get(e);if(n)return n;let r=hm(e,[],!1).filter(a=>ai(a)&&sS(a)!=="body"),i=null;const s=$c(e).position==="fixed";let o=s?Nm(e):e;for(;ai(o)&&!ey(o);){const a=$c(o),l=jY(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||$k(o)&&!l&&jxe(e,o))?r=r.filter(c=>c!==o):i=a,o=Nm(o)}return t.set(e,r),r}function QGe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?xF(t)?[]:XGe(t,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,c)=>{const d=jle(t,c,i);return u.top=sa(d.top,u.top),u.right=Eu(d.right,u.right),u.bottom=Eu(d.bottom,u.bottom),u.left=sa(d.left,u.left),u},jle(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function JGe(e){const{width:t,height:n}=$xe(e);return{width:t,height:n}}function ZGe(e,t,n){const r=$u(t),i=ig(t),s=n==="fixed",o=nb(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=ty(0);if(r||!r&&!s)if((sS(t)!=="body"||$k(i))&&(a=EF(t)),r){const d=nb(t,!0,s,t);l.x=d.x+t.clientLeft,l.y=d.y+t.clientTop}else i&&(l.x=Fxe(i));const u=o.left+a.scrollLeft-l.x,c=o.top+a.scrollTop-l.y;return{x:u,y:c,width:o.width,height:o.height}}function K8(e){return $c(e).position==="static"}function Ble(e,t){return!$u(e)||$c(e).position==="fixed"?null:t?t(e):e.offsetParent}function Bxe(e,t){const n=Bl(e);if(xF(e))return n;if(!$u(e)){let i=Nm(e);for(;i&&!ey(i);){if(ai(i)&&!K8(i))return i;i=Nm(i)}return n}let r=Ble(e,t);for(;r&&gGe(r)&&K8(r);)r=Ble(r,t);return r&&ey(r)&&K8(r)&&!jY(r)?n:r||yGe(e)||n}const eYe=async function(e){const t=this.getOffsetParent||Bxe,n=this.getDimensions,r=await n(e.floating);return{reference:ZGe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function tYe(e){return $c(e).direction==="rtl"}const nYe={convertOffsetParentRelativeRectToViewportRelativeRect:qGe,getDocumentElement:ig,getClippingRect:QGe,getOffsetParent:Bxe,getElementRects:eYe,getClientRects:WGe,getDimensions:JGe,getScale:sx,isElement:ai,isRTL:tYe};function rYe(e,t){let n=null,r;const i=ig(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:d,height:f}=e.getBoundingClientRect();if(a||t(),!d||!f)return;const h=fN(c),p=fN(i.clientWidth-(u+d)),m=fN(i.clientHeight-(c+f)),g=fN(u),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:sa(0,Eu(1,l))||1};let _=!0;function w(x){const S=x[0].intersectionRatio;if(S!==l){if(!_)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function iYe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=WY(e),c=i||s?[...u?hm(u):[],...hm(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=u&&a?rYe(u,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),u&&!l&&h.observe(u),h.observe(t));let p,m=l?nb(e):null;l&&g();function g(){const y=nb(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d==null||d(),(y=h)==null||y.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const sYe=jGe,oYe=BGe,aYe=MGe,lYe=UGe,zle=DGe,uYe=LGe,cYe=zGe,dYe=(e,t,n)=>{const r=new Map,i={platform:nYe,...n},s={...i.platform,_c:r};return OGe(e,t,{...i,platform:s})};var sD=typeof document<"u"?A.useLayoutEffect:A.useEffect;function YM(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!YM(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!YM(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function zxe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ule(e,t){const n=zxe(e);return Math.round(t*n)/n}function Vle(e){const t=A.useRef(e);return sD(()=>{t.current=e}),t}function fYe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[c,d]=A.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=A.useState(r);YM(f,r)||h(r);const[p,m]=A.useState(null),[g,y]=A.useState(null),v=A.useCallback(F=>{F!==S.current&&(S.current=F,m(F))},[]),_=A.useCallback(F=>{F!==E.current&&(E.current=F,y(F))},[]),w=s||p,x=o||g,S=A.useRef(null),E=A.useRef(null),T=A.useRef(c),I=l!=null,k=Vle(l),P=Vle(i),L=A.useCallback(()=>{if(!S.current||!E.current)return;const F={placement:t,strategy:n,middleware:f};P.current&&(F.platform=P.current),dYe(S.current,E.current,F).then(U=>{const V={...U,isPositioned:!0};R.current&&!YM(T.current,V)&&(T.current=V,rS.flushSync(()=>{d(V)}))})},[f,t,n,P]);sD(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,d(F=>({...F,isPositioned:!1})))},[u]);const R=A.useRef(!1);sD(()=>(R.current=!0,()=>{R.current=!1}),[]),sD(()=>{if(w&&(S.current=w),x&&(E.current=x),w&&x){if(k.current)return k.current(w,x,L);L()}},[w,x,L,k,I]);const $=A.useMemo(()=>({reference:S,floating:E,setReference:v,setFloating:_}),[v,_]),D=A.useMemo(()=>({reference:w,floating:x}),[w,x]),O=A.useMemo(()=>{const F={position:n,left:0,top:0};if(!D.floating)return F;const U=Ule(D.floating,c.x),V=Ule(D.floating,c.y);return a?{...F,transform:"translate("+U+"px, "+V+"px)",...zxe(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:V}},[n,a,D.floating,c.x,c.y]);return A.useMemo(()=>({...c,update:L,refs:$,elements:D,floatingStyles:O}),[c,L,$,D,O])}const hYe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?zle({element:r.current,padding:i}).fn(n):{}:r?zle({element:r,padding:i}).fn(n):{}}}},Uxe=(e,t)=>({...sYe(e),options:[e,t]}),GY=(e,t)=>({...oYe(e),options:[e,t]}),Hle=(e,t)=>({...cYe(e),options:[e,t]}),kU=(e,t)=>({...aYe(e),options:[e,t]}),pYe=(e,t)=>({...lYe(e),options:[e,t]}),RU=(e,t)=>({...uYe(e),options:[e,t]}),Vxe=(e,t)=>({...hYe(e),options:[e,t]}),Hxe={...mM},mYe=Hxe.useInsertionEffect,gYe=mYe||(e=>e());function i0(e){const t=A.useRef(()=>{});return gYe(()=>{t.current=e}),A.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Ch=typeof document<"u"?A.useLayoutEffect:A.useEffect;let qle=!1,yYe=0;const Wle=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+yYe++;function vYe(){const[e,t]=A.useState(()=>qle?Wle():void 0);return Ch(()=>{e==null&&t(Wle())},[]),A.useEffect(()=>{qle=!0},[]),e}const bYe=Hxe.useId,qxe=bYe||vYe;function _Ye(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const wYe=A.createContext(null),xYe=A.createContext(null),YY=()=>{var e;return((e=A.useContext(wYe))==null?void 0:e.id)||null},KY=()=>A.useContext(xYe);function XY(e){return"data-floating-ui-"+e}function X8(e){const t=A.useRef(e);return Ch(()=>{t.current=e}),t}const Gle=XY("safe-polygon");function oD(e,t,n){return n&&!CU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function EYe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=e,{enabled:a=!0,delay:l=0,handleClose:u=null,mouseOnly:c=!1,restMs:d=0,move:f=!0}=t,h=KY(),p=YY(),m=X8(u),g=X8(l),y=X8(n),v=A.useRef(),_=A.useRef(-1),w=A.useRef(),x=A.useRef(-1),S=A.useRef(!0),E=A.useRef(!1),T=A.useRef(()=>{}),I=A.useCallback(()=>{var D;const O=(D=i.current.openEvent)==null?void 0:D.type;return(O==null?void 0:O.includes("mouse"))&&O!=="mousedown"},[i]);A.useEffect(()=>{if(!a)return;function D(O){let{open:F}=O;F||(clearTimeout(_.current),clearTimeout(x.current),S.current=!0)}return s.on("openchange",D),()=>{s.off("openchange",D)}},[a,s]),A.useEffect(()=>{if(!a||!m.current||!n)return;function D(F){I()&&r(!1,F,"hover")}const O=S1(o.floating).documentElement;return O.addEventListener("mouseleave",D),()=>{O.removeEventListener("mouseleave",D)}},[o.floating,n,r,a,m,I]);const k=A.useCallback(function(D,O,F){O===void 0&&(O=!0),F===void 0&&(F="hover");const U=oD(g.current,"close",v.current);U&&!w.current?(clearTimeout(_.current),_.current=window.setTimeout(()=>r(!1,D,F),U)):O&&(clearTimeout(_.current),r(!1,D,F))},[g,r]),P=i0(()=>{T.current(),w.current=void 0}),L=i0(()=>{if(E.current){const D=S1(o.floating).body;D.style.pointerEvents="",D.removeAttribute(Gle),E.current=!1}});A.useEffect(()=>{if(!a)return;function D(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function O(M){if(clearTimeout(_.current),S.current=!1,c&&!CU(v.current)||d>0&&!oD(g.current,"open"))return;const z=oD(g.current,"open",v.current);z?_.current=window.setTimeout(()=>{y.current||r(!0,M,"hover")},z):r(!0,M,"hover")}function F(M){if(D())return;T.current();const z=S1(o.floating);if(clearTimeout(x.current),m.current&&i.current.floatingContext){n||clearTimeout(_.current),w.current=m.current({...i.current.floatingContext,tree:h,x:M.clientX,y:M.clientY,onClose(){L(),P(),k(M,!0,"safe-polygon")}});const j=w.current;z.addEventListener("mousemove",j),T.current=()=>{z.removeEventListener("mousemove",j)};return}(v.current==="touch"?!QA(o.floating,M.relatedTarget):!0)&&k(M)}function U(M){D()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:h,x:M.clientX,y:M.clientY,onClose(){L(),P(),k(M)}})(M))}if(ai(o.domReference)){var V;const M=o.domReference;return n&&M.addEventListener("mouseleave",U),(V=o.floating)==null||V.addEventListener("mouseleave",U),f&&M.addEventListener("mousemove",O,{once:!0}),M.addEventListener("mouseenter",O),M.addEventListener("mouseleave",F),()=>{var z;n&&M.removeEventListener("mouseleave",U),(z=o.floating)==null||z.removeEventListener("mouseleave",U),f&&M.removeEventListener("mousemove",O),M.removeEventListener("mouseenter",O),M.removeEventListener("mouseleave",F)}}},[o,a,e,c,d,f,k,P,L,r,n,y,h,g,m,i]),Ch(()=>{var D;if(a&&n&&(D=m.current)!=null&&D.__options.blockPointerEvents&&I()){E.current=!0;const F=o.floating;if(ai(o.domReference)&&F){var O;const U=S1(o.floating).body;U.setAttribute(Gle,"");const V=o.domReference,M=h==null||(O=h.nodesRef.current.find(z=>z.id===p))==null||(O=O.context)==null?void 0:O.elements.floating;return M&&(M.style.pointerEvents=""),U.style.pointerEvents="none",V.style.pointerEvents="auto",F.style.pointerEvents="auto",()=>{U.style.pointerEvents="",V.style.pointerEvents="",F.style.pointerEvents=""}}}},[a,n,p,o,h,m,I]),Ch(()=>{n||(v.current=void 0,P(),L())},[n,P,L]),A.useEffect(()=>()=>{P(),clearTimeout(_.current),clearTimeout(x.current),L()},[a,o.domReference,P,L]);const R=A.useMemo(()=>{function D(O){v.current=O.pointerType}return{onPointerDown:D,onPointerEnter:D,onMouseMove(O){const{nativeEvent:F}=O;function U(){!S.current&&!y.current&&r(!0,F,"hover")}c&&!CU(v.current)||n||d===0||(clearTimeout(x.current),v.current==="touch"?U():x.current=window.setTimeout(U,d))}}},[c,r,n,y,d]),$=A.useMemo(()=>({onMouseEnter(){clearTimeout(_.current)},onMouseLeave(D){k(D.nativeEvent,!1)}}),[k]);return A.useMemo(()=>a?{reference:R,floating:$}:{},[a,R,$])}const PU=()=>{},Wxe=A.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:PU,setState:PU,isInstantPhase:!1}),Gxe=()=>A.useContext(Wxe);function SYe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=A.useReducer((l,u)=>({...l,...u}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=A.useRef(null),a=A.useCallback(l=>{s({currentId:l})},[]);return Ch(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),A.createElement(Wxe.Provider,{value:A.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function TYe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=Gxe(),{currentId:l,setCurrentId:u,initialDelay:c,setState:d,timeoutMs:f}=a;return Ch(()=>{l&&(d({delay:{open:1,close:oD(c,"close")}}),l!==o&&r(!1))},[o,r,d,l,c]),Ch(()=>{function h(){r(!1),d({delay:c,currentId:null})}if(l&&!n&&l===o){if(f){const p=window.setTimeout(h,f);return()=>{clearTimeout(p)}}h()}},[n,d,l,o,r,c,f]),Ch(()=>{u===PU||!n||u(o)},[n,u,o]),a}function Q8(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const CYe="data-floating-ui-focusable",AYe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},IYe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Yle=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function kYe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:u="pointerdown",referencePress:c=!1,referencePressEvent:d="pointerdown",ancestorScroll:f=!1,bubbles:h,capture:p}=t,m=KY(),g=i0(typeof l=="function"?l:()=>!1),y=typeof l=="function"?g:l,v=A.useRef(!1),_=A.useRef(!1),{escapeKey:w,outsidePress:x}=Yle(h),{escapeKey:S,outsidePress:E}=Yle(p),T=i0($=>{var D;if(!n||!o||!a||$.key!=="Escape")return;const O=(D=s.current.floatingContext)==null?void 0:D.nodeId,F=m?Q8(m.nodesRef.current,O):[];if(!w&&($.stopPropagation(),F.length>0)){let U=!0;if(F.forEach(V=>{var M;if((M=V.context)!=null&&M.open&&!V.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,xGe($)?$.nativeEvent:$,"escape-key")}),I=i0($=>{var D;const O=()=>{var F;T($),(F=uw($))==null||F.removeEventListener("keydown",O)};(D=uw($))==null||D.addEventListener("keydown",O)}),k=i0($=>{var D;const O=v.current;v.current=!1;const F=_.current;if(_.current=!1,u==="click"&&F||O||typeof y=="function"&&!y($))return;const U=uw($),V="["+XY("inert")+"]",M=S1(i.floating).querySelectorAll(V);let z=ai(U)?U:null;for(;z&&!ey(z);){const G=Nm(z);if(ey(G)||!ai(G))break;z=G}if(M.length&&ai(U)&&!EGe(U)&&!QA(U,i.floating)&&Array.from(M).every(G=>!QA(z,G)))return;if($u(U)&&R){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,J=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let re=J&&$.offsetX>U.clientWidth;if(J&&$c(U).direction==="rtl"&&(re=$.offsetX<=U.offsetWidth-U.clientWidth),re||G&&$.offsetY>U.clientHeight)return}const q=(D=s.current.floatingContext)==null?void 0:D.nodeId,j=m&&Q8(m.nodesRef.current,q).some(G=>{var J;return Y8($,(J=G.context)==null?void 0:J.elements.floating)});if(Y8($,i.floating)||Y8($,i.domReference)||j)return;const H=m?Q8(m.nodesRef.current,q):[];if(H.length>0){let G=!0;if(H.forEach(J=>{var re;if((re=J.context)!=null&&re.open&&!J.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,$,"outside-press")}),P=i0($=>{var D;const O=()=>{var F;k($),(F=uw($))==null||F.removeEventListener(u,O)};(D=uw($))==null||D.addEventListener(u,O)});A.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=w,s.current.__outsidePressBubbles=x;function $(F){r(!1,F,"ancestor-scroll")}const D=S1(i.floating);a&&D.addEventListener("keydown",S?I:T,S),y&&D.addEventListener(u,E?P:k,E);let O=[];return f&&(ai(i.domReference)&&(O=hm(i.domReference)),ai(i.floating)&&(O=O.concat(hm(i.floating))),!ai(i.reference)&&i.reference&&i.reference.contextElement&&(O=O.concat(hm(i.reference.contextElement)))),O=O.filter(F=>{var U;return F!==((U=D.defaultView)==null?void 0:U.visualViewport)}),O.forEach(F=>{F.addEventListener("scroll",$,{passive:!0})}),()=>{a&&D.removeEventListener("keydown",S?I:T,S),y&&D.removeEventListener(u,E?P:k,E),O.forEach(F=>{F.removeEventListener("scroll",$)})}},[s,i,a,y,u,n,r,f,o,w,x,T,S,I,k,E,P]),A.useEffect(()=>{v.current=!1},[y,u]);const L=A.useMemo(()=>({onKeyDown:T,[AYe[d]]:$=>{c&&r(!1,$.nativeEvent,"reference-press")}}),[T,r,c,d]),R=A.useMemo(()=>({onKeyDown:T,onMouseDown(){_.current=!0},onMouseUp(){_.current=!0},[IYe[u]]:()=>{v.current=!0}}),[T,u]);return A.useMemo(()=>o?{reference:L,floating:R}:{},[o,L,R])}function RYe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=qxe(),s=A.useRef({}),[o]=A.useState(()=>_Ye()),a=YY()!=null,[l,u]=A.useState(r.reference),c=i0((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),d=A.useMemo(()=>({setPositionReference:u}),[]),f=A.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return A.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:f,events:o,floatingId:i,refs:d}),[t,c,f,o,i,d])}function QY(e){e===void 0&&(e={});const{nodeId:t}=e,n=RYe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=A.useState(null),[a,l]=A.useState(null),c=(i==null?void 0:i.reference)||s,d=A.useRef(null),f=KY();Ch(()=>{c&&(d.current=c)},[c]);const h=fYe({...e,elements:{...i,...a&&{reference:a}}}),p=A.useCallback(_=>{const w=ai(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;l(w),h.refs.setReference(w)},[h.refs]),m=A.useCallback(_=>{(ai(_)||_===null)&&(d.current=_,o(_)),(ai(h.refs.reference.current)||h.refs.reference.current===null||_!==null&&!ai(_))&&h.refs.setReference(_)},[h.refs]),g=A.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:d}),[h.refs,m,p]),y=A.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=A.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return Ch(()=>{r.dataRef.current.floatingContext=v;const _=f==null?void 0:f.nodesRef.current.find(w=>w.id===t);_&&(_.context=v)}),A.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function PYe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=e,{enabled:a=!0,visibleOnly:l=!0}=t,u=A.useRef(!1),c=A.useRef(),d=A.useRef(!0);A.useEffect(()=>{if(!a)return;const h=Bl(o.domReference);function p(){!n&&$u(o.domReference)&&o.domReference===$le(S1(o.domReference))&&(u.current=!0)}function m(){d.current=!0}return h.addEventListener("blur",p),h.addEventListener("keydown",m,!0),()=>{h.removeEventListener("blur",p),h.removeEventListener("keydown",m,!0)}},[o.domReference,n,a]),A.useEffect(()=>{if(!a)return;function h(p){let{reason:m}=p;(m==="reference-press"||m==="escape-key")&&(u.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),A.useEffect(()=>()=>{clearTimeout(c.current)},[]);const f=A.useMemo(()=>({onPointerDown(h){vGe(h.nativeEvent)||(d.current=!1)},onMouseLeave(){u.current=!1},onFocus(h){if(u.current)return;const p=uw(h.nativeEvent);if(l&&ai(p))try{if(bGe()&&_Ge())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!d.current&&!TGe(p))return}r(!0,h.nativeEvent,"focus")},onBlur(h){u.current=!1;const p=h.relatedTarget,m=h.nativeEvent,g=ai(p)&&p.hasAttribute(XY("focus-guard"))&&p.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var y;const v=$le(o.domReference?o.domReference.ownerDocument:document);!p&&v===o.domReference||QA((y=s.current.floatingContext)==null?void 0:y.refs.floating.current,v)||QA(o.domReference,v)||g||r(!1,m,"focus")})}}),[s,o.domReference,r,l]);return A.useMemo(()=>a?{reference:f}:{},[a,f])}const Kle="active",Xle="selected";function J8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Kle]:o,[Xle]:a,...l}=e;s=l}return{...n==="floating"&&{tabIndex:-1,[CYe]:""},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[u,c]=l;if(!(i&&[Kle,Xle].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof c=="function"){var d;(d=r.get(u))==null||d.push(c),o[u]=function(){for(var f,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(f=r.get(u))==null?void 0:f.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[u]=c}),o),{})}}function NYe(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=A.useCallback(a=>J8(a,e,"reference"),t),s=A.useCallback(a=>J8(a,e,"floating"),n),o=A.useCallback(a=>J8(a,e,"item"),r);return A.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const OYe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function DYe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=OYe.get(o))!=null?n:o,l=qxe(),c=YY()!=null,d=A.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,l,o]),f=A.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":l}}},[a,i,l,o]),h=A.useCallback(p=>{let{active:m,selected:g}=p;const y={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...y,"aria-selected":m&&g};case"combobox":return{...y,...m&&{"aria-selected":!0}}}return{}},[i,o]);return A.useMemo(()=>s?{reference:d,floating:f,item:h}:{},[s,d,f,h])}function Yxe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Qle(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Jle(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const MYe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function $Ye({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[l,u="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[MYe[l]]:r},d=-t/2;return l==="left"?{...c,...Qle(u,o,n,i),right:d,borderLeftColor:"transparent",borderBottomColor:"transparent"}:l==="right"?{...c,...Qle(u,o,n,i),left:d,borderRightColor:"transparent",borderTopColor:"transparent"}:l==="top"?{...c,...Jle(u,s,n,i,a),bottom:d,borderTopColor:"transparent",borderLeftColor:"transparent"}:l==="bottom"?{...c,...Jle(u,s,n,i,a),top:d,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const JY=A.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:l,...u},c)=>{const{dir:d}=ol();return s?b.jsx("div",{...u,ref:c,style:{...l,...$Ye({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:d,arrowX:o,arrowY:a})}}):null});JY.displayName="@mantine/core/FloatingArrow";const[LYe,Kxe]=js("Popover component was not found in the tree");function SF({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const i=wqe(t),s=Ki(i,r);return By(e)?A.cloneElement(e,{[n]:s}):e}function Xxe(e){return b.jsx(FY,{tabIndex:-1,"data-autofocus":!0,...e})}SF.displayName="@mantine/core/FocusTrap";Xxe.displayName="@mantine/core/FocusTrapInitialFocus";SF.InitialFocus=Xxe;function FYe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const jYe={},Qxe=A.forwardRef((e,t)=>{const{children:n,target:r,...i}=be("Portal",jYe,e),[s,o]=A.useState(!1),a=A.useRef(null);return Vb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:FYe(i),IY(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:rS.createPortal(b.jsx(b.Fragment,{children:n}),a.current)});Qxe.displayName="@mantine/core/Portal";function Lk({withinPortal:e=!0,children:t,...n}){return e?b.jsx(Qxe,{...n,children:t}):b.jsx(b.Fragment,{children:t})}Lk.displayName="@mantine/core/OptionalPortal";const DT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${xe(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),hN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${xe(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${xe(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${xe(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${xe(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${xe(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${xe(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${xe(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${xe(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...DT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...DT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...DT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...DT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...DT("top"),common:{transformOrigin:"top right"}}},Zle={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function BYe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in hN?{transitionProperty:hN[e].transitionProperty,...i,...hN[e].common,...hN[e][Zle[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Zle[t]]}}function zYe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:l,exitDelay:u}){const c=ds(),d=kY(),f=c.respectReducedMotion?d:!1,[h,p]=A.useState(f?0:e),[m,g]=A.useState(r?"entered":"exited"),y=A.useRef(-1),v=A.useRef(-1),_=A.useRef(-1),w=S=>{const E=S?i:s,T=S?o:a;window.clearTimeout(y.current);const I=f?0:S?e:t;p(I),I===0?(typeof E=="function"&&E(),typeof T=="function"&&T(),g(S?"entered":"exited")):_.current=requestAnimationFrame(()=>{yHe.flushSync(()=>{g(S?"pre-entering":"pre-exiting")}),_.current=requestAnimationFrame(()=>{typeof E=="function"&&E(),g(S?"entering":"exiting"),y.current=window.setTimeout(()=>{typeof T=="function"&&T(),g(S?"entered":"exited")},I)})})},x=S=>{if(window.clearTimeout(v.current),typeof(S?l:u)!="number"){w(S);return}v.current=window.setTimeout(()=>{w(S)},S?l:u)};return Mu(()=>{x(r)},[r]),A.useEffect(()=>()=>{window.clearTimeout(y.current),cancelAnimationFrame(_.current)},[]),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:n||"ease"}}function vf({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:l,onEnter:u,onExited:c,enterDelay:d,exitDelay:f}){const{transitionDuration:h,transitionStatus:p,transitionTimingFunction:m}=zYe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:l,onEnter:u,onExited:c,enterDelay:d,exitDelay:f});return h===0?i?b.jsx(b.Fragment,{children:s({})}):e?s({display:"none"}):null:p==="exited"?e?s({display:"none"}):null:b.jsx(b.Fragment,{children:s(BYe({transition:t,duration:h,state:p,timingFunction:m}))})}vf.displayName="@mantine/core/Transition";var Jxe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const UYe={},ZY=Pe((e,t)=>{var g,y,v,_;const n=be("PopoverDropdown",UYe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:l,classNames:u,styles:c,...d}=n,f=Kxe(),h=txe({opened:f.opened,shouldReturnFocus:f.returnFocus}),p=f.withRoles?{"aria-labelledby":f.getTargetId(),id:f.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=Ki(t,f.floating);return f.disabled?null:b.jsx(Lk,{...f.portalProps,withinPortal:f.withinPortal,children:b.jsx(vf,{mounted:f.opened,...f.transitionProps,transition:((g=f.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=f.transitionProps)==null?void 0:y.duration)??150,keepMounted:f.keepMounted,exitDuration:typeof((v=f.transitionProps)==null?void 0:v.exitDuration)=="number"?f.transitionProps.exitDuration:(_=f.transitionProps)==null?void 0:_.duration,children:w=>b.jsx(SF,{active:f.trapFocus,innerRef:m,children:b.jsxs(ge,{...p,...d,variant:l,onKeyDownCapture:aqe(f.onClose,{active:f.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":f.placement,"data-fixed":f.floatingStrategy==="fixed"||void 0,...f.getStyles("dropdown",{className:r,props:n,classNames:u,styles:c,style:[{...w,zIndex:f.zIndex,top:f.y??0,left:f.x??0,width:f.width==="target"?void 0:xe(f.width)},i]}),children:[o,b.jsx(JY,{ref:f.arrowRef,arrowX:f.arrowX,arrowY:f.arrowY,visible:f.withArrow,position:f.placement,arrowSize:f.arrowSize,arrowRadius:f.arrowRadius,arrowOffset:f.arrowOffset,arrowPosition:f.arrowPosition,...f.getStyles("arrow",{props:n,classNames:u,styles:c})})]})})})})});ZY.classes=Jxe;ZY.displayName="@mantine/core/PopoverDropdown";const VYe={refProp:"ref",popupType:"dialog"},Zxe=Pe((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=be("PopoverTarget",VYe,e);if(!By(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=Kxe(),l=Ki(a.reference,n.ref,t),u=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return A.cloneElement(n,{...o,...u,...a.targetProps,className:dt(a.targetProps.className,o.className,n.props.className),[r]:l,...a.controlled?null:{onClick:a.onToggle}})});Zxe.displayName="@mantine/core/PopoverTarget";function eEe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=A.useState(0);A.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return iYe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),Mu(()=>{t.update()},r),Mu(()=>{s(o=>o+1)},[e])}function HYe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function qYe(e,t){const n=HYe(e.middlewares),r=[Uxe(e.offset)];return n.shift&&r.push(GY(typeof n.shift=="boolean"?{limiter:Hle(),padding:5}:{limiter:Hle(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?kU():kU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?RU():RU(n.inline)),r.push(Vxe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(pYe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o,...a}){var c;const u=((c=t().refs.floating.current)==null?void 0:c.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:i,availableWidth:s,availableHeight:o,...a}):Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`})),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function WYe(e){const[t,n]=Pi({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=QY({strategy:e.strategy,placement:e.position,middleware:qYe(e,()=>s)});return eEe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),Mu(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),Mu(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const GYe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Kc("popover"),__staticSelector:"Popover",width:"max-content"},YYe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:br(t),"--popover-shadow":CY(n)}});function Tn(e){var pe,ue,Se,De,at,He;const t=be("Popover",GYe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:l,width:u,middlewares:c,withArrow:d,arrowSize:f,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:_,withinPortal:w,portalProps:x,closeOnEscape:S,clickOutsideEvents:E,trapFocus:T,onClose:I,onOpen:k,onChange:P,zIndex:L,radius:R,shadow:$,id:D,defaultOpened:O,__staticSelector:F,withRoles:U,disabled:V,returnFocus:M,variant:z,keepMounted:q,vars:j,floatingStrategy:H,...G}=t,J=ft({name:F,props:t,classes:Jxe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:YYe}),re=A.useRef(null),[ie,te]=A.useState(null),[ae,_e]=A.useState(null),{dir:ce}=ol(),ze=Do(D),Oe=WYe({middlewares:c,width:u,position:Yxe(ce,r),offset:typeof i=="number"?i+(d?f/2:0):i,arrowRef:re,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:O,onChange:P,onOpen:k,onClose:I,strategy:H});cqe(()=>_&&Oe.onClose(),E,[ie,ae]);const $e=A.useCallback(le=>{te(le),Oe.floating.refs.setReference(le)},[Oe.floating.refs.setReference]),Ne=A.useCallback(le=>{_e(le),Oe.floating.refs.setFloating(le)},[Oe.floating.refs.setFloating]);return b.jsx(LYe,{value:{returnFocus:M,disabled:V,controlled:Oe.controlled,reference:$e,floating:Ne,x:Oe.floating.x,y:Oe.floating.y,arrowX:(Se=(ue=(pe=Oe.floating)==null?void 0:pe.middlewareData)==null?void 0:ue.arrow)==null?void 0:Se.x,arrowY:(He=(at=(De=Oe.floating)==null?void 0:De.middlewareData)==null?void 0:at.arrow)==null?void 0:He.y,opened:Oe.opened,arrowRef:re,transitionProps:l,width:u,withArrow:d,arrowSize:f,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Oe.floating.placement,trapFocus:T,withinPortal:w,portalProps:x,zIndex:L,radius:R,shadow:$,closeOnEscape:S,onClose:Oe.onClose,onToggle:Oe.onToggle,getTargetId:()=>`${ze}-target`,getDropdownId:()=>`${ze}-dropdown`,withRoles:U,targetProps:G,__staticSelector:F,classNames:y,styles:v,unstyled:g,variant:z,keepMounted:q,getStyles:J,floatingStrategy:H},children:n})}Tn.Target=Zxe;Tn.Dropdown=ZY;Tn.displayName="@mantine/core/Popover";Tn.extend=e=>e;var Dd={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const KYe=A.forwardRef(({className:e,...t},n)=>b.jsxs(ge,{component:"span",className:dt(Dd.barsLoader,e),...t,ref:n,children:[b.jsx("span",{className:Dd.bar}),b.jsx("span",{className:Dd.bar}),b.jsx("span",{className:Dd.bar})]})),XYe=A.forwardRef(({className:e,...t},n)=>b.jsxs(ge,{component:"span",className:dt(Dd.dotsLoader,e),...t,ref:n,children:[b.jsx("span",{className:Dd.dot}),b.jsx("span",{className:Dd.dot}),b.jsx("span",{className:Dd.dot})]})),QYe=A.forwardRef(({className:e,...t},n)=>b.jsx(ge,{component:"span",className:dt(Dd.ovalLoader,e),...t,ref:n})),tEe={bars:KYe,oval:QYe,dots:XYe},JYe={loaders:tEe,type:"oval"},ZYe=(e,{size:t,color:n})=>({root:{"--loader-size":Ht(t,"loader-size"),"--loader-color":n?Rr(n,e):void 0}}),is=Pe((e,t)=>{const n=be("Loader",JYe,e),{size:r,color:i,type:s,vars:o,className:a,style:l,classNames:u,styles:c,unstyled:d,loaders:f,variant:h,children:p,...m}=n,g=ft({name:"Loader",props:n,classes:Dd,className:a,style:l,classNames:u,styles:c,unstyled:d,vars:o,varsResolver:ZYe});return p?b.jsx(ge,{...g("root"),ref:t,...m,children:p}):b.jsx(ge,{...g("root"),ref:t,component:f[s],variant:h,size:r,...m})});is.defaultLoaders=tEe;is.classes=Dd;is.displayName="@mantine/core/Loader";var TF={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const eue={orientation:"horizontal"},eKe=(e,{borderWidth:t})=>({group:{"--ai-border-width":xe(t)}}),eK=Pe((e,t)=>{const n=be("ActionIconGroup",eue,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:l,vars:u,borderWidth:c,variant:d,mod:f,...h}=be("ActionIconGroup",eue,e),p=ft({name:"ActionIconGroup",props:n,classes:TF,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:eKe,rootSelector:"group"});return b.jsx(ge,{...p("group"),ref:t,variant:d,mod:[{"data-orientation":l},f],role:"group",...h})});eK.classes=TF;eK.displayName="@mantine/core/ActionIconGroup";const tKe={},nKe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":Ht(t,"ai-size"),"--ai-radius":n===void 0?void 0:br(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},In=bs((e,t)=>{const n=be("ActionIcon",tKe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:l,loading:u,loaderProps:c,size:d,color:f,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":_,autoContrast:w,mod:x,...S}=n,E=ft({name:["ActionIcon",p],props:n,className:r,style:l,classes:TF,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:nKe});return b.jsxs(os,{...E("root",{active:!v&&!u&&!_}),...S,unstyled:i,variant:s,size:d,disabled:v||u,ref:t,mod:[{loading:u,disabled:v||_},x],children:[b.jsx(vf,{mounted:!!u,transition:"slide-down",duration:150,children:T=>b.jsx(ge,{component:"span",...E("loader",{style:T}),"aria-hidden":!0,children:b.jsx(is,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),b.jsx(ge,{component:"span",mod:{loading:u},...E("icon"),children:y})]})});In.classes=TF;In.displayName="@mantine/core/ActionIcon";In.Group=eK;const nEe=A.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>b.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:b.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));nEe.displayName="@mantine/core/CloseIcon";var rEe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const rKe={variant:"subtle"},iKe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Ht(t,"cb-size"),"--cb-radius":n===void 0?void 0:br(n),"--cb-icon-size":xe(r)}}),Vy=bs((e,t)=>{const n=be("CloseButton",rKe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:l,style:u,styles:c,unstyled:d,"data-disabled":f,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=ft({name:"CloseButton",props:n,className:a,style:u,classes:rEe,classNames:l,styles:c,unstyled:d,vars:s,varsResolver:iKe});return b.jsxs(os,{ref:t,...y,unstyled:d,variant:p,disabled:h,mod:[{disabled:h||f},g],...v("root",{variant:p,active:!h&&!f}),children:[m||b.jsx(nEe,{}),i]})});Vy.classes=rEe;Vy.displayName="@mantine/core/CloseButton";function sKe(e){return A.Children.toArray(e).filter(Boolean)}var iEe={root:"m_4081bf90"};const oKe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},aKe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Du(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),gn=Pe((e,t)=>{const n=be("Group",oKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:l,gap:u,align:c,justify:d,wrap:f,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,..._}=n,w=sKe(l),x=w.length,S=Du(u??"md"),T={childWidth:`calc(${100/x}% - (${S} - ${S} / ${x}))`},I=ft({name:"Group",props:n,stylesCtx:T,className:i,style:s,classes:iEe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:aKe});return b.jsx(ge,{...I("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,..._,children:w})});gn.classes=iEe;gn.displayName="@mantine/core/Group";var sEe={root:"m_9814e45f"};const lKe={zIndex:Kc("modal")},uKe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Gf(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${xe(i)})`:void 0,"--overlay-radius":s===void 0?void 0:br(s),"--overlay-z-index":o==null?void 0:o.toString()}}),JA=bs((e,t)=>{const n=be("Overlay",lKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,fixed:u,center:c,children:d,radius:f,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,..._}=n,w=ft({name:"Overlay",props:n,classes:sEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:uKe});return b.jsx(ge,{ref:t,...w("root"),mod:[{center:c,fixed:u},v],..._,children:d})});JA.classes=sEe;JA.displayName="@mantine/core/Overlay";const[cKe,sg]=js("ModalBase component was not found in tree");function dKe({opened:e,transitionDuration:t}){const[n,r]=A.useState(e),i=A.useRef(),o=kY()?0:t;return A.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function fKe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Do(e),[l,u]=A.useState(!1),[c,d]=A.useState(!1),f=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=dKe({opened:n,transitionDuration:f});return sxe("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),txe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:l,bodyMounted:c,shouldLockScroll:h,setTitleMounted:u,setBodyMounted:d}}const oEe=A.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:l,withinPortal:u,portalProps:c,lockScroll:d,children:f,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,..._},w)=>{const{_id:x,titleMounted:S,bodyMounted:E,shouldLockScroll:T,setTitleMounted:I,setBodyMounted:k}=fKe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a}),{key:P,...L}=v||{};return b.jsx(Lk,{...c,withinPortal:u,children:b.jsx(cKe,{value:{opened:t,onClose:n,closeOnClickOutside:l,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${x}-title`,getBodyId:()=>`${x}-body`,titleMounted:S,bodyMounted:E,setTitleMounted:I,setBodyMounted:k,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:b.jsx(pF,{enabled:T&&d,...L,children:b.jsx(ge,{ref:w,..._,__vars:{...g,"--mb-z-index":(h||Kc("modal")).toString(),"--mb-shadow":CY(p),"--mb-padding":Du(m)},children:f})},P)})})});function hKe(){const e=sg();return A.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var Hx={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const tK=A.forwardRef(({className:e,...t},n)=>{const r=hKe(),i=sg();return b.jsx(ge,{ref:n,...t,id:r,className:dt({[Hx.body]:!i.unstyled},e)})});tK.displayName="@mantine/core/ModalBaseBody";const nK=A.forwardRef(({className:e,onClick:t,...n},r)=>{const i=sg();return b.jsx(Vy,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:dt({[Hx.close]:!i.unstyled},e),unstyled:i.unstyled})});nK.displayName="@mantine/core/ModalBaseCloseButton";const aEe=A.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=sg();return b.jsx(vf,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:l=>b.jsx("div",{...n,className:dt({[Hx.inner]:!a.unstyled},n.className),children:b.jsx(SF,{active:a.opened&&a.trapFocus,innerRef:o,children:b.jsx(Mk,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[i,l],className:dt({[Hx.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),rK=A.forwardRef(({className:e,...t},n)=>{const r=sg();return b.jsx(ge,{component:"header",ref:n,className:dt({[Hx.header]:!r.unstyled},e),...t})});rK.displayName="@mantine/core/ModalBaseHeader";const pKe={duration:200,timingFunction:"ease",transition:"fade"};function mKe(e){const t=sg();return{...pKe,...t.transitionProps,...e}}const iK=A.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=sg(),o=mKe(t);return b.jsx(vf,{mounted:s.opened,...o,transition:"fade",children:a=>b.jsx(JA,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:l=>{e==null||e(l),s.closeOnClickOutside&&s.onClose()},...r})})});iK.displayName="@mantine/core/ModalBaseOverlay";function gKe(){const e=sg();return A.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const sK=A.forwardRef(({className:e,...t},n)=>{const r=gKe(),i=sg();return b.jsx(ge,{component:"h2",ref:n,className:dt({[Hx.title]:!i.unstyled},e),...t,id:r})});sK.displayName="@mantine/core/ModalBaseTitle";function lEe({children:e}){return b.jsx(b.Fragment,{children:e})}const[yKe,aS]=Ub({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Qc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const tue={},vKe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Os(t)} - ${xe(2)})`}}),CF=Pe((e,t)=>{const n=be("InputDescription",tue,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,__staticSelector:c,__inheritStyles:d=!0,variant:f,...h}=be("InputDescription",tue,n),p=aS(),m=ft({name:["InputWrapper",c],props:n,classes:Qc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:l,varsResolver:vKe}),g=d&&(p==null?void 0:p.getStyles)||m;return b.jsx(ge,{component:"p",ref:t,variant:f,size:u,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});CF.classes=Qc;CF.displayName="@mantine/core/InputDescription";const bKe={},_Ke=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Os(t)} - ${xe(2)})`}}),AF=Pe((e,t)=>{const n=be("InputError",bKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,__staticSelector:c,__inheritStyles:d=!0,variant:f,...h}=n,p=ft({name:["InputWrapper",c],props:n,classes:Qc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:l,varsResolver:_Ke}),m=aS(),g=d&&(m==null?void 0:m.getStyles)||p;return b.jsx(ge,{component:"p",ref:t,variant:f,size:u,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});AF.classes=Qc;AF.displayName="@mantine/core/InputError";const nue={labelElement:"label"},wKe=(e,{size:t})=>({label:{"--input-label-size":Os(t),"--input-asterisk-color":void 0}}),IF=Pe((e,t)=>{const n=be("InputLabel",nue,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,labelElement:u,size:c,required:d,htmlFor:f,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=be("InputLabel",nue,n),_=ft({name:["InputWrapper",m],props:n,classes:Qc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:l,varsResolver:wKe}),w=aS(),x=(w==null?void 0:w.getStyles)||_;return b.jsxs(ge,{...x("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:u,variant:g,size:c,ref:t,htmlFor:u==="label"?f:void 0,mod:[{required:d},y],onMouseDown:S=>{h==null||h(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,d&&b.jsx("span",{...x("required"),"aria-hidden":!0,children:" *"})]})});IF.classes=Qc;IF.displayName="@mantine/core/InputLabel";const rue={},oK=Pe((e,t)=>{const n=be("InputPlaceholder",rue,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,variant:c,error:d,mod:f,...h}=be("InputPlaceholder",rue,n),p=ft({name:["InputPlaceholder",u],props:n,classes:Qc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return b.jsx(ge,{...p("placeholder"),mod:[{error:!!d},f],component:"span",variant:c,ref:t,...h})});oK.classes=Qc;oK.displayName="@mantine/core/InputPlaceholder";function xKe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(l=>l==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const EKe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},SKe=(e,{size:t})=>({label:{"--input-label-size":Os(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Os(t)} - ${xe(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Os(t)} - ${xe(2)})`}}),aK=Pe((e,t)=>{const n=be("InputWrapper",EKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,variant:c,__staticSelector:d,inputContainer:f,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:_,labelElement:w,children:x,withAsterisk:S,id:E,required:T,__stylesApiProps:I,mod:k,...P}=n,L=ft({name:["InputWrapper",d],props:I||n,classes:Qc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:SKe}),R={size:u,variant:c,__staticSelector:d},$=Do(E),D=typeof S=="boolean"?S:T,O=(_==null?void 0:_.id)||`${$}-error`,F=(v==null?void 0:v.id)||`${$}-description`,U=$,V=!!m&&typeof m!="boolean",M=!!g,z=`${V?O:""} ${M?F:""}`,q=z.trim().length>0?z.trim():void 0,j=(y==null?void 0:y.id)||`${$}-label`,H=p&&b.jsx(IF,{labelElement:w,id:j,htmlFor:U,required:D,...R,...y,children:p},"label"),G=M&&b.jsx(CF,{...v,...R,size:(v==null?void 0:v.size)||R.size,id:(v==null?void 0:v.id)||F,children:g},"description"),J=b.jsx(A.Fragment,{children:f(x)},"input"),re=V&&A.createElement(AF,{..._,...R,size:(_==null?void 0:_.size)||R.size,key:"error",id:(_==null?void 0:_.id)||O},m),ie=h.map(te=>{switch(te){case"label":return H;case"input":return J;case"description":return G;case"error":return re;default:return null}});return b.jsx(yKe,{value:{getStyles:L,describedBy:q,inputId:U,labelId:j,...xKe(h,{hasDescription:M,hasError:V})},children:b.jsx(ge,{ref:t,variant:c,size:u,mod:[{error:!!m},k],...L("root"),...P,children:ie})})});aK.classes=Qc;aK.displayName="@mantine/core/InputWrapper";const TKe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},CKe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Ht(t.size,"input-height"),"--input-fz":Os(t.size),"--input-radius":t.radius===void 0?void 0:br(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?xe(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?xe(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Ht(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Pr=bs((e,t)=>{const n=be("Input",TKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:l,__staticSelector:u,__stylesApiProps:c,size:d,wrapperProps:f,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:_,rightSectionWidth:w,rightSectionPointerEvents:x,leftSectionPointerEvents:S,variant:E,vars:T,pointer:I,multiline:k,radius:P,id:L,withAria:R,withErrorStyles:$,mod:D,inputSize:O,...F}=n,{styleProps:U,rest:V}=Hb(F),M=aS(),z={offsetBottom:M==null?void 0:M.offsetBottom,offsetTop:M==null?void 0:M.offsetTop},q=ft({name:["Input",u],props:c||n,classes:Qc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:T,varsResolver:CKe}),j=R?{required:l,disabled:p,"aria-invalid":!!h,"aria-describedby":M==null?void 0:M.describedBy,id:(M==null?void 0:M.inputId)||L}:{};return b.jsxs(ge,{...q("wrapper"),...U,...f,mod:[{error:!!h&&$,pointer:I,disabled:p,multiline:k,"data-with-right-section":!!v,"data-with-left-section":!!m},D],variant:E,size:d,children:[m&&b.jsx("div",{...g,"data-position":"left",...q("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),b.jsx(ge,{component:"input",...V,...j,ref:t,required:l,mod:{disabled:p,error:!!h&&$},variant:E,__size:O,...q("input")}),v&&b.jsx("div",{..._,"data-position":"right",...q("section",{className:_==null?void 0:_.className,style:_==null?void 0:_.style}),children:v})]})});Pr.classes=Qc;Pr.Wrapper=aK;Pr.Label=IF;Pr.Error=AF;Pr.Description=CF;Pr.Placeholder=oK;Pr.displayName="@mantine/core/Input";function lK(e,t,n){const r=be(e,t,n),{label:i,description:s,error:o,required:a,classNames:l,styles:u,className:c,unstyled:d,__staticSelector:f,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:_,style:w,inputContainer:x,inputWrapperOrder:S,withAsterisk:E,variant:T,vars:I,mod:k,...P}=r,{styleProps:L,rest:R}=Hb(P),$={label:i,description:s,error:o,required:a,classNames:l,className:c,__staticSelector:f,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:d,styles:u,size:_,style:w,inputContainer:x,inputWrapperOrder:S,withAsterisk:E,variant:T,id:v,mod:k,...y};return{...R,classNames:l,styles:u,unstyled:d,wrapperProps:{...$,...L},inputProps:{required:a,classNames:l,styles:u,unstyled:d,size:_,__staticSelector:f,__stylesApiProps:h||r,error:o,variant:T,id:v}}}const AKe={__staticSelector:"InputBase",withAria:!0},ru=bs((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=lK("InputBase",AKe,e);return b.jsx(Pr.Wrapper,{...r,children:b.jsx(Pr,{...n,...i,ref:t})})});ru.classes={...Pr.classes,...Pr.Wrapper.classes};ru.displayName="@mantine/core/InputBase";const IKe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var uEe={root:"m_8bffd616"};const kKe={},Et=bs((e,t)=>{const n=be("Flex",kKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,gap:u,rowGap:c,columnGap:d,align:f,justify:h,wrap:p,direction:m,...g}=n,y=ft({name:"Flex",classes:uEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l}),v=ds(),_=_F(),w=pxe({styleProps:{gap:u,rowGap:c,columnGap:d,align:f,justify:h,wrap:p,direction:m},theme:v,data:IKe});return b.jsxs(b.Fragment,{children:[w.hasResponsiveStyles&&b.jsx(Dk,{selector:`.${_}`,styles:w.styles,media:w.media}),b.jsx(ge,{ref:t,...y("root",{className:_,style:iS(w.inlineStyles)}),...g})]})});Et.classes=uEe;Et.displayName="@mantine/core/Flex";function RKe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function PKe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=A.useRef(),[s,o]=A.useState(!1),[a,l]=A.useState(typeof r=="boolean"?r:!1),u=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),u(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},d=A.useRef(),f=A.useRef();return A.useEffect(()=>{if(u(),e)return d.current=new ResizeObserver(c),d.current.observe(e),t&&(f.current=new ResizeObserver(c),f.current.observe(t)),()=>{var h,p;(h=d.current)==null||h.disconnect(),(p=f.current)==null||p.disconnect()}},[t,e]),A.useEffect(()=>{if(t){const h=p=>{RKe(p.target,t)&&(c(),l(!1))};return t.addEventListener("transitionend",h),()=>{t.removeEventListener("transitionend",h)}}},[t]),Iqe(()=>{lxe()!=="test"&&o(!0)},20,{autoInvoke:!0}),Rqe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var cEe={root:"m_96b553a6"};const NKe={},OKe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),uK=Pe((e,t)=>{const n=be("FloatingIndicator",NKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,target:u,parent:c,transitionDuration:d,mod:f,displayAfterTransitionEnd:h,...p}=n,m=ft({name:"FloatingIndicator",classes:cEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:OKe}),g=A.useRef(null),{initialized:y,hidden:v}=PKe({target:u,parent:c,ref:g,displayAfterTransitionEnd:h}),_=Ki(t,g);return!u||!c?null:b.jsx(ge,{ref:_,mod:[{initialized:y,hidden:v},f],...m("root"),...p})});uK.displayName="@mantine/core/FloatingIndicator";uK.classes=cEe;const[DKe,cK]=js("Accordion component was not found in the tree");function ZA({style:e,size:t=16,...n}){return b.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:xe(t),height:xe(t),display:"block"},...n,children:b.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}ZA.displayName="@mantine/core/AccordionChevron";const[MKe,dEe]=js("Accordion.Item component was not found in the tree");var Fk={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const $Ke={},dK=Pe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:l,onClick:u,onKeyDown:c,children:d,disabled:f,mod:h,...p}=be("AccordionControl",$Ke,e),{value:m}=dEe(),g=cK(),y=g.isItemActive(m),v=typeof g.order=="number",_=`h${g.order}`,w=b.jsxs(os,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:f},h],ref:t,onClick:x=>{u==null||u(x),g.onChange(m)},type:"button",disabled:f,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:TY({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[b.jsx(ge,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),b.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:d}),l&&b.jsx(ge,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:l})]});return v?b.jsx(_,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});dK.displayName="@mantine/core/AccordionControl";dK.classes=Fk;const LKe={},fK=Pe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:l,...u}=be("AccordionItem",LKe,e),c=cK();return b.jsx(MKe,{value:{value:a},children:b.jsx(ge,{ref:t,mod:[{active:c.isItemActive(a)},l],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...u})})});fK.displayName="@mantine/core/AccordionItem";fK.classes=Fk;const FKe={},hK=Pe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...l}=be("AccordionPanel",FKe,e),{value:u}=dEe(),c=cK();return b.jsx(qb,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...l,in:c.isItemActive(u),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(u),"aria-labelledby":c.getControlId(u),children:b.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});hK.displayName="@mantine/core/AccordionPanel";hK.classes=Fk;const jKe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:b.jsx(ZA,{})},BKe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:xe(n),"--accordion-radius":r===void 0?void 0:br(r)}});function na(e){const t=be("Accordion",jKe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:l,multiple:u,value:c,defaultValue:d,onChange:f,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:_,chevron:w,variant:x,radius:S,...E}=t,T=Do(h),[I,k]=Pi({value:c,defaultValue:d,finalValue:u?[]:null,onChange:f}),P=$=>Array.isArray(I)?I.includes($):$===I,L=$=>{const D=Array.isArray(I)?I.includes($)?I.filter(O=>O!==$):[...I,$]:$===I?null:$;k(D)},R=ft({name:"Accordion",classes:Fk,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:BKe});return b.jsx(DKe,{value:{isItemActive:P,onChange:L,getControlId:zM(`${T}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:zM(`${T}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:_,chevron:w,loop:p,getStyles:R,variant:x,unstyled:o},children:b.jsx(ge,{...R("root"),id:T,...E,variant:x,"data-accordion":!0,children:l})})}const zKe=e=>e;na.extend=zKe;na.withProps=GWe(na);na.classes=Fk;na.displayName="@mantine/core/Accordion";na.Item=fK;na.Panel=hK;na.Control=dK;na.Chevron=ZA;var fEe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const UKe={},VKe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:br(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},lS=Pe((e,t)=>{const n=be("Alert",UKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,radius:u,color:c,title:d,children:f,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:_,...w}=n,x=ft({name:"Alert",classes:fEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:VKe}),S=Do(h),E=d&&`${S}-title`||void 0,T=`${S}-body`;return b.jsx(ge,{id:S,...x("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":T,"aria-labelledby":E,children:b.jsxs("div",{...x("wrapper"),children:[p&&b.jsx("div",{...x("icon"),children:p}),b.jsxs("div",{...x("body"),children:[d&&b.jsx("div",{...x("title"),"data-with-close-button":m||void 0,children:b.jsx("span",{id:E,...x("label"),children:d})}),f&&b.jsx("div",{id:T,...x("message"),"data-variant":v,children:f})]}),m&&b.jsx(Vy,{...x("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});lS.classes=fEe;lS.displayName="@mantine/core/Alert";var hEe={root:"m_b6d8b162"};function HKe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const qKe={inherit:!1},WKe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":Os(i),"--text-lh":Zwe(i),"--text-gradient":t==="gradient"?wU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Rr(s,e):void 0}}),Xe=bs((e,t)=>{const n=be("Text",qKe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:l,__staticSelector:u,vars:c,className:d,style:f,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,..._}=n,w=ft({name:["Text",u],props:n,classes:hEe,className:d,style:f,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:WKe});return b.jsx(ge,{...w("root",{focusable:!0}),ref:t,component:l?"span":"p",variant:g,mod:[{"data-truncate":HKe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,..._})});Xe.classes=hEe;Xe.displayName="@mantine/core/Text";var pEe={root:"m_849cf0da"};const GKe={underline:"hover"},Hy=bs((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=be("Anchor",GKe,e);return b.jsx(Xe,{component:"a",ref:t,className:dt({[pEe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Hy.classes=pEe;Hy.displayName="@mantine/core/Anchor";const[YKe,uS]=js("AppShell was not found in tree");var qy={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const KKe={},pK=Pe((e,t)=>{const n=be("AppShellAside",KKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=uS();return h.disabled?null:b.jsx(ge,{component:"aside",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});pK.classes=qy;pK.displayName="@mantine/core/AppShellAside";const XKe={},mK=Pe((e,t)=>{var p;const n=be("AppShellFooter",XKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=uS();return h.disabled?null:b.jsx(ge,{component:"footer",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("footer",{className:dt({[pF.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});mK.classes=qy;mK.displayName="@mantine/core/AppShellFooter";const QKe={},gK=Pe((e,t)=>{var p;const n=be("AppShellHeader",QKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=uS();return h.disabled?null:b.jsx(ge,{component:"header",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("header",{className:dt({[pF.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});gK.classes=qy;gK.displayName="@mantine/core/AppShellHeader";const JKe={},yK=Pe((e,t)=>{const n=be("AppShellMain",JKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=uS();return b.jsx(ge,{component:"main",ref:t,...u.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...l})});yK.classes=qy;yK.displayName="@mantine/core/AppShellMain";function jk(e){return typeof e=="object"?e.base:e}function Bk(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function zk(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function ZKe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var l,u,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((l=r==null?void 0:r.collapsed)!=null&&l.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),Bk(s)){const d=xe(jk(s));e["--app-shell-aside-width"]=d,e["--app-shell-aside-offset"]=d}if(zk(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=xe(s.base),e["--app-shell-aside-offset"]=xe(s.base)),ki(s).forEach(d=>{d!=="base"&&(t[d]=t[d]||{},t[d]["--app-shell-aside-width"]=xe(s[d]),t[d]["--app-shell-aside-offset"]=xe(s[d]))})),(u=r==null?void 0:r.collapsed)!=null&&u.desktop){const d=r.breakpoint;t[d]=t[d]||{},t[d]["--app-shell-aside-transform"]=o,t[d]["--app-shell-aside-transform-rtl"]=a,t[d]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const d=AY(r.breakpoint,i)-.1;n[d]=n[d]||{},n[d]["--app-shell-aside-width"]="100%",n[d]["--app-shell-aside-offset"]="0px",n[d]["--app-shell-aside-transform"]=o,n[d]["--app-shell-aside-transform-rtl"]=a}}function eXe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(Bk(r)){const o=xe(jk(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}zk(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=xe(r.base),s&&(e["--app-shell-footer-offset"]=xe(r.base))),ki(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=xe(r[o]),s&&(t[o]["--app-shell-footer-offset"]=xe(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function tXe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(Bk(r)){const o=xe(jk(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}zk(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=xe(r.base),s&&(e["--app-shell-header-offset"]=xe(r.base))),ki(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=xe(r[o]),s&&(t[o]["--app-shell-header-offset"]=xe(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function nXe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var l,u,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((l=r==null?void 0:r.collapsed)!=null&&l.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),Bk(s)){const d=xe(jk(s));e["--app-shell-navbar-width"]=d,e["--app-shell-navbar-offset"]=d}if(zk(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=xe(s.base),e["--app-shell-navbar-offset"]=xe(s.base)),ki(s).forEach(d=>{d!=="base"&&(t[d]=t[d]||{},t[d]["--app-shell-navbar-width"]=xe(s[d]),t[d]["--app-shell-navbar-offset"]=xe(s[d]))})),(u=r==null?void 0:r.collapsed)!=null&&u.desktop){const d=r.breakpoint;t[d]=t[d]||{},t[d]["--app-shell-navbar-transform"]=o,t[d]["--app-shell-navbar-transform-rtl"]=a,t[d]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const d=AY(r.breakpoint,i)-.1;n[d]=n[d]||{},n[d]["--app-shell-navbar-width"]="100%",n[d]["--app-shell-navbar-offset"]="0px",n[d]["--app-shell-navbar-transform"]=o,n[d]["--app-shell-navbar-transform-rtl"]=a}}function Z8(e){return Number(e)===0?"0px":Du(e)}function rXe({padding:e,baseStyles:t,minMediaStyles:n}){Bk(e)&&(t["--app-shell-padding"]=Z8(jk(e))),zk(e)&&(e.base&&(t["--app-shell-padding"]=Z8(e.base)),ki(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=Z8(e[r]))}))}function iXe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},l={};nXe({baseStyles:l,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),ZKe({baseStyles:l,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),tXe({baseStyles:l,minMediaStyles:o,header:t}),eXe({baseStyles:l,minMediaStyles:o,footer:n}),rXe({baseStyles:l,minMediaStyles:o,padding:i});const u=VM(ki(o),s).map(f=>({query:`(min-width: ${BM(f.px)})`,styles:o[f.value]})),c=VM(ki(a),s).map(f=>({query:`(max-width: ${BM(f.px)})`,styles:a[f.value]})),d=[...u,...c];return{baseStyles:l,media:d}}function sXe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=ds(),o=zy(),{media:a,baseStyles:l}=iXe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return b.jsx(Dk,{media:a,styles:l,selector:o.cssVariablesSelector})}const oXe={},vK=Pe((e,t)=>{const n=be("AppShellNavbar",oXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=uS();return h.disabled?null:b.jsx(ge,{component:"nav",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});vK.classes=qy;vK.displayName="@mantine/core/AppShellNavbar";const aXe={},bK=bs((e,t)=>{const n=be("AppShellSection",aXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:l,mod:u,...c}=n,d=uS();return b.jsx(ge,{ref:t,mod:[{grow:l},u],...d.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});bK.classes=qy;bK.displayName="@mantine/core/AppShellSection";function lXe({transitionDuration:e,disabled:t}){const[n,r]=A.useState(!0),i=A.useRef(),s=A.useRef();return sxe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),Vb(()=>{A.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const uXe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Kc("app")},cXe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Ar=Pe((e,t)=>{const n=be("AppShell",uXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,navbar:u,withBorder:c,padding:d,transitionDuration:f,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:_,offsetScrollbars:w,mod:x,...S}=n,E=ft({name:"AppShell",classes:qy,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:cXe}),T=lXe({disabled:y,transitionDuration:f});return b.jsxs(YKe,{value:{getStyles:E,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[b.jsx(sXe,{navbar:u,header:p,aside:v,footer:_,padding:d}),b.jsx(ge,{ref:t,...E("root"),mod:[{resizing:T,layout:g,disabled:y},x],...S})]})});Ar.classes=qy;Ar.displayName="@mantine/core/AppShell";Ar.Navbar=vK;Ar.Header=gK;Ar.Main=yK;Ar.Aside=pK;Ar.Footer=mK;Ar.Section=bK;function mEe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>mEe(t))}:e}function _K(e){return e?e.map(t=>mEe(t)):[]}function kF(e){return e.reduce((t,n)=>"group"in n?{...t,...kF(n.items)}:(t[n.value]=n,t),{})}var Wl={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const dXe={error:null},fXe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Ht(t,"combobox-chevron-size")}}),wK=Pe((e,t)=>{const n=be("ComboboxChevron",dXe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:l,unstyled:u,vars:c,mod:d,...f}=n,h=ft({name:"ComboboxChevron",classes:Wl,props:n,style:s,className:o,classNames:a,styles:l,unstyled:u,vars:c,varsResolver:fXe,rootSelector:"chevron"});return b.jsx(ge,{component:"svg",...f,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},d],ref:t,children:b.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});wK.classes=Wl;wK.displayName="@mantine/core/ComboboxChevron";const[hXe,Jc]=js("Combobox component was not found in tree"),gEe=A.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>b.jsx(Vy,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));gEe.displayName="@mantine/core/ComboboxClearButton";const pXe={},xK=Pe((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=be("ComboboxDropdown",pXe,e),l=Jc();return b.jsx(Tn.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...l.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});xK.classes=Wl;xK.displayName="@mantine/core/ComboboxDropdown";const mXe={refProp:"ref"},yEe=Pe((e,t)=>{const{children:n,refProp:r}=be("ComboboxDropdownTarget",mXe,e);if(Jc(),!By(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return b.jsx(Tn.Target,{ref:t,refProp:r,children:n})});yEe.displayName="@mantine/core/ComboboxDropdownTarget";const gXe={},EK=Pe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=be("ComboboxEmpty",gXe,e),l=Jc();return b.jsx(ge,{ref:t,...l.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});EK.classes=Wl;EK.displayName="@mantine/core/ComboboxEmpty";function SK({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Jc(),[a,l]=A.useState(null),u=d=>{if(e==null||e(d),!o.readOnly&&t){if(d.nativeEvent.isComposing)return;if(d.nativeEvent.code==="ArrowDown"&&(d.preventDefault(),o.store.dropdownOpened?l(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()))),d.nativeEvent.code==="ArrowUp"&&(d.preventDefault(),o.store.dropdownOpened?l(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()))),d.nativeEvent.code==="Enter"||d.nativeEvent.code==="NumpadEnter"){if(d.nativeEvent.keyCode===229)return;const f=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&f!==-1?(d.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(d.preventDefault(),o.store.openDropdown("keyboard"))}d.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),d.nativeEvent.code==="Space"&&i==="button"&&(d.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:u}}const yXe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},vEe=Pe((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...u}=be("ComboboxEventsTarget",yXe,e);if(!By(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Jc(),d=SK({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:l});return A.cloneElement(n,{...d,...u,[r]:Ki(t,c.store.targetRef,n==null?void 0:n.ref)})});vEe.displayName="@mantine/core/ComboboxEventsTarget";const vXe={},TK=Pe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=be("ComboboxFooter",vXe,e),l=Jc();return b.jsx(ge,{ref:t,...l.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:u=>{u.preventDefault()}})});TK.classes=Wl;TK.displayName="@mantine/core/ComboboxFooter";const bXe={},CK=Pe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:l,...u}=be("ComboboxGroup",bXe,e),c=Jc();return b.jsxs(ge,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...u,children:[l&&b.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:l}),a]})});CK.classes=Wl;CK.displayName="@mantine/core/ComboboxGroup";const _Xe={},AK=Pe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=be("ComboboxHeader",_Xe,e),l=Jc();return b.jsx(ge,{ref:t,...l.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:u=>{u.preventDefault()}})});AK.classes=Wl;AK.displayName="@mantine/core/ComboboxHeader";function bEe({value:e,valuesDivider:t=",",...n}){return b.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}bEe.displayName="@mantine/core/ComboboxHiddenInput";const wXe={},IK=Pe((e,t)=>{const n=be("ComboboxOption",wXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:l,id:u,active:c,onMouseDown:d,onMouseOver:f,disabled:h,selected:p,mod:m,...g}=n,y=Jc(),v=A.useId(),_=u||v;return b.jsx(ge,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:_,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var x;h?w.preventDefault():((x=y.onOptionSubmit)==null||x.call(y,n.value,n),l==null||l(w))},onMouseDown:w=>{w.preventDefault(),d==null||d(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),f==null||f(w)}})});IK.classes=Wl;IK.displayName="@mantine/core/ComboboxOption";const xXe={},kK=Pe((e,t)=>{const n=be("ComboboxOptions",xXe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:l,labelledBy:u,...c}=n,d=Jc(),f=Do(a);return A.useEffect(()=>{d.store.setListId(f)},[f]),b.jsx(ge,{ref:t,...d.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:f,role:"listbox","aria-labelledby":u,onMouseDown:h=>{h.preventDefault(),l==null||l(h)}})});kK.classes=Wl;kK.displayName="@mantine/core/ComboboxOptions";const EXe={withAriaAttributes:!0,withKeyboardNavigation:!0},RK=Pe((e,t)=>{const n=be("ComboboxSearch",EXe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:l,withKeyboardNavigation:u,size:c,...d}=n,f=Jc(),h=f.getStyles("search"),p=SK({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:u,withExpandedAttribute:!1,onKeyDown:l,autoComplete:"off"});return b.jsx(Pr,{ref:Ki(t,f.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||f.size,...p,...d,__staticSelector:"Combobox"})});RK.classes=Wl;RK.displayName="@mantine/core/ComboboxSearch";const SXe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},_Ee=Pe((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...u}=be("ComboboxTarget",SXe,e);if(!By(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Jc(),d=SK({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:l}),f=A.cloneElement(n,{...d,...u});return b.jsx(Tn.Target,{ref:Ki(t,c.store.targetRef),children:f})});_Ee.displayName="@mantine/core/ComboboxTarget";function TXe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function CXe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function AXe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function Uk({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,l]=Pi({value:t,defaultValue:e,finalValue:!1,onChange:n}),u=A.useRef(null),c=A.useRef(-1),d=A.useRef(null),f=A.useRef(null),h=A.useRef(-1),p=A.useRef(-1),m=A.useRef(-1),g=A.useCallback((O="unknown")=>{a||(l(!0),i==null||i(O))},[l,i,a]),y=A.useCallback((O="unknown")=>{a&&(l(!1),r==null||r(O))},[l,r,a]),v=A.useCallback((O="unknown")=>{a?y(O):g(O)},[y,g,a]),_=A.useCallback(()=>{const O=document.querySelector(`#${u.current} [data-combobox-selected]`);O==null||O.removeAttribute("data-combobox-selected"),O==null||O.removeAttribute("aria-selected")},[]),w=A.useCallback(O=>{const F=document.getElementById(u.current),U=F==null?void 0:F.querySelectorAll("[data-combobox-option]");if(!U)return null;const V=O>=U.length?0:O<0?U.length-1:O;return c.current=V,U!=null&&U[V]&&!U[V].hasAttribute("data-combobox-disabled")?(_(),U[V].setAttribute("data-combobox-selected","true"),U[V].setAttribute("aria-selected","true"),U[V].scrollIntoView({block:"nearest",behavior:o}),U[V].id):null},[o,_]),x=A.useCallback(()=>{const O=document.querySelector(`#${u.current} [data-combobox-active]`);if(O){const F=document.querySelectorAll(`#${u.current} [data-combobox-option]`),U=Array.from(F).findIndex(V=>V===O);return w(U)}return w(0)},[w]),S=A.useCallback(()=>w(CXe(c.current,document.querySelectorAll(`#${u.current} [data-combobox-option]`),s)),[w,s]),E=A.useCallback(()=>w(TXe(c.current,document.querySelectorAll(`#${u.current} [data-combobox-option]`),s)),[w,s]),T=A.useCallback(()=>w(AXe(document.querySelectorAll(`#${u.current} [data-combobox-option]`))),[w]),I=A.useCallback((O="selected",F)=>{m.current=window.setTimeout(()=>{var M;const U=document.querySelectorAll(`#${u.current} [data-combobox-option]`),V=Array.from(U).findIndex(z=>z.hasAttribute(`data-combobox-${O}`));c.current=V,F!=null&&F.scrollIntoView&&((M=U[V])==null||M.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=A.useCallback(()=>{c.current=-1,_()},[_]),P=A.useCallback(()=>{const O=document.querySelectorAll(`#${u.current} [data-combobox-option]`),F=O==null?void 0:O[c.current];F==null||F.click()},[]),L=A.useCallback(O=>{u.current=O},[]),R=A.useCallback(()=>{h.current=window.setTimeout(()=>d.current.focus(),0)},[]),$=A.useCallback(()=>{p.current=window.setTimeout(()=>f.current.focus(),0)},[]),D=A.useCallback(()=>c.current,[]);return A.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:D,selectOption:w,selectFirstOption:T,selectActiveOption:x,selectNextOption:S,selectPreviousOption:E,resetSelectedOption:k,updateSelectedOptionIndex:I,listId:u.current,setListId:L,clickSelectedOption:P,searchRef:d,focusSearchInput:R,targetRef:f,focusTarget:$}}const IXe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},kXe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":Os(t),"--combobox-option-padding":Ht(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:xe(n),"--combobox-option-fz":Os(t),"--combobox-option-padding":Ht(t,"combobox-option-padding")}});function Kt(e){const t=be("Combobox",IXe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:l,onClose:u,size:c,dropdownPadding:d,resetSelectionOnOptionHover:f,__staticSelector:h,readOnly:p,...m}=t,g=Uk(),y=o||g,v=ft({name:h||"Combobox",classes:Wl,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:kXe}),_=()=>{u==null||u(),y.closeDropdown()};return b.jsx(hXe,{value:{getStyles:v,store:y,onOptionSubmit:l,size:c,resetSelectionOnOptionHover:f,readOnly:p},children:b.jsx(Tn,{opened:y.dropdownOpened,...m,onClose:_,withRoles:!1,unstyled:i,children:s})})}const RXe=e=>e;Kt.extend=RXe;Kt.classes=Wl;Kt.displayName="@mantine/core/Combobox";Kt.Target=_Ee;Kt.Dropdown=xK;Kt.Options=kK;Kt.Option=IK;Kt.Search=RK;Kt.Empty=EK;Kt.Chevron=wK;Kt.Footer=TK;Kt.Header=AK;Kt.EventsTarget=vEe;Kt.DropdownTarget=yEe;Kt.Group=CK;Kt.ClearButton=gEe;Kt.HiddenInput=bEe;var wEe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const xEe=wEe,RF=A.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:l,id:u,disabled:c,error:d,size:f,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:_,...w},x)=>{const S=ft({name:e,props:t,className:n,style:y,classes:wEe,classNames:r,styles:i,unstyled:s});return b.jsx(ge,{...S("root"),ref:x,__vars:{"--label-fz":Os(f),"--label-lh":Ht(f,"label-lh")},mod:[{"label-position":h},_],variant:g,size:f,...w,children:b.jsxs(ge,{component:p,htmlFor:p==="label"?u:void 0,...S("body"),children:[o,b.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&b.jsx(ge,{component:m,htmlFor:m==="label"?u:void 0,...S("label"),"data-disabled":c||void 0,children:a}),l&&b.jsx(Pr.Description,{size:f,__inheritStyles:!1,...S("description"),children:l}),d&&typeof d!="boolean"&&b.jsx(Pr.Error,{size:f,__inheritStyles:!1,...S("error"),children:d})]})]})})});RF.displayName="@mantine/core/InlineInput";const EEe=A.createContext(null),PXe=EEe.Provider,SEe=()=>A.useContext(EEe),[NXe,OXe]=Ub();var TEe={card:"m_26775b0a"};const DXe={withBorder:!0},MXe=(e,{radius:t})=>({card:{"--card-radius":br(t)}}),PK=Pe((e,t)=>{const n=be("CheckboxCard",DXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,checked:u,mod:c,withBorder:d,value:f,onClick:h,...p}=n,m=ft({name:"CheckboxCard",classes:TEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:MXe,rootSelector:"card"}),g=SEe(),y=typeof u=="boolean"?u:(g==null?void 0:g.value.includes(f||""))||!1;return b.jsx(NXe,{value:{checked:y},children:b.jsx(os,{ref:t,mod:[{"with-border":d,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(f||"")}})})});PK.displayName="@mantine/core/CheckboxCard";PK.classes=TEe;function NK({children:e,role:t}){const n=aS();return n?b.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):b.jsx(b.Fragment,{children:e})}const $Xe={},OK=Pe((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:l,...u}=be("CheckboxGroup",$Xe,e),[c,d]=Pi({value:n,defaultValue:r,finalValue:[],onChange:i}),f=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!l&&d(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return b.jsx(PXe,{value:{value:c,onChange:f,size:s},children:b.jsx(Pr.Wrapper,{size:s,ref:t,...o,...u,labelElement:"div",__staticSelector:"CheckboxGroup",children:b.jsx(NK,{role:"group",children:a})})})});OK.classes=Pr.Wrapper.classes;OK.displayName="@mantine/core/CheckboxGroup";function CEe({size:e,style:t,...n}){const r=e!==void 0?{width:xe(e),height:xe(e),...t}:t;return b.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:b.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function AEe({indeterminate:e,...t}){return e?b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:b.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):b.jsx(CEe,{...t})}var IEe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const LXe={icon:AEe},FXe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=yf({color:n||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":Ht(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:br(t),"--checkbox-color":s==="outline"?l:Rr(n,e),"--checkbox-icon-color":i?Rr(i,e):Uy(o,e)?np({color:n,theme:e,autoContrast:o}):void 0}}},DK=Pe((e,t)=>{const n=be("CheckboxIndicator",LXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,icon:u,indeterminate:c,radius:d,color:f,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,..._}=n,w=u,x=ft({name:"CheckboxIndicator",classes:IEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:FXe,rootSelector:"indicator"}),S=OXe(),E=typeof m=="boolean"||typeof c=="boolean"?m||c:(S==null?void 0:S.checked)||!1;return b.jsx(ge,{ref:t,...x("indicator",{variant:y}),variant:y,mod:[{checked:E,disabled:v},g],..._,children:b.jsx(w,{indeterminate:c,...x("icon")})})});DK.displayName="@mantine/core/CheckboxIndicator";DK.classes=IEe;var kEe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const jXe={labelPosition:"right",icon:AEe},BXe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=yf({color:n||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":Ht(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:br(t),"--checkbox-color":s==="outline"?l:Rr(n,e),"--checkbox-icon-color":i?Rr(i,e):Uy(o,e)?np({color:n,theme:e,autoContrast:o}):void 0}}},sf=Pe((e,t)=>{const n=be("Checkbox",jXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,label:c,id:d,size:f,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:_,disabled:w,variant:x,indeterminate:S,icon:E,rootRef:T,iconColor:I,onChange:k,autoContrast:P,mod:L,...R}=n,$=SEe(),D=f||($==null?void 0:$.size),O=E,F=ft({name:"Checkbox",props:n,classes:kEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:BXe}),{styleProps:U,rest:V}=Hb(R),M=Do(d),z=$?{checked:$.value.includes(V.value),onChange:q=>{$.onChange(q),k==null||k(q)}}:{};return b.jsx(RF,{...F("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:M,size:D,labelPosition:y,label:c,description:v,error:_,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||g||void 0,variant:x,ref:T,mod:L,...U,...p,children:b.jsxs(ge,{...F("inner"),mod:{"data-label-position":y},children:[b.jsx(ge,{component:"input",id:M,ref:t,checked:g,disabled:w,mod:{error:!!_,indeterminate:S},...F("input",{focusable:!0,variant:x}),onChange:k,...V,...z,type:"checkbox"}),b.jsx(O,{indeterminate:S,...F("icon")})]})})});sf.classes={...kEe,...xEe};sf.displayName="@mantine/core/Checkbox";sf.Group=OK;sf.Indicator=DK;sf.Card=PK;function qx(e){return"group"in e}function REe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;qx(o)&&i.push({group:o.group,items:REe({options:o.items,search:t,limit:n-i.length})}),qx(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function zXe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function PEe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(qx(n))PEe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function UXe(e,t){return Array.isArray(e)?e.includes(t):e===t}function NEe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!qx(e)){const a=UXe(n,e.value),l=t&&a&&b.jsx(CEe,{className:Wl.optionsDropdownCheckIcon}),u=b.jsxs(b.Fragment,{children:[r==="left"&&l,b.jsx("span",{children:e.label}),r==="right"&&l]});return b.jsx(Kt.Option,{value:e.value,disabled:e.disabled,className:dt({[Wl.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):u})}const o=e.items.map(a=>b.jsx(NEe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return b.jsx(Kt.Group,{label:e.group,children:o})}function MK({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:l=!0,withCheckIcon:u=!1,value:c,checkIconPosition:d,nothingFoundMessage:f,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){PEe(e);const _=typeof i=="string"?(r||REe)({options:e,search:l?i:"",limit:s??1/0}):e,w=zXe(_),x=_.map(S=>b.jsx(NEe,{data:S,withCheckIcon:u,value:c,checkIconPosition:d,unstyled:h,renderOption:m},qx(S)?S.group:S.value));return b.jsx(Kt.Dropdown,{hidden:t||n&&w,children:b.jsxs(Kt.Options,{labelledBy:p,"aria-label":y,children:[a?b.jsx(Wb.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:x}):x,w&&f&&b.jsx(Kt.Empty,{children:f})]})})}const VXe={},$K=Pe((e,t)=>{const n=be("Autocomplete",VXe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:l,onDropdownClose:u,onDropdownOpen:c,onFocus:d,onBlur:f,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:_,comboboxProps:w,readOnly:x,disabled:S,filter:E,limit:T,withScrollArea:I,maxDropdownHeight:k,size:P,id:L,renderOption:R,autoComplete:$,scrollAreaProps:D,...O}=n,F=Do(L),U=_K(m),V=kF(U),[M,z]=Pi({value:g,defaultValue:y,finalValue:"",onChange:p}),q=Uk({opened:a,defaultOpened:l,onDropdownOpen:c,onDropdownClose:()=>{u==null||u(),q.resetSelectedOption()}}),{resolvedClassNames:j,resolvedStyles:H}=rp({props:n,styles:i,classNames:r});return A.useEffect(()=>{v&&q.selectFirstOption()},[v,M]),b.jsxs(Kt,{store:q,__staticSelector:"Autocomplete",classNames:j,styles:H,unstyled:s,readOnly:x,onOptionSubmit:G=>{_==null||_(G),z(V[G].label),q.closeDropdown()},size:P,...w,children:[b.jsx(Kt.Target,{autoComplete:$,children:b.jsx(ru,{ref:t,...O,size:P,__staticSelector:"Autocomplete",disabled:S,readOnly:x,value:M,onChange:G=>{z(G.currentTarget.value),q.openDropdown(),v&&q.selectFirstOption()},onFocus:G=>{q.openDropdown(),d==null||d(G)},onBlur:G=>{q.closeDropdown(),f==null||f(G)},onClick:G=>{q.openDropdown(),h==null||h(G)},classNames:j,styles:H,unstyled:s,id:F})}),b.jsx(MK,{data:U,hidden:x||S,filter:E,search:M,limit:T,hiddenWhenEmpty:!0,withScrollArea:I,maxDropdownHeight:k,unstyled:s,labelId:O.label?`${F}-label`:void 0,"aria-label":O.label?void 0:O["aria-label"],renderOption:R,scrollAreaProps:D})]})});$K.classes={...ru.classes,...Kt.classes};$K.displayName="@mantine/core/Autocomplete";var OEe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const HXe={},qXe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":Ht(s,"badge-height"),"--badge-padding-x":Ht(s,"badge-padding-x"),"--badge-fz":Ht(s,"badge-fz"),"--badge-radius":t===void 0?void 0:br(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Rr(n,e):void 0}}},pm=bs((e,t)=>{const n=be("Badge",HXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,radius:u,color:c,gradient:d,leftSection:f,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:_,...w}=n,x=ft({name:"Badge",props:n,classes:OEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:qXe});return b.jsxs(ge,{variant:m,mod:[{block:g,circle:v},_],...x("root",{variant:m}),ref:t,...w,children:[f&&b.jsx("span",{...x("section"),"data-position":"left",children:f}),b.jsx("span",{...x("label"),children:p}),h&&b.jsx("span",{...x("section"),"data-position":"right",children:h})]})});pm.classes=OEe;pm.displayName="@mantine/core/Badge";var DEe={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const WXe={},GXe=(e,{color:t,size:n,lineSize:r,transitionDuration:i,transitionTimingFunction:s})=>({root:{"--burger-color":t?Rr(t,e):void 0,"--burger-size":Ht(n,"burger-size"),"--burger-line-size":r?xe(r):void 0,"--burger-transition-duration":i===void 0?void 0:`${i}ms`,"--burger-transition-timing-function":s}}),LK=Pe((e,t)=>{const n=be("Burger",WXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,opened:u,children:c,transitionDuration:d,transitionTimingFunction:f,lineSize:h,...p}=n,m=ft({name:"Burger",classes:DEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:GXe});return b.jsxs(os,{...m("root"),ref:t,...p,children:[b.jsx(ge,{mod:["reduce-motion",{opened:u}],...m("burger")}),c]})});LK.classes=DEe;LK.displayName="@mantine/core/Burger";var PF={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const iue={orientation:"horizontal"},YXe=(e,{borderWidth:t})=>({group:{"--button-border-width":xe(t)}}),FK=Pe((e,t)=>{const n=be("ButtonGroup",iue,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:l,vars:u,borderWidth:c,variant:d,mod:f,...h}=be("ButtonGroup",iue,e),p=ft({name:"ButtonGroup",props:n,classes:PF,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:YXe,rootSelector:"group"});return b.jsx(ge,{...p("group"),ref:t,variant:d,mod:[{"data-orientation":l},f],role:"group",...h})});FK.classes=PF;FK.displayName="@mantine/core/ButtonGroup";const KXe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${xe(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},XXe={},QXe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const l=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Ht(s,"button-height"),"--button-padding-x":Ht(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Os(s.replace("compact-","")):Os(s),"--button-radius":t===void 0?void 0:br(t),"--button-bg":n||i?l.background:void 0,"--button-hover":n||i?l.hover:void 0,"--button-color":l.color,"--button-bd":n||i?l.border:void 0,"--button-hover-color":n||i?l.hoverColor:void 0}}},rn=bs((e,t)=>{const n=be("Button",XXe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:l,leftSection:u,rightSection:c,fullWidth:d,variant:f,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:_,"data-disabled":w,autoContrast:x,mod:S,...E}=n,T=ft({name:"Button",props:n,classes:PF,className:s,style:r,classNames:y,styles:v,unstyled:_,vars:i,varsResolver:QXe}),I=!!u,k=!!c;return b.jsxs(os,{ref:t,...T("root",{active:!a&&!p&&!w}),unstyled:_,variant:f,disabled:a||p,mod:[{disabled:a||w,loading:p,block:d,"with-left-section":I,"with-right-section":k},S],...E,children:[b.jsx(vf,{mounted:!!p,transition:KXe,duration:150,children:P=>b.jsx(ge,{component:"span",...T("loader",{style:P}),"aria-hidden":!0,children:b.jsx(is,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),b.jsxs("span",{...T("inner"),children:[u&&b.jsx(ge,{component:"span",...T("section"),mod:{position:"left"},children:u}),b.jsx(ge,{component:"span",mod:{loading:p},...T("label"),children:l}),c&&b.jsx(ge,{component:"span",...T("section"),mod:{position:"right"},children:c})]})]})});rn.classes=PF;rn.displayName="@mantine/core/Button";rn.Group=FK;const[JXe,ZXe]=js("Card component was not found in tree");var jK={root:"m_e615b15f",section:"m_599a2148"};const eQe={},NF=bs((e,t)=>{const n=be("CardSection",eQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:l,inheritPadding:u,mod:c,...d}=n,f=ZXe();return b.jsx(ge,{ref:t,mod:[{"with-border":l,"inherit-padding":u},c],...f.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...d})});NF.classes=jK;NF.displayName="@mantine/core/CardSection";const tQe={},nQe=(e,{padding:t})=>({root:{"--card-padding":Du(t)}}),Gb=bs((e,t)=>{const n=be("Card",tQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,padding:c,...d}=n,f=ft({name:"Card",props:n,classes:jK,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:nQe}),h=A.Children.toArray(u),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===NF?A.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return b.jsx(JXe,{value:{getStyles:f},children:b.jsx(Mk,{ref:t,unstyled:a,...f("root"),...d,children:p})})});Gb.classes=jK;Gb.displayName="@mantine/core/Card";Gb.Section=NF;var MEe={root:"m_4451eb3a"};const rQe={},Ya=bs((e,t)=>{const n=be("Center",rQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,inline:u,mod:c,...d}=n,f=ft({name:"Center",props:n,classes:MEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l});return b.jsx(ge,{ref:t,mod:[{inline:u},c],...f("root"),...d})});Ya.classes=MEe;Ya.displayName="@mantine/core/Center";var $Ee={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const sue={withShadow:!0},iQe=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:br(t),"--cs-size":xe(n)}}),Ic=bs((e,t)=>{const n=be("ColorSwatch",sue,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,size:c,radius:d,withShadow:f,children:h,variant:p,...m}=be("ColorSwatch",sue,n),g=ft({name:"ColorSwatch",props:n,classes:$Ee,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:iQe});return b.jsxs(ge,{ref:t,variant:p,size:c,...g("root",{focusable:!0}),...m,children:[b.jsx("span",{...g("alphaOverlay")}),f&&b.jsx("span",{...g("shadowOverlay")}),b.jsx("span",{...g("colorOverlay",{style:{backgroundColor:u}})}),b.jsx("span",{...g("childrenOverlay"),children:h})]})});Ic.classes=$Ee;Ic.displayName="@mantine/core/ColorSwatch";const[sQe,BK]=Ub(null),zK=A.forwardRef(({position:e,...t},n)=>b.jsx(ge,{ref:n,__vars:{"--thumb-y-offset":`${e.y*100}%`,"--thumb-x-offset":`${e.x*100}%`},...t}));zK.displayName="@mantine/core/ColorPickerThumb";var UK={wrapper:"m_fee9c77",preview:"m_9dddfbac",body:"m_bffecc3e",sliders:"m_3283bb96",thumb:"m_40d572ba",swatch:"m_d8ee6fd8",swatches:"m_5711e686",saturation:"m_202a296e",saturationOverlay:"m_11b3db02",slider:"m_d856d47d",sliderOverlay:"m_8f327113"};const oQe={},VK=Pe((e,t)=>{var U;const n=be("ColorSlider",oQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,onChange:u,onChangeEnd:c,maxValue:d,round:f,size:h="md",focusable:p=!0,value:m,overlays:g,thumbColor:y="transparent",onScrubStart:v,onScrubEnd:_,__staticSelector:w="ColorPicker",...x}=n,S=ft({name:w,classes:UK,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a}),T=((U=BK())==null?void 0:U.getStyles)||S,I=ds(),[k,P]=A.useState({y:0,x:m/d}),L=A.useRef(k),R=V=>f?Math.round(V*d):V*d,{ref:$}=gF(({x:V,y:M})=>{L.current={x:V,y:M},u==null||u(R(V))},{onScrubEnd:()=>{const{x:V}=L.current;c==null||c(R(V)),_==null||_()},onScrubStart:v});Mu(()=>{P({y:0,x:m/d})},[m]);const D=(V,M)=>{V.preventDefault();const z=axe(M);u==null||u(R(z.x)),c==null||c(R(z.x))},O=V=>{switch(V.key){case"ArrowRight":{D(V,{x:k.x+.05,y:k.y});break}case"ArrowLeft":{D(V,{x:k.x-.05,y:k.y});break}}},F=g.map((V,M)=>A.createElement("div",{...T("sliderOverlay"),style:V,key:M}));return b.jsxs(ge,{...x,ref:Ki($,t),...T("slider"),role:"slider","aria-valuenow":m,"aria-valuemax":d,"aria-valuemin":0,tabIndex:p?0:-1,onKeyDown:O,"data-focus-ring":I.focusRing,__vars:{"--cp-thumb-size":`var(--cp-thumb-size-${h})`},children:[F,b.jsx(zK,{position:k,...T("thumb",{style:{top:xe(1),background:y}})})]})});VK.displayName="@mantine/core/ColorSlider";function wc(e,t=0,n=10**t){return Math.round(n*e)/n}function aQe({h:e,s:t,l:n,a:r}){const i=t*((n<50?n:100-n)/100);return{h:e,s:i>0?2*i/(n+i)*100:0,v:n+i,a:r}}const lQe={grad:360/400,turn:360,rad:360/(Math.PI*2)};function uQe(e,t="deg"){return Number(e)*(lQe[t]||1)}const cQe=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function oue(e){const t=cQe.exec(e);return t?aQe({h:uQe(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}}function NU({r:e,g:t,b:n,a:r}){const i=Math.max(e,t,n),s=i-Math.min(e,t,n),o=s?i===e?(t-n)/s:i===t?2+(n-e)/s:4+(e-t)/s:0;return{h:wc(60*(o<0?o+6:o),3),s:wc(i?s/i*100:0,3),v:wc(i/255*100,3),a:r}}function OU(e){const t=e[0]==="#"?e.slice(1):e;return t.length===3?NU({r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:1}):NU({r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:1})}function dQe(e){const t=e[0]==="#"?e.slice(1):e,n=o=>wc(parseInt(o,16)/255,3);if(t.length===4){const o=t.slice(0,3),a=n(t[3]+t[3]);return{...OU(o),a}}const r=t.slice(0,6),i=n(t.slice(6,8));return{...OU(r),a:i}}const fQe=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function aue(e){const t=fQe.exec(e);return t?NU({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}}const LEe={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},hQe={hex:OU,hexa:dQe,rgb:aue,rgba:aue,hsl:oue,hsla:oue};function pQe(e){for(const[,t]of Object.entries(LEe))if(t.test(e))return!0;return!1}function pN(e){if(typeof e!="string")return{h:0,s:0,v:0,a:1};if(e==="transparent")return{h:0,s:0,v:0,a:0};const t=e.trim();for(const[n,r]of Object.entries(LEe))if(r.test(t))return hQe[n](t);return{h:0,s:0,v:0,a:1}}const mQe={},FEe=A.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=be("AlphaSlider",mQe,e);return b.jsx(VK,{...o,ref:t,value:n,onChange:a=>r==null?void 0:r(wc(a,2)),onChangeEnd:a=>i==null?void 0:i(wc(a,2)),maxValue:1,round:!1,"data-alpha":!0,overlays:[{backgroundImage:"linear-gradient(45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(-45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--slider-checkers) 75%), linear-gradient(-45deg, var(--mantine-color-body) 75%, var(--slider-checkers) 75%)",backgroundSize:`${xe(8)} ${xe(8)}`,backgroundPosition:`0 0, 0 ${xe(4)}, ${xe(4)} ${xe(-4)}, ${xe(-4)} 0`},{backgroundImage:`linear-gradient(90deg, transparent, ${s})`},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${xe(1)} inset, rgb(0, 0, 0, .15) 0 0 ${xe(4)} inset`}]})});FEe.displayName="@mantine/core/AlphaSlider";function jEe({h:e,s:t,v:n,a:r}){const i=e/360*6,s=t/100,o=n/100,a=Math.floor(i),l=o*(1-s),u=o*(1-(i-a)*s),c=o*(1-(1-i+a)*s),d=a%6;return{r:wc([o,u,l,l,c,o][d]*255),g:wc([c,o,o,u,l,l][d]*255),b:wc([l,l,c,o,o,u][d]*255),a:wc(r,2)}}function lue(e,t){const{r:n,g:r,b:i,a:s}=jEe(e);return t?`rgba(${n}, ${r}, ${i}, ${wc(s,2)})`:`rgb(${n}, ${r}, ${i})`}function uue({h:e,s:t,v:n,a:r},i){const s=(200-t)*n/100,o={h:Math.round(e),s:Math.round(s>0&&s<200?t*n/100/(s<=100?s:200-s)*100:0),l:Math.round(s/2)};return i?`hsla(${o.h}, ${o.s}%, ${o.l}%, ${wc(r,2)})`:`hsl(${o.h}, ${o.s}%, ${o.l}%)`}function aD(e){const t=e.toString(16);return t.length<2?`0${t}`:t}function BEe(e){const{r:t,g:n,b:r}=jEe(e);return`#${aD(t)}${aD(n)}${aD(r)}`}function gQe(e){const t=Math.round(e.a*255);return`${BEe(e)}${aD(t)}`}const eB={hex:BEe,hexa:e=>gQe(e),rgb:e=>lue(e,!1),rgba:e=>lue(e,!0),hsl:e=>uue(e,!1),hsla:e=>uue(e,!0)};function Fg(e,t){return t?e in eB?eB[e](t):eB.hex(t):"#000000"}const zEe=A.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=be("HueSlider",{},e);return b.jsx(VK,{...o,ref:t,value:n,onChange:r,onChangeEnd:i,maxValue:360,thumbColor:`hsl(${n}, 100%, 50%)`,round:!0,"data-hue":!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${xe(1)} inset, rgb(0, 0, 0, .15) 0 0 ${xe(4)} inset`}]})});zEe.displayName="@mantine/core/HueSlider";function UEe({className:e,onChange:t,onChangeEnd:n,value:r,saturationLabel:i,focusable:s=!0,size:o,color:a,onScrubStart:l,onScrubEnd:u,...c}){const{getStyles:d}=BK(),[f,h]=A.useState({x:r.s/100,y:1-r.v/100}),p=A.useRef(f),{ref:m}=gF(({x:v,y:_})=>{p.current={x:v,y:_},t({s:Math.round(v*100),v:Math.round((1-_)*100)})},{onScrubEnd:()=>{const{x:v,y:_}=p.current;n({s:Math.round(v*100),v:Math.round((1-_)*100)}),u==null||u()},onScrubStart:l});A.useEffect(()=>{h({x:r.s/100,y:1-r.v/100})},[r.s,r.v]);const g=(v,_)=>{v.preventDefault();const w=axe(_);t({s:Math.round(w.x*100),v:Math.round((1-w.y)*100)}),n({s:Math.round(w.x*100),v:Math.round((1-w.y)*100)})},y=v=>{switch(v.key){case"ArrowUp":{g(v,{y:f.y-.05,x:f.x});break}case"ArrowDown":{g(v,{y:f.y+.05,x:f.x});break}case"ArrowRight":{g(v,{x:f.x+.05,y:f.y});break}case"ArrowLeft":{g(v,{x:f.x-.05,y:f.y});break}}};return b.jsxs(ge,{...d("saturation"),ref:m,...c,role:"slider","aria-label":i,"aria-valuenow":f.x,"aria-valuetext":Fg("rgba",r),tabIndex:s?0:-1,onKeyDown:y,children:[b.jsx("div",{...d("saturationOverlay",{style:{backgroundColor:`hsl(${r.h}, 100%, 50%)`}})}),b.jsx("div",{...d("saturationOverlay",{style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}})}),b.jsx("div",{...d("saturationOverlay",{style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}})}),b.jsx(zK,{position:f,...d("thumb",{style:{backgroundColor:a}})})]})}UEe.displayName="@mantine/core/Saturation";const VEe=A.forwardRef(({className:e,datatype:t,setValue:n,onChangeEnd:r,size:i,focusable:s,data:o,swatchesPerRow:a,...l},u)=>{const c=BK(),d=o.map((f,h)=>A.createElement(Ic,{...c.getStyles("swatch"),unstyled:c.unstyled,component:"button",type:"button",color:f,key:h,radius:"sm",onClick:()=>{n(f),r==null||r(f)},"aria-label":f,tabIndex:s?0:-1,"data-swatch":!0}));return b.jsx(ge,{...c.getStyles("swatches"),ref:u,...l,children:d})});VEe.displayName="@mantine/core/Swatches";const yQe={swatchesPerRow:7,withPicker:!0,focusable:!0,size:"md",__staticSelector:"ColorPicker"},vQe=(e,{size:t,swatchesPerRow:n})=>({wrapper:{"--cp-preview-size":Ht(t,"cp-preview-size"),"--cp-width":Ht(t,"cp-width"),"--cp-body-spacing":Du(t),"--cp-swatch-size":`${100/n}%`,"--cp-thumb-size":Ht(t,"cp-thumb-size"),"--cp-saturation-height":Ht(t,"cp-saturation-height")}}),HK=Pe((e,t)=>{const n=be("ColorPicker",yQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,format:u,value:c,defaultValue:d,onChange:f,onChangeEnd:h,withPicker:p,size:m,saturationLabel:g,hueLabel:y,alphaLabel:v,focusable:_,swatches:w,swatchesPerRow:x,fullWidth:S,onColorSwatchClick:E,__staticSelector:T,mod:I,...k}=n,P=ft({name:T,props:n,classes:UK,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"wrapper",vars:l,varsResolver:vQe}),L=A.useRef(u),R=A.useRef(),$=A.useRef(-1),D=A.useRef(!1),O=u==="hexa"||u==="rgba"||u==="hsla",[F,U,V]=Pi({value:c,defaultValue:d,finalValue:"#FFFFFF",onChange:f}),[M,z]=A.useState(pN(F)),q=()=>{window.clearTimeout($.current),D.current=!0},j=()=>{window.clearTimeout($.current),$.current=window.setTimeout(()=>{D.current=!1},200)},H=G=>{z(J=>{const re={...J,...G};return R.current=Fg(L.current,re),re}),U(R.current)};return Mu(()=>{pQe(c)&&!D.current&&z(pN(c))},[c]),Mu(()=>{L.current=u,U(Fg(u,M))},[u]),b.jsx(sQe,{value:{getStyles:P,unstyled:a},children:b.jsxs(ge,{ref:t,...P("wrapper"),size:m,mod:[{"full-width":S},I],...k,children:[p&&b.jsxs(b.Fragment,{children:[b.jsx(UEe,{value:M,onChange:H,onChangeEnd:({s:G,v:J})=>h==null?void 0:h(Fg(L.current,{...M,s:G,v:J})),color:F,size:m,focusable:_,saturationLabel:g,onScrubStart:q,onScrubEnd:j}),b.jsxs("div",{...P("body"),children:[b.jsxs("div",{...P("sliders"),children:[b.jsx(zEe,{value:M.h,onChange:G=>H({h:G}),onChangeEnd:G=>h==null?void 0:h(Fg(L.current,{...M,h:G})),size:m,focusable:_,"aria-label":y,onScrubStart:q,onScrubEnd:j}),O&&b.jsx(FEe,{value:M.a,onChange:G=>H({a:G}),onChangeEnd:G=>{h==null||h(Fg(L.current,{...M,a:G}))},size:m,color:Fg("hex",M),focusable:_,"aria-label":v,onScrubStart:q,onScrubEnd:j})]}),O&&b.jsx(Ic,{color:F,radius:"sm",size:"var(--cp-preview-size)",...P("preview")})]})]}),Array.isArray(w)&&b.jsx(VEe,{data:w,swatchesPerRow:x,focusable:_,setValue:U,onChangeEnd:G=>{const J=Fg(u,pN(G));E==null||E(J),h==null||h(J),V||z(pN(G))}})]})})});HK.classes=UK;HK.displayName="@mantine/core/ColorPicker";var HEe={root:"m_7485cace"};const bQe={},_Qe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:Ht(t,"container-size")}}),bf=Pe((e,t)=>{const n=be("Container",bQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,fluid:u,mod:c,...d}=n,f=ft({name:"Container",classes:HEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:_Qe});return b.jsx(ge,{ref:t,mod:[{fluid:u},c],...f("root"),...d})});bf.classes=HEe;bf.displayName="@mantine/core/Container";const wQe={timeout:1e3};function qEe(e){const{children:t,timeout:n,value:r,...i}=be("CopyButton",wQe,e),s=dqe({timeout:n}),o=()=>s.copy(r);return b.jsx(b.Fragment,{children:t({copy:o,copied:s.copied,...i})})}qEe.displayName="@mantine/core/CopyButton";var WEe={root:"m_3eebeb36",label:"m_9e365f20"};const xQe={orientation:"horizontal"},EQe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Rr(t,e):void 0,"--divider-border-style":n,"--divider-size":Ht(r,"divider-size")}}),OF=Pe((e,t)=>{const n=be("Divider",xQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,orientation:c,label:d,labelPosition:f,mod:h,...p}=n,m=ft({name:"Divider",classes:WEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:EQe});return b.jsx(ge,{ref:t,mod:[{orientation:c,"with-label":!!d},h],...m("root"),...p,role:"separator",children:d&&b.jsx(ge,{component:"span",mod:{position:f},...m("label"),children:d})})});OF.classes=WEe;OF.displayName="@mantine/core/Divider";const[SQe,cS]=js("Drawer component was not found in tree");var og={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const TQe={},DF=Pe((e,t)=>{const n=be("DrawerBody",TQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=cS();return b.jsx(tK,{ref:t,...u.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...l})});DF.classes=og;DF.displayName="@mantine/core/DrawerBody";const CQe={},MF=Pe((e,t)=>{const n=be("DrawerCloseButton",CQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=cS();return b.jsx(nK,{ref:t,...u.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...l})});MF.classes=og;MF.displayName="@mantine/core/DrawerCloseButton";const AQe={},$F=Pe((e,t)=>{const n=be("DrawerContent",AQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:l,radius:u,...c}=n,d=cS(),f=d.scrollAreaComponent||lEe;return b.jsx(aEe,{...d.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:d.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:u||d.radius||0,children:b.jsx(f,{style:{height:"calc(100vh - var(--drawer-offset) * 2)"},children:l})})});$F.classes=og;$F.displayName="@mantine/core/DrawerContent";const IQe={},LF=Pe((e,t)=>{const n=be("DrawerHeader",IQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=cS();return b.jsx(rK,{ref:t,...u.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...l})});LF.classes=og;LF.displayName="@mantine/core/DrawerHeader";const kQe={},FF=Pe((e,t)=>{const n=be("DrawerOverlay",kQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=cS();return b.jsx(iK,{ref:t,...u.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...l})});FF.classes=og;FF.displayName="@mantine/core/DrawerOverlay";function RQe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function PQe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const NQe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},OQe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},DQe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Kc("modal"),position:"left"},MQe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":Ht(n,"drawer-size"),"--drawer-flex":PQe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":RQe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":xe(r)}}),jF=Pe((e,t)=>{const n=be("DrawerRoot",DQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,scrollAreaComponent:u,position:c,transitionProps:d,radius:f,...h}=n,{dir:p}=ol(),m=ft({name:"Drawer",classes:og,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:MQe}),g=(p==="rtl"?OQe:NQe)[c];return b.jsx(SQe,{value:{scrollAreaComponent:u,getStyles:m,radius:f},children:b.jsx(oEe,{ref:t,...m("root"),transitionProps:{transition:g,...d},unstyled:a,...h})})});jF.classes=og;jF.displayName="@mantine/core/DrawerRoot";const $Qe={},BF=Pe((e,t)=>{const n=be("DrawerTitle",$Qe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=cS();return b.jsx(sK,{ref:t,...u.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...l})});BF.classes=og;BF.displayName="@mantine/core/DrawerTitle";const LQe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Kc("modal"),withOverlay:!0,withCloseButton:!0},ip=Pe((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...l}=be("Drawer",LQe,e),u=!!n||s;return b.jsxs(jF,{ref:t,...l,children:[r&&b.jsx(FF,{...i}),b.jsxs($F,{children:[u&&b.jsxs(LF,{children:[n&&b.jsx(BF,{children:n}),s&&b.jsx(MF,{...o})]}),b.jsx(DF,{children:a})]})]})});ip.classes=og;ip.displayName="@mantine/core/Drawer";ip.Root=jF;ip.Overlay=FF;ip.Content=$F;ip.Body=DF;ip.Header=LF;ip.Title=BF;ip.CloseButton=MF;function FQe({open:e,close:t,openDelay:n,closeDelay:r}){const i=A.useRef(-1),s=A.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},l=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return A.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:l}}const[jQe,GEe]=js("Grid component was not found in tree"),DU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,cue=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":DU(e,t),due=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},fue=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function BQe({span:e,order:t,offset:n,selector:r}){var f;const i=ds(),s=GEe(),a=NC(e)===void 0?12:NC(e),l=iS({"--col-order":(f=NC(t))==null?void 0:f.toString(),"--col-flex-grow":due(a,s.grow),"--col-flex-basis":DU(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":cue(a,s.columns,s.grow),"--col-offset":fue(NC(n),s.columns)}),u=ki(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=due(e[p],s.grow),h[p]["--col-flex-basis"]=DU(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=cue(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=fue(n[p],s.columns)),h},{}),d=VM(ki(u),i).filter(h=>ki(u[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:u[h.value]}));return b.jsx(Dk,{styles:l,media:d,selector:r})}var qK={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const zQe={span:12},WK=Pe((e,t)=>{const n=be("GridCol",zQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:l,order:u,offset:c,...d}=n,f=GEe(),h=_F();return b.jsxs(b.Fragment,{children:[b.jsx(BQe,{selector:`.${h}`,span:l,order:u,offset:c}),b.jsx(ge,{ref:t,...f.getStyles("col",{className:dt(i,h),style:s,classNames:r,styles:o}),...d})]})});WK.classes=qK;WK.displayName="@mantine/core/GridCol";function UQe({gutter:e,selector:t}){const n=ds(),r=iS({"--grid-gutter":Du(NC(e))}),i=ki(n.breakpoints).reduce((a,l)=>(a[l]||(a[l]={}),typeof e=="object"&&e[l]!==void 0&&(a[l]["--grid-gutter"]=Du(e[l])),a),{}),o=VM(ki(i),n).filter(a=>ki(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return b.jsx(Dk,{styles:r,media:o,selector:t})}const VQe={gutter:"md",grow:!1,columns:12},HQe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),xc=Pe((e,t)=>{const n=be("Grid",VQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,grow:u,gutter:c,columns:d,align:f,justify:h,children:p,...m}=n,g=ft({name:"Grid",classes:qK,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:HQe}),y=_F();return b.jsxs(jQe,{value:{getStyles:g,grow:u,columns:d},children:[b.jsx(UQe,{selector:`.${y}`,...n}),b.jsx(ge,{ref:t,...g("root",{className:y}),...m,children:b.jsx("div",{...g("inner"),children:p})})]})});xc.classes=qK;xc.displayName="@mantine/core/Grid";xc.Col=WK;function hue({color:e,theme:t,defaultShade:n}){const r=yf({color:e,theme:t});return r.isThemeColor?r.shade===void 0?`var(--mantine-color-${r.color}-${n})`:`var(${r.variable})`:e}var YEe={root:"m_bcb3f3c2"};const qQe={color:"yellow"},WQe=(e,{color:t})=>({root:{"--mark-bg-dark":hue({color:t,theme:e,defaultShade:5}),"--mark-bg-light":hue({color:t,theme:e,defaultShade:2})}}),GK=Pe((e,t)=>{const n=be("Mark",qQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,variant:c,...d}=n,f=ft({name:"Mark",props:n,className:i,style:s,classes:YEe,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:WQe});return b.jsx(ge,{component:"mark",ref:t,variant:c,...f("root"),...d})});GK.classes=YEe;GK.displayName="@mantine/core/Mark";function pue(e){return e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}function GQe(e,t){if(t==null)return[{chunk:e,highlighted:!1}];const n=Array.isArray(t)?t.map(pue):pue(t);if(!(Array.isArray(n)?n.filter(a=>a.trim().length>0).length>0:n.trim()!==""))return[{chunk:e,highlighted:!1}];const i=typeof n=="string"?n.trim():n.filter(a=>a.trim().length!==0).map(a=>a.trim()).sort((a,l)=>l.length-a.length).join("|"),s=new RegExp(`(${i})`,"gi");return e.split(s).map(a=>({chunk:a,highlighted:s.test(a)})).filter(({chunk:a})=>a)}const YQe={},YK=bs((e,t)=>{const{unstyled:n,children:r,highlight:i,highlightStyles:s,color:o,...a}=be("Highlight",YQe,e),l=GQe(r,i);return b.jsx(Xe,{unstyled:n,ref:t,...a,__staticSelector:"Highlight",children:l.map(({chunk:u,highlighted:c},d)=>c?b.jsx(GK,{unstyled:n,color:o,style:s,"data-highlight":u,children:u},d):b.jsx("span",{children:u},d))})});YK.classes=Xe.classes;YK.displayName="@mantine/core/Highlight";var KEe={root:"m_9e117634"};const KQe={},XQe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:br(t),"--image-object-fit":n}}),Wy=bs((e,t)=>{const n=be("Image",KQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,onError:u,src:c,radius:d,fit:f,fallbackSrc:h,mod:p,...m}=n,[g,y]=A.useState(!c);A.useEffect(()=>y(!c),[c]);const v=ft({name:"Image",classes:KEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:XQe});return g&&h?b.jsx(ge,{component:"img",ref:t,src:h,...v("root"),onError:u,mod:["fallback",p],...m}):b.jsx(ge,{component:"img",ref:t,...v("root"),src:c,onError:_=>{u==null||u(_),y(!0)},mod:p,...m})});Wy.classes=KEe;Wy.displayName="@mantine/core/Image";function QQe(e="top-end",t=0){const n={"--indicator-top":void 0,"--indicator-bottom":void 0,"--indicator-left":void 0,"--indicator-right":void 0,"--indicator-translate-x":void 0,"--indicator-translate-y":void 0},r=xe(t),[i,s]=e.split("-");return i==="top"&&(n["--indicator-top"]=r,n["--indicator-translate-y"]="-50%"),i==="middle"&&(n["--indicator-top"]="50%",n["--indicator-translate-y"]="-50%"),i==="bottom"&&(n["--indicator-bottom"]=r,n["--indicator-translate-y"]="50%"),s==="start"&&(n["--indicator-left"]=r,n["--indicator-translate-x"]="-50%"),s==="center"&&(n["--indicator-left"]="50%",n["--indicator-translate-x"]="-50%"),s==="end"&&(n["--indicator-right"]=r,n["--indicator-translate-x"]="50%"),n}var XEe={root:"m_e5262200",indicator:"m_760d1fb1",processing:"m_885901b1"};const JQe={position:"top-end",offset:0,inline:!1,withBorder:!1,disabled:!1,processing:!1},ZQe=(e,{color:t,position:n,offset:r,size:i,radius:s,zIndex:o,autoContrast:a})=>({root:{"--indicator-color":t?Rr(t,e):void 0,"--indicator-text-color":Uy(a,e)?np({color:t,theme:e,autoContrast:a}):void 0,"--indicator-size":xe(i),"--indicator-radius":s===void 0?void 0:br(s),"--indicator-z-index":o==null?void 0:o.toString(),...QQe(n,r)}}),KK=Pe((e,t)=>{const n=be("Indicator",JQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,position:c,offset:d,inline:f,label:h,radius:p,color:m,withBorder:g,disabled:y,processing:v,zIndex:_,autoContrast:w,mod:x,...S}=n,E=ft({name:"Indicator",classes:XEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:ZQe});return b.jsxs(ge,{ref:t,...E("root"),mod:[{inline:f},x],...S,children:[!y&&b.jsx(b.Fragment,{children:b.jsx(ge,{mod:{"with-label":!!h,"with-border":g,processing:v},...E("indicator"),children:h})}),u]})});KK.classes=XEe;KK.displayName="@mantine/core/Indicator";function MU(){return MU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MU.apply(null,arguments)}function eJe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var tJe=A.useLayoutEffect,nJe=function(t){var n=A.useRef(t);return tJe(function(){n.current=t}),n},mue=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},rJe=function(t,n){var r=A.useRef();return A.useCallback(function(i){t.current=i,r.current&&mue(r.current,null),r.current=n,n&&mue(n,i)},[n])},gue={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},iJe=function(t){Object.keys(gue).forEach(function(n){t.style.setProperty(n,gue[n],"important")})},yue=iJe,Aa=null,vue=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function sJe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Aa||(Aa=document.createElement("textarea"),Aa.setAttribute("tabindex","-1"),Aa.setAttribute("aria-hidden","true"),yue(Aa)),Aa.parentNode===null&&document.body.appendChild(Aa);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(f){var h=f;Aa.style[h]=o[h]}),yue(Aa),Aa.value=t;var l=vue(Aa,e);Aa.value=t,l=vue(Aa,e),Aa.value="x";var u=Aa.scrollHeight-i,c=u*n;a==="border-box"&&(c=c+i+s),l=Math.max(c,l);var d=u*r;return a==="border-box"&&(d=d+i+s),l=Math.min(d,l),[l,u]}var bue=function(){},oJe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},aJe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],lJe=!!document.documentElement.currentStyle,uJe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=oJe(aJe,n),i=r.boxSizing;if(i==="")return null;lJe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},cJe=uJe;function QEe(e,t,n){var r=nJe(n);A.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var dJe=function(t){QEe(window,"resize",t)},fJe=function(t){QEe(document.fonts,"loadingdone",t)},hJe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],pJe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?bue:o,l=t.onHeightChange,u=l===void 0?bue:l,c=eJe(t,hJe),d=c.value!==void 0,f=A.useRef(null),h=rJe(f,n),p=A.useRef(0),m=A.useRef(),g=function(){var _=f.current,w=r&&m.current?m.current:cJe(_);if(w){m.current=w;var x=sJe(w,_.value||_.placeholder||"x",s,i),S=x[0],E=x[1];p.current!==S&&(p.current=S,_.style.setProperty("height",S+"px","important"),u(S,{rowHeight:E}))}},y=function(_){d||g(),a(_)};return A.useLayoutEffect(g),dJe(g),fJe(g),A.createElement("textarea",MU({},c,{onChange:y,ref:h}))},mJe=A.forwardRef(pJe);const gJe={},eI=Pe((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=be("Textarea",gJe,e),l=n&&lxe()!=="test",u=l?{maxRows:r,minRows:i}:{};return b.jsx(ru,{component:l?mJe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...u})});eI.classes=ru.classes;eI.displayName="@mantine/core/Textarea";const[yJe,vJe]=js("List component was not found in tree");var XK={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const bJe={},QK=Pe((e,t)=>{const n=be("ListItem",bJe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:l,children:u,mod:c,...d}=n,f=vJe(),h=l||f.icon,p={classNames:r,styles:o};return b.jsx(ge,{...f.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:f.center},c],ref:t,...d,children:b.jsxs("div",{...f.getStyles("itemWrapper",p),children:[h&&b.jsx("span",{...f.getStyles("itemIcon",p),children:h}),b.jsx("span",{...f.getStyles("itemLabel",p),children:u})]})})});QK.classes=XK;QK.displayName="@mantine/core/ListItem";const _Je={type:"unordered"},wJe=(e,{size:t,spacing:n})=>({root:{"--list-fz":Os(t),"--list-lh":Zwe(t),"--list-spacing":Du(n)}}),Hd=Pe((e,t)=>{const n=be("List",_Je,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,type:c,withPadding:d,icon:f,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=ft({name:"List",classes:XK,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:wJe});return b.jsx(yJe,{value:{center:p,icon:f,getStyles:v},children:b.jsx(ge,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":d},g],ref:t,...y,children:u})})});Hd.classes=XK;Hd.displayName="@mantine/core/List";Hd.Item=QK;var JEe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const _ue={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Kc("overlay")},xJe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Gl=Pe((e,t)=>{const n=be("LoadingOverlay",_ue,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,transitionProps:u,loaderProps:c,overlayProps:d,visible:f,zIndex:h,...p}=n,m=ds(),g=ft({name:"LoadingOverlay",classes:JEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:xJe}),y={..._ue.overlayProps,...d};return b.jsx(vf,{transition:"fade",...u,mounted:!!f,children:v=>b.jsxs(ge,{...g("root",{style:v}),ref:t,...p,children:[b.jsx(is,{...g("loader"),unstyled:a,...c}),b.jsx(JA,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(d==null?void 0:d.color)||m.white}),b.jsx(JA,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(d==null?void 0:d.color)||m.colors.dark[5]})]})})});Gl.classes=JEe;Gl.displayName="@mantine/core/LoadingOverlay";const[EJe,Vk]=js("Menu component was not found in the tree");var dS={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const SJe={},JK=Pe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=be("MenuDivider",SJe,e),l=Vk();return b.jsx(ge,{ref:t,...l.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});JK.classes=dS;JK.displayName="@mantine/core/MenuDivider";const TJe={},ZK=Pe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:l,children:u,...c}=be("MenuDropdown",TJe,e),d=A.useRef(null),f=Vk(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=d.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=xu(a,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.openDropdown()),m=xu(l,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.closeDropdown());return b.jsxs(Tn.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:Ki(t,d),...f.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[b.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,"aria-hidden":!0,style:{outline:0}}),u]})});ZK.classes=dS;ZK.displayName="@mantine/core/MenuDropdown";const CJe={},tI=bs((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:l,leftSection:u,rightSection:c,children:d,disabled:f,...h}=be("MenuItem",CJe,e),p=Vk(),m=ds(),{dir:g}=ol(),y=A.useRef(),v=p.getItemIndex(y.current),_=h,w=xu(_.onMouseLeave,()=>p.setHovered(-1)),x=xu(_.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),S=xu(_.onClick,()=>{typeof l=="boolean"?l&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),E=xu(_.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),T=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,I=a?yf({color:a,theme:m}):null;return b.jsxs(os,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:E,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:Ki(y,t),role:"menuitem",disabled:f,"data-menu-item":!0,"data-disabled":f||void 0,"data-hovered":p.hovered===v?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:x,onMouseLeave:w,onClick:S,onKeyDown:TY({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:_.onKeydown}),__vars:{"--menu-item-color":I!=null&&I.isThemeColor&&(I==null?void 0:I.shade)===void 0?`var(--mantine-color-${I.color}-6)`:T==null?void 0:T.color,"--menu-item-hover":T==null?void 0:T.hover},children:[u&&b.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:u}),d&&b.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:d}),c&&b.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});tI.classes=dS;tI.displayName="@mantine/core/MenuItem";const AJe={},eX=Pe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=be("MenuLabel",AJe,e),l=Vk();return b.jsx(ge,{ref:t,...l.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});eX.classes=dS;eX.displayName="@mantine/core/MenuLabel";const IJe={refProp:"ref"},ZEe=A.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=be("MenuTarget",IJe,e);if(!By(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=Vk(),o=xu(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=xu(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),l=xu(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return b.jsx(Tn.Target,{refProp:r,popupType:"menu",ref:t,...i,children:A.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:l,"data-expanded":s.opened?!0:void 0})})});ZEe.displayName="@mantine/core/MenuTarget";const kJe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function tn(e){const t=be("Menu",kJe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:l,closeOnItemClick:u,loop:c,closeOnEscape:d,trigger:f,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:_,menuItemTabIndex:w,keepMounted:x,...S}=t,E=ft({name:"Menu",classes:dS,props:t,classNames:m,styles:g,unstyled:y}),[T,{setHovered:I,resetHovered:k}]=uqe(),[P,L]=Pi({value:s,defaultValue:o,finalValue:!1,onChange:l}),[R,$]=A.useState(!1),D=()=>{L(!1),$(!1),P&&(i==null||i())},O=()=>{L(!0),!P&&(r==null||r())},F=()=>{P?D():O()},{openDropdown:U,closeDropdown:V}=FQe({open:O,close:D,closeDelay:p,openDelay:h}),M=j=>lqe("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:z,resolvedStyles:q}=rp({classNames:m,styles:g,props:t});return Mu(()=>{k()},[P]),b.jsx(EJe,{value:{getStyles:E,opened:P,toggleDropdown:F,getItemIndex:M,hovered:T,setHovered:I,openedViaClick:R,setOpenedViaClick:$,closeOnItemClick:u,closeDropdown:f==="click"?D:V,openDropdown:f==="click"?O:U,closeDropdownImmediately:D,loop:c,trigger:f,unstyled:y,menuItemTabIndex:w},children:b.jsx(Tn,{...S,opened:P,onChange:F,defaultOpened:o,trapFocus:x?!1:a,closeOnEscape:d,__staticSelector:"Menu",classNames:z,styles:q,unstyled:y,variant:v,keepMounted:x,children:n})})}tn.extend=e=>e;tn.classes=dS;tn.displayName="@mantine/core/Menu";tn.Item=tI;tn.Label=eX;tn.Dropdown=ZK;tn.Target=ZEe;tn.Divider=JK;const[RJe,fS]=js("Modal component was not found in tree");var ag={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const PJe={},zF=Pe((e,t)=>{const n=be("ModalBody",PJe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=fS();return b.jsx(tK,{ref:t,...u.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...l})});zF.classes=ag;zF.displayName="@mantine/core/ModalBody";const NJe={},UF=Pe((e,t)=>{const n=be("ModalCloseButton",NJe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=fS();return b.jsx(nK,{ref:t,...u.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...l})});UF.classes=ag;UF.displayName="@mantine/core/ModalCloseButton";const OJe={},VF=Pe((e,t)=>{const n=be("ModalContent",OJe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:l,...u}=n,c=fS(),d=c.scrollAreaComponent||lEe;return b.jsx(aEe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...u,children:b.jsx(d,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${xe(c.yOffset)} * 2))`},children:l})})});VF.classes=ag;VF.displayName="@mantine/core/ModalContent";const DJe={},HF=Pe((e,t)=>{const n=be("ModalHeader",DJe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=fS();return b.jsx(rK,{ref:t,...u.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...l})});HF.classes=ag;HF.displayName="@mantine/core/ModalHeader";const MJe={},qF=Pe((e,t)=>{const n=be("ModalOverlay",MJe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=fS();return b.jsx(iK,{ref:t,...u.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...l})});qF.classes=ag;qF.displayName="@mantine/core/ModalOverlay";const $Je={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Kc("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},LJe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:br(t),"--modal-size":Ht(n,"modal-size"),"--modal-y-offset":xe(r),"--modal-x-offset":xe(i)}}),WF=Pe((e,t)=>{const n=be("ModalRoot",$Je,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,yOffset:u,scrollAreaComponent:c,radius:d,fullScreen:f,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=ft({name:m,classes:ag,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:LJe});return b.jsx(RJe,{value:{yOffset:u,scrollAreaComponent:c,getStyles:y,fullScreen:f},children:b.jsx(oEe,{ref:t,...y("root"),"data-full-screen":f||void 0,"data-centered":h||void 0,unstyled:a,...g})})});WF.classes=ag;WF.displayName="@mantine/core/ModalRoot";const FJe={},GF=Pe((e,t)=>{const n=be("ModalTitle",FJe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=fS();return b.jsx(sK,{ref:t,...u.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...l})});GF.classes=ag;GF.displayName="@mantine/core/ModalTitle";const jJe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Kc("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},as=Pe((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:l,...u}=be("Modal",jJe,e),c=!!n||s;return b.jsxs(WF,{ref:t,radius:l,...u,children:[r&&b.jsx(qF,{...i}),b.jsxs(VF,{radius:l,children:[c&&b.jsxs(HF,{children:[n&&b.jsx(GF,{children:n}),s&&b.jsx(UF,{...o})]}),b.jsx(zF,{children:a})]})]})});as.classes=ag;as.displayName="@mantine/core/Modal";as.Root=WF;as.Overlay=qF;as.Content=VF;as.Body=zF;as.Header=HF;as.Title=GF;as.CloseButton=UF;const[BJe,tX]=Ub(),[zJe,UJe]=Ub();var YF={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const VJe={},HJe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Ht(t):Ht(n,"pg-gap")}}),nX=Pe((e,t)=>{const n=be("PillGroup",VJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,disabled:c,...d}=n,f=tX(),h=(f==null?void 0:f.size)||u||void 0,p=ft({name:"PillGroup",classes:YF,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:HJe,stylesCtx:{size:h},rootSelector:"group"});return b.jsx(zJe,{value:{size:h,disabled:c},children:b.jsx(ge,{ref:t,size:h,...p("group"),...d})})});nX.classes=YF;nX.displayName="@mantine/core/PillGroup";const qJe={variant:"default"},WJe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Ht(n,"pill-fz"),"--pill-height":Ht(n,"pill-height"),"--pill-radius":t===void 0?void 0:br(t)}}),rb=Pe((e,t)=>{const n=be("Pill",qJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,variant:u,children:c,withRemoveButton:d,onRemove:f,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,_=UJe(),w=tX(),x=m||(_==null?void 0:_.size)||void 0,S=(w==null?void 0:w.variant)==="filled"?"contrast":u||"default",E=ft({name:"Pill",classes:YF,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:WJe,stylesCtx:{size:x}});return b.jsxs(ge,{component:"span",ref:t,variant:S,size:x,...E("root",{variant:S}),mod:[{"with-remove":d&&!g,disabled:g||(_==null?void 0:_.disabled)},y],...v,children:[b.jsx("span",{...E("label"),children:c}),d&&b.jsx(Vy,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...E("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:T=>{var I;T.preventDefault(),T.stopPropagation(),(I=h==null?void 0:h.onMouseDown)==null||I.call(h,T)},onClick:T=>{var I;T.stopPropagation(),f==null||f(),(I=h==null?void 0:h.onClick)==null||I.call(h,T)}})]})});rb.classes=YF;rb.displayName="@mantine/core/Pill";rb.Group=nX;var eSe={field:"m_45c4369d"};const GJe={type:"visible"},rX=Pe((e,t)=>{const n=be("PillsInputField",GJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,type:u,disabled:c,id:d,pointer:f,mod:h,...p}=n,m=tX(),g=aS(),y=ft({name:"PillsInputField",classes:eSe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return b.jsx(ge,{component:"input",ref:Ki(t,m==null?void 0:m.fieldRef),"data-type":u,disabled:v,mod:[{disabled:v,pointer:f},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||d,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:_=>!f&&_.stopPropagation()})});rX.classes=eSe;rX.displayName="@mantine/core/PillsInputField";const YJe={},Wx=Pe((e,t)=>{const n=be("PillsInput",YJe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:l,error:u,variant:c,...d}=n,f=A.useRef();return b.jsx(BJe,{value:{fieldRef:f,size:o,disabled:a,hasError:!!u,variant:c},children:b.jsx(ru,{size:o,error:u,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=f.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=f.current)==null||p.focus()},...d,multiline:!0,disabled:a,__staticSelector:l||"PillsInput",withAria:!1,children:r})})});Wx.displayName="@mantine/core/PillsInput";Wx.Field=rX;function KJe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(qx(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const XJe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},Hk=Pe((e,t)=>{const n=be("MultiSelect",XJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,value:c,defaultValue:d,onChange:f,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:_,selectFirstOptionOnChange:w,onOptionSubmit:x,comboboxProps:S,filter:E,limit:T,withScrollArea:I,maxDropdownHeight:k,searchValue:P,defaultSearchValue:L,onSearchChange:R,readOnly:$,disabled:D,onFocus:O,onBlur:F,onPaste:U,radius:V,rightSection:M,rightSectionWidth:z,rightSectionPointerEvents:q,rightSectionProps:j,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:J,leftSectionProps:re,inputContainer:ie,inputWrapperOrder:te,withAsterisk:ae,labelProps:_e,descriptionProps:ce,errorProps:ze,wrapperProps:Oe,description:$e,label:Ne,error:pe,maxValues:ue,searchable:Se,nothingFoundMessage:De,withCheckIcon:at,checkIconPosition:He,hidePickedOptions:le,withErrorStyles:Ie,name:Ye,form:fe,id:Te,clearable:Ve,clearButtonProps:et,hiddenInputProps:St,placeholder:An,hiddenInputValuesDivider:_r,required:Br,mod:Or,renderOption:yn,onRemove:Nn,onClear:sr,scrollAreaProps:tr,...Lo}=n,Di=Do(Te),Qi=_K(m),Us=kF(Qi),mr=Uk({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{_==null||_(),mr.resetSelectedOption()}}),{styleProps:Hn,rest:{type:Sa,autoComplete:Zu,...Df}}=Hb(Lo),[ht,Si]=Pi({value:c,defaultValue:d,finalValue:[],onChange:f}),[vn,zr]=Pi({value:P,defaultValue:L,finalValue:"",onChange:R}),ii=ft({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:gi,resolvedStyles:Mi}=rp({props:n,styles:o,classNames:r}),Fo=or=>{h==null||h(or),or.key===" "&&!Se&&(or.preventDefault(),mr.toggleDropdown()),or.key==="Backspace"&&vn.length===0&&ht.length>0&&(Nn==null||Nn(ht[ht.length-1]),Si(ht.slice(0,ht.length-1)))},ec=ht.map((or,Mf)=>{var Ta,od;return b.jsx(rb,{withRemoveButton:!$&&!((Ta=Us[or])!=null&&Ta.disabled),onRemove:()=>{Si(ht.filter(dl=>or!==dl)),Nn==null||Nn(or)},unstyled:a,disabled:D,...ii("pill"),children:((od=Us[or])==null?void 0:od.label)||or},`${or}-${Mf}`)});A.useEffect(()=>{w&&mr.selectFirstOption()},[w,ht]);const Tp=Ve&&ht.length>0&&!D&&!$&&b.jsx(Kt.ClearButton,{size:u,...et,onClear:()=>{sr==null||sr(),Si([]),zr("")}}),yv=KJe({data:Qi,value:ht});return b.jsxs(b.Fragment,{children:[b.jsxs(Kt,{store:mr,classNames:gi,styles:Mi,unstyled:a,size:u,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:or=>{x==null||x(or),zr(""),mr.updateSelectedOptionIndex("selected"),ht.includes(Us[or].value)?(Si(ht.filter(Mf=>Mf!==Us[or].value)),Nn==null||Nn(Us[or].value)):ht.length<ue&&Si([...ht,Us[or].value])},...S,children:[b.jsx(Kt.DropdownTarget,{children:b.jsx(Wx,{...Hn,__staticSelector:"MultiSelect",classNames:gi,styles:Mi,unstyled:a,size:u,className:i,style:s,variant:p,disabled:D,radius:V,rightSection:M||Tp||b.jsx(Kt.Chevron,{size:u,error:pe,unstyled:a}),rightSectionPointerEvents:q||(Tp?"all":"none"),rightSectionWidth:z,rightSectionProps:j,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:J,leftSectionProps:re,inputContainer:ie,inputWrapperOrder:te,withAsterisk:ae,labelProps:_e,descriptionProps:ce,errorProps:ze,wrapperProps:Oe,description:$e,label:Ne,error:pe,multiline:!0,withErrorStyles:Ie,__stylesApiProps:{...n,rightSectionPointerEvents:q||(Tp?"all":"none"),multiline:!0},pointer:!Se,onClick:()=>Se?mr.openDropdown():mr.toggleDropdown(),"data-expanded":mr.dropdownOpened||void 0,id:Di,required:Br,mod:Or,children:b.jsxs(rb.Group,{disabled:D,unstyled:a,...ii("pillsList"),children:[ec,b.jsx(Kt.EventsTarget,{autoComplete:Zu,children:b.jsx(Wx.Field,{...Df,ref:t,id:Di,placeholder:An,type:!Se&&!An?"hidden":"visible",...ii("inputField"),unstyled:a,onFocus:or=>{O==null||O(or),Se&&mr.openDropdown()},onBlur:or=>{F==null||F(or),mr.closeDropdown(),zr("")},onKeyDown:Fo,value:vn,onChange:or=>{zr(or.currentTarget.value),Se&&mr.openDropdown(),w&&mr.selectFirstOption()},disabled:D,readOnly:$||!Se,pointer:!Se})})]})})}),b.jsx(MK,{data:le?yv:Qi,hidden:$||D,filter:E,search:vn,limit:T,hiddenWhenEmpty:!De,withScrollArea:I,maxDropdownHeight:k,filterOptions:Se,value:ht,checkIconPosition:He,withCheckIcon:at,nothingFoundMessage:De,unstyled:a,labelId:Ne?`${Di}-label`:void 0,"aria-label":Ne?void 0:Lo["aria-label"],renderOption:yn,scrollAreaProps:tr})]}),b.jsx(Kt.HiddenInput,{name:Ye,valuesDivider:_r,value:ht,form:fe,disabled:D,...St})]})});Hk.classes={...ru.classes,...Kt.classes};Hk.displayName="@mantine/core/MultiSelect";function tSe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var nI;(function(e){e.event="event",e.props="prop"})(nI||(nI={}));function s0(){}function QJe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function rI(e){return!!(e||"").match(/\d/)}function ox(e){return e==null}function JJe(e){return typeof e=="number"&&isNaN(e)}function nSe(e){return ox(e)||JJe(e)||typeof e=="number"&&!isFinite(e)}function rSe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function ZJe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function eZe(e,t,n){var r=ZJe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function tZe(e){var t=A.useRef(e);t.current=e;var n=A.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function iX(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function nZe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function iSe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function wue(e,t){return Array(t+1).join(e)}function sSe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+wue("0",Math.abs(o))+i:o>=a?i=i+wue("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function xue(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=iX(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,l=parseFloat("0."+(o||"0")),u=o.length<=t?"0."+o:l.toFixed(t),c=u.split("."),d=s;s&&Number(c[0])&&(d=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var f=iSe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+d+p+f}function s1(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var oSe=QJe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),rZe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function iZe(e,t,n){return Math.min(Math.max(e,t),n)}function tB(e){return Math.max(e.selectionStart,e.selectionEnd)}function sZe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function oZe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function aZe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function lZe(e,t,n,r,i,s,o){o===void 0&&(o=aZe);var a=i.findIndex(function(w){return w}),l=e.slice(0,a);!t&&!n.startsWith(l)&&(t=l,n=l+n,r=r+l.length);for(var u=n.length,c=e.length,d={},f=new Array(u),h=0;h<u;h++){f[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&d[p]!==!0){f[h]=p,d[p]=!0;break}}}for(var y=r;y<u&&(f[y]===-1||!s(n[y]));)y++;var v=y===u||f[y]===-1?c:f[y];for(y=r-1;y>0&&f[y]===-1;)y--;var _=y===-1||f[y]===-1?0:f[y]+1;return _>v?v:r-_<v-r?_:v}function Eue(e,t,n,r){var i=e.length;if(t=iZe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function uZe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(rI(e[n])||rI(e[n-1]));return t}function aSe(e,t,n,r,i,s){s===void 0&&(s=s0);var o=tZe(function(p,m){var g,y;return nSe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?sSe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=A.useState(function(){return o(ox(e)?t:e,n)}),l=a[0],u=a[1],c=function(p,m){p.formattedValue!==l.formattedValue&&u({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},d=e,f=n;ox(e)&&(d=l.numAsString,f=!0);var h=o(d,f);return A.useMemo(function(){u(h)},[h.formattedValue]),[l,c]}function cZe(e){return e.replace(/[^0-9]/g,"")}function dZe(e){return e}function fZe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=dZe);var a=e.removeFormatting;a===void 0&&(a=cZe);var l=e.defaultValue,u=e.valueIsNumericString,c=e.onValueChange,d=e.isAllowed,f=e.onChange;f===void 0&&(f=s0);var h=e.onKeyDown;h===void 0&&(h=s0);var p=e.onMouseUp;p===void 0&&(p=s0);var m=e.onFocus;m===void 0&&(m=s0);var g=e.onBlur;g===void 0&&(g=s0);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=uZe);var _=e.isValidInputCharacter;_===void 0&&(_=rI);var w=e.isCharacterSame,x=tSe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=aSe(y,l,!!u,o,a,c),E=S[0],T=E.formattedValue,I=E.numAsString,k=S[1],P=A.useRef(),L=A.useRef({formattedValue:T,numAsString:I}),R=function(pe,ue){L.current={formattedValue:pe.formattedValue,numAsString:pe.value},k(pe,ue)},$=A.useState(!1),D=$[0],O=$[1],F=A.useRef(null),U=A.useRef({setCaretTimeout:null,focusTimeout:null});A.useEffect(function(){return O(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var V=o,M=function(pe,ue){var Se=parseFloat(ue);return{formattedValue:pe,value:ue,floatValue:isNaN(Se)?void 0:Se}},z=function(pe,ue,Se){pe.selectionStart===0&&pe.selectionEnd===pe.value.length||(s1(pe,ue),U.current.setCaretTimeout=setTimeout(function(){pe.value===Se&&pe.selectionStart!==ue&&s1(pe,ue)},0))},q=function(pe,ue,Se){return Eue(pe,ue,v(pe),Se)},j=function(pe,ue,Se){var De=v(ue),at=lZe(ue,T,pe,Se,De,_,w);return at=Eue(ue,at,De),at},H=function(pe){var ue=pe.formattedValue;ue===void 0&&(ue="");var Se=pe.input,De=pe.source,at=pe.event,He=pe.numAsString,le;if(Se){var Ie=pe.inputValue||Se.value,Ye=tB(Se);Se.value=ue,le=j(Ie,ue,Ye),le!==void 0&&z(Se,le,ue)}ue!==T&&R(M(ue,He),{event:at,source:De})};A.useEffect(function(){var pe=L.current,ue=pe.formattedValue,Se=pe.numAsString;(T!==ue||I!==Se)&&R(M(T,I),{event:void 0,source:nI.props})},[T,I]);var G=F.current?tB(F.current):void 0,J=typeof window<"u"?A.useLayoutEffect:A.useEffect;J(function(){var pe=F.current;if(T!==L.current.formattedValue&&pe){var ue=j(L.current.formattedValue,T,G);pe.value=T,z(pe,ue,T)}},[T]);var re=function(pe,ue,Se){var De=ue.target,at=P.current?rZe(P.current,De.selectionEnd):oSe(T,pe),He=Object.assign(Object.assign({},at),{lastValue:T}),le=a(pe,He),Ie=V(le);if(le=a(Ie,void 0),d&&!d(M(Ie,le))){var Ye=ue.target,fe=tB(Ye),Te=j(pe,T,fe);return Ye.value=T,z(Ye,Te,T),!1}return H({formattedValue:Ie,numAsString:le,inputValue:pe,event:ue,source:Se,input:ue.target}),!0},ie=function(pe,ue){ue===void 0&&(ue=0);var Se=pe.selectionStart,De=pe.selectionEnd;P.current={selectionStart:Se,selectionEnd:De+ue}},te=function(pe){var ue=pe.target,Se=ue.value,De=re(Se,pe,nI.event);De&&f(pe),P.current=void 0},ae=function(pe){var ue=pe.target,Se=pe.key,De=ue.selectionStart,at=ue.selectionEnd,He=ue.value;He===void 0&&(He="");var le;Se==="ArrowLeft"||Se==="Backspace"?le=Math.max(De-1,0):Se==="ArrowRight"?le=Math.min(De+1,He.length):Se==="Delete"&&(le=De);var Ie=0;Se==="Delete"&&De===at&&(Ie=1);var Ye=Se==="ArrowLeft"||Se==="ArrowRight";if(le===void 0||De!==at&&!Ye){h(pe),ie(ue,Ie);return}var fe=le;if(Ye){var Te=Se==="ArrowLeft"?"left":"right";fe=q(He,le,Te),fe!==le&&pe.preventDefault()}else Se==="Delete"&&!_(He[le])?fe=q(He,le,"right"):Se==="Backspace"&&!_(He[le])&&(fe=q(He,le,"left"));fe!==le&&z(ue,fe,He),h(pe),ie(ue,Ie)},_e=function(pe){var ue=pe.target,Se=function(){var De=ue.selectionStart,at=ue.selectionEnd,He=ue.value;if(He===void 0&&(He=""),De===at){var le=q(He,De);le!==De&&z(ue,le,He)}};Se(),requestAnimationFrame(function(){Se()}),p(pe),ie(ue)},ce=function(pe){pe.persist&&pe.persist();var ue=pe.target,Se=pe.currentTarget;F.current=ue,U.current.focusTimeout=setTimeout(function(){var De=ue.selectionStart,at=ue.selectionEnd,He=ue.value;He===void 0&&(He="");var le=q(He,De);le!==De&&!(De===0&&at===He.length)&&z(ue,le,He),m(Object.assign(Object.assign({},pe),{currentTarget:Se}))},0)},ze=function(pe){F.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(pe)},Oe=D&&sZe()?"numeric":void 0,$e=Object.assign({inputMode:Oe},x,{type:t,value:T,onChange:te,onKeyDown:ae,onMouseUp:_e,onFocus:ce,onBlur:ze});if(n==="text")return i?Vi.createElement(Vi.Fragment,null,i(T,x)||null):Vi.createElement("span",Object.assign({},x,{ref:s}),T);if(r){var Ne=r;return Vi.createElement(Ne,Object.assign({},$e,{ref:s}))}return Vi.createElement("input",Object.assign({},$e,{ref:s}))}function Sue(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var l=KF(t),u=l.thousandSeparator,c=l.decimalSeparator,d=n!==0&&e.indexOf(".")!==-1||n&&r,f=iX(e,o),h=f.beforeDecimal,p=f.afterDecimal,m=f.addNegation;return n!==void 0&&(p=iSe(p,n,!!r)),u&&(h=eZe(h,u,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(d&&c||"")+p,e}function KF(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function hZe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function pZe(e,t){return new RegExp("(^-)|[0-9]|"+rSe(e),"g")}function mZe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function gZe(e,t,n){var r;t===void 0&&(t=oZe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,l=t.from,u=t.to,c=u.start,d=u.end,f=KF(n),h=f.allowedDecimalSeparators,p=f.decimalSeparator,m=e[d]===p;if(rI(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(d-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(F,U,V){var M=!1,z=!1;s.startsWith("-")?M=!1:F.startsWith("--")?(M=!1,z=!0):o.startsWith("-")&&F.length===o.length?M=!1:F[0]==="-"&&(M=!0);var q=M?1:0;return z&&(q=2),q&&(F=F.substring(q),U-=q,V-=q),{value:F,start:U,end:V,hasNegation:M}},v=y(e,c,d),_=v.hasNegation;r=v,e=r.value,c=r.start,d=r.end;var w=y(t.lastValue,l.start,l.end),x=w.start,S=w.end,E=w.value,T=e.substring(c,d);e.length&&E.length&&(x>E.length-o.length||S<s.length)&&!(T&&o.startsWith(T))&&(e=E);var I=0;e.startsWith(s)?I+=s.length:c<s.length&&(I=c),e=e.substring(I),d-=I;var k=e.length,P=e.length-o.length;e.endsWith(o)?k=P:(d>P||d>e.length-o.length)&&(k=d),e=e.substring(0,k),e=hZe(_?"-"+e:e,i),e=(e.match(pZe(p))||[]).join("");var L=e.indexOf(p);e=e.replace(new RegExp(rSe(p),"g"),function(F,U){return U===L?".":""});var R=iX(e,i),$=R.beforeDecimal,D=R.afterDecimal,O=R.addNegation;return u.end-u.start<l.end-l.start&&$===""&&m&&!parseFloat(D)&&(e=O?"-":""),e}function yZe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function vZe(e){var t=KF(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function bZe(e){e=vZe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=s0);var s=e.onBlur;s===void 0&&(s=s0);var o=e.thousandSeparator,a=e.decimalScale,l=e.fixedDecimalScale,u=e.prefix;u===void 0&&(u="");var c=e.defaultValue,d=e.value,f=e.valueIsNumericString,h=e.onValueChange,p=tSe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=KF(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(O){return Sue(O,e)},_=function(O,F){return gZe(O,F,e)},w=ox(d)?c:d,x=f??mZe(w,u,t);ox(d)?ox(c)||(x=x||typeof c=="number"):x=x||typeof d=="number";var S=function(O){return nSe(O)?O:(typeof O=="number"&&(O=sSe(O)),x&&typeof a=="number"?xue(O,a,!!l):O)},E=aSe(S(d),S(c),!!x,v,_,h),T=E[0],I=T.numAsString,k=T.formattedValue,P=E[1],L=function(O){var F=O.target,U=O.key,V=F.selectionStart,M=F.selectionEnd,z=F.value;if(z===void 0&&(z=""),(U==="Backspace"||U==="Delete")&&M<u.length){O.preventDefault();return}if(V!==M){i(O);return}U==="Backspace"&&z[0]==="-"&&V===u.length+1&&n&&s1(F,1),a&&l&&(U==="Backspace"&&z[V-1]===g?(s1(F,V-1),O.preventDefault()):U==="Delete"&&z[V]===g&&O.preventDefault()),y!=null&&y.includes(U)&&z[V]===g&&s1(F,V+1);var q=o===!0?",":o;U==="Backspace"&&z[V-1]===q&&s1(F,V-1),U==="Delete"&&z[V]===q&&s1(F,V+1),i(O)},R=function(O){var F=I;if(F.match(/\d/g)||(F=""),r||(F=nZe(F)),l&&a&&(F=xue(F,a,l)),F!==I){var U=Sue(F,e);P({formattedValue:U,value:F,floatValue:parseFloat(F)},{event:O,source:nI.event})}s(O)},$=function(O){return O===g?!0:rI(O)},D=function(O){var F=O.currentValue,U=O.lastValue,V=O.formattedValue,M=O.currentValueIndex,z=O.formattedValueIndex,q=F[M],j=V[z],H=oSe(U,F),G=H.to,J=function(re){return _(re).indexOf(".")+u.length};return d===0&&l&&a&&J(F)<M&&J(V)>z?!1:M>=G.start&&M<G.end&&y&&y.includes(q)&&j===g?!0:q===j};return Object.assign(Object.assign({},p),{value:k,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:D,onValueChange:P,format:v,removeFormatting:_,getCaretBoundary:function(O){return yZe(O,e)},onKeyDown:L,onBlur:R})}function _Ze(e){var t=bZe(e);return Vi.createElement(fZe,Object.assign({},t))}function Tue({direction:e,style:t,...n}){return b.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:b.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var $U={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const wZe=/^(0\.0*|-0(\.0*)?)$/,xZe=/^-?0\d+(\.\d+)?\.?$/;function EZe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function Cue(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const SZe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},TZe=(e,{size:t})=>({controls:{"--ni-chevron-size":Ht(t,"ni-chevron-size")}}),sX=Pe((e,t)=>{const n=be("NumberInput",SZe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:l,onValueChange:u,value:c,defaultValue:d,max:f,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:_,allowDecimal:w,decimalScale:x,onKeyDown:S,onKeyDownCapture:E,handlersRef:T,startValue:I,disabled:k,rightSectionPointerEvents:P,allowNegative:L,readOnly:R,size:$,rightSectionWidth:D,stepHoldInterval:O,stepHoldDelay:F,allowLeadingZeros:U,withKeyboardEvents:V,trimLeadingZeroesOnBlur:M,...z}=n,q=ft({name:"NumberInput",classes:$U,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:TZe}),{resolvedClassNames:j,resolvedStyles:H}=rp({classNames:i,styles:s,props:n}),[G,J]=Pi({value:c,defaultValue:d,onChange:l}),re=F!==void 0&&O!==void 0,ie=A.useRef(null),te=A.useRef(null),ae=A.useRef(0),_e=(le,Ie)=>{Ie.source==="event"&&J(EZe(le.floatValue)&&!wZe.test(le.value)&&!(U&&xZe.test(le.value))?le.floatValue:le.value),u==null||u(le,Ie)},ce=le=>{const Ie=String(le).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return Ie?Math.max(0,(Ie[1]?Ie[1].length:0)-(Ie[2]?+Ie[2]:0)):0},ze=le=>{ie.current&&typeof le<"u"&&ie.current.setSelectionRange(le,le)},Oe=A.useRef();Oe.current=()=>{let le;const Ie=ce(G),Ye=ce(p),fe=Math.max(Ie,Ye),Te=10**fe;if(typeof G!="number"||Number.isNaN(G))le=_c(I,h,f);else if(f!==void 0){const et=(Math.round(G*Te)+Math.round(p*Te))/Te;le=et<=f?et:f}else le=(Math.round(G*Te)+Math.round(p*Te))/Te;const Ve=le.toFixed(fe);J(parseFloat(Ve)),u==null||u({floatValue:parseFloat(Ve),formattedValue:Ve,value:Ve},{source:"increment"}),setTimeout(()=>{var et;return ze((et=ie.current)==null?void 0:et.value.length)},0)};const $e=A.useRef();$e.current=()=>{let le;const Ie=h!==void 0?h:L?Number.MIN_SAFE_INTEGER:0,Ye=ce(G),fe=ce(p),Te=Math.max(Ye,fe),Ve=10**Te;if(typeof G!="number"||Number.isNaN(G))le=_c(I,Ie,f);else{const St=(Math.round(G*Ve)-Math.round(p*Ve))/Ve;le=Ie!==void 0&&St<Ie?Ie:St}const et=le.toFixed(Te);J(parseFloat(et)),u==null||u({floatValue:parseFloat(et),formattedValue:et,value:et},{source:"decrement"}),setTimeout(()=>{var St;return ze((St=ie.current)==null?void 0:St.value.length)},0)};const Ne=le=>{S==null||S(le),!(R||!V)&&(le.key==="ArrowUp"&&(le.preventDefault(),Oe.current()),le.key==="ArrowDown"&&(le.preventDefault(),$e.current()))},pe=le=>{if(E==null||E(le),le.key==="Backspace"){const Ie=ie.current;Ie.selectionStart===0&&Ie.selectionStart===Ie.selectionEnd&&(le.preventDefault(),window.setTimeout(()=>ze(0),0))}};IY(T,{increment:Oe.current,decrement:$e.current});const ue=le=>{le?Oe.current():$e.current(),ae.current+=1},Se=le=>{if(ue(le),re){const Ie=typeof O=="number"?O:O(ae.current);te.current=window.setTimeout(()=>Se(le),Ie)}},De=(le,Ie)=>{var Ye;le.preventDefault(),(Ye=ie.current)==null||Ye.focus(),ue(Ie),re&&(te.current=window.setTimeout(()=>Se(Ie),F))},at=()=>{te.current&&window.clearTimeout(te.current),te.current=null,ae.current=0},He=b.jsxs("div",{...q("controls"),children:[b.jsx(os,{...q("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&f!==void 0&&G>=f,mod:{direction:"up"},onMouseDown:le=>le.preventDefault(),onPointerDown:le=>{De(le,!0)},onPointerUp:at,onPointerLeave:at,children:b.jsx(Tue,{direction:"up"})}),b.jsx(os,{...q("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:le=>le.preventDefault(),onPointerDown:le=>{De(le,!1)},onPointerUp:at,onPointerLeave:at,children:b.jsx(Tue,{direction:"down"})})]});return b.jsx(ru,{component:_Ze,allowNegative:L,className:dt($U.root,r),size:$,...z,readOnly:R,disabled:k,value:G,getInputRef:Ki(t,ie),onValueChange:_e,rightSection:m||R?g:g||He,classNames:j,styles:H,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?x:0,onKeyDown:Ne,onKeyDownCapture:pe,rightSectionPointerEvents:P??(k?"none":void 0),rightSectionWidth:D??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:U,onBlur:le=>{if(_==null||_(le),v==="blur"&&typeof G=="number"&&_c(G,h,f)!==G&&J(_c(G,h,f)),M&&typeof G=="string"){const Ie=G.replace(/^0+/,""),Ye=parseFloat(Ie);J(Number.isNaN(Ye)||Ye>Number.MAX_SAFE_INTEGER?Ie:Ye)}},isAllowed:le=>v==="strict"?y?y(le)&&Cue(le.floatValue,h,f):Cue(le.floatValue,h,f):y?y(le):!0})});sX.classes={...ru.classes,...$U};sX.displayName="@mantine/core/NumberInput";const[CZe,XF]=js("Pagination.Root component was not found in tree");var qk={root:"m_4addd315",control:"m_326d024a",dots:"m_4ad7767d"};const AZe={withPadding:!0},Wk=Pe((e,t)=>{const n=be("PaginationControl",AZe,e),{classNames:r,className:i,style:s,styles:o,vars:a,active:l,disabled:u,withPadding:c,mod:d,...f}=n,h=XF(),p=u||h.disabled;return b.jsx(os,{ref:t,disabled:p,mod:[{active:l,disabled:p,"with-padding":c},d],...h.getStyles("control",{className:i,style:s,classNames:r,styles:o,active:!p}),...f})});Wk.classes=qk;Wk.displayName="@mantine/core/PaginationControl";function Gk({style:e,children:t,path:n,...r}){return b.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)",...e},...r,children:b.jsx("path",{d:n,fill:"currentColor"})})}const IZe=e=>b.jsx(Gk,{...e,path:"M8.781 8l-3.3-3.3.943-.943L10.667 8l-4.243 4.243-.943-.943 3.3-3.3z"}),kZe=e=>b.jsx(Gk,{...e,path:"M7.219 8l3.3 3.3-.943.943L5.333 8l4.243-4.243.943.943-3.3 3.3z"}),RZe=e=>b.jsx(Gk,{...e,path:"M6.85355 3.85355C7.04882 3.65829 7.04882 3.34171 6.85355 3.14645C6.65829 2.95118 6.34171 2.95118 6.14645 3.14645L2.14645 7.14645C1.95118 7.34171 1.95118 7.65829 2.14645 7.85355L6.14645 11.8536C6.34171 12.0488 6.65829 12.0488 6.85355 11.8536C7.04882 11.6583 7.04882 11.3417 6.85355 11.1464L3.20711 7.5L6.85355 3.85355ZM12.8536 3.85355C13.0488 3.65829 13.0488 3.34171 12.8536 3.14645C12.6583 2.95118 12.3417 2.95118 12.1464 3.14645L8.14645 7.14645C7.95118 7.34171 7.95118 7.65829 8.14645 7.85355L12.1464 11.8536C12.3417 12.0488 12.6583 12.0488 12.8536 11.8536C13.0488 11.6583 13.0488 11.3417 12.8536 11.1464L9.20711 7.5L12.8536 3.85355Z"}),PZe=e=>b.jsx(Gk,{...e,path:"M2.14645 11.1464C1.95118 11.3417 1.95118 11.6583 2.14645 11.8536C2.34171 12.0488 2.65829 12.0488 2.85355 11.8536L6.85355 7.85355C7.04882 7.65829 7.04882 7.34171 6.85355 7.14645L2.85355 3.14645C2.65829 2.95118 2.34171 2.95118 2.14645 3.14645C1.95118 3.34171 1.95118 3.65829 2.14645 3.85355L5.79289 7.5L2.14645 11.1464ZM8.14645 11.1464C7.95118 11.3417 7.95118 11.6583 8.14645 11.8536C8.34171 12.0488 8.65829 12.0488 8.85355 11.8536L12.8536 7.85355C13.0488 7.65829 13.0488 7.34171 12.8536 7.14645L8.85355 3.14645C8.65829 2.95118 8.34171 2.95118 8.14645 3.14645C7.95118 3.34171 7.95118 3.65829 8.14645 3.85355L11.7929 7.5L8.14645 11.1464Z"}),NZe=e=>b.jsx(Gk,{...e,path:"M2 8c0-.733.6-1.333 1.333-1.333.734 0 1.334.6 1.334 1.333s-.6 1.333-1.334 1.333C2.6 9.333 2 8.733 2 8zm9.333 0c0-.733.6-1.333 1.334-1.333C13.4 6.667 14 7.267 14 8s-.6 1.333-1.333 1.333c-.734 0-1.334-.6-1.334-1.333zM6.667 8c0-.733.6-1.333 1.333-1.333s1.333.6 1.333 1.333S8.733 9.333 8 9.333 6.667 8.733 6.667 8z"}),OZe={icon:NZe},QF=Pe((e,t)=>{const n=be("PaginationDots",OZe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:l,...u}=n,c=XF(),d=l;return b.jsx(ge,{ref:t,...c.getStyles("dots",{className:i,style:s,styles:o,classNames:r}),...u,children:b.jsx(d,{style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});QF.classes=qk;QF.displayName="@mantine/core/PaginationDots";function JF({icon:e,name:t,action:n,type:r}){const i={icon:e},s=A.forwardRef((o,a)=>{const{icon:l,...u}=be(t,i,o),c=l,d=XF(),f=r==="next"?d.active===d.total:d.active===1;return b.jsx(Wk,{disabled:d.disabled||f,ref:a,onClick:d[n],withPadding:!1,...u,children:b.jsx(c,{className:"mantine-rotate-rtl",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});return s.displayName=`@mantine/core/${t}`,s}const lSe=JF({icon:IZe,name:"PaginationNext",action:"onNext",type:"next"}),uSe=JF({icon:kZe,name:"PaginationPrevious",action:"onPrevious",type:"previous"}),cSe=JF({icon:RZe,name:"PaginationFirst",action:"onFirst",type:"previous"}),dSe=JF({icon:PZe,name:"PaginationLast",action:"onLast",type:"next"});function oX({dotsIcon:e}){const t=XF(),n=t.range.map((r,i)=>{var s;return r==="dots"?b.jsx(QF,{icon:e},i):b.jsx(Wk,{active:r===t.active,"aria-current":r===t.active?"page":void 0,onClick:()=>t.onChange(r),disabled:t.disabled,...(s=t.getItemProps)==null?void 0:s.call(t,r),children:r},i)});return b.jsx(b.Fragment,{children:n})}oX.displayName="@mantine/core/PaginationItems";const DZe={siblings:1,boundaries:1},MZe=(e,{size:t,radius:n,color:r,autoContrast:i})=>({root:{"--pagination-control-radius":n===void 0?void 0:br(n),"--pagination-control-size":Ht(t,"pagination-control-size"),"--pagination-control-fz":Os(t),"--pagination-active-bg":r?Rr(r,e):void 0,"--pagination-active-color":Uy(i,e)?np({color:r,theme:e,autoContrast:i}):void 0}}),ZF=Pe((e,t)=>{const n=be("PaginationRoot",DZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,total:u,value:c,defaultValue:d,onChange:f,disabled:h,siblings:p,boundaries:m,color:g,radius:y,onNextPage:v,onPreviousPage:_,onFirstPage:w,onLastPage:x,getItemProps:S,autoContrast:E,...T}=n,I=ft({name:"Pagination",classes:qk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:MZe}),{range:k,setPage:P,next:L,previous:R,active:$,first:D,last:O}=Sqe({page:c,initialPage:d,onChange:f,total:u,siblings:p,boundaries:m}),F=xu(v,L),U=xu(_,R),V=xu(w,D),M=xu(x,O);return b.jsx(CZe,{value:{total:u,range:k,active:$,disabled:h,getItemProps:S,onChange:P,onNext:F,onPrevious:U,onFirst:V,onLast:M,getStyles:I},children:b.jsx(ge,{ref:t,...I("root"),...T})})});ZF.classes=qk;ZF.displayName="@mantine/core/PaginationRoot";const $Ze={withControls:!0,siblings:1,boundaries:1,gap:8},_f=Pe((e,t)=>{const n=be("Pagination",$Ze,e),{withEdges:r,withControls:i,getControlProps:s,nextIcon:o,previousIcon:a,lastIcon:l,firstIcon:u,dotsIcon:c,total:d,gap:f,hideWithOnePage:h,...p}=n;return d<=0||h&&d===1?null:b.jsx(ZF,{ref:t,total:d,...p,children:b.jsxs(gn,{gap:f,children:[r&&b.jsx(cSe,{icon:u,...s==null?void 0:s("first")}),i&&b.jsx(uSe,{icon:a,...s==null?void 0:s("previous")}),b.jsx(oX,{dotsIcon:c}),i&&b.jsx(lSe,{icon:o,...s==null?void 0:s("next")}),r&&b.jsx(dSe,{icon:l,...s==null?void 0:s("last")})]})})});_f.classes=qk;_f.displayName="@mantine/core/Pagination";_f.Root=ZF;_f.Control=Wk;_f.Dots=QF;_f.First=cSe;_f.Last=dSe;_f.Next=lSe;_f.Previous=uSe;_f.Items=oX;const[LZe,fSe]=js("Progress.Root component was not found in tree");var Yk={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const FZe={},aX=Pe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=be("ProgressLabel",FZe,e),l=fSe();return b.jsx(ge,{ref:t,...l.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});aX.classes=Yk;aX.displayName="@mantine/core/ProgressLabel";const jZe={},BZe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":Ht(t,"progress-size"),"--progress-radius":n===void 0?void 0:br(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),e6=Pe((e,t)=>{const n=be("ProgressRoot",jZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,autoContrast:u,transitionDuration:c,...d}=n,f=ft({name:"Progress",classes:Yk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:BZe});return b.jsx(LZe,{value:{getStyles:f,autoContrast:u},children:b.jsx(ge,{ref:t,...f("root"),...d})})});e6.classes=Yk;e6.displayName="@mantine/core/ProgressRoot";const zZe={withAria:!0},t6=Pe((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:l,color:u,striped:c,animated:d,mod:f,...h}=be("ProgressSection",zZe,e),p=fSe(),m=ds(),g=l?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return b.jsx(ge,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||d,animated:d},f],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Rr(u,m),"--progress-label-color":Uy(p.autoContrast,m)?np({color:u,theme:m,autoContrast:p.autoContrast}):void 0}})});t6.classes=Yk;t6.displayName="@mantine/core/ProgressSection";const UZe={},Yb=Pe((e,t)=>{const n=be("Progress",UZe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:l,animated:u,"aria-label":c,...d}=n,{resolvedClassNames:f,resolvedStyles:h}=rp({classNames:i,styles:s,props:n});return b.jsx(e6,{ref:t,classNames:f,styles:h,vars:o,...d,children:b.jsx(t6,{value:r,color:a,striped:l,animated:u,"aria-label":c})})});Yb.classes=Yk;Yb.displayName="@mantine/core/Progress";Yb.Section=t6;Yb.Root=e6;Yb.Label=aX;const[VZe,hSe]=Ub(),[HZe,qZe]=Ub();var pSe={card:"m_9dc8ae12"};const WZe={withBorder:!0},GZe=(e,{radius:t})=>({card:{"--card-radius":br(t)}}),lX=Pe((e,t)=>{const n=be("RadioCard",WZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,checked:u,mod:c,withBorder:d,value:f,onClick:h,name:p,onKeyDown:m,...g}=n,y=ft({name:"RadioCard",classes:pSe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:GZe,rootSelector:"card"}),{dir:v}=ol(),_=hSe(),w=typeof u=="boolean"?u:(_==null?void 0:_.value)===f||!1,x=p||(_==null?void 0:_.name),S=E=>{if(m==null||m(E),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(E.nativeEvent.code)){E.preventDefault();const T=Array.from(document.querySelectorAll(`[role="radio"][name="${x||"__mantine"}"]`)),I=T.findIndex(L=>L===E.target),k=I+1>=T.length?0:I+1,P=I-1<0?T.length-1:I-1;E.nativeEvent.code==="ArrowDown"&&(T[k].focus(),T[k].click()),E.nativeEvent.code==="ArrowUp"&&(T[P].focus(),T[P].click()),E.nativeEvent.code==="ArrowLeft"&&(T[v==="ltr"?P:k].focus(),T[v==="ltr"?P:k].click()),E.nativeEvent.code==="ArrowRight"&&(T[v==="ltr"?k:P].focus(),T[v==="ltr"?k:P].click())}};return b.jsx(HZe,{value:{checked:w},children:b.jsx(os,{ref:t,mod:[{"with-border":d,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:x,onClick:E=>{h==null||h(E),_==null||_.onChange(f||"")},onKeyDown:S})})});lX.displayName="@mantine/core/RadioCard";lX.classes=pSe;const YZe={},uX=Pe((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:l,readOnly:u,...c}=be("RadioGroup",YZe,e),d=Do(l),[f,h]=Pi({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!u&&h(typeof m=="string"?m:m.currentTarget.value);return b.jsx(VZe,{value:{value:f,onChange:p,size:s,name:d},children:b.jsx(Pr.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:b.jsx(NK,{role:"radiogroup",children:a})})})});uX.classes=Pr.Wrapper.classes;uX.displayName="@mantine/core/RadioGroup";function mSe({size:e,style:t,...n}){return b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:xe(e),height:xe(e),...t},"aria-hidden":!0,...n,children:b.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var gSe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const KZe={icon:mSe},XZe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=yf({color:n||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Ht(r,"radio-size"),"--radio-radius":t===void 0?void 0:br(t),"--radio-color":s==="outline"?l:Rr(n,e),"--radio-icon-size":Ht(r,"radio-icon-size"),"--radio-icon-color":i?Rr(i,e):Uy(o,e)?np({color:n,theme:e,autoContrast:o}):void 0}}},cX=Pe((e,t)=>{const n=be("RadioIndicator",KZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,icon:u,radius:c,color:d,iconColor:f,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,_=u,w=ft({name:"RadioIndicator",classes:gSe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:XZe,rootSelector:"indicator"}),x=qZe(),S=typeof p=="boolean"?p:(x==null?void 0:x.checked)||!1;return b.jsx(ge,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:b.jsx(_,{...w("icon")})})});cX.displayName="@mantine/core/RadioIndicator";cX.classes=gSe;var ySe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const QZe={labelPosition:"right"},JZe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=yf({color:r||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Ht(t,"radio-size"),"--radio-radius":n===void 0?void 0:br(n),"--radio-color":s==="outline"?l:Rr(r,e),"--radio-icon-color":i?Rr(i,e):Uy(o,e)?np({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":Ht(t,"radio-icon-size")}}},ny=Pe((e,t)=>{const n=be("Radio",QZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,id:u,size:c,label:d,labelPosition:f,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:_,icon:w=mSe,rootRef:x,iconColor:S,onChange:E,mod:T,...I}=n,k=ft({name:"Radio",classes:ySe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:JZe}),P=hSe(),L=(P==null?void 0:P.size)??c,R=n.size?c:L,{styleProps:$,rest:D}=Hb(I),O=Do(u),F=P?{checked:P.value===D.value,name:D.name??P.name,onChange:U=>{P.onChange(U),E==null||E(U)}}:{};return b.jsx(RF,{...k("root"),__staticSelector:"Radio",__stylesApiProps:n,id:O,size:R,labelPosition:f,label:d,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":F.checked||void 0,variant:y,ref:x,mod:T,...$,..._,children:b.jsxs(ge,{...k("inner"),mod:{"label-position":f},children:[b.jsx(ge,{...k("radio",{focusable:!0,variant:y}),onChange:E,...D,...F,component:"input",mod:{error:!!p},ref:t,id:O,disabled:v,type:"radio"}),b.jsx(w,{...k("icon"),"aria-hidden":!0})]})})});ny.classes=ySe;ny.displayName="@mantine/core/Radio";ny.Group=uX;ny.Card=lX;ny.Indicator=cX;const ZZe={duration:100,transition:"fade"};function eet(e,t){return{...ZZe,...t,...e}}function tet({offset:e,position:t,defaultOpened:n}){const[r,i]=A.useState(n),s=A.useRef(),{x:o,y:a,elements:l,refs:u,update:c,placement:d}=QY({placement:t,middleware:[GY({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=d.includes("right")?e:t.includes("left")?e*-1:0,h=d.includes("bottom")?e:t.includes("top")?e*-1:0,p=A.useCallback(({clientX:m,clientY:g})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+f,top:g+h,right:m,bottom:g}}})},[l.reference]);return A.useEffect(()=>{if(u.floating.current){const m=s.current;m.addEventListener("mousemove",p);const g=hm(u.floating.current);return g.forEach(y=>{y.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(y=>{y.removeEventListener("scroll",c)})}}},[l.reference,u.floating.current,c,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:u.setFloating}}var n6={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const net={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:Kc("popover")},ret=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:br(t),"--tooltip-bg":n?Rr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),dX=Pe((e,t)=>{const n=be("TooltipFloating",net,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:l,styles:u,unstyled:c,radius:d,color:f,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,defaultOpened:_,variant:w,vars:x,portalProps:S,...E}=n,T=ds(),I=ft({name:"TooltipFloating",props:n,classes:n6,className:a,style:o,classNames:l,styles:u,unstyled:c,rootSelector:"tooltip",vars:x,varsResolver:ret}),{handleMouseMove:k,x:P,y:L,opened:R,boundaryRef:$,floating:D,setOpened:O}=tet({offset:p,position:m,defaultOpened:_});if(!By(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const F=Ki($,r.ref,t),U=M=>{var z,q;(q=(z=r.props).onMouseEnter)==null||q.call(z,M),k(M),O(!0)},V=M=>{var z,q;(q=(z=r.props).onMouseLeave)==null||q.call(z,M),O(!1)};return b.jsxs(b.Fragment,{children:[b.jsx(Lk,{...S,withinPortal:s,children:b.jsx(ge,{...E,...I("tooltip",{style:{...DY(o,T),zIndex:y,display:!v&&R?"block":"none",top:(L&&Math.round(L))??"",left:(P&&Math.round(P))??""}}),variant:w,ref:D,mod:{multiline:g},children:h})}),A.cloneElement(r,{...r.props,[i]:F,onMouseEnter:U,onMouseLeave:V})]})});dX.classes=n6;dX.displayName="@mantine/core/TooltipFloating";const vSe=A.createContext(!1),iet=vSe.Provider,set=()=>A.useContext(vSe),oet={openDelay:0,closeDelay:0};function fX(e){const{openDelay:t,closeDelay:n,children:r}=be("TooltipGroup",oet,e);return b.jsx(iet,{value:!0,children:b.jsx(SYe,{delay:{open:t,close:n},children:r})})}fX.displayName="@mantine/core/TooltipGroup";fX.extend=e=>e;function aet(e){var S,E,T;const[t,n]=A.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,s=set(),o=Do(),{delay:a,currentId:l,setCurrentId:u}=Gxe(),c=A.useCallback(I=>{n(I),I&&u(o)},[u,o]),{x:d,y:f,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=QY({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[Uxe(e.offset),GY({padding:8}),kU(),Vxe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[RU()]:[]]}),{getReferenceProps:_,getFloatingProps:w}=NYe([EYe(h,{enabled:(S=e.events)==null?void 0:S.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((E=e.events)!=null&&E.touch)}),PYe(h,{enabled:(T=e.events)==null?void 0:T.focus,visibleOnly:!0}),DYe(h,{role:"tooltip"}),kYe(h,{enabled:typeof e.opened>"u"}),TYe(h,{id:o})]);eEe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),Mu(()=>{var I;(I=e.onPositionChange)==null||I.call(e,g)},[g]);const x=i&&l&&l!==o;return{x:d,y:f,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:_,isGroupPhase:x,opened:i,placement:g}}const Aue={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Kc("popover"),positionDependencies:[]},uet=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:br(t),"--tooltip-bg":n?Rr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Xt=Pe((e,t)=>{const n=be("Tooltip",Aue,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:l,onPositionChange:u,opened:c,defaultOpened:d,withinPortal:f,radius:h,color:p,classNames:m,styles:g,unstyled:y,style:v,className:_,withArrow:w,arrowSize:x,arrowOffset:S,arrowRadius:E,arrowPosition:T,offset:I,transitionProps:k,multiline:P,events:L,zIndex:R,disabled:$,positionDependencies:D,onClick:O,onMouseEnter:F,onMouseLeave:U,inline:V,variant:M,keepMounted:z,vars:q,portalProps:j,mod:H,floatingStrategy:G,...J}=be("Tooltip",Aue,n),{dir:re}=ol(),ie=A.useRef(null),te=aet({position:Yxe(re,i),closeDelay:l,openDelay:a,onPositionChange:u,opened:c,defaultOpened:d,events:L,arrowRef:ie,arrowOffset:S,offset:typeof I=="number"?I+(w?x/2:0):I,positionDependencies:[...D,r],inline:V,strategy:G}),ae=ft({name:"Tooltip",props:n,classes:n6,className:_,style:v,classNames:m,styles:g,unstyled:y,rootSelector:"tooltip",vars:q,varsResolver:uet});if(!By(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const _e=Ki(te.reference,r.ref,t),ce=eet(k,{duration:100,transition:"fade"});return b.jsxs(b.Fragment,{children:[b.jsx(Lk,{...j,withinPortal:f,children:b.jsx(vf,{...ce,keepMounted:z,mounted:!$&&!!te.opened,duration:te.isGroupPhase?10:ce.duration,children:ze=>b.jsxs(ge,{...J,"data-fixed":G==="fixed"||void 0,variant:M,mod:[{multiline:P},H],...te.getFloatingProps({ref:te.floating,className:ae("tooltip").className,style:{...ae("tooltip").style,...ze,zIndex:R,top:te.y??0,left:te.x??0}}),children:[o,b.jsx(JY,{ref:ie,arrowX:te.arrowX,arrowY:te.arrowY,visible:w,position:te.placement,arrowSize:x,arrowOffset:S,arrowRadius:E,arrowPosition:T,...ae("arrow")})]})})}),A.cloneElement(r,te.getReferenceProps({onClick:O,onMouseEnter:F,onMouseLeave:U,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:_e,className:dt(_,r.props.className),...r.props}))]})});Xt.classes=n6;Xt.displayName="@mantine/core/Tooltip";Xt.Floating=dX;Xt.Group=fX;var bSe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const cet={withItemsBorders:!0},det=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:br(t),"--sc-color":n?Rr(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":Ht(i,"sc-padding"),"--sc-font-size":Os(i)}}),hX=Pe((e,t)=>{var J,re;const n=be("SegmentedControl",cet,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,data:u,value:c,defaultValue:d,onChange:f,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:_,color:w,transitionDuration:x,transitionTimingFunction:S,variant:E,autoContrast:T,withItemsBorders:I,mod:k,...P}=n,L=ft({name:"SegmentedControl",props:n,classes:bSe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:det}),R=ds(),$=u.map(ie=>typeof ie=="string"?{label:ie,value:ie}:ie),D=Pqe(),[O,F]=A.useState(null),[U,V]=A.useState({}),M=(ie,te)=>{U[te]=ie,V(U)},[z,q]=Pi({value:c,defaultValue:d,finalValue:Array.isArray(u)?((J=$.find(ie=>!ie.disabled))==null?void 0:J.value)??((re=u[0])==null?void 0:re.value)??null:null,onChange:f}),j=Do(p),H=$.map(ie=>A.createElement(ge,{...L("control"),mod:{active:z===ie.value,orientation:v},key:ie.value},A.createElement("input",{...L("input"),disabled:m||ie.disabled,type:"radio",name:j,value:ie.value,id:`${j}-${ie.value}`,checked:z===ie.value,onChange:()=>!g&&q(ie.value),"data-focus-ring":R.focusRing,key:`${ie.value}-input`}),A.createElement(ge,{component:"label",...L("label"),mod:{active:z===ie.value&&!(m||ie.disabled),disabled:m||ie.disabled,"read-only":g},htmlFor:`${j}-${ie.value}`,ref:te=>M(te,ie.value),__vars:{"--sc-label-color":w!==void 0?np({color:w,theme:R,autoContrast:T}):void 0},key:`${ie.value}-label`},b.jsx("span",{...L("innerLabel"),children:ie.label})))),G=Ki(t,ie=>F(ie));return u.length===0?null:b.jsxs(ge,{...L("root"),variant:E,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:D,"with-items-borders":I},k],...P,role:"radiogroup","data-disabled":m,children:[typeof z=="string"&&b.jsx(uK,{target:U[z],parent:O,component:"span",transitionDuration:"var(--sc-transition-duration)",...L("indicator")}),H]})});hX.classes=bSe;hX.displayName="@mantine/core/SegmentedControl";const fet={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},zl=Pe((e,t)=>{const n=be("Select",fet,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:l,onDropdownClose:u,onDropdownOpen:c,onFocus:d,onBlur:f,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:_,comboboxProps:w,readOnly:x,disabled:S,filter:E,limit:T,withScrollArea:I,maxDropdownHeight:k,size:P,searchable:L,rightSection:R,checkIconPosition:$,withCheckIcon:D,nothingFoundMessage:O,name:F,form:U,searchValue:V,defaultSearchValue:M,onSearchChange:z,allowDeselect:q,error:j,rightSectionPointerEvents:H,id:G,clearable:J,clearButtonProps:re,hiddenInputProps:ie,renderOption:te,onClear:ae,autoComplete:_e,scrollAreaProps:ce,...ze}=n,Oe=A.useMemo(()=>_K(m),[m]),$e=A.useMemo(()=>kF(Oe),[Oe]),Ne=Do(G),[pe,ue,Se]=Pi({value:g,defaultValue:y,finalValue:null,onChange:p}),De=typeof pe=="string"?$e[pe]:void 0,at=kqe(De),[He,le]=Pi({value:V,defaultValue:M,finalValue:De?De.label:"",onChange:z}),Ie=Uk({opened:a,defaultOpened:l,onDropdownOpen:()=>{c==null||c(),Ie.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{u==null||u(),Ie.resetSelectedOption()}}),{resolvedClassNames:Ye,resolvedStyles:fe}=rp({props:n,styles:i,classNames:r});A.useEffect(()=>{v&&Ie.selectFirstOption()},[v,pe]),A.useEffect(()=>{g===null&&le(""),typeof g=="string"&&De&&((at==null?void 0:at.value)!==De.value||(at==null?void 0:at.label)!==De.label)&&le(De.label)},[g,De]);const Te=J&&!!pe&&!S&&!x&&b.jsx(Kt.ClearButton,{size:P,...re,onClear:()=>{ue(null,null),le(""),ae==null||ae()}});return b.jsxs(b.Fragment,{children:[b.jsxs(Kt,{store:Ie,__staticSelector:"Select",classNames:Ye,styles:fe,unstyled:s,readOnly:x,onOptionSubmit:Ve=>{_==null||_(Ve);const et=q&&$e[Ve].value===pe?null:$e[Ve],St=et?et.value:null;St!==pe&&ue(St,et),!Se&&le(typeof St=="string"&&(et==null?void 0:et.label)||""),Ie.closeDropdown()},size:P,...w,children:[b.jsx(Kt.Target,{targetType:L?"input":"button",autoComplete:_e,children:b.jsx(ru,{id:Ne,ref:t,rightSection:R||Te||b.jsx(Kt.Chevron,{size:P,error:j,unstyled:s}),rightSectionPointerEvents:H||(Te?"all":"none"),...ze,size:P,__staticSelector:"Select",disabled:S,readOnly:x||!L,value:He,onChange:Ve=>{le(Ve.currentTarget.value),Ie.openDropdown(),v&&Ie.selectFirstOption()},onFocus:Ve=>{L&&Ie.openDropdown(),d==null||d(Ve)},onBlur:Ve=>{var et;L&&Ie.closeDropdown(),le(pe!=null&&((et=$e[pe])==null?void 0:et.label)||""),f==null||f(Ve)},onClick:Ve=>{L?Ie.openDropdown():Ie.toggleDropdown(),h==null||h(Ve)},classNames:Ye,styles:fe,unstyled:s,pointer:!L,error:j})}),b.jsx(MK,{data:Oe,hidden:x||S,filter:E,search:He,limit:T,hiddenWhenEmpty:!O,withScrollArea:I,maxDropdownHeight:k,filterOptions:L&&(De==null?void 0:De.label)!==He,value:pe,checkIconPosition:$,withCheckIcon:D,nothingFoundMessage:O,unstyled:s,labelId:ze.label?`${Ne}-label`:void 0,"aria-label":ze.label?void 0:ze["aria-label"],renderOption:te,scrollAreaProps:ce})]}),b.jsx(Kt.HiddenInput,{value:pe,name:F,form:U,disabled:S,...ie})]})});zl.classes={...ru.classes,...Kt.classes};zl.displayName="@mantine/core/Select";var _Se={root:"m_18320242","skeleton-fade":"m_299c329c"};const het={visible:!0,animate:!0},pet=(e,{width:t,height:n,radius:r,circle:i})=>({root:{"--skeleton-height":xe(n),"--skeleton-width":xe(i?n:t),"--skeleton-radius":i?"1000px":r===void 0?void 0:br(r)}}),pX=Pe((e,t)=>{const n=be("Skeleton",het,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,width:u,height:c,circle:d,visible:f,radius:h,animate:p,mod:m,...g}=n,y=ft({name:"Skeleton",classes:_Se,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:pet});return b.jsx(ge,{ref:t,...y("root"),mod:[{visible:f,animate:p},m],...g})});pX.classes=_Se;pX.displayName="@mantine/core/Skeleton";const[wSe,r6]=js("SliderProvider was not found in tree"),mX=A.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:l}=r6();return b.jsx(ge,{tabIndex:-1,variant:n,size:e,ref:a,...l("root"),...o})});mX.displayName="@mantine/core/SliderRoot";const KM=A.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:l,labelAlwaysOn:u,thumbLabel:c,onFocus:d,onBlur:f,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=r6(),[_,w]=A.useState(!1),x=u||s||_||h&&p;return b.jsxs(ge,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof d=="function"&&d()},onBlur:()=>{w(!1),typeof f=="function"&&f()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,b.jsx(vf,{mounted:i!=null&&!!x,transition:"fade",duration:0,...l,children:S=>b.jsx("div",{...v("label",{style:S}),children:i})})]})});KM.displayName="@mantine/core/SliderThumb";function XM({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function met({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function xSe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=r6();if(!e)return null;const l=e.map((u,c)=>A.createElement(ge,{...a("markWrapper"),__vars:{"--mark-offset":`${XM({value:u.value,min:t,max:n})}%`},key:c},b.jsx(ge,{...a("mark"),mod:{filled:met({mark:u,value:i,offset:s,inverted:o}),disabled:r}}),u.label&&b.jsx("div",{...a("markLabel"),children:u.label})));return b.jsx("div",{children:l})}xSe.displayName="@mantine/core/SliderMarks";function gX({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:l}=r6();return b.jsx(b.Fragment,{children:b.jsx(ge,{...l("trackContainer"),mod:{disabled:r},...o,children:b.jsxs(ge,{...l("track"),mod:{inverted:s,disabled:r},children:[b.jsx(ge,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...l("bar")}),t,b.jsx(xSe,{...a,offset:i,disabled:r,inverted:s})]})})})}gX.displayName="@mantine/core/SliderTrack";function LU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),l=(a!==0?Math.round(a/i)*i:0)+n,u=Math.max(l,n);return s!==void 0?Number(u.toFixed(s)):u}function lc(e,t){return parseFloat(e.toFixed(t))}function ESe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var i6={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const get={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},yet=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Ht(t,"slider-size"),"--slider-color":n?Rr(n,e):void 0,"--slider-radius":i===void 0?void 0:br(i),"--slider-thumb-size":r!==void 0?xe(r):"calc(var(--slider-size) * 2)"}}),s6=Pe((e,t)=>{const n=be("Slider",get,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:l,min:u,max:c,step:d,precision:f,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:_,showLabelOnHover:w,thumbChildren:x,disabled:S,unstyled:E,scale:T,inverted:I,className:k,style:P,vars:L,hiddenInputProps:R,...$}=n,D=ft({name:"Slider",props:n,classes:i6,classNames:r,className:k,styles:i,style:P,vars:L,varsResolver:yet,unstyled:E}),{dir:O}=ol(),[F,U]=A.useState(!1),[V,M]=Pi({value:typeof s=="number"?_c(s,u,c):s,defaultValue:typeof h=="number"?_c(h,u,c):h,finalValue:_c(0,u,c),onChange:o}),z=A.useRef(V),q=A.useRef(),j=A.useRef(),H=XM({value:V,min:u,max:c}),G=T(V),J=typeof g=="function"?g(G):g,re=f??ESe(d),ie=A.useCallback(({x:ce})=>{if(!S){const ze=LU({value:ce,min:u,max:c,step:d,precision:re});M(ze),z.current=ze}},[S,u,c,d,re,M]),{ref:te,active:ae}=gF(ie,{onScrubEnd:()=>a==null?void 0:a(z.current)},O),_e=ce=>{var ze,Oe,$e,Ne,pe,ue;if(!S)switch(ce.key){case"ArrowUp":{ce.preventDefault(),(ze=j.current)==null||ze.focus();const Se=lc(Math.min(Math.max(V+d,u),c),re);M(Se),a==null||a(Se);break}case"ArrowRight":{ce.preventDefault(),(Oe=j.current)==null||Oe.focus();const Se=lc(Math.min(Math.max(O==="rtl"?V-d:V+d,u),c),re);M(Se),a==null||a(Se);break}case"ArrowDown":{ce.preventDefault(),($e=j.current)==null||$e.focus();const Se=lc(Math.min(Math.max(V-d,u),c),re);M(Se),a==null||a(Se);break}case"ArrowLeft":{ce.preventDefault(),(Ne=j.current)==null||Ne.focus();const Se=lc(Math.min(Math.max(O==="rtl"?V+d:V-d,u),c),re);M(Se),a==null||a(Se);break}case"Home":{ce.preventDefault(),(pe=j.current)==null||pe.focus(),M(u),a==null||a(u);break}case"End":{ce.preventDefault(),(ue=j.current)==null||ue.focus(),M(c),a==null||a(c);break}}};return b.jsx(wSe,{value:{getStyles:D},children:b.jsxs(mX,{...$,ref:Ki(t,q),onKeyDownCapture:_e,onMouseDownCapture:()=>{var ce;return(ce=q.current)==null?void 0:ce.focus()},size:l,disabled:S,children:[b.jsx(gX,{inverted:I,offset:0,filled:H,marks:m,min:u,max:c,value:G,disabled:S,containerProps:{ref:te,onMouseEnter:w?()=>U(!0):void 0,onMouseLeave:w?()=>U(!1):void 0},children:b.jsx(KM,{max:c,min:u,value:G,position:H,dragging:ae,label:J,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:_,showLabelOnHover:w,isHovered:F,disabled:S,children:x})}),b.jsx("input",{type:"hidden",name:p,value:G,...R})]})})});s6.classes=i6;s6.displayName="@mantine/core/Slider";function vet(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const bet=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Ht(t,"slider-size"),"--slider-color":n?Rr(n,e):void 0,"--slider-radius":i===void 0?void 0:br(i),"--slider-thumb-size":r!==void 0?xe(r):"calc(var(--slider-size) * 2)"}}),_et={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},iI=Pe((e,t)=>{const n=be("RangeSlider",_et,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:l,min:u,max:c,minRange:d,maxRange:f,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:_,labelAlwaysOn:w,thumbFromLabel:x,thumbToLabel:S,showLabelOnHover:E,thumbChildren:T,disabled:I,unstyled:k,scale:P,inverted:L,className:R,style:$,vars:D,hiddenInputProps:O,...F}=n,U=ft({name:"Slider",props:n,classes:i6,classNames:r,className:R,styles:i,style:$,vars:D,varsResolver:bet,unstyled:k}),{dir:V}=ol(),[M,z]=A.useState(-1),[q,j]=A.useState(!1),[H,G]=Pi({value:s,defaultValue:m,finalValue:[u,c],onChange:o}),J=A.useRef(H),re=A.useRef([]),ie=A.useRef(void 0),te=[XM({value:H[0],min:u,max:c}),XM({value:H[1],min:u,max:c})],ae=p??ESe(h),_e=He=>{G(He),J.current=He};A.useEffect(()=>{Array.isArray(s)&&(J.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const ce=(He,le,Ie)=>{const Ye=[...J.current];Ye[le]=He,le===0&&(He>Ye[1]-(d-1e-9)&&(Ye[1]=Math.min(He+d,c)),He>(c-(d-1e-9)||u)&&(Ye[le]=J.current[le]),Ye[1]-He>f&&(Ye[1]=He+f)),le===1&&(He<Ye[0]+d&&(Ye[0]=Math.max(He-d,u)),He<Ye[0]+d&&(Ye[le]=J.current[le]),He-Ye[0]>f&&(Ye[0]=He-f)),Ye[0]=lc(Ye[0],ae),Ye[1]=lc(Ye[1],ae),_e(Ye),Ie&&(a==null||a(J.current))},ze=He=>{if(!I){const le=LU({value:He,min:u,max:c,step:h,precision:ae});ce(le,ie.current,!1)}},{ref:Oe,active:$e}=gF(({x:He})=>ze(He),{onScrubEnd:()=>a==null?void 0:a(J.current)},V);function Ne(He){ie.current=He}const pe=He=>{Oe.current.focus();const le=Oe.current.getBoundingClientRect(),Ie=vet(He.nativeEvent),Ye=LU({value:Ie-le.left,max:c,min:u,step:h,containerWidth:le.width}),fe=Math.abs(H[0]-Ye)>Math.abs(H[1]-Ye)?1:0,Te=V==="ltr"?fe:fe===1?0:1;ie.current=Te},ue=()=>M!==1&&M!==0?(z(0),0):M,Se=He=>{if(!I)switch(He.key){case"ArrowUp":{He.preventDefault();const le=ue();re.current[le].focus(),ce(lc(Math.min(Math.max(J.current[le]+h,u),c),ae),le,!0);break}case"ArrowRight":{He.preventDefault();const le=ue();re.current[le].focus(),ce(lc(Math.min(Math.max(V==="rtl"?J.current[le]-h:J.current[le]+h,u),c),ae),le,!0);break}case"ArrowDown":{He.preventDefault();const le=ue();re.current[le].focus(),ce(lc(Math.min(Math.max(J.current[le]-h,u),c),ae),le,!0);break}case"ArrowLeft":{He.preventDefault();const le=ue();re.current[le].focus(),ce(lc(Math.min(Math.max(V==="rtl"?J.current[le]+h:J.current[le]-h,u),c),ae),le,!0);break}}},De={max:c,min:u,size:l,labelTransitionProps:_,labelAlwaysOn:w,onBlur:()=>z(-1)},at=Array.isArray(T);return b.jsx(wSe,{value:{getStyles:U},children:b.jsxs(mX,{...F,size:l,ref:t,disabled:I,children:[b.jsxs(gX,{offset:te[0],marksOffset:H[0],filled:te[1]-te[0],marks:y,inverted:L,min:u,max:c,value:H[1],disabled:I,containerProps:{ref:Oe,onMouseEnter:E?()=>j(!0):void 0,onMouseLeave:E?()=>j(!1):void 0,onTouchStartCapture:pe,onTouchEndCapture:()=>{ie.current=-1},onMouseDownCapture:pe,onMouseUpCapture:()=>{ie.current=-1},onKeyDownCapture:Se},children:[b.jsx(KM,{...De,value:P(H[0]),position:te[0],dragging:$e,label:typeof v=="function"?v(lc(P(H[0]),ae)):v,ref:He=>{re.current[0]=He},thumbLabel:x,onMouseDown:()=>Ne(0),onFocus:()=>z(0),showLabelOnHover:E,isHovered:q,disabled:I,children:at?T[0]:T}),b.jsx(KM,{...De,thumbLabel:S,value:P(H[1]),position:te[1],dragging:$e,label:typeof v=="function"?v(lc(P(H[1]),ae)):v,ref:He=>{re.current[1]=He},onMouseDown:()=>Ne(1),onFocus:()=>z(1),showLabelOnHover:E,isHovered:q,disabled:I,children:at?T[1]:T})]}),b.jsx("input",{type:"hidden",name:`${g}_from`,value:H[0],...O}),b.jsx("input",{type:"hidden",name:`${g}_to`,value:H[1],...O})]})})});iI.classes=i6;iI.displayName="@mantine/core/RangeSlider";const wet={},kc=Pe((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=be("Space",wet,e);return b.jsx(ge,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});kc.displayName="@mantine/core/Space";var SSe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const xet={maxHeight:100,initialState:!1},Eet=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),yX=Pe((e,t)=>{const n=be("Spoiler",xet,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,initialState:u,maxHeight:c,hideLabel:d,showLabel:f,children:h,controlRef:p,transitionDuration:m,id:g,expanded:y,onExpandedChange:v,..._}=n,w=ft({name:"Spoiler",classes:SSe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Eet}),x=Do(g),S=`${x}-region`,[E,T]=Pi({value:y,defaultValue:u,finalValue:!1,onChange:v}),{ref:I,height:k}=Cqe(),P=E?d:f,L=P!==null&&c<k;return b.jsxs(ge,{...w("root"),id:x,ref:t,"data-has-spoiler":L||void 0,..._,children:[L&&b.jsx(Hy,{component:"button",type:"button",ref:p,onClick:()=>T(!E),"aria-expanded":E,"aria-controls":S,...w("control"),children:P}),b.jsx("div",{...w("content",{style:{maxHeight:E?k?xe(k):void 0:xe(c)}}),"data-reduce-motion":!0,role:"region",id:S,children:b.jsx("div",{ref:I,children:h})})]})});yX.classes=SSe;yX.displayName="@mantine/core/Spoiler";var TSe={root:"m_6d731127"};const Tet={gap:"md",align:"stretch",justify:"flex-start"},Cet=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Du(t),"--stack-align":n,"--stack-justify":r}}),Gr=Pe((e,t)=>{const n=be("Stack",Tet,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,align:u,justify:c,gap:d,variant:f,...h}=n,p=ft({name:"Stack",props:n,classes:TSe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Cet});return b.jsx(ge,{ref:t,...p("root"),variant:f,...h})});Gr.classes=TSe;Gr.displayName="@mantine/core/Stack";const CSe=A.createContext(null),Aet=CSe.Provider,Iet=()=>A.useContext(CSe),ket={},vX=Pe((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:l,...u}=be("SwitchGroup",ket,e),[c,d]=Pi({value:n,defaultValue:r,finalValue:[],onChange:i}),f=h=>{const p=h.currentTarget.value;!l&&d(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return b.jsx(Aet,{value:{value:c,onChange:f,size:s},children:b.jsx(Pr.Wrapper,{size:s,ref:t,...o,...u,labelElement:"div",__staticSelector:"SwitchGroup",children:b.jsx(NK,{role:"group",children:a})})})});vX.classes=Pr.Wrapper.classes;vX.displayName="@mantine/core/SwitchGroup";var ASe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const Ret={labelPosition:"right"},Pet=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:br(t),"--switch-height":Ht(r,"switch-height"),"--switch-width":Ht(r,"switch-width"),"--switch-thumb-size":Ht(r,"switch-thumb-size"),"--switch-label-font-size":Ht(r,"switch-label-font-size"),"--switch-track-label-padding":Ht(r,"switch-track-label-padding"),"--switch-color":n?Rr(n,e):void 0}}),$0=Pe((e,t)=>{const n=be("Switch",Ret,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,label:c,offLabel:d,onLabel:f,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:_,defaultChecked:w,onChange:x,labelPosition:S,description:E,error:T,disabled:I,variant:k,rootRef:P,mod:L,...R}=n,$=Iet(),D=p||($==null?void 0:$.size),O=ft({name:"Switch",props:n,classes:ASe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Pet}),{styleProps:F,rest:U}=Hb(R),V=Do(h),M=$?{checked:$.value.includes(U.value),onChange:$.onChange}:{},[z,q]=Pi({value:M.checked??_,defaultValue:w,finalValue:!1});return b.jsxs(RF,{...O("root"),__staticSelector:"Switch",__stylesApiProps:n,id:V,size:D,labelPosition:S,label:c,description:E,error:T,disabled:I,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":M.checked||void 0,variant:k,ref:P,mod:L,...F,...g,children:[b.jsx("input",{...U,disabled:I,checked:z,onChange:j=>{var H;$?(H=M.onChange)==null||H.call(M,j):x==null||x(j),q(j.currentTarget.checked)},id:V,ref:t,type:"checkbox",role:"switch",...O("input")}),b.jsxs(ge,{"aria-hidden":"true",mod:{error:T,"label-position":S,"without-labels":!f&&!d},...O("track"),children:[b.jsx(ge,{component:"span",mod:"reduce-motion",...O("thumb"),children:v}),b.jsx("span",{...O("trackLabel"),children:z?f:d})]})]})});$0.classes={...ASe,...xEe};$0.displayName="@mantine/core/Switch";$0.Group=vX;const[Net,Oet]=js("Table component was not found in the tree");var Kk={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function Det(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Kb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Pe((i,s)=>{const o=be(n,{},i),{classNames:a,className:l,style:u,styles:c,...d}=o,f=Oet();return b.jsx(ge,{component:e,ref:s,...Det(f,t),...f.getStyles(e,{className:l,classNames:a,style:u,styles:c,props:o}),...d})});return r.displayName=`@mantine/core/${n}`,r.classes=Kk,r}const Gx=Kb("th",{columnBorder:!0}),o6=Kb("td",{columnBorder:!0}),mm=Kb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),bX=Kb("thead",{stickyHeader:!0}),z2=Kb("tbody"),_X=Kb("tfoot"),ISe=Kb("caption",{captionSide:!0});function wX({data:e}){return b.jsxs(b.Fragment,{children:[e.caption&&b.jsx(ISe,{children:e.caption}),e.head&&b.jsx(bX,{children:b.jsx(mm,{children:e.head.map((t,n)=>b.jsx(Gx,{children:t},n))})}),e.body&&b.jsx(z2,{children:e.body.map((t,n)=>b.jsx(mm,{children:t.map((r,i)=>b.jsx(o6,{children:r},i))},n))}),e.foot&&b.jsx(_X,{children:b.jsx(mm,{children:e.foot.map((t,n)=>b.jsx(Gx,{children:t},n))})})]})}wX.displayName="@mantine/core/TableDataRenderer";const Met={type:"scrollarea"},$et=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":xe(t),"--table-overflow":n==="native"?"auto":void 0}}),xX=Pe((e,t)=>{const n=be("TableScrollContainer",Met,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,minWidth:c,type:d,...f}=n,h=ft({name:"TableScrollContainer",classes:Kk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:$et,rootSelector:"scrollContainer"});return b.jsx(ge,{component:d==="scrollarea"?Wb:"div",...d==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...f,children:b.jsx("div",{...h("scrollContainerInner"),children:u})})});xX.classes=Kk;xX.displayName="@mantine/core/TableScrollContainer";const Let={withRowBorders:!0,verticalSpacing:7},Fet=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:l,highlightOnHover:u,stickyHeaderOffset:c,stickyHeader:d})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Du(r),"--table-vertical-spacing":Du(i),"--table-border-color":s?Rr(s,e):void 0,"--table-striped-color":l&&o?Rr(o,e):void 0,"--table-highlight-on-hover-color":u&&a?Rr(a,e):void 0,"--table-sticky-header-offset":d?xe(c):void 0}}),Wn=Pe((e,t)=>{const n=be("Table",Let,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,horizontalSpacing:u,verticalSpacing:c,captionSide:d,stripedColor:f,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:_,layout:w,variant:x,data:S,children:E,stickyHeader:T,stickyHeaderOffset:I,mod:k,...P}=n,L=ft({name:"Table",props:n,className:i,style:s,classes:Kk,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:l,varsResolver:Fet});return b.jsx(Net,{value:{getStyles:L,stickyHeader:T,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:d||"bottom"},children:b.jsx(ge,{component:"table",variant:x,ref:t,mod:[{"data-with-table-border":v},k],...L("table"),...P,children:E||!!S&&b.jsx(wX,{data:S})})})});Wn.classes=Kk;Wn.displayName="@mantine/core/Table";Wn.Td=o6;Wn.Th=Gx;Wn.Tr=mm;Wn.Thead=bX;Wn.Tbody=z2;Wn.Tfoot=_X;Wn.Caption=ISe;Wn.ScrollContainer=xX;Wn.DataRenderer=wX;const[jet,EX]=js("Tabs component was not found in the tree");var Xk={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const Bet={},SX=Pe((e,t)=>{const n=be("TabsList",Bet,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:l,style:u,mod:c,...d}=n,f=EX();return b.jsx(ge,{...d,...f.getStyles("list",{className:i,style:u,classNames:a,styles:l,props:n,variant:f.variant}),ref:t,role:"tablist",variant:f.variant,mod:[{grow:s,orientation:f.orientation,placement:f.orientation==="vertical"&&f.placement,inverted:f.inverted},c],"aria-orientation":f.orientation,__vars:{"--tabs-justify":o},children:r})});SX.classes=Xk;SX.displayName="@mantine/core/TabsList";const zet={},TX=Pe((e,t)=>{const n=be("TabsPanel",zet,e),{children:r,className:i,value:s,classNames:o,styles:a,style:l,mod:u,...c}=n,d=EX(),f=d.value===s,h=d.keepMounted||n.keepMounted||f?r:null;return b.jsx(ge,{...c,...d.getStyles("panel",{className:i,classNames:o,styles:a,style:[l,f?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:d.orientation},u],role:"tabpanel",id:d.getPanelId(s),"aria-labelledby":d.getTabId(s),children:h})});TX.classes=Xk;TX.displayName="@mantine/core/TabsPanel";const Uet={},CX=Pe((e,t)=>{const n=be("TabsTab",Uet,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:l,onKeyDown:u,disabled:c,color:d,style:f,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=ds(),{dir:_}=ol(),w=EX(),x=a===w.value,S=T=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),l==null||l(T)},E={classNames:h,styles:p,props:n};return b.jsxs(os,{...y,...w.getStyles("tab",{className:r,style:f,variant:w.variant,...E}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:x,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":x,tabIndex:x||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:S,__vars:{"--tabs-color":d?Rr(d,v):void 0},onKeyDown:TY({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:_,onKeyDown:u}),children:[o&&b.jsx("span",{...w.getStyles("tabSection",E),"data-position":"left",children:o}),i&&b.jsx("span",{...w.getStyles("tabLabel",E),children:i}),s&&b.jsx("span",{...w.getStyles("tabSection",E),"data-position":"right",children:s})]})});CX.classes=Xk;CX.displayName="@mantine/core/TabsTab";const Iue="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",Vet={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},Het=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":br(t),"--tabs-color":Rr(n,e),"--tabs-text-color":Uy(r,e)?np({color:n,theme:e,autoContrast:r}):void 0}}),ho=Pe((e,t)=>{const n=be("Tabs",Vet,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:l,id:u,activateTabWithKeyboard:c,allowTabDeactivation:d,variant:f,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:_,unstyled:w,className:x,style:S,vars:E,autoContrast:T,mod:I,...k}=n,P=Do(u),[L,R]=Pi({value:i,defaultValue:r,finalValue:null,onChange:s}),$=ft({name:"Tabs",props:n,classes:Xk,className:x,style:S,classNames:v,styles:_,unstyled:w,vars:E,varsResolver:Het});return b.jsx(jet,{value:{placement:g,value:L,orientation:o,id:P,loop:l,activateTabWithKeyboard:c,getTabId:zM(`${P}-tab`,Iue),getPanelId:zM(`${P}-panel`,Iue),onChange:R,allowTabDeactivation:d,variant:f,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:$},children:b.jsx(ge,{ref:t,id:P,variant:f,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},I],...$("root"),...k,children:a})})});ho.classes=Xk;ho.displayName="@mantine/core/Tabs";ho.Tab=CX;ho.Panel=TX;ho.List=SX;const qet={},qd=Pe((e,t)=>{const n=be("TextInput",qet,e);return b.jsx(ru,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});qd.classes=ru.classes;qd.displayName="@mantine/core/TextInput";const Wet=["h1","h2","h3","h4","h5","h6"];function Get(e,t){const n=t!==void 0?t:`h${e}`;return Wet.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:xe(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var kSe={root:"m_8a5d1357"};const Yet={order:1},Ket=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=Get(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},li=Pe((e,t)=>{const n=be("Title",Yet,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:l,vars:u,size:c,variant:d,lineClamp:f,textWrap:h,mod:p,...m}=n,g=ft({name:"Title",props:n,classes:kSe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Ket});return[1,2,3,4,5,6].includes(l)?b.jsx(ge,{...g("root"),component:`h${l}`,variant:d,ref:t,mod:[{order:l,"data-line-clamp":typeof f=="number"},p],size:c,...m}):null});li.classes=kSe;li.displayName="@mantine/core/Title";const RSe=A.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),pi=()=>A.useContext(RSe);function Xet({children:e}){const[t,n]=Vi.useState(void 0),r=Vi.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return b.jsx(RSe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.19.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sI(){return sI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sI.apply(this,arguments)}var p0;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(p0||(p0={}));const kue="popstate";function Qet(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return FU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:QM(i)}return Zet(t,n,null,e)}function ls(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function PSe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Jet(){return Math.random().toString(36).substr(2,8)}function Rue(e,t){return{usr:e.state,key:e.key,idx:t}}function FU(e,t,n,r){return n===void 0&&(n=null),sI({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?hS(t):t,{state:n,key:t&&t.key||r||Jet()})}function QM(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function hS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Zet(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=p0.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(sI({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=p0.Pop;let g=c(),y=g==null?null:g-u;u=g,l&&l({action:a,location:m.location,delta:y})}function f(g,y){a=p0.Push;let v=FU(m.location,g,y);u=c()+1;let _=Rue(v,u),w=m.createHref(v);try{o.pushState(_,"",w)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(w)}s&&l&&l({action:a,location:m.location,delta:1})}function h(g,y){a=p0.Replace;let v=FU(m.location,g,y);u=c();let _=Rue(v,u),w=m.createHref(v);o.replaceState(_,"",w),s&&l&&l({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:QM(g);return v=v.replace(/ $/,"%20"),ls(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(kue,d),l=g,()=>{i.removeEventListener(kue,d),l=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:h,go(g){return o.go(g)}};return m}var Pue;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Pue||(Pue={}));function ett(e,t,n){return n===void 0&&(n="/"),ttt(e,t,n,!1)}function ttt(e,t,n,r){let i=typeof t=="string"?hS(t):t,s=AX(i.pathname||"/",n);if(s==null)return null;let o=NSe(e);ntt(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=htt(s);a=dtt(o[l],u,r)}return a}function NSe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(ls(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=L0([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(ls(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),NSe(s.children,t,c,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:utt(u,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of OSe(s.path))i(s,o,l)}),t}function OSe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=OSe(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function ntt(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:ctt(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const rtt=/^:[\w-]+$/,itt=3,stt=2,ott=1,att=10,ltt=-2,Nue=e=>e==="*";function utt(e,t){let n=e.split("/"),r=n.length;return n.some(Nue)&&(r+=ltt),t&&(r+=stt),n.filter(i=>!Nue(i)).reduce((i,s)=>i+(rtt.test(s)?itt:s===""?ott:att),r)}function ctt(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function dtt(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",d=Oue({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Oue({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:L0([s,d.pathname]),pathnameBase:ytt(L0([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=L0([s,d.pathnameBase]))}return o}function Oue(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=ftt(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let m=a[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function ftt(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),PSe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function htt(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return PSe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function AX(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function ptt(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?hS(e):e;return{pathname:n?n.startsWith("/")?n:mtt(n,t):t,search:vtt(r),hash:btt(i)}}function mtt(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function nB(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gtt(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function IX(e,t){let n=gtt(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function kX(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=hS(e):(i=sI({},e),ls(!i.pathname||!i.pathname.includes("?"),nB("?","pathname","search",i)),ls(!i.pathname||!i.pathname.includes("#"),nB("#","pathname","hash",i)),ls(!i.search||!i.search.includes("#"),nB("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?t[d]:"/"}let l=ptt(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const L0=e=>e.join("/").replace(/\/\/+/g,"/"),ytt=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),vtt=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,btt=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _tt(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const DSe=["post","put","patch","delete"];new Set(DSe);const wtt=["get",...DSe];new Set(wtt);/**
 * React Router v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oI(){return oI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oI.apply(this,arguments)}const RX=A.createContext(null),xtt=A.createContext(null),Gy=A.createContext(null),a6=A.createContext(null),sp=A.createContext({outlet:null,matches:[],isDataRoute:!1}),MSe=A.createContext(null);function PX(e,t){let{relative:n}=t===void 0?{}:t;pS()||ls(!1);let{basename:r,navigator:i}=A.useContext(Gy),{hash:s,pathname:o,search:a}=LSe(e,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:L0([r,o])),i.createHref({pathname:l,search:a,hash:s})}function pS(){return A.useContext(a6)!=null}function lg(){return pS()||ls(!1),A.useContext(a6).location}function $Se(e){A.useContext(Gy).static||A.useLayoutEffect(e)}function Zc(){let{isDataRoute:e}=A.useContext(sp);return e?$tt():Ett()}function Ett(){pS()||ls(!1);let e=A.useContext(RX),{basename:t,future:n,navigator:r}=A.useContext(Gy),{matches:i}=A.useContext(sp),{pathname:s}=lg(),o=JSON.stringify(IX(i,n.v7_relativeSplatPath)),a=A.useRef(!1);return $Se(()=>{a.current=!0}),A.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=kX(u,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:L0([t,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[t,r,o,s,e])}const Stt=A.createContext(null);function Ttt(e){let t=A.useContext(sp).outlet;return t&&A.createElement(Stt.Provider,{value:e},t)}function Lc(){let{matches:e}=A.useContext(sp),t=e[e.length-1];return t?t.params:{}}function LSe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=A.useContext(Gy),{matches:i}=A.useContext(sp),{pathname:s}=lg(),o=JSON.stringify(IX(i,r.v7_relativeSplatPath));return A.useMemo(()=>kX(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function FSe(e,t){return Ctt(e,t)}function Ctt(e,t,n,r){pS()||ls(!1);let{navigator:i}=A.useContext(Gy),{matches:s}=A.useContext(sp),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=lg(),c;if(t){var d;let g=typeof t=="string"?hS(t):t;l==="/"||(d=g.pathname)!=null&&d.startsWith(l)||ls(!1),c=g}else c=u;let f=c.pathname||"/",h=f;if(l!=="/"){let g=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=ett(e,{pathname:h}),m=Ptt(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:L0([l,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:L0([l,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?A.createElement(a6.Provider,{value:{location:oI({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:p0.Pop}},m):m}function Att(){let e=Mtt(),t=_tt(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),n?A.createElement("pre",{style:i},n):null,null)}const Itt=A.createElement(Att,null);class ktt extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?A.createElement(sp.Provider,{value:this.props.routeContext},A.createElement(MSe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Rtt(e){let{routeContext:t,match:n,children:r}=e,i=A.useContext(RX);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(sp.Provider,{value:t},r)}function Ptt(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||ls(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,f)=>{let h,p=!1,m=null,g=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||Itt,l&&(u<0&&f===0?(p=!0,g=null):u===f&&(p=!0,g=d.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,f+1)),v=()=>{let _;return h?_=m:p?_=g:d.route.Component?_=A.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=c,A.createElement(Rtt,{match:d,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?A.createElement(ktt,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var jSe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(jSe||{}),JM=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(JM||{});function Ntt(e){let t=A.useContext(RX);return t||ls(!1),t}function Ott(e){let t=A.useContext(xtt);return t||ls(!1),t}function Dtt(e){let t=A.useContext(sp);return t||ls(!1),t}function BSe(e){let t=Dtt(),n=t.matches[t.matches.length-1];return n.route.id||ls(!1),n.route.id}function Mtt(){var e;let t=A.useContext(MSe),n=Ott(JM.UseRouteError),r=BSe(JM.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function $tt(){let{router:e}=Ntt(jSe.UseNavigateStable),t=BSe(JM.UseNavigateStable),n=A.useRef(!1);return $Se(()=>{n.current=!0}),A.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,oI({fromRouteId:t},s)))},[e,t])}function NX(e){let{to:t,replace:n,state:r,relative:i}=e;pS()||ls(!1);let{future:s,static:o}=A.useContext(Gy),{matches:a}=A.useContext(sp),{pathname:l}=lg(),u=Zc(),c=kX(t,IX(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(c);return A.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:i}),[u,d,i,n,r]),null}function Ltt(e){return Ttt(e.context)}function jp(e){ls(!1)}function Ftt(e){let{basename:t="/",children:n=null,location:r,navigationType:i=p0.Pop,navigator:s,static:o=!1,future:a}=e;pS()&&ls(!1);let l=t.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:l,navigator:s,static:o,future:oI({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=hS(r));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=A.useMemo(()=>{let g=AX(c,l);return g==null?null:{location:{pathname:g,search:d,hash:f,state:h,key:p},navigationType:i}},[l,c,d,f,h,p,i]);return m==null?null:A.createElement(Gy.Provider,{value:u},A.createElement(a6.Provider,{children:n,value:m}))}function jtt(e){let{children:t,location:n}=e;return FSe(jU(t),n)}new Promise(()=>{});function jU(e,t){t===void 0&&(t=[]);let n=[];return A.Children.forEach(e,(r,i)=>{if(!A.isValidElement(r))return;let s=[...t,i];if(r.type===A.Fragment){n.push.apply(n,jU(r.props.children,s));return}r.type!==jp&&ls(!1),!r.props.index||!r.props.children||ls(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=jU(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function BU(){return BU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BU.apply(this,arguments)}function Btt(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function ztt(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Utt(e,t){return e.button===0&&(!t||t==="_self")&&!ztt(e)}function zU(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Vtt(e,t){let n=zU(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const Htt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],qtt="6";try{window.__reactRouterVersion=qtt}catch{}const Wtt="startTransition",Due=mM[Wtt];function Gtt(e){let{basename:t,children:n,future:r,window:i}=e,s=A.useRef();s.current==null&&(s.current=Qet({window:i,v5Compat:!0}));let o=s.current,[a,l]=A.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=A.useCallback(d=>{u&&Due?Due(()=>l(d)):l(d)},[l,u]);return A.useLayoutEffect(()=>o.listen(c),[o,c]),A.createElement(Ftt,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Ytt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ktt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OX=A.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,unstable_viewTransition:d}=t,f=Btt(t,Htt),{basename:h}=A.useContext(Gy),p,m=!1;if(typeof u=="string"&&Ktt.test(u)&&(p=u,Ytt))try{let _=new URL(window.location.href),w=u.startsWith("//")?new URL(_.protocol+u):new URL(u),x=AX(w.pathname,h);w.origin===_.origin&&x!=null?u=x+w.search+w.hash:m=!0}catch{}let g=PX(u,{relative:i}),y=Xtt(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,unstable_viewTransition:d});function v(_){r&&r(_),_.defaultPrevented||y(_)}return A.createElement("a",BU({},f,{href:p||g,onClick:m||s?r:v,ref:n,target:l}))});var Mue;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Mue||(Mue={}));var $ue;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})($ue||($ue={}));function Xtt(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=t===void 0?{}:t,l=Zc(),u=lg(),c=LSe(e,{relative:o});return A.useCallback(d=>{if(Utt(d,n)){d.preventDefault();let f=r!==void 0?r:QM(u)===QM(c);l(e,{replace:f,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,c,r,i,n,e,s,o,a])}function DX(e){let t=A.useRef(zU(e)),n=A.useRef(!1),r=lg(),i=A.useMemo(()=>Vtt(r.search,n.current?null:t.current),[r.search]),s=Zc(),o=A.useCallback((a,l)=>{const u=zU(typeof a=="function"?a(i):a);n.current=!0,s("?"+u,l)},[s,i]);return[i,o]}const MX=A.createContext(null);MX.displayName="@mantine/modals/ModalsContext";function Qtt(){const e=A.useContext(MX);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function Jtt({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:l,children:u}){const{cancel:c,confirm:d}=r,f=Qtt(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&f.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof l=="function"&&l(),i&&f.closeModal(e)};return b.jsxs(b.Fragment,{children:[u&&b.jsx(ge,{mb:"md",children:u}),b.jsxs(gn,{mt:u?0:"md",justify:"flex-end",...o,children:[b.jsx(rn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),b.jsx(rn,{...n,onClick:p,children:(n==null?void 0:n.children)||d})]})]})}const[Ztt,l6]=Mqe("mantine-modals");l6("openModal");l6("closeModal");l6("closeAllModals");const UU=l6("openConfirmModal");function Lue(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function ent(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;Lue(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Lue(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function tnt(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:l,groupProps:u,labels:c,...d}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:l,groupProps:u,labels:c},modalProps:{id:t,...d}}}function nnt({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=A.useReducer(ent,{modals:[],current:null}),o=A.useRef(i);o.current=i;const a=A.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),l=A.useCallback(({modalId:g,...y})=>{const v=g||j2();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),u=A.useCallback(({modalId:g,...y})=>{const v=g||j2();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=A.useCallback((g,{modalId:y,...v})=>{const _=y||j2();return s({type:"OPEN",modal:{id:_,type:"context",props:v,ctx:g}}),_},[s]),d=A.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);Ztt({openModal:l,openConfirmModal:u,openContextModal:({modal:g,...y})=>c(g,y),closeModal:d,closeContextModal:d,closeAllModals:a});const f={modals:i.modals,openModal:l,openConfirmModal:u,openContextModal:c,closeModal:d,closeContextModal:d,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,_=r[g.ctx];return{modalProps:v,content:b.jsx(_,{innerProps:y,context:f,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=tnt(g.props);return{modalProps:y,content:b.jsx(Jtt,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:b.jsx(b.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return b.jsxs(MX.Provider,{value:f,children:[b.jsx(as,{zIndex:Kc("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return d((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rnt={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=(e,t,n,r)=>{const i=A.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:l,className:u,children:c,...d},f)=>A.createElement("svg",{ref:f,...rnt[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...d},[l&&A.createElement("title",{key:"svg-title"},l),...r.map(([h,p])=>A.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var int=Pt("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fue=Pt("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var snt=Pt("outline","arrow-autofit-content","IconArrowAutofitContent",[["path",{d:"M6 4l-3 3l3 3",key:"svg-0"}],["path",{d:"M18 4l3 3l-3 3",key:"svg-1"}],["path",{d:"M4 14m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-2"}],["path",{d:"M10 7h-7",key:"svg-3"}],["path",{d:"M21 7h-7",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ont=Pt("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ant=Pt("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lnt=Pt("outline","arrows-sort","IconArrowsSort",[["path",{d:"M3 9l4 -4l4 4m-4 -4v14",key:"svg-0"}],["path",{d:"M21 15l-4 4l-4 -4m4 4v-14",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var unt=Pt("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cnt=Pt("outline","baseline-density-large","IconBaselineDensityLarge",[["path",{d:"M4 4h16",key:"svg-0"}],["path",{d:"M4 20h16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dnt=Pt("outline","baseline-density-medium","IconBaselineDensityMedium",[["path",{d:"M4 20h16",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M4 4h16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fnt=Pt("outline","baseline-density-small","IconBaselineDensitySmall",[["path",{d:"M4 3h16",key:"svg-0"}],["path",{d:"M4 9h16",key:"svg-1"}],["path",{d:"M4 15h16",key:"svg-2"}],["path",{d:"M4 21h16",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hnt=Pt("outline","box-multiple","IconBoxMultiple",[["path",{d:"M7 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M17 17v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pnt=Pt("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mnt=Pt("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gnt=Pt("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zSe=Pt("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ynt=Pt("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vnt=Pt("outline","chevron-left-pipe","IconChevronLeftPipe",[["path",{d:"M7 6v12",key:"svg-0"}],["path",{d:"M18 6l-6 6l6 6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bnt=Pt("outline","chevron-left","IconChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _nt=Pt("outline","chevron-right-pipe","IconChevronRightPipe",[["path",{d:"M6 6l6 6l-6 6",key:"svg-0"}],["path",{d:"M17 5v13",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wnt=Pt("outline","chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xnt=Pt("outline","chevrons-down","IconChevronsDown",[["path",{d:"M7 7l5 5l5 -5",key:"svg-0"}],["path",{d:"M7 13l5 5l5 -5",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ent=Pt("outline","circle-x","IconCircleX",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M10 10l4 4m0 -4l-4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Snt=Pt("outline","clear-all","IconClearAll",[["path",{d:"M8 6h12",key:"svg-0"}],["path",{d:"M6 12h12",key:"svg-1"}],["path",{d:"M4 18h12",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tnt=Pt("outline","columns","IconColumns",[["path",{d:"M4 6l5.5 0",key:"svg-0"}],["path",{d:"M4 10l5.5 0",key:"svg-1"}],["path",{d:"M4 14l5.5 0",key:"svg-2"}],["path",{d:"M4 18l5.5 0",key:"svg-3"}],["path",{d:"M14.5 6l5.5 0",key:"svg-4"}],["path",{d:"M14.5 10l5.5 0",key:"svg-5"}],["path",{d:"M14.5 14l5.5 0",key:"svg-6"}],["path",{d:"M14.5 18l5.5 0",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cnt=Pt("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ant=Pt("outline","device-floppy","IconDeviceFloppy",[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var USe=Pt("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Int=Pt("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VSe=Pt("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var knt=Pt("outline","eye-off","IconEyeOff",[["path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828",key:"svg-0"}],["path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rnt=Pt("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pnt=Pt("outline","filter-cog","IconFilterCog",[["path",{d:"M12 20l-3 1v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v1.5",key:"svg-0"}],["path",{d:"M19.001 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M19.001 15.5v1.5",key:"svg-2"}],["path",{d:"M19.001 21v1.5",key:"svg-3"}],["path",{d:"M22.032 17.25l-1.299 .75",key:"svg-4"}],["path",{d:"M17.27 20l-1.3 .75",key:"svg-5"}],["path",{d:"M15.97 17.25l1.3 .75",key:"svg-6"}],["path",{d:"M20.733 20l1.3 .75",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Nnt=Pt("outline","filter-off","IconFilterOff",[["path",{d:"M8 4h12v2.172a2 2 0 0 1 -.586 1.414l-3.914 3.914m-.5 3.5v4l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ont=Pt("outline","filter","IconFilter",[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dnt=Pt("outline","grip-horizontal","IconGripHorizontal",[["path",{d:"M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}],["path",{d:"M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mnt=Pt("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $nt=Pt("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lnt=Pt("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fnt=Pt("outline","maximize","IconMaximize",[["path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jnt=Pt("outline","minimize","IconMinimize",[["path",{d:"M15 19v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M15 5v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M5 15h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M5 9h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bnt=Pt("outline","pinned-off","IconPinnedOff",[["path",{d:"M3 3l18 18",key:"svg-0"}],["path",{d:"M15 4.5l-3.249 3.249m-2.57 1.433l-2.181 .818l-1.5 1.5l7 7l1.5 -1.5l.82 -2.186m1.43 -2.563l3.25 -3.251",key:"svg-1"}],["path",{d:"M9 15l-4.5 4.5",key:"svg-2"}],["path",{d:"M14.5 4l5.5 5.5",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var znt=Pt("outline","pinned","IconPinned",[["path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6",key:"svg-0"}],["path",{d:"M12 16l0 5",key:"svg-1"}],["path",{d:"M8 4l8 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jue=Pt("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HSe=Pt("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qSe=Pt("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Unt=Pt("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vnt=Pt("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hnt=Pt("outline","search-off","IconSearchOff",[["path",{d:"M5.039 5.062a7 7 0 0 0 9.91 9.89m1.584 -2.434a7 7 0 0 0 -9.038 -9.057",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WSe=Pt("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var GSe=Pt("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qnt=Pt("outline","sort-ascending","IconSortAscending",[["path",{d:"M4 6l7 0",key:"svg-0"}],["path",{d:"M4 12l7 0",key:"svg-1"}],["path",{d:"M4 18l9 0",key:"svg-2"}],["path",{d:"M15 9l3 -3l3 3",key:"svg-3"}],["path",{d:"M18 6l0 12",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wnt=Pt("outline","sort-descending","IconSortDescending",[["path",{d:"M4 6l9 0",key:"svg-0"}],["path",{d:"M4 12l7 0",key:"svg-1"}],["path",{d:"M4 18l7 0",key:"svg-2"}],["path",{d:"M15 15l3 3l3 -3",key:"svg-3"}],["path",{d:"M18 6l0 12",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gnt=Pt("outline","sticker-2","IconSticker2",[["path",{d:"M6 4h12a2 2 0 0 1 2 2v7h-5a2 2 0 0 0 -2 2v5h-7a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2z",key:"svg-0"}],["path",{d:"M20 13v.172a2 2 0 0 1 -.586 1.414l-4.828 4.828a2 2 0 0 1 -1.414 .586h-.172",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YSe=Pt("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ynt=Pt("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var KSe=Pt("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var XSe=Pt("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var u6=Pt("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Knt=Pt("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xnt=Pt("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.14.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qnt=Pt("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function QSe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Qu="/ThinkAloud/";function Bue(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function JSe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Jnt=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Znt=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ert={};function zue(e,t){return(ert.jsx?Znt:Jnt).test(e)}const trt=/[ \t\n\f\r]/g;function nrt(e){return typeof e=="object"?e.type==="text"?Uue(e.value):!1:Uue(e)}function Uue(e){return e.replace(trt,"")===""}let Qk=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};Qk.prototype.property={};Qk.prototype.normal={};Qk.prototype.space=null;function ZSe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new Qk(n,r,t)}function aI(e){return e.toLowerCase()}let ed=class{constructor(t,n){this.property=t,this.attribute=n}};ed.prototype.space=null;ed.prototype.boolean=!1;ed.prototype.booleanish=!1;ed.prototype.overloadedBoolean=!1;ed.prototype.number=!1;ed.prototype.commaSeparated=!1;ed.prototype.spaceSeparated=!1;ed.prototype.commaOrSpaceSeparated=!1;ed.prototype.mustUseProperty=!1;ed.prototype.defined=!1;let rrt=0;const _n=Xb(),ps=Xb(),eTe=Xb(),it=Xb(),Zr=Xb(),ax=Xb(),du=Xb();function Xb(){return 2**++rrt}const VU=Object.freeze(Object.defineProperty({__proto__:null,boolean:_n,booleanish:ps,commaOrSpaceSeparated:du,commaSeparated:ax,number:it,overloadedBoolean:eTe,spaceSeparated:Zr},Symbol.toStringTag,{value:"Module"})),rB=Object.keys(VU);class $X extends ed{constructor(t,n,r,i){let s=-1;if(super(t,n),Vue(this,"space",i),typeof r=="number")for(;++s<rB.length;){const o=rB[s];Vue(this,rB[s],(r&VU[o])===VU[o])}}}$X.prototype.defined=!0;function Vue(e,t,n){n&&(e[t]=n)}const irt={}.hasOwnProperty;function mS(e){const t={},n={};let r;for(r in e.properties)if(irt.call(e.properties,r)){const i=e.properties[r],s=new $X(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[aI(r)]=r,n[aI(s.attribute)]=r}return new Qk(t,n,e.space)}const tTe=mS({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),nTe=mS({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function rTe(e,t){return t in e?e[t]:t}function iTe(e,t){return rTe(e,t.toLowerCase())}const sTe=mS({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:iTe,properties:{xmlns:null,xmlnsXLink:null}}),oTe=mS({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ps,ariaAutoComplete:null,ariaBusy:ps,ariaChecked:ps,ariaColCount:it,ariaColIndex:it,ariaColSpan:it,ariaControls:Zr,ariaCurrent:null,ariaDescribedBy:Zr,ariaDetails:null,ariaDisabled:ps,ariaDropEffect:Zr,ariaErrorMessage:null,ariaExpanded:ps,ariaFlowTo:Zr,ariaGrabbed:ps,ariaHasPopup:null,ariaHidden:ps,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Zr,ariaLevel:it,ariaLive:null,ariaModal:ps,ariaMultiLine:ps,ariaMultiSelectable:ps,ariaOrientation:null,ariaOwns:Zr,ariaPlaceholder:null,ariaPosInSet:it,ariaPressed:ps,ariaReadOnly:ps,ariaRelevant:null,ariaRequired:ps,ariaRoleDescription:Zr,ariaRowCount:it,ariaRowIndex:it,ariaRowSpan:it,ariaSelected:ps,ariaSetSize:it,ariaSort:null,ariaValueMax:it,ariaValueMin:it,ariaValueNow:it,ariaValueText:null,role:null}}),srt=mS({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:iTe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ax,acceptCharset:Zr,accessKey:Zr,action:null,allow:null,allowFullScreen:_n,allowPaymentRequest:_n,allowUserMedia:_n,alt:null,as:null,async:_n,autoCapitalize:null,autoComplete:Zr,autoFocus:_n,autoPlay:_n,blocking:Zr,capture:null,charSet:null,checked:_n,cite:null,className:Zr,cols:it,colSpan:null,content:null,contentEditable:ps,controls:_n,controlsList:Zr,coords:it|ax,crossOrigin:null,data:null,dateTime:null,decoding:null,default:_n,defer:_n,dir:null,dirName:null,disabled:_n,download:eTe,draggable:ps,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:_n,formTarget:null,headers:Zr,height:it,hidden:_n,high:it,href:null,hrefLang:null,htmlFor:Zr,httpEquiv:Zr,id:null,imageSizes:null,imageSrcSet:null,inert:_n,inputMode:null,integrity:null,is:null,isMap:_n,itemId:null,itemProp:Zr,itemRef:Zr,itemScope:_n,itemType:Zr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:_n,low:it,manifest:null,max:null,maxLength:it,media:null,method:null,min:null,minLength:it,multiple:_n,muted:_n,name:null,nonce:null,noModule:_n,noValidate:_n,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:_n,optimum:it,pattern:null,ping:Zr,placeholder:null,playsInline:_n,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:_n,referrerPolicy:null,rel:Zr,required:_n,reversed:_n,rows:it,rowSpan:it,sandbox:Zr,scope:null,scoped:_n,seamless:_n,selected:_n,shadowRootClonable:_n,shadowRootDelegatesFocus:_n,shadowRootMode:null,shape:null,size:it,sizes:null,slot:null,span:it,spellCheck:ps,src:null,srcDoc:null,srcLang:null,srcSet:null,start:it,step:null,style:null,tabIndex:it,target:null,title:null,translate:null,type:null,typeMustMatch:_n,useMap:null,value:ps,width:it,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Zr,axis:null,background:null,bgColor:null,border:it,borderColor:null,bottomMargin:it,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:_n,declare:_n,event:null,face:null,frame:null,frameBorder:null,hSpace:it,leftMargin:it,link:null,longDesc:null,lowSrc:null,marginHeight:it,marginWidth:it,noResize:_n,noHref:_n,noShade:_n,noWrap:_n,object:null,profile:null,prompt:null,rev:null,rightMargin:it,rules:null,scheme:null,scrolling:ps,standby:null,summary:null,text:null,topMargin:it,valueType:null,version:null,vAlign:null,vLink:null,vSpace:it,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:_n,disableRemotePlayback:_n,prefix:null,property:null,results:it,security:null,unselectable:null}}),ort=mS({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:rTe,properties:{about:du,accentHeight:it,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:it,amplitude:it,arabicForm:null,ascent:it,attributeName:null,attributeType:null,azimuth:it,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:it,by:null,calcMode:null,capHeight:it,className:Zr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:it,diffuseConstant:it,direction:null,display:null,dur:null,divisor:it,dominantBaseline:null,download:_n,dx:null,dy:null,edgeMode:null,editable:null,elevation:it,enableBackground:null,end:null,event:null,exponent:it,externalResourcesRequired:null,fill:null,fillOpacity:it,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ax,g2:ax,glyphName:ax,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:it,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:it,horizOriginX:it,horizOriginY:it,id:null,ideographic:it,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:it,k:it,k1:it,k2:it,k3:it,k4:it,kernelMatrix:du,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:it,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:it,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:it,overlineThickness:it,paintOrder:null,panose1:null,path:null,pathLength:it,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Zr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:it,pointsAtY:it,pointsAtZ:it,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:du,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:du,rev:du,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:du,requiredFeatures:du,requiredFonts:du,requiredFormats:du,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:it,specularExponent:it,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:it,strikethroughThickness:it,string:null,stroke:null,strokeDashArray:du,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:it,strokeOpacity:it,strokeWidth:null,style:null,surfaceScale:it,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:du,tabIndex:it,tableValues:null,target:null,targetX:it,targetY:it,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:du,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:it,underlineThickness:it,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:it,values:null,vAlphabetic:it,vMathematical:it,vectorEffect:null,vHanging:it,vIdeographic:it,version:null,vertAdvY:it,vertOriginX:it,vertOriginY:it,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:it,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),art=/^data[-\w.:]+$/i,Hue=/-[a-z]/g,lrt=/[A-Z]/g;function c6(e,t){const n=aI(t);let r=t,i=ed;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&art.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Hue,crt);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Hue.test(s)){let o=s.replace(lrt,urt);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=$X}return new i(r,t)}function urt(e){return"-"+e.toLowerCase()}function crt(e){return e.charAt(1).toUpperCase()}const drt={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Jk=ZSe([nTe,tTe,sTe,oTe,srt],"html"),Yy=ZSe([nTe,tTe,sTe,oTe,ort],"svg");function que(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function aTe(e){return e.join(" ").trim()}var lTe={},Wue=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,frt=/\n/g,hrt=/^\s*/,prt=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,mrt=/^:\s*/,grt=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,yrt=/^[;\s]*/,vrt=/^\s+|\s+$/g,brt=`
`,Gue="/",Yue="*",o1="",_rt="comment",wrt="declaration",xrt=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(frt);m&&(n+=m.length);var g=p.lastIndexOf(brt);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),u(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function l(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function u(){l(hrt)}function c(p){var m;for(p=p||[];m=d();)m!==!1&&p.push(m);return p}function d(){var p=s();if(!(Gue!=e.charAt(0)||Yue!=e.charAt(1))){for(var m=2;o1!=e.charAt(m)&&(Yue!=e.charAt(m)||Gue!=e.charAt(m+1));)++m;if(m+=2,o1===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:_rt,comment:g})}}function f(){var p=s(),m=l(prt);if(m){if(d(),!l(mrt))return a("property missing ':'");var g=l(grt),y=p({type:wrt,property:Kue(m[0].replace(Wue,o1)),value:g?Kue(g[0].replace(Wue,o1)):o1});return l(yrt),y}}function h(){var p=[];c(p);for(var m;m=f();)m!==!1&&(p.push(m),c(p));return p}return u(),h()};function Kue(e){return e?e.replace(vrt,o1):o1}var Ert=qi&&qi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lTe,"__esModule",{value:!0});var Xue=lTe.default=Trt,Srt=Ert(xrt);function Trt(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,Srt.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}const Crt=Xue.default||Xue,d6=uTe("end"),op=uTe("start");function uTe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Art(e){const t=op(e),n=d6(e);if(t&&n)return{start:t,end:n}}function U2(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Que(e.position):"start"in e||"end"in e?Que(e):"line"in e||"column"in e?HU(e):""}function HU(e){return Jue(e&&e.line)+":"+Jue(e&&e.column)}function Que(e){return HU(e&&e.start)+"-"+HU(e&&e.end)}function Jue(e){return e&&typeof e=="number"?e:1}class xa extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=U2(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}xa.prototype.file="";xa.prototype.name="";xa.prototype.reason="";xa.prototype.message="";xa.prototype.stack="";xa.prototype.column=void 0;xa.prototype.line=void 0;xa.prototype.ancestors=void 0;xa.prototype.cause=void 0;xa.prototype.fatal=void 0;xa.prototype.place=void 0;xa.prototype.ruleId=void 0;xa.prototype.source=void 0;const LX={}.hasOwnProperty,Irt=new Map,krt=/[A-Z]/g,Rrt=/-([a-z])/g,Prt=new Set(["table","tbody","thead","tfoot","tr"]),Nrt=new Set(["td","th"]),cTe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Ort(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=zrt(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Brt(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Yy:Jk,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=dTe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function dTe(e,t,n){if(t.type==="element")return Drt(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Mrt(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Lrt(e,t,n);if(t.type==="mdxjsEsm")return $rt(e,t);if(t.type==="root")return Frt(e,t,n);if(t.type==="text")return jrt(e,t)}function Drt(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Yy,e.schema=i),e.ancestors.push(t);const s=hTe(e,t.tagName,!1),o=Urt(e,t);let a=jX(e,t);return Prt.has(t.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!nrt(l):!0})),fTe(e,o,s,t),FX(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Mrt(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}lI(e,t.position)}function $rt(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);lI(e,t.position)}function Lrt(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Yy,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:hTe(e,t.name,!0),o=Vrt(e,t),a=jX(e,t);return fTe(e,o,s,t),FX(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Frt(e,t,n){const r={};return FX(r,jX(e,t)),e.create(t,e.Fragment,r,n)}function jrt(e,t){return t.value}function fTe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function FX(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Brt(e,t,n){return r;function r(i,s,o,a){const u=Array.isArray(o.children)?n:t;return a?u(s,o,a):u(s,o)}}function zrt(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=op(r);return t(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function Urt(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&LX.call(t.properties,i)){const s=Hrt(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Nrt.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Vrt(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else lI(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else lI(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function jX(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Irt;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;o=l+"-"+u,i.set(l,u+1)}}const a=dTe(e,s,o);a!==void 0&&n.push(a)}return n}function Hrt(e,t,n){const r=c6(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?JSe(n):aTe(n)),r.property==="style"){let i=typeof n=="object"?n:qrt(e,String(n));return e.stylePropertyNameCase==="css"&&(i=Wrt(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?drt[r.property]||r.property:r.attribute,n]}}function qrt(e,t){const n={};try{Crt(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new xa("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=cTe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(Rrt,Yrt)),n[o]=s}}function hTe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=zue(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=zue(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return LX.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);lI(e)}function lI(e,t){const n=new xa("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=cTe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Wrt(e){const t={};let n;for(n in e)LX.call(e,n)&&(t[Grt(n)]=e[n]);return t}function Grt(e){let t=e.replace(krt,Krt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Yrt(e,t){return t.toUpperCase()}function Krt(e){return"-"+e.toLowerCase()}const iB={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Xrt={};function Qrt(e,t){const n=Xrt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return pTe(e,r,i)}function pTe(e,t,n){if(Jrt(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Zue(e.children,t,n)}return Array.isArray(e)?Zue(e,t,n):""}function Zue(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=pTe(e[i],t,n);return r.join("")}function Jrt(e){return!!(e&&typeof e=="object")}const ece=document.createElement("i");function BX(e){const t="&"+e+";";ece.innerHTML=t;const n=ece.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Mm(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function fc(e,t){return e.length>0?(Mm(e,e.length,0,t),e):t}const tce={}.hasOwnProperty;function Zrt(e){const t={};let n=-1;for(;++n<e.length;)eit(t,e[n]);return t}function eit(e,t){let n;for(n in t){const i=(tce.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){tce.call(i,o)||(i[o]=[]);const a=s[o];tit(i[o],Array.isArray(a)?a:a?[a]:[])}}}function tit(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Mm(e,0,0,r)}function mTe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function lx(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const oh=Ky(/[A-Za-z]/),Su=Ky(/[\dA-Za-z]/),nit=Ky(/[#-'*+\--9=?A-Z^-~]/);function qU(e){return e!==null&&(e<32||e===127)}const WU=Ky(/\d/),rit=Ky(/[\dA-Fa-f]/),iit=Ky(/[!-/:-@[-`{-~]/);function sn(e){return e!==null&&e<-2}function Ul(e){return e!==null&&(e<0||e===32)}function yr(e){return e===-2||e===-1||e===32}const sit=Ky(new RegExp("\\p{P}|\\p{S}","u")),oit=Ky(/\s/);function Ky(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function gS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Su(e.charCodeAt(n+1))&&Su(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="�"}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ti(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return yr(l)?(e.enter(n),a(l)):t(l)}function a(l){return yr(l)&&s++<i?(e.consume(l),a):(e.exit(n),t(l))}}const ait={tokenize:lit};function lit(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ti(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return sn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const uit={tokenize:cit},nce={tokenize:dit};function cit(e){const t=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,l,u)(_)}return u(_)}function l(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let x=w,S;for(;x--;)if(t.events[x][0]==="exit"&&t.events[x][1].type==="chunkFlow"){S=t.events[x][1].end;break}y(r);let E=w;for(;E<t.events.length;)t.events[E][1].end=Object.assign({},S),E++;return Mm(t.events,x+1,0,t.events.slice(w)),t.events.length=E,u(_)}return a(_)}function u(_){if(r===n.length){if(!i)return f(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(nce,c,d)(_)}function c(_){return i&&v(),y(r),f(_)}function d(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(_)}function f(_){return t.containerState={},e.attempt(nce,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),f(_)}function p(_){if(_===null){i&&v(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(_)}function m(_){if(_===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return sn(_)?(e.consume(_),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function g(_,w){const x=t.sliceStream(_);if(w&&x.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(x),t.parser.lazy[_.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const E=t.events.length;let T=E,I,k;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){if(I){k=t.events[T][1].end;break}I=!0}for(y(r),S=E;S<t.events.length;)t.events[S][1].end=Object.assign({},k),S++;Mm(t.events,T+1,0,t.events.slice(E)),t.events.length=S}}function y(_){let w=n.length;for(;w-- >_;){const x=n[w];t.containerState=x[1],x[0].exit.call(t,e)}n.length=_}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function dit(e,t,n){return ti(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function rce(e){if(e===null||Ul(e)||oit(e))return 1;if(sit(e))return 2}function zX(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const GU={name:"attention",tokenize:hit,resolveAll:fit};function fit(e,t){let n=-1,r,i,s,o,a,l,u,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d=Object.assign({},e[r][1].end),f=Object.assign({},e[n][1].start);ice(d,-l),ice(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[r][1].end)},a={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:f},s={type:l>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:l>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=fc(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=fc(u,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),u=fc(u,zX(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=fc(u,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,u=fc(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Mm(e,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function hit(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=rce(r);let s;return o;function o(l){return s=l,e.enter("attentionSequence"),a(l)}function a(l){if(l===s)return e.consume(l),a;const u=e.exit("attentionSequence"),c=rce(l),d=!c||c===2&&i||n.includes(l),f=!i||i===2&&c||n.includes(r);return u._open=!!(s===42?d:d&&(i||!f)),u._close=!!(s===42?f:f&&(c||!d)),t(l)}}function ice(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const pit={name:"autolink",tokenize:mit};function mit(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return oh(h)?(e.consume(h),o):h===64?n(h):u(h)}function o(h){return h===43||h===45||h===46||Su(h)?(r=1,a(h)):u(h)}function a(h){return h===58?(e.consume(h),r=0,l):(h===43||h===45||h===46||Su(h))&&r++<32?(e.consume(h),a):(r=0,u(h))}function l(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||qU(h)?n(h):(e.consume(h),l)}function u(h){return h===64?(e.consume(h),c):nit(h)?(e.consume(h),u):n(h)}function c(h){return Su(h)?d(h):n(h)}function d(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):f(h)}function f(h){if((h===45||Su(h))&&r++<63){const p=h===45?f:d;return e.consume(h),p}return n(h)}}const f6={tokenize:git,partial:!0};function git(e,t,n){return r;function r(s){return yr(s)?ti(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||sn(s)?t(s):n(s)}}const gTe={name:"blockQuote",tokenize:yit,continuation:{tokenize:vit},exit:bit};function yit(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return yr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function vit(e,t,n){const r=this;return i;function i(o){return yr(o)?ti(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(gTe,t,n)(o)}}function bit(e){e.exit("blockQuote")}const yTe={name:"characterEscape",tokenize:_it};function _it(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return iit(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const vTe={name:"characterReference",tokenize:wit};function wit(e,t,n){const r=this;let i=0,s,o;return a;function a(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),l}function l(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,o=Su,c(d))}function u(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=rit,c):(e.enter("characterReferenceValue"),s=7,o=WU,c(d))}function c(d){if(d===59&&i){const f=e.exit("characterReferenceValue");return o===Su&&!BX(r.sliceSerialize(f))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&i++<s?(e.consume(d),c):n(d)}}const sce={tokenize:Eit,partial:!0},oce={name:"codeFenced",tokenize:xit,concrete:!0};function xit(e,t,n){const r=this,i={tokenize:x,partial:!0};let s=0,o=0,a;return l;function l(S){return u(S)}function u(S){const E=r.events[r.events.length-1];return s=E&&E[1].type==="linePrefix"?E[2].sliceSerialize(E[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),yr(S)?ti(e,d,"whitespace")(S):d(S))}function d(S){return S===null||sn(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(sce,m,w)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(S))}function f(S){return S===null||sn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(S)):yr(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ti(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),f)}function h(S){return S===null||sn(S)?d(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||sn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,w,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&yr(S)?ti(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||sn(S)?e.check(sce,m,w)(S):(e.enter("codeFlowValue"),_(S))}function _(S){return S===null||sn(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),_)}function w(S){return e.exit("codeFenced"),t(S)}function x(S,E,T){let I=0;return k;function k(D){return S.enter("lineEnding"),S.consume(D),S.exit("lineEnding"),P}function P(D){return S.enter("codeFencedFence"),yr(D)?ti(S,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):L(D)}function L(D){return D===a?(S.enter("codeFencedFenceSequence"),R(D)):T(D)}function R(D){return D===a?(I++,S.consume(D),R):I>=o?(S.exit("codeFencedFenceSequence"),yr(D)?ti(S,$,"whitespace")(D):$(D)):T(D)}function $(D){return D===null||sn(D)?(S.exit("codeFencedFence"),E(D)):T(D)}}}function Eit(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const sB={name:"codeIndented",tokenize:Tit},Sit={tokenize:Cit,partial:!0};function Tit(e,t,n){const r=this;return i;function i(u){return e.enter("codeIndented"),ti(e,s,"linePrefix",5)(u)}function s(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):sn(u)?e.attempt(Sit,o,l)(u):(e.enter("codeFlowValue"),a(u))}function a(u){return u===null||sn(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),a)}function l(u){return e.exit("codeIndented"),t(u)}}function Cit(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):sn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ti(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):sn(o)?i(o):n(o)}}const Ait={name:"codeText",tokenize:Rit,resolve:Iit,previous:kit};function Iit(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function kit(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Rit(e,t,n){let r=0,i,s;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),a(d)}function a(d){return d===96?(e.consume(d),r++,a):(e.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),l):d===96?(s=e.enter("codeTextSequence"),i=0,c(d)):sn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):(e.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||sn(d)?(e.exit("codeTextData"),l(d)):(e.consume(d),u)}function c(d){return d===96?(e.consume(d),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",u(d))}}class Pit{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&MT(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),MT(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),MT(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);MT(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);MT(this.left,n.reverse())}}}function MT(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function bTe(e){const t={};let n=-1,r,i,s,o,a,l,u;const c=new Pit(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Nit(c,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Mm(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function Nit(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,l=[],u={};let c,d,f=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),d&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),f=g.length;f--;){const y=a.slice(g[f],g[f+1]),v=s.pop();l.push([v,v+y.length-1]),e.splice(v,2,y)}for(l.reverse(),f=-1;++f<l.length;)u[p+l[f][0]]=p+l[f][1],p+=l[f][1]-l[f][0]-1;return u}const Oit={tokenize:$it,resolve:Mit},Dit={tokenize:Lit,partial:!0};function Mit(e){return bTe(e),e}function $it(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):sn(a)?e.check(Dit,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Lit(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ti(e,s,"linePrefix")}function s(o){if(o===null||sn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function _Te(e,t,n,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return d;function d(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),f):y===null||y===32||y===41||qU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function f(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),f(y)):y===null||y===60||sn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Ul(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<u&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||qU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function wTe(e,t,n,r,i,s){const o=this;let a=0,l;return u;function u(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!l||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):sn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===null||h===91||h===93||sn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),l||(l=!yr(h)),h===92?f:d)}function f(h){return h===91||h===92||h===93?(e.consume(h),a++,d):d(h)}}function xTe(e,t,n,r,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(e.enter(r),e.enter(i),e.consume(f),e.exit(i),o=f===40?41:f,l):n(f)}function l(f){return f===o?(e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):(e.enter(s),u(f))}function u(f){return f===o?(e.exit(s),l(o)):f===null?n(f):sn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),ti(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===o||f===null||sn(f)?(e.exit("chunkString"),u(f)):(e.consume(f),f===92?d:c)}function d(f){return f===o||f===92?(e.consume(f),c):c(f)}}function V2(e,t){let n;return r;function r(i){return sn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):yr(i)?ti(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Fit={name:"definition",tokenize:Bit},jit={tokenize:zit,partial:!0};function Bit(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return wTe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=lx(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),l):n(h)}function l(h){return Ul(h)?V2(e,u)(h):u(h)}function u(h){return _Te(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(jit,d,d)(h)}function d(h){return yr(h)?ti(e,f,"whitespace")(h):f(h)}function f(h){return h===null||sn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function zit(e,t,n){return r;function r(a){return Ul(a)?V2(e,i)(a):n(a)}function i(a){return xTe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return yr(a)?ti(e,o,"whitespace")(a):o(a)}function o(a){return a===null||sn(a)?t(a):n(a)}}const Uit={name:"hardBreakEscape",tokenize:Vit};function Vit(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return sn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const Hit={name:"headingAtx",tokenize:Wit,resolve:qit};function qit(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Mm(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function Wit(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Ul(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),l(c)):c===null||sn(c)?(e.exit("atxHeading"),t(c)):yr(c)?ti(e,a,"whitespace")(c):(e.enter("atxHeadingText"),u(c))}function l(c){return c===35?(e.consume(c),l):(e.exit("atxHeadingSequence"),a(c))}function u(c){return c===null||c===35||Ul(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),u)}}const Git=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ace=["pre","script","style","textarea"],Yit={name:"htmlFlow",tokenize:Jit,resolveTo:Qit,concrete:!0},Kit={tokenize:est,partial:!0},Xit={tokenize:Zit,partial:!0};function Qit(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Jit(e,t,n){const r=this;let i,s,o,a,l;return u;function u(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),d}function d(j){return j===33?(e.consume(j),f):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:M):oh(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function f(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):oh(j)?(e.consume(j),i=4,r.interrupt?t:M):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:M):n(j)}function p(j){const H="CDATA[";return j===H.charCodeAt(a++)?(e.consume(j),a===H.length?r.interrupt?t:L:p):n(j)}function m(j){return oh(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||Ul(j)){const H=j===47,G=o.toLowerCase();return!H&&!s&&ace.includes(G)?(i=1,r.interrupt?t(j):L(j)):Git.includes(o.toLowerCase())?(i=6,H?(e.consume(j),y):r.interrupt?t(j):L(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):_(j))}return j===45||Su(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:L):n(j)}function v(j){return yr(j)?(e.consume(j),v):k(j)}function _(j){return j===47?(e.consume(j),k):j===58||j===95||oh(j)?(e.consume(j),w):yr(j)?(e.consume(j),_):k(j)}function w(j){return j===45||j===46||j===58||j===95||Su(j)?(e.consume(j),w):x(j)}function x(j){return j===61?(e.consume(j),S):yr(j)?(e.consume(j),x):_(j)}function S(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),l=j,E):yr(j)?(e.consume(j),S):T(j)}function E(j){return j===l?(e.consume(j),l=null,I):j===null||sn(j)?n(j):(e.consume(j),E)}function T(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Ul(j)?x(j):(e.consume(j),T)}function I(j){return j===47||j===62||yr(j)?_(j):n(j)}function k(j){return j===62?(e.consume(j),P):n(j)}function P(j){return j===null||sn(j)?L(j):yr(j)?(e.consume(j),P):n(j)}function L(j){return j===45&&i===2?(e.consume(j),O):j===60&&i===1?(e.consume(j),F):j===62&&i===4?(e.consume(j),z):j===63&&i===3?(e.consume(j),M):j===93&&i===5?(e.consume(j),V):sn(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Kit,q,R)(j)):j===null||sn(j)?(e.exit("htmlFlowData"),R(j)):(e.consume(j),L)}function R(j){return e.check(Xit,$,q)(j)}function $(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),D}function D(j){return j===null||sn(j)?R(j):(e.enter("htmlFlowData"),L(j))}function O(j){return j===45?(e.consume(j),M):L(j)}function F(j){return j===47?(e.consume(j),o="",U):L(j)}function U(j){if(j===62){const H=o.toLowerCase();return ace.includes(H)?(e.consume(j),z):L(j)}return oh(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),U):L(j)}function V(j){return j===93?(e.consume(j),M):L(j)}function M(j){return j===62?(e.consume(j),z):j===45&&i===2?(e.consume(j),M):L(j)}function z(j){return j===null||sn(j)?(e.exit("htmlFlowData"),q(j)):(e.consume(j),z)}function q(j){return e.exit("htmlFlow"),t(j)}}function Zit(e,t,n){const r=this;return i;function i(o){return sn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function est(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(f6,t,n)}}const tst={name:"htmlText",tokenize:nst};function nst(e,t,n){const r=this;let i,s,o;return a;function a(M){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(M),l}function l(M){return M===33?(e.consume(M),u):M===47?(e.consume(M),x):M===63?(e.consume(M),_):oh(M)?(e.consume(M),T):n(M)}function u(M){return M===45?(e.consume(M),c):M===91?(e.consume(M),s=0,p):oh(M)?(e.consume(M),v):n(M)}function c(M){return M===45?(e.consume(M),h):n(M)}function d(M){return M===null?n(M):M===45?(e.consume(M),f):sn(M)?(o=d,F(M)):(e.consume(M),d)}function f(M){return M===45?(e.consume(M),h):d(M)}function h(M){return M===62?O(M):M===45?f(M):d(M)}function p(M){const z="CDATA[";return M===z.charCodeAt(s++)?(e.consume(M),s===z.length?m:p):n(M)}function m(M){return M===null?n(M):M===93?(e.consume(M),g):sn(M)?(o=m,F(M)):(e.consume(M),m)}function g(M){return M===93?(e.consume(M),y):m(M)}function y(M){return M===62?O(M):M===93?(e.consume(M),y):m(M)}function v(M){return M===null||M===62?O(M):sn(M)?(o=v,F(M)):(e.consume(M),v)}function _(M){return M===null?n(M):M===63?(e.consume(M),w):sn(M)?(o=_,F(M)):(e.consume(M),_)}function w(M){return M===62?O(M):_(M)}function x(M){return oh(M)?(e.consume(M),S):n(M)}function S(M){return M===45||Su(M)?(e.consume(M),S):E(M)}function E(M){return sn(M)?(o=E,F(M)):yr(M)?(e.consume(M),E):O(M)}function T(M){return M===45||Su(M)?(e.consume(M),T):M===47||M===62||Ul(M)?I(M):n(M)}function I(M){return M===47?(e.consume(M),O):M===58||M===95||oh(M)?(e.consume(M),k):sn(M)?(o=I,F(M)):yr(M)?(e.consume(M),I):O(M)}function k(M){return M===45||M===46||M===58||M===95||Su(M)?(e.consume(M),k):P(M)}function P(M){return M===61?(e.consume(M),L):sn(M)?(o=P,F(M)):yr(M)?(e.consume(M),P):I(M)}function L(M){return M===null||M===60||M===61||M===62||M===96?n(M):M===34||M===39?(e.consume(M),i=M,R):sn(M)?(o=L,F(M)):yr(M)?(e.consume(M),L):(e.consume(M),$)}function R(M){return M===i?(e.consume(M),i=void 0,D):M===null?n(M):sn(M)?(o=R,F(M)):(e.consume(M),R)}function $(M){return M===null||M===34||M===39||M===60||M===61||M===96?n(M):M===47||M===62||Ul(M)?I(M):(e.consume(M),$)}function D(M){return M===47||M===62||Ul(M)?I(M):n(M)}function O(M){return M===62?(e.consume(M),e.exit("htmlTextData"),e.exit("htmlText"),t):n(M)}function F(M){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(M),e.exit("lineEnding"),U}function U(M){return yr(M)?ti(e,V,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):V(M)}function V(M){return e.enter("htmlTextData"),o(M)}}const UX={name:"labelEnd",tokenize:lst,resolveTo:ast,resolveAll:ost},rst={tokenize:ust},ist={tokenize:cst},sst={tokenize:dst};function ost(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function ast(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},u={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",l,t],["enter",u,t]],a=fc(a,e.slice(s+1,s+r+3)),a=fc(a,[["enter",c,t]]),a=fc(a,zX(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=fc(a,[["exit",c,t],e[o-2],e[o-1],["exit",u,t]]),a=fc(a,e.slice(o+1)),a=fc(a,[["exit",l,t]]),Mm(e,s,e.length,a),e}function lst(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(f){return s?s._inactive?d(f):(o=r.parser.defined.includes(lx(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),l):n(f)}function l(f){return f===40?e.attempt(rst,c,o?c:d)(f):f===91?e.attempt(ist,c,o?u:d)(f):o?c(f):d(f)}function u(f){return e.attempt(sst,c,d)(f)}function c(f){return t(f)}function d(f){return s._balanced=!0,n(f)}}function ust(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),i}function i(d){return Ul(d)?V2(e,s)(d):s(d)}function s(d){return d===41?c(d):_Te(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return Ul(d)?V2(e,l)(d):c(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?xTe(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function u(d){return Ul(d)?V2(e,c)(d):c(d)}function c(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function cst(e,t,n){const r=this;return i;function i(a){return wTe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(lx(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function dst(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const fst={name:"labelStartImage",tokenize:hst,resolveAll:UX.resolveAll};function hst(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const pst={name:"labelStartLink",tokenize:mst,resolveAll:UX.resolveAll};function mst(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const oB={name:"lineEnding",tokenize:gst};function gst(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ti(e,t,"linePrefix")}}const lD={name:"thematicBreak",tokenize:yst};function yst(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),o(u)}function o(u){return i=u,a(u)}function a(u){return u===i?(e.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||sn(u))?(e.exit("thematicBreak"),t(u)):n(u)}function l(u){return u===i?(e.consume(u),r++,l):(e.exit("thematicBreakSequence"),yr(u)?ti(e,a,"whitespace")(u):a(u))}}const _l={name:"list",tokenize:_st,continuation:{tokenize:wst},exit:Est},vst={tokenize:Sst,partial:!0},bst={tokenize:xst,partial:!0};function _st(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:WU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(lD,n,u)(h):u(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(h)}return n(h)}function l(h){return WU(h)&&++o<10?(e.consume(h),l):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),u(h)):n(h)}function u(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(f6,r.interrupt?n:c,e.attempt(vst,f,d))}function c(h){return r.containerState.initialBlankLine=!0,s++,f(h)}function d(h){return yr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),f):n(h)}function f(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function wst(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(f6,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ti(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!yr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(bst,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ti(e,e.attempt(_l,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function xst(e,t,n){const r=this;return ti(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function Est(e){e.exit(this.containerState.type)}function Sst(e,t,n){const r=this;return ti(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!yr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const lce={name:"setextUnderline",tokenize:Cst,resolveTo:Tst};function Tst(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Cst(e,t,n){const r=this;let i;return s;function s(u){let c=r.events.length,d;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){d=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(e.consume(u),a):(e.exit("setextHeadingLineSequence"),yr(u)?ti(e,l,"lineSuffix")(u):l(u))}function l(u){return u===null||sn(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const Ast={tokenize:Ist};function Ist(e){const t=this,n=e.attempt(f6,r,e.attempt(this.parser.constructs.flowInitial,i,ti(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Oit,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const kst={resolveAll:STe()},Rst=ETe("string"),Pst=ETe("text");function ETe(e){return{tokenize:t,resolveAll:STe(e==="text"?Nst:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return u(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const d=i[c];let f=-1;if(d)for(;++f<d.length;){const h=d[f];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function STe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Nst(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(a){const u={type:n===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},u.start),r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}function Ost(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const l={consume:v,enter:_,exit:w,attempt:E(x),check:E(S),interrupt:E(S,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:f,now:p,defineSkip:m,write:d};let c=t.tokenize.call(u,l);return t.resolveAll&&s.push(t),u;function d(P){return o=fc(o,P),g(),o[o.length-1]!==null?[]:(T(t,0),u.events=zX(s,u.events,u),u.events)}function f(P,L){return Mst(h(P),L)}function h(P){return Dst(o,P)}function p(){const{line:P,column:L,offset:R,_index:$,_bufferIndex:D}=r;return{line:P,column:L,offset:R,_index:$,_bufferIndex:D}}function m(P){i[P.line]=P.column,k()}function g(){let P;for(;r._index<o.length;){const L=o[r._index];if(typeof L=="string")for(P=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===P&&r._bufferIndex<L.length;)y(L.charCodeAt(r._bufferIndex));else y(L)}}function y(P){c=c(P)}function v(P){sn(P)?(r.line++,r.column=1,r.offset+=P===-3?2:1,k()):P!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=P}function _(P,L){const R=L||{};return R.type=P,R.start=p(),u.events.push(["enter",R,u]),a.push(R),R}function w(P){const L=a.pop();return L.end=p(),u.events.push(["exit",L,u]),L}function x(P,L){T(P,L.from)}function S(P,L){L.restore()}function E(P,L){return R;function R($,D,O){let F,U,V,M;return Array.isArray($)?q($):"tokenize"in $?q([$]):z($);function z(J){return re;function re(ie){const te=ie!==null&&J[ie],ae=ie!==null&&J.null,_e=[...Array.isArray(te)?te:te?[te]:[],...Array.isArray(ae)?ae:ae?[ae]:[]];return q(_e)(ie)}}function q(J){return F=J,U=0,J.length===0?O:j(J[U])}function j(J){return re;function re(ie){return M=I(),V=J,J.partial||(u.currentConstruct=J),J.name&&u.parser.constructs.disable.null.includes(J.name)?G():J.tokenize.call(L?Object.assign(Object.create(u),L):u,l,H,G)(ie)}}function H(J){return P(V,M),D}function G(J){return M.restore(),++U<F.length?j(F[U]):O}}}function T(P,L){P.resolveAll&&!s.includes(P)&&s.push(P),P.resolve&&Mm(u.events,L,u.events.length-L,P.resolve(u.events.slice(L),u)),P.resolveTo&&(u.events=P.resolveTo(u.events,u))}function I(){const P=p(),L=u.previous,R=u.currentConstruct,$=u.events.length,D=Array.from(a);return{restore:O,from:$};function O(){r=P,u.previous=L,u.currentConstruct=R,u.events.length=$,a=D,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Dst(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Mst(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const $st={42:_l,43:_l,45:_l,48:_l,49:_l,50:_l,51:_l,52:_l,53:_l,54:_l,55:_l,56:_l,57:_l,62:gTe},Lst={91:Fit},Fst={[-2]:sB,[-1]:sB,32:sB},jst={35:Hit,42:lD,45:[lce,lD],60:Yit,61:lce,95:lD,96:oce,126:oce},Bst={38:vTe,92:yTe},zst={[-5]:oB,[-4]:oB,[-3]:oB,33:fst,38:vTe,42:GU,60:[pit,tst],91:pst,92:[Uit,yTe],93:UX,95:GU,96:Ait},Ust={null:[GU,kst]},Vst={null:[42,95]},Hst={null:[]},qst=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Vst,contentInitial:Lst,disable:Hst,document:$st,flow:jst,flowInitial:Fst,insideSpan:Ust,string:Bst,text:zst},Symbol.toStringTag,{value:"Module"}));function Wst(e){const n=Zrt([qst,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(ait),document:i(uit),flow:i(Ast),string:i(Rst),text:i(Pst)};return r;function i(s){return o;function o(a){return Ost(r,s,a)}}}function Gst(e){for(;!bTe(e););return e}const uce=/[\0\t\n\r]/g;function Yst(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const l=[];let u,c,d,f,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(uce.lastIndex=d,u=uce.exec(s),f=u&&u.index!==void 0?u.index:s.length,h=s.charCodeAt(f),!u){t=s.slice(d);break}if(h===10&&d===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<f&&(l.push(s.slice(d,f)),e+=f-d),h){case 0:{l.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,l.push(-2);e++<c;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}d=f+1}return a&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const Kst=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Xst(e){return e.replace(Kst,Qst)}function Qst(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return mTe(n.slice(s?2:1),s?16:10)}return BX(n)||e}const TTe={}.hasOwnProperty;function Jst(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Zst(n)(Gst(Wst(n).document().write(Yst()(e,t,!0))))}function Zst(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Se),autolinkProtocol:I,autolinkEmail:I,atxHeading:s($e),blockQuote:s(ae),characterEscape:I,characterReference:I,codeFenced:s(_e),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(_e,o),codeText:s(ce,o),codeTextData:I,data:I,codeFlowValue:I,definition:s(ze),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Oe),hardBreakEscape:s(Ne),hardBreakTrailing:s(Ne),htmlFlow:s(pe,o),htmlFlowData:I,htmlText:s(pe,o),htmlTextData:I,image:s(ue),label:o,link:s(Se),listItem:s(at),listItemValue:f,listOrdered:s(De,d),listUnordered:s(De),paragraph:s(He),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s($e),strong:s(le),thematicBreak:s(Ye)},exit:{atxHeading:l(),atxHeadingSequence:x,autolink:l(),autolinkEmail:te,autolinkProtocol:ie,blockQuote:l(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:J,characterReference:re,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:k,codeIndented:l(y),codeText:l(D),codeTextData:k,data:k,definition:l(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:_,emphasis:l(),hardBreakEscape:l(L),hardBreakTrailing:l(L),htmlFlow:l(R),htmlFlowData:k,htmlText:l($),htmlTextData:k,image:l(F),label:V,labelText:U,lineEnding:P,link:l(O),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:H,resourceDestinationString:M,resourceTitleString:z,resource:q,setextHeading:l(T),setextHeadingLineSequence:E,setextHeadingText:S,strong:l(),thematicBreak:l()}};CTe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(fe){let Te={type:"root",children:[]};const Ve={stack:[Te],tokenStack:[],config:t,enter:a,exit:u,buffer:o,resume:c,data:n},et=[];let St=-1;for(;++St<fe.length;)if(fe[St][1].type==="listOrdered"||fe[St][1].type==="listUnordered")if(fe[St][0]==="enter")et.push(St);else{const An=et.pop();St=i(fe,An,St)}for(St=-1;++St<fe.length;){const An=t[fe[St][0]];TTe.call(An,fe[St][1].type)&&An[fe[St][1].type].call(Object.assign({sliceSerialize:fe[St][2].sliceSerialize},Ve),fe[St][1])}if(Ve.tokenStack.length>0){const An=Ve.tokenStack[Ve.tokenStack.length-1];(An[1]||cce).call(Ve,void 0,An[0])}for(Te.position={start:Rg(fe.length>0?fe[0][1].start:{line:1,column:1,offset:0}),end:Rg(fe.length>0?fe[fe.length-2][1].end:{line:1,column:1,offset:0})},St=-1;++St<t.transforms.length;)Te=t.transforms[St](Te)||Te;return Te}function i(fe,Te,Ve){let et=Te-1,St=-1,An=!1,_r,Br,Or,yn;for(;++et<=Ve;){const Nn=fe[et];switch(Nn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Nn[0]==="enter"?St++:St--,yn=void 0;break}case"lineEndingBlank":{Nn[0]==="enter"&&(_r&&!yn&&!St&&!Or&&(Or=et),yn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:yn=void 0}if(!St&&Nn[0]==="enter"&&Nn[1].type==="listItemPrefix"||St===-1&&Nn[0]==="exit"&&(Nn[1].type==="listUnordered"||Nn[1].type==="listOrdered")){if(_r){let sr=et;for(Br=void 0;sr--;){const tr=fe[sr];if(tr[1].type==="lineEnding"||tr[1].type==="lineEndingBlank"){if(tr[0]==="exit")continue;Br&&(fe[Br][1].type="lineEndingBlank",An=!0),tr[1].type="lineEnding",Br=sr}else if(!(tr[1].type==="linePrefix"||tr[1].type==="blockQuotePrefix"||tr[1].type==="blockQuotePrefixWhitespace"||tr[1].type==="blockQuoteMarker"||tr[1].type==="listItemIndent"))break}Or&&(!Br||Or<Br)&&(_r._spread=!0),_r.end=Object.assign({},Br?fe[Br][1].start:Nn[1].end),fe.splice(Br||et,0,["exit",_r,Nn[2]]),et++,Ve++}if(Nn[1].type==="listItemPrefix"){const sr={type:"listItem",_spread:!1,start:Object.assign({},Nn[1].start),end:void 0};_r=sr,fe.splice(et,0,["enter",sr,Nn[2]]),et++,Ve++,Or=void 0,yn=!0}}}return fe[Te][1]._spread=An,Ve}function s(fe,Te){return Ve;function Ve(et){a.call(this,fe(et),et),Te&&Te.call(this,et)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(fe,Te,Ve){this.stack[this.stack.length-1].children.push(fe),this.stack.push(fe),this.tokenStack.push([Te,Ve]),fe.position={start:Rg(Te.start),end:void 0}}function l(fe){return Te;function Te(Ve){fe&&fe.call(this,Ve),u.call(this,Ve)}}function u(fe,Te){const Ve=this.stack.pop(),et=this.tokenStack.pop();if(et)et[0].type!==fe.type&&(Te?Te.call(this,fe,et[0]):(et[1]||cce).call(this,fe,et[0]));else throw new Error("Cannot close `"+fe.type+"` ("+U2({start:fe.start,end:fe.end})+"): it’s not open");Ve.position.end=Rg(fe.end)}function c(){return Qrt(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(fe){if(this.data.expectingFirstListItemValue){const Te=this.stack[this.stack.length-2];Te.start=Number.parseInt(this.sliceSerialize(fe),10),this.data.expectingFirstListItemValue=void 0}}function h(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.lang=fe}function p(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.meta=fe}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.value=fe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.value=fe.replace(/(\r?\n|\r)$/g,"")}function v(fe){const Te=this.resume(),Ve=this.stack[this.stack.length-1];Ve.label=Te,Ve.identifier=lx(this.sliceSerialize(fe)).toLowerCase()}function _(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.title=fe}function w(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.url=fe}function x(fe){const Te=this.stack[this.stack.length-1];if(!Te.depth){const Ve=this.sliceSerialize(fe).length;Te.depth=Ve}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function E(fe){const Te=this.stack[this.stack.length-1];Te.depth=this.sliceSerialize(fe).codePointAt(0)===61?1:2}function T(){this.data.setextHeadingSlurpLineEnding=void 0}function I(fe){const Ve=this.stack[this.stack.length-1].children;let et=Ve[Ve.length-1];(!et||et.type!=="text")&&(et=Ie(),et.position={start:Rg(fe.start),end:void 0},Ve.push(et)),this.stack.push(et)}function k(fe){const Te=this.stack.pop();Te.value+=this.sliceSerialize(fe),Te.position.end=Rg(fe.end)}function P(fe){const Te=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ve=Te.children[Te.children.length-1];Ve.position.end=Rg(fe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Te.type)&&(I.call(this,fe),k.call(this,fe))}function L(){this.data.atHardBreak=!0}function R(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.value=fe}function $(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.value=fe}function D(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.value=fe}function O(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=Te,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function F(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=Te,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function U(fe){const Te=this.sliceSerialize(fe),Ve=this.stack[this.stack.length-2];Ve.label=Xst(Te),Ve.identifier=lx(Te).toLowerCase()}function V(){const fe=this.stack[this.stack.length-1],Te=this.resume(),Ve=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ve.type==="link"){const et=fe.children;Ve.children=et}else Ve.alt=Te}function M(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.url=fe}function z(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.title=fe}function q(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function H(fe){const Te=this.resume(),Ve=this.stack[this.stack.length-1];Ve.label=Te,Ve.identifier=lx(this.sliceSerialize(fe)).toLowerCase(),this.data.referenceType="full"}function G(fe){this.data.characterReferenceType=fe.type}function J(fe){const Te=this.sliceSerialize(fe),Ve=this.data.characterReferenceType;let et;Ve?(et=mTe(Te,Ve==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):et=BX(Te);const St=this.stack[this.stack.length-1];St.value+=et}function re(fe){const Te=this.stack.pop();Te.position.end=Rg(fe.end)}function ie(fe){k.call(this,fe);const Te=this.stack[this.stack.length-1];Te.url=this.sliceSerialize(fe)}function te(fe){k.call(this,fe);const Te=this.stack[this.stack.length-1];Te.url="mailto:"+this.sliceSerialize(fe)}function ae(){return{type:"blockquote",children:[]}}function _e(){return{type:"code",lang:null,meta:null,value:""}}function ce(){return{type:"inlineCode",value:""}}function ze(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Oe(){return{type:"emphasis",children:[]}}function $e(){return{type:"heading",depth:0,children:[]}}function Ne(){return{type:"break"}}function pe(){return{type:"html",value:""}}function ue(){return{type:"image",title:null,url:"",alt:null}}function Se(){return{type:"link",title:null,url:"",children:[]}}function De(fe){return{type:"list",ordered:fe.type==="listOrdered",start:null,spread:fe._spread,children:[]}}function at(fe){return{type:"listItem",spread:fe._spread,checked:null,children:[]}}function He(){return{type:"paragraph",children:[]}}function le(){return{type:"strong",children:[]}}function Ie(){return{type:"text",value:""}}function Ye(){return{type:"thematicBreak"}}}function Rg(e){return{line:e.line,column:e.column,offset:e.offset}}function CTe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?CTe(e,r):eot(e,r)}}function eot(e,t){let n;for(n in t)if(TTe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function cce(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+U2({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+U2({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+U2({start:t.start,end:t.end})+") is still open")}function tot(e){const t=this;t.parser=n;function n(r){return Jst(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function not(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function rot(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function iot(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function sot(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function oot(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function aot(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=gS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,u),e.applyData(t,u)}function lot(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function uot(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function ATe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function cot(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ATe(e,t);const i={src:gS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function dot(e,t){const n={src:gS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function fot(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function hot(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ATe(e,t);const i={href:gS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function pot(e,t){const n={href:gS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function mot(e,t,n){const r=e.all(t),i=n?got(n):ITe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let d;c&&c.type==="element"&&c.tagName==="p"?d=c:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,u),e.applyData(t,u)}function got(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=ITe(n[r])}return t}function ITe(e){const t=e.spread;return t??e.children.length>1}function yot(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function vot(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function bot(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function _ot(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function wot(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=op(t.children[1]),l=d6(t.children[t.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function xot(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let l=-1;const u=[];for(;++l<a;){const d=t.children[l],f={},h=o?o[l]:void 0;h&&(f.align=h);let p={type:"element",tagName:s,properties:f,children:[]};d&&(p.children=e.all(d),e.patch(d,p),p=e.applyData(d,p)),u.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,c),e.applyData(t,c)}function Eot(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const dce=9,fce=32;function Sot(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(hce(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(hce(t.slice(i),i>0,!1)),s.join("")}function hce(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===dce||s===fce;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===dce||s===fce;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Tot(e,t){const n={type:"text",value:Sot(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Cot(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Aot={blockquote:not,break:rot,code:iot,delete:sot,emphasis:oot,footnoteReference:aot,heading:lot,html:uot,imageReference:cot,image:dot,inlineCode:fot,linkReference:hot,link:pot,listItem:mot,list:yot,paragraph:vot,root:bot,strong:_ot,table:wot,tableCell:Eot,tableRow:xot,text:Tot,thematicBreak:Cot,toml:mN,yaml:mN,definition:mN,footnoteDefinition:mN};function mN(){}const kTe=-1,h6=0,ZM=1,e$=2,VX=3,HX=4,qX=5,WX=6,RTe=7,PTe=8,pce=typeof self=="object"?self:globalThis,Iot=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case h6:case kTe:return n(o,i);case ZM:{const a=n([],i);for(const l of o)a.push(r(l));return a}case e$:{const a=n({},i);for(const[l,u]of o)a[r(l)]=r(u);return a}case VX:return n(new Date(o),i);case HX:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case qX:{const a=n(new Map,i);for(const[l,u]of o)a.set(r(l),r(u));return a}case WX:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case RTe:{const{name:a,message:l}=o;return n(new pce[a](l),i)}case PTe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new pce[s](o),i)};return r},mce=e=>Iot(new Map,e)(0),j_="",{toString:kot}={},{keys:Rot}=Object,$T=e=>{const t=typeof e;if(t!=="object"||!e)return[h6,t];const n=kot.call(e).slice(8,-1);switch(n){case"Array":return[ZM,j_];case"Object":return[e$,j_];case"Date":return[VX,j_];case"RegExp":return[HX,j_];case"Map":return[qX,j_];case"Set":return[WX,j_]}return n.includes("Array")?[ZM,n]:n.includes("Error")?[RTe,n]:[e$,n]},gN=([e,t])=>e===h6&&(t==="function"||t==="symbol"),Pot=(e,t,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=$T(o);switch(a){case h6:{let c=o;switch(l){case"bigint":a=PTe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([kTe],o)}return i([a,c],o)}case ZM:{if(l)return i([l,[...o]],o);const c=[],d=i([a,c],o);for(const f of o)c.push(s(f));return d}case e$:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],d=i([a,c],o);for(const f of Rot(o))(e||!gN($T(o[f])))&&c.push([s(f),s(o[f])]);return d}case VX:return i([a,o.toISOString()],o);case HX:{const{source:c,flags:d}=o;return i([a,{source:c,flags:d}],o)}case qX:{const c=[],d=i([a,c],o);for(const[f,h]of o)(e||!(gN($T(f))||gN($T(h))))&&c.push([s(f),s(h)]);return d}case WX:{const c=[],d=i([a,c],o);for(const f of o)(e||!gN($T(f)))&&c.push(s(f));return d}}const{message:u}=o;return i([a,{name:l,message:u}],o)};return s},gce=(e,{json:t,lossy:n}={})=>{const r=[];return Pot(!(t||n),!!t,new Map,r)(e),r},Yx=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?mce(gce(e,t)):structuredClone(e):(e,t)=>mce(gce(e,t));function Not(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Oot(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Dot(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Not,r=e.options.footnoteBackLabel||Oot,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[l]);if(!u)continue;const c=e.all(u),d=String(u.identifier).toUpperCase(),f=gS(d.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(d);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(l,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(c,!0)};e.patch(u,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Yx(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const NTe=function(e){if(e==null)return Fot;if(typeof e=="function")return p6(e);if(typeof e=="object")return Array.isArray(e)?Mot(e):$ot(e);if(typeof e=="string")return Lot(e);throw new Error("Expected function, string, or object as test")};function Mot(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=NTe(e[n]);return p6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function $ot(e){const t=e;return p6(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Lot(e){return p6(t);function t(n){return n&&n.type===e}}function p6(e){return t;function t(n,r,i){return!!(jot(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Fot(){return!0}function jot(e){return e!==null&&typeof e=="object"&&"type"in e}const OTe=[],Bot=!0,yce=!1,zot="skip";function Uot(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=NTe(i),o=r?-1:1;a(e,void 0,[])();function a(l,u,c){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const h=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(h?"<"+h+">":""))+")"})}return f;function f(){let h=OTe,p,m,g;if((!t||s(l,u,c[c.length-1]||void 0))&&(h=Vot(n(l,c)),h[0]===yce))return h;if("children"in l&&l.children){const y=l;if(y.children&&h[0]!==zot)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===yce)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Vot(e){return Array.isArray(e)?e:typeof e=="number"?[Bot,e]:e==null?OTe:[e]}function GX(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Uot(e,s,a,i);function a(l,u){const c=u[u.length-1],d=c?c.children.indexOf(l):void 0;return o(l,d,c)}}const YU={}.hasOwnProperty,Hot={};function qot(e,t){const n=t||Hot,r=new Map,i=new Map,s=new Map,o={...Aot,...n.handlers},a={all:u,applyData:Got,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:Wot,wrap:Kot};return GX(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const d=c.type==="definition"?r:i,f=String(c.identifier).toUpperCase();d.has(f)||d.set(f,c)}}),a;function l(c,d){const f=c.type,h=a.handlers[f];if(YU.call(a.handlers,f)&&h)return h(a,c,d);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in c){const{children:m,...g}=c,y=Yx(g);return y.children=a.all(c),y}return Yx(c)}return(a.options.unknownHandler||Yot)(a,c,d)}function u(c){const d=[];if("children"in c){const f=c.children;let h=-1;for(;++h<f.length;){const p=a.one(f[h],c);if(p){if(h&&f[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=vce(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=vce(m.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function Wot(e,t){e.position&&(t.position=Art(e))}function Got(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Yx(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Yot(e,t){const n=t.data||{},r="value"in t&&!(YU.call(n,"hProperties")||YU.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Kot(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function vce(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function bce(e,t){const n=qot(e,t),r=n.one(e,void 0),i=Dot(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Xot(e,t){return e&&"run"in e?async function(n,r){const i=bce(n,{file:r,...t});await e.run(i,r)}:function(n,r){return bce(n,{file:r,...t||e})}}function _ce(e){if(e)throw e}var uD=Object.prototype.hasOwnProperty,DTe=Object.prototype.toString,wce=Object.defineProperty,xce=Object.getOwnPropertyDescriptor,Ece=function(t){return typeof Array.isArray=="function"?Array.isArray(t):DTe.call(t)==="[object Array]"},Sce=function(t){if(!t||DTe.call(t)!=="[object Object]")return!1;var n=uD.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&uD.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||uD.call(t,i)},Tce=function(t,n){wce&&n.name==="__proto__"?wce(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Cce=function(t,n){if(n==="__proto__")if(uD.call(t,n)){if(xce)return xce(t,n).value}else return;return t[n]},Qot=function e(){var t,n,r,i,s,o,a=arguments[0],l=1,u=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(t=arguments[l],t!=null)for(n in t)r=Cce(a,n),i=Cce(t,n),a!==i&&(c&&i&&(Sce(i)||(s=Ece(i)))?(s?(s=!1,o=r&&Ece(r)?r:[]):o=r&&Sce(r)?r:{},Tce(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Tce(a,{name:n,newValue:i}));return a};const aB=rl(Qot);function KU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Jot(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const c=e[++s];let d=-1;if(l){o(l);return}for(;++d<i.length;)(u[d]===null||u[d]===void 0)&&(u[d]=i[d]);i=u,c?Zot(c,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Zot(e,t){let n;return r;function r(...o){const a=e.length>o.length;let l;a&&o.push(i);try{l=e.apply(this,o)}catch(u){const c=u;if(a&&n)throw c;return i(c)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Yf={basename:eat,dirname:tat,extname:nat,join:rat,sep:"/"};function eat(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Zk(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function tat(e){if(Zk(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function nat(e){Zk(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function rat(...e){let t=-1,n;for(;++t<e.length;)Zk(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":iat(n)}function iat(e){Zk(e);const t=e.codePointAt(0)===47;let n=sat(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function sat(e,t){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Zk(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const oat={cwd:aat};function aat(){return"/"}function XU(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function lat(e){if(typeof e=="string")e=new URL(e);else if(!XU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return uat(e)}function uat(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const lB=["history","path","basename","stem","extname","dirname"];class MTe{constructor(t){let n;t?XU(t)?n={path:t}:typeof t=="string"||cat(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":oat.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<lB.length;){const s=lB[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)lB.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Yf.basename(this.path):void 0}set basename(t){cB(t,"basename"),uB(t,"basename"),this.path=Yf.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Yf.dirname(this.path):void 0}set dirname(t){Ace(this.basename,"dirname"),this.path=Yf.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Yf.extname(this.path):void 0}set extname(t){if(uB(t,"extname"),Ace(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Yf.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){XU(t)&&(t=lat(t)),cB(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Yf.basename(this.path,this.extname):void 0}set stem(t){cB(t,"stem"),uB(t,"stem"),this.path=Yf.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new xa(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function uB(e,t){if(e&&e.includes(Yf.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Yf.sep+"`")}function cB(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Ace(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function cat(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const dat=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},fat={}.hasOwnProperty;class YX extends dat{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Jot()}copy(){const t=new YX;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(aB(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(hB("data",this.frozen),this.namespace[t]=n,this):fat.call(this.namespace,t)&&this.namespace[t]||void 0:t?(hB("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=yN(t),r=this.parser||this.Parser;return dB("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),dB("process",this.parser||this.Parser),fB("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=yN(t),l=r.parse(a);r.run(l,a,function(c,d,f){if(c||!d||!f)return u(c);const h=d,p=r.stringify(h,f);mat(p)?f.value=p:f.result=p,u(c,f)});function u(c,d){c||!d?o(c):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),dB("processSync",this.parser||this.Parser),fB("processSync",this.compiler||this.Compiler),this.process(t,i),kce("processSync","process",n),r;function i(s,o){n=!0,_ce(s),r=o}}run(t,n,r){Ice(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=yN(n);i.run(t,l,u);function u(c,d,f){const h=d||t;c?a(c):o?o(h):r(void 0,h,f)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),kce("runSync","run",r),i;function s(o,a){_ce(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=yN(n),i=this.compiler||this.Compiler;return fB("stringify",i),Ice(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(hB("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...d]=u;l(c,d)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=aB(!0,i.settings,u.settings))}function a(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const d=u[c];s(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let d=-1,f=-1;for(;++d<r.length;)if(r[d][0]===u){f=d;break}if(f===-1)r.push([u,...c]);else if(c.length>0){let[h,...p]=c;const m=r[f][1];KU(m)&&KU(h)&&(h=aB(!0,m,h)),r[f]=[u,h,...p]}}}}const hat=new YX().freeze();function dB(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function fB(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function hB(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ice(e){if(!KU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function kce(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function yN(e){return pat(e)?e:new MTe(e)}function pat(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function mat(e){return typeof e=="string"||gat(e)}function gat(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const yat="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Rce=[],Pce={allowDangerousHtml:!0},vat=/^(https?|ircs?|mailto|xmpp)$/i,bat=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function _at(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||Rce,l=e.remarkPlugins||Rce,u=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Pce}:Pce,c=e.skipHtml,d=e.unwrapDisallowed,f=e.urlTransform||wat,h=hat().use(tot).use(l).use(Xot,u).use(a),p=new MTe;typeof r=="string"&&(p.value=r);for(const v of bat)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+yat+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),GX(g,y),Ort(g,{Fragment:b.Fragment,components:s,ignoreInvalidStyle:!0,jsx:b.jsx,jsxs:b.jsxs,passKeys:!0,passNode:!0});function y(v,_,w){if(v.type==="raw"&&w&&typeof _=="number")return c?w.children.splice(_,1):w.children[_]={type:"text",value:v.value},_;if(v.type==="element"){let x;for(x in iB)if(Object.hasOwn(iB,x)&&Object.hasOwn(v.properties,x)){const S=v.properties[x],E=iB[x];(E===null||E.includes(v.tagName))&&(v.properties[x]=f(String(S||""),x,v))}}if(v.type==="element"){let x=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!x&&n&&typeof _=="number"&&(x=!n(v,_,w)),x&&w&&typeof _=="number")return d&&v.children?w.children.splice(_,1,...v.children):w.children.splice(_,1),_}}}function wat(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||vat.test(e.slice(0,t))?e:""}const Nce=/[#.]/g;function xat(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Nce.lastIndex=i;const a=Nce.exec(n),l=n.slice(i,a?a.index:n.length);l&&(s?s==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:o=l,i+=l.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Eat=new Set(["button","menu","reset","submit"]),QU={}.hasOwnProperty;function $Te(e,t,n){const r=n&&Aat(n);function i(s,o,...a){let l=-1,u;if(s==null){u={type:"root",children:[]};const c=o;a.unshift(c)}else if(u=xat(s,t),u.tagName=u.tagName.toLowerCase(),r&&QU.call(r,u.tagName)&&(u.tagName=r[u.tagName]),Sat(o,u.tagName)){let c;for(c in o)QU.call(o,c)&&Tat(e,u.properties,c,o[c])}else a.unshift(o);for(;++l<a.length;)JU(u.children,a[l]);return u.type==="element"&&u.tagName==="template"&&(u.content={type:"root",children:u.children},u.children=[]),u}return i}function Sat(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Eat.has(e.type.toLowerCase()):!("value"in e)}function Tat(e,t,n,r){const i=c6(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=que(r):i.commaSeparated?o=Bue(r):i.commaOrSpaceSeparated?o=que(Bue(r).join(" ")):o=Oce(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Cat(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const l=Oce(i,i.property,o[s]);a[s]=l}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function JU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)JU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?JU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Oce(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||aI(n)===aI(t)))return!0}return n}function Cat(e){const t=[];let n;for(n in e)QU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function Aat(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Iat=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],kat=$Te(Jk,"div"),Rat=$Te(Yy,"g",Iat);function Pat(e){const t=String(e),n=[];return{toOffset:i,toPoint:r};function r(s){if(typeof s=="number"&&s>-1&&s<=t.length){let o=0;for(;;){let a=n[o];if(a===void 0){const l=Dce(t,n[o-1]);a=l===-1?t.length+1:l+1,n[o]=a}if(a>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s};o++}}}function i(s){if(s&&typeof s.line=="number"&&typeof s.column=="number"&&!Number.isNaN(s.line)&&!Number.isNaN(s.column)){for(;n.length<s.line;){const a=n[n.length-1],l=Dce(t,a),u=l===-1?t.length+1:l+1;if(a===u)break;n.push(u)}const o=(s.line>1?n[s.line-2]:0)+s.column-1;if(o<n[s.line-1])return o}}}function Dce(e,t){const n=e.indexOf("\r",t),r=e.indexOf(`
`,t);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const T1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},LTe={}.hasOwnProperty,Nat=Object.prototype;function Oat(e,t){const n=t||{};return KX({file:n.file||void 0,location:!1,schema:n.space==="svg"?Yy:Jk,verbose:n.verbose||!1},e)}function KX(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},cD(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:FTe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=Pat(s),a=o.toPoint(0),l=o.toPoint(s.length);n.position={start:a,end:l}}return n}case"#documentType":{const r=t;return n={type:"doctype"},cD(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},cD(e,r,n),n}default:return n=Dat(e,t),n}}function FTe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=KX(e,t[n]);r.push(i)}return r}function Dat(e,t){const n=e.schema;e.schema=t.namespaceURI===T1.svg?Yy:Jk;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],l=(a.prefix?a.prefix+":":"")+a.name;LTe.call(Nat,l)||(i[l]=a.value)}const o=(e.schema.space==="svg"?Rat:kat)(t.tagName,i,FTe(e,t.childNodes));if(cD(e,t,o),o.tagName==="template"){const a=t,l=a.sourceCodeLocation,u=l&&l.startTag&&Fw(l.startTag),c=l&&l.endTag&&Fw(l.endTag),d=KX(e,a.content);u&&c&&e.file&&(d.position={start:u.end,end:c.start}),o.content=d}return e.schema=n,o}function cD(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Mat(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Mat(e,t,n){const r=Fw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)LTe.call(n.attrs,o)&&(s[c6(e.schema,o).property]=Fw(n.attrs[o]));n.startTag;const a=Fw(n.startTag),l=n.endTag?Fw(n.endTag):void 0,u={opening:a};l&&(u.closing=l),u.properties=s,t.data={position:u}}}return r}function Fw(e){const t=Mce({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Mce({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Mce(e){return e.line&&e.column?e:void 0}const $ce={}.hasOwnProperty;function jTe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&$ce.call(i,e)){const l=String(i[e]);o=$ce.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const $at={},Lat={}.hasOwnProperty,BTe=jTe("type",{handlers:{root:jat,element:Hat,text:Uat,comment:Vat,doctype:zat}});function Fat(e,t){const r=(t||$at).space;return BTe(e,r==="svg"?Yy:Jk)}function jat(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=XX(e.children,n,t),yS(e,n),n}function Bat(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=XX(e.children,n,t),yS(e,n),n}function zat(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return yS(e,t),t}function Uat(e){const t={nodeName:"#text",value:e.value,parentNode:null};return yS(e,t),t}function Vat(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return yS(e,t),t}function Hat(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Yy);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Lat.call(e.properties,s)){const l=qat(r,s,e.properties[s]);l&&i.push(l)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:T1[o],childNodes:[],parentNode:null};return a.childNodes=XX(e.children,a,r),yS(e,a),e.tagName==="template"&&e.content&&(a.content=Bat(e.content,r)),a}function qat(e,t,n){const r=c6(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?JSe(n):aTe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=T1[r.space]}return i}function XX(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=BTe(e[r],n);s.parentNode=t,i.push(s)}return i}function yS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Wat=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Gat=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),yi="�";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const yl={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function zTe(e){return e>=55296&&e<=57343}function Yat(e){return e>=56320&&e<=57343}function Kat(e,t){return(e-55296)*1024+9216+t}function UTe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function VTe(e){return e>=64976&&e<=65007||Gat.has(e)}var Ae;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ae=Ae||(Ae={}));const Xat=65536;class Qat{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Xat,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Yat(n))return this.pos++,this._addGap(),Kat(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Ae.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,zTe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){UTe(t)?this._err(Ae.controlCharacterInInputStream):VTe(t)&&this._err(Ae.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var kn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(kn=kn||(kn={}));function HTe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const jg=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(e=>e.charCodeAt(0))),Jat=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(e=>e.charCodeAt(0)));var pB;const Zat=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),elt=(pB=String.fromCodePoint)!==null&&pB!==void 0?pB:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function tlt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Zat.get(e))!==null&&t!==void 0?t:e}var Gs;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Gs||(Gs={}));const nlt=32;var gh;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(gh||(gh={}));function ZU(e){return e>=Gs.ZERO&&e<=Gs.NINE}function rlt(e){return e>=Gs.UPPER_A&&e<=Gs.UPPER_F||e>=Gs.LOWER_A&&e<=Gs.LOWER_F}function ilt(e){return e>=Gs.UPPER_A&&e<=Gs.UPPER_Z||e>=Gs.LOWER_A&&e<=Gs.LOWER_Z||ZU(e)}function slt(e){return e===Gs.EQUALS||ilt(e)}var Vs;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Vs||(Vs={}));var a1;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(a1||(a1={}));class olt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Vs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=a1.Strict}startEntity(t){this.decodeMode=t,this.state=Vs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Vs.EntityStart:return t.charCodeAt(n)===Gs.NUM?(this.state=Vs.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Vs.NamedEntity,this.stateNamedEntity(t,n));case Vs.NumericStart:return this.stateNumericStart(t,n);case Vs.NumericDecimal:return this.stateNumericDecimal(t,n);case Vs.NumericHex:return this.stateNumericHex(t,n);case Vs.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|nlt)===Gs.LOWER_X?(this.state=Vs.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Vs.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(ZU(i)||rlt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(ZU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Gs.SEMI)this.consumed+=1;else if(this.decodeMode===a1.Strict)return 0;return this.emitCodePoint(tlt(this.result),this.consumed),this.errors&&(t!==Gs.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&gh.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=WTe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===a1.Attribute&&(s===0||slt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&gh.VALUE_LENGTH)>>14,s!==0){if(o===Gs.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==a1.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&gh.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~gh.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Vs.NamedEntity:return this.result!==0&&(this.decodeMode!==a1.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Vs.NumericDecimal:return this.emitNumericEntity(0,2);case Vs.NumericHex:return this.emitNumericEntity(0,3);case Vs.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Vs.EntityStart:return 0}}}function qTe(e){let t="";const n=new olt(e,r=>t+=elt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const u=n.write(i,a+1);if(u<0){o=a+n.end();break}o=a+u,a=u===0?o+1:o}const l=t+i.slice(o);return t="",l}}function WTe(e,t,n,r){const i=(t&gh.BRANCH_LENGTH)>>7,s=t&gh.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:e[n+l]-1}let o=n,a=o+i-1;for(;o<=a;){const l=o+a>>>1,u=e[l];if(u<r)o=l+1;else if(u>r)a=l-1;else return e[l+i]}return-1}qTe(jg);qTe(Jat);var je;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(je=je||(je={}));var F0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(F0=F0||(F0={}));var gu;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(gu=gu||(gu={}));var Ee;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ee=Ee||(Ee={}));var N;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(N=N||(N={}));const alt=new Map([[Ee.A,N.A],[Ee.ADDRESS,N.ADDRESS],[Ee.ANNOTATION_XML,N.ANNOTATION_XML],[Ee.APPLET,N.APPLET],[Ee.AREA,N.AREA],[Ee.ARTICLE,N.ARTICLE],[Ee.ASIDE,N.ASIDE],[Ee.B,N.B],[Ee.BASE,N.BASE],[Ee.BASEFONT,N.BASEFONT],[Ee.BGSOUND,N.BGSOUND],[Ee.BIG,N.BIG],[Ee.BLOCKQUOTE,N.BLOCKQUOTE],[Ee.BODY,N.BODY],[Ee.BR,N.BR],[Ee.BUTTON,N.BUTTON],[Ee.CAPTION,N.CAPTION],[Ee.CENTER,N.CENTER],[Ee.CODE,N.CODE],[Ee.COL,N.COL],[Ee.COLGROUP,N.COLGROUP],[Ee.DD,N.DD],[Ee.DESC,N.DESC],[Ee.DETAILS,N.DETAILS],[Ee.DIALOG,N.DIALOG],[Ee.DIR,N.DIR],[Ee.DIV,N.DIV],[Ee.DL,N.DL],[Ee.DT,N.DT],[Ee.EM,N.EM],[Ee.EMBED,N.EMBED],[Ee.FIELDSET,N.FIELDSET],[Ee.FIGCAPTION,N.FIGCAPTION],[Ee.FIGURE,N.FIGURE],[Ee.FONT,N.FONT],[Ee.FOOTER,N.FOOTER],[Ee.FOREIGN_OBJECT,N.FOREIGN_OBJECT],[Ee.FORM,N.FORM],[Ee.FRAME,N.FRAME],[Ee.FRAMESET,N.FRAMESET],[Ee.H1,N.H1],[Ee.H2,N.H2],[Ee.H3,N.H3],[Ee.H4,N.H4],[Ee.H5,N.H5],[Ee.H6,N.H6],[Ee.HEAD,N.HEAD],[Ee.HEADER,N.HEADER],[Ee.HGROUP,N.HGROUP],[Ee.HR,N.HR],[Ee.HTML,N.HTML],[Ee.I,N.I],[Ee.IMG,N.IMG],[Ee.IMAGE,N.IMAGE],[Ee.INPUT,N.INPUT],[Ee.IFRAME,N.IFRAME],[Ee.KEYGEN,N.KEYGEN],[Ee.LABEL,N.LABEL],[Ee.LI,N.LI],[Ee.LINK,N.LINK],[Ee.LISTING,N.LISTING],[Ee.MAIN,N.MAIN],[Ee.MALIGNMARK,N.MALIGNMARK],[Ee.MARQUEE,N.MARQUEE],[Ee.MATH,N.MATH],[Ee.MENU,N.MENU],[Ee.META,N.META],[Ee.MGLYPH,N.MGLYPH],[Ee.MI,N.MI],[Ee.MO,N.MO],[Ee.MN,N.MN],[Ee.MS,N.MS],[Ee.MTEXT,N.MTEXT],[Ee.NAV,N.NAV],[Ee.NOBR,N.NOBR],[Ee.NOFRAMES,N.NOFRAMES],[Ee.NOEMBED,N.NOEMBED],[Ee.NOSCRIPT,N.NOSCRIPT],[Ee.OBJECT,N.OBJECT],[Ee.OL,N.OL],[Ee.OPTGROUP,N.OPTGROUP],[Ee.OPTION,N.OPTION],[Ee.P,N.P],[Ee.PARAM,N.PARAM],[Ee.PLAINTEXT,N.PLAINTEXT],[Ee.PRE,N.PRE],[Ee.RB,N.RB],[Ee.RP,N.RP],[Ee.RT,N.RT],[Ee.RTC,N.RTC],[Ee.RUBY,N.RUBY],[Ee.S,N.S],[Ee.SCRIPT,N.SCRIPT],[Ee.SECTION,N.SECTION],[Ee.SELECT,N.SELECT],[Ee.SOURCE,N.SOURCE],[Ee.SMALL,N.SMALL],[Ee.SPAN,N.SPAN],[Ee.STRIKE,N.STRIKE],[Ee.STRONG,N.STRONG],[Ee.STYLE,N.STYLE],[Ee.SUB,N.SUB],[Ee.SUMMARY,N.SUMMARY],[Ee.SUP,N.SUP],[Ee.TABLE,N.TABLE],[Ee.TBODY,N.TBODY],[Ee.TEMPLATE,N.TEMPLATE],[Ee.TEXTAREA,N.TEXTAREA],[Ee.TFOOT,N.TFOOT],[Ee.TD,N.TD],[Ee.TH,N.TH],[Ee.THEAD,N.THEAD],[Ee.TITLE,N.TITLE],[Ee.TR,N.TR],[Ee.TRACK,N.TRACK],[Ee.TT,N.TT],[Ee.U,N.U],[Ee.UL,N.UL],[Ee.SVG,N.SVG],[Ee.VAR,N.VAR],[Ee.WBR,N.WBR],[Ee.XMP,N.XMP]]);function vS(e){var t;return(t=alt.get(e))!==null&&t!==void 0?t:N.UNKNOWN}const Ze=N,llt={[je.HTML]:new Set([Ze.ADDRESS,Ze.APPLET,Ze.AREA,Ze.ARTICLE,Ze.ASIDE,Ze.BASE,Ze.BASEFONT,Ze.BGSOUND,Ze.BLOCKQUOTE,Ze.BODY,Ze.BR,Ze.BUTTON,Ze.CAPTION,Ze.CENTER,Ze.COL,Ze.COLGROUP,Ze.DD,Ze.DETAILS,Ze.DIR,Ze.DIV,Ze.DL,Ze.DT,Ze.EMBED,Ze.FIELDSET,Ze.FIGCAPTION,Ze.FIGURE,Ze.FOOTER,Ze.FORM,Ze.FRAME,Ze.FRAMESET,Ze.H1,Ze.H2,Ze.H3,Ze.H4,Ze.H5,Ze.H6,Ze.HEAD,Ze.HEADER,Ze.HGROUP,Ze.HR,Ze.HTML,Ze.IFRAME,Ze.IMG,Ze.INPUT,Ze.LI,Ze.LINK,Ze.LISTING,Ze.MAIN,Ze.MARQUEE,Ze.MENU,Ze.META,Ze.NAV,Ze.NOEMBED,Ze.NOFRAMES,Ze.NOSCRIPT,Ze.OBJECT,Ze.OL,Ze.P,Ze.PARAM,Ze.PLAINTEXT,Ze.PRE,Ze.SCRIPT,Ze.SECTION,Ze.SELECT,Ze.SOURCE,Ze.STYLE,Ze.SUMMARY,Ze.TABLE,Ze.TBODY,Ze.TD,Ze.TEMPLATE,Ze.TEXTAREA,Ze.TFOOT,Ze.TH,Ze.THEAD,Ze.TITLE,Ze.TR,Ze.TRACK,Ze.UL,Ze.WBR,Ze.XMP]),[je.MATHML]:new Set([Ze.MI,Ze.MO,Ze.MN,Ze.MS,Ze.MTEXT,Ze.ANNOTATION_XML]),[je.SVG]:new Set([Ze.TITLE,Ze.FOREIGN_OBJECT,Ze.DESC]),[je.XLINK]:new Set,[je.XML]:new Set,[je.XMLNS]:new Set};function GTe(e){return e===Ze.H1||e===Ze.H2||e===Ze.H3||e===Ze.H4||e===Ze.H5||e===Ze.H6}Ee.STYLE,Ee.SCRIPT,Ee.XMP,Ee.IFRAME,Ee.NOEMBED,Ee.NOFRAMES,Ee.PLAINTEXT;const ult=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var Z;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(Z||(Z={}));const ss={DATA:Z.DATA,RCDATA:Z.RCDATA,RAWTEXT:Z.RAWTEXT,SCRIPT_DATA:Z.SCRIPT_DATA,PLAINTEXT:Z.PLAINTEXT,CDATA_SECTION:Z.CDATA_SECTION};function H2(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function DC(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function clt(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function Bg(e){return clt(e)||DC(e)}function eV(e){return Bg(e)||H2(e)}function YTe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function KTe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function dlt(e){return H2(e)||YTe(e)||KTe(e)}function vN(e){return e+32}function XTe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function flt(e){return e===X.EQUALS_SIGN||eV(e)}function Lce(e){return XTe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class hlt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Z.DATA,this.returnState=Z.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Qat(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:kn.START_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:kn.END_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:kn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:kn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(HTe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ae.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=vS(t.tagName),t.type===kn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ae.endTagWithAttributes),t.selfClosing&&this._err(Ae.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case kn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case kn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case kn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:kn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=XTe(t)?kn.WHITESPACE_CHARACTER:t===X.NULL?kn.NULL_CHARACTER:kn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(kn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=jg[0];s>=0&&(s=WTe(jg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=jg[s];const a=o&gh.VALUE_LENGTH;if(a){const l=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&flt(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=l):(n=l===0?[jg[s]&~gh.VALUE_LENGTH]:l===1?[jg[++s]]:[jg[++s],jg[++s]],r=0,i=t!==X.SEMICOLON),l===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ae.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Z.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Z.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case Z.DATA:{this._stateData(t);break}case Z.RCDATA:{this._stateRcdata(t);break}case Z.RAWTEXT:{this._stateRawtext(t);break}case Z.SCRIPT_DATA:{this._stateScriptData(t);break}case Z.PLAINTEXT:{this._statePlaintext(t);break}case Z.TAG_OPEN:{this._stateTagOpen(t);break}case Z.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case Z.TAG_NAME:{this._stateTagName(t);break}case Z.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case Z.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case Z.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case Z.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case Z.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case Z.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case Z.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case Z.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case Z.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case Z.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case Z.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case Z.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case Z.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case Z.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case Z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case Z.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case Z.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case Z.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case Z.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case Z.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case Z.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case Z.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case Z.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case Z.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case Z.BOGUS_COMMENT:{this._stateBogusComment(t);break}case Z.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case Z.COMMENT_START:{this._stateCommentStart(t);break}case Z.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case Z.COMMENT:{this._stateComment(t);break}case Z.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case Z.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case Z.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case Z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case Z.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case Z.COMMENT_END:{this._stateCommentEnd(t);break}case Z.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case Z.DOCTYPE:{this._stateDoctype(t);break}case Z.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case Z.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case Z.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case Z.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case Z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case Z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case Z.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case Z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case Z.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case Z.CDATA_SECTION:{this._stateCdataSection(t);break}case Z.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case Z.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case Z.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case Z.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case Z.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case Z.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case Z.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case Z.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case Z.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case Z.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=Z.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=Z.DATA,this.state=Z.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=Z.RCDATA,this.state=Z.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=Z.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(yi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=Z.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(yi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(yi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(yi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Bg(t))this._createStartTagToken(),this.state=Z.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=Z.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=Z.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Ae.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Ae.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ae.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Z.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Bg(t))this._createEndTagToken(),this.state=Z.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Ae.missingEndTagName),this.state=Z.DATA;break}case X.EOF:{this._err(Ae.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ae.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=Z.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),n.tagName+=yi;break}case X.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(DC(t)?vN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=Z.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Z.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Bg(t)?(this.state=Z.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=Z.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Z.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Z.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Z.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=Z.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Z.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Bg(t)?(this.state=Z.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=Z.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=Z.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=Z.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Z.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Bg(t)?(this.state=Z.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=Z.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=Z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(yi);break}case X.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_ESCAPED,this._emitChars(yi);break}case X.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=Z.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_ESCAPED,this._emitChars(yi);break}case X.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=Z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Bg(t)?(this._emitChars("<"),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Bg(t)?(this.state=Z.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(yl.SCRIPT,!1)&&Lce(this.preprocessor.peek(yl.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<yl.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(yi);break}case X.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(yi);break}case X.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=Z.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(yi);break}case X.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(yl.SCRIPT,!1)&&Lce(this.preprocessor.peek(yl.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<yl.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Z.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=Z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Ae.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Z.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Z.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=Z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=Z.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Ae.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),this.currentAttr.name+=yi;break}default:this.currentAttr.name+=String.fromCodePoint(DC(t)?vN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=Z.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=Z.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Z.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=Z.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ae.missingAttributeValue),this.state=Z.DATA,this.emitCurrentTagToken();break}default:this.state=Z.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=Z.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=Z.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),this.currentAttr.value+=yi;break}case X.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=Z.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=Z.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=Z.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),this.currentAttr.value+=yi;break}case X.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=Z.ATTRIBUTE_VALUE_UNQUOTED,this.state=Z.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Z.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),this.currentAttr.value+=yi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Ae.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=Z.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this._err(Ae.missingWhitespaceBetweenAttributes),this.state=Z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this._err(Ae.unexpectedSolidusInTag),this.state=Z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),n.data+=yi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(yl.DASH_DASH,!0)?(this._createCommentToken(yl.DASH_DASH.length+1),this.state=Z.COMMENT_START):this._consumeSequenceIfMatch(yl.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(yl.DOCTYPE.length+1),this.state=Z.DOCTYPE):this._consumeSequenceIfMatch(yl.CDATA_START,!0)?this.inForeignNode?this.state=Z.CDATA_SECTION:(this._err(Ae.cdataInHtmlContent),this._createCommentToken(yl.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Z.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ae.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ae.abruptClosingOfEmptyComment),this.state=Z.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Ae.abruptClosingOfEmptyComment),this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Z.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=Z.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),n.data+=yi;break}case X.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=Z.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=Z.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Z.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=Z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Z.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Ae.nestedComment),this.state=Z.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END;break}case X.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=Z.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=Z.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ae.incorrectlyClosedComment),this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Z.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=Z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Ae.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingWhitespaceBeforeDoctypeName),this.state=Z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(DC(t))this._createDoctypeToken(String.fromCharCode(vN(t))),this.state=Z.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Ae.unexpectedNullCharacter),this._createDoctypeToken(yi),this.state=Z.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Ae.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=Z.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),n.name+=yi;break}case X.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(DC(t)?vN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(yl.PUBLIC,!1)?this.state=Z.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(yl.SYSTEM,!1)?this.state=Z.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ae.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ae.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ae.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),n.publicId+=yi;break}case X.GREATER_THAN_SIGN:{this._err(Ae.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),n.publicId+=yi;break}case X.GREATER_THAN_SIGN:{this._err(Ae.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Ae.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ae.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ae.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ae.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),n.systemId+=yi;break}case X.GREATER_THAN_SIGN:{this._err(Ae.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ae.unexpectedNullCharacter),n.systemId+=yi;break}case X.GREATER_THAN_SIGN:{this._err(Ae.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.NULL:{this._err(Ae.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=Z.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Ae.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=Z.CDATA_SECTION_END:(this._emitChars("]"),this.state=Z.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=Z.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Z.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=Z.NUMERIC_CHARACTER_REFERENCE:eV(t)?(this.state=Z.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=Z.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){eV(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Ae.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=Z.HEXADEMICAL_CHARACTER_REFERENCE_START:H2(t)?(this.state=Z.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ae.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){dlt(t)?(this.state=Z.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ae.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){YTe(t)?this.charRefCode=this.charRefCode*16+t-55:KTe(t)?this.charRefCode=this.charRefCode*16+t-87:H2(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=Z.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ae.missingSemicolonAfterCharacterReference),this.state=Z.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){H2(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=Z.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ae.missingSemicolonAfterCharacterReference),this.state=Z.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Ae.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ae.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(zTe(this.charRefCode))this._err(Ae.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(VTe(this.charRefCode))this._err(Ae.noncharacterCharacterReference);else if(UTe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Ae.controlCharacterReference);const n=ult.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const QTe=new Set([N.DD,N.DT,N.LI,N.OPTGROUP,N.OPTION,N.P,N.RB,N.RP,N.RT,N.RTC]),Fce=new Set([...QTe,N.CAPTION,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]),bN=new Map([[N.APPLET,je.HTML],[N.CAPTION,je.HTML],[N.HTML,je.HTML],[N.MARQUEE,je.HTML],[N.OBJECT,je.HTML],[N.TABLE,je.HTML],[N.TD,je.HTML],[N.TEMPLATE,je.HTML],[N.TH,je.HTML],[N.ANNOTATION_XML,je.MATHML],[N.MI,je.MATHML],[N.MN,je.MATHML],[N.MO,je.MATHML],[N.MS,je.MATHML],[N.MTEXT,je.MATHML],[N.DESC,je.SVG],[N.FOREIGN_OBJECT,je.SVG],[N.TITLE,je.SVG]]),plt=[N.H1,N.H2,N.H3,N.H4,N.H5,N.H6],mlt=[N.TR,N.TEMPLATE,N.HTML],glt=[N.TBODY,N.TFOOT,N.THEAD,N.TEMPLATE,N.HTML],ylt=[N.TABLE,N.TEMPLATE,N.HTML],vlt=[N.TD,N.TH];class blt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=N.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===N.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===je.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==je.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(plt,je.HTML)}popUntilTableCellPopped(){this.popUntilPopped(vlt,je.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(ylt,je.HTML)}clearBackToTableBodyContext(){this.clearBackTo(glt,je.HTML)}clearBackToTableRowContext(){this.clearBackTo(mlt,je.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===N.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===N.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===je.HTML)return!0;if(bN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(GTe(n)&&r===je.HTML)return!0;if(bN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===je.HTML)return!0;if((r===N.UL||r===N.OL)&&i===je.HTML||bN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===je.HTML)return!0;if(r===N.BUTTON&&i===je.HTML||bN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===je.HTML){if(r===t)return!0;if(r===N.TABLE||r===N.TEMPLATE||r===N.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===je.HTML){if(n===N.TBODY||n===N.THEAD||n===N.TFOOT)return!0;if(n===N.TABLE||n===N.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===je.HTML){if(r===t)return!0;if(r!==N.OPTION&&r!==N.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;QTe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Fce.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Fce.has(this.currentTagId);)this.pop()}}const mB=3;var Cd;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Cd=Cd||(Cd={}));const jce={type:Cd.Marker};class _lt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===Cd.Marker)break;const{element:u}=l;if(this.treeAdapter.getTagName(u)===s&&this.treeAdapter.getNamespaceURI(u)===o){const c=this.treeAdapter.getAttrList(u);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<mB)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<mB)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(l=>i.get(l.name)===l.value)&&(s+=1,s>=mB&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(jce)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Cd.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Cd.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(jce);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Cd.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Cd.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Cd.Element&&n.element===t)}}function Bce(e){return{nodeName:"#text",value:e,parentNode:null}}const cw={createDocument(){return{nodeName:"#document",mode:gu.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};cw.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(cw.isTextNode(n)){n.value+=t;return}}cw.appendChild(e,Bce(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&cw.isTextNode(r)?r.value+=t:cw.insertBefore(e,Bce(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},JTe="html",wlt="about:legacy-compat",xlt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",ZTe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Elt=[...ZTe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Slt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),eCe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Tlt=[...eCe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function zce(e,t){return t.some(n=>e.startsWith(n))}function Clt(e){return e.name===JTe&&e.publicId===null&&(e.systemId===null||e.systemId===wlt)}function Alt(e){if(e.name!==JTe)return gu.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===xlt)return gu.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),Slt.has(n))return gu.QUIRKS;let r=t===null?Elt:ZTe;if(zce(n,r))return gu.QUIRKS;if(r=t===null?eCe:Tlt,zce(n,r))return gu.LIMITED_QUIRKS}return gu.NO_QUIRKS}const Uce={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Ilt="definitionurl",klt="definitionURL",Rlt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Plt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:je.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:je.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:je.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:je.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:je.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:je.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:je.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:je.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:je.XML}],["xml:space",{prefix:"xml",name:"space",namespace:je.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:je.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:je.XMLNS}]]),Nlt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Olt=new Set([N.B,N.BIG,N.BLOCKQUOTE,N.BODY,N.BR,N.CENTER,N.CODE,N.DD,N.DIV,N.DL,N.DT,N.EM,N.EMBED,N.H1,N.H2,N.H3,N.H4,N.H5,N.H6,N.HEAD,N.HR,N.I,N.IMG,N.LI,N.LISTING,N.MENU,N.META,N.NOBR,N.OL,N.P,N.PRE,N.RUBY,N.S,N.SMALL,N.SPAN,N.STRONG,N.STRIKE,N.SUB,N.SUP,N.TABLE,N.TT,N.U,N.UL,N.VAR]);function Dlt(e){const t=e.tagID;return t===N.FONT&&e.attrs.some(({name:r})=>r===F0.COLOR||r===F0.SIZE||r===F0.FACE)||Olt.has(t)}function tCe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Ilt){e.attrs[t].name=klt;break}}function nCe(e){for(let t=0;t<e.attrs.length;t++){const n=Rlt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function QX(e){for(let t=0;t<e.attrs.length;t++){const n=Plt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Mlt(e){const t=Nlt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=vS(e.tagName))}function $lt(e,t){return t===je.MATHML&&(e===N.MI||e===N.MO||e===N.MN||e===N.MS||e===N.MTEXT)}function Llt(e,t,n){if(t===je.MATHML&&e===N.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===F0.ENCODING){const i=n[r].value.toLowerCase();return i===Uce.TEXT_HTML||i===Uce.APPLICATION_XML}}return t===je.SVG&&(e===N.FOREIGN_OBJECT||e===N.DESC||e===N.TITLE)}function Flt(e,t,n,r){return(!r||r===je.HTML)&&Llt(e,t,n)||(!r||r===je.MATHML)&&$lt(e,t)}const jlt="hidden",Blt=8,zlt=3;var oe;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(oe||(oe={}));const Ult={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},rCe=new Set([N.TABLE,N.TBODY,N.TFOOT,N.THEAD,N.TR]),Vce={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:cw,onParseError:null};let Hce=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=oe.INITIAL,this.originalInsertionMode=oe.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Vce,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new hlt(this.options,this),this.activeFormattingElements=new _lt(this.treeAdapter),this.fragmentContextID=r?vS(this.treeAdapter.getTagName(r)):N.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new blt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Vce,...n};t??(t=r.treeAdapter.createElement(Ee.TEMPLATE,je.HTML,[]));const i=r.treeAdapter.createElement("documentmock",je.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===N.TEMPLATE&&s.tmplInsertionModeStack.unshift(oe.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Ult,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===je.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,je.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=oe.TEXT}switchToPlaintextParsing(){this.insertionMode=oe.TEXT,this.originalInsertionMode=oe.IN_BODY,this.tokenizer.state=ss.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ee.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==je.HTML))switch(this.fragmentContextID){case N.TITLE:case N.TEXTAREA:{this.tokenizer.state=ss.RCDATA;break}case N.STYLE:case N.XMP:case N.IFRAME:case N.NOEMBED:case N.NOFRAMES:case N.NOSCRIPT:{this.tokenizer.state=ss.RAWTEXT;break}case N.SCRIPT:{this.tokenizer.state=ss.SCRIPT_DATA;break}case N.PLAINTEXT:{this.tokenizer.state=ss.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,je.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,je.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ee.HTML,je.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,N.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:l,endCol:u,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:l,endCol:u,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===kn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===N.SVG&&this.treeAdapter.getTagName(n)===Ee.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===je.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===N.MGLYPH||t.tagID===N.MALIGNMARK)&&!this._isIntegrationPoint(r,n,je.HTML)}_processToken(t){switch(t.type){case kn.CHARACTER:{this.onCharacter(t);break}case kn.NULL_CHARACTER:{this.onNullCharacter(t);break}case kn.COMMENT:{this.onComment(t);break}case kn.DOCTYPE:{this.onDoctype(t);break}case kn.START_TAG:{this._processStartTag(t);break}case kn.END_TAG:{this.onEndTag(t);break}case kn.EOF:{this.onEof(t);break}case kn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Flt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Cd.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=oe.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(N.P),this.openElements.popUntilTagNamePopped(N.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case N.TR:{this.insertionMode=oe.IN_ROW;return}case N.TBODY:case N.THEAD:case N.TFOOT:{this.insertionMode=oe.IN_TABLE_BODY;return}case N.CAPTION:{this.insertionMode=oe.IN_CAPTION;return}case N.COLGROUP:{this.insertionMode=oe.IN_COLUMN_GROUP;return}case N.TABLE:{this.insertionMode=oe.IN_TABLE;return}case N.BODY:{this.insertionMode=oe.IN_BODY;return}case N.FRAMESET:{this.insertionMode=oe.IN_FRAMESET;return}case N.SELECT:{this._resetInsertionModeForSelect(t);return}case N.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case N.HTML:{this.insertionMode=this.headElement?oe.AFTER_HEAD:oe.BEFORE_HEAD;return}case N.TD:case N.TH:{if(t>0){this.insertionMode=oe.IN_CELL;return}break}case N.HEAD:{if(t>0){this.insertionMode=oe.IN_HEAD;return}break}}this.insertionMode=oe.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===N.TEMPLATE)break;if(r===N.TABLE){this.insertionMode=oe.IN_SELECT_IN_TABLE;return}}this.insertionMode=oe.IN_SELECT}_isElementCausesFosterParenting(t){return rCe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case N.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===je.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case N.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return llt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){vct(this,t);return}switch(this.insertionMode){case oe.INITIAL:{LT(this,t);break}case oe.BEFORE_HTML:{q2(this,t);break}case oe.BEFORE_HEAD:{W2(this,t);break}case oe.IN_HEAD:{G2(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{Y2(this,t);break}case oe.AFTER_HEAD:{K2(this,t);break}case oe.IN_BODY:case oe.IN_CAPTION:case oe.IN_CELL:case oe.IN_TEMPLATE:{sCe(this,t);break}case oe.TEXT:case oe.IN_SELECT:case oe.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case oe.IN_TABLE:case oe.IN_TABLE_BODY:case oe.IN_ROW:{gB(this,t);break}case oe.IN_TABLE_TEXT:{dCe(this,t);break}case oe.IN_COLUMN_GROUP:{t$(this,t);break}case oe.AFTER_BODY:{n$(this,t);break}case oe.AFTER_AFTER_BODY:{dD(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){yct(this,t);return}switch(this.insertionMode){case oe.INITIAL:{LT(this,t);break}case oe.BEFORE_HTML:{q2(this,t);break}case oe.BEFORE_HEAD:{W2(this,t);break}case oe.IN_HEAD:{G2(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{Y2(this,t);break}case oe.AFTER_HEAD:{K2(this,t);break}case oe.TEXT:{this._insertCharacters(t);break}case oe.IN_TABLE:case oe.IN_TABLE_BODY:case oe.IN_ROW:{gB(this,t);break}case oe.IN_COLUMN_GROUP:{t$(this,t);break}case oe.AFTER_BODY:{n$(this,t);break}case oe.AFTER_AFTER_BODY:{dD(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){tV(this,t);return}switch(this.insertionMode){case oe.INITIAL:case oe.BEFORE_HTML:case oe.BEFORE_HEAD:case oe.IN_HEAD:case oe.IN_HEAD_NO_SCRIPT:case oe.AFTER_HEAD:case oe.IN_BODY:case oe.IN_TABLE:case oe.IN_CAPTION:case oe.IN_COLUMN_GROUP:case oe.IN_TABLE_BODY:case oe.IN_ROW:case oe.IN_CELL:case oe.IN_SELECT:case oe.IN_SELECT_IN_TABLE:case oe.IN_TEMPLATE:case oe.IN_FRAMESET:case oe.AFTER_FRAMESET:{tV(this,t);break}case oe.IN_TABLE_TEXT:{FT(this,t);break}case oe.AFTER_BODY:{Klt(this,t);break}case oe.AFTER_AFTER_BODY:case oe.AFTER_AFTER_FRAMESET:{Xlt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case oe.INITIAL:{Qlt(this,t);break}case oe.BEFORE_HEAD:case oe.IN_HEAD:case oe.IN_HEAD_NO_SCRIPT:case oe.AFTER_HEAD:{this._err(t,Ae.misplacedDoctype);break}case oe.IN_TABLE_TEXT:{FT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ae.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?bct(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case oe.INITIAL:{LT(this,t);break}case oe.BEFORE_HTML:{Jlt(this,t);break}case oe.BEFORE_HEAD:{eut(this,t);break}case oe.IN_HEAD:{wf(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{rut(this,t);break}case oe.AFTER_HEAD:{sut(this,t);break}case oe.IN_BODY:{Ea(this,t);break}case oe.IN_TABLE:{Kx(this,t);break}case oe.IN_TABLE_TEXT:{FT(this,t);break}case oe.IN_CAPTION:{tct(this,t);break}case oe.IN_COLUMN_GROUP:{eQ(this,t);break}case oe.IN_TABLE_BODY:{y6(this,t);break}case oe.IN_ROW:{v6(this,t);break}case oe.IN_CELL:{ict(this,t);break}case oe.IN_SELECT:{pCe(this,t);break}case oe.IN_SELECT_IN_TABLE:{oct(this,t);break}case oe.IN_TEMPLATE:{lct(this,t);break}case oe.AFTER_BODY:{cct(this,t);break}case oe.IN_FRAMESET:{dct(this,t);break}case oe.AFTER_FRAMESET:{hct(this,t);break}case oe.AFTER_AFTER_BODY:{mct(this,t);break}case oe.AFTER_AFTER_FRAMESET:{gct(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?_ct(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case oe.INITIAL:{LT(this,t);break}case oe.BEFORE_HTML:{Zlt(this,t);break}case oe.BEFORE_HEAD:{tut(this,t);break}case oe.IN_HEAD:{nut(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{iut(this,t);break}case oe.AFTER_HEAD:{out(this,t);break}case oe.IN_BODY:{g6(this,t);break}case oe.TEXT:{qut(this,t);break}case oe.IN_TABLE:{uI(this,t);break}case oe.IN_TABLE_TEXT:{FT(this,t);break}case oe.IN_CAPTION:{nct(this,t);break}case oe.IN_COLUMN_GROUP:{rct(this,t);break}case oe.IN_TABLE_BODY:{nV(this,t);break}case oe.IN_ROW:{hCe(this,t);break}case oe.IN_CELL:{sct(this,t);break}case oe.IN_SELECT:{mCe(this,t);break}case oe.IN_SELECT_IN_TABLE:{act(this,t);break}case oe.IN_TEMPLATE:{uct(this,t);break}case oe.AFTER_BODY:{yCe(this,t);break}case oe.IN_FRAMESET:{fct(this,t);break}case oe.AFTER_FRAMESET:{pct(this,t);break}case oe.AFTER_AFTER_BODY:{dD(this,t);break}}}onEof(t){switch(this.insertionMode){case oe.INITIAL:{LT(this,t);break}case oe.BEFORE_HTML:{q2(this,t);break}case oe.BEFORE_HEAD:{W2(this,t);break}case oe.IN_HEAD:{G2(this,t);break}case oe.IN_HEAD_NO_SCRIPT:{Y2(this,t);break}case oe.AFTER_HEAD:{K2(this,t);break}case oe.IN_BODY:case oe.IN_TABLE:case oe.IN_CAPTION:case oe.IN_COLUMN_GROUP:case oe.IN_TABLE_BODY:case oe.IN_ROW:case oe.IN_CELL:case oe.IN_SELECT:case oe.IN_SELECT_IN_TABLE:{uCe(this,t);break}case oe.TEXT:{Wut(this,t);break}case oe.IN_TABLE_TEXT:{FT(this,t);break}case oe.IN_TEMPLATE:{gCe(this,t);break}case oe.AFTER_BODY:case oe.IN_FRAMESET:case oe.AFTER_FRAMESET:case oe.AFTER_AFTER_BODY:case oe.AFTER_AFTER_FRAMESET:{ZX(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case oe.IN_HEAD:case oe.IN_HEAD_NO_SCRIPT:case oe.AFTER_HEAD:case oe.TEXT:case oe.IN_COLUMN_GROUP:case oe.IN_SELECT:case oe.IN_SELECT_IN_TABLE:case oe.IN_FRAMESET:case oe.AFTER_FRAMESET:{this._insertCharacters(t);break}case oe.IN_BODY:case oe.IN_CAPTION:case oe.IN_CELL:case oe.IN_TEMPLATE:case oe.AFTER_BODY:case oe.AFTER_AFTER_BODY:case oe.AFTER_AFTER_FRAMESET:{iCe(this,t);break}case oe.IN_TABLE:case oe.IN_TABLE_BODY:case oe.IN_ROW:{gB(this,t);break}case oe.IN_TABLE_TEXT:{cCe(this,t);break}}}};function Vlt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):lCe(e,t),n}function Hlt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function qlt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),l=a&&s>=zlt;!a||l?(l&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Wlt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Wlt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Glt(e,t,n){const r=e.treeAdapter.getTagName(t),i=vS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===N.TEMPLATE&&s===je.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Ylt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function JX(e,t){for(let n=0;n<Blt;n++){const r=Vlt(e,t);if(!r)break;const i=Hlt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=qlt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Glt(e,o,s),Ylt(e,i,r)}}function tV(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Klt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Xlt(e,t){e._appendCommentNode(t,e.document)}function ZX(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Qlt(e,t){e._setDocumentType(t);const n=t.forceQuirks?gu.QUIRKS:Alt(t);Clt(t)||e._err(t,Ae.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=oe.BEFORE_HTML}function LT(e,t){e._err(t,Ae.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,gu.QUIRKS),e.insertionMode=oe.BEFORE_HTML,e._processToken(t)}function Jlt(e,t){t.tagID===N.HTML?(e._insertElement(t,je.HTML),e.insertionMode=oe.BEFORE_HEAD):q2(e,t)}function Zlt(e,t){const n=t.tagID;(n===N.HTML||n===N.HEAD||n===N.BODY||n===N.BR)&&q2(e,t)}function q2(e,t){e._insertFakeRootElement(),e.insertionMode=oe.BEFORE_HEAD,e._processToken(t)}function eut(e,t){switch(t.tagID){case N.HTML:{Ea(e,t);break}case N.HEAD:{e._insertElement(t,je.HTML),e.headElement=e.openElements.current,e.insertionMode=oe.IN_HEAD;break}default:W2(e,t)}}function tut(e,t){const n=t.tagID;n===N.HEAD||n===N.BODY||n===N.HTML||n===N.BR?W2(e,t):e._err(t,Ae.endTagWithoutMatchingOpenElement)}function W2(e,t){e._insertFakeElement(Ee.HEAD,N.HEAD),e.headElement=e.openElements.current,e.insertionMode=oe.IN_HEAD,e._processToken(t)}function wf(e,t){switch(t.tagID){case N.HTML:{Ea(e,t);break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:{e._appendElement(t,je.HTML),t.ackSelfClosing=!0;break}case N.TITLE:{e._switchToTextParsing(t,ss.RCDATA);break}case N.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ss.RAWTEXT):(e._insertElement(t,je.HTML),e.insertionMode=oe.IN_HEAD_NO_SCRIPT);break}case N.NOFRAMES:case N.STYLE:{e._switchToTextParsing(t,ss.RAWTEXT);break}case N.SCRIPT:{e._switchToTextParsing(t,ss.SCRIPT_DATA);break}case N.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=oe.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(oe.IN_TEMPLATE);break}case N.HEAD:{e._err(t,Ae.misplacedStartTagForHeadElement);break}default:G2(e,t)}}function nut(e,t){switch(t.tagID){case N.HEAD:{e.openElements.pop(),e.insertionMode=oe.AFTER_HEAD;break}case N.BODY:case N.BR:case N.HTML:{G2(e,t);break}case N.TEMPLATE:{Qb(e,t);break}default:e._err(t,Ae.endTagWithoutMatchingOpenElement)}}function Qb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==N.TEMPLATE&&e._err(t,Ae.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ae.endTagWithoutMatchingOpenElement)}function G2(e,t){e.openElements.pop(),e.insertionMode=oe.AFTER_HEAD,e._processToken(t)}function rut(e,t){switch(t.tagID){case N.HTML:{Ea(e,t);break}case N.BASEFONT:case N.BGSOUND:case N.HEAD:case N.LINK:case N.META:case N.NOFRAMES:case N.STYLE:{wf(e,t);break}case N.NOSCRIPT:{e._err(t,Ae.nestedNoscriptInHead);break}default:Y2(e,t)}}function iut(e,t){switch(t.tagID){case N.NOSCRIPT:{e.openElements.pop(),e.insertionMode=oe.IN_HEAD;break}case N.BR:{Y2(e,t);break}default:e._err(t,Ae.endTagWithoutMatchingOpenElement)}}function Y2(e,t){const n=t.type===kn.EOF?Ae.openElementsLeftAfterEof:Ae.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=oe.IN_HEAD,e._processToken(t)}function sut(e,t){switch(t.tagID){case N.HTML:{Ea(e,t);break}case N.BODY:{e._insertElement(t,je.HTML),e.framesetOk=!1,e.insertionMode=oe.IN_BODY;break}case N.FRAMESET:{e._insertElement(t,je.HTML),e.insertionMode=oe.IN_FRAMESET;break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{e._err(t,Ae.abandonedHeadElementChild),e.openElements.push(e.headElement,N.HEAD),wf(e,t),e.openElements.remove(e.headElement);break}case N.HEAD:{e._err(t,Ae.misplacedStartTagForHeadElement);break}default:K2(e,t)}}function out(e,t){switch(t.tagID){case N.BODY:case N.HTML:case N.BR:{K2(e,t);break}case N.TEMPLATE:{Qb(e,t);break}default:e._err(t,Ae.endTagWithoutMatchingOpenElement)}}function K2(e,t){e._insertFakeElement(Ee.BODY,N.BODY),e.insertionMode=oe.IN_BODY,m6(e,t)}function m6(e,t){switch(t.type){case kn.CHARACTER:{sCe(e,t);break}case kn.WHITESPACE_CHARACTER:{iCe(e,t);break}case kn.COMMENT:{tV(e,t);break}case kn.START_TAG:{Ea(e,t);break}case kn.END_TAG:{g6(e,t);break}case kn.EOF:{uCe(e,t);break}}}function iCe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function sCe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function aut(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function lut(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function uut(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,je.HTML),e.insertionMode=oe.IN_FRAMESET)}function cut(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,je.HTML)}function dut(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),GTe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,je.HTML)}function fut(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,je.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function hut(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,je.HTML),n||(e.formElement=e.openElements.current))}function put(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===N.LI&&i===N.LI||(n===N.DD||n===N.DT)&&(i===N.DD||i===N.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==N.ADDRESS&&i!==N.DIV&&i!==N.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,je.HTML)}function mut(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,je.HTML),e.tokenizer.state=ss.PLAINTEXT}function gut(e,t){e.openElements.hasInScope(N.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML),e.framesetOk=!1}function yut(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ee.A);n&&(JX(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function vut(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function but(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(N.NOBR)&&(JX(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,je.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function _ut(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function wut(e,t){e.treeAdapter.getDocumentMode(e.document)!==gu.QUIRKS&&e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,je.HTML),e.framesetOk=!1,e.insertionMode=oe.IN_TABLE}function oCe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,je.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function aCe(e){const t=HTe(e,F0.TYPE);return t!=null&&t.toLowerCase()===jlt}function xut(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,je.HTML),aCe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Eut(e,t){e._appendElement(t,je.HTML),t.ackSelfClosing=!0}function Sut(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._appendElement(t,je.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Tut(e,t){t.tagName=Ee.IMG,t.tagID=N.IMG,oCe(e,t)}function Cut(e,t){e._insertElement(t,je.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ss.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=oe.TEXT}function Aut(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ss.RAWTEXT)}function Iut(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ss.RAWTEXT)}function qce(e,t){e._switchToTextParsing(t,ss.RAWTEXT)}function kut(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===oe.IN_TABLE||e.insertionMode===oe.IN_CAPTION||e.insertionMode===oe.IN_TABLE_BODY||e.insertionMode===oe.IN_ROW||e.insertionMode===oe.IN_CELL?oe.IN_SELECT_IN_TABLE:oe.IN_SELECT}function Rut(e,t){e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML)}function Put(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,je.HTML)}function Nut(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(N.RTC),e._insertElement(t,je.HTML)}function Out(e,t){e._reconstructActiveFormattingElements(),tCe(t),QX(t),t.selfClosing?e._appendElement(t,je.MATHML):e._insertElement(t,je.MATHML),t.ackSelfClosing=!0}function Dut(e,t){e._reconstructActiveFormattingElements(),nCe(t),QX(t),t.selfClosing?e._appendElement(t,je.SVG):e._insertElement(t,je.SVG),t.ackSelfClosing=!0}function Wce(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML)}function Ea(e,t){switch(t.tagID){case N.I:case N.S:case N.B:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.SMALL:case N.STRIKE:case N.STRONG:{vut(e,t);break}case N.A:{yut(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{dut(e,t);break}case N.P:case N.DL:case N.OL:case N.UL:case N.DIV:case N.DIR:case N.NAV:case N.MAIN:case N.MENU:case N.ASIDE:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.DETAILS:case N.ADDRESS:case N.ARTICLE:case N.SECTION:case N.SUMMARY:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{cut(e,t);break}case N.LI:case N.DD:case N.DT:{put(e,t);break}case N.BR:case N.IMG:case N.WBR:case N.AREA:case N.EMBED:case N.KEYGEN:{oCe(e,t);break}case N.HR:{Sut(e,t);break}case N.RB:case N.RTC:{Put(e,t);break}case N.RT:case N.RP:{Nut(e,t);break}case N.PRE:case N.LISTING:{fut(e,t);break}case N.XMP:{Aut(e,t);break}case N.SVG:{Dut(e,t);break}case N.HTML:{aut(e,t);break}case N.BASE:case N.LINK:case N.META:case N.STYLE:case N.TITLE:case N.SCRIPT:case N.BGSOUND:case N.BASEFONT:case N.TEMPLATE:{wf(e,t);break}case N.BODY:{lut(e,t);break}case N.FORM:{hut(e,t);break}case N.NOBR:{but(e,t);break}case N.MATH:{Out(e,t);break}case N.TABLE:{wut(e,t);break}case N.INPUT:{xut(e,t);break}case N.PARAM:case N.TRACK:case N.SOURCE:{Eut(e,t);break}case N.IMAGE:{Tut(e,t);break}case N.BUTTON:{gut(e,t);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{_ut(e,t);break}case N.IFRAME:{Iut(e,t);break}case N.SELECT:{kut(e,t);break}case N.OPTION:case N.OPTGROUP:{Rut(e,t);break}case N.NOEMBED:{qce(e,t);break}case N.FRAMESET:{uut(e,t);break}case N.TEXTAREA:{Cut(e,t);break}case N.NOSCRIPT:{e.options.scriptingEnabled?qce(e,t):Wce(e,t);break}case N.PLAINTEXT:{mut(e,t);break}case N.COL:case N.TH:case N.TD:case N.TR:case N.HEAD:case N.FRAME:case N.TBODY:case N.TFOOT:case N.THEAD:case N.CAPTION:case N.COLGROUP:break;default:Wce(e,t)}}function Mut(e,t){if(e.openElements.hasInScope(N.BODY)&&(e.insertionMode=oe.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function $ut(e,t){e.openElements.hasInScope(N.BODY)&&(e.insertionMode=oe.AFTER_BODY,yCe(e,t))}function Lut(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Fut(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(N.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(N.FORM):n&&e.openElements.remove(n))}function jut(e){e.openElements.hasInButtonScope(N.P)||e._insertFakeElement(Ee.P,N.P),e._closePElement()}function But(e){e.openElements.hasInListItemScope(N.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(N.LI),e.openElements.popUntilTagNamePopped(N.LI))}function zut(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Uut(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Vut(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Hut(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ee.BR,N.BR),e.openElements.pop(),e.framesetOk=!1}function lCe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==N.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function g6(e,t){switch(t.tagID){case N.A:case N.B:case N.I:case N.S:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.NOBR:case N.SMALL:case N.STRIKE:case N.STRONG:{JX(e,t);break}case N.P:{jut(e);break}case N.DL:case N.UL:case N.OL:case N.DIR:case N.DIV:case N.NAV:case N.PRE:case N.MAIN:case N.MENU:case N.ASIDE:case N.BUTTON:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.ADDRESS:case N.ARTICLE:case N.DETAILS:case N.SECTION:case N.SUMMARY:case N.LISTING:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{Lut(e,t);break}case N.LI:{But(e);break}case N.DD:case N.DT:{zut(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{Uut(e);break}case N.BR:{Hut(e);break}case N.BODY:{Mut(e,t);break}case N.HTML:{$ut(e,t);break}case N.FORM:{Fut(e);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{Vut(e,t);break}case N.TEMPLATE:{Qb(e,t);break}default:lCe(e,t)}}function uCe(e,t){e.tmplInsertionModeStack.length>0?gCe(e,t):ZX(e,t)}function qut(e,t){var n;t.tagID===N.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Wut(e,t){e._err(t,Ae.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function gB(e,t){if(rCe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=oe.IN_TABLE_TEXT,t.type){case kn.CHARACTER:{dCe(e,t);break}case kn.WHITESPACE_CHARACTER:{cCe(e,t);break}}else eR(e,t)}function Gut(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,je.HTML),e.insertionMode=oe.IN_CAPTION}function Yut(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,je.HTML),e.insertionMode=oe.IN_COLUMN_GROUP}function Kut(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.COLGROUP,N.COLGROUP),e.insertionMode=oe.IN_COLUMN_GROUP,eQ(e,t)}function Xut(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,je.HTML),e.insertionMode=oe.IN_TABLE_BODY}function Qut(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.TBODY,N.TBODY),e.insertionMode=oe.IN_TABLE_BODY,y6(e,t)}function Jut(e,t){e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Zut(e,t){aCe(t)?e._appendElement(t,je.HTML):eR(e,t),t.ackSelfClosing=!0}function ect(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,je.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Kx(e,t){switch(t.tagID){case N.TD:case N.TH:case N.TR:{Qut(e,t);break}case N.STYLE:case N.SCRIPT:case N.TEMPLATE:{wf(e,t);break}case N.COL:{Kut(e,t);break}case N.FORM:{ect(e,t);break}case N.TABLE:{Jut(e,t);break}case N.TBODY:case N.TFOOT:case N.THEAD:{Xut(e,t);break}case N.INPUT:{Zut(e,t);break}case N.CAPTION:{Gut(e,t);break}case N.COLGROUP:{Yut(e,t);break}default:eR(e,t)}}function uI(e,t){switch(t.tagID){case N.TABLE:{e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode());break}case N.TEMPLATE:{Qb(e,t);break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:eR(e,t)}}function eR(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,m6(e,t),e.fosterParentingEnabled=n}function cCe(e,t){e.pendingCharacterTokens.push(t)}function dCe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function FT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)eR(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const fCe=new Set([N.CAPTION,N.COL,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]);function tct(e,t){const n=t.tagID;fCe.has(n)?e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=oe.IN_TABLE,Kx(e,t)):Ea(e,t)}function nct(e,t){const n=t.tagID;switch(n){case N.CAPTION:case N.TABLE:{e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=oe.IN_TABLE,n===N.TABLE&&uI(e,t));break}case N.BODY:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:g6(e,t)}}function eQ(e,t){switch(t.tagID){case N.HTML:{Ea(e,t);break}case N.COL:{e._appendElement(t,je.HTML),t.ackSelfClosing=!0;break}case N.TEMPLATE:{wf(e,t);break}default:t$(e,t)}}function rct(e,t){switch(t.tagID){case N.COLGROUP:{e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=oe.IN_TABLE);break}case N.TEMPLATE:{Qb(e,t);break}case N.COL:break;default:t$(e,t)}}function t$(e,t){e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=oe.IN_TABLE,e._processToken(t))}function y6(e,t){switch(t.tagID){case N.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,je.HTML),e.insertionMode=oe.IN_ROW;break}case N.TH:case N.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ee.TR,N.TR),e.insertionMode=oe.IN_ROW,v6(e,t);break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE,Kx(e,t));break}default:Kx(e,t)}}function nV(e,t){const n=t.tagID;switch(t.tagID){case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE);break}case N.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE,uI(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:case N.TR:break;default:uI(e,t)}}function v6(e,t){switch(t.tagID){case N.TH:case N.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,je.HTML),e.insertionMode=oe.IN_CELL,e.activeFormattingElements.insertMarker();break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE_BODY,y6(e,t));break}default:Kx(e,t)}}function hCe(e,t){switch(t.tagID){case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE_BODY);break}case N.TABLE:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE_BODY,nV(e,t));break}case N.TBODY:case N.TFOOT:case N.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(N.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oe.IN_TABLE_BODY,nV(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:break;default:uI(e,t)}}function ict(e,t){const n=t.tagID;fCe.has(n)?(e.openElements.hasInTableScope(N.TD)||e.openElements.hasInTableScope(N.TH))&&(e._closeTableCell(),v6(e,t)):Ea(e,t)}function sct(e,t){const n=t.tagID;switch(n){case N.TD:case N.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=oe.IN_ROW);break}case N.TABLE:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),hCe(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:break;default:g6(e,t)}}function pCe(e,t){switch(t.tagID){case N.HTML:{Ea(e,t);break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._insertElement(t,je.HTML);break}case N.OPTGROUP:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop(),e._insertElement(t,je.HTML);break}case N.INPUT:case N.KEYGEN:case N.TEXTAREA:case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),t.tagID!==N.SELECT&&e._processStartTag(t));break}case N.SCRIPT:case N.TEMPLATE:{wf(e,t);break}}}function mCe(e,t){switch(t.tagID){case N.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===N.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===N.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop();break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop();break}case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode());break}case N.TEMPLATE:{Qb(e,t);break}}}function oct(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e._processStartTag(t)):pCe(e,t)}function act(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e.onEndTag(t)):mCe(e,t)}function lct(e,t){switch(t.tagID){case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{wf(e,t);break}case N.CAPTION:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.tmplInsertionModeStack[0]=oe.IN_TABLE,e.insertionMode=oe.IN_TABLE,Kx(e,t);break}case N.COL:{e.tmplInsertionModeStack[0]=oe.IN_COLUMN_GROUP,e.insertionMode=oe.IN_COLUMN_GROUP,eQ(e,t);break}case N.TR:{e.tmplInsertionModeStack[0]=oe.IN_TABLE_BODY,e.insertionMode=oe.IN_TABLE_BODY,y6(e,t);break}case N.TD:case N.TH:{e.tmplInsertionModeStack[0]=oe.IN_ROW,e.insertionMode=oe.IN_ROW,v6(e,t);break}default:e.tmplInsertionModeStack[0]=oe.IN_BODY,e.insertionMode=oe.IN_BODY,Ea(e,t)}}function uct(e,t){t.tagID===N.TEMPLATE&&Qb(e,t)}function gCe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):ZX(e,t)}function cct(e,t){t.tagID===N.HTML?Ea(e,t):n$(e,t)}function yCe(e,t){var n;if(t.tagID===N.HTML){if(e.fragmentContext||(e.insertionMode=oe.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===N.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else n$(e,t)}function n$(e,t){e.insertionMode=oe.IN_BODY,m6(e,t)}function dct(e,t){switch(t.tagID){case N.HTML:{Ea(e,t);break}case N.FRAMESET:{e._insertElement(t,je.HTML);break}case N.FRAME:{e._appendElement(t,je.HTML),t.ackSelfClosing=!0;break}case N.NOFRAMES:{wf(e,t);break}}}function fct(e,t){t.tagID===N.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==N.FRAMESET&&(e.insertionMode=oe.AFTER_FRAMESET))}function hct(e,t){switch(t.tagID){case N.HTML:{Ea(e,t);break}case N.NOFRAMES:{wf(e,t);break}}}function pct(e,t){t.tagID===N.HTML&&(e.insertionMode=oe.AFTER_AFTER_FRAMESET)}function mct(e,t){t.tagID===N.HTML?Ea(e,t):dD(e,t)}function dD(e,t){e.insertionMode=oe.IN_BODY,m6(e,t)}function gct(e,t){switch(t.tagID){case N.HTML:{Ea(e,t);break}case N.NOFRAMES:{wf(e,t);break}}}function yct(e,t){t.chars=yi,e._insertCharacters(t)}function vct(e,t){e._insertCharacters(t),e.framesetOk=!1}function vCe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==je.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function bct(e,t){if(Dlt(t))vCe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===je.MATHML?tCe(t):r===je.SVG&&(Mlt(t),nCe(t)),QX(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function _ct(e,t){if(t.tagID===N.P||t.tagID===N.BR){vCe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===je.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ee.AREA,Ee.BASE,Ee.BASEFONT,Ee.BGSOUND,Ee.BR,Ee.COL,Ee.EMBED,Ee.FRAME,Ee.HR,Ee.IMG,Ee.INPUT,Ee.KEYGEN,Ee.LINK,Ee.META,Ee.PARAM,Ee.SOURCE,Ee.TRACK,Ee.WBR;const wct=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Gce={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function bCe(e,t){const n=Pct(e),r=jTe("type",{handlers:{root:xct,element:Ect,text:Sct,comment:wCe,doctype:Tct,raw:Act},unknown:Ict}),i={parser:n?new Hce(Gce):Hce.getFragmentParser(void 0,Gce),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),bS(i,op());const s=n?i.parser.document:i.parser.getFragment(),o=Oat(s,{file:i.options.file});return i.stitches&&GX(o,"comment",function(a,l,u){const c=a;if(c.value.stitch&&u&&l!==void 0){const d=u.children;return d[l]=c.value.stitch,l}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function _Ce(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function xct(e,t){_Ce(e.children,t)}function Ect(e,t){kct(e,t),_Ce(e.children,t),Rct(e,t)}function Sct(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:kn.CHARACTER,chars:e.value,location:tR(e)};bS(t,op(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Tct(e,t){const n={type:kn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:tR(e)};bS(t,op(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Cct(e,t){t.stitches=!0;const n=Nct(e);if("children"in e&&"children"in n){const r=bCe({type:"root",children:e.children},t.options);n.children=r.children}wCe({type:"comment",value:{stitch:n}},t)}function wCe(e,t){const n=e.value,r={type:kn.COMMENT,data:n,location:tR(e)};bS(t,op(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Act(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,xCe(t,op(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Ict(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Cct(n,t);else{let r="";throw wct.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function bS(e,t){xCe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=ss.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function xCe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function kct(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===ss.PLAINTEXT)return;bS(t,op(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:T1.html;i===T1.html&&n==="svg"&&(i=T1.svg);const s=Fat({...e,children:[]},{space:i===T1.svg?"svg":"html"}),o={type:kn.START_TAG,tagName:n,tagID:vS(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:tR(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Rct(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Wat.includes(n)||t.parser.tokenizer.state===ss.PLAINTEXT)return;bS(t,d6(e));const r={type:kn.END_TAG,tagName:n,tagID:vS(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:tR(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===ss.RCDATA||t.parser.tokenizer.state===ss.RAWTEXT||t.parser.tokenizer.state===ss.SCRIPT_DATA)&&(t.parser.tokenizer.state=ss.DATA)}function Pct(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function tR(e){const t=op(e)||{line:void 0,column:void 0,offset:void 0},n=d6(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Nct(e){return"children"in e?Yx({...e,children:[]}):Yx(e)}function Oct(e){return function(t,n){return bCe(t,{...e,file:n})}}function Ka({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return b.jsx(Wy,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return b.jsx(Xe,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return b.jsx(li,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return b.jsx(li,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return b.jsx(li,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return b.jsx(li,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return b.jsx(li,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return b.jsx(li,{...s,order:6,...s,pb:12})},a({node:i,...s}){return b.jsx(Hy,{...s,ref:void 0})},ul({node:i,...s}){return b.jsx(Hd,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return b.jsx(Hd,{type:"ordered",withPadding:!0,...o,pb:8})}};return b.jsx(_at,{components:n,rehypePlugins:[Oct],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function rV({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return b.jsx(Ka,{text:n})}const Dct="https://github.com/revisit-studies/study/tree/main/public/";function Mct({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Zc();return b.jsx(Ar.Main,{children:b.jsxs(bf,{size:"xs",px:"xs",children:[b.jsx(Wy,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Qu}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),b.jsx(Xe,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=QSe(i);return b.jsx(os,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:b.jsxs(Gb,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?b.jsxs(b.Fragment,{children:[b.jsx(Xe,{fw:"bold",children:i}),b.jsxs(Et,{align:"center",direction:"row",children:[b.jsx(Fue,{color:"red"}),b.jsx(Xe,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),b.jsx(rV,{issues:s.errors,type:"error"})]}):b.jsxs(b.Fragment,{children:[b.jsx(Xe,{fw:"bold",children:s.studyMetadata.title}),b.jsxs(Xe,{c:"dimmed",children:[b.jsx(Xe,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),b.jsx(Xe,{c:"dimmed",children:s.studyMetadata.description}),b.jsx(Xe,{c:"dimmed",ta:"right",style:{paddingRight:5},children:b.jsxs(Hy,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${Dct}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&b.jsxs(b.Fragment,{children:[b.jsxs(Et,{align:"center",direction:"row",children:[b.jsx(Fue,{color:"orange"}),b.jsx(Xe,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),b.jsx(rV,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var ECe={exports:{}},SCe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nR=A;function $ct(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lct=typeof Object.is=="function"?Object.is:$ct,Fct=nR.useSyncExternalStore,jct=nR.useRef,Bct=nR.useEffect,zct=nR.useMemo,Uct=nR.useDebugValue;SCe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=jct(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=zct(function(){function l(h){if(!u){if(u=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return d=p}return d=h}if(p=d,Lct(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,d=m)}var u=!1,c,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,r,i]);var a=Fct(e,s[0],s[1]);return Bct(function(){o.hasValue=!0,o.value=a},[a]),Uct(a),a};ECe.exports=SCe;var Vct=ECe.exports,Tu="default"in mM?Vi:mM,Yce=Symbol.for("react-redux-context"),Kce=typeof globalThis<"u"?globalThis:{};function Hct(){if(!Tu.createContext)return{};const e=Kce[Yce]??(Kce[Yce]=new Map);let t=e.get(Tu.createContext);return t||(t=Tu.createContext(null),e.set(Tu.createContext,t)),t}var ry=Hct(),qct=()=>{throw new Error("uSES not initialized!")};function tQ(e=ry){return function(){return Tu.useContext(e)}}var TCe=tQ(),CCe=qct,Wct=e=>{CCe=e},Gct=(e,t)=>e===t;function Yct(e=ry){const t=e===ry?TCe:tQ(e),n=(r,i={})=>{const{equalityFn:s=Gct,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:l,getServerState:u,stabilityCheck:c,identityFunctionCheck:d}=t();Tu.useRef(!0);const f=Tu.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=CCe(l.addNestedSub,a.getState,u||a.getState,f,s);return Tu.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var Kct=Yct();function Xct(e){e()}function Qct(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Xct(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Xce={notify(){},get:()=>[]};function Jct(e,t){let n,r=Xce,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),d())}}function a(){r.notify()}function l(){p.onStateChange&&p.onStateChange()}function u(){return s}function c(){i++,n||(n=e.subscribe(l),r=Qct())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Xce)}function f(){s||(s=!0,c())}function h(){s&&(s=!1,d())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:f,tryUnsubscribe:h,getListeners:()=>r};return p}var Zct=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",edt=typeof navigator<"u"&&navigator.product==="ReactNative",tdt=Zct||edt?Tu.useLayoutEffect:Tu.useEffect;function ndt({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Tu.useMemo(()=>{const u=Jct(e);return{store:e,subscription:u,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Tu.useMemo(()=>e.getState(),[e]);tdt(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==e.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,a]);const l=t||ry;return Tu.createElement(l.Provider,{value:o},n)}var rdt=ndt;function ACe(e=ry){const t=e===ry?TCe:tQ(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var idt=ACe();function sdt(e=ry){const t=e===ry?idt:ACe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var ICe=sdt();Wct(Vct.useSyncExternalStoreWithSelector);function co(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var odt=typeof Symbol=="function"&&Symbol.observable||"@@observable",Qce=odt,yB=()=>Math.random().toString(36).substring(7).split("").join("."),adt={INIT:`@@redux/INIT${yB()}`,REPLACE:`@@redux/REPLACE${yB()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${yB()}`},r$=adt;function nQ(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function kCe(e,t,n){if(typeof e!="function")throw new Error(co(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(co(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(co(1));return n(kCe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,l=!1;function u(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(l)throw new Error(co(3));return i}function d(g){if(typeof g!="function")throw new Error(co(4));if(l)throw new Error(co(5));let y=!0;u();const v=a++;return o.set(v,g),function(){if(y){if(l)throw new Error(co(6));y=!1,u(),o.delete(v),s=null}}}function f(g){if(!nQ(g))throw new Error(co(7));if(typeof g.type>"u")throw new Error(co(8));if(typeof g.type!="string")throw new Error(co(17));if(l)throw new Error(co(9));try{l=!0,i=r(i,g)}finally{l=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(co(10));r=g,f({type:r$.REPLACE})}function p(){const g=d;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(co(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[Qce](){return this}}}return f({type:r$.INIT}),{dispatch:f,subscribe:d,getState:c,replaceReducer:h,[Qce]:p}}function ldt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:r$.INIT})>"u")throw new Error(co(12));if(typeof n(void 0,{type:r$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(co(13))})}function udt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{ldt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const u={};for(let c=0;c<r.length;c++){const d=r[c],f=n[d],h=o[d],p=f(h,a);if(typeof p>"u")throw a&&a.type,new Error(co(14));u[d]=p,l=l||p!==h}return l=l||r.length!==Object.keys(o).length,l?u:o}}function i$(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function cdt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(co(15))};const o={getState:i.getState,dispatch:(l,...u)=>s(l,...u)},a=e.map(l=>l(o));return s=i$(...a)(i.dispatch),{...i,dispatch:s}}}function ddt(e){return nQ(e)&&"type"in e&&typeof e.type=="string"}var RCe=Symbol.for("immer-nothing"),Jce=Symbol.for("immer-draftable"),Lu=Symbol.for("immer-state");function Id(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Xx=Object.getPrototypeOf;function ib(e){return!!e&&!!e[Lu]}function $m(e){var t;return e?PCe(e)||Array.isArray(e)||!!e[Jce]||!!((t=e.constructor)!=null&&t[Jce])||_6(e)||w6(e):!1}var fdt=Object.prototype.constructor.toString();function PCe(e){if(!e||typeof e!="object")return!1;const t=Xx(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===fdt}function s$(e,t){b6(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function b6(e){const t=e[Lu];return t?t.type_:Array.isArray(e)?1:_6(e)?2:w6(e)?3:0}function iV(e,t){return b6(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function NCe(e,t,n){const r=b6(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function hdt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function _6(e){return e instanceof Map}function w6(e){return e instanceof Set}function Gv(e){return e.copy_||e.base_}function sV(e,t){if(_6(e))return new Map(e);if(w6(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=PCe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Lu];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Xx(e),r)}else{const r=Xx(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function rQ(e,t=!1){return x6(e)||ib(e)||!$m(e)||(b6(e)>1&&(e.set=e.add=e.clear=e.delete=pdt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>rQ(r,!0))),e}function pdt(){Id(2)}function x6(e){return Object.isFrozen(e)}var mdt={};function sb(e){const t=mdt[e];return t||Id(0,e),t}var cI;function OCe(){return cI}function gdt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Zce(e,t){t&&(sb("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function oV(e){aV(e),e.drafts_.forEach(ydt),e.drafts_=null}function aV(e){e===cI&&(cI=e.parent_)}function ede(e){return cI=gdt(cI,e)}function ydt(e){const t=e[Lu];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function tde(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Lu].modified_&&(oV(t),Id(4)),$m(e)&&(e=o$(t,e),t.parent_||a$(t,e)),t.patches_&&sb("Patches").generateReplacementPatches_(n[Lu].base_,e,t.patches_,t.inversePatches_)):e=o$(t,n,[]),oV(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==RCe?e:void 0}function o$(e,t,n){if(x6(t))return t;const r=t[Lu];if(!r)return s$(t,(i,s)=>nde(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return a$(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),s$(s,(a,l)=>nde(e,r,i,a,l,n,o)),a$(e,i,!1),n&&e.patches_&&sb("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function nde(e,t,n,r,i,s,o){if(ib(i)){const a=s&&t&&t.type_!==3&&!iV(t.assigned_,r)?s.concat(r):void 0,l=o$(e,i,a);if(NCe(n,r,l),ib(l))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if($m(i)&&!x6(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;o$(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&a$(e,i)}}function a$(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&rQ(t,n)}function vdt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:OCe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=iQ;n&&(i=[r],s=dI);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var iQ={get(e,t){if(t===Lu)return e;const n=Gv(e);if(!iV(n,t))return bdt(e,n,t);const r=n[t];return e.finalized_||!$m(r)?r:r===vB(e.base_,t)?(bB(e),e.copy_[t]=uV(r,e)):r},has(e,t){return t in Gv(e)},ownKeys(e){return Reflect.ownKeys(Gv(e))},set(e,t,n){const r=DCe(Gv(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=vB(Gv(e),t),s=i==null?void 0:i[Lu];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(hdt(n,i)&&(n!==void 0||iV(e.base_,t)))return!0;bB(e),lV(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return vB(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,bB(e),lV(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Gv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Id(11)},getPrototypeOf(e){return Xx(e.base_)},setPrototypeOf(){Id(12)}},dI={};s$(iQ,(e,t)=>{dI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});dI.deleteProperty=function(e,t){return dI.set.call(this,e,t,void 0)};dI.set=function(e,t,n){return iQ.set.call(this,e[0],t,n,e[0])};function vB(e,t){const n=e[Lu];return(n?Gv(n):e)[t]}function bdt(e,t,n){var i;const r=DCe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function DCe(e,t){if(!(t in e))return;let n=Xx(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Xx(n)}}function lV(e){e.modified_||(e.modified_=!0,e.parent_&&lV(e.parent_))}function bB(e){e.copy_||(e.copy_=sV(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var _dt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(l=s,...u){return o.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&Id(6),r!==void 0&&typeof r!="function"&&Id(7);let i;if($m(t)){const s=ede(this),o=uV(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?oV(s):aV(s)}return Zce(s,r),tde(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===RCe&&(i=void 0),this.autoFreeze_&&rQ(i,!0),r){const s=[],o=[];sb("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else Id(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,l=>t(l,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){$m(e)||Id(8),ib(e)&&(e=wdt(e));const t=ede(this),n=uV(e,void 0);return n[Lu].isManual_=!0,aV(t),n}finishDraft(e,t){const n=e&&e[Lu];(!n||!n.isManual_)&&Id(9);const{scope_:r}=n;return Zce(r,t),tde(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=sb("Patches").applyPatches_;return ib(e)?r(e,t):this.produce(e,i=>r(i,t))}};function uV(e,t){const n=_6(e)?sb("MapSet").proxyMap_(e,t):w6(e)?sb("MapSet").proxySet_(e,t):vdt(e,t);return(t?t.scope_:OCe()).drafts_.push(n),n}function wdt(e){return ib(e)||Id(10,e),MCe(e)}function MCe(e){if(!$m(e)||x6(e))return e;const t=e[Lu];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=sV(e,t.scope_.immer_.useStrictShallowCopy_)}else n=sV(e,!0);return s$(n,(r,i)=>{NCe(n,r,MCe(i))}),t&&(t.finalized_=!1),n}var Fu=new _dt,$Ce=Fu.produce;Fu.produceWithPatches.bind(Fu);Fu.setAutoFreeze.bind(Fu);Fu.setUseStrictShallowCopy.bind(Fu);Fu.applyPatches.bind(Fu);Fu.createDraft.bind(Fu);Fu.finishDraft.bind(Fu);function LCe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var xdt=LCe(),Edt=LCe,Sdt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?i$:i$.apply(null,arguments)};function rde(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Wd(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>ddt(r)&&r.type===e,n}var FCe=class MC extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,MC.prototype)}static get[Symbol.species](){return MC}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new MC(...t[0].concat(this)):new MC(...t.concat(this))}};function ide(e){return $m(e)?$Ce(e,()=>{}):e}function sde(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Wd(10));const r=n.insert(t,e);return e.set(t,r),r}function Tdt(e){return typeof e=="boolean"}var Cdt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new FCe;return n&&(Tdt(n)?o.push(xdt):o.push(Edt(n.extraArgument))),o},Adt="RTK_autoBatch",jCe=e=>t=>{setTimeout(t,e)},Idt=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:jCe(10),kdt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?Idt:e.type==="callback"?e.queueNotification:jCe(e.timeout),u=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const d=()=>i&&c(),f=r.subscribe(d);return a.add(c),()=>{f(),a.delete(c)}},dispatch(c){var d;try{return i=!((d=c==null?void 0:c.meta)!=null&&d[Adt]),s=!i,s&&(o||(o=!0,l(u))),r.dispatch(c)}finally{i=!0}}})},Rdt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new FCe(e);return r&&i.push(kdt(typeof r=="object"?r:void 0)),i};function Pdt(e){const t=Cdt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(nQ(n))a=udt(n);else throw new Error(Wd(1));let l;typeof r=="function"?l=r(t):l=t();let u=i$;i&&(u=Sdt({trace:!1,...typeof i=="object"&&i}));const c=cdt(...l),d=Rdt(c);let f=typeof o=="function"?o(d):d();const h=u(...f);return kCe(a,s,h)}function BCe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Wd(28));if(a in t)throw new Error(Wd(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Ndt(e){return typeof e=="function"}function Odt(e,t){let[n,r,i]=BCe(t),s;if(Ndt(e))s=()=>ide(e());else{const a=ide(e);s=()=>a}function o(a=s(),l){let u=[n[l.type],...r.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[i]),u.reduce((c,d)=>{if(d)if(ib(c)){const h=d(c,l);return h===void 0?c:h}else{if($m(c))return $Ce(c,f=>d(f,l));{const f=d(c,l);if(f===void 0){if(c===null)return c;throw new Error(Wd(9))}return f}}return c},a)}return o.getInitialState=s,o}var Ddt=Symbol.for("rtk-slice-createasyncthunk");function Mdt(e,t){return`${e}/${t}`}function $dt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Ddt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Wd(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(jdt()):i.reducers)||{},l=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(_,w){const x=typeof _=="string"?_:_.type;if(!x)throw new Error(Wd(12));if(x in u.sliceCaseReducersByType)throw new Error(Wd(13));return u.sliceCaseReducersByType[x]=w,c},addMatcher(_,w){return u.sliceMatchers.push({matcher:_,reducer:w}),c},exposeAction(_,w){return u.actionCreators[_]=w,c},exposeCaseReducer(_,w){return u.sliceCaseReducersByName[_]=w,c}};l.forEach(_=>{const w=a[_],x={reducerName:_,type:Mdt(s,_),createNotation:typeof i.reducers=="function"};zdt(w)?Vdt(x,w,c,t):Bdt(x,w,c)});function d(){const[_={},w=[],x=void 0]=typeof i.extraReducers=="function"?BCe(i.extraReducers):[i.extraReducers],S={..._,...u.sliceCaseReducersByType};return Odt(i.initialState,E=>{for(let T in S)E.addCase(T,S[T]);for(let T of u.sliceMatchers)E.addMatcher(T.matcher,T.reducer);for(let T of w)E.addMatcher(T.matcher,T.reducer);x&&E.addDefaultCase(x)})}const f=_=>_,h=new Map;let p;function m(_,w){return p||(p=d()),p(_,w)}function g(){return p||(p=d()),p.getInitialState()}function y(_,w=!1){function x(E){let T=E[_];return typeof T>"u"&&w&&(T=g()),T}function S(E=f){const T=sde(h,w,{insert:()=>new WeakMap});return sde(T,E,{insert:()=>{const I={};for(const[k,P]of Object.entries(i.selectors??{}))I[k]=Ldt(P,E,g,w);return I}})}return{reducerPath:_,getSelectors:S,get selectors(){return S(x)},selectSlice:x}}const v={name:s,reducer:m,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(_,{reducerPath:w,...x}={}){const S=w??o;return _.inject({reducerPath:S,reducer:m},x),{...v,...y(S,!0)}}};return v}}function Ldt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Fdt=$dt();function jdt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Bdt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Udt(r))throw new Error(Wd(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?rde(e,o):rde(e))}function zdt(e){return e._reducerDefinitionType==="asyncThunk"}function Udt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Vdt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Wd(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:u,options:c}=n,d=i(e,s,c);r.exposeAction(t,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),l&&r.addCase(d.rejected,l),u&&r.addMatcher(d.settled,u),r.exposeCaseReducer(t,{fulfilled:o||_N,pending:a||_N,rejected:l||_N,settled:u||_N})}function _N(){}function Wd(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var oi={};function Hdt(e){return!!(e&&typeof e.then=="function")}function l$(e){return e||(e=0),new Promise(function(t){return setTimeout(t,e)})}function qdt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function E6(){return Math.random().toString(36).substring(2)}var ode=0,_B=0;function S6(){var e=new Date().getTime();return e===ode?(_B++,e*1e3+_B):(ode=e,_B=0,e*1e3)}var rR=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",Wdt=S6,Gdt="native";function Ydt(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(n){t.messagesCallback&&t.messagesCallback(n.data)},t}function Kdt(e){e.bc.close(),e.subFns=[]}function Xdt(e,t){try{return e.bc.postMessage(t,!1),Promise.resolve()}catch(n){return Promise.reject(n)}}function Qdt(e,t){e.messagesCallback=t}function Jdt(){if(rR&&typeof window>"u")return!1;if(typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function Zdt(){return 150}const eft={create:Ydt,close:Kdt,onMessage:Qdt,postMessage:Xdt,canBeUsed:Jdt,type:Gdt,averageResponseTime:Zdt,microSeconds:Wdt};var zCe=function(){function e(t){this.ttl=t,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(t){return this.set.has(t)},e.prototype.add=function(t){var n=this;this.timeMap.set(t,UCe()),this.set.add(t),setTimeout(function(){tft(n)},0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function tft(e){for(var t=UCe()-e.ttl,n=e.set[Symbol.iterator]();;){var r=n.next().value;if(!r)return;var i=e.timeMap.get(r);if(i<t)e.timeMap.delete(r),e.set.delete(r);else return}}function UCe(){return new Date().getTime()}function T6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return typeof t.webWorkerSupport>"u"&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&typeof e.idb.onclose=="function"&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=1e3*60*2),typeof t.node.useFastPath>"u"&&(t.node.useFastPath=!0),t}var nft=S6,rft="pubkey.broadcast-channel-0-",Lm="messages",ift="idb";function VCe(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function sft(e){var t=VCe(),n=rft+e,r=t.open(n,1);r.onupgradeneeded=function(s){var o=s.target.result;o.createObjectStore(Lm,{keyPath:"id",autoIncrement:!0})};var i=new Promise(function(s,o){r.onerror=function(a){return o(a)},r.onsuccess=function(){s(r.result)}});return i}function oft(e,t,n){var r=new Date().getTime(),i={uuid:t,time:r,data:n},s=e.transaction([Lm],"readwrite");return new Promise(function(o,a){s.oncomplete=function(){return o()},s.onerror=function(u){return a(u)};var l=s.objectStore(Lm);l.add(i)})}function aft(e,t){var n=e.transaction(Lm).objectStore(Lm),r=[];function i(){try{var s=IDBKeyRange.bound(t+1,1/0);return n.openCursor(s)}catch{return n.openCursor()}}return new Promise(function(s){i().onsuccess=function(o){var a=o.target.result;a?a.value.id<t+1?a.continue(t+1):(r.push(a.value),a.continue()):s(r)}})}function lft(e,t){var n=e.transaction([Lm],"readwrite").objectStore(Lm).delete(t);return new Promise(function(r){n.onsuccess=function(){return r()}})}function uft(e,t){var n=new Date().getTime()-t,r=e.transaction(Lm).objectStore(Lm),i=[];return new Promise(function(s){r.openCursor().onsuccess=function(o){var a=o.target.result;if(a){var l=a.value;if(l.time<n)i.push(l),a.continue();else{s(i);return}}else s(i)}})}function cft(e,t){return uft(e,t).then(function(n){return Promise.all(n.map(function(r){return lft(e,r.id)}))})}function dft(e,t){return t=T6(t),sft(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:E6(),eMIs:new zCe(t.idb.ttl*2),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},HCe(r),r})}function HCe(e){e.closed||qCe(e).then(function(){return l$(e.options.idb.fallbackInterval)}).then(function(){return HCe(e)})}function fft(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}function qCe(e){return e.closed||!e.messagesCallback?Promise.resolve():aft(e.db,e.lastCursorId).then(function(t){var n=t.filter(function(r){return!!r}).map(function(r){return r.id>e.lastCursorId&&(e.lastCursorId=r.id),r}).filter(function(r){return fft(r,e)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){e.messagesCallback&&(e.eMIs.add(r.id),e.messagesCallback(r.data))}),Promise.resolve()})}function hft(e){e.closed=!0,e.db.close()}function pft(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return oft(e.db,e.uuid,t)}).then(function(){qdt(0,10)===0&&cft(e.db,e.options.idb.ttl)}),e.writeBlockPromise}function mft(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,qCe(e)}function gft(){if(rR)return!1;var e=VCe();return!!e}function yft(e){return e.idb.fallbackInterval*2}const vft={create:dft,close:hft,onMessage:mft,postMessage:pft,canBeUsed:gft,type:ift,averageResponseTime:yft,microSeconds:nft};var bft=S6,_ft="pubkey.broadcastChannel-",wft="localstorage";function WCe(){var e;if(typeof window>"u")return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function GCe(e){return _ft+e}function xft(e,t){return new Promise(function(n){l$().then(function(){var r=GCe(e.channelName),i={token:E6(),time:new Date().getTime(),data:t,uuid:e.uuid},s=JSON.stringify(i);WCe().setItem(r,s);var o=document.createEvent("Event");o.initEvent("storage",!0,!0),o.key=r,o.newValue=s,window.dispatchEvent(o),n()})})}function Eft(e,t){var n=GCe(e),r=function(s){s.key===n&&t(JSON.parse(s.newValue))};return window.addEventListener("storage",r),r}function Sft(e){window.removeEventListener("storage",e)}function Tft(e,t){if(t=T6(t),!YCe())throw new Error("BroadcastChannel: localstorage cannot be used");var n=E6(),r=new zCe(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=Eft(e,function(s){i.messagesCallback&&s.uuid!==n&&(!s.token||r.has(s.token)||s.data.time&&s.data.time<i.messagesCallbackTime||(r.add(s.token),i.messagesCallback(s.data)))}),i}function Cft(e){Sft(e.listener)}function Aft(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function YCe(){if(rR)return!1;var e=WCe();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}function Ift(){var e=120,t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?e*2:e}const kft={create:Tft,close:Cft,onMessage:Aft,postMessage:xft,canBeUsed:YCe,type:wft,averageResponseTime:Ift,microSeconds:bft};var Rft=S6,Pft="simulate",sQ=new Set;function Nft(e){var t={name:e,messagesCallback:null};return sQ.add(t),t}function Oft(e){sQ.delete(e)}function Dft(e,t){return new Promise(function(n){return setTimeout(function(){var r=Array.from(sQ);r.filter(function(i){return i.name===e.name}).filter(function(i){return i!==e}).filter(function(i){return!!i.messagesCallback}).forEach(function(i){return i.messagesCallback(t)}),n()},5)})}function Mft(e,t){e.messagesCallback=t}function $ft(){return!0}function Lft(){return 5}const Fft={create:Nft,close:Oft,onMessage:Mft,postMessage:Dft,canBeUsed:$ft,type:Pft,averageResponseTime:Lft,microSeconds:Rft};var cV=[eft,vft,kft];if(rR){var ade=require("../../src/methods/node.js");typeof ade.canBeUsed=="function"&&cV.push(ade)}function KCe(e){var t=[].concat(e.methods,cV).filter(Boolean);if(e.type){if(e.type==="simulate")return Fft;var n=t.find(function(i){return i.type===e.type});if(n)return n;throw new Error("method-type "+e.type+" not found")}!e.webWorkerSupport&&!rR&&(t=t.filter(function(i){return i.type!=="idb"}));var r=t.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No useable methode found:"+JSON.stringify(cV.map(function(i){return i.type})))}var oQ=function(t,n){this.name=t,dV&&(n=dV),this.options=T6(n),this.method=KCe(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,zft(this)};oQ._pubkey=!0;function jft(e){e=T6(e);var t=KCe(e);return t.type==="node"?t.clearNodeFolder().then(function(){return!0}):Promise.resolve(!1)}var dV;function Bft(e){dV=e}oQ.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return lde(this,"message",t)},postInternal:function(t){return lde(this,"internal",t)},set onmessage(e){var t=this.method.microSeconds(),n={time:t,fn:e};cde(this,"message",this._onML),e&&typeof e=="function"?(this._onML=n,ude(this,"message",n)):this._onML=null},addEventListener:function(t,n){var r=this.method.microSeconds(),i={time:r,fn:n};ude(this,t,i)},removeEventListener:function(t,n){var r=this._addEL[t].find(function(i){return i.fn===n});cde(this,t,r)},close:function(){var t=this;if(!this.closed){this.closed=!0;var n=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(r){return r()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function lde(e,t,n){var r=e.method.microSeconds(),i={time:r,type:t,data:n},s=e._prepP?e._prepP:Promise.resolve();return s.then(function(){var o=e.method.postMessage(e._state,i);return e._uMP.add(o),o.catch().then(function(){return e._uMP.delete(o)}),o})}function zft(e){var t=e.method.create(e.name,e.options);Hdt(t)?(e._prepP=t,t.then(function(n){e._state=n})):e._state=t}function XCe(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function ude(e,t,n){e._addEL[t].push(n),Uft(e)}function cde(e,t,n){e._addEL[t]=e._addEL[t].filter(function(r){return r!==n}),Vft(e)}function Uft(e){if(!e._iL&&XCe(e)){var t=function(i){e._addEL[i.type].forEach(function(s){i.time>=s.time&&s.fn(i.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}function Vft(e){if(e._iL&&!XCe(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}const Hft=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";function qft(e){if(!(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope)){if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){e()},!0),window.addEventListener("unload",function(){e()},!0)}}const Wft={add:qft},QCe={},Gft=Object.freeze(Object.defineProperty({__proto__:null,default:QCe},Symbol.toStringTag,{value:"Module"}));var Yft=Hft?QCe:Wft,F1=new Set,dde=!1;function Kft(){dde||(dde=!0,Yft.add(JCe))}function Xft(e){if(Kft(),typeof e!="function")throw new Error("Listener is no function");F1.add(e);var t={remove:function(){return F1.delete(e)},run:function(){return F1.delete(e),e()}};return t}function JCe(){var e=[];return F1.forEach(function(t){e.push(t()),F1.delete(t)}),Promise.all(e)}function Qft(){F1.clear()}function Jft(){return F1.size}const Zft={add:Xft,runAll:JCe,removeAll:Qft,getSize:Jft};var ZCe=function(t,n){this._channel=t,this._options=n,this.isLeader=!1,this.isDead=!1,this.token=E6(),this._isApl=!1,this._reApply=!1,this._unl=[],this._lstns=[],this._invs=[],this._dpL=function(){},this._dpLC=!1};ZCe.prototype={applyOnce:function(){var t=this;if(this.isLeader||this.isDead)return Promise.resolve(!1);if(this._isApl)return this._reApply=!0,Promise.resolve(!1);this._isApl=!0;var n=!1,r=function(o){o.context==="leader"&&o.token!=t.token&&(o.action==="apply"&&o.token>t.token&&(n=!0),o.action==="tell"&&(n=!0))};this._channel.addEventListener("internal",r);var i=C1(this,"apply").then(function(){return l$(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):C1(t,"apply")}).then(function(){return l$(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):C1(t)}).then(function(){return e2e(t)}).then(function(){return!0}).catch(function(){return!1}).then(function(s){return t._channel.removeEventListener("internal",r),t._isApl=!1,!s&&t._reApply?(t._reApply=!1,t.applyOnce()):s});return i},awaitLeadership:function(){return this._aLP||(this._aLP=eht(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var t=this;if(!this.isDead)return this.isDead=!0,this._lstns.forEach(function(n){return t._channel.removeEventListener("internal",n)}),this._invs.forEach(function(n){return clearInterval(n)}),this._unl.forEach(function(n){n.remove()}),C1(this,"death")}};function eht(e){return e.isLeader?Promise.resolve():new Promise(function(t){var n=!1;function r(){n||(n=!0,clearInterval(i),e._channel.removeEventListener("internal",s),t(!0))}e.applyOnce().then(function(){e.isLeader&&r()});var i=setInterval(function(){e.applyOnce().then(function(){e.isLeader&&r()})},e._options.fallbackInterval);e._invs.push(i);var s=function(a){a.context==="leader"&&a.action==="death"&&e.applyOnce().then(function(){e.isLeader&&r()})};e._channel.addEventListener("internal",s),e._lstns.push(s)})}function C1(e,t){var n={context:"leader",action:t,token:e.token};return e._channel.postInternal(n)}function e2e(e){e.isLeader=!0;var t=Zft.add(function(){return e.die()});e._unl.push(t);var n=function(i){i.context==="leader"&&i.action==="apply"&&C1(e,"tell"),i.context==="leader"&&i.action==="tell"&&!e._dpLC&&(e._dpLC=!0,e._dpL(),C1(e,"tell"))};return e._channel.addEventListener("internal",n),e._lstns.push(n),C1(e,"tell")}function tht(e,t){return e||(e={}),e=JSON.parse(JSON.stringify(e)),e.fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}function nht(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=tht(t,e);var n=new ZCe(e,t);return e._befC.push(function(){return n.die()}),e._leaderElector=n,n}const rht=Object.freeze(Object.defineProperty({__proto__:null,BroadcastChannel:oQ,beLeader:e2e,clearNodeFolder:jft,createLeaderElection:nht,enforceOptions:Bft},Symbol.toStringTag,{value:"Module"})),iht=Nbe(rht);var aQ,lQ,uQ;Object.defineProperty(oi,"__esModule",{value:!0});var t2e=oi.initMessageListener=uQ=oi.initStateWithPrevTab=lQ=oi.withReduxStateSync=oi.createReduxStateSync=aQ=oi.createStateSyncMiddleware=oi.WINDOW_STATE_SYNC_ID=oi.INIT_MESSAGE_LISTENER=oi.RECEIVE_INIT_STATE=oi.SEND_INIT_STATE=oi.GET_INIT_STATE=void 0;oi.generateUuidForAction=i2e;oi.isActionAllowed=s2e;oi.isActionSynced=dht;oi.MessageListener=o2e;var sht=iht,fV=0,cQ=oi.GET_INIT_STATE="&_GET_INIT_STATE",dQ=oi.SEND_INIT_STATE="&_SEND_INIT_STATE",fQ=oi.RECEIVE_INIT_STATE="&_RECEIVE_INIT_STATE",oht=oi.INIT_MESSAGE_LISTENER="&_INIT_MESSAGE_LISTENER",hV={channel:"redux_state_sync",predicate:null,blacklist:[],whitelist:[],broadcastChannelOption:void 0,prepareState:function(t){return t},receiveState:function(t,n){return n}},aht=function(){return{type:cQ}},lht=function(){return{type:dQ}},uht=function(t){return{type:fQ,payload:t}},cht=function(){return{type:oht}};function Pg(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function n2e(){return""+Pg()+Pg()+"-"+Pg()+"-"+Pg()+"-"+Pg()+"-"+Pg()+Pg()+Pg()}var r2e=oi.WINDOW_STATE_SYNC_ID=n2e();function i2e(e){var t=e;return t.$uuid=n2e(),t.$wuid=r2e,t}function s2e(e){var t=e.predicate,n=e.blacklist,r=e.whitelist,i=function(){return!0};return t&&typeof t=="function"?i=t:Array.isArray(n)?i=function(o){return n.indexOf(o.type)<0}:Array.isArray(r)&&(i=function(o){return r.indexOf(o.type)>=0}),i}function dht(e){return!!e.$isSync}function o2e(e){var t=e.channel,n=e.dispatch,r=e.allowed,i=!1,s={};this.handleOnMessage=function(o){o.$wuid!==r2e&&o.type!==fQ&&o.$uuid&&o.$uuid!==fV&&(o.type===cQ&&!s[o.$wuid]?(s[o.$wuid]=!0,n(lht())):o.type===dQ&&!s[o.$wuid]?i||(i=!0,n(uht(o.payload))):r(o)&&(fV=o.$uuid,n(Object.assign(o,{$isSync:!0}))))},this.messageChannel=t,this.messageChannel.onmessage=this.handleOnMessage}aQ=oi.createStateSyncMiddleware=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hV,n=s2e(t),r=new sht.BroadcastChannel(t.channel,t.broadcastChannelOption),i=t.prepareState||hV.prepareState,s=null;return function(o){var a=o.getState,l=o.dispatch;return function(u){return function(c){if(s||(s=new o2e({channel:r,dispatch:l,allowed:n})),c&&!c.$uuid){var d=i2e(c);fV=d.$uuid;try{if(c.type===dQ)return a()&&(d.payload=i(a()),r.postMessage(d)),u(c);(n(d)||c.type===cQ)&&r.postMessage(d)}catch{console.error("Your browser doesn't support cross tab communication")}}return u(Object.assign(c,{$isSync:typeof c.$isSync>"u"?!1:c.$isSync}))}}}};var fht=oi.createReduxStateSync=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hV.receiveState;return function(r,i){var s=r;return i.type===fQ&&(s=n(r,i.payload)),t(s,i)}};lQ=oi.withReduxStateSync=fht;uQ=oi.initStateWithPrevTab=function(t){var n=t.dispatch;n(aht())};t2e=oi.initMessageListener=function(t){var n=t.dispatch;n(cht())};function Rc(e){return Array.isArray(e)?e:e.components.flatMap(t=>typeof t=="string"?t:Rc(t))}function a2e(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:a2e(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function l2e(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Rc(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Rc(e).length-1}];r+=1}else{const o=l2e(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function hht(e,t){const n=l2e(e,t,0);return typeof n=="number"?null:n}function u2e(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=u2e(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function pht(e,t){const n=u2e(e,t,0);return n.found?n.distance:-1}function hQ(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...hQ(i,`${t}-${s}`))}),n}async function mht(e,t,n,r,i){const s=Rc(n),o=Object.fromEntries(s.filter(h=>h!=="end").map((h,p)=>[`${h}_${p}`,{answer:{}}])),a=Object.assign({},...s.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...s.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),u={studyId:e,answers:Object.keys(i).length>0?i:o,isRecording:!1,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:a,iframeAnswers:{},iframeProvenance:null,metadata:r,analysisTrialName:null,analysisProvState:null,analysisParticipantName:null,analysisWaveformTime:0},c=Fdt({name:"storeSlice",initialState:u,reducers:{setConfig(h,p){h.config=p.payload},setIsRecording(h,p){h.isRecording=p.payload},toggleStudyBrowser:h=>{h.showStudyBrowser=!h.showStudyBrowser},toggleShowHelpText:h=>{h.showHelpText=!h.showHelpText},setAlertModal:(h,p)=>{h.alertModal=p.payload},setIframeAnswers:(h,p)=>{h.iframeAnswers=p.payload},setAnalysisTrialName:(h,p)=>{h.analysisTrialName=p.payload},setAnalysisParticipantName:(h,p)=>{h.analysisParticipantName=p.payload},setAnalysisWaveformTime:(h,p)=>{h.analysisWaveformTime=p.payload},setIframeProvenance:(h,p)=>{h.iframeProvenance=p.payload},updateResponseBlockValidation:(h,{payload:p})=>{h.trialValidation[p.identifier]||(h.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),h.trialValidation[p.identifier][p.location]={valid:p.status,values:p.values},p.provenanceGraph&&(h.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveAnalysisState(h,{payload:p}){h.analysisProvState=p},saveTrialAnswer(h,{payload:p}){const{identifier:m,answer:g,startTime:y,endTime:v,provenanceGraph:_,windowEvents:w}=p;h.answers[m]={answer:g,startTime:y,endTime:v,provenanceGraph:_,windowEvents:w}}}}),d=aQ({}),f=Pdt({reducer:lQ(c.reducer),preloadedState:u,middleware:h=>h().prepend(d)});return t2e(f),uQ(f),{store:f,actions:c.actions}}const c2e=A.createContext(null);function ju(){return A.useContext(c2e).actions}const Fc=ICe,Ro=Kct;function ght(e){return Ro(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function pQ(){return Ro(e=>Rc(e.sequence))}function _S(){const{studyId:e}=Lc();return`${e}`}function Xy(){const{index:e}=Lc(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function ap(){const e=Xy(),t=pQ();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var u$={exports:{}};u$.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",d="[object Date]",f="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",_="[object Proxy]",w="[object RegExp]",x="[object Set]",S="[object String]",E="[object Undefined]",T="[object WeakMap]",I="[object ArrayBuffer]",k="[object DataView]",P="[object Float32Array]",L="[object Float64Array]",R="[object Int8Array]",$="[object Int16Array]",D="[object Int32Array]",O="[object Uint8Array]",F="[object Uint8ClampedArray]",U="[object Uint16Array]",V="[object Uint32Array]",M=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,q=/^(?:0|[1-9]\d*)$/,j={};j[P]=j[L]=j[R]=j[$]=j[D]=j[O]=j[F]=j[U]=j[V]=!0,j[a]=j[l]=j[I]=j[c]=j[k]=j[d]=j[f]=j[h]=j[m]=j[g]=j[v]=j[w]=j[x]=j[S]=j[T]=!1;var H=typeof qi=="object"&&qi&&qi.Object===Object&&qi,G=typeof self=="object"&&self&&self.Object===Object&&self,J=H||G||Function("return this")(),re=t&&!t.nodeType&&t,ie=re&&!0&&e&&!e.nodeType&&e,te=ie&&ie.exports===re,ae=te&&H.process,_e=function(){try{var ne=ie&&ie.require&&ie.require("util").types;return ne||ae&&ae.binding&&ae.binding("util")}catch{}}(),ce=_e&&_e.isTypedArray;function ze(ne,he,Ce){switch(Ce.length){case 0:return ne.call(he);case 1:return ne.call(he,Ce[0]);case 2:return ne.call(he,Ce[0],Ce[1]);case 3:return ne.call(he,Ce[0],Ce[1],Ce[2])}return ne.apply(he,Ce)}function Oe(ne,he){for(var Ce=-1,At=Array(ne);++Ce<ne;)At[Ce]=he(Ce);return At}function $e(ne){return function(he){return ne(he)}}function Ne(ne,he){return ne==null?void 0:ne[he]}function pe(ne,he){return function(Ce){return ne(he(Ce))}}var ue=Array.prototype,Se=Function.prototype,De=Object.prototype,at=J["__core-js_shared__"],He=Se.toString,le=De.hasOwnProperty,Ie=function(){var ne=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),Ye=De.toString,fe=He.call(Object),Te=RegExp("^"+He.call(le).replace(M,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=te?J.Buffer:void 0,et=J.Symbol,St=J.Uint8Array;Ve&&Ve.allocUnsafe;var An=pe(Object.getPrototypeOf,Object),_r=Object.create,Br=De.propertyIsEnumerable,Or=ue.splice,yn=et?et.toStringTag:void 0,Nn=function(){try{var ne=We(Object,"defineProperty");return ne({},"",{}),ne}catch{}}(),sr=Ve?Ve.isBuffer:void 0,tr=Math.max,Lo=Date.now,Di=We(J,"Map"),Qi=We(Object,"create"),Us=function(){function ne(){}return function(he){if(!Pp(he))return{};if(_r)return _r(he);ne.prototype=he;var Ce=new ne;return ne.prototype=void 0,Ce}}();function mr(ne){var he=-1,Ce=ne==null?0:ne.length;for(this.clear();++he<Ce;){var At=ne[he];this.set(At[0],At[1])}}function Hn(){this.__data__=Qi?Qi(null):{},this.size=0}function Sa(ne){var he=this.has(ne)&&delete this.__data__[ne];return this.size-=he?1:0,he}function Zu(ne){var he=this.__data__;if(Qi){var Ce=he[ne];return Ce===r?void 0:Ce}return le.call(he,ne)?he[ne]:void 0}function Df(ne){var he=this.__data__;return Qi?he[ne]!==void 0:le.call(he,ne)}function ht(ne,he){var Ce=this.__data__;return this.size+=this.has(ne)?0:1,Ce[ne]=Qi&&he===void 0?r:he,this}mr.prototype.clear=Hn,mr.prototype.delete=Sa,mr.prototype.get=Zu,mr.prototype.has=Df,mr.prototype.set=ht;function Si(ne){var he=-1,Ce=ne==null?0:ne.length;for(this.clear();++he<Ce;){var At=ne[he];this.set(At[0],At[1])}}function vn(){this.__data__=[],this.size=0}function zr(ne){var he=this.__data__,Ce=Cp(he,ne);if(Ce<0)return!1;var At=he.length-1;return Ce==At?he.pop():Or.call(he,Ce,1),--this.size,!0}function ii(ne){var he=this.__data__,Ce=Cp(he,ne);return Ce<0?void 0:he[Ce][1]}function gi(ne){return Cp(this.__data__,ne)>-1}function Mi(ne,he){var Ce=this.__data__,At=Cp(Ce,ne);return At<0?(++this.size,Ce.push([ne,he])):Ce[At][1]=he,this}Si.prototype.clear=vn,Si.prototype.delete=zr,Si.prototype.get=ii,Si.prototype.has=gi,Si.prototype.set=Mi;function Fo(ne){var he=-1,Ce=ne==null?0:ne.length;for(this.clear();++he<Ce;){var At=ne[he];this.set(At[0],At[1])}}function ec(){this.size=0,this.__data__={hash:new mr,map:new(Di||Si),string:new mr}}function Tp(ne){var he=qe(this,ne).delete(ne);return this.size-=he?1:0,he}function yv(ne){return qe(this,ne).get(ne)}function or(ne){return qe(this,ne).has(ne)}function Mf(ne,he){var Ce=qe(this,ne),At=Ce.size;return Ce.set(ne,he),this.size+=Ce.size==At?0:1,this}Fo.prototype.clear=ec,Fo.prototype.delete=Tp,Fo.prototype.get=yv,Fo.prototype.has=or,Fo.prototype.set=Mf;function Ta(ne){var he=this.__data__=new Si(ne);this.size=he.size}function od(){this.__data__=new Si,this.size=0}function dl(ne){var he=this.__data__,Ce=he.delete(ne);return this.size=he.size,Ce}function S_(ne){return this.__data__.get(ne)}function T_(ne){return this.__data__.has(ne)}function vv(ne,he){var Ce=this.__data__;if(Ce instanceof Si){var At=Ce.__data__;if(!Di||At.length<n-1)return At.push([ne,he]),this.size=++Ce.size,this;Ce=this.__data__=new Fo(At)}return Ce.set(ne,he),this.size=Ce.size,this}Ta.prototype.clear=od,Ta.prototype.delete=dl,Ta.prototype.get=S_,Ta.prototype.has=T_,Ta.prototype.set=vv;function bv(ne,he){var Ce=kp(ne),At=!Ce&&pl(ne),$n=!Ce&&!At&&Rp(ne),wr=!Ce&&!At&&!$n&&LP(ne),Ur=Ce||At||$n||wr,Bn=Ur?Oe(ne.length,String):[],Vr=Bn.length;for(var Ji in ne)Ur&&(Ji=="length"||$n&&(Ji=="offset"||Ji=="parent")||wr&&(Ji=="buffer"||Ji=="byteLength"||Ji=="byteOffset")||xt(Ji,Vr))||Bn.push(Ji);return Bn}function Tg(ne,he,Ce){(Ce!==void 0&&!tc(ne[he],Ce)||Ce===void 0&&!(he in ne))&&fl(ne,he,Ce)}function C_(ne,he,Ce){var At=ne[he];(!(le.call(ne,he)&&tc(At,Ce))||Ce===void 0&&!(he in ne))&&fl(ne,he,Ce)}function Cp(ne,he){for(var Ce=ne.length;Ce--;)if(tc(ne[Ce][0],he))return Ce;return-1}function fl(ne,he,Ce){he=="__proto__"&&Nn?Nn(ne,he,{configurable:!0,enumerable:!0,value:Ce,writable:!0}):ne[he]=Ce}var _v=Fe();function Ca(ne){return ne==null?ne===void 0?E:y:yn&&yn in Object(ne)?Ge(ne):jo(ne)}function $f(ne){return ml(ne)&&Ca(ne)==a}function hl(ne){if(!Pp(ne)||jn(ne))return!1;var he=wT(ne)?Te:z;return he.test(DP(ne))}function Ap(ne){return ml(ne)&&$P(ne.length)&&!!j[Ca(ne)]}function bT(ne){if(!Pp(ne))return Cr(ne);var he=Tr(ne),Ce=[];for(var At in ne)At=="constructor"&&(he||!le.call(ne,At))||Ce.push(At);return Ce}function wv(ne,he,Ce,At,$n){ne!==he&&_v(he,function(wr,Ur){if($n||($n=new Ta),Pp(wr))Cg(ne,he,Ur,Ce,wv,At,$n);else{var Bn=At?At(Ip(ne,Ur),wr,Ur+"",ne,he,$n):void 0;Bn===void 0&&(Bn=wr),Tg(ne,Ur,Bn)}},Tv)}function Cg(ne,he,Ce,At,$n,wr,Ur){var Bn=Ip(ne,Ce),Vr=Ip(he,Ce),Ji=Ur.get(Vr);if(Ji){Tg(ne,Ce,Ji);return}var Bo=wr?wr(Bn,Vr,Ce+"",ne,he,Ur):void 0,Av=Bo===void 0;if(Av){var Np=kp(Vr),k_=!Np&&Rp(Vr),R_=!Np&&!k_&&LP(Vr);Bo=Vr,Np||k_||R_?kp(Bn)?Bo=Bn:MP(Bn)?Bo=ye(Bn):k_?(Av=!1,Bo=K(Vr)):R_?(Av=!1,Bo=ee(Vr)):Bo=[]:s8(Vr)||pl(Vr)?(Bo=Bn,pl(Bn)?Bo=Sv(Bn):(!Pp(Bn)||wT(Bn))&&(Bo=ot(Vr))):Av=!1}Av&&(Ur.set(Vr,Bo),$n(Bo,Vr,At,wr,Ur),Ur.delete(Vr)),Tg(ne,Ce,Bo)}function A_(ne,he){return _T(Lf(ne,he,Ag),ne+"")}var xv=Nn?function(ne,he){return Nn(ne,"toString",{configurable:!0,enumerable:!1,value:Cv(he),writable:!0})}:Ag;function K(ne,he){return ne.slice()}function de(ne){var he=new ne.constructor(ne.byteLength);return new St(he).set(new St(ne)),he}function ee(ne,he){var Ce=de(ne.buffer);return new ne.constructor(Ce,ne.byteOffset,ne.length)}function ye(ne,he){var Ce=-1,At=ne.length;for(he||(he=Array(At));++Ce<At;)he[Ce]=ne[Ce];return he}function ve(ne,he,Ce,At){var $n=!Ce;Ce||(Ce={});for(var wr=-1,Ur=he.length;++wr<Ur;){var Bn=he[wr],Vr=void 0;Vr===void 0&&(Vr=ne[Bn]),$n?fl(Ce,Bn,Vr):C_(Ce,Bn,Vr)}return Ce}function me(ne){return A_(function(he,Ce){var At=-1,$n=Ce.length,wr=$n>1?Ce[$n-1]:void 0,Ur=$n>2?Ce[2]:void 0;for(wr=ne.length>3&&typeof wr=="function"?($n--,wr):void 0,Ur&&bn(Ce[0],Ce[1],Ur)&&(wr=$n<3?void 0:wr,$n=1),he=Object(he);++At<$n;){var Bn=Ce[At];Bn&&ne(he,Bn,At,wr)}return he})}function Fe(ne){return function(he,Ce,At){for(var $n=-1,wr=Object(he),Ur=At(he),Bn=Ur.length;Bn--;){var Vr=Ur[++$n];if(Ce(wr[Vr],Vr,wr)===!1)break}return he}}function qe(ne,he){var Ce=ne.__data__;return Nt(he)?Ce[typeof he=="string"?"string":"hash"]:Ce.map}function We(ne,he){var Ce=Ne(ne,he);return hl(Ce)?Ce:void 0}function Ge(ne){var he=le.call(ne,yn),Ce=ne[yn];try{ne[yn]=void 0;var At=!0}catch{}var $n=Ye.call(ne);return At&&(he?ne[yn]=Ce:delete ne[yn]),$n}function ot(ne){return typeof ne.constructor=="function"&&!Tr(ne)?Us(An(ne)):{}}function xt(ne,he){var Ce=typeof ne;return he=he??o,!!he&&(Ce=="number"||Ce!="symbol"&&q.test(ne))&&ne>-1&&ne%1==0&&ne<he}function bn(ne,he,Ce){if(!Pp(Ce))return!1;var At=typeof he;return(At=="number"?I_(Ce)&&xt(he,Ce.length):At=="string"&&he in Ce)?tc(Ce[he],ne):!1}function Nt(ne){var he=typeof ne;return he=="string"||he=="number"||he=="symbol"||he=="boolean"?ne!=="__proto__":ne===null}function jn(ne){return!!Ie&&Ie in ne}function Tr(ne){var he=ne&&ne.constructor,Ce=typeof he=="function"&&he.prototype||De;return ne===Ce}function Cr(ne){var he=[];if(ne!=null)for(var Ce in Object(ne))he.push(Ce);return he}function jo(ne){return Ye.call(ne)}function Lf(ne,he,Ce){return he=tr(he===void 0?ne.length-1:he,0),function(){for(var At=arguments,$n=-1,wr=tr(At.length-he,0),Ur=Array(wr);++$n<wr;)Ur[$n]=At[he+$n];$n=-1;for(var Bn=Array(he+1);++$n<he;)Bn[$n]=At[$n];return Bn[he]=Ce(Ur),ze(ne,this,Bn)}}function Ip(ne,he){if(!(he==="constructor"&&typeof ne[he]=="function")&&he!="__proto__")return ne[he]}var _T=Ev(xv);function Ev(ne){var he=0,Ce=0;return function(){var At=Lo(),$n=s-(At-Ce);if(Ce=At,$n>0){if(++he>=i)return arguments[0]}else he=0;return ne.apply(void 0,arguments)}}function DP(ne){if(ne!=null){try{return He.call(ne)}catch{}try{return ne+""}catch{}}return""}function tc(ne,he){return ne===he||ne!==ne&&he!==he}var pl=$f(function(){return arguments}())?$f:function(ne){return ml(ne)&&le.call(ne,"callee")&&!Br.call(ne,"callee")},kp=Array.isArray;function I_(ne){return ne!=null&&$P(ne.length)&&!wT(ne)}function MP(ne){return ml(ne)&&I_(ne)}var Rp=sr||jP;function wT(ne){if(!Pp(ne))return!1;var he=Ca(ne);return he==h||he==p||he==u||he==_}function $P(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=o}function Pp(ne){var he=typeof ne;return ne!=null&&(he=="object"||he=="function")}function ml(ne){return ne!=null&&typeof ne=="object"}function s8(ne){if(!ml(ne)||Ca(ne)!=v)return!1;var he=An(ne);if(he===null)return!0;var Ce=le.call(he,"constructor")&&he.constructor;return typeof Ce=="function"&&Ce instanceof Ce&&He.call(Ce)==fe}var LP=ce?$e(ce):Ap;function Sv(ne){return ve(ne,Tv(ne))}function Tv(ne){return I_(ne)?bv(ne):bT(ne)}var FP=me(function(ne,he,Ce){wv(ne,he,Ce)});function Cv(ne){return function(){return ne}}function Ag(ne){return ne}function jP(){return!1}e.exports=FP})(u$,u$.exports);var yht=u$.exports;const mQ=rl(yht),jT="@REVISIT_COMMS",vht={minHeight:"500px",width:"100%",border:0};function bht({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=ju(),r=Fc(),i=ICe(),s=A.useRef(null),o=A.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=ap(),l=Zc(),u=A.useCallback((c,d)=>{var f,h;(h=(f=s.current)==null?void 0:f.contentWindow)==null||h.postMessage({error:!1,type:`${jT}/${c}`,iframeId:o,message:d},"*")},[s,o]);return A.useEffect(()=>{const c=d=>{const{data:f}=d;if(typeof f=="object"&&o===f.iframeId)switch(f.type){case`${jT}/WINDOW_READY`:e.parameters&&u("STUDY_DATA",e.parameters);break;case`${jT}/READY`:s.current&&(s.current.style.height=`${f.message.documentHeight}px`);break;case`${jT}/ANSWERS`:r(t(f.message));break;case`${jT}/PROVENANCE`:r(n(f.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,l,e,u,t,n]),b.jsx("iframe",{ref:s,src:`${Qu}${e.path}?trialid=${a}&id=${o}`,style:vht})}async function gQ(e){const n=await(await fetch(`${Qu}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function iR({email:e,path:t}){const n=lg();return b.jsxs(bf,{fluid:!0,my:50,maw:800,mx:"auto",children:[b.jsx(li,{order:2,children:b.jsx(Xe,{span:!0,c:"orange",children:"404"})}),b.jsxs(Xe,{children:[b.jsx(Xe,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),b.jsx(kc,{h:"lg"}),b.jsxs(Hd,{children:[b.jsx(Hd.Item,{children:b.jsx(Xe,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),b.jsx(Hd.Item,{children:b.jsxs(Xe,{children:["If you're a participant, please contact the study administrator"," ",e&&b.jsxs(b.Fragment,{children:["at"," ",b.jsxs(Hy,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const _ht={maxWidth:"100%"};function wht({currentConfig:e}){const t={..._ht,...e.style},[n,r]=A.useState(!0),[i,s]=A.useState(!1);return A.useEffect(()=>{async function o(){const a=await gQ(e.path);s(!!a),r(!1)}o()},[e]),n||i?b.jsx(Wy,{mx:"auto",src:`${Qu}${e.path}`,style:t}):b.jsx(iR,{path:e.path})}function xht({currentConfig:e}){const[t,n]=A.useState(""),[r,i]=A.useState(!0);return A.useEffect(()=>{async function s(){const o=await gQ(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?b.jsx(Ka,{text:t}):b.jsx(iR,{path:e.path})}function Bh(){return Ro(e=>e.config)}function yQ(){const{answers:e}=Ro(i=>i),t=Xy(),r=`${ap()}_${t}`;return e[r]}const Eht=Nbe(Gft);var Sht=Eht;function Tht(e,t){var n,r="",i=0,s=!0,o=0,a;function l(){return a=e.charAt(o),o++,a}for(l(),a==="-"&&(r="-",l());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,l();if(s&&i--,a===".")for(r+=".";l()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,l(),(a==="-"||a==="+")&&(r+=a,l());a>="0"&&a<="9";)r+=a,l();for(;a&&a<=" ";)l();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function Cht(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function Aht(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function Iht(e){return e.__COMMENTS__}function kht(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var C6={EOL:Sht.EOL||`
`,tryParseNumber:Tht,createComment:Cht,removeComment:Aht,getComment:Iht,forceComment:kht},Rht="3.2.1";function Pht(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return fde}else if(e.length===0)return fde;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return Oht(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),Nht.bind(null,n)}function Nht(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function fde(){}function Oht(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function d2e(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}d2e.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function f2e(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}f2e.description="parse hexadecimal numbers prefixed with 0x";function h2e(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}h2e.description="support ISO dates";var vQ={loadDsf:Pht,std:{math:d2e,hex:f2e,date:h2e}},Dht=function(e,t){var n=C6,r=vQ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},l,u;function c(){s=0,o=" "}function d($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function f($){var D,O=0,F=1;for(D=s-1;D>0&&i[D]!==`
`;D--,O++);for(;D>0;D--)i[D]===`
`&&F++;throw new Error($+" at line "+F+","+O+" >>>"+i.substr(s-O,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var D="",O=o;h();){if(o===O)return h(),$&&O==="'"&&o==="'"&&D.length===0?(h(),g()):D;if(o==="\\")if(h(),o==="u"){for(var F=0,U=0;U<4;U++){h();var V=o.charCodeAt(0),M;o>="0"&&o<="9"?M=V-48:o>="a"&&o<="f"?M=V-97+10:o>="A"&&o<="F"?M=V-65+10:f("Bad \\u char "+o),F=F*16+M}D+=String.fromCharCode(F)}else if(typeof a[o]=="string")D+=a[o];else break;else o===`
`||o==="\r"?f("Bad string containing newline"):D+=o}f("Bad string")}function g(){for(var $="",D=0,O=0;;){var F=p(-O-5);if(!F||F===`
`)break;O++}function U(){for(var V=O;o&&o<=" "&&o!==`
`&&V-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)f("Bad multiline string");else if(o==="'"){if(D++,h(),D===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;D>0;)$+="'",D--;o===`
`?($+=`
`,h(),U()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",D=s,O=-1;;){if(o===":")return $?O>=0&&O!==$.length&&(s=D+O,f("Found whitespace in your key name (use quotes to include)")):f("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?O<0&&(O=$.length):f("Found EOF while looking for a key name (check your syntax)"):d(o)?f("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function _(){var $=o;for(d(o)&&f("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var D=o==="\r"||o===`
`||o==="";if(D||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var O=$[0];switch(O){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(O==="-"||O>="0"&&O<="9"){var F=n.tryParseNumber($);if(F!==void 0)return F}}if(D){$=$.trim();var U=u($);return U!==void 0?U:$}}$+=o}}function w($,D){var O;for($--,O=s-2;O>$&&i[O]<=" "&&i[O]!==`
`;O--);i[O]===`
`&&O--,i[O]==="\r"&&O--;var F=i.substr($,O-$+1);for(O=0;O<F.length;O++)if(F[O]>" "){var U=F.indexOf(`
`);if(U>=0){var V=[F.substr(0,U),F.substr(U+1)];return D&&V[0].trim().length===0&&V.shift(),V}else return[F]}return[]}function x($){function D(F,U){var V,M,z,q;switch(typeof F){case"string":F.indexOf(U)>=0&&(q=F);break;case"object":if(Object.prototype.toString.apply(F)==="[object Array]")for(V=0,z=F.length;V<z;V++)q=D(F[V],U)||q;else for(M in F)Object.prototype.hasOwnProperty.call(F,M)&&(q=D(F[M],U)||q)}return q}function O(F){var U=D($,F);return U?"found '"+F+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return O("}")||O("]")}function S(){var $=[],D,O,F;try{if(l&&(D=n.createComment($,{a:[]})),h(),O=s,v(),D&&(F=w(O,!0).join(`
`)),o==="]")return h(),D&&(D.e=[F]),$;for(;o;){if($.push(T()),O=s,v(),o===","&&(h(),O=s,v()),D){var U=w(O);D.a.push([F||"",U[0]||""]),F=U[1]}if(o==="]")return h(),D&&(D.a[D.a.length-1][1]+=F||""),$;v()}f("End of input while parsing an array (missing ']')")}catch(V){throw V.hint=V.hint||x($),V}}function E($){var D="",O={},F,U,V;try{if(l&&(F=n.createComment(O,{c:{},o:[]})),$?U=1:(h(),U=s),v(),F&&(V=w(U,!0).join(`
`)),o==="}"&&!$)return F&&(F.e=[V]),h(),O;for(;o;){if(D=y(),v(),o!==":"&&f("Expected ':' instead of '"+o+"'"),h(),O[D]=T(),U=s,v(),o===","&&(h(),U=s,v()),F){var M=w(U);F.c[D]=[V||"",M[0]||""],V=M[1],F.o.push(D)}if(o==="}"&&!$)return h(),F&&(F.c[D][1]+=V||""),O;v()}if($)return O;f("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||x(O),z}}function T(){switch(v(),o){case"{":return E();case"[":return S();case"'":case'"':return m(!0);default:return _()}}function I($,D){var O=s;if(v(),o&&f("Syntax error, found trailing characters"),l){var F=D.join(`
`),U=w(O).join(`
`);if(U||F){var V=n.createComment($,n.getComment($));V.r=[F,U]}}return $}function k(){v();var $=l?w(1):null;switch(o){case"{":return I(E(),$);case"[":return I(S(),$);default:return I(T(),$)}}function P(){v();var $=l?w(1):null;switch(o){case"{":return I(E(),$);case"[":return I(S(),$)}try{return I(E(!0),$)}catch(D){c();try{return I(T(),$)}catch{throw D}}}if(typeof e!="string")throw new Error("source is not a string");var L=null,R=!0;return t&&typeof t=="object"&&(l=t.keepWsc,L=t.dsf,R=t.legacyRoot!==!1),u=r.loadDsf(L,"parse"),i=e,c(),R?P():k()},Mht=function(e,t){var n=C6,r=vQ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,l=!1,u=!1,c=!1,d=0,f=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,d=t.condense||0,l=t.bracesSameLine,u=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?f=0:f=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var _=v[y];g[_].push(i[_][0].length,i[_][1].length)}}var w,x="-­؀-؄܏឴឵‌-‏\u2028- ⁠-⁯\uFEFF￰-￿",S=new RegExp('[\\\\\\"\0-'+x+"]","g"),E=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+x+"]","g"),T=new RegExp("'''|^[\\s]+$|[\0-"+(f===2?"	":"\b")+"\v\f-"+x+"]","g"),I=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),k={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},P=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,L="",R=0;function $(q,j){return R+=q[0].length+q[1].length-q[2]-q[3],q[0]+j+q[1]}function D(q){return q.replace(S,function(j){var H=k[j];return typeof H=="string"?$(g.esc,H):$(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function O(q,j,H,G){return q?(E.lastIndex=0,I.lastIndex=0,c||H||E.test(q)||n.tryParseNumber(q,!0)!==void 0||I.test(q)?(S.lastIndex=0,T.lastIndex=0,S.test(q)?!T.test(q)&&!G&&f?F(q,j):$(g.qstr,D(q)):$(g.qstr,q)):$(g.str,q)):$(g.qstr,"")}function F(q,j){var H,G=q.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return $(g.mstr,G[0]);var J=s+j+g.mstr[0];for(H=0;H<G.length;H++)J+=s,G[H]&&(J+=j+G[H]);return J+s+j+g.mstr[1]}function U(q){return q?u||P.test(q)?(S.lastIndex=0,$(g.qkey,S.test(q)?D(q):q)):$(g.key,q):'""'}function V(q,j,H,G){function J(yn){return yn&&yn[yn[0]==="\r"?1:0]===`
`}function re(yn){return yn&&!J(yn)}function ie(yn,Nn,sr){if(!yn)return"";yn=n.forceComment(yn);var tr,Lo=yn.length;for(tr=0;tr<Lo&&yn[tr]<=" ";tr++);return sr&&tr>0&&(yn=yn.substr(tr)),tr<Lo?Nn+$(g.rem,yn):yn}var te=w(q);if(te!==void 0)return $(g.dsf,te);switch(typeof q){case"string":return O(q,L,j,G);case"number":return isFinite(q)?$(g.num,String(q)):$(g.lit,"null");case"boolean":return $(g.lit,String(q));case"object":if(!q)return $(g.lit,"null");var ae;a&&(ae=n.getComment(q));var _e=Object.prototype.toString.apply(q)==="[object Array]",ce=L;L+=o;var ze=s+ce,Oe=s+L,$e=H||l?"":ze,Ne=[],pe,ue=d?[]:null,Se=c,De=f,at=h?"":g.com[0],He=0,le,Ie,Ye,fe,Te,Ve,et,St,An;if(_e){for(le=0,Ie=q.length;le<Ie;le++){if(pe=le<Ie-1,ae?(Ve=ae.a[le]||[],et=re(Ve[1]),Ne.push(ie(Ve[0],`
`)+Oe),ue&&(Ve[0]||Ve[1]||et)&&(ue=null)):Ne.push(Oe),R=0,fe=q[le],Ne.push(V(fe,ae?et:!1,!0)+(pe?h:"")),ue){switch(typeof fe){case"string":R=0,c=!0,f=0,ue.push(V(fe,!1,!0)+(pe?g.com[0]:"")),c=Se,f=De;break;case"object":if(fe){ue=null;break}default:ue.push(Ne[Ne.length-1]+(pe?at:""));break}pe&&(R+=g.com[0].length-g.com[2]),He+=R}ae&&Ve[1]&&Ne.push(ie(Ve[1],et?" ":`
`,et))}Ie===0?ae&&ae.e&&Ne.push(ie(ae.e[0],`
`)+ze):Ne.push(ze),Ne.length===0?St=$(g.arr,""):(St=$e+$(g.arr,Ne.join("")),ue&&(An=ue.join(" "),An.length-He<=d&&(St=$(g.arr,An))))}else{var _r=ae?ae.o.slice():[],Br=[];for(Ye in q)Object.prototype.hasOwnProperty.call(q,Ye)&&_r.indexOf(Ye)<0&&Br.push(Ye);m&&Br.sort();var Or=_r.concat(Br);for(le=0,Ie=Or.length;le<Ie;le++)if(pe=le<Ie-1,Ye=Or[le],ae?(Ve=ae.c[Ye]||[],et=re(Ve[1]),Ne.push(ie(Ve[0],`
`)+Oe),ue&&(Ve[0]||Ve[1]||et)&&(ue=null)):Ne.push(Oe),R=0,fe=q[Ye],Te=V(fe,ae&&et),Ne.push(U(Ye)+g.col[0]+(J(Te)?"":" ")+Te+(pe?h:"")),ae&&Ve[1]&&Ne.push(ie(Ve[1],et?" ":`
`,et)),ue){switch(typeof fe){case"string":R=0,c=!0,f=0,Te=V(fe,!1),c=Se,f=De,ue.push(U(Ye)+g.col[0]+" "+Te+(pe?g.com[0]:""));break;case"object":if(fe){ue=null;break}default:ue.push(Ne[Ne.length-1]+(pe?at:""));break}R+=g.col[0].length-g.col[2],pe&&(R+=g.com[0].length-g.com[2]),He+=R}Ie===0?ae&&ae.e&&Ne.push(ie(ae.e[0],`
`)+ze):Ne.push(ze),Ne.length===0?St=$(g.obj,""):(St=$e+$(g.obj,Ne.join("")),ue&&(An=ue.join(" "),An.length-He<=d&&(St=$(g.obj,An))))}return L=ce,St}}w=r.loadDsf(p,"stringify");var M="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&(M=z[0]+`
`),M+=V(e,null,!0,!0),z&&(M+=z[1]||""),M},ux=C6;function X2(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function pV(e,t){if(!(e===null||typeof e!="object")){var n=ux.getComment(e);n&&ux.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)hde(o.a,r,n.a[r],pV(e[r]))&&(s=!0);!s&&n.e&&(o.e=X2(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,l=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(l).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=l,o.o=a,r=0,i=a.length;r<i;r++){var u=a[r];hde(o.s,u,n.c[u],pV(e[u]))&&(s=!0)}!s&&n.e&&(o.e=X2(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=X2(n.r[0],n.r[1])),s?o:void 0}}function $ht(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function Lht(e,t){var n=[];if(mV(e,t,n,[]),n.length>0){var r=c$(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+$ht(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),c$(t,r,1)}}function hde(e,t,n,r){var i=X2(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function Q2(e,t){var n=X2(t.b,t.a);return n.path=e,n}function J2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(Q2(s,o)),J2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var l=n.slice().concat([a]),u=e.s[a];u&&(t.push(Q2(l,u)),J2(u.x,t,l))});e.e&&t.push(Q2(n,e.e))}}function mV(e,t,n,r){if(e){if(t===null||typeof t!="object"){J2(e,n,r);return}var i,s=ux.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var l=e.a[a];if(l){var u=r.slice().concat([i]);i<t.length?(s.a[i]=[l.b,l.a],mV(l.x,t[i],n,u)):(n.push(Q2(u,l)),J2(l.x,n,u))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var d=r.slice().concat([c]),f=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),f&&(s.c[c]=[f.b,f.a],mV(f.x,t[c],n,d))):f&&(n.push(Q2(d,f)),J2(f.x,n,d))}),e.e&&(s.e=[e.e.b,e.e.a])}}function c$(e,t,n){var r=ux.createComment(e,ux.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=ux.forceComment(t)),r.r[n]||""}var Fht={extract:function(e){return pV(e,!0)},merge:Lht,header:function(e,t){return c$(e,t,0)},footer:function(e,t){return c$(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var pde=C6,jht=Rht,mde=Dht,gde=Mht,Bht=Fht,zht=vQ,bQ={parse:mde,stringify:gde,endOfLine:function(){return pde.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(pde.EOL=e)},version:jht,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,mde(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,gde(e,t)}},comments:Bht,dsf:zht.std},gV={exports:{}},p2e={},Gd={},Qx={},sR={},Mn={},fI={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,w)=>`${_}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,w)=>(w instanceof n&&(_[w.str]=(_[w.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const _=[y[0]];let w=0;for(;w<v.length;)a(_,v[w]),_.push(y[++w]);return new r(_)}e._=i;const s=new r("+");function o(y,...v){const _=[h(y[0])];let w=0;for(;w<v.length;)_.push(s),a(_,v[w]),_.push(s,h(y[++w]));return l(_),new r(_)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(d(v))}e.addCodeArg=a;function l(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const _=u(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function u(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function d(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function f(y){return new r(h(y))}e.stringify=f;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(fI);var yV={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=fI;class n extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var r;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:u,parent:c}={}){this._names={},this._prefixes=u,this._parent=c}toName(u){return u instanceof t.Name?u:this.name(u)}name(u){return new t.Name(this._newName(u))}_newName(u){const c=this._names[u]||this._nameGroup(u);return`${u}${c.index++}`}_nameGroup(u){var c,d;if(!((d=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||d===void 0)&&d.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}e.Scope=i;class s extends t.Name{constructor(u,c){super(c),this.prefix=u}setValue(u,{property:c,itemIndex:d}){this.value=u,this.scopePath=(0,t._)`.${new t.Name(c)}[${d}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?o:t.nil}}get(){return this._scope}name(u){return new s(u,this._newName(u))}value(u,c){var d;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const f=this.toName(u),{prefix:h}=f,p=(d=c.key)!==null&&d!==void 0?d:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,f);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,f.setValue(c,{property:h,itemIndex:y}),f}getValue(u,c){const d=this._values[u];if(d)return d.get(c)}scopeRefs(u,c=this._values){return this._reduceValues(c,d=>{if(d.scopePath===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return(0,t._)`${u}${d.scopePath}`})}scopeCode(u=this._values,c,d){return this._reduceValues(u,f=>{if(f.value===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return f.value.code},c,d)}_reduceValues(u,c,d={},f){let h=t.nil;for(const p in u){const m=u[p];if(!m)continue;const g=d[p]=d[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${y} = ${v};${this.opts._n}`}else if(v=f==null?void 0:f(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(yV);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=fI,n=yV;var r=fI;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=yV;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(H,G){return this}}class o extends s{constructor(H,G,J){super(),this.varKind=H,this.name=G,this.rhs=J}render({es5:H,_n:G}){const J=H?n.varKinds.var:this.varKind,re=this.rhs===void 0?"":` = ${this.rhs}`;return`${J} ${this.name}${re};`+G}optimizeNames(H,G){if(H[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,H,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(H,G,J){super(),this.lhs=H,this.rhs=G,this.sideEffects=J}render({_n:H}){return`${this.lhs} = ${this.rhs};`+H}optimizeNames(H,G){if(!(this.lhs instanceof t.Name&&!H[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,H,G),this}get names(){const H=this.lhs instanceof t.Name?{}:{...this.lhs.names};return R(H,this.rhs)}}class l extends a{constructor(H,G,J,re){super(H,J,re),this.op=G}render({_n:H}){return`${this.lhs} ${this.op}= ${this.rhs};`+H}}class u extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`${this.label}:`+H}}class c extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`break${this.label?` ${this.label}`:""};`+H}}class d extends s{constructor(H){super(),this.error=H}render({_n:H}){return`throw ${this.error};`+H}get names(){return this.error.names}}class f extends s{constructor(H){super(),this.code=H}render({_n:H}){return`${this.code};`+H}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(H,G){return this.code=$(this.code,H,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(H=[]){super(),this.nodes=H}render(H){return this.nodes.reduce((G,J)=>G+J.render(H),"")}optimizeNodes(){const{nodes:H}=this;let G=H.length;for(;G--;){const J=H[G].optimizeNodes();Array.isArray(J)?H.splice(G,1,...J):J?H[G]=J:H.splice(G,1)}return H.length>0?this:void 0}optimizeNames(H,G){const{nodes:J}=this;let re=J.length;for(;re--;){const ie=J[re];ie.optimizeNames(H,G)||(D(H,ie.names),J.splice(re,1))}return J.length>0?this:void 0}get names(){return this.nodes.reduce((H,G)=>L(H,G.names),{})}}class p extends h{render(H){return"{"+H._n+super.render(H)+"}"+H._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(H,G){super(G),this.condition=H}render(H){let G=`if(${this.condition})`+super.render(H);return this.else&&(G+="else "+this.else.render(H)),G}optimizeNodes(){super.optimizeNodes();const H=this.condition;if(H===!0)return this.nodes;let G=this.else;if(G){const J=G.optimizeNodes();G=this.else=Array.isArray(J)?new g(J):J}if(G)return H===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(O(H),G instanceof y?[G]:G.nodes);if(!(H===!1||!this.nodes.length))return this}optimizeNames(H,G){var J;if(this.else=(J=this.else)===null||J===void 0?void 0:J.optimizeNames(H,G),!!(super.optimizeNames(H,G)||this.else))return this.condition=$(this.condition,H,G),this}get names(){const H=super.names;return R(H,this.condition),this.else&&L(H,this.else.names),H}}y.kind="if";class v extends p{}v.kind="for";class _ extends v{constructor(H){super(),this.iteration=H}render(H){return`for(${this.iteration})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iteration=$(this.iteration,H,G),this}get names(){return L(super.names,this.iteration.names)}}class w extends v{constructor(H,G,J,re){super(),this.varKind=H,this.name=G,this.from=J,this.to=re}render(H){const G=H.es5?n.varKinds.var:this.varKind,{name:J,from:re,to:ie}=this;return`for(${G} ${J}=${re}; ${J}<${ie}; ${J}++)`+super.render(H)}get names(){const H=R(super.names,this.from);return R(H,this.to)}}class x extends v{constructor(H,G,J,re){super(),this.loop=H,this.varKind=G,this.name=J,this.iterable=re}render(H){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iterable=$(this.iterable,H,G),this}get names(){return L(super.names,this.iterable.names)}}class S extends p{constructor(H,G,J){super(),this.name=H,this.args=G,this.async=J}render(H){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(H)}}S.kind="func";class E extends h{render(H){return"return "+super.render(H)}}E.kind="return";class T extends p{render(H){let G="try"+super.render(H);return this.catch&&(G+=this.catch.render(H)),this.finally&&(G+=this.finally.render(H)),G}optimizeNodes(){var H,G;return super.optimizeNodes(),(H=this.catch)===null||H===void 0||H.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(H,G){var J,re;return super.optimizeNames(H,G),(J=this.catch)===null||J===void 0||J.optimizeNames(H,G),(re=this.finally)===null||re===void 0||re.optimizeNames(H,G),this}get names(){const H=super.names;return this.catch&&L(H,this.catch.names),this.finally&&L(H,this.finally.names),H}}class I extends p{constructor(H){super(),this.error=H}render(H){return`catch(${this.error})`+super.render(H)}}I.kind="catch";class k extends p{render(H){return"finally"+super.render(H)}}k.kind="finally";class P{constructor(H,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=H,this._scope=new n.Scope({parent:H}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(H){return this._scope.name(H)}scopeName(H){return this._extScope.name(H)}scopeValue(H,G){const J=this._extScope.value(H,G);return(this._values[J.prefix]||(this._values[J.prefix]=new Set)).add(J),J}getScopeValue(H,G){return this._extScope.getValue(H,G)}scopeRefs(H){return this._extScope.scopeRefs(H,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(H,G,J,re){const ie=this._scope.toName(G);return J!==void 0&&re&&(this._constants[ie.str]=J),this._leafNode(new o(H,ie,J)),ie}const(H,G,J){return this._def(n.varKinds.const,H,G,J)}let(H,G,J){return this._def(n.varKinds.let,H,G,J)}var(H,G,J){return this._def(n.varKinds.var,H,G,J)}assign(H,G,J){return this._leafNode(new a(H,G,J))}add(H,G){return this._leafNode(new l(H,e.operators.ADD,G))}code(H){return typeof H=="function"?H():H!==t.nil&&this._leafNode(new f(H)),this}object(...H){const G=["{"];for(const[J,re]of H)G.length>1&&G.push(","),G.push(J),(J!==re||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,re));return G.push("}"),new t._Code(G)}if(H,G,J){if(this._blockNode(new y(H)),G&&J)this.code(G).else().code(J).endIf();else if(G)this.code(G).endIf();else if(J)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(H){return this._elseNode(new y(H))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(H,G){return this._blockNode(H),G&&this.code(G).endFor(),this}for(H,G){return this._for(new _(H),G)}forRange(H,G,J,re,ie=this.opts.es5?n.varKinds.var:n.varKinds.let){const te=this._scope.toName(H);return this._for(new w(ie,te,G,J),()=>re(te))}forOf(H,G,J,re=n.varKinds.const){const ie=this._scope.toName(H);if(this.opts.es5){const te=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${te}.length`,ae=>{this.var(ie,(0,t._)`${te}[${ae}]`),J(ie)})}return this._for(new x("of",re,ie,G),()=>J(ie))}forIn(H,G,J,re=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(H,(0,t._)`Object.keys(${G})`,J);const ie=this._scope.toName(H);return this._for(new x("in",re,ie,G),()=>J(ie))}endFor(){return this._endBlockNode(v)}label(H){return this._leafNode(new u(H))}break(H){return this._leafNode(new c(H))}return(H){const G=new E;if(this._blockNode(G),this.code(H),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(E)}try(H,G,J){if(!G&&!J)throw new Error('CodeGen: "try" without "catch" and "finally"');const re=new T;if(this._blockNode(re),this.code(H),G){const ie=this.name("e");this._currNode=re.catch=new I(ie),G(ie)}return J&&(this._currNode=re.finally=new k,this.code(J)),this._endBlockNode(I,k)}throw(H){return this._leafNode(new d(H))}block(H,G){return this._blockStarts.push(this._nodes.length),H&&this.code(H).endBlock(G),this}endBlock(H){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const J=this._nodes.length-G;if(J<0||H!==void 0&&J!==H)throw new Error(`CodeGen: wrong number of nodes: ${J} vs ${H} expected`);return this._nodes.length=G,this}func(H,G=t.nil,J,re){return this._blockNode(new S(H,G,J)),re&&this.code(re).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(H=1){for(;H-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(H){return this._currNode.nodes.push(H),this}_blockNode(H){this._currNode.nodes.push(H),this._nodes.push(H)}_endBlockNode(H,G){const J=this._currNode;if(J instanceof H||G&&J instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${H.kind}/${G.kind}`:H.kind}"`)}_elseNode(H){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=H,this}get _root(){return this._nodes[0]}get _currNode(){const H=this._nodes;return H[H.length-1]}set _currNode(H){const G=this._nodes;G[G.length-1]=H}}e.CodeGen=P;function L(j,H){for(const G in H)j[G]=(j[G]||0)+(H[G]||0);return j}function R(j,H){return H instanceof t._CodeOrName?L(j,H.names):j}function $(j,H,G){if(j instanceof t.Name)return J(j);if(!re(j))return j;return new t._Code(j._items.reduce((ie,te)=>(te instanceof t.Name&&(te=J(te)),te instanceof t._Code?ie.push(...te._items):ie.push(te),ie),[]));function J(ie){const te=G[ie.str];return te===void 0||H[ie.str]!==1?ie:(delete H[ie.str],te)}function re(ie){return ie instanceof t._Code&&ie._items.some(te=>te instanceof t.Name&&H[te.str]===1&&G[te.str]!==void 0)}}function D(j,H){for(const G in H)j[G]=(j[G]||0)-(H[G]||0)}function O(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${q(j)}`}e.not=O;const F=z(e.operators.AND);function U(...j){return j.reduce(F)}e.and=U;const V=z(e.operators.OR);function M(...j){return j.reduce(V)}e.or=M;function z(j){return(H,G)=>H===t.nil?G:G===t.nil?H:(0,t._)`${q(H)} ${j} ${q(G)}`}function q(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Mn);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkStrictMode=wt.getErrorPath=wt.Type=wt.useFunc=wt.setEvaluated=wt.evaluatedPropsToName=wt.mergeEvaluated=wt.eachItem=wt.unescapeJsonPointer=wt.escapeJsonPointer=wt.escapeFragment=wt.unescapeFragment=wt.schemaRefOrVal=wt.schemaHasRulesButRef=wt.schemaHasRules=wt.checkUnknownRules=wt.alwaysValidSchema=wt.toHash=void 0;const Wr=Mn,Uht=fI;function Vht(e){const t={};for(const n of e)t[n]=!0;return t}wt.toHash=Vht;function Hht(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(m2e(e,t),!g2e(t,e.self.RULES.all))}wt.alwaysValidSchema=Hht;function m2e(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||b2e(e,`unknown keyword: "${s}"`)}wt.checkUnknownRules=m2e;function g2e(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}wt.schemaHasRules=g2e;function qht(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}wt.schemaHasRulesButRef=qht;function Wht({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Wr._)`${n}`}return(0,Wr._)`${e}${t}${(0,Wr.getProperty)(r)}`}wt.schemaRefOrVal=Wht;function Ght(e){return y2e(decodeURIComponent(e))}wt.unescapeFragment=Ght;function Yht(e){return encodeURIComponent(_Q(e))}wt.escapeFragment=Yht;function _Q(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}wt.escapeJsonPointer=_Q;function y2e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}wt.unescapeJsonPointer=y2e;function Kht(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}wt.eachItem=Kht;function yde({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const l=o===void 0?s:o instanceof Wr.Name?(s instanceof Wr.Name?e(i,s,o):t(i,s,o),o):s instanceof Wr.Name?(t(i,o,s),s):n(s,o);return a===Wr.Name&&!(l instanceof Wr.Name)?r(i,l):l}}wt.mergeEvaluated={props:yde({mergeNames:(e,t,n)=>e.if((0,Wr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Wr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Wr._)`${n} || {}`).code((0,Wr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Wr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Wr._)`${n} || {}`),wQ(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:v2e}),items:yde({mergeNames:(e,t,n)=>e.if((0,Wr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Wr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Wr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Wr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function v2e(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Wr._)`{}`);return t!==void 0&&wQ(e,n,t),n}wt.evaluatedPropsToName=v2e;function wQ(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Wr._)`${t}${(0,Wr.getProperty)(r)}`,!0))}wt.setEvaluated=wQ;const vde={};function Xht(e,t){return e.scopeValue("func",{ref:t,code:vde[t.code]||(vde[t.code]=new Uht._Code(t.code))})}wt.useFunc=Xht;var vV;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(vV||(wt.Type=vV={}));function Qht(e,t,n){if(e instanceof Wr.Name){const r=t===vV.Num;return n?r?(0,Wr._)`"[" + ${e} + "]"`:(0,Wr._)`"['" + ${e} + "']"`:r?(0,Wr._)`"/" + ${e}`:(0,Wr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Wr.getProperty)(e).toString():"/"+_Q(e)}wt.getErrorPath=Qht;function b2e(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}wt.checkStrictMode=b2e;var lp={};Object.defineProperty(lp,"__esModule",{value:!0});const qo=Mn,Jht={data:new qo.Name("data"),valCxt:new qo.Name("valCxt"),instancePath:new qo.Name("instancePath"),parentData:new qo.Name("parentData"),parentDataProperty:new qo.Name("parentDataProperty"),rootData:new qo.Name("rootData"),dynamicAnchors:new qo.Name("dynamicAnchors"),vErrors:new qo.Name("vErrors"),errors:new qo.Name("errors"),this:new qo.Name("this"),self:new qo.Name("self"),scope:new qo.Name("scope"),json:new qo.Name("json"),jsonPos:new qo.Name("jsonPos"),jsonLen:new qo.Name("jsonLen"),jsonPart:new qo.Name("jsonPart")};lp.default=Jht;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Mn,n=wt,r=lp;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,_){const{it:w}=g,{gen:x,compositeRule:S,allErrors:E}=w,T=d(g,y,v);_??(S||E)?l(x,T):u(w,(0,t._)`[${T}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:_}=g,{gen:w,compositeRule:x,allErrors:S}=_,E=d(g,y,v);l(w,E),x||S||u(_,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:_,errsCount:w,it:x}){if(w===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",w,r.default.errors,E=>{g.const(S,(0,t._)`${r.default.vErrors}[${E}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,x.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${x.errSchemaPath}/${y}`),x.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,_))})}e.extendErrors=a;function l(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function u(g,y){const{gen:v,validateName:_,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${_}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function d(g,y,v){const{createErrors:_}=g.it;return _===!1?(0,t._)`{}`:f(g,y,v)}function f(g,y,v={}){const{gen:_,it:w}=g,x=[h(w,v),p(g,v)];return m(g,y,x),_.object(...x)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let w=_?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},_){const{keyword:w,data:x,schemaValue:S,it:E}=g,{opts:T,propertyName:I,topSchemaRef:k,schemaPath:P}=E;_.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),T.messages&&_.push([c.message,typeof v=="function"?v(g):v]),T.verbose&&_.push([c.schema,S],[c.parentSchema,(0,t._)`${k}${P}`],[r.default.data,x]),I&&_.push([c.propertyName,I])}})(sR);Object.defineProperty(Qx,"__esModule",{value:!0});Qx.boolOrEmptySchema=Qx.topBoolOrEmptySchema=void 0;const Zht=sR,ept=Mn,tpt=lp,npt={message:"boolean schema is false"};function rpt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?_2e(e,!1):typeof n=="object"&&n.$async===!0?t.return(tpt.default.data):(t.assign((0,ept._)`${r}.errors`,null),t.return(!0))}Qx.topBoolOrEmptySchema=rpt;function ipt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),_2e(e)):n.var(t,!0)}Qx.boolOrEmptySchema=ipt;function _2e(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Zht.reportError)(i,npt,void 0,t)}var Ss={},ob={};Object.defineProperty(ob,"__esModule",{value:!0});ob.getRules=ob.isJSONType=void 0;const spt=["string","number","integer","boolean","null","object","array"],opt=new Set(spt);function apt(e){return typeof e=="string"&&opt.has(e)}ob.isJSONType=apt;function lpt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}ob.getRules=lpt;var gm={};Object.defineProperty(gm,"__esModule",{value:!0});gm.shouldUseRule=gm.shouldUseGroup=gm.schemaHasRulesForType=void 0;function upt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&w2e(e,r)}gm.schemaHasRulesForType=upt;function w2e(e,t){return t.rules.some(n=>x2e(e,n))}gm.shouldUseGroup=w2e;function x2e(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}gm.shouldUseRule=x2e;Object.defineProperty(Ss,"__esModule",{value:!0});Ss.reportTypeError=Ss.checkDataTypes=Ss.checkDataType=Ss.coerceAndCheckDataType=Ss.getJSONTypes=Ss.getSchemaTypes=Ss.DataType=void 0;const cpt=ob,dpt=gm,fpt=sR,Sn=Mn,E2e=wt;var cx;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(cx||(Ss.DataType=cx={}));function hpt(e){const t=S2e(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Ss.getSchemaTypes=hpt;function S2e(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(cpt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Ss.getJSONTypes=S2e;function ppt(e,t){const{gen:n,data:r,opts:i}=e,s=mpt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,dpt.schemaHasRulesForType)(e,t[0]));if(o){const a=xQ(t,r,i.strictNumbers,cx.Wrong);n.if(a,()=>{s.length?gpt(e,t,s):EQ(e)})}return o}Ss.coerceAndCheckDataType=ppt;const T2e=new Set(["string","number","integer","boolean","null"]);function mpt(e,t){return t?e.filter(n=>T2e.has(n)||t==="array"&&n==="array"):[]}function gpt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,Sn._)`typeof ${i}`),a=r.let("coerced",(0,Sn._)`undefined`);s.coerceTypes==="array"&&r.if((0,Sn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,Sn._)`${i}[0]`).assign(o,(0,Sn._)`typeof ${i}`).if(xQ(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,Sn._)`${a} !== undefined`);for(const u of n)(T2e.has(u)||u==="array"&&s.coerceTypes==="array")&&l(u);r.else(),EQ(e),r.endIf(),r.if((0,Sn._)`${a} !== undefined`,()=>{r.assign(i,a),ypt(e,a)});function l(u){switch(u){case"string":r.elseIf((0,Sn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Sn._)`"" + ${i}`).elseIf((0,Sn._)`${i} === null`).assign(a,(0,Sn._)`""`);return;case"number":r.elseIf((0,Sn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,Sn._)`+${i}`);return;case"integer":r.elseIf((0,Sn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,Sn._)`+${i}`);return;case"boolean":r.elseIf((0,Sn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,Sn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,Sn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,Sn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,Sn._)`[${i}]`)}}}function ypt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,Sn._)`${t} !== undefined`,()=>e.assign((0,Sn._)`${t}[${n}]`,r))}function bV(e,t,n,r=cx.Correct){const i=r===cx.Correct?Sn.operators.EQ:Sn.operators.NEQ;let s;switch(e){case"null":return(0,Sn._)`${t} ${i} null`;case"array":s=(0,Sn._)`Array.isArray(${t})`;break;case"object":s=(0,Sn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,Sn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,Sn._)`typeof ${t} ${i} ${e}`}return r===cx.Correct?s:(0,Sn.not)(s);function o(a=Sn.nil){return(0,Sn.and)((0,Sn._)`typeof ${t} == "number"`,a,n?(0,Sn._)`isFinite(${t})`:Sn.nil)}}Ss.checkDataType=bV;function xQ(e,t,n,r){if(e.length===1)return bV(e[0],t,n,r);let i;const s=(0,E2e.toHash)(e);if(s.array&&s.object){const o=(0,Sn._)`typeof ${t} != "object"`;i=s.null?o:(0,Sn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=Sn.nil;s.number&&delete s.integer;for(const o in s)i=(0,Sn.and)(i,bV(o,t,n,r));return i}Ss.checkDataTypes=xQ;const vpt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,Sn._)`{type: ${e}}`:(0,Sn._)`{type: ${t}}`};function EQ(e){const t=bpt(e);(0,fpt.reportError)(t,vpt)}Ss.reportTypeError=EQ;function bpt(e){const{gen:t,data:n,schema:r}=e,i=(0,E2e.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var A6={};Object.defineProperty(A6,"__esModule",{value:!0});A6.assignDefaults=void 0;const B_=Mn,_pt=wt;function wpt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)bde(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>bde(e,s,i.default))}A6.assignDefaults=wpt;function bde(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,B_._)`${s}${(0,B_.getProperty)(t)}`;if(i){(0,_pt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let l=(0,B_._)`${a} === undefined`;o.useDefaults==="empty"&&(l=(0,B_._)`${l} || ${a} === null || ${a} === ""`),r.if(l,(0,B_._)`${a} = ${(0,B_.stringify)(n)}`)}var yh={},On={};Object.defineProperty(On,"__esModule",{value:!0});On.validateUnion=On.validateArray=On.usePattern=On.callValidateCode=On.schemaProperties=On.allSchemaProperties=On.noPropertyInData=On.propertyInData=On.isOwnProperty=On.hasPropFunc=On.reportMissingProp=On.checkMissingProp=On.checkReportMissingProp=void 0;const ui=Mn,SQ=wt,Ng=lp,xpt=wt;function Ept(e,t){const{gen:n,data:r,it:i}=e;n.if(CQ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ui._)`${t}`},!0),e.error()})}On.checkReportMissingProp=Ept;function Spt({gen:e,data:t,it:{opts:n}},r,i){return(0,ui.or)(...r.map(s=>(0,ui.and)(CQ(e,t,s,n.ownProperties),(0,ui._)`${i} = ${s}`)))}On.checkMissingProp=Spt;function Tpt(e,t){e.setParams({missingProperty:t},!0),e.error()}On.reportMissingProp=Tpt;function C2e(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ui._)`Object.prototype.hasOwnProperty`})}On.hasPropFunc=C2e;function TQ(e,t,n){return(0,ui._)`${C2e(e)}.call(${t}, ${n})`}On.isOwnProperty=TQ;function Cpt(e,t,n,r){const i=(0,ui._)`${t}${(0,ui.getProperty)(n)} !== undefined`;return r?(0,ui._)`${i} && ${TQ(e,t,n)}`:i}On.propertyInData=Cpt;function CQ(e,t,n,r){const i=(0,ui._)`${t}${(0,ui.getProperty)(n)} === undefined`;return r?(0,ui.or)(i,(0,ui.not)(TQ(e,t,n))):i}On.noPropertyInData=CQ;function A2e(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}On.allSchemaProperties=A2e;function Apt(e,t){return A2e(t).filter(n=>!(0,SQ.alwaysValidSchema)(e,t[n]))}On.schemaProperties=Apt;function Ipt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,l,u){const c=u?(0,ui._)`${e}, ${t}, ${r}${i}`:t,d=[[Ng.default.instancePath,(0,ui.strConcat)(Ng.default.instancePath,s)],[Ng.default.parentData,o.parentData],[Ng.default.parentDataProperty,o.parentDataProperty],[Ng.default.rootData,Ng.default.rootData]];o.opts.dynamicRef&&d.push([Ng.default.dynamicAnchors,Ng.default.dynamicAnchors]);const f=(0,ui._)`${c}, ${n.object(...d)}`;return l!==ui.nil?(0,ui._)`${a}.call(${l}, ${f})`:(0,ui._)`${a}(${f})`}On.callValidateCode=Ipt;const kpt=(0,ui._)`new RegExp`;function Rpt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,ui._)`${i.code==="new RegExp"?kpt:(0,xpt.useFunc)(e,i)}(${n}, ${r})`})}On.usePattern=Rpt;function Ppt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const l=t.const("len",(0,ui._)`${n}.length`);t.forRange("i",0,l,u=>{e.subschema({keyword:r,dataProp:u,dataPropType:SQ.Type.Num},s),t.if((0,ui.not)(s),a)})}}On.validateArray=Ppt;function Npt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(l=>(0,SQ.alwaysValidSchema)(i,l))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((l,u)=>{const c=e.subschema({keyword:r,schemaProp:u,compositeRule:!0},a);t.assign(o,(0,ui._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,ui.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}On.validateUnion=Npt;Object.defineProperty(yh,"__esModule",{value:!0});yh.validateKeywordUsage=yh.validSchemaType=yh.funcKeywordCode=yh.macroKeywordCode=void 0;const Oa=Mn,l1=lp,Opt=On,Dpt=sR;function Mpt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),l=I2e(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const u=n.name("valid");e.subschema({schema:a,schemaPath:Oa.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:l,compositeRule:!0},u),e.pass(u,()=>e.error(!0))}yh.macroKeywordCode=Mpt;function $pt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:l}=e;Fpt(l,t);const u=!a&&t.compile?t.compile.call(l.self,s,o,l):t.validate,c=I2e(r,i,u),d=r.let("valid");e.block$data(d,f),e.ok((n=t.valid)!==null&&n!==void 0?n:d);function f(){if(t.errors===!1)m(),t.modifying&&_de(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&_de(e),g(()=>Lpt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Oa._)`await `),v=>r.assign(d,!1).if((0,Oa._)`${v} instanceof ${l.ValidationError}`,()=>r.assign(y,(0,Oa._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Oa._)`${c}.errors`;return r.assign(y,null),m(Oa.nil),y}function m(y=t.async?(0,Oa._)`await `:Oa.nil){const v=l.opts.passContext?l1.default.this:l1.default.self,_=!("compile"in t&&!a||t.schema===!1);r.assign(d,(0,Oa._)`${y}${(0,Opt.callValidateCode)(e,c,v,_)}`,t.modifying)}function g(y){var v;r.if((0,Oa.not)((v=t.valid)!==null&&v!==void 0?v:d),y)}}yh.funcKeywordCode=$pt;function _de(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Oa._)`${r.parentData}[${r.parentDataProperty}]`))}function Lpt(e,t){const{gen:n}=e;n.if((0,Oa._)`Array.isArray(${t})`,()=>{n.assign(l1.default.vErrors,(0,Oa._)`${l1.default.vErrors} === null ? ${t} : ${l1.default.vErrors}.concat(${t})`).assign(l1.default.errors,(0,Oa._)`${l1.default.vErrors}.length`),(0,Dpt.extendErrors)(e)},()=>e.error())}function Fpt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function I2e(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Oa.stringify)(n)})}function jpt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}yh.validSchemaType=jpt;function Bpt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const l=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(l);else throw new Error(l)}}yh.validateKeywordUsage=Bpt;var j0={};Object.defineProperty(j0,"__esModule",{value:!0});j0.extendSubschemaMode=j0.extendSubschemaData=j0.getSubschema=void 0;const ah=Mn,k2e=wt;function zpt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,ah._)`${e.schemaPath}${(0,ah.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,ah._)`${e.schemaPath}${(0,ah.getProperty)(t)}${(0,ah.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,k2e.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}j0.getSubschema=zpt;function Upt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:u,dataPathArr:c,opts:d}=t,f=a.let("data",(0,ah._)`${t.data}${(0,ah.getProperty)(n)}`,!0);l(f),e.errorPath=(0,ah.str)`${u}${(0,k2e.getErrorPath)(n,r,d.jsPropertySyntax)}`,e.parentDataProperty=(0,ah._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const u=i instanceof ah.Name?i:a.let("data",i,!0);l(u),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function l(u){e.data=u,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,u]}}j0.extendSubschemaData=Upt;function Vpt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}j0.extendSubschemaMode=Vpt;var bo={},AQ=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const $C=rl(AQ);var R2e={exports:{}},m0=R2e.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};fD(t,r,i,e,"",e)};m0.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};m0.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};m0.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};m0.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function fD(e,t,n,r,i,s,o,a,l,u){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,l,u);for(var c in r){var d=r[c];if(Array.isArray(d)){if(c in m0.arrayKeywords)for(var f=0;f<d.length;f++)fD(e,t,n,d[f],i+"/"+c+"/"+f,s,i,c,r,f)}else if(c in m0.propsKeywords){if(d&&typeof d=="object")for(var h in d)fD(e,t,n,d[h],i+"/"+c+"/"+Hpt(h),s,i,c,r,h)}else(c in m0.keywords||e.allKeys&&!(c in m0.skipKeywords))&&fD(e,t,n,d,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,l,u)}}function Hpt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var qpt=R2e.exports;Object.defineProperty(bo,"__esModule",{value:!0});bo.getSchemaRefs=bo.resolveUrl=bo.normalizeId=bo._getFullPath=bo.getFullPath=bo.inlineRef=void 0;const Wpt=wt,Gpt=AQ,Ypt=qpt,Kpt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Xpt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!_V(e):t?P2e(e)<=t:!1}bo.inlineRef=Xpt;const Qpt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function _V(e){for(const t in e){if(Qpt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(_V)||typeof n=="object"&&_V(n))return!0}return!1}function P2e(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!Kpt.has(n)&&(typeof e[n]=="object"&&(0,Wpt.eachItem)(e[n],r=>t+=P2e(r)),t===1/0))return 1/0}return t}function N2e(e,t="",n){n!==!1&&(t=dx(t));const r=e.parse(t);return O2e(e,r)}bo.getFullPath=N2e;function O2e(e,t){return e.serialize(t).split("#")[0]+"#"}bo._getFullPath=O2e;const Jpt=/#\/?$/;function dx(e){return e?e.replace(Jpt,""):""}bo.normalizeId=dx;function Zpt(e,t,n){return n=dx(n),e.resolve(t,n)}bo.resolveUrl=Zpt;const emt=/^[a-z_][-a-z0-9._]*$/i;function tmt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=dx(e[n]||t),s={"":i},o=N2e(r,i,!1),a={},l=new Set;return Ypt(e,{allKeys:!0},(d,f,h,p)=>{if(p===void 0)return;const m=o+f;let g=s[p];typeof d[n]=="string"&&(g=y.call(this,d[n])),v.call(this,d.$anchor),v.call(this,d.$dynamicAnchor),s[f]=g;function y(_){const w=this.opts.uriResolver.resolve;if(_=dx(g?w(g,_):_),l.has(_))throw c(_);l.add(_);let x=this.refs[_];return typeof x=="string"&&(x=this.refs[x]),typeof x=="object"?u(d,x.schema,_):_!==dx(m)&&(_[0]==="#"?(u(d,a[_],_),a[_]=d):this.refs[_]=m),_}function v(_){if(typeof _=="string"){if(!emt.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function u(d,f,h){if(f!==void 0&&!Gpt(d,f))throw c(h)}function c(d){return new Error(`reference "${d}" resolves to more than one schema`)}}bo.getSchemaRefs=tmt;Object.defineProperty(Gd,"__esModule",{value:!0});Gd.getData=Gd.KeywordCxt=Gd.validateFunctionCode=void 0;const D2e=Qx,wde=Ss,IQ=gm,d$=Ss,nmt=A6,Z2=yh,wB=j0,Ot=Mn,ln=lp,rmt=bo,ym=wt,BT=sR;function imt(e){if(L2e(e)&&(F2e(e),$2e(e))){amt(e);return}M2e(e,()=>(0,D2e.topBoolOrEmptySchema)(e))}Gd.validateFunctionCode=imt;function M2e({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Ot._)`${ln.default.data}, ${ln.default.valCxt}`,r.$async,()=>{e.code((0,Ot._)`"use strict"; ${xde(n,i)}`),omt(e,i),e.code(s)}):e.func(t,(0,Ot._)`${ln.default.data}, ${smt(i)}`,r.$async,()=>e.code(xde(n,i)).code(s))}function smt(e){return(0,Ot._)`{${ln.default.instancePath}="", ${ln.default.parentData}, ${ln.default.parentDataProperty}, ${ln.default.rootData}=${ln.default.data}${e.dynamicRef?(0,Ot._)`, ${ln.default.dynamicAnchors}={}`:Ot.nil}}={}`}function omt(e,t){e.if(ln.default.valCxt,()=>{e.var(ln.default.instancePath,(0,Ot._)`${ln.default.valCxt}.${ln.default.instancePath}`),e.var(ln.default.parentData,(0,Ot._)`${ln.default.valCxt}.${ln.default.parentData}`),e.var(ln.default.parentDataProperty,(0,Ot._)`${ln.default.valCxt}.${ln.default.parentDataProperty}`),e.var(ln.default.rootData,(0,Ot._)`${ln.default.valCxt}.${ln.default.rootData}`),t.dynamicRef&&e.var(ln.default.dynamicAnchors,(0,Ot._)`${ln.default.valCxt}.${ln.default.dynamicAnchors}`)},()=>{e.var(ln.default.instancePath,(0,Ot._)`""`),e.var(ln.default.parentData,(0,Ot._)`undefined`),e.var(ln.default.parentDataProperty,(0,Ot._)`undefined`),e.var(ln.default.rootData,ln.default.data),t.dynamicRef&&e.var(ln.default.dynamicAnchors,(0,Ot._)`{}`)})}function amt(e){const{schema:t,opts:n,gen:r}=e;M2e(e,()=>{n.$comment&&t.$comment&&B2e(e),fmt(e),r.let(ln.default.vErrors,null),r.let(ln.default.errors,0),n.unevaluated&&lmt(e),j2e(e),mmt(e)})}function lmt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Ot._)`${n}.evaluated`),t.if((0,Ot._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Ot._)`${e.evaluated}.props`,(0,Ot._)`undefined`)),t.if((0,Ot._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Ot._)`${e.evaluated}.items`,(0,Ot._)`undefined`))}function xde(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Ot._)`/*# sourceURL=${n} */`:Ot.nil}function umt(e,t){if(L2e(e)&&(F2e(e),$2e(e))){cmt(e,t);return}(0,D2e.boolOrEmptySchema)(e,t)}function $2e({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function L2e(e){return typeof e.schema!="boolean"}function cmt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&B2e(e),hmt(e),pmt(e);const s=r.const("_errs",ln.default.errors);j2e(e,s),r.var(t,(0,Ot._)`${s} === ${ln.default.errors}`)}function F2e(e){(0,ym.checkUnknownRules)(e),dmt(e)}function j2e(e,t){if(e.opts.jtd)return Ede(e,[],!1,t);const n=(0,wde.getSchemaTypes)(e.schema),r=(0,wde.coerceAndCheckDataType)(e,n);Ede(e,n,!r,t)}function dmt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,ym.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function fmt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,ym.checkStrictMode)(e,"default is ignored in the schema root")}function hmt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,rmt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function pmt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function B2e({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Ot._)`${ln.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Ot.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Ot._)`${ln.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function mmt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Ot._)`${ln.default.errors} === 0`,()=>t.return(ln.default.data),()=>t.throw((0,Ot._)`new ${i}(${ln.default.vErrors})`)):(t.assign((0,Ot._)`${r}.errors`,ln.default.vErrors),s.unevaluated&&gmt(e),t.return((0,Ot._)`${ln.default.errors} === 0`))}function gmt({gen:e,evaluated:t,props:n,items:r}){n instanceof Ot.Name&&e.assign((0,Ot._)`${t}.props`,n),r instanceof Ot.Name&&e.assign((0,Ot._)`${t}.items`,r)}function Ede(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:l,self:u}=e,{RULES:c}=u;if(s.$ref&&(l.ignoreKeywordsWithRef||!(0,ym.schemaHasRulesButRef)(s,c))){i.block(()=>V2e(e,"$ref",c.all.$ref.definition));return}l.jtd||ymt(e,t),i.block(()=>{for(const f of c.rules)d(f);d(c.post)});function d(f){(0,IQ.shouldUseGroup)(s,f)&&(f.type?(i.if((0,d$.checkDataType)(f.type,o,l.strictNumbers)),Sde(e,f),t.length===1&&t[0]===f.type&&n&&(i.else(),(0,d$.reportTypeError)(e)),i.endIf()):Sde(e,f),a||i.if((0,Ot._)`${ln.default.errors} === ${r||0}`))}}function Sde(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,nmt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,IQ.shouldUseRule)(r,s)&&V2e(e,s.keyword,s.definition,t.type)})}function ymt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(vmt(e,t),e.opts.allowUnionTypes||bmt(e,t),_mt(e,e.dataTypes))}function vmt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{z2e(e.dataTypes,n)||kQ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),xmt(e,t)}}function bmt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&kQ(e,"use allowUnionTypes to allow union type keyword")}function _mt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,IQ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>wmt(t,o))&&kQ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function wmt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function z2e(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function xmt(e,t){const n=[];for(const r of e.dataTypes)z2e(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function kQ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,ym.checkStrictMode)(e,t,e.opts.strictTypes)}class U2e{constructor(t,n,r){if((0,Z2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ym.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",H2e(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Z2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",ln.default.errors))}result(t,n,r){this.failResult((0,Ot.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Ot.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Ot._)`${n} !== undefined && (${(0,Ot.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?BT.reportExtraError:BT.reportError)(this,this.def.error,n)}$dataError(){(0,BT.reportError)(this,this.def.$dataError||BT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,BT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Ot.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Ot.nil,n=Ot.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Ot.or)((0,Ot._)`${i} === undefined`,n)),t!==Ot.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Ot.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Ot.or)(o(),a());function o(){if(r.length){if(!(n instanceof Ot.Name))throw new Error("ajv implementation error");const l=Array.isArray(r)?r:[r];return(0,Ot._)`${(0,d$.checkDataTypes)(l,n,s.opts.strictNumbers,d$.DataType.Wrong)}`}return Ot.nil}function a(){if(i.validateSchema){const l=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Ot._)`!${l}(${n})`}return Ot.nil}}subschema(t,n){const r=(0,wB.getSubschema)(this.it,t);(0,wB.extendSubschemaData)(r,this.it,t),(0,wB.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return umt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=ym.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=ym.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Ot.Name)),!0}}Gd.KeywordCxt=U2e;function V2e(e,t,n,r){const i=new U2e(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,Z2.funcKeywordCode)(i,n):"macro"in n?(0,Z2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,Z2.funcKeywordCode)(i,n)}const Emt=/^\/(?:[^~]|~0|~1)*$/,Smt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function H2e(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return ln.default.rootData;if(e[0]==="/"){if(!Emt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=ln.default.rootData}else{const u=Smt.exec(e);if(!u)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+u[1];if(i=u[2],i==="#"){if(c>=t)throw new Error(l("property/index",c));return r[t-c]}if(c>t)throw new Error(l("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const u of a)u&&(s=(0,Ot._)`${s}${(0,Ot.getProperty)((0,ym.unescapeJsonPointer)(u))}`,o=(0,Ot._)`${o} && ${s}`);return o;function l(u,c){return`Cannot access ${u} ${c} levels up, current level is ${t}`}}Gd.getData=H2e;var oR={};Object.defineProperty(oR,"__esModule",{value:!0});class Tmt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}oR.default=Tmt;var wS={};Object.defineProperty(wS,"__esModule",{value:!0});const xB=bo;class Cmt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,xB.resolveUrl)(t,n,r),this.missingSchema=(0,xB.normalizeId)((0,xB.getFullPath)(t,this.missingRef))}}wS.default=Cmt;var kl={};Object.defineProperty(kl,"__esModule",{value:!0});kl.resolveSchema=kl.getCompilingSchema=kl.resolveRef=kl.compileSchema=kl.SchemaEnv=void 0;const ud=Mn,Amt=oR,kv=lp,kd=bo,Tde=wt,Imt=Gd;class I6{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,kd.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}kl.SchemaEnv=I6;function RQ(e){const t=q2e.call(this,e);if(t)return t;const n=(0,kd.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new ud.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:Amt.default,code:(0,ud._)`require("ajv/dist/runtime/validation_error").default`}));const l=o.scopeName("validate");e.validateName=l;const u={gen:o,allErrors:this.opts.allErrors,data:kv.default.data,parentData:kv.default.parentData,parentDataProperty:kv.default.parentDataProperty,dataNames:[kv.default.data],dataPathArr:[ud.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,ud.stringify)(e.schema)}:{ref:e.schema}),validateName:l,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:ud.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ud._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,Imt.validateFunctionCode)(u),o.optimize(this.opts.code.optimize);const d=o.toString();c=`${o.scopeRefs(kv.default.scope)}return ${d}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${kv.default.self}`,`${kv.default.scope}`,c)(this,this.scope.get());if(this.scope.value(l,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:l,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=u;h.evaluated={props:p instanceof ud.Name?void 0:p,items:m instanceof ud.Name?void 0:m,dynamicProps:p instanceof ud.Name,dynamicItems:m instanceof ud.Name},h.source&&(h.source.evaluated=(0,ud.stringify)(h.evaluated))}return e.validate=h,e}catch(d){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),d}finally{this._compilations.delete(e)}}kl.compileSchema=RQ;function kmt(e,t,n){var r;n=(0,kd.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=Nmt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new I6({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=Rmt.call(this,s)}kl.resolveRef=kmt;function Rmt(e){return(0,kd.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:RQ.call(this,e)}function q2e(e){for(const t of this._compilations)if(Pmt(t,e))return t}kl.getCompilingSchema=q2e;function Pmt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Nmt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||k6.call(this,e,t)}function k6(e,t){const n=this.opts.uriResolver.parse(t),r=(0,kd._getFullPath)(this.opts.uriResolver,n);let i=(0,kd.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return EB.call(this,n,e);const s=(0,kd.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=k6.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:EB.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||RQ.call(this,o),s===(0,kd.normalizeId)(t)){const{schema:a}=o,{schemaId:l}=this.opts,u=a[l];return u&&(i=(0,kd.resolveUrl)(this.opts.uriResolver,i,u)),new I6({schema:a,schemaId:l,root:e,baseId:i})}return EB.call(this,n,o)}}kl.resolveSchema=k6;const Omt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function EB(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const l=n[(0,Tde.unescapeFragment)(a)];if(l===void 0)return;n=l;const u=typeof n=="object"&&n[this.opts.schemaId];!Omt.has(a)&&u&&(t=(0,kd.resolveUrl)(this.opts.uriResolver,t,u))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,Tde.schemaHasRulesButRef)(n,this.RULES)){const a=(0,kd.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=k6.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new I6({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const Dmt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Mmt="Meta-schema for $data reference (JSON AnySchema extension proposal)",$mt="object",Lmt=["$data"],Fmt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},jmt=!1,Bmt={$id:Dmt,description:Mmt,type:$mt,required:Lmt,properties:Fmt,additionalProperties:jmt};var PQ={},R6={exports:{}};const zmt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};var Umt={HEX:zmt};const{HEX:Vmt}=Umt;function W2e(e){if(Y2e(e,".")<3)return{host:e,isIPV4:!1};const t=e.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[n]=t;return n?{host:qmt(n,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function wV(e,t=!1){let n="",r=!0;for(const i of e){if(Vmt[i]===void 0)return;i!=="0"&&r===!0&&(r=!1),r||(n+=i)}return t&&n.length===0&&(n="0"),n}function Hmt(e){let t=0;const n={error:!1,address:"",zone:""},r=[],i=[];let s=!1,o=!1,a=!1;function l(){if(i.length){if(s===!1){const u=wV(i);if(u!==void 0)r.push(u);else return n.error=!0,!1}i.length=0}return!0}for(let u=0;u<e.length;u++){const c=e[u];if(!(c==="["||c==="]"))if(c===":"){if(o===!0&&(a=!0),!l())break;if(t++,r.push(":"),t>7){n.error=!0;break}u-1>=0&&e[u-1]===":"&&(o=!0);continue}else if(c==="%"){if(!l())break;s=!0}else{i.push(c);continue}}return i.length&&(s?n.zone=i.join(""):a?r.push(i.join("")):r.push(wV(i))),n.address=r.join(""),n}function G2e(e,t={}){if(Y2e(e,":")<2)return{host:e,isIPV6:!1};const n=Hmt(e);if(n.error)return{host:e,isIPV6:!1};{let r=n.address,i=n.address;return n.zone&&(r+="%"+n.zone,i+="%25"+n.zone),{host:r,escapedHost:i,isIPV6:!0}}}function qmt(e,t){let n="",r=!0;const i=e.length;for(let s=0;s<i;s++){const o=e[s];o==="0"&&r?(s+1<=i&&e[s+1]===t||s+1===i)&&(n+=o,r=!1):(o===t?r=!0:r=!1,n+=o)}return n}function Y2e(e,t){let n=0;for(let r=0;r<e.length;r++)e[r]===t&&n++;return n}const Cde=/^\.\.?\//u,Ade=/^\/\.(?:\/|$)/u,Ide=/^\/\.\.(?:\/|$)/u,Wmt=/^\/?(?:.|\n)*?(?=\/|$)/u;function Gmt(e){const t=[];for(;e.length;)if(e.match(Cde))e=e.replace(Cde,"");else if(e.match(Ade))e=e.replace(Ade,"/");else if(e.match(Ide))e=e.replace(Ide,"/"),t.pop();else if(e==="."||e==="..")e="";else{const n=e.match(Wmt);if(n){const r=n[0];e=e.slice(r.length),t.push(r)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function Ymt(e,t){const n=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=n(e.scheme)),e.userinfo!==void 0&&(e.userinfo=n(e.userinfo)),e.host!==void 0&&(e.host=n(e.host)),e.path!==void 0&&(e.path=n(e.path)),e.query!==void 0&&(e.query=n(e.query)),e.fragment!==void 0&&(e.fragment=n(e.fragment)),e}function Kmt(e,t){const n=[];if(e.userinfo!==void 0&&(n.push(e.userinfo),n.push("@")),e.host!==void 0){let r=unescape(e.host);const i=W2e(r);if(i.isIPV4)r=i.host;else{const s=G2e(i.host,{isIPV4:!1});s.isIPV6===!0?r=`[${s.escapedHost}]`:r=e.host}n.push(r)}return(typeof e.port=="number"||typeof e.port=="string")&&(n.push(":"),n.push(String(e.port))),n.length?n.join(""):void 0}var Xmt={recomposeAuthority:Kmt,normalizeComponentEncoding:Ymt,removeDotSegments:Gmt,normalizeIPv4:W2e,normalizeIPv6:G2e,stringArrayToHexStripped:wV};const Qmt=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,Jmt=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function K2e(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function X2e(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function Q2e(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function Zmt(e){return e.secure=K2e(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function egt(e){if((e.port===(K2e(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,n]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=n,e.resourceName=void 0}return e.fragment=void 0,e}function tgt(e,t){if(!e.path)return e.error="URN can not be parsed",e;const n=e.path.match(Jmt);if(n){const r=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];const i=`${r}:${t.nid||e.nid}`,s=NQ[i];e.path=void 0,s&&(e=s.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function ngt(e,t){const n=t.scheme||e.scheme||"urn",r=e.nid.toLowerCase(),i=`${n}:${t.nid||r}`,s=NQ[i];s&&(e=s.serialize(e,t));const o=e,a=e.nss;return o.path=`${r||t.nid}:${a}`,t.skipEscape=!0,o}function rgt(e,t){const n=e;return n.uuid=n.nss,n.nss=void 0,!t.tolerant&&(!n.uuid||!Qmt.test(n.uuid))&&(n.error=n.error||"UUID is not valid."),n}function igt(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const J2e={scheme:"http",domainHost:!0,parse:X2e,serialize:Q2e},sgt={scheme:"https",domainHost:J2e.domainHost,parse:X2e,serialize:Q2e},hD={scheme:"ws",domainHost:!0,parse:Zmt,serialize:egt},ogt={scheme:"wss",domainHost:hD.domainHost,parse:hD.parse,serialize:hD.serialize},agt={scheme:"urn",parse:tgt,serialize:ngt,skipNormalize:!0},lgt={scheme:"urn:uuid",parse:rgt,serialize:igt,skipNormalize:!0},NQ={http:J2e,https:sgt,ws:hD,wss:ogt,urn:agt,"urn:uuid":lgt};var ugt=NQ;const{normalizeIPv6:cgt,normalizeIPv4:dgt,removeDotSegments:LC,recomposeAuthority:fgt,normalizeComponentEncoding:wN}=Xmt,OQ=ugt;function hgt(e,t){return typeof e=="string"?e=vh(Fm(e,t),t):typeof e=="object"&&(e=Fm(vh(e,t),t)),e}function pgt(e,t,n){const r=Object.assign({scheme:"null"},n),i=Z2e(Fm(e,r),Fm(t,r),r,!0);return vh(i,{...r,skipEscape:!0})}function Z2e(e,t,n,r){const i={};return r||(e=Fm(vh(e,n),n),t=Fm(vh(t,n),n)),n=n||{},!n.tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=LC(t.path||""),i.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=LC(t.path||""),i.query=t.query):(t.path?(t.path.charAt(0)==="/"?i.path=LC(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?i.path="/"+t.path:e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path,i.path=LC(i.path)),i.query=t.query):(i.path=e.path,t.query!==void 0?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function mgt(e,t,n){return typeof e=="string"?(e=unescape(e),e=vh(wN(Fm(e,n),!0),{...n,skipEscape:!0})):typeof e=="object"&&(e=vh(wN(e,!0),{...n,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=vh(wN(Fm(t,n),!0),{...n,skipEscape:!0})):typeof t=="object"&&(t=vh(wN(t,!0),{...n,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function vh(e,t){const n={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},r=Object.assign({},t),i=[],s=OQ[(r.scheme||n.scheme||"").toLowerCase()];s&&s.serialize&&s.serialize(n,r),n.path!==void 0&&(r.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),n.scheme!==void 0&&(n.path=n.path.split("%3A").join(":")))),r.reference!=="suffix"&&n.scheme&&(i.push(n.scheme),i.push(":"));const o=fgt(n,r);if(o!==void 0&&(r.reference!=="suffix"&&i.push("//"),i.push(o),n.path&&n.path.charAt(0)!=="/"&&i.push("/")),n.path!==void 0){let a=n.path;!r.absolutePath&&(!s||!s.absolutePath)&&(a=LC(a)),o===void 0&&(a=a.replace(/^\/\//u,"/%2F")),i.push(a)}return n.query!==void 0&&(i.push("?"),i.push(n.query)),n.fragment!==void 0&&(i.push("#"),i.push(n.fragment)),i.join("")}const ggt=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function ygt(e){let t=0;for(let n=0,r=e.length;n<r;++n)if(t=e.charCodeAt(n),t>126||ggt[t])return!0;return!1}const vgt=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Fm(e,t){const n=Object.assign({},t),r={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},i=e.indexOf("%")!==-1;let s=!1;n.reference==="suffix"&&(e=(n.scheme?n.scheme+":":"")+"//"+e);const o=e.match(vgt);if(o){if(r.scheme=o[1],r.userinfo=o[3],r.host=o[4],r.port=parseInt(o[5],10),r.path=o[6]||"",r.query=o[7],r.fragment=o[8],isNaN(r.port)&&(r.port=o[5]),r.host){const l=dgt(r.host);if(l.isIPV4===!1){const u=cgt(l.host,{isIPV4:!1});r.host=u.host.toLowerCase(),s=u.isIPV6}else r.host=l.host,s=!0}r.scheme===void 0&&r.userinfo===void 0&&r.host===void 0&&r.port===void 0&&!r.path&&r.query===void 0?r.reference="same-document":r.scheme===void 0?r.reference="relative":r.fragment===void 0?r.reference="absolute":r.reference="uri",n.reference&&n.reference!=="suffix"&&n.reference!==r.reference&&(r.error=r.error||"URI is not a "+n.reference+" reference.");const a=OQ[(n.scheme||r.scheme||"").toLowerCase()];if(!n.unicodeSupport&&(!a||!a.unicodeSupport)&&r.host&&(n.domainHost||a&&a.domainHost)&&s===!1&&ygt(r.host))try{r.host=URL.domainToASCII(r.host.toLowerCase())}catch(l){r.error=r.error||"Host's domain name can not be converted to ASCII: "+l}(!a||a&&!a.skipNormalize)&&(i&&r.scheme!==void 0&&(r.scheme=unescape(r.scheme)),i&&r.userinfo!==void 0&&(r.userinfo=unescape(r.userinfo)),i&&r.host!==void 0&&(r.host=unescape(r.host)),r.path!==void 0&&r.path.length&&(r.path=escape(unescape(r.path))),r.fragment!==void 0&&r.fragment.length&&(r.fragment=encodeURI(decodeURIComponent(r.fragment)))),a&&a.parse&&a.parse(r,n)}else r.error=r.error||"URI can not be parsed.";return r}const DQ={SCHEMES:OQ,normalize:hgt,resolve:pgt,resolveComponents:Z2e,equal:mgt,serialize:vh,parse:Fm};R6.exports=DQ;R6.exports.default=DQ;R6.exports.fastUri=DQ;var bgt=R6.exports;Object.defineProperty(PQ,"__esModule",{value:!0});const eAe=bgt;eAe.code='require("ajv/dist/runtime/uri").default';PQ.default=eAe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Gd;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Mn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=oR,i=wS,s=ob,o=kl,a=Mn,l=bo,u=Ss,c=wt,d=Bmt,f=PQ,h=(M,z)=>new RegExp(M,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(M){var z,q,j,H,G,J,re,ie,te,ae,_e,ce,ze,Oe,$e,Ne,pe,ue,Se,De,at,He,le,Ie,Ye;const fe=M.strict,Te=(z=M.code)===null||z===void 0?void 0:z.optimize,Ve=Te===!0||Te===void 0?1:Te||0,et=(j=(q=M.code)===null||q===void 0?void 0:q.regExp)!==null&&j!==void 0?j:h,St=(H=M.uriResolver)!==null&&H!==void 0?H:f.default;return{strictSchema:(J=(G=M.strictSchema)!==null&&G!==void 0?G:fe)!==null&&J!==void 0?J:!0,strictNumbers:(ie=(re=M.strictNumbers)!==null&&re!==void 0?re:fe)!==null&&ie!==void 0?ie:!0,strictTypes:(ae=(te=M.strictTypes)!==null&&te!==void 0?te:fe)!==null&&ae!==void 0?ae:"log",strictTuples:(ce=(_e=M.strictTuples)!==null&&_e!==void 0?_e:fe)!==null&&ce!==void 0?ce:"log",strictRequired:(Oe=(ze=M.strictRequired)!==null&&ze!==void 0?ze:fe)!==null&&Oe!==void 0?Oe:!1,code:M.code?{...M.code,optimize:Ve,regExp:et}:{optimize:Ve,regExp:et},loopRequired:($e=M.loopRequired)!==null&&$e!==void 0?$e:v,loopEnum:(Ne=M.loopEnum)!==null&&Ne!==void 0?Ne:v,meta:(pe=M.meta)!==null&&pe!==void 0?pe:!0,messages:(ue=M.messages)!==null&&ue!==void 0?ue:!0,inlineRefs:(Se=M.inlineRefs)!==null&&Se!==void 0?Se:!0,schemaId:(De=M.schemaId)!==null&&De!==void 0?De:"$id",addUsedSchema:(at=M.addUsedSchema)!==null&&at!==void 0?at:!0,validateSchema:(He=M.validateSchema)!==null&&He!==void 0?He:!0,validateFormats:(le=M.validateFormats)!==null&&le!==void 0?le:!0,unicodeRegExp:(Ie=M.unicodeRegExp)!==null&&Ie!==void 0?Ie:!0,int32range:(Ye=M.int32range)!==null&&Ye!==void 0?Ye:!0,uriResolver:St}}class w{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,..._(z)};const{es5:q,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:q,lines:j}),this.logger=L(z.logger);const H=z.validateFormats;z.validateFormats=!1,this.RULES=(0,s.getRules)(),x.call(this,g,z,"NOT SUPPORTED"),x.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=k.call(this),z.formats&&T.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&I.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),E.call(this),z.validateFormats=H}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:q,schemaId:j}=this.opts;let H=d;j==="id"&&(H={...d},H.id=H.$id,delete H.$id),q&&z&&this.addMetaSchema(H,H[j],!1)}defaultMeta(){const{meta:z,schemaId:q}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[q]||z:void 0}validate(z,q){let j;if(typeof z=="string"){if(j=this.getSchema(z),!j)throw new Error(`no schema with key or ref "${z}"`)}else j=this.compile(z);const H=j(q);return"$async"in j||(this.errors=j.errors),H}compile(z,q){const j=this._addSchema(z,q);return j.validate||this._compileSchemaEnv(j)}compileAsync(z,q){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return H.call(this,z,q);async function H(ae,_e){await G.call(this,ae.$schema);const ce=this._addSchema(ae,_e);return ce.validate||J.call(this,ce)}async function G(ae){ae&&!this.getSchema(ae)&&await H.call(this,{$ref:ae},!0)}async function J(ae){try{return this._compileSchemaEnv(ae)}catch(_e){if(!(_e instanceof i.default))throw _e;return re.call(this,_e),await ie.call(this,_e.missingSchema),J.call(this,ae)}}function re({missingSchema:ae,missingRef:_e}){if(this.refs[ae])throw new Error(`AnySchema ${ae} is loaded but ${_e} cannot be resolved`)}async function ie(ae){const _e=await te.call(this,ae);this.refs[ae]||await G.call(this,_e.$schema),this.refs[ae]||this.addSchema(_e,ae,q)}async function te(ae){const _e=this._loading[ae];if(_e)return _e;try{return await(this._loading[ae]=j(ae))}finally{delete this._loading[ae]}}}addSchema(z,q,j,H=this.opts.validateSchema){if(Array.isArray(z)){for(const J of z)this.addSchema(J,void 0,j,H);return this}let G;if(typeof z=="object"){const{schemaId:J}=this.opts;if(G=z[J],G!==void 0&&typeof G!="string")throw new Error(`schema ${J} must be string`)}return q=(0,l.normalizeId)(q||G),this._checkUnique(q),this.schemas[q]=this._addSchema(z,j,q,H,!0),this}addMetaSchema(z,q,j=this.opts.validateSchema){return this.addSchema(z,q,!0,j),this}validateSchema(z,q){if(typeof z=="boolean")return!0;let j;if(j=z.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const H=this.validate(j,z);if(!H&&q){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return H}getSchema(z){let q;for(;typeof(q=S.call(this,z))=="string";)z=q;if(q===void 0){const{schemaId:j}=this.opts,H=new o.SchemaEnv({schema:{},schemaId:j});if(q=o.resolveSchema.call(this,H,z),!q)return;this.refs[z]=q}return q.validate||this._compileSchemaEnv(q)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const q=S.call(this,z);return typeof q=="object"&&this._cache.delete(q.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const q=z;this._cache.delete(q);let j=z[this.opts.schemaId];return j&&(j=(0,l.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const q of z)this.addKeyword(q);return this}addKeyword(z,q){let j;if(typeof z=="string")j=z,typeof q=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),q.keyword=j);else if(typeof z=="object"&&q===void 0){if(q=z,j=q.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,j,q),!q)return(0,c.eachItem)(j,G=>D.call(this,G)),this;F.call(this,q);const H={...q,type:(0,u.getJSONTypes)(q.type),schemaType:(0,u.getJSONTypes)(q.schemaType)};return(0,c.eachItem)(j,H.type.length===0?G=>D.call(this,G,H):G=>H.type.forEach(J=>D.call(this,G,H,J))),this}getKeyword(z){const q=this.RULES.all[z];return typeof q=="object"?q.definition:!!q}removeKeyword(z){const{RULES:q}=this;delete q.keywords[z],delete q.all[z];for(const j of q.rules){const H=j.rules.findIndex(G=>G.keyword===z);H>=0&&j.rules.splice(H,1)}return this}addFormat(z,q){return typeof q=="string"&&(q=new RegExp(q)),this.formats[z]=q,this}errorsText(z=this.errors,{separator:q=", ",dataVar:j="data"}={}){return!z||z.length===0?"No errors":z.map(H=>`${j}${H.instancePath} ${H.message}`).reduce((H,G)=>H+q+G)}$dataMetaSchema(z,q){const j=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const H of q){const G=H.split("/").slice(1);let J=z;for(const re of G)J=J[re];for(const re in j){const ie=j[re];if(typeof ie!="object")continue;const{$data:te}=ie.definition,ae=J[re];te&&ae&&(J[re]=V(ae))}}return z}_removeAllSchemas(z,q){for(const j in z){const H=z[j];(!q||q.test(j))&&(typeof H=="string"?delete z[j]:H&&!H.meta&&(this._cache.delete(H.schema),delete z[j]))}}_addSchema(z,q,j,H=this.opts.validateSchema,G=this.opts.addUsedSchema){let J;const{schemaId:re}=this.opts;if(typeof z=="object")J=z[re];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let ie=this._cache.get(z);if(ie!==void 0)return ie;j=(0,l.normalizeId)(J||j);const te=l.getSchemaRefs.call(this,z,j);return ie=new o.SchemaEnv({schema:z,schemaId:re,meta:q,baseId:j,localRefs:te}),this._cache.set(ie.schema,ie),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=ie),H&&this.validateSchema(z,!0),ie}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):o.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const q=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,z)}finally{this.opts=q}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function x(M,z,q,j="error"){for(const H in M){const G=H;G in z&&this.logger[j](`${q}: option ${H}. ${M[G]}`)}}function S(M){return M=(0,l.normalizeId)(M),this.schemas[M]||this.refs[M]}function E(){const M=this.opts.schemas;if(M)if(Array.isArray(M))this.addSchema(M);else for(const z in M)this.addSchema(M[z],z)}function T(){for(const M in this.opts.formats){const z=this.opts.formats[M];z&&this.addFormat(M,z)}}function I(M){if(Array.isArray(M)){this.addVocabulary(M);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in M){const q=M[z];q.keyword||(q.keyword=z),this.addKeyword(q)}}function k(){const M={...this.opts};for(const z of p)delete M[z];return M}const P={log(){},warn(){},error(){}};function L(M){if(M===!1)return P;if(M===void 0)return console;if(M.log&&M.warn&&M.error)return M;throw new Error("logger must implement log, warn and error methods")}const R=/^[a-z_$][a-z0-9_$:-]*$/i;function $(M,z){const{RULES:q}=this;if((0,c.eachItem)(M,j=>{if(q.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!R.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function D(M,z,q){var j;const H=z==null?void 0:z.post;if(q&&H)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let J=H?G.post:G.rules.find(({type:ie})=>ie===q);if(J||(J={type:q,rules:[]},G.rules.push(J)),G.keywords[M]=!0,!z)return;const re={keyword:M,definition:{...z,type:(0,u.getJSONTypes)(z.type),schemaType:(0,u.getJSONTypes)(z.schemaType)}};z.before?O.call(this,J,re,z.before):J.rules.push(re),G.all[M]=re,(j=z.implements)===null||j===void 0||j.forEach(ie=>this.addKeyword(ie))}function O(M,z,q){const j=M.rules.findIndex(H=>H.keyword===q);j>=0?M.rules.splice(j,0,z):(M.rules.push(z),this.logger.warn(`rule ${q} is not defined`))}function F(M){let{metaSchema:z}=M;z!==void 0&&(M.$data&&this.opts.$data&&(z=V(z)),M.validateSchema=this.compile(z,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function V(M){return{anyOf:[M,U]}}})(p2e);var MQ={},$Q={},LQ={};Object.defineProperty(LQ,"__esModule",{value:!0});const _gt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};LQ.default=_gt;var ab={};Object.defineProperty(ab,"__esModule",{value:!0});ab.callRef=ab.getValidate=void 0;const wgt=wS,kde=On,xl=Mn,z_=lp,Rde=kl,xN=wt,xgt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:l}=r,{root:u}=s;if((n==="#"||n==="#/")&&i===u.baseId)return d();const c=Rde.resolveRef.call(l,u,i,n);if(c===void 0)throw new wgt.default(r.opts.uriResolver,i,n);if(c instanceof Rde.SchemaEnv)return f(c);return h(c);function d(){if(s===u)return pD(e,o,s,s.$async);const p=t.scopeValue("root",{ref:u});return pD(e,(0,xl._)`${p}.validate`,u,u.$async)}function f(p){const m=tAe(e,p);pD(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,xl.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:xl.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function tAe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,xl._)`${n.scopeValue("wrapper",{ref:t})}.validate`}ab.getValidate=tAe;function pD(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:l}=s,u=l.passContext?z_.default.this:xl.nil;r?c():d();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,xl._)`await ${(0,kde.callValidateCode)(e,t,u)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,xl._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),f(m),o||i.assign(p,!1)}),e.ok(p)}function d(){e.result((0,kde.callValidateCode)(e,t,u),()=>h(t),()=>f(t))}function f(p){const m=(0,xl._)`${p}.errors`;i.assign(z_.default.vErrors,(0,xl._)`${z_.default.vErrors} === null ? ${m} : ${z_.default.vErrors}.concat(${m})`),i.assign(z_.default.errors,(0,xl._)`${z_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=xN.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,xl._)`${p}.evaluated.props`);s.props=xN.mergeEvaluated.props(i,y,s.props,xl.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=xN.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,xl._)`${p}.evaluated.items`);s.items=xN.mergeEvaluated.items(i,y,s.items,xl.Name)}}}ab.callRef=pD;ab.default=xgt;Object.defineProperty($Q,"__esModule",{value:!0});const Egt=LQ,Sgt=ab,Tgt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Egt.default,Sgt.default];$Q.default=Tgt;var FQ={},jQ={};Object.defineProperty(jQ,"__esModule",{value:!0});const f$=Mn,Og=f$.operators,h$={maximum:{okStr:"<=",ok:Og.LTE,fail:Og.GT},minimum:{okStr:">=",ok:Og.GTE,fail:Og.LT},exclusiveMaximum:{okStr:"<",ok:Og.LT,fail:Og.GTE},exclusiveMinimum:{okStr:">",ok:Og.GT,fail:Og.LTE}},Cgt={message:({keyword:e,schemaCode:t})=>(0,f$.str)`must be ${h$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,f$._)`{comparison: ${h$[e].okStr}, limit: ${t}}`},Agt={keyword:Object.keys(h$),type:"number",schemaType:"number",$data:!0,error:Cgt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,f$._)`${n} ${h$[t].fail} ${r} || isNaN(${n})`)}};jQ.default=Agt;var BQ={};Object.defineProperty(BQ,"__esModule",{value:!0});const eA=Mn,Igt={message:({schemaCode:e})=>(0,eA.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,eA._)`{multipleOf: ${e}}`},kgt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Igt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,eA._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,eA._)`${o} !== parseInt(${o})`;e.fail$data((0,eA._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};BQ.default=kgt;var zQ={},UQ={};Object.defineProperty(UQ,"__esModule",{value:!0});function nAe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}UQ.default=nAe;nAe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(zQ,"__esModule",{value:!0});const u1=Mn,Rgt=wt,Pgt=UQ,Ngt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,u1.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,u1._)`{limit: ${e}}`},Ogt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Ngt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?u1.operators.GT:u1.operators.LT,o=i.opts.unicode===!1?(0,u1._)`${n}.length`:(0,u1._)`${(0,Rgt.useFunc)(e.gen,Pgt.default)}(${n})`;e.fail$data((0,u1._)`${o} ${s} ${r}`)}};zQ.default=Ogt;var VQ={};Object.defineProperty(VQ,"__esModule",{value:!0});const Dgt=On,p$=Mn,Mgt={message:({schemaCode:e})=>(0,p$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,p$._)`{pattern: ${e}}`},$gt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Mgt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,p$._)`(new RegExp(${i}, ${o}))`:(0,Dgt.usePattern)(e,r);e.fail$data((0,p$._)`!${a}.test(${t})`)}};VQ.default=$gt;var HQ={};Object.defineProperty(HQ,"__esModule",{value:!0});const tA=Mn,Lgt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,tA.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,tA._)`{limit: ${e}}`},Fgt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Lgt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?tA.operators.GT:tA.operators.LT;e.fail$data((0,tA._)`Object.keys(${n}).length ${i} ${r}`)}};HQ.default=Fgt;var qQ={};Object.defineProperty(qQ,"__esModule",{value:!0});const zT=On,nA=Mn,jgt=wt,Bgt={message:({params:{missingProperty:e}})=>(0,nA.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,nA._)`{missingProperty: ${e}}`},zgt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Bgt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const l=n.length>=a.loopRequired;if(o.allErrors?u():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,jgt.checkStrictMode)(o,y,o.opts.strictRequired)}}function u(){if(l||s)e.block$data(nA.nil,d);else for(const h of n)(0,zT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(l||s){const p=t.let("valid",!0);e.block$data(p,()=>f(h,p)),e.ok(p)}else t.if((0,zT.checkMissingProp)(e,n,h)),(0,zT.reportMissingProp)(e,h),t.else()}function d(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,zT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function f(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,zT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,nA.not)(p),()=>{e.error(),t.break()})},nA.nil)}}};qQ.default=zgt;var WQ={};Object.defineProperty(WQ,"__esModule",{value:!0});const rA=Mn,Ugt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,rA.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,rA._)`{limit: ${e}}`},Vgt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Ugt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?rA.operators.GT:rA.operators.LT;e.fail$data((0,rA._)`${n}.length ${i} ${r}`)}};WQ.default=Vgt;var GQ={},aR={};Object.defineProperty(aR,"__esModule",{value:!0});const rAe=AQ;rAe.code='require("ajv/dist/runtime/equal").default';aR.default=rAe;Object.defineProperty(GQ,"__esModule",{value:!0});const SB=Ss,uo=Mn,Hgt=wt,qgt=aR,Wgt={message:({params:{i:e,j:t}})=>(0,uo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,uo._)`{i: ${e}, j: ${t}}`},Ggt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Wgt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const l=t.let("valid"),u=s.items?(0,SB.getSchemaTypes)(s.items):[];e.block$data(l,c,(0,uo._)`${o} === false`),e.ok(l);function c(){const p=t.let("i",(0,uo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(l,!0),t.if((0,uo._)`${p} > 1`,()=>(d()?f:h)(p,m))}function d(){return u.length>0&&!u.some(p=>p==="object"||p==="array")}function f(p,m){const g=t.name("item"),y=(0,SB.checkDataTypes)(u,g,a.opts.strictNumbers,SB.DataType.Wrong),v=t.const("indices",(0,uo._)`{}`);t.for((0,uo._)`;${p}--;`,()=>{t.let(g,(0,uo._)`${n}[${p}]`),t.if(y,(0,uo._)`continue`),u.length>1&&t.if((0,uo._)`typeof ${g} == "string"`,(0,uo._)`${g} += "_"`),t.if((0,uo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,uo._)`${v}[${g}]`),e.error(),t.assign(l,!1).break()}).code((0,uo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,Hgt.useFunc)(t,qgt.default),y=t.name("outer");t.label(y).for((0,uo._)`;${p}--;`,()=>t.for((0,uo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,uo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(l,!1).break(y)})))}}};GQ.default=Ggt;var YQ={};Object.defineProperty(YQ,"__esModule",{value:!0});const xV=Mn,Ygt=wt,Kgt=aR,Xgt={message:"must be equal to constant",params:({schemaCode:e})=>(0,xV._)`{allowedValue: ${e}}`},Qgt={keyword:"const",$data:!0,error:Xgt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,xV._)`!${(0,Ygt.useFunc)(t,Kgt.default)}(${n}, ${i})`):e.fail((0,xV._)`${s} !== ${n}`)}};YQ.default=Qgt;var KQ={};Object.defineProperty(KQ,"__esModule",{value:!0});const FC=Mn,Jgt=wt,Zgt=aR,e0t={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,FC._)`{allowedValues: ${e}}`},t0t={keyword:"enum",schemaType:"array",$data:!0,error:e0t,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let l;const u=()=>l??(l=(0,Jgt.useFunc)(t,Zgt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,d);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,FC.or)(...i.map((p,m)=>f(h,m)))}e.pass(c);function d(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,FC._)`${u()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function f(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,FC._)`${u()}(${n}, ${h}[${p}])`:(0,FC._)`${n} === ${m}`}}};KQ.default=t0t;Object.defineProperty(FQ,"__esModule",{value:!0});const n0t=jQ,r0t=BQ,i0t=zQ,s0t=VQ,o0t=HQ,a0t=qQ,l0t=WQ,u0t=GQ,c0t=YQ,d0t=KQ,f0t=[n0t.default,r0t.default,i0t.default,s0t.default,o0t.default,a0t.default,l0t.default,u0t.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},c0t.default,d0t.default];FQ.default=f0t;var XQ={},xS={};Object.defineProperty(xS,"__esModule",{value:!0});xS.validateAdditionalItems=void 0;const c1=Mn,EV=wt,h0t={message:({params:{len:e}})=>(0,c1.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,c1._)`{limit: ${e}}`},p0t={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:h0t,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,EV.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}iAe(e,r)}};function iAe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,c1._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,c1._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,EV.alwaysValidSchema)(o,r)){const u=n.var("valid",(0,c1._)`${a} <= ${t.length}`);n.if((0,c1.not)(u),()=>l(u)),e.ok(u)}function l(u){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:EV.Type.Num},u),o.allErrors||n.if((0,c1.not)(u),()=>n.break())})}}xS.validateAdditionalItems=iAe;xS.default=p0t;var QQ={},ES={};Object.defineProperty(ES,"__esModule",{value:!0});ES.validateTuple=void 0;const Pde=Mn,mD=wt,m0t=On,g0t={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return sAe(e,"additionalItems",t);n.items=!0,!(0,mD.alwaysValidSchema)(n,t)&&e.ok((0,m0t.validateArray)(e))}};function sAe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=mD.mergeEvaluated.items(r,n.length,a.items));const l=r.name("valid"),u=r.const("len",(0,Pde._)`${s}.length`);n.forEach((d,f)=>{(0,mD.alwaysValidSchema)(a,d)||(r.if((0,Pde._)`${u} > ${f}`,()=>e.subschema({keyword:o,schemaProp:f,dataProp:f},l)),e.ok(l))});function c(d){const{opts:f,errSchemaPath:h}=a,p=n.length,m=p===d.minItems&&(p===d.maxItems||d[t]===!1);if(f.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,mD.checkStrictMode)(a,g,f.strictTuples)}}}ES.validateTuple=sAe;ES.default=g0t;Object.defineProperty(QQ,"__esModule",{value:!0});const y0t=ES,v0t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,y0t.validateTuple)(e,"items")};QQ.default=v0t;var JQ={};Object.defineProperty(JQ,"__esModule",{value:!0});const Nde=Mn,b0t=wt,_0t=On,w0t=xS,x0t={message:({params:{len:e}})=>(0,Nde.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Nde._)`{limit: ${e}}`},E0t={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:x0t,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,b0t.alwaysValidSchema)(r,t)&&(i?(0,w0t.validateAdditionalItems)(e,i):e.ok((0,_0t.validateArray)(e)))}};JQ.default=E0t;var ZQ={};Object.defineProperty(ZQ,"__esModule",{value:!0});const uc=Mn,EN=wt,S0t={message:({params:{min:e,max:t}})=>t===void 0?(0,uc.str)`must contain at least ${e} valid item(s)`:(0,uc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,uc._)`{minContains: ${e}}`:(0,uc._)`{minContains: ${e}, maxContains: ${t}}`},T0t={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:S0t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:l,maxContains:u}=r;s.opts.next?(o=l===void 0?1:l,a=u):o=1;const c=t.const("len",(0,uc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,EN.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,EN.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,EN.alwaysValidSchema)(s,n)){let m=(0,uc._)`${c} >= ${o}`;a!==void 0&&(m=(0,uc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const d=t.name("valid");a===void 0&&o===1?h(d,()=>t.if(d,()=>t.break())):o===0?(t.let(d,!0),a!==void 0&&t.if((0,uc._)`${i}.length > 0`,f)):(t.let(d,!1),f()),e.result(d,()=>e.reset());function f(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:EN.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,uc._)`${m}++`),a===void 0?t.if((0,uc._)`${m} >= ${o}`,()=>t.assign(d,!0).break()):(t.if((0,uc._)`${m} > ${a}`,()=>t.assign(d,!1).break()),o===1?t.assign(d,!0):t.if((0,uc._)`${m} >= ${o}`,()=>t.assign(d,!0)))}}};ZQ.default=T0t;var oAe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Mn,n=wt,r=On;e.error={message:({params:{property:l,depsCount:u,deps:c}})=>{const d=u===1?"property":"properties";return(0,t.str)`must have ${d} ${c} when property ${l} is present`},params:({params:{property:l,depsCount:u,deps:c,missingProperty:d}})=>(0,t._)`{property: ${l},
    missingProperty: ${d},
    depsCount: ${u},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(l){const[u,c]=s(l);o(l,u),a(l,c)}};function s({schema:l}){const u={},c={};for(const d in l){if(d==="__proto__")continue;const f=Array.isArray(l[d])?u:c;f[d]=l[d]}return[u,c]}function o(l,u=l.schema){const{gen:c,data:d,it:f}=l;if(Object.keys(u).length===0)return;const h=c.let("missing");for(const p in u){const m=u[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,d,p,f.opts.ownProperties);l.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),f.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(l,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(l,m,h)})`),(0,r.reportMissingProp)(l,h),c.else())}}e.validatePropertyDeps=o;function a(l,u=l.schema){const{gen:c,data:d,keyword:f,it:h}=l,p=c.name("valid");for(const m in u)(0,n.alwaysValidSchema)(h,u[m])||(c.if((0,r.propertyInData)(c,d,m,h.opts.ownProperties),()=>{const g=l.subschema({keyword:f,schemaProp:m},p);l.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),l.ok(p))}e.validateSchemaDeps=a,e.default=i})(oAe);var eJ={};Object.defineProperty(eJ,"__esModule",{value:!0});const aAe=Mn,C0t=wt,A0t={message:"property name must be valid",params:({params:e})=>(0,aAe._)`{propertyName: ${e.propertyName}}`},I0t={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:A0t,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,C0t.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,aAe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};eJ.default=I0t;var P6={};Object.defineProperty(P6,"__esModule",{value:!0});const SN=On,hd=Mn,k0t=lp,TN=wt,R0t={message:"must NOT have additional properties",params:({params:e})=>(0,hd._)`{additionalProperty: ${e.additionalProperty}}`},P0t={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:R0t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,TN.alwaysValidSchema)(o,n))return;const u=(0,SN.allSchemaProperties)(r.properties),c=(0,SN.allSchemaProperties)(r.patternProperties);d(),e.ok((0,hd._)`${s} === ${k0t.default.errors}`);function d(){t.forIn("key",i,g=>{!u.length&&!c.length?p(g):t.if(f(g),()=>p(g))})}function f(g){let y;if(u.length>8){const v=(0,TN.schemaRefOrVal)(o,r.properties,"properties");y=(0,SN.isOwnProperty)(t,v,g)}else u.length?y=(0,hd.or)(...u.map(v=>(0,hd._)`${g} === ${v}`)):y=hd.nil;return c.length&&(y=(0,hd.or)(y,...c.map(v=>(0,hd._)`${(0,SN.usePattern)(e,v)}.test(${g})`))),(0,hd.not)(y)}function h(g){t.code((0,hd._)`delete ${i}[${g}]`)}function p(g){if(l.removeAdditional==="all"||l.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,TN.alwaysValidSchema)(o,n)){const y=t.name("valid");l.removeAdditional==="failing"?(m(g,y,!1),t.if((0,hd.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,hd.not)(y),()=>t.break()))}}function m(g,y,v){const _={keyword:"additionalProperties",dataProp:g,dataPropType:TN.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};P6.default=P0t;var tJ={};Object.defineProperty(tJ,"__esModule",{value:!0});const N0t=Gd,Ode=On,TB=wt,Dde=P6,O0t={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Dde.default.code(new N0t.KeywordCxt(s,Dde.default,"additionalProperties"));const o=(0,Ode.allSchemaProperties)(n);for(const d of o)s.definedProperties.add(d);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=TB.mergeEvaluated.props(t,(0,TB.toHash)(o),s.props));const a=o.filter(d=>!(0,TB.alwaysValidSchema)(s,n[d]));if(a.length===0)return;const l=t.name("valid");for(const d of a)u(d)?c(d):(t.if((0,Ode.propertyInData)(t,i,d,s.opts.ownProperties)),c(d),s.allErrors||t.else().var(l,!0),t.endIf()),e.it.definedProperties.add(d),e.ok(l);function u(d){return s.opts.useDefaults&&!s.compositeRule&&n[d].default!==void 0}function c(d){e.subschema({keyword:"properties",schemaProp:d,dataProp:d},l)}}};tJ.default=O0t;var nJ={};Object.defineProperty(nJ,"__esModule",{value:!0});const Mde=On,CN=Mn,$de=wt,Lde=wt,D0t={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Mde.allSchemaProperties)(n),l=a.filter(m=>(0,$de.alwaysValidSchema)(s,n[m]));if(a.length===0||l.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const u=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof CN.Name)&&(s.props=(0,Lde.evaluatedPropsToName)(t,s.props));const{props:d}=s;f();function f(){for(const m of a)u&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in u)new RegExp(m).test(g)&&(0,$de.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,CN._)`${(0,Mde.usePattern)(e,m)}.test(${g})`,()=>{const y=l.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Lde.Type.Str},c),s.opts.unevaluated&&d!==!0?t.assign((0,CN._)`${d}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,CN.not)(c),()=>t.break())})})}}};nJ.default=D0t;var rJ={};Object.defineProperty(rJ,"__esModule",{value:!0});const M0t=wt,$0t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,M0t.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};rJ.default=$0t;var iJ={};Object.defineProperty(iJ,"__esModule",{value:!0});const L0t=On,F0t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:L0t.validateUnion,error:{message:"must match a schema in anyOf"}};iJ.default=F0t;var sJ={};Object.defineProperty(sJ,"__esModule",{value:!0});const gD=Mn,j0t=wt,B0t={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,gD._)`{passingSchemas: ${e.passing}}`},z0t={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:B0t,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),l=t.name("_valid");e.setParams({passing:a}),t.block(u),e.result(o,()=>e.reset(),()=>e.error(!0));function u(){s.forEach((c,d)=>{let f;(0,j0t.alwaysValidSchema)(i,c)?t.var(l,!0):f=e.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},l),d>0&&t.if((0,gD._)`${l} && ${o}`).assign(o,!1).assign(a,(0,gD._)`[${a}, ${d}]`).else(),t.if(l,()=>{t.assign(o,!0),t.assign(a,d),f&&e.mergeEvaluated(f,gD.Name)})})}}};sJ.default=z0t;var oJ={};Object.defineProperty(oJ,"__esModule",{value:!0});const U0t=wt,V0t={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,U0t.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};oJ.default=V0t;var aJ={};Object.defineProperty(aJ,"__esModule",{value:!0});const m$=Mn,lAe=wt,H0t={message:({params:e})=>(0,m$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,m$._)`{failingKeyword: ${e.ifClause}}`},q0t={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:H0t,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,lAe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=Fde(r,"then"),s=Fde(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(l(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,u("then",c),u("else",c))}else i?t.if(a,u("then")):t.if((0,m$.not)(a),u("else"));e.pass(o,()=>e.error(!0));function l(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function u(c,d){return()=>{const f=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(f,o),d?t.assign(d,(0,m$._)`${c}`):e.setParams({ifClause:c})}}}};function Fde(e,t){const n=e.schema[t];return n!==void 0&&!(0,lAe.alwaysValidSchema)(e,n)}aJ.default=q0t;var lJ={};Object.defineProperty(lJ,"__esModule",{value:!0});const W0t=wt,G0t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,W0t.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};lJ.default=G0t;Object.defineProperty(XQ,"__esModule",{value:!0});const Y0t=xS,K0t=QQ,X0t=ES,Q0t=JQ,J0t=ZQ,Z0t=oAe,eyt=eJ,tyt=P6,nyt=tJ,ryt=nJ,iyt=rJ,syt=iJ,oyt=sJ,ayt=oJ,lyt=aJ,uyt=lJ;function cyt(e=!1){const t=[iyt.default,syt.default,oyt.default,ayt.default,lyt.default,uyt.default,eyt.default,tyt.default,Z0t.default,nyt.default,ryt.default];return e?t.push(K0t.default,Q0t.default):t.push(Y0t.default,X0t.default),t.push(J0t.default),t}XQ.default=cyt;var uJ={},cJ={};Object.defineProperty(cJ,"__esModule",{value:!0});const es=Mn,dyt={message:({schemaCode:e})=>(0,es.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,es._)`{format: ${e}}`},fyt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:dyt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:l,errSchemaPath:u,schemaEnv:c,self:d}=a;if(!l.validateFormats)return;i?f():h();function f(){const p=n.scopeValue("formats",{ref:d.formats,code:l.code.formats}),m=n.const("fDef",(0,es._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,es._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,es._)`${m}.type || "string"`).assign(y,(0,es._)`${m}.validate`),()=>n.assign(g,(0,es._)`"string"`).assign(y,m)),e.fail$data((0,es.or)(v(),_()));function v(){return l.strictSchema===!1?es.nil:(0,es._)`${o} && !${y}`}function _(){const w=c.$async?(0,es._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,es._)`${y}(${r})`,x=(0,es._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,es._)`${y} && ${y} !== true && ${g} === ${t} && !${x}`}}function h(){const p=d.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=_(p);m===t&&e.pass(w());function v(){if(l.strictSchema===!1){d.logger.warn(x());return}throw new Error(x());function x(){return`unknown format "${s}" ignored in schema at path "${u}"`}}function _(x){const S=x instanceof RegExp?(0,es.regexpCode)(x):l.code.formats?(0,es._)`${l.code.formats}${(0,es.getProperty)(s)}`:void 0,E=n.scopeValue("formats",{key:s,ref:x,code:S});return typeof x=="object"&&!(x instanceof RegExp)?[x.type||"string",x.validate,(0,es._)`${E}.validate`]:["string",x,E]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,es._)`await ${y}(${r})`}return typeof g=="function"?(0,es._)`${y}(${r})`:(0,es._)`${y}.test(${r})`}}}};cJ.default=fyt;Object.defineProperty(uJ,"__esModule",{value:!0});const hyt=cJ,pyt=[hyt.default];uJ.default=pyt;var Jx={};Object.defineProperty(Jx,"__esModule",{value:!0});Jx.contentVocabulary=Jx.metadataVocabulary=void 0;Jx.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Jx.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(MQ,"__esModule",{value:!0});const myt=$Q,gyt=FQ,yyt=XQ,vyt=uJ,jde=Jx,byt=[myt.default,gyt.default,(0,yyt.default)(),vyt.default,jde.metadataVocabulary,jde.contentVocabulary];MQ.default=byt;var dJ={},N6={};Object.defineProperty(N6,"__esModule",{value:!0});N6.DiscrError=void 0;var Bde;(function(e){e.Tag="tag",e.Mapping="mapping"})(Bde||(N6.DiscrError=Bde={}));Object.defineProperty(dJ,"__esModule",{value:!0});const dw=Mn,SV=N6,zde=kl,_yt=wS,wyt=wt,xyt={message:({params:{discrError:e,tagName:t}})=>e===SV.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,dw._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},Eyt={keyword:"discriminator",type:"object",schemaType:"object",error:xyt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const l=t.let("valid",!1),u=t.const("tag",(0,dw._)`${n}${(0,dw.getProperty)(a)}`);t.if((0,dw._)`typeof ${u} == "string"`,()=>c(),()=>e.error(!1,{discrError:SV.DiscrError.Tag,tag:u,tagName:a})),e.ok(l);function c(){const h=f();t.if(!1);for(const p in h)t.elseIf((0,dw._)`${u} === ${p}`),t.assign(l,d(h[p]));t.else(),e.error(!1,{discrError:SV.DiscrError.Mapping,tag:u,tagName:a}),t.endIf()}function d(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,dw.Name),p}function f(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let x=o[w];if(x!=null&&x.$ref&&!(0,wyt.schemaHasRulesButRef)(x,s.self.RULES)){const E=x.$ref;if(x=zde.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,E),x instanceof zde.SchemaEnv&&(x=x.schema),x===void 0)throw new _yt.default(s.opts.uriResolver,s.baseId,E)}const S=(h=x==null?void 0:x.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(x)),v(S,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,x){if(w.const)_(w.const,x);else if(w.enum)for(const S of w.enum)_(S,x);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(w,x){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=x}}}};dJ.default=Eyt;const Syt="http://json-schema.org/draft-07/schema#",Tyt="http://json-schema.org/draft-07/schema#",Cyt="Core schema meta-schema",Ayt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Iyt=["object","boolean"],kyt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Ryt={$schema:Syt,$id:Tyt,title:Cyt,definitions:Ayt,type:Iyt,properties:kyt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=p2e,r=MQ,i=dJ,s=Ryt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var u=Gd;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var c=Mn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var d=oR;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return d.default}});var f=wS;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return f.default}})})(gV,gV.exports);var Pyt=gV.exports;const uAe=rl(Pyt),Nyt="#/definitions/StudyConfig",Oyt="http://json-schema.org/draft-07/schema#",Dyt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": [       {         "label": "Europe",         "value": "Europe"       },       {         "label": "Japan",         "value": "Japan"       },       {         "label": "USA",         "value": "USA"       }     ],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  },  {    "label": "Option 3",    "value": "opt-3"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": [  {    "label": "Red",    "value": "red"  },  {    "label": "Blue",    "value": "blue"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": [      {        "label": "Man",        "value": "Man"      },      {        "label": "Woman",        "value": "Woman"      },      {        "label": "Genderqueer",        "value": "Genderqueer"      },      {        "label": "Third-gender",        "value": "Third-gender"      },      ... etc.    ]  } ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},recordStudyAudio:{type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},tasksToNotRecordAudio:{items:{type:"string"},type:"array"},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},Myt={$ref:Nyt,$schema:Oyt,definitions:Dyt},$yt="#/definitions/GlobalConfig",Lyt="http://json-schema.org/draft-07/schema#",Fyt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},jyt={$ref:$yt,$schema:Lyt,definitions:Fyt},cAe=new uAe;cAe.addSchema(jyt);const Ude=cAe.getSchema("#/definitions/GlobalConfig"),dAe=new uAe;dAe.addSchema(Myt);const CB=dAe.getSchema("#/definitions/StudyConfig");function Byt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function O6(e){return e.baseComponent!==void 0}function zyt(e){const t=bQ.parse(e),n=Ude(t),r=Byt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Ude.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function fAe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):fAe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function Uyt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;O6(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=a2e(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return fAe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function Vyt(e){let t=!1,n;try{n=bQ.parse(e),t=CB(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=Uyt(n);r=[...CB.errors||[],...s],i=o}else r=CB.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function hAe(){const e=Xy(),{setAlertModal:t}=ju(),n=Fc();A.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Vde=Object.prototype.hasOwnProperty;function Hde(e,t,n){for(n of e.keys())if(iA(n,t))return n}function iA(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&iA(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Hde(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Hde(t,i),!i)||!iA(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Vde.call(e,n)&&++r&&!Vde.call(t,n)||!(n in t)||!iA(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function Hyt(e){var t=A.useRef(e),n=A.useRef(0);return iA(e,t.current)||(t.current=e,n.current+=1),A.useMemo(function(){return t.current},[n.current])}function qyt(e,t){return A.useEffect(e,Hyt(t))}const Md=(e,t=null)=>{const[n,r]=A.useState("idle"),[i,s]=A.useState(null),[o,a]=A.useState(null),l=A.useRef(),u=A.useRef(!1);A.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const c=A.useCallback((...d)=>{r("pending"),a(null);const f=Promise.resolve(e(...d)).then(h=>(u.current&&f===l.current&&(s(h),r("success")),h)).catch(h=>{throw u.current&&f===l.current&&(s(null),a(h),r("error")),h});return l.current=f,f},[e]);return qyt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},qde=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],pAe=["participantId","trialId","trialOrder","responseId"];function fJ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function Wyt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(Rc(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),l=n.components[o],u=O6(l)&&l.baseComponent&&n.baseComponents?mQ({},n.baseComponents[l.baseComponent],l):l,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([f,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:f},m=u.response.find(v=>v.id===f);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=u.description),t.includes("instruction")&&(p.instruction=u.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=u.correctAnswer)==null?void 0:g.find(_=>_.id===f))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(u.meta,null,2)),p}).flat()}).flat()}async function Gyt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...pAe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,u=(await Promise.all(t.map(async c=>await Wyt(c,i,o[c.participantConfigHash])))).flat().sort((c,d)=>c!==d?c.participantId.localeCompare(d.participantId):c.trialOrder-d.trialOrder);return{header:a,rows:u}}function Yyt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=A.useState([...qde].filter(h=>h!=="meta")),a=pi(),{value:l,status:u,error:c}=Md(Gyt,[s,r,a.storageEngine,i]),d=A.useCallback(()=>{if(!l)return;const h=[l.header.join(","),...l.rows.map(p=>l.header.map(m=>p[m]).join(","))].join(`
`);fJ(h,n)},[n,l]),f=A.useMemo(()=>{if(!l)return"";const h=l.rows.length>5?5:l.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${l.rows.length} row${p}.`},[l]);return b.jsxs(as,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[b.jsx(Hk,{searchable:!0,nothingFoundMessage:"Property not found",data:[...qde],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:b.jsx($nt,{}),variant:"filled"}),b.jsx(kc,{h:"md"}),b.jsxs(ge,{mih:300,style:{width:"100%",overflow:"scroll"},children:[u==="success"&&l?b.jsxs(Wn,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[b.jsx(Wn.Thead,{children:b.jsx(Wn.Tr,{children:l.header.map(h=>b.jsx(Wn.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:b.jsxs(Et,{direction:"row",justify:"space-between",align:"center",children:[h,!pAe.includes(h)&&b.jsx(In,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:b.jsx(u6,{size:16})})]})},h))})}),b.jsx(Wn.Tbody,{children:l.rows.slice(0,5).map((h,p)=>b.jsx(Wn.Tr,{children:l.header.map(m=>b.jsx(Wn.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):u==="error"&&c?b.jsx(lS,{variant:"light",children:c.message}):null,b.jsx(Gl,{visible:u==="pending"||u==="idle"})]}),b.jsx(kc,{h:"sm"}),b.jsx(Et,{justify:"center",fz:"sm",c:"dimmed",children:b.jsx(Xe,{children:f})}),b.jsx(kc,{h:"md"}),b.jsxs(gn,{justify:"right",children:[b.jsx(rn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),b.jsx(rn,{leftSection:b.jsx(YSe,{}),onClick:()=>d(),"data-autofocus":!0,children:"Download"})]})]})}function mAe(){const e=Bh(),{storageEngine:t}=pi(),{answers:n}=Ro(v=>v),[r,i]=A.useState(!1);A.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),hAe();const[s,o]=A.useState(),[a,l]=A.useState(""),u=e.studyMetadata.title.replace(" ","_");A.useEffect(()=>{async function v(){if(t){const _=await t.getCurrentParticipantId(),w=await t.getParticipantData();l(_),o(w)}}v()},[t]);const c=A.useCallback(async()=>{fJ(JSON.stringify(s,null,2),`${u}_${a}.json`)},[u,s,a]),d=e.uiConfig.autoDownloadStudy||!1,f=d&&e.uiConfig.autoDownloadTime||-1,[h,p]=A.useState(Math.floor(f/1e3));A.useEffect(()=>{if(r){const v=setInterval(()=>{p(_=>_-1)},1e3);return h<=0?(d&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[d,r,h,c]);const m=_S(),[g,y]=A.useState(!1);return A.useEffect(()=>{(async()=>{if(t){const _=await t.getModes(m);y(_.dataCollectionEnabled)}})()},[t,m]),b.jsx(Ya,{style:{height:"100%"},children:b.jsx(Et,{direction:"column",children:r||!g?b.jsx(Xe,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?b.jsx(Ka,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):b.jsxs(b.Fragment,{children:[b.jsx(Xe,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),b.jsx(kc,{h:"lg"}),b.jsx(Ya,{children:b.jsx(is,{color:"blue"})})]})})})}function Ah(e){return structuredClone(e)}const gAe=A.createContext(null);function Kyt(){const e=A.useContext(gAe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function Wde(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function Xyt(){const e=Xy(),t=pQ(),r=`${ap()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Ro(S=>S),a=Fc(),{saveTrialAnswer:l,setIframeAnswers:u}=ju(),{storageEngine:c}=pi(),d=_S(),[f,h]=A.useState(!0);A.useEffect(()=>{(async()=>{if(c){const E=await c.getModes(d);h(E.dataCollectionEnabled)}})()},[c,d]);const p=ght(r),m=typeof e!="number"||!p,g=yQ(),y=Zc(),v=Bh(),_=A.useMemo(()=>Date.now(),[]),w=Kyt(),x=A.useCallback(()=>{if(typeof e!="number")return;const S=Ah(i[r]),E=Object.values(S).reduce((D,O)=>Object.hasOwn(O,"values")?{...D,...O.values}:D,{}),{provenanceGraph:T}=S,I=Date.now(),k=w&&"current"in w&&w.current?w.current.splice(0,w.current.length):[];f&&!g.endTime&&(a(l({identifier:r,answer:E,startTime:_,endTime:I,provenanceGraph:T,windowEvents:k})),c&&c.saveAnswers({...o,[r]:{answer:E,startTime:_,endTime:I,provenanceGraph:T,windowEvents:k}}),a(u({})));let P=e+1;const L=hht(s,e),R=L!==null&&L.some(D=>Object.hasOwn(D.currentBlock,"skip")&&D.currentBlock.skip!==void 0),$={...o,[r]:{answer:E,startTime:_,endTime:I,provenanceGraph:T,windowEvents:k}};R&&[...L.flatMap(O=>O.currentBlock.skip?O.currentBlock.skip.map(F=>({...F,firstIndex:O.firstIndex,lastIndex:O.lastIndex})):[])].some(O=>{let F=!1;const U=Object.fromEntries(Object.entries($).filter(([M])=>{const z=parseInt(M.slice(M.lastIndexOf("_")+1),10);return z>=O.firstIndex&&z<=e})),V=O.check!=="block"?Object.entries(U).filter(([M])=>M.slice(0,M.lastIndexOf("_"))===O.name):Object.entries(U);if(V.length===0)return!1;if(V.some(([M,z])=>!z))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(O,null,2)}`);if(O.check==="response"||O.check==="responses"){const[M,z]=V[0];O.check==="response"?F=O.value!==z.answer[O.responseId]:F=!Wde(z.answer,M,v.components[M.slice(0,M.lastIndexOf("_"))],v)}else if(O.check==="block"||O.check==="repeatedComponent"){if(V.length<O.value)return!1;const M=V.map(([j,H])=>Wde(H.answer,j,v.components[j.slice(0,j.lastIndexOf("_"))],v)),z=M.filter(j=>j).length,q=M.length-z;F=O.condition==="numCorrect"&&z===O.value||O.condition==="numIncorrect"&&q===O.value}if(F){const M=t.indexOf(O.to),z=M===-1?pht(s,O.to):-1;return P=M===-1?z:M,!0}return!1}),y(`/${d}/${P}${window.location.search}`)},[i,r,w,g,e,s,o,_,y,d,a,l,c,u,v,t]);return{isNextDisabled:m,goToNextStep:x}}function Qyt({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>null,onClick:r}){const{isNextDisabled:i,goToNextStep:s}=Xyt(),o=A.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return b.jsx(rn,{type:"submit",disabled:t||i,onClick:o,children:e})}function Jyt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Zyt=typeof window<"u"?A.useLayoutEffect:A.useEffect;function so(e,t){Zyt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function evt(e,t){e&&Jyt(e),so(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),so(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),so(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),so(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),so(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),so(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),so(`mantine-form:${e}:clear-errors`,t.clearErrors),so(`mantine-form:${e}:reset`,t.reset),so(`mantine-form:${e}:validate`,t.validate),so(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),so(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),so(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),so(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),so(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),so(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),so(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),so(`mantine-form:${e}:reset-touched`,t.resetTouched)}function tvt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function TV(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function nvt(e){const[t,n]=A.useState(TV(e)),r=A.useRef(t),i=A.useCallback(l=>{n(u=>{const c=TV(typeof l=="function"?l(u):l);return r.current=c,c})},[]),s=A.useCallback(()=>i({}),[]),o=A.useCallback(l=>{r.current[l]!==void 0&&i(u=>{const c={...u};return delete c[l],c})},[t]),a=A.useCallback((l,u)=>{u==null||u===!1?o(l):r.current[l]!==u&&i(c=>({...c,[l]:u}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function CV(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Gde(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Yde(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=CV(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([l])=>{if(!l.startsWith(`${i}.`))return!1;const u=Gde(l,i);return Number.isNaN(u)?!1:u>=t}).forEach(([l,u])=>{const c=Gde(l,i),d=l.replace(`${i}.${c}`,`${i}.${c+r}`);o[d]=u,a.add(d),a.has(l)||delete o[l]}),o}function rvt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let l,u;if(a.startsWith(i)&&(l=a,u=a.replace(i,s)),a.startsWith(s)&&(l=a.replace(s,i),u=a),l&&u){const c=o[l],d=o[u];return d===void 0?delete o[l]:o[l]=d,c===void 0?delete o[u]:o[u]=c,!1}return!0}),o}function Kde(e,t,n){typeof n.value=="object"&&(n.value=jw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function jw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(jw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(jw(a),jw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(jw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Kde(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Kde(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function yAe(e){return typeof e!="string"?[]:e.split(".")}function aa(e,t){const n=yAe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function D6(e,t,n){const r=yAe(e);if(r.length===0)return n;const i=jw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function ivt(e,{from:t,to:n},r){const i=aa(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),D6(e,s,r)}function svt(e,t,n,r){const i=aa(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),D6(e,s,r)}function ovt(e,t,n){const r=aa(e,n);return Array.isArray(r)?D6(e,r.filter((i,s)=>s!==t),n):n}function avt({$values:e,$errors:t,$status:n}){const r=A.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(l=>rvt(o,a,l)),e.setValues({values:ivt(o,a,e.refValues.current),updateState:!0})},[]),i=A.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(l=>Yde(o,a,l,-1)),e.setValues({values:ovt(o,a,e.refValues.current),updateState:!0})},[]),s=A.useCallback((o,a,l)=>{n.clearFieldDirty(o),t.setErrors(u=>Yde(o,l,u,1)),e.setValues({values:svt(o,a,l,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}function UT(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function lvt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=A.useState(t),[o,a]=A.useState(e),l=A.useRef(t),u=A.useRef(e),c=A.useCallback(S=>{const E=typeof S=="function"?S(l.current):S;l.current=E,n==="controlled"&&s(E)},[]),d=A.useCallback((S,E=!1)=>{const T=typeof S=="function"?S(u.current):S;u.current=T,(n==="controlled"||E)&&a(T)},[]),f=A.useCallback(()=>c({}),[]),h=S=>{const E=S?{...S,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(E),d({})},p=A.useCallback((S,E)=>{c(T=>UT(T,S)===E?T:{...T,[S]:E})},[]),m=A.useCallback((S,E,T)=>{d(I=>UT(I,S)===E?I:{...I,[S]:E},T)},[]),g=A.useCallback((S,E)=>{const T=UT(u.current,S),I=!$C(aa(S,r.getValuesSnapshot()),E),k=CV(S,u.current);k[S]=I,d(k,T!==I)},[]),y=A.useCallback(S=>UT(l.current,S),[]),v=A.useCallback(S=>d(E=>{if(typeof S!="string")return E;const T=CV(S,E);return delete T[S],$C(T,E)?E:T}),[]),_=A.useCallback(S=>{if(S){const T=aa(S,u.current);if(typeof T=="boolean")return T;const I=aa(S,r.refValues.current),k=aa(S,r.valuesSnapshot.current);return!$C(I,k)}return Object.keys(u.current).length>0?UT(u.current):!$C(r.refValues.current,r.valuesSnapshot.current)},[]),w=A.useCallback(()=>u.current,[]),x=A.useCallback(()=>l.current,[]);return{touchedState:i,dirtyState:o,touchedRef:l,dirtyRef:u,setTouched:c,setDirty:d,resetDirty:h,resetTouched:f,isTouched:y,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:v,isDirty:_,getDirty:w,getTouched:x,setCalculatedFieldDirty:g}}function uvt({initialValues:e,onValuesChange:t,mode:n}){const r=A.useRef(!1),[i,s]=A.useState(e||{}),o=A.useRef(i),a=A.useRef(i),l=A.useCallback(({values:m,subscribers:g,updateState:y=!0,mergeWithPreviousValues:v=!0})=>{const _=o.current,w=m instanceof Function?m(o.current):m,x=v?{..._,...w}:w;o.current=x,y&&s(x),t==null||t(x,_),g==null||g.filter(Boolean).forEach(S=>S({updatedValues:x,previousValues:_}))},[t]),u=A.useCallback(m=>{var v;const g=aa(m.path,o.current),y=m.value instanceof Function?m.value(g):m.value;if(g!==y){const _=o.current,w=D6(m.path,y,o.current);l({values:w,updateState:m.updateState}),(v=m.subscribers)==null||v.filter(Boolean).forEach(x=>x({path:m.path,updatedValues:w,previousValues:_}))}},[l]),c=A.useCallback(m=>{a.current=m},[]),d=A.useCallback((m,g)=>{r.current||(r.current=!0,l({values:m,updateState:n==="controlled"}),c(m),g())},[l]),f=A.useCallback(()=>{l({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[l]),h=A.useCallback(()=>o.current,[]),p=A.useCallback(()=>a.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:l,setFieldValue:u,resetValues:f,setValuesSnapshot:c,initialize:d,getValues:h,getValuesSnapshot:p}}function cvt({$status:e}){const t=A.useRef({}),n=A.useCallback((i,s)=>{A.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=A.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:aa(i,o.previousValues),value:aa(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Xde(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Qde(e){const t=TV(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function AV(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,l=aa(a,t);let u=!1;return typeof o=="function"&&(i[a]=o(l,t,a)),typeof o=="object"&&Array.isArray(l)&&(u=!0,l.forEach((c,d)=>AV(o,t,`${a}.${d}`,i))),typeof o=="object"&&typeof l=="object"&&l!==null&&(u||AV(o,t,a,i)),i},r)}function IV(e,t){return Qde(typeof e=="function"?e(t):AV(e,t))}function AN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=IV(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const dvt="__MANTINE_FORM_INDEX__";function Jde(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${dvt}`)):!1:!1}function vAe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:l=!1,onValuesChange:u,transformValues:c=h=>h,enhanceGetInputProps:d,validate:f}={}){const h=nvt(r),p=uvt({initialValues:n,onValuesChange:u,mode:t}),m=lvt({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=avt({$values:p,$errors:h,$status:m}),y=cvt({$status:m}),[v,_]=A.useState(0),[w,x]=A.useState({}),S=A.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&_(z=>z+1)},[]),E=A.useCallback(z=>{o&&h.clearErrors(),t==="uncontrolled"&&_(q=>q+1),Object.keys(y.subscribers.current).forEach(q=>{const j=aa(q,p.refValues.current),H=aa(q,z);j!==H&&y.getFieldSubscribers(q).forEach(G=>G({previousValues:z,updatedValues:p.refValues.current}))})},[o]),T=A.useCallback(z=>{const q=p.refValues.current;p.initialize(z,()=>t==="uncontrolled"&&_(j=>j+1)),E(q)},[E]),I=A.useCallback((z,q,j)=>{const H=Jde(z,a),G=q instanceof Function?q(aa(z,p.refValues.current)):q;m.setCalculatedFieldDirty(z,G),m.setFieldTouched(z,!0),!H&&o&&h.clearFieldError(z),p.setFieldValue({path:z,value:q,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(z),H?J=>{const re=AN(z,f,J.updatedValues);re.hasError?h.setFieldError(z,re.error):h.clearFieldError(z)}:null,(j==null?void 0:j.forceUpdate)!==!1&&t!=="controlled"?()=>x(J=>({...J,[z]:(J[z]||0)+1})):null]})},[u,f]),k=A.useCallback(z=>{const q=p.refValues.current;p.setValues({values:z,updateState:t==="controlled"}),E(q)},[u,E]),P=A.useCallback(()=>{const z=IV(f,p.refValues.current);return h.setErrors(z.errors),z},[f]),L=A.useCallback(z=>{const q=AN(z,f,p.refValues.current);return q.hasError?h.setFieldError(z,q.error):h.clearFieldError(z),q},[f]),R=(z,{type:q="input",withError:j=!0,withFocus:H=!0,...G}={})=>{const re={onChange:tvt(ie=>I(z,ie,{forceUpdate:!1})),"data-path":Xde(e,z)};return j&&(re.error=h.errorsState[z]),q==="checkbox"?re[t==="controlled"?"checked":"defaultChecked"]=aa(z,p.refValues.current):re[t==="controlled"?"value":"defaultValue"]=aa(z,p.refValues.current),H&&(re.onFocus=()=>m.setFieldTouched(z,!0),re.onBlur=()=>{if(Jde(z,l)){const ie=AN(z,f,p.refValues.current);ie.hasError?h.setFieldError(z,ie.error):h.clearFieldError(z)}}),Object.assign(re,d==null?void 0:d({inputProps:re,field:z,options:{type:q,withError:j,withFocus:H,...G},form:M}))},$=(z,q)=>j=>{j==null||j.preventDefault();const H=P();H.hasErrors?q==null||q(H.errors,p.refValues.current,j):z==null||z(c(p.refValues.current),j)},D=z=>c(z||p.refValues.current),O=A.useCallback(z=>{z.preventDefault(),S()},[]),F=A.useCallback(z=>z?!AN(z,f,p.refValues.current).hasError:!IV(f,p.refValues.current).hasErrors,[f]),U=z=>`${v}-${z}-${w[z]||0}`,V=A.useCallback(z=>document.querySelector(`[data-path="${Xde(e,z)}"]`),[]),M={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:T,setValues:k,setFieldValue:I,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:S,validate:P,validateField:L,getInputProps:R,onSubmit:$,onReset:O,isValid:F,getTransformedValues:D,key:U,getInputNode:V};return evt(e,M),M}function fvt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function hvt(e){return fvt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const pvt=new URLSearchParams(window.location.search),mvt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?pvt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},gvt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function yvt(e,t,n){const[r,i]=A.useState(null),s=vAe({initialValues:mvt(e,n),validate:gvt(e)});return A.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Jb(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function vvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:l}=e;return b.jsx(sf.Group,{label:b.jsxs(Et,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(ge,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(ge,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ka,{text:s,required:o})})]}),description:l,...n,error:Jb(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsx(gn,{mt:"xs",children:a.map(u=>b.jsx(sf,{disabled:t,value:u.value,label:u.label},u.value))})})}function bvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:l,secondaryText:u}=e;return b.jsx(zl,{disabled:t,label:b.jsxs(Et,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(ge,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(ge,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ka,{text:o,required:a})})]}),description:u,placeholder:s,data:l,radius:"md",size:"md",...n,error:Jb(e,n,l)})}function _vt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return b.jsx(Pr.Wrapper,{label:b.jsxs(Et,{direction:"row",wrap:"nowrap",gap:4,children:[r&&b.jsx(ge,{style:{minWidth:"fit-content"},children:`${n}. `}),b.jsx(ge,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ka,{text:i,required:s})})]}),description:o,size:"md",children:b.jsx(Hd,{children:Array.isArray(t.value)?t.value.map(a=>b.jsx(Hd.Item,{children:a},a)):b.jsx(Hd.Item,{children:t.value})})})}function bAe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:l,rightLabel:u,secondaryText:c}=e;return b.jsx(ny.Group,{name:`radioInput${e.id}`,label:b.jsxs(Et,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(ge,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(ge,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ka,{text:s,required:o})})]}),description:c,...n,error:Jb(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsxs(gn,{mt:"xs",children:[l?b.jsx(Xe,{style:{textAlign:"center"},children:l}):null,a.map(d=>b.jsx(ny,{disabled:t,value:d.value,label:d.label},d.label)),b.jsx(Xe,{children:u})]})},e.id)}function wvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let l=1;l<=+s;l+=1)o.push({label:`${l}`,value:`${l}`});const a={...e,type:"radio",options:o};return b.jsx(bAe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function xvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:l,placeholder:u,secondaryText:c}=e;return b.jsx(sX,{disabled:t,placeholder:u,label:b.jsxs(Et,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(ge,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(ge,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ka,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:l,...n,error:Jb(e,n)})}function Evt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:l}=e,u=Jb(e,n);return b.jsx(Pr.Wrapper,{label:b.jsxs(Et,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(ge,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(ge,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ka,{text:s,required:o})})]}),description:l,error:u,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:b.jsx(s6,{disabled:t,marks:a,...n,h:40})})}function Svt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:l}=e;return b.jsx(qd,{disabled:t,placeholder:s,label:b.jsxs(Et,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(ge,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(ge,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ka,{text:o,required:a})})]}),description:l,radius:"md",size:"md",...n,value:n.value||"",error:Jb(e,n)})}function Tvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:l}=e;return b.jsx(eI,{disabled:t,placeholder:s,label:b.jsxs(Et,{direction:"row",wrap:"nowrap",gap:4,children:[i&&b.jsx(ge,{style:{minWidth:"fit-content"},children:`${r}. `}),b.jsx(ge,{style:{display:"block"},className:"no-last-child-bottom-padding",children:b.jsx(Ka,{text:o,required:a})})]}),description:l,radius:"md",size:"md",...n,value:n.value||"",error:Jb(e,n)})}function Cvt({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=DX(),l=Bh().uiConfig.enumerateQuestions??!1,u=A.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return b.jsxs(ge,{mb:"md",children:[e.type==="numerical"&&b.jsx(xvt,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="shortText"&&b.jsx(Svt,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="longText"&&b.jsx(Tvt,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="likert"&&b.jsx(wvt,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="dropdown"&&b.jsx(bvt,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="slider"&&b.jsx(Evt,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="radio"&&b.jsx(bAe,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="checkbox"&&b.jsx(vvt,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="iframe"&&b.jsx(_vt,{response:e,answer:i,index:r,enumerateQuestions:l})]})}function g$({config:e,location:t,status:n,style:r}){var w;const i=Xy(),s=ap(),o=n==null?void 0:n.answer,a=e,l=A.useMemo(()=>{var x;return((x=a==null?void 0:a.response)==null?void 0:x.filter(S=>S.location?S.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),u=Fc(),{updateResponseBlockValidation:c}=ju(),d=yvt(l,i,o||{}),[f,h]=A.useState(void 0),[p,m]=A.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Ro(x=>x),v=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,_=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return A.useEffect(()=>{const x=l.find(S=>S.type==="iframe");if(g&&x){const S=x.id;d.setValues({...d.values,[S]:g[S]})}},[g]),A.useEffect(()=>{y&&h(y)},[y]),A.useEffect(()=>{u(c({location:t,identifier:`${s}_${i}`,status:d.isValid(),values:Ah(d.values),provenanceGraph:f}))},[d.values,s,i,t,u,c,f]),b.jsxs("div",{style:r,children:[l.map((x,S)=>{var E,T;return b.jsx(Vi.Fragment,{children:x.hidden?"":b.jsxs(b.Fragment,{children:[b.jsx(Cvt,{storedAnswer:o?o[x.id]:void 0,answer:{...d.getInputProps(x.id,{type:x.type==="checkbox"?"checkbox":"input"})},response:x,index:S+1}),v&&p&&b.jsx(Xe,{children:`The correct answer is: ${(T=(E=a.correctAnswer)==null?void 0:E.find(I=>I.id===x.id))==null?void 0:T.answer}`})]})},`${x.id}-${i}`)}),b.jsxs(gn,{justify:"right",gap:"xs",children:[v&&_&&b.jsx(rn,{onClick:()=>m(!0),disabled:!d.isValid(),children:"Check Answer"}),_&&b.jsx(Qyt,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}function Avt({columns:e,catColumns:t,onAdd:n,onAddHistogram:r}){const[i,s]=A.useState(!1),[o,a]=A.useState(null),[l,u]=A.useState(null),[c,d]=A.useState(null);return i?b.jsxs(Gr,{children:[b.jsx(zl,{data:e,onChange:f=>a(f),placeholder:"Select X Column"}),b.jsx(zl,{data:e,onChange:f=>u(f),placeholder:"Select Y Column"}),b.jsx(rn,{disabled:!o||!l,onClick:()=>{n(o,l),s(!1)},children:"Create plot"}),b.jsx(zl,{data:t,onChange:f=>d(f),placeholder:"Select X Column"}),b.jsx(rn,{disabled:!c,onClick:()=>{r(c),s(!1)},children:"Add Histogram"})]}):b.jsx(Gr,{children:b.jsx(In,{variant:"light",size:150,onClick:()=>s(!0),children:b.jsx(HSe,{size:50})})})}const Ivt=Object.freeze(Object.defineProperty({__proto__:null,AddPlot:Avt},Symbol.toStringTag,{value:"Module"})),_Ae=A.createContext(null),hJ=({id:e="waveform",children:t})=>Vi.createElement("div",{id:e},t),kvt=["audioRate","audioContext","audioScriptProcessor","autoCenter","backend","backgroundColor","barGap","barHeight","barMinHeight","barRadius","barWidth","closeAudioContext","cursorColor","cursorWidth","fillParent","forceDecode","height","hideScrollbar","interact","loopSelection","maxCanvasWidth","mediaControls","mediaType","minPxPerSec","normalize","partialRender","pixelRatio","progressColor","removeMediaElementOnDestroy","renderer","responsive","scrollParent","skipLength","splitChannels","waveColor","autoCenterRate","autoCenterImmediately","drawingContextAttributes","duration","ignoreSilenceMode","rtl","splitChannelsOptions","vertical","xhr"],Rvt=e=>e?kvt.reduce((t,n)=>Object.prototype.hasOwnProperty.call(e,n)?Object.assign(Object.assign({},t),{[n]:e[n]}):t,{}):{};function la(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(u){try{l(r.next(u))}catch(c){s(c)}}function a(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof n?c:new n(function(d){d(c)})).then(o,a)}l((r=r.apply(e,t||[])).next())})}let lR=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const Zde={decode:function(e,t){return la(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function wAe(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(wAe(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function efe(e,t,n){const r=wAe(e,t||{});return n==null||n.appendChild(r),r}var Pvt=Object.freeze({__proto__:null,createElement:efe,default:efe});const Nvt={fetchBlob:function(e,t,n){return la(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){la(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let l=0;const u=d=>la(this,void 0,void 0,function*(){l+=(d==null?void 0:d.length)||0;const f=Math.round(l/a*100);s(f)}),c=()=>la(this,void 0,void 0,function*(){let d;try{d=yield o.read()}catch{return}d.done||(u(d.value),yield c())});c()})}(r.clone(),t),r.blob()})}};let Ovt=class extends lR{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return la(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}},kV=class RV extends lR{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const l=matchMedia("(pointer: coarse)").matches;let u=()=>{};const c=d=>{if(d.button!==o)return;d.preventDefault(),d.stopPropagation();let f=d.clientX,h=d.clientY,p=!1;const m=Date.now(),g=x=>{if(x.preventDefault(),x.stopPropagation(),l&&Date.now()-m<a)return;const S=x.clientX,E=x.clientY,T=S-f,I=E-h;if(p||Math.abs(T)>s||Math.abs(I)>s){const k=t.getBoundingClientRect(),{left:P,top:L}=k;p||(r==null||r(f-P,h-L),p=!0),n(T,I,S-P,E-L),f=S,h=E}},y=x=>{if(p){const S=x.clientX,E=x.clientY,T=t.getBoundingClientRect(),{left:I,top:k}=T;i==null||i(S-I,E-k)}u()},v=x=>{x.relatedTarget&&x.relatedTarget!==document.documentElement||y(x)},_=x=>{p&&(x.stopPropagation(),x.preventDefault())},w=x=>{p&&x.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",v),document.addEventListener("pointercancel",v),document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("click",_,{capture:!0}),u=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",v),document.removeEventListener("pointercancel",v),document.removeEventListener("touchmove",w),setTimeout(()=>{document.removeEventListener("click",_,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{u(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"});return n.innerHTML=`
      <style>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.call(this)}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,l)=>{const u=l*o;s.addColorStop(u,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:l,height:u}=r.canvas,c=u/2,d=this.getPixelRatio(),f=n.barWidth?n.barWidth*d:1,h=n.barGap?n.barGap*d:n.barWidth?f/2:0,p=n.barRadius||0,m=l/(f+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,v=0,_=0;for(let w=0;w<=a;w++){const x=Math.round(w*m);if(x>y){const T=Math.round(v*c*i),I=T+Math.round(_*c*i)||1;let k=c-T;n.barAlign==="top"?k=0:n.barAlign==="bottom"&&(k=u-I),r[g](y*(f+h),k,f,I,p),y=x,v=0,_=0}const S=Math.abs(s[w]||0),E=Math.abs(o[w]||0);S>v&&(v=S),E>_&&(_=E)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],l=a.length,{height:u}=r.canvas,c=u/2,d=r.canvas.width/l;r.moveTo(0,c);let f=0,h=0;for(let p=0;p<=l;p++){const m=Math.round(p*d);if(m>f){const y=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(f,y),f=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(f,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const l=this.getPixelRatio(),u=document.createElement("canvas");u.width=Math.round(r*l),u.height=Math.round(i*l),u.style.width=`${r}px`,u.style.height=`${i}px`,u.style.left=`${Math.round(s)}px`,o.appendChild(u);const c=u.getContext("2d");if(this.renderWaveform(t,n,c),u.width>0&&u.height>0){const d=u.cloneNode(),f=d.getContext("2d");f.drawImage(u,0,0),f.globalCompositeOperation="source-in",f.fillStyle=this.convertColorValues(n.progressColor),f.fillRect(0,0,u.width,u.height),a.appendChild(d)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:l}=this.scrollContainer,u=r/a;let c=Math.min(RV.MAX_CANVAS_WIDTH,l,u),d={};if(n.barWidth||n.barGap){const g=n.barWidth||.5,y=g+(n.barGap||g/2);c%y!=0&&(c=Math.floor(c/y)*y)}const f=g=>{if(g<0||g>=h||d[g])return;d[g]=!0;const y=g*c,v=Math.min(u-y,c);if(v<=0)return;const _=t.map(w=>{const x=Math.floor(y/u*w.length),S=Math.floor((y+v)/u*w.length);return w.slice(x,S)});this.renderSingleCanvas(_,n,v,i,y,s,o)},h=Math.ceil(u/c);if(!this.isScrollable){for(let g=0;g<h;g++)f(g);return}const p=this.scrollContainer.scrollLeft/u,m=Math.floor(p*h);f(m-1),f(m),f(m+1),h>1&&(this.unsubscribeOnScroll=this.on("scroll",()=>{const{scrollLeft:g}=this.scrollContainer,y=Math.floor(g/u*h);Object.keys(d).length>RV.MAX_NODES&&(s.innerHTML="",o.innerHTML="",d={}),f(y-1),f(y),f(y+1)}))}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,d){var f={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&d.indexOf(h)<0&&(f[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)d.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(f[h[p]]=c[h[p]])}return f}(n,["overlay"]);const a=document.createElement("div"),l=this.getHeight(o.height,o.splitChannels);a.style.height=`${l}px`,s&&i>0&&(a.style.marginTop=`-${l}px`),this.canvasWrapper.style.minHeight=`${l}px`,this.canvasWrapper.appendChild(a);const u=a.cloneNode();this.progressWrapper.appendChild(u),this.renderMultiCanvas(t,o,r,l,a,u)}render(t){return la(this,void 0,void 0,function*(){var n;this.timeouts.forEach(l=>l()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let l=0;l<t.numberOfChannels;l++){const u=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[l]);this.renderChannel([t.getChannelData(l)],u,a,l)}else{const l=[t.getChannelData(0)];t.numberOfChannels>1&&l.push(t.getChannelData(1)),this.renderChannel(l,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){var t;if((t=this.unsubscribeOnScroll)===null||t===void 0||t.call(this),delete this.unsubscribeOnScroll,!this.audioData)return;const{scrollWidth:n}=this.scrollContainer,{right:r}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&n!==this.scrollContainer.scrollWidth){const{right:i}=this.progressWrapper.getBoundingClientRect();let s=i-r;s*=2,s=s<0?Math.floor(s):Math.ceil(s),s/=2,this.scrollContainer.scrollLeft+=s}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,l=r+s,u=s/2;if(this.isDragging)o+30>l?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>l)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?u:0));const c=o-r-u;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,d=c/i,f=(c+s)/i;this.emit("scroll",d,f,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return la(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(l=>{l?o(l):a(new Error("Could not export image"))},t,n)})))})}};kV.MAX_CANVAS_WIDTH=8e3,kV.MAX_NODES=10;let Dvt=class extends lR{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}},tfe=class extends lR{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return la(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return la(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return la(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}};const Mvt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let PV=class xAe extends Ovt{static create(t){return new xAe(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new tfe:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},Mvt,t),this.timer=new Dvt;const r=n?void 0:this.getMediaElement();this.renderer=new kV(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{this.emit("error",t.error)}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return la(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const l=u=>this.emit("loading",u);n=yield Nvt.fetchBlob(t,l,a)}this.setSrc(t,n);const o=yield new Promise(a=>{const l=i||this.getDuration();l?a(l):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof tfe&&(a.duration=o)}if(r)this.decodedData=Zde.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield Zde.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return la(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return la(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),l=[],u=a.length/n;for(let c=0;c<n;c++){const d=a.slice(Math.floor(c*u),Math.ceil((c+1)*u));let f=0;for(let h=0;h<d.length;h++){const p=d[h];Math.abs(p)>Math.abs(f)&&(f=p)}l.push(Math.round(f*r)/r)}s.push(l)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return la(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return la(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};PV.BasePlugin=class extends lR{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},PV.dom=Pvt;function $vt(e){return PV.create(e)}function nfe(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const Lvt=(e,t)=>{const n=[...e],r=[...t],i=n.filter(o=>r.findIndex(a=>a.name===o.name)===-1),s=r.filter(o=>n.findIndex(a=>a.name===o.name)===-1);return{disabled:i,enabled:s}};var Fvt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function EAe(e){var{container:t,plugins:n=[],onMount:r}=e,i=Fvt(e,["container","plugins","onMount"]);const s=A.useRef([]),[o,a]=A.useState(null);return A.useEffect(()=>{if(!t)return;let l=[];n&&(l=n.map(nfe)),s.current=l;const u=$vt(Object.assign(Object.assign({container:t},i),{plugins:l}));return r==null||r(u),a(u),()=>{u.destroy()}},[t]),A.useEffect(()=>{if(o){const l=n.map(nfe),{disabled:u,enabled:c}=Lvt(s.current,l);s.current=l,u.forEach(d=>{d.name&&(o==null||o.destroyPlugin(d.name))}),c.forEach(d=>{d.name&&(o==null||o.addPlugin(d).initPlugin(d.name))})}},[n]),o}function jvt(e){return!!e&&typeof e!="string"&&typeof e!="number"&&typeof e!="boolean"&&"type"in e&&"props"in e}var Bvt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const SAe=e=>{var{children:t,plugins:n=[],onMount:r}=e,i=Bvt(e,["children","plugins","onMount"]);const s=A.useMemo(()=>{let a={};return A.Children.forEach(t,l=>{if(typeof l!="object"||l===null||["string","number"].includes(typeof l)||!jvt(l))return;const{props:u,type:c}=l;if(c===hJ){const{id:d}=u;a=Rvt(u),a=Object.assign(Object.assign({},a),{container:"#"+d})}}),a},[t]),o=EAe(Object.assign(Object.assign({plugins:n,onMount:r},i),s));return Vi.createElement(_Ae.Provider,{value:o},t)};SAe.defaultProps={children:null,plugins:[]};function AB(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(u){try{l(r.next(u))}catch(c){s(c)}}function a(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof n?c:new n(function(d){d(c)})).then(o,a)}l((r=r.apply(e,[])).next())})}let TAe=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},zvt=class extends TAe{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}},Uvt=class extends TAe{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}};const Vvt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];let Hvt=class CAe extends zvt{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new Uvt,this.subscriptions.push(this.timer.on("tick",()=>{const l=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+l,this.emit("record-progress",this.duration)}))}static create(t){return new CAe(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let l=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const u=setInterval(()=>{var c,d,f,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),g=new Float32Array(p);if(this.dataWindow){const y=Math.max(0,p-this.dataWindow.length);g.set(this.dataWindow.slice(-m+o),y)}g.set(a,p-o),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((d=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&d!==void 0?d:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const g=Math.abs(a[m]);g>p&&(p=g)}if(l+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[l]=p,l++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(f=this.dataWindow)===null||f===void 0?void 0:f.length)!==null&&h!==void 0?h:0)/100;let m=l/this.dataWindow.length;this.wavesurfer.options.barWidth&&(m+=this.wavesurfer.options.barWidth/this.wavesurfer.getWidth()),this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.seekTo(m),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(g=>{console.error("Error rendering real-time recording data:",g)})}}},10);return{onDestroy:()=>{clearInterval(u),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(u),this.stopMic()}}}startMic(t){return AB(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return AB(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||Vvt.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const l=new Blob(i,{type:r.mimeType});this.emit(o,l),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(l)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return AB(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}};function AAe({width:e=70,height:t=50}){const n=A.useRef(null),r=A.useCallback(i=>{n.current=i,n.current&&(n.current.registerPlugin(Hvt.create({scrollingWaveform:!0,renderRecordedAudio:!1})).startRecording(),n.current.setOptions({height:50,waveColor:"#FA5252"}))},[]);return b.jsx(ge,{style:{width:`${e}px`,height:`${t}px`},children:b.jsx(SAe,{onMount:r,children:b.jsx(hJ,{id:"waveform"})})})}function rfe({parameters:e,setAnswer:t}){return A.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{new MediaRecorder(r).start();const s=new AudioContext,o=s.createMediaStreamSource(r),a=s.createAnalyser();a.minDecibels=-45,o.connect(a);const l=a.frequencyBinCount,u=new Uint8Array(l);let c=!1;const d=()=>{if(!c){a.getByteFrequencyData(u);for(let f=0;f<l;f+=1)u[f]>0&&(c=!0,t({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(d)}};window.requestAnimationFrame(d)})},[t]),b.jsx(Ya,{style:{height:"70%",width:"100%"},children:b.jsxs(Gr,{children:[b.jsx(Xe,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),b.jsx(Xe,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),b.jsx(Xe,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please return the study."}),b.jsx(Ya,{children:b.jsx(AAe,{height:200,width:400})})]})})}const qvt=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:rfe,default:rfe},Symbol.toStringTag,{value:"Module"}));function vm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Wvt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function SS(e){let t,n,r;e.length!==2?(t=vm,n=(a,l)=>vm(e(a),l),r=(a,l)=>e(a)-l):(t=e===vm||e===Wvt?e:Gvt,n=e,r=e);function i(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function o(a,l,u=0,c=a.length){const d=i(a,l,u,c-1);return d>u&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:i,center:o,right:s}}function Gvt(){return 0}function IAe(e){return e===null?NaN:+e}function*Yvt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const kAe=SS(vm),iy=kAe.right,Kvt=kAe.left;SS(IAe).center;function Xvt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Qvt(e,t){const n=Xvt(e,t);return n&&Math.sqrt(n)}function nh(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class qa{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class ife extends Map{constructor(t,n=NAe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(NV(this,t))}has(t){return super.has(NV(this,t))}set(t,n){return super.set(RAe(this,t),n)}delete(t){return super.delete(PAe(this,t))}}class y$ extends Set{constructor(t,n=NAe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(NV(this,t))}add(t){return super.add(RAe(this,t))}delete(t){return super.delete(PAe(this,t))}}function NV({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function RAe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function PAe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function NAe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Jvt(e,t){return Array.from(t,n=>e[n])}function Zvt(e=vm){if(e===vm)return OAe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function OAe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const e1t=Math.sqrt(50),t1t=Math.sqrt(10),n1t=Math.sqrt(2);function v$(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=e1t?10:s>=t1t?5:s>=n1t?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/o,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*o,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?v$(e,t,n*2):[a,l,u]}function OV(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?v$(t,e,n):v$(e,t,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(i+u)/-o;else for(let u=0;u<a;++u)l[u]=(i+u)*o;return l}function DV(e,t,n){return t=+t,e=+e,n=+n,v$(e,t,n)[2]}function sy(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?DV(t,e,n):DV(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Pc(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function MV(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function DAe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?OAe:Zvt(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*d/l+f)),p=Math.min(r,Math.floor(t+(l-u)*d/l+f));DAe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(VT(e,n,t),i(e[r],s)>0&&VT(e,n,r);o<a;){for(VT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?VT(e,n,a):(++a,VT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function VT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function $V(e,t,n){if(e=Float64Array.from(Yvt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return MV(e);if(t>=1)return Pc(e);var r,i=(r-1)*t,s=Math.floor(i),o=Pc(DAe(e,s).subarray(0,s+1)),a=MV(e.subarray(s+1));return o+(a-o)*(i-s)}}function MAe(e,t,n=IAe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function $Ae(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function LAe(e,t){return $V(e,.5,t)}function*r1t(e){for(const t of e)yield*t}function FAe(e){return Array.from(r1t(e))}function Ol(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function hI(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function i1t(e,...t){e=new y$(e),t=t.map(s1t);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function s1t(e){return e instanceof y$?e:new y$(e)}function o1t(...e){const t=new y$;for(const n of e)for(const r of n)t.add(r);return t}var a1t={value:()=>{}};function M6(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new yD(n)}function yD(e){this._=e}function l1t(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}yD.prototype=M6.prototype={constructor:yD,on:function(e,t){var n=this._,r=l1t(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=u1t(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=sfe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=sfe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new yD(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function u1t(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function sfe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=a1t,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var LV="http://www.w3.org/1999/xhtml";const ofe={svg:"http://www.w3.org/2000/svg",xhtml:LV,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $6(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ofe.hasOwnProperty(t)?{space:ofe[t],local:e}:e}function c1t(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===LV&&t.documentElement.namespaceURI===LV?t.createElement(e):t.createElementNS(n,e)}}function d1t(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function jAe(e){var t=$6(e);return(t.local?d1t:c1t)(t)}function f1t(){}function pJ(e){return e==null?f1t:function(){return this.querySelector(e)}}function h1t(e){typeof e!="function"&&(e=pJ(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,u,c=0;c<o;++c)(l=s[c])&&(u=e.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Xa(r,this._parents)}function BAe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function p1t(){return[]}function zAe(e){return e==null?p1t:function(){return this.querySelectorAll(e)}}function m1t(e){return function(){return BAe(e.apply(this,arguments))}}function g1t(e){typeof e=="function"?e=m1t(e):e=zAe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(r.push(e.call(l,l.__data__,u,o)),i.push(l));return new Xa(r,i)}function UAe(e){return function(){return this.matches(e)}}function VAe(e){return function(t){return t.matches(e)}}var y1t=Array.prototype.find;function v1t(e){return function(){return y1t.call(this.children,e)}}function b1t(){return this.firstElementChild}function _1t(e){return this.select(e==null?b1t:v1t(typeof e=="function"?e:VAe(e)))}var w1t=Array.prototype.filter;function x1t(){return Array.from(this.children)}function E1t(e){return function(){return w1t.call(this.children,e)}}function S1t(e){return this.selectAll(e==null?x1t:E1t(typeof e=="function"?e:VAe(e)))}function T1t(e){typeof e!="function"&&(e=UAe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new Xa(r,this._parents)}function HAe(e){return new Array(e.length)}function C1t(){return new Xa(this._enter||this._groups.map(HAe),this._parents)}function b$(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}b$.prototype={constructor:b$,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function A1t(e){return function(){return e}}function I1t(e,t,n,r,i,s){for(var o=0,a,l=t.length,u=s.length;o<u;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new b$(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function k1t(e,t,n,r,i,s,o){var a,l,u=new Map,c=t.length,d=s.length,f=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=o.call(l,l.__data__,a,t)+"",u.has(h)?i[a]=l:u.set(h,l));for(a=0;a<d;++a)h=o.call(e,s[a],a,s)+"",(l=u.get(h))?(r[a]=l,l.__data__=s[a],u.delete(h)):n[a]=new b$(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(i[a]=l)}function R1t(e){return e.__data__}function P1t(e,t){if(!arguments.length)return Array.from(this,R1t);var n=t?k1t:I1t,r=this._parents,i=this._groups;typeof e!="function"&&(e=A1t(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],d=i[u],f=d.length,h=N1t(e.call(c,c&&c.__data__,u,r)),p=h.length,m=a[u]=new Array(p),g=o[u]=new Array(p),y=l[u]=new Array(f);n(c,d,m,g,y,h,t);for(var v=0,_=0,w,x;v<p;++v)if(w=m[v]){for(v>=_&&(_=v+1);!(x=g[_])&&++_<p;);w._next=x||null}}return o=new Xa(o,r),o._enter=a,o._exit=l,o}function N1t(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function O1t(){return new Xa(this._exit||this._groups.map(HAe),this._parents)}function D1t(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function M1t(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=n[l],c=r[l],d=u.length,f=a[l]=new Array(d),h,p=0;p<d;++p)(h=u[p]||c[p])&&(f[p]=h);for(;l<i;++l)a[l]=n[l];return new Xa(a,this._parents)}function $1t(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function L1t(e){e||(e=F1t);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),u,c=0;c<a;++c)(u=o[c])&&(l[c]=u);l.sort(t)}return new Xa(i,this._parents).order()}function F1t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function j1t(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function B1t(){return Array.from(this)}function z1t(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function U1t(){let e=0;for(const t of this)++e;return e}function V1t(){return!this.node()}function H1t(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function q1t(e){return function(){this.removeAttribute(e)}}function W1t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function G1t(e,t){return function(){this.setAttribute(e,t)}}function Y1t(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function K1t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function X1t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Q1t(e,t){var n=$6(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?W1t:q1t:typeof t=="function"?n.local?X1t:K1t:n.local?Y1t:G1t)(n,t))}function qAe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function J1t(e){return function(){this.style.removeProperty(e)}}function Z1t(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ebt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function tbt(e,t,n){return arguments.length>1?this.each((t==null?J1t:typeof t=="function"?ebt:Z1t)(e,t,n??"")):Zx(this.node(),e)}function Zx(e,t){return e.style.getPropertyValue(t)||qAe(e).getComputedStyle(e,null).getPropertyValue(t)}function nbt(e){return function(){delete this[e]}}function rbt(e,t){return function(){this[e]=t}}function ibt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function sbt(e,t){return arguments.length>1?this.each((t==null?nbt:typeof t=="function"?ibt:rbt)(e,t)):this.node()[e]}function WAe(e){return e.trim().split(/^|\s+/)}function mJ(e){return e.classList||new GAe(e)}function GAe(e){this._node=e,this._names=WAe(e.getAttribute("class")||"")}GAe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function YAe(e,t){for(var n=mJ(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function KAe(e,t){for(var n=mJ(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function obt(e){return function(){YAe(this,e)}}function abt(e){return function(){KAe(this,e)}}function lbt(e,t){return function(){(t.apply(this,arguments)?YAe:KAe)(this,e)}}function ubt(e,t){var n=WAe(e+"");if(arguments.length<2){for(var r=mJ(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?lbt:t?obt:abt)(n,t))}function cbt(){this.textContent=""}function dbt(e){return function(){this.textContent=e}}function fbt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function hbt(e){return arguments.length?this.each(e==null?cbt:(typeof e=="function"?fbt:dbt)(e)):this.node().textContent}function pbt(){this.innerHTML=""}function mbt(e){return function(){this.innerHTML=e}}function gbt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ybt(e){return arguments.length?this.each(e==null?pbt:(typeof e=="function"?gbt:mbt)(e)):this.node().innerHTML}function vbt(){this.nextSibling&&this.parentNode.appendChild(this)}function bbt(){return this.each(vbt)}function _bt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wbt(){return this.each(_bt)}function xbt(e){var t=typeof e=="function"?e:jAe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ebt(){return null}function Sbt(e,t){var n=typeof e=="function"?e:jAe(e),r=t==null?Ebt:typeof t=="function"?t:pJ(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Tbt(){var e=this.parentNode;e&&e.removeChild(this)}function Cbt(){return this.each(Tbt)}function Abt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ibt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kbt(e){return this.select(e?Ibt:Abt)}function Rbt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Pbt(e){return function(t){e.call(this,t,this.__data__)}}function Nbt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Obt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Dbt(e,t,n){return function(){var r=this.__on,i,s=Pbt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Mbt(e,t,n){var r=Nbt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Dbt:Obt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function XAe(e,t,n){var r=qAe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function $bt(e,t){return function(){return XAe(this,e,t)}}function Lbt(e,t){return function(){return XAe(this,e,t.apply(this,arguments))}}function Fbt(e,t){return this.each((typeof t=="function"?Lbt:$bt)(e,t))}function*jbt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var gJ=[null];function Xa(e,t){this._groups=e,this._parents=t}function uR(){return new Xa([[document.documentElement]],gJ)}function Bbt(){return this}Xa.prototype=uR.prototype={constructor:Xa,select:h1t,selectAll:g1t,selectChild:_1t,selectChildren:S1t,filter:T1t,data:P1t,enter:C1t,exit:O1t,join:D1t,merge:M1t,selection:Bbt,order:$1t,sort:L1t,call:j1t,nodes:B1t,node:z1t,size:U1t,empty:V1t,each:H1t,attr:Q1t,style:tbt,property:sbt,classed:ubt,text:hbt,html:ybt,raise:bbt,lower:wbt,append:xbt,insert:Sbt,remove:Cbt,clone:kbt,datum:Rbt,on:Mbt,dispatch:Fbt,[Symbol.iterator]:jbt};function mo(e){return typeof e=="string"?new Xa([[document.querySelector(e)]],[document.documentElement]):new Xa([[e]],gJ)}function zbt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function afe(e,t){if(e=zbt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Ubt(e){return typeof e=="string"?new Xa([document.querySelectorAll(e)],[document.documentElement]):new Xa([BAe(e)],gJ)}const FV={capture:!0,passive:!1};function jV(e){e.preventDefault(),e.stopImmediatePropagation()}function Vbt(e){var t=e.document.documentElement,n=mo(e).on("dragstart.drag",jV,FV);"onselectstart"in t?n.on("selectstart.drag",jV,FV):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Hbt(e,t){var n=e.document.documentElement,r=mo(e).on("dragstart.drag",null);t&&(r.on("click.drag",jV,FV),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function TS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function cR(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Qy(){}var lb=.7,eE=1/lb,fx="\\s*([+-]?\\d+)\\s*",pI="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ih="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qbt=/^#([0-9a-f]{3,8})$/,Wbt=new RegExp(`^rgb\\(${fx},${fx},${fx}\\)$`),Gbt=new RegExp(`^rgb\\(${Ih},${Ih},${Ih}\\)$`),Ybt=new RegExp(`^rgba\\(${fx},${fx},${fx},${pI}\\)$`),Kbt=new RegExp(`^rgba\\(${Ih},${Ih},${Ih},${pI}\\)$`),Xbt=new RegExp(`^hsl\\(${pI},${Ih},${Ih}\\)$`),Qbt=new RegExp(`^hsla\\(${pI},${Ih},${Ih},${pI}\\)$`),lfe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};TS(Qy,ub,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ufe,formatHex:ufe,formatHex8:Jbt,formatHsl:Zbt,formatRgb:cfe,toString:cfe});function ufe(){return this.rgb().formatHex()}function Jbt(){return this.rgb().formatHex8()}function Zbt(){return QAe(this).formatHsl()}function cfe(){return this.rgb().formatRgb()}function ub(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=qbt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?dfe(t):n===3?new Ys(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?IN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?IN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Wbt.exec(e))?new Ys(t[1],t[2],t[3],1):(t=Gbt.exec(e))?new Ys(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ybt.exec(e))?IN(t[1],t[2],t[3],t[4]):(t=Kbt.exec(e))?IN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Xbt.exec(e))?pfe(t[1],t[2]/100,t[3]/100,1):(t=Qbt.exec(e))?pfe(t[1],t[2]/100,t[3]/100,t[4]):lfe.hasOwnProperty(e)?dfe(lfe[e]):e==="transparent"?new Ys(NaN,NaN,NaN,0):null}function dfe(e){return new Ys(e>>16&255,e>>8&255,e&255,1)}function IN(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ys(e,t,n,r)}function yJ(e){return e instanceof Qy||(e=ub(e)),e?(e=e.rgb(),new Ys(e.r,e.g,e.b,e.opacity)):new Ys}function oy(e,t,n,r){return arguments.length===1?yJ(e):new Ys(e,t,n,r??1)}function Ys(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}TS(Ys,oy,cR(Qy,{brighter(e){return e=e==null?eE:Math.pow(eE,e),new Ys(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?lb:Math.pow(lb,e),new Ys(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ys(j1(this.r),j1(this.g),j1(this.b),_$(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ffe,formatHex:ffe,formatHex8:e_t,formatRgb:hfe,toString:hfe}));function ffe(){return`#${A1(this.r)}${A1(this.g)}${A1(this.b)}`}function e_t(){return`#${A1(this.r)}${A1(this.g)}${A1(this.b)}${A1((isNaN(this.opacity)?1:this.opacity)*255)}`}function hfe(){const e=_$(this.opacity);return`${e===1?"rgb(":"rgba("}${j1(this.r)}, ${j1(this.g)}, ${j1(this.b)}${e===1?")":`, ${e})`}`}function _$(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function j1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function A1(e){return e=j1(e),(e<16?"0":"")+e.toString(16)}function pfe(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Rd(e,t,n,r)}function QAe(e){if(e instanceof Rd)return new Rd(e.h,e.s,e.l,e.opacity);if(e instanceof Qy||(e=ub(e)),!e)return new Rd;if(e instanceof Rd)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Rd(o,a,l,e.opacity)}function mI(e,t,n,r){return arguments.length===1?QAe(e):new Rd(e,t,n,r??1)}function Rd(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}TS(Rd,mI,cR(Qy,{brighter(e){return e=e==null?eE:Math.pow(eE,e),new Rd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?lb:Math.pow(lb,e),new Rd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ys(IB(e>=240?e-240:e+120,i,r),IB(e,i,r),IB(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Rd(mfe(this.h),kN(this.s),kN(this.l),_$(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_$(this.opacity);return`${e===1?"hsl(":"hsla("}${mfe(this.h)}, ${kN(this.s)*100}%, ${kN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function mfe(e){return e=(e||0)%360,e<0?e+360:e}function kN(e){return Math.max(0,Math.min(1,e||0))}function IB(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const JAe=Math.PI/180,ZAe=180/Math.PI,w$=18,eIe=.96422,tIe=1,nIe=.82521,rIe=4/29,hx=6/29,iIe=3*hx*hx,t_t=hx*hx*hx;function sIe(e){if(e instanceof kh)return new kh(e.l,e.a,e.b,e.opacity);if(e instanceof rm)return oIe(e);e instanceof Ys||(e=yJ(e));var t=NB(e.r),n=NB(e.g),r=NB(e.b),i=kB((.2225045*t+.7168786*n+.0606169*r)/tIe),s,o;return t===n&&n===r?s=o=i:(s=kB((.4360747*t+.3850649*n+.1430804*r)/eIe),o=kB((.0139322*t+.0971045*n+.7141733*r)/nIe)),new kh(116*i-16,500*(s-i),200*(i-o),e.opacity)}function x$(e,t,n,r){return arguments.length===1?sIe(e):new kh(e,t,n,r??1)}function kh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}TS(kh,x$,cR(Qy,{brighter(e){return new kh(this.l+w$*(e??1),this.a,this.b,this.opacity)},darker(e){return new kh(this.l-w$*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=eIe*RB(t),e=tIe*RB(e),n=nIe*RB(n),new Ys(PB(3.1338561*t-1.6168667*e-.4906146*n),PB(-.9787684*t+1.9161415*e+.033454*n),PB(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function kB(e){return e>t_t?Math.pow(e,1/3):e/iIe+rIe}function RB(e){return e>hx?e*e*e:iIe*(e-rIe)}function PB(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function NB(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function n_t(e){if(e instanceof rm)return new rm(e.h,e.c,e.l,e.opacity);if(e instanceof kh||(e=sIe(e)),e.a===0&&e.b===0)return new rm(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*ZAe;return new rm(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function E$(e,t,n,r){return arguments.length===1?n_t(e):new rm(e,t,n,r??1)}function rm(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function oIe(e){if(isNaN(e.h))return new kh(e.l,0,0,e.opacity);var t=e.h*JAe;return new kh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}TS(rm,E$,cR(Qy,{brighter(e){return new rm(this.h,this.c,this.l+w$*(e??1),this.opacity)},darker(e){return new rm(this.h,this.c,this.l-w$*(e??1),this.opacity)},rgb(){return oIe(this).rgb()}}));var aIe=-.14861,vJ=1.78277,bJ=-.29227,L6=-.90649,gI=1.97294,gfe=gI*L6,yfe=gI*vJ,vfe=vJ*bJ-L6*aIe;function r_t(e){if(e instanceof B1)return new B1(e.h,e.s,e.l,e.opacity);e instanceof Ys||(e=yJ(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(vfe*r+gfe*t-yfe*n)/(vfe+gfe-yfe),s=r-i,o=(gI*(n-i)-bJ*s)/L6,a=Math.sqrt(o*o+s*s)/(gI*i*(1-i)),l=a?Math.atan2(o,s)*ZAe-120:NaN;return new B1(l<0?l+360:l,a,i,e.opacity)}function BV(e,t,n,r){return arguments.length===1?r_t(e):new B1(e,t,n,r??1)}function B1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}TS(B1,BV,cR(Qy,{brighter(e){return e=e==null?eE:Math.pow(eE,e),new B1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?lb:Math.pow(lb,e),new B1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*JAe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Ys(255*(t+n*(aIe*r+vJ*i)),255*(t+n*(bJ*r+L6*i)),255*(t+n*(gI*r)),this.opacity)}}));function lIe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function uIe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return lIe((n-r/t)*t,o,i,s,a)}}function cIe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return lIe((n-r/t)*t,i,s,o,a)}}const F6=e=>()=>e;function dIe(e,t){return function(n){return e+n*t}}function i_t(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function j6(e,t){var n=t-e;return n?dIe(e,n>180||n<-180?n-360*Math.round(n/360):n):F6(isNaN(e)?t:e)}function s_t(e){return(e=+e)==1?Ks:function(t,n){return n-t?i_t(t,n,e):F6(isNaN(t)?n:t)}}function Ks(e,t){var n=t-e;return n?dIe(e,n):F6(isNaN(e)?t:e)}const yI=function e(t){var n=s_t(t);function r(i,s){var o=n((i=oy(i)).r,(s=oy(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=Ks(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function fIe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=oy(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var o_t=fIe(uIe),a_t=fIe(cIe);function _J(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function hIe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function l_t(e,t){return(hIe(t)?_J:pIe)(e,t)}function pIe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=ug(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function mIe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function hc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function gIe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=ug(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var zV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,OB=new RegExp(zV.source,"g");function u_t(e){return function(){return e}}function c_t(e){return function(t){return e(t)+""}}function wJ(e,t){var n=zV.lastIndex=OB.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=zV.exec(e))&&(i=OB.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:hc(r,i)})),n=OB.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?c_t(l[0].x):u_t(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function ug(e,t){var n=typeof t,r;return t==null||n==="boolean"?F6(t):(n==="number"?hc:n==="string"?(r=ub(t))?(t=r,yI):wJ:t instanceof ub?yI:t instanceof Date?mIe:hIe(t)?_J:Array.isArray(t)?pIe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?gIe:hc)(e,t)}function d_t(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function f_t(e,t){var n=j6(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function dR(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var bfe=180/Math.PI,UV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yIe(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*bfe,skewX:Math.atan(l)*bfe,scaleX:o,scaleY:a}}var RN;function h_t(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?UV:yIe(t.a,t.b,t.c,t.d,t.e,t.f)}function p_t(e){return e==null||(RN||(RN=document.createElementNS("http://www.w3.org/2000/svg","g")),RN.setAttribute("transform",e),!(e=RN.transform.baseVal.consolidate()))?UV:(e=e.matrix,yIe(e.a,e.b,e.c,e.d,e.e,e.f))}function vIe(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,d,f,h,p){if(u!==d||c!==f){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:hc(u,d)},{i:m-2,x:hc(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function o(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:hc(u,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:hc(u,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(u,c,d,f,h,p){if(u!==d||c!==f){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:hc(u,d)},{i:m-2,x:hc(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,d,f),o(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var p=-1,m=f.length,g;++p<m;)d[(g=f[p]).i]=g.x(h);return d.join("")}}}var bIe=vIe(h_t,"px, ","px)","deg)"),_Ie=vIe(p_t,", ",")",")"),m_t=1e-12;function _fe(e){return((e=Math.exp(e))+1/e)/2}function g_t(e){return((e=Math.exp(e))-1/e)/2}function y_t(e){return((e=Math.exp(2*e))-1)/(e+1)}const v_t=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],u=s[2],c=o[0],d=o[1],f=o[2],h=c-a,p=d-l,m=h*h+p*p,g,y;if(m<m_t)y=Math.log(f/u)/t,g=function(E){return[a+E*h,l+E*p,u*Math.exp(t*E*y)]};else{var v=Math.sqrt(m),_=(f*f-u*u+r*m)/(2*u*n*v),w=(f*f-u*u-r*m)/(2*f*n*v),x=Math.log(Math.sqrt(_*_+1)-_),S=Math.log(Math.sqrt(w*w+1)-w);y=(S-x)/t,g=function(E){var T=E*y,I=_fe(x),k=u/(n*v)*(I*y_t(t*T+x)-g_t(x));return[a+k*h,l+k*p,u*I/_fe(t*T+x)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);function wIe(e){return function(t,n){var r=e((t=mI(t)).h,(n=mI(n)).h),i=Ks(t.s,n.s),s=Ks(t.l,n.l),o=Ks(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const b_t=wIe(j6);var __t=wIe(Ks);function w_t(e,t){var n=Ks((e=x$(e)).l,(t=x$(t)).l),r=Ks(e.a,t.a),i=Ks(e.b,t.b),s=Ks(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function xIe(e){return function(t,n){var r=e((t=E$(t)).h,(n=E$(n)).h),i=Ks(t.c,n.c),s=Ks(t.l,n.l),o=Ks(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const x_t=xIe(j6);var E_t=xIe(Ks);function EIe(e){return function t(n){n=+n;function r(i,s){var o=e((i=BV(i)).h,(s=BV(s)).h),a=Ks(i.s,s.s),l=Ks(i.l,s.l),u=Ks(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=t,r}(1)}const S_t=EIe(j6);var T_t=EIe(Ks);function xJ(e,t){t===void 0&&(t=e,e=ug);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function C_t(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const A_t=Object.freeze(Object.defineProperty({__proto__:null,interpolate:ug,interpolateArray:l_t,interpolateBasis:uIe,interpolateBasisClosed:cIe,interpolateCubehelix:S_t,interpolateCubehelixLong:T_t,interpolateDate:mIe,interpolateDiscrete:d_t,interpolateHcl:x_t,interpolateHclLong:E_t,interpolateHsl:b_t,interpolateHslLong:__t,interpolateHue:f_t,interpolateLab:w_t,interpolateNumber:hc,interpolateNumberArray:_J,interpolateObject:gIe,interpolateRgb:yI,interpolateRgbBasis:o_t,interpolateRgbBasisClosed:a_t,interpolateRound:dR,interpolateString:wJ,interpolateTransformCss:bIe,interpolateTransformSvg:_Ie,interpolateZoom:v_t,piecewise:xJ,quantize:C_t},Symbol.toStringTag,{value:"Module"}));var tE=0,jC=0,HT=0,SIe=1e3,S$,BC,T$=0,cb=0,B6=0,vI=typeof performance=="object"&&performance.now?performance:Date,TIe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function z6(){return cb||(TIe(I_t),cb=vI.now()+B6)}function I_t(){cb=0}function bI(){this._call=this._time=this._next=null}bI.prototype=EJ.prototype={constructor:bI,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?z6():+n)+(t==null?0:+t),!this._next&&BC!==this&&(BC?BC._next=this:S$=this,BC=this),this._call=e,this._time=n,VV()},stop:function(){this._call&&(this._call=null,this._time=1/0,VV())}};function EJ(e,t,n){var r=new bI;return r.restart(e,t,n),r}function k_t(){z6(),++tE;for(var e=S$,t;e;)(t=cb-e._time)>=0&&e._call.call(void 0,t),e=e._next;--tE}function wfe(){cb=(T$=vI.now())+B6,tE=jC=0;try{k_t()}finally{tE=0,P_t(),cb=0}}function R_t(){var e=vI.now(),t=e-T$;t>SIe&&(B6-=t,T$=e)}function P_t(){for(var e,t=S$,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:S$=n);BC=e,VV(r)}function VV(e){if(!tE){jC&&(jC=clearTimeout(jC));var t=e-cb;t>24?(e<1/0&&(jC=setTimeout(wfe,e-vI.now()-B6)),HT&&(HT=clearInterval(HT))):(HT||(T$=vI.now(),HT=setInterval(R_t,SIe)),tE=1,TIe(wfe))}}function xfe(e,t,n){var r=new bI;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function N_t(e,t,n){var r=new bI,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?z6():+a,r._restart(function l(u){u+=i,r._restart(l,i+=o,a),s(u)},o,a)},r.restart(e,t,n),r)}var O_t=M6("start","end","cancel","interrupt"),D_t=[],CIe=0,Efe=1,HV=2,vD=3,Sfe=4,qV=5,bD=6;function U6(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;M_t(e,n,{name:t,index:r,group:i,on:O_t,tween:D_t,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:CIe})}function SJ(e,t){var n=xf(e,t);if(n.state>CIe)throw new Error("too late; already scheduled");return n}function up(e,t){var n=xf(e,t);if(n.state>vD)throw new Error("too late; already running");return n}function xf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function M_t(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=EJ(s,0,n.time);function s(u){n.state=Efe,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,d,f,h;if(n.state!==Efe)return l();for(c in r)if(h=r[c],h.name===n.name){if(h.state===vD)return xfe(o);h.state===Sfe?(h.state=bD,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=bD,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(xfe(function(){n.state===vD&&(n.state=Sfe,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=HV,n.on.call("start",e,e.__data__,n.index,n.group),n.state===HV){for(n.state=vD,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=qV,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===qV&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=bD,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function WV(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>HV&&r.state<qV,r.state=bD,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function $_t(e){return this.each(function(){WV(this,e)})}function L_t(e,t){var n,r;return function(){var i=up(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function F_t(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=up(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}s.tween=i}}function j_t(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=xf(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?L_t:F_t)(n,e,t))}function TJ(e,t,n){var r=e._id;return e.each(function(){var i=up(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return xf(i,r).value[t]}}function AIe(e,t){var n;return(typeof t=="number"?hc:t instanceof ub?yI:(n=ub(t))?(t=n,yI):wJ)(e,t)}function B_t(e){return function(){this.removeAttribute(e)}}function z_t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function U_t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function V_t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function H_t(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function q_t(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function W_t(e,t){var n=$6(e),r=n==="transform"?_Ie:AIe;return this.attrTween(e,typeof t=="function"?(n.local?q_t:H_t)(n,r,TJ(this,"attr."+e,t)):t==null?(n.local?z_t:B_t)(n):(n.local?V_t:U_t)(n,r,t))}function G_t(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Y_t(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function K_t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Y_t(e,s)),n}return i._value=t,i}function X_t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&G_t(e,s)),n}return i._value=t,i}function Q_t(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=$6(e);return this.tween(n,(r.local?K_t:X_t)(r,t))}function J_t(e,t){return function(){SJ(this,e).delay=+t.apply(this,arguments)}}function Z_t(e,t){return t=+t,function(){SJ(this,e).delay=t}}function ewt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?J_t:Z_t)(t,e)):xf(this.node(),t).delay}function twt(e,t){return function(){up(this,e).duration=+t.apply(this,arguments)}}function nwt(e,t){return t=+t,function(){up(this,e).duration=t}}function rwt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?twt:nwt)(t,e)):xf(this.node(),t).duration}function iwt(e,t){if(typeof t!="function")throw new Error;return function(){up(this,e).ease=t}}function swt(e){var t=this._id;return arguments.length?this.each(iwt(t,e)):xf(this.node(),t).ease}function owt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;up(this,e).ease=n}}function awt(e){if(typeof e!="function")throw new Error;return this.each(owt(this._id,e))}function lwt(e){typeof e!="function"&&(e=UAe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new jm(r,this._parents,this._name,this._id)}function uwt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],u=n[a],c=l.length,d=o[a]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;a<r;++a)o[a]=t[a];return new jm(o,this._parents,this._name,this._id)}function cwt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function dwt(e,t,n){var r,i,s=cwt(t)?SJ:up;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function fwt(e,t){var n=this._id;return arguments.length<2?xf(this.node(),n).on.on(e):this.each(dwt(n,e,t))}function hwt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function pwt(){return this.on("end.remove",hwt(this._id))}function mwt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=pJ(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,u=s[o]=new Array(l),c,d,f=0;f<l;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,U6(u[f],t,n,f,u,xf(c,n)));return new jm(s,this._parents,t,n)}function gwt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zAe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,p=xf(c,n),m=0,g=f.length;m<g;++m)(h=f[m])&&U6(h,t,n,m,f,p);s.push(f),o.push(c)}return new jm(s,o,t,n)}var ywt=uR.prototype.constructor;function vwt(){return new ywt(this._groups,this._parents)}function bwt(e,t){var n,r,i;return function(){var s=Zx(this,e),o=(this.style.removeProperty(e),Zx(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function IIe(e){return function(){this.style.removeProperty(e)}}function _wt(e,t,n){var r,i=n+"",s;return function(){var o=Zx(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function wwt(e,t,n){var r,i,s;return function(){var o=Zx(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Zx(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function xwt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=up(this,e),u=l.on,c=l.value[s]==null?a||(a=IIe(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(o,i=c),l.on=r}}function Ewt(e,t,n){var r=(e+="")=="transform"?bIe:AIe;return t==null?this.styleTween(e,bwt(e,r)).on("end.style."+e,IIe(e)):typeof t=="function"?this.styleTween(e,wwt(e,r,TJ(this,"style."+e,t))).each(xwt(this._id,e)):this.styleTween(e,_wt(e,r,t),n).on("end.style."+e,null)}function Swt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Twt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Swt(e,o,n)),r}return s._value=t,s}function Cwt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Twt(e,t,n??""))}function Awt(e){return function(){this.textContent=e}}function Iwt(e){return function(){var t=e(this);this.textContent=t??""}}function kwt(e){return this.tween("text",typeof e=="function"?Iwt(TJ(this,"text",e)):Awt(e==null?"":e+""))}function Rwt(e){return function(t){this.textContent=e.call(this,t)}}function Pwt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Rwt(i)),t}return r._value=e,r}function Nwt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Pwt(e))}function Owt(){for(var e=this._name,t=this._id,n=kIe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var c=xf(l,t);U6(l,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new jm(r,this._parents,e,n)}function Dwt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var u=up(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&s()})}var Mwt=0;function jm(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function kIe(){return++Mwt}var Op=uR.prototype;jm.prototype={constructor:jm,select:mwt,selectAll:gwt,selectChild:Op.selectChild,selectChildren:Op.selectChildren,filter:lwt,merge:uwt,selection:vwt,transition:Owt,call:Op.call,nodes:Op.nodes,node:Op.node,size:Op.size,empty:Op.empty,each:Op.each,on:fwt,attr:W_t,attrTween:Q_t,style:Ewt,styleTween:Cwt,text:kwt,textTween:Nwt,remove:pwt,tween:j_t,delay:ewt,duration:rwt,ease:swt,easeVarying:awt,end:Dwt,[Symbol.iterator]:Op[Symbol.iterator]};function $wt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Lwt={time:null,delay:0,duration:250,ease:$wt};function Fwt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function jwt(e){var t,n;e instanceof jm?(t=e._id,e=e._name):(t=kIe(),(n=Lwt).time=z6(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&U6(l,e,t,u,o,n||Fwt(l,t));return new jm(r,this._parents,e,t)}uR.prototype.interrupt=$_t;uR.prototype.transition=jwt;const DB=e=>()=>e;function Bwt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function zwt(e){e.stopImmediatePropagation()}function MB(e){e.preventDefault(),e.stopImmediatePropagation()}var Tfe={name:"drag"},$B={name:"space"},U_={name:"handle"},V_={name:"center"};const{abs:Cfe,max:Wo,min:Go}=Math;function Afe(e){return[+e[0],+e[1]]}function GV(e){return[Afe(e[0]),Afe(e[1])]}var _D={name:"x",handles:["w","e"].map(_I),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},wD={name:"y",handles:["n","s"].map(_I),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Uwt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(_I),input:function(e){return e==null?null:GV(e)},output:function(e){return e}},Dp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ife={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},kfe={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Vwt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Hwt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function _I(e){return{type:e}}function qwt(e){return!e.ctrlKey&&!e.button}function Wwt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Gwt(){return navigator.maxTouchPoints||"ontouchstart"in this}function LB(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Ywt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Kwt(){return CJ(_D)}function Xwt(){return CJ(wD)}function Qwt(){return CJ(Uwt)}function CJ(e){var t=Wwt,n=qwt,r=Gwt,i=!0,s=M6("start","brush","end"),o=6,a;function l(g){var y=g.property("__brush",m).selectAll(".overlay").data([_I("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Dp.overlay).merge(y).each(function(){var _=LB(this).extent;mo(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),g.selectAll(".selection").data([_I("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Dp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(_){return _.type});v.exit().remove(),v.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return Dp[_.type]}),g.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(g,y,v){g.tween?g.on("start.brush",function(_){c(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){c(this,arguments).end(_)}).tween("brush",function(){var _=this,w=_.__brush,x=c(_,arguments),S=w.selection,E=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),T=ug(S,E);function I(k){w.selection=k===1&&E===null?null:T(k),u.call(_),x.brush()}return S!==null&&E!==null?I:I(1)}):g.each(function(){var _=this,w=arguments,x=_.__brush,S=e.input(typeof y=="function"?y.apply(_,w):y,x.extent),E=c(_,w).beforestart();WV(_),x.selection=S===null?null:S,u.call(_),E.start(v).brush(v).end(v)})},l.clear=function(g,y){l.move(g,null,y)};function u(){var g=mo(this),y=LB(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var _=g.__brush.emitter;return _&&(!v||!_.clean)?_:new d(g,y,v)}function d(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}d.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var _=mo(this.that).datum();s.call(g,this.that,new Bwt(g,{sourceEvent:y,target:l,selection:e.output(this.state.selection),mode:v,dispatch:s}),_)}};function f(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,_=(i&&g.metaKey?v="overlay":v)==="selection"?Tfe:i&&g.altKey?V_:U_,w=e===wD?null:Vwt[v],x=e===_D?null:Hwt[v],S=LB(y),E=S.extent,T=S.selection,I=E[0][0],k,P,L=E[0][1],R,$,D=E[1][0],O,F,U=E[1][1],V,M,z=0,q=0,j,H=w&&x&&i&&g.shiftKey,G,J,re=Array.from(g.touches||[g],pe=>{const ue=pe.identifier;return pe=afe(pe,y),pe.point0=pe.slice(),pe.identifier=ue,pe});WV(y);var ie=c(y,arguments,!0).beforestart();if(v==="overlay"){T&&(j=!0);const pe=[re[0],re[1]||re[0]];S.selection=T=[[k=e===wD?I:Go(pe[0][0],pe[1][0]),R=e===_D?L:Go(pe[0][1],pe[1][1])],[O=e===wD?D:Wo(pe[0][0],pe[1][0]),V=e===_D?U:Wo(pe[0][1],pe[1][1])]],re.length>1&&ze(g)}else k=T[0][0],R=T[0][1],O=T[1][0],V=T[1][1];P=k,$=R,F=O,M=V;var te=mo(y).attr("pointer-events","none"),ae=te.selectAll(".overlay").attr("cursor",Dp[v]);if(g.touches)ie.moved=ce,ie.ended=Oe;else{var _e=mo(g.view).on("mousemove.brush",ce,!0).on("mouseup.brush",Oe,!0);i&&_e.on("keydown.brush",$e,!0).on("keyup.brush",Ne,!0),Vbt(g.view)}u.call(y),ie.start(g,_.name);function ce(pe){for(const ue of pe.changedTouches||[pe])for(const Se of re)Se.identifier===ue.identifier&&(Se.cur=afe(ue,y));if(H&&!G&&!J&&re.length===1){const ue=re[0];Cfe(ue.cur[0]-ue[0])>Cfe(ue.cur[1]-ue[1])?J=!0:G=!0}for(const ue of re)ue.cur&&(ue[0]=ue.cur[0],ue[1]=ue.cur[1]);j=!0,MB(pe),ze(pe)}function ze(pe){const ue=re[0],Se=ue.point0;var De;switch(z=ue[0]-Se[0],q=ue[1]-Se[1],_){case $B:case Tfe:{w&&(z=Wo(I-k,Go(D-O,z)),P=k+z,F=O+z),x&&(q=Wo(L-R,Go(U-V,q)),$=R+q,M=V+q);break}case U_:{re[1]?(w&&(P=Wo(I,Go(D,re[0][0])),F=Wo(I,Go(D,re[1][0])),w=1),x&&($=Wo(L,Go(U,re[0][1])),M=Wo(L,Go(U,re[1][1])),x=1)):(w<0?(z=Wo(I-k,Go(D-k,z)),P=k+z,F=O):w>0&&(z=Wo(I-O,Go(D-O,z)),P=k,F=O+z),x<0?(q=Wo(L-R,Go(U-R,q)),$=R+q,M=V):x>0&&(q=Wo(L-V,Go(U-V,q)),$=R,M=V+q));break}case V_:{w&&(P=Wo(I,Go(D,k-z*w)),F=Wo(I,Go(D,O+z*w))),x&&($=Wo(L,Go(U,R-q*x)),M=Wo(L,Go(U,V+q*x)));break}}F<P&&(w*=-1,De=k,k=O,O=De,De=P,P=F,F=De,v in Ife&&ae.attr("cursor",Dp[v=Ife[v]])),M<$&&(x*=-1,De=R,R=V,V=De,De=$,$=M,M=De,v in kfe&&ae.attr("cursor",Dp[v=kfe[v]])),S.selection&&(T=S.selection),G&&(P=T[0][0],F=T[1][0]),J&&($=T[0][1],M=T[1][1]),(T[0][0]!==P||T[0][1]!==$||T[1][0]!==F||T[1][1]!==M)&&(S.selection=[[P,$],[F,M]],u.call(y),ie.brush(pe,_.name))}function Oe(pe){if(zwt(pe),pe.touches){if(pe.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else Hbt(pe.view,j),_e.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);te.attr("pointer-events","all"),ae.attr("cursor",Dp.overlay),S.selection&&(T=S.selection),Ywt(T)&&(S.selection=null,u.call(y)),ie.end(pe,_.name)}function $e(pe){switch(pe.keyCode){case 16:{H=w&&x;break}case 18:{_===U_&&(w&&(O=F-z*w,k=P+z*w),x&&(V=M-q*x,R=$+q*x),_=V_,ze(pe));break}case 32:{(_===U_||_===V_)&&(w<0?O=F-z:w>0&&(k=P-z),x<0?V=M-q:x>0&&(R=$-q),_=$B,ae.attr("cursor",Dp.selection),ze(pe));break}default:return}MB(pe)}function Ne(pe){switch(pe.keyCode){case 16:{H&&(G=J=H=!1,ze(pe));break}case 18:{_===V_&&(w<0?O=F:w>0&&(k=P),x<0?V=M:x>0&&(R=$),_=U_,ze(pe));break}case 32:{_===$B&&(pe.altKey?(w&&(O=F-z*w,k=P+z*w),x&&(V=M-q*x,R=$+q*x),_=V_):(w<0?O=F:w>0&&(k=P),x<0?V=M:x>0&&(R=$),_=U_),ae.attr("cursor",Dp[v]),ze(pe));break}default:return}MB(pe)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=GV(t.apply(this,arguments)),g.dim=e,g}return l.extent=function(g){return arguments.length?(t=typeof g=="function"?g:DB(GV(g)),l):t},l.filter=function(g){return arguments.length?(n=typeof g=="function"?g:DB(!!g),l):n},l.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:DB(!!g),l):r},l.handleSize=function(g){return arguments.length?(o=+g,l):o},l.keyModifiers=function(g){return arguments.length?(i=!!g,l):i},l.on=function(){var g=s.on.apply(s,arguments);return g===s?l:g},l}const YV=Math.PI,KV=2*YV,Yv=1e-6,Jwt=KV-Yv;function RIe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Zwt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return RIe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let AJ=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?RIe:Zwt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-t,u=i-n,c=o-t,d=a-n,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Yv)if(!(Math.abs(d*l-u*c)>Yv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=l*l+u*u,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(f),_=s*Math.tan((YV-Math.acos((m+f-g)/(2*y*v)))/2),w=_/v,x=_/y;Math.abs(w-1)>Yv&&this._append`L${t+w*c},${n+w*d}`,this._append`A${s},${s},0,0,${+(d*h>c*p)},${this._x1=t+x*l},${this._y1=n+x*u}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,c=n+l,d=1^o,f=o?i-s:s-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Yv||Math.abs(this._y1-c)>Yv)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%KV+KV),f>Jwt?this._append`A${r},${r},0,1,${d},${t-a},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=c}`:f>Yv&&this._append`A${r},${r},0,${+(f>=YV)},${d},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function V6(){return new AJ}V6.prototype=AJ.prototype;const bm=11102230246251565e-32,Yo=134217729,ext=(3+8*bm)*bm;function FB(e,t,n,r,i){let s,o,a,l,u=t[0],c=r[0],d=0,f=0;c>u==c>-u?(s=u,u=t[++d]):(s=c,c=r[++f]);let h=0;if(d<e&&f<n)for(c>u==c>-u?(o=u+s,a=s-(o-u),u=t[++d]):(o=c+s,a=s-(o-c),c=r[++f]),s=o,a!==0&&(i[h++]=a);d<e&&f<n;)c>u==c>-u?(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=t[++d]):(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=r[++f]),s=o,a!==0&&(i[h++]=a);for(;d<e;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=t[++d],s=o,a!==0&&(i[h++]=a);for(;f<n;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=r[++f],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function txt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function fR(e){return new Float64Array(e)}const nxt=(3+16*bm)*bm,rxt=(2+12*bm)*bm,ixt=(9+64*bm)*bm*bm,H_=fR(4),Rfe=fR(8),Pfe=fR(12),Nfe=fR(16),Ia=fR(4);function sxt(e,t,n,r,i,s,o){let a,l,u,c,d,f,h,p,m,g,y,v,_,w,x,S,E,T;const I=e-i,k=n-i,P=t-s,L=r-s;w=I*L,f=Yo*I,h=f-(f-I),p=I-h,f=Yo*L,m=f-(f-L),g=L-m,x=p*g-(w-h*m-p*m-h*g),S=P*k,f=Yo*P,h=f-(f-P),p=P-h,f=Yo*k,m=f-(f-k),g=k-m,E=p*g-(S-h*m-p*m-h*g),y=x-E,d=x-y,H_[0]=x-(y+d)+(d-E),v=w+y,d=v-w,_=w-(v-d)+(y-d),y=_-S,d=_-y,H_[1]=_-(y+d)+(d-S),T=v+y,d=T-v,H_[2]=v-(T-d)+(y-d),H_[3]=T;let R=txt(4,H_),$=rxt*o;if(R>=$||-R>=$||(d=e-I,a=e-(I+d)+(d-i),d=n-k,u=n-(k+d)+(d-i),d=t-P,l=t-(P+d)+(d-s),d=r-L,c=r-(L+d)+(d-s),a===0&&l===0&&u===0&&c===0)||($=ixt*o+ext*Math.abs(R),R+=I*c+L*a-(P*u+k*l),R>=$||-R>=$))return R;w=a*L,f=Yo*a,h=f-(f-a),p=a-h,f=Yo*L,m=f-(f-L),g=L-m,x=p*g-(w-h*m-p*m-h*g),S=l*k,f=Yo*l,h=f-(f-l),p=l-h,f=Yo*k,m=f-(f-k),g=k-m,E=p*g-(S-h*m-p*m-h*g),y=x-E,d=x-y,Ia[0]=x-(y+d)+(d-E),v=w+y,d=v-w,_=w-(v-d)+(y-d),y=_-S,d=_-y,Ia[1]=_-(y+d)+(d-S),T=v+y,d=T-v,Ia[2]=v-(T-d)+(y-d),Ia[3]=T;const D=FB(4,H_,4,Ia,Rfe);w=I*c,f=Yo*I,h=f-(f-I),p=I-h,f=Yo*c,m=f-(f-c),g=c-m,x=p*g-(w-h*m-p*m-h*g),S=P*u,f=Yo*P,h=f-(f-P),p=P-h,f=Yo*u,m=f-(f-u),g=u-m,E=p*g-(S-h*m-p*m-h*g),y=x-E,d=x-y,Ia[0]=x-(y+d)+(d-E),v=w+y,d=v-w,_=w-(v-d)+(y-d),y=_-S,d=_-y,Ia[1]=_-(y+d)+(d-S),T=v+y,d=T-v,Ia[2]=v-(T-d)+(y-d),Ia[3]=T;const O=FB(D,Rfe,4,Ia,Pfe);w=a*c,f=Yo*a,h=f-(f-a),p=a-h,f=Yo*c,m=f-(f-c),g=c-m,x=p*g-(w-h*m-p*m-h*g),S=l*u,f=Yo*l,h=f-(f-l),p=l-h,f=Yo*u,m=f-(f-u),g=u-m,E=p*g-(S-h*m-p*m-h*g),y=x-E,d=x-y,Ia[0]=x-(y+d)+(d-E),v=w+y,d=v-w,_=w-(v-d)+(y-d),y=_-S,d=_-y,Ia[1]=_-(y+d)+(d-S),T=v+y,d=T-v,Ia[2]=v-(T-d)+(y-d),Ia[3]=T;const F=FB(O,Pfe,4,Ia,Nfe);return Nfe[F-1]}function PN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),l=o-a,u=Math.abs(o+a);return Math.abs(l)>=nxt*u?l:-sxt(e,t,n,r,i,s,u)}const Ofe=Math.pow(2,-52),NN=new Uint32Array(512);class C${static from(t,n=cxt,r=dxt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new C$(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let I=0;I<o;I++){const k=t[2*I],P=t[2*I+1];k<a&&(a=k),P<l&&(l=P),k>u&&(u=k),P>c&&(c=P),this._ids[I]=I}const d=(a+u)/2,f=(l+c)/2;let h,p,m;for(let I=0,k=1/0;I<o;I++){const P=jB(d,f,t[2*I],t[2*I+1]);P<k&&(h=I,k=P)}const g=t[2*h],y=t[2*h+1];for(let I=0,k=1/0;I<o;I++){if(I===h)continue;const P=jB(g,y,t[2*I],t[2*I+1]);P<k&&P>0&&(p=I,k=P)}let v=t[2*p],_=t[2*p+1],w=1/0;for(let I=0;I<o;I++){if(I===h||I===p)continue;const k=lxt(g,y,v,_,t[2*I],t[2*I+1]);k<w&&(m=I,w=k)}let x=t[2*m],S=t[2*m+1];if(w===1/0){for(let P=0;P<o;P++)this._dists[P]=t[2*P]-t[0]||t[2*P+1]-t[1];Bw(this._ids,this._dists,0,o-1);const I=new Uint32Array(o);let k=0;for(let P=0,L=-1/0;P<o;P++){const R=this._ids[P],$=this._dists[R];$>L&&(I[k++]=R,L=$)}this.hull=I.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(PN(g,y,v,_,x,S)<0){const I=p,k=v,P=_;p=m,v=x,_=S,m=I,x=k,S=P}const E=uxt(g,y,v,_,x,S);this._cx=E.x,this._cy=E.y;for(let I=0;I<o;I++)this._dists[I]=jB(t[2*I],t[2*I+1],E.x,E.y);Bw(this._ids,this._dists,0,o-1),this._hullStart=h;let T=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,_)]=p,s[this._hashKey(x,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let I=0,k,P;I<this._ids.length;I++){const L=this._ids[I],R=t[2*L],$=t[2*L+1];if(I>0&&Math.abs(R-k)<=Ofe&&Math.abs($-P)<=Ofe||(k=R,P=$,L===h||L===p||L===m))continue;let D=0;for(let M=0,z=this._hashKey(R,$);M<this._hashSize&&(D=s[(z+M)%this._hashSize],!(D!==-1&&D!==r[D]));M++);D=n[D];let O=D,F;for(;F=r[O],PN(R,$,t[2*O],t[2*O+1],t[2*F],t[2*F+1])>=0;)if(O=F,O===D){O=-1;break}if(O===-1)continue;let U=this._addTriangle(O,L,r[O],-1,-1,i[O]);i[L]=this._legalize(U+2),i[O]=U,T++;let V=r[O];for(;F=r[V],PN(R,$,t[2*V],t[2*V+1],t[2*F],t[2*F+1])<0;)U=this._addTriangle(V,L,F,i[L],-1,i[V]),i[L]=this._legalize(U+2),r[V]=V,T--,V=F;if(O===D)for(;F=n[O],PN(R,$,t[2*F],t[2*F+1],t[2*O],t[2*O+1])<0;)U=this._addTriangle(F,L,O,-1,i[O],i[F]),this._legalize(U+2),i[F]=U,r[O]=O,T--,O=F;this._hullStart=n[L]=O,r[O]=n[V]=L,r[L]=V,s[this._hashKey(R,$)]=L,s[this._hashKey(t[2*O],t[2*O+1])]=O}this.hull=new Uint32Array(T);for(let I=0,k=this._hullStart;I<T;I++)this.hull[I]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(oxt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=NN[--s];continue}const u=a-a%3,c=l+(t+1)%3,d=u+(a+2)%3,f=n[o],h=n[t],p=n[c],m=n[d];if(axt(i[2*f],i[2*f+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=f;const y=r[d];if(y===-1){let _=this._hullStart;do{if(this._hullTri[_]===d){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,d);const v=u+(a+1)%3;s<NN.length&&(NN[s++]=v)}else{if(s===0)break;t=NN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function oxt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function jB(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function axt(e,t,n,r,i,s,o,a){const l=e-o,u=t-a,c=n-o,d=r-a,f=i-o,h=s-a,p=l*l+u*u,m=c*c+d*d,g=f*f+h*h;return l*(d*g-m*h)-u*(c*g-m*f)+p*(c*h-d*f)<0}function lxt(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,u=s-t,c=o*o+a*a,d=l*l+u*u,f=.5/(o*u-a*l),h=(u*c-a*d)*f,p=(o*d-l*c)*f;return h*h+p*p}function uxt(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,u=s-t,c=o*o+a*a,d=l*l+u*u,f=.5/(o*u-a*l),h=e+(u*c-a*d)*f,p=t+(o*d-l*c)*f;return{x:h,y:p}}function Bw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;qT(e,i,s),t[e[n]]>t[e[r]]&&qT(e,n,r),t[e[s]]>t[e[r]]&&qT(e,s,r),t[e[n]]>t[e[s]]&&qT(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;qT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Bw(e,t,s,r),Bw(e,t,n,o-1)):(Bw(e,t,n,o-1),Bw(e,t,s,r))}}function qT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function cxt(e){return e[0]}function dxt(e){return e[1]}const Dfe=1e-6;class I1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Dfe||Math.abs(this._y1-s)>Dfe)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class XV{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let fxt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,_;m<y;m+=3,g+=2){const w=r[m]*2,x=r[m+1]*2,S=r[m+2]*2,E=t[w],T=t[w+1],I=t[x],k=t[x+1],P=t[S],L=t[S+1],R=I-E,$=k-T,D=P-E,O=L-T,F=(R*O-$*D)*2;if(Math.abs(F)<1e-9){if(s===void 0){s=o=0;for(const V of n)s+=t[V*2],o+=t[V*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-E)*O-(o-T)*D);v=(E+P)/2-U*O,_=(T+L)/2+U*D}else{const U=1/F,V=R*R+$*$,M=D*D+O*O;v=E+(O*V-$*M)*U,_=T+(R*M-D*V)*U}a[g]=v,a[g+1]=_}let l=n[n.length-1],u,c=l*4,d,f=t[2*l],h,p=t[2*l+1];i.fill(0);for(let m=0;m<n.length;++m)l=n[m],u=c,d=f,h=p,c=l*4,f=t[2*l],p=t[2*l+1],i[u+2]=i[c]=h-p,i[u+3]=i[c+1]=f-d}render(t){const n=t==null?t=new I1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,d=r.length;c<d;++c){const f=r[c];if(f<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(f/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let l,u=s[s.length-1];for(let c=0;c<s.length;++c){l=u,u=s[c];const d=Math.floor(i[u]/3)*2,f=o[d],h=o[d+1],p=l*4,m=this._project(f,h,a[p+2],a[p+3]);m&&this._renderSegment(f,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new I1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new I1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new XV;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+l-2)%l]&&n[(s+3)%o]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let l=o;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=i[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],l=n[r-1],u,c=this._regioncode(a,l),d,f=0;for(let h=0;h<r;h+=2)if(s=a,o=l,a=n[h],l=n[h+1],u=c,c=this._regioncode(a,l),u===0&&c===0)d=f,f=0,i?i.push(a,l):i=[a,l];else{let p,m,g,y,v;if(u===0){if((p=this._clipSegment(s,o,a,l,u,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,l,s,o,c,u))===null)continue;[y,v,m,g]=p,d=f,f=this._edgecode(m,g),d&&f&&this._edge(t,d,f,i,i.length),i?i.push(m,g):i=[m,g]}d=f,f=this._edgecode(y,v),d&&f&&this._edge(t,d,f,i,i.length),i?i.push(y,v):i=[y,v]}if(i)d=f,f=this._edgecode(i[0],i[1]),d&&f&&this._edge(t,d,f,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let l,u,c=s||o;c&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),s?(t=l,n=u,s=this._regioncode(t,n)):(r=l,i=u,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,c=a.length,d,f=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)d=f,f=this._edgecode(a[u],a[u+1]),d&&f&&(u=this._edge(t,d,f,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(l=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(l=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,l=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,l=n+(s=o)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const hxt=2*Math.PI,q_=Math.pow;function pxt(e){return e[0]}function mxt(e){return e[1]}function gxt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function yxt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class IJ{static from(t,n=pxt,r=mxt,i){return new IJ("length"in t?vxt(t,n,r,i):Float64Array.from(bxt(t,n,r,i)))}constructor(t){this._delaunator=new C$(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&gxt(t)){this.collinear=Int32Array.from({length:n.length/2},(f,h)=>h).sort((f,h)=>n[2*f]-n[2*h]||n[2*f+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],d=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let f=0,h=n.length/2;f<h;++f){const p=yxt(n[2*f],n[2*f+1],d);n[2*f]=p[0],n[2*f+1]=p[1]}this._delaunator=new C$(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const c=s[l%3===2?l-2:l+1];(r[l]===-1||o[c]===-1)&&(o[c]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new fxt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const d=a.indexOf(t);d>0&&(yield a[d-1]),d<a.length-1&&(yield a[d+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=o[u],u=u%3===2?u-2:u+1,o[u]!==t)return;if(u=s[u],u===-1){const d=r[(i[t]+1)%r.length];d!==c&&(yield d);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,d=q_(n-u[t*2],2)+q_(r-u[t*2+1],2);const f=i[t];let h=f;do{let p=l[h];const m=q_(n-u[p*2],2)+q_(r-u[p*2+1],2);if(m<d&&(d=m,c=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&q_(n-u[h*2],2)+q_(r-u[h*2+1],2)<d)return h;break}}while(h!==f);return c}render(t){const n=t==null?t=new I1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l<o)continue;const u=s[o]*2,c=s[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new I1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],l=i[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,hxt)}return r&&r.value()}renderHull(t){const n=t==null?t=new I1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new XV;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new I1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new XV;return this.renderTriangle(t,n),n.value()}}function vxt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*bxt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Mfe={},BB={},zB=34,WT=10,UB=13;function PIe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function _xt(e,t){var n=PIe(e);return function(r,i){return t(n(r),i,e)}}function $fe(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function wl(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function wxt(e){return e<0?"-"+wl(-e,6):e>9999?"+"+wl(e,6):wl(e,4)}function xxt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":wxt(e.getUTCFullYear())+"-"+wl(e.getUTCMonth()+1,2)+"-"+wl(e.getUTCDate(),2)+(i?"T"+wl(t,2)+":"+wl(n,2)+":"+wl(r,2)+"."+wl(i,3)+"Z":r?"T"+wl(t,2)+":"+wl(n,2)+":"+wl(r,2)+"Z":n||t?"T"+wl(t,2)+":"+wl(n,2)+"Z":"")}function NIe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(d,f){var h,p,m=i(d,function(g,y){if(h)return h(g,y-1);p=g,h=f?_xt(g,f):PIe(g)});return m.columns=p||[],m}function i(d,f){var h=[],p=d.length,m=0,g=0,y,v=p<=0,_=!1;d.charCodeAt(p-1)===WT&&--p,d.charCodeAt(p-1)===UB&&--p;function w(){if(v)return BB;if(_)return _=!1,Mfe;var S,E=m,T;if(d.charCodeAt(E)===zB){for(;m++<p&&d.charCodeAt(m)!==zB||d.charCodeAt(++m)===zB;);return(S=m)>=p?v=!0:(T=d.charCodeAt(m++))===WT?_=!0:T===UB&&(_=!0,d.charCodeAt(m)===WT&&++m),d.slice(E+1,S-1).replace(/""/g,'"')}for(;m<p;){if((T=d.charCodeAt(S=m++))===WT)_=!0;else if(T===UB)_=!0,d.charCodeAt(m)===WT&&++m;else if(T!==n)continue;return d.slice(E,S)}return v=!0,d.slice(E,p)}for(;(y=w())!==BB;){for(var x=[];y!==Mfe&&y!==BB;)x.push(y),y=w();f&&(x=f(x,g++))==null||h.push(x)}return h}function s(d,f){return d.map(function(h){return f.map(function(p){return c(h[p])}).join(e)})}function o(d,f){return f==null&&(f=$fe(d)),[f.map(c).join(e)].concat(s(d,f)).join(`
`)}function a(d,f){return f==null&&(f=$fe(d)),s(d,f).join(`
`)}function l(d){return d.map(u).join(`
`)}function u(d){return d.map(c).join(e)}function c(d){return d==null?"":d instanceof Date?xxt(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}var Ext=NIe(","),Sxt=Ext.parse;function Txt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Cxt(e,t){return fetch(e,t).then(Txt)}function Axt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Cxt(t,n).then(function(i){return e(i,r)})}}var Ixt=Axt(Sxt);function kxt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,l=0,u=0;for(s=0;s<o;++s)a=n[s],l+=a.x,u+=a.y;for(l=(l/o-e)*r,u=(u/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=l,a.y-=u}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Rxt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return OIe(this.cover(t,n),t,n,e)}function OIe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,l=e._y0,u=e._x1,c=e._y1,d,f,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(d=(a+u)/2))?a=d:u=d,(g=n>=(f=(l+c)/2))?l=f:c=f,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(d=(a+u)/2))?a=d:u=d,(g=n>=(f=(l+c)/2))?l=f:c=f;while((y=g<<1|m)===(v=(p>=f)<<1|h>=d));return i[v]=s,i[y]=o,e}function Pxt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<l&&(l=i),i>c&&(c=i),s<u&&(u=s),s>d&&(d=s));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<r;++n)OIe(this,o[n],a[n],e[n]);return this}function Nxt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=s;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,o*=2,u){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Oxt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Dxt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ja(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Mxt(e,t,n){var r,i=this._x0,s=this._y0,o,a,l,u,c=this._x1,d=this._y1,f=[],h=this._root,p,m;for(h&&f.push(new ja(h,i,s,c,d)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,d=t+n,n*=n);p=f.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>d||(l=p.x1)<i||(u=p.y1)<s))if(h.length){var g=(o+l)/2,y=(a+u)/2;f.push(new ja(h[3],g,y,l,u),new ja(h[2],o,y,g,u),new ja(h[1],g,a,l,y),new ja(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=f[f.length-1],f[f.length-1]=f[f.length-1-m],f[f.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),w=v*v+_*_;if(w<n){var x=Math.sqrt(n=w);i=e-x,s=t-x,c=e+x,d=t+x,r=h.data}}return r}function $xt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,u=this._y1,c,d,f,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(f=(o+l)/2))?o=f:l=f,(m=d>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function Lxt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Fxt(){return this._root}function jxt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Bxt(e){var t=[],n,r=this._root,i,s,o,a,l;for(r&&t.push(new ja(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(s+a)/2,c=(o+l)/2;(i=r[3])&&t.push(new ja(i,u,c,a,l)),(i=r[2])&&t.push(new ja(i,s,c,u,l)),(i=r[1])&&t.push(new ja(i,u,o,a,c)),(i=r[0])&&t.push(new ja(i,s,o,u,c))}return this}function zxt(e){var t=[],n=[],r;for(this._root&&t.push(new ja(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,u=r.y1,c=(o+l)/2,d=(a+u)/2;(s=i[0])&&t.push(new ja(s,o,a,c,d)),(s=i[1])&&t.push(new ja(s,c,a,l,d)),(s=i[2])&&t.push(new ja(s,o,d,c,u)),(s=i[3])&&t.push(new ja(s,c,d,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Uxt(e){return e[0]}function Vxt(e){return arguments.length?(this._x=e,this):this._x}function Hxt(e){return e[1]}function qxt(e){return arguments.length?(this._y=e,this):this._y}function kJ(e,t,n){var r=new RJ(t??Uxt,n??Hxt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function RJ(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Lfe(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var al=kJ.prototype=RJ.prototype;al.copy=function(){var e=new RJ(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Lfe(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Lfe(r));return e};al.add=Rxt;al.addAll=Pxt;al.cover=Nxt;al.data=Oxt;al.extent=Dxt;al.find=Mxt;al.remove=$xt;al.removeAll=Lxt;al.root=Fxt;al.size=jxt;al.visit=Bxt;al.visitAfter=zxt;al.x=Vxt;al.y=qxt;function za(e){return function(){return e}}function g0(e){return(e()-.5)*1e-6}function Wxt(e){return e.x+e.vx}function Gxt(e){return e.y+e.vy}function Yxt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=za(e==null?1:+e));function o(){for(var u,c=t.length,d,f,h,p,m,g,y=0;y<s;++y)for(d=kJ(t,Wxt,Gxt).visitAfter(a),u=0;u<c;++u)f=t[u],m=n[f.index],g=m*m,h=f.x+f.vx,p=f.y+f.vy,d.visit(v);function v(_,w,x,S,E){var T=_.data,I=_.r,k=m+I;if(T){if(T.index>f.index){var P=h-T.x-T.vx,L=p-T.y-T.vy,R=P*P+L*L;R<k*k&&(P===0&&(P=g0(r),R+=P*P),L===0&&(L=g0(r),R+=L*L),R=(k-(R=Math.sqrt(R)))/R*i,f.vx+=(P*=R)*(k=(I*=I)/(g+I)),f.vy+=(L*=R)*k,T.vx-=P*(k=1-k),T.vy-=L*k)}return}return w>h+k||S<h-k||x>p+k||E<p-k}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,d;for(n=new Array(c),u=0;u<c;++u)d=t[u],n[d.index]=+e(d,u,t)}}return o.initialize=function(u,c){t=u,r=c,l()},o.iterations=function(u){return arguments.length?(s=+u,o):s},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(e=typeof u=="function"?u:za(+u),l(),o):e},o}function Kxt(e){return e.index}function Ffe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Xxt(e){var t=Kxt,n=d,r,i=za(30),s,o,a,l,u,c=1;e==null&&(e=[]);function d(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function f(g){for(var y=0,v=e.length;y<c;++y)for(var _=0,w,x,S,E,T,I,k;_<v;++_)w=e[_],x=w.source,S=w.target,E=S.x+S.vx-x.x-x.vx||g0(u),T=S.y+S.vy-x.y-x.vy||g0(u),I=Math.sqrt(E*E+T*T),I=(I-s[_])/I*g*r[_],E*=I,T*=I,S.vx-=E*(k=l[_]),S.vy-=T*k,x.vx+=E*(k=1-k),x.vy+=T*k}function h(){if(o){var g,y=o.length,v=e.length,_=new Map(o.map((x,S)=>[t(x,S,o),x])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Ffe(_,w.source)),typeof w.target!="object"&&(w.target=Ffe(_,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,l=new Array(v);g<v;++g)w=e[g],l[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return f.initialize=function(g,y){o=g,u=y,h()},f.links=function(g){return arguments.length?(e=g,h(),f):e},f.id=function(g){return arguments.length?(t=g,f):t},f.iterations=function(g){return arguments.length?(c=+g,f):c},f.strength=function(g){return arguments.length?(n=typeof g=="function"?g:za(+g),p(),f):n},f.distance=function(g){return arguments.length?(i=typeof g=="function"?g:za(+g),m(),f):i},f}const Qxt=1664525,Jxt=1013904223,jfe=4294967296;function Zxt(){let e=1;return()=>(e=(Qxt*e+Jxt)%jfe)/jfe}function eEt(e){return e.x}function tEt(e){return e.y}var nEt=10,rEt=Math.PI*(3-Math.sqrt(5));function iEt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,l=EJ(d),u=M6("tick","end"),c=Zxt();e==null&&(e=[]);function d(){f(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function f(m){var g,y=e.length,v;m===void 0&&(m=1);for(var _=0;_<m;++_)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=nEt*Math.sqrt(.5+m),_=m*rEt;y.x=v*Math.cos(_),y.y=v*Math.sin(_)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:f,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,_=e.length,w,x,S,E,T;for(y==null?y=1/0:y*=y,v=0;v<_;++v)E=e[v],w=m-E.x,x=g-E.y,S=w*w+x*x,S<y&&(T=E,y=S);return T},on:function(m,g){return arguments.length>1?(u.on(m,g),t):u.on(m)}}}function sEt(){var e,t,n,r,i=za(-30),s,o=1,a=1/0,l=.81;function u(h){var p,m=e.length,g=kJ(e,eEt,tEt).visitAfter(d);for(r=h,p=0;p<m;++p)t=e[p],g.visit(f)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function d(h){var p=0,m,g,y=0,v,_,w;if(h.length){for(v=_=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,_+=g*m.y);h.x=v/y,h.y=_/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function f(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,_=g-p,w=y*y+v*v;if(_*_/l<w)return w<a&&(y===0&&(y=g0(n),w+=y*y),v===0&&(v=g0(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=g0(n),w+=y*y),v===0&&(v=g0(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(_=s[h.data.index]*r/w,t.vx+=y*_,t.vy+=v*_);while(h=h.next)}return u.initialize=function(h,p){e=h,n=p,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:za(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function oEt(e){var t=za(.1),n,r,i;typeof e!="function"&&(e=za(e==null?0:+e));function s(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:za(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:za(+a),o(),s):e},s}function aEt(e){var t=za(.1),n,r,i;typeof e!="function"&&(e=za(e==null?0:+e));function s(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:za(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:za(+a),o(),s):e},s}function lEt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function A$(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function nE(e){return e=A$(Math.abs(e)),e?e[1]:NaN}function uEt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function cEt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var dEt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function db(e){if(!(t=dEt.exec(e)))throw new Error("invalid format: "+e);var t;return new PJ({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}db.prototype=PJ.prototype;function PJ(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}PJ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fEt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var DIe;function hEt(e,t){var n=A$(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(DIe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+A$(e,Math.max(0,t+s-1))[0]}function Bfe(e,t){var n=A$(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const zfe={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:lEt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Bfe(e*100,t),r:Bfe,s:hEt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Ufe(e){return e}var Vfe=Array.prototype.map,Hfe=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function MIe(e){var t=e.grouping===void 0||e.thousands===void 0?Ufe:uEt(Vfe.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Ufe:cEt(Vfe.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d){d=db(d);var f=d.fill,h=d.align,p=d.sign,m=d.symbol,g=d.zero,y=d.width,v=d.comma,_=d.precision,w=d.trim,x=d.type;x==="n"?(v=!0,x="g"):zfe[x]||(_===void 0&&(_=12),w=!0,x="g"),(g||f==="0"&&h==="=")&&(g=!0,f="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",E=m==="$"?r:/[%p]/.test(x)?o:"",T=zfe[x],I=/[defgprs%]/.test(x);_=_===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function k(P){var L=S,R=E,$,D,O;if(x==="c")R=T(P)+R,P="";else{P=+P;var F=P<0||1/P<0;if(P=isNaN(P)?l:T(Math.abs(P),_),w&&(P=fEt(P)),F&&+P==0&&p!=="+"&&(F=!1),L=(F?p==="("?p:a:p==="-"||p==="("?"":p)+L,R=(x==="s"?Hfe[8+DIe/3]:"")+R+(F&&p==="("?")":""),I){for($=-1,D=P.length;++$<D;)if(O=P.charCodeAt($),48>O||O>57){R=(O===46?i+P.slice($+1):P.slice($))+R,P=P.slice(0,$);break}}}v&&!g&&(P=t(P,1/0));var U=L.length+P.length+R.length,V=U<y?new Array(y-U+1).join(f):"";switch(v&&g&&(P=t(V+P,V.length?y-R.length:1/0),V=""),h){case"<":P=L+P+R+V;break;case"=":P=L+V+P+R;break;case"^":P=V.slice(0,U=V.length>>1)+L+P+R+V.slice(U);break;default:P=V+L+P+R;break}return s(P)}return k.toString=function(){return d+""},k}function c(d,f){var h=u((d=db(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(nE(f)/3)))*3,m=Math.pow(10,-p),g=Hfe[8+p/3];return function(y){return h(m*y)+g}}return{format:u,formatPrefix:c}}var ON,CS,NJ;pEt({thousands:",",grouping:[3],currency:["$",""]});function pEt(e){return ON=MIe(e),CS=ON.format,NJ=ON.formatPrefix,ON}function $Ie(e){return Math.max(0,-nE(Math.abs(e)))}function LIe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(nE(t)/3)))*3-nE(Math.abs(e)))}function FIe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,nE(t)-nE(e))+1}var zt=1e-6,I$=1e-12,Dn=Math.PI,Hi=Dn/2,k$=Dn/4,Qa=Dn*2,ts=180/Dn,Rn=Dn/180,Kn=Math.abs,AS=Math.atan,jc=Math.atan2,Vt=Math.cos,DN=Math.ceil,jIe=Math.exp,QV=Math.hypot,R$=Math.log,VB=Math.pow,Lt=Math.sin,Ec=Math.sign||function(e){return e>0?1:e<0?-1:0},Ja=Math.sqrt,OJ=Math.tan;function BIe(e){return e>1?0:e<-1?Dn:Math.acos(e)}function Yl(e){return e>1?Hi:e<-1?-Hi:Math.asin(e)}function Eo(){}function P$(e,t){e&&Wfe.hasOwnProperty(e.type)&&Wfe[e.type](e,t)}var qfe={Feature:function(e,t){P$(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)P$(n[r].geometry,t)}},Wfe={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){JV(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)JV(n[r],t,0)},Polygon:function(e,t){Gfe(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Gfe(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)P$(n[r],t)}};function JV(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Gfe(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)JV(e[n],t,1);t.polygonEnd()}function Xp(e,t){e&&qfe.hasOwnProperty(e.type)?qfe[e.type](e,t):P$(e,t)}var N$=new qa,O$=new qa,zIe,UIe,ZV,eH,tH,zh={point:Eo,lineStart:Eo,lineEnd:Eo,polygonStart:function(){N$=new qa,zh.lineStart=mEt,zh.lineEnd=gEt},polygonEnd:function(){var e=+N$;O$.add(e<0?Qa+e:e),this.lineStart=this.lineEnd=this.point=Eo},sphere:function(){O$.add(Qa)}};function mEt(){zh.point=yEt}function gEt(){VIe(zIe,UIe)}function yEt(e,t){zh.point=VIe,zIe=e,UIe=t,e*=Rn,t*=Rn,ZV=e,eH=Vt(t=t/2+k$),tH=Lt(t)}function VIe(e,t){e*=Rn,t*=Rn,t=t/2+k$;var n=e-ZV,r=n>=0?1:-1,i=r*n,s=Vt(t),o=Lt(t),a=tH*o,l=eH*s+a*Vt(i),u=a*r*Lt(i);N$.add(jc(u,l)),ZV=e,eH=s,tH=o}function vEt(e){return O$=new qa,Xp(e,zh),O$*2}function D$(e){return[jc(e[1],e[0]),Yl(e[2])]}function fb(e){var t=e[0],n=e[1],r=Vt(n);return[r*Vt(t),r*Lt(t),Lt(n)]}function MN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function rE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function HB(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function $N(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function M$(e){var t=Ja(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ti,Al,$i,yu,Kv,HIe,qIe,px,sA,Yg,Bm,Wp={point:nH,lineStart:Yfe,lineEnd:Kfe,polygonStart:function(){Wp.point=GIe,Wp.lineStart=bEt,Wp.lineEnd=_Et,sA=new qa,zh.polygonStart()},polygonEnd:function(){zh.polygonEnd(),Wp.point=nH,Wp.lineStart=Yfe,Wp.lineEnd=Kfe,N$<0?(Ti=-($i=180),Al=-(yu=90)):sA>zt?yu=90:sA<-zt&&(Al=-90),Bm[0]=Ti,Bm[1]=$i},sphere:function(){Ti=-($i=180),Al=-(yu=90)}};function nH(e,t){Yg.push(Bm=[Ti=e,$i=e]),t<Al&&(Al=t),t>yu&&(yu=t)}function WIe(e,t){var n=fb([e*Rn,t*Rn]);if(px){var r=rE(px,n),i=[r[1],-r[0],0],s=rE(i,r);M$(s),s=D$(s);var o=e-Kv,a=o>0?1:-1,l=s[0]*ts*a,u,c=Kn(o)>180;c^(a*Kv<l&&l<a*e)?(u=s[1]*ts,u>yu&&(yu=u)):(l=(l+360)%360-180,c^(a*Kv<l&&l<a*e)?(u=-s[1]*ts,u<Al&&(Al=u)):(t<Al&&(Al=t),t>yu&&(yu=t))),c?e<Kv?mu(Ti,e)>mu(Ti,$i)&&($i=e):mu(e,$i)>mu(Ti,$i)&&(Ti=e):$i>=Ti?(e<Ti&&(Ti=e),e>$i&&($i=e)):e>Kv?mu(Ti,e)>mu(Ti,$i)&&($i=e):mu(e,$i)>mu(Ti,$i)&&(Ti=e)}else Yg.push(Bm=[Ti=e,$i=e]);t<Al&&(Al=t),t>yu&&(yu=t),px=n,Kv=e}function Yfe(){Wp.point=WIe}function Kfe(){Bm[0]=Ti,Bm[1]=$i,Wp.point=nH,px=null}function GIe(e,t){if(px){var n=e-Kv;sA.add(Kn(n)>180?n+(n>0?360:-360):n)}else HIe=e,qIe=t;zh.point(e,t),WIe(e,t)}function bEt(){zh.lineStart()}function _Et(){GIe(HIe,qIe),zh.lineEnd(),Kn(sA)>zt&&(Ti=-($i=180)),Bm[0]=Ti,Bm[1]=$i,px=null}function mu(e,t){return(t-=e)<0?t+360:t}function wEt(e,t){return e[0]-t[0]}function Xfe(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function xEt(e){var t,n,r,i,s,o,a;if(yu=$i=-(Ti=Al=1/0),Yg=[],Xp(e,Wp),n=Yg.length){for(Yg.sort(wEt),t=1,r=Yg[0],s=[r];t<n;++t)i=Yg[t],Xfe(r,i[0])||Xfe(r,i[1])?(mu(r[0],i[1])>mu(r[0],r[1])&&(r[1]=i[1]),mu(i[0],r[1])>mu(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=mu(r[1],i[0]))>o&&(o=a,Ti=i[0],$i=r[1])}return Yg=Bm=null,Ti===1/0||Al===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ti,Al],[$i,yu]]}var zC,$$,L$,F$,j$,B$,z$,U$,rH,iH,sH,YIe,KIe,$a,La,Fa,$d={sphere:Eo,point:DJ,lineStart:Qfe,lineEnd:Jfe,polygonStart:function(){$d.lineStart=TEt,$d.lineEnd=CEt},polygonEnd:function(){$d.lineStart=Qfe,$d.lineEnd=Jfe}};function DJ(e,t){e*=Rn,t*=Rn;var n=Vt(t);hR(n*Vt(e),n*Lt(e),Lt(t))}function hR(e,t,n){++zC,L$+=(e-L$)/zC,F$+=(t-F$)/zC,j$+=(n-j$)/zC}function Qfe(){$d.point=EEt}function EEt(e,t){e*=Rn,t*=Rn;var n=Vt(t);$a=n*Vt(e),La=n*Lt(e),Fa=Lt(t),$d.point=SEt,hR($a,La,Fa)}function SEt(e,t){e*=Rn,t*=Rn;var n=Vt(t),r=n*Vt(e),i=n*Lt(e),s=Lt(t),o=jc(Ja((o=La*s-Fa*i)*o+(o=Fa*r-$a*s)*o+(o=$a*i-La*r)*o),$a*r+La*i+Fa*s);$$+=o,B$+=o*($a+($a=r)),z$+=o*(La+(La=i)),U$+=o*(Fa+(Fa=s)),hR($a,La,Fa)}function Jfe(){$d.point=DJ}function TEt(){$d.point=AEt}function CEt(){XIe(YIe,KIe),$d.point=DJ}function AEt(e,t){YIe=e,KIe=t,e*=Rn,t*=Rn,$d.point=XIe;var n=Vt(t);$a=n*Vt(e),La=n*Lt(e),Fa=Lt(t),hR($a,La,Fa)}function XIe(e,t){e*=Rn,t*=Rn;var n=Vt(t),r=n*Vt(e),i=n*Lt(e),s=Lt(t),o=La*s-Fa*i,a=Fa*r-$a*s,l=$a*i-La*r,u=QV(o,a,l),c=Yl(u),d=u&&-c/u;rH.add(d*o),iH.add(d*a),sH.add(d*l),$$+=c,B$+=c*($a+($a=r)),z$+=c*(La+(La=i)),U$+=c*(Fa+(Fa=s)),hR($a,La,Fa)}function IEt(e){zC=$$=L$=F$=j$=B$=z$=U$=0,rH=new qa,iH=new qa,sH=new qa,Xp(e,$d);var t=+rH,n=+iH,r=+sH,i=QV(t,n,r);return i<I$&&(t=B$,n=z$,r=U$,$$<zt&&(t=L$,n=F$,r=j$),i=QV(t,n,r),i<I$)?[NaN,NaN]:[jc(n,t)*ts,Yl(r/i)*ts]}function oH(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function aH(e,t){return Kn(e)>Dn&&(e-=Math.round(e/Qa)*Qa),[e,t]}aH.invert=aH;function QIe(e,t,n){return(e%=Qa)?t||n?oH(ehe(e),the(t,n)):ehe(e):t||n?the(t,n):aH}function Zfe(e){return function(t,n){return t+=e,Kn(t)>Dn&&(t-=Math.round(t/Qa)*Qa),[t,n]}}function ehe(e){var t=Zfe(e);return t.invert=Zfe(-e),t}function the(e,t){var n=Vt(e),r=Lt(e),i=Vt(t),s=Lt(t);function o(a,l){var u=Vt(l),c=Vt(a)*u,d=Lt(a)*u,f=Lt(l),h=f*n+c*r;return[jc(d*i-h*s,c*n-f*r),Yl(h*i+d*s)]}return o.invert=function(a,l){var u=Vt(l),c=Vt(a)*u,d=Lt(a)*u,f=Lt(l),h=f*i-d*s;return[jc(d*i+f*s,c*n+h*r),Yl(h*n-c*r)]},o}function kEt(e){e=QIe(e[0]*Rn,e[1]*Rn,e.length>2?e[2]*Rn:0);function t(n){return n=e(n[0]*Rn,n[1]*Rn),n[0]*=ts,n[1]*=ts,n}return t.invert=function(n){return n=e.invert(n[0]*Rn,n[1]*Rn),n[0]*=ts,n[1]*=ts,n},t}function REt(e,t,n,r,i,s){if(n){var o=Vt(t),a=Lt(t),l=r*n;i==null?(i=t+r*Qa,s=t-l/2):(i=nhe(o,i),s=nhe(o,s),(r>0?i<s:i>s)&&(i+=r*Qa));for(var u,c=i;r>0?c>s:c<s;c-=l)u=D$([o,-a*Vt(c),-a*Lt(c)]),e.point(u[0],u[1])}}function nhe(e,t){t=fb(t),t[0]-=e,M$(t);var n=BIe(-t[1]);return((-t[2]<0?-n:n)+Qa-zt)%Qa}function JIe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Eo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function xD(e,t){return Kn(e[0]-t[0])<zt&&Kn(e[1]-t[1])<zt}function LN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ZIe(e,t,n,r,i){var s=[],o=[],a,l;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(xD(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*zt}s.push(v=new LN(g,p,null,!0)),o.push(v.o=new LN(g,null,v,!1)),s.push(v=new LN(y,p,null,!1)),o.push(v.o=new LN(y,null,v,!0))}}),!!s.length){for(o.sort(t),rhe(s),rhe(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var u=s[0],c,d;;){for(var f=u,h=!0;f.v;)if((f=f.n)===u)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(a=0,l=c.length;a<l;++a)i.point((d=c[a])[0],d[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(h)for(c=f.p.z,a=c.length-1;a>=0;--a)i.point((d=c[a])[0],d[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,c=f.z,h=!h}while(!f.v);i.lineEnd()}}}function rhe(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function qB(e){return Kn(e[0])<=Dn?e[0]:Ec(e[0])*((Kn(e[0])+Dn)%Qa-Dn)}function PEt(e,t){var n=qB(t),r=t[1],i=Lt(r),s=[Lt(n),-Vt(n),0],o=0,a=0,l=new qa;i===1?r=Hi+zt:i===-1&&(r=-Hi-zt);for(var u=0,c=e.length;u<c;++u)if(f=(d=e[u]).length)for(var d,f,h=d[f-1],p=qB(h),m=h[1]/2+k$,g=Lt(m),y=Vt(m),v=0;v<f;++v,p=w,g=S,y=E,h=_){var _=d[v],w=qB(_),x=_[1]/2+k$,S=Lt(x),E=Vt(x),T=w-p,I=T>=0?1:-1,k=I*T,P=k>Dn,L=g*S;if(l.add(jc(L*I*Lt(k),y*E+L*Vt(k))),o+=P?T+I*Qa:T,P^p>=n^w>=n){var R=rE(fb(h),fb(_));M$(R);var $=rE(s,R);M$($);var D=(P^T>=0?-1:1)*Yl($[2]);(r>D||r===D&&(R[0]||R[1]))&&(a+=P^T>=0?1:-1)}}return(o<-zt||o<zt&&l<-I$)^a&1}function eke(e,t,n,r){return function(i){var s=t(i),o=JIe(),a=t(o),l=!1,u,c,d,f={point:h,lineStart:m,lineEnd:g,polygonStart:function(){f.point=y,f.lineStart=v,f.lineEnd=_,c=[],u=[]},polygonEnd:function(){f.point=h,f.lineStart=m,f.lineEnd=g,c=FAe(c);var w=PEt(u,r);c.length?(l||(i.polygonStart(),l=!0),ZIe(c,OEt,w,n,i)):w&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,x){e(w,x)&&i.point(w,x)}function p(w,x){s.point(w,x)}function m(){f.point=p,s.lineStart()}function g(){f.point=h,s.lineEnd()}function y(w,x){d.push([w,x]),a.point(w,x)}function v(){a.lineStart(),d=[]}function _(){y(d[0][0],d[0][1]),a.lineEnd();var w=a.clean(),x=o.result(),S,E=x.length,T,I,k;if(d.pop(),u.push(d),d=null,!!E){if(w&1){if(I=x[0],(T=I.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),S=0;S<T;++S)i.point((k=I[S])[0],k[1]);i.lineEnd()}return}E>1&&w&2&&x.push(x.pop().concat(x.shift())),c.push(x.filter(NEt))}}return f}}function NEt(e){return e.length>1}function OEt(e,t){return((e=e.x)[0]<0?e[1]-Hi-zt:Hi-e[1])-((t=t.x)[0]<0?t[1]-Hi-zt:Hi-t[1])}const ihe=eke(function(){return!0},DEt,$Et,[-Dn,-Hi]);function DEt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Dn:-Dn,l=Kn(s-t);Kn(l-Dn)<zt?(e.point(t,n=(n+o)/2>0?Hi:-Hi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&l>=Dn&&(Kn(t-r)<zt&&(t-=r*zt),Kn(s-a)<zt&&(s-=a*zt),n=MEt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function MEt(e,t,n,r){var i,s,o=Lt(e-n);return Kn(o)>zt?AS((Lt(t)*(s=Vt(r))*Lt(n)-Lt(r)*(i=Vt(t))*Lt(e))/(i*s*o)):(t+r)/2}function $Et(e,t,n,r){var i;if(e==null)i=n*Hi,r.point(-Dn,i),r.point(0,i),r.point(Dn,i),r.point(Dn,0),r.point(Dn,-i),r.point(0,-i),r.point(-Dn,-i),r.point(-Dn,0),r.point(-Dn,i);else if(Kn(e[0]-t[0])>zt){var s=e[0]<t[0]?Dn:-Dn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function LEt(e){var t=Vt(e),n=2*Rn,r=t>0,i=Kn(t)>zt;function s(c,d,f,h){REt(h,e,n,f,c,d)}function o(c,d){return Vt(c)*Vt(d)>t}function a(c){var d,f,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],_,w=o(g,y),x=r?w?0:u(g,y):w?u(g+(g<0?Dn:-Dn),y):0;if(!d&&(p=h=w)&&c.lineStart(),w!==h&&(_=l(d,v),(!_||xD(d,_)||xD(v,_))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),_=l(v,d),c.point(_[0],_[1])):(_=l(d,v),c.point(_[0],_[1],2),c.lineEnd()),d=_;else if(i&&d&&r^w){var S;!(x&f)&&(S=l(v,d,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}w&&(!d||!xD(d,v))&&c.point(v[0],v[1]),d=v,h=w,f=x},lineEnd:function(){h&&c.lineEnd(),d=null},clean:function(){return m|(p&&h)<<1}}}function l(c,d,f){var h=fb(c),p=fb(d),m=[1,0,0],g=rE(h,p),y=MN(g,g),v=g[0],_=y-v*v;if(!_)return!f&&c;var w=t*y/_,x=-t*v/_,S=rE(m,g),E=$N(m,w),T=$N(g,x);HB(E,T);var I=S,k=MN(E,I),P=MN(I,I),L=k*k-P*(MN(E,E)-1);if(!(L<0)){var R=Ja(L),$=$N(I,(-k-R)/P);if(HB($,E),$=D$($),!f)return $;var D=c[0],O=d[0],F=c[1],U=d[1],V;O<D&&(V=D,D=O,O=V);var M=O-D,z=Kn(M-Dn)<zt,q=z||M<zt;if(!z&&U<F&&(V=F,F=U,U=V),q?z?F+U>0^$[1]<(Kn($[0]-D)<zt?F:U):F<=$[1]&&$[1]<=U:M>Dn^(D<=$[0]&&$[0]<=O)){var j=$N(I,(-k+R)/P);return HB(j,E),[$,D$(j)]}}}function u(c,d){var f=r?e:Dn-e,h=0;return c<-f?h|=1:c>f&&(h|=2),d<-f?h|=4:d>f&&(h|=8),h}return eke(o,a,s,r?[0,-e]:[-Dn,e-Dn])}function FEt(e,t,n,r,i,s){var o=e[0],a=e[1],l=t[0],u=t[1],c=0,d=1,f=l-o,h=u-a,p;if(p=n-o,!(!f&&p>0)){if(p/=f,f<0){if(p<c)return;p<d&&(d=p)}else if(f>0){if(p>d)return;p>c&&(c=p)}if(p=i-o,!(!f&&p<0)){if(p/=f,f<0){if(p>d)return;p>c&&(c=p)}else if(f>0){if(p<c)return;p<d&&(d=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<d&&(d=p)}else if(h>0){if(p>d)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>d)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<d&&(d=p)}return c>0&&(e[0]=o+c*f,e[1]=a+c*h),d<1&&(t[0]=o+d*f,t[1]=a+d*h),!0}}}}}var UC=1e9,FN=-UC;function tke(e,t,n,r){function i(u,c){return e<=u&&u<=n&&t<=c&&c<=r}function s(u,c,d,f){var h=0,p=0;if(u==null||(h=o(u,d))!==(p=o(c,d))||l(u,c)<0^d>0)do f.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+d+4)%4)!==p);else f.point(c[0],c[1])}function o(u,c){return Kn(u[0]-e)<zt?c>0?0:3:Kn(u[0]-n)<zt?c>0?2:1:Kn(u[1]-t)<zt?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var d=o(u,1),f=o(c,1);return d!==f?d-f:d===0?c[1]-u[1]:d===1?u[0]-c[0]:d===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,d=JIe(),f,h,p,m,g,y,v,_,w,x,S,E={point:T,lineStart:L,lineEnd:R,polygonStart:k,polygonEnd:P};function T(D,O){i(D,O)&&c.point(D,O)}function I(){for(var D=0,O=0,F=h.length;O<F;++O)for(var U=h[O],V=1,M=U.length,z=U[0],q,j,H=z[0],G=z[1];V<M;++V)q=H,j=G,z=U[V],H=z[0],G=z[1],j<=r?G>r&&(H-q)*(r-j)>(G-j)*(e-q)&&++D:G<=r&&(H-q)*(r-j)<(G-j)*(e-q)&&--D;return D}function k(){c=d,f=[],h=[],S=!0}function P(){var D=I(),O=S&&D,F=(f=FAe(f)).length;(O||F)&&(u.polygonStart(),O&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),F&&ZIe(f,a,D,s,u),u.polygonEnd()),c=u,f=h=p=null}function L(){E.point=$,h&&h.push(p=[]),x=!0,w=!1,v=_=NaN}function R(){f&&($(m,g),y&&w&&d.rejoin(),f.push(d.result())),E.point=T,w&&c.lineEnd()}function $(D,O){var F=i(D,O);if(h&&p.push([D,O]),x)m=D,g=O,y=F,x=!1,F&&(c.lineStart(),c.point(D,O));else if(F&&w)c.point(D,O);else{var U=[v=Math.max(FN,Math.min(UC,v)),_=Math.max(FN,Math.min(UC,_))],V=[D=Math.max(FN,Math.min(UC,D)),O=Math.max(FN,Math.min(UC,O))];FEt(U,V,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(V[0],V[1]),F||c.lineEnd(),S=!1):F&&(c.lineStart(),c.point(D,O),S=!1)}v=D,_=O,w=F}return E}}function she(e,t,n){var r=Ol(e,t-zt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function ohe(e,t,n){var r=Ol(e,t-zt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function jEt(){var e,t,n,r,i,s,o,a,l=10,u=l,c=90,d=360,f,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ol(DN(r/c)*c,n,c).map(p).concat(Ol(DN(a/d)*d,o,d).map(m)).concat(Ol(DN(t/l)*l,e,l).filter(function(_){return Kn(_%c)>zt}).map(f)).concat(Ol(DN(s/u)*u,i,u).filter(function(_){return Kn(_%d)>zt}).map(h))}return y.lines=function(){return v().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.extentMajor(_).extentMinor(_):y.extentMinor()},y.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),a>o&&(_=a,a=o,o=_),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],s=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),s>i&&(_=s,s=i,i=_),y.precision(g)):[[t,s],[e,i]]},y.step=function(_){return arguments.length?y.stepMajor(_).stepMinor(_):y.stepMinor()},y.stepMajor=function(_){return arguments.length?(c=+_[0],d=+_[1],y):[c,d]},y.stepMinor=function(_){return arguments.length?(l=+_[0],u=+_[1],y):[l,u]},y.precision=function(_){return arguments.length?(g=+_,f=she(s,i,90),h=ohe(t,e,g),p=she(a,o,90),m=ohe(r,n,g),y):g},y.extentMajor([[-180,-90+zt],[180,90-zt]]).extentMinor([[-180,-80-zt],[180,80+zt]])}const wI=e=>e;var WB=new qa,lH=new qa,nke,rke,uH,cH,Qp={point:Eo,lineStart:Eo,lineEnd:Eo,polygonStart:function(){Qp.lineStart=BEt,Qp.lineEnd=UEt},polygonEnd:function(){Qp.lineStart=Qp.lineEnd=Qp.point=Eo,WB.add(Kn(lH)),lH=new qa},result:function(){var e=WB/2;return WB=new qa,e}};function BEt(){Qp.point=zEt}function zEt(e,t){Qp.point=ike,nke=uH=e,rke=cH=t}function ike(e,t){lH.add(cH*e-uH*t),uH=e,cH=t}function UEt(){ike(nke,rke)}var iE=1/0,V$=iE,xI=-iE,H$=xI,q$={point:VEt,lineStart:Eo,lineEnd:Eo,polygonStart:Eo,polygonEnd:Eo,result:function(){var e=[[iE,V$],[xI,H$]];return xI=H$=-(V$=iE=1/0),e}};function VEt(e,t){e<iE&&(iE=e),e>xI&&(xI=e),t<V$&&(V$=t),t>H$&&(H$=t)}var dH=0,fH=0,VC=0,W$=0,G$=0,zw=0,hH=0,pH=0,HC=0,ske,oke,lh,uh,yc={point:hb,lineStart:ahe,lineEnd:lhe,polygonStart:function(){yc.lineStart=WEt,yc.lineEnd=GEt},polygonEnd:function(){yc.point=hb,yc.lineStart=ahe,yc.lineEnd=lhe},result:function(){var e=HC?[hH/HC,pH/HC]:zw?[W$/zw,G$/zw]:VC?[dH/VC,fH/VC]:[NaN,NaN];return dH=fH=VC=W$=G$=zw=hH=pH=HC=0,e}};function hb(e,t){dH+=e,fH+=t,++VC}function ahe(){yc.point=HEt}function HEt(e,t){yc.point=qEt,hb(lh=e,uh=t)}function qEt(e,t){var n=e-lh,r=t-uh,i=Ja(n*n+r*r);W$+=i*(lh+e)/2,G$+=i*(uh+t)/2,zw+=i,hb(lh=e,uh=t)}function lhe(){yc.point=hb}function WEt(){yc.point=YEt}function GEt(){ake(ske,oke)}function YEt(e,t){yc.point=ake,hb(ske=lh=e,oke=uh=t)}function ake(e,t){var n=e-lh,r=t-uh,i=Ja(n*n+r*r);W$+=i*(lh+e)/2,G$+=i*(uh+t)/2,zw+=i,i=uh*e-lh*t,hH+=i*(lh+e),pH+=i*(uh+t),HC+=i*3,hb(lh=e,uh=t)}function lke(e){this._context=e}lke.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Qa);break}}},result:Eo};var mH=new qa,GB,uke,cke,qC,WC,EI={point:Eo,lineStart:function(){EI.point=KEt},lineEnd:function(){GB&&dke(uke,cke),EI.point=Eo},polygonStart:function(){GB=!0},polygonEnd:function(){GB=null},result:function(){var e=+mH;return mH=new qa,e}};function KEt(e,t){EI.point=dke,uke=qC=e,cke=WC=t}function dke(e,t){qC-=e,WC-=t,mH.add(Ja(qC*qC+WC*WC)),qC=e,WC=t}let uhe,Y$,che,dhe;class fhe{constructor(t){this._append=t==null?fke:XEt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==che||this._append!==Y$){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,che=r,Y$=this._append,dhe=this._,this._=i}this._+=dhe;break}}}result(){const t=this._;return this._="",t.length?t:null}}function fke(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function XEt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return fke;if(t!==uhe){const n=10**t;uhe=t,Y$=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return Y$}function hke(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Xp(a,i(s))),s.result()}return o.area=function(a){return Xp(a,i(Qp)),Qp.result()},o.measure=function(a){return Xp(a,i(EI)),EI.result()},o.bounds=function(a){return Xp(a,i(q$)),q$.result()},o.centroid=function(a){return Xp(a,i(yc)),yc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,wI):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new fhe(n)):new lke(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new fhe(n)),o},o.projection(e).digits(n).context(t)}function H6(e){return function(t){var n=new gH;for(var r in e)n[r]=e[r];return n.stream=t,n}}function gH(){}gH.prototype={constructor:gH,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function MJ(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Xp(n,e.stream(q$)),t(q$.result()),r!=null&&e.clipExtent(r),e}function q6(e,t,n){return MJ(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function $J(e,t,n){return q6(e,[[0,0],t],n)}function LJ(e,t,n){return MJ(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function FJ(e,t,n){return MJ(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var hhe=16,QEt=Vt(30*Rn);function phe(e,t){return+t?ZEt(e,t):JEt(e)}function JEt(e){return H6({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ZEt(e,t){function n(r,i,s,o,a,l,u,c,d,f,h,p,m,g){var y=u-r,v=c-i,_=y*y+v*v;if(_>4*t&&m--){var w=o+f,x=a+h,S=l+p,E=Ja(w*w+x*x+S*S),T=Yl(S/=E),I=Kn(Kn(S)-1)<zt||Kn(s-d)<zt?(s+d)/2:jc(x,w),k=e(I,T),P=k[0],L=k[1],R=P-r,$=L-i,D=v*R-y*$;(D*D/_>t||Kn((y*R+v*$)/_-.5)>.3||o*f+a*h+l*p<QEt)&&(n(r,i,s,o,a,l,P,L,I,w/=E,x/=E,S,m,g),g.point(P,L),n(P,L,I,w,x,S,u,c,d,f,h,p,m,g))}}return function(r){var i,s,o,a,l,u,c,d,f,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=x},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(T,I){T=e(T,I),r.point(T[0],T[1])}function v(){d=NaN,g.point=_,r.lineStart()}function _(T,I){var k=fb([T,I]),P=e(T,I);n(d,f,c,h,p,m,d=P[0],f=P[1],c=T,h=k[0],p=k[1],m=k[2],hhe,r),r.point(d,f)}function w(){g.point=y,r.lineEnd()}function x(){v(),g.point=S,g.lineEnd=E}function S(T,I){_(i=T,I),s=d,o=f,a=h,l=p,u=m,g.point=_}function E(){n(d,f,c,h,p,m,s,o,i,a,l,u,hhe,r),g.lineEnd=w,w()}return g}}var eSt=H6({point:function(e,t){this.stream.point(e*Rn,t*Rn)}});function tSt(e){return H6({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function nSt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function mhe(e,t,n,r,i,s){if(!s)return nSt(e,t,n,r,i);var o=Vt(s),a=Lt(s),l=o*e,u=a*e,c=o/e,d=a/e,f=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[l*m-u*g+t,n-u*m-l*g]}return p.invert=function(m,g){return[r*(c*m-d*g+f),i*(h-d*m-c*g)]},p}function cp(e){return pke(function(){return e})()}function pke(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,l=0,u=0,c,d=0,f=1,h=1,p=null,m=ihe,g=null,y,v,_,w=wI,x=.5,S,E,T,I,k;function P(D){return T(D[0]*Rn,D[1]*Rn)}function L(D){return D=T.invert(D[0],D[1]),D&&[D[0]*ts,D[1]*ts]}P.stream=function(D){return I&&k===D?I:I=eSt(tSt(c)(m(S(w(k=D)))))},P.preclip=function(D){return arguments.length?(m=D,p=void 0,$()):m},P.postclip=function(D){return arguments.length?(w=D,g=y=v=_=null,$()):w},P.clipAngle=function(D){return arguments.length?(m=+D?LEt(p=D*Rn):(p=null,ihe),$()):p*ts},P.clipExtent=function(D){return arguments.length?(w=D==null?(g=y=v=_=null,wI):tke(g=+D[0][0],y=+D[0][1],v=+D[1][0],_=+D[1][1]),$()):g==null?null:[[g,y],[v,_]]},P.scale=function(D){return arguments.length?(n=+D,R()):n},P.translate=function(D){return arguments.length?(r=+D[0],i=+D[1],R()):[r,i]},P.center=function(D){return arguments.length?(s=D[0]%360*Rn,o=D[1]%360*Rn,R()):[s*ts,o*ts]},P.rotate=function(D){return arguments.length?(a=D[0]%360*Rn,l=D[1]%360*Rn,u=D.length>2?D[2]%360*Rn:0,R()):[a*ts,l*ts,u*ts]},P.angle=function(D){return arguments.length?(d=D%360*Rn,R()):d*ts},P.reflectX=function(D){return arguments.length?(f=D?-1:1,R()):f<0},P.reflectY=function(D){return arguments.length?(h=D?-1:1,R()):h<0},P.precision=function(D){return arguments.length?(S=phe(E,x=D*D),$()):Ja(x)},P.fitExtent=function(D,O){return q6(P,D,O)},P.fitSize=function(D,O){return $J(P,D,O)},P.fitWidth=function(D,O){return LJ(P,D,O)},P.fitHeight=function(D,O){return FJ(P,D,O)};function R(){var D=mhe(n,0,0,f,h,d).apply(null,t(s,o)),O=mhe(n,r-D[0],i-D[1],f,h,d);return c=QIe(a,l,u),E=oH(t,O),T=oH(c,E),S=phe(E,x),$()}function $(){return I=k=null,P}return function(){return t=e.apply(this,arguments),P.invert=t.invert&&L,R()}}function jJ(e){var t=0,n=Dn/3,r=pke(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Rn,n=s[1]*Rn):[t*ts,n*ts]},i}function rSt(e){var t=Vt(e);function n(r,i){return[r*t,Lt(i)/t]}return n.invert=function(r,i){return[r/t,Yl(i*t)]},n}function iSt(e,t){var n=Lt(e),r=(n+Lt(t))/2;if(Kn(r)<zt)return rSt(e);var i=1+n*(2*r-n),s=Ja(i)/r;function o(a,l){var u=Ja(i-2*r*Lt(l))/r;return[u*Lt(a*=r),s-u*Vt(a)]}return o.invert=function(a,l){var u=s-l,c=jc(a,Kn(u))*Ec(u);return u*r<0&&(c-=Dn*Ec(a)*Ec(u)),[c/r,Yl((i-(a*a+u*u)*r*r)/(2*r))]},o}function K$(){return jJ(iSt).scale(155.424).center([0,33.6442])}function mke(){return K$().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function sSt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function oSt(){var e,t,n=mke(),r,i=K$().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=K$().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(f,h){l=[f,h]}};function c(f){var h=f[0],p=f[1];return l=null,r.point(h,p),l||(s.point(h,p),l)||(a.point(h,p),l)}c.invert=function(f){var h=n.scale(),p=n.translate(),m=(f[0]-p[0])/h,g=(f[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(f)},c.stream=function(f){return e&&t===f?e:e=sSt([n.stream(t=f),i.stream(f),o.stream(f)])},c.precision=function(f){return arguments.length?(n.precision(f),i.precision(f),o.precision(f),d()):n.precision()},c.scale=function(f){return arguments.length?(n.scale(f),i.scale(f*.35),o.scale(f),c.translate(n.translate())):n.scale()},c.translate=function(f){if(!arguments.length)return n.translate();var h=n.scale(),p=+f[0],m=+f[1];return r=n.translate(f).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(u),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+zt,m+.12*h+zt],[p-.214*h-zt,m+.234*h-zt]]).stream(u),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+zt,m+.166*h+zt],[p-.115*h-zt,m+.234*h-zt]]).stream(u),d()},c.fitExtent=function(f,h){return q6(c,f,h)},c.fitSize=function(f,h){return $J(c,f,h)},c.fitWidth=function(f,h){return LJ(c,f,h)},c.fitHeight=function(f,h){return FJ(c,f,h)};function d(){return e=t=null,c}return c.scale(1070)}function gke(e){return function(t,n){var r=Vt(t),i=Vt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Lt(t),s*Lt(n)]}}function pR(e){return function(t,n){var r=Ja(t*t+n*n),i=e(r),s=Lt(i),o=Vt(i);return[jc(t*s,r*o),Yl(r&&n*s/r)]}}var yke=gke(function(e){return Ja(2/(1+e))});yke.invert=pR(function(e){return 2*Yl(e/2)});function aSt(){return cp(yke).scale(124.75).clipAngle(180-.001)}var vke=gke(function(e){return(e=BIe(e))&&e/Lt(e)});vke.invert=pR(function(e){return e});function lSt(){return cp(vke).scale(79.4188).clipAngle(180-.001)}function W6(e,t){return[e,R$(OJ((Hi+t)/2))]}W6.invert=function(e,t){return[e,2*AS(jIe(t))-Hi]};function uSt(){return bke(W6).scale(961/Qa)}function bke(e){var t=cp(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,l,u;t.scale=function(d){return arguments.length?(r(d),c()):r()},t.translate=function(d){return arguments.length?(i(d),c()):i()},t.center=function(d){return arguments.length?(n(d),c()):n()},t.clipExtent=function(d){return arguments.length?(d==null?o=a=l=u=null:(o=+d[0][0],a=+d[0][1],l=+d[1][0],u=+d[1][1]),c()):o==null?null:[[o,a],[l,u]]};function c(){var d=Dn*r(),f=t(kEt(t.rotate()).invert([0,0]));return s(o==null?[[f[0]-d,f[1]-d],[f[0]+d,f[1]+d]]:e===W6?[[Math.max(f[0]-d,o),a],[Math.min(f[0]+d,l),u]]:[[o,Math.max(f[1]-d,a)],[l,Math.min(f[1]+d,u)]])}return c()}function jN(e){return OJ((Hi+e)/2)}function cSt(e,t){var n=Vt(e),r=e===t?Lt(e):R$(n/Vt(t))/R$(jN(t)/jN(e)),i=n*VB(jN(e),r)/r;if(!r)return W6;function s(o,a){i>0?a<-Hi+zt&&(a=-Hi+zt):a>Hi-zt&&(a=Hi-zt);var l=i/VB(jN(a),r);return[l*Lt(r*o),i-l*Vt(r*o)]}return s.invert=function(o,a){var l=i-a,u=Ec(r)*Ja(o*o+l*l),c=jc(o,Kn(l))*Ec(l);return l*r<0&&(c-=Dn*Ec(o)*Ec(l)),[c/r,2*AS(VB(i/u,1/r))-Hi]},s}function dSt(){return jJ(cSt).scale(109.5).parallels([30,30])}function X$(e,t){return[e,t]}X$.invert=X$;function fSt(){return cp(X$).scale(152.63)}function hSt(e,t){var n=Vt(e),r=e===t?Lt(e):(n-Vt(t))/(t-e),i=n/r+e;if(Kn(r)<zt)return X$;function s(o,a){var l=i-a,u=r*o;return[l*Lt(u),i-l*Vt(u)]}return s.invert=function(o,a){var l=i-a,u=jc(o,Kn(l))*Ec(l);return l*r<0&&(u-=Dn*Ec(o)*Ec(l)),[u/r,i-Ec(r)*Ja(o*o+l*l)]},s}function pSt(){return jJ(hSt).scale(131.154).center([0,13.9389])}var oA=1.340264,aA=-.081106,lA=893e-6,uA=.003796,Q$=Ja(3)/2,mSt=12;function _ke(e,t){var n=Yl(Q$*Lt(t)),r=n*n,i=r*r*r;return[e*Vt(n)/(Q$*(oA+3*aA*r+i*(7*lA+9*uA*r))),n*(oA+aA*r+i*(lA+uA*r))]}_ke.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,l;s<mSt&&(a=n*(oA+aA*r+i*(lA+uA*r))-t,l=oA+3*aA*r+i*(7*lA+9*uA*r),n-=o=a/l,r=n*n,i=r*r*r,!(Kn(o)<I$));++s);return[Q$*e*(oA+3*aA*r+i*(7*lA+9*uA*r))/Vt(n),Yl(Lt(n)/Q$)]};function gSt(){return cp(_ke).scale(177.158)}function wke(e,t){var n=Vt(t),r=Vt(e)*n;return[n*Lt(e)/r,Lt(t)/r]}wke.invert=pR(AS);function ySt(){return cp(wke).scale(144.049).clipAngle(60)}function vSt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,l=null,u,c,d,f=1,h=1,p=H6({point:function(w,x){var S=_([w,x]);this.stream.point(S[0],S[1])}}),m=wI,g,y;function v(){return f=e*r,h=e*i,g=y=null,_}function _(w){var x=w[0]*f,S=w[1]*h;if(s){var E=S*o-x*a;x=x*o+S*a,S=E}return[x+t,S+n]}return _.invert=function(w){var x=w[0]-t,S=w[1]-n;if(s){var E=S*o+x*a;x=x*o-S*a,S=E}return[x/f,S/h]},_.stream=function(w){return g&&y===w?g:g=p(m(y=w))},_.postclip=function(w){return arguments.length?(m=w,l=u=c=d=null,v()):m},_.clipExtent=function(w){return arguments.length?(m=w==null?(l=u=c=d=null,wI):tke(l=+w[0][0],u=+w[0][1],c=+w[1][0],d=+w[1][1]),v()):l==null?null:[[l,u],[c,d]]},_.scale=function(w){return arguments.length?(e=+w,v()):e},_.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},_.angle=function(w){return arguments.length?(s=w%360*Rn,a=Lt(s),o=Vt(s),v()):s*ts},_.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},_.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},_.fitExtent=function(w,x){return q6(_,w,x)},_.fitSize=function(w,x){return $J(_,w,x)},_.fitWidth=function(w,x){return LJ(_,w,x)},_.fitHeight=function(w,x){return FJ(_,w,x)},_}function xke(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}xke.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Kn(i)>zt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function bSt(){return cp(xke).scale(175.295)}function Eke(e,t){return[Vt(t)*Lt(e),Lt(t)]}Eke.invert=pR(Yl);function _St(){return cp(Eke).scale(249.5).clipAngle(90+zt)}function Ske(e,t){var n=Vt(t),r=1+Vt(e)*n;return[n*Lt(e)/r,Lt(t)/r]}Ske.invert=pR(function(e){return 2*AS(e)});function wSt(){return cp(Ske).scale(250).clipAngle(142)}function Tke(e,t){return[R$(OJ((Hi+t)/2)),-e]}Tke.invert=function(e,t){return[-t,2*AS(jIe(e))-Hi]};function xSt(){var e=bke(Tke),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function ESt(e,t){return e.parent===t.parent?1:2}function SSt(e){return e.reduce(TSt,0)/e.length}function TSt(e,t){return e+t.x}function CSt(e){return 1+e.reduce(ASt,0)}function ASt(e,t){return Math.max(e,t.y)}function ISt(e){for(var t;t=e.children;)e=t[0];return e}function kSt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function RSt(){var e=ESt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(f){var h=f.children;h?(f.x=SSt(h),f.y=CSt(h)):(f.x=o?a+=e(f,o):0,f.y=0,o=f)});var l=ISt(s),u=kSt(s),c=l.x-e(l,u)/2,d=u.x+e(u,l)/2;return s.eachAfter(r?function(f){f.x=(f.x-s.x)*t,f.y=(s.y-f.y)*n}:function(f){f.x=(f.x-c)/(d-c)*t,f.y=(1-(s.y?f.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function PSt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function NSt(){return this.eachAfter(PSt)}function OSt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function DSt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function MSt(e,t){for(var n=this,r=[n],i=[],s,o,a,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function $St(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function LSt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function FSt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function jSt(e){for(var t=this,n=BSt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function BSt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function zSt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function USt(){return Array.from(this)}function VSt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function HSt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*qSt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function BJ(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=YSt)):t===void 0&&(t=GSt);for(var n=new sE(e),r,i=[n],s,o,a,l;r=i.pop();)if((o=t(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)i.push(s=o[a]=new sE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(Cke)}function WSt(){return BJ(this).eachBefore(KSt)}function GSt(e){return e.children}function YSt(e){return Array.isArray(e)?e[1]:null}function KSt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Cke(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function sE(e){this.data=e,this.depth=this.height=0,this.parent=null}sE.prototype=BJ.prototype={constructor:sE,count:NSt,each:OSt,eachAfter:MSt,eachBefore:DSt,find:$St,sum:LSt,sort:FSt,path:jSt,ancestors:zSt,descendants:USt,leaves:VSt,links:HSt,copy:WSt,[Symbol.iterator]:qSt};function ED(e){return e==null?null:Ake(e)}function Ake(e){if(typeof e!="function")throw new Error;return e}function d1(){return 0}function fw(e){return function(){return e}}const XSt=1664525,QSt=1013904223,ghe=4294967296;function JSt(){let e=1;return()=>(e=(XSt*e+QSt)%ghe)/ghe}function ZSt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function eTt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function tTt(e,t){for(var n=0,r=(e=eTt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&Ike(o,s)?++n:(o=rTt(i=nTt(i,s)),n=0);return o}function nTt(e,t){var n,r;if(YB(t,e))return[t];for(n=0;n<e.length;++n)if(BN(t,e[n])&&YB(GC(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(BN(GC(e[n],e[r]),t)&&BN(GC(e[n],t),e[r])&&BN(GC(e[r],t),e[n])&&YB(kke(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function BN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function Ike(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function YB(e,t){for(var n=0;n<t.length;++n)if(!Ike(e,t[n]))return!1;return!0}function rTt(e){switch(e.length){case 1:return iTt(e[0]);case 2:return GC(e[0],e[1]);case 3:return kke(e[0],e[1],e[2])}}function iTt(e){return{x:e.x,y:e.y,r:e.r}}function GC(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,l=s-n,u=o-r,c=a-i,d=Math.sqrt(l*l+u*u);return{x:(n+s+l/d*c)/2,y:(r+o+u/d*c)/2,r:(d+i+a)/2}}function kke(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,l=t.r,u=n.x,c=n.y,d=n.r,f=r-o,h=r-u,p=i-a,m=i-c,g=l-s,y=d-s,v=r*r+i*i-s*s,_=v-o*o-a*a+l*l,w=v-u*u-c*c+d*d,x=h*p-f*m,S=(p*w-m*_)/(x*2)-r,E=(m*g-p*y)/x,T=(h*_-f*w)/(x*2)-i,I=(f*y-h*g)/x,k=E*E+I*I-1,P=2*(s+S*E+T*I),L=S*S+T*T-s*s,R=-(Math.abs(k)>1e-6?(P+Math.sqrt(P*P-4*k*L))/(2*k):L/P);return{x:r+S+E*R,y:i+T+I*R,r:R}}function yhe(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,l,u=r*r+o*o;u?(s=t.r+n.r,s*=s,l=e.r+n.r,l*=l,s>l?(i=(u+l-s)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(u+s-l)/(2*u),a=Math.sqrt(Math.max(0,s/u-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function vhe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function bhe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function zN(e){this._=e,this.next=null,this.previous=null}function sTt(e,t){if(!(s=(e=ZSt(e)).length))return 0;var n,r,i,s,o,a,l,u,c,d,f;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;yhe(r,n,i=e[2]),n=new zN(n),r=new zN(r),i=new zN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<s;++l){yhe(n._,r._,i=e[l]),i=new zN(i),u=r.next,c=n.previous,d=r._.r,f=n._.r;do if(d<=f){if(vhe(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}d+=u._.r,u=u.next}else{if(vhe(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue e}f+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=bhe(n);(i=i.next)!==r;)(a=bhe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=tTt(n,t),l=0;l<s;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function oTt(e){return Math.sqrt(e.value)}function aTt(){var e=null,t=1,n=1,r=d1;function i(s){const o=JSt();return s.x=t/2,s.y=n/2,e?s.eachBefore(_he(e)).eachAfter(KB(r,.5,o)).eachBefore(whe(1)):s.eachBefore(_he(oTt)).eachAfter(KB(d1,1,o)).eachAfter(KB(r,s.r/Math.min(t,n),o)).eachBefore(whe(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=ED(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:fw(+s),i):r},i}function _he(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function KB(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,l;if(a)for(s=0;s<o;++s)i[s].r+=a;if(l=sTt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=l+a}}}function whe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function Rke(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function mR(e,t,n,r,i){for(var s=e.children,o,a=-1,l=s.length,u=e.value&&(r-t)/e.value;++a<l;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*u}function lTt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(Rke),o}function s(o,a){return function(l){l.children&&mR(l,l.x0,o*(l.depth+1)/a,l.x1,o*(l.depth+2)/a);var u=l.x0,c=l.y0,d=l.x1-n,f=l.y1-n;d<u&&(u=d=(u+d)/2),f<c&&(c=f=(c+f)/2),l.x0=u,l.y0=c,l.x1=d,l.y1=f}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var uTt={depth:-1},xhe={},XB={};function cTt(e){return e.id}function dTt(e){return e.parentId}function Ehe(){var e=cTt,t=dTt,n;function r(i){var s=Array.from(i),o=e,a=t,l,u,c,d,f,h,p,m,g=new Map;if(n!=null){const y=s.map((w,x)=>fTt(n(w,x,i))),v=y.map(She),_=new Set(y).add("");for(const w of v)_.has(w)||(_.add(w),y.push(w),v.push(She(w)),s.push(XB));o=(w,x)=>y[x],a=(w,x)=>v[x]}for(c=0,l=s.length;c<l;++c)u=s[c],h=s[c]=new sE(u),(p=o(u,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?xhe:h)),(p=a(u,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<l;++c)if(h=s[c],p=h.parent){if(f=g.get(p),!f)throw new Error("missing: "+p);if(f===xhe)throw new Error("ambiguous: "+p);f.children?f.children.push(h):f.children=[h],h.parent=f}else{if(d)throw new Error("multiple roots");d=h}if(!d)throw new Error("no root");if(n!=null){for(;d.data===XB&&d.children.length===1;)d=d.children[0],--l;for(let y=s.length-1;y>=0&&(h=s[y],h.data===XB);--y)h.data=null}if(d.parent=uTt,d.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(Cke),d.parent=null,l>0)throw new Error("cycle");return d}return r.id=function(i){return arguments.length?(e=ED(i),r):e},r.parentId=function(i){return arguments.length?(t=ED(i),r):t},r.path=function(i){return arguments.length?(n=ED(i),r):n},r}function fTt(e){e=`${e}`;let t=e.length;return yH(e,t-1)&&!yH(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function She(e){let t=e.length;if(t<2)return"";for(;--t>1&&!yH(e,t););return e.slice(0,t)}function yH(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function hTt(e,t){return e.parent===t.parent?1:2}function QB(e){var t=e.children;return t?t[0]:e.t}function JB(e){var t=e.children;return t?t[t.length-1]:e.t}function pTt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function mTt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function gTt(e,t,n){return e.a.parent===t.parent?e.a:n}function SD(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}SD.prototype=Object.create(sE.prototype);function yTt(e){for(var t=new SD(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new SD(s[o],o)),i.parent=n;return(t.parent=new SD(null,0)).children=[t],t}function vTt(){var e=hTt,t=1,n=1,r=null;function i(u){var c=yTt(u);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)u.eachBefore(l);else{var d=u,f=u,h=u;u.eachBefore(function(v){v.x<d.x&&(d=v),v.x>f.x&&(f=v),v.depth>h.depth&&(h=v)});var p=d===f?1:e(d,f)/2,m=p-d.x,g=t/(f.x+p+m),y=n/(h.depth||1);u.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return u}function s(u){var c=u.children,d=u.parent.children,f=u.i?d[u.i-1]:null;if(c){mTt(u);var h=(c[0].z+c[c.length-1].z)/2;f?(u.z=f.z+e(u._,f._),u.m=u.z-h):u.z=h}else f&&(u.z=f.z+e(u._,f._));u.parent.A=a(u,f,u.parent.A||d[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,d){if(c){for(var f=u,h=u,p=c,m=f.parent.children[0],g=f.m,y=h.m,v=p.m,_=m.m,w;p=JB(p),f=QB(f),p&&f;)m=QB(m),h=JB(h),h.a=u,w=p.z+v-f.z-g+e(p._,f._),w>0&&(pTt(gTt(p,u,d),u,w),g+=w,y+=w),v+=p.m,g+=f.m,_+=m.m,y+=h.m;p&&!JB(h)&&(h.t=p,h.m+=v-y),f&&!QB(m)&&(m.t=f,m.m+=g-_,d=u)}return d}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function G6(e,t,n,r,i){for(var s=e.children,o,a=-1,l=s.length,u=e.value&&(i-n)/e.value;++a<l;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*u}var Pke=(1+Math.sqrt(5))/2;function Nke(e,t,n,r,i,s){for(var o=[],a=t.children,l,u,c=0,d=0,f=a.length,h,p,m=t.value,g,y,v,_,w,x,S;c<f;){h=i-n,p=s-r;do g=a[d++].value;while(!g&&d<f);for(y=v=g,x=Math.max(p/h,h/p)/(m*e),S=g*g*x,w=Math.max(v/S,S/y);d<f;++d){if(g+=u=a[d].value,u<y&&(y=u),u>v&&(v=u),S=g*g*x,_=Math.max(v/S,S/y),_>w){g-=u;break}w=_}o.push(l={value:g,dice:h<p,children:a.slice(c,d)}),l.dice?mR(l,n,r,i,m?r+=p*g/m:s):G6(l,n,r,m?n+=h*g/m:i,s),m-=g,c=d}return o}const Oke=function e(t){function n(r,i,s,o,a){Nke(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Pke);function bTt(){var e=Oke,t=!1,n=1,r=1,i=[0],s=d1,o=d1,a=d1,l=d1,u=d1;function c(f){return f.x0=f.y0=0,f.x1=n,f.y1=r,f.eachBefore(d),i=[0],t&&f.eachBefore(Rke),f}function d(f){var h=i[f.depth],p=f.x0+h,m=f.y0+h,g=f.x1-h,y=f.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),f.x0=p,f.y0=m,f.x1=g,f.y1=y,f.children&&(h=i[f.depth+1]=s(f)/2,p+=u(f)-h,m+=o(f)-h,g-=a(f)-h,y-=l(f)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(f,p,m,g,y))}return c.round=function(f){return arguments.length?(t=!!f,c):t},c.size=function(f){return arguments.length?(n=+f[0],r=+f[1],c):[n,r]},c.tile=function(f){return arguments.length?(e=Ake(f),c):e},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(s=typeof f=="function"?f:fw(+f),c):s},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(o=typeof f=="function"?f:fw(+f),c):o},c.paddingRight=function(f){return arguments.length?(a=typeof f=="function"?f:fw(+f),c):a},c.paddingBottom=function(f){return arguments.length?(l=typeof f=="function"?f:fw(+f),c):l},c.paddingLeft=function(f){return arguments.length?(u=typeof f=="function"?f:fw(+f),c):u},c}function _Tt(e,t,n,r,i){var s=e.children,o,a=s.length,l,u=new Array(a+1);for(u[0]=l=o=0;o<a;++o)u[o+1]=l+=s[o].value;c(0,a,e.value,t,n,r,i);function c(d,f,h,p,m,g,y){if(d>=f-1){var v=s[d];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var _=u[d],w=h/2+_,x=d+1,S=f-1;x<S;){var E=x+S>>>1;u[E]<w?x=E+1:S=E}w-u[x-1]<u[x]-w&&d+1<x&&--x;var T=u[x]-_,I=h-T;if(g-p>y-m){var k=h?(p*I+g*T)/h:g;c(d,x,T,p,m,k,y),c(x,f,I,k,m,g,y)}else{var P=h?(m*I+y*T)/h:y;c(d,x,T,p,m,g,P),c(x,f,I,p,P,g,y)}}}function wTt(e,t,n,r,i){(e.depth&1?G6:mR)(e,t,n,r,i)}const xTt=function e(t){function n(r,i,s,o,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,c,d,f=-1,h,p=l.length,m=r.value;++f<p;){for(u=l[f],c=u.children,d=u.value=0,h=c.length;d<h;++d)u.value+=c[d].value;u.dice?mR(u,i,s,o,m?s+=(a-s)*u.value/m:a):G6(u,i,s,m?i+=(o-i)*u.value/m:o,a),m-=u.value}else r._squarify=l=Nke(t,r,i,s,o,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(Pke);function Ef(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Jy(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const vH=Symbol("implicit");function IS(){var e=new ife,t=[],n=[],r=vH;function i(s){let o=e.get(s);if(o===void 0){if(r!==vH)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new ife;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return IS(t,n).unknown(r)},Ef.apply(i,arguments),i}function Y6(){var e=IS().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,l=0,u=0,c=.5;delete e.unknown;function d(){var f=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,f-l+u*2),a&&(s=Math.floor(s)),p+=(m-p-s*(f-l))*c,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var g=Ol(f).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),d()):t()},e.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},e.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,a=!0,d()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(f){return arguments.length?(a=!!f,d()):a},e.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),d()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},e.paddingOuter=function(f){return arguments.length?(u=+f,d()):u},e.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),d()):c},e.copy=function(){return Y6(t(),[r,i]).round(a).paddingInner(l).paddingOuter(u).align(c)},Ef.apply(d(),arguments)}function ETt(e){return function(){return e}}function bH(e){return+e}var The=[0,1];function Dl(e){return e}function _H(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:ETt(isNaN(t)?NaN:.5)}function STt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function TTt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=_H(i,r),s=n(o,s)):(r=_H(r,i),s=n(s,o)),function(a){return s(r(a))}}function CTt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=_H(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=iy(e,a,1,r)-1;return s[l](i[l](a))}}function gR(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function K6(){var e=The,t=The,n=ug,r,i,s,o=Dl,a,l,u;function c(){var f=Math.min(e.length,t.length);return o!==Dl&&(o=STt(e[0],e[f-1])),a=f>2?CTt:TTt,l=u=null,d}function d(f){return f==null||isNaN(f=+f)?s:(l||(l=a(e.map(r),t,n)))(r(o(f)))}return d.invert=function(f){return o(i((u||(u=a(t,e.map(r),hc)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,bH),c()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=dR,c()},d.clamp=function(f){return arguments.length?(o=f?!0:Dl,c()):o!==Dl},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,h){return r=f,i=h,c()}}function Dke(){return K6()(Dl,Dl)}function Mke(e,t,n,r){var i=sy(e,t,n),s;switch(r=db(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=LIe(i,o))&&(r.precision=s),NJ(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=FIe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=$Ie(i))&&(r.precision=s-(r.type==="%")*2);break}}return CS(r)}function Zb(e){var t=e.domain;return e.ticks=function(n){var r=t();return OV(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return Mke(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);c-- >0;){if(u=DV(o,a,n),u===l)return r[i]=o,r[s]=a,t(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function Ba(){var e=Dke();return e.copy=function(){return gR(e,Ba())},Ef.apply(e,arguments),Zb(e)}function $ke(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,bH),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return $ke(e).unknown(t)},e=arguments.length?Array.from(e,bH):[0,1],Zb(n)}function Lke(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Che(e){return Math.log(e)}function Ahe(e){return Math.exp(e)}function ATt(e){return-Math.log(-e)}function ITt(e){return-Math.exp(-e)}function kTt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function RTt(e){return e===10?kTt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function PTt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Ihe(e){return(t,n)=>-e(-t,n)}function zJ(e){const t=e(Che,Ahe),n=t.domain;let r=10,i,s;function o(){return i=PTt(r),s=RTt(r),n()[0]<0?(i=Ihe(i),s=Ihe(s),e(ATt,ITt)):e(Che,Ahe),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let f=i(u),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-f<g){if(f=Math.floor(f),h=Math.ceil(h),u>0){for(;f<=h;++f)for(p=1;p<r;++p)if(m=f<0?p/s(-f):p*s(f),!(m<u)){if(m>c)break;y.push(m)}}else for(;f<=h;++f)for(p=r-1;p>=1;--p)if(m=f>0?p/s(-f):p*s(f),!(m<u)){if(m>c)break;y.push(m)}y.length*2<g&&(y=OV(u,c,g))}else y=OV(f,h,Math.min(h-f,g)).map(s);return d?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=db(l)).precision==null&&(l.trim=!0),l=CS(l)),a===1/0)return l;const u=Math.max(1,r*a/t.ticks().length);return c=>{let d=c/s(Math.round(i(c)));return d*r<r-.5&&(d*=r),d<=u?l(c):""}},t.nice=()=>n(Lke(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function Fke(){const e=zJ(K6()).domain([1,10]);return e.copy=()=>gR(e,Fke()).base(e.base()),Ef.apply(e,arguments),e}function khe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Rhe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function UJ(e){var t=1,n=e(khe(t),Rhe(t));return n.constant=function(r){return arguments.length?e(khe(t=+r),Rhe(t)):t},Zb(n)}function jke(){var e=UJ(K6());return e.copy=function(){return gR(e,jke()).constant(e.constant())},Ef.apply(e,arguments)}function Phe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function NTt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function OTt(e){return e<0?-e*e:e*e}function VJ(e){var t=e(Dl,Dl),n=1;function r(){return n===1?e(Dl,Dl):n===.5?e(NTt,OTt):e(Phe(n),Phe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Zb(t)}function HJ(){var e=VJ(K6());return e.copy=function(){return gR(e,HJ()).exponent(e.exponent())},Ef.apply(e,arguments),e}function DTt(){return HJ.apply(null,arguments).exponent(.5)}function Bke(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=MAe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[iy(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(vm),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return Bke().domain(e).range(t).unknown(r)},Ef.apply(s,arguments)}function zke(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[iy(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return zke().domain([e,t]).range(i).unknown(s)},Ef.apply(Zb(o),arguments)}function Uke(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[iy(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Uke().domain(e).range(t).unknown(n)},Ef.apply(i,arguments)}const ZB=new Date,e9=new Date;function Bs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),t(s,a),e(s);while(u<s&&s<o);return l},i.filter=s=>Bs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(ZB.setTime(+s),e9.setTime(+o),e(ZB),e(e9),Math.floor(n(ZB,e9))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const oE=Bs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);oE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Bs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):oE);oE.range;const im=1e3,Sc=im*60,sm=Sc*60,zm=sm*24,qJ=zm*7,Nhe=zm*30,t9=zm*365,om=Bs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*im)},(e,t)=>(t-e)/im,e=>e.getUTCSeconds());om.range;const X6=Bs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*im)},(e,t)=>{e.setTime(+e+t*Sc)},(e,t)=>(t-e)/Sc,e=>e.getMinutes());X6.range;const Q6=Bs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Sc)},(e,t)=>(t-e)/Sc,e=>e.getUTCMinutes());Q6.range;const J6=Bs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*im-e.getMinutes()*Sc)},(e,t)=>{e.setTime(+e+t*sm)},(e,t)=>(t-e)/sm,e=>e.getHours());J6.range;const Z6=Bs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*sm)},(e,t)=>(t-e)/sm,e=>e.getUTCHours());Z6.range;const _m=Bs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Sc)/zm,e=>e.getDate()-1);_m.range;const B0=Bs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/zm,e=>e.getUTCDate()-1);B0.range;const Vke=Bs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/zm,e=>Math.floor(e/zm));Vke.range;function e_(e){return Bs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Sc)/qJ)}const kS=e_(0),J$=e_(1),MTt=e_(2),$Tt=e_(3),aE=e_(4),LTt=e_(5),FTt=e_(6);kS.range;J$.range;MTt.range;$Tt.range;aE.range;LTt.range;FTt.range;function t_(e){return Bs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/qJ)}const RS=t_(0),Z$=t_(1),jTt=t_(2),BTt=t_(3),lE=t_(4),zTt=t_(5),UTt=t_(6);RS.range;Z$.range;jTt.range;BTt.range;lE.range;zTt.range;UTt.range;const SI=Bs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());SI.range;const TI=Bs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());TI.range;const Uh=Bs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Uh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Uh.range;const Vh=Bs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Vh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Vh.range;function Hke(e,t,n,r,i,s){const o=[[om,1,im],[om,5,5*im],[om,15,15*im],[om,30,30*im],[s,1,Sc],[s,5,5*Sc],[s,15,15*Sc],[s,30,30*Sc],[i,1,sm],[i,3,3*sm],[i,6,6*sm],[i,12,12*sm],[r,1,zm],[r,2,2*zm],[n,1,qJ],[t,1,Nhe],[t,3,3*Nhe],[e,1,t9]];function a(u,c,d){const f=c<u;f&&([u,c]=[c,u]);const h=d&&typeof d.range=="function"?d:l(u,c,d),p=h?h.range(u,+c+1):[];return f?p.reverse():p}function l(u,c,d){const f=Math.abs(c-u)/d,h=SS(([,,g])=>g).right(o,f);if(h===o.length)return e.every(sy(u/t9,c/t9,d));if(h===0)return oE.every(Math.max(sy(u,c,d),1));const[p,m]=o[f/o[h-1][2]<o[h][2]/f?h-1:h];return p.every(m)}return[a,l]}const[VTt,HTt]=Hke(Vh,TI,RS,Vke,Z6,Q6),[qTt,WTt]=Hke(Uh,SI,kS,_m,J6,X6);function n9(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r9(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function GT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function qke(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,u=YT(i),c=KT(i),d=YT(s),f=KT(s),h=YT(o),p=KT(o),m=YT(a),g=KT(a),y=YT(l),v=KT(l),_={a:F,A:U,b:V,B:M,c:null,d:Fhe,e:Fhe,f:mCt,g:TCt,G:ACt,H:fCt,I:hCt,j:pCt,L:Wke,m:gCt,M:yCt,p:z,q,Q:zhe,s:Uhe,S:vCt,u:bCt,U:_Ct,V:wCt,w:xCt,W:ECt,x:null,X:null,y:SCt,Y:CCt,Z:ICt,"%":Bhe},w={a:j,A:H,b:G,B:J,c:null,d:jhe,e:jhe,f:NCt,g:UCt,G:HCt,H:kCt,I:RCt,j:PCt,L:Yke,m:OCt,M:DCt,p:re,q:ie,Q:zhe,s:Uhe,S:MCt,u:$Ct,U:LCt,V:FCt,w:jCt,W:BCt,x:null,X:null,y:zCt,Y:VCt,Z:qCt,"%":Bhe},x={a:k,A:P,b:L,B:R,c:$,d:$he,e:$he,f:lCt,g:Mhe,G:Dhe,H:Lhe,I:Lhe,j:iCt,L:aCt,m:rCt,M:sCt,p:I,q:nCt,Q:cCt,s:dCt,S:oCt,u:QTt,U:JTt,V:ZTt,w:XTt,W:eCt,x:D,X:O,y:Mhe,Y:Dhe,Z:tCt,"%":uCt};_.x=S(n,_),_.X=S(r,_),_.c=S(t,_),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(te,ae){return function(_e){var ce=[],ze=-1,Oe=0,$e=te.length,Ne,pe,ue;for(_e instanceof Date||(_e=new Date(+_e));++ze<$e;)te.charCodeAt(ze)===37&&(ce.push(te.slice(Oe,ze)),(pe=Ohe[Ne=te.charAt(++ze)])!=null?Ne=te.charAt(++ze):pe=Ne==="e"?" ":"0",(ue=ae[Ne])&&(Ne=ue(_e,pe)),ce.push(Ne),Oe=ze+1);return ce.push(te.slice(Oe,ze)),ce.join("")}}function E(te,ae){return function(_e){var ce=GT(1900,void 0,1),ze=T(ce,te,_e+="",0),Oe,$e;if(ze!=_e.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(ae&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(Oe=r9(GT(ce.y,0,1)),$e=Oe.getUTCDay(),Oe=$e>4||$e===0?Z$.ceil(Oe):Z$(Oe),Oe=B0.offset(Oe,(ce.V-1)*7),ce.y=Oe.getUTCFullYear(),ce.m=Oe.getUTCMonth(),ce.d=Oe.getUTCDate()+(ce.w+6)%7):(Oe=n9(GT(ce.y,0,1)),$e=Oe.getDay(),Oe=$e>4||$e===0?J$.ceil(Oe):J$(Oe),Oe=_m.offset(Oe,(ce.V-1)*7),ce.y=Oe.getFullYear(),ce.m=Oe.getMonth(),ce.d=Oe.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),$e="Z"in ce?r9(GT(ce.y,0,1)).getUTCDay():n9(GT(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-($e+5)%7:ce.w+ce.U*7-($e+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,r9(ce)):n9(ce)}}function T(te,ae,_e,ce){for(var ze=0,Oe=ae.length,$e=_e.length,Ne,pe;ze<Oe;){if(ce>=$e)return-1;if(Ne=ae.charCodeAt(ze++),Ne===37){if(Ne=ae.charAt(ze++),pe=x[Ne in Ohe?ae.charAt(ze++):Ne],!pe||(ce=pe(te,_e,ce))<0)return-1}else if(Ne!=_e.charCodeAt(ce++))return-1}return ce}function I(te,ae,_e){var ce=u.exec(ae.slice(_e));return ce?(te.p=c.get(ce[0].toLowerCase()),_e+ce[0].length):-1}function k(te,ae,_e){var ce=h.exec(ae.slice(_e));return ce?(te.w=p.get(ce[0].toLowerCase()),_e+ce[0].length):-1}function P(te,ae,_e){var ce=d.exec(ae.slice(_e));return ce?(te.w=f.get(ce[0].toLowerCase()),_e+ce[0].length):-1}function L(te,ae,_e){var ce=y.exec(ae.slice(_e));return ce?(te.m=v.get(ce[0].toLowerCase()),_e+ce[0].length):-1}function R(te,ae,_e){var ce=m.exec(ae.slice(_e));return ce?(te.m=g.get(ce[0].toLowerCase()),_e+ce[0].length):-1}function $(te,ae,_e){return T(te,t,ae,_e)}function D(te,ae,_e){return T(te,n,ae,_e)}function O(te,ae,_e){return T(te,r,ae,_e)}function F(te){return o[te.getDay()]}function U(te){return s[te.getDay()]}function V(te){return l[te.getMonth()]}function M(te){return a[te.getMonth()]}function z(te){return i[+(te.getHours()>=12)]}function q(te){return 1+~~(te.getMonth()/3)}function j(te){return o[te.getUTCDay()]}function H(te){return s[te.getUTCDay()]}function G(te){return l[te.getUTCMonth()]}function J(te){return a[te.getUTCMonth()]}function re(te){return i[+(te.getUTCHours()>=12)]}function ie(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var ae=S(te+="",_);return ae.toString=function(){return te},ae},parse:function(te){var ae=E(te+="",!1);return ae.toString=function(){return te},ae},utcFormat:function(te){var ae=S(te+="",w);return ae.toString=function(){return te},ae},utcParse:function(te){var ae=E(te+="",!0);return ae.toString=function(){return te},ae}}}var Ohe={"-":"",_:" ",0:"0"},no=/^\s*\d+/,GTt=/^%/,YTt=/[\\^$*+?|[\]().{}]/g;function fr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function KTt(e){return e.replace(YTt,"\\$&")}function YT(e){return new RegExp("^(?:"+e.map(KTt).join("|")+")","i")}function KT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function XTt(e,t,n){var r=no.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function QTt(e,t,n){var r=no.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function JTt(e,t,n){var r=no.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function ZTt(e,t,n){var r=no.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function eCt(e,t,n){var r=no.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Dhe(e,t,n){var r=no.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Mhe(e,t,n){var r=no.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function tCt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function nCt(e,t,n){var r=no.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function rCt(e,t,n){var r=no.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function $he(e,t,n){var r=no.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function iCt(e,t,n){var r=no.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Lhe(e,t,n){var r=no.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function sCt(e,t,n){var r=no.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function oCt(e,t,n){var r=no.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function aCt(e,t,n){var r=no.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function lCt(e,t,n){var r=no.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function uCt(e,t,n){var r=GTt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function cCt(e,t,n){var r=no.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function dCt(e,t,n){var r=no.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Fhe(e,t){return fr(e.getDate(),t,2)}function fCt(e,t){return fr(e.getHours(),t,2)}function hCt(e,t){return fr(e.getHours()%12||12,t,2)}function pCt(e,t){return fr(1+_m.count(Uh(e),e),t,3)}function Wke(e,t){return fr(e.getMilliseconds(),t,3)}function mCt(e,t){return Wke(e,t)+"000"}function gCt(e,t){return fr(e.getMonth()+1,t,2)}function yCt(e,t){return fr(e.getMinutes(),t,2)}function vCt(e,t){return fr(e.getSeconds(),t,2)}function bCt(e){var t=e.getDay();return t===0?7:t}function _Ct(e,t){return fr(kS.count(Uh(e)-1,e),t,2)}function Gke(e){var t=e.getDay();return t>=4||t===0?aE(e):aE.ceil(e)}function wCt(e,t){return e=Gke(e),fr(aE.count(Uh(e),e)+(Uh(e).getDay()===4),t,2)}function xCt(e){return e.getDay()}function ECt(e,t){return fr(J$.count(Uh(e)-1,e),t,2)}function SCt(e,t){return fr(e.getFullYear()%100,t,2)}function TCt(e,t){return e=Gke(e),fr(e.getFullYear()%100,t,2)}function CCt(e,t){return fr(e.getFullYear()%1e4,t,4)}function ACt(e,t){var n=e.getDay();return e=n>=4||n===0?aE(e):aE.ceil(e),fr(e.getFullYear()%1e4,t,4)}function ICt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+fr(t/60|0,"0",2)+fr(t%60,"0",2)}function jhe(e,t){return fr(e.getUTCDate(),t,2)}function kCt(e,t){return fr(e.getUTCHours(),t,2)}function RCt(e,t){return fr(e.getUTCHours()%12||12,t,2)}function PCt(e,t){return fr(1+B0.count(Vh(e),e),t,3)}function Yke(e,t){return fr(e.getUTCMilliseconds(),t,3)}function NCt(e,t){return Yke(e,t)+"000"}function OCt(e,t){return fr(e.getUTCMonth()+1,t,2)}function DCt(e,t){return fr(e.getUTCMinutes(),t,2)}function MCt(e,t){return fr(e.getUTCSeconds(),t,2)}function $Ct(e){var t=e.getUTCDay();return t===0?7:t}function LCt(e,t){return fr(RS.count(Vh(e)-1,e),t,2)}function Kke(e){var t=e.getUTCDay();return t>=4||t===0?lE(e):lE.ceil(e)}function FCt(e,t){return e=Kke(e),fr(lE.count(Vh(e),e)+(Vh(e).getUTCDay()===4),t,2)}function jCt(e){return e.getUTCDay()}function BCt(e,t){return fr(Z$.count(Vh(e)-1,e),t,2)}function zCt(e,t){return fr(e.getUTCFullYear()%100,t,2)}function UCt(e,t){return e=Kke(e),fr(e.getUTCFullYear()%100,t,2)}function VCt(e,t){return fr(e.getUTCFullYear()%1e4,t,4)}function HCt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?lE(e):lE.ceil(e),fr(e.getUTCFullYear()%1e4,t,4)}function qCt(){return"+0000"}function Bhe(){return"%"}function zhe(e){return+e}function Uhe(e){return Math.floor(+e/1e3)}var W_,WJ,Xke,e4,Qke;WCt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function WCt(e){return W_=qke(e),WJ=W_.format,Xke=W_.parse,e4=W_.utcFormat,Qke=W_.utcParse,W_}function GCt(e){return new Date(e)}function YCt(e){return e instanceof Date?+e:+new Date(+e)}function GJ(e,t,n,r,i,s,o,a,l,u){var c=Dke(),d=c.invert,f=c.domain,h=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),v=u("%b %d"),_=u("%B"),w=u("%Y");function x(S){return(l(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?_:w)(S)}return c.invert=function(S){return new Date(d(S))},c.domain=function(S){return arguments.length?f(Array.from(S,YCt)):f().map(GCt)},c.ticks=function(S){var E=f();return e(E[0],E[E.length-1],S??10)},c.tickFormat=function(S,E){return E==null?x:u(E)},c.nice=function(S){var E=f();return(!S||typeof S.range!="function")&&(S=t(E[0],E[E.length-1],S??10)),S?f(Lke(E,S)):c},c.copy=function(){return gR(c,GJ(e,t,n,r,i,s,o,a,l,u))},c}function Jke(){return Ef.apply(GJ(qTt,WTt,Uh,SI,kS,_m,J6,X6,om,WJ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function KCt(){return Ef.apply(GJ(VTt,HTt,Vh,TI,RS,B0,Z6,Q6,om,e4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function t4(){var e=0,t=1,n,r,i,s,o=Dl,a=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(s(d)-n)*i,a?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(o=d,u):o};function c(d){return function(f){var h,p;return arguments.length?([h,p]=f,o=d(h,p),u):[o(0),o(1)]}}return u.range=c(ug),u.rangeRound=c(dR),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return s=d,n=d(e),r=d(t),i=n===r?0:1/(r-n),u}}function Zy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function YJ(){var e=Zb(t4()(Dl));return e.copy=function(){return Zy(e,YJ())},Jy.apply(e,arguments)}function Zke(){var e=zJ(t4()).domain([1,10]);return e.copy=function(){return Zy(e,Zke()).base(e.base())},Jy.apply(e,arguments)}function eRe(){var e=UJ(t4());return e.copy=function(){return Zy(e,eRe()).constant(e.constant())},Jy.apply(e,arguments)}function KJ(){var e=VJ(t4());return e.copy=function(){return Zy(e,KJ()).exponent(e.exponent())},Jy.apply(e,arguments)}function XCt(){return KJ.apply(null,arguments).exponent(.5)}function n4(){var e=0,t=.5,n=1,r=1,i,s,o,a,l,u=Dl,c,d=!1,f;function h(m){return isNaN(m=+m)?f:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:l),u(d?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(d=!!m,h):d},h.interpolator=function(m){return arguments.length?(u=m,h):u};function p(m){return function(g){var y,v,_;return arguments.length?([y,v,_]=g,u=xJ(m,[y,v,_]),h):[u(0),u(.5),u(1)]}}return h.range=p(ug),h.rangeRound=p(dR),h.unknown=function(m){return arguments.length?(f=m,h):f},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function tRe(){var e=Zb(n4()(Dl));return e.copy=function(){return Zy(e,tRe())},Jy.apply(e,arguments)}function nRe(){var e=zJ(n4()).domain([.1,1,10]);return e.copy=function(){return Zy(e,nRe()).base(e.base())},Jy.apply(e,arguments)}function rRe(){var e=UJ(n4());return e.copy=function(){return Zy(e,rRe()).constant(e.constant())},Jy.apply(e,arguments)}function XJ(){var e=VJ(n4());return e.copy=function(){return Zy(e,XJ()).exponent(e.exponent())},Jy.apply(e,arguments)}function QCt(){return XJ.apply(null,arguments).exponent(.5)}function Sf(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const JCt=Sf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),ZCt=Sf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),e2t=Sf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),t2t=Sf("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),n2t=Sf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),r2t=Sf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),i2t=Sf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),s2t=Sf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),o2t=Sf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),a2t=Sf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),iRe=Sf("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function xr(e){return function(){return e}}const Vhe=Math.abs,Ko=Math.atan2,Rv=Math.cos,l2t=Math.max,i9=Math.min,jf=Math.sin,k1=Math.sqrt,Jo=1e-12,uE=Math.PI,e3=uE/2,sRe=2*uE;function u2t(e){return e>1?0:e<-1?uE:Math.acos(e)}function Hhe(e){return e>=1?e3:e<=-1?-e3:Math.asin(e)}function r4(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new AJ(t)}function c2t(e){return e.innerRadius}function d2t(e){return e.outerRadius}function f2t(e){return e.startAngle}function h2t(e){return e.endAngle}function p2t(e){return e&&e.padAngle}function m2t(e,t,n,r,i,s,o,a){var l=n-e,u=r-t,c=o-i,d=a-s,f=d*l-c*u;if(!(f*f<Jo))return f=(c*(t-s)-d*(e-i))/f,[e+f*l,t+f*u]}function UN(e,t,n,r,i,s,o){var a=e-n,l=t-r,u=(o?s:-s)/k1(a*a+l*l),c=u*l,d=-u*a,f=e+c,h=t+d,p=n+c,m=r+d,g=(f+p)/2,y=(h+m)/2,v=p-f,_=m-h,w=v*v+_*_,x=i-s,S=f*m-p*h,E=(_<0?-1:1)*k1(l2t(0,x*x*w-S*S)),T=(S*_-v*E)/w,I=(-S*v-_*E)/w,k=(S*_+v*E)/w,P=(-S*v+_*E)/w,L=T-g,R=I-y,$=k-g,D=P-y;return L*L+R*R>$*$+D*D&&(T=k,I=P),{cx:T,cy:I,x01:-c,y01:-d,x11:T*(i/x-1),y11:I*(i/x-1)}}function g2t(){var e=c2t,t=d2t,n=xr(0),r=null,i=f2t,s=h2t,o=p2t,a=null,l=r4(u);function u(){var c,d,f=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-e3,m=s.apply(this,arguments)-e3,g=Vhe(m-p),y=m>p;if(a||(a=c=l()),h<f&&(d=h,h=f,f=d),!(h>Jo))a.moveTo(0,0);else if(g>sRe-Jo)a.moveTo(h*Rv(p),h*jf(p)),a.arc(0,0,h,p,m,!y),f>Jo&&(a.moveTo(f*Rv(m),f*jf(m)),a.arc(0,0,f,m,p,y));else{var v=p,_=m,w=p,x=m,S=g,E=g,T=o.apply(this,arguments)/2,I=T>Jo&&(r?+r.apply(this,arguments):k1(f*f+h*h)),k=i9(Vhe(h-f)/2,+n.apply(this,arguments)),P=k,L=k,R,$;if(I>Jo){var D=Hhe(I/f*jf(T)),O=Hhe(I/h*jf(T));(S-=D*2)>Jo?(D*=y?1:-1,w+=D,x-=D):(S=0,w=x=(p+m)/2),(E-=O*2)>Jo?(O*=y?1:-1,v+=O,_-=O):(E=0,v=_=(p+m)/2)}var F=h*Rv(v),U=h*jf(v),V=f*Rv(x),M=f*jf(x);if(k>Jo){var z=h*Rv(_),q=h*jf(_),j=f*Rv(w),H=f*jf(w),G;if(g<uE)if(G=m2t(F,U,j,H,z,q,V,M)){var J=F-G[0],re=U-G[1],ie=z-G[0],te=q-G[1],ae=1/jf(u2t((J*ie+re*te)/(k1(J*J+re*re)*k1(ie*ie+te*te)))/2),_e=k1(G[0]*G[0]+G[1]*G[1]);P=i9(k,(f-_e)/(ae-1)),L=i9(k,(h-_e)/(ae+1))}else P=L=0}E>Jo?L>Jo?(R=UN(j,H,F,U,h,L,y),$=UN(z,q,V,M,h,L,y),a.moveTo(R.cx+R.x01,R.cy+R.y01),L<k?a.arc(R.cx,R.cy,L,Ko(R.y01,R.x01),Ko($.y01,$.x01),!y):(a.arc(R.cx,R.cy,L,Ko(R.y01,R.x01),Ko(R.y11,R.x11),!y),a.arc(0,0,h,Ko(R.cy+R.y11,R.cx+R.x11),Ko($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,L,Ko($.y11,$.x11),Ko($.y01,$.x01),!y))):(a.moveTo(F,U),a.arc(0,0,h,v,_,!y)):a.moveTo(F,U),!(f>Jo)||!(S>Jo)?a.lineTo(V,M):P>Jo?(R=UN(V,M,z,q,f,-P,y),$=UN(F,U,j,H,f,-P,y),a.lineTo(R.cx+R.x01,R.cy+R.y01),P<k?a.arc(R.cx,R.cy,P,Ko(R.y01,R.x01),Ko($.y01,$.x01),!y):(a.arc(R.cx,R.cy,P,Ko(R.y01,R.x01),Ko(R.y11,R.x11),!y),a.arc(0,0,f,Ko(R.cy+R.y11,R.cx+R.x11),Ko($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,P,Ko($.y11,$.x11),Ko($.y01,$.x01),!y))):a.arc(0,0,f,x,w,y)}if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-uE/2;return[Rv(d)*c,jf(d)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:xr(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:xr(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:xr(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:xr(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:xr(+c),u):i},u.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:xr(+c),u):s},u.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:xr(+c),u):o},u.context=function(c){return arguments.length?(a=c??null,u):a},u}function oRe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function aRe(e){this._context=e}aRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function QJ(e){return new aRe(e)}function lRe(e){return e[0]}function uRe(e){return e[1]}function t3(e,t){var n=xr(!0),r=null,i=QJ,s=null,o=r4(a);e=typeof e=="function"?e:e===void 0?lRe:xr(e),t=typeof t=="function"?t:t===void 0?uRe:xr(t);function a(l){var u,c=(l=oRe(l)).length,d,f=!1,h;for(r==null&&(s=i(h=o())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(d,u,l),+t(d,u,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:xr(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:xr(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:xr(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function cRe(e,t,n){var r=null,i=xr(!0),s=null,o=QJ,a=null,l=r4(u);e=typeof e=="function"?e:e===void 0?lRe:xr(+e),t=typeof t=="function"?t:xr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?uRe:xr(+n);function u(d){var f,h,p,m=(d=oRe(d)).length,g,y=!1,v,_=new Array(m),w=new Array(m);for(s==null&&(a=o(v=l())),f=0;f<=m;++f){if(!(f<m&&i(g=d[f],f,d))===y)if(y=!y)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=f-1;p>=h;--p)a.point(_[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(_[f]=+e(g,f,d),w[f]=+t(g,f,d),a.point(r?+r(g,f,d):_[f],n?+n(g,f,d):w[f]))}if(v)return a=null,v+""||null}function c(){return t3().defined(i).curve(o).context(s)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:xr(+d),r=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:xr(+d),u):e},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:xr(+d),u):r},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:xr(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:xr(+d),u):t},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:xr(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:xr(!!d),u):i},u.curve=function(d){return arguments.length?(o=d,s!=null&&(a=o(s)),u):o},u.context=function(d){return arguments.length?(d==null?s=a=null:a=o(s=d),u):s},u}const y2t={draw(e,t){const n=k1(t/uE);e.moveTo(n,0),e.arc(0,0,n,0,sRe)}};function v2t(e,t){let n=null,r=r4(i);e=typeof e=="function"?e:xr(e||y2t),t=typeof t=="function"?t:xr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:xr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:xr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function ay(){}function n3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function i4(e){this._context=e}i4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:n3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:n3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wH(e){return new i4(e)}function dRe(e){this._context=e}dRe.prototype={areaStart:ay,areaEnd:ay,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:n3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function b2t(e){return new dRe(e)}function fRe(e){this._context=e}fRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:n3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _2t(e){return new fRe(e)}function hRe(e,t){this._basis=new i4(e),this._beta=t}hRe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*s),this._beta*t[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const w2t=function e(t){function n(r){return t===1?new i4(r):new hRe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function r3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function JJ(e,t){this._context=e,this._k=(1-t)/6}JJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:r3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:r3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const x2t=function e(t){function n(r){return new JJ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function ZJ(e,t){this._context=e,this._k=(1-t)/6}ZJ.prototype={areaStart:ay,areaEnd:ay,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:r3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const E2t=function e(t){function n(r){return new ZJ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function eZ(e,t){this._context=e,this._k=(1-t)/6}eZ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:r3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const S2t=function e(t){function n(r){return new eZ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function tZ(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Jo){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Jo){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*u+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function pRe(e,t){this._context=e,this._alpha=t}pRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:tZ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const T2t=function e(t){function n(r){return t?new pRe(r,t):new JJ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function mRe(e,t){this._context=e,this._alpha=t}mRe.prototype={areaStart:ay,areaEnd:ay,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:tZ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const C2t=function e(t){function n(r){return t?new mRe(r,t):new ZJ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function gRe(e,t){this._context=e,this._alpha=t}gRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tZ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const A2t=function e(t){function n(r){return t?new gRe(r,t):new eZ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function yRe(e){this._context=e}yRe.prototype={areaStart:ay,areaEnd:ay,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function I2t(e){return new yRe(e)}function qhe(e){return e<0?-1:1}function Whe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(qhe(s)+qhe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Ghe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function s9(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function i3(e){this._context=e}i3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:s9(this,this._t0,Ghe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,s9(this,Ghe(this,n=Whe(this,e,t)),n);break;default:s9(this,this._t0,n=Whe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function vRe(e){this._context=new bRe(e)}(vRe.prototype=Object.create(i3.prototype)).point=function(e,t){i3.prototype.point.call(this,t,e)};function bRe(e){this._context=e}bRe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function k2t(e){return new i3(e)}function R2t(e){return new vRe(e)}function _Re(e){this._context=e}_Re.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Yhe(e),i=Yhe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Yhe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function P2t(e){return new _Re(e)}function s4(e,t){this._context=e,this._t=t}s4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function N2t(e){return new s4(e,.5)}function O2t(e){return new s4(e,0)}function D2t(e){return new s4(e,1)}function YC(e,t,n){this.k=e,this.x=t,this.y=n}YC.prototype={constructor:YC,scale:function(e){return e===1?this:new YC(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new YC(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};YC.prototype;function yR({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1,dropdownColumn:l=!1,columnList:u,setColumn:c,stringTicks:d=!1}){const f=A.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),h=A.useCallback(p=>(s?e4("%B"):CS(".2s"))(p),[s]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:120,children:b.jsx(Ya,{children:b.jsx(gn,{gap:3,children:b.jsx(Xe,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?b.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:p,offset:m})=>b.jsxs("g",{transform:`translate(${m}, ${n})`,children:[b.jsx("line",{y2:"6",stroke:"currentColor"}),o?b.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,b.jsx("foreignObject",{x:0-f/2,y:10,width:f,height:20,children:b.jsx(Ya,{children:b.jsx(Xt,{withinPortal:!0,label:p,children:b.jsx(Xe,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:d?p:+p==0?0:h(s?new Date(p):p)})})})})]},`${p}test`))]})}const M2t=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:yR},Symbol.toStringTag,{value:"Module"}));function o4({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=A.useMemo(()=>{const l=i.reduce((u,{value:c})=>{const{length:d}=`${c}`;return d>u?d:u},0);return l>20?120:l*6},[i]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:b.jsx(Ya,{children:b.jsx(gn,{gap:3,children:b.jsx(Xe,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?b.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:l,offset:u})=>b.jsxs("g",{transform:`translate(${n}, ${u})`,children:[b.jsx("line",{x2:"-6",stroke:"currentColor"}),s?b.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,b.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:b.jsx("foreignObject",{width:a,height:20,children:b.jsx(gn,{style:{width:"100%",height:"100%"},justify:"right",children:b.jsx(Xe,{lineClamp:1,style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:l})})})},l)]},l))]})}const $2t=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:o4},Symbol.toStringTag,{value:"Module"})),vl={top:15,left:160,right:50,bottom:130};function xH({barsTable:e,fullTable:t,parameters:n,data:r,setSelection:i}){const[s,{height:o,width:a}]=Vd(),l=A.useMemo(()=>a-vl.left-vl.right,[a]),u=A.useMemo(()=>o-vl.top-vl.bottom,[o]),c=A.useMemo(()=>t==null?void 0:t.groupby(n.category).count(),[]),d=A.useMemo(()=>{const g=Array.from(new Set(r.map(y=>y[n.category])));return IS(iRe).domain(g)},[r,n.category]),f=A.useMemo(()=>c?Ba([vl.left,l+vl.left]).domain([0,Pc(c.objects().map(g=>g.count))]).nice():null,[c,l]),h=A.useMemo(()=>c?Y6([vl.top,u+vl.top]).domain(c.array(n.category).sort()).paddingInner(.1):null,[c,u,n.category]),p=A.useMemo(()=>!f||!h||!d||!e?null:e.objects().map((g,y)=>g[n.category]===null||g.count===null?null:b.jsxs("g",{style:{cursor:"pointer"},children:[b.jsx("rect",{onClick:v=>i(r.filter(_=>_[n.category]===g[n.category]).map(_=>_[n.ids]),v),x:vl.left,y:h(g[n.category]),fill:d(g[n.category]),height:h.bandwidth(),width:f(g.count)-vl.left},y),b.jsx("text",{x:f(g.count)+5,y:h(g[n.category])+h.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:g.count})]},y)),[e,d,r,n.category,n.ids,i,f,h]),m=A.useMemo(()=>!f||!h||!d||!c?null:c.objects().map((g,y)=>g[n.category]===null||g.count===null?null:b.jsx("g",{style:{cursor:"pointer"},children:b.jsx("rect",{opacity:.7,onClick:v=>i(r.filter(_=>_[n.category]===g[n.category]).map(_=>_[n.ids]),v),x:vl.left,y:h(g[n.category]),fill:"lightgray",height:h.bandwidth(),width:f(g.count)-vl.left},y)},y)),[d,r,c,n.category,n.ids,i,f,h]);return h&&f?b.jsxs("svg",{ref:s,style:{height:"500px",width:"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[b.jsx(yR,{xScale:f,yRange:h.range(),vertPosition:u+vl.top,showLines:!1,label:"Count",ticks:f.ticks(5).map(g=>({value:g.toString(),offset:f(g)}))}),h?b.jsx(o4,{yScale:h,horizontalPosition:vl.left,xRange:f.range(),label:n.category,ticks:d.domain().map(g=>({value:g,offset:h(g)+h.bandwidth()/2}))}):null,m,p]}):b.jsx(is,{})}const L2t=Object.freeze(Object.defineProperty({__proto__:null,Bar:xH,default:xH},Symbol.toStringTag,{value:"Module"})),ur=Array.isArray;function Kl(e){return e!=null?ur(e)?e:[e]:[]}function F2t(e=0,t=1/0){return`${Khe(e)} < row_number() && row_number() <= ${Khe(t)}`}function Khe(e){return e<0?`count() + ${e}`:e}class wRe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(F2t(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Kl(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Cn(e){throw Error(e)}function Za(e){return typeof e=="number"}function mi(e){return typeof e=="function"}function a4(e,t){const n=Array(e);if(mi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let j2t=class extends wRe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){Cn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){Cn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){Cn("Not implemented")}getter(t){Cn("Not implemented")}objects(t){Cn("Not implemented")}object(t){Cn("Not implemented")}[Symbol.iterator](){Cn("Not implemented")}print(t={}){Za(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,l=this._data;r.sort((u,c)=>a(u,c,l))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=a4(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let l=0,u;l<a;++l)u=s[l],i[n[u]].push(u);else if(o)for(let l=o.next(0);l>=0;l=o.next(l+1))i[n[l]].push(l);else for(let l=0;l<a;++l)i[n[l]].push(l);if(t&&!s&&this.isOrdered()){const l=this._order,u=this._data;for(let c=0;c<r;++c)i[c].sort((d,f)=>l(d,f,u))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let l=i||0;if(l>o)return;const u=Math.min(o,l+r),c=()=>l=this._total;if(n&&this.isOrdered()||s&&this._index){const d=this.indices(),f=this._data;for(;l<u;++l)t(d[l],f,c)}else if(s){let d=u-l+1;for(l=s.nth(l);--d&&l>-1;l=s.next(l+1))t(l,a,c)}else for(;l<u;++l)t(l,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},B2t=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},z2t=function(e){return e&&mi(e.get)?e:new B2t(e)};function Um(e){return e instanceof Date}function va(e){return e===Object(e)}function s3(e){return e instanceof RegExp}function Mo(e){return typeof e=="string"}function U2t(e,t){const n=r=>Cn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Xhe(e.entries(),t):Um(e)?n("Date"):s3(e)?n("RegExp"):Mo(e)?n():ur(e)?V2t(e,t):mi(e[Symbol.iterator])?H2t(e,t):va(e)?Xhe(Object.entries(e),t):n()}function Xhe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function V2t(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const l=e[a];for(let u=0;u<o;++u)s[u][a]=l[t[u]]}}else t&&t.forEach(i);return r}function H2t(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:q2t}=Object.prototype;function of(e,t){return q2t.call(e,t)}function Ju(e){return e?new Qhe({...e.data()},e.columnNames()):new Qhe}class Qhe{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return of(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const rr=void 0,W2t=Object.getPrototypeOf(Int8Array);function vR(e){return e instanceof W2t}function R1(e){return ur(e)||vR(e)}function Ld(e){return e!=null&&e===e}const XT=e=>R1(e)||Mo(e),G2t={compact:e=>R1(e)?e.filter(t=>Ld(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>XT(e)?e.includes(t,n):!1,indexof:(e,t)=>XT(e)?e.indexOf(t):-1,join:(e,t)=>R1(e)?e.join(t):rr,lastindexof:(e,t)=>XT(e)?e.lastIndexOf(t):-1,length:e=>XT(e)?e.length:0,pluck:(e,t)=>R1(e)?e.map(n=>Ld(n)?n[t]:rr):rr,reverse:e=>R1(e)?e.slice().reverse():Mo(e)?e.split("").reverse().join(""):rr,slice:(e,t,n)=>XT(e)?e.slice(t,n):rr};function Y2t(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function TD(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Bf=e=>(e<10?"0":"")+e,K2t=e=>e<0?"-"+TD(-e,6):e>9999?"+"+TD(e,6):TD(e,4);function xRe(e,t,n,r,i,s,o,a,l){const u=a?"Z":"";return K2t(e)+"-"+Bf(t+1)+"-"+Bf(n)+(!l||o?"T"+Bf(r)+":"+Bf(i)+":"+Bf(s)+"."+TD(o,3)+u:s?"T"+Bf(r)+":"+Bf(i)+":"+Bf(s)+u:i||r||!a?"T"+Bf(r)+":"+Bf(i)+u:"")}function ERe(e,t){return isNaN(e)?"Invalid Date":xRe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function l4(e,t){return isNaN(e)?"Invalid Date":xRe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const X2t=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function Q2t(e){return e.match(X2t)&&!isNaN(Date.parse(e))}function J2t(e,t=Date.parse){return Q2t(e)?t(e):e}const SRe=6e4,TRe=864e5,CRe=6048e5,Bi=new Date,zi=new Date,Zi=e=>(Bi.setTime(typeof e=="string"?J2t(e):e),Bi);function Z2t(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function eAt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function tAt(e){zi.setTime(+e),zi.setHours(0,0,0,0),Bi.setTime(+zi),Bi.setMonth(0),Bi.setDate(1);const t=(zi.getTimezoneOffset()-Bi.getTimezoneOffset())*SRe;return Math.floor(1+(zi-Bi-t)/TRe)}function nAt(e){zi.setTime(+e),zi.setUTCHours(0,0,0,0);const t=Date.UTC(zi.getUTCFullYear(),0,1);return Math.floor(1+(zi-t)/TRe)}function rAt(e,t){const n=t||0;zi.setTime(+e),zi.setDate(zi.getDate()-(zi.getDay()+7-n)%7),zi.setHours(0,0,0,0),Bi.setTime(+e),Bi.setMonth(0),Bi.setDate(1),Bi.setDate(1-(Bi.getDay()+7-n)%7),Bi.setHours(0,0,0,0);const r=(zi.getTimezoneOffset()-Bi.getTimezoneOffset())*SRe;return Math.floor((1+(zi-Bi)-r)/CRe)}function iAt(e,t){const n=t||0;return zi.setTime(+e),zi.setUTCDate(zi.getUTCDate()-(zi.getUTCDay()+7-n)%7),zi.setUTCHours(0,0,0,0),Bi.setTime(+e),Bi.setUTCMonth(0),Bi.setUTCDate(1),Bi.setUTCDate(1-(Bi.getUTCDay()+7-n)%7),Bi.setUTCHours(0,0,0,0),Math.floor((1+(zi-Bi))/CRe)}const sAt={format_date:(e,t)=>ERe(Zi(e),!t),format_utcdate:(e,t)=>l4(Zi(e),!t),timestamp:e=>+Zi(e),year:e=>Zi(e).getFullYear(),quarter:e=>Math.floor(Zi(e).getMonth()/3),month:e=>Zi(e).getMonth(),date:e=>Zi(e).getDate(),dayofweek:e=>Zi(e).getDay(),hours:e=>Zi(e).getHours(),minutes:e=>Zi(e).getMinutes(),seconds:e=>Zi(e).getSeconds(),milliseconds:e=>Zi(e).getMilliseconds(),utcyear:e=>Zi(e).getUTCFullYear(),utcquarter:e=>Math.floor(Zi(e).getUTCMonth()/3),utcmonth:e=>Zi(e).getUTCMonth(),utcdate:e=>Zi(e).getUTCDate(),utcdayofweek:e=>Zi(e).getUTCDay(),utchours:e=>Zi(e).getUTCHours(),utcminutes:e=>Zi(e).getUTCMinutes(),utcseconds:e=>Zi(e).getUTCSeconds(),utcmilliseconds:e=>Zi(e).getUTCMilliseconds(),datetime:Z2t,dayofyear:tAt,week:rAt,utcdatetime:eAt,utcdayofyear:nAt,utcweek:iAt,now:Date.now};function nZ(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Um(e)||Um(t)?+e==+t:s3(e)&&s3(t)?e+""==t+"":va(e)&&va(t)?oAt(e,t):!1}function oAt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Jhe(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Jhe(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!nZ(e[o],t[o]))return!1}return!0}function Jhe(e,t,n=nZ){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const aAt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let lAt=Math.random;function PS(){return lAt()}const uAt={random:PS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function rZ(e){return e instanceof Map}function cAt(e){return e instanceof Set}function CD(e){return rZ(e)||cAt(e)}function o9(e){return Array.from(e)}const dAt={has:(e,t)=>CD(e)?e.has(t):e!=null?of(e,t):!1,keys:e=>rZ(e)?o9(e.keys()):e!=null?Object.keys(e):[],values:e=>CD(e)?o9(e.values()):e!=null?Object.values(e):[],entries:e=>CD(e)?o9(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):rr};function fAt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(of(t,e))return t[e];return n!==void 0?n:e}function hAt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const pAt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Uw={bin:Y2t,equal:nZ,recode:fAt,sequence:hAt,...G2t,...sAt,...aAt,...uAt,...dAt,...pAt};function CI(e){return typeof e=="bigint"}function Hh(e){return e===void 0?e+"":CI(e)?e+"n":JSON.stringify(e)}function wn(e,t=[],n=[]){return new mAt(e,Kl(t),Kl(n))}let mAt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Hh(n)}]`),...this.params.map(Hh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const ARe=e=>wn("any",e),IRe=()=>wn("count"),kRe=e=>wn("array_agg",e),RRe=e=>wn("array_agg_distinct",e),PRe=(e,t)=>wn("map_agg",[e,t]),NRe=(e,t)=>wn("object_agg",[e,t]),ORe=(e,t)=>wn("entries_agg",[e,t]),cA={...Uw,row_object:(...e)=>wn("row_object",null,e.flat()),count:IRe,any:ARe,array_agg:kRe,array_agg_distinct:RRe,object_agg:NRe,map_agg:PRe,entries_agg:ORe,valid:e=>wn("valid",e),invalid:e=>wn("invalid",e),distinct:e=>wn("distinct",e),mode:e=>wn("mode",e),sum:e=>wn("sum",e),product:e=>wn("product",e),mean:e=>wn("mean",e),average:e=>wn("average",e),variance:e=>wn("variance",e),variancep:e=>wn("variancep",e),stdev:e=>wn("stdev",e),stdevp:e=>wn("stdevp",e),min:e=>wn("min",e),max:e=>wn("max",e),quantile:(e,t)=>wn("quantile",e,t),median:e=>wn("median",e),covariance:(e,t)=>wn("covariance",[e,t]),covariancep:(e,t)=>wn("covariancep",[e,t]),corr:(e,t)=>wn("corr",[e,t]),bins:(e,t,n,r)=>wn("bins",e,[t,n,r]),row_number:()=>wn("row_number"),rank:()=>wn("rank"),avg_rank:()=>wn("avg_rank"),dense_rank:()=>wn("dense_rank"),percent_rank:()=>wn("percent_rank"),cume_dist:()=>wn("cume_dist"),ntile:e=>wn("ntile",null,e),lag:(e,t,n)=>wn("lag",e,[t,n]),lead:(e,t,n)=>wn("lead",e,[t,n]),first_value:e=>wn("first_value",e),last_value:e=>wn("last_value",e),nth_value:(e,t)=>wn("nth_value",e,t),fill_down:(e,t)=>wn("fill_down",e,t),fill_up:(e,t)=>wn("fill_up",e,t)};function gAt(e,t){e=CD(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function yAt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,d)=>c+d,0);if(o===i)return e;const a=Array(o);let l=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=l++]=r[c]);const u=new Uint32Array(n.length);return t.scan(c=>u[c]=s[n[c]]),{...e,keys:u,rows:a,size:l}}function vAt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,l=o,u=null;if(n){u=new Int32Array(o),t(p=>u[i[p]]=1);const h=u.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),l=0;for(let p=0;p<o;++p)u[p]&&(a[u[p]=l++]=s[p])}}let c=-1;const d=new Uint32Array(r);return t(l!==o?h=>d[++c]=u[i[h]]:h=>d[++c]=i[h]),{...e,keys:d,rows:a,size:l}}function bAt(e,t,n,r){const i=r==="map"||r===!0?PRe:r==="entries"?ORe:r==="object"?NRe:Cn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=gAt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:kRe(o)});for(let l=s.length;--l>=0;)a=a.groupby(s.slice(0,l)).rollup({[o]:i(s[l],o)});return a.get(o)}const _At="ArrayPattern",wAt="ArrowFunctionExpression",xAt="FunctionExpression",z0="Identifier",NS="Literal",DRe="MemberExpression",EAt="ObjectExpression",MRe="ObjectPattern",$Re="Property",bR="Column",SAt="Constant",TAt="Dictionary",CAt="Function",AAt="Parameter",LRe="Op",Jr=(e,t)=>{const n=IAt[e.type];return n?n(e,t):Cn(`Unsupported expression construct: ${e.type}`)},a9=(e,t)=>"("+Jr(e.left,t)+" "+e.operator+" "+Jr(e.right,t)+")",l9=(e,t)=>"("+Kf(e.params,t)+")=>"+Jr(e.body,t),Zhe=(e,t)=>Jr(e.callee,t)+"("+Kf(e.arguments,t)+")",Kf=(e,t,n=",")=>e.map(r=>Jr(r,t)).join(n),FRe=e=>e.computed?`[${Hh(e.name)}]`:`.${e.name}`,epe=(e,t,n)=>{const r=e.table||"";return`data${r}${FRe(e)}.${n}(${t.index}${r})`},IAt={Constant:e=>e.raw,Column:(e,t)=>epe(e,t,"get"),Dictionary:(e,t)=>epe(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${FRe(e)}`,Op:(e,t)=>`op(${Hh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Jr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Jr(e.object,t),i=Jr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Zhe,NewExpression:(e,t)=>"new "+Zhe(e,t),ArrayExpression:(e,t)=>"["+Kf(e.elements,t)+"]",AssignmentExpression:a9,BinaryExpression:a9,LogicalExpression:a9,UnaryExpression:(e,t)=>"("+e.operator+Jr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Jr(e.test,t)+"?"+Jr(e.consequent,t)+":"+Jr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Kf(e.properties,t)+"})",Property:(e,t)=>{const n=Jr(e.key,t);return(e.computed?`[${n}]`:n)+":"+Jr(e.value,t)},ArrowFunctionExpression:l9,FunctionExpression:l9,FunctionDeclaration:l9,ArrayPattern:(e,t)=>"["+Kf(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Kf(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Kf(e.declarations,t,","),VariableDeclarator:(e,t)=>Jr(e.id,t)+"="+Jr(e.init,t),SpreadElement:(e,t)=>"..."+Jr(e.argument,t),BlockStatement:(e,t)=>"{"+Kf(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Jr(e.expression,t),IfStatement:(e,t)=>"if ("+Jr(e.test,t)+")"+Jr(e.consequent,t)+(e.alternate?" else "+Jr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Jr(e.discriminant,t)+") {"+Kf(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Jr(e.test,t):"default")+": "+Kf(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Jr(e.argument,t),Program:(e,t)=>Jr(e.body[0],t)};function o3(e,t={index:"row"}){return Jr(e,t)}function kAt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const l=Math.ceil(Math.log(n)/a),u=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(u)/a)-l));Math.ceil(u/s)>n;)s*=10;const d=c.length;for(let f=0;f<d;++f){const h=s/c[f];h>=i&&u/h<=n&&(s=h)}}if(r){let l=Math.log(s);const u=l>=0?0:~~(-l/a)+1,c=Math.pow(10,-u-1);l=Math.floor(e/s+c)*s,e=e<l?l-s:l,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function cE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Um(e)?+e:ur(e)||vR(e)?`[${e.map(cE)}]`:s3(e)?e+"":RAt(e)}function RAt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${cE(e[r])}`;return t+="}",t}function a3(e,t){const n=e.length;return n===1?(r,i)=>cE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=cE(a)}return s}}function PAt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=cE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=cE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Gp(){}function NAt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function _s(e){return e.init=e.init||Gp,e.add=e.add||Gp,e.rem=e.rem||Gp,e}function tpe(e,t){return e.product_v=!1,e.product=t}const jRe={count:{create:()=>_s({value:e=>e.count}),param:[]},array_agg:{create:()=>_s({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>_s({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>_s({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>_s({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>_s({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:rr}),param:[1]},valid:{create:()=>_s({value:e=>e.valid}),param:[1]},invalid:{create:()=>_s({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=PAt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>_s({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>_s({value:e=>{let t=rr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:rr,add:(e,t)=>CI(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>tpe(e,1),value:e=>e.valid?e.product_v?tpe(e,NAt(e.list.values())):e.product:void 0,add:(e,t)=>CI(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:rr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>_s({value:e=>e.valid?e.mean:rr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):rr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>_s({value:e=>e.valid>1?e.dev/e.valid:rr}),param:[1],req:["variance"]},stdev:{create:()=>_s({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):rr}),param:[1],req:["variance"]},stdevp:{create:()=>_s({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):rr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=rr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===rr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=rr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===rr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>_s({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>_s({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):rr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>_s({value:e=>e.valid>1?e.cov/e.valid:rr}),param:[2],req:["covariance"]},corr:{create:()=>_s({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):rr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>_s({value:i=>kAt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},npe={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},rpe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},BRe={row_number:{create(){return{init:Gp,value:e=>e.index+1}},param:[]},rank:npe,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=npe.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:rpe,ntile:{create(e){e=+e,e>0||Cn("ntile num must be greater than zero.");const{init:t,value:n}=rpe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=rr){return e=+e||1,{init:Gp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=rr){return e=+e||1,{init:Gp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Gp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Gp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Cn("nth_value nth must be greater than zero."),{init:Gp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):rr}}},param:[1,1]},fill_down:{create(e=rr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Ld(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=rr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=OAt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function OAt(e,t,n){for(const r=e.size;n<r;++n)if(Ld(e.value(n,t)))return n;return-1}function iZ(e){return of(jRe,e)}function sZ(e){return of(BRe,e)}function zRe(e){return of(Uw,e)||e==="row_object"}function URe(e){return iZ(e)&&jRe[e]}function VRe(e){return sZ(e)&&BRe[e]}function QT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const oZ={escape:(e,t,n)=>QT(e,t,n),expr:(e,t)=>QT(`(row,data,op)=>${e}`,Uw,t),expr2:(e,t)=>QT(`(row0,data0,row,data)=>${e}`,Uw,t),join:(e,t)=>QT(`(row1,data1,row2,data2)=>${e}`,Uw,t),param:(e,t)=>QT(e,Uw,t)},DAt={"==":1,"!=":1,"===":1,"!==":1};function HRe(e,t,n=0,r,i){if(e.type=bR,e.name=t,e.table=n,i&&r&&mi(r.keyFor)){const s=DAt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===NS&&MAt(i,e,s,r.keyFor(s.value))}return e}function MAt(e,t,n,r){return r<0?(e.type=NS,e.value=!1,e.raw="false"):(t.type=TAt,n.value=r,n.raw=r+""),!0}function u4(e){return ur(e)?e:rZ(e)?e.entries():e?Object.entries(e):[]}const qRe="row_object";function WRe(e,t){e.type=EAt;const n=e.properties=[];for(const r of u4(t)){const[i,s]=ur(r)?r:[r,r];n.push({type:$Re,key:{type:NS,raw:Hh(s)},value:HRe({computed:!0},i)})}return e}function GRe(e){return o3(WRe({},e))}function YRe(e){return oZ.expr(GRe(e))}const $At=new TextDecoder("utf-8"),EH=e=>$At.decode(e),LAt=new TextEncoder,c4=e=>LAt.encode(e),FAt=e=>typeof e=="boolean",Sl=e=>typeof e=="function",ev=e=>e!=null&&Object(e)===e,d4=e=>ev(e)&&Sl(e.then),aZ=e=>ev(e)&&Sl(e[Symbol.iterator]),f4=e=>ev(e)&&Sl(e[Symbol.asyncIterator]),jAt=e=>ev(e)&&"done"in e&&"value"in e,KRe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,BAt=e=>ev(e)&&Sl(e.abort)&&Sl(e.getWriter)&&!KRe(e),zAt=e=>ev(e)&&Sl(e.end)&&Sl(e.write)&&FAt(e.writable)&&!KRe(e),UAt=e=>ev(e)&&Sl(e.clear)&&Sl(e.bytes)&&Sl(e.position)&&Sl(e.setPosition)&&Sl(e.capacity)&&Sl(e.getBufferIdentifier)&&Sl(e.createLong),lZ=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function VAt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,l=0,u=0,c=e.length;++l<c;){if(o=t[u],a=e[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++u]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++u]=a);continue}t[u]=new Uint8Array(o.buffer,n,r-n+s)}return t}function SH(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function qh(e,t){const n=VAt(e),r=n.reduce((c,d)=>c+d.byteLength,0);let i,s,o,a=0,l=-1;const u=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++l<c;){if(i=n[l],s=i.subarray(0,Math.min(i.length,u-a)),u<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?SH(o,s,a):o=s;break}SH(o||(o=new Uint8Array(u)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function xs(e,t){let n=jAt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=c4(n)),n instanceof ArrayBuffer?new e(n):n instanceof lZ?new e(n):UAt(n)?xs(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const JT=e=>xs(Int32Array,e),ipe=e=>xs(BigInt64Array,e),Jn=e=>xs(Uint8Array,e),TH=e=>(e.next(),e);function*HAt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof lZ?n(t):aZ(t)?t:n(t);return yield*TH(function*(i){let s=null;do s=i.next(yield xs(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const qAt=e=>HAt(Uint8Array,e);function XRe(e,t){return E1(this,arguments,function*(){if(d4(t))return yield Yn(yield Yn(yield*M8(F2(XRe(e,yield Yn(t))))));const r=function(o){return E1(this,arguments,function*(){yield yield Yn(yield Yn(o))})},i=function(o){return E1(this,arguments,function*(){yield Yn(yield*M8(F2(TH(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof lZ?r(t):aZ(t)?i(t):f4(t)?t:r(t);return yield Yn(yield*M8(F2(TH(function(o){return E1(this,arguments,function*(){let a=null;do a=yield Yn(o.next(yield yield Yn(xs(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Yn(new e)})}const WAt=e=>XRe(Uint8Array,e);function QRe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function GAt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const spe={fromIterable(e){return VN(YAt(e))},fromAsyncIterable(e){return VN(KAt(e))},fromDOMStream(e){return VN(XAt(e))},fromNodeStream(e){return VN(JAt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},VN=e=>(e.next(),e);function*YAt(e){let t,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?qh(r,o)[0]:([i,r,a]=qh(r,o),i)}({cmd:s,size:o}=(yield null)||{cmd:"read",size:0});const u=qAt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?u.next():u.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!t)}catch(c){(n=!0)&&typeof u.throw=="function"&&u.throw(c)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function KAt(e){return E1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function u(){return o==="peek"?qh(i,a)[0]:([s,i,l]=qh(i,a),s)}({cmd:o,size:a}=(yield yield Yn(null))||{cmd:"read",size:0});const c=WAt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield Yn(c.next()):yield Yn(c.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield Yn(u()));while(a<l);while(!n)}catch(d){(r=!0)&&typeof c.throw=="function"&&(yield Yn(c.throw(d)))}finally{r===!1&&typeof c.return=="function"&&(yield Yn(c.return(new Uint8Array(0))))}return yield Yn(null)})}function XAt(e){return E1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function u(){return o==="peek"?qh(i,a)[0]:([s,i,l]=qh(i,a),s)}({cmd:o,size:a}=(yield yield Yn(null))||{cmd:"read",size:0});const c=new QAt(e);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield Yn(c.read()):yield Yn(c.read(a-l)),!n&&s.byteLength>0&&(i.push(Jn(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield Yn(u()));while(a<l);while(!n)}catch(d){(r=!0)&&(yield Yn(c.cancel(d)))}finally{r===!1?yield Yn(c.cancel()):e.locked&&c.releaseLock()}return yield Yn(null)})}class QAt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Kp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Kp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Jn(n)),n})}}const u9=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function JAt(e){return E1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,u=[],c;function d(){return o==="peek"?qh(u,a)[0]:([c,u,l]=qh(u,a),c)}if({cmd:o,size:a}=(yield yield Yn(null))||{cmd:"read",size:0},e.isTTY)return yield yield Yn(new Uint8Array(0)),yield Yn(null);try{n[0]=u9(e,"end"),n[1]=u9(e,"error");do{if(n[2]=u9(e,"readable"),[r,s]=yield Yn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(c=Jn(e.read(a-l)),c.byteLength<a-l&&(c=Jn(e.read()))):c=Jn(e.read()),c.byteLength>0&&(u.push(c),l+=c.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield Yn(d()));while(a<l)}while(!i)}finally{yield Yn(f(n,r==="error"?s:null))}return yield Yn(null);function f(h,p){return c=u=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var As;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(As||(As={}));var el;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(el||(el={}));var Ds;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Ds||(Ds={}));var Bc;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Bc||(Bc={}));var Bt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Bt||(Bt={}));var zc;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(zc||(zc={}));const c9=2,ch=4,Jp=4,Sr=4,Kg=new Int32Array(2),ope=new Float32Array(Kg.buffer),ape=new Float64Array(Kg.buffer),HN=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var CH;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(CH||(CH={}));let l3=class JRe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new JRe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Kg[0]=this.readInt32(t),ope[0]}readFloat64(t){return Kg[HN?0:1]=this.readInt32(t),Kg[HN?1:0]=this.readInt32(t+4),ape[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){ope[0]=n,this.writeInt32(t,Kg[0])}writeFloat64(t,n){ape[0]=n,this.writeInt32(t,Kg[HN?0:1]),this.writeInt32(t+4,Kg[HN?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+ch+Jp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Jp;n++)t+=String.fromCharCode(this.readInt8(this.position_+ch+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=ch;const i=this.bytes_.subarray(t,t+r);return n===CH.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+ch}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Jp)throw new Error("FlatBuffers: file identifier must be length "+Jp);for(let n=0;n<Jp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+ch+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},ZRe=class ePe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=l3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=ePe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=l3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(ch,0),this.writeInt32(this.offset()-t+ch)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*c9;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let u=c9;u<s;u+=c9)if(this.bb.readInt16(a+u)!=this.bb.readInt16(l+u))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Sr:0;if(n){const s=n;if(this.prep(this.minalign,ch+Jp+i),s.length!=Jp)throw new TypeError("FlatBuffers: file identifier must be length "+Jp);for(let o=Jp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,ch+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(ch,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};var u3;(function(e){e[e.BUFFER=0]="BUFFER"})(u3||(u3={}));var c3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(c3||(c3={}));class Xg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Xg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Sr),(n||new Xg).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):c3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):u3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,c3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,u3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Xg.startBodyCompression(t),Xg.addCodec(t,n),Xg.addMethod(t,r),Xg.endBodyCompression(t)}}let tPe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},nPe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Up=class AH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new AH).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Sr),(n||new AH).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new nPe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new tPe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Xg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},hw=class IH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new IH).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Sr),(n||new IH).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Up).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var dE;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(dE||(dE={}));var d3;(function(e){e[e.DenseArray=0]="DenseArray"})(d3||(d3={}));class vu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new vu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Sr),(n||new vu).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return vu.startInt(t),vu.addBitWidth(t,n),vu.addIsSigned(t,r),vu.endInt(t)}}class Zp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Zp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Sr),(n||new Zp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new vu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):d3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,d3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Ts{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Ts).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Sr),(n||new Ts).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Ts.startKeyValue(t),Ts.addKey(t,n),Ts.addValue(t,r),Ts.endKeyValue(t)}}let lpe=class KC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new KC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Sr),(n||new KC).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return KC.startBinary(t),KC.endBinary(t)}},upe=class XC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new XC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Sr),(n||new XC).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return XC.startBool(t),XC.endBool(t)}},AD=class pw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new pw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Sr),(n||new pw).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Bc.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Bc.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return pw.startDate(t),pw.addUnit(t,n),pw.endDate(t)}},mw=class zg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new zg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Sr),(n||new zg).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return zg.startDecimal(t),zg.addPrecision(t,n),zg.addScale(t,r),zg.addBitWidth(t,i),zg.endDecimal(t)}},ID=class gw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new gw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Sr),(n||new gw).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Bt.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Bt.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return gw.startDuration(t),gw.addUnit(t,n),gw.endDuration(t)}},kD=class yw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new yw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Sr),(n||new yw).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return yw.startFixedSizeBinary(t),yw.addByteWidth(t,n),yw.endFixedSizeBinary(t)}},RD=class vw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new vw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Sr),(n||new vw).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return vw.startFixedSizeList(t),vw.addListSize(t,n),vw.endFixedSizeList(t)}};class dh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new dh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Sr),(n||new dh).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ds.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,Ds.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return dh.startFloatingPoint(t),dh.addPrecision(t,n),dh.endFloatingPoint(t)}}class fh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new fh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Sr),(n||new fh).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zc.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,zc.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return fh.startInterval(t),fh.addUnit(t,n),fh.endInterval(t)}}let cpe=class QC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeBinary(t,n){return(n||new QC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,n){return t.setPosition(t.position()+Sr),(n||new QC).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return QC.startLargeBinary(t),QC.endLargeBinary(t)}},dpe=class JC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeUtf8(t,n){return(n||new JC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,n){return t.setPosition(t.position()+Sr),(n||new JC).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return JC.startLargeUtf8(t),JC.endLargeUtf8(t)}},fpe=class ZC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new ZC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Sr),(n||new ZC).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return ZC.startList(t),ZC.endList(t)}},PD=class bw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new bw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Sr),(n||new bw).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return bw.startMap(t),bw.addKeysSorted(t,n),bw.endMap(t)}},hpe=class e2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new e2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Sr),(n||new e2).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return e2.startNull(t),e2.endNull(t)}};class P1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new P1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Sr),(n||new P1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return P1.startStruct_(t),P1.endStruct_(t)}}let t2=class Xv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Xv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Sr),(n||new Xv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Bt.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Bt.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Xv.startTime(t),Xv.addUnit(t,n),Xv.addBitWidth(t,r),Xv.endTime(t)}},n2=class Qv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Qv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Sr),(n||new Qv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Bt.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Bt.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Qv.startTimestamp(t),Qv.addUnit(t,n),Qv.addTimezone(t,r),Qv.endTimestamp(t)}},Jv=class Zv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Zv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Sr),(n||new Zv).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):el.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,el.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Zv.startUnion(t),Zv.addMode(t,n),Zv.addTypeIds(t,r),Zv.endUnion(t)}},ppe=class r2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new r2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Sr),(n||new r2).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return r2.startUtf8(t),r2.endUtf8(t)}};var Qr;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Qr||(Qr={}));let oc=class ND{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new ND).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Sr),(n||new ND).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Qr.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Zp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new ND).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Ts).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Qr.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Xf=class Bp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Bp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Sr),(n||new Bp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):dE.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new oc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Ts).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,dE.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Bp.startSchema(t),Bp.addEndianness(t,n),Bp.addFields(t,r),Bp.addCustomMetadata(t,i),Bp.addFeatures(t,s),Bp.endSchema(t)}};var ms;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(ms||(ms={}));var se;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(se||(se={}));var Vp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Vp||(Vp={}));const ZAt=void 0;function pb(e){if(e===null)return"null";if(e===ZAt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>pb(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const eIt=Symbol.for("isArrowBigNum");function Tf(e,...t){return t.length===0?Object.setPrototypeOf(xs(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Tf.prototype[eIt]=!0;Tf.prototype.toJSON=function(){return`"${II(this)}"`};Tf.prototype.valueOf=function(){return rPe(this)};Tf.prototype.toString=function(){return II(this)};Tf.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return rPe(this);case"string":return II(this);case"default":return tIt(this)}return II(this)};function mx(...e){return Tf.apply(this,e)}function gx(...e){return Tf.apply(this,e)}function AI(...e){return Tf.apply(this,e)}Object.setPrototypeOf(mx.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(gx.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(AI.prototype,Object.create(Uint32Array.prototype));Object.assign(mx.prototype,Tf.prototype,{constructor:mx,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(gx.prototype,Tf.prototype,{constructor:gx,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(AI.prototype,Tf.prototype,{constructor:AI,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function rPe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),l=BigInt(0);if(o){for(const u of s)a+=~u*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const u of s)a+=u*(BigInt(1)<<BigInt(32)*l++);return a}const II=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return d9(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return d9(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${d9(t)}`},tIt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:II(e);function d9(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class uZ{static new(t,n){switch(n){case!0:return new mx(t);case!1:return new gx(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new mx(t)}return t.byteLength===16?new AI(t):new gx(t)}static signed(t){return new mx(t)}static unsigned(t){return new gx(t)}static decimal(t){return new AI(t)}constructor(t,n){return uZ.new(t,n)}}function Po(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var iPe,sPe,oPe,aPe,lPe,uPe,cPe,dPe,fPe,hPe,pPe,mPe,gPe,yPe,vPe,bPe,_Pe,wPe,xPe,EPe,SPe,TPe;class hn{static isNull(t){return(t==null?void 0:t.typeId)===se.Null}static isInt(t){return(t==null?void 0:t.typeId)===se.Int}static isFloat(t){return(t==null?void 0:t.typeId)===se.Float}static isBinary(t){return(t==null?void 0:t.typeId)===se.Binary}static isLargeBinary(t){return(t==null?void 0:t.typeId)===se.LargeBinary}static isUtf8(t){return(t==null?void 0:t.typeId)===se.Utf8}static isLargeUtf8(t){return(t==null?void 0:t.typeId)===se.LargeUtf8}static isBool(t){return(t==null?void 0:t.typeId)===se.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===se.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===se.Date}static isTime(t){return(t==null?void 0:t.typeId)===se.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===se.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===se.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===se.Duration}static isList(t){return(t==null?void 0:t.typeId)===se.List}static isStruct(t){return(t==null?void 0:t.typeId)===se.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===se.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===se.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===se.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===se.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===se.Dictionary}static isDenseUnion(t){return hn.isUnion(t)&&t.mode===el.Dense}static isSparseUnion(t){return hn.isUnion(t)&&t.mode===el.Sparse}constructor(t){this.typeId=t}}iPe=Symbol.toStringTag;hn[iPe]=(e=>(e.children=null,e.ArrayType=Array,e.OffsetArrayType=Int32Array,e[Symbol.toStringTag]="DataType"))(hn.prototype);class Vm extends hn{constructor(){super(se.Null)}toString(){return"Null"}}sPe=Symbol.toStringTag;Vm[sPe]=(e=>e[Symbol.toStringTag]="Null")(Vm.prototype);class tl extends hn{constructor(t,n){super(se.Int),this.isSigned=t,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}oPe=Symbol.toStringTag;tl[oPe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(tl.prototype);class cZ extends tl{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class dZ extends tl{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class ly extends tl{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class fZ extends tl{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class hZ extends tl{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class pZ extends tl{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class mZ extends tl{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class gZ extends tl{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(cZ.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(dZ.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(ly.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(fZ.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(hZ.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(pZ.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(mZ.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(gZ.prototype,"ArrayType",{value:BigUint64Array});class uy extends hn{constructor(t){super(se.Float),this.precision=t}get ArrayType(){switch(this.precision){case Ds.HALF:return Uint16Array;case Ds.SINGLE:return Float32Array;case Ds.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}aPe=Symbol.toStringTag;uy[aPe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(uy.prototype);class CPe extends uy{constructor(){super(Ds.HALF)}}class yZ extends uy{constructor(){super(Ds.SINGLE)}}class vZ extends uy{constructor(){super(Ds.DOUBLE)}}Object.defineProperty(CPe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(yZ.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(vZ.prototype,"ArrayType",{value:Float64Array});class kI extends hn{constructor(){super(se.Binary)}toString(){return"Binary"}}lPe=Symbol.toStringTag;kI[lPe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(kI.prototype);class f3 extends hn{constructor(){super(se.LargeBinary)}toString(){return"LargeBinary"}}uPe=Symbol.toStringTag;f3[uPe]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(f3.prototype);class fE extends hn{constructor(){super(se.Utf8)}toString(){return"Utf8"}}cPe=Symbol.toStringTag;fE[cPe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(fE.prototype);class h3 extends hn{constructor(){super(se.LargeUtf8)}toString(){return"LargeUtf8"}}dPe=Symbol.toStringTag;h3[dPe]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(h3.prototype);class RI extends hn{constructor(){super(se.Bool)}toString(){return"Bool"}}fPe=Symbol.toStringTag;RI[fPe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(RI.prototype);class p3 extends hn{constructor(t,n,r=128){super(se.Decimal),this.scale=t,this.precision=n,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}hPe=Symbol.toStringTag;p3[hPe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(p3.prototype);class hE extends hn{constructor(t){super(se.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${Bc[this.unit]}>`}}pPe=Symbol.toStringTag;hE[pPe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(hE.prototype);class nIt extends hE{constructor(){super(Bc.DAY)}}class rIt extends hE{constructor(){super(Bc.MILLISECOND)}}class Hm extends hn{constructor(t,n){super(se.Time),this.unit=t,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${Bt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}mPe=Symbol.toStringTag;Hm[mPe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Hm.prototype);class iIt extends Hm{constructor(){super(Bt.SECOND,32)}}class sIt extends Hm{constructor(){super(Bt.MILLISECOND,32)}}class oIt extends Hm{constructor(){super(Bt.MICROSECOND,64)}}class aIt extends Hm{constructor(){super(Bt.NANOSECOND,64)}}class m3 extends hn{constructor(t,n){super(se.Timestamp),this.unit=t,this.timezone=n}toString(){return`Timestamp<${Bt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}gPe=Symbol.toStringTag;m3[gPe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(m3.prototype);class pE extends hn{constructor(t){super(se.Interval),this.unit=t}toString(){return`Interval<${zc[this.unit]}>`}}yPe=Symbol.toStringTag;pE[yPe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(pE.prototype);class lIt extends pE{constructor(){super(zc.DAY_TIME)}}class uIt extends pE{constructor(){super(zc.YEAR_MONTH)}}class g3 extends hn{constructor(t){super(se.Duration),this.unit=t}toString(){return`Duration<${Bt[this.unit]}>`}}vPe=Symbol.toStringTag;g3[vPe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(g3.prototype);class mE extends hn{constructor(t){super(se.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}bPe=Symbol.toStringTag;mE[bPe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(mE.prototype);class ua extends hn{constructor(t){super(se.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}_Pe=Symbol.toStringTag;ua[_Pe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(ua.prototype);class PI extends hn{constructor(t,n,r){super(se.Union),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}wPe=Symbol.toStringTag;PI[wPe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(PI.prototype);class y3 extends hn{constructor(t){super(se.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}xPe=Symbol.toStringTag;y3[xPe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(y3.prototype);class gE extends hn{constructor(t,n){super(se.FixedSizeList),this.listSize=t,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}EPe=Symbol.toStringTag;gE[EPe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(gE.prototype);class NI extends hn{constructor(t,n=!1){var r,i,s;if(super(se.Map),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}SPe=Symbol.toStringTag;NI[SPe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(NI.prototype);const cIt=(e=>()=>++e)(-1);class cy extends hn{constructor(t,n,r,i){super(se.Dictionary),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?cIt():Po(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}TPe=Symbol.toStringTag;cy[TPe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(cy.prototype);function Jf(e){const t=e;switch(e.typeId){case se.Decimal:return e.bitWidth/32;case se.Timestamp:return 2;case se.Date:return 1+t.unit;case se.Interval:return 1+t.unit;case se.FixedSizeList:return t.listSize;case se.FixedSizeBinary:return t.byteWidth;default:return 1}}class Pn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return dIt(this,t,n)}getVisitFnByTypeId(t,n=!0){return _w(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitLargeUtf8(t,...n){return null}visitBinary(t,...n){return null}visitLargeBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function dIt(e,t,n=!0){return typeof t=="number"?_w(e,t,n):typeof t=="string"&&t in se?_w(e,se[t],n):t&&t instanceof hn?_w(e,mpe(t),n):t!=null&&t.type&&t.type instanceof hn?_w(e,mpe(t.type),n):_w(e,se.NONE,n)}function _w(e,t,n=!0){let r=null;switch(t){case se.Null:r=e.visitNull;break;case se.Bool:r=e.visitBool;break;case se.Int:r=e.visitInt;break;case se.Int8:r=e.visitInt8||e.visitInt;break;case se.Int16:r=e.visitInt16||e.visitInt;break;case se.Int32:r=e.visitInt32||e.visitInt;break;case se.Int64:r=e.visitInt64||e.visitInt;break;case se.Uint8:r=e.visitUint8||e.visitInt;break;case se.Uint16:r=e.visitUint16||e.visitInt;break;case se.Uint32:r=e.visitUint32||e.visitInt;break;case se.Uint64:r=e.visitUint64||e.visitInt;break;case se.Float:r=e.visitFloat;break;case se.Float16:r=e.visitFloat16||e.visitFloat;break;case se.Float32:r=e.visitFloat32||e.visitFloat;break;case se.Float64:r=e.visitFloat64||e.visitFloat;break;case se.Utf8:r=e.visitUtf8;break;case se.LargeUtf8:r=e.visitLargeUtf8;break;case se.Binary:r=e.visitBinary;break;case se.LargeBinary:r=e.visitLargeBinary;break;case se.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case se.Date:r=e.visitDate;break;case se.DateDay:r=e.visitDateDay||e.visitDate;break;case se.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case se.Timestamp:r=e.visitTimestamp;break;case se.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case se.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case se.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case se.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case se.Time:r=e.visitTime;break;case se.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case se.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case se.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case se.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case se.Decimal:r=e.visitDecimal;break;case se.List:r=e.visitList;break;case se.Struct:r=e.visitStruct;break;case se.Union:r=e.visitUnion;break;case se.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case se.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case se.Dictionary:r=e.visitDictionary;break;case se.Interval:r=e.visitInterval;break;case se.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case se.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case se.Duration:r=e.visitDuration;break;case se.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case se.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case se.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case se.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case se.FixedSizeList:r=e.visitFixedSizeList;break;case se.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${se[t]}'`)}function mpe(e){switch(e.typeId){case se.Null:return se.Null;case se.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?se.Int8:se.Uint8;case 16:return n?se.Int16:se.Uint16;case 32:return n?se.Int32:se.Uint32;case 64:return n?se.Int64:se.Uint64}return se.Int}case se.Float:switch(e.precision){case Ds.HALF:return se.Float16;case Ds.SINGLE:return se.Float32;case Ds.DOUBLE:return se.Float64}return se.Float;case se.Binary:return se.Binary;case se.LargeBinary:return se.LargeBinary;case se.Utf8:return se.Utf8;case se.LargeUtf8:return se.LargeUtf8;case se.Bool:return se.Bool;case se.Decimal:return se.Decimal;case se.Time:switch(e.unit){case Bt.SECOND:return se.TimeSecond;case Bt.MILLISECOND:return se.TimeMillisecond;case Bt.MICROSECOND:return se.TimeMicrosecond;case Bt.NANOSECOND:return se.TimeNanosecond}return se.Time;case se.Timestamp:switch(e.unit){case Bt.SECOND:return se.TimestampSecond;case Bt.MILLISECOND:return se.TimestampMillisecond;case Bt.MICROSECOND:return se.TimestampMicrosecond;case Bt.NANOSECOND:return se.TimestampNanosecond}return se.Timestamp;case se.Date:switch(e.unit){case Bc.DAY:return se.DateDay;case Bc.MILLISECOND:return se.DateMillisecond}return se.Date;case se.Interval:switch(e.unit){case zc.DAY_TIME:return se.IntervalDayTime;case zc.YEAR_MONTH:return se.IntervalYearMonth}return se.Interval;case se.Duration:switch(e.unit){case Bt.SECOND:return se.DurationSecond;case Bt.MILLISECOND:return se.DurationMillisecond;case Bt.MICROSECOND:return se.DurationMicrosecond;case Bt.NANOSECOND:return se.DurationNanosecond}return se.Duration;case se.Map:return se.Map;case se.List:return se.List;case se.Struct:return se.Struct;case se.Union:switch(e.mode){case el.Dense:return se.DenseUnion;case el.Sparse:return se.SparseUnion}return se.Union;case se.FixedSizeBinary:return se.FixedSizeBinary;case se.FixedSizeList:return se.FixedSizeList;case se.Dictionary:return se.Dictionary}throw new Error(`Unrecognized type '${se[e.typeId]}'`)}Pn.prototype.visitInt8=null;Pn.prototype.visitInt16=null;Pn.prototype.visitInt32=null;Pn.prototype.visitInt64=null;Pn.prototype.visitUint8=null;Pn.prototype.visitUint16=null;Pn.prototype.visitUint32=null;Pn.prototype.visitUint64=null;Pn.prototype.visitFloat16=null;Pn.prototype.visitFloat32=null;Pn.prototype.visitFloat64=null;Pn.prototype.visitDateDay=null;Pn.prototype.visitDateMillisecond=null;Pn.prototype.visitTimestampSecond=null;Pn.prototype.visitTimestampMillisecond=null;Pn.prototype.visitTimestampMicrosecond=null;Pn.prototype.visitTimestampNanosecond=null;Pn.prototype.visitTimeSecond=null;Pn.prototype.visitTimeMillisecond=null;Pn.prototype.visitTimeMicrosecond=null;Pn.prototype.visitTimeNanosecond=null;Pn.prototype.visitDenseUnion=null;Pn.prototype.visitSparseUnion=null;Pn.prototype.visitIntervalDayTime=null;Pn.prototype.visitIntervalYearMonth=null;Pn.prototype.visitDuration=null;Pn.prototype.visitDurationSecond=null;Pn.prototype.visitDurationMillisecond=null;Pn.prototype.visitDurationMicrosecond=null;Pn.prototype.visitDurationNanosecond=null;const APe=new Float64Array(1),G_=new Uint32Array(APe.buffer);function IPe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function kPe(e){if(e!==e)return 32256;APe[0]=e;const t=(G_[1]&2147483648)>>16&65535;let n=G_[1]&2146435072,r=0;return n>=1089470464?G_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(G_[1]&1048575)>>10):n<=1056964608?(r=1048576+(G_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(G_[1]&1048575)+512>>10),t|n|r&65535}class Jt extends Pn{}function nn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const fIt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},bZ=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},hIt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},pIt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},RPe=(e,t,n,r)=>{if(n+1<t.length){const i=Po(t[n]),s=Po(t[n+1]);e.set(r.subarray(0,s-i),i)}},mIt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},cg=({values:e},t,n)=>{e[t]=n},_Z=({values:e},t,n)=>{e[t]=n},PPe=({values:e},t,n)=>{e[t]=kPe(n)},gIt=(e,t,n)=>{switch(e.type.precision){case Ds.HALF:return PPe(e,t,n);case Ds.SINGLE:case Ds.DOUBLE:return _Z(e,t,n)}},wZ=({values:e},t,n)=>{fIt(e,t,n.valueOf())},xZ=({values:e},t,n)=>{bZ(e,t*2,n.valueOf())},NPe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},OPe=({values:e,valueOffsets:t},n,r)=>RPe(e,t,n,r),DPe=({values:e,valueOffsets:t},n,r)=>RPe(e,t,n,c4(r)),MPe=(e,t,n)=>{e.type.unit===Bc.DAY?wZ(e,t,n):xZ(e,t,n)},EZ=({values:e},t,n)=>bZ(e,t*2,n/1e3),SZ=({values:e},t,n)=>bZ(e,t*2,n),TZ=({values:e},t,n)=>hIt(e,t*2,n),CZ=({values:e},t,n)=>pIt(e,t*2,n),$Pe=(e,t,n)=>{switch(e.type.unit){case Bt.SECOND:return EZ(e,t,n);case Bt.MILLISECOND:return SZ(e,t,n);case Bt.MICROSECOND:return TZ(e,t,n);case Bt.NANOSECOND:return CZ(e,t,n)}},AZ=({values:e},t,n)=>{e[t]=n},IZ=({values:e},t,n)=>{e[t]=n},kZ=({values:e},t,n)=>{e[t]=n},RZ=({values:e},t,n)=>{e[t]=n},LPe=(e,t,n)=>{switch(e.type.unit){case Bt.SECOND:return AZ(e,t,n);case Bt.MILLISECOND:return IZ(e,t,n);case Bt.MICROSECOND:return kZ(e,t,n);case Bt.NANOSECOND:return RZ(e,t,n)}},FPe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},yIt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Uc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n.get(++o))},vIt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Uc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const u of l)if(s(r,o,u),++o>=a)break},bIt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),_It=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),wIt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),xIt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),EIt=(e,t,n)=>{const r=e.type.children.map(s=>Uc.getVisitFn(s.type)),i=n instanceof Map?wIt(t,n):n instanceof cr?_It(t,n):Array.isArray(n)?bIt(t,n):xIt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},SIt=(e,t,n)=>{e.type.mode===el.Dense?jPe(e,t,n):BPe(e,t,n)},jPe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Uc.visit(i,e.valueOffsets[t],n)},BPe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Uc.visit(i,t,n)},TIt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},zPe=(e,t,n)=>{e.type.unit===zc.DAY_TIME?PZ(e,t,n):NZ(e,t,n)},PZ=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},NZ=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},OZ=({values:e},t,n)=>{e[t]=n},DZ=({values:e},t,n)=>{e[t]=n},MZ=({values:e},t,n)=>{e[t]=n},$Z=({values:e},t,n)=>{e[t]=n},UPe=(e,t,n)=>{switch(e.type.unit){case Bt.SECOND:return OZ(e,t,n);case Bt.MILLISECOND:return DZ(e,t,n);case Bt.MICROSECOND:return MZ(e,t,n);case Bt.NANOSECOND:return $Z(e,t,n)}},CIt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Uc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Jt.prototype.visitBool=nn(mIt);Jt.prototype.visitInt=nn(cg);Jt.prototype.visitInt8=nn(cg);Jt.prototype.visitInt16=nn(cg);Jt.prototype.visitInt32=nn(cg);Jt.prototype.visitInt64=nn(cg);Jt.prototype.visitUint8=nn(cg);Jt.prototype.visitUint16=nn(cg);Jt.prototype.visitUint32=nn(cg);Jt.prototype.visitUint64=nn(cg);Jt.prototype.visitFloat=nn(gIt);Jt.prototype.visitFloat16=nn(PPe);Jt.prototype.visitFloat32=nn(_Z);Jt.prototype.visitFloat64=nn(_Z);Jt.prototype.visitUtf8=nn(DPe);Jt.prototype.visitLargeUtf8=nn(DPe);Jt.prototype.visitBinary=nn(OPe);Jt.prototype.visitLargeBinary=nn(OPe);Jt.prototype.visitFixedSizeBinary=nn(NPe);Jt.prototype.visitDate=nn(MPe);Jt.prototype.visitDateDay=nn(wZ);Jt.prototype.visitDateMillisecond=nn(xZ);Jt.prototype.visitTimestamp=nn($Pe);Jt.prototype.visitTimestampSecond=nn(EZ);Jt.prototype.visitTimestampMillisecond=nn(SZ);Jt.prototype.visitTimestampMicrosecond=nn(TZ);Jt.prototype.visitTimestampNanosecond=nn(CZ);Jt.prototype.visitTime=nn(LPe);Jt.prototype.visitTimeSecond=nn(AZ);Jt.prototype.visitTimeMillisecond=nn(IZ);Jt.prototype.visitTimeMicrosecond=nn(kZ);Jt.prototype.visitTimeNanosecond=nn(RZ);Jt.prototype.visitDecimal=nn(FPe);Jt.prototype.visitList=nn(yIt);Jt.prototype.visitStruct=nn(EIt);Jt.prototype.visitUnion=nn(SIt);Jt.prototype.visitDenseUnion=nn(jPe);Jt.prototype.visitSparseUnion=nn(BPe);Jt.prototype.visitDictionary=nn(TIt);Jt.prototype.visitInterval=nn(zPe);Jt.prototype.visitIntervalDayTime=nn(PZ);Jt.prototype.visitIntervalYearMonth=nn(NZ);Jt.prototype.visitDuration=nn(UPe);Jt.prototype.visitDurationSecond=nn(OZ);Jt.prototype.visitDurationMillisecond=nn(DZ);Jt.prototype.visitDurationMicrosecond=nn(MZ);Jt.prototype.visitDurationNanosecond=nn($Z);Jt.prototype.visitFixedSizeList=nn(CIt);Jt.prototype.visitMap=nn(vIt);const Uc=new Jt,xd=Symbol.for("parent"),yx=Symbol.for("rowIndex");class LZ{constructor(t,n){return this[xd]=t,this[yx]=n,new Proxy(this,new IIt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[yx],n=this[xd],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Xl.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${pb(t)}: ${pb(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new AIt(this[xd],this[yx])}}class AIt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Xl.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(LZ.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[xd]:{writable:!0,enumerable:!1,configurable:!1,value:null},[yx]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class IIt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[xd].type.children.map(n=>n.name)}has(t,n){return t[xd].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[xd].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[xd].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Xl.visit(t[xd].children[r],t[yx]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[xd].type.children.findIndex(s=>s.name===n);return i!==-1?(Uc.visit(t[xd].children[i],t[yx],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class qt extends Pn{}function Zt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const kIt=(e,t)=>864e5*e[t],FZ=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),RIt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,PIt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,VPe=e=>new Date(e),NIt=(e,t)=>VPe(kIt(e,t)),OIt=(e,t)=>VPe(FZ(e,t)),DIt=(e,t)=>null,HPe=(e,t,n)=>{if(n+1>=t.length)return null;const r=Po(t[n]),i=Po(t[n+1]);return e.subarray(r,i)},MIt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},qPe=({values:e},t)=>NIt(e,t),WPe=({values:e},t)=>OIt(e,t*2),tv=({stride:e,values:t},n)=>t[e*n],$It=({stride:e,values:t},n)=>IPe(t[e*n]),GPe=({values:e},t)=>e[t],LIt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),YPe=({values:e,valueOffsets:t},n)=>HPe(e,t,n),KPe=({values:e,valueOffsets:t},n)=>{const r=HPe(e,t,n);return r!==null?EH(r):null},FIt=({values:e},t)=>e[t],jIt=({type:e,values:t},n)=>e.precision!==Ds.HALF?t[n]:IPe(t[n]),BIt=(e,t)=>e.type.unit===Bc.DAY?qPe(e,t):WPe(e,t),XPe=({values:e},t)=>1e3*FZ(e,t*2),QPe=({values:e},t)=>FZ(e,t*2),JPe=({values:e},t)=>RIt(e,t*2),ZPe=({values:e},t)=>PIt(e,t*2),zIt=(e,t)=>{switch(e.type.unit){case Bt.SECOND:return XPe(e,t);case Bt.MILLISECOND:return QPe(e,t);case Bt.MICROSECOND:return JPe(e,t);case Bt.NANOSECOND:return ZPe(e,t)}},eNe=({values:e},t)=>e[t],tNe=({values:e},t)=>e[t],nNe=({values:e},t)=>e[t],rNe=({values:e},t)=>e[t],UIt=(e,t)=>{switch(e.type.unit){case Bt.SECOND:return eNe(e,t);case Bt.MILLISECOND:return tNe(e,t);case Bt.MICROSECOND:return nNe(e,t);case Bt.NANOSECOND:return rNe(e,t)}},VIt=({values:e,stride:t},n)=>uZ.decimal(e.subarray(t*n,t*(n+1))),HIt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,l=i[0].slice(s,o-s);return new cr([l])},qIt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new h4(o.slice(i,s-i))},WIt=(e,t)=>new LZ(e,t),GIt=(e,t)=>e.type.mode===el.Dense?iNe(e,t):sNe(e,t),iNe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Xl.visit(r,e.valueOffsets[t])},sNe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Xl.visit(r,t)},YIt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},KIt=(e,t)=>e.type.unit===zc.DAY_TIME?oNe(e,t):aNe(e,t),oNe=({values:e},t)=>e.subarray(2*t,2*(t+1)),aNe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},lNe=({values:e},t)=>e[t],uNe=({values:e},t)=>e[t],cNe=({values:e},t)=>e[t],dNe=({values:e},t)=>e[t],XIt=(e,t)=>{switch(e.type.unit){case Bt.SECOND:return lNe(e,t);case Bt.MILLISECOND:return uNe(e,t);case Bt.MICROSECOND:return cNe(e,t);case Bt.NANOSECOND:return dNe(e,t)}},QIt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new cr([s])};qt.prototype.visitNull=Zt(DIt);qt.prototype.visitBool=Zt(MIt);qt.prototype.visitInt=Zt(FIt);qt.prototype.visitInt8=Zt(tv);qt.prototype.visitInt16=Zt(tv);qt.prototype.visitInt32=Zt(tv);qt.prototype.visitInt64=Zt(GPe);qt.prototype.visitUint8=Zt(tv);qt.prototype.visitUint16=Zt(tv);qt.prototype.visitUint32=Zt(tv);qt.prototype.visitUint64=Zt(GPe);qt.prototype.visitFloat=Zt(jIt);qt.prototype.visitFloat16=Zt($It);qt.prototype.visitFloat32=Zt(tv);qt.prototype.visitFloat64=Zt(tv);qt.prototype.visitUtf8=Zt(KPe);qt.prototype.visitLargeUtf8=Zt(KPe);qt.prototype.visitBinary=Zt(YPe);qt.prototype.visitLargeBinary=Zt(YPe);qt.prototype.visitFixedSizeBinary=Zt(LIt);qt.prototype.visitDate=Zt(BIt);qt.prototype.visitDateDay=Zt(qPe);qt.prototype.visitDateMillisecond=Zt(WPe);qt.prototype.visitTimestamp=Zt(zIt);qt.prototype.visitTimestampSecond=Zt(XPe);qt.prototype.visitTimestampMillisecond=Zt(QPe);qt.prototype.visitTimestampMicrosecond=Zt(JPe);qt.prototype.visitTimestampNanosecond=Zt(ZPe);qt.prototype.visitTime=Zt(UIt);qt.prototype.visitTimeSecond=Zt(eNe);qt.prototype.visitTimeMillisecond=Zt(tNe);qt.prototype.visitTimeMicrosecond=Zt(nNe);qt.prototype.visitTimeNanosecond=Zt(rNe);qt.prototype.visitDecimal=Zt(VIt);qt.prototype.visitList=Zt(HIt);qt.prototype.visitStruct=Zt(WIt);qt.prototype.visitUnion=Zt(GIt);qt.prototype.visitDenseUnion=Zt(iNe);qt.prototype.visitSparseUnion=Zt(sNe);qt.prototype.visitDictionary=Zt(YIt);qt.prototype.visitInterval=Zt(KIt);qt.prototype.visitIntervalDayTime=Zt(oNe);qt.prototype.visitIntervalYearMonth=Zt(aNe);qt.prototype.visitDuration=Zt(XIt);qt.prototype.visitDurationSecond=Zt(lNe);qt.prototype.visitDurationMillisecond=Zt(uNe);qt.prototype.visitDurationMicrosecond=Zt(cNe);qt.prototype.visitDurationNanosecond=Zt(dNe);qt.prototype.visitFixedSizeList=Zt(QIt);qt.prototype.visitMap=Zt(qIt);const Xl=new qt,Pd=Symbol.for("keys"),vx=Symbol.for("vals");class h4{constructor(t){return this[Pd]=new cr([t.children[0]]).memoize(),this[vx]=t.children[1],new Proxy(this,new ZIt)}[Symbol.iterator](){return new JIt(this[Pd],this[vx])}get size(){return this[Pd].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Pd],n=this[vx],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Xl.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${pb(t)}: ${pb(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class JIt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Xl.visit(this.vals,t)]})}}class ZIt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Pd].toArray().map(String)}has(t,n){return t[Pd].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Pd].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Pd].indexOf(n);if(r!==-1){const i=Xl.visit(Reflect.get(t,vx),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Pd].indexOf(n);return i!==-1?(Uc.visit(Reflect.get(t,vx),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(h4.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Pd]:{writable:!0,enumerable:!1,configurable:!1,value:null},[vx]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let gpe;function fNe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(gpe=s,s=o,o=gpe),o>i&&(o=i),r?r(e,s,o):[s,o]}const ype=e=>e!==e;function OS(e){if(typeof e!=="object"||e===null)return ype(e)?ype:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?GAt(e,n):!1:e instanceof Map?tkt(e):Array.isArray(e)?ekt(e):e instanceof cr?nkt(e):rkt(e,!0)}function ekt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=OS(e[n]);return p4(t)}function tkt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=OS(r);return p4(n)}function nkt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=OS(e.get(n));return p4(t)}function rkt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=OS(e[n[i]]);return p4(r,n)}function p4(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return ikt(e,n);case Map:return vpe(e,n,n.keys());case h4:case LZ:case Object:case void 0:return vpe(e,n,t||Object.keys(n))}return n instanceof cr?skt(e,n):!1}}function ikt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function skt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function vpe(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let l=s.next(),u=r.next(),c=i.next();for(;o<a&&!u.done&&!c.done&&!l.done&&!(u.value!==c.value||!e[o](l.value));++o,u=r.next(),c=i.next(),l=s.next());return o===a&&u.done&&c.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function hNe(e,t,n,r){return(n&1<<r)!==0}function okt(e,t,n,r){return(n&1<<r)>>r}function v3(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):pNe(new jZ(n,e,t,null,hNe)).subarray(0,r)),i}return n}function pNe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class jZ{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function kH(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new jZ(e,t,n-t,e,okt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return kH(e,t,i)+kH(e,r,n)+akt(e,i>>3,r-i>>3)}function akt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=f9(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=f9(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=f9(s.getUint8(i)),i+=1;return r}function f9(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const lkt=-1;class gr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return hn.isSparseUnion(t)?this.children.some(n=>n.nullable):hn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(hn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=lkt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-kH(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof gr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Jf(t),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l)))}getValid(t){const{type:n}=this;if(hn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===el.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(hn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===el.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,l=o+t,u=1<<l%8,c=l>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(v3(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const d=s[c];r=(d&u)!==0,n?s[c]=d|u:s[c]=d&~u}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new gr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===se.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(v3(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Vp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Vp.TYPE])&&(o[Vp.TYPE]=s.subarray(t,t+n)),(s=o[Vp.OFFSET])&&(o[Vp.OFFSET]=s.subarray(t,t+n+1))||(s=o[Vp.DATA])&&(o[Vp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}gr.prototype.children=Object.freeze([]);class dA extends Pn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new gr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=xs(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new gr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=xs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new gr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=xs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new gr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.data),s=Jn(t.nullBitmap),o=JT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new gr(n,r,a,l,[o,i,s])}visitLargeUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.data),s=Jn(t.nullBitmap),o=ipe(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new gr(n,r,a,l,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.data),s=Jn(t.nullBitmap),o=JT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new gr(n,r,a,l,[o,i,s])}visitLargeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.data),s=Jn(t.nullBitmap),o=ipe(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new gr(n,r,a,l,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=xs(n.ArrayType,t.data),{["length"]:o=s.length/Jf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new gr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=xs(n.ArrayType,t.data),{["length"]:o=s.length/Jf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new gr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=xs(n.ArrayType,t.data),{["length"]:o=s.length/Jf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new gr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=xs(n.ArrayType,t.data),{["length"]:o=s.length/Jf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new gr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=xs(n.ArrayType,t.data),{["length"]:o=s.length/Jf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new gr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Jn(t.nullBitmap),o=JT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new gr(n,r,a,l,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Jn(t.nullBitmap),{length:o=i.reduce((l,{length:u})=>Math.max(l,u),0),nullCount:a=t.nullBitmap?-1:0}=t;return new gr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=xs(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(hn.isSparseUnion(n))return new gr(n,r,o,a,[void 0,void 0,void 0,s],i);const l=JT(t.valueOffsets);return new gr(n,r,o,a,[l,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=xs(n.indices.ArrayType,t.data),{["dictionary"]:o=new cr([new dA().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new gr(n,r,a,l,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=xs(n.ArrayType,t.data),{["length"]:o=s.length/Jf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new gr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=xs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new gr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new dA().visit({type:n.valueType})}=t,s=Jn(t.nullBitmap),{["length"]:o=i.length/Jf(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new gr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new dA().visit({type:n.childType})}=t,s=Jn(t.nullBitmap),o=JT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new gr(n,r,a,l,[o,void 0,s],[i])}}const ukt=new dA;function ra(e){return ukt.visit(e)}class bpe{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function ckt(e){return e.some(t=>t.nullable)}function mNe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function gNe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function yNe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],l=t[s],{length:u}=a;if(l>=r)break;if(n>=l+u)continue;if(l>=n&&l+u<=r){i.push(a);continue}const c=Math.max(0,n-l),d=Math.min(r-l,u);i.push(a.slice(c,d-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function BZ(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function zZ(e,t){return e.getValid(t)}function b3(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return BZ(r,this._offsets,n,t)}}function vNe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=BZ(s,this._offsets,r,n);return t=void 0,o}}function bNe(e){let t;function n(r,i,s){let o=s,a=0,l=0;for(let u=i-1,c=r.length;++u<c;){const d=r[u];if(~(a=e(d,t,o)))return l+a;o=0,l+=d.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):BZ(s,this._offsets,i,n);return t=void 0,o}}class Wt extends Pn{}function dkt(e,t){return t===null&&e.length>0?0:-1}function fkt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new jZ(n,e.offset+(t||0),e.length,n,hNe)){if(!i)return r;++r}return-1}function an(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case se.Union:break;case se.Dictionary:break;default:return fkt(e,n)}const r=Xl.getVisitFn(e),i=OS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function _Ne(e,t,n){const r=Xl.getVisitFn(e),i=OS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Wt.prototype.visitNull=dkt;Wt.prototype.visitBool=an;Wt.prototype.visitInt=an;Wt.prototype.visitInt8=an;Wt.prototype.visitInt16=an;Wt.prototype.visitInt32=an;Wt.prototype.visitInt64=an;Wt.prototype.visitUint8=an;Wt.prototype.visitUint16=an;Wt.prototype.visitUint32=an;Wt.prototype.visitUint64=an;Wt.prototype.visitFloat=an;Wt.prototype.visitFloat16=an;Wt.prototype.visitFloat32=an;Wt.prototype.visitFloat64=an;Wt.prototype.visitUtf8=an;Wt.prototype.visitLargeUtf8=an;Wt.prototype.visitBinary=an;Wt.prototype.visitLargeBinary=an;Wt.prototype.visitFixedSizeBinary=an;Wt.prototype.visitDate=an;Wt.prototype.visitDateDay=an;Wt.prototype.visitDateMillisecond=an;Wt.prototype.visitTimestamp=an;Wt.prototype.visitTimestampSecond=an;Wt.prototype.visitTimestampMillisecond=an;Wt.prototype.visitTimestampMicrosecond=an;Wt.prototype.visitTimestampNanosecond=an;Wt.prototype.visitTime=an;Wt.prototype.visitTimeSecond=an;Wt.prototype.visitTimeMillisecond=an;Wt.prototype.visitTimeMicrosecond=an;Wt.prototype.visitTimeNanosecond=an;Wt.prototype.visitDecimal=an;Wt.prototype.visitList=an;Wt.prototype.visitStruct=an;Wt.prototype.visitUnion=an;Wt.prototype.visitDenseUnion=_Ne;Wt.prototype.visitSparseUnion=_Ne;Wt.prototype.visitDictionary=an;Wt.prototype.visitInterval=an;Wt.prototype.visitIntervalDayTime=an;Wt.prototype.visitIntervalYearMonth=an;Wt.prototype.visitDuration=an;Wt.prototype.visitDurationSecond=an;Wt.prototype.visitDurationMillisecond=an;Wt.prototype.visitDurationMicrosecond=an;Wt.prototype.visitDurationNanosecond=an;Wt.prototype.visitFixedSizeList=an;Wt.prototype.visitMap=an;const _3=new Wt;class Gt extends Pn{}function en(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===se.Timestamp||t instanceof tl&&t.bitWidth!==64||t instanceof Hm&&t.bitWidth!==64||t instanceof uy&&t.precision!==Ds.HALF))return new bpe(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new bpe(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new hkt(o)})}class hkt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Gt.prototype.visitNull=en;Gt.prototype.visitBool=en;Gt.prototype.visitInt=en;Gt.prototype.visitInt8=en;Gt.prototype.visitInt16=en;Gt.prototype.visitInt32=en;Gt.prototype.visitInt64=en;Gt.prototype.visitUint8=en;Gt.prototype.visitUint16=en;Gt.prototype.visitUint32=en;Gt.prototype.visitUint64=en;Gt.prototype.visitFloat=en;Gt.prototype.visitFloat16=en;Gt.prototype.visitFloat32=en;Gt.prototype.visitFloat64=en;Gt.prototype.visitUtf8=en;Gt.prototype.visitLargeUtf8=en;Gt.prototype.visitBinary=en;Gt.prototype.visitLargeBinary=en;Gt.prototype.visitFixedSizeBinary=en;Gt.prototype.visitDate=en;Gt.prototype.visitDateDay=en;Gt.prototype.visitDateMillisecond=en;Gt.prototype.visitTimestamp=en;Gt.prototype.visitTimestampSecond=en;Gt.prototype.visitTimestampMillisecond=en;Gt.prototype.visitTimestampMicrosecond=en;Gt.prototype.visitTimestampNanosecond=en;Gt.prototype.visitTime=en;Gt.prototype.visitTimeSecond=en;Gt.prototype.visitTimeMillisecond=en;Gt.prototype.visitTimeMicrosecond=en;Gt.prototype.visitTimeNanosecond=en;Gt.prototype.visitDecimal=en;Gt.prototype.visitList=en;Gt.prototype.visitStruct=en;Gt.prototype.visitUnion=en;Gt.prototype.visitDenseUnion=en;Gt.prototype.visitSparseUnion=en;Gt.prototype.visitDictionary=en;Gt.prototype.visitInterval=en;Gt.prototype.visitIntervalDayTime=en;Gt.prototype.visitIntervalYearMonth=en;Gt.prototype.visitDuration=en;Gt.prototype.visitDurationSecond=en;Gt.prototype.visitDurationMillisecond=en;Gt.prototype.visitDurationMicrosecond=en;Gt.prototype.visitDurationNanosecond=en;Gt.prototype.visitFixedSizeList=en;Gt.prototype.visitMap=en;const UZ=new Gt;var wNe;const xNe={},ENe={};class cr{constructor(t){var n,r,i;const s=t[0]instanceof cr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof gr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:u}=xNe[o.typeId],c=s[0];this.isValid=d=>zZ(c,d),this.get=d=>a(c,d),this.set=(d,f)=>l(c,d,f),this.indexOf=d=>u(c,d),this._offsets=[0,c.length];break}default:Object.setPrototypeOf(this,ENe[o.typeId]),this._offsets=gNe(s);break}this.data=s,this.type=o,this.stride=Jf(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullable(){return ckt(this.data)}get nullCount(){return mNe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${se[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}[Symbol.iterator](){return UZ.visit(this)}concat(...t){return new cr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new cr(fNe(this,t,n,({data:r,_offsets:i},s,o)=>yNe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case se.Int:case se.Float:case se.Decimal:case se.Time:case se.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new cr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return hn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(hn.isDictionary(this.type)){const t=new w3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new cr(n)}return new w3(this)}unmemoize(){if(hn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new cr(n)}return this}}wNe=Symbol.toStringTag;cr[wNe]=(e=>{e.type=hn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(se).map(n=>se[n]).filter(n=>typeof n=="number"&&n!==se.NONE);for(const n of t){const r=Xl.getVisitFnByTypeId(n),i=Uc.getVisitFnByTypeId(n),s=_3.getVisitFnByTypeId(n);xNe[n]={get:r,set:i,indexOf:s},ENe[n]=Object.create(e,{isValid:{value:b3(zZ)},get:{value:b3(Xl.getVisitFnByTypeId(n))},set:{value:vNe(Uc.getVisitFnByTypeId(n))},indexOf:{value:bNe(_3.getVisitFnByTypeId(n))}})}return"Vector"})(cr.prototype);class w3 extends cr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new w3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new cr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function pkt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${mkt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function mkt(e){return typeof e!="bigint"?pb(e):`${pb(e)}n`}function h9(e,t){const n=Math.ceil(e)*t-1;return(n-n%64+64||64)/t}function _pe(e,t=0){return e.length>=t?e.subarray(0,t):SH(new e.constructor(t),e,0)}class _R{constructor(t,n=0,r=1){this.length=Math.ceil(n/r),this.buffer=new t(this.length),this.stride=r,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?h9(r*1,this.BYTES_PER_ELEMENT):h9(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=h9(t*this.stride,this.BYTES_PER_ELEMENT);const n=_pe(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(t){return this.buffer=_pe(this.buffer,t)}}class wR extends _R{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class SNe extends wR{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class TNe extends wR{constructor(t){super(t.OffsetArrayType,1,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&r>=0&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0),super.flush(t+1)}}let iu=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Jf(t),this._nulls=new SNe,n&&n.length>0&&(this._isValid=pkt(n))}toVector(){return new cr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,l)=>a+l.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:l,_offsets:u,_values:c,_nulls:d}=this;(n=l==null?void 0:l.flush(o))?i=u==null?void 0:u.flush(o):(i=u==null?void 0:u.flush(o))?t=c==null?void 0:c.flush(u.last()):t=c==null?void 0:c.flush(o),a>0&&(r=d==null?void 0:d.flush(o));const f=this.children.map(h=>h.flush());return this.clear(),ra({type:s,length:o,nullCount:a,children:f,child:f[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};iu.prototype.length=1;iu.prototype.stride=1;iu.prototype.children=null;iu.prototype.finished=!1;iu.prototype.nullValues=null;iu.prototype._isValid=()=>!0;class dg extends iu{constructor(t){super(t),this._values=new wR(this.ArrayType,0,this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class DS extends iu{constructor(t){super(t),this._pendingLength=0,this._offsets=new TNe(t.type)}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof h4?n[Pd].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class RH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}class hu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new hu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Sr),(n||new hu).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):As.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Xf).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new RH).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new RH).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ts).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,As.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Er{constructor(t=[],n,r,i=As.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=NH(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Er(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Er(n,this.metadata)}assign(...t){const n=t[0]instanceof Er?t[0]:Array.isArray(t[0])?new Er(t[0]):new Er(t),r=[...this.fields],i=qN(qN(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(u=>u.name===a.name);return~l?(r[l]=a.clone({metadata:qN(qN(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=NH(s,new Map);return new Er([...r,...s],i,new Map([...this.dictionaries,...o]))}}Er.prototype.fields=null;Er.prototype.metadata=null;Er.prototype.dictionaries=null;let $r=class PH{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new PH(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],PH.new(n,r,i,s)}};$r.prototype.type=null;$r.prototype.name=null;$r.prototype.nullable=null;$r.prototype.metadata=null;function qN(e,t){return new Map([...e||new Map,...t||new Map])}function NH(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(hn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&NH(s.children,t)}return t}var gkt=ZRe,ykt=l3;class OH{static decode(t){t=new ykt(Jn(t));const n=hu.getRootAsFooter(t),r=Er.decode(n.schema(),new Map,n.version());return new vkt(r,n)}static encode(t){const n=new gkt,r=Er.encode(n,t.schema);hu.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())dy.encode(n,o);const i=n.endVector();hu.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())dy.encode(n,o);const s=n.endVector();return hu.startFooter(n),hu.addSchema(n,r),hu.addVersion(n,As.V5),hu.addRecordBatches(n,i),hu.addDictionaries(n,s),hu.finishFooterBuffer(n,hu.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=As.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class vkt extends OH{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return dy.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return dy.decode(n)}return null}}class dy{static decode(t){return new dy(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return RH.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Po(r),this.bodyLength=Po(n)}}const WN=Object.freeze({done:!0,value:void 0});class CNe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class bkt extends CNe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Kp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(WN);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return spe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return spe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Kp(this,void 0,void 0,function*(){return yield this.abort(t),WN})}return(t){return Kp(this,void 0,void 0,function*(){return yield this.close(),WN})}read(t){return Kp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Kp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(WN)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class p9 extends bkt{write(t){if((t=Jn(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?EH(this.toUint8Array(!0)):this.toUint8Array(!1).then(EH)}toUint8Array(t=!1){return t?qh(this._values)[0]:Kp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var l=!0,u=F2(this),c;c=yield u.next(),n=c.done,!n;l=!0){s=c.value,l=!1;const d=s;o.push(d),a+=d.byteLength}}catch(d){r={error:d}}finally{try{!l&&!n&&(i=u.return)&&(yield i.call(u))}finally{if(r)throw r.error}}return qh(o,a)[0]})}}class ANe extends DS{constructor(t){super(t),this._values=new _R(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Jn(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const l=a.length;i.set(a,s),r.set(o,l),s+=l}}}class INe extends DS{constructor(t){super(t),this._values=new _R(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Jn(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,BigInt(0));else{const l=a.length;i.set(a,s),r.set(o,BigInt(l)),s+=l}}}class _kt extends iu{constructor(t){super(t),this._values=new SNe}setValue(t,n){this._values.set(t,+n)}}class m4 extends dg{}m4.prototype._setValue=MPe;class kNe extends m4{}kNe.prototype._setValue=wZ;class RNe extends m4{}RNe.prototype._setValue=xZ;class PNe extends dg{}PNe.prototype._setValue=FPe;class wkt extends iu{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new cy(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=x3({type:this.type.indices,nullValues:n}),this.dictionary=x3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class NNe extends dg{}NNe.prototype._setValue=NPe;class xkt extends iu{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new gE(this.type.listSize,new $r(n,t.type,!0)),r}}class g4 extends dg{setValue(t,n){this._values.set(t,n)}}class Ekt extends g4{setValue(t,n){super.setValue(t,kPe(n))}}class Skt extends g4{}class Tkt extends g4{}class y4 extends dg{}y4.prototype._setValue=zPe;class ONe extends y4{}ONe.prototype._setValue=PZ;class DNe extends y4{}DNe.prototype._setValue=NZ;class MS extends dg{}MS.prototype._setValue=UPe;class MNe extends MS{}MNe.prototype._setValue=OZ;class $Ne extends MS{}$Ne.prototype._setValue=DZ;class LNe extends MS{}LNe.prototype._setValue=MZ;class FNe extends MS{}FNe.prototype._setValue=$Z;class fg extends dg{setValue(t,n){this._values.set(t,n)}}class Ckt extends fg{}class Akt extends fg{}class Ikt extends fg{}class kkt extends fg{}class Rkt extends fg{}class Pkt extends fg{}class Nkt extends fg{}class Okt extends fg{}class Dkt extends DS{constructor(t){super(t),this._offsets=new TNe(t.type)}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new mE(new $r(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,l=n.set(i,a).buffer[i];for(let u=-1;++u<a;)r.set(l+u,o[u])}}}class Mkt extends DS{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new NI(new $r(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const l of s.entries())if(r.set(o,l),++o>=a)break}}}class $kt extends iu{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class Lkt extends iu{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new ua([...this.type.children,new $r(n,t.type,!0)]),r}}class $S extends dg{}$S.prototype._setValue=$Pe;class jNe extends $S{}jNe.prototype._setValue=EZ;class BNe extends $S{}BNe.prototype._setValue=SZ;class zNe extends $S{}zNe.prototype._setValue=TZ;class UNe extends $S{}UNe.prototype._setValue=CZ;class LS extends dg{}LS.prototype._setValue=LPe;class VNe extends LS{}VNe.prototype._setValue=AZ;class HNe extends LS{}HNe.prototype._setValue=IZ;class qNe extends LS{}qNe.prototype._setValue=kZ;class WNe extends LS{}WNe.prototype._setValue=RZ;class VZ extends iu{constructor(t){super(t),this._typeIds=new wR(Int8Array,0,1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new $r(n,t.type)];return this.type=new PI(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class Fkt extends VZ{}class jkt extends VZ{constructor(t){super(t),this._offsets=new wR(Int32Array)}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class GNe extends DS{constructor(t){super(t),this._values=new _R(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,c4(n))}_flushPending(t,n){}}GNe.prototype._flushPending=ANe.prototype._flushPending;class YNe extends DS{constructor(t){super(t),this._values=new _R(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,c4(n))}_flushPending(t,n){}}YNe.prototype._flushPending=INe.prototype._flushPending;class Bkt extends Pn{visitNull(){return $kt}visitBool(){return _kt}visitInt(){return fg}visitInt8(){return Ckt}visitInt16(){return Akt}visitInt32(){return Ikt}visitInt64(){return kkt}visitUint8(){return Rkt}visitUint16(){return Pkt}visitUint32(){return Nkt}visitUint64(){return Okt}visitFloat(){return g4}visitFloat16(){return Ekt}visitFloat32(){return Skt}visitFloat64(){return Tkt}visitUtf8(){return GNe}visitLargeUtf8(){return YNe}visitBinary(){return ANe}visitLargeBinary(){return INe}visitFixedSizeBinary(){return NNe}visitDate(){return m4}visitDateDay(){return kNe}visitDateMillisecond(){return RNe}visitTimestamp(){return $S}visitTimestampSecond(){return jNe}visitTimestampMillisecond(){return BNe}visitTimestampMicrosecond(){return zNe}visitTimestampNanosecond(){return UNe}visitTime(){return LS}visitTimeSecond(){return VNe}visitTimeMillisecond(){return HNe}visitTimeMicrosecond(){return qNe}visitTimeNanosecond(){return WNe}visitDecimal(){return PNe}visitList(){return Dkt}visitStruct(){return Lkt}visitUnion(){return VZ}visitDenseUnion(){return jkt}visitSparseUnion(){return Fkt}visitDictionary(){return wkt}visitInterval(){return y4}visitIntervalDayTime(){return ONe}visitIntervalYearMonth(){return DNe}visitDuration(){return MS}visitDurationSecond(){return MNe}visitDurationMillisecond(){return $Ne}visitDurationMicrosecond(){return LNe}visitDurationNanosecond(){return FNe}visitFixedSizeList(){return xkt}visitMap(){return Mkt}}const zkt=new Bkt;class Yt extends Pn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function ll(e,t){return t instanceof e.constructor}function n_(e,t){return e===t||ll(e,t)}function hg(e,t){return e===t||ll(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function v4(e,t){return e===t||ll(e,t)&&e.precision===t.precision}function Ukt(e,t){return e===t||ll(e,t)&&e.byteWidth===t.byteWidth}function HZ(e,t){return e===t||ll(e,t)&&e.unit===t.unit}function xR(e,t){return e===t||ll(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function ER(e,t){return e===t||ll(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Vkt(e,t){return e===t||ll(e,t)&&e.children.length===t.children.length&&fy.compareManyFields(e.children,t.children)}function Hkt(e,t){return e===t||ll(e,t)&&e.children.length===t.children.length&&fy.compareManyFields(e.children,t.children)}function qZ(e,t){return e===t||ll(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&fy.compareManyFields(e.children,t.children)}function qkt(e,t){return e===t||ll(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&fy.visit(e.indices,t.indices)&&fy.visit(e.dictionary,t.dictionary)}function WZ(e,t){return e===t||ll(e,t)&&e.unit===t.unit}function SR(e,t){return e===t||ll(e,t)&&e.unit===t.unit}function Wkt(e,t){return e===t||ll(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&fy.compareManyFields(e.children,t.children)}function Gkt(e,t){return e===t||ll(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&fy.compareManyFields(e.children,t.children)}Yt.prototype.visitNull=n_;Yt.prototype.visitBool=n_;Yt.prototype.visitInt=hg;Yt.prototype.visitInt8=hg;Yt.prototype.visitInt16=hg;Yt.prototype.visitInt32=hg;Yt.prototype.visitInt64=hg;Yt.prototype.visitUint8=hg;Yt.prototype.visitUint16=hg;Yt.prototype.visitUint32=hg;Yt.prototype.visitUint64=hg;Yt.prototype.visitFloat=v4;Yt.prototype.visitFloat16=v4;Yt.prototype.visitFloat32=v4;Yt.prototype.visitFloat64=v4;Yt.prototype.visitUtf8=n_;Yt.prototype.visitLargeUtf8=n_;Yt.prototype.visitBinary=n_;Yt.prototype.visitLargeBinary=n_;Yt.prototype.visitFixedSizeBinary=Ukt;Yt.prototype.visitDate=HZ;Yt.prototype.visitDateDay=HZ;Yt.prototype.visitDateMillisecond=HZ;Yt.prototype.visitTimestamp=xR;Yt.prototype.visitTimestampSecond=xR;Yt.prototype.visitTimestampMillisecond=xR;Yt.prototype.visitTimestampMicrosecond=xR;Yt.prototype.visitTimestampNanosecond=xR;Yt.prototype.visitTime=ER;Yt.prototype.visitTimeSecond=ER;Yt.prototype.visitTimeMillisecond=ER;Yt.prototype.visitTimeMicrosecond=ER;Yt.prototype.visitTimeNanosecond=ER;Yt.prototype.visitDecimal=n_;Yt.prototype.visitList=Vkt;Yt.prototype.visitStruct=Hkt;Yt.prototype.visitUnion=qZ;Yt.prototype.visitDenseUnion=qZ;Yt.prototype.visitSparseUnion=qZ;Yt.prototype.visitDictionary=qkt;Yt.prototype.visitInterval=WZ;Yt.prototype.visitIntervalDayTime=WZ;Yt.prototype.visitIntervalYearMonth=WZ;Yt.prototype.visitDuration=SR;Yt.prototype.visitDurationSecond=SR;Yt.prototype.visitDurationMillisecond=SR;Yt.prototype.visitDurationMicrosecond=SR;Yt.prototype.visitDurationNanosecond=SR;Yt.prototype.visitFixedSizeList=Wkt;Yt.prototype.visitMap=Gkt;const fy=new Yt;function DH(e,t){return fy.compareSchemas(e,t)}function x3(e){const t=e.type,n=new(zkt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:l}=a,u=s(a,o);n.children.push(x3(Object.assign(Object.assign({},u),{type:l})))}}return n}function m9(e,t){return Ykt(e,t.map(n=>n.data.concat()))}function Ykt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((d,f)=>Math.max(d,f.length),0)};let s=0,o=0,a=-1;const l=t.length;let u,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)c[a]=u=t[a].shift(),o=Math.min(o,u?u.length:o);Number.isFinite(o)&&(c=Kkt(n,o,c,t,i),o>0&&(r[s++]=ra({type:new ua(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(d=>new bu(e,d))]}function Kkt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const u=n[a],c=u==null?void 0:u.length;if(c>=t)c===t?n[a]=u:(n[a]=u.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(u.slice(t,c-t))));else{const d=e[a];e[a]=d.clone({nullable:!0}),n[a]=(s=u==null?void 0:u._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:ra({type:d.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var KNe;class Il{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Er([]),this._offsets=[0],this;let i,s;t[0]instanceof Er&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=l=>{if(l){if(l instanceof bu)return[l];if(l instanceof Il)return l.batches;if(l instanceof gr){if(l.type instanceof ua)return[new bu(new Er(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(u=>o(u));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(u=>o(u));if(typeof l=="object"){const u=Object.keys(l),c=u.map(h=>new cr([l[h]])),d=i??new Er(u.map((h,p)=>new $r(String(h),c[p].type,c[p].nullable))),[,f]=m9(d,c);return f.length===0?[new bu(l)]:f}}}return[]},a=t.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Er([]),!(i instanceof Er))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof bu))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!DH(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??gNe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=mNe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}[Symbol.iterator](){return this.batches.length>0?UZ.visit(new cr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Il(n,r.map(i=>new bu(n,i)))}slice(t,n){const r=this.schema;[t,n]=fNe({length:this.numRows},t,n);const i=yNe(this.data,this._offsets,t,n);return new Il(r,i.map(s=>new bu(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=ra({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new cr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new cr([ra({type:new Vm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((l,u)=>this.getChildAt(u));[s[t],a[t]]=[o,n],[r,i]=m9(r,a)}return new Il(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Il(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,l,u)=>{const[c,d]=a,f=n.findIndex(h=>h.name===l.name);return~f?d[f]=u:c.push(u),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):t.getChildAt(l)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Il(...m9(s,o))}}KNe=Symbol.toStringTag;Il[KNe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=b3(zZ),e.get=b3(Xl.getVisitFn(se.Struct)),e.set=vNe(Uc.getVisitFn(se.Struct)),e.indexOf=bNe(_3.getVisitFn(se.Struct)),"Table"))(Il.prototype);var XNe;let bu=class i2{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Er))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ra({nullCount:0,type:new ua(this.schema.fields),children:this.schema.fields.map(n=>ra({type:n.type,nullCount:0}))})]=t,!(this.data instanceof gr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=wpe(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,u,c)=>(l.children[c]=n[u],l.length=Math.max(l.length,n[u].length),l.fields[c]=$r.new({name:u,type:n[u].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new Er(r),a=ra({type:new ua(r),length:s,children:i,nullCount:0});[this.schema,this.data]=wpe(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=QNe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Xl.visit(this.data,t)}set(t,n){return Uc.visit(this.data,t,n)}indexOf(t,n){return _3.visit(this.data,t,n)}[Symbol.iterator](){return UZ.visit(new cr([this.data]))}toArray(){return[...this]}concat(...t){return new Il(this.schema,[this,...t])}slice(t,n){const[r]=new cr([this.data]).slice(t,n).data;return new i2(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new cr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new cr([ra({type:new Vm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Er(s,new Map(this.schema.metadata)),i=ra({type:new ua(s),children:o})}return new i2(r,i)}select(t){const n=this.schema.select(t),r=new ua(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new i2(n,ra({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=ra({type:new ua(n.fields),length:this.numRows,children:r});return new i2(n,i)}};XNe=Symbol.toStringTag;bu[XNe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(bu.prototype);function wpe(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,l]of e.fields.entries()){const u=t[a];(!u||u.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=u==null?void 0:u._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:ra({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),ra({type:new ua(i),length:n,children:s})]}function QNe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],l=t[s];for(const u of[l,...((i=l==null?void 0:l.dictionary)===null||i===void 0?void 0:i.data)||[]])QNe(a.children,u==null?void 0:u.children,n);if(hn.isDictionary(a)){const{id:u}=a;if(!n.has(u))l!=null&&l.dictionary&&n.set(u,l.dictionary);else if(n.get(u)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class Xkt extends bu{constructor(t){const n=t.fields.map(i=>ra({type:i.type})),r=ra({type:new ua(t.fields),nullCount:0,children:n});super(t,r)}}let Dg=class Vf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Vf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Sr),(n||new Vf).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):As.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):ms.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ts).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,As.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,ms.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Vf.startMessage(t),Vf.addVersion(t,n),Vf.addHeaderType(t,r),Vf.addHeader(t,i),Vf.addBodyLength(t,s),Vf.addCustomMetadata(t,o),Vf.endMessage(t)}};class Qkt extends Pn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return hpe.startNull(n),hpe.endNull(n)}visitInt(t,n){return vu.startInt(n),vu.addBitWidth(n,t.bitWidth),vu.addIsSigned(n,t.isSigned),vu.endInt(n)}visitFloat(t,n){return dh.startFloatingPoint(n),dh.addPrecision(n,t.precision),dh.endFloatingPoint(n)}visitBinary(t,n){return lpe.startBinary(n),lpe.endBinary(n)}visitLargeBinary(t,n){return cpe.startLargeBinary(n),cpe.endLargeBinary(n)}visitBool(t,n){return upe.startBool(n),upe.endBool(n)}visitUtf8(t,n){return ppe.startUtf8(n),ppe.endUtf8(n)}visitLargeUtf8(t,n){return dpe.startLargeUtf8(n),dpe.endLargeUtf8(n)}visitDecimal(t,n){return mw.startDecimal(n),mw.addScale(n,t.scale),mw.addPrecision(n,t.precision),mw.addBitWidth(n,t.bitWidth),mw.endDecimal(n)}visitDate(t,n){return AD.startDate(n),AD.addUnit(n,t.unit),AD.endDate(n)}visitTime(t,n){return t2.startTime(n),t2.addUnit(n,t.unit),t2.addBitWidth(n,t.bitWidth),t2.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return n2.startTimestamp(n),n2.addUnit(n,t.unit),r!==void 0&&n2.addTimezone(n,r),n2.endTimestamp(n)}visitInterval(t,n){return fh.startInterval(n),fh.addUnit(n,t.unit),fh.endInterval(n)}visitDuration(t,n){return ID.startDuration(n),ID.addUnit(n,t.unit),ID.endDuration(n)}visitList(t,n){return fpe.startList(n),fpe.endList(n)}visitStruct(t,n){return P1.startStruct_(n),P1.endStruct_(n)}visitUnion(t,n){Jv.startTypeIdsVector(n,t.typeIds.length);const r=Jv.createTypeIdsVector(n,t.typeIds);return Jv.startUnion(n),Jv.addMode(n,t.mode),Jv.addTypeIds(n,r),Jv.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Zp.startDictionaryEncoding(n),Zp.addId(n,BigInt(t.id)),Zp.addIsOrdered(n,t.isOrdered),r!==void 0&&Zp.addIndexType(n,r),Zp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return kD.startFixedSizeBinary(n),kD.addByteWidth(n,t.byteWidth),kD.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return RD.startFixedSizeList(n),RD.addListSize(n,t.listSize),RD.endFixedSizeList(n)}visitMap(t,n){return PD.startMap(n),PD.addKeysSorted(n,t.keysSorted),PD.endMap(n)}}const g9=new Qkt;function Jkt(e,t=new Map){return new Er(eRt(e,t),OD(e.metadata),t)}function JNe(e){return new Bu(e.count,ZNe(e.columns),eOe(e.columns))}function Zkt(e){return new Wh(JNe(e.data),e.id,e.isDelta)}function eRt(e,t){return(e.fields||[]).filter(Boolean).map(n=>$r.fromJSON(n,t))}function xpe(e,t){return(e.children||[]).filter(Boolean).map(n=>$r.fromJSON(n,t))}function ZNe(e){return(e||[]).reduce((t,n)=>[...t,new hy(n.count,tRt(n.VALIDITY)),...ZNe(n.children)],[])}function eOe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new bh(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new bh(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new bh(t.length,i.OFFSET.length)),i.DATA&&t.push(new bh(t.length,i.DATA.length)),t=eOe(i.children,t)}return t}function tRt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function nRt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Spe(e,xpe(e,t)),i=new $r(e.name,o,e.nullable,OD(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Epe(r):new ly,a=new cy(t.get(n),r,n,s.isOrdered),i=new $r(e.name,a,e.nullable,OD(e.metadata))):(r=(r=s.indexType)?Epe(r):new ly,t.set(n,o=Spe(e,xpe(e,t))),a=new cy(o,r,n,s.isOrdered),i=new $r(e.name,a,e.nullable,OD(e.metadata))),i||null}function OD(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Epe(e){return new tl(e.isSigned,e.bitWidth)}function Spe(e,t){const n=e.type.name;switch(n){case"NONE":return new Vm;case"null":return new Vm;case"binary":return new kI;case"largebinary":return new f3;case"utf8":return new fE;case"largeutf8":return new h3;case"bool":return new RI;case"list":return new mE((t||[])[0]);case"struct":return new ua(t||[]);case"struct_":return new ua(t||[])}switch(n){case"int":{const r=e.type;return new tl(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new uy(Ds[r.precision])}case"decimal":{const r=e.type;return new p3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new hE(Bc[r.unit])}case"time":{const r=e.type;return new Hm(Bt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new m3(Bt[r.unit],r.timezone)}case"interval":{const r=e.type;return new pE(zc[r.unit])}case"duration":{const r=e.type;return new g3(Bt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new PI(el[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new y3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new gE(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new NI((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var rRt=ZRe,iRt=l3;class hh{static fromJSON(t,n){const r=new hh(0,As.V5,n);return r._createHeader=sRt(t,n),r}static decode(t){t=new iRt(Jn(t));const n=Dg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new hh(r,i,s);return o._createHeader=oRt(n,s),o}static encode(t){const n=new rRt;let r=-1;return t.isSchema()?r=Er.encode(n,t.header()):t.isRecordBatch()?r=Bu.encode(n,t.header()):t.isDictionaryBatch()&&(r=Wh.encode(n,t.header())),Dg.startMessage(n),Dg.addVersion(n,As.V5),Dg.addHeader(n,r),Dg.addHeaderType(n,t.headerType),Dg.addBodyLength(n,BigInt(t.bodyLength)),Dg.finishMessageBuffer(n,Dg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Er)return new hh(0,As.V5,ms.Schema,t);if(t instanceof Bu)return new hh(n,As.V5,ms.RecordBatch,t);if(t instanceof Wh)return new hh(n,As.V5,ms.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===ms.Schema}isRecordBatch(){return this.headerType===ms.RecordBatch}isDictionaryBatch(){return this.headerType===ms.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Po(t)}}class Bu{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Po(t)}}class Wh{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Po(n)}}class bh{constructor(t,n){this.offset=Po(t),this.length=Po(n)}}class hy{constructor(t,n){this.length=Po(t),this.nullCount=Po(n)}}function sRt(e,t){return()=>{switch(t){case ms.Schema:return Er.fromJSON(e);case ms.RecordBatch:return Bu.fromJSON(e);case ms.DictionaryBatch:return Wh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${ms[t]}, type: ${t} }`)}}function oRt(e,t){return()=>{switch(t){case ms.Schema:return Er.decode(e.header(new Xf),new Map,e.version());case ms.RecordBatch:return Bu.decode(e.header(new Up),e.version());case ms.DictionaryBatch:return Wh.decode(e.header(new hw),e.version())}throw new Error(`Unrecognized Message type: { name: ${ms[t]}, type: ${t} }`)}}$r.encode=yRt;$r.decode=mRt;$r.fromJSON=nRt;Er.encode=gRt;Er.decode=aRt;Er.fromJSON=Jkt;Bu.encode=vRt;Bu.decode=lRt;Bu.fromJSON=JNe;Wh.encode=bRt;Wh.decode=uRt;Wh.fromJSON=Zkt;hy.encode=_Rt;hy.decode=dRt;bh.encode=wRt;bh.decode=cRt;function aRt(e,t=new Map,n=As.V5){const r=pRt(e,t);return new Er(r,DD(e),t,n)}function lRt(e,t=As.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Bu(e.length(),fRt(e),hRt(e,t))}function uRt(e,t=As.V5){return new Wh(Bu.decode(e.data(),t),e.id(),e.isDelta())}function cRt(e){return new bh(e.offset(),e.length())}function dRt(e){return new hy(e.length(),e.nullCount())}function fRt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=hy.decode(n));return t}function hRt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<As.V4&&(r.bb_pos+=8*(i+1)),n[++s]=bh.decode(r));return n}function pRt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=$r.decode(r,t));return n}function Tpe(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=$r.decode(r,t));return n}function mRt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Ape(e,Tpe(e,t)),r=new $r(e.name(),i,e.nullable(),DD(e))):t.has(n=Po(a.id()))?(s=(s=a.indexType())?Cpe(s):new ly,o=new cy(t.get(n),s,n,a.isOrdered()),r=new $r(e.name(),o,e.nullable(),DD(e))):(s=(s=a.indexType())?Cpe(s):new ly,t.set(n,i=Ape(e,Tpe(e,t))),o=new cy(i,s,n,a.isOrdered()),r=new $r(e.name(),o,e.nullable(),DD(e))),r||null}function DD(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Cpe(e){return new tl(e.isSigned(),e.bitWidth())}function Ape(e,t){const n=e.typeType();switch(n){case Qr.NONE:return new Vm;case Qr.Null:return new Vm;case Qr.Binary:return new kI;case Qr.LargeBinary:return new f3;case Qr.Utf8:return new fE;case Qr.LargeUtf8:return new h3;case Qr.Bool:return new RI;case Qr.List:return new mE((t||[])[0]);case Qr.Struct_:return new ua(t||[])}switch(n){case Qr.Int:{const r=e.type(new vu);return new tl(r.isSigned(),r.bitWidth())}case Qr.FloatingPoint:{const r=e.type(new dh);return new uy(r.precision())}case Qr.Decimal:{const r=e.type(new mw);return new p3(r.scale(),r.precision(),r.bitWidth())}case Qr.Date:{const r=e.type(new AD);return new hE(r.unit())}case Qr.Time:{const r=e.type(new t2);return new Hm(r.unit(),r.bitWidth())}case Qr.Timestamp:{const r=e.type(new n2);return new m3(r.unit(),r.timezone())}case Qr.Interval:{const r=e.type(new fh);return new pE(r.unit())}case Qr.Duration:{const r=e.type(new ID);return new g3(r.unit())}case Qr.Union:{const r=e.type(new Jv);return new PI(r.mode(),r.typeIdsArray()||[],t||[])}case Qr.FixedSizeBinary:{const r=e.type(new kD);return new y3(r.byteWidth())}case Qr.FixedSizeList:{const r=e.type(new RD);return new gE(r.listSize(),(t||[])[0])}case Qr.Map:{const r=e.type(new PD);return new NI((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Qr[n]}" (${n})`)}function gRt(e,t){const n=t.fields.map(s=>$r.encode(e,s));Xf.startFieldsVector(e,n.length);const r=Xf.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Xf.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),l=e.createString(`${o}`);return Ts.startKeyValue(e),Ts.addKey(e,a),Ts.addValue(e,l),Ts.endKeyValue(e)})):-1;return Xf.startSchema(e),Xf.addFields(e,r),Xf.addEndianness(e,xRt?dE.Little:dE.Big),i!==-1&&Xf.addCustomMetadata(e,i),Xf.endSchema(e)}function yRt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;hn.isDictionary(s)?(o=s.dictionary.typeId,i=g9.visit(s,e),r=g9.visit(s.dictionary,e)):r=g9.visit(s,e);const a=(s.children||[]).map(c=>$r.encode(e,c)),l=oc.createChildrenVector(e,a),u=t.metadata&&t.metadata.size>0?oc.createCustomMetadataVector(e,[...t.metadata].map(([c,d])=>{const f=e.createString(`${c}`),h=e.createString(`${d}`);return Ts.startKeyValue(e),Ts.addKey(e,f),Ts.addValue(e,h),Ts.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),oc.startField(e),oc.addType(e,r),oc.addTypeType(e,o),oc.addChildren(e,l),oc.addNullable(e,!!t.nullable),n!==-1&&oc.addName(e,n),i!==-1&&oc.addDictionary(e,i),u!==-1&&oc.addCustomMetadata(e,u),oc.endField(e)}function vRt(e,t){const n=t.nodes||[],r=t.buffers||[];Up.startNodesVector(e,n.length);for(const o of n.slice().reverse())hy.encode(e,o);const i=e.endVector();Up.startBuffersVector(e,r.length);for(const o of r.slice().reverse())bh.encode(e,o);const s=e.endVector();return Up.startRecordBatch(e),Up.addLength(e,BigInt(t.length)),Up.addNodes(e,i),Up.addBuffers(e,s),Up.endRecordBatch(e)}function bRt(e,t){const n=Bu.encode(e,t.data);return hw.startDictionaryBatch(e),hw.addId(e,BigInt(t.id)),hw.addIsDelta(e,t.isDelta),hw.addData(e,n),hw.endDictionaryBatch(e)}function _Rt(e,t){return nPe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function wRt(e,t){return tPe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const xRt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),MH="ARROW1",GZ=new Uint8Array(MH.length);for(let e=0;e<MH.length;e+=1)GZ[e]=MH.codePointAt(e);GZ.length;class Ni extends Pn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof bu?s.data.children:s.data),r=new Ni;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof cr)return this.visitMany(t.data),this;const{type:n}=t;if(!hn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(hn.isUnion(n))this.nodes.push(new hy(r,0));else{const{nullCount:i}=t;hn.isNull(n)||Yd.call(this,i<=0?new Uint8Array(0):v3(t.offset,r,t.nullBitmap)),this.nodes.push(new hy(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Yd(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new bh(this._byteLength,t)),this._byteLength+=t,this}function ERt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Yd.call(this,i),n.mode===el.Sparse)return $H.call(this,e);if(n.mode===el.Dense){if(e.offset<=0)return Yd.call(this,s),$H.call(this,e);{const o=new Int32Array(r),a=Object.create(null),l=Object.create(null);for(let u,c,d=-1;++d<r;)(u=i[d])!==void 0&&((c=a[u])===void 0&&(c=a[u]=s[d]),o[d]=s[d]-c,l[u]=((t=l[u])!==null&&t!==void 0?t:0)+1);Yd.call(this,o),this.visitMany(e.children.map((u,c)=>{const d=n.typeIds[c],f=a[d],h=l[d];return u.slice(f,Math.min(r,h))}))}}return this}function SRt(e){let t;return e.nullCount>=e.length?Yd.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Yd.call(this,v3(e.offset,e.length,t)):Yd.call(this,pNe(e.values))}function pg(e){return Yd.call(this,e.values.subarray(0,e.length*e.stride))}function b4(e){const{length:t,values:n,valueOffsets:r}=e,i=Po(r[0]),s=Po(r[t]),o=Math.min(s-i,n.byteLength-i);return Yd.call(this,QRe(-i,t+1,r)),Yd.call(this,n.subarray(i,i+o)),this}function YZ(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Yd.call(this,QRe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function $H(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Ni.prototype.visitBool=SRt;Ni.prototype.visitInt=pg;Ni.prototype.visitFloat=pg;Ni.prototype.visitUtf8=b4;Ni.prototype.visitLargeUtf8=b4;Ni.prototype.visitBinary=b4;Ni.prototype.visitLargeBinary=b4;Ni.prototype.visitFixedSizeBinary=pg;Ni.prototype.visitDate=pg;Ni.prototype.visitTimestamp=pg;Ni.prototype.visitTime=pg;Ni.prototype.visitDecimal=pg;Ni.prototype.visitList=YZ;Ni.prototype.visitStruct=$H;Ni.prototype.visitUnion=ERt;Ni.prototype.visitInterval=pg;Ni.prototype.visitDuration=pg;Ni.prototype.visitFixedSizeList=YZ;Ni.prototype.visitMap=YZ;class tOe extends CNe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new p9,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,ev(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return d4(t)?t.then(n=>this.writeAll(n)):f4(t)?JZ(this,t):QZ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof p9?this._sink=t:(this._sink=new p9,t&&BAt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&zAt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!DH(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Il&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof bu&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!DH(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof bu?t instanceof Xkt||this._writeRecordBatch(t):t instanceof Il?this.writeAll(t.batches):aZ(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=hh.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,l=a-s-o;return t.headerType===ms.RecordBatch?this._recordBatchBlocks.push(new dy(a,t.bodyLength,this._position)):t.headerType===ms.DictionaryBatch&&this._dictionaryBlocks.push(new dy(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(l)}_write(t){if(this._started){const n=Jn(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(hh.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(GZ)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Ni.assemble(t),o=new Bu(t.numRows,r,i),a=hh.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Ni.assemble(new cr([t])),l=new Bu(t.length,s,o),u=new Wh(l,n,r),c=hh.from(u,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class KZ extends tOe{static writeAll(t,n){const r=new KZ(n);return d4(t)?t.then(i=>r.writeAll(i)):f4(t)?JZ(r,t):QZ(r,t)}}class XZ extends tOe{static writeAll(t){const n=new XZ;return d4(t)?t.then(r=>n.writeAll(r)):f4(t)?JZ(n,t):QZ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=OH.encode(new OH(t,As.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function QZ(e,t){let n=t;t instanceof Il&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function JZ(e,t){var n,r,i,s,o,a,l;return Kp(this,void 0,void 0,function*(){try{for(n=!0,r=F2(t);i=yield r.next(),s=i.done,!s;n=!0){l=i.value,n=!1;const u=l;e.write(u)}}catch(u){o={error:u}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function TRt(e,t="stream"){return(t==="stream"?KZ:XZ).writeAll(e).toUint8Array(!0)}function ZZ(e,t=1){return(e*t+63&-64||64)/t}function py(e,t,n=e.BYTES_PER_ELEMENT){return new e(ZZ(t,n))}function eee(e){return e instanceof gr?e:new gr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function CRt(e){return new cr([eee(e)])}const tee=new TextEncoder;function ARt(e,t,n){const r=tee.encode(n);return e.set(r,t),r.length}function IRt(e,t,n){return tee.encodeInto(n,e.subarray(t)).written}const kRt=tee.encodeInto?IRt:ARt;function Ipe(e,t){const n=py(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function RRt(e,t){const n=py(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function PRt(e,t){const n=py(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function NRt(e,t){const n=py(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function ORt(e){const t=x3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function DRt(e,t,n){const r=py(Int32Array,t+1),i=py(Uint8Array,3*n);let s=0;return{set(o,a){s+=kRt(i,s,o),r[a+1]=s},data:()=>{const o=ZZ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function MRt(e,t){const n=[],r=py(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,l){const u=String(a);let c=i[u];c===void 0&&(o+=u.length,i[u]=c=++s,n.push(u)),r[l]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:$Rt(e.dictionary,n,o)})}}function $Rt(e,t,n){const r=DRt(e,t.length,n);return t.forEach(r.set),CRt(r.data())}function LRt(e,t){const n=py(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function FRt(e,t,n=!0){let r;switch(e.typeId){case se.Int:r=e.bitWidth<64?Ipe:null;break;case se.Float:r=e.precision>0?Ipe:null;break;case se.Dictionary:r=e.dictionary.typeId===se.Utf8&&e.indices.typeId===se.Int&&e.indices.bitWidth<64?MRt:null;break;case se.Bool:r=RRt;break;case se.Date:r=e.unit?NRt:PRt;break}return r==null?ORt(e):n?LRt(r(e,t),t):r(e,t)}function jRt(e,t){const n=e.length,r=ZZ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),eee({type:t,length:n,buffers:[null,i]})}function nOe(e,t,n,r,i=!0){const s=FRt(r,e,i);return t(n,s.set),eee(s.data())}function nee(e){if(e instanceof hn||e==null)return e;switch(e){case se.Binary:return new kI;case se.Bool:return new RI;case se.DateDay:return new nIt;case se.DateMillisecond:case se.Date:return new rIt;case se.Dictionary:return new cy(new fE,new ly);case se.Float16:return new CPe;case se.Float32:return new yZ;case se.Float64:case se.Float:return new vZ;case se.Int8:return new cZ;case se.Int16:return new dZ;case se.Int32:case se.Int:return new ly;case se.Int64:return new fZ;case se.IntervalDayTime:return new lIt;case se.Interval:case se.IntervalYearMonth:return new uIt;case se.Null:return new Vm;case se.TimeMicrosecond:return new oIt;case se.TimeMillisecond:case se.Time:return new sIt;case se.TimeNanosecond:return new aIt;case se.TimeSecond:return new iIt;case se.Uint8:return new hZ;case se.Uint16:return new pZ;case se.Uint32:return new mZ;case se.Uint64:return new gZ;case se.Utf8:return new fE;default:Cn(`Unsupported type code: ${Hh(e)}. Use a data type constructor instead?`)}}function BRt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function rOe(e,t){const n=LH();return e(t,n.add),n}function LH(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Um(t))++e.dates,BRt(t)&&++e.utcdays;else if(R1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=LH());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=LH())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return nee(zRt(e))}};return e}function zRt(e){const t=e.count-e.nulls;if(t===0)return se.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?se.Float64:n<128?se.Int8:n<32768?se.Int16:se.Int32:n>=2**32?se.Float64:n<256?se.Uint8:n<65536?se.Uint16:se.Uint32}else{if(e.nums===t)return se.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?se.Int64:Cn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?se.Uint64:Cn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return se.Bool;if(e.utcdays===t)return se.DateDay;if(e.dates===t)return se.DateMillisecond;if(e.arrays===t){const n=$r.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new gE(e.minlen,n):new mE(n)}else if(e.structs===t){const n=e.struct_prof;return new ua(Object.keys(n).map(r=>$r.new(r,n[r].type(),!0)))}else{if(e.strings>0)return se.Dictionary;Cn("Type inference failure")}}}}function URt(e,t,n,r,i,s=!0){if(i=nee(i),!i){const o=rOe(r,t);s=o.nulls>0,i=o.type()}return nOe(n,r,t,i,s)}function VRt(e,t,n,r,i,s=!0){i=nee(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),l=HRt(o);if(l&&a&&kpe(l.type,i))return l;const u=o.data;if(vR(u)){const c=qRt(u);if(a&&c&&kpe(c,i))return jRt(u,c);i=i||c,s=!1}if(!i){const c=rOe(r,o);s=c.nulls>0,i=c.type()}return nOe(n,r,o,i,s)}function HRt(e){return e instanceof cr?e:e.vector instanceof cr?e.vector:null}function qRt(e){const n={Float32Array:yZ,Float64Array:vZ,Int8Array:cZ,Int16Array:dZ,Int32Array:ly,Uint8Array:hZ,Uint16Array:pZ,Uint32Array:mZ,BigInt64Array:fZ,BigUint64Array:gZ}[e.constructor.name];return n?new n:null}function kpe(e,t){return!e||!t?!0:e.compareTo(t)}function WRt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function GRt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&R1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const YRt=()=>Cn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function KRt(){try{return Il}catch{YRt()}}function iOe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=XRt(e,t),a={};i.forEach(u=>{const c=r(e,u,s,o,n[u]);c.length!==s&&Cn("Column length mismatch"),a[u]=c});const l=KRt();return new l(a)}function XRt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=mi(n)?n(e):ur(n)?n:null;if(ur(e))return{dataFrom:URt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:WRt(e,r,i)};if(QRt(e))return{dataFrom:VRt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:GRt(e,r,i)};Cn("Unsupported input data type")}function QRt(e){return e&&mi(e.reify)}function JRt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return TRt(iOe(e,r),n)}function ZRt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function ePt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(l=>{if(++n,l==null){++r;return}const u=typeof l;if(u==="object"&&Um(l))++i,ZRt(l)&&++s;else if(u==="number"&&(++o,l===l&&(l|0)!==l)){const c=l+"",d=c.indexOf(".");if(d>=0){const f=c.indexOf("e"),h=f>0?f:c.length;a=Math.max(a,h-d-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function _4(e,t){return mi(t)?t(e):t||e.columnNames()}function sOe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const l=ePt(tPt(e,a),n);o[a]=i[a]||l.align,s[a]=r[a]||l.format}),{align:o,format:s}}function tPt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function ree(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let l=0;l<o;++l){const u=t[l];i.cell(s[t[l]].get(a),u,l)}},!0,n,r)}function nPt(e,t={}){const n=_4(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=u=>u==null?"":Um(u)?l4(u,!0):s.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u,a=n.map(o);let l="";return ree(e,n,t.limit||1/0,t.offset,{row(){l+=a.join(i)+`
`},cell(u,c,d){a[d]=o(r[c]?r[c](u):u)}}),l+a.join(i)}function oOe(e,t={}){if(mi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Um(e))return t.utc?l4(e):ERe(e);{const r=JSON.stringify(e,(s,o)=>vR(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+"…"+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function w4(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function rPt(e,t={}){const n=_4(e,t.columns),{align:r,format:i}=sOe(e,n,t),s=iPt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",l=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),u=(m,g)=>l(oOe(m,g)),c=o?(m,g)=>m==null?o(m):u(m,g):u;let d=-1,f=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",_=s[m]&&s[m](g,f,d)||"",w=(v?`text-align: ${v};`+(_?" ":""):"")+_;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",d)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return ree(e,n,t.limit,t.offset,{row(m){d=m,p+=(++f?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function iPt(e){return w4(e.style,t=>mi(t)?t:()=>t)}function sPt(e,t=!0,n=!1){return e===void 0||e?t:n}const oPt=e=>Um(e)?l4(e,!0):e;function aPt(e,t={}){const n=sPt(t.schema),r=t.format||{},i=_4(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const l=e.column(o),u=r[o]||oPt;let c=-1;e.scan(d=>{const f=l.get(d);s+=(++c?",":"")+JSON.stringify(u(f))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function lPt(e,t={}){const n=_4(e,t.columns),{align:r,format:i}=sOe(e,n,t),s=l=>l==="c"?":-:":l==="r"?"-:":":-",o=l=>l.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(l=>s(r[l])).join("|")+"|";return ree(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(l,u){a+=o(oOe(l,i[u]))+"|"}}),a+`
`}function aOe(e,t){for(const[n,r]of u4(t))e.set(n,r);return e}function uPt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function qm(e,t,n=new Map){return t=Za(t)?e.columnName(t):t,Mo(t)?n.set(t,t):ur(t)?t.forEach(r=>qm(e,r,n)):mi(t)?qm(e,t(e),n):va(t)?aOe(n,t):Cn(`Invalid column selection: ${Hh(t)}`),n}function x4(e,t){return e.toObject=t,e}function lOe(e){return ur(e)?e.map(lOe):e&&e.toObject?e.toObject():e}function yE(){return x4(e=>e.columnNames(),()=>({all:[]}))}function uOe(...e){return e=e.flat(),x4(t=>{const n=qm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:lOe(e)}))}function cPt(e,t){return x4(n=>{let r=Za(e)?e:n.columnIndex(e),i=Za(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function dPt(e){return Mo(e)&&(e=RegExp(uPt(e))),x4(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function fPt(e){return vR(e.data)?e.data.constructor:Array}class ph extends j2t{static from(t,n){return new ph(U2t(t,n),n)}static new(t,n){if(t instanceof ph)return t;const r={},i=[];for(const[s,o]of u4(t))r[s]=o,i.push(s);return new ph(r,n||i)}constructor(t,n,r,i,s,o){w4(t,z2t,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new ph(t||this._data,n||(t?null:this._names),o,i!==void 0?i:yAt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Ju(r).groupby(r.groups());return t.forEach(s=>{s=ph.new(s),s.numRows()!==n&&Cn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):Cn(`Unrecognized column: ${t}`)}object(t=0){return Rpe(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=qm(this,t.columns||yE()),o=YRe(s),a=[];if(this.scan((l,u)=>a.push(o(l,u)),!0,r,i),n&&this.isGrouped()){const l=[];return this.scan(u=>l.push(u),!0,r,i),bAt(this,l,a,n)}return a}*[Symbol.iterator](){const t=Rpe(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?l=>t.forEach(l):l=>this.scan(l,!0),a=r.length;i={};for(let l=0;l<a;++l){const u=r[l],c=this.column(u),d=i[u]=new(fPt(c))(n);let f=-1;o(h=>d[++f]=c.get(h))}this.isGrouped()&&(s=vAt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return iOe(this,t)}toArrowBuffer(t){return JRt(this,t)}toCSV(t){return nPt(this,t)}toHTML(t){return rPt(this,t)}toJSON(t){return aPt(this,t)}toMarkdown(t){return lPt(this,t)}}function Rpe(e){let t=e._builder;if(!t){const n=YRe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class hPt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Zn(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=pPt[e.type];s&&s(e,t,n)}const GN=(e,t,n)=>{Zn(e.argument,t,n,e)},y9=(e,t,n)=>{Zn(e.left,t,n,e),Zn(e.right,t,n,e)},Ppe=(e,t,n)=>{Zn(e.test,t,n,e),Zn(e.consequent,t,n,e),e.alternate&&Zn(e.alternate,t,n,e)},v9=(e,t,n)=>{Qf(e.params,t,n,e),Zn(e.body,t,n,e)},Npe=(e,t,n)=>{Zn(e.callee,t,n,e),Qf(e.arguments,t,n,e)},Qf=(e,t,n,r)=>{e.forEach(i=>Zn(i,t,n,r))},pPt={TemplateLiteral:(e,t,n)=>{Qf(e.expressions,t,n,e),Qf(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Zn(e.object,t,n,e),Zn(e.property,t,n,e)},CallExpression:Npe,NewExpression:Npe,ArrayExpression:(e,t,n)=>{Qf(e.elements,t,n,e)},AssignmentExpression:y9,AwaitExpression:GN,BinaryExpression:y9,LogicalExpression:y9,UnaryExpression:GN,UpdateExpression:GN,ConditionalExpression:Ppe,ObjectExpression:(e,t,n)=>{Qf(e.properties,t,n,e)},Property:(e,t,n)=>{Zn(e.key,t,n,e),Zn(e.value,t,n,e)},ArrowFunctionExpression:v9,FunctionExpression:v9,FunctionDeclaration:v9,VariableDeclaration:(e,t,n)=>{Qf(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Zn(e.id,t,n,e),Zn(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Zn(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Qf(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Zn(e.expression,t,n,e)},IfStatement:Ppe,ForStatement:(e,t,n)=>{Zn(e.init,t,n,e),Zn(e.test,t,n,e),Zn(e.update,t,n,e),Zn(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Zn(e.test,t,n,e),Zn(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Zn(e.body,t,n,e),Zn(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Zn(e.discriminant,t,n,e),Qf(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Zn(e.test,t,n,e),Qf(e.consequent,t,n,e)},ReturnStatement:GN,Program:(e,t,n)=>{Zn(e.body[0],t,n,e)}};function cOe(e){delete e.start,delete e.end,delete e.optional}function Ope(e){cOe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function mPt(e){return Zn(e,null,{Column:Ope,Constant:Ope,Default:cOe}),e}function Is(e,t){return t&&t.type===e}function gPt(e){return Is(xAt,e)||Is(wAt,e)}function yPt(e){return mi(e)?e:()=>e}const vPt="Escaped functions are not valid as rollup or pivot values.";function bPt(e,t,n){e.aggronly&&Cn(vPt);const r="(row,data)=>fn("+GRe(e.table.columnNames())+",$)";return{escape:oZ.escape(r,yPt(t.expr),n)}}var _Pt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],dOe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],wPt="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",fOe="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",b9={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},_9="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",xPt={5:_9,"5module":_9+" export import",6:_9+" const class extends export import super"},EPt=/^in(stanceof)?$/,SPt=new RegExp("["+fOe+"]"),TPt=new RegExp("["+fOe+wPt+"]");function FH(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Wm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&SPt.test(String.fromCharCode(e)):t===!1?!1:FH(e,dOe)}function vE(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&TPt.test(String.fromCharCode(e)):t===!1?!1:FH(e,dOe)||FH(e,_Pt)}var nr=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function nc(e,t){return new nr(e,{beforeExpr:!0,binop:t})}var rc={beforeExpr:!0},bl={startsExpr:!0},iee={};function qn(e,t){return t===void 0&&(t={}),t.keyword=e,iee[e]=new nr(e,t)}var Y={num:new nr("num",bl),regexp:new nr("regexp",bl),string:new nr("string",bl),name:new nr("name",bl),privateId:new nr("privateId",bl),eof:new nr("eof"),bracketL:new nr("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new nr("]"),braceL:new nr("{",{beforeExpr:!0,startsExpr:!0}),braceR:new nr("}"),parenL:new nr("(",{beforeExpr:!0,startsExpr:!0}),parenR:new nr(")"),comma:new nr(",",rc),semi:new nr(";",rc),colon:new nr(":",rc),dot:new nr("."),question:new nr("?",rc),questionDot:new nr("?."),arrow:new nr("=>",rc),template:new nr("template"),invalidTemplate:new nr("invalidTemplate"),ellipsis:new nr("...",rc),backQuote:new nr("`",bl),dollarBraceL:new nr("${",{beforeExpr:!0,startsExpr:!0}),eq:new nr("=",{beforeExpr:!0,isAssign:!0}),assign:new nr("_=",{beforeExpr:!0,isAssign:!0}),incDec:new nr("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new nr("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:nc("||",1),logicalAND:nc("&&",2),bitwiseOR:nc("|",3),bitwiseXOR:nc("^",4),bitwiseAND:nc("&",5),equality:nc("==/!=/===/!==",6),relational:nc("</>/<=/>=",7),bitShift:nc("<</>>/>>>",8),plusMin:new nr("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:nc("%",10),star:nc("*",10),slash:nc("/",10),starstar:new nr("**",{beforeExpr:!0}),coalesce:nc("??",1),_break:qn("break"),_case:qn("case",rc),_catch:qn("catch"),_continue:qn("continue"),_debugger:qn("debugger"),_default:qn("default",rc),_do:qn("do",{isLoop:!0,beforeExpr:!0}),_else:qn("else",rc),_finally:qn("finally"),_for:qn("for",{isLoop:!0}),_function:qn("function",bl),_if:qn("if"),_return:qn("return",rc),_switch:qn("switch"),_throw:qn("throw",rc),_try:qn("try"),_var:qn("var"),_const:qn("const"),_while:qn("while",{isLoop:!0}),_with:qn("with"),_new:qn("new",{beforeExpr:!0,startsExpr:!0}),_this:qn("this",bl),_super:qn("super",bl),_class:qn("class",bl),_extends:qn("extends",rc),_export:qn("export"),_import:qn("import",bl),_null:qn("null",bl),_true:qn("true",bl),_false:qn("false",bl),_in:qn("in",{beforeExpr:!0,binop:7}),_instanceof:qn("instanceof",{beforeExpr:!0,binop:7}),_typeof:qn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:qn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:qn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},td=/\r\n?|\n|\u2028|\u2029/,CPt=new RegExp(td.source,"g");function FS(e){return e===10||e===13||e===8232||e===8233}function hOe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(FS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var pOe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,pc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,mOe=Object.prototype,APt=mOe.hasOwnProperty,IPt=mOe.toString,TR=Object.hasOwn||function(e,t){return APt.call(e,t)},Dpe=Array.isArray||function(e){return IPt.call(e)==="[object Array]"},Mpe=Object.create(null);function y0(e){return Mpe[e]||(Mpe[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function my(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var kPt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,OI=function(t,n){this.line=t,this.column=n};OI.prototype.offset=function(t){return new OI(this.line,this.column+t)};var E4=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function gOe(e,t){for(var n=1,r=0;;){var i=hOe(e,r,t);if(i<0)return new OI(n,t-r);++n,r=i}}var jH={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},$pe=!1;function RPt(e){var t={};for(var n in jH)t[n]=e&&TR(e,n)?e[n]:jH[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!$pe&&typeof console=="object"&&console.warn&&($pe=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Dpe(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Dpe(t.onComment)&&(t.onComment=PPt(t,t.onComment)),t}function PPt(e,t){return function(n,r,i,s,o,a){var l={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(l.loc=new E4(this,o,a)),e.ranges&&(l.range=[i,s]),t.push(l)}}var DI=1,jS=2,see=4,yOe=8,vOe=16,bOe=32,oee=64,_Oe=128,CR=256,aee=DI|jS|CR;function lee(e,t){return jS|(e?see:0)|(t?yOe:0)}var E3=0,uee=1,mg=2,wOe=3,xOe=4,EOe=5,Fs=function(t,n,r){this.options=t=RPt(t),this.sourceFile=t.sourceFile,this.keywords=y0(xPt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=b9[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=y0(i);var s=(i?i+" ":"")+b9.strict;this.reservedWordsStrict=y0(s),this.reservedWordsStrictBind=y0(s+" "+b9.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(td).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=Y.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(DI),this.regexpState=null,this.privateNameStack=[]},dp={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Fs.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};dp.inFunction.get=function(){return(this.currentVarScope().flags&jS)>0};dp.inGenerator.get=function(){return(this.currentVarScope().flags&yOe)>0&&!this.currentVarScope().inClassFieldInit};dp.inAsync.get=function(){return(this.currentVarScope().flags&see)>0&&!this.currentVarScope().inClassFieldInit};dp.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&CR)return!1;if(t.flags&jS)return(t.flags&see)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};dp.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&oee)>0||n||this.options.allowSuperOutsideMethod};dp.allowDirectSuper.get=function(){return(this.currentThisScope().flags&_Oe)>0};dp.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};dp.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(jS|CR))>0||n};dp.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&CR)>0};Fs.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Fs.parse=function(t,n){return new this(n,t).parse()};Fs.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Fs.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Fs.prototype,dp);var ul=Fs.prototype,NPt=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;ul.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){pc.lastIndex=e,e+=pc.exec(this.input)[0].length;var t=NPt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){pc.lastIndex=e+t[0].length;var n=pc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||td.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,pc.lastIndex=e,e+=pc.exec(this.input)[0].length,this.input[e]===";"&&e++}};ul.eat=function(e){return this.type===e?(this.next(),!0):!1};ul.isContextual=function(e){return this.type===Y.name&&this.value===e&&!this.containsEsc};ul.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};ul.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};ul.canInsertSemicolon=function(){return this.type===Y.eof||this.type===Y.braceR||td.test(this.input.slice(this.lastTokEnd,this.start))};ul.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};ul.semicolon=function(){!this.eat(Y.semi)&&!this.insertSemicolon()&&this.unexpected()};ul.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};ul.expect=function(e){this.eat(e)||this.unexpected()};ul.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var S4=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};ul.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};ul.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};ul.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};ul.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Dt=Fs.prototype;Dt.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==Y.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var cee={kind:"loop"},OPt={kind:"switch"};Dt.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;pc.lastIndex=this.pos;var t=pc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Wm(r,!0)){for(var i=n+1;vE(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!EPt.test(s))return!0}return!1};Dt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;pc.lastIndex=this.pos;var e=pc.exec(this.input),t=this.pos+e[0].length,n;return!td.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(vE(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Dt.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=Y._var,s="let"),r){case Y._break:case Y._continue:return this.parseBreakContinueStatement(i,r.keyword);case Y._debugger:return this.parseDebuggerStatement(i);case Y._do:return this.parseDoStatement(i);case Y._for:return this.parseForStatement(i);case Y._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case Y._class:return e&&this.unexpected(),this.parseClass(i,!0);case Y._if:return this.parseIfStatement(i);case Y._return:return this.parseReturnStatement(i);case Y._switch:return this.parseSwitchStatement(i);case Y._throw:return this.parseThrowStatement(i);case Y._try:return this.parseTryStatement(i);case Y._const:case Y._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case Y._while:return this.parseWhileStatement(i);case Y._with:return this.parseWithStatement(i);case Y.braceL:return this.parseBlock(!0,i);case Y.semi:return this.parseEmptyStatement(i);case Y._export:case Y._import:if(this.options.ecmaVersion>10&&r===Y._import){pc.lastIndex=this.pos;var o=pc.exec(this.input),a=this.pos+o[0].length,l=this.input.charCodeAt(a);if(l===40||l===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===Y._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var u=this.value,c=this.parseExpression();return r===Y.name&&c.type==="Identifier"&&this.eat(Y.colon)?this.parseLabeledStatement(i,u,c,e):this.parseExpressionStatement(i,c)}};Dt.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(Y.semi)||this.insertSemicolon()?e.label=null:this.type!==Y.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Dt.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Dt.parseDoStatement=function(e){return this.next(),this.labels.push(cee),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(Y._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(Y.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Dt.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(cee),this.enterScope(0),this.expect(Y.parenL),this.type===Y.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===Y._var||this.type===Y._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===Y._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===Y._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=this.containsEsc,l=new S4,u=this.start,c=t>-1?this.parseExprSubscripts(l,"await"):this.parseExpression(!0,l);return this.type===Y._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===Y._in&&this.unexpected(t),e.await=!0):o&&this.options.ecmaVersion>=8&&(c.start===u&&!a&&c.type==="Identifier"&&c.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),s&&o&&this.raise(c.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(c,!1,l),this.checkLValPattern(c),this.parseForIn(e,c)):(this.checkExpressionErrors(l,!0),t>-1&&this.unexpected(t),this.parseFor(e,c))};Dt.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,fA|(n?0:BH),!1,t)};Dt.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(Y._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Dt.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(Y.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Dt.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(Y.braceL),this.labels.push(OPt),this.enterScope(0);for(var t,n=!1;this.type!==Y.braceR;)if(this.type===Y._case||this.type===Y._default){var r=this.type===Y._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(Y.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Dt.parseThrowStatement=function(e){return this.next(),td.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var DPt=[];Dt.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?bOe:0),this.checkLValPattern(e,t?xOe:mg),this.expect(Y.parenR),e};Dt.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===Y._catch){var t=this.startNode();this.next(),this.eat(Y.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(Y._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Dt.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Dt.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(cee),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Dt.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Dt.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Dt.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===Y._switch?"switch":null,l=this.labels.length-1;l>=0;l--){var u=this.labels[l];if(u.statementStart===e.start)u.statementStart=this.start,u.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Dt.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Dt.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(Y.braceL),e&&this.enterScope(0);this.type!==Y.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Dt.parseFor=function(e,t){return e.init=t,this.expect(Y.semi),e.test=this.type===Y.semi?null:this.parseExpression(),this.expect(Y.semi),e.update=this.type===Y.parenR?null:this.parseExpression(),this.expect(Y.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Dt.parseForIn=function(e,t){var n=this.type===Y._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(Y.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Dt.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(Y.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===Y._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===Y._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(Y.comma))break}return e};Dt.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?uee:mg,!1)};var fA=1,BH=2,SOe=4;Dt.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===Y.star&&t&BH&&this.unexpected(),e.generator=this.eat(Y.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&fA&&(e.id=t&SOe&&this.type!==Y.name?null:this.parseIdent(),e.id&&!(t&BH)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?uee:mg:wOe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(lee(e.async,e.generator)),t&fA||(e.id=this.type===Y.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&fA?"FunctionDeclaration":"FunctionExpression")};Dt.parseFunctionParams=function(e){this.expect(Y.parenL),e.params=this.parseBindingList(Y.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Dt.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(Y.braceL);this.type!==Y.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&MPt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Dt.parseClassElement=function(e){if(this.eat(Y.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(Y.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===Y.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===Y.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(Y.star)&&(i=!0),!r&&!s&&!i){var l=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=l:r=l)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===Y.parenL||o!=="method"||i||s){var u=!n.static&&S3(n,"constructor"),c=u&&e;u&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=u?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Dt.isClassElementNameStart=function(){return this.type===Y.name||this.type===Y.privateId||this.type===Y.num||this.type===Y.string||this.type===Y.bracketL||this.type.keyword};Dt.parseClassElementName=function(e){this.type===Y.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Dt.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&S3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Dt.parseClassField=function(e){if(S3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&S3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(Y.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Dt.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(CR|oee);this.type!==Y.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Dt.parseClassId=function(e,t){this.type===Y.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,mg,!1)):(t===!0&&this.unexpected(),e.id=null)};Dt.parseClassSuper=function(e){e.superClass=this.eat(Y._extends)?this.parseExprSubscripts(null,!1):null};Dt.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Dt.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];TR(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function MPt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function S3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Dt.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==Y.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Dt.parseExport=function(e,t){if(this.next(),this.eat(Y.star))return this.parseExportAllDeclaration(e,t);if(this.eat(Y._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==Y.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Dt.parseExportDeclaration=function(e){return this.parseStatement(null)};Dt.parseExportDefaultDeclaration=function(){var e;if(this.type===Y._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,fA|SOe,!1,e)}else if(this.type===Y._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Dt.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),TR(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Dt.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var l=a[o];l&&this.checkPatternExport(e,l)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Dt.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Dt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Dt.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Dt.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(Y.braceL);!this.eat(Y.braceR);){if(n)n=!1;else if(this.expect(Y.comma),this.afterTrailingComma(Y.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Dt.parseImport=function(e){return this.next(),this.type===Y.string?(e.specifiers=DPt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===Y.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Dt.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,mg),this.finishNode(e,"ImportSpecifier")};Dt.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,mg),this.finishNode(e,"ImportDefaultSpecifier")};Dt.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,mg),this.finishNode(e,"ImportNamespaceSpecifier")};Dt.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===Y.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(Y.comma)))return e;if(this.type===Y.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(Y.braceL);!this.eat(Y.braceR);){if(t)t=!1;else if(this.expect(Y.comma),this.afterTrailingComma(Y.braceR))break;e.push(this.parseImportSpecifier())}return e};Dt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===Y.string){var e=this.parseLiteral(this.value);return kPt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Dt.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Dt.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var nd=Fs.prototype;nd.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};nd.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};nd.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};nd.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==Y.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};nd.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case Y.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(Y.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case Y.braceL:return this.parseObj(!0)}return this.parseIdent()};nd.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(Y.comma),t&&this.type===Y.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===Y.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===Y.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};nd.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};nd.parseBindingListItem=function(e){return e};nd.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(Y.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};nd.checkLValSimple=function(e,t,n){t===void 0&&(t=E3);var r=t!==E3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===mg&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(TR(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==EOe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};nd.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=E3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var l=a[o];l&&this.checkLValInnerPattern(l,t,n)}break;default:this.checkLValSimple(e,t,n)}};nd.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=E3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var pd=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},wi={b_stat:new pd("{",!1),b_expr:new pd("{",!0),b_tmpl:new pd("${",!1),p_stat:new pd("(",!1),p_expr:new pd("(",!0),q_tmpl:new pd("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new pd("function",!1),f_expr:new pd("function",!0),f_expr_gen:new pd("function",!0,!1,null,!0),f_gen:new pd("function",!1,!1,null,!0)},BS=Fs.prototype;BS.initialContext=function(){return[wi.b_stat]};BS.curContext=function(){return this.context[this.context.length-1]};BS.braceIsBlock=function(e){var t=this.curContext();return t===wi.f_expr||t===wi.f_stat?!0:e===Y.colon&&(t===wi.b_stat||t===wi.b_expr)?!t.isExpr:e===Y._return||e===Y.name&&this.exprAllowed?td.test(this.input.slice(this.lastTokEnd,this.start)):e===Y._else||e===Y.semi||e===Y.eof||e===Y.parenR||e===Y.arrow?!0:e===Y.braceL?t===wi.b_stat:e===Y._var||e===Y._const||e===Y.name?!1:!this.exprAllowed};BS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};BS.updateContext=function(e){var t,n=this.type;n.keyword&&e===Y.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};BS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};Y.parenR.updateContext=Y.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===wi.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};Y.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?wi.b_stat:wi.b_expr),this.exprAllowed=!0};Y.dollarBraceL.updateContext=function(){this.context.push(wi.b_tmpl),this.exprAllowed=!0};Y.parenL.updateContext=function(e){var t=e===Y._if||e===Y._for||e===Y._with||e===Y._while;this.context.push(t?wi.p_stat:wi.p_expr),this.exprAllowed=!0};Y.incDec.updateContext=function(){};Y._function.updateContext=Y._class.updateContext=function(e){e.beforeExpr&&e!==Y._else&&!(e===Y.semi&&this.curContext()!==wi.p_stat)&&!(e===Y._return&&td.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===Y.colon||e===Y.braceL)&&this.curContext()===wi.b_stat)?this.context.push(wi.f_expr):this.context.push(wi.f_stat),this.exprAllowed=!1};Y.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};Y.backQuote.updateContext=function(){this.curContext()===wi.q_tmpl?this.context.pop():this.context.push(wi.q_tmpl),this.exprAllowed=!1};Y.star.updateContext=function(e){if(e===Y._function){var t=this.context.length-1;this.context[t]===wi.f_expr?this.context[t]=wi.f_expr_gen:this.context[t]=wi.f_gen}this.exprAllowed=!0};Y.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==Y.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var dn=Fs.prototype;dn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};dn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===Y.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(Y.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};dn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new S4,r=!0);var a=this.start,l=this.startLoc;(this.type===Y.parenL||this.type===Y.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,a,l)),this.type.isAssign){var c=this.startNodeAt(a,l);return c.operator=this.value,this.type===Y.eq&&(u=this.toAssignable(u,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.start&&(t.shorthandAssign=-1),this.type===Y.eq?this.checkLValPattern(u):this.checkLValSimple(u),c.left=u,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),u};dn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(Y.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(Y.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};dn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};dn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==Y._in)&&s>r){var o=this.type===Y.logicalOR||this.type===Y.logicalAND,a=this.type===Y.coalesce;a&&(s=Y.logicalAND.binop);var l=this.value;this.next();var u=this.start,c=this.startLoc,d=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),u,c,s,i),f=this.buildBinary(t,n,e,d,l,o||a);return(o&&this.type===Y.coalesce||a&&(this.type===Y.logicalOR||this.type===Y.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(f,t,n,r,i)}return e};dn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};dn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),l=this.type===Y.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,l,r),this.checkExpressionErrors(e,!0),l?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&TOe(a.argument)?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&zH(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,l?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===Y.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==Y._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(i,s);u.operator=this.value,u.prefix=!1,u.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(u,"UpdateExpression")}}if(!n&&this.eat(Y.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function TOe(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&TOe(e.expression)}function zH(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&zH(e.expression)||e.type==="ParenthesizedExpression"&&zH(e.expression)}dn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};dn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var l=this.startNodeAt(t,n);l.expression=a,a=this.finishNode(l,"ChainExpression")}return a}e=a}};dn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(Y.arrow)};dn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};dn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,l=a&&this.eat(Y.questionDot);r&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(Y.bracketL);if(u||l&&this.type!==Y.parenL&&this.type!==Y.backQuote||this.eat(Y.dot)){var c=this.startNodeAt(t,n);c.object=e,u?(c.property=this.parseExpression(),this.expect(Y.bracketR)):this.type===Y.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!u,a&&(c.optional=l),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(Y.parenL)){var d=new S4,f=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(Y.parenR,this.options.ecmaVersion>=8,!1,d);if(i&&!l&&this.shouldParseAsyncArrow())return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=f,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(d,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=l),e=this.finishNode(g,"CallExpression")}else if(this.type===Y.backQuote){(l||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};dn.parseExprAtom=function(e,t,n){this.type===Y.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case Y._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===Y.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==Y.dot&&this.type!==Y.bracketL&&this.type!==Y.parenL&&this.unexpected(),this.finishNode(r,"Super");case Y._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case Y.name:var s=this.start,o=this.startLoc,a=this.containsEsc,l=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&l.name==="async"&&!this.canInsertSemicolon()&&this.eat(Y._function))return this.overrideContext(wi.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(Y.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[l],!1,t);if(this.options.ecmaVersion>=8&&l.name==="async"&&this.type===Y.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return l=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(Y.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[l],!0,t)}return l;case Y.regexp:var u=this.value;return r=this.parseLiteral(u.value),r.regex={pattern:u.pattern,flags:u.flags},r;case Y.num:case Y.string:return this.parseLiteral(this.value);case Y._null:case Y._true:case Y._false:return r=this.startNode(),r.value=this.type===Y._null?null:this.type===Y._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case Y.parenL:var c=this.start,d=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(d)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),d;case Y.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(Y.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case Y.braceL:return this.overrideContext(wi.b_expr),this.parseObj(!1,e);case Y._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case Y._class:return this.parseClass(this.startNode(),!1);case Y._new:return this.parseNew();case Y.backQuote:return this.parseTemplate();case Y._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};dn.parseExprAtomDefault=function(){this.unexpected()};dn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===Y.parenL&&!e)return this.parseDynamicImport(t);if(this.type===Y.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};dn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(Y.parenR)){var t=this.start;this.eat(Y.comma)&&this.eat(Y.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};dn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};dn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};dn.parseParenExpression=function(){this.expect(Y.parenL);var e=this.parseExpression();return this.expect(Y.parenR),e};dn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};dn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,l=[],u=!0,c=!1,d=new S4,f=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==Y.parenR;)if(u?u=!1:this.expect(Y.comma),s&&this.afterTrailingComma(Y.parenR,!0)){c=!0;break}else if(this.type===Y.ellipsis){p=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===Y.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else l.push(this.parseMaybeAssign(!1,d,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(Y.parenR),e&&this.shouldParseArrow(l)&&this.eat(Y.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=h,this.parseParenArrowList(n,r,l,t);(!l.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(d,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=h||this.awaitPos,l.length>1?(i=this.startNodeAt(o,a),i.expressions=l,this.finishNodeAt(i,"SequenceExpression",m,g)):i=l[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};dn.parseParenItem=function(e){return e};dn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var $Pt=[];dn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===Y.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(Y.parenL)?e.arguments=this.parseExprList(Y.parenR,this.options.ecmaVersion>=8,!1):e.arguments=$Pt,this.finishNode(e,"NewExpression")};dn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===Y.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===Y.backQuote,this.finishNode(n,"TemplateElement")};dn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===Y.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Y.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(Y.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};dn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===Y.name||this.type===Y.num||this.type===Y.string||this.type===Y.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===Y.star)&&!td.test(this.input.slice(this.lastTokEnd,this.start))};dn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(Y.braceR);){if(r)r=!1;else if(this.expect(Y.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(Y.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};dn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(Y.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===Y.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===Y.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(Y.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(Y.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};dn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};dn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===Y.colon&&this.unexpected(),this.eat(Y.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===Y.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==Y.comma&&this.type!==Y.braceR&&this.type!==Y.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===Y.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};dn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(Y.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(Y.bracketR),e.key;e.computed=!1}return e.key=this.type===Y.num||this.type===Y.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};dn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};dn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(lee(t,r.generator)|oee|(n?_Oe:0)),this.expect(Y.parenL),r.params=this.parseBindingList(Y.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};dn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(lee(n,!1)|vOe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};dn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==Y.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var l=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,EOe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=l}this.exitScope()};dn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};dn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,uee,t?null:n)}};dn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(Y.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===Y.comma?o=null:this.type===Y.ellipsis?(o=this.parseSpread(r),r&&this.type===Y.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};dn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};dn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};dn.parseIdentNode=function(){var e=this.startNode();return this.type===Y.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=Y.name):this.unexpected(),e};dn.parsePrivateIdent=function(){var e=this.startNode();return this.type===Y.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};dn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===Y.semi||this.canInsertSemicolon()||this.type!==Y.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(Y.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};dn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var T3=Fs.prototype;T3.raise=function(e,t){var n=gOe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};T3.raiseRecoverable=T3.raise;T3.curPosition=function(){if(this.options.locations)return new OI(this.curLine,this.pos-this.lineStart)};var nv=Fs.prototype,LPt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};nv.enterScope=function(e){this.scopeStack.push(new LPt(e))};nv.exitScope=function(){this.scopeStack.pop()};nv.treatFunctionsAsVarInScope=function(e){return e.flags&jS||!this.inModule&&e.flags&DI};nv.declareName=function(e,t,n){var r=!1;if(t===mg){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&DI&&delete this.undefinedExports[e]}else if(t===xOe){var s=this.currentScope();s.lexical.push(e)}else if(t===wOe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var l=this.scopeStack[a];if(l.lexical.indexOf(e)>-1&&!(l.flags&bOe&&l.lexical[0]===e)||!this.treatFunctionsAsVarInScope(l)&&l.functions.indexOf(e)>-1){r=!0;break}if(l.var.push(e),this.inModule&&l.flags&DI&&delete this.undefinedExports[e],l.flags&aee)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};nv.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};nv.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};nv.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&aee)return t}};nv.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&aee&&!(t.flags&vOe))return t}};var T4=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new E4(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},AR=Fs.prototype;AR.startNode=function(){return new T4(this,this.start,this.startLoc)};AR.startNodeAt=function(e,t){return new T4(this,e,t)};function COe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}AR.finishNode=function(e,t){return COe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};AR.finishNodeAt=function(e,t,n,r){return COe.call(this,e,t,n,r)};AR.copyNode=function(e){var t=new T4(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var AOe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",IOe=AOe+" Extended_Pictographic",kOe=IOe,ROe=kOe+" EBase EComp EMod EPres ExtPict",POe=ROe,FPt=POe,jPt={9:AOe,10:IOe,11:kOe,12:ROe,13:POe,14:FPt},BPt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",zPt={9:"",10:"",11:"",12:"",13:"",14:BPt},Lpe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",NOe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",OOe=NOe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",DOe=OOe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",MOe=DOe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",$Oe=MOe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",UPt=$Oe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",VPt={9:NOe,10:OOe,11:DOe,12:MOe,13:$Oe,14:UPt},LOe={};function HPt(e){var t=LOe[e]={binary:y0(jPt[e]+" "+Lpe),binaryOfStrings:y0(zPt[e]),nonBinary:{General_Category:y0(Lpe),Script:y0(VPt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var w9=0,Fpe=[9,10,11,12,13,14];w9<Fpe.length;w9+=1){var qPt=Fpe[w9];HPt(qPt)}var Ct=Fs.prototype,C3=function(t,n){this.parent=t,this.base=n||this};C3.prototype.separatedFrom=function(t){for(var n=this;n;n=n.parent)for(var r=t;r;r=r.parent)if(n.base===r.base&&n!==r)return!0;return!1};C3.prototype.sibling=function(){return new C3(this.parent,this.base)};var fp=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=LOe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};fp.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};fp.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};fp.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};fp.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};fp.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};fp.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};fp.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};fp.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};fp.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Ct.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};function WPt(e){for(var t in e)return!0;return!1}Ct.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&WPt(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))};Ct.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames[r]||e.raise("Invalid named capture referenced")}};Ct.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new C3(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Ct.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Ct.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Ct.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Ct.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Ct.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Ct.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Ct.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Ct.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Ct.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Ct.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Ct.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Ct.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Ct.regexp_eatSyntaxCharacter=function(e){var t=e.current();return FOe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function FOe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Ct.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!FOe(n);)e.advance();return e.pos!==t};Ct.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Ct.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,n=e.groupNames[e.lastStringValue];if(n)if(t)for(var r=0,i=n;r<i.length;r+=1){var s=i[r];s.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");t?(n||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}};Ct.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Ct.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=my(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=my(e.lastIntValue);return!0}return!1};Ct.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),GPt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function GPt(e){return Wm(e,!0)||e===36||e===95}Ct.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),YPt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function YPt(e){return vE(e,!0)||e===36||e===95||e===8204||e===8205}Ct.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Ct.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Ct.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Ct.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Ct.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Ct.regexp_eatZero=function(e){return e.current()===48&&!C4(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Ct.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Ct.regexp_eatControlLetter=function(e){var t=e.current();return jOe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function jOe(e){return e>=65&&e<=90||e>=97&&e<=122}Ct.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&KPt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function KPt(e){return e>=0&&e<=1114111}Ct.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Ct.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var BOe=0,Gm=1,vc=2;Ct.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(XPt(t))return e.lastIntValue=-1,e.advance(),Gm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===vc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return BOe};function XPt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Ct.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Gm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return BOe};Ct.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){TR(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Ct.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Gm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return vc;e.raise("Invalid property name")};Ct.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";zOe(t=e.current());)e.lastStringValue+=my(t),e.advance();return e.lastStringValue!==""};function zOe(e){return jOe(e)||e===95}Ct.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";QPt(t=e.current());)e.lastStringValue+=my(t),e.advance();return e.lastStringValue!==""};function QPt(e){return zOe(e)||C4(e)}Ct.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Ct.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===vc&&e.raise("Negated character class may contain strings"),!0}return!1};Ct.regexp_classContents=function(e){return e.current()===93?Gm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Gm)};Ct.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Ct.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||HOe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Ct.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Ct.regexp_classSetExpression=function(e){var t=Gm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===vc&&(t=vc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==vc&&(t=Gm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===vc&&(t=vc)}};Ct.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Ct.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Gm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Ct.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===vc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Ct.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Ct.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===vc&&(t=vc);return t};Ct.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Gm:vc};Ct.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&JPt(n)||ZPt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function JPt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function ZPt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Ct.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return eNt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function eNt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Ct.regexp_eatClassControlLetter=function(e){var t=e.current();return C4(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Ct.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Ct.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;C4(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function C4(e){return e>=48&&e<=57}Ct.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;UOe(n=e.current());)e.lastIntValue=16*e.lastIntValue+VOe(n),e.advance();return e.pos!==t};function UOe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function VOe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Ct.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Ct.regexp_eatOctalDigit=function(e){var t=e.current();return HOe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function HOe(e){return e>=48&&e<=55}Ct.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!UOe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+VOe(i),e.advance()}return!0};var dee=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new E4(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Vn=Fs.prototype;Vn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new dee(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Vn.getToken=function(){return this.next(),new dee(this)};typeof Symbol<"u"&&(Vn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===Y.eof,value:t}}}});Vn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(Y.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Vn.readToken=function(e){return Wm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Vn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Vn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=hOe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Vn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!FS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Vn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&pOe.test(String.fromCharCode(e)))++this.pos;else break e}}};Vn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Vn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(Y.ellipsis)):(++this.pos,this.finishToken(Y.dot))};Vn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(Y.assign,2):this.finishOp(Y.slash,1)};Vn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?Y.star:Y.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=Y.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(Y.assign,n+1):this.finishOp(r,n)};Vn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(Y.assign,3)}return this.finishOp(e===124?Y.logicalOR:Y.logicalAND,2)}return t===61?this.finishOp(Y.assign,2):this.finishOp(e===124?Y.bitwiseOR:Y.bitwiseAND,1)};Vn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(Y.assign,2):this.finishOp(Y.bitwiseXOR,1)};Vn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||td.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(Y.incDec,2):t===61?this.finishOp(Y.assign,2):this.finishOp(Y.plusMin,1)};Vn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(Y.assign,n+1):this.finishOp(Y.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(Y.relational,n))};Vn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(Y.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(Y.arrow)):this.finishOp(e===61?Y.eq:Y.prefix,1)};Vn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(Y.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(Y.assign,3)}return this.finishOp(Y.coalesce,2)}}return this.finishOp(Y.question,1)};Vn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Wm(t,!0)||t===92))return this.finishToken(Y.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+my(t)+"'")};Vn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Y.parenL);case 41:return++this.pos,this.finishToken(Y.parenR);case 59:return++this.pos,this.finishToken(Y.semi);case 44:return++this.pos,this.finishToken(Y.comma);case 91:return++this.pos,this.finishToken(Y.bracketL);case 93:return++this.pos,this.finishToken(Y.bracketR);case 123:return++this.pos,this.finishToken(Y.braceL);case 125:return++this.pos,this.finishToken(Y.braceR);case 58:return++this.pos,this.finishToken(Y.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(Y.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(Y.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+my(e)+"'")};Vn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Vn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(td.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new fp(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var l=null;try{l=new RegExp(i,o)}catch{}return this.finishToken(Y.regexp,{pattern:i,flags:o,value:l})};Vn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,l=0,u=t??1/0;l<u;++l,++this.pos){var c=this.input.charCodeAt(this.pos),d=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),l===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?d=c-97+10:c>=65?d=c-65+10:c>=48&&c<=57?d=c-48:d=1/0,d>=e)break;a=c,o=o*e+d}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function tNt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function qOe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Vn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=qOe(this.input.slice(t,this.pos)),++this.pos):Wm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Y.num,n)};Vn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=qOe(this.input.slice(t,this.pos));return++this.pos,Wm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Y.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Wm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=tNt(this.input.slice(t,this.pos),n);return this.finishToken(Y.num,s)};Vn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Vn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(FS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(Y.string,t)};var WOe={};Vn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===WOe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Vn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw WOe;this.raise(e,t)};Vn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===Y.template||this.type===Y.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(Y.dollarBraceL)):(++this.pos,this.finishToken(Y.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(Y.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(FS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Vn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(Y.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};Vn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return my(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return FS(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}};Vn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Vn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(vE(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Wm:vE)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=my(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Vn.readWord=function(){var e=this.readWord1(),t=Y.name;return this.keywords.test(e)&&(t=iee[e]),this.finishToken(t,e)};var nNt="8.12.1";Fs.acorn={Parser:Fs,version:nNt,defaultOptions:jH,Position:OI,SourceLocation:E4,getLineInfo:gOe,Node:T4,TokenType:nr,tokTypes:Y,keywordTypes:iee,TokContext:pd,tokContexts:wi,isIdentifierChar:vE,isIdentifierStart:Wm,Token:dee,isNewLine:FS,lineBreak:td,lineBreakG:CPt,nonASCIIwhitespace:pOe};function rNt(e,t){return Fs.parse(e,t)}const fee={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},iNt={ecmaVersion:11},jpe="$",sNt="d",oNt="d1",aNt="d2",po=e=>(t,n)=>n.error(t,e+" not allowed"),lNt=po("Aggregate function"),uNt=po("Window function"),cNt="Invalid argument",hee="Invalid column reference",dNt=hee+" (must be input to an aggregate function)",GOe="Invalid function call",fNt="Invalid member expression",hNt="Invalid operator parameter",pNt="Invalid param reference",mNt="Invalid variable reference",gNt="Variable not accessible in operator call",yNt="Unsupported variable declaration",vNt="Unsupported destructuring pattern",YOe="Table expressions do not support closures",KOe="Use aq.escape(fn) to use a function as-is (including closures)",bNt="use table.params({ name: value }) to define dynamic parameters",_Nt="use aq.addFunction(name, fn) to add new op functions",wNt=`
Note: ${YOe}. ${KOe}, or ${bNt}.`,XOe=`
Note: ${YOe}. ${KOe}, or ${_Nt}.`,xNt=`The ${qRe} method is not valid in multi-table expressions.`;function ENt(e,t){const n=SNt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,gPt(r)?(CNt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=oNt),e.scope.add(e.tuple2=aNt),e.scope.add(e.$param=jpe)):(e.scope.add(e.tuple=sNt),e.scope.add(e.$param=jpe)),Zn(r,e,pee),e.root}function SNt(e){try{const t=e.field?TNt(e):ur(e)?Hh(e):e;return rNt(`expr=(${t})`,iNt).body[0].expression.right}catch{Cn(`Expression parse error: ${e+""}`)}}function TNt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const pee={FunctionDeclaration:po("Function definitions"),ForStatement:po("For loops"),ForOfStatement:po("For-of loops"),ForInStatement:po("For-in loops"),WhileStatement:po("While loops"),DoWhileStatement:po("Do-while loops"),AwaitExpression:po("Await expressions"),ArrowFunctionExpression:po("Function definitions"),AssignmentExpression:po("Assignments"),FunctionExpression:po("Function definitions"),NewExpression:po('Use of "new"'),UpdateExpression:po("Update expressions"),VariableDeclarator(e,t){HH(e.id,t)},Identifier(e,t,n){ZOe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,mNt,wNt)},CallExpression(e,t){const n=QOe(e.callee),r=URe(n)||VRe(n);if(r){if((t.join||t.aggregate===!1)&&iZ(n)&&lNt(e,t),(t.join||t.window===!1)&&sZ(n)&&uNt(e,t),t.$op=1,t.ast)VH(e,n,t),e.arguments.forEach(i=>Zn(i,t,UH));else{const i=t.op(ANt(t,r,n,e.arguments));Object.assign(e,{type:LRe,name:i.id})}return t.$op=0,!1}else zRe(n)?VH(e,n,t):t.error(e,GOe,XOe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Is(z0,r))return;const{name:s}=r;if(JOe(e)&&Is(z0,i)&&of(fee,i.name)){nDe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Bpe(e,o,t,eDe,n);if(s===t.$param)return Bpe(e,o,t,kNt);t.paramsRef.has(s)?MI(e,t.paramsRef.get(s)):t.columnRef.has(s)?tDe(r,s,t,e):of(t.params,s)&&MI(r,s)}};function Bpe(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Is(NS,s))a=s.value;else try{Zn(s,n,pee,e),a=n.param(s)}catch{n.error(e,fNt)}return r(e,a,t,n,i),!1}const UH={...pee,VariableDeclarator:po("Variable declaration in operator call"),Identifier(e,t,n){ZOe(e,t,n)&&t.error(e,gNt)},CallExpression(e,t){const n=QOe(e.callee);zRe(n)?VH(e,n,t):t.error(e,GOe,XOe)}};function CNt(e,t){e.generator&&po("Generator functions")(e,t),e.async&&po("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,l)=>t.columnRef.set(a,[l,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(ZT(t,n[0],"tuple1",i(1)),r>1&&ZT(t,n[1],"tuple2",i(2)),r>2&&ZT(t,n[2],"$param",s)):(ZT(t,n[0],"tuple",i(0)),r>1&&ZT(t,n[1],"$param",s))),t.root=e.body}function ZT(e,t,n,r){Is(z0,t)?(e.scope.add(t.name),e[n]=t.name):Is(MRe,t)&&t.properties.forEach(i=>{const s=Is(z0,i.key)?i.key.name:Is(NS,i.key)?i.key.value:e.error(i,cNt);Is(z0,i.value)||e.error(i.value,vNt),r(i.value.name,s)})}function ANt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((l,u)=>{u<o?(Zn(l,e,UH),i.push(e.field(l))):u<a?(Zn(l,e,UH),s.push(e.param(l))):e.error(l,hNt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function QOe(e){return Is(z0,e)?e.name:Is(DRe,e)?JOe(e)?INt(e.property.name):e.property.name:null}function JOe(e){return Is(z0,e.object)&&e.object.name==="Math"}function INt(e){return e==="max"?"greatest":e==="min"?"least":e}function ZOe(e,t,n){const{name:r}=e;if(!(Is(DRe,n)&&n.property===e)){if(!(Is($Re,n)&&n.key===e))if(t.paramsRef.has(r))MI(e,t.paramsRef.get(r));else if(t.columnRef.has(r))tDe(e,r,t,n);else if(of(t.params,r))MI(e,r);else if(of(fee,r))nDe(e,r);else return!0}}function eDe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,hee),r.aggronly&&!r.$op&&r.error(e,dNt),HRe(e,t,n,o,i)}function tDe(e,t,n,r){const[i,s]=n.columnRef.get(t);eDe(e,i,s,n,r)}function kNt(e,t,n,r){r.params&&!of(r.params,t)&&r.error(e,pNt),MI(e,t)}function MI(e,t){e.type=AAt,e.name=t}function nDe(e,t){e.type=SAt,e.name=t,e.raw=fee[t]}function VH(e,t,n){if(t===qRe){const r=n.table;r||n.error(e,xNt),WRe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Za(s)?r.columnName(s):s;return r.column(o)||n.error(i,hee),o}):r.columnNames())}else e.callee={type:CAt,name:t}}function HH(e,t){Is(z0,e)?t.scope.add(e.name):Is(_At,e)?e.elements.forEach(n=>HH(n,t)):Is(MRe,e)?e.properties.forEach(n=>HH(n.value,t)):t.error(e.id,yNt)}const RNt={[bR]:1,[LRe]:1};function Ql(e,t={}){const n=t.generate||o3,r=t.compiler||oZ,i=NNt(t),s={},o={},a=[],l=[];let u=0,c=-1;const d=t.join?r.join:t.index==1?r.expr2:r.expr,f={op(m){const g=PNt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++u)},param(m){return Is(NS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?mPt(g):d(n(g),i));l.push(y),RNt[g.type]&&y!==g&&va(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,_=m.end-6,w=String(f.spec).slice(v,_);Cn(`${g}: "${w}"${y}`)}};Object.assign(f,t,{params:i});for(const[m,g]of u4(e))f.value(m+"",g.escape?bPt(f,g,i):ENt(f,g));if(t.ast)return{names:a,exprs:l};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:l,ops:p}}function PNt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function NNt(e){return(e.table?x9(e.table):e.join?{...x9(e.join[1]),...x9(e.join[0])}:{})||{}}function x9(e){return e&&mi(e.params)?e.params():{}}const rDe="Expr",md="ExprList",iDe="ExprNumber",s2="ExprObject",Vw="JoinKeys",A3="JoinValues",ac="Options",mee="OrderKeys",Ug="SelectionList",f1="TableRef",Hw="TableRefList",ONt="Descending",DNt="Query",MNt="Selection",$Nt="Verb",LNt="Window";function A4(e,t){return e&&e.expr?new zpe({...e,...t}):new zpe(t,e)}class zpe{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...mi(this.expr)?{func:!0}:{}}}}function FNt(e){return A4(e,{desc:!0})}function mb(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return A4(e,t?{expr:t,...r}:r)}function jNt(e,t,n){return A4(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function BNt(e){const t=n=>n;return t.toString=()=>e,t}function Upe(e,t){return t=t&&mi(t.query)?t.query():t,t&&mi(t.evaluate)?t.evaluate(null,e):e(t)}function sDe(e){return va(e)&&(ur(e.all)||ur(e.matches)||ur(e.not)||ur(e.range))}function $I(e){return e&&mi(e.toObject)?e.toObject():mi(e)?{expr:String(e),func:!0}:ur(e)?e.map($I):va(e)?w4(e,t=>$I(t)):e}function gee(e){return ur(e)?e.map(gee):va(e)?ur(e.verbs)?vee.from(e):ur(e.all)?yE():ur(e.range)?cPt(...e.range):ur(e.match)?dPt(RegExp(...e.match)):ur(e.not)?uOe(e.not.map($I)):zNt(e):e}function zNt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=mb(n):e.func===!0&&(t=n=BNt(n)),va(e.window)){const{frame:r,peers:i}=e.window;t=n=jNt(n,r,i)}e.desc===!0&&(t=FNt(n))}return e===t?w4(e,r=>gee(r)):t}function UNt(e){return ur(e)?e.map(VNt):e}function VNt(e){const t=[];return Kl(e).forEach(n=>{Za(n)?t.push(n):Mo(n)?t.push(mb(n,null)):va(n)&&n.expr||mi(n)?t.push(n):Cn(`Invalid key value: ${n+""}`)}),t}function HNt(e){return ur(e)?e.map(qNt):e}function qNt(e,t){return t<2?Kl(e):e}function WNt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(va(r)&&!mi(r))for(const i in r)t.push(r[i]);else n=Za(r)?r:Mo(r)?mb(n):mi(r)?n:Cn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const GNt={[rDe]:uDe,[md]:bE,[iDe]:ZNt,[s2]:gy,[Vw]:eOt,[A3]:tOt,[mee]:bE,[Ug]:QNt};function YNt(e,t,n){return t===f1?Vpe(e):t===Hw?e.map(Vpe):oDe($I(e),t,n)}function oDe(e,t,n){return t===ac?e&&KNt(e,n):GNt[t](e)}function KNt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?oDe(i,t[r]):i}return n}function XNt(e,t){return Ql({expr:e},{...t,ast:!0}).exprs[0]}function yee(e){return{type:bR,name:e}}function aDe(e){return{type:bR,index:e}}function gy(e,t){if(Mo(e))return XNt(e,t);if(e.expr){let n;if(e.field===!0?n=yee(e.expr):e.func===!0&&(n=gy(e.expr,t)),n)return e.desc&&(n={type:ONt,expr:n}),e.window&&(n={type:LNt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...gy(e[n],t),as:n}))}function lDe(e){const t=MNt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:bE(e.not)}:e.range?{type:t,operator:"range",arguments:bE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Cn("Invalid input")}function QNt(e){return Kl(e).map(JNt).flat()}function JNt(e){return sDe(e)?lDe(e):Za(e)?aDe(e):Mo(e)?yee(e):va(e)?Object.keys(e).map(t=>({type:bR,name:t,as:e[t]})):Cn("Invalid input")}function uDe(e){return sDe(e)?lDe(e):Za(e)?aDe(e):Mo(e)?yee(e):va(e)?gy(e):Cn("Invalid input")}function bE(e){return Kl(e).map(uDe).flat()}function ZNt(e){return Za(e)?e:gy(e)}function eOt(e){return ur(e)?e.map(bE):gy(e,{join:!0})}function tOt(e){return ur(e)?e.map((t,n)=>n<2?bE(t):gy(t,{join:!0})):gy(e,{join:!0})}function Vpe(e){return e&&mi(e.toAST)?e.toAST():e}class cDe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],l=o===Vw?UNt(a):o===A3?HNt(a):o===mee?WNt(a):a;this[i.name]=l!==void 0?l:i.default})}static from(t){const n=qH[t.verb],r=(n.schema||[]).map(({name:i})=>gee(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===f1?Upe(n,o):s===Hw?o.map(a=>Upe(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=$I(this[n])}),t}toAST(){const t={type:$Nt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=YNt(this[n],r,i)}),t}}function Dr(e,t){return Object.assign((...n)=>new cDe(e,t,n),{schema:t})}const qH={count:Dr("count",[{name:"options",type:ac}]),derive:Dr("derive",[{name:"values",type:s2},{name:"options",type:ac,props:{before:Ug,after:Ug}}]),filter:Dr("filter",[{name:"criteria",type:s2}]),groupby:Dr("groupby",[{name:"keys",type:md}]),orderby:Dr("orderby",[{name:"keys",type:mee}]),relocate:Dr("relocate",[{name:"columns",type:Ug},{name:"options",type:ac,props:{before:Ug,after:Ug}}]),rename:Dr("rename",[{name:"columns",type:Ug}]),rollup:Dr("rollup",[{name:"values",type:s2}]),sample:Dr("sample",[{name:"size",type:iDe},{name:"options",type:ac,props:{weight:rDe}}]),select:Dr("select",[{name:"columns",type:Ug}]),ungroup:Dr("ungroup"),unorder:Dr("unorder"),reify:Dr("reify"),dedupe:Dr("dedupe",[{name:"keys",type:md,default:[]}]),impute:Dr("impute",[{name:"values",type:s2},{name:"options",type:ac,props:{expand:md}}]),fold:Dr("fold",[{name:"values",type:md},{name:"options",type:ac}]),pivot:Dr("pivot",[{name:"keys",type:md},{name:"values",type:md},{name:"options",type:ac}]),spread:Dr("spread",[{name:"values",type:md},{name:"options",type:ac}]),unroll:Dr("unroll",[{name:"values",type:md},{name:"options",type:ac,props:{drop:md}}]),lookup:Dr("lookup",[{name:"table",type:f1},{name:"on",type:Vw},{name:"values",type:md}]),join:Dr("join",[{name:"table",type:f1},{name:"on",type:Vw},{name:"values",type:A3},{name:"options",type:ac}]),cross:Dr("cross",[{name:"table",type:f1},{name:"values",type:A3},{name:"options",type:ac}]),semijoin:Dr("semijoin",[{name:"table",type:f1},{name:"on",type:Vw}]),antijoin:Dr("antijoin",[{name:"table",type:f1},{name:"on",type:Vw}]),concat:Dr("concat",[{name:"tables",type:Hw}]),union:Dr("union",[{name:"tables",type:Hw}]),intersect:Dr("intersect",[{name:"tables",type:Hw}]),except:Dr("except",[{name:"tables",type:Hw}])};let vee=class dDe extends wRe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new dDe(t.map(cDe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Hpe(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Hpe(this,"toAST",{type:DNt})}};function Hpe(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function nOt(e,t){return new vee(e._verbs.concat(t),e._params,e._table)}for(const e in qH){const t=qH[e];vee.prototype["__"+e]=function(n,...r){return nOt(n,t(...r))}}function zS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,l)=>`${r[o]}${l} = ${r[o]}[${l}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function rOt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function bee(e,t){const n=Ju();return t.forEach((r,i)=>{const s=Mo(r)?r:i;if(s){const o=e.column(i)||Cn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function fDe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||Cn("relocate requires a before or after option."),i&&s&&Cn("relocate accepts only one of the before or after options."),t=qm(e,t);const o=[...qm(e,i?n:r).keys()],a=i?o[0]:o.pop(),l=new Map;return e.columnNames().forEach(u=>{const c=!t.has(u);if(u===a){s&&c&&l.set(u,u);for(const[d,f]of t)l.set(d,f);if(s)return}c&&l.set(u,u)}),bee(e,l)}function IR(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function _ee(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function iOt(e,t=0,n=e.length){let r=n?e[t++]:rr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function sOt(e,t=0,n=e.length){let r=n?e[t++]:rr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function YN(e){return CI(e)?e:+e}function oOt(e,t){const n=e.length;if(!n)return rr;if((t=+t)<=0||n<2)return YN(e[0]);if(t>=1)return YN(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=YN(e[i]);return CI(s)?s:s+(YN(e[i+1])-s)*(r-i)}class aOt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:iOt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:sOt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(_ee)),oOt(this._sorted,t)}}const I3=(e,t,n)=>zS(t,"{"+IR(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function lOt(e,t){const{ops:n,output:r}=uOt(e,t),i=e[0].fields,s=i.length,o=s===0?wee:s===1?cOt:s===2?dOt:Cn("Unsupported field count: "+s);return new o(i,n,r,t)}function uOt(e,t){const n={},r=[];function i(o,a=[]){const l=o+":"+a;if(n[l])return n[l];const u=URe(o),c=u.create(...a);return t<0&&u.stream&&u.stream.forEach(d=>i(d,[])),u.req&&u.req.forEach(d=>i(d,[])),n[l]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class wee extends hPt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new aOt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class cOt extends wee{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=I3(n,s,"add"),this._rem=I3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Ld(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Ld(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class dOt extends wee{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=I3(n,s,"add"),this._rem=I3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Ld(i)&&Ld(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Ld(i)&&Ld(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function r_(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=US(e,t),o=i?(a,l)=>s[a][i[l]]:a=>s[a][0];n=n.map(a=>l=>a(l,r,o))}return n}function US(e,t,n){if(!t.length)return n;const r=hDe(t),i=e.groups(),s=i?i.size:1;return n=n||a4(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=mDe(e,o,i);for(let l=0;l<s;++l)o.write(a[l],n,l)}):r.forEach(o=>{const a=pDe(e,o);o.write(a,n,0)}),n}function hDe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(lOt(r[i],t));return n}function pDe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function mDe(e,t,n){const{keys:r,size:i}=n,s=a4(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),l=a.length;for(let u=0;u<l;++u){const c=a[u];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let l=a.next(0);l>=0;l=a.next(l+1))t.add(s[r[l]],l,o)}else{const a=e.totalRows();for(let l=0;l<a;++l)t.add(s[r[l]],l,o)}return s}function gDe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const l=e.add(r[a],Array(s)),u=n[a];for(let c=0;c<s;++c)l[c]=u(i[c])}}function yDe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const qpe=yDe(_ee);function fOt(e,t,n,r,i){let s,o,a,l,u;const c=m=>o[m-1]===o[m],d=r.length,f=i.length,h=r.length?zS(["w","r","k"],"{"+IR(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,l=y,u=v,a=i?i.map(_=>_.init()):null;for(let _=0;_<d;++_)r[_].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,_=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=qpe.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=qpe.right(o,o[p.i1-1])));for(let x=0;x<f;++x){const S=i[x],E=a[x];for(let T=_;T<p.i0;++T)S.rem(E,s[T],e);for(let T=w;T<p.i1;++T)S.add(E,s[T],e);S.write(E,l,u)}return h(p,l,u),l}};return p}const hOt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),pOt=e=>!!e.peers;function mOt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=VRe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function gOt(e,t,n,r={},i){const s=e.data(),o=yOt(i,s),a=o.length,l=zS(["r","d","op"],"{"+IR(t,(u,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((u,c)=>{const d=u.length,f=vOt(e,u);for(let p=0;p<a;++p)o[p].init(u,f,r,c);const h=p=>r[p][c];for(let p=0;p<d;++p){for(let m=0;m<a;++m)o[m].step(p);l(u[p],s,h)}})}function yOt(e,t){const n={};return e.forEach(r=>{const i=hOt(r),s=pOt(r),o=`${i},${s}`,{aggOps:a,winOps:l}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});iZ(r.name)?a.push(r):l.push(mOt(r))}),Object.values(n).map(r=>fOt(t,r.frame,r.peers,r.winOps,hDe(r.aggOps,r.frame[0]!=null?-1:1)))}function vOt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function bOt(e){return sZ(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function xee(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Ju(i.drop?null:e),a=t.map(f=>o.add(f,Array(s))),[l,u]=_Ot(r),c=e.isGrouped()?e.groups().size:1,d=US(e,l,a4(r.length,()=>Array(c)));return u.length?gOt(e,a,n,d,u):wOt(e,a,n,d),e.create(o)}function _Ot(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(bOt(s)?n:t).push(s)}return[t,n]}function wOt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(u,c)=>r[u][o[c]]:u=>r[u][0],l=t.length;for(let u=0;u<l;++u){const c=n[u],d=t[u];if(i)for(let f=i.next(0);f>=0;f=i.next(f+1))d[f]=c(f,s,a);else{const f=e.totalRows();for(let h=0;h<f;++h)d[h]=c(h,s,a)}}}function xOt(e,t,n={}){const r=xee(e,Ql(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:fDe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function EOt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const KN=2147483648,SOt=4294967295;class vDe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&KN>>>t}set(t){this._bits[t>>5]|=KN>>>t}clear(t){this._bits[t>>5]&=~(KN>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&SOt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=KN>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function TOt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new vDe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function COt(e,t){const n=Ql({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=xee(e,n,{drop:!0}).column("p");r=s=>i[s]}return TOt(e,r)}function bDe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),l=r_(e,r,n),u=Ju(),c=new Set(t),d=[],f=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const x=u.add(w,[]);c.has(w)||(d.push(e.column(w)),f.push(x))}}),t.forEach(w=>{a.has(w)||(u.has(w)||u.add(w,[]),h.push(u.data[w]))});const p=o?u.add(o,[]):null;let m=0;const g=d.length,y=h.length,v=(w,x)=>{for(let S=0;S<g;++S)f[S].length=m+x,f[S].fill(d[S].get(w),m,m+x)},_=p?(w,x)=>{for(let S=0;S<x;++S)p[w+S]=S}:()=>{};if(y===1){const w=l[0],x=h[0];e.scan((S,E)=>{const T=Kl(w(S,E)),I=Math.min(T.length,s);v(S,I);for(let k=0;k<I;++k)x[m+k]=T[k];_(m,I),m+=I})}else e.scan((w,x)=>{let S=0;const E=l.map(T=>{const I=Kl(T(w,x));return S=Math.min(Math.max(S,I.length),s),I});v(w,S);for(let T=0;T<y;++T){const I=h[T],k=E[T];for(let P=0;P<S;++P)I[m+P]=k[P]}_(m,S),m+=S});return e.create(u.new())}function AOt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=r_(e,r,n);return bDe(e,{names:[s,o],exprs:[()=>t,(l,u)=>a.map(c=>c(l,u))]},{...i,drop:t})}function af(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Za(o)?t.columnName(o):o,Mo(o)?i.set(o,mb(o)):mi(o)?qm(t,o).forEach(s):va(o)?aOe(i,o):Cn(`Invalid ${e} value: ${o+""}`)};return Kl(n).forEach(s),r.preparse&&r.preparse(i),Ql(i,{table:t,...r})}function IOt(e,t,n){return AOt(e,af("fold",e,t),n)}function Wpe(e,t,n,r){const i=n&&n.length;return kOt(i?ROt(e,n,r):e,t,i)}function kOt(e,{names:t,exprs:n,ops:r},i){const s=r_(e,r,n),o=i?null:Ju(e),a=e.totalRows();return t.forEach((l,u)=>{const c=e.column(l),d=i?c.data:o.add(l,Array(a)),f=s[u];e.scan(h=>{const p=c.get(h);d[h]=Ld(p)?p:f(h)})}),i?e:e.create(o)}function ROt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,l=a3(o);e.scan((p,m)=>a.add(l(p,m)));const u=e.columnNames(),c=Ju(),d=u.map(p=>c.add(p,[]));u.forEach((p,m)=>{const g=i[p],y=d[m];e.scan(v=>y.push(g.get(v)))});const f=a3(o.map((p,m)=>g=>g[m])),h=zS("v","{"+d.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",d,u.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Gpe(r,n,(y,v)=>{a.has(f(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Gpe(r,n,p=>{a.has(f(p))||h(p)});return e.create(c.new())}function Gpe(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),l=[];if(e){const{get:c,rows:d,size:f}=e;o[0]=f,l.push((h,p)=>{const m=d[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,d)=>{const f=d+r;o[d+i]=c.length,l.push((h,p)=>h[f]=c[p])});const u=Array(r+t.length);for(let c=0;c<s;++c)l[c](u,0);n(u,a);for(let c=s-1;c>=0;){const d=++a[c];d<o[c]?(l[c](u,d),n(u,a),c=s-1):(a[c]=0,l[c](u,0),--c)}}function Eee(e,{names:t,exprs:n,ops:r}){const i=Ju(),s=e.groups();return s&&gDe(i,s),POt(t,n,s,US(e,r),i),e.create(i.new())}function POt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(l,u)=>r[l][u],a=e.length;for(let l=0;l<a;++l){const u=t[l];if(u.field!=null)i.add(e[l],r[u.field]);else if(s>1){const c=i.add(e[l],Array(s));for(let d=0;d<s;++d)c[d]=u(d,null,o)}else i.add(e[l],[u(0,null,o)])}}function NOt(e,t,n={}){if(t=Ql(t,{table:e}),t.names.forEach(r=>e.column(r)?0:Cn(`Invalid impute column ${Hh(r)}`)),n.expand){const r={preparse:OOt,aggronly:!0},i=af("impute",e,n.expand,r),s=Eee(e.ungroup(),i);return Wpe(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Wpe(e,t)}function OOt(e){e.forEach((t,n)=>t.field?e.set(n,RRe(t+"")):0)}function DOt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function _De(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function MOt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function $Ot(e,t){const n=["i","a","j","b"];return zS(n,"{"+IR(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function LOt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),l=a.length,u=new Int32Array(l),c=t.data(),d=t.indices(!1),f=d.length,h=new Int32Array(f),p=r.length,m=Ju(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=$Ot(g,y);if((ur(n)?jOt:FOt)(v,n,o,c,a,d,u,h,l,f),s.left)for(let w=0;w<l;++w)u[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<f;++w)h[w]||v(-1,o,d[w],c);return e.create(m.new())}function FOt(e,t,n,r,i,s,o,a,l,u){for(let c=0;c<l;++c){const d=i[c];for(let f=0;f<u;++f){const h=s[f];t(d,n,h,r)&&(e(d,n,h,r),o[c]=1,a[f]=1)}}}function jOt(e,[t,n],r,i,s,o,a,l,u,c){let d,f,h,p,m,g,y,v,_=e;u>=c?(d=r,f=t,h=a,p=s,m=i,g=n,y=l,v=o):(d=i,f=n,h=l,p=o,m=r,g=t,y=a,v=s,_=(S,E,T,I)=>e(T,I,S,E));const w=MOt(v,m,g),x=p.length;for(let S=0;S<x;++S){const E=p[S],T=w.get(f(E,d));if(T){const I=T.length;for(let k=0;k<I;++k){const P=T[k];_(E,d,v[P],m),y[P]=1}h[S]=1}}}function k3(e,t,n){const r=new Map;Kl(n).forEach((s,o)=>{s=Za(s)?t.columnName(s):s,Mo(s)?r.set(o,mb(s)):mi(s)||va(s)&&s.expr?r.set(o,s):Cn(`Invalid ${e} key value: ${s+""}`)});const i=Ql(r,{table:t,aggregate:!1,window:!1});return a3(i.exprs,!0)}function BOt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function See(e,t,n){if(n)Mo(n)?n=[n,n]:ur(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=BOt(e.columnNames(),t.columnNames());r.length||Cn("Natural join requires shared column names."),n=[r,r]}return n}function wDe(e,t,n,r){return n.length!==r.length&&Cn("Mismatched number of join keys"),[k3("join",e,n),k3("join",t,r)]}const zOt={aggregate:!1,window:!1},UOt={...zOt,index:1};function Ype(e,t,n,r,i={}){n=See(e,t,n);const s={join:[e,t]};let o;if(ur(n)){const[a,l]=n.map(Kl);o=wDe(e,t,a,l),r||(r=VOt(e,a,l,i))}else o=Ql({on:n},s).exprs[0],r||(r=[yE(),yE()]);return LOt(e,t,o,HOt(e,t,r,s,i&&i.suffix),i)}function VOt(e,t,n,r){const i=[];t.forEach((o,a)=>Mo(o)&&o===n[a]?i.push(o):0);const s=uOe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const l=`[${Hh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${l} == null ? b${l} : a${l}`}:a}),s]}return r.right?[s,yE()]:[yE(),s]}function HOt(e,t,n,r,i=[]){if(ur(n)){let s,o,a,l=n.length;s=o=a={names:[],exprs:[]},l--&&(s=af("join",e,n[0],r)),l--&&(o=af("join",t,n[1],UOt)),l--&&(a=Ql(n[2],r));const u=new Set,c=new Set(s.names);return o.names.forEach(d=>{c.has(d)&&u.add(d)}),u.size&&(i[0]!==""&&Kpe(s.names,u,i[0]||"_1"),i[1]!==""&&Kpe(o.names,u,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Ql(n,r)}function Kpe(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function qOt(e,t,n,r={}){const i=new vDe(e.totalRows());return(ur(n)?WOt:GOt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function WOt(e,t,n,[r,i]){const s=_De(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function GOt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const l=t.indices(!1),u=n.indices(!1);for(let c=0;c<i;++c){const d=l[c];for(let f=0;f<s;++f)if(r(d,o,u[f],a)){e.set(d);break}}}else for(let l=0;l<i;++l)for(let u=0;u<s;++u)if(r(l,o,u,a)){e.set(l);break}}function Xpe(e,t,n,r){n=See(e,t,n);const i=ur(n)?wDe(e,t,...n.map(Kl)):Ql({on:n},{join:[e,t]}).exprs[0];return qOt(e,t,i,r)}function YOt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Ju(e),l=e.totalRows();i.forEach(f=>a.add(f,Array(l).fill(rr)));const u=_De(t,r),c=zS(["lr","rr","data"],"{"+IR(i,(f,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(f=>a.data[f]),r_(t,o,s)),d=t.data();return e.scan((f,h)=>{const p=u.get(n(f,h));p>=0&&c(f,p,d)}),e.create(a)}function KOt(e,t,n,r){return n=See(e,t,n),YOt(e,t,[k3("lookup",e,n[0]),k3("lookup",t,n[1])],af("lookup",t,r))}const WH=(e,t)=>e??t;function XOt(e,t,n,r={}){const{keys:i,keyColumn:s}=QOt(e,t,r),o=WH(r.valueSeparator,"_"),a=n.names.length>1?(u,c)=>c+o+i[u]:u=>i[u],l=i.map(u=>US(e,n.ops.map(c=>{if(c.name==="count"){const f=h=>u===s[h]?1:NaN;return f.toString=()=>u+":1",{...c,name:"sum",fields:[f]}}const d=c.fields.map(f=>{const h=(p,m)=>u===s[p]?f(p,m):NaN;return h.toString=()=>u+":"+f,h});return{...c,fields:d}})));return e.create(JOt(n,a,e.groups(),l))}function QOt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=WH(n.sort,!0),s=WH(n.keySeparator,"_"),o=r_(e,t.ops,t.exprs),a=o.length===1?o[0]:(d,f)=>o.map(h=>h(d,f)).join(s),l=Array(e.totalRows());e.scan((d,f)=>l[d]=a(d,f));const u=US(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[d=>l[d]],params:[]}])[0][0],c=i?u.sort():u;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:l}}function JOt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Ju(),a=i.length,l=e.length;let u;const c=(d,f)=>u[d][f];r&&gDe(o,r);for(let d=0;d<l;++d){const f=t[d];if(f.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[d]),i[h][f.field]);else if(s>1)for(let h=0;h<a;++h){u=i[h];const p=o.add(n(h,e[d]),Array(s));for(let m=0;m<s;++m)p[m]=f(m,null,c)}else for(let h=0;h<a;++h)u=i[h],o.add(n(h,e[d]),[f(0,null,c)])}return o.new()}function ZOt(e,t,n,r){return XOt(e,af("fold",e,t),af("fold",e,n,{preparse:eDt,aggronly:!0}),r)}function eDt(e){e.forEach((t,n)=>t.field?e.set(n,ARe(t+"")):0)}function tDt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),bee(e,qm(e,t,n))}function Qpe(e,t){return Eee(e,Ql(t,{table:e,aggronly:!0,window:!1}))}function nDt(e,t,n,r){return(t?r?iDt:rDt:r?oDt:sDt)(e.length,e,n,r)}function rDt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*PS()|0];return t}function iDt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let l=0;l<i;++l)s[l]=o+=r(n[l]);const a=yDe(_ee).right;for(let l=0;l<e;++l)t[l]=n[a(s,o*PS())];return t}function sDt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*PS();s<e&&(t[s|0]=n[i])}return t}function oDt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(PS())/r(n[a]);o.sort((a,l)=>s[a]-s[l]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function aDt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=PS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function lDt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,d)=>{let f=t(d);return a+=f=i?f:Math.min(c.length,f),f});const l=new Uint32Array(a);let u=0;return o.forEach((c,d)=>{const f=t[d],h=l.subarray(u,u+=f);!i&&f===c.length?h.set(c):nDt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&aDt(l),e.reify(l)}function uDt(e,t,n={}){return lDt(e,cDt(e,t),dDt(e,n.weight),n)}const xDe=e=>t=>e.get(t)||0;function cDt(e,t){return Za(t)?()=>t:xDe(Eee(e,Ql({size:t},{table:e,window:!1})).column("size"))}function dDt(e,t){return t==null?null:(t=Za(t)?e.columnName(t):t,xDe(Mo(t)?e.column(t):xee(e,Ql({w:t},{table:e}),{drop:!0}).column("w")))}function fDt(e,t){return bee(e,qm(e,t))}function hDt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),l=r_(e,r,n),u=Ju(),c=t.reduce((f,h,p)=>f.set(h,p),new Map),d=(f,h)=>{const p=pDt(e,l[f],a),m=p.length;for(let g=0;g<m;++g)u.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(f=>{c.has(f)?(o||u.add(f,e.column(f)),d(c.get(f),f),c.delete(f)):u.add(f,e.column(f))}),c.forEach(d),e.create(u)}function pDt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Kl(t(s,o)),l=Math.min(a.length,n);for(;i.length<l;)i.push(Array(r).fill(rr));for(let u=0;u<l;++u)i[u][s]=a[u]}),i}function mDt(e,t,n){return hDt(e,af("spread",e,t),n)}function gDt(e,t){return e.concat(t).dedupe()}function yDt(e,t,n){return bDe(e,af("unroll",e,t),n&&n.drop?{...n,drop:af("unroll",e,n.drop).names}:n)}function vDt(e,t){return e.create({groups:bDt(e,t)})}function bDt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=r_(e,r,n);const o=a3(s),a=e.totalRows(),l=new Uint32Array(a),u={},c=[],d=e.data(),f=e.mask();if(f)for(let h=f.next(0);h>=0;h=f.next(h+1)){const p=o(h,d)+"",m=u[p];l[h]=m??(u[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,d)+"",m=u[p];l[h]=m??(u[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,d))),{keys:l,get:s,names:t,rows:c,size:c.length}}function _Dt(e,t){return vDt(e,af("groupby",e,t))}function wDt(e,t){return e.create({order:t})}const xDt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function EDt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:l}=Ql(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([o3(p,{index:"a",op:o}),o3(p,{index:"b",op:a})])},window:!1}),u=US(e,l),c=(h,p)=>u[h][p],d=n.length;let f="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<d;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];f+=xDt(m,g,-p,p)}return f+="0;};",Function("op","keys","fn","data",f)(c,s,i,e.data())}function SDt(e,t){return wDt(e,TDt(e,t))}function TDt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(va(o)&&!mi(o))for(const a in o)i(o[a]);else i(Za(o)?mb(s,e.columnName(o)):Mo(o)?mb(s):mi(o)?s:Cn(`Invalid orderby field: ${s+""}`))}),EDt(e,r)}function CDt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Ju();return e.columnNames().forEach(o=>{const a=Array(r);let l=0;i.forEach(u=>{const c=u.column(o)||{get:()=>rr};u.scan(d=>a[l++]=c.get(d))}),s.add(o,a)}),e.create(s.new())}function ADt(e,t){const n=Ju(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},l=new Uint32Array(a+1);s.forEach(f=>n.add(f,null));const u=r?mDe(e,t,r):[pDe(e,t)];t.outputs().map(f=>n.add(f,[]));const c=l.length-1;let d=0;for(let f=0;f<c;++f)d+=l[f+1]=t.write(u[f],n.data,l[f]);if(r){const f=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(d),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],f),v,v+=l[y+1])})}return e.create(n.new())}function IDt(e){return e.isGrouped()?e.create({groups:null}):e}function kDt(e){return e.isOrdered()?e.create({order:null}):e}const RDt={__antijoin:(e,t,n)=>Xpe(e,t,n,{anti:!0}),__count:(e,t={})=>Qpe(e,{[t.as||"count"]:IRe()}),__cross:(e,t,n,r)=>Ype(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:CDt,__dedupe:rOt,__derive:xOt,__except:EOt,__filter:COt,__fold:IOt,__impute:NOt,__intersect:DOt,__join:Ype,__lookup:KOt,__pivot:ZOt,__relocate:fDe,__rename:tDt,__rollup:Qpe,__sample:uDt,__select:fDt,__semijoin:Xpe,__spread:mDt,__union:gDt,__unroll:yDt,__groupby:_Dt,__orderby:SDt,__ungroup:IDt,__unorder:kDt,__reduce:ADt};Object.assign(ph.prototype,RDt);function PDt(e,t){return ph.new(e,t)}function Tee(e,t){return ph.from(e,t)}function XN(e,t={}){const n=`d[${JSON.stringify(e)}]`,{maxbins:r,nice:i,minstep:s,step:o,offset:a}=t,l=[r,i,s,o];let u=l.length;for(;u&&l[--u]==null;)l.pop();const c=l.length?", "+l.map(d=>d+"").join(", "):"";return`d => op.bin(${n}, ...op.bins(${n}${c}), ${a||0})`}function h1(e){return A4(e,{escape:!0,toString(){Cn("Escaped values can not be serialized.")}})}ph.prototype;function Nd(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function yy(e){return!!e&&!!e[bi]}function Ym(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===BDt}(e)||Array.isArray(e)||!!e[ime]||!!(!((t=e.constructor)===null||t===void 0)&&t[ime])||Cee(e)||Aee(e))}function gb(e,t,n){n===void 0&&(n=!1),VS(e)===0?(n?Object.keys:_x)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function VS(e){var t=e[bi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Cee(e)?2:Aee(e)?3:0}function bx(e,t){return VS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function NDt(e,t){return VS(e)===2?e.get(t):e[t]}function EDe(e,t,n){var r=VS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function SDe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Cee(e){return FDt&&e instanceof Map}function Aee(e){return jDt&&e instanceof Set}function e1(e){return e.o||e.t}function Iee(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=CDe(e);delete t[bi];for(var n=_x(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function kee(e,t){return t===void 0&&(t=!1),Ree(e)||yy(e)||!Ym(e)||(VS(e)>1&&(e.set=e.add=e.clear=e.delete=ODt),Object.freeze(e),t&&gb(e,function(n,r){return kee(r,!0)},!0)),e}function ODt(){Nd(2)}function Ree(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Rh(e){var t=XH[e];return t||Nd(18,e),t}function DDt(e,t){XH[e]||(XH[e]=t)}function GH(){return LI}function E9(e,t){t&&(Rh("Patches"),e.u=[],e.s=[],e.v=t)}function R3(e){YH(e),e.p.forEach(MDt),e.p=null}function YH(e){e===LI&&(LI=e.l)}function Jpe(e){return LI={p:[],l:LI,h:e,m:!0,_:0}}function MDt(e){var t=e[bi];t.i===0||t.i===1?t.j():t.g=!0}function S9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Rh("ES5").S(t,e,r),r?(n[bi].P&&(R3(t),Nd(4)),Ym(e)&&(e=P3(t,e),t.l||N3(t,e)),t.u&&Rh("Patches").M(n[bi].t,e,t.u,t.s)):e=P3(t,n,[]),R3(t),t.u&&t.v(t.u,t.s),e!==TDe?e:void 0}function P3(e,t,n){if(Ree(t))return t;var r=t[bi];if(!r)return gb(t,function(a,l){return Zpe(e,r,t,a,l,n)},!0),t;if(r.A!==e)return t;if(!r.P)return N3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Iee(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),gb(s,function(a,l){return Zpe(e,r,i,a,l,n,o)}),N3(e,i,!1),n&&e.u&&Rh("Patches").N(r,n,e.u,e.s)}return r.o}function Zpe(e,t,n,r,i,s,o){if(yy(i)){var a=P3(e,i,s&&t&&t.i!==3&&!bx(t.R,r)?s.concat(r):void 0);if(EDe(n,r,a),!yy(a))return;e.m=!1}else o&&n.add(i);if(Ym(i)&&!Ree(i)){if(!e.h.D&&e._<1)return;P3(e,i),t&&t.A.l||N3(e,i)}}function N3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&kee(t,n)}function T9(e,t){var n=e[bi];return(n?e1(n):e)[t]}function eme(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function o0(e){e.P||(e.P=!0,e.l&&o0(e.l))}function C9(e){e.o||(e.o=Iee(e.t))}function KH(e,t,n){var r=Cee(t)?Rh("MapSet").F(t,n):Aee(t)?Rh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:GH(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,u=FI;o&&(l=[a],u=o2);var c=Proxy.revocable(l,u),d=c.revoke,f=c.proxy;return a.k=f,a.j=d,f}(t,n):Rh("ES5").J(t,n);return(n?n.A:GH()).p.push(r),r}function $Dt(e){return yy(e)||Nd(22,e),function t(n){if(!Ym(n))return n;var r,i=n[bi],s=VS(n);if(i){if(!i.P&&(i.i<4||!Rh("ES5").K(i)))return i.t;i.I=!0,r=tme(n,s),i.I=!1}else r=tme(n,s);return gb(r,function(o,a){i&&NDt(i.t,o)===a||EDe(r,o,t(a))}),s===3?new Set(r):r}(e)}function tme(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Iee(e)}function LDt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[bi];return FI.get(l,s)},set:function(l){var u=this[bi];FI.set(u,s,l)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][bi];if(!a.P)switch(a.i){case 5:r(a)&&o0(a);break;case 4:n(a)&&o0(a)}}}function n(s){for(var o=s.t,a=s.k,l=_x(a),u=l.length-1;u>=0;u--){var c=l[u];if(c!==bi){var d=o[c];if(d===void 0&&!bx(o,c))return!0;var f=a[c],h=f&&f[bi];if(h?h.t!==d:!SDe(f,d))return!0}}var p=!!o[bi];return l.length!==_x(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};DDt("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(c,d){if(c){for(var f=Array(d.length),h=0;h<d.length;h++)Object.defineProperty(f,""+h,e(h,!0));return f}var p=CDe(d);delete p[bi];for(var m=_x(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(d),p)}(a,s),u={i:a?5:4,A:o?o.A:GH(),P:!1,I:!1,R:{},l:o,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,bi,{value:u,writable:!0}),l},S:function(s,o,a){a?yy(o)&&o[bi].A===s&&t(s.p):(s.u&&function l(u){if(u&&typeof u=="object"){var c=u[bi];if(c){var d=c.t,f=c.k,h=c.R,p=c.i;if(p===4)gb(f,function(_){_!==bi&&(d[_]!==void 0||bx(d,_)?h[_]||l(f[_]):(h[_]=!0,o0(c)))}),gb(d,function(_){f[_]!==void 0||bx(f,_)||(h[_]=!1,o0(c))});else if(p===5){if(r(c)&&(o0(c),h.length=!0),f.length<d.length)for(var m=f.length;m<d.length;m++)h[m]=!1;else for(var g=d.length;g<f.length;g++)h[g]=!0;for(var y=Math.min(f.length,d.length),v=0;v<y;v++)f.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&l(f[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var nme,LI,Pee=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",FDt=typeof Map<"u",jDt=typeof Set<"u",rme=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",TDe=Pee?Symbol.for("immer-nothing"):((nme={})["immer-nothing"]=!0,nme),ime=Pee?Symbol.for("immer-draftable"):"__$immer_draftable",bi=Pee?Symbol.for("immer-state"):"__$immer_state",BDt=""+Object.prototype.constructor,_x=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,CDe=Object.getOwnPropertyDescriptors||function(e){var t={};return _x(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},XH={},FI={get:function(e,t){if(t===bi)return e;var n=e1(e);if(!bx(n,t))return function(i,s,o){var a,l=eme(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Ym(r)?r:r===T9(e.t,t)?(C9(e),e.o[t]=KH(e.A.h,r,e)):r},has:function(e,t){return t in e1(e)},ownKeys:function(e){return Reflect.ownKeys(e1(e))},set:function(e,t,n){var r=eme(e1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=T9(e1(e),t),s=i==null?void 0:i[bi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(SDe(n,i)&&(n!==void 0||bx(e.t,t)))return!0;C9(e),o0(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return T9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,C9(e),o0(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=e1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Nd(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Nd(12)}},o2={};gb(FI,function(e,t){o2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),o2.deleteProperty=function(e,t){return o2.set.call(this,e,t,void 0)},o2.set=function(e,t,n){return FI.set.call(this,e[0],t,n,e[0])};var zDt=function(){function e(n){var r=this;this.O=rme,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return l.produce(m,function(w){var x;return(x=s).call.apply(x,[g,w].concat(v))})}}var u;if(typeof s!="function"&&Nd(6),o!==void 0&&typeof o!="function"&&Nd(7),Ym(i)){var c=Jpe(r),d=KH(r,i,void 0),f=!0;try{u=s(d),f=!1}finally{f?R3(c):YH(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(m){return E9(c,o),S9(m,c)},function(m){throw R3(c),m}):(E9(c,o),S9(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===TDe&&(u=void 0),r.D&&kee(u,!0),o){var h=[],p=[];Rh("Patches").M(i,u,h,p),o(h,p)}return u}Nd(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return r.produceWithPatches(u,function(h){return i.apply(void 0,[h].concat(d))})};var o,a,l=r.produce(i,s,function(u,c){o=u,a=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Ym(n)||Nd(8),yy(n)&&(n=$Dt(n));var r=Jpe(this),i=KH(this,n,void 0);return i[bi].C=!0,YH(r),i},t.finishDraft=function(n,r){var i=n&&n[bi],s=i.A;return E9(s,r),S9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!rme&&Nd(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Rh("Patches").$;return yy(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),zu=new zDt,UDt=zu.produce;zu.produceWithPatches.bind(zu);zu.setAutoFreeze.bind(zu);zu.setUseProxies.bind(zu);zu.applyPatches.bind(zu);zu.createDraft.bind(zu);zu.finishDraft.bind(zu);const ADe=UDt;function jI(e){"@babel/helpers - typeof";return jI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jI(e)}function VDt(e,t){if(jI(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(jI(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HDt(e){var t=VDt(e,"string");return jI(t)=="symbol"?t:t+""}function qDt(e,t,n){return(t=HDt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sme(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ome(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sme(Object(n),!0).forEach(function(r){qDt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sme(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ea(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var ame=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),A9=function(){return Math.random().toString(36).substring(7).split("").join(".")},O3={INIT:"@@redux/INIT"+A9(),REPLACE:"@@redux/REPLACE"+A9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+A9()}};function WDt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function IDe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ea(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ea(1));return n(IDe)(e,t)}if(typeof e!="function")throw new Error(ea(2));var i=e,s=t,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function c(){if(l)throw new Error(ea(3));return s}function d(m){if(typeof m!="function")throw new Error(ea(4));if(l)throw new Error(ea(5));var g=!0;return u(),a.push(m),function(){if(g){if(l)throw new Error(ea(6));g=!1,u();var v=a.indexOf(m);a.splice(v,1),o=null}}}function f(m){if(!WDt(m))throw new Error(ea(7));if(typeof m.type>"u")throw new Error(ea(8));if(l)throw new Error(ea(9));try{l=!0,s=i(s,m)}finally{l=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(ea(10));i=m,f({type:O3.REPLACE})}function p(){var m,g=d;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(ea(11));function _(){v.next&&v.next(c())}_();var w=g(_);return{unsubscribe:w}}},m[ame]=function(){return this},m}return f({type:O3.INIT}),r={dispatch:f,subscribe:d,getState:c,replaceReducer:h},r[ame]=p,r}function GDt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:O3.INIT});if(typeof r>"u")throw new Error(ea(12));if(typeof n(void 0,{type:O3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ea(13))})}function YDt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{GDt(n)}catch(a){o=a}return function(l,u){if(l===void 0&&(l={}),o)throw o;for(var c=!1,d={},f=0;f<s.length;f++){var h=s[f],p=n[h],m=l[h],g=p(m,u);if(typeof g>"u")throw u&&u.type,new Error(ea(14));d[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(l).length,c?d:l}}function D3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function KDt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(ea(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(l){return l(o)});return s=D3.apply(void 0,a)(i.dispatch),ome(ome({},i),{},{dispatch:s})}}}function kDe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var QH=kDe();QH.withExtraArgument=kDe;var RDe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kR=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},yb=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},XDt=Object.defineProperty,QDt=Object.defineProperties,JDt=Object.getOwnPropertyDescriptors,lme=Object.getOwnPropertySymbols,ZDt=Object.prototype.hasOwnProperty,eMt=Object.prototype.propertyIsEnumerable,ume=function(e,t,n){return t in e?XDt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},U0=function(e,t){for(var n in t||(t={}))ZDt.call(t,n)&&ume(e,n,t[n]);if(lme)for(var r=0,i=lme(t);r<i.length;r++){var n=i[r];eMt.call(t,n)&&ume(e,n,t[n])}return e},I9=function(e,t){return QDt(e,JDt(t))},RR=function(e,t,n){return new Promise(function(r,i){var s=function(l){try{a(n.next(l))}catch(u){i(u)}},o=function(l){try{a(n.throw(l))}catch(u){i(u)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(s,o)};a((n=n.apply(e,t)).next())})},tMt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?D3:D3.apply(null,arguments)};function PDe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var nMt=function(e){return e&&typeof e.match=="function"};function Ph(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return U0(U0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function rMt(e){return PDe(e)&&"type"in e}var iMt=function(e){RDe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,yb([void 0],n[0].concat(this)))):new(t.bind.apply(t,yb([void 0],n.concat(this))))},t}(Array),sMt=function(e){RDe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,yb([void 0],n[0].concat(this)))):new(t.bind.apply(t,yb([void 0],n.concat(this))))},t}(Array);function JH(e){return Ym(e)?ADe(e,function(){}):e}function oMt(e){return typeof e=="boolean"}function aMt(){return function(t){return lMt(t)}}function lMt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new iMt;return n&&(oMt(n)?r.push(QH):r.push(QH.withExtraArgument(n.extraArgument))),r}var uMt=!0;function cMt(e){var t=aMt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,l=a===void 0?!0:a,u=n.preloadedState,c=u===void 0?void 0:u,d=n.enhancers,f=d===void 0?void 0:d,h;if(typeof i=="function")h=i;else if(PDe(i))h=YDt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=KDt.apply(void 0,p),g=D3;l&&(g=tMt(U0({trace:!uMt},typeof l=="object"&&l)));var y=new sMt(m),v=y;Array.isArray(f)?v=yb([m],f):typeof f=="function"&&(v=f(y));var _=g.apply(void 0,v);return IDe(h,c,_)}function NDe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function dMt(e){return typeof e=="function"}function fMt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?NDe(t):[t,n,r],s=i[0],o=i[1],a=i[2],l;if(dMt(e))l=function(){return JH(e())};else{var u=JH(e);l=function(){return u}}function c(d,f){d===void 0&&(d=l());var h=yb([s[f.type]],o.filter(function(p){var m=p.matcher;return m(f)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(yy(p)){var g=p,y=m(g,f);return y===void 0?p:y}else{if(Ym(p))return ADe(p,function(v){return m(v,f)});var y=m(p,f);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},d)}return c.getInitialState=l,c}function hMt(e,t){return e+"/"+t}function pMt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:JH(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var d=r[c],f=hMt(t,c),h,p;"reducer"in d?(h=d.reducer,p=d.prepare):h=d,s[c]=h,o[f]=h,a[c]=p?Ph(f,p):Ph(f)});function l(){var c=typeof e.extraReducers=="function"?NDe(e.extraReducers):[e.extraReducers],d=c[0],f=d===void 0?{}:d,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=U0(U0({},f),o);return fMt(n,function(v){for(var _ in y)v.addCase(_,y[_]);for(var w=0,x=p;w<x.length;w++){var S=x[w];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var u;return{name:t,reducer:function(c,d){return u||(u=l()),u(c,d)},actions:a,caseReducers:s,getInitialState:function(){return u||(u=l()),u.getInitialState()}}}var mMt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ODe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=mMt[Math.random()*64|0];return t},gMt=["name","message","stack","code"],k9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),cme=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),yMt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=gMt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Ph(t+"/fulfilled",function(u,c,d,f){return{payload:u,meta:I9(U0({},f||{}),{arg:d,requestId:c,requestStatus:"fulfilled"})}}),s=Ph(t+"/pending",function(u,c,d){return{payload:void 0,meta:I9(U0({},d||{}),{arg:c,requestId:u,requestStatus:"pending"})}}),o=Ph(t+"/rejected",function(u,c,d,f,h){return{payload:f,error:(r&&r.serializeError||yMt)(u||"Rejected"),meta:I9(U0({},h||{}),{arg:d,requestId:c,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){},u}();function l(u){return function(c,d,f){var h=r!=null&&r.idGenerator?r.idGenerator(u):ODe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return RR(this,null,function(){var v,_,w,x,S,E,T;return kR(this,function(I){switch(I.label){case 0:return I.trys.push([0,4,,5]),x=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,u,{getState:d,extra:f}),bMt(x)?[4,x]:[3,2];case 1:x=I.sent(),I.label=2;case 2:if(x===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(k,P){return p.signal.addEventListener("abort",function(){return P({name:"AbortError",message:m||"Aborted"})})}),c(s(h,u,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:u},{getState:d,extra:f}))),[4,Promise.race([S,Promise.resolve(n(u,{dispatch:c,getState:d,extra:f,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(k,P){return new k9(k,P)},fulfillWithValue:function(k,P){return new cme(k,P)}})).then(function(k){if(k instanceof k9)throw k;return k instanceof cme?i(k.payload,h,u,k.meta):i(k,h,u)})])];case 3:return w=I.sent(),[3,5];case 4:return E=I.sent(),w=E instanceof k9?o(null,h,u,E.payload,E.meta):o(E,h,u),[3,5];case 5:return T=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,T||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:u,unwrap:function(){return y.then(vMt)}})}}return Object.assign(l,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function vMt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function bMt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var _Mt=function(e,t){return nMt(e)?e.match(t):e(t)};function dme(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return _Mt(r,n)})}}var Nee=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},ZH=function(){},DDe=function(e,t){return t===void 0&&(t=ZH),e.catch(t),e},MDe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},wx=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},wMt="task",$De="listener",LDe="completed",Oee="cancelled",xMt="task-"+Oee,EMt="task-"+LDe,FDe=$De+"-"+Oee,SMt=$De+"-"+LDe,I4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=wMt+" "+Oee+" (reason: "+t+")"}return e}(),xx=function(e){if(e.aborted)throw new I4(e.reason)};function jDe(e,t){var n=ZH;return new Promise(function(r,i){var s=function(){return i(new I4(e.reason))};if(e.aborted){s();return}n=MDe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=ZH})}var TMt=function(e,t){return RR(void 0,null,function(){var n,r;return kR(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof I4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},M3=function(e){return function(t){return DDe(jDe(e,t).then(function(n){return xx(e),n}))}},BDe=function(e){var t=M3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},CMt=Object.assign,fme={},PR="listenerMiddleware",AMt=function(e,t){var n=function(r){return MDe(e,function(){return wx(r,e.reason)})};return function(r,i){Nee(r,"taskExecutor");var s=new AbortController;n(s);var o=TMt(function(){return RR(void 0,null,function(){var a;return kR(this,function(l){switch(l.label){case 0:return xx(e),xx(s.signal),[4,r({pause:M3(s.signal),delay:BDe(s.signal),signal:s.signal})];case 1:return a=l.sent(),xx(s.signal),[2,a]}})})},function(){return wx(s,EMt)});return i!=null&&i.autoJoin&&t.push(o),{result:M3(e)(o),cancel:function(){wx(s,xMt)}}}},IMt=function(e,t){var n=function(r,i){return RR(void 0,null,function(){var s,o,a,l;return kR(this,function(u){switch(u.label){case 0:xx(t),s=function(){},o=new Promise(function(c,d){var f=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){f(),d()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,jDe(t,Promise.race(a))];case 2:return l=u.sent(),xx(t),[2,l];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return DDe(n(r,i))}},zDe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Ph(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Nee(s,"options.listener"),{predicate:i,type:t,effect:s}},kMt=function(e){var t=zDe(e),n=t.type,r=t.predicate,i=t.effect,s=ODe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},eq=function(e){e.pending.forEach(function(t){wx(t,FDe)})},RMt=function(e){return function(){e.forEach(eq),e.clear()}},hme=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},PMt=Ph(PR+"/add"),NMt=Ph(PR+"/removeAll"),OMt=Ph(PR+"/remove"),DMt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,yb([PR+"/error"],e))};function MMt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?DMt:i;Nee(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&eq(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},l=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=kMt(h)),o(p)},u=function(h){var p=zDe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(_){var w=typeof m=="string"?_.type===m:_.predicate===y;return w&&_.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&eq(v)),!!v},c=function(h,p,m,g){return RR(t,null,function(){var y,v,_,w;return kR(this,function(x){switch(x.label){case 0:y=new AbortController,v=IMt(l,y.signal),_=[],x.label=1;case 1:return x.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,CMt({},m,{getOriginalState:g,condition:function(S,E){return v(S,E).then(Boolean)},take:v,delay:BDe(y.signal),pause:M3(y.signal),extra:r,signal:y.signal,fork:AMt(y.signal,_),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,E,T){S!==y&&(wx(S,FDe),T.delete(S))})}})))];case 2:return x.sent(),[3,6];case 3:return w=x.sent(),w instanceof I4||hme(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(_)];case 5:return x.sent(),wx(y,SMt),h.pending.delete(y),[7];case 6:return[2]}})})},d=RMt(n),f=function(h){return function(p){return function(m){if(!rMt(m))return p(m);if(PMt.match(m))return l(m.payload);if(NMt.match(m)){d();return}if(OMt.match(m))return u(m.payload);var g=h.getState(),y=function(){if(g===fme)throw new Error(PR+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var _=h.getState(),w=Array.from(n.values()),x=0,S=w;x<S.length;x++){var E=S[x],T=!1;try{T=E.predicate(m,_,g)}catch(I){T=!1,hme(s,I,{raisedBy:"predicate"})}T&&c(E,m,h,y)}}finally{g=fme}return v}}};return{middleware:f,startListening:l,stopListening:u,clearListeners:d}}var pme;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);LDt();function $Mt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let QN;const LMt=new Uint8Array(16);function FMt(){if(!QN&&(QN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!QN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return QN(LMt)}const ao=[];for(let e=0;e<256;++e)ao.push((e+256).toString(16).slice(1));function jMt(e,t=0){return(ao[e[t+0]]+ao[e[t+1]]+ao[e[t+2]]+ao[e[t+3]]+"-"+ao[e[t+4]]+ao[e[t+5]]+"-"+ao[e[t+6]]+ao[e[t+7]]+"-"+ao[e[t+8]]+ao[e[t+9]]+"-"+ao[e[t+10]]+ao[e[t+11]]+ao[e[t+12]]+ao[e[t+13]]+ao[e[t+14]]+ao[e[t+15]]).toLowerCase()}const BMt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),mme={randomUUID:BMt};function gme(e,t,n){if(mme.randomUUID&&!t&&!e)return mme.randomUUID();e=e||{};const r=e.random||(e.rng||FMt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,jMt(r)}class Nh{static get(){let t=gme();for(;this.ids.has(t);)t=gme();return this.ids.set(t,!0),t}}Nh.ids=new Map;function Kd(e){return"parent"in e}function zMt(e){return!Kd(e)}function UMt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((l,u)=>(l[u]=[],i&&i[u]&&l[u].push({type:u,id:Nh.get(),val:i[u],createdOn:Date.now()}),l),s),a=r?[{id:Nh.get(),createdOn:Date.now(),val:r}]:[];return{id:Nh.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function VMt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},l=Object.keys(i||{}).reduce((c,d)=>(c[d]=[],i&&i[d]&&c[d].push({type:d,id:Nh.get(),val:i[d],createdOn:Date.now()}),c),a),u=s?[{id:Nh.get(),createdOn:Date.now(),val:s}]:[];return{id:Nh.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:l,artifacts:u,sideEffects:r,state:t,level:e.level+1}}function Ui(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=JMt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function vb(e){return!!e&&!!e[Uu]}function vy(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===ZMt}(e)||Array.isArray(e)||!!e[hA]||!!(!((t=e.constructor)===null||t===void 0)&&t[hA])||k4(e)||R4(e))}function _E(e,t,n){n===void 0&&(n=!1),by(e)===0?(n?Object.keys:jee)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function by(e){var t=e[Uu];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:k4(e)?2:R4(e)?3:0}function BI(e,t){return by(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function MD(e,t){return by(e)===2?e.get(t):e[t]}function UDe(e,t,n){var r=by(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function HMt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function k4(e){return XMt&&e instanceof Map}function R4(e){return QMt&&e instanceof Set}function t1(e){return e.o||e.t}function Dee(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=e$t(e);delete t[Uu];for(var n=jee(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Mee(e,t){return t===void 0&&(t=!1),$ee(e)||vb(e)||!vy(e)||(by(e)>1&&(e.set=e.add=e.clear=e.delete=qMt),Object.freeze(e),t&&_E(e,function(n,r){return Mee(r,!0)},!0)),e}function qMt(){Ui(2)}function $ee(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Oh(e){var t=iq[e];return t||Ui(18,e),t}function WMt(e,t){iq[e]||(iq[e]=t)}function yme(){return{}.NODE_ENV==="production"||wE||Ui(0),wE}function R9(e,t){t&&(Oh("Patches"),e.u=[],e.s=[],e.v=t)}function $3(e){tq(e),e.p.forEach(GMt),e.p=null}function tq(e){e===wE&&(wE=e.l)}function vme(e){return wE={p:[],l:wE,h:e,m:!0,_:0}}function GMt(e){var t=e[Uu];t.i===0||t.i===1?t.j():t.O=!0}function P9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Oh("ES5").S(t,e,r),r?(n[Uu].P&&($3(t),Ui(4)),vy(e)&&(e=L3(t,e),t.l||F3(t,e)),t.u&&Oh("Patches").M(n[Uu].t,e,t.u,t.s)):e=L3(t,n,[]),$3(t),t.u&&t.v(t.u,t.s),e!==Fee?e:void 0}function L3(e,t,n){if($ee(t))return t;var r=t[Uu];if(!r)return _E(t,function(s,o){return bme(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return F3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Dee(r.k):r.o;_E(r.i===3?new Set(i):i,function(s,o){return bme(e,r,i,s,o,n)}),F3(e,i,!1),n&&e.u&&Oh("Patches").R(r,n,e.u,e.s)}return r.o}function bme(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Ui(5),vb(i)){var o=L3(e,i,s&&t&&t.i!==3&&!BI(t.D,r)?s.concat(r):void 0);if(UDe(n,r,o),!vb(o))return;e.m=!1}if(vy(i)&&!$ee(i)){if(!e.h.F&&e._<1)return;L3(e,i),t&&t.A.l||F3(e,i)}}function F3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&Mee(t,n)}function N9(e,t){var n=e[Uu];return(n?t1(n):e)[t]}function _me(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function nq(e){e.P||(e.P=!0,e.l&&nq(e.l))}function O9(e){e.o||(e.o=Dee(e.t))}function rq(e,t,n){var r=k4(t)?Oh("MapSet").N(t,n):R4(t)?Oh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:yme(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,u=sq;o&&(l=[a],u=a2);var c=Proxy.revocable(l,u),d=c.revoke,f=c.proxy;return a.k=f,a.j=d,f}(t,n):Oh("ES5").J(t,n);return(n?n.A:yme()).p.push(r),r}function YMt(e){return vb(e)||Ui(22,e),function t(n){if(!vy(n))return n;var r,i=n[Uu],s=by(n);if(i){if(!i.P&&(i.i<4||!Oh("ES5").K(i)))return i.t;i.I=!0,r=wme(n,s),i.I=!1}else r=wme(n,s);return _E(r,function(o,a){i&&MD(i.t,o)===a||UDe(r,o,t(a))}),s===3?new Set(r):r}(e)}function wme(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Dee(e)}function KMt(){function e(r){if(!vy(r))return r;if(Array.isArray(r))return r.map(e);if(k4(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(R4(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return BI(r,hA)&&(i[hA]=r[hA]),i}function t(r){return vb(r)?e(r):r}var n="add";WMt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,l=r,u=0;u<o.length-1;u++){var c=by(l),d=""+o[u];c!==0&&c!==1||d!=="__proto__"&&d!=="constructor"||Ui(24),typeof l=="function"&&d==="prototype"&&Ui(24),typeof(l=MD(l,d))!="object"&&Ui(15,o.join("/"))}var f=by(l),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(f){case 2:return l.set(p,h);case 3:Ui(16);default:return l[p]=h}case n:switch(f){case 1:return p==="-"?l.push(h):l.splice(p,0,h);case 2:return l.set(p,h);case 3:return l.add(h);default:return l[p]=h}case"remove":switch(f){case 1:return l.splice(p,1);case 2:return l.delete(p);case 3:return l.delete(s.value);default:return delete l[p]}default:Ui(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,l,u,c){var d=a.t,f=a.o;_E(a.D,function(h,p){var m=MD(d,h),g=MD(f,h),y=p?BI(d,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=l.concat(h);u.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,l,u,c){var d=a.t,f=a.D,h=a.o;if(h.length<d.length){var p=[h,d];d=p[0],h=p[1];var m=[c,u];u=m[0],c=m[1]}for(var g=0;g<d.length;g++)if(f[g]&&h[g]!==d[g]){var y=l.concat([g]);u.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(d[g])})}for(var v=d.length;v<h.length;v++){var _=l.concat([v]);u.push({op:n,path:_,value:t(h[v])})}d.length<h.length&&c.push({op:"replace",path:l.concat(["length"]),value:d.length})}(r,i,s,o);case 3:return function(a,l,u,c){var d=a.t,f=a.o,h=0;d.forEach(function(p){if(!f.has(p)){var m=l.concat([h]);u.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,f.forEach(function(p){if(!d.has(p)){var m=l.concat([h]);u.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===Fee?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var xme,wE,Lee=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",XMt=typeof Map<"u",QMt=typeof Set<"u",Eme=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Fee=Lee?Symbol.for("immer-nothing"):((xme={})["immer-nothing"]=!0,xme),hA=Lee?Symbol.for("immer-draftable"):"__$immer_draftable",Uu=Lee?Symbol.for("immer-state"):"__$immer_state",JMt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},ZMt=""+Object.prototype.constructor,jee=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,e$t=Object.getOwnPropertyDescriptors||function(e){var t={};return jee(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},iq={},sq={get:function(e,t){if(t===Uu)return e;var n=t1(e);if(!BI(n,t))return function(i,s,o){var a,l=_me(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!vy(r)?r:r===N9(e.t,t)?(O9(e),e.o[t]=rq(e.A.h,r,e)):r},has:function(e,t){return t in t1(e)},ownKeys:function(e){return Reflect.ownKeys(t1(e))},set:function(e,t,n){var r=_me(t1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=N9(t1(e),t),s=i==null?void 0:i[Uu];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(HMt(n,i)&&(n!==void 0||BI(e.t,t)))return!0;O9(e),nq(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return N9(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,O9(e),nq(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=t1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Ui(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ui(12)}},a2={};_E(sq,function(e,t){a2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),a2.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Ui(13),a2.set.call(this,e,t,void 0)},a2.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Ui(14),sq.set.call(this,e[0],t,n,e[0])};var t$t=function(){function e(n){var r=this;this.g=Eme,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return l.produce(m,function(w){var x;return(x=s).call.apply(x,[g,w].concat(v))})}}var u;if(typeof s!="function"&&Ui(6),o!==void 0&&typeof o!="function"&&Ui(7),vy(i)){var c=vme(r),d=rq(r,i,void 0),f=!0;try{u=s(d),f=!1}finally{f?$3(c):tq(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(m){return R9(c,o),P9(m,c)},function(m){throw $3(c),m}):(R9(c,o),P9(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===Fee&&(u=void 0),r.F&&Mee(u,!0),o){var h=[],p=[];Oh("Patches").M(i,u,h,p),o(h,p)}return u}Ui(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return r.produceWithPatches(u,function(h){return i.apply(void 0,[h].concat(d))})};var o,a,l=r.produce(i,s,function(u,c){o=u,a=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){vy(n)||Ui(8),vb(n)&&(n=YMt(n));var r=vme(this),i=rq(this,n,void 0);return i[Uu].C=!0,tq(r),i},t.finishDraft=function(n,r){var i=n&&n[Uu];({}).NODE_ENV!=="production"&&(i&&i.C||Ui(9),i.I&&Ui(10));var s=i.A;return R9(s,r),P9(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Eme&&Ui(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Oh("Patches").$;return vb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Vu=new t$t,n$t=Vu.produce;Vu.produceWithPatches.bind(Vu);Vu.setAutoFreeze.bind(Vu);Vu.setUseProxies.bind(Vu);Vu.applyPatches.bind(Vu);Vu.createDraft.bind(Vu);Vu.finishDraft.bind(Vu);function r$t(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=UMt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return pMt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,l){const{id:u,meta:c}=l.payload,d=a.nodes[u].meta,f=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Nh.get(),val:c[p],createdOn:Date.now()}),h),d);a.nodes[l.payload.id].meta=f},addArtifact(a,l){a.nodes[l.payload.id].artifacts.push({id:Nh.get(),createdOn:Date.now(),val:l.payload.artifact})},changeCurrent(a,l){a.current=l.payload},addNode(a,{payload:l}){a.nodes[l.id]=l,a.nodes[l.parent].children.push(l.id),a.current=l.id},load(a,{payload:l}){return l}}})}function i$t(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=r$t(e),s=MMt();s.startListening({matcher:dme(r.changeCurrent,r.addNode),effect:(a,l)=>{l.cancelActiveListeners(),t.forEach(u=>{const c=dme(r.addNode)(a),{skipOnNew:d}=u.config;d&&c||u.func(c?"new":"traversal")})}});const o=cMt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,l){const u={id:Nh.get(),func:a,config:l};return t.set(u.id,u),()=>t.delete(u.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var s$t=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),o$t=Object.prototype.hasOwnProperty;function oq(e,t){return o$t.call(e,t)}function aq(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)oq(e,i)&&r.push(i);return r}function Ml(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function lq(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function n1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function VDe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function uq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(uq(e[t]))return!0}else if(typeof e=="object"){for(var r=aq(e),i=r.length,s=0;s<i;s++)if(uq(e[r[s]]))return!0}}return!1}function Sme(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var HDe=function(e){s$t(t,e);function t(n,r,i,s,o){var a=this.constructor,l=e.call(this,Sme(n,{name:r,index:i,operation:s,tree:o}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=Sme(n,{name:r,index:i,operation:s,tree:o}),l}return t}(Error),Li=HDe,a$t=Ml,qw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=j3(n,this.path);r&&(r=Ml(r));var i=z1(n,{op:"remove",path:this.from}).removed;return z1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=j3(n,this.from);return z1(n,{op:"add",path:this.path,value:Ml(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:zI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},l$t={add:function(e,t,n){return lq(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:qw.move,copy:qw.copy,test:qw.test,_get:qw._get};function j3(e,t){if(t=="")return e;var n={op:"_get",path:t};return z1(e,n),n.value}function z1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):B3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=j3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=zI(e,t.value),o.test===!1)throw new Li("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Li("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Ml(e));var a=t.path||"",l=a.split("/"),u=e,c=1,d=l.length,f=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=B3;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=VDe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(u[h]===void 0?f=l.slice(0,c).join("/"):c==d-1&&(f=t.path),f!==void 0&&p(t,0,e,f)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!lq(h))throw new Li("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);lq(h)&&(h=~~h)}if(c>=d){if(n&&t.op==="add"&&h>u.length)throw new Li("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=l$t[t.op].call(t,u,h,e);if(o.test===!1)throw new Li("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=d){var o=qw[t.op].call(t,u,h,e);if(o.test===!1)throw new Li("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(u=u[h],n&&c<d&&(!u||typeof u!="object"))throw new Li("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function P4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Li("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ml(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=z1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function u$t(e,t,n){var r=z1(e,t);if(r.test===!1)throw new Li("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function B3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Li("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(qw[e.op]){if(typeof e.path!="string")throw new Li("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Li('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Li("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Li("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&uq(e.value))throw new Li("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Li("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Li("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=qDe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Li("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Li("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function qDe(e,t,n){try{if(!Array.isArray(e))throw new Li("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)P4(Ml(t),Ml(e),n||!0);else{n=n||B3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Li)return i;throw i}}function zI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!zI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!zI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const c$t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Li,_areEquals:zI,applyOperation:z1,applyPatch:P4,applyReducer:u$t,deepClone:a$t,getValueByPointer:j3,validate:qDe,validator:B3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Bee=new WeakMap,d$t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),f$t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function h$t(e){return Bee.get(e)}function p$t(e,t){return e.observers.get(t)}function m$t(e,t){e.observers.delete(t.callback)}function g$t(e,t){t.unobserve()}function y$t(e,t){var n=[],r,i=h$t(e);if(!i)i=new d$t(e),Bee.set(e,i);else{var s=p$t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Ml(e),t){r.callback=t,r.next=null;var o=function(){cq(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){cq(r),clearTimeout(r.next),m$t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new f$t(t,r)),r}function cq(e,t){t===void 0&&(t=!1);var n=Bee.get(e.object);zee(n.value,e.object,e.patches,"",t),e.patches.length&&P4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function zee(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=aq(t),o=aq(e),a=!1,l=o.length-1;l>=0;l--){var u=o[l],c=e[u];if(oq(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?zee(c,d,n,r+"/"+n1(u),i):c!==d&&(i&&n.push({op:"test",path:r+"/"+n1(u),value:Ml(c)}),n.push({op:"replace",path:r+"/"+n1(u),value:Ml(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+n1(u),value:Ml(c)}),n.push({op:"remove",path:r+"/"+n1(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var l=0;l<s.length;l++){var u=s[l];!oq(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+n1(u),value:Ml(t[u])})}}}function WDe(e,t,n){n===void 0&&(n=!1);var r=[];return zee(e,t,r,"",n),r}const v$t=Object.freeze(Object.defineProperty({__proto__:null,compare:WDe,generate:cq,observe:y$t,unobserve:g$t},Symbol.toStringTag,{value:"Module"}));Object.assign({},c$t,v$t,{JsonPatchError:HDe,deepClone:Ml,escapePathComponent:n1,unescapePathComponent:VDe});var l2=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(l2||{});function $D(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=GDe(i,e,t);s.shift();const o=s.map(l=>t[l]).map(l=>l.state.val).reduce((l,u)=>[...l,...u],[]),a=$D(i,t);return P4(a,Ml(o),!0,!1).newDocument}function b$t(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function dq({registry:e,initialState:t}){let n=!1;const r=$Mt(),i=i$t(t);function s(c){return i.backend.nodes[c]}r.listen(l2.TRAVERSAL_START,()=>{n=!0}),r.listen(l2.TRAVERSAL_END,()=>{n=!1});const o={add(c,d=i.current.id){i.update(i.addMetadata({id:d,meta:c}))},latestOfType(c,d=i.current.id){var f;return(f=i.backend.nodes[d].meta[c])==null?void 0:f.at(-1)},allOfType(c,d=i.current.id){return i.backend.nodes[d].meta[c]},latest(c=i.current.id){const d=i.backend.nodes[c].meta,f=Object.keys(d).reduce((h,p)=>{const m=d[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(f).length>0?f:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,d=i.current.id){i.update(i.addArtifact({id:d,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},l={add(c,d=i.current.id){o.add({annotation:c},d)},latest(c=i.current.id){var d;return(d=o.latestOfType("annotation",c))==null?void 0:d.val},all(c=i.current.id){var d;return(d=o.allOfType("annotation",c))==null?void 0:d.map(f=>f.val)}},u={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var d;return!!((d=o.latestOfType("bookmark",c))!=null&&d.val)},toggle(c=i.current.id){u.is(c)?u.remove(c):u.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return $D(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:d,sideEffects:f,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=$D(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:d};else{const v=WDe(y,d);if(b$t(d,v)==="checkpoint")g={type:"checkpoint",val:d};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:_}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=VMt({label:c,state:g,parent:this.current,sideEffects:f,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,d){const f=e.get(d.type),h=$D(this.current,this.graph.backend.nodes);if(f.config.hasSideEffects){const{do:p=d,undo:m}=f.func(d.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:f.config.eventType})}else{const p=f.func(h,d.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:f.config.eventType})}},async to(c){r.fire(l2.TRAVERSAL_START);const d=GDe(i.current,i.backend.nodes[c],i.backend.nodes),f=[];for(let h=0;h<d.length-1;++h){const p=s(d[h]),m=s(d[h+1]);w$t(p,m)?Kd(p)&&f.push(...p.sideEffects.undo):Kd(m)&&f.push(...m.sideEffects.do)}for(const h of f){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(l2.TRAVERSAL_END)},undo(){const{current:c}=i;return Kd(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:d}=i;return d.children.length>0?this.to(d.children[c==="oldest"?0:d.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,d=!1){return i.currentChange(c,{skipOnNew:d})},done(){console.log("Setup later for URL sharing.")},tree(){return YDe(i.root,i.backend.nodes)},on(c,d){r.listen(c,d)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const d=JSON.parse(c),f=d.current;d.current=d.root,i.update(i.load(d)),this.to(f)},importObject(c){const d=c.current;c.current=c.root,i.update(i.load(c)),this.to(d)},metadata:o,artifact:a,annotations:l,bookmarks:u}}function _$t(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Kd(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Kd(r)&&(r=n[r.parent]),Kd(i)&&(i=n[i.parent]);return r.id}function GDe(e,t,n){const r=_$t(e,t,n),i=n[r],s=[],o=[];let[a,l]=[e,t];for(;a.id!==i.id;)s.push(a),Kd(a)&&(a=n[a.parent]);for(s.push(a);l.id!==i.id;)o.push(l),Kd(l)&&(l=n[l.parent]);const u=o.reverse();return[...s,...u].map(c=>c.id)}function w$t(e,t){if(Kd(e)&&e.parent===t.id)return!0;if(Kd(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function YDe(e,t){return{...e,children:e.children.map(n=>YDe(t[n],t)),name:`${e.label}`}}KMt();function x$t(e){return e.length===2?n$t(e):e}class UI{static create(){return new UI}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:x$t(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Ph(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var E$t="Expected a function",Tme=NaN,S$t="[object Symbol]",T$t=/^\s+|\s+$/g,C$t=/^[-+]0x[0-9a-f]+$/i,A$t=/^0b[01]+$/i,I$t=/^0o[0-7]+$/i,k$t=parseInt,R$t=typeof qi=="object"&&qi&&qi.Object===Object&&qi,P$t=typeof self=="object"&&self&&self.Object===Object&&self,N$t=R$t||P$t||Function("return this")(),O$t=Object.prototype,D$t=O$t.toString,M$t=Math.max,$$t=Math.min,D9=function(){return N$t.Date.now()};function L$t(e,t,n){var r,i,s,o,a,l,u=0,c=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(E$t);t=Cme(t)||0,fq(n)&&(c=!!n.leading,d="maxWait"in n,s=d?M$t(Cme(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function h(S){var E=r,T=i;return r=i=void 0,u=S,o=e.apply(T,E),o}function p(S){return u=S,a=setTimeout(y,t),c?h(S):o}function m(S){var E=S-l,T=S-u,I=t-E;return d?$$t(I,s-T):I}function g(S){var E=S-l,T=S-u;return l===void 0||E>=t||E<0||d&&T>=s}function y(){var S=D9();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,f&&r?h(S):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function w(){return a===void 0?o:v(D9())}function x(){var S=D9(),E=g(S);if(r=arguments,i=this,l=S,E){if(a===void 0)return p(l);if(d)return a=setTimeout(y,t),h(l)}return a===void 0&&(a=setTimeout(y,t)),o}return x.cancel=_,x.flush=w,x}function fq(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function F$t(e){return!!e&&typeof e=="object"}function j$t(e){return typeof e=="symbol"||F$t(e)&&D$t.call(e)==S$t}function Cme(e){if(typeof e=="number")return e;if(j$t(e))return Tme;if(fq(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=fq(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(T$t,"");var n=A$t.test(e);return n||I$t.test(e)?k$t(e.slice(2),n?2:8):C$t.test(e)?Tme:+e}var B$t=L$t;const vd=rl(B$t);function KDe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=A.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=A.useMemo(()=>CS(".2s"),[]);return b.jsxs(b.Fragment,{children:[b.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:b.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:b.jsx(Ya,{children:b.jsx(gn,{gap:3,children:b.jsx(Xe,{size:"14px",style:{color:"#878E95"},children:r})})})})}),b.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),b.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>b.jsxs("g",{transform:`translate(${n}, ${a})`,children:[b.jsx("line",{x2:"-6",stroke:"currentColor"}),b.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),b.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const z$t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:KDe},Symbol.toStringTag,{value:"Module"})),M9=15;function XDe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0,currSelected:a,svgRef:l}){const[u,c]=A.useState([0,0]),[d,f]=A.useState(!1);return A.useEffect(()=>{const h=mo(l.current);if(h){const p=h.node().getBoundingClientRect();h.on("mousemove",m=>{const g=[m.clientX-p.x,m.clientY-p.y];if(c(g),d){const y=i.filter(v=>Math.abs(e(v[r.x])-g[0])<M9&&Math.abs(t(v[r.y])-g[1])<M9);if(m.ctrlKey||m.metaKey||!o){const v=new Set(a);y.forEach(w=>{v.has(w[r.ids])&&v.delete(w[r.ids])});const _=Array.from(v);n([[u[0],u[1]],[u[0],u[1]]],e,t,_.length===0?"clear":"drag",s.id,_)}else{const v=Array.from(new Set([...a,...y.map(_=>_[r.ids])]));v.length>0&&n([[u[0],u[1]],[u[0],u[1]]],e,t,"drag",s.id,v)}}}),h.on("mousedown",m=>{f(!0),m.stopPropagation(),m.preventDefault()}),h.on("mouseup",()=>{f(!1)})}},[u,s.id,a,i,d,o,r,n,l,e,t]),b.jsx("circle",{style:{cursor:d?"pointer":"default",pointerEvents:"none"},r:M9,fill:"darkgray",opacity:.5,cx:s.x1,cy:s.y1})}const U$t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:XDe},Symbol.toStringTag,{value:"Module"}));function p1(e){const t=A.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return A.useLayoutEffect(()=>{t.current=e}),A.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const qr={top:15,left:100,right:15,bottom:130};function QDe({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,initialParams:i,data:s,brushedPoints:o,onClose:a,isPaintbrushSelect:l,setIsPaintbrushSelect:u}){const[c,{height:d,width:f}]=Vd(),[h,p]=A.useState(i),[m]=Vd(),[g]=Vd(),y=A.useMemo(()=>f-qr.left-qr.right,[f]),v=A.useMemo(()=>d-qr.top-qr.bottom,[d]),_=A.useMemo(()=>{const R=Array.from(new Set(s.map($=>$[h.category])));return IS(iRe).domain(R)},[s,h.category]),{xMin:w,yMin:x,xMax:S,yMax:E}=A.useMemo(()=>{const R=s.map(V=>+V[h.x]).filter(V=>V!==null),[$,D]=nh(R),O=s.map(V=>+V[h.y]).filter(V=>V!==null),[F,U]=nh(O);return{xMin:$,xMax:D,yMin:F,yMax:U}},[s,h.x,h.y]),T=A.useMemo(()=>{const R=S-w;return y<=0?null:h.dataType==="date"?Jke([qr.left,y+qr.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Ba([qr.left,y+qr.left]).domain([w-R/10,S+R/10]).nice()},[h.dataType,y,S,w]),I=A.useMemo(()=>{const R=E-x;return v<=0?null:Ba([v+qr.top,qr.top]).domain([x-R/10,E+R/10]).nice()},[v,E,x]);A.useMemo(()=>{if(!T||!I)return()=>null;if(r==="Axis Selection"){const R=Kwt().extent([[qr.left,qr.top+v-5],[qr.left+y,qr.top+v+5]]).on("brush end",D=>{D.sourceEvent!==void 0&&n([[D.selection[0],null],[D.selection[1],null]],T,I,D.mode,t.id)}),$=Xwt().extent([[qr.left-5,qr.top],[qr.left+5,qr.top+v]]).on("brush end",D=>{D.sourceEvent!==void 0&&n([[null,D.selection[0]],[null,D.selection[1]]],T,I,D.mode,t.id)});return m.current&&g.current&&(mo(g.current).call($),mo(m.current).call(R),t.hasBrush||(mo(g.current).call($.move,[I(E),I(x)]),mo(m.current).call(R.move,[T(new Date("2015-01-02")),T(new Date("2015-12-31"))]),n([[T(new Date("2015-01-02")),I(E)],[T(new Date("2015-12-31")),I(x)]],T,I,"drag",t.id))),()=>{mo(g.current).call($.move,[I(E),I(x)]),mo(m.current).call(R.move,[T(new Date("2015-01-02")),T(new Date("2015-12-31"))]),n([[T(new Date("2015-01-02")),I(E)],[T(new Date("2015-12-31")),I(x)]],T,I,"clear",t.id)}}if(r==="Rectangular Selection"){const R=Qwt().extent([[qr.left,qr.top],[qr.left+y,qr.top+v]]).on("brush",$=>{$.sourceEvent!==void 0&&n([[$.selection[0][0],$.selection[0][1]],[$.selection[1][0],$.selection[1][1]]],T,I,$.mode,t.id)}).on("end",$=>{$.selection===null&&$.sourceEvent!==void 0&&(mo(c.current).call(R.move,null),e(null))});return mo(c.current).call(R),()=>{mo(c.current).call(R.move,null),n([[null,null],[null,null]],T,I,"clear",t.id)}}return r==="Slider Selection"?()=>n([[T(w),I(E)],[T(S),I(x)]],T,I,"clear",t.id):r==="Paintbrush Selection"?()=>n([[T(w),I(E)],[T(S),I(x)]],T,I,"clear",t.id,[]):()=>null},[t,r,m,g,v,c,n,y,S,w,T,E,x,I]),A.useEffect(()=>{r==="Slider Selection"&&T&&I&&n([[T(w),I(E)],[T(S),I(x)]],T,I,null,t.id)},[r,S,w,T,E,x,I]);const k=A.useMemo(()=>o.length===0?null:new Set(o),[o]),P=A.useMemo(()=>!T||!I?null:s.filter(R=>h.year?+R.Year===h.year:!0).map((R,$)=>{if(R[h.x]===null||R[h.y]===null)return null;const D=h.dataType==="date"?T(new Date(R[h.x])):T(R[h.x]);return b.jsx(Xt,{withinPortal:!0,label:R[h.ids],children:b.jsx("circle",{opacity:k&&!k.has(R[h.ids])?.3:.7,r:3,fill:k&&!k.has(R[h.ids])?"lightgray":h.hideCat?"gray":_(R[h.category]),cx:D,cy:I(R[h.y])},$)},$)}),[k,_,s,T,I,h]);A.useEffect(()=>{r==="Axis Selection"&&Ubt(".handle").style("fill","darkgrey")},[t,r]);const L=p1(R=>{p({...h,year:R?+R:void 0})});return b.jsxs(Gr,{gap:0,children:[b.jsx(gn,{mr:qr.right,style:{justifyContent:"space-between"},children:h.year?b.jsxs(Gr,{gap:0,children:[b.jsx(Xe,{size:"12px",ml:qr.left,children:h.year}),b.jsx(s6,{min:2008,max:2022,value:h.year,onChange:L,ml:qr.left,style:{width:"150px"},label:h.year})]}):null}),b.jsxs(gn,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[b.jsxs("svg",{id:"scatterSvgBrushStudy",ref:c,style:{height:"500px",width:h.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[T&&I?b.jsxs("g",{children:[b.jsx(KDe,{yScale:I,label:h.y,horizontalPosition:qr.left,xRange:T.range()}),b.jsx(yR,{xScale:T,yRange:I.range(),isDate:h.dataType==="date",vertPosition:v+qr.top,label:h.x,ticks:T.ticks(h.brushType==="Axis Selection"?12:5).map(R=>({value:R.toString(),offset:T(R)}))})]}):null,P,b.jsx("g",{id:"brushXRef",ref:m}),b.jsx("g",{id:"brushYRef",ref:g}),T&&I&&r==="Paintbrush Selection"?b.jsx(XDe,{currSelected:o,svgRef:c,brushState:t,setBrushedSpace:n,params:h,data:s.filter(R=>h.year?+R.Year===h.year:!0),isSelect:l,xScale:T,yScale:I}):null]}),r==="Slider Selection"&&T&&I?b.jsxs(Gr,{style:{flexGrow:1},gap:50,children:[b.jsxs(Gr,{gap:0,children:[b.jsx(Xe,{children:h.x}),b.jsx(iI,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],labelAlwaysOn:!1,onChange:R=>{n([[T(R[0]),t.y1],[T(R[1]),t.y2]],T,I,"drag",t.id)},style:{width:"300px"},marks:T.ticks(5).map(R=>({value:R,label:R})),value:[T.invert(t.x1),T.invert(t.x2)]})]}),b.jsxs(Gr,{gap:0,children:[b.jsx(Xe,{children:h.y}),b.jsx(iI,{minRange:1,label:null,min:I.domain()[0],max:I.domain()[1],onChange:R=>{n([[t.x1,I(R[1])],[t.x2,I(R[0])]],T,I,"drag",t.id)},style:{width:"300px"},marks:I.ticks(5).map(R=>({value:R,label:R})),value:[I.invert(t.y2),I.invert(t.y1)]})]})]}):null]})]})}const V$t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:QDe},Symbol.toStringTag,{value:"Module"})),uu={top:15,left:100,right:15,bottom:130};function JDe({setFilteredTable:e,brushState:t,setSelection:n,brushType:r,initialParams:i,data:s,brushedPoints:o,onClose:a,isPaintbrushSelect:l,dataTable:u}){const[c,{height:d,width:f}]=Vd(),[h,p]=A.useState(i),m=A.useMemo(()=>f-uu.left-uu.right,[f]),g=A.useMemo(()=>d-uu.top-uu.bottom,[d]),y=A.useMemo(()=>h.hideCat?u.groupby(t.xCol).count():u.groupby(t.xCol,"Survived").count(),[t.xCol,u,h.hideCat]),v=A.useMemo(()=>{if(!s)return null;const E=Tee(s);return h.hideCat?E.groupby(t.xCol).count():E.groupby(t.xCol,"Survived").count()},[t.xCol,s,h.hideCat]),_=A.useMemo(()=>y?Ba([uu.top,g+uu.top]).domain([0,Pc(y.objects().map(E=>E.count))].reverse()).nice():null,[y,g]),w=A.useMemo(()=>y?Y6([uu.left,m+uu.left]).domain(y.array(t.xCol).sort()).paddingInner(.1):null,[y,m,t.xCol]),x=A.useMemo(()=>!w||!_||!v?null:v.objects().map((E,T)=>b.jsxs("g",{children:[h.hideCat?b.jsx("rect",{onClick:I=>n(u.objects().filter(k=>k[t.xCol]===E[t.xCol]).map(k=>k.Name),I),x:w(E[t.xCol]),y:g-(g-_(E.count)),fill:"gray",width:w.bandwidth(),height:uu.top+g-_(E.count)}):b.jsx("rect",{onClick:I=>n(u.objects().filter(k=>k[t.xCol]===E[t.xCol]&&k.Survived===E.Survived).map(k=>k.Name),I),x:E.Survived==="Yes"?w(E[t.xCol]):w(E[t.xCol])+w.bandwidth()/2,y:g-(g-_(E.count)),fill:E.Survived==="Yes"?"#f28e2c":"#4e79a7",width:w.bandwidth()/2,height:uu.top+g-_(E.count)}),b.jsx("text",{x:w(E[t.xCol])+(h.hideCat?w.bandwidth()/2:E.Survived==="Yes"?w.bandwidth()/4:w.bandwidth()*.75),y:_(E.count)-10,style:{textAnchor:"middle",dominantBaseline:"middle",fontSize:14},children:E.count})]},`${T}fullRects`)),[v,t.xCol,u,g,h.hideCat,n,w,_]),S=A.useMemo(()=>!w||!_||!y?null:y.objects().map((E,T)=>b.jsx("g",{style:{cursor:"pointer"},children:b.jsx("rect",{onClick:I=>n(u.objects().filter(k=>k[t.xCol]===E[t.xCol]&&(h.hideCat?!0:k.Survived===E.Survived)).map(k=>k.Name),I),opacity:.7,x:E.Survived==="Yes"||h.hideCat?w(E[t.xCol]):w(E[t.xCol])+w.bandwidth()/2,fill:"lightgray",width:h.hideCat?w.bandwidth():w.bandwidth()/2,y:g-(g-_(E.count)),height:uu.top+g-_(E.count)})},`${T}survRects`)),[y,t.xCol,u,g,h.hideCat,n,w,_]);return _&&w&&v?b.jsx(Gr,{gap:0,children:b.jsxs("svg",{id:"scatterSvgBrushStudy",ref:c,style:{height:"500px",width:h.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[b.jsx(yR,{xScale:w,yRange:_.range(),vertPosition:g+uu.top,showLines:!1,stringTicks:!0,label:t.xCol,ticks:[...new Set(u.array(t.xCol))].map(E=>({value:E,offset:w(E)+w.bandwidth()/2}))}),_?b.jsx(o4,{label:"Count",yScale:_,horizontalPosition:uu.left,xRange:w.range(),ticks:_.ticks(5).map(E=>({value:E.toString(),offset:_(E)}))}):null,S,x]})}):null}const H$t=Object.freeze(Object.defineProperty({__proto__:null,Histogram:JDe},Symbol.toStringTag,{value:"Module"})),zf={top:15,left:100,right:15,bottom:130};function ZDe({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,initialParams:i,data:s,allData:o,setSelection:a,brushedPoints:l,onClose:u,isPaintbrushSelect:c}){const[d,{height:f,width:h}]=Vd(),[p,m]=A.useState(i),g=A.useMemo(()=>h-zf.left-zf.right,[h]),y=A.useMemo(()=>f-zf.top-zf.bottom,[f]),v=A.useMemo(()=>Ba([zf.top,y+zf.top]).domain([0,Pc(o.map(E=>+E[t.yCol]))].reverse()).nice(),[o,t.yCol,y]),_=A.useMemo(()=>Y6([zf.left,g+zf.left]).domain([...new Set(o.map(E=>E[t.xCol].toString()))].sort()).paddingInner(.01),[g,o,t.xCol]),w=A.useMemo(()=>Tee(o.map(E=>({...E,Age:+E.Age}))),[o]),x=A.useMemo(()=>new Set(s.map(E=>E[p.ids])),[s,p.ids]),S=A.useMemo(()=>{let E=p.hideCat?w.groupby(t.xCol,{group:XN(t.yCol,{maxbins:20}),group_max:XN(t.yCol,{maxbins:20,offset:1})}):w.groupby(t.xCol,"Survived",{group:XN(t.yCol,{maxbins:20}),group_max:XN(t.yCol,{maxbins:20,offset:1})});E=E.rollup({ids:cA.array_agg(p.ids),count:cA.count()}).orderby("group");const T=E.derive({ids:h1(L=>L.ids.filter(R=>x.has(R))),count:h1(L=>L.ids.filter(R=>x.has(R)).length)}).orderby("group"),I=Ba([0,_.bandwidth()/2]).domain([0,Pc(E.array("count"))]),k=t3(L=>I(L[1])+_.bandwidth()/2,L=>v(L[0])).curve(wH),P=t3(L=>_.bandwidth()/2-I(L[1]),L=>v(L[0])).curve(wH);return b.jsx("g",{children:_.domain().map(L=>b.jsx("g",{style:{cursor:"pointer"},children:p.hideCat?b.jsxs("g",{children:[b.jsx("path",{onClick:R=>a(E.objects().filter($=>$[t.xCol]===L).map($=>$.ids).flat(),R),opacity:.7,transform:`translate(${_(L)}, 0)`,d:`${k(E.objects().filter(R=>R[t.xCol]===L).map(R=>[R.group,R.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),b.jsx("path",{onClick:R=>a(E.objects().filter($=>$[t.xCol]===L).map($=>$.ids).flat(),R),opacity:.7,transform:`translate(${_(L)}, 0)`,d:`${P(E.objects().filter(R=>R[t.xCol]===L).map(R=>[R.group,R.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),b.jsx("path",{onClick:R=>a(E.objects().filter($=>$[t.xCol]===L).map($=>$.ids).flat(),R),transform:`translate(${_(L)}, 0)`,d:`${k(T.objects().filter(R=>R[t.xCol]===L).map(R=>[R.group,R.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"gray"}),b.jsx("path",{onClick:R=>a(E.objects().filter($=>$[t.xCol]===L).map($=>$.ids).flat(),R),transform:`translate(${_(L)}, 0)`,d:`${P(T.objects().filter(R=>R[t.xCol]===L).map(R=>[R.group,R.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"gray"})]}):b.jsxs("g",{children:[b.jsx("path",{onClick:R=>a(E.objects().filter($=>$[t.xCol]===L&&$.Survived==="Yes").map($=>$.ids).flat(),R),opacity:.7,transform:`translate(${_(L)}, 0)`,d:`${k(E.objects().filter(R=>R[t.xCol]===L&&R.Survived==="Yes").map(R=>[R.group,R.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),b.jsx("path",{onClick:R=>a(E.objects().filter($=>$[t.xCol]===L&&$.Survived==="No").map($=>$.ids).flat(),R),opacity:.7,transform:`translate(${_(L)}, 0)`,d:`${P(E.objects().filter(R=>R[t.xCol]===L&&R.Survived==="No").map(R=>[R.group,R.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"lightgray"}),b.jsx("path",{onClick:R=>a(E.objects().filter($=>$[t.xCol]===L&&$.Survived==="Yes").map($=>$.ids).flat(),R),transform:`translate(${_(L)}, 0)`,d:`${k(T.objects().filter(R=>R[t.xCol]===L&&R.Survived==="Yes").map(R=>[R.group,R.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"#f28e2c"}),b.jsx("path",{onClick:R=>a(E.objects().filter($=>$[t.xCol]===L&&$.Survived==="No").map($=>$.ids).flat(),R),transform:`translate(${_(L)}, 0)`,d:`${P(T.objects().filter(R=>R[t.xCol]===L&&R.Survived==="No").map(R=>[R.group,R.count]))}L${_.bandwidth()/2},${v.range()[0]}L${_.bandwidth()/2},${v.range()[1]}Z`,fill:"#4e79a7"})]})},L))})},[t.xCol,t.yCol,x,w,p.hideCat,p.ids,a,_,v]);return b.jsx(Gr,{gap:0,children:b.jsxs("svg",{id:"scatterSvgBrushStudy",ref:d,style:{height:"500px",width:p.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[b.jsx(yR,{xScale:_,yRange:v.range(),vertPosition:y+zf.top,showLines:!1,stringTicks:!0,label:t.xCol,ticks:_.domain().map(E=>({value:E,offset:_(E)+_.bandwidth()/2}))}),v?b.jsx(o4,{label:t.yCol,yScale:v,horizontalPosition:zf.left,xRange:_.range(),ticks:v.ticks(5).map(E=>({value:E.toString(),offset:v(E)}))}):null,S]})})}const q$t=Object.freeze(Object.defineProperty({__proto__:null,Violin:ZDe},Symbol.toStringTag,{value:"Module"}));function Ame({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=A.useState(null),[s,o]=A.useState(e.brushState?{...e.brushState,selection:[]}:{0:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,xCol:e.x,yCol:e.y,id:0,type:"scatter"},selection:[]}),[a,l]=A.useState(!0),[u,c]=A.useState(null);A.useEffect(()=>{Ixt(`${Qu}ThinkAloud/data/${e.dataset}.csv`).then(S=>{c(S)})},[e]);const d=A.useMemo(()=>u?Tee(u):null,[u]);A.useEffect(()=>{if(n){const S=n.all.brush||n.all;o(S);const E=new Set(S.selection);if(d){const T=d.filter(h1(I=>E.has(I[e.ids])));i(T)}}},[d,e.ids,n]);const{actions:f,trrack:h}=A.useMemo(()=>{const S=UI.create(),E=S.register("brush",(L,R)=>(L.all={brush:R},L)),T=S.register("brushMove",(L,R)=>(L.all={brush:R},L)),I=S.register("brushResize",(L,R)=>(L.all={brush:R},L)),k=S.register("brushClear",(L,R)=>(L.all={brush:R},L)),P=dq({registry:S,initialState:{all:s}});return{actions:{brush:E,brushMove:T,brushResize:I,clearBrush:k},trrack:P}},[]),p=A.useCallback((S,E)=>{S==="drag"?h.apply("Move Brush",f.brushMove(E)):(S==="handle"||S==="click")&&h.apply("Brush",f.brush(E)),t({status:!0,provenanceGraph:h.graph.backend,answers:{}})},[f,t,h]),m=A.useMemo(()=>vd(p,50,{maxWait:50}),[p]),g=A.useCallback((S,E,T,I,k,P)=>{if(!E||!T)return;const L=s[k],R=E.invert(S[0][0]||L.x1),$=E.invert(S[1][0]||L.x2),D=T.invert(S[1][1]||L.y2),O=T.invert(S[0][1]||L.y1);let F=null;if(I==="clear")F=d;else if(P){const M=new Set(P);F=d.filter(h1(z=>M.has(z[e.ids])))}else e.brushType==="Axis Selection"?F=d.filter(h1(M=>new Date(M[e.x])>=new Date(R)&&new Date(M[e.x])<=new Date($)&&M[e.y]>=D&&M[e.y]<=O)):F=d.filter(h1(M=>M[e.x]>=R&&M[e.x]<=$&&M[e.y]>=D&&M[e.y]<=O));const U={xCol:L.xCol,yCol:L.yCol,x1:S[0][0]||(L==null?void 0:L.x1)||0,x2:S[1][0]||(L==null?void 0:L.x2)||0,y1:S[0][1]||(L==null?void 0:L.y1)||0,y2:S[1][1]||(L==null?void 0:L.y2)||0,hasBrush:I!=="clear",id:k},V=I!=="clear"?F==null?void 0:F.array(e.ids):[];o({...s,[k]:U,selection:V}),I==="drag"||I==="handle"||I==="click"?m(I,{...s,[k]:U,selection:V}):I==="clear"&&h.apply("Clear Brush",f.clearBrush({...s,[k]:U,selection:V})),i(F)},[s,d,e,h,m,f]),y=A.useMemo(()=>r?r==null?void 0:r.groupby(e.category).count():d?d==null?void 0:d.groupby(e.category).count():null,[r,d,e.category]),v=A.useCallback(S=>{i(S)},[]),_=A.useCallback((S,E)=>{const T=new Set(E.ctrlKey||E.metaKey?[...s.selection,...S]:S),I=d.filter(h1(k=>T.has(k[e.ids])));o({...s,selection:[...T]}),i(I),p("click",{...s,selection:[...T]})},[s,d,p,e.ids]),w=A.useMemo(()=>(d==null?void 0:d.objects())||[],[d]),x=A.useMemo(()=>(r==null?void 0:r.objects())||[],[r]);return u?b.jsxs(Gr,{gap:"xs",children:[b.jsxs(gn,{children:[b.jsx(rn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:s.selection.length===0,onClick:()=>{i(null),o({...s,selection:[]})},children:"Clear Selection"}),e.brushType==="Paintbrush Selection"?b.jsx(hX,{defaultChecked:!0,value:a?"Select":"De-Select",onChange:S=>l(S==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:s.selection.length===0}]}):null,e.columns&&!e.hideCat?b.jsxs(b.Fragment,{children:[b.jsx(Ic,{color:"#f28e2c"}),b.jsx(Xe,{children:"Survived"}),b.jsx(Ic,{color:"#4e79a7"}),b.jsx(Xe,{children:"Died"})]}):null]}),b.jsxs(gn,{children:[Object.entries(s).map(S=>{const[E,T]=S;return E==="selection"?null:T.type==="histogram"?b.jsx(JDe,{onClose:I=>{const{[I]:k,...P}=s;o(P)},dataTable:d,setSelection:_,brushedPoints:s.selection,data:x.length>0?x:w,initialParams:{...e,x:T.xCol,y:T.yCol},brushType:e.brushType,brushState:T,isPaintbrushSelect:a,setFilteredTable:v},E):T.type==="violin"?b.jsx(ZDe,{onClose:I=>{const{[I]:k,...P}=s;o(P)},allData:w,setSelection:_,brushedPoints:s.selection,data:x.length>0?x:w,initialParams:{...e,x:T.xCol,y:T.yCol},brushType:e.brushType,setBrushedSpace:g,brushState:T,isPaintbrushSelect:a,setFilteredTable:v},E):b.jsx(QDe,{onClose:I=>{const{[I]:k,...P}=s;o(P)},brushedPoints:s.selection,data:w,initialParams:{...e,x:T.xCol,y:T.yCol},brushType:e.brushType,setBrushedSpace:g,brushState:T,isPaintbrushSelect:a,setFilteredTable:v,setIsPaintbrushSelect:l},E)}),e.hideCat?null:b.jsx(xH,{fullTable:d,setSelection:_,data:w,parameters:e,barsTable:y})]})]}):b.jsx(is,{})}const W$t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Ame,default:Ame},Symbol.toStringTag,{value:"Module"})),G$t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function eMe(e,t){return function(n){return t.map(r=>[r,$Ae(n,i=>e(r-i))])}}function tMe(e){return function(t){return Math.abs(t/=e)<=1?.75*(1-t*t)/e:0}}function nMe(e,t){return e*t/(t-1)}function rMe(e,t,n){let r=Math.sqrt(nMe(t,n));return typeof e=="number"&&(r=Math.min(r,e/1.34)),1.06*r*n**-.2}function Y$t({values:e,xScale:t,ticks:n}){const r=PDt({values:e}).rollup({variance:cA.variance("values"),q1:cA.quantile("values",.25),q3:cA.quantile("values",.75)}).objects()[0];return eMe(tMe(rMe(r.q3-r.q1,r.variance,e.length)),t.ticks(n))(e)}const K$t=Object.freeze(Object.defineProperty({__proto__:null,kdeCalc:Y$t,kernelDensityEstimator:eMe,kernelEpanechnikov:tMe,silvermans:rMe,toSampleVariance:nMe},Symbol.toStringTag,{value:"Module"}));var iMe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:qi,()=>(()=>{var n={d:(c,d)=>{for(var f in d)n.o(d,f)&&!n.o(c,f)&&Object.defineProperty(c,f,{enumerable:!0,get:d[f]})},o:(c,d)=>Object.prototype.hasOwnProperty.call(c,d),r:c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}},r={};function i(c){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},i(c)}function s(c){return function(d){if(Array.isArray(d))return o(d)}(c)||function(d){if(typeof Symbol<"u"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}(c)||function(d,f){if(d){if(typeof d=="string")return o(d,f);var h=Object.prototype.toString.call(d).slice(8,-1);if(h==="Object"&&d.constructor&&(h=d.constructor.name),h==="Map"||h==="Set")return Array.from(d);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return o(d,f)}}(c)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(c,d){(d==null||d>c.length)&&(d=c.length);for(var f=0,h=new Array(d);f<d;f++)h[f]=c[f];return h}function a(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function l(c,d){for(var f=0;f<d.length;f++){var h=d[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,(p=h.key,m=void 0,m=function(g,y){if(i(g)!=="object"||g===null)return g;var v=g[Symbol.toPrimitive];if(v!==void 0){var _=v.call(g,y||"default");if(i(_)!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(g)}(p,"string"),i(m)==="symbol"?m:String(m)),h)}var p,m}n.r(r),n.d(r,{default:()=>u});var u=function(){function c(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=h.sampleRate;a(this,c),this._context=this._createContext(p),p||(p=this._context.sampleRate),this._sampleRate=p}var d,f;return d=c,f=[{key:"_createContext",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:44100;return window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,new AudioContext({sampleRate:h})}},{key:"context",get:function(){return this._context}},{key:"fetchAudio",value:async function(){for(var h=this,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return await Promise.all(m.map(async function(y){var v;return v=y instanceof File||y instanceof Blob?await y.arrayBuffer():await fetch(y).then(function(_){return _.headers.has("Content-Type")&&!_.headers.get("Content-Type").includes("audio/")&&console.warn("Crunker: Attempted to fetch an audio file, but its MIME type is `".concat(_.headers.get("Content-Type").split(";")[0],"`. We'll try and continue anyway. (file: \"").concat(y,'")')),_.arrayBuffer()}),await h._context.decodeAudioData(v)}))}},{key:"mergeAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._sampleRate*this._maxDuration(h),this._sampleRate);return h.forEach(function(m){for(var g=0;g<m.numberOfChannels;g++){for(var y=p.getChannelData(g),v=m.getChannelData(g),_=m.getChannelData(g).length-1;_>=0;_--)y[_]+=v[_];p.getChannelData(g).set(y)}}),p}},{key:"concatAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._totalLength(h),this._sampleRate),m=0;return h.forEach(function(g){for(var y=0;y<g.numberOfChannels;y++)p.getChannelData(y).set(g.getChannelData(y),m);m+=g.length}),p}},{key:"padAudio",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(m===0)return h;if(p<0)throw new Error('Crunker: Parameter "padStart" in padAudio must be positive');if(m<0)throw new Error('Crunker: Parameter "seconds" in padAudio must be positive');for(var g=this._context.createBuffer(h.numberOfChannels,Math.ceil(h.length+m*h.sampleRate),h.sampleRate),y=0;y<h.numberOfChannels;y++){var v=h.getChannelData(y);g.getChannelData(y).set(v.subarray(0,Math.ceil(p*h.sampleRate)+1),0),g.getChannelData(y).set(v.subarray(Math.ceil(p*h.sampleRate)+2,g.length+1),Math.ceil((p+m)*h.sampleRate))}return g}},{key:"sliceAudio",value:function(h,p,m){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(p>=m)throw new Error('Crunker: "start" time should be less than "end" time in sliceAudio method');for(var v=Math.round((m-p)*this._sampleRate),_=Math.round(p*this._sampleRate),w=this._context.createBuffer(h.numberOfChannels,v,this._sampleRate),x=0;x<h.numberOfChannels;x++)for(var S=h.getChannelData(x),E=w.getChannelData(x),T=0;T<v;T++)E[T]=S[_+T],T<g*this._sampleRate&&(E[T]*=T/(g*this._sampleRate)),T>v-y*this._sampleRate&&(E[T]*=(v-T)/(y*this._sampleRate));return w}},{key:"play",value:function(h){var p=this._context.createBufferSource();return p.buffer=h,p.connect(this._context.destination),p.start(),p}},{key:"export",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"audio/wav",m=this._interleave(h),g=this._writeHeaders(m,h.numberOfChannels,h.sampleRate),y=new Blob([g],{type:p});return{blob:y,url:this._renderURL(y),element:this._renderAudioElement(y)}}},{key:"download",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"crunker",m=document.createElement("a");return m.style.display="none",m.href=this._renderURL(h),m.download="".concat(p,".").concat(h.type.split("/")[1]),m.click(),m}},{key:"notSupported",value:function(h){return this._isSupported()?void 0:h()}},{key:"close",value:function(){return this._context.close(),this}},{key:"_maxDuration",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.duration})))}},{key:"_maxNumberOfChannels",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.numberOfChannels})))}},{key:"_totalLength",value:function(h){return h.map(function(p){return p.length}).reduce(function(p,m){return p+m},0)}},{key:"_isSupported",value:function(){return"AudioContext"in window||"webkitAudioContext"in window||"mozAudioContext"in window}},{key:"_writeHeaders",value:function(h,p,m){var g=2*p,y=2*h.length,v=36+y,_=new ArrayBuffer(8+v),w=new DataView(_);return this._writeString(w,0,"RIFF"),w.setUint32(4,v,!0),this._writeString(w,8,"WAVE"),this._writeString(w,12,"fmt "),w.setUint32(16,16,!0),w.setUint16(20,1,!0),w.setUint16(22,p,!0),w.setUint32(24,m,!0),w.setUint32(28,m*g,!0),w.setUint16(32,g,!0),w.setUint16(34,16,!0),this._writeString(w,36,"data"),w.setUint32(40,y,!0),this._floatTo16BitPCM(w,h,44)}},{key:"_floatTo16BitPCM",value:function(h,p,m){for(var g=0;g<p.length;g++,m+=2){var y=Math.max(-1,Math.min(1,p[g]));h.setInt16(m,y<0?32768*y:32767*y,!0)}return h}},{key:"_writeString",value:function(h,p,m){for(var g=0;g<m.length;g++)h.setUint8(p+g,m.charCodeAt(g))}},{key:"_interleave",value:function(h){if(h.numberOfChannels===1)return h.getChannelData(0);for(var p=[],m=0;m<h.numberOfChannels;m++)p.push(h.getChannelData(m));for(var g=p.reduce(function(w,x){return w+x.length},0),y=new Float32Array(g),v=0,_=0;v<g;)p.forEach(function(w){y[v++]=w[_]}),_++;return y}},{key:"_renderAudioElement",value:function(h){var p=document.createElement("audio");return p.controls=!0,p.src=this._renderURL(h),p}},{key:"_renderURL",value:function(h){return(window.URL||window.webkitURL).createObjectURL(h)}}],f&&l(d.prototype,f),Object.defineProperty(d,"prototype",{writable:!1}),c}();return r})())})(iMe);var X$t=iMe.exports;const Q$t=rl(X$t);var sMe="Expected a function",Ime=NaN,J$t="[object Symbol]",Z$t=/^\s+|\s+$/g,e3t=/^[-+]0x[0-9a-f]+$/i,t3t=/^0b[01]+$/i,n3t=/^0o[0-7]+$/i,r3t=parseInt,i3t=typeof qi=="object"&&qi&&qi.Object===Object&&qi,s3t=typeof self=="object"&&self&&self.Object===Object&&self,o3t=i3t||s3t||Function("return this")(),a3t=Object.prototype,l3t=a3t.toString,u3t=Math.max,c3t=Math.min,$9=function(){return o3t.Date.now()};function d3t(e,t,n){var r,i,s,o,a,l,u=0,c=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(sMe);t=kme(t)||0,z3(n)&&(c=!!n.leading,d="maxWait"in n,s=d?u3t(kme(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function h(S){var E=r,T=i;return r=i=void 0,u=S,o=e.apply(T,E),o}function p(S){return u=S,a=setTimeout(y,t),c?h(S):o}function m(S){var E=S-l,T=S-u,I=t-E;return d?c3t(I,s-T):I}function g(S){var E=S-l,T=S-u;return l===void 0||E>=t||E<0||d&&T>=s}function y(){var S=$9();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,f&&r?h(S):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function w(){return a===void 0?o:v($9())}function x(){var S=$9(),E=g(S);if(r=arguments,i=this,l=S,E){if(a===void 0)return p(l);if(d)return a=setTimeout(y,t),h(l)}return a===void 0&&(a=setTimeout(y,t)),o}return x.cancel=_,x.flush=w,x}function f3t(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(sMe);return z3(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),d3t(e,t,{leading:r,maxWait:t,trailing:i})}function z3(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function h3t(e){return!!e&&typeof e=="object"}function p3t(e){return typeof e=="symbol"||h3t(e)&&l3t.call(e)==J$t}function kme(e){if(typeof e=="number")return e;if(p3t(e))return Ime;if(z3(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=z3(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Z$t,"");var n=t3t.test(e);return n||n3t.test(e)?r3t(e.slice(2),n?2:8):e3t.test(e)?Ime:+e}var m3t=f3t;const g3t=rl(m3t),JN=3,Y_=25,ZN=25,eO=20,Rme=1;function y3t({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0}){const[a,l]=A.useState(!1),[u,{width:c}]=Vd();return b.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{cursor:"pointer"},children:[b.jsx("rect",{opacity:1,fill:a||s?"cornflowerblue":"lightgray",x:e(t.startTime)+Rme,width:e(t.endTime)-e(t.startTime)-Rme*2,y:r-Y_,height:Y_}),b.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-JN,width:c+JN*2,y:r-Y_-ZN-o,height:eO,fill:"whitesmoke"}),b.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-JN,x2:c+e(t.startTime)+JN,y1:r-Y_-ZN+eO-o,y2:r-Y_-ZN+eO-o}),b.jsx("foreignObject",{x:e(t.startTime),width:c,y:r-Y_-ZN-o,height:eO,children:b.jsx(Ya,{style:{width:"fit-content"},children:b.jsx(Xe,{lineClamp:1,ref:u,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n})})})]})}function v3t({xScale:e,answer:t,height:n,labelHeight:r=0}){return b.jsx("g",{children:b.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const Pme=25,b3t=8;function oMe({xScale:e,participantData:t,width:n,height:r,setSelectedTask:i,trialFilter:s}){const{analysisTrialName:o}=Ro(u=>u),a=A.useMemo(()=>{let u=0;const c=Object.entries(t.answers||{}).filter(d=>s?d[0]===s:!0).sort((d,f)=>d[1].startTime-f[1].startTime);return c.map((d,f)=>{const[h,p]=d,m=f>0?c[f-u-1]:null;return m&&m[0].length*b3t+e(m[1].startTime)>e(p.startTime)?u+=1:u=0,{line:b.jsx(v3t,{labelHeight:u*Pme,answer:p,height:r,xScale:e},h),label:b.jsx(y3t,{labelHeight:u*Pme,isSelected:s?!1:o===h,setSelectedTask:i,answer:p,height:r,name:h,xScale:e},h)}})},[r,t.answers,o,i,s,e]),l=A.useMemo(()=>Object.entries(t.answers||{}).sort((c,d)=>c[1].startTime-d[1].startTime).map(c=>{const[d,f]=c,h=[];let p=[-1,-1],m="visible";if(f.windowEvents)for(let g=0;g<f.windowEvents.length;g+=1)f.windowEvents[g][1]==="visibility"&&(f.windowEvents[g][2]==="hidden"&&m==="visible"?(p=[f.windowEvents[g][0],-1],m="hidden"):f.windowEvents[g][2]==="visible"&&m==="hidden"&&(p[1]=f.windowEvents[g][0],h.push(p),p=[-1,-1],m="visible"));return h.map((g,y)=>b.jsx(Xt,{withinPortal:!0,label:"Browsed away",children:b.jsx("rect",{x:e(g[0]),width:e(g[1])-e(g[0]),y:r-5,height:10})},y))}),[r,t,e]);return s?null:b.jsxs("svg",{style:{width:n,height:r,overflow:"visible"},children:[a.map(u=>u.line),a.map(u=>u.label),l]})}function _3t({cx:e,cy:t,r:n,color:r}){return b.jsx("circle",{cx:e,cy:t,r:n,fill:r})}function w3t({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){return b.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(o=>{const[a,l]=o;return b.jsx("g",{onClick:()=>i(a,l.createdOn,s),children:b.jsx(_3t,{color:a===r?"cornflowerblue":"lightgray",cx:e(l.createdOn),cy:n/2,r:5})},a)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?b.jsx("circle",{fill:"cornflowerblue",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null]})}const Nme={left:5,top:0,right:5,bottom:0};function x3t({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,playTime:o,setPlayTime:a,isPlaying:l,setIsPlaying:u,setSelectedTask:c}){const d=A.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),{index:f}=Lc(),h=ap(),p=f?h:null,m=A.useMemo(()=>!p||!t?null:Object.keys(t.answers).find(v=>v.startsWith(p))||null,[t,p]);A.useEffect(()=>{if(!m||!t)return;const v=t.answers[m].provenanceGraph;if(!v)return;const{startTime:_}=t.answers.introduction_0,w=_+o;if(!i||!v.nodes[i]){s(v.root);return}let x=v.nodes[i];for(;;)if(w<x.createdOn){if(zMt(x))break;{const S=x.parent;if(w<v.nodes[S].createdOn)x=v.nodes[S];else break}}else if(x.children.length>0){const S=x.children[0];if(w>v.nodes[S].createdOn)x=v.nodes[S];else break}else break;x.id!==i&&s(x.id)},[i,t,o,s,m]);const g=A.useCallback((v,_)=>{a(_,(_-e.domain()[0])/d),s(v)},[s,a,d,e]),y=A.useMemo(()=>Object.entries(t.answers).filter(v=>m?m===v[0]:!0).map(v=>{const[_,w]=v;return b.jsx(w3t,{taskName:_,answer:w,height:r,currentNode:i,setCurrentNode:g,xScale:e},_)}),[i,g,r,t.answers,m,e]);return b.jsx(Gr,{children:b.jsxs("svg",{style:{width:n,height:r},children:[b.jsx("line",{stroke:"black",strokeWidth:1,x1:Nme.left,x2:n+Nme.left,y1:r/2,y2:r/2}),y]})})}const Ome={top:5,left:5,right:5,bottom:5};function E3t({transcriptLines:e,xScale:t,startTime:n,currentShownTranscription:r}){const i=A.useMemo(()=>e.map(s=>b.jsxs("g",{children:[b.jsx("line",{stroke:r>=s.lineStart&&r<=s.lineEnd?"cornflowerblue":"lightgray",strokeWidth:5,y1:Ome.top,y2:Ome.top,x1:t(n+s.start*1e3)+2,x2:t(n+s.end*1e3)-2}),s.tags.map((o,a)=>b.jsx("g",{children:o.map((l,u)=>{const c=t(n+s.start*1e3),d=t(n+s.end*1e3);return l?b.jsx("foreignObject",{x:c+(d-c)/s.tags.length*(a+.5)-6+(-(o.length-1)*15/2+u*15),y:30,height:"20px",width:"20px",children:b.jsx(Xt,{label:l.name,withArrow:!0,arrowSize:6,children:b.jsx(Ic,{size:12,color:l.color})})},l.name):null})},a))]},s.start)),[r,n,e,t]);return b.jsx("svg",{style:{width:"100%",height:"50px"},children:i})}function aMe({selectedTags:e,removeFunc:t,isLink:n=!1,participantId:r="",currentTask:i="",size:s="md"}){return e.map((o,a)=>{if(!o||!o.id)return null;const l=mI(o.color).l;return b.jsx(Xt,{label:o.name,withinPortal:!0,children:b.jsx(rb,{size:s,component:n?OX:null,style:{width:"80px"},to:`${Qu}ThinkAloud/analysis/${r}/ui/reviewer-${i}`,target:"_blank",withRemoveButton:!!t,styles:{root:{backgroundColor:o.color,color:l>.7?"black":"white"}},onRemove:()=>t?t(o.id):null,children:o.name},o.id+a)},r+i+a)})}function pA({tags:e,selectedTags:t,onSelectTags:n,disabled:r=!1,taskTags:i,partTags:s}){const o=Uk(),a=h=>n([...t,[...e,...i||[],...s||[]].find(p=>p.id===h)]),l=h=>n(t.filter(p=>p!==void 0&&p.id!==h)),u=b.jsx(aMe,{selectedTags:t,removeFunc:l}),c=e.filter(h=>h!==void 0&&!t.find(p=>p&&p.id===h.id)).map(h=>b.jsx(Kt.Option,{value:h.id,children:b.jsxs(gn,{gap:"sm",children:[b.jsx(Ic,{size:10,color:h.color}),b.jsx("span",{children:h.name})]})},h.id)),d=i?i.filter(h=>!t.find(p=>p.id===h.id)).map(h=>b.jsx(Kt.Option,{value:h.id,children:b.jsxs(gn,{gap:"sm",children:[b.jsx(Ic,{size:10,color:h.color}),b.jsx("span",{children:h.name})]})},h.id)):null,f=s?s.filter(h=>!t.find(p=>p.id===h.id)).map(h=>b.jsx(Kt.Option,{value:h.id,children:b.jsxs(gn,{gap:"sm",children:[b.jsx(Ic,{size:10,color:h.color}),b.jsx("span",{children:h.name})]})},h.id)):null;return b.jsxs(Kt,{disabled:r,width:300,store:o,onOptionSubmit:a,withinPortal:!0,children:[b.jsx(Kt.DropdownTarget,{children:b.jsx(Wx,{style:{width:"400px"},pointer:!0,onClick:()=>o.toggleDropdown(),children:b.jsxs(rb.Group,{children:[t.length>0?u:b.jsx(Pr.Placeholder,{children:"Add tags"}),b.jsx(Kt.EventsTarget,{children:b.jsx(Wx.Field,{type:"hidden",onBlur:()=>o.closeDropdown()})})]})})}),b.jsx(Kt.Dropdown,{children:b.jsxs(Kt.Options,{children:[c.length===0?b.jsx(Kt.Empty,{children:"No additional tags"}):i||s?b.jsx(Kt.Group,{label:"Text Tags",children:c}):c,i?b.jsx(Kt.Group,{label:"Task Tags",children:d}):null,s?b.jsx(Kt.Group,{label:"Participant Tags",children:f}):null]})})]})}function S3t({annotation:e,setAnnotation:t,start:n,current:r,end:i,text:s,tags:o,selectedTags:a,onTextChange:l,deleteRowCallback:u,addRowCallback:c,onSelectTags:d,addRef:f,index:h}){const[p,m]=A.useState(e),g=A.useRef(0);return A.useEffect(()=>{g.current=h},[h]),A.useMemo(()=>b.jsxs(gn,{justify:"space-between",style:{width:"100%"},wrap:"nowrap",children:[b.jsx(gn,{wrap:"nowrap",gap:0,style:{width:"100%",backgroundColor:r>=n&&r<=i?"rgba(100, 149, 237, 0.3)":"white"},children:b.jsx(eI,{ref:v=>v?f(g.current,v):null,autosize:!0,minRows:1,maxRows:3,style:{width:"100%"},variant:"unstyled",value:s,onChange:v=>{l(g.current,v.currentTarget.value)},onKeyDown:v=>{v.key==="Enter"&&v.currentTarget.selectionStart!==null?(c(g.current,v.currentTarget.selectionStart),v.preventDefault(),v.stopPropagation()):v.key==="Backspace"&&v.currentTarget.selectionStart===0&&v.currentTarget.selectionEnd===0&&(u(g.current),v.preventDefault(),v.stopPropagation())}})}),b.jsxs(gn,{wrap:"nowrap",style:{width:"300px"},children:[b.jsx(OF,{orientation:"vertical",size:"xs"}),b.jsx(pA,{onSelectTags:v=>d(g.current,v),selectedTags:a,tags:o}),b.jsxs(Tn,{children:[b.jsx(Tn.Target,{children:b.jsx(Gnt,{style:{color:e.length>0?"cornflowerblue":"lightgray",cursor:"pointer"}})}),b.jsx(Tn.Dropdown,{children:b.jsx(eI,{value:p,onChange:v=>m(v.currentTarget.value),placeholder:"Add Annotation",onBlur:()=>t(g.current,p)})})]})]})]}),[f,c,e.length,p,r,u,i,d,l,a,t,n,o,s])}var lo=[];for(var L9=0;L9<256;++L9)lo.push((L9+256).toString(16).slice(1));function T3t(e,t=0){return(lo[e[t+0]]+lo[e[t+1]]+lo[e[t+2]]+lo[e[t+3]]+"-"+lo[e[t+4]]+lo[e[t+5]]+"-"+lo[e[t+6]]+lo[e[t+7]]+"-"+lo[e[t+8]]+lo[e[t+9]]+"-"+lo[e[t+10]]+lo[e[t+11]]+lo[e[t+12]]+lo[e[t+13]]+lo[e[t+14]]+lo[e[t+15]]).toLowerCase()}var tO,C3t=new Uint8Array(16);function A3t(){if(!tO&&(tO=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!tO))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tO(C3t)}var I3t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Dme={randomUUID:I3t};function VI(e,t,n){if(Dme.randomUUID&&!t&&!e)return Dme.randomUUID();e=e||{};var r=e.random||(e.rng||A3t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,T3t(r)}function Mme({addTagCallback:e,currentNames:t,editTag:n=!1,editableTag:r}){const[i,s]=A.useState(n?r.name:""),[o,a]=A.useState(n?r.color:"#fd7e14"),l=A.useCallback(()=>{const u=VI();e({color:o,name:i,id:u})},[e,o,i]);return b.jsxs(Gr,{gap:"xs",children:[b.jsxs(gn,{children:[b.jsx(Ic,{color:o}),b.jsx(qd,{required:!0,placeholder:"Enter tag name",value:i,onChange:u=>s(u.currentTarget.value),error:t.includes(i)&&(!n||r.name!==i)?"Tag with this name already exists":null})]}),b.jsx(HK,{withPicker:n,style:{width:"100%"},value:o,onChange:u=>a(u),swatches:["#2e2e2e","#868e96","#fa5252","#e64980","#be4bdb","#7950f2","#4c6ef5","#228be6","#15aabf","#12b886","#40c057","#82c91e","#fab005","#fd7e14"]}),b.jsx(rn,{disabled:n&&o===r.color&&(i.length===0||t.includes(i)),size:"compact-sm",onClick:()=>l(),children:n?"Edit Tag":"Add Tag"})]})}function hq({createTagCallback:e,editTagCallback:t,tags:n,email:r=""}){const[i,s]=A.useState(!1);return b.jsxs(Tn,{withinPortal:!1,children:[b.jsx(Tn.Target,{children:b.jsxs(Gr,{justify:"center",style:{width:"300px",cursor:"pointer"},children:[b.jsxs(gn,{children:[b.jsx(HSe,{}),b.jsx(Xe,{children:"Tags"})]}),r?b.jsx(Xe,{ta:"center",style:{justifyContent:"end",alignContent:"end"},c:"dimmed",children:r}):null]})}),n?b.jsx(Tn.Dropdown,{children:b.jsxs(Gr,{style:{width:"300px"},gap:"xs",children:[n.length===0?b.jsx(Xe,{color:"dimmed",children:"No tags found. Create new tags below."}):null,n.map(o=>b.jsxs(gn,{justify:"space-between",children:[b.jsxs(gn,{children:[b.jsx(Ic,{color:o.color}),b.jsx(Xe,{children:o.name})]}),b.jsxs(Tn,{trapFocus:!0,withinPortal:!1,children:[b.jsx(Tn.Target,{children:b.jsx(VSe,{color:"lightgray"})}),b.jsx(Tn.Dropdown,{children:b.jsx(Mme,{editTag:!0,currentNames:n.map(a=>a.name),addTagCallback:a=>{t(o,{...a,id:o.id})},editableTag:o})})]})]},o.id)),b.jsxs(Tn,{trapFocus:!0,opened:i,withinPortal:!1,children:[b.jsx(Tn.Target,{children:b.jsx(rn,{variant:"light",onClick:()=>s(!i),children:"Create new tag"})}),b.jsx(Tn.Dropdown,{children:b.jsx(Mme,{currentNames:n.map(o=>o.name),addTagCallback:o=>{s(!1),e(o)}})})]})]})}):b.jsx(is,{})]})}var $me={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lMe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},k3t=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Uee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,u=l?e[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,h=u&63;l||(h=64,o||(f=64)),r.push(n[c],n[d],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(lMe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):k3t(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const u=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new R3t;const f=s<<2|a>>4;if(r.push(f),u!==64){const h=a<<4&240|u>>2;if(r.push(h),d!==64){const p=u<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class R3t extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const P3t=function(e){const t=lMe(e);return Uee.encodeByteArray(t,!0)},U3=function(e){return P3t(e).replace(/\./g,"")},uMe=function(e){try{return Uee.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cMe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3t=()=>cMe().__FIREBASE_DEFAULTS__,O3t=()=>{if(typeof process>"u"||typeof $me>"u")return;const e=$me.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},D3t=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&uMe(e[1]);return t&&JSON.parse(t)},N4=()=>{try{return N3t()||O3t()||D3t()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},dMe=e=>{var t,n;return(n=(t=N4())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},M3t=e=>{const t=dMe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},fMe=()=>{var e;return(e=N4())===null||e===void 0?void 0:e.config},hMe=e=>{var t;return(t=N4())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3t(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[U3(JSON.stringify(n)),U3(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function L3t(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ba())}function F3t(){var e;const t=(e=N4())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j3t(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function B3t(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function z3t(){const e=ba();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function U3t(){return!F3t()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vee(){try{return typeof indexedDB=="object"}catch{return!1}}function V3t(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3t="FirebaseError";class hp extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=H3t,Object.setPrototypeOf(this,hp.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,HS.prototype.create)}}class HS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?q3t(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new hp(i,a,r)}}function q3t(e,t){return e.replace(W3t,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const W3t=/\{\$([^}]+)}/g;function G3t(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function qI(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Lme(s)&&Lme(o)){if(!qI(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Lme(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Y3t(e,t){const n=new K3t(e,t);return n.subscribe.bind(n)}class K3t{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");X3t(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=F9),i.error===void 0&&(i.error=F9),i.complete===void 0&&(i.complete=F9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function X3t(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function F9(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3t=1e3,Z3t=2,eLt=4*60*60*1e3,tLt=.5;function nLt(e,t=J3t,n=Z3t){const r=t*Math.pow(n,e),i=Math.round(tLt*r*(Math.random()-.5)*2);return Math.min(eLt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(e){return e&&e._delegate?e._delegate:e}class Gh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rLt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new HI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(sLt(t))try{this.getOrInitializeService({instanceIdentifier:r1})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=r1){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=r1){return this.instances.has(t)}getOptions(t=r1){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iLt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=r1){return this.component?this.component.multipleInstances?t:r1:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iLt(e){return e===r1?void 0:e}function sLt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oLt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new rLt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Gn||(Gn={}));const aLt={debug:Gn.DEBUG,verbose:Gn.VERBOSE,info:Gn.INFO,warn:Gn.WARN,error:Gn.ERROR,silent:Gn.SILENT},lLt=Gn.INFO,uLt={[Gn.DEBUG]:"log",[Gn.VERBOSE]:"log",[Gn.INFO]:"info",[Gn.WARN]:"warn",[Gn.ERROR]:"error"},cLt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=uLt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class O4{constructor(t){this.name=t,this._logLevel=lLt,this._logHandler=cLt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Gn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?aLt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Gn.DEBUG,...t),this._logHandler(this,Gn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Gn.VERBOSE,...t),this._logHandler(this,Gn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Gn.INFO,...t),this._logHandler(this,Gn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Gn.WARN,...t),this._logHandler(this,Gn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Gn.ERROR,...t),this._logHandler(this,Gn.ERROR,...t)}}const dLt=(e,t)=>t.some(n=>e instanceof n);let Fme,jme;function fLt(){return Fme||(Fme=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hLt(){return jme||(jme=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pMe=new WeakMap,pq=new WeakMap,mMe=new WeakMap,j9=new WeakMap,Hee=new WeakMap;function pLt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(V0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&pMe.set(n,e)}).catch(()=>{}),Hee.set(t,e),t}function mLt(e){if(pq.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});pq.set(e,t)}let mq={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return pq.get(e);if(t==="objectStoreNames")return e.objectStoreNames||mMe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return V0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function gLt(e){mq=e(mq)}function yLt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(B9(this),t,...n);return mMe.set(r,t.sort?t.sort():[t]),V0(r)}:hLt().includes(e)?function(...t){return e.apply(B9(this),t),V0(pMe.get(this))}:function(...t){return V0(e.apply(B9(this),t))}}function vLt(e){return typeof e=="function"?yLt(e):(e instanceof IDBTransaction&&mLt(e),dLt(e,fLt())?new Proxy(e,mq):e)}function V0(e){if(e instanceof IDBRequest)return pLt(e);if(j9.has(e))return j9.get(e);const t=vLt(e);return t!==e&&(j9.set(e,t),Hee.set(t,e)),t}const B9=e=>Hee.get(e);function bLt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=V0(o);return r&&o.addEventListener("upgradeneeded",l=>{r(V0(o.result),l.oldVersion,l.newVersion,V0(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const _Lt=["get","getKey","getAll","getAllKeys","count"],wLt=["put","add","delete","clear"],z9=new Map;function Bme(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(z9.get(t))return z9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=wLt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_Lt.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return z9.set(t,s),s}gLt(e=>({...e,get:(t,n,r)=>Bme(t,n)||e.get(t,n,r),has:(t,n)=>!!Bme(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xLt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ELt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ELt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const gq="@firebase/app",zme="0.10.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=new O4("@firebase/app"),SLt="@firebase/app-compat",TLt="@firebase/analytics-compat",CLt="@firebase/analytics",ALt="@firebase/app-check-compat",ILt="@firebase/app-check",kLt="@firebase/auth",RLt="@firebase/auth-compat",PLt="@firebase/database",NLt="@firebase/database-compat",OLt="@firebase/functions",DLt="@firebase/functions-compat",MLt="@firebase/installations",$Lt="@firebase/installations-compat",LLt="@firebase/messaging",FLt="@firebase/messaging-compat",jLt="@firebase/performance",BLt="@firebase/performance-compat",zLt="@firebase/remote-config",ULt="@firebase/remote-config-compat",VLt="@firebase/storage",HLt="@firebase/storage-compat",qLt="@firebase/firestore",WLt="@firebase/vertexai-preview",GLt="@firebase/firestore-compat",YLt="firebase",KLt="10.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yq="[DEFAULT]",XLt={[gq]:"fire-core",[SLt]:"fire-core-compat",[CLt]:"fire-analytics",[TLt]:"fire-analytics-compat",[ILt]:"fire-app-check",[ALt]:"fire-app-check-compat",[kLt]:"fire-auth",[RLt]:"fire-auth-compat",[PLt]:"fire-rtdb",[NLt]:"fire-rtdb-compat",[OLt]:"fire-fn",[DLt]:"fire-fn-compat",[MLt]:"fire-iid",[$Lt]:"fire-iid-compat",[LLt]:"fire-fcm",[FLt]:"fire-fcm-compat",[jLt]:"fire-perf",[BLt]:"fire-perf-compat",[zLt]:"fire-rc",[ULt]:"fire-rc-compat",[VLt]:"fire-gcs",[HLt]:"fire-gcs-compat",[qLt]:"fire-fst",[GLt]:"fire-fst-compat",[WLt]:"fire-vertex","fire-js":"fire-js",[YLt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=new Map,QLt=new Map,vq=new Map;function Ume(e,t){try{e.container.addComponent(t)}catch(n){Km.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Xm(e){const t=e.name;if(vq.has(t))return Km.debug(`There were multiple attempts to register component ${t}.`),!1;vq.set(t,e);for(const n of V3.values())Ume(n,e);for(const n of QLt.values())Ume(n,e);return!0}function qS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function _h(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JLt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},H0=new HS("app","Firebase",JLt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZLt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw H0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_=KLt;function gMe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:yq,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw H0.create("bad-app-name",{appName:String(i)});if(n||(n=fMe()),!n)throw H0.create("no-options");const s=V3.get(i);if(s){if(qI(n,s.options)&&qI(r,s.config))return s;throw H0.create("duplicate-app",{appName:i})}const o=new oLt(i);for(const l of vq.values())o.addComponent(l);const a=new ZLt(n,r,o);return V3.set(i,a),a}function qee(e=yq){const t=V3.get(e);if(!t&&e===yq&&fMe())return gMe();if(!t)throw H0.create("no-app",{appName:e});return t}function Xd(e,t,n){var r;let i=(r=XLt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Km.warn(a.join(" "));return}Xm(new Gh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eFt="firebase-heartbeat-database",tFt=1,WI="firebase-heartbeat-store";let U9=null;function yMe(){return U9||(U9=bLt(eFt,tFt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(WI)}catch(n){console.warn(n)}}}}).catch(e=>{throw H0.create("idb-open",{originalErrorMessage:e.message})})),U9}async function nFt(e){try{const n=(await yMe()).transaction(WI),r=await n.objectStore(WI).get(vMe(e));return await n.done,r}catch(t){if(t instanceof hp)Km.warn(t.message);else{const n=H0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Km.warn(n.message)}}}async function Vme(e,t){try{const r=(await yMe()).transaction(WI,"readwrite");await r.objectStore(WI).put(t,vMe(e)),await r.done}catch(n){if(n instanceof hp)Km.warn(n.message);else{const r=H0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Km.warn(r.message)}}}function vMe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rFt=1024,iFt=30*24*60*60*1e3;class sFt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new aFt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Hme();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=iFt}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Km.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Hme(),{heartbeatsToSend:r,unsentEntries:i}=oFt(this._heartbeatsCache.heartbeats),s=U3(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Km.warn(n),""}}}function Hme(){return new Date().toISOString().substring(0,10)}function oFt(e,t=rFt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),qme(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),qme(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class aFt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vee()?V3t().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nFt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Vme(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Vme(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function qme(e){return U3(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lFt(e){Xm(new Gh("platform-logger",t=>new xLt(t),"PRIVATE")),Xm(new Gh("heartbeat",t=>new sFt(t),"PRIVATE")),Xd(gq,zme,e),Xd(gq,zme,"esm2017"),Xd("fire-js","")}lFt("");function bMe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uFt=bMe,_Me=new HS("auth","Firebase",bMe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=new O4("@firebase/auth");function cFt(e,...t){H3.logLevel<=Gn.WARN&&H3.warn(`Auth (${i_}): ${e}`,...t)}function LD(e,...t){H3.logLevel<=Gn.ERROR&&H3.error(`Auth (${i_}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(e,...t){throw Gee(e,...t)}function Qd(e,...t){return Gee(e,...t)}function Wee(e,t,n){const r=Object.assign(Object.assign({},uFt()),{[t]:n});return new HS("auth","Firebase",r).create(t,{appName:e.name})}function q0(e){return Wee(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dFt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Yh(e,"argument-error"),Wee(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gee(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return _Me.create(e,...t)}function un(e,t,...n){if(!e)throw Gee(t,...n)}function am(e){const t="INTERNAL ASSERTION FAILED: "+e;throw LD(t),new Error(t)}function Qm(e,t){e||am(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bq(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function fFt(){return Wme()==="http:"||Wme()==="https:"}function Wme(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hFt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fFt()||j3t()||"connection"in navigator)?navigator.onLine:!0}function pFt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(t,n){this.shortDelay=t,this.longDelay=n,Qm(n>t,"Short delay should be less than long delay!"),this.isMobile=L3t()||B3t()}get(){return hFt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yee(e,t){Qm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wMe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;am("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;am("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;am("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mFt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gFt=new OR(3e4,6e4);function D4(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function WS(e,t,n,r,i={}){return xMe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=NR(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),wMe.fetch()(SMe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},s))})}async function xMe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},mFt),t);try{const i=new yFt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw nO(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw nO(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw nO(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw nO(e,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Wee(e,c,u);Yh(e,c)}}catch(i){if(i instanceof hp)throw i;Yh(e,"network-request-failed",{message:String(i)})}}async function EMe(e,t,n,r,i={}){const s=await WS(e,t,n,r,i);return"mfaPendingCredential"in s&&Yh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function SMe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Yee(e.config,i):`${e.config.apiScheme}://${i}`}class yFt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qd(this.auth,"network-request-failed")),gFt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nO(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Qd(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vFt(e,t){return WS(e,"POST","/v1/accounts:delete",t)}async function TMe(e,t){return WS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function bFt(e,t=!1){const n=ni(e),r=await n.getIdToken(t),i=Kee(r);un(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:mA(V9(i.auth_time)),issuedAtTime:mA(V9(i.iat)),expirationTime:mA(V9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function V9(e){return Number(e)*1e3}function Kee(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return LD("JWT malformed, contained fewer than 3 sections"),null;try{const i=uMe(n);return i?JSON.parse(i):(LD("Failed to decode base64 JWT payload"),null)}catch(i){return LD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Gme(e){const t=Kee(e);return un(t,"internal-error"),un(typeof t.exp<"u","internal-error"),un(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GI(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof hp&&_Ft(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function _Ft({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wFt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mA(this.lastLoginAt),this.creationTime=mA(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q3(e){var t;const n=e.auth,r=await e.getIdToken(),i=await GI(e,TMe(n,{idToken:r}));un(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?CMe(s.providerUserInfo):[],a=EFt(e.providerData,o),l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new _q(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,d)}async function xFt(e){const t=ni(e);await q3(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function EFt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function CMe(e){return e.map(t=>{var{providerId:n}=t,r=Ok(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SFt(e,t){const n=await xMe(e,{},async()=>{const r=NR({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=SMe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",wMe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TFt(e,t){return WS(e,"POST","/v2/accounts:revokeToken",D4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){un(t.idToken,"internal-error"),un(typeof t.idToken<"u","internal-error"),un(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Gme(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){un(t.length!==0,"internal-error");const n=Gme(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(un(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await SFt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ex;return r&&(un(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(un(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(un(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ex,this.toJSON())}_performRefresh(){return am("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(e,t){un(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class lm{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=Ok(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wFt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _q(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await GI(this,this.stsTokenManager.getToken(this.auth,t));return un(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return bFt(this,t)}reload(){return xFt(this)}_assign(t){this!==t&&(un(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new lm(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){un(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await q3(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_h(this.auth.app))return Promise.reject(q0(this.auth));const t=await this.getIdToken();return await GI(this,vFt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:w,isAnonymous:x,providerData:S,stsTokenManager:E}=n;un(_&&E,t,"internal-error");const T=Ex.fromJSON(this.name,E);un(typeof _=="string",t,"internal-error"),Mg(d,t.name),Mg(f,t.name),un(typeof w=="boolean",t,"internal-error"),un(typeof x=="boolean",t,"internal-error"),Mg(h,t.name),Mg(p,t.name),Mg(m,t.name),Mg(g,t.name),Mg(y,t.name),Mg(v,t.name);const I=new lm({uid:_,auth:t,email:f,emailVerified:w,displayName:d,isAnonymous:x,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:T,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(I.providerData=S.map(k=>Object.assign({},k))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(t,n,r=!1){const i=new Ex;i.updateFromServerResponse(n);const s=new lm({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await q3(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];un(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?CMe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ex;a.updateFromIdToken(r);const l=new lm({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _q(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yme=new Map;function um(e){Qm(e instanceof Function,"Expected a class definition");let t=Yme.get(e);return t?(Qm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Yme.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AMe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}AMe.type="NONE";const Kme=AMe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(e,t,n){return`firebase:${e}:${t}:${n}`}class Sx{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=FD(this.userKey,i.apiKey,s),this.fullPersistenceKey=FD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?lm._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Sx(um(Kme),t,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||um(Kme);const o=FD(r,t.config.apiKey,t.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const d=lm._fromJSON(t,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Sx(s,t,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Sx(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xme(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(PMe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(IMe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(OMe(t))return"Blackberry";if(DMe(t))return"Webos";if(kMe(t))return"Safari";if((t.includes("chrome/")||RMe(t))&&!t.includes("edge/"))return"Chrome";if(NMe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function IMe(e=ba()){return/firefox\//i.test(e)}function kMe(e=ba()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function RMe(e=ba()){return/crios\//i.test(e)}function PMe(e=ba()){return/iemobile/i.test(e)}function NMe(e=ba()){return/android/i.test(e)}function OMe(e=ba()){return/blackberry/i.test(e)}function DMe(e=ba()){return/webos/i.test(e)}function Xee(e=ba()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function CFt(e=ba()){var t;return Xee(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function AFt(){return z3t()&&document.documentMode===10}function MMe(e=ba()){return Xee(e)||NMe(e)||DMe(e)||OMe(e)||/windows phone/i.test(e)||PMe(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Me(e,t=[]){let n;switch(e){case"Browser":n=Xme(ba());break;case"Worker":n=`${Xme(ba())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${i_}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IFt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const l=t(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kFt(e,t={}){return WS(e,"GET","/v2/passwordPolicy",D4(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RFt=6;class PFt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:RFt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NFt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qme(this),this.idTokenSubscription=new Qme(this),this.beforeStateQueue=new IFt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_Me,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=um(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Sx.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await TMe(this,{idToken:t}),r=await lm._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(_h(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return un(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await q3(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=pFt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(_h(this.app))return Promise.reject(q0(this));const n=t?ni(t):null;return n&&un(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&un(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return _h(this.app)?Promise.reject(q0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return _h(this.app)?Promise.reject(q0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(um(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await kFt(this),n=new PFt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new HS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await TFt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&um(t)||this._popupRedirectResolver;un(n,this,"argument-error"),this.redirectPersistenceManager=await Sx.create(this,[um(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(un(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return un(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=$Me(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&cFt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function DR(e){return ni(e)}class Qme{constructor(t){this.auth=t,this.observer=null,this.addObserver=Y3t(n=>this.observer=n)}get next(){return un(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qee={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OFt(e){Qee=e}function DFt(e){return Qee.loadJS(e)}function MFt(){return Qee.gapiScript}function $Ft(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LFt(e,t){const n=qS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(qI(s,t??{}))return i;Yh(i,"already-initialized")}return n.initialize({options:t})}function FFt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(um);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function jFt(e,t,n){const r=DR(e);un(r._canInitEmulator,r,"emulator-config-failed"),un(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=LMe(t),{host:o,port:a}=BFt(t),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),zFt()}function LMe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function BFt(e){const t=LMe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Jme(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Jme(o)}}}function Jme(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function zFt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FMe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return am("not implemented")}_getIdTokenResponse(t){return am("not implemented")}_linkToIdToken(t,n){return am("not implemented")}_getReauthenticationResolver(t){return am("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tx(e,t){return EMe(e,"POST","/v1/accounts:signInWithIdp",D4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UFt="http://localhost";class bb extends FMe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new bb(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Yh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=Ok(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new bb(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Tx(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Tx(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Tx(t,n)}buildRequest(){const t={requestUri:UFt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=NR(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jee{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR extends Jee{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0 extends MR{constructor(){super("facebook.com")}static credential(t){return bb._fromParams({providerId:a0.PROVIDER_ID,signInMethod:a0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return a0.credentialFromTaggedObject(t)}static credentialFromError(t){return a0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return a0.credential(t.oauthAccessToken)}catch{return null}}}a0.FACEBOOK_SIGN_IN_METHOD="facebook.com";a0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em extends MR{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return bb._fromParams({providerId:em.PROVIDER_ID,signInMethod:em.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return em.credentialFromTaggedObject(t)}static credentialFromError(t){return em.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return em.credential(n,r)}catch{return null}}}em.GOOGLE_SIGN_IN_METHOD="google.com";em.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0 extends MR{constructor(){super("github.com")}static credential(t){return bb._fromParams({providerId:l0.PROVIDER_ID,signInMethod:l0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return l0.credentialFromTaggedObject(t)}static credentialFromError(t){return l0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return l0.credential(t.oauthAccessToken)}catch{return null}}}l0.GITHUB_SIGN_IN_METHOD="github.com";l0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0 extends MR{constructor(){super("twitter.com")}static credential(t,n){return bb._fromParams({providerId:u0.PROVIDER_ID,signInMethod:u0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return u0.credentialFromTaggedObject(t)}static credentialFromError(t){return u0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return u0.credential(n,r)}catch{return null}}}u0.TWITTER_SIGN_IN_METHOD="twitter.com";u0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VFt(e,t){return EMe(e,"POST","/v1/accounts:signUp",D4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await lm._fromIdTokenResponse(t,r,i),o=Zme(r);return new _y({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Zme(r);return new _y({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Zme(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HFt(e){var t;if(_h(e.app))return Promise.reject(q0(e));const n=DR(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new _y({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await VFt(n,{returnSecureToken:!0}),i=await _y._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3 extends hp{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,W3.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new W3(t,n,r,i)}}function jMe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?W3._fromErrorAndOperation(e,s,t,r):s})}async function qFt(e,t,n=!1){const r=await GI(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return _y._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WFt(e,t,n=!1){const{auth:r}=e;if(_h(r.app))return Promise.reject(q0(r));const i="reauthenticate";try{const s=await GI(e,jMe(r,i,t,e),n);un(s.idToken,r,"internal-error");const o=Kee(s.idToken);un(o,r,"internal-error");const{sub:a}=o;return un(e.uid===a,r,"user-mismatch"),_y._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Yh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GFt(e,t,n=!1){if(_h(e.app))return Promise.reject(q0(e));const r="signIn",i=await jMe(e,r,t),s=await _y._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function YFt(e,t,n,r){return ni(e).onIdTokenChanged(t,n,r)}function KFt(e,t,n){return ni(e).beforeAuthStateChanged(t,n)}function XFt(e,t,n,r){return ni(e).onAuthStateChanged(t,n,r)}function QFt(e){return ni(e).signOut()}const G3="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BMe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(G3,"1"),this.storage.removeItem(G3),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JFt=1e3,ZFt=10;class zMe extends BMe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MMe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);AFt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,ZFt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},JFt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}zMe.type="LOCAL";const e6t=zMe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UMe extends BMe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}UMe.type="SESSION";const VMe=UMe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t6t(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new M4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await t6t(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}M4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zee(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6t{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Zee("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(){return window}function r6t(e){Dh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HMe(){return typeof Dh().WorkerGlobalScope<"u"&&typeof Dh().importScripts=="function"}async function i6t(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function s6t(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function o6t(){return HMe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qMe="firebaseLocalStorageDb",a6t=1,Y3="firebaseLocalStorage",WMe="fbase_key";class $R{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $4(e,t){return e.transaction([Y3],t?"readwrite":"readonly").objectStore(Y3)}function l6t(){const e=indexedDB.deleteDatabase(qMe);return new $R(e).toPromise()}function wq(){const e=indexedDB.open(qMe,a6t);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(Y3,{keyPath:WMe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(Y3)?t(r):(r.close(),await l6t(),t(await wq()))})})}async function ege(e,t,n){const r=$4(e,!0).put({[WMe]:t,value:n});return new $R(r).toPromise()}async function u6t(e,t){const n=$4(e,!1).get(t),r=await new $R(n).toPromise();return r===void 0?null:r.value}function tge(e,t){const n=$4(e,!0).delete(t);return new $R(n).toPromise()}const c6t=800,d6t=3;class GMe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wq(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>d6t)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HMe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=M4._getInstance(o6t()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await i6t(),!this.activeServiceWorker)return;this.sender=new n6t(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||s6t()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await wq();return await ege(t,G3,"1"),await tge(t,G3),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ege(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>u6t(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>tge(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=$4(i,!1).getAll();return new $R(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),c6t)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GMe.type="LOCAL";const f6t=GMe;new OR(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YMe(e,t){return t?um(t):(un(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ete extends FMe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Tx(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Tx(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Tx(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function h6t(e){return GFt(e.auth,new ete(e),e.bypassAuthState)}function p6t(e){const{auth:t,user:n}=e;return un(n,t,"internal-error"),WFt(n,new ete(e),e.bypassAuthState)}async function m6t(e){const{auth:t,user:n}=e;return un(n,t,"internal-error"),qFt(n,new ete(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KMe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return h6t;case"linkViaPopup":case"linkViaRedirect":return m6t;case"reauthViaPopup":case"reauthViaRedirect":return p6t;default:Yh(this.auth,"internal-error")}}resolve(t){Qm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Qm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6t=new OR(2e3,1e4);async function y6t(e,t,n){if(_h(e.app))return Promise.reject(Qd(e,"operation-not-supported-in-this-environment"));const r=DR(e);dFt(e,t,Jee);const i=YMe(r,n);return new N1(r,"signInViaPopup",t,i).executeNotNull()}class N1 extends KMe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,N1.currentPopupAction&&N1.currentPopupAction.cancel(),N1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return un(t,this.auth,"internal-error"),t}async onExecution(){Qm(this.filter.length===1,"Popup operations only handle one event");const t=Zee();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Qd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,N1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qd(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,g6t.get())};t()}}N1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6t="pendingRedirect",jD=new Map;class b6t extends KMe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=jD.get(this.auth._key());if(!t){try{const r=await _6t(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}jD.set(this.auth._key(),t)}return this.bypassAuthState||jD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _6t(e,t){const n=E6t(t),r=x6t(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function w6t(e,t){jD.set(e._key(),t)}function x6t(e){return um(e._redirectPersistence)}function E6t(e){return FD(v6t,e.config.apiKey,e.name)}async function S6t(e,t,n=!1){if(_h(e.app))return Promise.reject(q0(e));const r=DR(e),i=YMe(r,t),o=await new b6t(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6t=10*60*1e3;class C6t{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!A6t(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!XMe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Qd(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=T6t&&this.cachedEventUids.clear(),this.cachedEventUids.has(nge(t))}saveEventToCache(t){this.cachedEventUids.add(nge(t)),this.lastProcessedEventTime=Date.now()}}function nge(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function XMe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function A6t(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XMe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I6t(e,t={}){return WS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6t=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,R6t=/^https?/;async function P6t(e){if(e.config.emulator)return;const{authorizedDomains:t}=await I6t(e);for(const n of t)try{if(N6t(n))return}catch{}Yh(e,"unauthorized-domain")}function N6t(e){const t=bq(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!R6t.test(n))return!1;if(k6t.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6t=new OR(3e4,6e4);function rge(){const e=Dh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function D6t(e){return new Promise((t,n)=>{var r,i,s;function o(){rge(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{rge(),n(Qd(e,"network-request-failed"))},timeout:O6t.get()})}if(!((i=(r=Dh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Dh().gapi)===null||s===void 0)&&s.load)o();else{const a=$Ft("iframefcb");return Dh()[a]=()=>{gapi.load?o():n(Qd(e,"network-request-failed"))},DFt(`${MFt()}?onload=${a}`).catch(l=>n(l))}}).catch(t=>{throw BD=null,t})}let BD=null;function M6t(e){return BD=BD||D6t(e),BD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6t=new OR(5e3,15e3),L6t="__/auth/iframe",F6t="emulator/auth/iframe",j6t={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B6t=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z6t(e){const t=e.config;un(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Yee(t,F6t):`https://${e.config.authDomain}/${L6t}`,r={apiKey:t.apiKey,appName:e.name,v:i_},i=B6t.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${NR(r).slice(1)}`}async function U6t(e){const t=await M6t(e),n=Dh().gapi;return un(n,e,"internal-error"),t.open({where:document.body,url:z6t(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:j6t,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Qd(e,"network-request-failed"),a=Dh().setTimeout(()=>{s(o)},$6t.get());function l(){Dh().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6t={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H6t=500,q6t=600,W6t="_blank",G6t="http://localhost";class ige{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y6t(e,t,n,r=H6t,i=q6t){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},V6t),{width:r.toString(),height:i.toString(),top:s,left:o}),u=ba().toLowerCase();n&&(a=RMe(u)?W6t:n),IMe(u)&&(t=t||G6t,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(CFt(u)&&a!=="_self")return K6t(t||"",a),new ige(null);const d=window.open(t||"",a,c);un(d,e,"popup-blocked");try{d.focus()}catch{}return new ige(d)}function K6t(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6t="__/auth/handler",Q6t="emulator/auth/handler",J6t=encodeURIComponent("fac");async function sge(e,t,n,r,i,s){un(e.config.authDomain,e,"auth-domain-config-required"),un(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:i_,eventId:i};if(t instanceof Jee){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",G3t(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(t instanceof MR){const c=t.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await e._getAppCheckToken(),u=l?`#${J6t}=${encodeURIComponent(l)}`:"";return`${Z6t(e)}?${NR(a).slice(1)}${u}`}function Z6t({config:e}){return e.emulator?Yee(e,Q6t):`https://${e.authDomain}/${X6t}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9="webStorageSupport";class e4t{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VMe,this._completeRedirectFn=S6t,this._overrideRedirectResult=w6t}async _openPopup(t,n,r,i){var s;Qm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await sge(t,n,r,bq(),i);return Y6t(t,o,Zee())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await sge(t,n,r,bq(),i);return r6t(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Qm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await U6t(t),r=new C6t(t);return n.register("authEvent",i=>(un(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(H9,{type:H9},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[H9];o!==void 0&&n(!!o),Yh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=P6t(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return MMe()||kMe()||Xee()}}const QMe=e4t;var oge="@firebase/auth",age="1.7.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4t{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){un(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4t(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function r4t(e){Xm(new Gh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;un(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$Me(e)},u=new NFt(r,i,s,l);return FFt(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Xm(new Gh("auth-internal",t=>{const n=DR(t.getProvider("auth").getImmediate());return(r=>new t4t(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xd(oge,age,n4t(e)),Xd(oge,age,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4t=5*60,s4t=hMe("authIdTokenMaxAge")||i4t;let lge=null;const o4t=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>s4t)return;const i=n==null?void 0:n.token;lge!==i&&(lge=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function K3(e=qee()){const t=qS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=LFt(e,{popupRedirectResolver:QMe,persistence:[f6t,e6t,VMe]}),r=hMe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=o4t(s.toString());KFt(n,o,()=>o(n.currentUser)),YFt(n,a=>o(a))}}const i=dMe("auth");return i&&jFt(n,`http://${i}`),n}function a4t(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}OFt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Qd("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",a4t().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});r4t("Browser");var l4t="firebase",u4t="10.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xd(l4t,u4t,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JMe="firebasestorage.googleapis.com",ZMe="storageBucket",c4t=2*60*1e3,d4t=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends hp{constructor(t,n,r=0){super(q9(t),`Firebase Storage: ${n} (${q9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return q9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Yi;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Yi||(Yi={}));function q9(e){return"storage/"+e}function tte(){const e="An unknown error occurred, please check the error payload for server response.";return new Xi(Yi.UNKNOWN,e)}function f4t(e){return new Xi(Yi.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function h4t(e){return new Xi(Yi.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function p4t(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Xi(Yi.UNAUTHENTICATED,e)}function m4t(){return new Xi(Yi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function g4t(e){return new Xi(Yi.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function y4t(){return new Xi(Yi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function v4t(){return new Xi(Yi.CANCELED,"User canceled the upload/download.")}function b4t(e){return new Xi(Yi.INVALID_URL,"Invalid URL '"+e+"'.")}function _4t(e){return new Xi(Yi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function w4t(){return new Xi(Yi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ZMe+"' property when initializing the app?")}function x4t(){return new Xi(Yi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function E4t(){return new Xi(Yi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function S4t(e){return new Xi(Yi.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function xq(e){return new Xi(Yi.INVALID_ARGUMENT,e)}function e$e(){return new Xi(Yi.APP_DELETED,"The Firebase app was deleted.")}function T4t(e){return new Xi(Yi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gA(e,t){return new Xi(Yi.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function eC(e){throw new Xi(Yi.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Ua.makeFromUrl(t,n)}catch{return new Ua(t,"")}if(r.path==="")return r;throw _4t(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${c}/b/${i}/o${f}`,"i"),p={bucket:1,path:3},m=n===JMe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),_=[{regex:a,indices:l,postModify:s},{regex:h,indices:p,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let w=0;w<_.length;w++){const x=_[w],S=x.regex.exec(t);if(S){const E=S[x.indices.bucket];let T=S[x.indices.path];T||(T=""),r=new Ua(E,T),x.postModify(r);break}}if(r==null)throw b4t(t);return r}}class C4t{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4t(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...g){u||(u=!0,t.apply(null,g))}function d(g){i=setTimeout(()=>{i=null,e(h,l())},g)}function f(){s&&clearTimeout(s)}function h(g,...y){if(u){f();return}if(g){f(),c.call(null,g,...y);return}if(l()||o){f(),c.call(null,g,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,d(_)}let p=!1;function m(g){p||(p=!0,f(),!u&&(i!==null?(g||(a=2),clearTimeout(i),d(0)):g||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function I4t(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4t(e){return e!==void 0}function R4t(e){return typeof e=="object"&&!Array.isArray(e)}function nte(e){return typeof e=="string"||e instanceof String}function uge(e){return rte()&&e instanceof Blob}function rte(){return typeof Blob<"u"}function Eq(e,t,n,r){if(r<t)throw xq(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw xq(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function t$e(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var U1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(U1||(U1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P4t(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4t{constructor(t,n,r,i,s,o,a,l,u,c,d,f=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new rO(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===U1.NO_ERROR,l=s.getStatus();if(!a||P4t(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===U1.ABORT;r(!1,new rO(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new rO(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());k4t(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=tte();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?e$e():v4t();o(l)}else{const l=y4t();o(l)}};this.canceled_?n(!1,new rO(!1,null,!0)):this.backoffId_=A4t(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&I4t(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rO{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function O4t(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function D4t(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function M4t(e,t){t&&(e["X-Firebase-GMPID"]=t)}function $4t(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function L4t(e,t,n,r,i,s,o=!0){const a=t$e(e.urlParams),l=e.url+a,u=Object.assign({},e.headers);return M4t(u,t),O4t(u,n),D4t(u,s),$4t(u,r),new N4t(l,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function j4t(...e){const t=F4t();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(rte())return new Blob(e);throw new Xi(Yi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function B4t(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4t(e){if(typeof atob>"u")throw S4t("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class W9{constructor(t,n){this.data=t,this.contentType=n||null}}function U4t(e,t){switch(e){case wh.RAW:return new W9(n$e(t));case wh.BASE64:case wh.BASE64URL:return new W9(r$e(e,t));case wh.DATA_URL:return new W9(H4t(t),q4t(t))}throw tte()}function n$e(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function V4t(e){let t;try{t=decodeURIComponent(e)}catch{throw gA(wh.DATA_URL,"Malformed data URL.")}return n$e(t)}function r$e(e,t){switch(e){case wh.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw gA(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case wh.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw gA(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=z4t(t)}catch(i){throw i.message.includes("polyfill")?i:gA(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class i$e{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw gA(wh.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=W4t(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function H4t(e){const t=new i$e(e);return t.base64?r$e(wh.BASE64,t.rest):V4t(t.rest)}function q4t(e){return new i$e(e).contentType}function W4t(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(t,n){let r=0,i="";uge(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(uge(this.data_)){const r=this.data_,i=B4t(r,t,n);return i===null?null:new c0(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new c0(r,!0)}}static getBlob(...t){if(rte()){const n=t.map(r=>r instanceof c0?r.data_:r);return new c0(j4t.apply(null,n))}else{const n=t.map(o=>nte(o)?U4t(wh.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new c0(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ite(e){let t;try{t=JSON.parse(e)}catch{return null}return R4t(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4t(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Y4t(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function s$e(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4t(e,t){return t}class ka{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||K4t}}let iO=null;function X4t(e){return!nte(e)||e.length<2?e:s$e(e)}function o$e(){if(iO)return iO;const e=[];e.push(new ka("bucket")),e.push(new ka("generation")),e.push(new ka("metageneration")),e.push(new ka("name","fullPath",!0));function t(s,o){return X4t(o)}const n=new ka("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new ka("size");return i.xform=r,e.push(i),e.push(new ka("timeCreated")),e.push(new ka("updated")),e.push(new ka("md5Hash",null,!0)),e.push(new ka("cacheControl",null,!0)),e.push(new ka("contentDisposition",null,!0)),e.push(new ka("contentEncoding",null,!0)),e.push(new ka("contentLanguage",null,!0)),e.push(new ka("contentType",null,!0)),e.push(new ka("metadata","customMetadata",!0)),iO=e,iO}function Q4t(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Ua(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function J4t(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return Q4t(r,e),r}function a$e(e,t,n){const r=ite(t);return r===null?null:J4t(e,r,n)}function Z4t(e,t,n,r){const i=ite(t);if(i===null||!nte(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=e.bucket,d=e.fullPath,f="/b/"+o(c)+"/o/"+o(d),h=LR(f,n,r),p=t$e({alt:"media",token:u});return h+p})[0]}function ejt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cge="prefixes",dge="items";function tjt(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[cge])for(const i of n[cge]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Ua(t,s));r.prefixes.push(o)}if(n[dge])for(const i of n[dge]){const s=e._makeStorageReference(new Ua(t,i.name));r.items.push(s)}return r}function njt(e,t,n){const r=ite(n);return r===null?null:tjt(e,t,r)}class L4{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ste(e){if(!e)throw tte()}function rjt(e,t){function n(r,i){const s=a$e(e,i,t);return ste(s!==null),s}return n}function ijt(e,t){function n(r,i){const s=njt(e,t,i);return ste(s!==null),s}return n}function sjt(e,t){function n(r,i){const s=a$e(e,i,t);return ste(s!==null),Z4t(s,i,e.host,e._protocol)}return n}function ote(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=m4t():i=p4t():n.getStatus()===402?i=h4t(e.bucket):n.getStatus()===403?i=g4t(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function l$e(e){const t=ote(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=f4t(e.path)),s.serverResponse=i.serverResponse,s}return n}function ojt(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=LR(o,e.host,e._protocol),l="GET",u=e.maxOperationRetryTime,c=new L4(a,l,ijt(e,t.bucket),u);return c.urlParams=s,c.errorHandler=ote(t),c}function ajt(e,t,n){const r=t.fullServerUrl(),i=LR(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new L4(i,s,sjt(e,n),o);return a.errorHandler=l$e(t),a}function ljt(e,t){const n=t.fullServerUrl(),r=LR(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(l,u){}const a=new L4(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=l$e(t),a}function ujt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function cjt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=ujt(null,t)),r}function djt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let w=0;w<2;w++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=cjt(t,r,i),c=ejt(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=c0.getBlob(d,r,f);if(h===null)throw x4t();const p={name:u.fullPath},m=LR(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new L4(m,g,rjt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=ote(t),v}class fjt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=U1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=U1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=U1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw eC("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw eC("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw eC("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw eC("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw eC("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class hjt extends fjt{initXhr(){this.xhr_.responseType="text"}}function F4(){return new hjt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(t,n){this._service=t,n instanceof Ua?this._location=n:this._location=Ua.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new _b(t,n)}get root(){const t=new Ua(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return s$e(this._location.path)}get storage(){return this._service}get parent(){const t=G4t(this._location.path);if(t===null)return null;const n=new Ua(this._location.bucket,t);return new _b(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw T4t(t)}}function pjt(e,t,n){e._throwIfRoot("uploadBytes");const r=djt(e.storage,e._location,o$e(),new c0(t,!0),n);return e.storage.makeRequestWithTokens(r,F4).then(i=>({metadata:i,ref:e}))}function mjt(e){const t={prefixes:[],items:[]};return u$e(e,t).then(()=>t)}async function u$e(e,t,n){const i=await gjt(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await u$e(e,t,i.nextPageToken)}function gjt(e,t){t!=null&&typeof t.maxResults=="number"&&Eq("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=ojt(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,F4)}function yjt(e){e._throwIfRoot("getDownloadURL");const t=ajt(e.storage,e._location,o$e());return e.storage.makeRequestWithTokens(t,F4).then(n=>{if(n===null)throw E4t();return n})}function vjt(e){e._throwIfRoot("deleteObject");const t=ljt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,F4)}function bjt(e,t){const n=Y4t(e._location.path,t),r=new Ua(e._location.bucket,n);return new _b(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _jt(e){return/^[A-Za-z]+:\/\//.test(e)}function wjt(e,t){return new _b(e,t)}function c$e(e,t){if(e instanceof ate){const n=e;if(n._bucket==null)throw w4t();const r=new _b(n,n._bucket);return t!=null?c$e(r,t):r}else return t!==void 0?bjt(e,t):e}function xjt(e,t){if(t&&_jt(t)){if(e instanceof ate)return wjt(e,t);throw xq("To use ref(service, url), the first argument must be a Storage instance.")}else return c$e(e,t)}function fge(e,t){const n=t==null?void 0:t[ZMe];return n==null?null:Ua.makeFromBucketSpec(n,e)}function Ejt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:$3t(i,e.app.options.projectId))}class ate{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=JMe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=c4t,this._maxUploadRetryTime=d4t,this._requests=new Set,i!=null?this._bucket=Ua.makeFromBucketSpec(i,this._host):this._bucket=fge(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ua.makeFromBucketSpec(this._url,t):this._bucket=fge(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Eq("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Eq("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new _b(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new C4t(e$e());{const o=L4t(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const hge="@firebase/storage",pge="0.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d$e="storage";function Pv(e,t,n){return e=ni(e),pjt(e,t,n)}function tC(e){return e=ni(e),mjt(e)}function Nv(e){return e=ni(e),yjt(e)}function mge(e){return e=ni(e),vjt(e)}function Xr(e,t){return e=ni(e),xjt(e,t)}function K_(e=qee(),t){e=ni(e);const r=qS(e,d$e).getImmediate({identifier:t}),i=M3t("storage");return i&&Sjt(r,...i),r}function Sjt(e,t,n,r={}){Ejt(e,t,n,r)}function Tjt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new ate(n,r,i,t,i_)}function Cjt(){Xm(new Gh(d$e,Tjt,"PUBLIC").setMultipleInstances(!0)),Xd(hge,pge,""),Xd(hge,pge,"esm2017")}Cjt();var gge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var V1,f$e;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,T){function I(){}I.prototype=T.prototype,E.D=T.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(k,P,L){for(var R=Array(arguments.length-2),$=2;$<arguments.length;$++)R[$-2]=arguments[$];return T.prototype[P].apply(k,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,T,I){I||(I=0);var k=Array(16);if(typeof T=="string")for(var P=0;16>P;++P)k[P]=T.charCodeAt(I++)|T.charCodeAt(I++)<<8|T.charCodeAt(I++)<<16|T.charCodeAt(I++)<<24;else for(P=0;16>P;++P)k[P]=T[I++]|T[I++]<<8|T[I++]<<16|T[I++]<<24;T=E.g[0],I=E.g[1],P=E.g[2];var L=E.g[3],R=T+(L^I&(P^L))+k[0]+3614090360&4294967295;T=I+(R<<7&4294967295|R>>>25),R=L+(P^T&(I^P))+k[1]+3905402710&4294967295,L=T+(R<<12&4294967295|R>>>20),R=P+(I^L&(T^I))+k[2]+606105819&4294967295,P=L+(R<<17&4294967295|R>>>15),R=I+(T^P&(L^T))+k[3]+3250441966&4294967295,I=P+(R<<22&4294967295|R>>>10),R=T+(L^I&(P^L))+k[4]+4118548399&4294967295,T=I+(R<<7&4294967295|R>>>25),R=L+(P^T&(I^P))+k[5]+1200080426&4294967295,L=T+(R<<12&4294967295|R>>>20),R=P+(I^L&(T^I))+k[6]+2821735955&4294967295,P=L+(R<<17&4294967295|R>>>15),R=I+(T^P&(L^T))+k[7]+4249261313&4294967295,I=P+(R<<22&4294967295|R>>>10),R=T+(L^I&(P^L))+k[8]+1770035416&4294967295,T=I+(R<<7&4294967295|R>>>25),R=L+(P^T&(I^P))+k[9]+2336552879&4294967295,L=T+(R<<12&4294967295|R>>>20),R=P+(I^L&(T^I))+k[10]+4294925233&4294967295,P=L+(R<<17&4294967295|R>>>15),R=I+(T^P&(L^T))+k[11]+2304563134&4294967295,I=P+(R<<22&4294967295|R>>>10),R=T+(L^I&(P^L))+k[12]+1804603682&4294967295,T=I+(R<<7&4294967295|R>>>25),R=L+(P^T&(I^P))+k[13]+4254626195&4294967295,L=T+(R<<12&4294967295|R>>>20),R=P+(I^L&(T^I))+k[14]+2792965006&4294967295,P=L+(R<<17&4294967295|R>>>15),R=I+(T^P&(L^T))+k[15]+1236535329&4294967295,I=P+(R<<22&4294967295|R>>>10),R=T+(P^L&(I^P))+k[1]+4129170786&4294967295,T=I+(R<<5&4294967295|R>>>27),R=L+(I^P&(T^I))+k[6]+3225465664&4294967295,L=T+(R<<9&4294967295|R>>>23),R=P+(T^I&(L^T))+k[11]+643717713&4294967295,P=L+(R<<14&4294967295|R>>>18),R=I+(L^T&(P^L))+k[0]+3921069994&4294967295,I=P+(R<<20&4294967295|R>>>12),R=T+(P^L&(I^P))+k[5]+3593408605&4294967295,T=I+(R<<5&4294967295|R>>>27),R=L+(I^P&(T^I))+k[10]+38016083&4294967295,L=T+(R<<9&4294967295|R>>>23),R=P+(T^I&(L^T))+k[15]+3634488961&4294967295,P=L+(R<<14&4294967295|R>>>18),R=I+(L^T&(P^L))+k[4]+3889429448&4294967295,I=P+(R<<20&4294967295|R>>>12),R=T+(P^L&(I^P))+k[9]+568446438&4294967295,T=I+(R<<5&4294967295|R>>>27),R=L+(I^P&(T^I))+k[14]+3275163606&4294967295,L=T+(R<<9&4294967295|R>>>23),R=P+(T^I&(L^T))+k[3]+4107603335&4294967295,P=L+(R<<14&4294967295|R>>>18),R=I+(L^T&(P^L))+k[8]+1163531501&4294967295,I=P+(R<<20&4294967295|R>>>12),R=T+(P^L&(I^P))+k[13]+2850285829&4294967295,T=I+(R<<5&4294967295|R>>>27),R=L+(I^P&(T^I))+k[2]+4243563512&4294967295,L=T+(R<<9&4294967295|R>>>23),R=P+(T^I&(L^T))+k[7]+1735328473&4294967295,P=L+(R<<14&4294967295|R>>>18),R=I+(L^T&(P^L))+k[12]+2368359562&4294967295,I=P+(R<<20&4294967295|R>>>12),R=T+(I^P^L)+k[5]+4294588738&4294967295,T=I+(R<<4&4294967295|R>>>28),R=L+(T^I^P)+k[8]+2272392833&4294967295,L=T+(R<<11&4294967295|R>>>21),R=P+(L^T^I)+k[11]+1839030562&4294967295,P=L+(R<<16&4294967295|R>>>16),R=I+(P^L^T)+k[14]+4259657740&4294967295,I=P+(R<<23&4294967295|R>>>9),R=T+(I^P^L)+k[1]+2763975236&4294967295,T=I+(R<<4&4294967295|R>>>28),R=L+(T^I^P)+k[4]+1272893353&4294967295,L=T+(R<<11&4294967295|R>>>21),R=P+(L^T^I)+k[7]+4139469664&4294967295,P=L+(R<<16&4294967295|R>>>16),R=I+(P^L^T)+k[10]+3200236656&4294967295,I=P+(R<<23&4294967295|R>>>9),R=T+(I^P^L)+k[13]+681279174&4294967295,T=I+(R<<4&4294967295|R>>>28),R=L+(T^I^P)+k[0]+3936430074&4294967295,L=T+(R<<11&4294967295|R>>>21),R=P+(L^T^I)+k[3]+3572445317&4294967295,P=L+(R<<16&4294967295|R>>>16),R=I+(P^L^T)+k[6]+76029189&4294967295,I=P+(R<<23&4294967295|R>>>9),R=T+(I^P^L)+k[9]+3654602809&4294967295,T=I+(R<<4&4294967295|R>>>28),R=L+(T^I^P)+k[12]+3873151461&4294967295,L=T+(R<<11&4294967295|R>>>21),R=P+(L^T^I)+k[15]+530742520&4294967295,P=L+(R<<16&4294967295|R>>>16),R=I+(P^L^T)+k[2]+3299628645&4294967295,I=P+(R<<23&4294967295|R>>>9),R=T+(P^(I|~L))+k[0]+4096336452&4294967295,T=I+(R<<6&4294967295|R>>>26),R=L+(I^(T|~P))+k[7]+1126891415&4294967295,L=T+(R<<10&4294967295|R>>>22),R=P+(T^(L|~I))+k[14]+2878612391&4294967295,P=L+(R<<15&4294967295|R>>>17),R=I+(L^(P|~T))+k[5]+4237533241&4294967295,I=P+(R<<21&4294967295|R>>>11),R=T+(P^(I|~L))+k[12]+1700485571&4294967295,T=I+(R<<6&4294967295|R>>>26),R=L+(I^(T|~P))+k[3]+2399980690&4294967295,L=T+(R<<10&4294967295|R>>>22),R=P+(T^(L|~I))+k[10]+4293915773&4294967295,P=L+(R<<15&4294967295|R>>>17),R=I+(L^(P|~T))+k[1]+2240044497&4294967295,I=P+(R<<21&4294967295|R>>>11),R=T+(P^(I|~L))+k[8]+1873313359&4294967295,T=I+(R<<6&4294967295|R>>>26),R=L+(I^(T|~P))+k[15]+4264355552&4294967295,L=T+(R<<10&4294967295|R>>>22),R=P+(T^(L|~I))+k[6]+2734768916&4294967295,P=L+(R<<15&4294967295|R>>>17),R=I+(L^(P|~T))+k[13]+1309151649&4294967295,I=P+(R<<21&4294967295|R>>>11),R=T+(P^(I|~L))+k[4]+4149444226&4294967295,T=I+(R<<6&4294967295|R>>>26),R=L+(I^(T|~P))+k[11]+3174756917&4294967295,L=T+(R<<10&4294967295|R>>>22),R=P+(T^(L|~I))+k[2]+718787259&4294967295,P=L+(R<<15&4294967295|R>>>17),R=I+(L^(P|~T))+k[9]+3951481745&4294967295,E.g[0]=E.g[0]+T&4294967295,E.g[1]=E.g[1]+(P+(R<<21&4294967295|R>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+L&4294967295}r.prototype.u=function(E,T){T===void 0&&(T=E.length);for(var I=T-this.blockSize,k=this.B,P=this.h,L=0;L<T;){if(P==0)for(;L<=I;)i(this,E,L),L+=this.blockSize;if(typeof E=="string"){for(;L<T;)if(k[P++]=E.charCodeAt(L++),P==this.blockSize){i(this,k),P=0;break}}else for(;L<T;)if(k[P++]=E[L++],P==this.blockSize){i(this,k),P=0;break}}this.h=P,this.o+=T},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var T=1;T<E.length-8;++T)E[T]=0;var I=8*this.o;for(T=E.length-8;T<E.length;++T)E[T]=I&255,I/=256;for(this.u(E),E=Array(16),T=I=0;4>T;++T)for(var k=0;32>k;k+=8)E[I++]=this.g[T]>>>k&255;return E};function s(E,T){var I=a;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=T(E)}function o(E,T){this.h=T;for(var I=[],k=!0,P=E.length-1;0<=P;P--){var L=E[P]|0;k&&L==T||(I[P]=L,k=!1)}this.g=I}var a={};function l(E){return-128<=E&&128>E?s(E,function(T){return new o([T|0],0>T?-1:0)}):new o([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return d;if(0>E)return g(u(-E));for(var T=[],I=1,k=0;E>=I;k++)T[k]=E/I|0,I*=4294967296;return new o(T,0)}function c(E,T){if(E.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E.charAt(0)=="-")return g(c(E.substring(1),T));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(T,8)),k=d,P=0;P<E.length;P+=8){var L=Math.min(8,E.length-P),R=parseInt(E.substring(P,P+L),T);8>L?(L=u(Math.pow(T,L)),k=k.j(L).add(u(R))):(k=k.j(I),k=k.add(u(R)))}return k}var d=l(0),f=l(1),h=l(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var E=0,T=1,I=0;I<this.g.length;I++){var k=this.i(I);E+=(0<=k?k:4294967296+k)*T,T*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(p(this))return"0";if(m(this))return"-"+g(this).toString(E);for(var T=u(Math.pow(E,6)),I=this,k="";;){var P=w(I,T).g;I=y(I,P.j(T));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=P,p(I))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function p(E){if(E.h!=0)return!1;for(var T=0;T<E.g.length;T++)if(E.g[T]!=0)return!1;return!0}function m(E){return E.h==-1}e.l=function(E){return E=y(this,E),m(E)?-1:p(E)?0:1};function g(E){for(var T=E.g.length,I=[],k=0;k<T;k++)I[k]=~E.g[k];return new o(I,~E.h).add(f)}e.abs=function(){return m(this)?g(this):this},e.add=function(E){for(var T=Math.max(this.g.length,E.g.length),I=[],k=0,P=0;P<=T;P++){var L=k+(this.i(P)&65535)+(E.i(P)&65535),R=(L>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);k=R>>>16,L&=65535,R&=65535,I[P]=R<<16|L}return new o(I,I[I.length-1]&-2147483648?-1:0)};function y(E,T){return E.add(g(T))}e.j=function(E){if(p(this)||p(E))return d;if(m(this))return m(E)?g(this).j(g(E)):g(g(this).j(E));if(m(E))return g(this.j(g(E)));if(0>this.l(h)&&0>E.l(h))return u(this.m()*E.m());for(var T=this.g.length+E.g.length,I=[],k=0;k<2*T;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(var P=0;P<E.g.length;P++){var L=this.i(k)>>>16,R=this.i(k)&65535,$=E.i(P)>>>16,D=E.i(P)&65535;I[2*k+2*P]+=R*D,v(I,2*k+2*P),I[2*k+2*P+1]+=L*D,v(I,2*k+2*P+1),I[2*k+2*P+1]+=R*$,v(I,2*k+2*P+1),I[2*k+2*P+2]+=L*$,v(I,2*k+2*P+2)}for(k=0;k<T;k++)I[k]=I[2*k+1]<<16|I[2*k];for(k=T;k<2*T;k++)I[k]=0;return new o(I,0)};function v(E,T){for(;(E[T]&65535)!=E[T];)E[T+1]+=E[T]>>>16,E[T]&=65535,T++}function _(E,T){this.g=E,this.h=T}function w(E,T){if(p(T))throw Error("division by zero");if(p(E))return new _(d,d);if(m(E))return T=w(g(E),T),new _(g(T.g),g(T.h));if(m(T))return T=w(E,g(T)),new _(g(T.g),T.h);if(30<E.g.length){if(m(E)||m(T))throw Error("slowDivide_ only works with positive integers.");for(var I=f,k=T;0>=k.l(E);)I=x(I),k=x(k);var P=S(I,1),L=S(k,1);for(k=S(k,2),I=S(I,2);!p(k);){var R=L.add(k);0>=R.l(E)&&(P=P.add(I),L=R),k=S(k,1),I=S(I,1)}return T=y(E,P.j(T)),new _(P,T)}for(P=d;0<=E.l(T);){for(I=Math.max(1,Math.floor(E.m()/T.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=u(I),R=L.j(T);m(R)||0<R.l(E);)I-=k,L=u(I),R=L.j(T);p(L)&&(L=f),P=P.add(L),E=y(E,R)}return new _(P,E)}e.A=function(E){return w(this,E).h},e.and=function(E){for(var T=Math.max(this.g.length,E.g.length),I=[],k=0;k<T;k++)I[k]=this.i(k)&E.i(k);return new o(I,this.h&E.h)},e.or=function(E){for(var T=Math.max(this.g.length,E.g.length),I=[],k=0;k<T;k++)I[k]=this.i(k)|E.i(k);return new o(I,this.h|E.h)},e.xor=function(E){for(var T=Math.max(this.g.length,E.g.length),I=[],k=0;k<T;k++)I[k]=this.i(k)^E.i(k);return new o(I,this.h^E.h)};function x(E){for(var T=E.g.length+1,I=[],k=0;k<T;k++)I[k]=E.i(k)<<1|E.i(k-1)>>>31;return new o(I,E.h)}function S(E,T){var I=T>>5;T%=32;for(var k=E.g.length-I,P=[],L=0;L<k;L++)P[L]=0<T?E.i(L+I)>>>T|E.i(L+I+1)<<32-T:E.i(L+I);return new o(P,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,f$e=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,V1=o}).apply(typeof gge<"u"?gge:typeof self<"u"?self:typeof window<"u"?window:{});var sO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var h$e,p$e,u2,m$e,zD,Sq,g$e,y$e,v$e;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(C,B,W){return C==Array.prototype||C==Object.prototype||(C[B]=W.value),C};function n(C){C=[typeof globalThis=="object"&&globalThis,C,typeof window=="object"&&window,typeof self=="object"&&self,typeof sO=="object"&&sO];for(var B=0;B<C.length;++B){var W=C[B];if(W&&W.Math==Math)return W}throw Error("Cannot find global object")}var r=n(this);function i(C,B){if(B)e:{var W=r;C=C.split(".");for(var Q=0;Q<C.length-1;Q++){var we=C[Q];if(!(we in W))break e;W=W[we]}C=C[C.length-1],Q=W[C],B=B(Q),B!=Q&&B!=null&&t(W,C,{configurable:!0,writable:!0,value:B})}}function s(C,B){C instanceof String&&(C+="");var W=0,Q=!1,we={next:function(){if(!Q&&W<C.length){var Re=W++;return{value:B(Re,C[Re]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}i("Array.prototype.values",function(C){return C||function(){return s(this,function(B,W){return W})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(C){var B=typeof C;return B=B!="object"?B:C?Array.isArray(C)?"array":B:"null",B=="array"||B=="object"&&typeof C.length=="number"}function u(C){var B=typeof C;return B=="object"&&C!=null||B=="function"}function c(C,B,W){return C.call.apply(C.bind,arguments)}function d(C,B,W){if(!C)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var we=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(we,Q),C.apply(B,we)}}return function(){return C.apply(B,arguments)}}function f(C,B,W){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,f.apply(null,arguments)}function h(C,B){var W=Array.prototype.slice.call(arguments,1);return function(){var Q=W.slice();return Q.push.apply(Q,arguments),C.apply(this,Q)}}function p(C,B){function W(){}W.prototype=B.prototype,C.aa=B.prototype,C.prototype=new W,C.prototype.constructor=C,C.Qb=function(Q,we,Re){for(var ct=Array(arguments.length-2),Hr=2;Hr<arguments.length;Hr++)ct[Hr-2]=arguments[Hr];return B.prototype[we].apply(Q,ct)}}function m(C){const B=C.length;if(0<B){const W=Array(B);for(let Q=0;Q<B;Q++)W[Q]=C[Q];return W}return[]}function g(C,B){for(let W=1;W<arguments.length;W++){const Q=arguments[W];if(l(Q)){const we=C.length||0,Re=Q.length||0;C.length=we+Re;for(let ct=0;ct<Re;ct++)C[we+ct]=Q[ct]}else C.push(Q)}}class y{constructor(B,W){this.i=B,this.j=W,this.h=0,this.g=null}get(){let B;return 0<this.h?(this.h--,B=this.g,this.g=B.next,B.next=null):B=this.i(),B}}function v(C){return/^[\s\xa0]*$/.test(C)}function _(){var C=a.navigator;return C&&(C=C.userAgent)?C:""}function w(C){return w[" "](C),C}w[" "]=function(){};var x=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function S(C,B,W){for(const Q in C)B.call(W,C[Q],Q,C)}function E(C,B){for(const W in C)B.call(void 0,C[W],W,C)}function T(C){const B={};for(const W in C)B[W]=C[W];return B}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(C,B){let W,Q;for(let we=1;we<arguments.length;we++){Q=arguments[we];for(W in Q)C[W]=Q[W];for(let Re=0;Re<I.length;Re++)W=I[Re],Object.prototype.hasOwnProperty.call(Q,W)&&(C[W]=Q[W])}}function P(C){var B=1;C=C.split(":");const W=[];for(;0<B&&C.length;)W.push(C.shift()),B--;return C.length&&W.push(C.join(":")),W}function L(C){a.setTimeout(()=>{throw C},0)}function R(){var C=V;let B=null;return C.g&&(B=C.g,C.g=C.g.next,C.g||(C.h=null),B.next=null),B}class ${constructor(){this.h=this.g=null}add(B,W){const Q=D.get();Q.set(B,W),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var D=new y(()=>new O,C=>C.reset());class O{constructor(){this.next=this.g=this.h=null}set(B,W){this.h=B,this.g=W,this.next=null}reset(){this.next=this.g=this.h=null}}let F,U=!1,V=new $,M=()=>{const C=a.Promise.resolve(void 0);F=()=>{C.then(z)}};var z=()=>{for(var C;C=R();){try{C.h.call(C.g)}catch(W){L(W)}var B=D;B.j(C),100>B.h&&(B.h++,C.next=B.g,B.g=C)}U=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(C,B){this.type=C,this.g=this.target=B,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var C=!1,B=Object.defineProperty({},"passive",{get:function(){C=!0}});try{const W=()=>{};a.addEventListener("test",W,B),a.removeEventListener("test",W,B)}catch{}return C}();function G(C,B){if(j.call(this,C?C.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,C){var W=this.type=C.type,Q=C.changedTouches&&C.changedTouches.length?C.changedTouches[0]:null;if(this.target=C.target||C.srcElement,this.g=B,B=C.relatedTarget){if(x){e:{try{w(B.nodeName);var we=!0;break e}catch{}we=!1}we||(B=null)}}else W=="mouseover"?B=C.fromElement:W=="mouseout"&&(B=C.toElement);this.relatedTarget=B,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0),this.button=C.button,this.key=C.key||"",this.ctrlKey=C.ctrlKey,this.altKey=C.altKey,this.shiftKey=C.shiftKey,this.metaKey=C.metaKey,this.pointerId=C.pointerId||0,this.pointerType=typeof C.pointerType=="string"?C.pointerType:J[C.pointerType]||"",this.state=C.state,this.i=C,C.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var J={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var C=this.i;C.preventDefault?C.preventDefault():C.returnValue=!1};var re="closure_listenable_"+(1e6*Math.random()|0),ie=0;function te(C,B,W,Q,we){this.listener=C,this.proxy=null,this.src=B,this.type=W,this.capture=!!Q,this.ha=we,this.key=++ie,this.da=this.fa=!1}function ae(C){C.da=!0,C.listener=null,C.proxy=null,C.src=null,C.ha=null}function _e(C){this.src=C,this.g={},this.h=0}_e.prototype.add=function(C,B,W,Q,we){var Re=C.toString();C=this.g[Re],C||(C=this.g[Re]=[],this.h++);var ct=ze(C,B,Q,we);return-1<ct?(B=C[ct],W||(B.fa=!1)):(B=new te(B,this.src,Re,!!Q,we),B.fa=W,C.push(B)),B};function ce(C,B){var W=B.type;if(W in C.g){var Q=C.g[W],we=Array.prototype.indexOf.call(Q,B,void 0),Re;(Re=0<=we)&&Array.prototype.splice.call(Q,we,1),Re&&(ae(B),C.g[W].length==0&&(delete C.g[W],C.h--))}}function ze(C,B,W,Q){for(var we=0;we<C.length;++we){var Re=C[we];if(!Re.da&&Re.listener==B&&Re.capture==!!W&&Re.ha==Q)return we}return-1}var Oe="closure_lm_"+(1e6*Math.random()|0),$e={};function Ne(C,B,W,Q,we){if(Array.isArray(B)){for(var Re=0;Re<B.length;Re++)Ne(C,B[Re],W,Q,we);return null}return W=Ye(W),C&&C[re]?C.K(B,W,u(Q)?!!Q.capture:!!Q,we):pe(C,B,W,!1,Q,we)}function pe(C,B,W,Q,we,Re){if(!B)throw Error("Invalid event type");var ct=u(we)?!!we.capture:!!we,Hr=le(C);if(Hr||(C[Oe]=Hr=new _e(C)),W=Hr.add(B,W,Q,ct,Re),W.proxy)return W;if(Q=ue(),W.proxy=Q,Q.src=C,Q.listener=W,C.addEventListener)H||(we=ct),we===void 0&&(we=!1),C.addEventListener(B.toString(),Q,we);else if(C.attachEvent)C.attachEvent(at(B.toString()),Q);else if(C.addListener&&C.removeListener)C.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return W}function ue(){function C(W){return B.call(C.src,C.listener,W)}const B=He;return C}function Se(C,B,W,Q,we){if(Array.isArray(B))for(var Re=0;Re<B.length;Re++)Se(C,B[Re],W,Q,we);else Q=u(Q)?!!Q.capture:!!Q,W=Ye(W),C&&C[re]?(C=C.i,B=String(B).toString(),B in C.g&&(Re=C.g[B],W=ze(Re,W,Q,we),-1<W&&(ae(Re[W]),Array.prototype.splice.call(Re,W,1),Re.length==0&&(delete C.g[B],C.h--)))):C&&(C=le(C))&&(B=C.g[B.toString()],C=-1,B&&(C=ze(B,W,Q,we)),(W=-1<C?B[C]:null)&&De(W))}function De(C){if(typeof C!="number"&&C&&!C.da){var B=C.src;if(B&&B[re])ce(B.i,C);else{var W=C.type,Q=C.proxy;B.removeEventListener?B.removeEventListener(W,Q,C.capture):B.detachEvent?B.detachEvent(at(W),Q):B.addListener&&B.removeListener&&B.removeListener(Q),(W=le(B))?(ce(W,C),W.h==0&&(W.src=null,B[Oe]=null)):ae(C)}}}function at(C){return C in $e?$e[C]:$e[C]="on"+C}function He(C,B){if(C.da)C=!0;else{B=new G(B,this);var W=C.listener,Q=C.ha||C.src;C.fa&&De(C),C=W.call(Q,B)}return C}function le(C){return C=C[Oe],C instanceof _e?C:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ye(C){return typeof C=="function"?C:(C[Ie]||(C[Ie]=function(B){return C.handleEvent(B)}),C[Ie])}function fe(){q.call(this),this.i=new _e(this),this.M=this,this.F=null}p(fe,q),fe.prototype[re]=!0,fe.prototype.removeEventListener=function(C,B,W,Q){Se(this,C,B,W,Q)};function Te(C,B){var W,Q=C.F;if(Q)for(W=[];Q;Q=Q.F)W.push(Q);if(C=C.M,Q=B.type||B,typeof B=="string")B=new j(B,C);else if(B instanceof j)B.target=B.target||C;else{var we=B;B=new j(Q,C),k(B,we)}if(we=!0,W)for(var Re=W.length-1;0<=Re;Re--){var ct=B.g=W[Re];we=Ve(ct,Q,!0,B)&&we}if(ct=B.g=C,we=Ve(ct,Q,!0,B)&&we,we=Ve(ct,Q,!1,B)&&we,W)for(Re=0;Re<W.length;Re++)ct=B.g=W[Re],we=Ve(ct,Q,!1,B)&&we}fe.prototype.N=function(){if(fe.aa.N.call(this),this.i){var C=this.i,B;for(B in C.g){for(var W=C.g[B],Q=0;Q<W.length;Q++)ae(W[Q]);delete C.g[B],C.h--}}this.F=null},fe.prototype.K=function(C,B,W,Q){return this.i.add(String(C),B,!1,W,Q)},fe.prototype.L=function(C,B,W,Q){return this.i.add(String(C),B,!0,W,Q)};function Ve(C,B,W,Q){if(B=C.i.g[String(B)],!B)return!0;B=B.concat();for(var we=!0,Re=0;Re<B.length;++Re){var ct=B[Re];if(ct&&!ct.da&&ct.capture==W){var Hr=ct.listener,io=ct.ha||ct.src;ct.fa&&ce(C.i,ct),we=Hr.call(io,Q)!==!1&&we}}return we&&!Q.defaultPrevented}function et(C,B,W){if(typeof C=="function")W&&(C=f(C,W));else if(C&&typeof C.handleEvent=="function")C=f(C.handleEvent,C);else throw Error("Invalid listener argument");return 2147483647<Number(B)?-1:a.setTimeout(C,B||0)}function St(C){C.g=et(()=>{C.g=null,C.i&&(C.i=!1,St(C))},C.l);const B=C.h;C.h=null,C.m.apply(null,B)}class An extends q{constructor(B,W){super(),this.m=B,this.l=W,this.h=null,this.i=!1,this.g=null}j(B){this.h=arguments,this.g?this.i=!0:St(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _r(C){q.call(this),this.h=C,this.g={}}p(_r,q);var Br=[];function Or(C){S(C.g,function(B,W){this.g.hasOwnProperty(W)&&De(B)},C),C.g={}}_r.prototype.N=function(){_r.aa.N.call(this),Or(this)},_r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yn=a.JSON.stringify,Nn=a.JSON.parse,sr=class{stringify(C){return a.JSON.stringify(C,void 0)}parse(C){return a.JSON.parse(C,void 0)}};function tr(){}tr.prototype.h=null;function Lo(C){return C.h||(C.h=C.i())}function Di(){}var Qi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Us(){j.call(this,"d")}p(Us,j);function mr(){j.call(this,"c")}p(mr,j);var Hn={},Sa=null;function Zu(){return Sa=Sa||new fe}Hn.La="serverreachability";function Df(C){j.call(this,Hn.La,C)}p(Df,j);function ht(C){const B=Zu();Te(B,new Df(B))}Hn.STAT_EVENT="statevent";function Si(C,B){j.call(this,Hn.STAT_EVENT,C),this.stat=B}p(Si,j);function vn(C){const B=Zu();Te(B,new Si(B,C))}Hn.Ma="timingevent";function zr(C,B){j.call(this,Hn.Ma,C),this.size=B}p(zr,j);function ii(C,B){if(typeof C!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){C()},B)}function gi(){this.g=!0}gi.prototype.xa=function(){this.g=!1};function Mi(C,B,W,Q,we,Re){C.info(function(){if(C.g)if(Re)for(var ct="",Hr=Re.split("&"),io=0;io<Hr.length;io++){var ar=Hr[io].split("=");if(1<ar.length){var zo=ar[0];ar=ar[1];var Uo=zo.split("_");ct=2<=Uo.length&&Uo[1]=="type"?ct+(zo+"="+ar+"&"):ct+(zo+"=redacted&")}}else ct=null;else ct=Re;return"XMLHTTP REQ ("+Q+") [attempt "+we+"]: "+B+`
`+W+`
`+ct})}function Fo(C,B,W,Q,we,Re,ct){C.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+we+"]: "+B+`
`+W+`
`+Re+" "+ct})}function ec(C,B,W,Q){C.info(function(){return"XMLHTTP TEXT ("+B+"): "+yv(C,W)+(Q?" "+Q:"")})}function Tp(C,B){C.info(function(){return"TIMEOUT: "+B})}gi.prototype.info=function(){};function yv(C,B){if(!C.g)return B;if(!B)return null;try{var W=JSON.parse(B);if(W){for(C=0;C<W.length;C++)if(Array.isArray(W[C])){var Q=W[C];if(!(2>Q.length)){var we=Q[1];if(Array.isArray(we)&&!(1>we.length)){var Re=we[0];if(Re!="noop"&&Re!="stop"&&Re!="close")for(var ct=1;ct<we.length;ct++)we[ct]=""}}}}return yn(W)}catch{return B}}var or={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Mf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ta;function od(){}p(od,tr),od.prototype.g=function(){return new XMLHttpRequest},od.prototype.i=function(){return{}},Ta=new od;function dl(C,B,W,Q){this.j=C,this.i=B,this.l=W,this.R=Q||1,this.U=new _r(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new S_}function S_(){this.i=null,this.g="",this.h=!1}var T_={},vv={};function bv(C,B,W){C.L=1,C.v=jn(Ge(B)),C.m=W,C.P=!0,Tg(C,null)}function Tg(C,B){C.F=Date.now(),fl(C),C.A=Ge(C.v);var W=C.A,Q=C.R;Array.isArray(Q)||(Q=[String(Q)]),MP(W.i,"t",Q),C.C=0,W=C.j.J,C.h=new S_,C.g=iae(C.j,W?B:null,!C.m),0<C.O&&(C.M=new An(f(C.Y,C,C.g),C.O)),B=C.U,W=C.g,Q=C.ca;var we="readystatechange";Array.isArray(we)||(we&&(Br[0]=we.toString()),we=Br);for(var Re=0;Re<we.length;Re++){var ct=Ne(W,we[Re],Q||B.handleEvent,!1,B.h||B);if(!ct)break;B.g[ct.key]=ct}B=C.H?T(C.H):{},C.m?(C.u||(C.u="POST"),B["Content-Type"]="application/x-www-form-urlencoded",C.g.ea(C.A,C.u,C.m,B)):(C.u="GET",C.g.ea(C.A,C.u,null,B)),ht(),Mi(C.i,C.u,C.A,C.l,C.R,C.m)}dl.prototype.ca=function(C){C=C.target;const B=this.M;B&&Ji(C)==3?B.j():this.Y(C)},dl.prototype.Y=function(C){try{if(C==this.g)e:{const Uo=Ji(this.g);var B=this.g.Ba();const N_=this.g.Z();if(!(3>Uo)&&(Uo!=3||this.g&&(this.h.h||this.g.oa()||Bo(this.g)))){this.J||Uo!=4||B==7||(B==8||0>=N_?ht(3):ht(2)),Ca(this);var W=this.g.Z();this.X=W;t:if(C_(this)){var Q=Bo(this.g);C="";var we=Q.length,Re=Ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hl(this),$f(this);var ct="";break t}this.h.i=new a.TextDecoder}for(B=0;B<we;B++)this.h.h=!0,C+=this.h.i.decode(Q[B],{stream:!(Re&&B==we-1)});Q.length=0,this.h.g+=C,this.C=0,ct=this.h.g}else ct=this.g.oa();if(this.o=W==200,Fo(this.i,this.u,this.A,this.l,this.R,Uo,W),this.o){if(this.T&&!this.K){t:{if(this.g){var Hr,io=this.g;if((Hr=io.g?io.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Hr)){var ar=Hr;break t}}ar=null}if(W=ar)ec(this.i,this.l,W,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ap(this,W);else{this.o=!1,this.s=3,vn(12),hl(this),$f(this);break e}}if(this.P){W=!0;let ad;for(;!this.J&&this.C<ct.length;)if(ad=Cp(this,ct),ad==vv){Uo==4&&(this.s=4,vn(14),W=!1),ec(this.i,this.l,null,"[Incomplete Response]");break}else if(ad==T_){this.s=4,vn(15),ec(this.i,this.l,ct,"[Invalid Chunk]"),W=!1;break}else ec(this.i,this.l,ad,null),Ap(this,ad);if(C_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Uo!=4||ct.length!=0||this.h.h||(this.s=1,vn(16),W=!1),this.o=this.o&&W,!W)ec(this.i,this.l,ct,"[Invalid Chunked Response]"),hl(this),$f(this);else if(0<ct.length&&!this.W){this.W=!0;var zo=this.j;zo.g==this&&zo.ba&&!zo.M&&(zo.j.info("Great, no buffering proxy detected. Bytes received: "+ct.length),a8(zo),zo.M=!0,vn(11))}}else ec(this.i,this.l,ct,null),Ap(this,ct);Uo==4&&hl(this),this.o&&!this.J&&(Uo==4?eae(this.j,this):(this.o=!1,fl(this)))}else Av(this.g),W==400&&0<ct.indexOf("Unknown SID")?(this.s=3,vn(12)):(this.s=0,vn(13)),hl(this),$f(this)}}}catch{}finally{}};function C_(C){return C.g?C.u=="GET"&&C.L!=2&&C.j.Ca:!1}function Cp(C,B){var W=C.C,Q=B.indexOf(`
`,W);return Q==-1?vv:(W=Number(B.substring(W,Q)),isNaN(W)?T_:(Q+=1,Q+W>B.length?vv:(B=B.slice(Q,Q+W),C.C=Q+W,B)))}dl.prototype.cancel=function(){this.J=!0,hl(this)};function fl(C){C.S=Date.now()+C.I,_v(C,C.I)}function _v(C,B){if(C.B!=null)throw Error("WatchDog timer not null");C.B=ii(f(C.ba,C),B)}function Ca(C){C.B&&(a.clearTimeout(C.B),C.B=null)}dl.prototype.ba=function(){this.B=null;const C=Date.now();0<=C-this.S?(Tp(this.i,this.A),this.L!=2&&(ht(),vn(17)),hl(this),this.s=2,$f(this)):_v(this,this.S-C)};function $f(C){C.j.G==0||C.J||eae(C.j,C)}function hl(C){Ca(C);var B=C.M;B&&typeof B.ma=="function"&&B.ma(),C.M=null,Or(C.U),C.g&&(B=C.g,C.g=null,B.abort(),B.ma())}function Ap(C,B){try{var W=C.j;if(W.G!=0&&(W.g==C||xv(W.h,C))){if(!C.K&&xv(W.h,C)&&W.G==3){try{var Q=W.Da.g.parse(B)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var we=Q;if(we[0]==0){e:if(!W.u){if(W.g)if(W.g.F+3e3<C.F)UP(W),BP(W);else break e;o8(W),vn(18)}}else W.za=we[1],0<W.za-W.T&&37500>we[2]&&W.F&&W.v==0&&!W.C&&(W.C=ii(f(W.Za,W),6e3));if(1>=A_(W.h)&&W.ca){try{W.ca()}catch{}W.ca=void 0}}else Iv(W,11)}else if((C.K||W.g==C)&&UP(W),!v(B))for(we=W.Da.g.parse(B),B=0;B<we.length;B++){let ar=we[B];if(W.T=ar[0],ar=ar[1],W.G==2)if(ar[0]=="c"){W.K=ar[1],W.ia=ar[2];const zo=ar[3];zo!=null&&(W.la=zo,W.j.info("VER="+W.la));const Uo=ar[4];Uo!=null&&(W.Aa=Uo,W.j.info("SVER="+W.Aa));const N_=ar[5];N_!=null&&typeof N_=="number"&&0<N_&&(Q=1.5*N_,W.L=Q,W.j.info("backChannelRequestTimeoutMs_="+Q)),Q=W;const ad=C.g;if(ad){const HP=ad.g?ad.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(HP){var Re=Q.h;Re.g||HP.indexOf("spdy")==-1&&HP.indexOf("quic")==-1&&HP.indexOf("h2")==-1||(Re.j=Re.l,Re.g=new Set,Re.h&&(K(Re,Re.h),Re.h=null))}if(Q.D){const l8=ad.g?ad.g.getResponseHeader("X-HTTP-Session-Id"):null;l8&&(Q.ya=l8,Nt(Q.I,Q.D,l8))}}W.G=3,W.l&&W.l.ua(),W.ba&&(W.R=Date.now()-C.F,W.j.info("Handshake RTT: "+W.R+"ms")),Q=W;var ct=C;if(Q.qa=rae(Q,Q.J?Q.ia:null,Q.W),ct.K){de(Q.h,ct);var Hr=ct,io=Q.L;io&&(Hr.I=io),Hr.B&&(Ca(Hr),fl(Hr)),Q.g=ct}else Joe(Q);0<W.i.length&&zP(W)}else ar[0]!="stop"&&ar[0]!="close"||Iv(W,7);else W.G==3&&(ar[0]=="stop"||ar[0]=="close"?ar[0]=="stop"?Iv(W,7):R_(W):ar[0]!="noop"&&W.l&&W.l.ta(ar),W.v=0)}}ht(4)}catch{}}var bT=class{constructor(C,B){this.g=C,this.map=B}};function wv(C){this.l=C||10,a.PerformanceNavigationTiming?(C=a.performance.getEntriesByType("navigation"),C=0<C.length&&(C[0].nextHopProtocol=="hq"||C[0].nextHopProtocol=="h2")):C=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=C?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cg(C){return C.h?!0:C.g?C.g.size>=C.j:!1}function A_(C){return C.h?1:C.g?C.g.size:0}function xv(C,B){return C.h?C.h==B:C.g?C.g.has(B):!1}function K(C,B){C.g?C.g.add(B):C.h=B}function de(C,B){C.h&&C.h==B?C.h=null:C.g&&C.g.has(B)&&C.g.delete(B)}wv.prototype.cancel=function(){if(this.i=ee(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const C of this.g.values())C.cancel();this.g.clear()}};function ee(C){if(C.h!=null)return C.i.concat(C.h.D);if(C.g!=null&&C.g.size!==0){let B=C.i;for(const W of C.g.values())B=B.concat(W.D);return B}return m(C.i)}function ye(C){if(C.V&&typeof C.V=="function")return C.V();if(typeof Map<"u"&&C instanceof Map||typeof Set<"u"&&C instanceof Set)return Array.from(C.values());if(typeof C=="string")return C.split("");if(l(C)){for(var B=[],W=C.length,Q=0;Q<W;Q++)B.push(C[Q]);return B}B=[],W=0;for(Q in C)B[W++]=C[Q];return B}function ve(C){if(C.na&&typeof C.na=="function")return C.na();if(!C.V||typeof C.V!="function"){if(typeof Map<"u"&&C instanceof Map)return Array.from(C.keys());if(!(typeof Set<"u"&&C instanceof Set)){if(l(C)||typeof C=="string"){var B=[];C=C.length;for(var W=0;W<C;W++)B.push(W);return B}B=[],W=0;for(const Q in C)B[W++]=Q;return B}}}function me(C,B){if(C.forEach&&typeof C.forEach=="function")C.forEach(B,void 0);else if(l(C)||typeof C=="string")Array.prototype.forEach.call(C,B,void 0);else for(var W=ve(C),Q=ye(C),we=Q.length,Re=0;Re<we;Re++)B.call(void 0,Q[Re],W&&W[Re],C)}var Fe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qe(C,B){if(C){C=C.split("&");for(var W=0;W<C.length;W++){var Q=C[W].indexOf("="),we=null;if(0<=Q){var Re=C[W].substring(0,Q);we=C[W].substring(Q+1)}else Re=C[W];B(Re,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function We(C){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,C instanceof We){this.h=C.h,ot(this,C.j),this.o=C.o,this.g=C.g,xt(this,C.s),this.l=C.l;var B=C.i,W=new tc;W.i=B.i,B.g&&(W.g=new Map(B.g),W.h=B.h),bn(this,W),this.m=C.m}else C&&(B=String(C).match(Fe))?(this.h=!1,ot(this,B[1]||"",!0),this.o=Tr(B[2]||""),this.g=Tr(B[3]||"",!0),xt(this,B[4]),this.l=Tr(B[5]||"",!0),bn(this,B[6]||"",!0),this.m=Tr(B[7]||"")):(this.h=!1,this.i=new tc(null,this.h))}We.prototype.toString=function(){var C=[],B=this.j;B&&C.push(Cr(B,Lf,!0),":");var W=this.g;return(W||B=="file")&&(C.push("//"),(B=this.o)&&C.push(Cr(B,Lf,!0),"@"),C.push(encodeURIComponent(String(W)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),W=this.s,W!=null&&C.push(":",String(W))),(W=this.l)&&(this.g&&W.charAt(0)!="/"&&C.push("/"),C.push(Cr(W,W.charAt(0)=="/"?_T:Ip,!0))),(W=this.i.toString())&&C.push("?",W),(W=this.m)&&C.push("#",Cr(W,DP)),C.join("")};function Ge(C){return new We(C)}function ot(C,B,W){C.j=W?Tr(B,!0):B,C.j&&(C.j=C.j.replace(/:$/,""))}function xt(C,B){if(B){if(B=Number(B),isNaN(B)||0>B)throw Error("Bad port number "+B);C.s=B}else C.s=null}function bn(C,B,W){B instanceof tc?(C.i=B,wT(C.i,C.h)):(W||(B=Cr(B,Ev)),C.i=new tc(B,C.h))}function Nt(C,B,W){C.i.set(B,W)}function jn(C){return Nt(C,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),C}function Tr(C,B){return C?B?decodeURI(C.replace(/%25/g,"%2525")):decodeURIComponent(C):""}function Cr(C,B,W){return typeof C=="string"?(C=encodeURI(C).replace(B,jo),W&&(C=C.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C):null}function jo(C){return C=C.charCodeAt(0),"%"+(C>>4&15).toString(16)+(C&15).toString(16)}var Lf=/[#\/\?@]/g,Ip=/[#\?:]/g,_T=/[#\?]/g,Ev=/[#\?@]/g,DP=/#/g;function tc(C,B){this.h=this.g=null,this.i=C||null,this.j=!!B}function pl(C){C.g||(C.g=new Map,C.h=0,C.i&&qe(C.i,function(B,W){C.add(decodeURIComponent(B.replace(/\+/g," ")),W)}))}e=tc.prototype,e.add=function(C,B){pl(this),this.i=null,C=Rp(this,C);var W=this.g.get(C);return W||this.g.set(C,W=[]),W.push(B),this.h+=1,this};function kp(C,B){pl(C),B=Rp(C,B),C.g.has(B)&&(C.i=null,C.h-=C.g.get(B).length,C.g.delete(B))}function I_(C,B){return pl(C),B=Rp(C,B),C.g.has(B)}e.forEach=function(C,B){pl(this),this.g.forEach(function(W,Q){W.forEach(function(we){C.call(B,we,Q,this)},this)},this)},e.na=function(){pl(this);const C=Array.from(this.g.values()),B=Array.from(this.g.keys()),W=[];for(let Q=0;Q<B.length;Q++){const we=C[Q];for(let Re=0;Re<we.length;Re++)W.push(B[Q])}return W},e.V=function(C){pl(this);let B=[];if(typeof C=="string")I_(this,C)&&(B=B.concat(this.g.get(Rp(this,C))));else{C=Array.from(this.g.values());for(let W=0;W<C.length;W++)B=B.concat(C[W])}return B},e.set=function(C,B){return pl(this),this.i=null,C=Rp(this,C),I_(this,C)&&(this.h-=this.g.get(C).length),this.g.set(C,[B]),this.h+=1,this},e.get=function(C,B){return C?(C=this.V(C),0<C.length?String(C[0]):B):B};function MP(C,B,W){kp(C,B),0<W.length&&(C.i=null,C.g.set(Rp(C,B),m(W)),C.h+=W.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const C=[],B=Array.from(this.g.keys());for(var W=0;W<B.length;W++){var Q=B[W];const Re=encodeURIComponent(String(Q)),ct=this.V(Q);for(Q=0;Q<ct.length;Q++){var we=Re;ct[Q]!==""&&(we+="="+encodeURIComponent(String(ct[Q]))),C.push(we)}}return this.i=C.join("&")};function Rp(C,B){return B=String(B),C.j&&(B=B.toLowerCase()),B}function wT(C,B){B&&!C.j&&(pl(C),C.i=null,C.g.forEach(function(W,Q){var we=Q.toLowerCase();Q!=we&&(kp(this,Q),MP(this,we,W))},C)),C.j=B}function $P(C,B){const W=new gi;if(a.Image){const Q=new Image;Q.onload=h(ml,W,"TestLoadImage: loaded",!0,B,Q),Q.onerror=h(ml,W,"TestLoadImage: error",!1,B,Q),Q.onabort=h(ml,W,"TestLoadImage: abort",!1,B,Q),Q.ontimeout=h(ml,W,"TestLoadImage: timeout",!1,B,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=C}else B(!1)}function Pp(C,B){const W=new gi,Q=new AbortController,we=setTimeout(()=>{Q.abort(),ml(W,"TestPingServer: timeout",!1,B)},1e4);fetch(C,{signal:Q.signal}).then(Re=>{clearTimeout(we),Re.ok?ml(W,"TestPingServer: ok",!0,B):ml(W,"TestPingServer: server error",!1,B)}).catch(()=>{clearTimeout(we),ml(W,"TestPingServer: error",!1,B)})}function ml(C,B,W,Q,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),Q(W)}catch{}}function s8(){this.g=new sr}function LP(C,B,W){const Q=W||"";try{me(C,function(we,Re){let ct=we;u(we)&&(ct=yn(we)),B.push(Q+Re+"="+encodeURIComponent(ct))})}catch(we){throw B.push(Q+"type="+encodeURIComponent("_badmap")),we}}function Sv(C){this.l=C.Ub||null,this.j=C.eb||!1}p(Sv,tr),Sv.prototype.g=function(){return new Tv(this.l,this.j)},Sv.prototype.i=function(C){return function(){return C}}({});function Tv(C,B){fe.call(this),this.D=C,this.o=B,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Tv,fe),e=Tv.prototype,e.open=function(C,B){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=C,this.A=B,this.readyState=1,Ag(this)},e.send=function(C){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const B={headers:this.u,method:this.B,credentials:this.m,cache:void 0};C&&(B.body=C),(this.D||a).fetch(new Request(this.A,B)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cv(this)),this.readyState=0},e.Sa=function(C){if(this.g&&(this.l=C,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=C.headers,this.readyState=2,Ag(this)),this.g&&(this.readyState=3,Ag(this),this.g)))if(this.responseType==="arraybuffer")C.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in C){if(this.j=C.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;FP(this)}else C.text().then(this.Ra.bind(this),this.ga.bind(this))};function FP(C){C.j.read().then(C.Pa.bind(C)).catch(C.ga.bind(C))}e.Pa=function(C){if(this.g){if(this.o&&C.value)this.response.push(C.value);else if(!this.o){var B=C.value?C.value:new Uint8Array(0);(B=this.v.decode(B,{stream:!C.done}))&&(this.response=this.responseText+=B)}C.done?Cv(this):Ag(this),this.readyState==3&&FP(this)}},e.Ra=function(C){this.g&&(this.response=this.responseText=C,Cv(this))},e.Qa=function(C){this.g&&(this.response=C,Cv(this))},e.ga=function(){this.g&&Cv(this)};function Cv(C){C.readyState=4,C.l=null,C.j=null,C.v=null,Ag(C)}e.setRequestHeader=function(C,B){this.u.append(C,B)},e.getResponseHeader=function(C){return this.h&&this.h.get(C.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const C=[],B=this.h.entries();for(var W=B.next();!W.done;)W=W.value,C.push(W[0]+": "+W[1]),W=B.next();return C.join(`\r
`)};function Ag(C){C.onreadystatechange&&C.onreadystatechange.call(C)}Object.defineProperty(Tv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(C){this.m=C?"include":"same-origin"}});function jP(C){let B="";return S(C,function(W,Q){B+=Q,B+=":",B+=W,B+=`\r
`}),B}function ne(C,B,W){e:{for(Q in W){var Q=!1;break e}Q=!0}Q||(W=jP(W),typeof C=="string"?W!=null&&encodeURIComponent(String(W)):Nt(C,B,W))}function he(C){fe.call(this),this.headers=new Map,this.o=C||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(he,fe);var Ce=/^https?$/i,At=["POST","PUT"];e=he.prototype,e.Ha=function(C){this.J=C},e.ea=function(C,B,W,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+C);B=B?B.toUpperCase():"GET",this.D=C,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ta.g(),this.v=this.o?Lo(this.o):Lo(Ta),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(B,String(C),!0),this.B=!1}catch(Re){$n(this,Re);return}if(C=W||"",W=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var we in Q)W.set(we,Q[we]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Re of Q.keys())W.set(Re,Q.get(Re));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(W.keys()).find(Re=>Re.toLowerCase()=="content-type"),we=a.FormData&&C instanceof a.FormData,!(0<=Array.prototype.indexOf.call(At,B,void 0))||Q||we||W.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Re,ct]of W)this.g.setRequestHeader(Re,ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vr(this),this.u=!0,this.g.send(C),this.u=!1}catch(Re){$n(this,Re)}};function $n(C,B){C.h=!1,C.g&&(C.j=!0,C.g.abort(),C.j=!1),C.l=B,C.m=5,wr(C),Bn(C)}function wr(C){C.A||(C.A=!0,Te(C,"complete"),Te(C,"error"))}e.abort=function(C){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=C||7,Te(this,"complete"),Te(this,"abort"),Bn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bn(this,!0)),he.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ur(this):this.bb())},e.bb=function(){Ur(this)};function Ur(C){if(C.h&&typeof o<"u"&&(!C.v[1]||Ji(C)!=4||C.Z()!=2)){if(C.u&&Ji(C)==4)et(C.Ea,0,C);else if(Te(C,"readystatechange"),Ji(C)==4){C.h=!1;try{const ct=C.Z();e:switch(ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var B=!0;break e;default:B=!1}var W;if(!(W=B)){var Q;if(Q=ct===0){var we=String(C.D).match(Fe)[1]||null;!we&&a.self&&a.self.location&&(we=a.self.location.protocol.slice(0,-1)),Q=!Ce.test(we?we.toLowerCase():"")}W=Q}if(W)Te(C,"complete"),Te(C,"success");else{C.m=6;try{var Re=2<Ji(C)?C.g.statusText:""}catch{Re=""}C.l=Re+" ["+C.Z()+"]",wr(C)}}finally{Bn(C)}}}}function Bn(C,B){if(C.g){Vr(C);const W=C.g,Q=C.v[0]?()=>{}:null;C.g=null,C.v=null,B||Te(C,"ready");try{W.onreadystatechange=Q}catch{}}}function Vr(C){C.I&&(a.clearTimeout(C.I),C.I=null)}e.isActive=function(){return!!this.g};function Ji(C){return C.g?C.g.readyState:0}e.Z=function(){try{return 2<Ji(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(C){if(this.g){var B=this.g.responseText;return C&&B.indexOf(C)==0&&(B=B.substring(C.length)),Nn(B)}};function Bo(C){try{if(!C.g)return null;if("response"in C.g)return C.g.response;switch(C.H){case"":case"text":return C.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in C.g)return C.g.mozResponseArrayBuffer}return null}catch{return null}}function Av(C){const B={};C=(C.g&&2<=Ji(C)&&C.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<C.length;Q++){if(v(C[Q]))continue;var W=P(C[Q]);const we=W[0];if(W=W[1],typeof W!="string")continue;W=W.trim();const Re=B[we]||[];B[we]=Re,Re.push(W)}E(B,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Np(C,B,W){return W&&W.internalChannelParams&&W.internalChannelParams[C]||B}function k_(C){this.Aa=0,this.i=[],this.j=new gi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Np("failFast",!1,C),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Np("baseRetryDelayMs",5e3,C),this.cb=Np("retryDelaySeedMs",1e4,C),this.Wa=Np("forwardChannelMaxRetries",2,C),this.wa=Np("forwardChannelRequestTimeoutMs",2e4,C),this.pa=C&&C.xmlHttpFactory||void 0,this.Xa=C&&C.Tb||void 0,this.Ca=C&&C.useFetchStreams||!1,this.L=void 0,this.J=C&&C.supportsCrossDomainXhr||!1,this.K="",this.h=new wv(C&&C.concurrentRequestLimit),this.Da=new s8,this.P=C&&C.fastHandshake||!1,this.O=C&&C.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=C&&C.Rb||!1,C&&C.xa&&this.j.xa(),C&&C.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&C&&C.detectBufferingProxy||!1,this.ja=void 0,C&&C.longPollingTimeout&&0<C.longPollingTimeout&&(this.ja=C.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=k_.prototype,e.la=8,e.G=1,e.connect=function(C,B,W,Q){vn(0),this.W=C,this.H=B||{},W&&Q!==void 0&&(this.H.OSID=W,this.H.OAID=Q),this.F=this.X,this.I=rae(this,null,this.W),zP(this)};function R_(C){if(Koe(C),C.G==3){var B=C.U++,W=Ge(C.I);if(Nt(W,"SID",C.K),Nt(W,"RID",B),Nt(W,"TYPE","terminate"),xT(C,W),B=new dl(C,C.j,B),B.L=2,B.v=jn(Ge(W)),W=!1,a.navigator&&a.navigator.sendBeacon)try{W=a.navigator.sendBeacon(B.v.toString(),"")}catch{}!W&&a.Image&&(new Image().src=B.v,W=!0),W||(B.g=iae(B.j,null),B.g.ea(B.v)),B.F=Date.now(),fl(B)}nae(C)}function BP(C){C.g&&(a8(C),C.g.cancel(),C.g=null)}function Koe(C){BP(C),C.u&&(a.clearTimeout(C.u),C.u=null),UP(C),C.h.cancel(),C.s&&(typeof C.s=="number"&&a.clearTimeout(C.s),C.s=null)}function zP(C){if(!Cg(C.h)&&!C.s){C.s=!0;var B=C.Ga;F||M(),U||(F(),U=!0),V.add(B,C),C.B=0}}function z7e(C,B){return A_(C.h)>=C.h.j-(C.s?1:0)?!1:C.s?(C.i=B.D.concat(C.i),!0):C.G==1||C.G==2||C.B>=(C.Va?0:C.Wa)?!1:(C.s=ii(f(C.Ga,C,B),tae(C,C.B)),C.B++,!0)}e.Ga=function(C){if(this.s)if(this.s=null,this.G==1){if(!C){this.U=Math.floor(1e5*Math.random()),C=this.U++;const we=new dl(this,this.j,C);let Re=this.o;if(this.S&&(Re?(Re=T(Re),k(Re,this.S)):Re=this.S),this.m!==null||this.O||(we.H=Re,Re=null),this.P)e:{for(var B=0,W=0;W<this.i.length;W++){t:{var Q=this.i[W];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(B+=Q,4096<B){B=W;break e}if(B===4096||W===this.i.length-1){B=W+1;break e}}B=1e3}else B=1e3;B=Qoe(this,we,B),W=Ge(this.I),Nt(W,"RID",C),Nt(W,"CVER",22),this.D&&Nt(W,"X-HTTP-Session-Id",this.D),xT(this,W),Re&&(this.O?B="headers="+encodeURIComponent(String(jP(Re)))+"&"+B:this.m&&ne(W,this.m,Re)),K(this.h,we),this.Ua&&Nt(W,"TYPE","init"),this.P?(Nt(W,"$req",B),Nt(W,"SID","null"),we.T=!0,bv(we,W,null)):bv(we,W,B),this.G=2}}else this.G==3&&(C?Xoe(this,C):this.i.length==0||Cg(this.h)||Xoe(this))};function Xoe(C,B){var W;B?W=B.l:W=C.U++;const Q=Ge(C.I);Nt(Q,"SID",C.K),Nt(Q,"RID",W),Nt(Q,"AID",C.T),xT(C,Q),C.m&&C.o&&ne(Q,C.m,C.o),W=new dl(C,C.j,W,C.B+1),C.m===null&&(W.H=C.o),B&&(C.i=B.D.concat(C.i)),B=Qoe(C,W,1e3),W.I=Math.round(.5*C.wa)+Math.round(.5*C.wa*Math.random()),K(C.h,W),bv(W,Q,B)}function xT(C,B){C.H&&S(C.H,function(W,Q){Nt(B,Q,W)}),C.l&&me({},function(W,Q){Nt(B,Q,W)})}function Qoe(C,B,W){W=Math.min(C.i.length,W);var Q=C.l?f(C.l.Na,C.l,C):null;e:{var we=C.i;let Re=-1;for(;;){const ct=["count="+W];Re==-1?0<W?(Re=we[0].g,ct.push("ofs="+Re)):Re=0:ct.push("ofs="+Re);let Hr=!0;for(let io=0;io<W;io++){let ar=we[io].g;const zo=we[io].map;if(ar-=Re,0>ar)Re=Math.max(0,we[io].g-100),Hr=!1;else try{LP(zo,ct,"req"+ar+"_")}catch{Q&&Q(zo)}}if(Hr){Q=ct.join("&");break e}}}return C=C.i.splice(0,W),B.D=C,Q}function Joe(C){if(!C.g&&!C.u){C.Y=1;var B=C.Fa;F||M(),U||(F(),U=!0),V.add(B,C),C.v=0}}function o8(C){return C.g||C.u||3<=C.v?!1:(C.Y++,C.u=ii(f(C.Fa,C),tae(C,C.v)),C.v++,!0)}e.Fa=function(){if(this.u=null,Zoe(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var C=2*this.R;this.j.info("BP detection timer enabled: "+C),this.A=ii(f(this.ab,this),C)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vn(10),BP(this),Zoe(this))};function a8(C){C.A!=null&&(a.clearTimeout(C.A),C.A=null)}function Zoe(C){C.g=new dl(C,C.j,"rpc",C.Y),C.m===null&&(C.g.H=C.o),C.g.O=0;var B=Ge(C.qa);Nt(B,"RID","rpc"),Nt(B,"SID",C.K),Nt(B,"AID",C.T),Nt(B,"CI",C.F?"0":"1"),!C.F&&C.ja&&Nt(B,"TO",C.ja),Nt(B,"TYPE","xmlhttp"),xT(C,B),C.m&&C.o&&ne(B,C.m,C.o),C.L&&(C.g.I=C.L);var W=C.g;C=C.ia,W.L=1,W.v=jn(Ge(B)),W.m=null,W.P=!0,Tg(W,C)}e.Za=function(){this.C!=null&&(this.C=null,BP(this),o8(this),vn(19))};function UP(C){C.C!=null&&(a.clearTimeout(C.C),C.C=null)}function eae(C,B){var W=null;if(C.g==B){UP(C),a8(C),C.g=null;var Q=2}else if(xv(C.h,B))W=B.D,de(C.h,B),Q=1;else return;if(C.G!=0){if(B.o)if(Q==1){W=B.m?B.m.length:0,B=Date.now()-B.F;var we=C.B;Q=Zu(),Te(Q,new zr(Q,W)),zP(C)}else Joe(C);else if(we=B.s,we==3||we==0&&0<B.X||!(Q==1&&z7e(C,B)||Q==2&&o8(C)))switch(W&&0<W.length&&(B=C.h,B.i=B.i.concat(W)),we){case 1:Iv(C,5);break;case 4:Iv(C,10);break;case 3:Iv(C,6);break;default:Iv(C,2)}}}function tae(C,B){let W=C.Ta+Math.floor(Math.random()*C.cb);return C.isActive()||(W*=2),W*B}function Iv(C,B){if(C.j.info("Error code "+B),B==2){var W=f(C.fb,C),Q=C.Xa;const we=!Q;Q=new We(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ot(Q,"https"),jn(Q),we?$P(Q.toString(),W):Pp(Q.toString(),W)}else vn(2);C.G=0,C.l&&C.l.sa(B),nae(C),Koe(C)}e.fb=function(C){C?(this.j.info("Successfully pinged google.com"),vn(2)):(this.j.info("Failed to ping google.com"),vn(1))};function nae(C){if(C.G=0,C.ka=[],C.l){const B=ee(C.h);(B.length!=0||C.i.length!=0)&&(g(C.ka,B),g(C.ka,C.i),C.h.i.length=0,m(C.i),C.i.length=0),C.l.ra()}}function rae(C,B,W){var Q=W instanceof We?Ge(W):new We(W);if(Q.g!="")B&&(Q.g=B+"."+Q.g),xt(Q,Q.s);else{var we=a.location;Q=we.protocol,B=B?B+"."+we.hostname:we.hostname,we=+we.port;var Re=new We(null);Q&&ot(Re,Q),B&&(Re.g=B),we&&xt(Re,we),W&&(Re.l=W),Q=Re}return W=C.D,B=C.ya,W&&B&&Nt(Q,W,B),Nt(Q,"VER",C.la),xT(C,Q),Q}function iae(C,B,W){if(B&&!C.J)throw Error("Can't create secondary domain capable XhrIo object.");return B=C.Ca&&!C.pa?new he(new Sv({eb:W})):new he(C.pa),B.Ha(C.J),B}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function sae(){}e=sae.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function VP(){}VP.prototype.g=function(C,B){return new lu(C,B)};function lu(C,B){fe.call(this),this.g=new k_(B),this.l=C,this.h=B&&B.messageUrlParams||null,C=B&&B.messageHeaders||null,B&&B.clientProtocolHeaderRequired&&(C?C["X-Client-Protocol"]="webchannel":C={"X-Client-Protocol":"webchannel"}),this.g.o=C,C=B&&B.initMessageHeaders||null,B&&B.messageContentType&&(C?C["X-WebChannel-Content-Type"]=B.messageContentType:C={"X-WebChannel-Content-Type":B.messageContentType}),B&&B.va&&(C?C["X-WebChannel-Client-Profile"]=B.va:C={"X-WebChannel-Client-Profile":B.va}),this.g.S=C,(C=B&&B.Sb)&&!v(C)&&(this.g.m=C),this.v=B&&B.supportsCrossDomainXhr||!1,this.u=B&&B.sendRawJson||!1,(B=B&&B.httpSessionIdParam)&&!v(B)&&(this.g.D=B,C=this.h,C!==null&&B in C&&(C=this.h,B in C&&delete C[B])),this.j=new P_(this)}p(lu,fe),lu.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},lu.prototype.close=function(){R_(this.g)},lu.prototype.o=function(C){var B=this.g;if(typeof C=="string"){var W={};W.__data__=C,C=W}else this.u&&(W={},W.__data__=yn(C),C=W);B.i.push(new bT(B.Ya++,C)),B.G==3&&zP(B)},lu.prototype.N=function(){this.g.l=null,delete this.j,R_(this.g),delete this.g,lu.aa.N.call(this)};function oae(C){Us.call(this),C.__headers__&&(this.headers=C.__headers__,this.statusCode=C.__status__,delete C.__headers__,delete C.__status__);var B=C.__sm__;if(B){e:{for(const W in B){C=W;break e}C=void 0}(this.i=C)&&(C=this.i,B=B!==null&&C in B?B[C]:void 0),this.data=B}else this.data=C}p(oae,Us);function aae(){mr.call(this),this.status=1}p(aae,mr);function P_(C){this.g=C}p(P_,sae),P_.prototype.ua=function(){Te(this.g,"a")},P_.prototype.ta=function(C){Te(this.g,new oae(C))},P_.prototype.sa=function(C){Te(this.g,new aae)},P_.prototype.ra=function(){Te(this.g,"b")},VP.prototype.createWebChannel=VP.prototype.g,lu.prototype.send=lu.prototype.o,lu.prototype.open=lu.prototype.m,lu.prototype.close=lu.prototype.close,v$e=function(){return new VP},y$e=function(){return Zu()},g$e=Hn,Sq={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},or.NO_ERROR=0,or.TIMEOUT=8,or.HTTP_ERROR=6,zD=or,Mf.COMPLETE="complete",m$e=Mf,Di.EventType=Qi,Qi.OPEN="a",Qi.CLOSE="b",Qi.ERROR="c",Qi.MESSAGE="d",fe.prototype.listen=fe.prototype.K,u2=Di,p$e=Sv,he.prototype.listenOnce=he.prototype.L,he.prototype.getLastError=he.prototype.Ka,he.prototype.getLastErrorCode=he.prototype.Ba,he.prototype.getStatus=he.prototype.Z,he.prototype.getResponseJson=he.prototype.Oa,he.prototype.getResponseText=he.prototype.oa,he.prototype.send=he.prototype.ea,he.prototype.setWithCredentials=he.prototype.Ha,h$e=he}).apply(typeof sO<"u"?sO:typeof self<"u"?self:typeof window<"u"?window:{});const yge="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}El.UNAUTHENTICATED=new El(null),El.GOOGLE_CREDENTIALS=new El("google-credentials-uid"),El.FIRST_PARTY=new El("first-party-uid"),El.MOCK_USER=new El("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GS="10.13.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=new O4("@firebase/firestore");function nC(){return wb.logLevel}function It(e,...t){if(wb.logLevel<=Gn.DEBUG){const n=t.map(lte);wb.debug(`Firestore (${GS}): ${e}`,...n)}}function Jm(e,...t){if(wb.logLevel<=Gn.ERROR){const n=t.map(lte);wb.error(`Firestore (${GS}): ${e}`,...n)}}function YI(e,...t){if(wb.logLevel<=Gn.WARN){const n=t.map(lte);wb.warn(`Firestore (${GS}): ${e}`,...n)}}function lte(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(e="Unexpected state"){const t=`FIRESTORE (${GS}) INTERNAL ASSERTION FAILED: `+e;throw Jm(t),new Error(t)}function Kr(e,t){e||cn()}function pn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class vt extends hp{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ajt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Ijt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(El.UNAUTHENTICATED))}shutdown(){}}class kjt{constructor(t){this.t=t,this.currentUser=El.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new wm;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new wm,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new wm)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Kr(typeof r.accessToken=="string"),new Ajt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Kr(t===null||typeof t=="string"),new El(t)}}class Rjt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=El.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Pjt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new Rjt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(El.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Njt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ojt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,It("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Kr(typeof n.token=="string"),this.R=n.token,new Njt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Djt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b$e{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=Djt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function lr(e,t){return e<t?-1:e>t?1:0}function xE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new vt(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new vt(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new vt(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new vt(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ms.fromMillis(Date.now())}static fromDate(t){return Ms.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Ms(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?lr(this.nanoseconds,t.nanoseconds):lr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new mn(t)}static min(){return new mn(new Ms(0,0))}static max(){return new mn(new Ms(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(t,n,r){n===void 0?n=0:n>t.length&&cn(),r===void 0?r=t.length-n:r>t.length-n&&cn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return KI.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof KI?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ci extends KI{construct(t,n,r){return new ci(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new vt(Ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ci(n)}static emptyPath(){return new ci([])}}const Mjt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wo extends KI{construct(t,n,r){return new wo(t,n,r)}static isValidIdentifier(t){return Mjt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new wo(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new vt(Ue.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new vt(Ue.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new vt(Ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new vt(Ue.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new wo(n)}static emptyPath(){return new wo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t){this.path=t}static fromPath(t){return new Ut(ci.fromString(t))}static fromName(t){return new Ut(ci.fromString(t).popFirst(5))}static empty(){return new Ut(ci.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ci.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ci.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ut(new ci(t.slice()))}}function $jt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=mn.fromTimestamp(r===1e9?new Ms(n+1,0):new Ms(n,r));return new wy(i,Ut.empty(),t)}function Ljt(e){return new wy(e.readTime,e.key,-1)}class wy{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new wy(mn.min(),Ut.empty(),-1)}static max(){return new wy(mn.max(),Ut.empty(),-1)}}function Fjt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ut.comparator(e.documentKey,t.documentKey),n!==0?n:lr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jjt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bjt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(e){if(e.code!==Ue.FAILED_PRECONDITION||e.message!==jjt)throw e;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&cn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Qe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Qe?n:Qe.resolve(n)}catch(n){return Qe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Qe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Qe.reject(n)}static resolve(t){return new Qe((n,r)=>{n(t)})}static reject(t){return new Qe((n,r)=>{r(t)})}static waitFor(t){return new Qe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(t){let n=Qe.resolve(!1);for(const r of t)n=n.next(i=>i?Qe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Qe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(t[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Qe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function zjt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jR(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ute{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}ute.oe=-1;function j4(e){return e==null}function X3(e){return e===0&&1/e==-1/0}function Ujt(e){return typeof e=="number"&&Number.isInteger(e)&&!X3(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vge(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function s_(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function _$e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t,n){this.comparator=t,this.root=n||go.EMPTY}insert(t,n){return new Oi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,go.BLACK,null,null))}remove(t){return new Oi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,go.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new oO(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new oO(this.root,t,this.comparator,!1)}getReverseIterator(){return new oO(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new oO(this.root,t,this.comparator,!0)}}class oO{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class go{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??go.RED,this.left=i??go.EMPTY,this.right=s??go.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new go(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return go.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return go.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,go.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,go.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw cn();const t=this.left.check();if(t!==this.right.check())throw cn();return t+(this.isRed()?0:1)}}go.EMPTY=null,go.RED=!0,go.BLACK=!1;go.EMPTY=new class{constructor(){this.size=0}get key(){throw cn()}get value(){throw cn()}get color(){throw cn()}get left(){throw cn()}get right(){throw cn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new go(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(t){this.comparator=t,this.data=new Oi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new bge(this.data.getIterator())}getIteratorFrom(t){return new bge(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Co)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Co(this.comparator);return n.data=t,n}}class bge{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(t){this.fields=t,t.sort(wo.comparator)}static empty(){return new Cu([])}unionWith(t){let n=new Co(wo.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Cu(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return xE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w$e extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new w$e("Invalid base64 string: "+s):s}}(t);return new No(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new No(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return lr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}No.EMPTY_BYTE_STRING=new No("");const Vjt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xy(e){if(Kr(!!e),typeof e=="string"){let t=0;const n=Vjt.exec(e);if(Kr(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ns(e.seconds),nanos:ns(e.nanos)}}function ns(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function xb(e){return typeof e=="string"?No.fromBase64String(e):No.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cte(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function dte(e){const t=e.mapValue.fields.__previous_value__;return cte(t)?dte(t):t}function XI(e){const t=xy(e.mapValue.fields.__local_write_time__.timestampValue);return new Ms(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hjt{constructor(t,n,r,i,s,o,a,l,u){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class QI{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new QI("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof QI&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Eb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?cte(e)?4:Wjt(e)?9007199254740991:qjt(e)?10:11:cn()}function Kh(e,t){if(e===t)return!0;const n=Eb(e);if(n!==Eb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return XI(e).isEqual(XI(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=xy(i.timestampValue),a=xy(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return xb(i.bytesValue).isEqual(xb(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return ns(i.geoPointValue.latitude)===ns(s.geoPointValue.latitude)&&ns(i.geoPointValue.longitude)===ns(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ns(i.integerValue)===ns(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ns(i.doubleValue),a=ns(s.doubleValue);return o===a?X3(o)===X3(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return xE(e.arrayValue.values||[],t.arrayValue.values||[],Kh);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(vge(o)!==vge(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Kh(o[l],a[l])))return!1;return!0}(e,t);default:return cn()}}function JI(e,t){return(e.values||[]).find(n=>Kh(n,t))!==void 0}function EE(e,t){if(e===t)return 0;const n=Eb(e),r=Eb(t);if(n!==r)return lr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return lr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=ns(s.integerValue||s.doubleValue),l=ns(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return _ge(e.timestampValue,t.timestampValue);case 4:return _ge(XI(e),XI(t));case 5:return lr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=xb(s),l=xb(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=lr(a[u],l[u]);if(c!==0)return c}return lr(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=lr(ns(s.latitude),ns(o.latitude));return a!==0?a:lr(ns(s.longitude),ns(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return wge(e.arrayValue,t.arrayValue);case 10:return function(s,o){var a,l,u,c;const d=s.fields||{},f=o.fields||{},h=(a=d.value)===null||a===void 0?void 0:a.arrayValue,p=(l=f.value)===null||l===void 0?void 0:l.arrayValue,m=lr(((u=h==null?void 0:h.values)===null||u===void 0?void 0:u.length)||0,((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0);return m!==0?m:wge(h,p)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===aO.mapValue&&o===aO.mapValue)return 0;if(s===aO.mapValue)return 1;if(o===aO.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const f=lr(l[d],c[d]);if(f!==0)return f;const h=EE(a[l[d]],u[c[d]]);if(h!==0)return h}return lr(l.length,c.length)}(e.mapValue,t.mapValue);default:throw cn()}}function _ge(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return lr(e,t);const n=xy(e),r=xy(t),i=lr(n.seconds,r.seconds);return i!==0?i:lr(n.nanos,r.nanos)}function wge(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=EE(n[i],r[i]);if(s)return s}return lr(n.length,r.length)}function SE(e){return Tq(e)}function Tq(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=xy(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return xb(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Ut.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Tq(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Tq(n.fields[o])}`;return i+"}"}(e.mapValue):cn()}function xge(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Cq(e){return!!e&&"integerValue"in e}function fte(e){return!!e&&"arrayValue"in e}function Ege(e){return!!e&&"nullValue"in e}function Sge(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function UD(e){return!!e&&"mapValue"in e}function qjt(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function yA(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return s_(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=yA(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=yA(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Wjt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t){this.value=t}static empty(){return new Rl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!UD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=yA(n)}setAll(t){let n=wo.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=yA(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());UD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Kh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];UD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){s_(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Rl(yA(this.value))}}function x$e(e){const t=[];return s_(e.fields,(n,r)=>{const i=new wo([n]);if(UD(r)){const s=x$e(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Cu(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new oa(t,0,mn.min(),mn.min(),mn.min(),Rl.empty(),0)}static newFoundDocument(t,n,r,i){return new oa(t,1,n,mn.min(),r,i,0)}static newNoDocument(t,n){return new oa(t,2,n,mn.min(),mn.min(),Rl.empty(),0)}static newUnknownDocument(t,n){return new oa(t,3,n,mn.min(),mn.min(),Rl.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(mn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Rl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Rl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof oa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new oa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q3=class{constructor(t,n){this.position=t,this.inclusive=n}};function Tge(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Ut.comparator(Ut.fromName(o.referenceValue),n.key):r=EE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Cge(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Kh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(t,n="asc"){this.field=t,this.dir=n}}function Gjt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E$e=class{};class ys extends E$e{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Kjt(t,n,r):n==="array-contains"?new Jjt(t,r):n==="in"?new Zjt(t,r):n==="not-in"?new e5t(t,r):n==="array-contains-any"?new t5t(t,r):new ys(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Xjt(t,r):new Qjt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(EE(n,this.value)):n!==null&&Eb(this.value)===Eb(n)&&this.matchesComparison(EE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return cn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lf extends E$e{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new lf(t,n)}matches(t){return S$e(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function S$e(e){return e.op==="and"}function T$e(e){return Yjt(e)&&S$e(e)}function Yjt(e){for(const t of e.filters)if(t instanceof lf)return!1;return!0}function Aq(e){if(e instanceof ys)return e.field.canonicalString()+e.op.toString()+SE(e.value);if(T$e(e))return e.filters.map(t=>Aq(t)).join(",");{const t=e.filters.map(n=>Aq(n)).join(",");return`${e.op}(${t})`}}function C$e(e,t){return e instanceof ys?function(r,i){return i instanceof ys&&r.op===i.op&&r.field.isEqual(i.field)&&Kh(r.value,i.value)}(e,t):e instanceof lf?function(r,i){return i instanceof lf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&C$e(o,i.filters[a]),!0):!1}(e,t):void cn()}function A$e(e){return e instanceof ys?function(n){return`${n.field.canonicalString()} ${n.op} ${SE(n.value)}`}(e):e instanceof lf?function(n){return n.op.toString()+" {"+n.getFilters().map(A$e).join(" ,")+"}"}(e):"Filter"}class Kjt extends ys{constructor(t,n,r){super(t,n,r),this.key=Ut.fromName(r.referenceValue)}matches(t){const n=Ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class Xjt extends ys{constructor(t,n){super(t,"in",n),this.keys=I$e("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Qjt extends ys{constructor(t,n){super(t,"not-in",n),this.keys=I$e("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function I$e(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ut.fromName(r.referenceValue))}class Jjt extends ys{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return fte(n)&&JI(n.arrayValue,this.value)}}class Zjt extends ys{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&JI(this.value.arrayValue,n)}}class e5t extends ys{constructor(t,n){super(t,"not-in",n)}matches(t){if(JI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!JI(this.value.arrayValue,n)}}class t5t extends ys{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!fte(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>JI(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5t{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Age(e,t=null,n=[],r=[],i=null,s=null,o=null){return new n5t(e,t,n,r,i,s,o)}function hte(e){const t=pn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Aq(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),j4(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>SE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>SE(r)).join(",")),t.ue=n}return t.ue}function pte(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Gjt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!C$e(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Cge(e.startAt,t.startAt)&&Cge(e.endAt,t.endAt)}function Iq(e){return Ut.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function r5t(e,t,n,r,i,s,o,a){return new YS(e,t,n,r,i,s,o,a)}function mte(e){return new YS(e)}function Ige(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function k$e(e){return e.collectionGroup!==null}function vA(e){const t=pn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Co(wo.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new ZI(s,r))}),n.has(wo.keyField().canonicalString())||t.ce.push(new ZI(wo.keyField(),r))}return t.ce}function Mh(e){const t=pn(e);return t.le||(t.le=i5t(t,vA(e))),t.le}function i5t(e,t){if(e.limitType==="F")return Age(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ZI(i.field,s)});const n=e.endAt?new Q3(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Q3(e.startAt.position,e.startAt.inclusive):null;return Age(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function kq(e,t){const n=e.filters.concat([t]);return new YS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Rq(e,t,n){return new YS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function B4(e,t){return pte(Mh(e),Mh(t))&&e.limitType===t.limitType}function R$e(e){return`${hte(Mh(e))}|lt:${e.limitType}`}function ww(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>A$e(i)).join(", ")}]`),j4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>SE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>SE(i)).join(",")),`Target(${r})`}(Mh(e))}; limitType=${e.limitType})`}function z4(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of vA(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=Tge(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,vA(r),i)||r.endAt&&!function(o,a,l){const u=Tge(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,vA(r),i))}(e,t)}function s5t(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function P$e(e){return(t,n)=>{let r=!1;for(const i of vA(e)){const s=o5t(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function o5t(e,t,n){const r=e.field.isKeyField()?Ut.comparator(t.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?EE(l,u):cn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return cn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){s_(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return _$e(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5t=new Oi(Ut.comparator);function Zm(){return a5t}const N$e=new Oi(Ut.comparator);function c2(...e){let t=N$e;for(const n of e)t=t.insert(n.key,n);return t}function O$e(e){let t=N$e;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function O1(){return bA()}function D$e(){return bA()}function bA(){return new KS(e=>e.toString(),(e,t)=>e.isEqual(t))}const l5t=new Oi(Ut.comparator),u5t=new Co(Ut.comparator);function zn(...e){let t=u5t;for(const n of e)t=t.add(n);return t}const c5t=new Co(lr);function d5t(){return c5t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gte(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:X3(t)?"-0":t}}function M$e(e){return{integerValue:""+e}}function f5t(e,t){return Ujt(t)?M$e(t):gte(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this._=void 0}}function h5t(e,t,n){return e instanceof ek?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&cte(s)&&(s=dte(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof tk?L$e(e,t):e instanceof nk?F$e(e,t):function(i,s){const o=$$e(i,s),a=kge(o)+kge(i.Pe);return Cq(o)&&Cq(i.Pe)?M$e(a):gte(i.serializer,a)}(e,t)}function p5t(e,t,n){return e instanceof tk?L$e(e,t):e instanceof nk?F$e(e,t):n}function $$e(e,t){return e instanceof J3?function(r){return Cq(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class ek extends U4{}class tk extends U4{constructor(t){super(),this.elements=t}}function L$e(e,t){const n=j$e(t);for(const r of e.elements)n.some(i=>Kh(i,r))||n.push(r);return{arrayValue:{values:n}}}class nk extends U4{constructor(t){super(),this.elements=t}}function F$e(e,t){let n=j$e(t);for(const r of e.elements)n=n.filter(i=>!Kh(i,r));return{arrayValue:{values:n}}}class J3 extends U4{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function kge(e){return ns(e.integerValue||e.doubleValue)}function j$e(e){return fte(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5t{constructor(t,n){this.field=t,this.transform=n}}function g5t(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof tk&&i instanceof tk||r instanceof nk&&i instanceof nk?xE(r.elements,i.elements,Kh):r instanceof J3&&i instanceof J3?Kh(r.Pe,i.Pe):r instanceof ek&&i instanceof ek}(e.transform,t.transform)}class y5t{constructor(t,n){this.version=t,this.transformResults=n}}class Vl{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Vl}static exists(t){return new Vl(void 0,t)}static updateTime(t){return new Vl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function VD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class V4{}function B$e(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new H4(e.key,Vl.none()):new BR(e.key,e.data,Vl.none());{const n=e.data,r=Rl.empty();let i=new Co(wo.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new rv(e.key,r,new Cu(i.toArray()),Vl.none())}}function v5t(e,t,n){e instanceof BR?function(i,s,o){const a=i.value.clone(),l=Pge(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof rv?function(i,s,o){if(!VD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Pge(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(z$e(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function _A(e,t,n,r){return e instanceof BR?function(s,o,a,l){if(!VD(s.precondition,o))return a;const u=s.value.clone(),c=Nge(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,n,r):e instanceof rv?function(s,o,a,l){if(!VD(s.precondition,o))return a;const u=Nge(s.fieldTransforms,l,o),c=o.data;return c.setAll(z$e(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(e,t,n,r):function(s,o,a){return VD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function b5t(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=$$e(r.transform,i||null);s!=null&&(n===null&&(n=Rl.empty()),n.set(r.field,s))}return n||null}function Rge(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xE(r,i,(s,o)=>g5t(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class BR extends V4{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class rv extends V4{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function z$e(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Pge(e,t,n){const r=new Map;Kr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,p5t(o,a,n[i]))}return r}function Nge(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,h5t(s,o,t))}return r}class H4 extends V4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _5t extends V4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5t{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&v5t(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=_A(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=_A(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=D$e();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=B$e(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(mn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),zn())}isEqual(t){return this.batchId===t.batchId&&xE(this.mutations,t.mutations,(n,r)=>Rge(n,r))&&xE(this.baseMutations,t.baseMutations,(n,r)=>Rge(n,r))}}class yte{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Kr(t.mutations.length===r.length);let i=function(){return l5t}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new yte(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5t{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5t{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hs,Qn;function S5t(e){switch(e){default:return cn();case Ue.CANCELLED:case Ue.UNKNOWN:case Ue.DEADLINE_EXCEEDED:case Ue.RESOURCE_EXHAUSTED:case Ue.INTERNAL:case Ue.UNAVAILABLE:case Ue.UNAUTHENTICATED:return!1;case Ue.INVALID_ARGUMENT:case Ue.NOT_FOUND:case Ue.ALREADY_EXISTS:case Ue.PERMISSION_DENIED:case Ue.FAILED_PRECONDITION:case Ue.ABORTED:case Ue.OUT_OF_RANGE:case Ue.UNIMPLEMENTED:case Ue.DATA_LOSS:return!0}}function U$e(e){if(e===void 0)return Jm("GRPC error has no .code"),Ue.UNKNOWN;switch(e){case hs.OK:return Ue.OK;case hs.CANCELLED:return Ue.CANCELLED;case hs.UNKNOWN:return Ue.UNKNOWN;case hs.DEADLINE_EXCEEDED:return Ue.DEADLINE_EXCEEDED;case hs.RESOURCE_EXHAUSTED:return Ue.RESOURCE_EXHAUSTED;case hs.INTERNAL:return Ue.INTERNAL;case hs.UNAVAILABLE:return Ue.UNAVAILABLE;case hs.UNAUTHENTICATED:return Ue.UNAUTHENTICATED;case hs.INVALID_ARGUMENT:return Ue.INVALID_ARGUMENT;case hs.NOT_FOUND:return Ue.NOT_FOUND;case hs.ALREADY_EXISTS:return Ue.ALREADY_EXISTS;case hs.PERMISSION_DENIED:return Ue.PERMISSION_DENIED;case hs.FAILED_PRECONDITION:return Ue.FAILED_PRECONDITION;case hs.ABORTED:return Ue.ABORTED;case hs.OUT_OF_RANGE:return Ue.OUT_OF_RANGE;case hs.UNIMPLEMENTED:return Ue.UNIMPLEMENTED;case hs.DATA_LOSS:return Ue.DATA_LOSS;default:return cn()}}(Qn=hs||(hs={}))[Qn.OK=0]="OK",Qn[Qn.CANCELLED=1]="CANCELLED",Qn[Qn.UNKNOWN=2]="UNKNOWN",Qn[Qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qn[Qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qn[Qn.NOT_FOUND=5]="NOT_FOUND",Qn[Qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qn[Qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qn[Qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qn[Qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qn[Qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qn[Qn.ABORTED=10]="ABORTED",Qn[Qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qn[Qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qn[Qn.INTERNAL=13]="INTERNAL",Qn[Qn.UNAVAILABLE=14]="UNAVAILABLE",Qn[Qn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5t(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5t=new V1([4294967295,4294967295],0);function Oge(e){const t=T5t().encode(e),n=new f$e;return n.update(t),new Uint8Array(n.digest())}function Dge(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new V1([n,r],0),new V1([i,s],0)]}class vte{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new d2(`Invalid padding: ${n}`);if(r<0)throw new d2(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new d2(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new d2(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=V1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(V1.fromNumber(r)));return i.compare(C5t)===1&&(i=new V1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Oge(t),[r,i]=Dge(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new vte(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Oge(t),[r,i]=Dge(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class d2 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,zR.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new q4(mn.min(),i,new Oi(lr),Zm(),zn())}}class zR{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new zR(r,n,zn(),zn(),zn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class V$e{constructor(t,n){this.targetId=t,this.me=n}}class H$e{constructor(t,n,r=No.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Mge{constructor(){this.fe=0,this.ge=Lge(),this.pe=No.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=zn(),n=zn(),r=zn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:cn()}}),new zR(this.pe,this.ye,t,n,r)}Ce(){this.we=!1,this.ge=Lge()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Kr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class A5t{constructor(t){this.Le=t,this.Be=new Map,this.ke=Zm(),this.qe=$ge(),this.Qe=new Oi(lr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:cn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(Iq(s))if(r===0){const o=new Ut(s.path);this.Ue(n,o,oa.newNoDocument(o,mn.min()))}else Kr(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),l=a?this.Xe(a,t,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=xb(r).toUint8Array()}catch(l){if(l instanceof w$e)return YI("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new vte(o,i,s)}catch(l){return YI(l instanceof d2?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Iq(a.target)){const l=new Ut(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,oa.newNoDocument(l,t))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=zn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new q4(t,n,this.Qe,this.ke,r);return this.ke=Zm(),this.qe=$ge(),this.Qe=new Oi(lr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Mge,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Co(lr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||It("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Mge),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function $ge(){return new Oi(Ut.comparator)}function Lge(){return new Oi(Ut.comparator)}const I5t={asc:"ASCENDING",desc:"DESCENDING"},k5t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},R5t={and:"AND",or:"OR"};class P5t{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Pq(e,t){return e.useProto3Json||j4(t)?t:{value:t}}function Z3(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function q$e(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function N5t(e,t){return Z3(e,t.toTimestamp())}function $h(e){return Kr(!!e),mn.fromTimestamp(function(n){const r=xy(n);return new Ms(r.seconds,r.nanos)}(e))}function bte(e,t){return Nq(e,t).canonicalString()}function Nq(e,t){const n=function(i){return new ci(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function W$e(e){const t=ci.fromString(e);return Kr(Q$e(t)),t}function Oq(e,t){return bte(e.databaseId,t.path)}function G9(e,t){const n=W$e(t);if(n.get(1)!==e.databaseId.projectId)throw new vt(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new vt(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ut(Y$e(n))}function G$e(e,t){return bte(e.databaseId,t)}function O5t(e){const t=W$e(e);return t.length===4?ci.emptyPath():Y$e(t)}function Dq(e){return new ci(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Y$e(e){return Kr(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Fge(e,t,n){return{name:Oq(e,t),fields:n.value.mapValue.fields}}function D5t(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:cn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(Kr(c===void 0||typeof c=="string"),No.fromBase64String(c||"")):(Kr(c===void 0||c instanceof Buffer||c instanceof Uint8Array),No.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(u){const c=u.code===void 0?Ue.UNKNOWN:U$e(u.code);return new vt(c,u.message||"")}(o);n=new H$e(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=G9(e,r.document.name),s=$h(r.document.updateTime),o=r.document.createTime?$h(r.document.createTime):mn.min(),a=new Rl({mapValue:{fields:r.document.fields}}),l=oa.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new HD(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=G9(e,r.document),s=r.readTime?$h(r.readTime):mn.min(),o=oa.newNoDocument(i,s),a=r.removedTargetIds||[];n=new HD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=G9(e,r.document),s=r.removedTargetIds||[];n=new HD([],s,i,null)}else{if(!("filter"in t))return cn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new E5t(i,s),a=r.targetId;n=new V$e(a,o)}}return n}function M5t(e,t){let n;if(t instanceof BR)n={update:Fge(e,t.key,t.value)};else if(t instanceof H4)n={delete:Oq(e,t.key)};else if(t instanceof rv)n={update:Fge(e,t.key,t.data),updateMask:H5t(t.fieldMask)};else{if(!(t instanceof _5t))return cn();n={verify:Oq(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ek)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof tk)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof nk)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof J3)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw cn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:N5t(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:cn()}(e,t.precondition)),n}function $5t(e,t){return e&&e.length>0?(Kr(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?$h(i.updateTime):$h(s);return o.isEqual(mn.min())&&(o=$h(s)),new y5t(o,i.transformResults||[])}(n,t))):[]}function L5t(e,t){return{documents:[G$e(e,t.path)]}}function F5t(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=G$e(e,i);const s=function(u){if(u.length!==0)return X$e(lf.create(u,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(f){return{field:xw(f.field),direction:z5t(f.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Pq(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{_t:n,parent:i}}function j5t(e){let t=O5t(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Kr(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(d){const f=K$e(d);return f instanceof lf&&T$e(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(p){return new ZI(Ew(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,j4(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,h=d.values||[];return new Q3(h,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,h=d.values||[];return new Q3(h,f)}(n.endAt)),r5t(t,i,o,s,a,"F",l,u)}function B5t(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return cn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function K$e(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ew(n.unaryFilter.field);return ys.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ew(n.unaryFilter.field);return ys.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ew(n.unaryFilter.field);return ys.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ew(n.unaryFilter.field);return ys.create(o,"!=",{nullValue:"NULL_VALUE"});default:return cn()}}(e):e.fieldFilter!==void 0?function(n){return ys.create(Ew(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return cn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return lf.create(n.compositeFilter.filters.map(r=>K$e(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return cn()}}(n.compositeFilter.op))}(e):cn()}function z5t(e){return I5t[e]}function U5t(e){return k5t[e]}function V5t(e){return R5t[e]}function xw(e){return{fieldPath:e.canonicalString()}}function Ew(e){return wo.fromServerFormat(e.fieldPath)}function X$e(e){return e instanceof ys?function(n){if(n.op==="=="){if(Sge(n.value))return{unaryFilter:{field:xw(n.field),op:"IS_NAN"}};if(Ege(n.value))return{unaryFilter:{field:xw(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sge(n.value))return{unaryFilter:{field:xw(n.field),op:"IS_NOT_NAN"}};if(Ege(n.value))return{unaryFilter:{field:xw(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xw(n.field),op:U5t(n.op),value:n.value}}}(e):e instanceof lf?function(n){const r=n.getFilters().map(i=>X$e(i));return r.length===1?r[0]:{compositeFilter:{op:V5t(n.op),filters:r}}}(e):cn()}function H5t(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Q$e(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(t,n,r,i,s=mn.min(),o=mn.min(),a=No.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new v0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new v0(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new v0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new v0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5t{constructor(t){this.ct=t}}function W5t(e){const t=j5t({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Rq(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5t{constructor(){this.un=new Y5t}addToCollectionParentIndex(t,n){return this.un.add(n),Qe.resolve()}getCollectionParents(t,n){return Qe.resolve(this.un.getEntries(n))}addFieldIndex(t,n){return Qe.resolve()}deleteFieldIndex(t,n){return Qe.resolve()}deleteAllFieldIndexes(t){return Qe.resolve()}createTargetIndexes(t,n){return Qe.resolve()}getDocumentsMatchingTarget(t,n){return Qe.resolve(null)}getIndexType(t,n){return Qe.resolve(0)}getFieldIndexes(t,n){return Qe.resolve([])}getNextCollectionGroupToUpdate(t){return Qe.resolve(null)}getMinOffset(t,n){return Qe.resolve(wy.min())}getMinOffsetFromCollectionGroup(t,n){return Qe.resolve(wy.min())}updateCollectionGroup(t,n,r){return Qe.resolve()}updateIndexEntries(t,n){return Qe.resolve()}}class Y5t{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Co(ci.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Co(ci.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new TE(0)}static kn(){return new TE(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5t{constructor(){this.changes=new KS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,oa.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Qe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5t{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5t{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&_A(r.mutation,i,Cu.empty(),Ms.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,zn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=zn()){const i=O1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=c2();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=O1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,zn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Zm();const o=bA(),a=function(){return bA()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof rv)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),_A(c.mutation,u,c.mutation.getFieldMask(),Ms.now())):o.set(u.key,Cu.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var d;return a.set(u,new X5t(c,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){const r=bA();let i=new Oi((o,a)=>o-a),s=zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Cu.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||zn()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=D$e();c.forEach(f=>{if(!s.has(f)){const h=B$e(n.get(f),r.get(f));h!==null&&d.set(f,h),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,d))}return Qe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):k$e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Qe.resolve(O1());let a=-1,l=s;return o.next(u=>Qe.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?Qe.resolve():this.remoteDocumentCache.getEntry(t,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,l,u,zn())).next(c=>({batchId:a,changes:O$e(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ut(n)).next(r=>{let i=c2();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=c2();return this.indexManager.getCollectionParents(t,s).next(a=>Qe.forEach(a,l=>{const u=function(d,f){return new YS(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,r,i).next(c=>{c.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,oa.newInvalidDocument(c)))});let a=c2();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&_A(c.mutation,u,Cu.empty(),Ms.now()),z4(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5t{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,n){return Qe.resolve(this.hr.get(n))}saveBundleMetadata(t,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$h(i.createTime)}}(n)),Qe.resolve()}getNamedQuery(t,n){return Qe.resolve(this.Pr.get(n))}saveNamedQuery(t,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:W5t(i.bundledQuery),readTime:$h(i.readTime)}}(n)),Qe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5t{constructor(){this.overlays=new Oi(Ut.comparator),this.Ir=new Map}getOverlay(t,n){return Qe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=O1();return Qe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Qe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Qe.resolve()}getOverlaysForCollection(t,n,r){const i=O1(),s=n.length+1,o=new Ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Qe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Oi((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=O1(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=O1(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return Qe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new x5t(n,r));let s=this.Ir.get(n);s===void 0&&(s=zn(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8t{constructor(){this.sessionToken=No.EMPTY_BYTE_STRING}getSessionToken(t){return Qe.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,Qe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _te{constructor(){this.Tr=new Co(Hs.Er),this.dr=new Co(Hs.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,n){const r=new Hs(t,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Vr(new Hs(t,n))}mr(t,n){t.forEach(r=>this.removeReference(r,n))}gr(t){const n=new Ut(new ci([])),r=new Hs(n,t),i=new Hs(n,t+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const n=new Ut(new ci([])),r=new Hs(n,t),i=new Hs(n,t+1);let s=zn();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Hs(t,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Hs{constructor(t,n){this.key=t,this.wr=n}static Er(t,n){return Ut.comparator(t.key,n.key)||lr(t.wr,n.wr)}static Ar(t,n){return lr(t.wr,n.wr)||Ut.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8t{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Co(Hs.Er)}checkEmpty(t){return Qe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new w5t(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Hs(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Qe.resolve(o)}lookupMutationBatch(t,n){return Qe.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Qe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Hs(n,0),i=new Hs(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),Qe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Co(lr);return n.forEach(i=>{const s=new Hs(i,0),o=new Hs(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),Qe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Ut.isDocumentKey(s)||(s=s.child(""));const o=new Hs(new Ut(s),0);let a=new Co(lr);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),Qe.resolve(this.Cr(a))}Cr(t){const n=[];return t.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Kr(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Qe.forEach(n.mutations,i=>{const s=new Hs(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.br=r})}On(t){}containsKey(t,n){const r=new Hs(n,0),i=this.br.firstAfterOrEqual(r);return Qe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Qe.resolve()}Fr(t,n){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const n=this.vr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8t{constructor(t){this.Mr=t,this.docs=function(){return new Oi(Ut.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Qe.resolve(r?r.document.mutableCopy():oa.newInvalidDocument(n))}getEntries(t,n){let r=Zm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():oa.newInvalidDocument(i))}),Qe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Zm();const o=n.path,a=new Ut(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Fjt(Ljt(c),r)<=0||(i.has(c.key)||z4(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Qe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){cn()}Or(t,n){return Qe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new r8t(this)}getSize(t){return Qe.resolve(this.size)}}class r8t extends K5t{constructor(t){super(),this.cr=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(t,i)):this.cr.removeEntry(r)}),Qe.waitFor(n)}getFromCache(t,n){return this.cr.getEntry(t,n)}getAllFromCache(t,n){return this.cr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8t{constructor(t){this.persistence=t,this.Nr=new KS(n=>hte(n),pte),this.lastRemoteSnapshotVersion=mn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new _te,this.targetCount=0,this.kr=TE.Bn()}forEachTarget(t,n){return this.Nr.forEach((r,i)=>n(i)),Qe.resolve()}getLastRemoteSnapshotVersion(t){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Qe.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Qe.resolve()}Kn(t){this.Nr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.kr=new TE(n),this.highestTargetId=n),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,n){return this.Kn(n),this.targetCount+=1,Qe.resolve()}updateTargetData(t,n){return this.Kn(n),Qe.resolve()}removeTargetData(t,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Qe.waitFor(s).next(()=>i)}getTargetCount(t){return Qe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Nr.get(n)||null;return Qe.resolve(r)}addMatchingKeys(t,n,r){return this.Br.Rr(n,r),Qe.resolve()}removeMatchingKeys(t,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Qe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Br.gr(n),Qe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Br.yr(n);return Qe.resolve(r)}containsKey(t,n){return Qe.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8t{constructor(t,n){this.qr={},this.overlays={},this.Qr=new ute(0),this.Kr=!1,this.Kr=!0,this.$r=new e8t,this.referenceDelegate=t(this),this.Ur=new i8t(this),this.indexManager=new G5t,this.remoteDocumentCache=function(i){return new n8t(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new q5t(n),this.Gr=new J5t(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Z5t,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.qr[t.toKey()];return r||(r=new t8t(n,this.referenceDelegate),this.qr[t.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,n,r){It("MemoryPersistence","Starting transaction:",t);const i=new o8t(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(t,n){return Qe.or(Object.values(this.qr).map(r=>()=>r.containsKey(t,n)))}}class o8t extends Bjt{constructor(t){super(),this.currentSequenceNumber=t}}class wte{constructor(t){this.persistence=t,this.Jr=new _te,this.Yr=null}static Zr(t){return new wte(t)}get Xr(){if(this.Yr)return this.Yr;throw cn()}addReference(t,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Qe.resolve()}removeReference(t,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Qe.resolve()}markPotentiallyOrphaned(t,n){return this.Xr.add(n.toString()),Qe.resolve()}removeTarget(t,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}zr(){this.Yr=new Set}jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.Xr,r=>{const i=Ut.fromPath(r);return this.ei(t,i).next(s=>{s||n.removeEntry(i,mn.min())})}).next(()=>(this.Yr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ei(t,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(t){return 0}ei(t,n){return Qe.or([()=>Qe.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Hr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xte{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(t,n){let r=zn(),i=zn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new xte(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8t{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8t{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return U3t()?8:zjt(ba())>0?6:4}()}initialize(t,n){this.Ji=t,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.Yi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new a8t;return this.Xi(t,n,o).next(a=>{if(s.result=a,this.zi)return this.es(t,n,o,a.size)})}).next(()=>s.result)}es(t,n,r,i){return r.documentReadCount<this.ji?(nC()<=Gn.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",ww(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Qe.resolve()):(nC()<=Gn.DEBUG&&It("QueryEngine","Query:",ww(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(nC()<=Gn.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",ww(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Mh(n))):Qe.resolve())}Yi(t,n){if(Ige(n))return Qe.resolve(null);let r=Mh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Rq(n,null,"F"),r=Mh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=zn(...s);return this.Ji.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(t,Rq(n,null,"F")):this.rs(t,u,n,l)}))})))}Zi(t,n,r,i){return Ige(n)||i.isEqual(mn.min())?Qe.resolve(null):this.Ji.getDocuments(t,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?Qe.resolve(null):(nC()<=Gn.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ww(n)),this.rs(t,o,n,$jt(i,-1)).next(a=>a))})}ts(t,n){let r=new Co(P$e(t));return n.forEach((i,s)=>{z4(t,s)&&(r=r.add(s))}),r}ns(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(t,n,r){return nC()<=Gn.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",ww(n)),this.Ji.getDocumentsMatchingQuery(t,n,wy.min(),r)}rs(t,n,r,i){return this.Ji.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8t{constructor(t,n,r,i){this.persistence=t,this.ss=n,this.serializer=i,this.os=new Oi(lr),this._s=new KS(s=>hte(s),pte),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(r)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Q5t(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.os))}}function c8t(e,t,n,r){return new u8t(e,t,n,r)}async function J$e(e,t){const n=pn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=zn();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function d8t(e,t){const n=pn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,f=d.keys();let h=Qe.resolve();return f.forEach(p=>{h=h.next(()=>c.getEntry(l,p)).next(m=>{const g=u.docVersions.get(p);Kr(g!==null),m.version.compareTo(g)<0&&(d.applyToRemoteDocument(m,u),m.isValidDocument()&&(m.setReadTime(u.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=zn();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function Z$e(e){const t=pn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ur.getLastRemoteSnapshotVersion(n))}function f8t(e,t){const n=pn(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];t.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,c.addedDocuments,d)));let h=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?h=h.withResumeToken(No.EMPTY_BYTE_STRING,mn.min()).withLastLimboFreeSnapshotVersion(mn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(d,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,h,c)&&a.push(n.Ur.updateTargetData(s,h))});let l=Zm(),u=zn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(h8t(s,o,t.documentUpdates).next(c=>{l=c.Ps,u=c.Is})),!r.isEqual(mn.min())){const c=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Qe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function h8t(e,t,n){let r=zn(),i=zn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Zm();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(mn.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):It("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function p8t(e,t){const n=pn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function m8t(e,t){const n=pn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,t).next(s=>s?(i=s,Qe.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new v0(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(t,r.targetId)),r})}async function Mq(e,t,n){const r=pn(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!jR(o))throw o;It("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function jge(e,t,n){const r=pn(e);let i=mn.min(),s=zn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=pn(l),f=d._s.get(c);return f!==void 0?Qe.resolve(d.os.get(f)):d.Ur.getTargetData(u,c)}(r,o,Mh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,t,n?i:mn.min(),n?s:zn())).next(a=>(g8t(r,s5t(t),a),{documents:a,Ts:s})))}function g8t(e,t,n){let r=e.us.get(t)||mn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.us.set(t,r)}class Bge{constructor(){this.activeTargetIds=d5t()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class y8t{constructor(){this.so=new Bge,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,n,r){this.oo[t]=n}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new Bge,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8t{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zge{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lO=null;function Y9(){return lO===null?lO=function(){return 268435456+Math.round(2147483648*Math.random())}():lO++,"0x"+lO.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b8t={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8t{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="WebChannelConnection";class w8t extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Y9(),l=this.xo(n,r.toUriEncodedString());It("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(c=>(It("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw YI("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+GS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=b8t[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,n,r,i){const s=Y9();return new Promise((o,a)=>{const l=new h$e;l.setWithCredentials(!0),l.listenOnce(m$e.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case zD.NO_ERROR:const c=l.getResponseJson();It(Xo,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case zD.TIMEOUT:It(Xo,`RPC '${t}' ${s} timed out`),a(new vt(Ue.DEADLINE_EXCEEDED,"Request time out"));break;case zD.HTTP_ERROR:const d=l.getStatus();if(It(Xo,`RPC '${t}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Ue).indexOf(y)>=0?y:Ue.UNKNOWN}(h.status);a(new vt(p,h.message))}else a(new vt(Ue.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new vt(Ue.UNAVAILABLE,"Connection failed."));break;default:cn()}}finally{It(Xo,`RPC '${t}' ${s} completed.`)}});const u=JSON.stringify(i);It(Xo,`RPC '${t}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(t,n,r){const i=Y9(),s=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=v$e(),a=y$e(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new p$e({})),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");It(Xo,`Creating RPC '${t}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);let f=!1,h=!1;const p=new _8t({Io:g=>{h?It(Xo,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(f||(It(Xo,`Opening RPC '${t}' stream ${i} transport.`),d.open(),f=!0),It(Xo,`RPC '${t}' stream ${i} sending:`,g),d.send(g))},To:()=>d.close()}),m=(g,y,v)=>{g.listen(y,_=>{try{v(_)}catch(w){setTimeout(()=>{throw w},0)}})};return m(d,u2.EventType.OPEN,()=>{h||(It(Xo,`RPC '${t}' stream ${i} transport opened.`),p.yo())}),m(d,u2.EventType.CLOSE,()=>{h||(h=!0,It(Xo,`RPC '${t}' stream ${i} transport closed`),p.So())}),m(d,u2.EventType.ERROR,g=>{h||(h=!0,YI(Xo,`RPC '${t}' stream ${i} transport errored:`,g),p.So(new vt(Ue.UNAVAILABLE,"The operation could not be completed")))}),m(d,u2.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];Kr(!!v);const _=v,w=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(w){It(Xo,`RPC '${t}' stream ${i} received error:`,w);const x=w.status;let S=function(I){const k=hs[I];if(k!==void 0)return U$e(k)}(x),E=w.message;S===void 0&&(S=Ue.INTERNAL,E="Unknown error status: "+x+" with message "+w.message),h=!0,p.So(new vt(S,E)),d.close()}else It(Xo,`RPC '${t}' stream ${i} received:`,v),p.bo(v)}}),m(a,g$e.STAT_EVENT,g=>{g.stat===Sq.PROXY?It(Xo,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===Sq.NOPROXY&&It(Xo,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.wo()},0),p}}function K9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(e){return new P5t(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3e{constructor(t,n,r=1e3,i=1.5,s=6e4){this.ui=t,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3e{constructor(t,n,r,i,s,o,a,l){this.ui=t,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new e3e(t,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():n&&n.code===Ue.RESOURCE_EXHAUSTED?(Jm(n.toString()),Jm("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(n)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{t(()=>{const i=new vt(Ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(t,n){const r=this.h_(this.Yo);this.stream=this.T_(t,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return It("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return n=>{this.ui.enqueueAndForget(()=>this.Yo===t?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class x8t extends t3e{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(t,n){return this.connection.Bo("Listen",t,n)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const n=D5t(this.serializer,t),r=function(s){if(!("targetChange"in s))return mn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?mn.min():o.readTime?$h(o.readTime):mn.min()}(t);return this.listener.d_(n,r)}A_(t){const n={};n.database=Dq(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Iq(l)?{documents:L5t(s,l)}:{query:F5t(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=q$e(s,o.resumeToken);const u=Pq(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(mn.min())>0){a.readTime=Z3(s,o.snapshotVersion.toTimestamp());const u=Pq(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,t);const r=B5t(this.serializer,t);r&&(n.labels=r),this.a_(n)}R_(t){const n={};n.database=Dq(this.serializer),n.removeTarget=t,this.a_(n)}}class E8t extends t3e{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,n){return this.connection.Bo("Write",t,n)}E_(t){return Kr(!!t.streamToken),this.lastStreamToken=t.streamToken,Kr(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){Kr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const n=$5t(t.writeResults,t.commitTime),r=$h(t.commitTime);return this.listener.g_(r,n)}p_(){const t={};t.database=Dq(this.serializer),this.a_(t)}m_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>M5t(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8t extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new vt(Ue.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(t,Nq(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new vt(Ue.UNKNOWN,s.toString())})}Lo(t,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(t,Nq(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new vt(Ue.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class T8t{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Jm(n),this.D_=!1):It("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8t{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{o_(this)&&(It("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=pn(l);u.L_.add(4),await VR(u),u.q_.set("Unknown"),u.L_.delete(4),await UR(u)}(this))})}),this.q_=new T8t(r,i)}}async function UR(e){if(o_(e))for(const t of e.B_)await t(!0)}async function VR(e){for(const t of e.B_)await t(!1)}function n3e(e,t){const n=pn(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Cte(n)?Tte(n):XS(n).r_()&&Ste(n,t))}function Ete(e,t){const n=pn(e),r=XS(n);n.N_.delete(t),r.r_()&&r3e(n,t),n.N_.size===0&&(r.r_()?r.o_():o_(n)&&n.q_.set("Unknown"))}function Ste(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(mn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}XS(e).A_(t)}function r3e(e,t){e.Q_.xe(t),XS(e).R_(t)}function Tte(e){e.Q_=new A5t({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),XS(e).start(),e.q_.v_()}function Cte(e){return o_(e)&&!XS(e).n_()&&e.N_.size>0}function o_(e){return pn(e).L_.size===0}function i3e(e){e.Q_=void 0}async function A8t(e){e.q_.set("Online")}async function I8t(e){e.N_.forEach((t,n)=>{Ste(e,t)})}async function k8t(e,t){i3e(e),Cte(e)?(e.q_.M_(t),Tte(e)):e.q_.set("Unknown")}async function R8t(e,t,n){if(e.q_.set("Online"),t instanceof H$e&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(e,t)}catch(r){It("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await eL(e,r)}else if(t instanceof HD?e.Q_.Ke(t):t instanceof V$e?e.Q_.He(t):e.Q_.We(t),!n.isEqual(mn.min()))try{const r=await Z$e(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.N_.get(u);c&&s.N_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.N_.get(l);if(!c)return;s.N_.set(l,c.withResumeToken(No.EMPTY_BYTE_STRING,c.snapshotVersion)),r3e(s,l);const d=new v0(c.target,l,u,c.sequenceNumber);Ste(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){It("RemoteStore","Failed to raise snapshot:",r),await eL(e,r)}}async function eL(e,t,n){if(!jR(t))throw t;e.L_.add(1),await VR(e),e.q_.set("Offline"),n||(n=()=>Z$e(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{It("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await UR(e)})}function s3e(e,t){return t().catch(n=>eL(e,n,t))}async function G4(e){const t=pn(e),n=Ey(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;P8t(t);)try{const i=await p8t(t.localStore,r);if(i===null){t.O_.length===0&&n.o_();break}r=i.batchId,N8t(t,i)}catch(i){await eL(t,i)}o3e(t)&&a3e(t)}function P8t(e){return o_(e)&&e.O_.length<10}function N8t(e,t){e.O_.push(t);const n=Ey(e);n.r_()&&n.V_&&n.m_(t.mutations)}function o3e(e){return o_(e)&&!Ey(e).n_()&&e.O_.length>0}function a3e(e){Ey(e).start()}async function O8t(e){Ey(e).p_()}async function D8t(e){const t=Ey(e);for(const n of e.O_)t.m_(n.mutations)}async function M8t(e,t,n){const r=e.O_.shift(),i=yte.from(r,t,n);await s3e(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await G4(e)}async function $8t(e,t){t&&Ey(e).V_&&await async function(r,i){if(function(o){return S5t(o)&&o!==Ue.ABORTED}(i.code)){const s=r.O_.shift();Ey(r).s_(),await s3e(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await G4(r)}}(e,t),o3e(e)&&a3e(e)}async function Uge(e,t){const n=pn(e);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const r=o_(n);n.L_.add(3),await VR(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await UR(n)}async function L8t(e,t){const n=pn(e);t?(n.L_.delete(2),await UR(n)):t||(n.L_.add(2),await VR(n),n.q_.set("Unknown"))}function XS(e){return e.K_||(e.K_=function(n,r,i){const s=pn(n);return s.w_(),new x8t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Eo:A8t.bind(null,e),Ro:I8t.bind(null,e),mo:k8t.bind(null,e),d_:R8t.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),Cte(e)?Tte(e):e.q_.set("Unknown")):(await e.K_.stop(),i3e(e))})),e.K_}function Ey(e){return e.U_||(e.U_=function(n,r,i){const s=pn(n);return s.w_(),new E8t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:O8t.bind(null,e),mo:$8t.bind(null,e),f_:D8t.bind(null,e),g_:M8t.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await G4(e)):(await e.U_.stop(),e.O_.length>0&&(It("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ate{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new wm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new Ate(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new vt(Ue.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ite(e,t){if(Jm("AsyncQueue",`${t}: ${e}`),jR(e))return new vt(Ue.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Ut.comparator(n.key,r.key):(n,r)=>Ut.comparator(n.key,r.key),this.keyedMap=c2(),this.sortedSet=new Oi(this.comparator)}static emptySet(t){return new Cx(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Cx)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Cx;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vge{constructor(){this.W_=new Oi(Ut.comparator)}track(t){const n=t.doc.key,r=this.W_.get(n);r?t.type!==0&&r.type===3?this.W_=this.W_.insert(n,t):t.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.W_=this.W_.remove(n):t.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:t.doc}):cn():this.W_=this.W_.insert(n,t)}G_(){const t=[];return this.W_.inorderTraversal((n,r)=>{t.push(r)}),t}}class CE{constructor(t,n,r,i,s,o,a,l,u){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new CE(t,n,Cx.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&B4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8t{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class j8t{constructor(){this.queries=Hge(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=pn(n),s=i.queries;i.queries=Hge(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new vt(Ue.ABORTED,"Firestore shutting down"))}}function Hge(){return new KS(e=>R$e(e),B4)}async function l3e(e,t){const n=pn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new F8t,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Ite(o,`Initialization of query '${ww(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&kte(n)}async function u3e(e,t){const n=pn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(t);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function B8t(e,t){const n=pn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&kte(n)}function z8t(e,t,n){const r=pn(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function kte(e){e.Y_.forEach(t=>{t.next()})}var $q,qge;(qge=$q||($q={})).ea="default",qge.Cache="cache";class c3e{constructor(t,n,r){this.query=t,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new CE(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.na?this.ia(t)&&(this.ta.next(t),n=!0):this.sa(t,this.onlineState)&&(this.oa(t),n=!0),this.ra=t,n}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),n=!0),n}sa(t,n){if(!t.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(t){t=CE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==$q.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3e{constructor(t){this.key=t}}class f3e{constructor(t){this.key=t}}class U8t{constructor(t,n){this.query=t,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=zn(),this.mutatedKeys=zn(),this.Aa=P$e(t),this.Ra=new Cx(this.Aa)}get Va(){return this.Ta}ma(t,n){const r=n?n.fa:new Vge,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,d)=>{const f=i.get(c),h=z4(this.query,d)?d:null,p=!!f&&this.mutatedKeys.has(f.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;f&&h?f.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.ga(f,h)||(r.track({type:2,doc:h}),g=!0,(l&&this.Aa(h,l)>0||u&&this.Aa(h,u)<0)&&(a=!0)):!f&&h?(r.track({type:0,doc:h}),g=!0):f&&!h&&(r.track({type:1,doc:f}),g=!0,(l||u)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const o=t.fa.G_();o.sort((c,d)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return cn()}};return m(h)-m(p)}(c.type,d.type)||this.Aa(c.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new CE(this.query,t.Ra,s,o,t.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Vge,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=zn(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return t.forEach(r=>{this.da.has(r)||n.push(new f3e(r))}),this.da.forEach(r=>{t.has(r)||n.push(new d3e(r))}),n}ba(t){this.Ta=t.Ts,this.da=zn();const n=this.ma(t.documents);return this.applyChanges(n,!0)}Da(){return CE.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class V8t{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class H8t{constructor(t){this.key=t,this.va=!1}}class q8t{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new KS(a=>R$e(a),B4),this.Ma=new Map,this.xa=new Set,this.Oa=new Oi(Ut.comparator),this.Na=new Map,this.La=new _te,this.Ba={},this.ka=new Map,this.qa=TE.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function W8t(e,t,n=!0){const r=v3e(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await h3e(r,t,n,!0),i}async function G8t(e,t){const n=v3e(e);await h3e(n,t,!0,!1)}async function h3e(e,t,n,r){const i=await m8t(e.localStore,Mh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await Y8t(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&n3e(e.remoteStore,i),a}async function Y8t(e,t,n,r,i){e.Ka=(d,f,h)=>async function(m,g,y,v){let _=g.view.ma(y);_.ns&&(_=await jge(m.localStore,g.query,!1).then(({documents:E})=>g.view.ma(E,_)));const w=v&&v.targetChanges.get(g.targetId),x=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(_,m.isPrimaryClient,w,x);return Gge(m,g.targetId,S.wa),S.snapshot}(e,d,f,h);const s=await jge(e.localStore,t,!0),o=new U8t(t,s.Ts),a=o.ma(s.documents),l=zR.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),u=o.applyChanges(a,e.isPrimaryClient,l);Gge(e,n,u.wa);const c=new V8t(t,n,o);return e.Fa.set(t,c),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),u.snapshot}async function K8t(e,t,n){const r=pn(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!B4(o,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Mq(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ete(r.remoteStore,i.targetId),Lq(r,i.targetId)}).catch(FR)):(Lq(r,i.targetId),await Mq(r.localStore,i.targetId,!0))}async function X8t(e,t){const n=pn(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ete(n.remoteStore,r.targetId))}async function Q8t(e,t,n){const r=iBt(e);try{const i=await function(o,a){const l=pn(o),u=Ms.now(),c=a.reduce((h,p)=>h.add(p.key),zn());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Zm(),m=zn();return l.cs.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,p)).next(g=>{d=g;const y=[];for(const v of a){const _=b5t(v,d.get(v.key).overlayedDocument);_!=null&&y.push(new rv(v.key,_,x$e(_.value.mapValue),Vl.exists(!0)))}return l.mutationQueue.addMutationBatch(h,u,y,a)}).next(g=>{f=g;const y=g.applyToLocalDocumentSet(d,m);return l.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:f.batchId,changes:O$e(d)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Oi(lr)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await HR(r,i.changes),await G4(r.remoteStore)}catch(i){const s=Ite(i,"Failed to persist write");n.reject(s)}}async function p3e(e,t){const n=pn(e);try{const r=await f8t(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Kr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Kr(o.va):i.removedDocuments.size>0&&(Kr(o.va),o.va=!1))}),await HR(n,r,t)}catch(r){await FR(r)}}function Wge(e,t,n){const r=pn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=pn(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const f of d.j_)f.Z_(a)&&(u=!0)}),u&&kte(l)}(r.eventManager,t),i.length&&r.Ca.d_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function J8t(e,t,n){const r=pn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let o=new Oi(Ut.comparator);o=o.insert(s,oa.newNoDocument(s,mn.min()));const a=zn().add(s),l=new q4(mn.min(),new Map,new Oi(lr),o,a);await p3e(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(t),Rte(r)}else await Mq(r.localStore,t,!1).then(()=>Lq(r,t,n)).catch(FR)}async function Z8t(e,t){const n=pn(e),r=t.batch.batchId;try{const i=await d8t(n.localStore,t);g3e(n,r,null),m3e(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await HR(n,i)}catch(i){await FR(i)}}async function eBt(e,t,n){const r=pn(e);try{const i=await function(o,a){const l=pn(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(Kr(d!==null),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,t);g3e(r,t,n),m3e(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await HR(r,i)}catch(i){await FR(i)}}function m3e(e,t){(e.ka.get(t)||[]).forEach(n=>{n.resolve()}),e.ka.delete(t)}function g3e(e,t,n){const r=pn(e);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function Lq(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(r=>{e.La.containsKey(r)||y3e(e,r)})}function y3e(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);n!==null&&(Ete(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Rte(e))}function Gge(e,t,n){for(const r of n)r instanceof d3e?(e.La.addReference(r.key,t),tBt(e,r)):r instanceof f3e?(It("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||y3e(e,r.key)):cn()}function tBt(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(It("SyncEngine","New document in limbo: "+n),e.xa.add(r),Rte(e))}function Rte(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new Ut(ci.fromString(t)),r=e.qa.next();e.Na.set(r,new H8t(n)),e.Oa=e.Oa.insert(n,r),n3e(e.remoteStore,new v0(Mh(mte(n.path)),r,"TargetPurposeLimboResolution",ute.oe))}}async function HR(e,t,n){const r=pn(e),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,t,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=xte.Wi(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const c=pn(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Qe.forEach(u,f=>Qe.forEach(f.$i,h=>c.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>Qe.forEach(f.Ui,h=>c.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!jR(d))throw d;It("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const h=c.os.get(f),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.os=c.os.insert(f,m)}}}(r.localStore,s))}async function nBt(e,t){const n=pn(e);if(!n.currentUser.isEqual(t)){It("SyncEngine","User change. New user:",t.toKey());const r=await J$e(n.localStore,t);n.currentUser=t,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new vt(Ue.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await HR(n,r.hs)}}function rBt(e,t){const n=pn(e),r=n.Na.get(t);if(r&&r.va)return zn().add(r.key);{let i=zn();const s=n.Ma.get(t);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function v3e(e){const t=pn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=p3e.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=rBt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=J8t.bind(null,t),t.Ca.d_=B8t.bind(null,t.eventManager),t.Ca.$a=z8t.bind(null,t.eventManager),t}function iBt(e){const t=pn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Z8t.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=eBt.bind(null,t),t}class Yge{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=W4(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return c8t(this.persistence,new l8t,t.initialUser,this.serializer)}createPersistence(t){return new s8t(wte.Zr,this.serializer)}createSharedClientState(t){return new y8t}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class sBt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wge(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nBt.bind(null,this.syncEngine),await L8t(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new j8t}()}createDatastore(t){const n=W4(t.databaseInfo.databaseId),r=function(s){return new w8t(s)}(t.databaseInfo);return function(s,o,a,l){return new S8t(s,o,a,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new C8t(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Wge(this.syncEngine,n,0),function(){return zge.D()?new zge:new v8t}())}createSyncEngine(t,n){return function(i,s,o,a,l,u,c){const d=new q8t(i,s,o,a,l,u);return c&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const s=pn(i);It("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await VR(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3e{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ga(this.observer.next,t)}error(t){this.observer.error?this.Ga(this.observer.error,t):Jm("Uncaught Error in snapshot listener:",t.toString())}za(){this.muted=!0}Ga(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oBt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=El.UNAUTHENTICATED,this.clientId=b$e.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{It("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(It("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new vt(Ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new wm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Ite(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function X9(e,t){e.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await J$e(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Kge(e,t){e.asyncQueue.verifyOperationInProgress();const n=await _3e(e);It("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Uge(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Uge(t.remoteStore,i)),e._onlineComponents=t}function aBt(e){return e.name==="FirebaseError"?e.code===Ue.FAILED_PRECONDITION||e.code===Ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function _3e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{await X9(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!aBt(n))throw n;YI("Error using user provided cache. Falling back to memory cache: "+n),await X9(e,new Yge)}}else It("FirestoreClient","Using default OfflineComponentProvider"),await X9(e,new Yge);return e._offlineComponents}async function Pte(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),await Kge(e,e._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),await Kge(e,new sBt))),e._onlineComponents}function lBt(e){return _3e(e).then(t=>t.persistence)}function uBt(e){return Pte(e).then(t=>t.remoteStore)}function cBt(e){return Pte(e).then(t=>t.syncEngine)}async function w3e(e){const t=await Pte(e),n=t.eventManager;return n.onListen=W8t.bind(null,t.syncEngine),n.onUnlisten=K8t.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=G8t.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=X8t.bind(null,t.syncEngine),n}function dBt(e){return e.asyncQueue.enqueue(async()=>{const t=await lBt(e),n=await uBt(e);return t.setNetworkEnabled(!0),function(i){const s=pn(i);return s.L_.delete(0),UR(s)}(n)})}function fBt(e,t,n={}){const r=new wm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new b3e({next:f=>{o.enqueueAndForget(()=>u3e(s,d));const h=f.docs.has(a);!h&&f.fromCache?u.reject(new vt(Ue.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?u.reject(new vt(Ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new c3e(mte(a.path),c,{includeMetadataChanges:!0,_a:!0});return l3e(s,d)}(await w3e(e),e.asyncQueue,t,n,r)),r.promise}function hBt(e,t,n={}){const r=new wm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new b3e({next:f=>{o.enqueueAndForget(()=>u3e(s,d)),f.fromCache&&l.source==="server"?u.reject(new vt(Ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new c3e(a,c,{includeMetadataChanges:!0,_a:!0});return l3e(s,d)}(await w3e(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3e(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xge=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3e(e,t,n){if(!n)throw new vt(Ue.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function pBt(e,t,n,r){if(t===!0&&r===!0)throw new vt(Ue.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Qge(e){if(!Ut.isDocumentKey(e))throw new vt(Ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Jge(e){if(Ut.isDocumentKey(e))throw new vt(Ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Y4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":cn()}function uf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new vt(Ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Y4(e);throw new vt(Ue.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zge{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new vt(Ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new vt(Ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}pBt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x3e((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new vt(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new vt(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new vt(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Nte{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zge({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new vt(Ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new vt(Ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zge(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ijt;switch(r.type){case"firstParty":return new Pjt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new vt(Ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xge.get(n);r&&(It("ComponentProvider","Removing Datastore"),Xge.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new a_(this.firestore,t,this._query)}}class Wa{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new W0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Wa(this.firestore,t,this._key)}}class W0 extends a_{constructor(t,n,r){super(t,n,mte(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Wa(this.firestore,null,new Ut(t))}withConverter(t){return new W0(this.firestore,t,this._path)}}function cd(e,t,...n){if(e=ni(e),E3e("collection","path",t),e instanceof Nte){const r=ci.fromString(t,...n);return Jge(r),new W0(e,null,r)}{if(!(e instanceof Wa||e instanceof W0))throw new vt(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ci.fromString(t,...n));return Jge(r),new W0(e.firestore,null,r)}}function ws(e,t,...n){if(e=ni(e),arguments.length===1&&(t=b$e.newId()),E3e("doc","path",t),e instanceof Nte){const r=ci.fromString(t,...n);return Qge(r),new Wa(e,null,new Ut(r))}{if(!(e instanceof Wa||e instanceof W0))throw new vt(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ci.fromString(t,...n));return Qge(r),new Wa(e.firestore,e instanceof W0?e.converter:null,new Ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mBt{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new e3e(this,"async_queue_retry"),this.Eu=()=>{const n=K9();n&&It("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const t=K9();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.du(),this.Au(t)}enterRestrictedMode(t){if(!this.cu){this.cu=!0,this.Iu=t||!1;const n=K9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(t){if(this.du(),this.cu)return new Promise(()=>{});const n=new wm;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.uu.push(t),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(t){if(!jR(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(t){const n=this.au.then(()=>(this.Pu=!0,t().catch(r=>{this.hu=r,this.Pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Jm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(t,n,r){this.du(),this.Tu.indexOf(t)>-1&&(n=0);const i=Ate.createAndSchedule(this,t,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&cn()}verifyOperationInProgress(){}async mu(){let t;do t=this.au,await t;while(t!==this.au)}fu(t){for(const n of this.lu)if(n.timerId===t)return!0;return!1}gu(t){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.mu()})}pu(t){this.Tu.push(t)}Vu(t){const n=this.lu.indexOf(t);this.lu.splice(n,1)}}class iv extends Nte{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new mBt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||S3e(this),this._firestoreClient.terminate()}}function gBt(e,t,n){n||(n="(default)");const r=qS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(qI(s,t))return i;throw new vt(Ue.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new vt(Ue.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new vt(Ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function qR(e){return e._firestoreClient||S3e(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function S3e(e){var t,n,r;const i=e._freezeSettings(),s=function(a,l,u,c){return new Hjt(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,x3e(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new oBt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function yBt(e){return dBt(qR(e=uf(e,iv)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new AE(No.fromBase64String(t))}catch(n){throw new vt(Ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new AE(No.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new vt(Ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ote=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new vt(Ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new vt(Ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return lr(this._lat,t._lat)||lr(this._long,t._long)}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dte{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vBt=/^__.*__$/;class bBt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new rv(t,this.data,this.fieldMask,n,this.fieldTransforms):new BR(t,this.data,n,this.fieldTransforms)}}class T3e{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new rv(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function C3e(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw cn()}}class Mte{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(t){return new Mte(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Su({path:r,Du:!1});return i.vu(t),i}Cu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(t){return this.Su({path:void 0,Du:!0})}Mu(t){return tL(t,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let t=0;t<this.path.length;t++)this.vu(this.path.get(t))}vu(t){if(t.length===0)throw this.Mu("Document fields must not be empty");if(C3e(this.wu)&&vBt.test(t))throw this.Mu('Document fields cannot begin and end with "__"')}}class _Bt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||W4(t)}Nu(t,n,r,i=!1){return new Mte({wu:t,methodName:n,Ou:r,path:wo.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function X4(e){const t=e._freezeSettings(),n=W4(e._databaseId);return new _Bt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function A3e(e,t,n,r,i,s={}){const o=e.Nu(s.merge||s.mergeFields?2:0,t,n,i);Lte("Data must be an object, but it was:",o,r);const a=R3e(r,o);let l,u;if(s.merge)l=new Cu(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=Fq(t,d,n);if(!o.contains(f))throw new vt(Ue.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);N3e(c,f)||c.push(f)}l=new Cu(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new bBt(new Rl(a),l,u)}class Q4 extends K4{_toFieldTransform(t){if(t.wu!==2)throw t.wu===1?t.Mu(`${this._methodName}() can only appear at the top level of your update data`):t.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Q4}}class $te extends K4{_toFieldTransform(t){return new m5t(t.path,new ek)}isEqual(t){return t instanceof $te}}function I3e(e,t,n,r){const i=e.Nu(1,t,n);Lte("Data must be an object, but it was:",i,r);const s=[],o=Rl.empty();s_(r,(l,u)=>{const c=Fte(t,l,n);u=ni(u);const d=i.Cu(c);if(u instanceof Q4)s.push(c);else{const f=GR(u,d);f!=null&&(s.push(c),o.set(c,f))}});const a=new Cu(s);return new T3e(o,a,i.fieldTransforms)}function k3e(e,t,n,r,i,s){const o=e.Nu(1,t,n),a=[Fq(t,r,n)],l=[i];if(s.length%2!=0)throw new vt(Ue.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Fq(t,s[f])),l.push(s[f+1]);const u=[],c=Rl.empty();for(let f=a.length-1;f>=0;--f)if(!N3e(u,a[f])){const h=a[f];let p=l[f];p=ni(p);const m=o.Cu(h);if(p instanceof Q4)u.push(h);else{const g=GR(p,m);g!=null&&(u.push(h),c.set(h,g))}}const d=new Cu(u);return new T3e(c,d,o.fieldTransforms)}function wBt(e,t,n,r=!1){return GR(n,e.Nu(r?4:3,t))}function GR(e,t){if(P3e(e=ni(e)))return Lte("Unsupported field value:",t,e),R3e(e,t);if(e instanceof K4)return function(r,i){if(!C3e(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Du&&t.wu!==4)throw t.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=GR(a,i.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ni(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return f5t(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ms.fromDate(r);return{timestampValue:Z3(i.serializer,s)}}if(r instanceof Ms){const s=new Ms(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Z3(i.serializer,s)}}if(r instanceof Ote)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof AE)return{bytesValue:q$e(i.serializer,r._byteString)};if(r instanceof Wa){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:bte(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Dte)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return gte(a.serializer,l)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Y4(r)}`)}(e,t)}function R3e(e,t){const n={};return _$e(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):s_(e,(r,i)=>{const s=GR(i,t.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function P3e(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ms||e instanceof Ote||e instanceof AE||e instanceof Wa||e instanceof K4||e instanceof Dte)}function Lte(e,t,n){if(!P3e(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Y4(n);throw r==="an object"?t.Mu(e+" a custom object"):t.Mu(e+" "+r)}}function Fq(e,t,n){if((t=ni(t))instanceof WR)return t._internalPath;if(typeof t=="string")return Fte(e,t);throw tL("Field path arguments must be of type string or ",e,!1,void 0,n)}const xBt=new RegExp("[~\\*/\\[\\]]");function Fte(e,t,n){if(t.search(xBt)>=0)throw tL(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new WR(...t.split("."))._internalPath}catch{throw tL(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function tL(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new vt(Ue.INVALID_ARGUMENT,a+e+l)}function N3e(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3e{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new EBt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(J4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class EBt extends O3e{data(){return super.data()}}function J4(e,t){return typeof t=="string"?Fte(e,t):t instanceof WR?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SBt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new vt(Ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jte{}class D3e extends jte{}function e0e(e,t,...n){let r=[];t instanceof jte&&r.push(t),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Bte).length,a=s.filter(l=>l instanceof Z4).length;if(o>1||o>0&&a>0)throw new vt(Ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class Z4 extends D3e{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Z4(t,n,r)}_apply(t){const n=this._parse(t);return M3e(t._query,n),new a_(t.firestore,t.converter,kq(t._query,n))}_parse(t){const n=X4(t.firestore);return function(s,o,a,l,u,c,d){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new vt(Ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){n0e(d,c);const h=[];for(const p of d)h.push(t0e(l,s,p));f={arrayValue:{values:h}}}else f=t0e(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||n0e(d,c),f=wBt(a,o,d,c==="in"||c==="not-in");return ys.create(u,c,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function TBt(e,t,n){const r=t,i=J4("where",e);return Z4._create(i,r,n)}class Bte extends jte{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Bte(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:lf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)M3e(o,l),o=kq(o,l)}(t._query,n),new a_(t.firestore,t.converter,kq(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zte extends D3e{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new zte(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new vt(Ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new vt(Ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ZI(s,o)}(t._query,this._field,this._direction);return new a_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new YS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function CBt(e,t="asc"){const n=t,r=J4("orderBy",e);return zte._create(r,n)}function t0e(e,t,n){if(typeof(n=ni(n))=="string"){if(n==="")throw new vt(Ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!k$e(t)&&n.indexOf("/")!==-1)throw new vt(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ci.fromString(n));if(!Ut.isDocumentKey(r))throw new vt(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xge(e,new Ut(r))}if(n instanceof Wa)return xge(e,n._key);throw new vt(Ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Y4(n)}.`)}function n0e(e,t){if(!Array.isArray(e)||e.length===0)throw new vt(Ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function M3e(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new vt(Ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new vt(Ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class ABt{convertValue(t,n="none"){switch(Eb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ns(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(xb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw cn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return s_(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(t){var n,r,i;const s=(i=(r=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ns(o.doubleValue));return new Dte(s)}convertGeoPoint(t){return new Ote(ns(t.latitude),ns(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=dte(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(XI(t));default:return null}}convertTimestamp(t){const n=xy(t);return new Ms(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ci.fromString(t);Kr(Q$e(r));const i=new QI(r.get(1),r.get(3)),s=new Ut(r.popFirst(5));return i.isEqual(n)||Jm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3e(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class L3e extends O3e{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new qD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(J4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class qD extends L3e{data(t={}){return super.data(t)}}class IBt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new f2(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new qD(this._firestore,this._userDataWriter,r.key,r,new f2(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new vt(Ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new qD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new f2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new qD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new f2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:kBt(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function kBt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return cn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q9(e){e=uf(e,Wa);const t=uf(e.firestore,iv);return fBt(qR(t),e._key).then(n=>NBt(t,e,n))}class F3e extends ABt{constructor(t){super(),this.firestore=t}convertBytes(t){return new AE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Wa(this.firestore,null,n)}}function rC(e){e=uf(e,a_);const t=uf(e.firestore,iv),n=qR(t),r=new F3e(t);return SBt(e._query),hBt(n,e._query).then(i=>new IBt(t,r,e,i))}function cu(e,t,n){e=uf(e,Wa);const r=uf(e.firestore,iv),i=$3e(e.converter,t,n);return ej(r,[A3e(X4(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Vl.none())])}function RBt(e,t,n,...r){e=uf(e,Wa);const i=uf(e.firestore,iv),s=X4(i);let o;return o=typeof(t=ni(t))=="string"||t instanceof WR?k3e(s,"updateDoc",e._key,t,n,r):I3e(s,"updateDoc",e._key,t),ej(i,[o.toMutation(e._key,Vl.exists(!0))])}function PBt(e){return ej(uf(e.firestore,iv),[new H4(e._key,Vl.none())])}function ej(e,t){return function(r,i){const s=new wm;return r.asyncQueue.enqueueAndForget(async()=>Q8t(await cBt(r),i,s)),s.promise}(qR(e),t)}function NBt(e,t,n){const r=n.docs.get(t._key),i=new F3e(e);return new L3e(e,i,t._key,r,new f2(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OBt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=X4(t)}set(t,n,r){this._verifyNotCommitted();const i=J9(t,this._firestore),s=$3e(i.converter,n,r),o=A3e(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Vl.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=J9(t,this._firestore);let o;return o=typeof(n=ni(n))=="string"||n instanceof WR?k3e(this._dataReader,"WriteBatch.update",s._key,n,r,i):I3e(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Vl.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=J9(t,this._firestore);return this._mutations=this._mutations.concat(new H4(n._key,Vl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new vt(Ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function J9(e,t){if((e=ni(e)).firestore!==t)throw new vt(Ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function DBt(){return new $te("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0e(e){return qR(e=uf(e,iv)),new OBt(e,t=>ej(e,t))}(function(t,n=!0){(function(i){GS=i})(i_),Xm(new Gh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new iv(new kjt(r.getProvider("auth-internal")),new Ojt(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new vt(Ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new QI(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Xd(yge,"4.7.1",t),Xd(yge,"4.7.1","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jq=new Map,j3e={activated:!1,tokenObservers:[]},MBt={initialized:!1,enabled:!1};function $s(e){return jq.get(e)||Object.assign({},j3e)}function $Bt(e,t){return jq.set(e,t),jq.get(e)}function tj(){return MBt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3e="https://content-firebaseappcheck.googleapis.com/v1",LBt="exchangeRecaptchaV3Token",FBt="exchangeDebugToken",i0e={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},jBt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BBt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new HI,this.pending.promise.catch(n=>{}),await zBt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new HI,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function zBt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UBt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},$l=new HS("appCheck","AppCheck",UBt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0e(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Ute(e){if(!$s(e).activated)throw $l.create("use-before-activation",{appName:e.name})}function z3e(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=uO(n)+"d:"),r&&(o+=uO(r)+"h:"),o+=uO(i)+"m:"+uO(s)+"s",o}function uO(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vte({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(d){throw $l.create("fetch-network-error",{originalErrorMessage:d==null?void 0:d.message})}if(o.status!==200)throw $l.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(d){throw $l.create("fetch-parse-error",{originalErrorMessage:d==null?void 0:d.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw $l.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=Number(l[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+u,issuedAtTimeMillis:c}}function VBt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${B3e}/projects/${n}/apps/${r}:${LBt}?key=${i}`,body:{recaptcha_v3_token:t}}}function U3e(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${B3e}/projects/${n}/apps/${r}:${FBt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HBt="firebase-app-check-database",qBt=1,rk="firebase-app-check-store",V3e="debug-token";let cO=null;function H3e(){return cO||(cO=new Promise((e,t)=>{try{const n=indexedDB.open(HBt,qBt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t($l.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(rk,{keyPath:"compositeKey"})}}}catch(n){t($l.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),cO)}function WBt(e){return W3e(G3e(e))}function GBt(e,t){return q3e(G3e(e),t)}function YBt(e){return q3e(V3e,e)}function KBt(){return W3e(V3e)}async function q3e(e,t){const r=(await H3e()).transaction(rk,"readwrite"),s=r.objectStore(rk).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var u;a($l.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})}async function W3e(e){const n=(await H3e()).transaction(rk,"readonly"),i=n.objectStore(rk).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const l=a.target.result;s(l?l.value:void 0)},n.onerror=a=>{var l;o($l.create("storage-get",{originalErrorMessage:(l=a.target.error)===null||l===void 0?void 0:l.message}))}})}function G3e(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=new O4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XBt(e){if(Vee()){let t;try{t=await WBt(e)}catch(n){ik.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function Z9(e,t){return Vee()?GBt(e,t).catch(n=>{ik.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function QBt(){let e;try{e=await KBt()}catch{}if(e)return e;{const t=Q3t();return YBt(t).catch(n=>ik.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hte(){return tj().enabled}async function qte(){const e=tj();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function JBt(){const e=cMe(),t=tj();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new HI;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(QBt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZBt={error:"UNKNOWN_ERROR"};function e9t(e){return Uee.encodeString(JSON.stringify(e),!1)}async function Bq(e,t=!1){const n=e.app;Ute(n);const r=$s(n);let i=r.token,s;if(i&&!Ww(i)&&(r.token=void 0,i=void 0),!i){const l=await r.cachedTokenPromise;l&&(Ww(l)?i=l:await Z9(n,void 0))}if(!t&&i&&Ww(i))return{token:i.token};let o=!1;if(Hte()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Vte(U3e(n,await qte()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const l=await r.exchangeTokenPromise;return await Z9(n,l),r.token=l,{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await $s(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?ik.warn(l.message):ik.error(l),s=l}let a;return i?s?Ww(i)?a={token:i.token,internalError:s}:a=a0e(s):(a={token:i.token},r.token=i,await Z9(n,i)):a=a0e(s),o&&X3e(n,a),a}async function t9t(e){const t=e.app;Ute(t);const{provider:n}=$s(t);if(Hte()){const r=await qte(),{token:i}=await Vte(U3e(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function Y3e(e,t,n,r){const{app:i}=e,s=$s(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Ww(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),o0e(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>o0e(e))}function K3e(e,t){const n=$s(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function o0e(e){const{app:t}=e,n=$s(t);let r=n.tokenRefresher;r||(r=n9t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function n9t(e){const{app:t}=e;return new BBt(async()=>{const n=$s(t);let r;if(n.token?r=await Bq(e,!0):r=await Bq(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=$s(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},i0e.RETRIAL_MIN_WAIT,i0e.RETRIAL_MAX_WAIT)}function X3e(e,t){const n=$s(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Ww(e){return e.expireTimeMillis-Date.now()>0}function a0e(e){return{token:e9t(ZBt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=$s(this.app);for(const n of t)K3e(this.app,n.next);return Promise.resolve()}}function i9t(e,t){return new r9t(e,t)}function s9t(e){return{getToken:t=>Bq(e,t),getLimitedUseToken:()=>t9t(e),addTokenListener:t=>Y3e(e,"INTERNAL",t),removeTokenListener:t=>K3e(e.app,t)}}const o9t="@firebase/app-check",a9t="0.8.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9t="https://www.google.com/recaptcha/api.js";function u9t(e,t){const n=new HI,r=$s(e);r.reCAPTCHAState={initialized:n};const i=c9t(e),s=s0e(!1);return s?l0e(e,t,s,i,n):h9t(()=>{const o=s0e(!1);if(!o)throw new Error("no recaptcha");l0e(e,t,o,i,n)}),n.promise}function l0e(e,t,n,r,i){n.ready(()=>{f9t(e,t,n,r),i.resolve(n)})}function c9t(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function d9t(e){Ute(e);const n=await $s(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=$s(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function f9t(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{$s(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{$s(e).reCAPTCHAState.succeeded=!1}}),s=$s(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function h9t(e){const t=document.createElement("script");t.src=l9t,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wte{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;m9t(this._throttleData);const i=await d9t(this._app).catch(o=>{throw $l.create("recaptcha-error")});if(!(!((t=$s(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw $l.create("recaptcha-error");let s;try{s=await Vte(VBt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=p9t(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),$l.create("throttled",{time:z3e(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=qS(t,"heartbeat"),u9t(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Wte?this._siteKey===t._siteKey:!1}}function p9t(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+jBt,httpStatus:e};{const n=t?t.backoffCount:0,r=nLt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function m9t(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw $l.create("throttled",{time:z3e(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9t(e=qee(),t){e=ni(e);const n=qS(e,"app-check");if(tj().initialized||JBt(),Hte()&&qte().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw $l.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return y9t(e,t.provider,t.isTokenAutoRefreshEnabled),$s(e).isTokenAutoRefreshEnabled&&Y3e(r,"INTERNAL",()=>{}),r}function y9t(e,t,n){const r=$Bt(e,Object.assign({},j3e));r.activated=!0,r.provider=t,r.cachedTokenPromise=XBt(e).then(i=>(i&&Ww(i)&&(r.token=i,X3e(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const v9t="app-check",u0e="app-check-internal";function b9t(){Xm(new Gh(v9t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return i9t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(u0e).initialize()})),Xm(new Gh(u0e,e=>{const t=e.getProvider("app-check").getImmediate();return s9t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Xd(o9t,a9t)}b9t();function dO(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Q3e={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(u,c){if(!i[u]){if(!r[u]){var d=typeof dO=="function"&&dO;if(!c&&d)return d(u,!0);if(a)return a(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var h=i[u]={exports:{}};r[u][0].call(h.exports,function(p){var m=r[u][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[u].exports}for(var a=typeof dO=="function"&&dO,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var l=0,u=new o(p),c=s.document.createTextNode("");u.observe(c,{characterData:!0}),a=function(){c.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var d=new s.MessageChannel;d.port1.onmessage=p,a=function(){d.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var f,h=[];function p(){f=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}f=!1}r.exports=m;function m(g){h.push(g)===1&&!f&&a()}}).call(this,typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];r.exports=d;function d(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,x!==o&&m(this,x)}d.prototype.catch=function(x){return this.then(null,x)},d.prototype.then=function(x,S){if(typeof x!="function"&&this.state===u||typeof S!="function"&&this.state===l)return this;var E=new this.constructor(o);if(this.state!==c){var T=this.state===u?x:S;h(E,T,this.outcome)}else this.queue.push(new f(E,x,S));return E};function f(x,S,E){this.promise=x,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}f.prototype.callFulfilled=function(x){a.resolve(this.promise,x)},f.prototype.otherCallFulfilled=function(x){h(this.promise,this.onFulfilled,x)},f.prototype.callRejected=function(x){a.reject(this.promise,x)},f.prototype.otherCallRejected=function(x){h(this.promise,this.onRejected,x)};function h(x,S,E){s(function(){var T;try{T=S(E)}catch(I){return a.reject(x,I)}T===x?a.reject(x,new TypeError("Cannot resolve promise with itself")):a.resolve(x,T)})}a.resolve=function(x,S){var E=g(p,S);if(E.status==="error")return a.reject(x,E.value);var T=E.value;if(T)m(x,T);else{x.state=u,x.outcome=S;for(var I=-1,k=x.queue.length;++I<k;)x.queue[I].callFulfilled(S)}return x},a.reject=function(x,S){x.state=l,x.outcome=S;for(var E=-1,T=x.queue.length;++E<T;)x.queue[E].callRejected(S);return x};function p(x){var S=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof S=="function")return function(){S.apply(x,arguments)}}function m(x,S){var E=!1;function T(L){E||(E=!0,a.reject(x,L))}function I(L){E||(E=!0,a.resolve(x,L))}function k(){S(I,T)}var P=g(k);P.status==="error"&&T(P.value)}function g(x,S){var E={};try{E.value=x(S),E.status="success"}catch(T){E.status="error",E.value=T}return E}d.resolve=y;function y(x){return x instanceof this?x:a.resolve(new this(o),x)}d.reject=v;function v(x){var S=new this(o);return a.reject(S,x)}d.all=_;function _(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,T=!1;if(!E)return this.resolve([]);for(var I=new Array(E),k=0,P=-1,L=new this(o);++P<E;)R(x[P],P);return L;function R($,D){S.resolve($).then(O,function(F){T||(T=!0,a.reject(L,F))});function O(F){I[D]=F,++k===E&&!T&&(T=!0,a.resolve(L,I))}}}d.race=w;function w(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,T=!1;if(!E)return this.resolve([]);for(var I=-1,k=new this(o);++I<E;)P(x[I]);return k;function P(L){S.resolve(L).then(function(R){T||(T=!0,a.resolve(k,R))},function(R){T||(T=!0,a.reject(k,R))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof qi<"u"?qi:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K};function o(K,de){if(!(K instanceof de))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=a();function u(){try{if(!l||!l.open)return!1;var K=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),de=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!K||de)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(K,de){K=K||[],de=de||{};try{return new Blob(K,de)}catch(me){if(me.name!=="TypeError")throw me;for(var ee=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,ye=new ee,ve=0;ve<K.length;ve+=1)ye.append(K[ve]);return ye.getBlob(de.type)}}typeof Promise>"u"&&n(3);var d=Promise;function f(K,de){de&&K.then(function(ee){de(null,ee)},function(ee){de(ee)})}function h(K,de,ee){typeof de=="function"&&K.then(de),typeof ee=="function"&&K.catch(ee)}function p(K){return typeof K!="string"&&(console.warn(K+" used as a key, but it is not a string."),K=String(K)),K}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},_=Object.prototype.toString,w="readonly",x="readwrite";function S(K){for(var de=K.length,ee=new ArrayBuffer(de),ye=new Uint8Array(ee),ve=0;ve<de;ve++)ye[ve]=K.charCodeAt(ve);return ee}function E(K){return new d(function(de){var ee=K.transaction(g,x),ye=c([""]);ee.objectStore(g).put(ye,"key"),ee.onabort=function(ve){ve.preventDefault(),ve.stopPropagation(),de(!1)},ee.oncomplete=function(){var ve=navigator.userAgent.match(/Chrome\/(\d+)/),me=navigator.userAgent.match(/Edge\//);de(me||!ve||parseInt(ve[1],10)>=43)}}).catch(function(){return!1})}function T(K){return typeof y=="boolean"?d.resolve(y):E(K).then(function(de){return y=de,y})}function I(K){var de=v[K.name],ee={};ee.promise=new d(function(ye,ve){ee.resolve=ye,ee.reject=ve}),de.deferredOperations.push(ee),de.dbReady?de.dbReady=de.dbReady.then(function(){return ee.promise}):de.dbReady=ee.promise}function k(K){var de=v[K.name],ee=de.deferredOperations.pop();if(ee)return ee.resolve(),ee.promise}function P(K,de){var ee=v[K.name],ye=ee.deferredOperations.pop();if(ye)return ye.reject(de),ye.promise}function L(K,de){return new d(function(ee,ye){if(v[K.name]=v[K.name]||q(),K.db)if(de)I(K),K.db.close();else return ee(K.db);var ve=[K.name];de&&ve.push(K.version);var me=l.open.apply(l,ve);de&&(me.onupgradeneeded=function(Fe){var qe=me.result;try{qe.createObjectStore(K.storeName),Fe.oldVersion<=1&&qe.createObjectStore(g)}catch(We){if(We.name==="ConstraintError")console.warn('The database "'+K.name+'" has been upgraded from version '+Fe.oldVersion+" to version "+Fe.newVersion+', but the storage "'+K.storeName+'" already exists.');else throw We}}),me.onerror=function(Fe){Fe.preventDefault(),ye(me.error)},me.onsuccess=function(){var Fe=me.result;Fe.onversionchange=function(qe){qe.target.close()},ee(Fe),k(K)}})}function R(K){return L(K,!1)}function $(K){return L(K,!0)}function D(K,de){if(!K.db)return!0;var ee=!K.db.objectStoreNames.contains(K.storeName),ye=K.version<K.db.version,ve=K.version>K.db.version;if(ye&&(K.version!==de&&console.warn('The database "'+K.name+`" can't be downgraded from version `+K.db.version+" to version "+K.version+"."),K.version=K.db.version),ve||ee){if(ee){var me=K.db.version+1;me>K.version&&(K.version=me)}return!0}return!1}function O(K){return new d(function(de,ee){var ye=new FileReader;ye.onerror=ee,ye.onloadend=function(ve){var me=btoa(ve.target.result||"");de({__local_forage_encoded_blob:!0,data:me,type:K.type})},ye.readAsBinaryString(K)})}function F(K){var de=S(atob(K.data));return c([de],{type:K.type})}function U(K){return K&&K.__local_forage_encoded_blob}function V(K){var de=this,ee=de._initReady().then(function(){var ye=v[de._dbInfo.name];if(ye&&ye.dbReady)return ye.dbReady});return h(ee,K,K),ee}function M(K){I(K);for(var de=v[K.name],ee=de.forages,ye=0;ye<ee.length;ye++){var ve=ee[ye];ve._dbInfo.db&&(ve._dbInfo.db.close(),ve._dbInfo.db=null)}return K.db=null,R(K).then(function(me){return K.db=me,D(K)?$(K):me}).then(function(me){K.db=de.db=me;for(var Fe=0;Fe<ee.length;Fe++)ee[Fe]._dbInfo.db=me}).catch(function(me){throw P(K,me),me})}function z(K,de,ee,ye){ye===void 0&&(ye=1);try{var ve=K.db.transaction(K.storeName,de);ee(null,ve)}catch(me){if(ye>0&&(!K.db||me.name==="InvalidStateError"||me.name==="NotFoundError"))return d.resolve().then(function(){if(!K.db||me.name==="NotFoundError"&&!K.db.objectStoreNames.contains(K.storeName)&&K.version<=K.db.version)return K.db&&(K.version=K.db.version+1),$(K)}).then(function(){return M(K).then(function(){z(K,de,ee,ye-1)})}).catch(ee);ee(me)}}function q(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(K){var de=this,ee={db:null};if(K)for(var ye in K)ee[ye]=K[ye];var ve=v[ee.name];ve||(ve=q(),v[ee.name]=ve),ve.forages.push(de),de._initReady||(de._initReady=de.ready,de.ready=V);var me=[];function Fe(){return d.resolve()}for(var qe=0;qe<ve.forages.length;qe++){var We=ve.forages[qe];We!==de&&me.push(We._initReady().catch(Fe))}var Ge=ve.forages.slice(0);return d.all(me).then(function(){return ee.db=ve.db,R(ee)}).then(function(ot){return ee.db=ot,D(ee,de._defaultConfig.version)?$(ee):ot}).then(function(ot){ee.db=ve.db=ot,de._dbInfo=ee;for(var xt=0;xt<Ge.length;xt++){var bn=Ge[xt];bn!==de&&(bn._dbInfo.db=ee.db,bn._dbInfo.version=ee.version)}})}function H(K,de){var ee=this;K=p(K);var ye=new d(function(ve,me){ee.ready().then(function(){z(ee._dbInfo,w,function(Fe,qe){if(Fe)return me(Fe);try{var We=qe.objectStore(ee._dbInfo.storeName),Ge=We.get(K);Ge.onsuccess=function(){var ot=Ge.result;ot===void 0&&(ot=null),U(ot)&&(ot=F(ot)),ve(ot)},Ge.onerror=function(){me(Ge.error)}}catch(ot){me(ot)}})}).catch(me)});return f(ye,de),ye}function G(K,de){var ee=this,ye=new d(function(ve,me){ee.ready().then(function(){z(ee._dbInfo,w,function(Fe,qe){if(Fe)return me(Fe);try{var We=qe.objectStore(ee._dbInfo.storeName),Ge=We.openCursor(),ot=1;Ge.onsuccess=function(){var xt=Ge.result;if(xt){var bn=xt.value;U(bn)&&(bn=F(bn));var Nt=K(bn,xt.key,ot++);Nt!==void 0?ve(Nt):xt.continue()}else ve()},Ge.onerror=function(){me(Ge.error)}}catch(xt){me(xt)}})}).catch(me)});return f(ye,de),ye}function J(K,de,ee){var ye=this;K=p(K);var ve=new d(function(me,Fe){var qe;ye.ready().then(function(){return qe=ye._dbInfo,_.call(de)==="[object Blob]"?T(qe.db).then(function(We){return We?de:O(de)}):de}).then(function(We){z(ye._dbInfo,x,function(Ge,ot){if(Ge)return Fe(Ge);try{var xt=ot.objectStore(ye._dbInfo.storeName);We===null&&(We=void 0);var bn=xt.put(We,K);ot.oncomplete=function(){We===void 0&&(We=null),me(We)},ot.onabort=ot.onerror=function(){var Nt=bn.error?bn.error:bn.transaction.error;Fe(Nt)}}catch(Nt){Fe(Nt)}})}).catch(Fe)});return f(ve,ee),ve}function re(K,de){var ee=this;K=p(K);var ye=new d(function(ve,me){ee.ready().then(function(){z(ee._dbInfo,x,function(Fe,qe){if(Fe)return me(Fe);try{var We=qe.objectStore(ee._dbInfo.storeName),Ge=We.delete(K);qe.oncomplete=function(){ve()},qe.onerror=function(){me(Ge.error)},qe.onabort=function(){var ot=Ge.error?Ge.error:Ge.transaction.error;me(ot)}}catch(ot){me(ot)}})}).catch(me)});return f(ye,de),ye}function ie(K){var de=this,ee=new d(function(ye,ve){de.ready().then(function(){z(de._dbInfo,x,function(me,Fe){if(me)return ve(me);try{var qe=Fe.objectStore(de._dbInfo.storeName),We=qe.clear();Fe.oncomplete=function(){ye()},Fe.onabort=Fe.onerror=function(){var Ge=We.error?We.error:We.transaction.error;ve(Ge)}}catch(Ge){ve(Ge)}})}).catch(ve)});return f(ee,K),ee}function te(K){var de=this,ee=new d(function(ye,ve){de.ready().then(function(){z(de._dbInfo,w,function(me,Fe){if(me)return ve(me);try{var qe=Fe.objectStore(de._dbInfo.storeName),We=qe.count();We.onsuccess=function(){ye(We.result)},We.onerror=function(){ve(We.error)}}catch(Ge){ve(Ge)}})}).catch(ve)});return f(ee,K),ee}function ae(K,de){var ee=this,ye=new d(function(ve,me){if(K<0){ve(null);return}ee.ready().then(function(){z(ee._dbInfo,w,function(Fe,qe){if(Fe)return me(Fe);try{var We=qe.objectStore(ee._dbInfo.storeName),Ge=!1,ot=We.openKeyCursor();ot.onsuccess=function(){var xt=ot.result;if(!xt){ve(null);return}K===0||Ge?ve(xt.key):(Ge=!0,xt.advance(K))},ot.onerror=function(){me(ot.error)}}catch(xt){me(xt)}})}).catch(me)});return f(ye,de),ye}function _e(K){var de=this,ee=new d(function(ye,ve){de.ready().then(function(){z(de._dbInfo,w,function(me,Fe){if(me)return ve(me);try{var qe=Fe.objectStore(de._dbInfo.storeName),We=qe.openKeyCursor(),Ge=[];We.onsuccess=function(){var ot=We.result;if(!ot){ye(Ge);return}Ge.push(ot.key),ot.continue()},We.onerror=function(){ve(We.error)}}catch(ot){ve(ot)}})}).catch(ve)});return f(ee,K),ee}function ce(K,de){de=m.apply(this,arguments);var ee=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||ee.name,K.storeName=K.storeName||ee.storeName);var ye=this,ve;if(!K.name)ve=d.reject("Invalid arguments");else{var me=K.name===ee.name&&ye._dbInfo.db,Fe=me?d.resolve(ye._dbInfo.db):R(K).then(function(qe){var We=v[K.name],Ge=We.forages;We.db=qe;for(var ot=0;ot<Ge.length;ot++)Ge[ot]._dbInfo.db=qe;return qe});K.storeName?ve=Fe.then(function(qe){if(qe.objectStoreNames.contains(K.storeName)){var We=qe.version+1;I(K);var Ge=v[K.name],ot=Ge.forages;qe.close();for(var xt=0;xt<ot.length;xt++){var bn=ot[xt];bn._dbInfo.db=null,bn._dbInfo.version=We}var Nt=new d(function(jn,Tr){var Cr=l.open(K.name,We);Cr.onerror=function(jo){var Lf=Cr.result;Lf.close(),Tr(jo)},Cr.onupgradeneeded=function(){var jo=Cr.result;jo.deleteObjectStore(K.storeName)},Cr.onsuccess=function(){var jo=Cr.result;jo.close(),jn(jo)}});return Nt.then(function(jn){Ge.db=jn;for(var Tr=0;Tr<ot.length;Tr++){var Cr=ot[Tr];Cr._dbInfo.db=jn,k(Cr._dbInfo)}}).catch(function(jn){throw(P(K,jn)||d.resolve()).catch(function(){}),jn})}}):ve=Fe.then(function(qe){I(K);var We=v[K.name],Ge=We.forages;qe.close();for(var ot=0;ot<Ge.length;ot++){var xt=Ge[ot];xt._dbInfo.db=null}var bn=new d(function(Nt,jn){var Tr=l.deleteDatabase(K.name);Tr.onerror=function(){var Cr=Tr.result;Cr&&Cr.close(),jn(Tr.error)},Tr.onblocked=function(){console.warn('dropInstance blocked for database "'+K.name+'" until all open connections are closed')},Tr.onsuccess=function(){var Cr=Tr.result;Cr&&Cr.close(),Nt(Cr)}});return bn.then(function(Nt){We.db=Nt;for(var jn=0;jn<Ge.length;jn++){var Tr=Ge[jn];k(Tr._dbInfo)}}).catch(function(Nt){throw(P(K,Nt)||d.resolve()).catch(function(){}),Nt})})}return f(ve,de),ve}var ze={_driver:"asyncStorage",_initStorage:j,_support:u(),iterate:G,getItem:H,setItem:J,removeItem:re,clear:ie,length:te,key:ae,keys:_e,dropInstance:ce};function Oe(){return typeof openDatabase=="function"}var $e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ne="~~local_forage_type~",pe=/^~~local_forage_type~([^~]+)~/,ue="__lfsc__:",Se=ue.length,De="arbf",at="blob",He="si08",le="ui08",Ie="uic8",Ye="si16",fe="si32",Te="ur16",Ve="ui32",et="fl32",St="fl64",An=Se+De.length,_r=Object.prototype.toString;function Br(K){var de=K.length*.75,ee=K.length,ye,ve=0,me,Fe,qe,We;K[K.length-1]==="="&&(de--,K[K.length-2]==="="&&de--);var Ge=new ArrayBuffer(de),ot=new Uint8Array(Ge);for(ye=0;ye<ee;ye+=4)me=$e.indexOf(K[ye]),Fe=$e.indexOf(K[ye+1]),qe=$e.indexOf(K[ye+2]),We=$e.indexOf(K[ye+3]),ot[ve++]=me<<2|Fe>>4,ot[ve++]=(Fe&15)<<4|qe>>2,ot[ve++]=(qe&3)<<6|We&63;return Ge}function Or(K){var de=new Uint8Array(K),ee="",ye;for(ye=0;ye<de.length;ye+=3)ee+=$e[de[ye]>>2],ee+=$e[(de[ye]&3)<<4|de[ye+1]>>4],ee+=$e[(de[ye+1]&15)<<2|de[ye+2]>>6],ee+=$e[de[ye+2]&63];return de.length%3===2?ee=ee.substring(0,ee.length-1)+"=":de.length%3===1&&(ee=ee.substring(0,ee.length-2)+"=="),ee}function yn(K,de){var ee="";if(K&&(ee=_r.call(K)),K&&(ee==="[object ArrayBuffer]"||K.buffer&&_r.call(K.buffer)==="[object ArrayBuffer]")){var ye,ve=ue;K instanceof ArrayBuffer?(ye=K,ve+=De):(ye=K.buffer,ee==="[object Int8Array]"?ve+=He:ee==="[object Uint8Array]"?ve+=le:ee==="[object Uint8ClampedArray]"?ve+=Ie:ee==="[object Int16Array]"?ve+=Ye:ee==="[object Uint16Array]"?ve+=Te:ee==="[object Int32Array]"?ve+=fe:ee==="[object Uint32Array]"?ve+=Ve:ee==="[object Float32Array]"?ve+=et:ee==="[object Float64Array]"?ve+=St:de(new Error("Failed to get type for BinaryArray"))),de(ve+Or(ye))}else if(ee==="[object Blob]"){var me=new FileReader;me.onload=function(){var Fe=Ne+K.type+"~"+Or(this.result);de(ue+at+Fe)},me.readAsArrayBuffer(K)}else try{de(JSON.stringify(K))}catch(Fe){console.error("Couldn't convert value into a JSON string: ",K),de(null,Fe)}}function Nn(K){if(K.substring(0,Se)!==ue)return JSON.parse(K);var de=K.substring(An),ee=K.substring(Se,An),ye;if(ee===at&&pe.test(de)){var ve=de.match(pe);ye=ve[1],de=de.substring(ve[0].length)}var me=Br(de);switch(ee){case De:return me;case at:return c([me],{type:ye});case He:return new Int8Array(me);case le:return new Uint8Array(me);case Ie:return new Uint8ClampedArray(me);case Ye:return new Int16Array(me);case Te:return new Uint16Array(me);case fe:return new Int32Array(me);case Ve:return new Uint32Array(me);case et:return new Float32Array(me);case St:return new Float64Array(me);default:throw new Error("Unkown type: "+ee)}}var sr={serialize:yn,deserialize:Nn,stringToBuffer:Br,bufferToString:Or};function tr(K,de,ee,ye){K.executeSql("CREATE TABLE IF NOT EXISTS "+de.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ee,ye)}function Lo(K){var de=this,ee={db:null};if(K)for(var ye in K)ee[ye]=typeof K[ye]!="string"?K[ye].toString():K[ye];var ve=new d(function(me,Fe){try{ee.db=openDatabase(ee.name,String(ee.version),ee.description,ee.size)}catch(qe){return Fe(qe)}ee.db.transaction(function(qe){tr(qe,ee,function(){de._dbInfo=ee,me()},function(We,Ge){Fe(Ge)})},Fe)});return ee.serializer=sr,ve}function Di(K,de,ee,ye,ve,me){K.executeSql(ee,ye,ve,function(Fe,qe){qe.code===qe.SYNTAX_ERR?Fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[de.storeName],function(We,Ge){Ge.rows.length?me(We,qe):tr(We,de,function(){We.executeSql(ee,ye,ve,me)},me)},me):me(Fe,qe)},me)}function Qi(K,de){var ee=this;K=p(K);var ye=new d(function(ve,me){ee.ready().then(function(){var Fe=ee._dbInfo;Fe.db.transaction(function(qe){Di(qe,Fe,"SELECT * FROM "+Fe.storeName+" WHERE key = ? LIMIT 1",[K],function(We,Ge){var ot=Ge.rows.length?Ge.rows.item(0).value:null;ot&&(ot=Fe.serializer.deserialize(ot)),ve(ot)},function(We,Ge){me(Ge)})})}).catch(me)});return f(ye,de),ye}function Us(K,de){var ee=this,ye=new d(function(ve,me){ee.ready().then(function(){var Fe=ee._dbInfo;Fe.db.transaction(function(qe){Di(qe,Fe,"SELECT * FROM "+Fe.storeName,[],function(We,Ge){for(var ot=Ge.rows,xt=ot.length,bn=0;bn<xt;bn++){var Nt=ot.item(bn),jn=Nt.value;if(jn&&(jn=Fe.serializer.deserialize(jn)),jn=K(jn,Nt.key,bn+1),jn!==void 0){ve(jn);return}}ve()},function(We,Ge){me(Ge)})})}).catch(me)});return f(ye,de),ye}function mr(K,de,ee,ye){var ve=this;K=p(K);var me=new d(function(Fe,qe){ve.ready().then(function(){de===void 0&&(de=null);var We=de,Ge=ve._dbInfo;Ge.serializer.serialize(de,function(ot,xt){xt?qe(xt):Ge.db.transaction(function(bn){Di(bn,Ge,"INSERT OR REPLACE INTO "+Ge.storeName+" (key, value) VALUES (?, ?)",[K,ot],function(){Fe(We)},function(Nt,jn){qe(jn)})},function(bn){if(bn.code===bn.QUOTA_ERR){if(ye>0){Fe(mr.apply(ve,[K,We,ee,ye-1]));return}qe(bn)}})})}).catch(qe)});return f(me,ee),me}function Hn(K,de,ee){return mr.apply(this,[K,de,ee,1])}function Sa(K,de){var ee=this;K=p(K);var ye=new d(function(ve,me){ee.ready().then(function(){var Fe=ee._dbInfo;Fe.db.transaction(function(qe){Di(qe,Fe,"DELETE FROM "+Fe.storeName+" WHERE key = ?",[K],function(){ve()},function(We,Ge){me(Ge)})})}).catch(me)});return f(ye,de),ye}function Zu(K){var de=this,ee=new d(function(ye,ve){de.ready().then(function(){var me=de._dbInfo;me.db.transaction(function(Fe){Di(Fe,me,"DELETE FROM "+me.storeName,[],function(){ye()},function(qe,We){ve(We)})})}).catch(ve)});return f(ee,K),ee}function Df(K){var de=this,ee=new d(function(ye,ve){de.ready().then(function(){var me=de._dbInfo;me.db.transaction(function(Fe){Di(Fe,me,"SELECT COUNT(key) as c FROM "+me.storeName,[],function(qe,We){var Ge=We.rows.item(0).c;ye(Ge)},function(qe,We){ve(We)})})}).catch(ve)});return f(ee,K),ee}function ht(K,de){var ee=this,ye=new d(function(ve,me){ee.ready().then(function(){var Fe=ee._dbInfo;Fe.db.transaction(function(qe){Di(qe,Fe,"SELECT key FROM "+Fe.storeName+" WHERE id = ? LIMIT 1",[K+1],function(We,Ge){var ot=Ge.rows.length?Ge.rows.item(0).key:null;ve(ot)},function(We,Ge){me(Ge)})})}).catch(me)});return f(ye,de),ye}function Si(K){var de=this,ee=new d(function(ye,ve){de.ready().then(function(){var me=de._dbInfo;me.db.transaction(function(Fe){Di(Fe,me,"SELECT key FROM "+me.storeName,[],function(qe,We){for(var Ge=[],ot=0;ot<We.rows.length;ot++)Ge.push(We.rows.item(ot).key);ye(Ge)},function(qe,We){ve(We)})})}).catch(ve)});return f(ee,K),ee}function vn(K){return new d(function(de,ee){K.transaction(function(ye){ye.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ve,me){for(var Fe=[],qe=0;qe<me.rows.length;qe++)Fe.push(me.rows.item(qe).name);de({db:K,storeNames:Fe})},function(ve,me){ee(me)})},function(ye){ee(ye)})})}function zr(K,de){de=m.apply(this,arguments);var ee=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||ee.name,K.storeName=K.storeName||ee.storeName);var ye=this,ve;return K.name?ve=new d(function(me){var Fe;K.name===ee.name?Fe=ye._dbInfo.db:Fe=openDatabase(K.name,"","",0),K.storeName?me({db:Fe,storeNames:[K.storeName]}):me(vn(Fe))}).then(function(me){return new d(function(Fe,qe){me.db.transaction(function(We){function Ge(Nt){return new d(function(jn,Tr){We.executeSql("DROP TABLE IF EXISTS "+Nt,[],function(){jn()},function(Cr,jo){Tr(jo)})})}for(var ot=[],xt=0,bn=me.storeNames.length;xt<bn;xt++)ot.push(Ge(me.storeNames[xt]));d.all(ot).then(function(){Fe()}).catch(function(Nt){qe(Nt)})},function(We){qe(We)})})}):ve=d.reject("Invalid arguments"),f(ve,de),ve}var ii={_driver:"webSQLStorage",_initStorage:Lo,_support:Oe(),iterate:Us,getItem:Qi,setItem:Hn,removeItem:Sa,clear:Zu,length:Df,key:ht,keys:Si,dropInstance:zr};function gi(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Mi(K,de){var ee=K.name+"/";return K.storeName!==de.storeName&&(ee+=K.storeName+"/"),ee}function Fo(){var K="_localforage_support_test";try{return localStorage.setItem(K,!0),localStorage.removeItem(K),!1}catch{return!0}}function ec(){return!Fo()||localStorage.length>0}function Tp(K){var de=this,ee={};if(K)for(var ye in K)ee[ye]=K[ye];return ee.keyPrefix=Mi(K,de._defaultConfig),ec()?(de._dbInfo=ee,ee.serializer=sr,d.resolve()):d.reject()}function yv(K){var de=this,ee=de.ready().then(function(){for(var ye=de._dbInfo.keyPrefix,ve=localStorage.length-1;ve>=0;ve--){var me=localStorage.key(ve);me.indexOf(ye)===0&&localStorage.removeItem(me)}});return f(ee,K),ee}function or(K,de){var ee=this;K=p(K);var ye=ee.ready().then(function(){var ve=ee._dbInfo,me=localStorage.getItem(ve.keyPrefix+K);return me&&(me=ve.serializer.deserialize(me)),me});return f(ye,de),ye}function Mf(K,de){var ee=this,ye=ee.ready().then(function(){for(var ve=ee._dbInfo,me=ve.keyPrefix,Fe=me.length,qe=localStorage.length,We=1,Ge=0;Ge<qe;Ge++){var ot=localStorage.key(Ge);if(ot.indexOf(me)===0){var xt=localStorage.getItem(ot);if(xt&&(xt=ve.serializer.deserialize(xt)),xt=K(xt,ot.substring(Fe),We++),xt!==void 0)return xt}}});return f(ye,de),ye}function Ta(K,de){var ee=this,ye=ee.ready().then(function(){var ve=ee._dbInfo,me;try{me=localStorage.key(K)}catch{me=null}return me&&(me=me.substring(ve.keyPrefix.length)),me});return f(ye,de),ye}function od(K){var de=this,ee=de.ready().then(function(){for(var ye=de._dbInfo,ve=localStorage.length,me=[],Fe=0;Fe<ve;Fe++){var qe=localStorage.key(Fe);qe.indexOf(ye.keyPrefix)===0&&me.push(qe.substring(ye.keyPrefix.length))}return me});return f(ee,K),ee}function dl(K){var de=this,ee=de.keys().then(function(ye){return ye.length});return f(ee,K),ee}function S_(K,de){var ee=this;K=p(K);var ye=ee.ready().then(function(){var ve=ee._dbInfo;localStorage.removeItem(ve.keyPrefix+K)});return f(ye,de),ye}function T_(K,de,ee){var ye=this;K=p(K);var ve=ye.ready().then(function(){de===void 0&&(de=null);var me=de;return new d(function(Fe,qe){var We=ye._dbInfo;We.serializer.serialize(de,function(Ge,ot){if(ot)qe(ot);else try{localStorage.setItem(We.keyPrefix+K,Ge),Fe(me)}catch(xt){(xt.name==="QuotaExceededError"||xt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&qe(xt),qe(xt)}})})});return f(ve,ee),ve}function vv(K,de){if(de=m.apply(this,arguments),K=typeof K!="function"&&K||{},!K.name){var ee=this.config();K.name=K.name||ee.name,K.storeName=K.storeName||ee.storeName}var ye=this,ve;return K.name?ve=new d(function(me){K.storeName?me(Mi(K,ye._defaultConfig)):me(K.name+"/")}).then(function(me){for(var Fe=localStorage.length-1;Fe>=0;Fe--){var qe=localStorage.key(Fe);qe.indexOf(me)===0&&localStorage.removeItem(qe)}}):ve=d.reject("Invalid arguments"),f(ve,de),ve}var bv={_driver:"localStorageWrapper",_initStorage:Tp,_support:gi(),iterate:Mf,getItem:or,setItem:T_,removeItem:S_,clear:yv,length:dl,key:Ta,keys:od,dropInstance:vv},Tg=function(de,ee){return de===ee||typeof de=="number"&&typeof ee=="number"&&isNaN(de)&&isNaN(ee)},C_=function(de,ee){for(var ye=de.length,ve=0;ve<ye;){if(Tg(de[ve],ee))return!0;ve++}return!1},Cp=Array.isArray||function(K){return Object.prototype.toString.call(K)==="[object Array]"},fl={},_v={},Ca={INDEXEDDB:ze,WEBSQL:ii,LOCALSTORAGE:bv},$f=[Ca.INDEXEDDB._driver,Ca.WEBSQL._driver,Ca.LOCALSTORAGE._driver],hl=["dropInstance"],Ap=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(hl),bT={description:"",driver:$f.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function wv(K,de){K[de]=function(){var ee=arguments;return K.ready().then(function(){return K[de].apply(K,ee)})}}function Cg(){for(var K=1;K<arguments.length;K++){var de=arguments[K];if(de)for(var ee in de)de.hasOwnProperty(ee)&&(Cp(de[ee])?arguments[0][ee]=de[ee].slice():arguments[0][ee]=de[ee])}return arguments[0]}var A_=function(){function K(de){o(this,K);for(var ee in Ca)if(Ca.hasOwnProperty(ee)){var ye=Ca[ee],ve=ye._driver;this[ee]=ve,fl[ve]||this.defineDriver(ye)}this._defaultConfig=Cg({},bT),this._config=Cg({},this._defaultConfig,de),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return K.prototype.config=function(ee){if((typeof ee>"u"?"undefined":s(ee))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ye in ee){if(ye==="storeName"&&(ee[ye]=ee[ye].replace(/\W/g,"_")),ye==="version"&&typeof ee[ye]!="number")return new Error("Database version must be a number.");this._config[ye]=ee[ye]}return"driver"in ee&&ee.driver?this.setDriver(this._config.driver):!0}else return typeof ee=="string"?this._config[ee]:this._config},K.prototype.defineDriver=function(ee,ye,ve){var me=new d(function(Fe,qe){try{var We=ee._driver,Ge=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ee._driver){qe(Ge);return}for(var ot=Ap.concat("_initStorage"),xt=0,bn=ot.length;xt<bn;xt++){var Nt=ot[xt],jn=!C_(hl,Nt);if((jn||ee[Nt])&&typeof ee[Nt]!="function"){qe(Ge);return}}var Tr=function(){for(var Lf=function(tc){return function(){var pl=new Error("Method "+tc+" is not implemented by the current driver"),kp=d.reject(pl);return f(kp,arguments[arguments.length-1]),kp}},Ip=0,_T=hl.length;Ip<_T;Ip++){var Ev=hl[Ip];ee[Ev]||(ee[Ev]=Lf(Ev))}};Tr();var Cr=function(Lf){fl[We]&&console.info("Redefining LocalForage driver: "+We),fl[We]=ee,_v[We]=Lf,Fe()};"_support"in ee?ee._support&&typeof ee._support=="function"?ee._support().then(Cr,qe):Cr(!!ee._support):Cr(!0)}catch(jo){qe(jo)}});return h(me,ye,ve),me},K.prototype.driver=function(){return this._driver||null},K.prototype.getDriver=function(ee,ye,ve){var me=fl[ee]?d.resolve(fl[ee]):d.reject(new Error("Driver not found."));return h(me,ye,ve),me},K.prototype.getSerializer=function(ee){var ye=d.resolve(sr);return h(ye,ee),ye},K.prototype.ready=function(ee){var ye=this,ve=ye._driverSet.then(function(){return ye._ready===null&&(ye._ready=ye._initDriver()),ye._ready});return h(ve,ee,ee),ve},K.prototype.setDriver=function(ee,ye,ve){var me=this;Cp(ee)||(ee=[ee]);var Fe=this._getSupportedDrivers(ee);function qe(){me._config.driver=me.driver()}function We(xt){return me._extend(xt),qe(),me._ready=me._initStorage(me._config),me._ready}function Ge(xt){return function(){var bn=0;function Nt(){for(;bn<xt.length;){var jn=xt[bn];return bn++,me._dbInfo=null,me._ready=null,me.getDriver(jn).then(We).catch(Nt)}qe();var Tr=new Error("No available storage method found.");return me._driverSet=d.reject(Tr),me._driverSet}return Nt()}}var ot=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=ot.then(function(){var xt=Fe[0];return me._dbInfo=null,me._ready=null,me.getDriver(xt).then(function(bn){me._driver=bn._driver,qe(),me._wrapLibraryMethodsWithReady(),me._initDriver=Ge(Fe)})}).catch(function(){qe();var xt=new Error("No available storage method found.");return me._driverSet=d.reject(xt),me._driverSet}),h(this._driverSet,ye,ve),this._driverSet},K.prototype.supports=function(ee){return!!_v[ee]},K.prototype._extend=function(ee){Cg(this,ee)},K.prototype._getSupportedDrivers=function(ee){for(var ye=[],ve=0,me=ee.length;ve<me;ve++){var Fe=ee[ve];this.supports(Fe)&&ye.push(Fe)}return ye},K.prototype._wrapLibraryMethodsWithReady=function(){for(var ee=0,ye=Ap.length;ee<ye;ee++)wv(this,Ap[ee])},K.prototype.createInstance=function(ee){return new K(ee)},K}(),xv=new A_;r.exports=xv},{3:3}]},{},[4])(4)})})(Q3e);var _9t=Q3e.exports;const Sw=rl(_9t);class J3e{constructor(t){gl(this,"engine");gl(this,"connected",!1);gl(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function nL(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function iC(e){return e.participantId!==void 0}class mc extends J3e{constructor(){super("firebase");gl(this,"RECAPTCHAV3TOKEN","6LeSJBYqAAAAADYgJYYVaLhVACl5Jy1sidBF7BsC");gl(this,"firestore");gl(this,"collectionPrefix","prod-");gl(this,"studyCollection");gl(this,"storage");gl(this,"studyId","");gl(this,"localForage",Sw.createInstance({name:"currentParticipantId"}));gl(this,"participantData",null);const n=bQ.parse(`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`),r=gMe(n);this.firestore=gBt(r,{}),this.storage=K_();try{g9t(r,{provider:new Wte(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async saveAllParticipantAndTaskTags(n){const r=Ah(n);Object.values(r).forEach(o=>{o.partTags=o.partTags.map(a=>a.id),Object.values(o.taskTags).forEach(a=>{a=a.map(l=>l.id)})});const i=Xr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/_participantTags`),s=new Blob([JSON.stringify(r)],{type:"application/json"});await Pv(i,s)}async getAllParticipantAndTaskTags(){const n=Xr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/_participantTags`),r=await this._getFromFirebaseStorageByRef(n,"config"),i=Xr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/participant/tags`),s=await this._getFromFirebaseStorageByRef(i,"config"),o=Xr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/task/tags`),a=await this._getFromFirebaseStorageByRef(o,"config");return Object.values(r).forEach(l=>{l.partTags=l.partTags.map(u=>s?s.find(c=>c.id===u):u),Object.values(l.taskTags).forEach(u=>{u=u.map(c=>a?a.find(d=>d.id===c):c)})}),Promise.resolve(r)}async saveTags(n,r){const i=Xr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/${r}/tags`),s=new Blob([JSON.stringify(n)],{type:"application/json"});await Pv(i,s)}async getTags(n){const r=Xr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/${n}/tags`),i=await this._getFromFirebaseStorageByRef(r,"config");return Array.isArray(i)?Promise.resolve(i):Promise.resolve([])}async saveEditedTranscript(n,r,i,s){const o=s.map(u=>({...u,selectedTags:u.selectedTags.filter(c=>c!==void 0).map(c=>c.id)})),a=Xr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/${r}/${n}/${i}`),l=new Blob([JSON.stringify(o)],{type:"application/json"});await Pv(a,l)}async getEditedTranscript(n,r,i){const s=Xr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/${r}/${n}/${i}`),o=await this._getFromFirebaseStorageByRef(s,"config");if(!Array.isArray(o))return[];const a=Xr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/text/tags`),l=await this._getFromFirebaseStorageByRef(a,"config"),u=o.map(c=>({...c,selectedTags:c.selectedTags.map(d=>l.find(f=>d===f.id))}));return Promise.resolve(u)}async connect(){try{await yBt(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=K3();if(!i.currentUser&&(await HFt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await nL(JSON.stringify(r));if(this.studyCollection=cd(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async _getFirebaseProvenance(n){const r=K_(),i=Xr(r,`${this.studyId}/${n}_provenance`);let s={};try{const o=await Nv(i),l=await(await fetch(o)).text();s=JSON.parse(l)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async _getFirebaseWindowEvents(n){const r=K_(),i=Xr(r,`${this.studyId}/${n}_windowEvents`);let s={};try{const o=await Nv(i),l=await(await fetch(o)).text();s=JSON.parse(l)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),l=await this.getModes(n);if(iC(a))return this.participantData=a,a;const u=await nL(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:u,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},l.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const l=Xr(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(l,"config")}),s=await Promise.all(i),o={};return n.forEach((a,l)=>o[a]=s[l]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=VI(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async saveAudio(n,r){n.addEventListener("dataavailable",i=>{const s=K_(),o=Xr(s,`${this.studyId}/audio/${this.currentParticipantId}_${r}`);Pv(o,i.data).then(()=>{console.warn("Uploaded a blob or file!")})}),n.stop(),n.stream.getTracks().forEach(i=>i.stop())}async getAudio(n,r){const i=K_(),s=await Promise.all(n.map(async a=>await Nv(Xr(i,`${this.studyId}/audio/${r}_${a}`))));return Promise.all(s.map(a=>new Promise(l=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const c=u.response,d=URL.createObjectURL(c);l(d)},u.open("GET",a),u.send()})))}async getTranscription(n,r){const i=K_(),s=await Promise.all(n.map(async a=>await Nv(Xr(i,`${this.studyId}/audio/${r}_${a}.wav_transcription.txt`))));return Promise.all(s.map(a=>new Promise(l=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{u.response.text().then(d=>{l(d)})},u.open("GET",a),u.send()})))}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.getSequenceArray();if(!r)throw new Error("Latin square not initialized");const i=await this.getModes(this.studyId),s=ws(this.studyCollection,"sequenceAssignment");await cu(s,{});const o=cd(s,"sequenceAssignment"),a=ws(o,this.currentParticipantId),l=e0e(o,TBt("participantId","==","")),u=await rC(l);if(u.docs.length>0){const g=u.docs[0],y=g.data().timestamp;i.dataCollectionEnabled&&(await PBt(g.ref),await cu(a,{participantId:this.currentParticipantId,timestamp:y}))}else i.dataCollectionEnabled&&await cu(a,{participantId:this.currentParticipantId,timestamp:DBt()});const c=e0e(o,CBt("timestamp","asc")),h=(await rC(c)).docs.map(g=>g.data()).findIndex(g=>g.participantId===n||this.currentParticipantId)%r.length,p=h===-1?Math.floor(Math.random()*r.length-1):h,m=r[p];if(!m)throw new Error("Latin square is empty");return m}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Xr(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await tC(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");iC(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return iC(r)?r:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=VI();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=cd(this.firestore,"user-management"),i=await rC(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(l=>l.email===n.user.email);a&&(a.uid=n.user.uid),await cu(ws(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await cu(ws(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await cu(ws(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await cu(ws(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await cu(ws(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Xr(this.storage,`${this.collectionPrefix}${n}/participants`),i=await tC(r),s=[],o=i.items.map(async a=>{const l=await this._getFromFirebaseStorageByRef(a,"participantData");iC(l)&&s.push(l)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=cd(this.firestore,`${this.collectionPrefix}${n}`),s=Xr(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!iC(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=ws(i,"sequenceAssignment"),l=cd(a,"sequenceAssignment"),u=ws(l,r);await RBt(u,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=ws(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await cu(s,{[r]:i},{merge:!0})}async getModes(n){const r=ws(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await Q9(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await cu(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),l=s.getUTCDate().toString().padStart(2,"0"),u=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),d=s.getUTCSeconds().toString().padStart(2,"0"),f=`${o}-${a}-${l}T${u}:${c}:${d}`,h=`${this.collectionPrefix}${n}-snapshot-${f}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=ws(this.firestore,"metadata","collections"),i=await Q9(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=ws(this.firestore,"metadata","collections");await cu(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=ws(this.firestore,"metadata","collections"),i=await Q9(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await cu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Xr(this.storage,n),s=(await tC(r)).items.map(o=>mge(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Xr(this.storage,n),o=(await tC(i)).items.map(a=>{const l=a.fullPath,u=l.replace(n,r);return this._copyFile(l,u)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Xr(this.storage,n),s=Xr(this.storage,r),o=await Nv(i),l=await(await fetch(o)).blob();await Pv(s,l)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=cd(this.firestore,n),s=ws(i,"sequenceAssignment"),o=cd(s,"sequenceAssignment"),a=cd(this.firestore,r),l=ws(a,"sequenceAssignment");await cu(l,{});const u=cd(l,"sequenceAssignment"),c=await rC(o),d=r0e(this.firestore);c.docs.forEach(f=>{const h=ws(u,f.id);d.set(h,f.data())}),await d.commit()}async _deleteCollection(n){const r=cd(this.firestore,n),i=ws(r,"sequenceAssignment"),s=cd(i,"sequenceAssignment"),o=await rC(s),a=r0e(this.firestore);o.forEach(l=>{const u=ws(s,l.id);a.delete(u)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Xr(this.storage,n);return(await tC(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Xr(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await Nv(i),l=await(await fetch(o)).text();s=JSON.parse(l)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await Nv(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=Xr(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await Pv(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await Pv(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Xr(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await mge(i)}}const Z3e=A.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),pp=()=>A.useContext(Z3e);function w9t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=A.useState(t),[o,a]=A.useState(!1),{storageEngine:l}=pi(),u=async()=>{const h=K3();try{await QFt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},d=async h=>l?await l.validateUser(h):!1;A.useEffect(()=>{s(t);let h;if(l instanceof mc)try{h=K3()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},_=await d(v);v.isAdmin=!!_,s(v)}else u()},g=(async()=>{if(l instanceof mc){const y=await(l==null?void 0:l.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=XFt(h,async _=>await p(_));return()=>v()}s(r)}else l&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[l,o]);const f=A.useMemo(()=>({user:i,triggerAuth:c,logout:u,verifyAdminStatus:d}),[i]);return b.jsx(Z3e.Provider,{value:f,children:i.determiningStatus?b.jsx(Gl,{visible:!0}):e})}async function x9t(e){return e?await e.getTags("text"):[]}function E9t({participant:e,playTime:t,setTranscriptLines:n,currentShownTranscription:r,setCurrentShownTranscription:i,transcriptList:s,setTranscriptList:o}){var $;const[a,l]=A.useState(null),u=pp(),{trrackId:c,studyId:d,index:f}=Lc(),h=ap(),p=f?h:null,{storageEngine:m}=pi(),{value:g,execute:y}=Md(x9t,[m]),v=A.useCallback(D=>{m&&m.saveTags(D,"text").then(()=>y(m))},[y,m]),_=Bh(),w=A.useRef([]),x=A.useMemo(()=>!p||!e?null:Object.keys(e.answers).find(D=>D.startsWith(p))||null,[e,p]),S=p1((D,O)=>{const F=[...s];F[D].text=O,o(F)}),E=p1((D,O)=>{const F=[...s];F[D].selectedTags=O,o(F)}),T=p1((D,O)=>{const F=[...s];F[D].annotation=O,o(F)}),I=p1(D=>{if(D===0)return;const O=structuredClone(s);O[D-1].text=s[D-1].text+s[D].text,O[D-1].transcriptMappingEnd=s[D].transcriptMappingEnd,O[D-1].selectedTags=[...s[D-1].selectedTags,...s[D].selectedTags.filter(F=>!s[D-1].selectedTags.find(U=>U.id===F.id))],O.splice(D,1),O.filter(F=>F.transcriptMappingStart===O[D-1].transcriptMappingStart).forEach(F=>{F.transcriptMappingEnd=O[D-1].transcriptMappingEnd}),o(O),setTimeout(()=>{w.current[D-1].focus(),w.current[D-1].setSelectionRange(s[D-1].text.length,s[D-1].text.length,"none")},1)}),k=p1((D,O)=>{const F=structuredClone(s),U=F[D];F.splice(D+1,0,{transcriptMappingEnd:U.transcriptMappingEnd,transcriptMappingStart:U.transcriptMappingStart,text:U.text.slice(O),selectedTags:U.selectedTags,annotation:""}),F[D].text=F[D].text.slice(0,O),o(F),setTimeout(()=>{w.current[D+1].focus(),w.current[D+1].setSelectionRange(0,0)},1)});A.useEffect(()=>{const D=[];a&&s.length>a.results.length||(s.forEach((O,F)=>{a&&(F===0||O.transcriptMappingStart!==s[F-1].transcriptMappingStart)&&D.push({start:F===0?0:a.results[O.transcriptMappingStart-1].resultEndTime,end:a.results[O.transcriptMappingEnd].resultEndTime,lineStart:O.transcriptMappingStart,lineEnd:O.transcriptMappingEnd,tags:s.filter(U=>U.transcriptMappingStart===O.transcriptMappingStart&&U.transcriptMappingEnd===O.transcriptMappingEnd).map(U=>U.selectedTags)})}),n(D))},[s,n,a]),A.useEffect(()=>{d&&c&&e&&(m==null||m.getTranscription(Rc(e.sequence).filter(D=>_.tasksToNotRecordAudio===void 0||!_.tasksToNotRecordAudio.includes(D)).filter(D=>p?D===p:!0),c).then(D=>{const O=D.map(V=>JSON.parse(V));let F=0;const U=O.map(V=>{const M=V.results.map(z=>({...z,resultEndTime:+z.resultEndTime.split("s")[0]+F}));return F+=+V.results[V.results.length-1].resultEndTime.split("s")[0],M}).flat();l({results:U}),s.length===0&&o(U.map((V,M)=>{var z;return{transcriptMappingStart:M,transcriptMappingEnd:M,text:((z=V.alternatives[0].transcript)==null?void 0:z.trim())||"",selectedTags:[],annotation:""}})),i(0)}))},[m,d,c,_.tasksToNotRecordAudio,e,p,o,i]),A.useEffect(()=>{if(a&&r!==null&&e&&t>0){let D=r;const O=x?e.answers[x].startTime:e.answers.audioTest.startTime,F=Math.abs(t-O)/1e3;if(F>a.results[D].resultEndTime){for(;F>a.results[D].resultEndTime;)if(D+=1,D>a.results.length-1){D=a.results.length-1;break}}else if(D>0&&F<a.results[D-1].resultEndTime)for(;D>0&&F<a.results[D-1].resultEndTime;)D-=1;if(r===D)return;i(D)}},[r,e,t,i,a,x]);const P=A.useCallback((D,O)=>{if(!g)return;const F=g.findIndex(M=>M.id===D.id),U=Array.from(g);U[F]=O;const V=Array.from(s);V.forEach(M=>{M.selectedTags=M.selectedTags.map(z=>z.id===D.id?O:z)}),o(V),v(U)},[v,o,g,s]),L=A.useCallback((D,O)=>{w.current[D]=O},[]),R=A.useMemo(()=>g?s.map((D,O)=>b.jsx(S3t,{annotation:D.annotation,setAnnotation:T,addRef:L,onSelectTags:E,addRowCallback:k,deleteRowCallback:I,onTextChange:S,tags:g,selectedTags:D.selectedTags,text:D.text,index:O,start:D.transcriptMappingStart,end:D.transcriptMappingEnd,current:r===null?0:r},O)):b.jsx(is,{}),[k,E,L,r,I,T,g,S,s]);return b.jsxs(Gr,{gap:0,children:[b.jsxs(gn,{mb:"sm",justify:"space-between",wrap:"nowrap",children:[b.jsx(Xe,{style:{flexGrow:1,textAlign:"center"},children:"Transcript"}),b.jsx(hq,{createTagCallback:D=>{v([...g||[],D])},editTagCallback:P,tags:g||[],email:(($=u.user.user)==null?void 0:$.email)||""})]}),b.jsx(Gr,{gap:5,children:R})]})}const ez={left:5,top:0,right:5,bottom:0};function S9t(e,t){return t?t.getParticipantData(e):null}async function T9t(e,t,n,r){return e&&t&&n&&r?await e.getEditedTranscript(t,r,n):null}async function C9t(e,t){return t&&e?await t.getAllParticipantAndTaskTags():null}async function A9t(e,t){return e?await e.getTags(t):[]}const c0e=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],d0e=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function eLe({mini:e}){var at,He;const{trrackId:t,index:n}=Lc(),r=ap(),i=pp(),s=A.useMemo(()=>n?r:null,[r,n]),{storageEngine:o}=pi(),[a,l]=A.useState(0),[u,{width:c}]=Vd(),[d,f]=A.useState(null),{value:h,status:p}=Md(S9t,[t,o]),{value:m,execute:g}=Md(C9t,[t,o]),{saveAnalysisState:y}=ju(),v=Fc(),[_,w]=A.useState(!1),[x,S]=Oqe(0,200),E=A.useRef(null),T=Bh(),I=Zc(),{analysisTrialName:k,analysisWaveformTime:P}=Ro(le=>le),{setAnalysisTrialName:L,setAnalysisParticipantName:R,setAnalysisWaveformTime:$}=ju(),{value:D,execute:O}=Md(A9t,[o,"task"]),[F,U]=A.useState(!0),V=A.useRef(null),[M,z]=A.useState([]),[q,j]=A.useState(null),H=A.useMemo(()=>o&&t&&r?vd(le=>{var Ie;return o.saveEditedTranscript(t,((Ie=i.user.user)==null?void 0:Ie.email)||"temp",r,le)},1e3,{maxWait:5e3}):le=>null,[r,(at=i.user.user)==null?void 0:at.email,o,t]),G=A.useCallback(le=>{j(le),H(le)},[H]),{value:J,status:re}=Md(T9t,[o,h==null?void 0:h.participantId,r,(He=i.user.user)==null?void 0:He.email]);A.useEffect(()=>{j(J&&re==="success"?J:null)},[J,re]);const ie=A.useMemo(()=>[...c0e,...d0e],[]),te=A.useMemo(()=>!s||!h?null:Object.keys(h.answers).find(le=>le.startsWith(s))||null,[h,s]);A.useEffect(()=>{if(te&&h){const le=UI.create(),Ie=dq({registry:le,initialState:{}});h.answers[te].provenanceGraph&&(Ie.importObject(Ah(h.answers[te].provenanceGraph)),V.current=Ie)}},[h,te]);const ae=A.useCallback(le=>{var Ie;le&&(te&&h&&V.current&&(v(y(V.current.getState((Ie=h.answers[te].provenanceGraph)==null?void 0:Ie.nodes[le]))),V.current.to(le)),f(le))},[h,y,v,te]),_e=A.useCallback(le=>{var Ie;if(!e){v(L(le)),v(y(null)),l(0);const Ye=h?Object.keys(h.answers).find(fe=>fe.startsWith(le)):"";if(h&&Ye&&h.answers[Ye].provenanceGraph){const fe=UI.create(),Te=dq({registry:fe,initialState:{}});Te.importObject(Ah(h.answers[Ye].provenanceGraph)),V.current=Te,ae(((Ie=h.answers[Ye].provenanceGraph)==null?void 0:Ie.root)||"")}else v(y(null)),f(null),V.current=null}},[ae,e,h,y,L,v]);A.useEffect(()=>{s&&_e(s)},[_e,s]);const ce=A.useMemo(()=>g3t(le=>v($(le)),200),[$,v]),ze=p1((le,Ie=!0)=>{if(h&&s&&te&&(h.answers[te].endTime-h.answers.audioTest_2.startTime)/1e3<le){const Ye=Rc(h.sequence);_e(Ye[Ye.indexOf(s)+1])}else h&&s&&V.current&&V.current.current.children.length>0&&(V.current.graph.backend.nodes[V.current.current.children[0]].createdOn-h.answers.audioTest_2.startTime)/1e3<le&&ae(V.current.current.children[0]);if(h&&s){const Ye=te?h.answers[te].startTime:h.answers.audioTest_2.startTime;S(le*1e3+Ye)}Ie&&ce(le)}),Oe=A.useCallback(le=>{if(le&&h&&t){const Ie=new Q$t;o==null||o.getAudio(Rc(h.sequence).filter(Ye=>T.tasksToNotRecordAudio===void 0||!T.tasksToNotRecordAudio.includes(Ye)).filter(Ye=>s?Ye===s:!0),t).then(Ye=>{le&&Ie.fetchAudio(...Ye).then(fe=>Ie.concatAudio(fe)).then(fe=>Ie.export(fe,"audio/mp3")).then(fe=>le.loadBlob(fe.blob).then(()=>{U(!1)})).catch(fe=>{throw new Error(fe)}),le.on("timeupdate",ze)})}},[T.tasksToNotRecordAudio,h,o,ze,s,t]),$e=A.useMemo(()=>[],[]),Ne=EAe({container:E.current,plugins:$e,onMount:Oe,progressColor:"cornflowerblue",waveColor:"lightgray"}),pe=A.useCallback((le,Ie)=>{S(le),Ne&&Ie&&setTimeout(()=>{Ne.seekTo(Ie)})},[S,Ne]),ue=A.useCallback(le=>{w(le),Ne&&(le?Ne.play():Ne.pause())},[Ne]);A.useEffect(()=>{ze(P,!1),Ne&&Math.abs(Ne.getCurrentTime()-P)>.8&&setTimeout(()=>{Ne.setTime(P)})},[P,ze,Ne]);const Se=A.useMemo(()=>{if(!h)return null;const le=Object.values(h.answers||{}).map(fe=>[fe.startTime,fe.endTime]).flat(),Ie=nh(le);return Ba([ez.left,c+ez.left+ez.right]).domain(te?[h.answers[te].startTime,h.answers[te].endTime]:Ie).clamp(!0)},[h,te,c]);A.useEffect(()=>{Oe(Ne)},[Oe,h,Ne]),A.useCallback(le=>{var Ie;if(le&&te&&h&&V.current&&Se){const Ye=h.answers[te].provenanceGraph.nodes[le];v(y(V.current.getState((Ie=h.answers[te].provenanceGraph)==null?void 0:Ie.nodes[le]))),V.current.to(le);const fe=Se.domain()[1]-Se.domain()[0];pe(Ye.createdOn+1,(Ye.createdOn-Se.domain()[0])/fe)}},[pe,h,y,v,te,Se]);const De=A.useCallback(le=>{if(!h)return;const Ie=ie.indexOf(h.participantId);le?I(`../../${s?"../":""}${ie[Ie+1]}/ui/reviewer-${s||""}`,{relative:"path"}):I(`../../${s?"../":""}${ie[Ie-1]}/ui/reviewer-${s||""}`,{relative:"path"})},[ie,I,h,s]);return b.jsx(gn,{wrap:"nowrap",gap:25,children:b.jsxs(Gr,{ref:u,style:{width:"100%"},gap:e?0:25,children:[e?null:b.jsx(Ya,{children:b.jsxs(gn,{children:[b.jsx(In,{children:b.jsx(ont,{onClick:()=>De(!1)})}),b.jsx(zl,{style:{width:"300px"},value:h==null?void 0:h.participantId,onChange:le=>{v(R(le)),I(`../../${s?"../":""}${le}/ui/reviewer-${s||""}`,{relative:"path"})},data:[...c0e,...d0e]}),b.jsx(zl,{style:{width:"300px"},clearable:!0,value:s,data:h?[...Rc(h.sequence)]:[],onChange:le=>I(`${s?"../":""}reviewer-${le||""}`,{relative:"path"})}),b.jsx(In,{children:b.jsx(ant,{onClick:()=>De(!0)})})]})}),p==="success"&&h&&Se?e?null:b.jsx(oMe,{trialFilter:te,xScale:Se,setSelectedTask:_e,participantData:h,width:c,height:200}):e?null:b.jsx(Ya,{style:{height:"275px"},children:b.jsx(is,{})}),Se&&h!==null?b.jsxs(b.Fragment,{children:[b.jsxs(ge,{ref:E,ml:h&&Se?Se(h.answers.audioTest_2.startTime):0,mr:h&&Se?Se(h.answers["post-study-survey_13"].startTime):0,style:{overflow:"visible",width:`${h&&!s?Se(h.answers["post-study-survey_13"].startTime)-Se(h.answers.audioTest_2.startTime):Se.range()[1]-Se.range()[0]}px`},children:[b.jsx(_Ae.Provider,{value:Ne,children:b.jsx(hJ,{id:"waveform"})}),F?b.jsx(is,{}):null]}),e?null:b.jsx(E3t,{startTime:s?Se.domain()[0]:h.answers.audioTest_2.startTime,xScale:Se,transcriptLines:M,currentShownTranscription:a})]}):null,p==="success"&&h&&Se?b.jsx(x3t,{xScale:Se,setSelectedTask:_e,playTime:x-h.answers.introduction_0.startTime,setPlayTime:pe,isPlaying:_,setIsPlaying:ue,currentNode:d,setCurrentNode:ae,participantData:h,width:c,height:50}):null,b.jsxs(gn,{align:"center",justify:"center",children:[b.jsx(In,{variant:"light",size:50,onClick:()=>ue(!_),children:_?b.jsx(Xnt,{}):b.jsx(Qnt,{})}),D&&m&&s&&t?b.jsx(pA,{tags:D||[],onSelectTags:le=>{if(o&&m){const Ie=Ah(m);Ie[t]||(Ie[t]={partTags:[],taskTags:{}}),Ie[t].taskTags[s]=le,o.saveAllParticipantAndTaskTags(Ie).then(()=>{g(t,o)})}},selectedTags:m&&m[t]?m[t].taskTags[s]||[]:[]}):null]}),s?b.jsx(Gr,{children:h&&J&&re==="success"&&q&&!e?b.jsx(E9t,{transcriptList:q,setTranscriptList:G,setCurrentShownTranscription:l,currentShownTranscription:a,participant:h,playTime:x,setTranscriptLines:z}):e?null:b.jsx(is,{})}):null]})})}const f0e=Object.assign({"../public/ThinkAloud/AddPlot.tsx":Ivt,"../public/ThinkAloud/AudioTest.tsx":qvt,"../public/ThinkAloud/Bar.tsx":L2t,"../public/ThinkAloud/BrushPlot.tsx":W$t,"../public/ThinkAloud/Histogram.tsx":H$t,"../public/ThinkAloud/Paintbrush.tsx":U$t,"../public/ThinkAloud/Scatter.tsx":V$t,"../public/ThinkAloud/Violin.tsx":q$t,"../public/ThinkAloud/XAxisBar.tsx":M2t,"../public/ThinkAloud/YAxis.tsx":z$t,"../public/ThinkAloud/YAxisBar.tsx":$2t,"../public/ThinkAloud/types.ts":G$t,"../public/ThinkAloud/useKdeCalc.tsx":K$t});function I9t({currentConfig:e,provState:t}){const n=Xy(),r=ap(),{trrackId:i}=Lc(),s=`../public/${e.path}`,o=s in f0e?f0e[s].default:null,a=Fc(),{updateResponseBlockValidation:l,setIframeAnswers:u}=ju(),c=A.useCallback(({status:d,provenanceGraph:f,answers:h})=>{a(l({location:"sidebar",identifier:`${r}_${n}`,status:d,values:h,provenanceGraph:f})),a(u(h))},[a,l,r,n,u]);return b.jsxs(A.Suspense,{fallback:b.jsx("div",{children:"Loading..."}),children:[o?b.jsx(o,{parameters:e.parameters,setAnswer:c,provenanceState:t}):b.jsx(iR,{path:e.path}),n.toString().startsWith("reviewer-")&&i?b.jsx(Ar.Footer,{p:"md",children:b.jsx(eLe,{mini:!0})}):null]})}function h0e({provState:e}){var I;const t=Bh(),n=pi(),r=Xy(),i=ap()||"Notfound",s=t.components[i],o=yQ(),a=O6(s)&&t.baseComponents?mQ({},(I=t.baseComponents)==null?void 0:I[s.baseComponent],s):s,l=a.instruction||"",{instructionLocation:u}=a,c=t.uiConfig.sidebar&&(u==="sidebar"||u===void 0),[d,f]=A.useState(null),h=Fc(),{setIsRecording:p}=ju(),{analysisTrialName:m,analysisProvState:g,analysisParticipantName:y}=Ro(k=>k),{trrackId:v}=Lc(),_=Zc(),[w,x]=A.useState(null);A.useEffect(()=>{i&&m&&v&&(i!==m||v!==y)&&_(`../../${y||v}/reviewer-${m}`,{relative:"path"})},[y,g,m,i,r,_,v]),A.useEffect(()=>{!r||!t||!t.recordStudyAudio||!n.storageEngine||(d&&w&&n.storageEngine.saveAudio(d,w),t.tasksToNotRecordAudio&&t.tasksToNotRecordAudio.includes(i)?(x(null),f(null),h(p(!1))):(navigator.mediaDevices.getUserMedia({audio:!0}).then(P=>{const L=new MediaRecorder(P);L.start(),f(L),h(p(!0))}),x(i)))},[i]),hAe();const{storageEngine:S}=pi(),E=Fc(),{setAlertModal:T}=ju();return A.useEffect(()=>{(S==null?void 0:S.getEngine())!=="firebase"&&E(T({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[T,S,E]),i==="end"?b.jsx(mAe,{}):i==="Notfound"?b.jsx(iR,{email:t.uiConfig.contactEmail}):b.jsxs(b.Fragment,{children:[u==="aboveStimulus"&&b.jsx(Ka,{text:l}),b.jsx(g$,{status:o,config:a,location:"aboveStimulus"},`${r}-above-response-block`),b.jsxs(A.Suspense,{fallback:b.jsx("div",{children:"Loading..."}),children:[a.type==="markdown"&&b.jsx(xht,{currentConfig:a}),a.type==="website"&&b.jsx(bht,{currentConfig:a}),a.type==="image"&&b.jsx(wht,{currentConfig:a}),a.type==="react-component"&&b.jsx(I9t,{currentConfig:a,provState:g})]},`${r}-stimulus`),(u==="belowStimulus"||u===void 0&&!c)&&b.jsx(Ka,{text:l}),b.jsx(g$,{status:o,config:a,location:"belowStimulus"},`${r}-below-response-block`)]})}function zq(e){const[t]=DX();return b.jsx(NX,{...e,to:{pathname:e.to,search:t.toString()}})}function k9t(e,t=!1){return typeof e=="number"?p0e(e,t):p0e(e.length,t).map(r=>r.map(i=>e[i]))}function p0e(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function tLe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=tLe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const u=Math.floor(Math.random()*r.length-1)+1;o.add(u)}const a=Array.from(o).sort((u,c)=>u-c);let l=0;for(let u=0;u<r.length;u+=1)u===a[l]&&(s.push(i.components),l+=1),s.push(r[u])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function R9t(e,t){const n=Ah(e);return tLe(n,t,"root")}function nLe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&nLe(s,t,i,o)})}function P9t(e){const t=[];return nLe(e,t,"",0),t}function m0e(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return k9t(i.sort(()=>.5-Math.random()),!0)}function N9t(e){const n=P9t(e.sequence).map(s=>({[s]:m0e(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=R9t(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=m0e(e,o))})}),i}function rLe(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>rLe(n,`${t}-${r}`))}}function O9t(){Ro(n=>n),ju();const e=Bh();Fc();const t=_S();return PX(`/${t}`),pi(),A.useMemo(()=>{let n=Ah(e.sequence);return n=rLe(n,"root"),n.components.push("end"),n},[e.sequence]),A.useState("participant"),null}function D9t(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function M9t({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=Ro(S=>S),i=pQ(),s=Fc(),{toggleShowHelpText:o,toggleStudyBrowser:a}=ju(),{storageEngine:l}=pi(),u=Ro(S=>S.isRecording),c=Xy(),d=i.length-1,f=typeof c=="number"?c/d*100:0,[h,p]=A.useState(!1),m=n==null?void 0:n.uiConfig.logoPath,g=n==null?void 0:n.uiConfig.withProgressBar,y=_S(),v=PX(`/${y}`),_=A.useRef(null),[w,x]=A.useState(!1);return A.useEffect(()=>{const S=_.current;S&&x(S.scrollWidth>S.offsetWidth)},[n]),b.jsx(Ar.Header,{p:"md",children:b.jsxs(xc,{mt:-7,align:"center",children:[b.jsx(xc.Col,{span:4,children:b.jsxs(Et,{align:"center",children:[b.jsx(Wy,{w:40,src:`${Qu}${m}`,alt:"Study Logo"}),b.jsx(kc,{w:"md"}),b.jsx(li,{order:4,children:n==null?void 0:n.studyMetadata.title}),u?b.jsxs(gn,{ml:"xl",gap:20,wrap:"nowrap",children:[b.jsx(Xe,{color:"red",children:"Recording audio"}),b.jsx(AAe,{})]}):null]})}),b.jsx(xc.Col,{span:4,children:g&&b.jsx(Yb,{radius:"md",size:"lg",value:f})}),b.jsx(xc.Col,{span:4,children:b.jsxs(gn,{wrap:"nowrap",justify:"right",children:[!t&&b.jsx(Xt,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, we’re not collecting any data.",children:b.jsx(pm,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&b.jsx(rn,{variant:"outline",onClick:()=>s(o()),children:"Help"}),b.jsxs(tn,{shadow:"md",width:200,withinPortal:!0,opened:h,onChange:p,children:[b.jsx(tn.Target,{children:b.jsx(In,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:b.jsx(USe,{})})}),b.jsxs(tn.Dropdown,{children:[e&&b.jsx(tn.Item,{leftSection:b.jsx(Vnt,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),b.jsx(tn.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:b.jsx(Lnt,{size:14}),children:"Contact"}),e&&b.jsx(tn.Item,{leftSection:b.jsx(XSe,{size:14}),onClick:()=>D9t(l,n,r,v),children:"Next Participant"})]})]})]})})]})})}function $9t(){var l;const e=(l=Bh())==null?void 0:l.uiConfig.sidebar,t=Bh(),n=ap(),r=t.components[n],i=A.useMemo(()=>{var u;return r?O6(r)&&t.baseComponents?mQ({},(u=t.baseComponents)==null?void 0:u[r.baseComponent],r):r:null},[r,t.baseComponents]),s=yQ(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?b.jsxs(Ar.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&b.jsx(Ar.Section,{bg:"gray.3",p:"md",children:b.jsxs(Xe,{c:"gray.9",children:[b.jsx(Xe,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),b.jsx(Ka,{text:o})]})}),b.jsx(Ar.Section,{p:"md",children:b.jsx(g$,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):b.jsx(Ar.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:b.jsx(g$,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function L9t(){const{showHelpText:e,config:t}=Ro(l=>l),n=Fc(),{toggleShowHelpText:r}=ju(),[i,s]=A.useState(""),[o,a]=A.useState(!0);return A.useEffect(()=>{async function l(){const u=await gQ(t.uiConfig.helpTextPath);u!==void 0&&s(u),a(!1)}l()},[t.uiConfig.helpTextPath]),b.jsx(as,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?b.jsx(Ka,{text:i}):b.jsx(iR,{path:t.uiConfig.helpTextPath})})}function F9t(){const{alertModal:e}=Ro(o=>o),{setAlertModal:t}=ju(),n=Fc(),[r,i]=A.useState(e.show),s=A.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return A.useEffect(()=>i(e.show),[e.show]),b.jsx(as,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:b.jsxs(lS,{color:"red",radius:"xs",title:"Alert",icon:b.jsx(int,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[b.jsx(Xe,{my:"md",children:e.message}),b.jsx(gn,{w:"100%",justify:"end",children:b.jsx(rn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function j9t(){const e=A.useRef([]),t=Bh(),n=t.uiConfig.windowEventDebounceTime??100,r=Ro(f=>f.showStudyBrowser);A.useEffect(()=>{const f=vd(x=>{e.current.push([Date.now(),"focus",x.target instanceof HTMLElement?x.target.tagName:""])},n,{maxWait:n}),h=vd(x=>{e.current.push([Date.now(),"input",x.data??""])},n,{maxWait:n}),p=vd(x=>{e.current.push([Date.now(),"keypress",x.key])},n,{maxWait:n}),m=vd(x=>{e.current.push([Date.now(),"mousedown",[x.clientX,x.clientY]])},n,{maxWait:n}),g=vd(x=>{e.current.push([Date.now(),"mouseup",[x.clientX,x.clientY]])},n,{maxWait:n}),y=vd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=vd(x=>{e.current.push([Date.now(),"mousemove",[x.clientX,x.clientY]])},n,{maxWait:n}),_=vd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=vd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",f,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",_),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",f,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",_),document.removeEventListener("visibilitychange",w)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=pi(),o=_S(),[a,l]=A.useState(!1),[u,c]=A.useState(!1);A.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);l(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const d=A.useMemo(()=>a&&r,[a,r]);return b.jsx(gAe.Provider,{value:e,children:b.jsxs(Ar,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!d,mobile:!d}},children:[b.jsx($9t,{}),b.jsx(O9t,{}),b.jsx(M9t,{studyNavigatorEnabled:a,dataCollectionEnabled:u}),b.jsx(L9t,{}),b.jsx(F9t,{}),b.jsx(Ar.Main,{children:b.jsx(Ltt,{})})]})})}const tz={left:5,top:0,right:5,bottom:0};function B9t(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`;return`${t<10?`0${t}`:`${t}`}h ${s}m ${i}s`}function z9t({participant:e,maxDuration:t}){const n=Zc(),r=lg(),i=A.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const u=Object.values(e.answers).sort((c,d)=>c.startTime-d.startTime);return new Date(u[u.length-1].endTime-(u[1]?u[1].startTime:0)).getTime()},[e]),[s,{width:o}]=Vd(),a=A.useMemo(()=>!e.answers||Object.entries(e.answers).length===0?0:hI(Object.values(e.answers).map(c=>c.provenanceGraph?Object.keys(c.provenanceGraph.nodes).length:0)),[e]),l=A.useMemo(()=>{if(!e)return null;const u=Object.values(e.answers||{}).map(f=>[f.startTime,f.endTime]).flat(),c=nh(u);return Ba([tz.left,o+tz.left+tz.right]).domain(c).clamp(!0)},[e,o]);return b.jsx(Ya,{children:b.jsxs(Gr,{gap:25,ref:s,style:{width:"75%"},children:[b.jsxs(gn,{justify:"space-between",children:[b.jsx(Hy,{size:"25px",component:OX,target:"_blank",to:`${r.pathname}/${e.participantId}/ui`,onClick:()=>n(`${e.participantId}/reviewer-${Rc(e.sequence)[0]}`),children:e.participantId}),b.jsx(Xe,{size:"xl",children:`${a}`}),b.jsx(Xe,{size:"xl",children:`${B9t(i)}`})]}),l?b.jsx(oMe,{xScale:l,setSelectedTask:()=>null,participantData:e,width:o,height:250}):null]},e.participantId)})}function U9t(e){return e?e.getAllParticipantsData():null}const V9t=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],H9t=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function q9t(){const{storageEngine:e}=pi(),{value:t,status:n}=Md(U9t,[e]),r=A.useMemo(()=>{if(!(n!=="success"||!t))return Pc(t==null?void 0:t.map(i=>{if(!i.answers||Object.entries(i.answers).length===0)return 0;const s=Object.values(i.answers).sort((o,a)=>o.startTime-a.startTime);return new Date(s[s.length-1].endTime-s[0].startTime).getTime()}))},[t,n]);return n==="success"&&t?b.jsx(Gr,{gap:50,style:{width:"100%"},children:t==null?void 0:t.filter(i=>H9t.includes(i.participantId)||V9t.includes(i.participantId)).map(i=>b.jsx(z9t,{maxDuration:r,participant:i},i.participantId))}):b.jsx(is,{})}function W9t({setProvState:e}){return b.jsx("div",{children:b.jsx(Ar.Main,{p:"sm",children:b.jsx(eLe,{mini:!1})})})}async function G9t(e){const t=await(await fetch(`${Qu}${e}`)).text();return Vyt(t)}async function nj(e,t){const n=t.configsList.find(r=>QSe(r)===e);if(n){const r=t.configs[n];return await G9t(`${r.path}`)}return null}async function Y9t(e){const t={},n=e.configsList.filter(i=>!e.configs[i].test).map(async i=>nj(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function K9t({studyId:e,config:t}){const{sequence:n}=Ro(i=>i),r=A.useMemo(()=>{if(e&&t&&n){const i=[];return i.push({path:"/",element:b.jsx(zq,{to:"0",replace:!0})}),i.push({path:"/:index",element:t.errors.length>0?b.jsxs(b.Fragment,{children:[b.jsx(li,{order:2,mb:8,children:"Error loading config"}),b.jsx(rV,{issues:t.errors,type:"error"})]}):b.jsx(h0e,{})}),i.push({path:"/analysis/:trrackId/:index/",element:b.jsx(h0e,{})}),i.push({path:"/analysis/:trrackId/ui/:index?/",element:b.jsx(Ar,{header:{height:70},navbar:{collapsed:{desktop:!0,mobile:!0},width:0,breakpoint:"xs"},aside:{collapsed:{desktop:!0,mobile:!0},width:0,breakpoint:"xs"},children:b.jsx(W9t,{setProvState:()=>null})})}),i.push({path:"/analysis",element:b.jsx(q9t,{})}),i.push({path:"/end",element:b.jsx(mAe,{})}),[{element:b.jsx(j9t,{}),children:i}]}return[]},[t,n,e]);return FSe(r)}function X9t({globalConfig:e}){const t=_S(),[n,r]=A.useState(null);e.configsList.includes(t),A.useEffect(()=>{nj(t,e).then(u=>{r(u)})},[e,t]);const[i,s]=A.useState(null),{storageEngine:o}=pi(),[a]=DX();return A.useEffect(()=>{async function u(){if(!o||!n||!t)return;await o.initializeStudyDb(t,n),await o.getSequenceArray()||await o.setSequenceArray(await N9t(n));const d=n.uiConfig.urlParticipantIdParam&&a.get(n.uiConfig.urlParticipantIdParam)||void 0,f=Object.fromEntries(a.entries()),h=await fetch("https://api.ipify.org?format=json").catch(v=>""),p=h instanceof Response?await h.json():{ip:""},m={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:p.ip},g=await o.initializeParticipantSession(t,f,n,m,d),y=await mht(t,n,g.sequence,m,g.answers);s(y)}u()},[o,n,t,a]),i?b.jsx(c2e.Provider,{value:i,children:b.jsx(rdt,{store:i.store,children:b.jsx(K9t,{studyId:t,config:n})})}):b.jsx(Gl,{visible:!0})}function wA({studyIds:e}){const t=Zc(),{studyId:n}=Lc(),r=lg(),i=e.map(f=>({value:f,label:f})),{storageEngine:s}=pi(),{user:o,logout:a}=pp(),[l,u]=A.useState(!1),c=r.pathname.includes("analysis"),d=[{name:"Studies",leftIcon:b.jsx(Rnt,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:b.jsx(pnt,{}),href:"/analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:b.jsx(GSe,{}),href:"/settings",needAdmin:!0}];return b.jsx(Ar.Header,{p:"md",children:b.jsxs(xc,{mt:-7,align:"center",children:[b.jsx(xc.Col,{span:6,children:b.jsxs(Et,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[b.jsx(Wy,{w:40,src:`${Qu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),b.jsx(kc,{w:"md"}),b.jsx(li,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),b.jsx(xc.Col,{span:6,children:b.jsxs(Et,{justify:"flex-end",direction:"row",children:[c&&b.jsx(zl,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:f=>t(`/analysis/stats/${f}`),mr:16}),b.jsx(LK,{opened:!1,onClick:()=>u(!0),style:{visibility:l?"hidden":void 0}}),b.jsx(ip,{opened:l,onClose:()=>u(!1),position:"right",withCloseButton:!1,children:b.jsxs(Et,{direction:"column",mt:20,children:[b.jsx(Xe,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),d.map(f=>f.needAdmin?o.isAdmin?b.jsx(rn,{leftSection:f.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(f.href),u(!1)},children:f.name},`menu-item-${f.name}`):null:b.jsx(rn,{leftSection:f.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(f.href),u(!1)},children:f.name},`menu-item-${f.name}`)),b.jsxs(ge,{ml:10,children:[b.jsx(OF,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?b.jsx(Xe,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),u(!1)},children:"Logout"}):b.jsx(Xe,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),u(!1)},children:"Login"}):null]})]})})]})})]})})}function iLe({allParticipants:e,studyId:t}){const[n,{close:r,open:i}]=B2(!1),[s,{close:o,open:a}]=B2(!1),[l,{open:u,close:c}]=B2(!1);return b.jsxs(b.Fragment,{children:[b.jsxs(gn,{children:[b.jsxs(Tn,{opened:n,children:[b.jsx(Tn.Target,{children:b.jsx(rn,{variant:"light",disabled:e.length===0,onClick:()=>{fJ(JSON.stringify(e),`${t}_all.json`)},onMouseEnter:i,onMouseLeave:r,px:4,children:b.jsx(Cnt,{})})}),b.jsx(Tn.Dropdown,{children:b.jsx(Xe,{children:"Download all participants data as JSON"})})]}),b.jsxs(Tn,{opened:s,children:[b.jsx(Tn.Target,{children:b.jsx(rn,{variant:"light",disabled:e.length===0,onClick:u,onMouseEnter:a,onMouseLeave:o,px:4,children:b.jsx(YSe,{})})}),b.jsx(Tn.Dropdown,{children:b.jsx(Xe,{children:"Download all participants data as a tidy CSV"})})]})]}),l&&b.jsx(Yyt,{opened:l,close:c,filename:`${t}_all_tidy.csv`,data:e,studyId:t})]})}function Q9t({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return b.jsxs(Wn.Td,{children:[t.toFixed(1)," ","s"]})}function J9t(e){const{metaData:t}=e;return b.jsx(Wn.Td,{children:b.jsx(yX,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:b.jsxs(Gr,{gap:"xs",children:[b.jsxs(ge,{children:["IP:"," ",t.ip]}),b.jsxs(ge,{children:["Language:"," ",t.language]}),b.jsxs(ge,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),b.jsxs(ge,{children:["User Agent:"," ",t.userAgent]})]})})})}function Z9t({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=pi(),{studyId:s}=Lc(),{user:o}=pp(),a=async g=>{i&&s&&(o.isAdmin?(await i.rejectParticipant(s,g),await r()):console.warn("You are not authorized to perform this action."))},[l,u]=A.useState([]),[c,d]=A.useState(!1),f=()=>UU({title:"Confirm rejecting participants",children:b.jsxs(Xe,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",b.jsx(Xe,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{d(!0);const g=l.map(async y=>await a(y));await Promise.all(g),u([]),await r(),d(!1)}});function h(g){g==="all"?l.length===[...e,...t].length?u([]):u([...e,...t].map(y=>y.participantId)):l.includes(g)?u(l.filter(y=>y!==g)):u([...l,g])}hQ(n.sequence);const p=[b.jsx(Wn.Th,{children:b.jsx(Et,{justify:"center",children:b.jsx(sf,{mb:-4,checked:l.length===[...e,...t].length,onChange:()=>h("all")})})},"action"),b.jsx(Wn.Th,{children:"ID"},"ID"),b.jsx(Wn.Th,{children:"Status"},"status"),b.jsx(Wn.Th,{children:"Meta"},"meta"),b.jsx(Wn.Th,{children:"Total Duration"},"total-duration")],m=[...e,...t].map(g=>b.jsxs(Wn.Tr,{children:[b.jsx(Wn.Td,{children:b.jsx(Et,{justify:"center",children:b.jsx(sf,{mb:-4,checked:l.includes(g.participantId),onChange:()=>h(g.participantId)})})}),b.jsx(Wn.Td,{style:{whiteSpace:"nowrap"},children:g.participantId}),b.jsx(Wn.Td,{children:b.jsxs(Et,{direction:"row",align:"center",children:[g.rejected?b.jsx(Xt,{label:"Rejected",children:b.jsx(u6,{size:16,color:"red",style:{marginBottom:-3}})}):g.completed?b.jsx(Xt,{label:"Completed",children:b.jsx(zSe,{size:16,color:"teal",style:{marginBottom:-3}})}):b.jsx(Xt,{label:"In Progress",children:b.jsx(qSe,{size:16,color:"orange",style:{marginBottom:-3}})}),!g.completed&&b.jsxs(Xe,{size:"sm",mb:-1,ml:4,children:[(Object.entries(g.answers).filter(([y,v])=>v.endTime!==void 0).length/(Rc(g.sequence).length-1)*100).toFixed(2),"%"]})]})}),g.metadata?b.jsx(J9t,{metaData:g.metadata}):b.jsx(Wn.Td,{children:"N/A"}),b.jsx(Q9t,{cellData:{startTime:Math.min(...Object.values(g.answers).map(y=>y.startTime)),endTime:Math.max(...Object.values(g.answers).map(y=>y.endTime)),answer:{},windowEvents:[]}},`cell-${g.participantId}-total-duration`)]},g.participantId));return[...e,...t].length>0?b.jsxs(b.Fragment,{children:[b.jsx(Gl,{visible:c,overlayProps:{blur:2}}),b.jsxs(Et,{justify:"space-between",mb:8,p:8,children:[b.jsx(gn,{children:b.jsx(zl,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(g=>({value:g.participantId,label:g.participantId})),searchable:!0,value:null,leftSection:b.jsx(WSe,{size:14}),onChange:g=>g&&h(g)})}),b.jsxs(gn,{children:[b.jsx(iLe,{allParticipants:[...e,...t],studyId:s||""}),b.jsx(rn,{disabled:l.length===0||!o.isAdmin,onClick:f,color:"red",children:"Reject Participants"})]})]}),b.jsx(Et,{direction:"column",style:{width:"100%",overflow:"auto"},children:b.jsxs(Wn,{striped:!0,withTableBorder:!0,children:[b.jsx(Wn.Thead,{children:b.jsx(Wn.Tr,{children:p})}),b.jsx(Wn.Tbody,{children:m})]})})]}):b.jsx(Et,{justify:"center",align:"center",style:{height:"100%"},children:b.jsx(Xe,{children:"No data available"})})}const X_=14;function sLe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return b.jsxs(Et,{ml:4,gap:4,children:[b.jsx(Xt,{label:"Completed",children:b.jsx(pm,{variant:"light",color:"green",leftSection:b.jsx(zSe,{width:X_,height:X_,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),b.jsx(Xt,{label:"In Progress",children:b.jsx(pm,{variant:"light",color:"orange",leftSection:b.jsx(qSe,{width:X_,height:X_,style:{paddingTop:1}}),pb:1,children:t})}),b.jsx(Xt,{label:"Rejected",children:b.jsx(pm,{variant:"light",color:"red",leftSection:b.jsx(u6,{width:X_,height:X_,style:{paddingTop:1}}),pb:1,children:n})})]})}function ezt({studyId:e,refresh:t}){const[n,r]=A.useState(!1),[i,s]=A.useState(!1),[o,a]=A.useState(!1),[l,u]=A.useState(""),[c,d]=A.useState([]),[f,h]=A.useState(""),[p,m]=A.useState(!1),[g,y]=A.useState(!1),{storageEngine:v}=pi(),_=v,w=A.useCallback(async()=>{y(!0);const L=await _.getSnapshots(e);d(L),y(!1)},[_,e]);A.useEffect(()=>{w()},[w]);const x=async()=>{m(!0),await _.createSnapshot(e,!1),w(),m(!1),await t()},S=async()=>{m(!0),h(""),r(!1),await _.createSnapshot(e,!0),w(),m(!1),await t()},E=async L=>{m(!0),await _.restoreSnapshot(e,L),w(),m(!1),await t()},T=async()=>{m(!0),h(""),s(!1),await _.removeSnapshotOrLive(l,!0),w(),m(!1),await t()},I=async()=>{m(!0),h(""),a(!1),await _.removeSnapshotOrLive(e,!0),w(),m(!1),await t()},k=()=>UU({title:"Create a Snapshot",children:b.jsx(Xe,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>x()}),P=L=>UU({title:"Restore Snapshot",children:b.jsx(Xe,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>E(L)});return b.jsxs(b.Fragment,{children:[b.jsx(Gl,{visible:p}),b.jsxs(Et,{justify:"space-between",align:"center",children:[b.jsxs(ge,{style:{width:"70%"},children:[b.jsx(li,{order:5,children:"Create a Snapshot"}),b.jsxs(Xe,{children:["This will create a snapshot of the live"," ",b.jsx(Xe,{span:!0,fw:700,children:e})," ","database. It will"," ",b.jsx(Xe,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),b.jsx(Xt,{label:"Create a snapshot",children:b.jsx(rn,{onClick:k,children:"Snapshot"})})]}),b.jsx(kc,{h:"lg"}),b.jsxs(Et,{justify:"space-between",align:"center",children:[b.jsxs(ge,{style:{width:"70%"},children:[b.jsx(li,{order:5,children:"Archive Data"}),b.jsxs(Xe,{children:["This will create a snapshot of the live"," ",b.jsx(Xe,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),b.jsx(Xt,{label:"Snapshot and Delete Data",children:b.jsx(rn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),b.jsx(kc,{h:"lg"}),b.jsxs(Et,{justify:"space-between",align:"center",children:[b.jsxs(ge,{style:{width:"70%"},children:[b.jsx(li,{order:5,children:"Delete Data"}),b.jsxs(Xe,{children:["This will delete the live"," ",b.jsx(Xe,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),b.jsx(Xt,{label:"Delete Data",children:b.jsx(rn,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),b.jsx(kc,{h:"xl"}),b.jsxs(Et,{direction:"column",children:[b.jsx(Et,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:b.jsx(li,{order:5,children:"Snapshots"})}),b.jsxs(ge,{style:{position:"relative"},children:[b.jsx(Gl,{visible:g}),c.length>0?c.map(L=>b.jsxs(Et,{justify:"space-between",mb:"xs",children:[b.jsx(Xe,{children:L}),b.jsxs(Et,{direction:"row",gap:"xs",children:[b.jsx(Xt,{label:"Restore Snapshot",children:b.jsx(In,{color:"blue",variant:"subtle",onClick:()=>{P(L)},children:b.jsx(Unt,{})})}),b.jsx(Xt,{label:"Delete Snapshot",children:b.jsx(In,{color:"red",variant:"subtle",onClick:()=>{s(!0),u(L)},children:b.jsx(KSe,{})})})]})]},L)):b.jsx(Xe,{children:"No snapshots."})]})]}),b.jsxs(as,{opened:n,onClose:()=>{r(!1),h("")},title:b.jsx(Xe,{children:"Archive Data"}),children:[b.jsx(Xe,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),b.jsx(qd,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:L=>h(L.target.value)}),b.jsxs(Et,{mt:"sm",justify:"right",children:[b.jsx(rn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),b.jsx(rn,{color:"red",onClick:S,disabled:f!==e,children:"Archive"})]})]}),b.jsxs(as,{opened:i,onClose:()=>{s(!1),h("")},title:b.jsx(Xe,{children:"Delete Snapshot"}),children:[b.jsxs(Xe,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",b.jsx(Xe,{span:!0,fw:700,children:"irreversible"}),"."]}),b.jsx(qd,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:L=>h(L.target.value)}),b.jsxs(Et,{mt:"sm",justify:"right",children:[b.jsx(rn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),b.jsx(rn,{color:"red",onClick:T,disabled:f!==e,children:"Delete"})]})]}),b.jsxs(as,{opened:o,onClose:()=>{a(!1),h("")},title:b.jsx(Xe,{children:"Delete Live Data"}),children:[b.jsxs(Xe,{mb:"sm",children:["This will permanently delete the live"," ",b.jsx(Xe,{span:!0,fw:700,children:e})," ","data. This action is"," ",b.jsx(Xe,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),b.jsx(qd,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:L=>h(L.target.value)}),b.jsxs(Et,{mt:"sm",justify:"right",children:[b.jsx(rn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),b.jsx(rn,{color:"red",onClick:I,disabled:f!==e,children:"Delete"})]})]})]})}function tzt({studyId:e}){const{storageEngine:t}=pi(),[n,r]=A.useState(!1),[i,s]=A.useState(!1),[o,a]=A.useState(!1),[l,u]=A.useState(!1);A.useEffect(()=>{(async()=>{if(t){const f=await t.getModes(e);s(f.dataCollectionEnabled),a(f.studyNavigatorEnabled),u(f.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(d,f)=>{t&&(await t.setMode(e,d,f),d==="dataCollectionEnabled"?s(f):d==="studyNavigatorEnabled"?a(f):d==="analyticsInterfacePubliclyAccessible"&&u(f))};return n&&b.jsxs(Gr,{children:[b.jsx($0,{label:"Data Collection Enabled",checked:i,onChange:d=>c("dataCollectionEnabled",d.currentTarget.checked)}),b.jsx($0,{label:"Study Navigator Enabled",checked:o,onChange:d=>c("studyNavigatorEnabled",d.currentTarget.checked)}),b.jsx($0,{label:"Analytics Interface Publicly Accessible",checked:l,onChange:d=>c("analyticsInterfacePubliclyAccessible",d.currentTarget.checked)})]})}function nzt({studyId:e,refresh:t}){const{storageEngine:n}=pi();return b.jsx(bf,{children:b.jsxs(na,{multiple:!0,variant:"contained",children:[b.jsxs(na.Item,{value:"ReVISit Modes",children:[b.jsx(na.Control,{children:b.jsx(li,{order:5,children:"ReVISit Modes"})}),b.jsx(na.Panel,{children:b.jsx(tzt,{studyId:e})})]},"modes"),b.jsxs(na.Item,{value:"Data Management",children:[b.jsx(na.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:b.jsx(li,{order:5,children:"Data Management"})}),b.jsx(na.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&b.jsx(ezt,{studyId:e,refresh:t})})]},"dataManagement")]})})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function b0(e,t){return typeof e=="function"?e(t):e}function Hu(e,t){return n=>{t.setState(r=>({...r,[e]:b0(n,r[e])}))}}function rj(e){return e instanceof Function}function rzt(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function oLe(e,t){const n=[],r=i=>{i.forEach(s=>{n.push(s);const o=t(s);o!=null&&o.length&&r(o)})};return r(e),n}function Ft(e,t,n){let r=[],i;return s=>{let o;n.key&&n.debug&&(o=Date.now());const a=e(s);if(!(a.length!==r.length||a.some((c,d)=>r[d]!==c)))return i;r=a;let u;if(n.key&&n.debug&&(u=Date.now()),i=t(...a),n==null||n.onChange==null||n.onChange(i),n.key&&n.debug&&n!=null&&n.debug()){const c=Math.round((Date.now()-o)*100)/100,d=Math.round((Date.now()-u)*100)/100,f=d/16,h=(p,m)=>{for(p=String(p);p.length<m;)p=" "+p;return p};console.info(`%c⏱ ${h(d,5)} /${h(c,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,n==null?void 0:n.key)}return i}}function jt(e,t,n,r){return{debug:()=>{var i;return(i=e==null?void 0:e.debugAll)!=null?i:e[t]},key:!1,onChange:r}}function izt(e,t,n,r){const i=()=>{var o;return(o=s.getValue())!=null?o:e.options.renderFallbackValue},s={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(r),renderValue:i,getContext:Ft(()=>[e,n,t,s],(o,a,l,u)=>({table:o,column:a,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),jt(e.options,"debugCells"))};return e._features.forEach(o=>{o.createCell==null||o.createCell(s,n,t,e)},{}),s}function szt(e,t,n,r){var i,s;const a={...e._getDefaultColumnDef(),...t},l=a.accessorKey;let u=(i=(s=a.id)!=null?s:l?l.replace(".","_"):void 0)!=null?i:typeof a.header=="string"?a.header:void 0,c;if(a.accessorFn?c=a.accessorFn:l&&(l.includes(".")?c=f=>{let h=f;for(const m of l.split(".")){var p;h=(p=h)==null?void 0:p[m]}return h}:c=f=>f[a.accessorKey]),!u)throw new Error;let d={id:`${String(u)}`,accessorFn:c,parent:r,depth:n,columnDef:a,columns:[],getFlatColumns:Ft(()=>[!0],()=>{var f;return[d,...(f=d.columns)==null?void 0:f.flatMap(h=>h.getFlatColumns())]},jt(e.options,"debugColumns")),getLeafColumns:Ft(()=>[e._getOrderColumnsFn()],f=>{var h;if((h=d.columns)!=null&&h.length){let p=d.columns.flatMap(m=>m.getLeafColumns());return f(p)}return[d]},jt(e.options,"debugColumns"))};for(const f of e._features)f.createColumn==null||f.createColumn(d,e);return d}const Qo="debugHeaders";function g0e(e,t,n){var r;let s={id:(r=n.id)!=null?r:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],a=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(a),o.push(l)};return a(s),o},getContext:()=>({table:e,header:s,column:t})};return e._features.forEach(o=>{o.createHeader==null||o.createHeader(s,e)}),s}const ozt={createTable:e=>{e.getHeaderGroups=Ft(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>{var s,o;const a=(s=r==null?void 0:r.map(d=>n.find(f=>f.id===d)).filter(Boolean))!=null?s:[],l=(o=i==null?void 0:i.map(d=>n.find(f=>f.id===d)).filter(Boolean))!=null?o:[],u=n.filter(d=>!(r!=null&&r.includes(d.id))&&!(i!=null&&i.includes(d.id)));return fO(t,[...a,...u,...l],e)},jt(e.options,Qo)),e.getCenterHeaderGroups=Ft(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>(n=n.filter(s=>!(r!=null&&r.includes(s.id))&&!(i!=null&&i.includes(s.id))),fO(t,n,e,"center")),jt(e.options,Qo)),e.getLeftHeaderGroups=Ft(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,r)=>{var i;const s=(i=r==null?void 0:r.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?i:[];return fO(t,s,e,"left")},jt(e.options,Qo)),e.getRightHeaderGroups=Ft(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,r)=>{var i;const s=(i=r==null?void 0:r.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?i:[];return fO(t,s,e,"right")},jt(e.options,Qo)),e.getFooterGroups=Ft(()=>[e.getHeaderGroups()],t=>[...t].reverse(),jt(e.options,Qo)),e.getLeftFooterGroups=Ft(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),jt(e.options,Qo)),e.getCenterFooterGroups=Ft(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),jt(e.options,Qo)),e.getRightFooterGroups=Ft(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),jt(e.options,Qo)),e.getFlatHeaders=Ft(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),jt(e.options,Qo)),e.getLeftFlatHeaders=Ft(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),jt(e.options,Qo)),e.getCenterFlatHeaders=Ft(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),jt(e.options,Qo)),e.getRightFlatHeaders=Ft(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),jt(e.options,Qo)),e.getCenterLeafHeaders=Ft(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),jt(e.options,Qo)),e.getLeftLeafHeaders=Ft(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),jt(e.options,Qo)),e.getRightLeafHeaders=Ft(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),jt(e.options,Qo)),e.getLeafHeaders=Ft(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,r)=>{var i,s,o,a,l,u;return[...(i=(s=t[0])==null?void 0:s.headers)!=null?i:[],...(o=(a=n[0])==null?void 0:a.headers)!=null?o:[],...(l=(u=r[0])==null?void 0:u.headers)!=null?l:[]].map(c=>c.getLeafHeaders()).flat()},jt(e.options,Qo))}};function fO(e,t,n,r){var i,s;let o=0;const a=function(f,h){h===void 0&&(h=1),o=Math.max(o,h),f.filter(p=>p.getIsVisible()).forEach(p=>{var m;(m=p.columns)!=null&&m.length&&a(p.columns,h+1)},0)};a(e);let l=[];const u=(f,h)=>{const p={depth:h,id:[r,`${h}`].filter(Boolean).join("_"),headers:[]},m=[];f.forEach(g=>{const y=[...m].reverse()[0],v=g.column.depth===p.depth;let _,w=!1;if(v&&g.column.parent?_=g.column.parent:(_=g.column,w=!0),y&&(y==null?void 0:y.column)===_)y.subHeaders.push(g);else{const x=g0e(n,_,{id:[r,h,_.id,g==null?void 0:g.id].filter(Boolean).join("_"),isPlaceholder:w,placeholderId:w?`${m.filter(S=>S.column===_).length}`:void 0,depth:h,index:m.length});x.subHeaders.push(g),m.push(x)}p.headers.push(g),g.headerGroup=p}),l.push(p),h>0&&u(m,h-1)},c=t.map((f,h)=>g0e(n,f,{depth:o,index:h}));u(c,o-1),l.reverse();const d=f=>f.filter(p=>p.column.getIsVisible()).map(p=>{let m=0,g=0,y=[0];p.subHeaders&&p.subHeaders.length?(y=[],d(p.subHeaders).forEach(_=>{let{colSpan:w,rowSpan:x}=_;m+=w,y.push(x)})):m=1;const v=Math.min(...y);return g=g+v,p.colSpan=m,p.rowSpan=g,{colSpan:m,rowSpan:g}});return d((i=(s=l[0])==null?void 0:s.headers)!=null?i:[]),l}const YR=(e,t,n,r,i,s,o)=>{let a={id:t,index:r,original:n,depth:i,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(a._valuesCache.hasOwnProperty(l))return a._valuesCache[l];const u=e.getColumn(l);if(u!=null&&u.accessorFn)return a._valuesCache[l]=u.accessorFn(a.original,r),a._valuesCache[l]},getUniqueValues:l=>{if(a._uniqueValuesCache.hasOwnProperty(l))return a._uniqueValuesCache[l];const u=e.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(a._uniqueValuesCache[l]=u.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[l]):(a._uniqueValuesCache[l]=[a.getValue(l)],a._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=a.getValue(l))!=null?u:e.options.renderFallbackValue},subRows:s??[],getLeafRows:()=>oLe(a.subRows,l=>l.subRows),getParentRow:()=>a.parentId?e.getRow(a.parentId,!0):void 0,getParentRows:()=>{let l=[],u=a;for(;;){const c=u.getParentRow();if(!c)break;l.push(c),u=c}return l.reverse()},getAllCells:Ft(()=>[e.getAllLeafColumns()],l=>l.map(u=>izt(e,a,u,u.id)),jt(e.options,"debugRows")),_getAllCellsByColumnId:Ft(()=>[a.getAllCells()],l=>l.reduce((u,c)=>(u[c.column.id]=c,u),{}),jt(e.options,"debugRows"))};for(let l=0;l<e._features.length;l++){const u=e._features[l];u==null||u.createRow==null||u.createRow(a,e)}return a},azt={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},aLe=(e,t,n)=>{var r;const i=n.toLowerCase();return!!(!((r=e.getValue(t))==null||(r=r.toString())==null||(r=r.toLowerCase())==null)&&r.includes(i))};aLe.autoRemove=e=>Jd(e);const lLe=(e,t,n)=>{var r;return!!(!((r=e.getValue(t))==null||(r=r.toString())==null)&&r.includes(n))};lLe.autoRemove=e=>Jd(e);const uLe=(e,t,n)=>{var r;return((r=e.getValue(t))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};uLe.autoRemove=e=>Jd(e);const cLe=(e,t,n)=>{var r;return(r=e.getValue(t))==null?void 0:r.includes(n)};cLe.autoRemove=e=>Jd(e)||!(e!=null&&e.length);const dLe=(e,t,n)=>!n.some(r=>{var i;return!((i=e.getValue(t))!=null&&i.includes(r))});dLe.autoRemove=e=>Jd(e)||!(e!=null&&e.length);const fLe=(e,t,n)=>n.some(r=>{var i;return(i=e.getValue(t))==null?void 0:i.includes(r)});fLe.autoRemove=e=>Jd(e)||!(e!=null&&e.length);const hLe=(e,t,n)=>e.getValue(t)===n;hLe.autoRemove=e=>Jd(e);const pLe=(e,t,n)=>e.getValue(t)==n;pLe.autoRemove=e=>Jd(e);const Gte=(e,t,n)=>{let[r,i]=n;const s=e.getValue(t);return s>=r&&s<=i};Gte.resolveFilterValue=e=>{let[t,n]=e,r=typeof t!="number"?parseFloat(t):t,i=typeof n!="number"?parseFloat(n):n,s=t===null||Number.isNaN(r)?-1/0:r,o=n===null||Number.isNaN(i)?1/0:i;if(s>o){const a=s;s=o,o=a}return[s,o]};Gte.autoRemove=e=>Jd(e)||Jd(e[0])&&Jd(e[1]);const Zf={includesString:aLe,includesStringSensitive:lLe,equalsString:uLe,arrIncludes:cLe,arrIncludesAll:dLe,arrIncludesSome:fLe,equals:hLe,weakEquals:pLe,inNumberRange:Gte};function Jd(e){return e==null||e===""}const lzt={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:Hu("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);return typeof r=="string"?Zf.includesString:typeof r=="number"?Zf.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?Zf.equals:Array.isArray(r)?Zf.arrIncludes:Zf.weakEquals},e.getFilterFn=()=>{var n,r;return rj(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(r=t.options.filterFns)==null?void 0:r[e.columnDef.filterFn])!=null?n:Zf[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,r,i;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((r=t.options.enableColumnFilters)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(r=>r.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,r;return(n=(r=t.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(r=>{const i=e.getFilterFn(),s=r==null?void 0:r.find(c=>c.id===e.id),o=b0(n,s?s.value:void 0);if(y0e(i,o,e)){var a;return(a=r==null?void 0:r.filter(c=>c.id!==e.id))!=null?a:[]}const l={id:e.id,value:o};if(s){var u;return(u=r==null?void 0:r.map(c=>c.id===e.id?l:c))!=null?u:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),r=i=>{var s;return(s=b0(t,i))==null?void 0:s.filter(o=>{const a=n.find(l=>l.id===o.id);if(a){const l=a.getFilterFn();if(y0e(l,o.value,a))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(r)},e.resetColumnFilters=t=>{var n,r;e.setColumnFilters(t?[]:(n=(r=e.initialState)==null?void 0:r.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function y0e(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const uzt=(e,t,n)=>n.reduce((r,i)=>{const s=i.getValue(e);return r+(typeof s=="number"?s:0)},0),czt=(e,t,n)=>{let r;return n.forEach(i=>{const s=i.getValue(e);s!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}),r},dzt=(e,t,n)=>{let r;return n.forEach(i=>{const s=i.getValue(e);s!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}),r},fzt=(e,t,n)=>{let r,i;return n.forEach(s=>{const o=s.getValue(e);o!=null&&(r===void 0?o>=o&&(r=i=o):(r>o&&(r=o),i<o&&(i=o)))}),[r,i]},hzt=(e,t)=>{let n=0,r=0;if(t.forEach(i=>{let s=i.getValue(e);s!=null&&(s=+s)>=s&&(++n,r+=s)}),n)return r/n},pzt=(e,t)=>{if(!t.length)return;const n=t.map(s=>s.getValue(e));if(!rzt(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),i=n.sort((s,o)=>s-o);return n.length%2!==0?i[r]:(i[r-1]+i[r])/2},mzt=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),gzt=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,yzt=(e,t)=>t.length,WD={sum:uzt,min:czt,max:dzt,extent:fzt,mean:hzt,median:pzt,unique:mzt,uniqueCount:gzt,count:yzt},vzt={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:Hu("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(r=>r!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,r;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((r=t.options.enableGrouping)!=null?r:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);if(typeof r=="number")return WD.sum;if(Object.prototype.toString.call(r)==="[object Date]")return WD.extent},e.getAggregationFn=()=>{var n,r;if(!e)throw new Error;return rj(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(r=t.options.aggregationFns)==null?void 0:r[e.columnDef.aggregationFn])!=null?n:WD[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,r;e.setGrouping(t?[]:(n=(r=e.initialState)==null?void 0:r.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const r=t.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(e._groupingValuesCache[n]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,r)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var i;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((i=n.subRows)!=null&&i.length)}}};function bzt(e,t,n){if(!(t!=null&&t.length)||!n)return e;const r=e.filter(s=>!t.includes(s.id));return n==="remove"?r:[...t.map(s=>e.find(o=>o.id===s)).filter(Boolean),...r]}const _zt={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:Hu("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=Ft(n=>[xA(t,n)],n=>n.findIndex(r=>r.id===e.id),jt(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var r;return((r=xA(t,n)[0])==null?void 0:r.id)===e.id},e.getIsLastColumn=n=>{var r;const i=xA(t,n);return((r=i[i.length-1])==null?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=Ft(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,r)=>i=>{let s=[];if(!(t!=null&&t.length))s=i;else{const o=[...t],a=[...i];for(;a.length&&o.length;){const l=o.shift(),u=a.findIndex(c=>c.id===l);u>-1&&s.push(a.splice(u,1)[0])}s=[...s,...a]}return bzt(s,n,r)},jt(e.options,"debugTable"))}},nz=()=>({left:[],right:[]}),wzt={getInitialState:e=>({columnPinning:nz(),...e}),getDefaultOptions:e=>({onColumnPinningChange:Hu("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const r=e.getLeafColumns().map(i=>i.id).filter(Boolean);t.setColumnPinning(i=>{var s,o;if(n==="right"){var a,l;return{left:((a=i==null?void 0:i.left)!=null?a:[]).filter(d=>!(r!=null&&r.includes(d))),right:[...((l=i==null?void 0:i.right)!=null?l:[]).filter(d=>!(r!=null&&r.includes(d))),...r]}}if(n==="left"){var u,c;return{left:[...((u=i==null?void 0:i.left)!=null?u:[]).filter(d=>!(r!=null&&r.includes(d))),...r],right:((c=i==null?void 0:i.right)!=null?c:[]).filter(d=>!(r!=null&&r.includes(d)))}}return{left:((s=i==null?void 0:i.left)!=null?s:[]).filter(d=>!(r!=null&&r.includes(d))),right:((o=i==null?void 0:i.right)!=null?o:[]).filter(d=>!(r!=null&&r.includes(d)))}})},e.getCanPin=()=>e.getLeafColumns().some(r=>{var i,s,o;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((s=(o=t.options.enableColumnPinning)!=null?o:t.options.enablePinning)!=null?s:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(a=>a.id),{left:r,right:i}=t.getState().columnPinning,s=n.some(a=>r==null?void 0:r.includes(a)),o=n.some(a=>i==null?void 0:i.includes(a));return s?"left":o?"right":!1},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();return i?(n=(r=t.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=Ft(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,r,i)=>{const s=[...r??[],...i??[]];return n.filter(o=>!s.includes(o.column.id))},jt(t.options,"debugRows")),e.getLeftVisibleCells=Ft(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,r)=>(r??[]).map(s=>n.find(o=>o.column.id===s)).filter(Boolean).map(s=>({...s,position:"left"})),jt(t.options,"debugRows")),e.getRightVisibleCells=Ft(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,r)=>(r??[]).map(s=>n.find(o=>o.column.id===s)).filter(Boolean).map(s=>({...s,position:"right"})),jt(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,r;return e.setColumnPinning(t?nz():(n=(r=e.initialState)==null?void 0:r.columnPinning)!=null?n:nz())},e.getIsSomeColumnsPinned=t=>{var n;const r=e.getState().columnPinning;if(!t){var i,s;return!!((i=r.left)!=null&&i.length||(s=r.right)!=null&&s.length)}return!!((n=r[t])!=null&&n.length)},e.getLeftLeafColumns=Ft(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),jt(e.options,"debugColumns")),e.getRightLeafColumns=Ft(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),jt(e.options,"debugColumns")),e.getCenterLeafColumns=Ft(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r)=>{const i=[...n??[],...r??[]];return t.filter(s=>!i.includes(s.id))},jt(e.options,"debugColumns"))}},hO={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},rz=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),xzt={getDefaultColumnDef:()=>hO,getInitialState:e=>({columnSizing:{},columnSizingInfo:rz(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Hu("columnSizing",e),onColumnSizingInfoChange:Hu("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,r,i;const s=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:hO.minSize,(r=s??e.columnDef.size)!=null?r:hO.size),(i=e.columnDef.maxSize)!=null?i:hO.maxSize)},e.getStart=Ft(n=>[n,xA(t,n),t.getState().columnSizing],(n,r)=>r.slice(0,e.getIndex(n)).reduce((i,s)=>i+s.getSize(),0),jt(t.options,"debugColumns")),e.getAfter=Ft(n=>[n,xA(t,n),t.getState().columnSizing],(n,r)=>r.slice(e.getIndex(n)+1).reduce((i,s)=>i+s.getSize(),0),jt(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:r,...i}=n;return i})},e.getCanResize=()=>{var n,r;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((r=t.options.enableColumnResizing)!=null?r:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var s;n+=(s=i.column.getSize())!=null?s:0}};return r(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const r=t.getColumn(e.column.id),i=r==null?void 0:r.getCanResize();return s=>{if(!r||!i||(s.persist==null||s.persist(),iz(s)&&s.touches&&s.touches.length>1))return;const o=e.getSize(),a=e?e.getLeafHeaders().map(y=>[y.column.id,y.column.getSize()]):[[r.id,r.getSize()]],l=iz(s)?Math.round(s.touches[0].clientX):s.clientX,u={},c=(y,v)=>{typeof v=="number"&&(t.setColumnSizingInfo(_=>{var w,x;const S=t.options.columnResizeDirection==="rtl"?-1:1,E=(v-((w=_==null?void 0:_.startOffset)!=null?w:0))*S,T=Math.max(E/((x=_==null?void 0:_.startSize)!=null?x:0),-.999999);return _.columnSizingStart.forEach(I=>{let[k,P]=I;u[k]=Math.round(Math.max(P+P*T,0)*100)/100}),{..._,deltaOffset:E,deltaPercentage:T}}),(t.options.columnResizeMode==="onChange"||y==="end")&&t.setColumnSizing(_=>({..._,...u})))},d=y=>c("move",y),f=y=>{c("end",y),t.setColumnSizingInfo(v=>({...v,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},h=n||typeof document<"u"?document:null,p={moveHandler:y=>d(y.clientX),upHandler:y=>{h==null||h.removeEventListener("mousemove",p.moveHandler),h==null||h.removeEventListener("mouseup",p.upHandler),f(y.clientX)}},m={moveHandler:y=>(y.cancelable&&(y.preventDefault(),y.stopPropagation()),d(y.touches[0].clientX),!1),upHandler:y=>{var v;h==null||h.removeEventListener("touchmove",m.moveHandler),h==null||h.removeEventListener("touchend",m.upHandler),y.cancelable&&(y.preventDefault(),y.stopPropagation()),f((v=y.touches[0])==null?void 0:v.clientX)}},g=Ezt()?{passive:!1}:!1;iz(s)?(h==null||h.addEventListener("touchmove",m.moveHandler,g),h==null||h.addEventListener("touchend",m.upHandler,g)):(h==null||h.addEventListener("mousemove",p.moveHandler,g),h==null||h.addEventListener("mouseup",p.upHandler,g)),t.setColumnSizingInfo(y=>({...y,startOffset:l,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?rz():(n=e.initialState.columnSizingInfo)!=null?n:rz())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0}}};let pO=null;function Ezt(){if(typeof pO=="boolean")return pO;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return pO=e,pO}function iz(e){return e.type==="touchstart"}const Szt={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:Hu("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(r=>({...r,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,r;const i=e.columns;return(n=i.length?i.some(s=>s.getIsVisible()):(r=t.getState().columnVisibility)==null?void 0:r[e.id])!=null?n:!0},e.getCanHide=()=>{var n,r;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((r=t.options.enableHiding)!=null?r:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=Ft(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),jt(t.options,"debugRows")),e.getVisibleCells=Ft(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,r,i)=>[...n,...r,...i],jt(t.options,"debugRows"))},createTable:e=>{const t=(n,r)=>Ft(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(s=>s.getIsVisible==null?void 0:s.getIsVisible()),jt(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var r;e.setColumnVisibility(n?{}:(r=e.initialState.columnVisibility)!=null?r:{})},e.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((i,s)=>({...i,[s.id]:n||!(s.getCanHide!=null&&s.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;e.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function xA(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const Tzt={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},Czt={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:Hu("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const r=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,r,i,s;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=t.options.enableGlobalFilter)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&((s=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?s:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>Zf.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:r}=e.options;return rj(r)?r:r==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[r])!=null?t:Zf[r]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},Azt={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:Hu("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetExpanded)!=null?r:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=r=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(r),e.toggleAllRowsExpanded=r=>{r??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=r=>{var i,s;e.setExpanded(r?{}:(i=(s=e.initialState)==null?void 0:s.expanded)!=null?i:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const r=e.getState().expanded;return r===!0||Object.values(r).some(Boolean)},e.getIsAllRowsExpanded=()=>{const r=e.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||e.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},e.getExpandedDepth=()=>{let r=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(s=>{const o=s.split(".");r=Math.max(r,o.length)}),r},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(r=>{var i;const s=r===!0?!0:!!(r!=null&&r[e.id]);let o={};if(r===!0?Object.keys(t.getRowModel().rowsById).forEach(a=>{o[a]=!0}):o=r,n=(i=n)!=null?i:!s,!s&&n)return{...o,[e.id]:!0};if(s&&!n){const{[e.id]:a,...l}=o;return l}return r})},e.getIsExpanded=()=>{var n;const r=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:r===!0||r!=null&&r[e.id])},e.getCanExpand=()=>{var n,r,i;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((r=t.options.enableExpanding)!=null?r:!0)&&!!((i=e.subRows)!=null&&i.length)},e.getIsAllParentsExpanded=()=>{let n=!0,r=e;for(;n&&r.parentId;)r=t.getRow(r.parentId,!0),n=r.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},Uq=0,Vq=10,sz=()=>({pageIndex:Uq,pageSize:Vq}),Izt={getInitialState:e=>({...e,pagination:{...sz(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:Hu("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetPageIndex)!=null?r:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=r=>{const i=s=>b0(r,s);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(i)},e.resetPagination=r=>{var i;e.setPagination(r?sz():(i=e.initialState.pagination)!=null?i:sz())},e.setPageIndex=r=>{e.setPagination(i=>{let s=b0(r,i.pageIndex);const o=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return s=Math.max(0,Math.min(s,o)),{...i,pageIndex:s}})},e.resetPageIndex=r=>{var i,s;e.setPageIndex(r?Uq:(i=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageIndex)!=null?i:Uq)},e.resetPageSize=r=>{var i,s;e.setPageSize(r?Vq:(i=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageSize)!=null?i:Vq)},e.setPageSize=r=>{e.setPagination(i=>{const s=Math.max(1,b0(r,i.pageSize)),o=i.pageSize*i.pageIndex,a=Math.floor(o/s);return{...i,pageIndex:a,pageSize:s}})},e.setPageCount=r=>e.setPagination(i=>{var s;let o=b0(r,(s=e.options.pageCount)!=null?s:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...i,pageCount:o}}),e.getPageOptions=Ft(()=>[e.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((s,o)=>o)),i},jt(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:r}=e.getState().pagination,i=e.getPageCount();return i===-1?!0:i===0?!1:r<i-1},e.previousPage=()=>e.setPageIndex(r=>r-1),e.nextPage=()=>e.setPageIndex(r=>r+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var r;return(r=e.options.pageCount)!=null?r:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var r;return(r=e.options.rowCount)!=null?r:e.getPrePaginationRowModel().rows.length}}},oz=()=>({top:[],bottom:[]}),kzt={getInitialState:e=>({rowPinning:oz(),...e}),getDefaultOptions:e=>({onRowPinningChange:Hu("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,r,i)=>{const s=r?e.getLeafRows().map(l=>{let{id:u}=l;return u}):[],o=i?e.getParentRows().map(l=>{let{id:u}=l;return u}):[],a=new Set([...o,e.id,...s]);t.setRowPinning(l=>{var u,c;if(n==="bottom"){var d,f;return{top:((d=l==null?void 0:l.top)!=null?d:[]).filter(m=>!(a!=null&&a.has(m))),bottom:[...((f=l==null?void 0:l.bottom)!=null?f:[]).filter(m=>!(a!=null&&a.has(m))),...Array.from(a)]}}if(n==="top"){var h,p;return{top:[...((h=l==null?void 0:l.top)!=null?h:[]).filter(m=>!(a!=null&&a.has(m))),...Array.from(a)],bottom:((p=l==null?void 0:l.bottom)!=null?p:[]).filter(m=>!(a!=null&&a.has(m)))}}return{top:((u=l==null?void 0:l.top)!=null?u:[]).filter(m=>!(a!=null&&a.has(m))),bottom:((c=l==null?void 0:l.bottom)!=null?c:[]).filter(m=>!(a!=null&&a.has(m)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:i}=t.options;return typeof r=="function"?r(e):(n=r??i)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:r,bottom:i}=t.getState().rowPinning,s=n.some(a=>r==null?void 0:r.includes(a)),o=n.some(a=>i==null?void 0:i.includes(a));return s?"top":o?"bottom":!1},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();if(!i)return-1;const s=(n=i==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(o=>{let{id:a}=o;return a});return(r=s==null?void 0:s.indexOf(e.id))!=null?r:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,r;return e.setRowPinning(t?oz():(n=(r=e.initialState)==null?void 0:r.rowPinning)!=null?n:oz())},e.getIsSomeRowsPinned=t=>{var n;const r=e.getState().rowPinning;if(!t){var i,s;return!!((i=r.top)!=null&&i.length||(s=r.bottom)!=null&&s.length)}return!!((n=r[t])!=null&&n.length)},e._getPinnedRows=(t,n,r)=>{var i;return((i=e.options.keepPinnedRows)==null||i?(n??[]).map(o=>{const a=e.getRow(o,!0);return a.getIsAllParentsExpanded()?a:null}):(n??[]).map(o=>t.find(a=>a.id===o))).filter(Boolean).map(o=>({...o,position:r}))},e.getTopRows=Ft(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),jt(e.options,"debugRows")),e.getBottomRows=Ft(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),jt(e.options,"debugRows")),e.getCenterRows=Ft(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,r)=>{const i=new Set([...n??[],...r??[]]);return t.filter(s=>!i.has(s.id))},jt(e.options,"debugRows"))}},Rzt={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:Hu("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const r={...n},i=e.getPreGroupedRowModel().flatRows;return t?i.forEach(s=>{s.getCanSelect()&&(r[s.id]=!0)}):i.forEach(s=>{delete r[s.id]}),r})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const r=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),i={...n};return e.getRowModel().rows.forEach(s=>{Hq(i,s.id,r,!0,e)}),i}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=Ft(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?az(e,n):{rows:[],flatRows:[],rowsById:{}},jt(e.options,"debugTable")),e.getFilteredSelectedRowModel=Ft(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?az(e,n):{rows:[],flatRows:[],rowsById:{}},jt(e.options,"debugTable")),e.getGroupedSelectedRowModel=Ft(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?az(e,n):{rows:[],flatRows:[],rowsById:{}},jt(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let r=!!(t.length&&Object.keys(n).length);return r&&t.some(i=>i.getCanSelect()&&!n[i.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:n}=e.getState();let r=!!t.length;return r&&t.some(i=>!n[i.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,r)=>{const i=e.getIsSelected();t.setRowSelection(s=>{var o;if(n=typeof n<"u"?n:!i,e.getCanSelect()&&i===n)return s;const a={...s};return Hq(a,e.id,n,(o=r==null?void 0:r.selectChildren)!=null?o:!0,t),a})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return Yte(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return qq(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return qq(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return r=>{var i;n&&e.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},Hq=(e,t,n,r,i)=>{var s;const o=i.getRow(t,!0);n?(o.getCanMultiSelect()||Object.keys(e).forEach(a=>delete e[a]),o.getCanSelect()&&(e[t]=!0)):delete e[t],r&&(s=o.subRows)!=null&&s.length&&o.getCanSelectSubRows()&&o.subRows.forEach(a=>Hq(e,a.id,n,r,i))};function az(e,t){const n=e.getState().rowSelection,r=[],i={},s=function(o,a){return o.map(l=>{var u;const c=Yte(l,n);if(c&&(r.push(l),i[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:s(l.subRows)}),c)return l}).filter(Boolean)};return{rows:s(t.rows),flatRows:r,rowsById:i}}function Yte(e,t){var n;return(n=t[e.id])!=null?n:!1}function qq(e,t,n){var r;if(!((r=e.subRows)!=null&&r.length))return!1;let i=!0,s=!1;return e.subRows.forEach(o=>{if(!(s&&!i)&&(o.getCanSelect()&&(Yte(o,t)?s=!0:i=!1),o.subRows&&o.subRows.length)){const a=qq(o,t);a==="all"?s=!0:(a==="some"&&(s=!0),i=!1)}}),i?"all":s?"some":!1}const Wq=/([0-9]+)/gm,Pzt=(e,t,n)=>mLe(Sy(e.getValue(n)).toLowerCase(),Sy(t.getValue(n)).toLowerCase()),Nzt=(e,t,n)=>mLe(Sy(e.getValue(n)),Sy(t.getValue(n))),Ozt=(e,t,n)=>Kte(Sy(e.getValue(n)).toLowerCase(),Sy(t.getValue(n)).toLowerCase()),Dzt=(e,t,n)=>Kte(Sy(e.getValue(n)),Sy(t.getValue(n))),Mzt=(e,t,n)=>{const r=e.getValue(n),i=t.getValue(n);return r>i?1:r<i?-1:0},$zt=(e,t,n)=>Kte(e.getValue(n),t.getValue(n));function Kte(e,t){return e===t?0:e>t?1:-1}function Sy(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function mLe(e,t){const n=e.split(Wq).filter(Boolean),r=t.split(Wq).filter(Boolean);for(;n.length&&r.length;){const i=n.shift(),s=r.shift(),o=parseInt(i,10),a=parseInt(s,10),l=[o,a].sort();if(isNaN(l[0])){if(i>s)return 1;if(s>i)return-1;continue}if(isNaN(l[1]))return isNaN(o)?-1:1;if(o>a)return 1;if(a>o)return-1}return n.length-r.length}const m1={alphanumeric:Pzt,alphanumericCaseSensitive:Nzt,text:Ozt,textCaseSensitive:Dzt,datetime:Mzt,basic:$zt},Lzt={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:Hu("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of n){const s=i==null?void 0:i.getValue(e.id);if(Object.prototype.toString.call(s)==="[object Date]")return m1.datetime;if(typeof s=="string"&&(r=!0,s.split(Wq).length>1))return m1.alphanumeric}return r?m1.text:m1.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,r;if(!e)throw new Error;return rj(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(r=t.options.sortingFns)==null?void 0:r[e.columnDef.sortingFn])!=null?n:m1[e.columnDef.sortingFn]},e.toggleSorting=(n,r)=>{const i=e.getNextSortingOrder(),s=typeof n<"u"&&n!==null;t.setSorting(o=>{const a=o==null?void 0:o.find(h=>h.id===e.id),l=o==null?void 0:o.findIndex(h=>h.id===e.id);let u=[],c,d=s?n:i==="desc";if(o!=null&&o.length&&e.getCanMultiSort()&&r?a?c="toggle":c="add":o!=null&&o.length&&l!==o.length-1?c="replace":a?c="toggle":c="replace",c==="toggle"&&(s||i||(c="remove")),c==="add"){var f;u=[...o,{id:e.id,desc:d}],u.splice(0,u.length-((f=t.options.maxMultiSortColCount)!=null?f:Number.MAX_SAFE_INTEGER))}else c==="toggle"?u=o.map(h=>h.id===e.id?{...h,desc:d}:h):c==="remove"?u=o.filter(h=>h.id!==e.id):u=[{id:e.id,desc:d}];return u})},e.getFirstSortDir=()=>{var n,r;return((n=(r=e.columnDef.sortDescFirst)!=null?r:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var r,i;const s=e.getFirstSortDir(),o=e.getIsSorted();return o?o!==s&&((r=t.options.enableSortingRemoval)==null||r)&&(!(n&&(i=t.options.enableMultiRemove)!=null)||i)?!1:o==="desc"?"asc":"desc":s},e.getCanSort=()=>{var n,r;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((r=t.options.enableSorting)!=null?r:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,r;return(n=(r=e.columnDef.enableMultiSort)!=null?r:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const r=(n=t.getState().sorting)==null?void 0:n.find(i=>i.id===e.id);return r?r.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,r;return(n=(r=t.getState().sorting)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return r=>{n&&(r.persist==null||r.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(r):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,r;e.setSorting(t?[]:(n=(r=e.initialState)==null?void 0:r.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},Fzt=[ozt,Szt,_zt,wzt,azt,lzt,Tzt,Czt,Lzt,vzt,Azt,Izt,kzt,Rzt,xzt];function jzt(e){var t,n;const r=[...Fzt,...(t=e._features)!=null?t:[]];let i={_features:r};const s=i._features.reduce((f,h)=>Object.assign(f,h.getDefaultOptions==null?void 0:h.getDefaultOptions(i)),{}),o=f=>i.options.mergeOptions?i.options.mergeOptions(s,f):{...s,...f};let l={...{},...(n=e.initialState)!=null?n:{}};i._features.forEach(f=>{var h;l=(h=f.getInitialState==null?void 0:f.getInitialState(l))!=null?h:l});const u=[];let c=!1;const d={_features:r,options:{...s,...e},initialState:l,_queue:f=>{u.push(f),c||(c=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();c=!1}).catch(h=>setTimeout(()=>{throw h})))},reset:()=>{i.setState(i.initialState)},setOptions:f=>{const h=b0(f,i.options);i.options=o(h)},getState:()=>i.options.state,setState:f=>{i.options.onStateChange==null||i.options.onStateChange(f)},_getRowId:(f,h,p)=>{var m;return(m=i.options.getRowId==null?void 0:i.options.getRowId(f,h,p))!=null?m:`${p?[p.id,h].join("."):h}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(f,h)=>{let p=(h?i.getPrePaginationRowModel():i.getRowModel()).rowsById[f];if(!p&&(p=i.getCoreRowModel().rowsById[f],!p))throw new Error;return p},_getDefaultColumnDef:Ft(()=>[i.options.defaultColumn],f=>{var h;return f=(h=f)!=null?h:{},{header:p=>{const m=p.header.column.columnDef;return m.accessorKey?m.accessorKey:m.accessorFn?m.id:null},cell:p=>{var m,g;return(m=(g=p.renderValue())==null||g.toString==null?void 0:g.toString())!=null?m:null},...i._features.reduce((p,m)=>Object.assign(p,m.getDefaultColumnDef==null?void 0:m.getDefaultColumnDef()),{}),...f}},jt(e,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:Ft(()=>[i._getColumnDefs()],f=>{const h=function(p,m,g){return g===void 0&&(g=0),p.map(y=>{const v=szt(i,y,g,m),_=y;return v.columns=_.columns?h(_.columns,v,g+1):[],v})};return h(f)},jt(e,"debugColumns")),getAllFlatColumns:Ft(()=>[i.getAllColumns()],f=>f.flatMap(h=>h.getFlatColumns()),jt(e,"debugColumns")),_getAllFlatColumnsById:Ft(()=>[i.getAllFlatColumns()],f=>f.reduce((h,p)=>(h[p.id]=p,h),{}),jt(e,"debugColumns")),getAllLeafColumns:Ft(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(f,h)=>{let p=f.flatMap(m=>m.getLeafColumns());return h(p)},jt(e,"debugColumns")),getColumn:f=>i._getAllFlatColumnsById()[f]};Object.assign(i,d);for(let f=0;f<i._features.length;f++){const h=i._features[f];h==null||h.createTable==null||h.createTable(i)}return i}function Bzt(){return e=>Ft(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(i,s,o){s===void 0&&(s=0);const a=[];for(let u=0;u<i.length;u++){const c=YR(e,e._getRowId(i[u],u,o),i[u],u,s,void 0,o==null?void 0:o.id);if(n.flatRows.push(c),n.rowsById[c.id]=c,a.push(c),e.options.getSubRows){var l;c.originalSubRows=e.options.getSubRows(i[u],u),(l=c.originalSubRows)!=null&&l.length&&(c.subRows=r(c.originalSubRows,s+1,c))}}return a};return n.rows=r(t),n},jt(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function zzt(){return e=>Ft(()=>[e.getState().expanded,e.getPreExpandedRowModel(),e.options.paginateExpandedRows],(t,n,r)=>!n.rows.length||t!==!0&&!Object.keys(t??{}).length||!r?n:gLe(n),jt(e.options,"debugTable"))}function gLe(e){const t=[],n=r=>{var i;t.push(r),(i=r.subRows)!=null&&i.length&&r.getIsExpanded()&&r.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function Uzt(){return(e,t)=>Ft(()=>{var n;return[(n=e.getColumn(t))==null?void 0:n.getFacetedRowModel()]},n=>{var r;if(!n)return;const i=(r=n.flatRows[0])==null?void 0:r.getUniqueValues(t);if(typeof i>"u")return;let s=[i,i];for(let o=0;o<n.flatRows.length;o++){const a=n.flatRows[o].getUniqueValues(t);for(let l=0;l<a.length;l++){const u=a[l];u<s[0]?s[0]=u:u>s[1]&&(s[1]=u)}}return s},jt(e.options,"debugTable"))}function yLe(e,t,n){return n.options.filterFromLeafRows?Vzt(e,t,n):Hzt(e,t,n)}function Vzt(e,t,n){var r;const i=[],s={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,a=function(l,u){u===void 0&&(u=0);const c=[];for(let f=0;f<l.length;f++){var d;let h=l[f];const p=YR(n,h.id,h.original,h.index,h.depth,void 0,h.parentId);if(p.columnFilters=h.columnFilters,(d=h.subRows)!=null&&d.length&&u<o){if(p.subRows=a(h.subRows,u+1),h=p,t(h)&&!p.subRows.length){c.push(h),s[h.id]=h,i.push(h);continue}if(t(h)||p.subRows.length){c.push(h),s[h.id]=h,i.push(h);continue}}else h=p,t(h)&&(c.push(h),s[h.id]=h,i.push(h))}return c};return{rows:a(e),flatRows:i,rowsById:s}}function Hzt(e,t,n){var r;const i=[],s={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,a=function(l,u){u===void 0&&(u=0);const c=[];for(let f=0;f<l.length;f++){let h=l[f];if(t(h)){var d;if((d=h.subRows)!=null&&d.length&&u<o){const m=YR(n,h.id,h.original,h.index,h.depth,void 0,h.parentId);m.subRows=a(h.subRows,u+1),h=m}c.push(h),i.push(h),s[h.id]=h}}return c};return{rows:a(e),flatRows:i,rowsById:s}}function qzt(){return(e,t)=>Ft(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter,e.getFilteredRowModel()],(n,r,i)=>{if(!n.rows.length||!(r!=null&&r.length)&&!i)return n;const s=[...r.map(a=>a.id).filter(a=>a!==t),i?"__global__":void 0].filter(Boolean),o=a=>{for(let l=0;l<s.length;l++)if(a.columnFilters[s[l]]===!1)return!1;return!0};return yLe(n.rows,o,e)},jt(e.options,"debugTable"))}function Wzt(){return(e,t)=>Ft(()=>{var n;return[(n=e.getColumn(t))==null?void 0:n.getFacetedRowModel()]},n=>{if(!n)return new Map;let r=new Map;for(let s=0;s<n.flatRows.length;s++){const o=n.flatRows[s].getUniqueValues(t);for(let a=0;a<o.length;a++){const l=o[a];if(r.has(l)){var i;r.set(l,((i=r.get(l))!=null?i:0)+1)}else r.set(l,1)}}return r},jt(e.options,"debugTable"))}function Gzt(){return e=>Ft(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,r)=>{if(!t.rows.length||!(n!=null&&n.length)&&!r){for(let f=0;f<t.flatRows.length;f++)t.flatRows[f].columnFilters={},t.flatRows[f].columnFiltersMeta={};return t}const i=[],s=[];(n??[]).forEach(f=>{var h;const p=e.getColumn(f.id);if(!p)return;const m=p.getFilterFn();m&&i.push({id:f.id,filterFn:m,resolvedValue:(h=m.resolveFilterValue==null?void 0:m.resolveFilterValue(f.value))!=null?h:f.value})});const o=(n??[]).map(f=>f.id),a=e.getGlobalFilterFn(),l=e.getAllLeafColumns().filter(f=>f.getCanGlobalFilter());r&&a&&l.length&&(o.push("__global__"),l.forEach(f=>{var h;s.push({id:f.id,filterFn:a,resolvedValue:(h=a.resolveFilterValue==null?void 0:a.resolveFilterValue(r))!=null?h:r})}));let u,c;for(let f=0;f<t.flatRows.length;f++){const h=t.flatRows[f];if(h.columnFilters={},i.length)for(let p=0;p<i.length;p++){u=i[p];const m=u.id;h.columnFilters[m]=u.filterFn(h,m,u.resolvedValue,g=>{h.columnFiltersMeta[m]=g})}if(s.length){for(let p=0;p<s.length;p++){c=s[p];const m=c.id;if(c.filterFn(h,m,c.resolvedValue,g=>{h.columnFiltersMeta[m]=g})){h.columnFilters.__global__=!0;break}}h.columnFilters.__global__!==!0&&(h.columnFilters.__global__=!1)}}const d=f=>{for(let h=0;h<o.length;h++)if(f.columnFilters[o[h]]===!1)return!1;return!0};return yLe(t.rows,d,e)},jt(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function Yzt(){return e=>Ft(()=>[e.getState().grouping,e.getPreGroupedRowModel()],(t,n)=>{if(!n.rows.length||!t.length)return n.rows.forEach(l=>{l.depth=0,l.parentId=void 0}),n;const r=t.filter(l=>e.getColumn(l)),i=[],s={},o=function(l,u,c){if(u===void 0&&(u=0),u>=r.length)return l.map(p=>(p.depth=u,i.push(p),s[p.id]=p,p.subRows&&(p.subRows=o(p.subRows,u+1,p.id)),p));const d=r[u],f=Kzt(l,d);return Array.from(f.entries()).map((p,m)=>{let[g,y]=p,v=`${d}:${g}`;v=c?`${c}>${v}`:v;const _=o(y,u+1,v);_.forEach(S=>{S.parentId=v});const w=u?oLe(y,S=>S.subRows):y,x=YR(e,v,w[0].original,m,u,void 0,c);return Object.assign(x,{groupingColumnId:d,groupingValue:g,subRows:_,leafRows:w,getValue:S=>{if(r.includes(S)){if(x._valuesCache.hasOwnProperty(S))return x._valuesCache[S];if(y[0]){var E;x._valuesCache[S]=(E=y[0].getValue(S))!=null?E:void 0}return x._valuesCache[S]}if(x._groupingValuesCache.hasOwnProperty(S))return x._groupingValuesCache[S];const T=e.getColumn(S),I=T==null?void 0:T.getAggregationFn();if(I)return x._groupingValuesCache[S]=I(S,w,y),x._groupingValuesCache[S]}}),_.forEach(S=>{i.push(S),s[S.id]=S}),x})},a=o(n.rows,0);return a.forEach(l=>{i.push(l),s[l.id]=l}),{rows:a,flatRows:i,rowsById:s}},jt(e.options,"debugTable","getGroupedRowModel",()=>{e._queue(()=>{e._autoResetExpanded(),e._autoResetPageIndex()})}))}function Kzt(e,t){const n=new Map;return e.reduce((r,i)=>{const s=`${i.getGroupingValue(t)}`,o=r.get(s);return o?o.push(i):r.set(s,[i]),r},n)}function Xzt(e){return t=>Ft(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,r)=>{if(!r.rows.length)return r;const{pageSize:i,pageIndex:s}=n;let{rows:o,flatRows:a,rowsById:l}=r;const u=i*s,c=u+i;o=o.slice(u,c);let d;t.options.paginateExpandedRows?d={rows:o,flatRows:a,rowsById:l}:d=gLe({rows:o,flatRows:a,rowsById:l}),d.flatRows=[];const f=h=>{d.flatRows.push(h),h.subRows.length&&h.subRows.forEach(f)};return d.rows.forEach(f),d},jt(t.options,"debugTable"))}function Qzt(){return e=>Ft(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const r=e.getState().sorting,i=[],s=r.filter(l=>{var u;return(u=e.getColumn(l.id))==null?void 0:u.getCanSort()}),o={};s.forEach(l=>{const u=e.getColumn(l.id);u&&(o[l.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const a=l=>{const u=l.map(c=>({...c}));return u.sort((c,d)=>{for(let h=0;h<s.length;h+=1){var f;const p=s[h],m=o[p.id],g=m.sortUndefined,y=(f=p==null?void 0:p.desc)!=null?f:!1;let v=0;if(g){const _=c.getValue(p.id),w=d.getValue(p.id),x=_===void 0,S=w===void 0;if(x||S){if(g==="first")return x?-1:1;if(g==="last")return x?1:-1;v=x&&S?0:x?g:-g}}if(v===0&&(v=m.sortingFn(c,d,p.id)),v!==0)return y&&(v*=-1),m.invertSorting&&(v*=-1),v}return c.index-d.index}),u.forEach(c=>{var d;i.push(c),(d=c.subRows)!=null&&d.length&&(c.subRows=a(c.subRows))}),u};return{rows:a(n.rows),flatRows:i,rowsById:n.rowsById}},jt(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Jzt(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=A.useState(()=>({current:jzt(t)})),[r,i]=A.useState(()=>n.current.initialState);return n.current.setOptions(s=>({...s,...e,state:{...r,...e.state},onStateChange:o=>{i(o),e.onStateChange==null||e.onStateChange(o)}})),n.current}/**
   * match-sorter-utils
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */const vLe={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ù:"u",ú:"u",û:"u",ü:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z"},Zzt=Object.keys(vLe).join("|"),e7t=new RegExp(Zzt,"g");function t7t(e){return e.replace(e7t,t=>vLe[t])}/**
 * @name match-sorter
 * @license MIT license.
 * @copyright (c) 2099 Kent C. Dodds
 * @author Kent C. Dodds <me@kentcdodds.com> (https://kentcdodds.com)
 */const Da={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};function n7t(e,t,n){var r;if(n=n||{},n.threshold=(r=n.threshold)!=null?r:Da.MATCHES,!n.accessors){const o=v0e(e,t,n);return{rankedValue:e,rank:o,accessorIndex:-1,accessorThreshold:n.threshold,passed:o>=n.threshold}}const i=a7t(e,n.accessors),s={rankedValue:e,rank:Da.NO_MATCH,accessorIndex:-1,accessorThreshold:n.threshold,passed:!1};for(let o=0;o<i.length;o++){const a=i[o];let l=v0e(a.itemValue,t,n);const{minRanking:u,maxRanking:c,threshold:d=n.threshold}=a.attributes;l<u&&l>=Da.MATCHES?l=u:l>c&&(l=c),l=Math.min(l,c),l>=d&&l>s.rank&&(s.rank=l,s.passed=!0,s.accessorIndex=o,s.accessorThreshold=d,s.rankedValue=a.itemValue)}return s}function v0e(e,t,n){return e=b0e(e,n),t=b0e(t,n),t.length>e.length?Da.NO_MATCH:e===t?Da.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase(),t=t.toLowerCase(),e===t?Da.EQUAL:e.startsWith(t)?Da.STARTS_WITH:e.includes(` ${t}`)?Da.WORD_STARTS_WITH:e.includes(t)?Da.CONTAINS:t.length===1?Da.NO_MATCH:r7t(e).includes(t)?Da.ACRONYM:i7t(e,t))}function r7t(e){let t="";return e.split(" ").forEach(r=>{r.split("-").forEach(s=>{t+=s.substr(0,1)})}),t}function i7t(e,t){let n=0,r=0;function i(l,u,c){for(let d=c,f=u.length;d<f;d++)if(u[d]===l)return n+=1,d+1;return-1}function s(l){const u=1/l,c=n/t.length;return Da.MATCHES+c*u}const o=i(t[0],e,0);if(o<0)return Da.NO_MATCH;r=o;for(let l=1,u=t.length;l<u;l++){const c=t[l];if(r=i(c,e,r),!(r>-1))return Da.NO_MATCH}const a=r-o;return s(a)}function s7t(e,t){return e.rank===t.rank?0:e.rank>t.rank?-1:1}function b0e(e,t){let{keepDiacritics:n}=t;return e=`${e}`,n||(e=t7t(e)),e}function o7t(e,t){let n=t;typeof t=="object"&&(n=t.accessor);const r=n(e);return r==null?[]:Array.isArray(r)?r:[String(r)]}function a7t(e,t){const n=[];for(let r=0,i=t.length;r<i;r++){const s=t[r],o=l7t(s),a=o7t(e,s);for(let l=0,u=a.length;l<u;l++)n.push({itemValue:a[l],attributes:o})}return n}const _0e={maxRanking:1/0,minRanking:-1/0};function l7t(e){return typeof e=="function"?_0e:{..._0e,...e}}function sC(e,t,n){let r=n.initialDeps??[],i;return()=>{var s,o,a,l;let u;n.key&&((s=n.debug)!=null&&s.call(n))&&(u=Date.now());const c=e();if(!(c.length!==r.length||c.some((h,p)=>r[p]!==h)))return i;r=c;let f;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(f=Date.now()),i=t(...c),n.key&&((a=n.debug)!=null&&a.call(n))){const h=Math.round((Date.now()-u)*100)/100,p=Math.round((Date.now()-f)*100)/100,m=p/16,g=(y,v)=>{for(y=String(y);y.length<v;)y=" "+y;return y};console.info(`%c⏱ ${g(p,5)} /${g(h,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*m,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(l=n==null?void 0:n.onChange)==null||l.call(n,i),i}}function lz(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const u7t=(e,t)=>Math.abs(e-t)<1,c7t=(e,t,n)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,i),n)}},d7t=e=>e,bLe=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let i=t;i<=n;i++)r.push(i);return r},f7t=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const i=o=>{const{width:a,height:l}=o;t({width:Math.round(a),height:Math.round(l)})};if(i(n.getBoundingClientRect()),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(o=>{const a=o[0];if(a!=null&&a.borderBoxSize){const l=a.borderBoxSize[0];if(l){i({width:l.inlineSize,height:l.blockSize});return}}i(n.getBoundingClientRect())});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},w0e={passive:!0},h7t=typeof window>"u"?!0:"onscrollend"in window,p7t=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let i=0;const s=h7t?()=>{}:c7t(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),o=u=>()=>{i=n[e.options.horizontal?"scrollLeft":"scrollTop"],s(),t(i,u)},a=o(!0),l=o(!1);return l(),n.addEventListener("scroll",a,w0e),n.addEventListener("scrollend",l,w0e),()=>{n.removeEventListener("scroll",a),n.removeEventListener("scrollend",l)}},m7t=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[n.options.horizontal?"width":"height"])},g7t=(e,{adjustments:t=0,behavior:n},r)=>{var i,s;const o=e+t;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class y7t{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{this._measureElement(s.target,s)})}));return{disconnect:()=>{var i;return(i=r())==null?void 0:i.disconnect()},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:d7t,rangeExtractor:bLe,onChange:()=>{},measureElement:m7t,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,...n}},this.notify=(n,r)=>{var i,s;const{startIndex:o,endIndex:a}=this.range??{startIndex:void 0,endIndex:void 0},l=this.calculateRange();(n||o!==(l==null?void 0:l.startIndex)||a!==(l==null?void 0:l.endIndex))&&((s=(i=this.options).onChange)==null||s.call(i,this,r))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.observer.disconnect(),this.elementsCache.clear()},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.notify(!1,!1);return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i;const o=this.isScrolling;this.isScrolling=s,this.notify(o!==s,s)}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let o=r-1;o>=0;o--){const a=n[o];if(i.has(a.lane))continue;const l=s.get(a.lane);if(l==null||a.end>l.end?s.set(a.lane,a):a.end<l.end&&i.set(a.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((o,a)=>o.end===a.end?o.index-a.index:o.end-a.end)[0]:void 0},this.getMeasurementOptions=sC(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,s,o)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:o}),{key:!1}),this.getMeasurements=sC(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:o},a)=>{var l;if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const u=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,u);for(let d=u;d<n;d++){let f=(l=this.measurementsCache[d])==null?void 0:l.measureElement;f||(f=w=>{const x=s(d),S=this.elementsCache.get(x);if(!w){S&&(this.observer.unobserve(S),this.elementsCache.delete(x));return}S!==w&&(S&&this.observer.unobserve(S),this.observer.observe(w),this.elementsCache.set(x,w)),w.isConnected&&this.resizeItem(d,this.options.measureElement(w,void 0,this))});const h=s(d),p=this.options.lanes===1?c[d-1]:this.getFurthestMeasurement(c,d),m=p?p.end+this.options.gap:r+i,g=a.get(h),y=typeof g=="number"?g:this.options.estimateSize(d),v=m+y,_=p?p.lane:d%this.options.lanes;c[d]={index:d,start:m,size:y,end:v,key:h,lane:_,measureElement:f}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=sC(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(n,r,i)=>this.range=n.length>0&&r>0?v7t({measurements:n,outerSize:r,scrollOffset:i}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=sC(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(n,r,i,s)=>r===null?[]:n({startIndex:r.startIndex,endIndex:r.endIndex,overscan:i,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),s=this.getMeasurements()[i];if(!s||!n.isConnected){this.elementsCache.forEach((a,l)=>{a===n&&(this.observer.unobserve(n),this.elementsCache.delete(l))});return}const o=this.elementsCache.get(s.key);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(s.key,n)),this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.getMeasurements()[n];if(!i)return;const s=this.itemSizeCache.get(i.key)??i.size,o=r-s;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,o,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!0,!1))},this.measureElement=n=>{n&&this._measureElement(n,void 0)},this.getVirtualItems=sC(()=>[this.getIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,o=n.length;s<o;s++){const a=n[s],l=r[a];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return lz(r[_Le(0,r.length-1,i=>lz(r[i]).start,n)])},this.getOffsetForAlignment=(n,r)=>{const i=this.getSize(),s=this.getScrollOffset();r==="auto"&&(n<=s?r="start":n>=s+i?r="end":r="start"),r==="start"?n=n:r==="end"?n=n-i:r==="center"&&(n=n-i/2);const o=this.options.horizontal?"scrollWidth":"scrollHeight",l=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[o]:this.scrollElement[o]:0)-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.getMeasurements()[n];if(!i)return;const s=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(i.end>=o+s-this.options.scrollPaddingEnd)r="end";else if(i.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const a=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(a,r),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const s=this.getOffsetForIndex(n,r);if(!s)return;const[o,a]=s;this._scrollToOffset(o,{adjustments:void 0,behavior:i}),i!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(n))){const[u]=lz(this.getOffsetForIndex(n,a));u7t(u,this.getScrollOffset())||this.scrollToIndex(n,{align:a,behavior:i})}else this.scrollToIndex(n,{align:a,behavior:i})}))},this.scrollBy=(n,{behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;return r.length===0?i=this.options.paddingStart:i=this.options.lanes===1?((n=r[r.length-1])==null?void 0:n.end)??0:Math.max(...r.slice(-this.options.lanes).map(s=>s.end)),i-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{var n,r;this.itemSizeCache=new Map,(r=(n=this.options).onChange)==null||r.call(n,this,!1)},this.setOptions(t)}}const _Le=(e,t,n,r)=>{for(;e<=t;){const i=(e+t)/2|0,s=n(i);if(s<r)e=i+1;else if(s>r)t=i-1;else return i}return e>0?e-1:0};function v7t({measurements:e,outerSize:t,scrollOffset:n}){const r=e.length-1,s=_Le(0,r,a=>e[a].start,n);let o=s;for(;o<r&&e[o].end<n+t;)o++;return{startIndex:s,endIndex:o}}const b7t=typeof document<"u"?A.useLayoutEffect:A.useEffect;function _7t(e){const t=A.useReducer(()=>({}),{})[1],n={...e,onChange:(i,s)=>{var o;s?rS.flushSync(t):t(),(o=e.onChange)==null||o.call(e,i,s)}},[r]=A.useState(()=>new y7t(n));return r.setOptions(n),A.useEffect(()=>r._didMount(),[]),b7t(()=>r._willUpdate()),r}function wLe(e){return _7t({observeElementRect:f7t,observeElementOffset:p7t,scrollToFn:g7t,...e})}var xLe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(qi,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",u="day",c="week",d="month",f="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var D=["th","st","nd","rd"],O=$%100;return"["+$+(D[(O-20)%10]||D[O]||D[0])+"]"}},_=function($,D,O){var F=String($);return!F||F.length>=D?$:""+Array(D+1-F.length).join(O)+$},w={s:_,z:function($){var D=-$.utcOffset(),O=Math.abs(D),F=Math.floor(O/60),U=O%60;return(D<=0?"+":"-")+_(F,2,"0")+":"+_(U,2,"0")},m:function $(D,O){if(D.date()<O.date())return-$(O,D);var F=12*(O.year()-D.year())+(O.month()-D.month()),U=D.clone().add(F,d),V=O-U<0,M=D.clone().add(F+(V?-1:1),d);return+(-(F+(O-U)/(V?U-M:M-U))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:d,y:h,w:c,d:u,D:p,h:l,m:a,s:o,ms:s,Q:f}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},x="en",S={};S[x]=v;var E="$isDayjsObject",T=function($){return $ instanceof L||!(!$||!$[E])},I=function $(D,O,F){var U;if(!D)return x;if(typeof D=="string"){var V=D.toLowerCase();S[V]&&(U=V),O&&(S[V]=O,U=V);var M=D.split("-");if(!U&&M.length>1)return $(M[0])}else{var z=D.name;S[z]=D,U=z}return!F&&U&&(x=U),U||!F&&x},k=function($,D){if(T($))return $.clone();var O=typeof D=="object"?D:{};return O.date=$,O.args=arguments,new L(O)},P=w;P.l=I,P.i=T,P.w=function($,D){return k($,{locale:D.$L,utc:D.$u,x:D.$x,$offset:D.$offset})};var L=function(){function $(O){this.$L=I(O.locale,null,!0),this.parse(O),this.$x=this.$x||O.x||{},this[E]=!0}var D=$.prototype;return D.parse=function(O){this.$d=function(F){var U=F.date,V=F.utc;if(U===null)return new Date(NaN);if(P.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var M=U.match(g);if(M){var z=M[2]-1||0,q=(M[7]||"0").substring(0,3);return V?new Date(Date.UTC(M[1],z,M[3]||1,M[4]||0,M[5]||0,M[6]||0,q)):new Date(M[1],z,M[3]||1,M[4]||0,M[5]||0,M[6]||0,q)}}return new Date(U)}(O),this.init()},D.init=function(){var O=this.$d;this.$y=O.getFullYear(),this.$M=O.getMonth(),this.$D=O.getDate(),this.$W=O.getDay(),this.$H=O.getHours(),this.$m=O.getMinutes(),this.$s=O.getSeconds(),this.$ms=O.getMilliseconds()},D.$utils=function(){return P},D.isValid=function(){return this.$d.toString()!==m},D.isSame=function(O,F){var U=k(O);return this.startOf(F)<=U&&U<=this.endOf(F)},D.isAfter=function(O,F){return k(O)<this.startOf(F)},D.isBefore=function(O,F){return this.endOf(F)<k(O)},D.$g=function(O,F,U){return P.u(O)?this[F]:this.set(U,O)},D.unix=function(){return Math.floor(this.valueOf()/1e3)},D.valueOf=function(){return this.$d.getTime()},D.startOf=function(O,F){var U=this,V=!!P.u(F)||F,M=P.p(O),z=function(te,ae){var _e=P.w(U.$u?Date.UTC(U.$y,ae,te):new Date(U.$y,ae,te),U);return V?_e:_e.endOf(u)},q=function(te,ae){return P.w(U.toDate()[te].apply(U.toDate("s"),(V?[0,0,0,0]:[23,59,59,999]).slice(ae)),U)},j=this.$W,H=this.$M,G=this.$D,J="set"+(this.$u?"UTC":"");switch(M){case h:return V?z(1,0):z(31,11);case d:return V?z(1,H):z(0,H+1);case c:var re=this.$locale().weekStart||0,ie=(j<re?j+7:j)-re;return z(V?G-ie:G+(6-ie),H);case u:case p:return q(J+"Hours",0);case l:return q(J+"Minutes",1);case a:return q(J+"Seconds",2);case o:return q(J+"Milliseconds",3);default:return this.clone()}},D.endOf=function(O){return this.startOf(O,!1)},D.$set=function(O,F){var U,V=P.p(O),M="set"+(this.$u?"UTC":""),z=(U={},U[u]=M+"Date",U[p]=M+"Date",U[d]=M+"Month",U[h]=M+"FullYear",U[l]=M+"Hours",U[a]=M+"Minutes",U[o]=M+"Seconds",U[s]=M+"Milliseconds",U)[V],q=V===u?this.$D+(F-this.$W):F;if(V===d||V===h){var j=this.clone().set(p,1);j.$d[z](q),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else z&&this.$d[z](q);return this.init(),this},D.set=function(O,F){return this.clone().$set(O,F)},D.get=function(O){return this[P.p(O)]()},D.add=function(O,F){var U,V=this;O=Number(O);var M=P.p(F),z=function(H){var G=k(V);return P.w(G.date(G.date()+Math.round(H*O)),V)};if(M===d)return this.set(d,this.$M+O);if(M===h)return this.set(h,this.$y+O);if(M===u)return z(1);if(M===c)return z(7);var q=(U={},U[a]=r,U[l]=i,U[o]=n,U)[M]||1,j=this.$d.getTime()+O*q;return P.w(j,this)},D.subtract=function(O,F){return this.add(-1*O,F)},D.format=function(O){var F=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var V=O||"YYYY-MM-DDTHH:mm:ssZ",M=P.z(this),z=this.$H,q=this.$m,j=this.$M,H=U.weekdays,G=U.months,J=U.meridiem,re=function(ae,_e,ce,ze){return ae&&(ae[_e]||ae(F,V))||ce[_e].slice(0,ze)},ie=function(ae){return P.s(z%12||12,ae,"0")},te=J||function(ae,_e,ce){var ze=ae<12?"AM":"PM";return ce?ze.toLowerCase():ze};return V.replace(y,function(ae,_e){return _e||function(ce){switch(ce){case"YY":return String(F.$y).slice(-2);case"YYYY":return P.s(F.$y,4,"0");case"M":return j+1;case"MM":return P.s(j+1,2,"0");case"MMM":return re(U.monthsShort,j,G,3);case"MMMM":return re(G,j);case"D":return F.$D;case"DD":return P.s(F.$D,2,"0");case"d":return String(F.$W);case"dd":return re(U.weekdaysMin,F.$W,H,2);case"ddd":return re(U.weekdaysShort,F.$W,H,3);case"dddd":return H[F.$W];case"H":return String(z);case"HH":return P.s(z,2,"0");case"h":return ie(1);case"hh":return ie(2);case"a":return te(z,q,!0);case"A":return te(z,q,!1);case"m":return String(q);case"mm":return P.s(q,2,"0");case"s":return String(F.$s);case"ss":return P.s(F.$s,2,"0");case"SSS":return P.s(F.$ms,3,"0");case"Z":return M}return null}(ae)||M.replace(":","")})},D.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},D.diff=function(O,F,U){var V,M=this,z=P.p(F),q=k(O),j=(q.utcOffset()-this.utcOffset())*r,H=this-q,G=function(){return P.m(M,q)};switch(z){case h:V=G()/12;break;case d:V=G();break;case f:V=G()/3;break;case c:V=(H-j)/6048e5;break;case u:V=(H-j)/864e5;break;case l:V=H/i;break;case a:V=H/r;break;case o:V=H/n;break;default:V=H}return U?V:P.a(V)},D.daysInMonth=function(){return this.endOf(d).$D},D.$locale=function(){return S[this.$L]},D.locale=function(O,F){if(!O)return this.$L;var U=this.clone(),V=I(O,F,!0);return V&&(U.$L=V),U},D.clone=function(){return P.w(this.$d,this)},D.toDate=function(){return new Date(this.valueOf())},D.toJSON=function(){return this.isValid()?this.toISOString():null},D.toISOString=function(){return this.$d.toISOString()},D.toString=function(){return this.$d.toUTCString()},$}(),R=L.prototype;return k.prototype=R,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",u],["$M",d],["$y",h],["$D",p]].forEach(function($){R[$[1]]=function(D){return this.$g(D,$[0],$[1])}}),k.extend=function($,D){return $.$i||($(D,L,k),$.$i=!0),k},k.locale=I,k.isDayjs=T,k.unix=function($){return k(1e3*$)},k.en=S[x],k.Ls=S,k.p={},k})})(xLe);var w7t=xLe.exports;const _t=rl(w7t);function x7t({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>_t(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function E7t({formatter:e,...t}){return(e||x7t)(t)}function S7t({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function ELe({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var l,u,c;const o=S7t({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(u=(l=e.current)==null?void 0:l[o.levelIndex])==null?void 0:u[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?ELe({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function T7t(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function C7t(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function Xte({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=T7t(i.key);if(s){i.preventDefault();const o=C7t(e);ELe({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}function A7t(e,t){if(!e||!t)return t;const n=e.getHours(),r=e.getMinutes(),i=e.getSeconds(),s=e.getMilliseconds(),o=new Date(t);return o.setHours(n),o.setMinutes(r),o.setSeconds(i),o.setMilliseconds(s),o}var SLe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(qi,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,l=function(f,h,p){p===void 0&&(p={});var m=new Date(f),g=function(y,v){v===void 0&&(v={});var _=v.timeZoneName||"short",w=y+"|"+_,x=r[w];return x||(x=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:_}),r[w]=x),x}(h,p);return g.formatToParts(m)},u=function(f,h){for(var p=l(f,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,_=y.value,w=n[v];w>=0&&(m[w]=parseInt(_,10))}var x=m[3],S=x===24?0:x,E=m[0]+"-"+m[1]+"-"+m[2]+" "+S+":"+m[4]+":"+m[5]+":000",T=+f;return(o.utc(E).valueOf()-(T-=T%1e3))/6e4},c=s.prototype;c.tz=function(f,h){f===void 0&&(f=a);var p,m=this.utcOffset(),g=this.toDate(),y=g.toLocaleString("en-US",{timeZone:f}),v=Math.round((g-new Date(y))/1e3/60),_=15*-Math.round(g.getTimezoneOffset()/15)-v;if(!Number(_))p=this.utcOffset(0,h);else if(p=o(y,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(_,!0),h){var w=p.utcOffset();p=p.add(m-w,"minute")}return p.$x.$timezone=f,p},c.offsetName=function(f){var h=this.$x.$timezone||o.tz.guess(),p=l(this.valueOf(),h,{timeZoneName:f}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var d=c.startOf;c.startOf=function(f,h){if(!this.$x||!this.$x.$timezone)return d.call(this,f,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return d.call(p,f,h).tz(this.$x.$timezone,!0)},o.tz=function(f,h,p){var m=p&&h,g=p||h||a,y=u(+o(),g);if(typeof f!="string")return o(f).tz(g);var v=function(S,E,T){var I=S-60*E*1e3,k=u(I,T);if(E===k)return[I,E];var P=u(I-=60*(k-E)*1e3,T);return k===P?[I,k]:[S-60*Math.min(k,P)*1e3,Math.max(k,P)]}(o.utc(f,m).valueOf(),y,g),_=v[0],w=v[1],x=o(_).utcOffset(w);return x.$x.$timezone=g,x},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(f){a=f}}})})(SLe);var I7t=SLe.exports;const k7t=rl(I7t);var TLe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(qi,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var l=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},l.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},l.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var u=l.parse;l.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),u.call(this,m)};var c=l.init;l.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var d=l.utcOffset;l.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?d.call(this):this.$offset;if(typeof m=="string"&&(m=function(x){x===void 0&&(x="");var S=x.match(r);if(!S)return null;var E=(""+S[0]).match(i)||["-",0,0],T=E[0],I=60*+E[1]+ +E[2];return I===0?0:T==="+"?I:-I}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,_=this;if(g)return _.$offset=v,_.$u=m===0,_;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(_=this.local().add(v+w,n)).$offset=v,_.$x.$localOffset=w}else _=this.utc();return _};var f=l.format;l.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,g)},l.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var h=l.toDate;l.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=l.diff;l.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),_=a(m).local();return p.call(v,_,g,y)}}})})(TLe);var R7t=TLe.exports;const P7t=rl(R7t);_t.extend(P7t);_t.extend(k7t);function N7t(e,t){return t?_t(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const x0e=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=N7t(e,t);return n==="remove"&&(r*=-1),_t(e).add(r,"minutes").toDate()};function xm(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>x0e(i,n,e)):x0e(t,n,e)}function O7t({minDate:e,maxDate:t,timezone:n}){const r=xm("add",new Date,n);return!e&&!t?r:e&&_t(r).isBefore(e)?e:t&&_t(r).isAfter(t)?t:r}const D7t={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"–",consistentWeeks:!1},M7t=A.createContext(D7t);function su(){const e=A.useContext(M7t),t=A.useCallback(o=>o||e.locale,[e.locale]),n=A.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=A.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=A.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=A.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function $7t(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()} – ${r.toISOString()}`:`${n.toISOString()} –`:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function Qte({value:e,type:t,name:n,form:r}){return b.jsx("input",{type:"hidden",value:$7t(e,t),name:n,form:r})}Qte.displayName="@mantine/dates/HiddenDatesInput";var CLe={day:"m_396ce5cb"};const L7t={},F7t=(e,{size:t})=>({day:{"--day-size":Ht(t,"day-size")}}),Jte=Pe((e,t)=>{const n=be("Day",L7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,date:u,disabled:c,__staticSelector:d,weekend:f,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:_,static:w,highlightToday:x,...S}=n,E=ft({name:d||"Day",classes:CLe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:F7t,rootSelector:"day"}),T=su();return b.jsx(os,{...E("day",{style:_?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":_t(u).isSame(xm("add",new Date,T.getTimezone()),"day")||void 0,"data-hidden":_||void 0,"data-highlight-today":x||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&f||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...S,children:(m==null?void 0:m(u))||u.getDate()})});Jte.classes=CLe;Jte.displayName="@mantine/dates/Day";function j7t({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=_t().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(_t(r).add(s,"days").locale(e).format(t)):i.push(t(_t(r).add(s,"days").toDate()));return i}var ALe={weekday:"m_18a3eca"};const B7t={},z7t=(e,{size:t})=>({weekdaysRow:{"--wr-fz":Os(t),"--wr-spacing":Du(t)}}),Zte=Pe((e,t)=>{const n=be("WeekdaysRow",B7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,locale:u,firstDayOfWeek:c,weekdayFormat:d,cellComponent:f="th",__staticSelector:h,...p}=n,m=ft({name:h||"WeekdaysRow",classes:ALe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:z7t,rootSelector:"weekdaysRow"}),g=su(),y=j7t({locale:g.getLocale(u),format:d,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,_)=>b.jsx(f,{...m("weekday"),children:v},_));return b.jsx(ge,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});Zte.classes=ALe;Zte.displayName="@mantine/dates/WeekdaysRow";function U7t(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function V7t(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function H7t({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=U7t(s,t),a=V7t(i,t),l=[];for(;a<=o;){const u=[];for(let c=0;c<7;c+=1)u.push(new Date(a)),a.setDate(a.getDate()+1);l.push(u)}if(n&&l.length<6){const u=l[l.length-1],c=u[u.length-1],d=new Date(c);for(d.setDate(d.getDate()+1);l.length<6;){const f=[];for(let h=0;h<7;h+=1)f.push(new Date(d)),d.setDate(d.getDate()+1);l.push(f)}}return l}function ILe(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function kLe(e,t){return t instanceof Date?_t(e).isAfter(_t(t).subtract(1,"day"),"day"):!0}function RLe(e,t){return t instanceof Date?_t(e).isBefore(_t(t).add(1,"day"),"day"):!0}function q7t(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var d;return RLe(c,n)&&kLe(c,t)&&!(i!=null&&i(c))&&!((d=r==null?void 0:r(c))!=null&&d.disabled)&&(!s||ILe(c,o))}),l=a.find(c=>{var d;return(d=r==null?void 0:r(c))==null?void 0:d.selected});if(l)return l;const u=a.find(c=>_t().isSame(c,"date"));return u||a[0]}var PLe={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const W7t={withCellSpacing:!0},ij=Pe((e,t)=>{const n=be("Month",W7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,locale:c,firstDayOfWeek:d,weekdayFormat:f,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:_,hideOutsideDates:w,hideWeekdays:x,getDayAriaLabel:S,static:E,__getDayRef:T,__onDayKeyDown:I,__onDayClick:k,__onDayMouseEnter:P,__preventFocus:L,__stopPropagation:R,withCellSpacing:$,size:D,highlightToday:O,...F}=n,U=ft({name:u||"Month",classes:PLe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,rootSelector:"month"}),V=su(),M=H7t({month:h,firstDayOfWeek:V.getFirstDayOfWeek(d),consistentWeeks:V.consistentWeeks}),z=q7t(M,y,v,m,g,w,h),{resolvedClassNames:q,resolvedStyles:j}=rp({classNames:r,styles:o,props:n}),H=M.map((G,J)=>{const re=G.map((ie,te)=>{const ae=!ILe(ie,h),_e=(S==null?void 0:S(ie))||_t(ie).locale(c||V.locale).format("D MMMM YYYY"),ce=m==null?void 0:m(ie),ze=_t(ie).isSame(z,"date");return b.jsx("td",{...U("monthCell"),"data-with-spacing":$||void 0,children:b.jsx(Jte,{__staticSelector:u||"Month",classNames:q,styles:j,unstyled:a,"data-mantine-stop-propagation":R||void 0,highlightToday:O,renderDay:_,date:ie,size:D,weekend:V.getWeekendDays(p).includes(ie.getDay()),outside:ae,hidden:w?ae:!1,"aria-label":_e,static:E,disabled:(g==null?void 0:g(ie))||!RLe(ie,v)||!kLe(ie,y),ref:Oe=>T==null?void 0:T(J,te,Oe),...ce,onKeyDown:Oe=>{var $e;($e=ce==null?void 0:ce.onKeyDown)==null||$e.call(ce,Oe),I==null||I(Oe,{rowIndex:J,cellIndex:te,date:ie})},onMouseEnter:Oe=>{var $e;($e=ce==null?void 0:ce.onMouseEnter)==null||$e.call(ce,Oe),P==null||P(Oe,ie)},onClick:Oe=>{var $e;($e=ce==null?void 0:ce.onClick)==null||$e.call(ce,Oe),k==null||k(Oe,ie)},onMouseDown:Oe=>{var $e;($e=ce==null?void 0:ce.onMouseDown)==null||$e.call(ce,Oe),L&&Oe.preventDefault()},tabIndex:L||!ze?-1:0})},ie.toString())});return b.jsx("tr",{...U("monthRow"),children:re},J)});return b.jsxs(ge,{component:"table",...U("month"),size:D,ref:t,...F,children:[!x&&b.jsx("thead",{...U("monthThead"),children:b.jsx(Zte,{__staticSelector:u||"Month",locale:c,firstDayOfWeek:d,weekdayFormat:f,size:D,classNames:q,styles:j,unstyled:a})}),b.jsx("tbody",{...U("monthTbody"),children:H})]})});ij.classes=PLe;ij.displayName="@mantine/dates/Month";var NLe={pickerControl:"m_dc6a3c71"};const G7t={},Y7t=(e,{size:t})=>({pickerControl:{"--dpc-fz":Os(t),"--dpc-size":Ht(t,"dpc-size")}}),sj=Pe((e,t)=>{const n=be("PickerControl",G7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,firstInRange:u,lastInRange:c,inRange:d,__staticSelector:f,selected:h,disabled:p,...m}=n,g=ft({name:f||"PickerControl",classes:NLe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Y7t,rootSelector:"pickerControl"});return b.jsx(os,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":d&&!p&&!h||void 0,"data-first-in-range":u&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});sj.classes=NLe;sj.displayName="@mantine/dates/PickerControl";function OLe(e,t,n){return!t&&!n?!1:!!(t&&_t(e).isBefore(t,"year")||n&&_t(e).isAfter(n,"year"))}function K7t(e,t,n,r){const i=e.flat().filter(a=>{var l;return!OLe(a,t,n)&&!((l=r==null?void 0:r(a))!=null&&l.disabled)}),s=i.find(a=>{var l;return(l=r==null?void 0:r(a))==null?void 0:l.selected});if(s)return s;const o=i.find(a=>_t().isSame(a,"year"));return o||i[0]}function DLe(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var MLe={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const X7t={yearsListFormat:"YYYY",withCellSpacing:!0},oj=Pe((e,t)=>{const n=be("YearsList",X7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,decade:u,yearsListFormat:c,locale:d,minDate:f,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:_,__preventFocus:w,__stopPropagation:x,withCellSpacing:S,size:E,...T}=n,I=ft({name:m||"YearsList",classes:MLe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,rootSelector:"yearsList"}),k=su(),P=DLe(u),L=K7t(P,f,h,p),R=P.map(($,D)=>{const O=$.map((F,U)=>{const V=p==null?void 0:p(F),M=_t(F).isSame(L,"year");return b.jsx("td",{...I("yearsListCell"),"data-with-spacing":S||void 0,children:b.jsx(sj,{...I("yearsListControl"),size:E,unstyled:a,"data-mantine-stop-propagation":x||void 0,disabled:OLe(F,f,h),ref:z=>g==null?void 0:g(D,U,z),...V,onKeyDown:z=>{var q;(q=V==null?void 0:V.onKeyDown)==null||q.call(V,z),y==null||y(z,{rowIndex:D,cellIndex:U,date:F})},onClick:z=>{var q;(q=V==null?void 0:V.onClick)==null||q.call(V,z),v==null||v(z,F)},onMouseEnter:z=>{var q;(q=V==null?void 0:V.onMouseEnter)==null||q.call(V,z),_==null||_(z,F)},onMouseDown:z=>{var q;(q=V==null?void 0:V.onMouseDown)==null||q.call(V,z),w&&z.preventDefault()},tabIndex:w||!M?-1:0,children:_t(F).locale(k.getLocale(d)).format(c)})},U)});return b.jsx("tr",{...I("yearsListRow"),children:O},D)});return b.jsx(ge,{component:"table",ref:t,size:E,...I("yearsList"),...T,children:b.jsx("tbody",{children:R})})});oj.classes=MLe;oj.displayName="@mantine/dates/YearsList";function $Le(e,t,n){return!t&&!n?!1:!!(t&&_t(e).isBefore(t,"month")||n&&_t(e).isAfter(n,"month"))}function Q7t(e,t,n,r){const i=e.flat().filter(a=>{var l;return!$Le(a,t,n)&&!((l=r==null?void 0:r(a))!=null&&l.disabled)}),s=i.find(a=>{var l;return(l=r==null?void 0:r(a))==null?void 0:l.selected});if(s)return s;const o=i.find(a=>_t().isSame(a,"month"));return o||i[0]}function J7t(e){const t=_t(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(_t(t).add(r,"months").toDate()),r+=1;return n}var LLe={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const Z7t={monthsListFormat:"MMM",withCellSpacing:!0},aj=Pe((e,t)=>{const n=be("MonthsList",Z7t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,year:c,monthsListFormat:d,locale:f,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:_,__preventFocus:w,__stopPropagation:x,withCellSpacing:S,size:E,...T}=n,I=ft({name:u||"MonthsList",classes:LLe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,rootSelector:"monthsList"}),k=su(),P=J7t(c),L=Q7t(P,h,p,m),R=P.map(($,D)=>{const O=$.map((F,U)=>{const V=m==null?void 0:m(F),M=_t(F).isSame(L,"month");return b.jsx("td",{...I("monthsListCell"),"data-with-spacing":S||void 0,children:b.jsx(sj,{...I("monthsListControl"),size:E,unstyled:a,__staticSelector:u||"MonthsList","data-mantine-stop-propagation":x||void 0,disabled:$Le(F,h,p),ref:z=>g==null?void 0:g(D,U,z),...V,onKeyDown:z=>{var q;(q=V==null?void 0:V.onKeyDown)==null||q.call(V,z),y==null||y(z,{rowIndex:D,cellIndex:U,date:F})},onClick:z=>{var q;(q=V==null?void 0:V.onClick)==null||q.call(V,z),v==null||v(z,F)},onMouseEnter:z=>{var q;(q=V==null?void 0:V.onMouseEnter)==null||q.call(V,z),_==null||_(z,F)},onMouseDown:z=>{var q;(q=V==null?void 0:V.onMouseDown)==null||q.call(V,z),w&&z.preventDefault()},tabIndex:w||!M?-1:0,children:_t(F).locale(k.getLocale(f)).format(d)})},U)});return b.jsx("tr",{...I("monthsListRow"),children:O},D)});return b.jsx(ge,{component:"table",ref:t,size:E,...I("monthsList"),...T,children:b.jsx("tbody",{children:R})})});aj.classes=LLe;aj.displayName="@mantine/dates/MonthsList";var FLe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const eUt={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},tUt=(e,{size:t})=>({calendarHeader:{"--dch-control-size":Ht(t,"dch-control-size"),"--dch-fz":Os(t)}}),sv=Pe((e,t)=>{const n=be("CalendarHeader",eUt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,nextIcon:u,previousIcon:c,nextLabel:d,previousLabel:f,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:_,levelControlAriaLabel:w,withNext:x,withPrevious:S,__staticSelector:E,__preventFocus:T,__stopPropagation:I,...k}=n,P=ft({name:E||"CalendarHeader",classes:FLe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:tUt,rootSelector:"calendarHeader"}),L=T?R=>R.preventDefault():void 0;return b.jsxs(ge,{...P("calendarHeader"),ref:t,...k,children:[S&&b.jsx(os,{...P("calendarHeaderControl"),"data-direction":"previous","aria-label":f,onClick:p,unstyled:a,onMouseDown:L,disabled:v,"data-disabled":v||void 0,tabIndex:T||v?-1:0,"data-mantine-stop-propagation":I||void 0,children:c||b.jsx(ZA,{...P("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),b.jsx(os,{component:_?"button":"div",...P("calendarHeaderLevel"),onClick:_?m:void 0,unstyled:a,onMouseDown:_?L:void 0,disabled:!_,"data-static":!_||void 0,"aria-label":w,tabIndex:T||!_?-1:0,"data-mantine-stop-propagation":I||void 0,children:g}),x&&b.jsx(os,{...P("calendarHeaderControl"),"data-direction":"next","aria-label":d,onClick:h,unstyled:a,onMouseDown:L,disabled:y,"data-disabled":y||void 0,tabIndex:T||y?-1:0,"data-mantine-stop-propagation":I||void 0,children:u||b.jsx(ZA,{...P("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});sv.classes=FLe;sv.displayName="@mantine/dates/CalendarHeader";function nUt(e){const t=DLe(e);return[t[0][0],t[3][0]]}const rUt={decadeLabelFormat:"YYYY"},lj=Pe((e,t)=>{const n=be("DecadeLevel",rUt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:l,__getControlRef:u,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,nextDisabled:x,previousDisabled:S,levelControlAriaLabel:E,withNext:T,withPrevious:I,decadeLabelFormat:k,classNames:P,styles:L,unstyled:R,__staticSelector:$,__stopPropagation:D,size:O,...F}=n,U=su(),[V,M]=nUt(r),z={__staticSelector:$||"DecadeLevel",classNames:P,styles:L,unstyled:R,size:O},q=typeof x=="boolean"?x:o?!_t(M).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!_t(V).startOf("year").isAfter(s):!1,H=(G,J)=>_t(G).locale(i||U.locale).format(J);return b.jsxs(ge,{"data-decade-level":!0,size:O,ref:t,...F,children:[b.jsx(sv,{label:typeof k=="function"?k(V,M):`${H(V,k)} – ${H(M,k)}`,__preventFocus:p,__stopPropagation:D,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,nextDisabled:q,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:E,withNext:T,withPrevious:I,...z}),b.jsx(oj,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:l,__getControlRef:u,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,__preventFocus:p,__stopPropagation:D,withCellSpacing:h,...z})]})});lj.classes={...oj.classes,...sv.classes};lj.displayName="@mantine/dates/DecadeLevel";const iUt={yearLabelFormat:"YYYY"},uj=Pe((e,t)=>{const n=be("YearLevel",iUt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:l,__getControlRef:u,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,onLevelClick:x,nextDisabled:S,previousDisabled:E,hasNextLevel:T,levelControlAriaLabel:I,withNext:k,withPrevious:P,yearLabelFormat:L,__staticSelector:R,__stopPropagation:$,size:D,classNames:O,styles:F,unstyled:U,...V}=n,M=su(),z={__staticSelector:R||"YearLevel",classNames:O,styles:F,unstyled:U,size:D},q=typeof S=="boolean"?S:o?!_t(r).endOf("year").isBefore(o):!1,j=typeof E=="boolean"?E:s?!_t(r).startOf("year").isAfter(s):!1;return b.jsxs(ge,{"data-year-level":!0,size:D,ref:t,...V,children:[b.jsx(sv,{label:typeof L=="function"?L(r):_t(r).locale(i||M.locale).format(L),__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:_,onPrevious:w,onLevelClick:x,nextDisabled:q,previousDisabled:j,hasNextLevel:T,levelControlAriaLabel:I,withNext:k,withPrevious:P,...z}),b.jsx(aj,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:l,__getControlRef:u,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...z})]})});uj.classes={...sv.classes,...aj.classes};uj.displayName="@mantine/dates/YearLevel";const sUt={monthLabelFormat:"MMMM YYYY"},cj=Pe((e,t)=>{const n=be("MonthLevel",sUt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:l,excludeDate:u,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:_,withCellSpacing:w,highlightToday:x,__preventFocus:S,__stopPropagation:E,nextIcon:T,previousIcon:I,nextLabel:k,previousLabel:P,onNext:L,onPrevious:R,onLevelClick:$,nextDisabled:D,previousDisabled:O,hasNextLevel:F,levelControlAriaLabel:U,withNext:V,withPrevious:M,monthLabelFormat:z,classNames:q,styles:j,unstyled:H,__staticSelector:G,size:J,static:re,...ie}=n,te=su(),ae={__staticSelector:G||"MonthLevel",classNames:q,styles:j,unstyled:H,size:J},_e=typeof D=="boolean"?D:d?!_t(r).endOf("month").isBefore(d):!1,ce=typeof O=="boolean"?O:c?!_t(r).startOf("month").isAfter(c):!1;return b.jsxs(ge,{"data-month-level":!0,size:J,ref:t,...ie,children:[b.jsx(sv,{label:typeof z=="function"?z(r):_t(r).locale(i||te.locale).format(z),__preventFocus:S,__stopPropagation:E,nextIcon:T,previousIcon:I,nextLabel:k,previousLabel:P,onNext:L,onPrevious:R,onLevelClick:$,nextDisabled:_e,previousDisabled:ce,hasNextLevel:F,levelControlAriaLabel:U,withNext:V,withPrevious:M,...ae}),b.jsx(ij,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:l,excludeDate:u,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:_,__preventFocus:S,__stopPropagation:E,static:re,withCellSpacing:w,highlightToday:x,...ae})]})});cj.classes={...ij.classes,...sv.classes};cj.displayName="@mantine/dates/MonthLevel";var jLe={levelsGroup:"m_30b26e33"};const oUt={},ov=Pe((e,t)=>{const n=be("LevelsGroup",oUt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,...c}=n,d=ft({name:u||"LevelsGroup",classes:jLe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,rootSelector:"levelsGroup"});return b.jsx(ge,{ref:t,...d("levelsGroup"),...c})});ov.classes=jLe;ov.displayName="@mantine/dates/LevelsGroup";const aUt={numberOfColumns:1},dj=Pe((e,t)=>{const n=be("DecadeLevelGroup",aUt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:l,__onControlClick:u,__onControlMouseEnter:c,withCellSpacing:d,__preventFocus:f,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:_,previousDisabled:w,classNames:x,styles:S,unstyled:E,__staticSelector:T,__stopPropagation:I,numberOfColumns:k,levelControlAriaLabel:P,decadeLabelFormat:L,size:R,vars:$,...D}=n,O=A.useRef([]),F=Array(k).fill(0).map((U,V)=>{const M=_t(r).add(V*10,"years").toDate();return b.jsx(lj,{size:R,yearsListFormat:a,decade:M,withNext:V===k-1,withPrevious:V===0,decadeLabelFormat:L,__onControlClick:u,__onControlMouseEnter:c,__onControlKeyDown:(z,q)=>Xte({levelIndex:V,rowIndex:q.rowIndex,cellIndex:q.cellIndex,event:z,controlsRef:O}),__getControlRef:(z,q,j)=>{Array.isArray(O.current[V])||(O.current[V]=[]),Array.isArray(O.current[V][z])||(O.current[V][z]=[]),O.current[V][z][q]=j},levelControlAriaLabel:typeof P=="function"?P(M):P,locale:i,minDate:s,maxDate:o,__preventFocus:f,__stopPropagation:I,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:_,previousDisabled:w,getYearControlProps:l,__staticSelector:T||"DecadeLevelGroup",classNames:x,styles:S,unstyled:E,withCellSpacing:d},V)});return b.jsx(ov,{classNames:x,styles:S,__staticSelector:T||"DecadeLevelGroup",ref:t,size:R,unstyled:E,...D,children:F})});dj.classes={...ov.classes,...lj.classes};dj.displayName="@mantine/dates/DecadeLevelGroup";const lUt={numberOfColumns:1},fj=Pe((e,t)=>{const n=be("YearLevelGroup",lUt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:l,__onControlClick:u,__onControlMouseEnter:c,withCellSpacing:d,__preventFocus:f,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:_,nextDisabled:w,previousDisabled:x,hasNextLevel:S,classNames:E,styles:T,unstyled:I,__staticSelector:k,__stopPropagation:P,numberOfColumns:L,levelControlAriaLabel:R,yearLabelFormat:$,size:D,vars:O,...F}=n,U=A.useRef([]),V=Array(L).fill(0).map((M,z)=>{const q=_t(r).add(z,"years").toDate();return b.jsx(uj,{size:D,monthsListFormat:a,year:q,withNext:z===L-1,withPrevious:z===0,yearLabelFormat:$,__stopPropagation:P,__onControlClick:u,__onControlMouseEnter:c,__onControlKeyDown:(j,H)=>Xte({levelIndex:z,rowIndex:H.rowIndex,cellIndex:H.cellIndex,event:j,controlsRef:U}),__getControlRef:(j,H,G)=>{Array.isArray(U.current[z])||(U.current[z]=[]),Array.isArray(U.current[z][j])||(U.current[z][j]=[]),U.current[z][j][H]=G},levelControlAriaLabel:typeof R=="function"?R(q):R,locale:i,minDate:s,maxDate:o,__preventFocus:f,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:_,nextDisabled:w,previousDisabled:x,hasNextLevel:S,getMonthControlProps:l,classNames:E,styles:T,unstyled:I,__staticSelector:k||"YearLevelGroup",withCellSpacing:d},z)});return b.jsx(ov,{classNames:E,styles:T,__staticSelector:k||"YearLevelGroup",ref:t,size:D,unstyled:I,...F,children:V})});fj.classes={...uj.classes,...ov.classes};fj.displayName="@mantine/dates/YearLevelGroup";const uUt={numberOfColumns:1},hj=Pe((e,t)=>{const n=be("MonthLevelGroup",uUt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:l,excludeDate:u,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,highlightToday:_,__preventFocus:w,nextIcon:x,previousIcon:S,nextLabel:E,previousLabel:T,onNext:I,onPrevious:k,onLevelClick:P,nextDisabled:L,previousDisabled:R,hasNextLevel:$,classNames:D,styles:O,unstyled:F,numberOfColumns:U,levelControlAriaLabel:V,monthLabelFormat:M,__staticSelector:z,__stopPropagation:q,size:j,static:H,vars:G,...J}=n,re=A.useRef([]),ie=Array(U).fill(0).map((te,ae)=>{const _e=_t(r).add(ae,"months").toDate();return b.jsx(cj,{month:_e,withNext:ae===U-1,withPrevious:ae===0,monthLabelFormat:M,__stopPropagation:q,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(ce,ze)=>Xte({levelIndex:ae,rowIndex:ze.rowIndex,cellIndex:ze.cellIndex,event:ce,controlsRef:re}),__getDayRef:(ce,ze,Oe)=>{Array.isArray(re.current[ae])||(re.current[ae]=[]),Array.isArray(re.current[ae][ce])||(re.current[ae][ce]=[]),re.current[ae][ce][ze]=Oe},levelControlAriaLabel:typeof V=="function"?V(_e):V,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:l,excludeDate:u,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:w,nextIcon:x,previousIcon:S,nextLabel:E,previousLabel:T,onNext:I,onPrevious:k,onLevelClick:P,nextDisabled:L,previousDisabled:R,hasNextLevel:$,classNames:D,styles:O,unstyled:F,__staticSelector:z||"MonthLevelGroup",size:j,static:H,withCellSpacing:v,highlightToday:_},ae)});return b.jsx(ov,{classNames:D,styles:O,__staticSelector:z||"MonthLevelGroup",ref:t,size:j,...J,children:ie})});hj.classes={...ov.classes,...cj.classes};hj.displayName="@mantine/dates/MonthLevelGroup";var BLe={input:"m_6fa5e2aa"};const cUt={},pj=Pe((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:l,modalProps:u,dropdownType:c,children:d,formattedValue:f,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:_,shouldClear:w,readOnly:x,disabled:S,value:E,name:T,form:I,type:k,...P}=lK("PickerInputBase",cUt,e),L=_||(g&&w&&!x&&!S?b.jsx(Vy,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),R=()=>{k==="range"&&Array.isArray(E)&&E[0]&&!E[1]&&y(),h.close()};return b.jsxs(b.Fragment,{children:[c==="modal"&&!x&&b.jsx(as,{opened:p,onClose:R,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...u,children:d}),b.jsx(Pr.Wrapper,{...r,children:b.jsxs(Tn,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...l,disabled:(l==null?void 0:l.disabled)||c==="modal"||x,onClose:()=>{var $;($=l==null?void 0:l.onClose)==null||$.call(l),R()},children:[b.jsx(Tn.Target,{children:b.jsx(Pr,{"data-dates-input":!0,"data-read-only":x||void 0,disabled:S,component:"button",type:"button",multiline:!0,onClick:$=>{m==null||m($),h.toggle()},rightSection:L,...n,ref:t,classNames:{...s,input:dt(BLe.input,s==null?void 0:s.input)},...P,children:f||b.jsx(Pr.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),b.jsx(Tn.Dropdown,{"data-dates-dropdown":!0,children:d})]})}),b.jsx(Qte,{value:E,name:T,form:I,type:k})]})});pj.classes=BLe;pj.displayName="@mantine/dates/PickerInputBase";const E0e=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function sk({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=A.useRef(e),o=su(),[a,l,u]=Pi({value:xm("add",t,o.getTimezone(),!i),defaultValue:xm("add",n,o.getTimezone(),!i),finalValue:E0e(e),onChange:d=>{r==null||r(xm("remove",d,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:E0e(e),l(c))),[c,l,u]}function uz(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function dUt(e){return e===0?"month":e===1?"year":"decade"}function oC(e,t,n){return dUt(_c(uz(e,0),uz(t,0),uz(n,2)))}const fUt={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},QS=Pe((e,t)=>{const n=be("Calendar",fUt,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:l,date:u,defaultDate:c,onDateChange:d,numberOfColumns:f,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:_,__updateDateOnMonthSelect:w,firstDayOfWeek:x,weekdayFormat:S,weekendDays:E,getDayProps:T,excludeDate:I,renderDay:k,hideOutsideDates:P,hideWeekdays:L,getDayAriaLabel:R,monthLabelFormat:$,nextIcon:D,previousIcon:O,__onDayClick:F,__onDayMouseEnter:U,withCellSpacing:V,highlightToday:M,monthsListFormat:z,getMonthControlProps:q,yearLabelFormat:j,yearsListFormat:H,getYearControlProps:G,decadeLabelFormat:J,classNames:re,styles:ie,unstyled:te,minDate:ae,maxDate:_e,locale:ce,__staticSelector:ze,size:Oe,__preventFocus:$e,__stopPropagation:Ne,onNextDecade:pe,onPreviousDecade:ue,onNextYear:Se,onPreviousYear:De,onNextMonth:at,onPreviousMonth:He,static:le,__timezoneApplied:Ie,...Ye}=n,{resolvedClassNames:fe,resolvedStyles:Te}=rp({classNames:re,styles:ie,props:n}),[Ve,et]=Pi({value:a?oC(a,s,i):void 0,defaultValue:o?oC(o,s,i):void 0,finalValue:oC(void 0,s,i),onChange:l}),[St,An]=sk({type:"default",value:u,defaultValue:c,onChange:d,applyTimezone:!Ie}),_r={__staticSelector:ze||"Calendar",styles:Te,classNames:fe,unstyled:te,size:Oe},Br=su(),Or=h||f||1,yn=new Date,Nn=ae&&ae>yn?ae:yn,sr=St||xm("add",Nn,Br.getTimezone()),tr=()=>{const Hn=_t(sr).add(Or,"month").toDate();at==null||at(Hn),An(Hn)},Lo=()=>{const Hn=_t(sr).subtract(Or,"month").toDate();He==null||He(Hn),An(Hn)},Di=()=>{const Hn=_t(sr).add(Or,"year").toDate();Se==null||Se(Hn),An(Hn)},Qi=()=>{const Hn=_t(sr).subtract(Or,"year").toDate();De==null||De(Hn),An(Hn)},Us=()=>{const Hn=_t(sr).add(10*Or,"year").toDate();pe==null||pe(Hn),An(Hn)},mr=()=>{const Hn=_t(sr).subtract(10*Or,"year").toDate();ue==null||ue(Hn),An(Hn)};return b.jsxs(ge,{ref:t,size:Oe,"data-calendar":!0,...Ye,children:[Ve==="month"&&b.jsx(hj,{month:sr,minDate:ae,maxDate:_e,firstDayOfWeek:x,weekdayFormat:S,weekendDays:E,getDayProps:T,excludeDate:I,renderDay:k,hideOutsideDates:P,hideWeekdays:L,getDayAriaLabel:R,onNext:tr,onPrevious:Lo,hasNextLevel:i!=="month",onLevelClick:()=>et("year"),numberOfColumns:f,locale:ce,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:D,previousLabel:p==null?void 0:p.previousMonth,previousIcon:O,monthLabelFormat:$,__onDayClick:F,__onDayMouseEnter:U,__preventFocus:$e,__stopPropagation:Ne,static:le,withCellSpacing:V,highlightToday:M,..._r}),Ve==="year"&&b.jsx(fj,{year:sr,numberOfColumns:f,minDate:ae,maxDate:_e,monthsListFormat:z,getMonthControlProps:q,locale:ce,onNext:Di,onPrevious:Qi,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>et("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:D,previousLabel:p==null?void 0:p.previousYear,previousIcon:O,yearLabelFormat:j,__onControlMouseEnter:v,__onControlClick:(Hn,Sa)=>{w&&An(Sa),et(oC("month",s,i)),g==null||g(Sa)},__preventFocus:$e,__stopPropagation:Ne,withCellSpacing:V,..._r}),Ve==="decade"&&b.jsx(dj,{decade:sr,minDate:ae,maxDate:_e,yearsListFormat:H,getYearControlProps:G,locale:ce,onNext:Us,onPrevious:mr,numberOfColumns:f,nextLabel:p==null?void 0:p.nextDecade,nextIcon:D,previousLabel:p==null?void 0:p.previousDecade,previousIcon:O,decadeLabelFormat:J,__onControlMouseEnter:y,__onControlClick:(Hn,Sa)=>{_&&An(Sa),et(oC("year",s,i)),m==null||m(Sa)},__preventFocus:$e,__stopPropagation:Ne,withCellSpacing:V,..._r})]})});QS.classes={...dj.classes,...fj.classes,...hj.classes};QS.displayName="@mantine/dates/Calendar";function zLe(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:l,defaultDate:u,onDateChange:c,numberOfColumns:d,columnsToScroll:f,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:_,onNextYear:w,onPreviousYear:x,onNextDecade:S,onPreviousDecade:E,withCellSpacing:T,highlightToday:I,__updateDateOnYearSelect:k,__updateDateOnMonthSelect:P,firstDayOfWeek:L,weekdayFormat:R,weekendDays:$,getDayProps:D,excludeDate:O,renderDay:F,hideOutsideDates:U,hideWeekdays:V,getDayAriaLabel:M,monthLabelFormat:z,monthsListFormat:q,getMonthControlProps:j,yearLabelFormat:H,yearsListFormat:G,getYearControlProps:J,decadeLabelFormat:re,allowSingleDateInRange:ie,allowDeselect:te,minDate:ae,maxDate:_e,locale:ce,...ze}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:l,defaultDate:u,onDateChange:c,numberOfColumns:d,columnsToScroll:f,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:_,onNextYear:w,onPreviousYear:x,onNextDecade:S,onPreviousDecade:E,withCellSpacing:T,highlightToday:I,__updateDateOnYearSelect:k,__updateDateOnMonthSelect:P,firstDayOfWeek:L,weekdayFormat:R,weekendDays:$,getDayProps:D,excludeDate:O,renderDay:F,hideOutsideDates:U,hideWeekdays:V,getDayAriaLabel:M,monthLabelFormat:z,monthsListFormat:q,getMonthControlProps:j,yearLabelFormat:H,yearsListFormat:G,getYearControlProps:J,decadeLabelFormat:re,allowSingleDateInRange:ie,allowDeselect:te,minDate:ae,maxDate:_e,locale:ce},others:ze}}function S0e(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return _t(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&_t(n[1]).endOf("day").add(1,"ms").isAfter(e)}function hUt({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:l=!0}){const[u,c]=sk({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:l}),[d,f]=A.useState(e==="range"&&u[0]&&!u[1]?u[0]:null),[h,p]=A.useState(null),m=S=>{if(e==="range"){if(d instanceof Date&&!u[1]){if(_t(S).isSame(d,t)&&!s){f(null),p(null),c([null,null]);return}const E=[S,d];E.sort((T,I)=>T.getTime()-I.getTime()),c(E),p(null),f(null);return}if(u[0]&&!u[1]&&_t(S).isSame(u[0],t)&&!s){f(null),p(null),c([null,null]);return}c([S,null]),p(null),f(S);return}if(e==="multiple"){u.some(E=>_t(E).isSame(S,t))?c(u.filter(E=>!_t(E).isSame(S,t))):c([...u,S]);return}u&&o&&_t(S).isSame(u,t)?c(null):c(S)},g=S=>d instanceof Date&&h instanceof Date?S0e(S,[h,d]):u[0]instanceof Date&&u[1]instanceof Date?S0e(S,u):!1,y=e==="range"?S=>{a==null||a(S),p(null)}:a,v=S=>u[0]instanceof Date&&_t(S).isSame(u[0],t)?!(h&&_t(h).isBefore(u[0])):!1,_=S=>u[1]instanceof Date?_t(S).isSame(u[1],t):!(u[0]instanceof Date)||!h?!1:_t(h).isBefore(u[0])&&_t(S).isSame(u[0],t),w=S=>{if(e==="range")return{selected:u.some(T=>T&&_t(T).isSame(S,t)),inRange:g(S),firstInRange:v(S),lastInRange:_(S),"data-autofocus":!!u[0]&&_t(u[0]).isSame(S,t)||void 0};if(e==="multiple")return{selected:u.some(T=>T&&_t(T).isSame(S,t)),"data-autofocus":!!u[0]&&_t(u[0]).isSame(S,t)||void 0};const E=_t(u).isSame(S,t);return{selected:E,"data-autofocus":E||void 0}},x=e==="range"&&d?p:()=>{};return A.useEffect(()=>{e==="range"&&!u[0]&&!u[1]&&f(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:x,getControlProps:w,_value:u,setValue:c}}const pUt={type:"default",defaultLevel:"month",numberOfColumns:1},mj=Pe((e,t)=>{const n=be("DatePicker",pUt,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:l,onChange:u,__staticSelector:c,getDayProps:d,allowSingleDateInRange:f,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:_,...w}=n,{onDateChange:x,onRootMouseLeave:S,onHoveredDateChange:E,getControlProps:T}=hUt({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:f,value:l,defaultValue:a,onChange:u,onMouseLeave:p,applyTimezone:!_}),{resolvedClassNames:I,resolvedStyles:k}=rp({classNames:r,styles:i,props:n}),P=su();return b.jsx(QS,{ref:t,minLevel:"month",classNames:I,styles:k,__staticSelector:c||"DatePicker",onMouseLeave:S,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(L,R)=>{E(R),y==null||y(L,R)},__onDayClick:(L,R)=>{x(R),v==null||v(L,R)},getDayProps:L=>({...T(L),...d==null?void 0:d(L)}),...w,date:xm("add",w.date,P.getTimezone(),_),__timezoneApplied:!0})});mj.classes=QS.classes;mj.displayName="@mantine/dates/DatePicker";function mUt(e,t){if(e===null)return null;const n=xm("add",new Date(e),t);return Number.isNaN(n.getTime())||!e?null:n}function gUt({date:e,maxDate:t,minDate:n}){return!(e==null||Number.isNaN(e.getTime())||t&&_t(e).isAfter(t,"date")||n&&_t(e).isBefore(n,"date"))}const yUt={valueFormat:"MMMM D, YYYY",fixOnBlur:!0,preserveTime:!0},ene=Pe((e,t)=>{const n=lK("DateInput",yUt,e),{inputProps:r,wrapperProps:i,value:s,defaultValue:o,onChange:a,clearable:l,clearButtonProps:u,popoverProps:c,getDayProps:d,locale:f,valueFormat:h,dateParser:p,minDate:m,maxDate:g,fixOnBlur:y,onFocus:v,onBlur:_,onClick:w,readOnly:x,name:S,form:E,rightSection:T,unstyled:I,classNames:k,styles:P,allowDeselect:L,preserveTime:R,date:$,defaultDate:D,onDateChange:O,...F}=n,[U,V]=A.useState(!1),{calendarProps:M,others:z}=zLe(F),q=su(),H=p||(De=>{const at=_t(De,h,q.getLocale(f)).toDate();return Number.isNaN(at.getTime())?mUt(De,q.getTimezone()):at}),G=L!==void 0?L:l,J=De=>De?_t(De).locale(q.getLocale(f)).format(h):"",[re,ie,te]=sk({type:"default",value:s,defaultValue:o,onChange:a}),[ae,_e]=sk({type:"default",value:$,defaultValue:o||D,onChange:O});A.useEffect(()=>{te&&_e(s)},[te,s]);const[ce,ze]=A.useState(J(re));A.useEffect(()=>{ze(J(re))},[q.getLocale(f)]);const Oe=De=>{const at=De.currentTarget.value;if(ze(at),V(!0),at.trim()===""&&l)ie(null);else{const He=H(at);gUt({date:He,minDate:m,maxDate:g})&&(ie(He),_e(He))}},$e=De=>{_==null||_(De),V(!1),y&&ze(J(re))},Ne=De=>{v==null||v(De),V(!0)},pe=De=>{w==null||w(De),V(!0)},ue=De=>({...d==null?void 0:d(De),selected:_t(re).isSame(De,"day"),onClick:()=>{const at=R?A7t(re,De):De,He=l&&G&&_t(re).isSame(De,"day")?null:at;ie(He),!te&&ze(J(He)),V(!1)}}),Se=T||(l&&re&&!x?b.jsx(Vy,{variant:"transparent",onMouseDown:De=>De.preventDefault(),tabIndex:-1,onClick:()=>{ie(null),!te&&ze(""),V(!1)},unstyled:I,size:r.size||"sm",...u}):null);return Mu(()=>{re!==void 0&&!U&&ze(J(re))},[re]),b.jsxs(b.Fragment,{children:[b.jsx(Pr.Wrapper,{...i,__staticSelector:"DateInput",children:b.jsxs(Tn,{opened:U,trapFocus:!1,position:"bottom-start",disabled:x,withRoles:!1,unstyled:I,...c,children:[b.jsx(Tn.Target,{children:b.jsx(Pr,{"data-dates-input":!0,"data-read-only":x||void 0,autoComplete:"off",ref:t,value:ce,onChange:Oe,onBlur:$e,onFocus:Ne,onClick:pe,readOnly:x,rightSection:Se,...r,...z,__staticSelector:"DateInput"})}),b.jsx(Tn.Dropdown,{onMouseDown:De=>De.preventDefault(),"data-dates-dropdown":!0,children:b.jsx(QS,{__staticSelector:"DateInput",__timezoneApplied:!0,...M,classNames:k,styles:P,unstyled:I,__preventFocus:!0,minDate:m,maxDate:g,locale:f,getDayProps:ue,size:r.size,date:ae,onDateChange:_e})})]})}),b.jsx(Qte,{name:S,form:E,value:re,type:"default"})]})});ene.classes={...Pr.classes,...QS.classes};ene.displayName="@mantine/dates/DateInput";function vUt({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:l,valueFormatter:u}){const c=su(),[d,f]=B2(!1),[h,p]=sk({type:e,value:t,defaultValue:n,onChange:r}),m=E7t({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(l),formatter:u}),g=_=>{o&&(e==="default"&&f.close(),e==="range"&&_[0]&&_[1]&&f.close()),p(a&&e==="multiple"?[..._].sort((w,x)=>w.getTime()-x.getTime()):_)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:d,dropdownHandlers:f}}const bUt={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},tne=Pe((e,t)=>{const n=be("DatePickerInput",bUt,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:l,locale:u,classNames:c,styles:d,unstyled:f,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:_,vars:w,defaultDate:x,valueFormatter:S,...E}=n,{resolvedClassNames:T,resolvedStyles:I}=rp({classNames:c,styles:d,props:n}),{calendarProps:k,others:P}=zLe(E),{_value:L,setValue:R,formattedValue:$,dropdownHandlers:D,dropdownOpened:O,onClear:F,shouldClear:U}=vUt({type:r,value:i,defaultValue:s,onChange:o,locale:u,format:a,labelSeparator:l,closeOnChange:h,sortDates:y,valueFormatter:S}),V=Array.isArray(L)?L[0]||x:L||x,M=su();return b.jsx(pj,{formattedValue:$,dropdownOpened:O,dropdownHandlers:D,classNames:T,styles:I,unstyled:f,ref:t,onClear:F,shouldClear:U,value:L,size:p,variant:m,dropdownType:g,...P,type:r,__staticSelector:"DatePickerInput",children:b.jsx(mj,{...k,size:p,variant:m,type:r,value:L,defaultDate:V||O7t({maxDate:_,minDate:v,timezone:M.getTimezone()}),onChange:R,locale:u,classNames:T,styles:I,unstyled:f,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:_,date:xm("add",k.date,M.getTimezone()),__timezoneApplied:!0})})});tne.classes={...pj.classes,...mj.classes};tne.displayName="@mantine/dates/DatePickerInput";const Ax=e=>{var t,n,r,i;return(i=(t=e.id)!==null&&t!==void 0?t:(r=(n=e.accessorKey)===null||n===void 0?void 0:n.toString)===null||r===void 0?void 0:r.call(n))!==null&&i!==void 0?i:e.header},rL=e=>{const t=[],n=r=>{r.forEach(i=>{i.columns?n(i.columns):t.push(i)})};return n(e),t},ULe=({columnDefs:e,tableOptions:t})=>{const{aggregationFns:n={},defaultDisplayColumn:r,filterFns:i={},sortingFns:s={},state:{columnFilterFns:o={}}={}}=t;return e.map(a=>{var l,u;if(a.id||(a.id=Ax(a)),a.columnDefType||(a.columnDefType="data"),!((l=a.columns)===null||l===void 0)&&l.length)a.columnDefType="group",a.columns=ULe({columnDefs:a.columns,tableOptions:t});else if(a.columnDefType==="data"){if(Array.isArray(a.aggregationFn)){const c=a.aggregationFn;a.aggregationFn=(d,f,h)=>c.map(p=>{var m;return(m=n[p])===null||m===void 0?void 0:m.call(n,d,f,h)})}Object.keys(i).includes(o[a.id])&&(a.filterFn=(u=i[o[a.id]])!==null&&u!==void 0?u:i.fuzzy,a._filterFn=o[a.id]),Object.keys(s).includes(a.sortingFn)&&(a.sortingFn=s[a.sortingFn])}else a.columnDefType==="display"&&(a=Object.assign(Object.assign({},r),a));return a})},VLe=(e,t,n)=>{e.getCanPin()&&e.pin(t.getIsPinned());const r=[...n];return r.splice(r.indexOf(t.id),0,r.splice(r.indexOf(e.id),1)[0]),r},_Ut=e=>{const{filterVariant:t}=e;return t==="multi-select"?"arrIncludesSome":t!=null&&t.includes("range")?"betweenInclusive":["checkbox","date","select"].includes(t||"")?"equals":"fuzzy"},wUt=(e,t,n=-1,r=0,i,s)=>YR(e,"mrt-row-create",Object.assign({},...rL(e.options.columns).map(o=>({[Ax(o)]:""}))),n,r,i,s);function l_({header:e,id:t,size:n,tableOptions:r}){const{defaultDisplayColumn:i,displayColumnDefOptions:s,localization:o}=r;return Object.assign(Object.assign(Object.assign(Object.assign({},i),{header:e?o[e]:"",size:n}),s==null?void 0:s[t]),{id:t})}const HLe=e=>{const{enableRowPinning:t,rowPinningDisplayMode:n}=e;return!!(t&&!(n!=null&&n.startsWith("select")))},qLe=e=>{const{enableRowDragging:t,enableRowOrdering:n}=e;return!!(t||n)},nne=e=>{const{enableExpanding:t,enableGrouping:n,renderDetailPanel:r,state:{grouping:i}}=e;return!!(t||n&&(i!=null&&i.length)||r)},rne=e=>{const{createDisplayMode:t,editDisplayMode:n,enableEditing:r,enableRowActions:i,state:{creatingRow:s}}=e;return!!(i||s&&t==="row"||r&&["modal","row"].includes(n??""))},WLe=e=>!!e.enableRowSelection,GLe=e=>!!e.enableRowNumbers,YLe=e=>e.layoutMode==="grid-no-grow",xUt=e=>[HLe(e)&&"mrt-row-pin",qLe(e)&&"mrt-row-drag",e.positionActionsColumn==="first"&&rne(e)&&"mrt-row-actions",e.positionExpandColumn==="first"&&nne(e)&&"mrt-row-expand",WLe(e)&&"mrt-row-select",GLe(e)&&"mrt-row-numbers"].filter(Boolean),EUt=e=>[e.positionActionsColumn==="last"&&rne(e)&&"mrt-row-actions",e.positionExpandColumn==="last"&&nne(e)&&"mrt-row-expand",YLe(e)&&"mrt-row-spacer"].filter(Boolean),ine=(e,t=!1)=>{const{state:{columnOrder:n=[]}}=e,r=xUt(e),i=EUt(e),s=rL(e.columns).map(a=>Ax(a));let o=t?s:Array.from(new Set([...n,...s]));return o=o.filter(a=>!r.includes(a)&&!i.includes(a)),[...r,...o,...i]},SUt=(e,t,n)=>{let r=0;return e.columnFiltersMeta[n]&&(r=s7t(e.columnFiltersMeta[n],t.columnFiltersMeta[n])),r===0?m1.alphanumeric(e,t,n):r},TUt=Object.assign(Object.assign({},m1),{fuzzy:SUt}),CUt=(e,t)=>Math.max(...Object.values(t.columnFiltersMeta).map(n=>n.rank))-Math.max(...Object.values(e.columnFiltersMeta).map(n=>n.rank)),mt=(e,t)=>e instanceof Function?e(t):e,KLe=(e,t)=>{const{getCenterRows:n,getPrePaginationRowModel:r,getRowModel:i,getState:s,getTopRows:o,options:{createDisplayMode:a,enablePagination:l,enableRowPinning:u,manualPagination:c,positionCreatingRow:d,rowPinningDisplayMode:f}}=e,{creatingRow:h,pagination:p}=s(),m=AUt(e);let g=[];if(!m)g=!u||f!=null&&f.includes("sticky")?t?r().rows:i().rows:n();else{if(g=r().rows.sort((y,v)=>CUt(y,v)),l&&!c&&!t){const y=p.pageIndex*p.pageSize;g=g.slice(y,y+p.pageSize)}u&&!(f!=null&&f.includes("sticky"))&&(g=g.filter(y=>!y.getIsPinned()))}if(u&&(f!=null&&f.includes("sticky"))){const y=g.filter(v=>v.getIsPinned()).map(v=>v.id);g=[...o().filter(v=>!y.includes(v.id)),...g]}if(d!==void 0&&h&&a==="row"){const y=isNaN(+d)?d==="top"?0:g.length:+d;g=[...g.slice(0,y),h,...g.slice(y)]}return g},XLe=e=>{const{getState:t,options:{enableGlobalFilterRankedResults:n,manualExpanding:r,manualFiltering:i,manualGrouping:s,manualSorting:o}}=e,{expanded:a,globalFilterFn:l}=t();return!r&&!i&&!s&&!o&&n&&l==="fuzzy"&&a!==!0&&!Object.values(a).some(Boolean)},AUt=e=>{const{globalFilter:t,sorting:n}=e.getState();return XLe(e)&&t&&!Object.values(n).some(Boolean)},iL=({row:e,table:t})=>{const{options:{enableRowSelection:n}}=t;return e.getIsSelected()||mt(n,e)&&e.getCanSelectSubRows()&&e.getIsAllSubRowsSelected()},IUt=({renderedRowIndex:e=0,row:t,table:n})=>(r,i)=>{var s;const{getState:o,options:{enableBatchRowSelection:a,enableMultiRowSelection:l,enableRowPinning:u,manualPagination:c,rowPinningDisplayMode:d},refs:{lastSelectedRowId:f}}=n,{pagination:{pageIndex:h,pageSize:p}}=o(),m=c?0:p*h,g=iL({row:t,table:n});t.toggleSelected(i??!g);const y=new Set([t.id]);if(a&&l&&r.nativeEvent.shiftKey&&f.current!==null){const v=KLe(n,!0),_=v.findIndex(w=>w.id===f.current);if(_!==-1){const w=iL({row:v==null?void 0:v[_],table:n}),x=e+m,[S,E]=_<x?[_,x]:[x,_];if(g!==w)for(let T=S;T<=E;T++)v[T].toggleSelected(!g),y.add(v[T].id)}}f.current=t.id,t.getCanSelectSubRows()&&t.getIsAllSubRowsSelected()&&((s=t.subRows)===null||s===void 0||s.forEach(v=>v.toggleSelected(!1))),u&&(d!=null&&d.includes("select"))&&y.forEach(v=>{n.getRow(v).pin(g?!1:d!=null&&d.includes("bottom")?"bottom":"top")})},QLe=({table:e})=>(t,n,r)=>{const{options:{enableRowPinning:i,rowPinningDisplayMode:s,selectAllMode:o},refs:{lastSelectedRowId:a}}=e;o==="all"||r?e.toggleAllRowsSelected(n??t.target.checked):e.toggleAllPageRowsSelected(n??t.target.checked),i&&(s!=null&&s.includes("select"))&&e.setRowPinning({bottom:[],top:[]}),a.current=null},Zd=e=>e.replace(/[^a-zA-Z0-9]/g,"_"),kUt=e=>{var t,n;return typeof e.primaryShade=="number"?e.primaryShade:(n=(t=e.primaryShade)===null||t===void 0?void 0:t.dark)!==null&&n!==void 0?n:7},RUt=(e,t)=>e.colors[e.primaryColor][t??kUt(e)];function sL(e,t){const n=`data-${e}`;switch(typeof t){case"boolean":return t?{[n]:""}:null;case"number":return{[n]:`${t}`};case"string":return{[n]:t};default:return null}}const PUt=Object.assign({},WD),JLe=(e,t,n,r)=>{const i=n7t(e.getValue(t),n,{threshold:Da.MATCHES});return r(i),i.passed};JLe.autoRemove=e=>!e;const ZLe=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim().includes(n.toString().toLowerCase().trim());ZLe.autoRemove=e=>!e;const eFe=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim().startsWith(n.toString().toLowerCase().trim());eFe.autoRemove=e=>!e;const tFe=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim().endsWith(n.toString().toLowerCase().trim());tFe.autoRemove=e=>!e;const gj=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim()===(n==null?void 0:n.toString().toLowerCase().trim());gj.autoRemove=e=>!e;const nFe=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim()!==n.toString().toLowerCase().trim();nFe.autoRemove=e=>!e;const yj=(e,t,n)=>!isNaN(+n)&&!isNaN(+e.getValue(t))?+e.getValue(t)>+n:e.getValue(t).toString().toLowerCase().trim()>(n==null?void 0:n.toString().toLowerCase().trim());yj.autoRemove=e=>!e;const sne=(e,t,n)=>gj(e,t,n)||yj(e,t,n);sne.autoRemove=e=>!e;const vj=(e,t,n)=>!isNaN(+n)&&!isNaN(+e.getValue(t))?+e.getValue(t)<+n:e.getValue(t).toString().toLowerCase().trim()<(n==null?void 0:n.toString().toLowerCase().trim());vj.autoRemove=e=>!e;const one=(e,t,n)=>gj(e,t,n)||vj(e,t,n);one.autoRemove=e=>!e;const rFe=(e,t,n)=>(["",void 0].includes(n[0])||yj(e,t,n[0]))&&(!isNaN(+n[0])&&!isNaN(+n[1])&&+n[0]>+n[1]||["",void 0].includes(n[1])||vj(e,t,n[1]));rFe.autoRemove=e=>!e;const iFe=(e,t,n)=>(["",void 0].includes(n[0])||sne(e,t,n[0]))&&(!isNaN(+n[0])&&!isNaN(+n[1])&&+n[0]>+n[1]||["",void 0].includes(n[1])||one(e,t,n[1]));iFe.autoRemove=e=>!e;const sFe=(e,t,n)=>!e.getValue(t).toString().trim();sFe.autoRemove=e=>!e;const oFe=(e,t,n)=>!!e.getValue(t).toString().trim();oFe.autoRemove=e=>!e;const NUt=Object.assign(Object.assign({},Zf),{between:rFe,betweenInclusive:iFe,contains:ZLe,empty:sFe,endsWith:tFe,equals:gj,fuzzy:JLe,greaterThan:yj,greaterThanOrEqualTo:sne,lessThan:vj,lessThanOrEqualTo:one,notEmpty:oFe,notEquals:nFe,startsWith:eFe});function ane(e,t){var n;if(!t)return"";const r=`filter${t[0].toUpperCase()}${t.slice(1)}`;return(n=e[r])!==null&&n!==void 0?n:""}function Qt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var OUt={root:"MRT_EditActionButtons-module_root__BfxVZ"};const aFe=e=>{var{row:t,table:n,variant:r="icon"}=e,i=Qt(e,["row","table","variant"]);const{getState:s,options:{icons:{IconCircleX:o,IconDeviceFloppy:a},localization:l,onCreatingRowCancel:u,onCreatingRowSave:c,onEditingRowCancel:d,onEditingRowSave:f},refs:{editInputRefs:h},setCreatingRow:p,setEditingRow:m}=n,{creatingRow:g,editingRow:y,isSaving:v}=s(),_=(g==null?void 0:g.id)===t.id,w=(y==null?void 0:y.id)===t.id,x=()=>{_?(u==null||u({row:t,table:n}),p(null)):w&&(d==null||d({row:t,table:n}),m(null)),t._valuesCache={}},S=()=>{var E;(E=Object.values(h==null?void 0:h.current).filter(T=>{var I,k;return t.id===((k=(I=T==null?void 0:T.name)===null||I===void 0?void 0:I.split("_"))===null||k===void 0?void 0:k[0])}))===null||E===void 0||E.forEach(T=>{T.value!==void 0&&Object.hasOwn(t==null?void 0:t._valuesCache,T.name)&&(t._valuesCache[T.name]=T.value)}),_?c==null||c({exitCreatingMode:()=>p(null),row:t,table:n,values:t._valuesCache}):w&&(f==null||f({exitEditingMode:()=>m(null),row:t,table:n,values:t==null?void 0:t._valuesCache}))};return b.jsx(ge,Object.assign({className:dt("mrt-edit-action-buttons",OUt.root),onClick:E=>E.stopPropagation()},i,{children:r==="icon"?b.jsxs(b.Fragment,{children:[b.jsx(Xt,{label:l.cancel,withinPortal:!0,children:b.jsx(In,{"aria-label":l.cancel,color:"red",onClick:x,variant:"subtle",children:b.jsx(o,{})})}),b.jsx(Xt,{label:l.save,withinPortal:!0,children:b.jsx(In,{"aria-label":l.save,color:"blue",loading:v,onClick:S,variant:"subtle",children:b.jsx(a,{})})})]}):b.jsxs(b.Fragment,{children:[b.jsx(rn,{onClick:x,variant:"subtle",children:l.cancel}),b.jsx(rn,{loading:v,onClick:S,variant:"filled",children:l.save})]})}))},DUt=e=>{var{handleEdit:t,row:n,table:r}=e,i=Qt(e,["handleEdit","row","table"]);const{options:{editDisplayMode:s,enableEditing:o,icons:{IconDots:a,IconEdit:l},localization:u,positionActionsColumn:c,renderRowActionMenuItems:d}}=r;return b.jsxs(tn,{closeOnItemClick:!0,position:c==="first"?"bottom-start":c==="last"?"bottom-end":void 0,withinPortal:!0,children:[b.jsx(Xt,{label:u.rowActions,openDelay:1e3,withinPortal:!0,children:b.jsx(tn.Target,{children:b.jsx(In,Object.assign({"aria-label":u.rowActions,color:"gray",onClick:f=>f.stopPropagation(),size:"sm",variant:"subtle"},i,{children:b.jsx(a,{})}))})}),b.jsxs(tn.Dropdown,{onClick:f=>f.stopPropagation(),children:[o&&s!=="table"&&b.jsx(tn.Item,{leftSection:b.jsx(l,{}),onClick:t,children:u.edit}),d==null?void 0:d({row:n,table:r})]})]})},MUt=({cell:e,row:t,table:n})=>{const{getState:r,options:{createDisplayMode:i,editDisplayMode:s,enableEditing:o,icons:{IconEdit:a},localization:{edit:l},renderRowActionMenuItems:u,renderRowActions:c},setEditingRow:d}=n,{creatingRow:f,editingRow:h}=r(),p=(f==null?void 0:f.id)===t.id,m=(h==null?void 0:h.id)===t.id,g=v=>{v.stopPropagation(),d(Object.assign({},t))},y=p&&i==="row"||m&&s==="row";return b.jsx(b.Fragment,{children:c&&!y?c({cell:e,row:t,table:n}):y?b.jsx(aFe,{row:t,table:n}):!u&&mt(o,t)?b.jsx(Xt,{label:l,openDelay:1e3,position:"right",withinPortal:!0,children:b.jsx(In,{"aria-label":l,color:"gray",disabled:!!h&&h.id!==t.id,onClick:g,size:"md",variant:"subtle",children:b.jsx(a,{})})}):u?b.jsx(DUt,{handleEdit:g,row:t,table:n}):null})},$Ut=e=>Object.assign({Cell:({cell:t,row:n,table:r})=>b.jsx(MUt,{cell:t,row:n,table:r})},l_({header:"actions",id:"mrt-row-actions",size:70,tableOptions:e}));var LUt={"grab-icon":"MRT_GrabHandleButton-module_grab-icon__mQimy"};const lne=({actionIconProps:e,onDragEnd:t,onDragStart:n,table:{options:{icons:{IconGripHorizontal:r},localization:{move:i}}}})=>{var s,o;return b.jsx(Xt,{label:(s=e==null?void 0:e.title)!==null&&s!==void 0?s:i,openDelay:1e3,withinPortal:!0,children:b.jsx(In,Object.assign({"aria-label":(o=e==null?void 0:e.title)!==null&&o!==void 0?o:i,draggable:!0},e,{className:dt("mrt-grab-handle-button",LUt["grab-icon"],e==null?void 0:e.className),color:"gray",size:"sm",onClick:a=>{var l;a.stopPropagation(),(l=e==null?void 0:e.onClick)===null||l===void 0||l.call(e,a)},onDragEnd:t,onDragStart:n,title:void 0,variant:"transparent",children:b.jsx(r,{size:"100%"})}))})},FUt=e=>{var{row:t,rowRef:n,table:r}=e,i=Qt(e,["row","rowRef","table"]);const{options:{mantineRowDragHandleProps:s}}=r,o=Object.assign(Object.assign({},mt(s,{row:t,table:r})),i),a=u=>{var c;(c=o==null?void 0:o.onDragStart)===null||c===void 0||c.call(o,u),u.dataTransfer.setDragImage(n.current,0,0),r.setDraggingRow(t)},l=u=>{var c;(c=o==null?void 0:o.onDragEnd)===null||c===void 0||c.call(o,u),r.setDraggingRow(null),r.setHoveredRow(null)};return b.jsx(lne,{actionIconProps:o,onDragEnd:l,onDragStart:a,table:r})},jUt=e=>Object.assign({Cell:({row:t,rowRef:n,table:r})=>b.jsx(FUt,{row:t,rowRef:n,table:r}),grow:!1},l_({header:"move",id:"mrt-row-drag",size:60,tableOptions:e}));var mO={root:"MRT_ExpandAllButton-module_root__gkBZD",chevron:"MRT_ExpandAllButton-module_chevron__Iep0j",up:"MRT_ExpandAllButton-module_up__Xth3U",right:"MRT_ExpandAllButton-module_right__bS4L-"};const BUt=e=>{var t,n,{table:r}=e,i=Qt(e,["table"]);const{getCanSomeRowsExpand:s,getIsAllRowsExpanded:o,getIsSomeRowsExpanded:a,getState:l,options:{icons:{IconChevronsDown:u},localization:c,mantineExpandAllButtonProps:d,renderDetailPanel:f},toggleAllRowsExpanded:h}=r,{density:p,isLoading:m}=l(),g=Object.assign(Object.assign({},mt(d,{table:r})),i),y=o();return b.jsx(Xt,{label:((t=g==null?void 0:g.title)!==null&&t!==void 0?t:y)?c.collapseAll:c.expandAll,openDelay:1e3,withinPortal:!0,children:b.jsx(In,Object.assign({"aria-label":c.expandAll,color:"gray",variant:"subtle"},g,{className:dt("mrt-expand-all-button",mO.root,g==null?void 0:g.className,p),disabled:m||!f&&!s(),onClick:()=>h(!y),title:void 0,children:(n=g==null?void 0:g.children)!==null&&n!==void 0?n:b.jsx(u,{className:dt(mO.chevron,y?mO.up:a()?mO.right:void 0)})}))})};var aC={root:"MRT_ExpandButton-module_root__IFYio","root-ltr":"MRT_ExpandButton-module_root-ltr__FHNnp",chevron:"MRT_ExpandButton-module_chevron__XzC5P",right:"MRT_ExpandButton-module_right__-pC-A",up:"MRT_ExpandButton-module_up__TZGBo","root-rtl":"MRT_ExpandButton-module_root-rtl__zoudS"};const T0e=e=>{var t,n,{row:r,table:i}=e,s=Qt(e,["row","table"]);const o=ol(),{options:{icons:{IconChevronDown:a},localization:l,mantineExpandButtonProps:u,positionExpandColumn:c,renderDetailPanel:d}}=i,f=Object.assign(Object.assign({},mt(u,{row:r,table:i})),s),h=r.getCanExpand(),p=r.getIsExpanded(),m=!!(d!=null&&d({row:r,table:i})),g=v=>{var _;v.stopPropagation(),r.toggleExpanded(),(_=f==null?void 0:f.onClick)===null||_===void 0||_.call(f,v)},y=o.dir==="rtl"||c==="last";return b.jsx(Xt,{disabled:!h&&!m,label:((t=f==null?void 0:f.title)!==null&&t!==void 0?t:p)?l.collapse:l.expand,openDelay:1e3,withinPortal:!0,children:b.jsx(In,Object.assign({"aria-label":l.expand,color:"gray",disabled:!h&&!m,variant:"subtle"},f,{__vars:{"--mrt-row-depth":`${r.depth}`},className:dt("mrt-expand-button",aC.root,aC[`root-${y?"rtl":"ltr"}`],f==null?void 0:f.className),onClick:g,title:void 0,children:(n=f==null?void 0:f.children)!==null&&n!==void 0?n:b.jsx(a,{className:dt("mrt-expand-button-chevron",aC.chevron,!h&&!d?aC.right:p?aC.up:void 0)})}))})},zUt=e=>{var t;const{defaultColumn:n,enableExpandAll:r,groupedColumnMode:i,positionExpandColumn:s,renderDetailPanel:o,state:{grouping:a}}=e,l=s==="last"?{align:"right"}:void 0;return Object.assign({Cell:({cell:u,column:c,row:d,table:f})=>{var h,p,m;const g={row:d,table:f},y=(h=d.subRows)===null||h===void 0?void 0:h.length;return e.groupedColumnMode==="remove"&&d.groupingColumnId?b.jsxs(Et,{align:"center",gap:"0.25rem",children:[b.jsx(T0e,Object.assign({},g)),b.jsx(Xt,{label:f.getColumn(d.groupingColumnId).columnDef.header,openDelay:1e3,position:"right",children:b.jsx("span",{children:d.groupingValue})}),!!y&&b.jsxs("span",{children:["(",y,")"]})]}):b.jsxs(b.Fragment,{children:[b.jsx(T0e,Object.assign({},g)),(m=(p=c.columnDef).GroupedCell)===null||m===void 0?void 0:m.call(p,{cell:u,column:c,row:d,table:f})]})},Header:r?({table:u})=>{var c;return b.jsxs(Et,{align:"center",children:[b.jsx(BUt,{table:u}),i==="remove"&&((c=a==null?void 0:a.map(d=>u.getColumn(d).columnDef.header))===null||c===void 0?void 0:c.join(", "))]})}:void 0,mantineTableBodyCellProps:l,mantineTableHeadCellProps:l},l_({header:"expand",id:"mrt-row-expand",size:i==="remove"?(t=n==null?void 0:n.size)!==null&&t!==void 0?t:180:o?r?60:70:100,tableOptions:e}))},UUt=e=>{const{localization:t,rowNumberDisplayMode:n}=e,{pagination:{pageIndex:r,pageSize:i}}=e.state;return Object.assign({Cell:({renderedRowIndex:s=0,row:o})=>{var a;return((a=n==="static"?s+i*r:o.index)!==null&&a!==void 0?a:0)+1},Header:()=>t.rowNumber,grow:!1},l_({header:"rowNumbers",id:"mrt-row-numbers",size:50,tableOptions:e}))},cz=e=>{var{pinningPosition:t,row:n,table:r}=e,i=Qt(e,["pinningPosition","row","table"]);const{options:{icons:{IconPinned:s,IconX:o},localization:a,rowPinningDisplayMode:l}}=r,u=n.getIsPinned(),[c,d]=A.useState(!1),f=h=>{d(!1),h.stopPropagation(),n.pin(u?!1:t)};return b.jsx(Xt,{label:u?a.unpin:a.pin,openDelay:1e3,opened:c,children:b.jsx(In,Object.assign({"aria-label":a.pin,color:"gray",onClick:f,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),size:"xs",style:{height:"24px",width:"24px"},variant:"subtle"},i,{children:u?b.jsx(o,{}):b.jsx(s,{fontSize:"small",style:{transform:`rotate(${l==="sticky"?135:t==="top"?180:0}deg)`}})}))})},VUt=e=>{var{row:t,table:n}=e,r=Qt(e,["row","table"]);const{getState:i,options:{enableRowPinning:s,rowPinningDisplayMode:o}}=n,{density:a}=i();if(!mt(s,t))return null;const u=Object.assign({row:t,table:n},r);return o==="top-and-bottom"&&!t.getIsPinned()?b.jsxs(ge,{style:{display:"flex",flexDirection:a==="xs"?"row":"column"},children:[b.jsx(cz,Object.assign({pinningPosition:"top"},u)),b.jsx(cz,Object.assign({pinningPosition:"bottom"},u))]}):b.jsx(cz,Object.assign({pinningPosition:o==="bottom"?"bottom":"top"},u))},HUt=e=>Object.assign({Cell:({row:t,table:n})=>b.jsx(VUt,{row:t,table:n}),grow:!1},l_({header:"pin",id:"mrt-row-pin",size:60,tableOptions:e})),Gq=e=>{var t,{renderedRowIndex:n=0,row:r,table:i}=e,s=Qt(e,["renderedRowIndex","row","table"]);const{getState:o,options:{enableMultiRowSelection:a,localization:l,mantineSelectAllCheckboxProps:u,mantineSelectCheckboxProps:c,selectAllMode:d,selectDisplayMode:f}}=i,{density:h,isLoading:p}=o(),m=!r,g=m?d==="page"?i.getIsAllPageRowsSelected():i.getIsAllRowsSelected():void 0,y=m?g:iL({row:r,table:i}),v=Object.assign(Object.assign({},m?mt(u,{table:i}):mt(c,{row:r,table:i})),s),_=r?IUt({renderedRowIndex:n,row:r,table:i}):void 0,w=QLe({table:i}),x=Object.assign(Object.assign({"aria-label":m?l.toggleSelectAll:l.toggleSelectRow,checked:y,disabled:p||r&&!r.getCanSelect()||(r==null?void 0:r.id)==="mrt-row-create",onChange:S=>{S.stopPropagation(),m?w(S):_(S)},size:h==="xs"?"sm":"md"},v),{onClick:S=>{var E;S.stopPropagation(),(E=v==null?void 0:v.onClick)===null||E===void 0||E.call(v,S)},title:void 0});return b.jsx(Xt,{label:(t=v==null?void 0:v.title)!==null&&t!==void 0?t:m?l.toggleSelectAll:l.toggleSelectRow,openDelay:1e3,withinPortal:!0,children:b.jsx("span",{children:f==="switch"?b.jsx($0,Object.assign({},x)):f==="radio"||a===!1?b.jsx(ny,Object.assign({},x)):b.jsx(sf,Object.assign({indeterminate:!y&&m?i.getIsSomeRowsSelected():(r==null?void 0:r.getIsSomeSelected())&&r.getCanSelectSubRows()},x))})})},qUt=e=>{const{enableMultiRowSelection:t,enableSelectAll:n}=e;return Object.assign({Cell:({renderedRowIndex:r,row:i,table:s})=>b.jsx(Gq,{renderedRowIndex:r,row:i,table:s}),Header:n&&t?({table:r})=>b.jsx(Gq,{table:r}):void 0,grow:!1},l_({header:"select",id:"mrt-row-select",size:n?60:70,tableOptions:e}))},WUt={IconArrowAutofitContent:snt,IconArrowsSort:lnt,IconBaselineDensityLarge:cnt,IconBaselineDensityMedium:dnt,IconBaselineDensitySmall:fnt,IconBoxMultiple:hnt,IconChevronDown:ynt,IconChevronLeft:bnt,IconChevronLeftPipe:vnt,IconChevronRight:wnt,IconChevronRightPipe:_nt,IconChevronsDown:xnt,IconCircleX:Ent,IconClearAll:Snt,IconColumns:Tnt,IconDeviceFloppy:Ant,IconDots:Int,IconDotsVertical:USe,IconEdit:VSe,IconEyeOff:knt,IconFilter:Ont,IconFilterCog:Pnt,IconFilterOff:Nnt,IconGripHorizontal:Dnt,IconMaximize:Fnt,IconMinimize:jnt,IconPinned:znt,IconPinnedOff:Bnt,IconSearch:WSe,IconSearchOff:Hnt,IconSortAscending:qnt,IconSortDescending:Wnt,IconX:u6},GUt={actions:"Actions",and:"and",cancel:"Cancel",changeFilterMode:"Change filter mode",changeSearchMode:"Change search mode",clearFilter:"Clear filter",clearSearch:"Clear search",clearSelection:"Clear selection",clearSort:"Clear sort",clickToCopy:"Click to copy",copy:"Copy",collapse:"Collapse",collapseAll:"Collapse all",columnActions:"Column Actions",copiedToClipboard:"Copied to clipboard",dropToGroupBy:"Drop to group by {column}",edit:"Edit",expand:"Expand",expandAll:"Expand all",filterArrIncludes:"Includes",filterArrIncludesAll:"Includes all",filterArrIncludesSome:"Includes",filterBetween:"Between",filterBetweenInclusive:"Between Inclusive",filterByColumn:"Filter by {column}",filterContains:"Contains",filterEmpty:"Empty",filterEndsWith:"Ends With",filterEquals:"Equals",filterEqualsString:"Equals",filterFuzzy:"Fuzzy",filterGreaterThan:"Greater Than",filterGreaterThanOrEqualTo:"Greater Than Or Equal To",filterInNumberRange:"Between",filterIncludesString:"Contains",filterIncludesStringSensitive:"Contains",filterLessThan:"Less Than",filterLessThanOrEqualTo:"Less Than Or Equal To",filterMode:"Filter Mode: {filterType}",filterNotEmpty:"Not Empty",filterNotEquals:"Not Equals",filterStartsWith:"Starts With",filterWeakEquals:"Equals",filteringByColumn:"Filtering by {column} - {filterType} {filterValue}",goToFirstPage:"Go to first page",goToLastPage:"Go to last page",goToNextPage:"Go to next page",goToPreviousPage:"Go to previous page",grab:"Grab",groupByColumn:"Group by {column}",groupedBy:"Grouped by ",hideAll:"Hide all",hideColumn:"Hide {column} column",max:"Max",min:"Min",move:"Move",noRecordsToDisplay:"No records to display",noResultsFound:"No results found",of:"of",or:"or",pin:"Pin",pinToLeft:"Pin to left",pinToRight:"Pin to right",resetColumnSize:"Reset column size",resetOrder:"Reset order",rowActions:"Row Actions",rowNumber:"#",rowNumbers:"Row Numbers",rowsPerPage:"Rows per page",save:"Save",search:"Search",selectedCountOfRowCountRowsSelected:"{selectedCount} of {rowCount} row(s) selected",select:"Select",showAll:"Show all",showAllColumns:"Show all columns",showHideColumns:"Show/Hide columns",showHideFilters:"Show/Hide filters",showHideSearch:"Show/Hide search",sortByColumnAsc:"Sort by {column} ascending",sortByColumnDesc:"Sort by {column} descending",sortedByColumnAsc:"Sorted by {column} ascending",sortedByColumnDesc:"Sorted by {column} descending",thenBy:", then by ",toggleDensity:"Toggle density",toggleFullScreen:"Toggle full screen",toggleSelectAll:"Toggle select all",toggleSelectRow:"Toggle select row",toggleVisibility:"Toggle visibility",ungroupByColumn:"Ungroup by {column}",unpin:"Unpin",unpinAll:"Unpin all"},YUt={filterVariant:"text",maxSize:1e3,minSize:40,size:180},lFe={columnDefType:"display",enableClickToCopy:!1,enableColumnActions:!1,enableColumnDragging:!1,enableColumnFilter:!1,enableColumnOrdering:!1,enableEditing:!1,enableGlobalFilter:!1,enableGrouping:!1,enableHiding:!1,enableResizing:!1,enableSorting:!1},KUt=e=>{var t,{aggregationFns:n,autoResetExpanded:r=!1,columnFilterDisplayMode:i="subheader",columnResizeDirection:s,columnResizeMode:o="onChange",createDisplayMode:a="modal",defaultColumn:l,defaultDisplayColumn:u,editDisplayMode:c="modal",enableBatchRowSelection:d=!0,enableBottomToolbar:f=!0,enableColumnActions:h=!0,enableColumnFilters:p=!0,enableColumnOrdering:m=!1,enableColumnPinning:g=!1,enableColumnResizing:y=!1,enableColumnVirtualization:v,enableDensityToggle:_=!0,enableExpandAll:w=!0,enableExpanding:x,enableFacetedValues:S=!1,enableFilterMatchHighlighting:E=!0,enableFilters:T=!0,enableFullScreenToggle:I=!0,enableGlobalFilter:k=!0,enableGlobalFilterRankedResults:P=!0,enableGrouping:L=!1,enableHeaderActionsHoverReveal:R=!1,enableHiding:$=!0,enableMultiRowSelection:D=!0,enableMultiSort:O=!0,enablePagination:F=!0,enableRowPinning:U=!1,enableRowSelection:V=!1,enableRowVirtualization:M,enableSelectAll:z=!0,enableSorting:q=!0,enableStickyHeader:j=!1,enableTableFooter:H=!0,enableTableHead:G=!0,enableToolbarInternalActions:J=!0,enableTopToolbar:re=!0,filterFns:ie,icons:te,layoutMode:ae,localization:_e,manualFiltering:ce,manualGrouping:ze,manualPagination:Oe,manualSorting:$e,paginationDisplayMode:Ne="default",positionActionsColumn:pe="first",positionCreatingRow:ue="top",positionExpandColumn:Se="first",positionGlobalFilter:De="right",positionPagination:at="bottom",positionToolbarAlertBanner:He="top",positionToolbarDropZone:le="top",rowNumberDisplayMode:Ie="static",rowPinningDisplayMode:Ye="sticky",selectAllMode:fe="page",sortingFns:Te}=e,Ve=Qt(e,["aggregationFns","autoResetExpanded","columnFilterDisplayMode","columnResizeDirection","columnResizeMode","createDisplayMode","defaultColumn","defaultDisplayColumn","editDisplayMode","enableBatchRowSelection","enableBottomToolbar","enableColumnActions","enableColumnFilters","enableColumnOrdering","enableColumnPinning","enableColumnResizing","enableColumnVirtualization","enableDensityToggle","enableExpandAll","enableExpanding","enableFacetedValues","enableFilterMatchHighlighting","enableFilters","enableFullScreenToggle","enableGlobalFilter","enableGlobalFilterRankedResults","enableGrouping","enableHeaderActionsHoverReveal","enableHiding","enableMultiRowSelection","enableMultiSort","enablePagination","enableRowPinning","enableRowSelection","enableRowVirtualization","enableSelectAll","enableSorting","enableStickyHeader","enableTableFooter","enableTableHead","enableToolbarInternalActions","enableTopToolbar","filterFns","icons","layoutMode","localization","manualFiltering","manualGrouping","manualPagination","manualSorting","paginationDisplayMode","positionActionsColumn","positionCreatingRow","positionExpandColumn","positionGlobalFilter","positionPagination","positionToolbarAlertBanner","positionToolbarDropZone","rowNumberDisplayMode","rowPinningDisplayMode","selectAllMode","sortingFns"]);const et=ol();return te=A.useMemo(()=>Object.assign(Object.assign({},WUt),te),[te]),_e=A.useMemo(()=>Object.assign(Object.assign({},GUt),_e),[_e]),n=A.useMemo(()=>Object.assign(Object.assign({},PUt),n),[]),ie=A.useMemo(()=>Object.assign(Object.assign({},NUt),ie),[]),Te=A.useMemo(()=>Object.assign(Object.assign({},TUt),Te),[]),l=A.useMemo(()=>Object.assign(Object.assign({},YUt),l),[l]),u=A.useMemo(()=>Object.assign(Object.assign({},lFe),u),[u]),[v,M]=A.useMemo(()=>[v,M],[]),s||(s=et.dir||"ltr"),ae=ae||(y?"grid-no-grow":"semantic"),ae==="semantic"&&(M||v)&&(ae="grid"),M&&(j=!0),F===!1&&Oe===void 0&&(Oe=!0),!((t=Ve.data)===null||t===void 0)&&t.length||(ce=!0,ze=!0,Oe=!0,$e=!0),Object.assign({aggregationFns:n,autoResetExpanded:r,columnFilterDisplayMode:i,columnResizeDirection:s,columnResizeMode:o,createDisplayMode:a,defaultColumn:l,defaultDisplayColumn:u,editDisplayMode:c,enableBatchRowSelection:d,enableBottomToolbar:f,enableColumnActions:h,enableColumnFilters:p,enableColumnOrdering:m,enableColumnPinning:g,enableColumnResizing:y,enableColumnVirtualization:v,enableDensityToggle:_,enableExpandAll:w,enableExpanding:x,enableFacetedValues:S,enableFilterMatchHighlighting:E,enableFilters:T,enableFullScreenToggle:I,enableGlobalFilter:k,enableGlobalFilterRankedResults:P,enableGrouping:L,enableHeaderActionsHoverReveal:R,enableHiding:$,enableMultiRowSelection:D,enableMultiSort:O,enablePagination:F,enableRowPinning:U,enableRowSelection:V,enableRowVirtualization:M,enableSelectAll:z,enableSorting:q,enableStickyHeader:j,enableTableFooter:H,enableTableHead:G,enableToolbarInternalActions:J,enableTopToolbar:re,filterFns:ie,getCoreRowModel:Bzt(),getExpandedRowModel:x||L?zzt():void 0,getFacetedMinMaxValues:S?Uzt():void 0,getFacetedRowModel:S?qzt():void 0,getFacetedUniqueValues:S?Wzt():void 0,getFilteredRowModel:p||k||T?Gzt():void 0,getGroupedRowModel:L?Yzt():void 0,getPaginationRowModel:F?Xzt():void 0,getSortedRowModel:q?Qzt():void 0,getSubRows:St=>St==null?void 0:St.subRows,icons:te,layoutMode:ae,localization:_e,manualFiltering:ce,manualGrouping:ze,manualPagination:Oe,manualSorting:$e,paginationDisplayMode:Ne,positionActionsColumn:pe,positionCreatingRow:ue,positionExpandColumn:Se,positionGlobalFilter:De,positionPagination:at,positionToolbarAlertBanner:He,positionToolbarDropZone:le,rowNumberDisplayMode:Ie,rowPinningDisplayMode:Ye,selectAllMode:fe,sortingFns:Te},Ve)},dz={children:null,style:{minWidth:0,padding:0,width:0}},XUt=e=>Object.assign(Object.assign(Object.assign(Object.assign({},l_({id:"mrt-row-spacer",size:0,tableOptions:e})),{grow:!0}),lFe),{mantineTableBodyCellProps:dz,mantineTableFooterCellProps:dz,mantineTableHeadCellProps:dz}),QUt=e=>{const{getIsSomeRowsPinned:t,getPrePaginationRowModel:n,getState:r,options:{enablePagination:i,enableRowPinning:s,rowCount:o}}=e,{columnOrder:a,density:l,globalFilter:u,isFullScreen:c,isLoading:d,pagination:f,showSkeletons:h,sorting:p}=r(),m=e.options.columns.length,g=o??n().rows.length,y=A.useReducer(()=>({}),{})[1],v=A.useRef(),_=A.useRef();A.useEffect(()=>{typeof window<"u"&&(v.current=document.body.style.height)},[]),A.useEffect(()=>{if(typeof window<"u")if(c)_.current=document.body.getBoundingClientRect().top,document.body.style.height="100dvh";else{if(document.body.style.height=v.current,!_.current)return;window.scrollTo({behavior:"instant",top:-1*_.current})}},[c]),A.useEffect(()=>{m!==a.length&&e.setColumnOrder(ine(e.options))},[m]),A.useEffect(()=>{if(!i||d||h)return;const{pageIndex:x,pageSize:S}=f;x*S>=g&&e.setPageIndex(Math.ceil(g/S)-1)},[g]);const w=A.useRef(p);A.useEffect(()=>{p.length&&(w.current=p)},[p]),A.useEffect(()=>{XLe(e)&&(u?e.setSorting([]):e.setSorting(()=>w.current||[]))},[u]),A.useEffect(()=>{s&&t()&&setTimeout(()=>{y()},150)},[l])},JUt=e=>{var t,n,r,i,s,o,a,l,u,c,d,f,h,p,m,g,y,v,_,w,x,S,E,T,I,k,P,L,R,$,D,O,F;const U=A.useRef(null),V=A.useRef(null),M=A.useRef({}),z=A.useRef({}),q=A.useRef(null),j=A.useRef(null),H=A.useRef({}),G=A.useRef(null),J=A.useRef(null),re=A.useRef(null),ie=A.useRef(null),te=A.useMemo(()=>{var zr,ii,gi;const Mi=(zr=e.initialState)!==null&&zr!==void 0?zr:{};return Mi.columnOrder=(ii=Mi.columnOrder)!==null&&ii!==void 0?ii:ine(Object.assign(Object.assign({},e),{state:Object.assign(Object.assign({},e.initialState),e.state)})),Mi.globalFilterFn=(gi=e.globalFilterFn)!==null&&gi!==void 0?gi:"fuzzy",Mi},[]);e.initialState=te;const[ae,_e]=A.useState((t=te.creatingRow)!==null&&t!==void 0?t:null),[ce,ze]=A.useState(()=>Object.assign({},...rL(e.columns).map(zr=>{var ii,gi,Mi,Fo;return{[Ax(zr)]:zr.filterFn instanceof Function?(ii=zr.filterFn.name)!==null&&ii!==void 0?ii:"custom":(Fo=(gi=zr.filterFn)!==null&&gi!==void 0?gi:(Mi=te==null?void 0:te.columnFilterFns)===null||Mi===void 0?void 0:Mi[Ax(zr)])!==null&&Fo!==void 0?Fo:_Ut(zr)}}))),[Oe,$e]=A.useState((n=te.columnOrder)!==null&&n!==void 0?n:[]),[Ne,pe]=A.useState((r=te.columnSizingInfo)!==null&&r!==void 0?r:{}),[ue,Se]=A.useState((i=te==null?void 0:te.density)!==null&&i!==void 0?i:"md"),[De,at]=A.useState((s=te.draggingColumn)!==null&&s!==void 0?s:null),[He,le]=A.useState((o=te.draggingRow)!==null&&o!==void 0?o:null),[Ie,Ye]=A.useState((a=te.editingCell)!==null&&a!==void 0?a:null),[fe,Te]=A.useState((l=te.editingRow)!==null&&l!==void 0?l:null),[Ve,et]=A.useState((u=te.globalFilterFn)!==null&&u!==void 0?u:"fuzzy"),[St,An]=A.useState((c=te.grouping)!==null&&c!==void 0?c:[]),[_r,Br]=A.useState((d=te.hoveredColumn)!==null&&d!==void 0?d:null),[Or,yn]=A.useState((f=te.hoveredRow)!==null&&f!==void 0?f:null),[Nn,sr]=A.useState((h=te==null?void 0:te.isFullScreen)!==null&&h!==void 0?h:!1),[tr,Lo]=A.useState((p=te==null?void 0:te.pagination)!==null&&p!==void 0?p:{pageIndex:0,pageSize:10}),[Di,Qi]=A.useState((m=te==null?void 0:te.showAlertBanner)!==null&&m!==void 0?m:!1),[Us,mr]=A.useState((g=te==null?void 0:te.showColumnFilters)!==null&&g!==void 0?g:!1),[Hn,Sa]=A.useState((y=te==null?void 0:te.showGlobalFilter)!==null&&y!==void 0?y:!1),[Zu,Df]=A.useState((v=te==null?void 0:te.showToolbarDropZone)!==null&&v!==void 0?v:!1);e.state=Object.assign({columnFilterFns:ce,columnOrder:Oe,columnSizingInfo:Ne,creatingRow:ae,density:ue,draggingColumn:De,draggingRow:He,editingCell:Ie,editingRow:fe,globalFilterFn:Ve,grouping:St,hoveredColumn:_r,hoveredRow:Or,isFullScreen:Nn,pagination:tr,showAlertBanner:Di,showColumnFilters:Us,showGlobalFilter:Hn,showToolbarDropZone:Zu},e.state);const ht=e,Si=A.useRef([]);ht.columns=ht.state.columnSizingInfo.isResizingColumn||ht.state.draggingColumn||ht.state.draggingRow?Si.current:ULe({columnDefs:[...[HLe(ht)&&HUt(ht),qLe(ht)&&jUt(ht),rne(ht)&&$Ut(ht),nne(ht)&&zUt(ht),WLe(ht)&&qUt(ht),GLe(ht)&&UUt(ht)].filter(Boolean),...ht.columns,...[YLe(ht)&&XUt(ht)].filter(Boolean)],tableOptions:ht}),Si.current=ht.columns,ht.data=A.useMemo(()=>(ht.state.isLoading||ht.state.showSkeletons)&&!ht.data.length?[...Array(Math.min(ht.state.pagination.pageSize,20)).fill(null)].map(()=>Object.assign({},...rL(ht.columns).map(zr=>({[Ax(zr)]:null})))):ht.data,[ht.data,ht.state.isLoading,ht.state.showSkeletons]);const vn=Jzt(Object.assign(Object.assign({onColumnOrderChange:$e,onColumnSizingInfoChange:pe,onGroupingChange:An,onPaginationChange:Lo},ht),{globalFilterFn:(_=ht.filterFns)===null||_===void 0?void 0:_[Ve??"fuzzy"]}));return vn.refs={bottomToolbarRef:V,editInputRefs:M,filterInputRefs:z,lastSelectedRowId:U,searchInputRef:q,tableContainerRef:j,tableFooterRef:ie,tableHeadCellRefs:H,tableHeadRef:re,tablePaperRef:G,topToolbarRef:J},vn.setCreatingRow=zr=>{var ii,gi;let Mi=zr;zr===!0&&(Mi=wUt(vn)),(gi=(ii=ht==null?void 0:ht.onCreatingRowChange)===null||ii===void 0?void 0:ii.call(ht,Mi))!==null&&gi!==void 0||_e(Mi)},vn.setColumnFilterFns=(w=ht.onColumnFilterFnsChange)!==null&&w!==void 0?w:ze,vn.setDensity=(x=ht.onDensityChange)!==null&&x!==void 0?x:Se,vn.setDraggingColumn=(S=ht.onDraggingColumnChange)!==null&&S!==void 0?S:at,vn.setDraggingRow=(E=ht.onDraggingRowChange)!==null&&E!==void 0?E:le,vn.setEditingCell=(T=ht.onEditingCellChange)!==null&&T!==void 0?T:Ye,vn.setEditingRow=(I=ht.onEditingRowChange)!==null&&I!==void 0?I:Te,vn.setGlobalFilterFn=(k=ht.onGlobalFilterFnChange)!==null&&k!==void 0?k:et,vn.setHoveredColumn=(P=ht.onHoveredColumnChange)!==null&&P!==void 0?P:Br,vn.setHoveredRow=(L=ht.onHoveredRowChange)!==null&&L!==void 0?L:yn,vn.setIsFullScreen=(R=ht.onIsFullScreenChange)!==null&&R!==void 0?R:sr,vn.setShowAlertBanner=($=ht.onShowAlertBannerChange)!==null&&$!==void 0?$:Qi,vn.setShowColumnFilters=(D=ht.onShowColumnFiltersChange)!==null&&D!==void 0?D:mr,vn.setShowGlobalFilter=(O=ht.onShowGlobalFilterChange)!==null&&O!==void 0?O:Sa,vn.setShowToolbarDropZone=(F=ht.onShowToolbarDropZoneChange)!==null&&F!==void 0?F:Df,QUt(vn),vn},uFe=e=>JUt(KUt(e)),cFe=(e,t)=>{const n=bLe(e);return t===void 0||(t>=0&&t<Math.max(e.startIndex-e.overscan,0)&&n.unshift(t),t>=0&&t>e.endIndex+e.overscan&&n.push(t)),n},ZUt=e=>{var t,n,r,i;const{getLeftLeafColumns:s,getRightLeafColumns:o,getState:a,getVisibleLeafColumns:l,options:{columnVirtualizerInstanceRef:u,columnVirtualizerOptions:c,enableColumnPinning:d,enableColumnVirtualization:f},refs:{tableContainerRef:h}}=e,{columnPinning:p,draggingColumn:m}=a();if(!f)return;const g=mt(c,{table:e}),y=l(),[v,_]=A.useMemo(()=>d?[s().map(k=>k.getPinnedIndex()),o().map(k=>y.length-k.getPinnedIndex()-1).sort((k,P)=>k-P)]:[[],[]],[y.length,p,d]),w=v.length,x=_.length,S=A.useMemo(()=>m!=null&&m.id?y.findIndex(k=>k.id===(m==null?void 0:m.id)):void 0,[m==null?void 0:m.id]),E=wLe(Object.assign({count:y.length,estimateSize:k=>y[k].getSize(),getScrollElement:()=>h.current,horizontal:!0,overscan:3,rangeExtractor:A.useCallback(k=>{const P=cFe(k,S);return!w&&!x?P:[...new Set([...v,...P,..._])]},[v,_,S])},g)),T=E.getVirtualItems();E.virtualColumns=T;const I=T.length;if(I){const k=E.getTotalSize(),P=((t=T[w])===null||t===void 0?void 0:t.start)||0,L=((n=T[v.length-1])===null||n===void 0?void 0:n.end)||0,R=((r=T[I-x])===null||r===void 0?void 0:r.start)||0,$=((i=T[I-x-1])===null||i===void 0?void 0:i.end)||0;E.virtualPaddingLeft=P-L,E.virtualPaddingRight=k-$-(x?k-R:0)}return u&&(u.current=E),E},eVt=(e,t)=>{var n;const{getRowModel:r,getState:i,options:{enableRowVirtualization:s,renderDetailPanel:o,rowVirtualizerInstanceRef:a,rowVirtualizerOptions:l},refs:{tableContainerRef:u}}=e,{density:c,draggingRow:d,expanded:f}=i();if(!s)return;const h=mt(l,{table:e}),p=(n=t==null?void 0:t.length)!==null&&n!==void 0?n:r().rows.length,m=c==="xs"?42.7:c==="md"?54.7:70.7,g=wLe(Object.assign({count:o?p*2:p,estimateSize:y=>o&&y%2===1?f===!0?100:0:m,getScrollElement:()=>u.current,measureElement:typeof window<"u"&&navigator.userAgent.indexOf("Firefox")===-1?y=>y==null?void 0:y.getBoundingClientRect().height:void 0,overscan:4,rangeExtractor:A.useCallback(y=>{var v;return cFe(y,(v=d==null?void 0:d.index)!==null&&v!==void 0?v:0)},[d])},h));return g.virtualRows=g.getVirtualItems(),a&&(a.current=g),g},tVt=e=>{const{getRowModel:t,getState:n,options:{data:r,enableGlobalFilterRankedResults:i,positionCreatingRow:s}}=e,{creatingRow:o,expanded:a,globalFilter:l,pagination:u,rowPinning:c,sorting:d}=n();return A.useMemo(()=>KLe(e),[o,r,i,a,t().rows,l,u.pageIndex,u.pageSize,s,c,d])};var nVt={root:"MRT_TablePaper-module_root__q0v5L"},fz={root:"MRT_TableContainer-module_root__JIsGB","root-sticky":"MRT_TableContainer-module_root-sticky__uC4qx","root-fullscreen":"MRT_TableContainer-module_root-fullscreen__aM8Jg"},C0e={root:"MRT_Table-module_root__ms2uS","root-grid":"MRT_Table-module_root-grid__2Pynz"},dd={root:"MRT_TableBody-module_root__kGhRy","root-grid":"MRT_TableBody-module_root-grid__WdOGg","root-no-rows":"MRT_TableBody-module_root-no-rows__iyi9K","root-virtualized":"MRT_TableBody-module_root-virtualized__TxPAi","empty-row-tr-grid":"MRT_TableBody-module_empty-row-tr-grid__LTgxw","empty-row-td-grid":"MRT_TableBody-module_empty-row-td-grid__pzlgG","empty-row-td-content":"MRT_TableBody-module_empty-row-td-content__Cc2XW",pinned:"MRT_TableBody-module_pinned__XHpcs"},hz={root:"MRT_TableBodyRow-module_root__2c3D4","root-grid":"MRT_TableBodyRow-module_root-grid__AwXTe","root-virtualized":"MRT_TableBodyRow-module_root-virtualized__zYgxq"},Ov={root:"MRT_TableBodyCell-module_root__Wf-zi","root-grid":"MRT_TableBodyCell-module_root-grid__zIuC-","root-virtualized":"MRT_TableBodyCell-module_root-virtualized__jLl8R","root-data-col":"MRT_TableBodyCell-module_root-data-col__HHcxc","root-nowrap":"MRT_TableBodyCell-module_root-nowrap__-k1Jo","root-cursor-pointer":"MRT_TableBodyCell-module_root-cursor-pointer__4kw7J","root-editable-hover":"MRT_TableBodyCell-module_root-editable-hover__2DKSa"};const pz=["string","number"],rVt=["text","autocomplete"],A0e=({cell:e,renderedColumnIndex:t=0,renderedRowIndex:n=0,table:r})=>{var i,s;const{getState:o,options:{enableFilterMatchHighlighting:a,mantineHighlightProps:l}}=r,{column:u,row:c}=e,{columnDef:d}=u,{globalFilter:f,globalFilterFn:h}=o(),p=u.getFilterValue(),m=mt(l,{cell:e,column:u,row:c,table:r});let g=e.getIsAggregated()&&d.AggregatedCell?d.AggregatedCell({cell:e,column:u,row:c,table:r}):c.getIsGrouped()&&!e.getIsGrouped()?null:e.getIsGrouped()&&d.GroupedCell?d.GroupedCell({cell:e,column:u,row:c,table:r}):void 0;const y=g!==void 0;if(y||(g=e.renderValue()),a&&d.enableFilterMatchHighlighting!==!1&&g&&pz.includes(typeof g)&&(p&&pz.includes(typeof p)&&rVt.includes(d.filterVariant)||f&&pz.includes(typeof f)&&u.getCanGlobalFilter())){let v=((s=(i=u.getFilterValue())!==null&&i!==void 0?i:f)!==null&&s!==void 0?s:"").toString();(p?d._filterFn:h)==="fuzzy"&&(v=v.split(" ")),g=b.jsx(YK,Object.assign({color:"yellow.3",highlight:v},m,{children:g==null?void 0:g.toString()}))}return d.Cell&&!y&&(g=d.Cell({cell:e,column:u,renderedCellValue:g,renderedColumnIndex:t,renderedRowIndex:n,row:c,table:r})),g};var iVt={root:"MRT_CopyButton-module_root__mkXy4"};const sVt=e=>{var{cell:t,children:n,table:r}=e,i=Qt(e,["cell","children","table"]);const{options:{localization:{clickToCopy:s,copiedToClipboard:o},mantineCopyButtonProps:a}}=r,{column:l,row:u}=t,{columnDef:c}=l,d={cell:t,column:l,row:u,table:r},f=Object.assign(Object.assign(Object.assign({},mt(a,d)),mt(c.mantineCopyButtonProps,d)),i);return b.jsx(qEe,{value:t.getValue(),children:({copied:h,copy:p})=>{var m;return b.jsx(Xt,{color:h?"green":void 0,label:(m=f==null?void 0:f.title)!==null&&m!==void 0?m:h?o:s,openDelay:1e3,withinPortal:!0,children:b.jsx(os,Object.assign({},f,{className:dt("mrt-copy-button",iVt.root,f==null?void 0:f.className),onClick:g=>{g.stopPropagation(),p()},role:"presentation",title:void 0,children:n}))})}})},dFe=e=>{var t,{cell:n,table:r}=e,i=Qt(e,["cell","table"]);const{getState:s,options:{createDisplayMode:o,editDisplayMode:a,mantineEditSelectProps:l,mantineEditTextInputProps:u},refs:{editInputRefs:c},setCreatingRow:d,setEditingCell:f,setEditingRow:h}=r,{column:p,row:m}=n,{columnDef:g}=p,{creatingRow:y,editingRow:v}=s(),_=(y==null?void 0:y.id)===m.id,w=(v==null?void 0:v.id)===m.id,x=g.editVariant==="select",S=g.editVariant==="multi-select",[E,T]=A.useState(()=>n.getValue()),I={cell:n,column:p,row:m,table:r},k=Object.assign(Object.assign(Object.assign({},mt(u,I)),mt(g.mantineEditTextInputProps,I)),i),P=Object.assign(Object.assign(Object.assign({},mt(l,I)),mt(g.mantineEditSelectProps,I)),i),L=O=>{m._valuesCache[p.id]=O,_?d(m):w&&h(m)},R=O=>{var F;(F=k.onBlur)===null||F===void 0||F.call(k,O),L(E),f(null)},$=O=>{var F,U;(F=k.onKeyDown)===null||F===void 0||F.call(k,O),O.key==="Enter"&&((U=c.current[n.id])===null||U===void 0||U.blur())};if(g.Edit)return(t=g.Edit)===null||t===void 0?void 0:t.call(g,{cell:n,column:p,row:m,table:r});const D={disabled:mt(g.enableEditing,m)===!1,label:["custom","modal"].includes(_?o:a)?p.columnDef.header:void 0,name:n.id,onClick:O=>{var F;O.stopPropagation(),(F=k==null?void 0:k.onClick)===null||F===void 0||F.call(k,O)},placeholder:["custom","modal"].includes(_?o:a)?void 0:g.header,value:E,variant:a==="table"?"unstyled":"default"};return x?b.jsx(zl,Object.assign({},D,{searchable:!0,value:E},P,{onBlur:R,onChange:O=>{var F,U;(U=(F=P).onChange)===null||U===void 0||U.call(F,O),T(O)},onClick:O=>{var F;O.stopPropagation(),(F=P==null?void 0:P.onClick)===null||F===void 0||F.call(P,O)},ref:O=>{O&&(c.current[n.id]=O,P.ref&&(P.ref.current=O))}})):S?b.jsx(Hk,Object.assign({},D,{searchable:!0,value:E},P,{onBlur:R,onChange:O=>{var F,U;(U=(F=P).onChange)===null||U===void 0||U.call(F,O),T(O)},onClick:O=>{var F;O.stopPropagation(),(F=P==null?void 0:P.onClick)===null||F===void 0||F.call(P,O)},ref:O=>{O&&(c.current[n.id]=O,P.ref&&(P.ref.current=O))}})):b.jsx(qd,Object.assign({},D,{onKeyDown:$,value:E??""},k,{onBlur:R,onChange:O=>{var F;(F=k.onChange)===null||F===void 0||F.call(k,O),T(O.target.value)},onClick:O=>{var F;O.stopPropagation(),(F=k==null?void 0:k.onClick)===null||F===void 0||F.call(k,O)},ref:O=>{O&&(c.current[n.id]=O,k.ref&&(k.ref.current=O))}}))},fFe=e=>{var t,n,r,i,s,o,a,{cell:l,numRows:u=1,renderedColumnIndex:c=0,renderedRowIndex:d=0,rowRef:f,table:h,virtualCell:p}=e,m=Qt(e,["cell","numRows","renderedColumnIndex","renderedRowIndex","rowRef","table","virtualCell"]);const g=ol(),{getState:y,options:{columnResizeDirection:v,columnResizeMode:_,createDisplayMode:w,editDisplayMode:x,enableClickToCopy:S,enableColumnOrdering:E,enableColumnPinning:T,enableEditing:I,enableGrouping:k,layoutMode:P,mantineSkeletonProps:L,mantineTableBodyCellProps:R},refs:{editInputRefs:$},setEditingCell:D,setHoveredColumn:O}=h,{columnSizingInfo:F,creatingRow:U,density:V,draggingColumn:M,editingCell:z,editingRow:q,hoveredColumn:j,isLoading:H,showSkeletons:G}=y(),{column:J,row:re}=l,{columnDef:ie}=J,{columnDefType:te}=ie,ae={cell:l,column:J,renderedColumnIndex:c,renderedRowIndex:d,row:re,table:h},_e=Object.assign(Object.assign(Object.assign({},mt(R,ae)),mt(ie.mantineTableBodyCellProps,ae)),m),ce=mt(L,ae),[ze,Oe]=A.useState(100);A.useEffect(()=>{if(!H&&!G||ze!==100)return;const fe=J.getSize();Oe(te==="display"?fe/2:Math.round(Math.random()*(fe-fe/3)+fe/3))},[H,G]);const $e={minWidth:`max(calc(var(--col-${Zd(J==null?void 0:J.id)}-size) * 1px), ${(t=ie.minSize)!==null&&t!==void 0?t:30}px)`,width:`calc(var(--col-${Zd(J.id)}-size) * 1px)`};P==="grid"?$e.flex=`${[0,!1].includes(ie.grow)?0:`var(--col-${Zd(J.id)}-size)`} 0 auto`:P==="grid-no-grow"&&($e.flex=`${+(ie.grow||0)} 0 auto`);const Ne=(M==null?void 0:M.id)===J.id,pe=(j==null?void 0:j.id)===J.id,ue=T&&ie.columnDefType!=="group"&&J.getIsPinned(),Se=!l.getIsPlaceholder()&&mt(I,re)&&mt(ie.enableEditing,re)!==!1,De=Se&&!["custom","modal"].includes(x)&&(x==="table"||(q==null?void 0:q.id)===re.id||(z==null?void 0:z.id)===l.id)&&!re.getIsGrouped(),at=Se&&w==="row"&&(U==null?void 0:U.id)===re.id,He=mt(S,l)||mt(ie.enableClickToCopy,l)&&mt(ie.enableClickToCopy,l)!==!1,le=fe=>{var Te;(Te=_e==null?void 0:_e.onDoubleClick)===null||Te===void 0||Te.call(_e,fe),Se&&x==="cell"&&(D(l),setTimeout(()=>{var Ve;const et=$.current[l.id];et&&(et.focus(),(Ve=et.select)===null||Ve===void 0||Ve.call(et))},100))},Ie=fe=>{var Te;(Te=_e==null?void 0:_e.onDragEnter)===null||Te===void 0||Te.call(_e,fe),k&&(j==null?void 0:j.id)==="drop-zone"&&O(null),E&&M&&O(ie.enableColumnOrdering!==!1?J:null)},Ye={cell:l,renderedColumnIndex:c,renderedRowIndex:d,table:h};return b.jsx(o6,Object.assign({"data-column-pinned":ue||void 0,"data-dragging-column":Ne||void 0,"data-first-right-pinned":ue==="right"&&J.getIsFirstColumn(ue)||void 0,"data-hovered-column-target":pe||void 0,"data-index":c,"data-last-left-pinned":ue==="left"&&J.getIsLastColumn(ue)||void 0,"data-last-row":d===u-1||void 0,"data-resizing":_==="onChange"&&(F==null?void 0:F.isResizingColumn)===J.id&&v||void 0},_e,{__vars:Object.assign({"--mrt-cell-align":(n=_e.align)!==null&&n!==void 0?n:g.dir==="rtl"?"right":"left","--mrt-table-cell-left":ue==="left"?`${J.getStart(ue)}`:void 0,"--mrt-table-cell-right":ue==="right"?`${J.getAfter(ue)}`:void 0},_e.__vars),className:dt(Ov.root,(P==null?void 0:P.startsWith("grid"))&&Ov["root-grid"],p&&Ov["root-virtualized"],Se&&x==="cell"&&Ov["root-cursor-pointer"],Se&&["cell","table"].includes(x??"")&&te!=="display"&&Ov["root-editable-hover"],te==="data"&&Ov["root-data-col"],V==="xs"&&Ov["root-nowrap"],_e==null?void 0:_e.className),onDoubleClick:le,onDragEnter:Ie,style:fe=>Object.assign(Object.assign({},$e),mt(_e.style,fe)),children:(r=_e.children)!==null&&r!==void 0?r:b.jsxs(b.Fragment,{children:[l.getIsPlaceholder()?(s=(i=ie.PlaceholderCell)===null||i===void 0?void 0:i.call(ie,{cell:l,column:J,row:re,table:h}))!==null&&s!==void 0?s:null:G!==!1&&(H||G)?b.jsx(pX,Object.assign({height:20,width:ze},ce)):te==="display"&&(["mrt-row-expand","mrt-row-numbers","mrt-row-select"].includes(J.id)||!re.getIsGrouped())?(o=ie.Cell)===null||o===void 0?void 0:o.call(ie,Object.assign({column:J,renderedCellValue:l.renderValue(),row:re,rowRef:f},Ye)):at||De?b.jsx(dFe,{cell:l,table:h}):He&&ie.enableClickToCopy!==!1?b.jsx(sVt,{cell:l,table:h,children:b.jsx(A0e,Object.assign({},Ye))}):b.jsx(A0e,Object.assign({},Ye)),l.getIsGrouped()&&!ie.GroupedCell&&b.jsxs(b.Fragment,{children:[" (",(a=re.subRows)===null||a===void 0?void 0:a.length,")"]})]})}))},oVt=A.memo(fFe,(e,t)=>t.cell===e.cell);var Dv={root:"MRT_TableDetailPanel-module_root__vQAlM","root-grid":"MRT_TableDetailPanel-module_root-grid__7UMC6","root-virtual-row":"MRT_TableDetailPanel-module_root-virtual-row__r-X4Z",inner:"MRT_TableDetailPanel-module_inner__o-Fk-","inner-grid":"MRT_TableDetailPanel-module_inner-grid__WLZgF","inner-expanded":"MRT_TableDetailPanel-module_inner-expanded__6tg9T","inner-virtual":"MRT_TableDetailPanel-module_inner-virtual__TItRy"};const aVt=e=>{var t,n,{parentRowRef:r,renderedRowIndex:i=0,row:s,rowVirtualizer:o,striped:a,table:l,virtualRow:u}=e,c=Qt(e,["parentRowRef","renderedRowIndex","row","rowVirtualizer","striped","table","virtualRow"]);const{getState:d,getVisibleLeafColumns:f,options:{layoutMode:h,mantineDetailPanelProps:p,mantineTableBodyRowProps:m,renderDetailPanel:g}}=l,{isLoading:y}=d(),v=mt(m,{isDetailPanel:!0,row:s,table:l}),_=Object.assign(Object.assign({},mt(p,{row:s,table:l})),c),w=!y&&s.getIsExpanded()&&(g==null?void 0:g({row:s,table:l}));return b.jsx(mm,Object.assign({"data-index":g?i*2+1:i,"data-striped":a,ref:x=>{var S;x&&((S=o==null?void 0:o.measureElement)===null||S===void 0||S.call(o,x))}},v,{__vars:Object.assign({"--mrt-parent-row-height":u?`${(n=(t=r.current)===null||t===void 0?void 0:t.getBoundingClientRect())===null||n===void 0?void 0:n.height}px`:void 0,"--mrt-virtual-row-start":u?`${u.start}px`:void 0},v==null?void 0:v.__vars),className:dt("mantine-Table-tr-detail-panel",Dv.root,(h==null?void 0:h.startsWith("grid"))&&Dv["root-grid"],u&&Dv["root-virtual-row"],v==null?void 0:v.className),children:b.jsx(o6,Object.assign({colSpan:f().length,component:"td"},_,{__vars:{"--mrt-inner-width":`${l.getTotalSize()}px`},className:dt("mantine-Table-td-detail-panel",Dv.inner,(h==null?void 0:h.startsWith("grid"))&&Dv["inner-grid"],s.getIsExpanded()&&Dv["inner-expanded"],u&&Dv["inner-virtual"]),p:s.getIsExpanded()&&w?"md":0,children:o?s.getIsExpanded()&&w:b.jsx(qb,{in:s.getIsExpanded(),children:w})}))}))},GD=e=>{var t,n,r,{columnVirtualizer:i,numRows:s,pinnedRowIds:o,renderedRowIndex:a=0,row:l,rowVirtualizer:u,table:c,tableProps:d,virtualRow:f}=e,h=Qt(e,["columnVirtualizer","numRows","pinnedRowIds","renderedRowIndex","row","rowVirtualizer","table","tableProps","virtualRow"]);const{getState:p,options:{enableRowOrdering:m,enableRowPinning:g,enableStickyFooter:y,enableStickyHeader:v,layoutMode:_,mantineTableBodyRowProps:w,memoMode:x,renderDetailPanel:S,rowPinningDisplayMode:E},refs:{tableFooterRef:T,tableHeadRef:I},setHoveredRow:k}=c,{density:P,draggingColumn:L,draggingRow:R,editingCell:$,editingRow:D,hoveredRow:O,isFullScreen:F,rowPinning:U}=p(),V=l.getVisibleCells(),{virtualColumns:M,virtualPaddingLeft:z,virtualPaddingRight:q}=i??{},j=iL({row:l,table:c}),H=g&&l.getIsPinned(),G=H&&(E==null?void 0:E.includes("sticky"))&&"sticky",J=(R==null?void 0:R.id)===l.id,re=(O==null?void 0:O.id)===l.id,ie=Object.assign(Object.assign({},mt(w,{renderedRowIndex:a,row:l,table:c})),h),[te,ae]=A.useMemo(()=>!g||!G||!o||!l.getIsPinned()?[]:[[...o].reverse().indexOf(l.id),o.indexOf(l.id)],[o,U]),_e=(v||F)&&((t=I.current)===null||t===void 0?void 0:t.clientHeight)||0,ce=y&&((n=T.current)===null||n===void 0?void 0:n.clientHeight)||0,ze=parseInt((r=ie==null?void 0:ie.style)===null||r===void 0?void 0:r.height,10)||(P==="xs"?37:P==="md"?53:69),Oe=pe=>{m&&R&&k(l)},$e=A.useRef(null);let Ne=d.striped;return Ne&&(Ne===!0&&(Ne="odd"),Ne==="odd"&&a%2!==0&&(Ne=!1),Ne==="even"&&a%2===0&&(Ne=!1)),b.jsxs(b.Fragment,{children:[b.jsxs(mm,Object.assign({"data-dragging-row":J||void 0,"data-hovered-row-target":re||void 0,"data-index":S?a*2:a,"data-row-pinned":G||H||void 0,"data-selected":j||void 0,"data-striped":Ne,onDragEnter:Oe,ref:pe=>{pe&&($e.current=pe,u==null||u.measureElement(pe))}},ie,{__vars:Object.assign(Object.assign({},ie==null?void 0:ie.__vars),{"--mrt-pinned-row-bottom":!f&&te!==void 0&&H?`${te*ze+(y?ce-1:0)}`:void 0,"--mrt-pinned-row-top":f?void 0:ae!==void 0&&H?`${ae*ze+(v||F?_e-1:0)}`:void 0,"--mrt-virtual-row-start":f?`${f.start}`:void 0}),className:dt(hz.root,(_==null?void 0:_.startsWith("grid"))&&hz["root-grid"],f&&hz["root-virtualized"],ie==null?void 0:ie.className),children:[z?b.jsx(ge,{component:"td",display:"flex",w:z}):null,(M??l.getVisibleCells()).map((pe,ue)=>{let Se=pe;i&&(ue=pe.index,Se=V[ue]);const De={cell:Se,numRows:s,renderedColumnIndex:ue,renderedRowIndex:a,rowRef:$e,table:c,virtualCell:i?pe:void 0};return x==="cells"&&Se.column.columnDef.columnDefType==="data"&&!L&&!R&&($==null?void 0:$.id)!==Se.id&&(D==null?void 0:D.id)!==l.id?b.jsx(oVt,Object.assign({},De),Se.id):b.jsx(fFe,Object.assign({},De),Se.id)}),q?b.jsx(ge,{component:"td",display:"flex",w:q}):null]})),S&&!l.getIsGrouped()&&b.jsx(aVt,{parentRowRef:$e,renderedRowIndex:a,row:l,rowVirtualizer:u,striped:Ne,table:c,virtualRow:f})]})},mz=A.memo(GD,(e,t)=>e.row===t.row),hFe=e=>{var t,n,r,i,s,{columnVirtualizer:o,table:a,tableProps:l}=e,u=Qt(e,["columnVirtualizer","table","tableProps"]);const{getBottomRows:c,getIsSomeRowsPinned:d,getRowModel:f,getState:h,getTopRows:p,options:{enableStickyFooter:m,enableStickyHeader:g,layoutMode:y,localization:v,mantineTableBodyProps:_,memoMode:w,renderDetailPanel:x,renderEmptyRowsFallback:S,rowPinningDisplayMode:E},refs:{tableFooterRef:T,tableHeadRef:I,tablePaperRef:k}}=a,{columnFilters:P,globalFilter:L,isFullScreen:R,rowPinning:$}=h(),D=Object.assign(Object.assign({},mt(_,{table:a})),u),O=(g||R)&&((t=I.current)===null||t===void 0?void 0:t.clientHeight)||0,F=m&&((n=T.current)===null||n===void 0?void 0:n.clientHeight)||0,U=A.useMemo(()=>{var j,H;return!(!((j=$.bottom)===null||j===void 0)&&j.length)&&!(!((H=$.top)===null||H===void 0)&&H.length)?[]:f().rows.filter(G=>G.getIsPinned()).map(G=>G.id)},[$,f().rows]),V=tVt(a),M=eVt(a,V),{virtualRows:z}=M??{},q={columnVirtualizer:o,numRows:V.length,table:a,tableProps:l};return b.jsxs(b.Fragment,{children:[!(E!=null&&E.includes("sticky"))&&d("top")&&b.jsx(z2,Object.assign({},D,{__vars:Object.assign({"--mrt-table-head-height":`${O}`},D==null?void 0:D.__vars),className:dt(dd.pinned,(y==null?void 0:y.startsWith("grid"))&&dd["root-grid"],D==null?void 0:D.className),children:p().map((j,H)=>{const G=Object.assign(Object.assign({},q),{renderedRowIndex:H,row:j});return w==="rows"?b.jsx(mz,Object.assign({},G),j.id):b.jsx(GD,Object.assign({},G),j.id)})})),b.jsx(z2,Object.assign({},D,{__vars:Object.assign({"--mrt-table-body-height":M?`${M.getTotalSize()}px`:void 0},D==null?void 0:D.__vars),className:dt(dd.root,(y==null?void 0:y.startsWith("grid"))&&dd["root-grid"],!V.length&&dd["root-no-rows"],M&&dd["root-virtualized"],D==null?void 0:D.className),children:(r=D==null?void 0:D.children)!==null&&r!==void 0?r:V.length?b.jsx(b.Fragment,{children:(z??V).map((j,H)=>{if(M)if(x){if(j.index%2===1)return null;H=j.index/2}else H=j.index;const G=M?V[H]:j,J=Object.assign(Object.assign({},q),{pinnedRowIds:U,renderedRowIndex:H,row:G,rowVirtualizer:M,virtualRow:M?j:void 0}),re=`${G.id}-${G.index}`;return w==="rows"?b.jsx(mz,Object.assign({},J),re):b.jsx(GD,Object.assign({},J),re)})}):b.jsx("tr",{className:dt("mrt-table-body-row",(y==null?void 0:y.startsWith("grid"))&&dd["empty-row-tr-grid"]),children:b.jsx("td",{className:dt("mrt-table-body-cell",(y==null?void 0:y.startsWith("grid"))&&dd["empty-row-td-grid"]),colSpan:a.getVisibleLeafColumns().length,children:(i=S==null?void 0:S({table:a}))!==null&&i!==void 0?i:b.jsx(Xe,{__vars:{"--mrt-paper-width":`${(s=k.current)===null||s===void 0?void 0:s.clientWidth}`},className:dt(dd["empty-row-td-content"]),children:L||P.length?v.noResultsFound:v.noRecordsToDisplay})})})})),!(E!=null&&E.includes("sticky"))&&d("bottom")&&b.jsx(z2,Object.assign({},D,{__vars:Object.assign({"--mrt-table-footer-height":`${F}`},D==null?void 0:D.__vars),className:dt(dd.pinned,(y==null?void 0:y.startsWith("grid"))&&dd["root-grid"],D==null?void 0:D.className),children:c().map((j,H)=>{const G=Object.assign(Object.assign({},q),{renderedRowIndex:H,row:j});return w==="rows"?b.jsx(mz,Object.assign({},G),j.id):b.jsx(GD,Object.assign({},G),j.id)})}))]})},lVt=A.memo(hFe,(e,t)=>e.table.options.data===t.table.options.data);var gz={root:"MRT_TableFooter-module_root__-JXpw",grid:"MRT_TableFooter-module_grid__J3Ga-",sticky:"MRT_TableFooter-module_sticky__GcoK6"},I0e={root:"MRT_TableFooterRow-module_root__EuoPr","layout-mode-grid":"MRT_TableFooterRow-module_layout-mode-grid__dUEMF"},yz={root:"MRT_TableFooterCell-module_root__d8Scs",grid:"MRT_TableFooterCell-module_grid__H9jLk",group:"MRT_TableFooterCell-module_group__l3-p-"};const uVt=e=>{var t,n,r,i,s,{footer:o,renderedColumnIndex:a,table:l}=e,u=Qt(e,["footer","renderedColumnIndex","table"]);const c=ol(),{options:{enableColumnPinning:d,layoutMode:f,mantineTableFooterCellProps:h}}=l,{column:p}=o,{columnDef:m}=p,{columnDefType:g}=m,y=d&&m.columnDefType!=="group"&&p.getIsPinned(),v={column:p,table:l},_=Object.assign(Object.assign(Object.assign({},mt(h,v)),mt(m.mantineTableFooterCellProps,v)),u),w={minWidth:`max(calc(var(--header-${Zd(o==null?void 0:o.id)}-size) * 1px), ${(t=m.minSize)!==null&&t!==void 0?t:30}px)`,width:`calc(var(--header-${Zd(o.id)}-size) * 1px)`};return f==="grid"?w.flex=`${[0,!1].includes(m.grow)?0:`var(--header-${Zd(o.id)}-size)`} 0 auto`:f==="grid-no-grow"&&(w.flex=`${+(m.grow||0)} 0 auto`),b.jsx(Gx,Object.assign({colSpan:o.colSpan,"data-column-pinned":y||void 0,"data-first-right-pinned":y==="right"&&p.getIsFirstColumn(y)||void 0,"data-index":a,"data-last-left-pinned":y==="left"&&p.getIsLastColumn(y)||void 0},_,{__vars:Object.assign({"--mrt-cell-align":(n=_.align)!==null&&n!==void 0?n:g==="group"?"center":c.dir==="rtl"?"right":"left","--mrt-table-cell-left":y==="left"?`${p.getStart(y)}`:void 0,"--mrt-table-cell-right":y==="right"?`${p.getAfter(y)}`:void 0},_==null?void 0:_.__vars),className:dt(yz.root,(f==null?void 0:f.startsWith("grid"))&&yz.grid,g==="group"&&yz.group,_==null?void 0:_.className),style:x=>Object.assign(Object.assign({},w),mt(_.style,x)),children:(r=_.children)!==null&&r!==void 0?r:o.isPlaceholder?null:(s=(i=mt(m.Footer,{column:p,footer:o,table:l}))!==null&&i!==void 0?i:m.footer)!==null&&s!==void 0?s:null}))},cVt=e=>{var t,{columnVirtualizer:n,footerGroup:r,table:i}=e,s=Qt(e,["columnVirtualizer","footerGroup","table"]);const{options:{layoutMode:o,mantineTableFooterRowProps:a}}=i,{virtualColumns:l,virtualPaddingLeft:u,virtualPaddingRight:c}=n??{};if(!(!((t=r.headers)===null||t===void 0)&&t.some(f=>typeof f.column.columnDef.footer=="string"&&!!f.column.columnDef.footer||f.column.columnDef.Footer)))return null;const d=Object.assign(Object.assign({},mt(a,{footerGroup:r,table:i})),s);return b.jsxs(mm,Object.assign({className:dt(I0e.root,(o==null?void 0:o.startsWith("grid"))&&I0e["layout-mode-grid"])},d,{children:[u?b.jsx(ge,{component:"th",display:"flex",w:u}):null,(l??r.headers).map((f,h)=>{let p=f;return n&&(h=f.index,p=r.headers[h]),b.jsx(uVt,{footer:p,renderedColumnIndex:h,table:i},p.id)}),c?b.jsx(ge,{component:"th",display:"flex",w:c}):null]}))},dVt=e=>{var{columnVirtualizer:t,table:n}=e,r=Qt(e,["columnVirtualizer","table"]);const{getFooterGroups:i,getState:s,options:{enableStickyFooter:o,layoutMode:a,mantineTableFooterProps:l},refs:{tableFooterRef:u}}=n,{isFullScreen:c}=s(),d=Object.assign(Object.assign({},mt(l,{table:n})),r),f=(c||o)&&o!==!1;return b.jsx(_X,Object.assign({},d,{className:dt(gz.root,d==null?void 0:d.className,f&&gz.sticky,(a==null?void 0:a.startsWith("grid"))&&gz.grid),ref:h=>{u.current=h,d!=null&&d.ref&&(d.ref.current=h)},children:i().map(h=>b.jsx(cVt,{columnVirtualizer:t,footerGroup:h,table:n},h.id))}))};var $g={root:"MRT_TableHead-module_root__j9NkO","root-grid":"MRT_TableHead-module_root-grid__c3aGl","root-table-row-group":"MRT_TableHead-module_root-table-row-group__d9FO4","root-sticky":"MRT_TableHead-module_root-sticky__0kuDE","banner-tr":"MRT_TableHead-module_banner-tr__EhT-x","banner-th":"MRT_TableHead-module_banner-th__KwM5a",grid:"MRT_TableHead-module_grid__OJ-td"},vz={root:"MRT_TableHeadRow-module_root__hUKv4","layout-mode-grid":"MRT_TableHeadRow-module_layout-mode-grid__4ZGri",sticky:"MRT_TableHeadRow-module_sticky__Ej7Ax"},oo={root:"MRT_TableHeadCell-module_root__6y50a","root-grid":"MRT_TableHeadCell-module_root-grid__bAf1d","root-virtualized":"MRT_TableHeadCell-module_root-virtualized__CWLit","root-no-select":"MRT_TableHeadCell-module_root-no-select__BEOVU",content:"MRT_TableHeadCell-module_content__-pzSK","content-spaced":"MRT_TableHeadCell-module_content-spaced__S85Aa","content-center":"MRT_TableHeadCell-module_content-center__c-17L","content-right":"MRT_TableHeadCell-module_content-right__NSRZU","content-wrapper":"MRT_TableHeadCell-module_content-wrapper__py6aJ","content-wrapper-hidden-overflow":"MRT_TableHeadCell-module_content-wrapper-hidden-overflow__QY40r","content-wrapper-nowrap":"MRT_TableHeadCell-module_content-wrapper-nowrap__-4aIg",labels:"MRT_TableHeadCell-module_labels__oiMSr","labels-right":"MRT_TableHeadCell-module_labels-right__6ZJp-","labels-center":"MRT_TableHeadCell-module_labels-center__MM9q8","labels-sortable":"MRT_TableHeadCell-module_labels-sortable__tyuLr","labels-data":"MRT_TableHeadCell-module_labels-data__PvFGO","content-actions":"MRT_TableHeadCell-module_content-actions__utxbm"},fVt={"filter-mode-label":"MRT_TableHeadCellFilterContainer-module_filter-mode-label__8reK-"},hVt={root:"MRT_FilterCheckBox-module_root__59h9r"};const pVt=e=>{var t,n,r,{column:i,table:s}=e,o=Qt(e,["column","table"]);const{getState:a,options:{localization:l,mantineFilterCheckboxProps:u}}=s,{density:c}=a(),{columnDef:d}=i,f={column:i,table:s},h=Object.assign(Object.assign(Object.assign({},mt(u,f)),mt(d.mantineFilterCheckboxProps,f)),o),p=(t=l.filterByColumn)===null||t===void 0?void 0:t.replace("{column}",d.header),m=i.getFilterValue();return b.jsx(Xt,{label:(n=h==null?void 0:h.title)!==null&&n!==void 0?n:p,openDelay:1e3,withinPortal:!0,children:b.jsx(sf,Object.assign({checked:m==="true",className:dt("mrt-filter-checkbox",hVt.root),indeterminate:m===void 0,label:(r=h.title)!==null&&r!==void 0?r:p,size:c==="xs"?"sm":"md"},h,{onChange:g=>{var y;i.setFilterValue(i.getFilterValue()===void 0?"true":i.getFilterValue()==="true"?"false":void 0),(y=h==null?void 0:h.onChange)===null||y===void 0||y.call(h,g)},onClick:g=>{var y;g.stopPropagation(),(y=h==null?void 0:h.onClick)===null||y===void 0||y.call(h,g)},title:void 0}))})};var mVt={root:"MRT_FilterRangeFields-module_root__KfCcg"},lC={root:"MRT_FilterTextInput-module_root__Ss8Ql","date-filter":"MRT_FilterTextInput-module_date-filter__jOBLB","range-filter":"MRT_FilterTextInput-module_range-filter__JQHAL","not-filter-chip":"MRT_FilterTextInput-module_not-filter-chip__u8b1y","filter-chip-badge":"MRT_FilterTextInput-module_filter-chip-badge__Sel2k"};const Yq=e=>{var t,n,r,i,s,o,a,l,{header:u,rangeFilterIndex:c,table:d}=e,f=Qt(e,["header","rangeFilterIndex","table"]);const{options:{columnFilterDisplayMode:h,columnFilterModeOptions:p,icons:{IconX:m},localization:g,mantineFilterAutocompleteProps:y,mantineFilterDateInputProps:v,mantineFilterMultiSelectProps:_={clearable:!0},mantineFilterSelectProps:w,mantineFilterTextInputProps:x,manualFiltering:S},refs:{filterInputRefs:E},setColumnFilterFns:T}=d,{column:I}=u,{columnDef:k}=I,P={column:I,rangeFilterIndex:c,table:d},L=Object.assign(Object.assign(Object.assign({},mt(x,P)),mt(k.mantineFilterTextInputProps,P)),f),R=Object.assign(Object.assign({},mt(w,P)),mt(k.mantineFilterSelectProps,P)),$=Object.assign(Object.assign({},mt(_,P)),mt(k.mantineFilterMultiSelectProps,P)),D=Object.assign(Object.assign({},mt(v,P)),mt(k.mantineFilterDateInputProps,P)),O=Object.assign(Object.assign({},mt(y,P)),mt(k.mantineFilterAutocompleteProps,P)),F=k.filterVariant==="range"||k.filterVariant==="date-range"||c!==void 0,U=k.filterVariant==="select",V=k.filterVariant==="multi-select",M=k.filterVariant==="date"||k.filterVariant==="date-range",z=k.filterVariant==="autocomplete",q=(t=k==null?void 0:k.columnFilterModeOptions)!==null&&t!==void 0?t:p,j=k._filterFn,H=["empty","notEmpty"].includes(j)?ane(g,j):"",G=F?c===0?g.min:c===1?g.max:"":(n=L==null?void 0:L.placeholder)!==null&&n!==void 0?n:(r=g.filterByColumn)===null||r===void 0?void 0:r.replace("{column}",String(k.header)),J=I.getFacetedUniqueValues(),re=A.useMemo(()=>{var ue,Se,De;return((De=(Se=(ue=O==null?void 0:O.data)!==null&&ue!==void 0?ue:R==null?void 0:R.data)!==null&&Se!==void 0?Se:$==null?void 0:$.data)!==null&&De!==void 0?De:(z||U||V)&&J?Array.from(J.keys()).filter(at=>at!==null).sort((at,He)=>at.localeCompare(He)):[]).filter(at=>at!=null)},[O==null?void 0:O.data,J,z,V,U,$==null?void 0:$.data,R==null?void 0:R.data]),ie=A.useRef(!1),[te,ae]=A.useState(()=>{var ue,Se;return V?I.getFilterValue()||[]:F?((ue=I.getFilterValue())===null||ue===void 0?void 0:ue[c])||"":(Se=I.getFilterValue())!==null&&Se!==void 0?Se:""}),[_e]=exe(te,S?400:200);A.useEffect(()=>{ie.current&&(F?I.setFilterValue(ue=>{const Se=Array.isArray(ue)?ue:["",""];return Se[c]=_e,Se}):I.setFilterValue(_e??void 0))},[_e]),A.useEffect(()=>{if(!ie.current){ie.current=!0;return}const ue=I.getFilterValue();ue===void 0?ce():ae(F&&c!==void 0?(ue??["",""])[c]:ue??"")},[I.getFilterValue()]);const ce=()=>{V?(ae([]),I.setFilterValue([])):F?(ae(""),I.setFilterValue(ue=>{const Se=Array.isArray(ue)?ue:["",""];return Se[c]=void 0,Se})):(ae(""),I.setFilterValue(void 0))};if(k.Filter)return b.jsx(b.Fragment,{children:(i=k.Filter)===null||i===void 0?void 0:i.call(k,{column:I,header:u,rangeFilterIndex:c,table:d})});const ze=()=>{ae(""),I.setFilterValue(void 0),T(ue=>{var Se;return Object.assign(Object.assign({},ue),{[u.id]:(Se=q==null?void 0:q[0])!==null&&Se!==void 0?Se:"fuzzy"})})},Oe={"aria-label":G,className:dt("mrt-filter-text-input",lC.root,M?lC["date-filter"]:F?lC["range-filter"]:!H&&lC["not-filter-chip"]),disabled:!!H,onChange:ae,onClick:ue=>ue.stopPropagation(),placeholder:G,style:Object.assign({},V?$==null?void 0:$.style:U?R==null?void 0:R.style:M?D==null?void 0:D.style:L==null?void 0:L.style),title:G,value:te,variant:"unstyled"},{className:$e}=Oe,Ne=Qt(Oe,["className"]),pe=te?b.jsx(In,{"aria-label":g.clearFilter,color:"var(--mantine-color-gray-7)",onClick:ce,size:"sm",title:(s=g.clearFilter)!==null&&s!==void 0?s:"",variant:"transparent",children:b.jsx(m,{})}):null;return H?b.jsx(ge,{style:Ne.style,children:b.jsx(pm,{className:lC["filter-chip-badge"],onClick:ze,rightSection:pe,size:"lg",children:H})}):V?b.jsx(Hk,Object.assign({},Ne,{searchable:!0},$,{className:dt($e,$.className),data:re,onChange:ue=>ae(ue),ref:ue=>{ue&&(E.current[`${I.id}-${c??0}`]=ue,$.ref&&($.ref.current=ue))},rightSection:!((o=te==null?void 0:te.toString())===null||o===void 0)&&o.length&&($!=null&&$.clearable)?pe:void 0,style:Ne.style})):U?b.jsx(zl,Object.assign({},Ne,{clearable:!0,searchable:!0},R,{className:dt($e,R.className),clearButtonProps:{size:"md"},data:re,ref:ue=>{ue&&(E.current[`${I.id}-${c??0}`]=ue,R.ref&&(R.ref.current=ue))},style:Ne.style})):M?b.jsx(ene,Object.assign({},Ne,{allowDeselect:!0,clearable:!0,popoverProps:{withinPortal:h!=="popover"}},D,{className:dt($e,D.className),onChange:ue=>Ne.onChange(ue===null?"":ue),ref:ue=>{ue&&(E.current[`${I.id}-${c??0}`]=ue,D.ref&&(D.ref.current=ue))},style:Ne.style})):z?b.jsx($K,Object.assign({},Ne,{onChange:ue=>ae(ue),rightSection:!((a=te==null?void 0:te.toString())===null||a===void 0)&&a.length?pe:void 0},O,{className:dt($e,O.className),data:re,ref:ue=>{ue&&(E.current[`${I.id}-${c??0}`]=ue,O.ref&&(O.ref.current=ue))},style:Ne.style})):b.jsx(qd,Object.assign({},Ne,{onChange:ue=>ae(ue.target.value),rightSection:!((l=te==null?void 0:te.toString())===null||l===void 0)&&l.length?pe:void 0},L,{className:dt($e,L.className),mt:0,ref:ue=>{ue&&(E.current[`${I.id}-${c??0}`]=ue,L.ref&&(L.ref.current=ue))},style:Ne.style}))},gVt=e=>{var{header:t,table:n}=e,r=Qt(e,["header","table"]);return b.jsxs(ge,Object.assign({},r,{className:dt("mrt-filter-range-fields",mVt.root,r.className),children:[b.jsx(Yq,{header:t,rangeFilterIndex:0,table:n}),b.jsx(Yq,{header:t,rangeFilterIndex:1,table:n})]}))};var yVt={root:"MRT_FilterRangeSlider-module_root__uwYEk"};const vVt=e=>{var t,{header:n,table:r}=e,i=Qt(e,["header","table"]);const{options:{mantineFilterRangeSliderProps:s},refs:{filterInputRefs:o}}=r,{column:a}=n,{columnDef:l}=a,u={column:a,table:r},c=Object.assign(Object.assign(Object.assign({},mt(s,u)),mt(l.mantineFilterRangeSliderProps,u)),i);let[d,f]=c.min!==void 0&&c.max!==void 0?[c.min,c.max]:(t=a.getFacetedMinMaxValues())!==null&&t!==void 0?t:[0,1];Array.isArray(d)&&(d=d[0]),Array.isArray(f)&&(f=f[0]),d===null&&(d=0),f===null&&(f=1);const[h,p]=A.useState([d,f]),m=a.getFilterValue(),g=A.useRef(!1);return A.useEffect(()=>{g.current&&(m===void 0?p([d,f]):Array.isArray(m)&&p(m)),g.current=!0},[m,d,f]),b.jsx(iI,Object.assign({className:dt("mrt-filter-range-slider",yVt.root),max:f,min:d,onChange:y=>{p(y)},onChangeEnd:y=>{Array.isArray(y)&&(y[0]<=d&&y[1]>=f?a.setFilterValue(void 0):a.setFilterValue(y))},value:h},c,{ref:y=>{y&&(o.current[`${a.id}-0`]=y,c!=null&&c.ref&&(c.ref=y))}}))};var bVt={symbol:"MRT_FilterOptionMenu-module_symbol__a1Bsy"};const _Vt=e=>[{divider:!1,label:e.filterFuzzy,option:"fuzzy",symbol:"≈"},{divider:!1,label:e.filterContains,option:"contains",symbol:"*"},{divider:!1,label:e.filterStartsWith,option:"startsWith",symbol:"a"},{divider:!0,label:e.filterEndsWith,option:"endsWith",symbol:"z"},{divider:!1,label:e.filterEquals,option:"equals",symbol:"="},{divider:!0,label:e.filterNotEquals,option:"notEquals",symbol:"≠"},{divider:!1,label:e.filterBetween,option:"between",symbol:"⇿"},{divider:!0,label:e.filterBetweenInclusive,option:"betweenInclusive",symbol:"⬌"},{divider:!1,label:e.filterGreaterThan,option:"greaterThan",symbol:">"},{divider:!1,label:e.filterGreaterThanOrEqualTo,option:"greaterThanOrEqualTo",symbol:"≥"},{divider:!1,label:e.filterLessThan,option:"lessThan",symbol:"<"},{divider:!0,label:e.filterLessThanOrEqualTo,option:"lessThanOrEqualTo",symbol:"≤"},{divider:!1,label:e.filterEmpty,option:"empty",symbol:"∅"},{divider:!1,label:e.filterNotEmpty,option:"notEmpty",symbol:"!∅"}],gO=["between","betweenInclusive","inNumberRange"],bz=["empty","notEmpty"],wVt=["arrIncludesSome","arrIncludesAll","arrIncludes"],k0e=["range-slider","date-range","range"],pFe=({header:e,onSelect:t,table:n})=>{var r,i,s,o;const{getState:a,options:{columnFilterModeOptions:l,globalFilterModeOptions:u,localization:c,renderColumnFilterModeMenuItems:d,renderGlobalFilterModeMenuItems:f},setColumnFilterFns:h,setGlobalFilterFn:p}=n,{globalFilterFn:m}=a(),{column:g}=e??{},{columnDef:y}=g??{},v=g==null?void 0:g.getFilterValue();let _=(r=y==null?void 0:y.columnFilterModeOptions)!==null&&r!==void 0?r:l;k0e.includes(y==null?void 0:y.filterVariant)&&(_=[...gO,..._??[]].filter(E=>gO.includes(E)));const w=A.useMemo(()=>_Vt(c).filter(E=>y?_===void 0||(_==null?void 0:_.includes(E.option)):(!u||u.includes(E.option))&&["contains","fuzzy","startsWith"].includes(E.option)),[]),x=E=>{var T;const I=(T=y==null?void 0:y._filterFn)!==null&&T!==void 0?T:"";!e||!g?p(E):E!==I&&(h(k=>Object.assign(Object.assign({},k),{[e.id]:E})),bz.includes(E)?v!==" "&&!bz.includes(I)?g.setFilterValue(" "):v&&g.setFilterValue(v):(y==null?void 0:y.filterVariant)==="multi-select"||wVt.includes(E)?v instanceof String||v!=null&&v.length?g.setFilterValue([]):v&&g.setFilterValue(v):k0e.includes(y==null?void 0:y.filterVariant)||gO.includes(E)?!Array.isArray(v)||!(v!=null&&v.every(k=>k===""))&&!gO.includes(I)?g.setFilterValue(["",""]):g.setFilterValue(v):Array.isArray(v)?g.setFilterValue(""):v===" "&&bz.includes(I)?g.setFilterValue(void 0):g.setFilterValue(v)),t==null||t()},S=e&&y?y._filterFn:m;return b.jsx(tn.Dropdown,{children:(o=e&&g&&y?(s=(i=y.renderColumnFilterModeMenuItems)===null||i===void 0?void 0:i.call(y,{column:g,internalFilterOptions:w,onSelectFilterMode:x,table:n}))!==null&&s!==void 0?s:d==null?void 0:d({column:g,internalFilterOptions:w,onSelectFilterMode:x,table:n}):f==null?void 0:f({internalFilterOptions:w,onSelectFilterMode:x,table:n}))!==null&&o!==void 0?o:w.map(({divider:E,label:T,option:I,symbol:k},P)=>b.jsxs(A.Fragment,{children:[b.jsx(tn.Item,{color:I===S?"blue":void 0,leftSection:b.jsx("span",{className:bVt.symbol,children:k}),onClick:()=>x(I),value:I,children:T}),E&&b.jsx(tn.Divider,{})]},P))})},mFe=e=>{var t,n,{header:r,table:i}=e,s=Qt(e,["header","table"]);const{getState:o,options:{columnFilterDisplayMode:a,columnFilterModeOptions:l,enableColumnFilterModes:u,icons:{IconFilterCog:c},localization:d},refs:{filterInputRefs:f}}=i,{showColumnFilters:h}=o(),{column:p}=r,{columnDef:m}=p,g=m._filterFn,y=(t=m==null?void 0:m.columnFilterModeOptions)!==null&&t!==void 0?t:l,v=u&&m.enableColumnFilterModes!==!1&&(y===void 0||!!(y!=null&&y.length));return b.jsx(qb,{in:h||a==="popover",children:b.jsxs(Et,Object.assign({direction:"column"},s,{children:[b.jsxs(Et,{align:"flex-end",children:[m.filterVariant==="checkbox"?b.jsx(pVt,{column:p,table:i}):m.filterVariant==="range-slider"?b.jsx(vVt,{header:r,table:i}):["date-range","range"].includes((n=m.filterVariant)!==null&&n!==void 0?n:"")||["between","betweenInclusive","inNumberRange"].includes(m._filterFn)?b.jsx(gVt,{header:r,table:i}):b.jsx(Yq,{header:r,table:i}),v&&b.jsxs(tn,{withinPortal:a!=="popover",children:[b.jsx(Xt,{label:d.changeFilterMode,position:"bottom-start",withinPortal:!0,children:b.jsx(tn.Target,{children:b.jsx(In,{"aria-label":d.changeFilterMode,color:"gray",size:"md",variant:"subtle",children:b.jsx(c,{})})})}),b.jsx(pFe,{header:r,onSelect:()=>setTimeout(()=>{var _;return(_=f.current[`${p.id}-0`])===null||_===void 0?void 0:_.focus()},100),table:i})]})]}),v?b.jsx(Xe,{c:"dimmed",className:fVt["filter-mode-label"],component:"label",children:d.filterMode.replace("{filterType}",ane(d,g))}):null]}))})};var xVt={root:"MRT_TableHeadCellFilterLabel-module_root__Rur2R"};const EVt=e=>{var t,n,r,{header:i,table:s}=e,o=Qt(e,["header","table"]);const{options:{columnFilterDisplayMode:a,icons:{IconFilter:l},localization:u},refs:{filterInputRefs:c},setShowColumnFilters:d}=s,{column:f}=i,{columnDef:h}=f,p=f.getFilterValue(),[m,g]=A.useState(!1),y=Array.isArray(p)&&p.some(Boolean)||!!p&&!Array.isArray(p),v=h.filterVariant==="range"||h.filterVariant==="date-range"||["between","betweenInclusive","inNumberRange"].includes(h._filterFn),_=h._filterFn,w=h.filterTooltipValueFn||(S=>S),x=a==="popover"&&!y?(t=u.filterByColumn)===null||t===void 0?void 0:t.replace("{column}",String(h.header)):u.filteringByColumn.replace("{column}",String(h.header)).replace("{filterType}",ane(u,_)).replace("{filterValue}",`"${Array.isArray(f.getFilterValue())?f.getFilterValue().map(S=>w(S)).join(`" ${v?u.and:u.or} "`):w(f.getFilterValue())}"`).replace('" "',"");return b.jsx(b.Fragment,{children:b.jsxs(Tn,{keepMounted:h.filterVariant==="range-slider",onClose:()=>g(!1),opened:m,position:"top",shadow:"xl",width:360,withinPortal:!0,children:[b.jsx(vf,{mounted:a==="popover"||!!f.getFilterValue()&&!v||v&&(!!(!((n=f.getFilterValue())===null||n===void 0)&&n[0])||!!(!((r=f.getFilterValue())===null||r===void 0)&&r[1])),transition:"scale",children:()=>b.jsx(Tn.Target,{children:b.jsx(Xt,{disabled:m,label:x,multiline:!0,w:x.length>40?300:void 0,withinPortal:!0,children:b.jsx(In,Object.assign({className:dt("mrt-table-head-cell-filter-label-icon",xVt.root),size:18},sL("active",y),{onClick:S=>{S.stopPropagation(),a==="popover"?g(E=>!E):d(!0),setTimeout(()=>{const E=c.current[`${f.id}-0`];E==null||E.focus(),E==null||E.select()},100)}},o,{children:b.jsx(l,{size:"100%"})}))})})}),a==="popover"&&b.jsx(Tn.Dropdown,{onClick:S=>S.stopPropagation(),onKeyDown:S=>S.key==="Enter"&&g(!1),onMouseDown:S=>S.stopPropagation(),children:b.jsx(mFe,{header:i,table:s})})]})})},SVt=e=>{var{column:t,table:n,tableHeadCellRef:r}=e,i=Qt(e,["column","table","tableHeadCellRef"]);const{getState:s,options:{enableColumnOrdering:o,mantineColumnDragHandleProps:a},setColumnOrder:l,setDraggingColumn:u,setHoveredColumn:c}=n,{columnDef:d}=t,{columnOrder:f,draggingColumn:h,hoveredColumn:p}=s(),m={column:t,table:n},g=Object.assign(Object.assign(Object.assign({},mt(a,m)),mt(d.mantineColumnDragHandleProps,m)),i),y=_=>{var w;(w=g==null?void 0:g.onDragStart)===null||w===void 0||w.call(g,_),u(t),_.dataTransfer.setDragImage(r.current,0,0)},v=_=>{var w;(w=g==null?void 0:g.onDragEnd)===null||w===void 0||w.call(g,_),(p==null?void 0:p.id)==="drop-zone"?t.toggleGrouping():o&&p&&(p==null?void 0:p.id)!==(h==null?void 0:h.id)&&l(VLe(t,p,f)),u(null),c(null)};return b.jsx(lne,{actionIconProps:g,onDragEnd:v,onDragStart:y,table:n})};var _z={root:"MRT_TableHeadCellResizeHandle-module_root__paufe","root-ltr":"MRT_TableHeadCellResizeHandle-module_root-ltr__652AZ","root-rtl":"MRT_TableHeadCellResizeHandle-module_root-rtl__5VlSo","root-hide":"MRT_TableHeadCellResizeHandle-module_root-hide__-ILlD"};const TVt=e=>{var t,{header:n,table:r}=e,i=Qt(e,["header","table"]);const{getState:s,options:{columnResizeDirection:o,columnResizeMode:a},setColumnSizingInfo:l}=r,{density:u}=s(),{column:c}=n,d=n.getResizeHandler(),f=c.getIsResizing()&&a==="onEnd"?`translateX(${(o==="rtl"?-1:1)*((t=s().columnSizingInfo.deltaOffset)!==null&&t!==void 0?t:0)}px)`:void 0;return b.jsx(ge,Object.assign({onDoubleClick:()=>{l(h=>Object.assign(Object.assign({},h),{isResizingColumn:!1})),c.resetSize()},onMouseDown:d,onTouchStart:d,role:"separator"},i,{__vars:Object.assign({"--mrt-transform":f},i.__vars),className:dt("mrt-table-head-cell-resize-handle",_z.root,_z[`root-${o}`],!n.subHeaders.length&&a==="onChange"&&_z["root-hide"],u,i.className)}))};var R0e={"sort-icon":"MRT_TableHeadCellSortLabel-module_sort-icon__zs1xA","multi-sort-indicator":"MRT_TableHeadCellSortLabel-module_multi-sort-indicator__MGBj2"};const CVt=e=>{var{header:t,table:n}=e,r=Qt(e,["header","table"]);const{getState:i,options:{icons:{IconArrowsSort:s,IconSortAscending:o,IconSortDescending:a},localization:l}}=n,u=t.column,{columnDef:c}=u,{sorting:d}=i(),f=u.getIsSorted(),h=u.getSortIndex(),p=f?f==="desc"?l.sortedByColumnDesc.replace("{column}",c.header):l.sortedByColumnAsc.replace("{column}",c.header):u.getNextSortingOrder()==="desc"?l.sortByColumnDesc.replace("{column}",c.header):l.sortByColumnAsc.replace("{column}",c.header),m=b.jsx(In,Object.assign({"aria-label":p},sL("sorted",f),r,{className:dt("mrt-table-head-sort-button",R0e["sort-icon"],r.className),children:f==="desc"?b.jsx(a,{size:"100%"}):f==="asc"?b.jsx(o,{size:"100%"}):b.jsx(s,{size:"100%"})}));return b.jsx(Xt,{label:p,openDelay:1e3,withinPortal:!0,children:d.length<2||h===-1?m:b.jsx(KK,{className:dt("mrt-table-head-multi-sort-indicator",R0e["multi-sort-indicator"]),inline:!0,label:h+1,offset:4,children:m})})};var P0e={left:"MRT_ColumnActionMenu-module_left__cfNmY",right:"MRT_ColumnActionMenu-module_right__-nK56"};const AVt=e=>{var t,n,r,i,s,o,a,l,u,c,{header:d,table:f}=e,h=Qt(e,["header","table"]);const{getState:p,options:{columnFilterDisplayMode:m,enableColumnFilters:g,enableColumnPinning:y,enableColumnResizing:v,enableGrouping:_,enableHiding:w,enableSorting:x,enableSortingRemoval:S,icons:{IconArrowAutofitContent:E,IconBoxMultiple:T,IconClearAll:I,IconColumns:k,IconDotsVertical:P,IconEyeOff:L,IconFilter:R,IconFilterOff:$,IconPinned:D,IconPinnedOff:O,IconSortAscending:F,IconSortDescending:U},localization:V,mantineColumnActionsButtonProps:M,renderColumnActionsMenuItems:z},refs:{filterInputRefs:q},setColumnOrder:j,setColumnSizingInfo:H,setShowColumnFilters:G,toggleAllColumnsVisible:J}=f,{column:re}=d,{columnDef:ie}=re,{columnSizing:te,columnVisibility:ae}=p(),_e={column:re,table:f},ce=Object.assign(Object.assign({},mt(M,_e)),mt(ie.mantineColumnActionsButtonProps,_e)),ze=()=>{re.clearSorting()},Oe=()=>{re.toggleSorting(!1)},$e=()=>{re.toggleSorting(!0)},Ne=()=>{H(Ie=>Object.assign(Object.assign({},Ie),{isResizingColumn:!1})),re.resetSize()},pe=()=>{re.toggleVisibility(!1)},ue=Ie=>{re.pin(Ie)},Se=()=>{re.toggleGrouping(),j(Ie=>["mrt-row-expand",...Ie])},De=()=>{re.setFilterValue("")},at=()=>{G(!0),setTimeout(()=>{var Ie;return(Ie=q.current[`${re.id}-0`])===null||Ie===void 0?void 0:Ie.focus()},100)},He=()=>{J(!0)},le=b.jsxs(b.Fragment,{children:[x&&re.getCanSort()&&b.jsxs(b.Fragment,{children:[S!==!1&&b.jsx(tn.Item,{disabled:!re.getIsSorted(),leftSection:b.jsx(I,{}),onClick:ze,children:V.clearSort}),b.jsx(tn.Item,{disabled:re.getIsSorted()==="asc",leftSection:b.jsx(F,{}),onClick:Oe,children:(t=V.sortByColumnAsc)===null||t===void 0?void 0:t.replace("{column}",String(ie.header))}),b.jsx(tn.Item,{disabled:re.getIsSorted()==="desc",leftSection:b.jsx(U,{}),onClick:$e,children:(n=V.sortByColumnDesc)===null||n===void 0?void 0:n.replace("{column}",String(ie.header))}),(g||_||w)&&b.jsx(tn.Divider,{},3)]}),g&&m!=="popover"&&re.getCanFilter()&&b.jsxs(b.Fragment,{children:[b.jsx(tn.Item,{disabled:!re.getFilterValue(),leftSection:b.jsx($,{}),onClick:De,children:V.clearFilter}),b.jsx(tn.Item,{leftSection:b.jsx(R,{}),onClick:at,children:(r=V.filterByColumn)===null||r===void 0?void 0:r.replace("{column}",String(ie.header))}),(_||w)&&b.jsx(tn.Divider,{},2)]}),_&&re.getCanGroup()&&b.jsxs(b.Fragment,{children:[b.jsx(tn.Item,{leftSection:b.jsx(T,{}),onClick:Se,children:(i=V[re.getIsGrouped()?"ungroupByColumn":"groupByColumn"])===null||i===void 0?void 0:i.replace("{column}",String(ie.header))}),y&&b.jsx(tn.Divider,{})]}),y&&re.getCanPin()&&b.jsxs(b.Fragment,{children:[b.jsx(tn.Item,{disabled:re.getIsPinned()==="left"||!re.getCanPin(),leftSection:b.jsx(D,{className:P0e.left}),onClick:()=>ue("left"),children:V.pinToLeft}),b.jsx(tn.Item,{disabled:re.getIsPinned()==="right"||!re.getCanPin(),leftSection:b.jsx(D,{className:P0e.right}),onClick:()=>ue("right"),children:V.pinToRight}),b.jsx(tn.Item,{disabled:!re.getIsPinned(),leftSection:b.jsx(O,{}),onClick:()=>ue(!1),children:V.unpin}),w&&b.jsx(tn.Divider,{})]}),v&&re.getCanResize()&&b.jsx(tn.Item,{disabled:!te[re.id],leftSection:b.jsx(E,{}),onClick:Ne,children:V.resetColumnSize},0),w&&b.jsxs(b.Fragment,{children:[b.jsx(tn.Item,{disabled:!re.getCanHide(),leftSection:b.jsx(L,{}),onClick:pe,children:(s=V.hideColumn)===null||s===void 0?void 0:s.replace("{column}",String(ie.header))},0),b.jsx(tn.Item,{disabled:!Object.values(ae).filter(Ie=>!Ie).length,leftSection:b.jsx(k,{}),onClick:He,children:(o=V.showAllColumns)===null||o===void 0?void 0:o.replace("{column}",String(ie.header))},1)]})]});return b.jsxs(tn,Object.assign({closeOnItemClick:!0,position:"bottom-start",withinPortal:!0},h,{children:[b.jsx(Xt,{label:(a=ce==null?void 0:ce.title)!==null&&a!==void 0?a:V.columnActions,openDelay:1e3,withinPortal:!0,children:b.jsx(tn.Target,{children:b.jsx(In,Object.assign({"aria-label":V.columnActions,color:"gray",size:"sm",variant:"subtle"},ce,{children:b.jsx(P,{size:"100%"})}))})}),b.jsx(tn.Dropdown,{children:(c=(u=(l=ie.renderColumnActionsMenuItems)===null||l===void 0?void 0:l.call(ie,{column:re,internalColumnMenuItems:le,table:f}))!==null&&u!==void 0?u:z==null?void 0:z({column:re,internalColumnMenuItems:le,table:f}))!==null&&c!==void 0?c:le})]}))},IVt=e=>{var t,n,r,i,s,o,{columnVirtualizer:a,header:l,renderedHeaderIndex:u=0,table:c}=e,d=Qt(e,["columnVirtualizer","header","renderedHeaderIndex","table"]);const f=ol(),{getState:h,options:{columnFilterDisplayMode:p,columnResizeDirection:m,columnResizeMode:g,enableColumnActions:y,enableColumnDragging:v,enableColumnOrdering:_,enableColumnPinning:w,enableGrouping:x,enableHeaderActionsHoverReveal:S,enableMultiSort:E,layoutMode:T,mantineTableHeadCellProps:I},refs:{tableHeadCellRefs:k},setHoveredColumn:P}=c,{columnSizingInfo:L,draggingColumn:R,grouping:$,hoveredColumn:D}=h(),{column:O}=l,{columnDef:F}=O,{columnDefType:U}=F,V={column:O,table:c},M=Object.assign(Object.assign(Object.assign({},mt(I,V)),mt(F.mantineTableHeadCellProps,V)),d),z={minWidth:`max(calc(var(--header-${Zd(l==null?void 0:l.id)}-size) * 1px), ${(t=F.minSize)!==null&&t!==void 0?t:30}px)`,width:`calc(var(--header-${Zd(l.id)}-size) * 1px)`};T==="grid"?z.flex=`${[0,!1].includes(F.grow)?0:`var(--header-${Zd(l.id)}-size)`} 0 auto`:T==="grid-no-grow"&&(z.flex=`${+(F.grow||0)} 0 auto`);const q=w&&F.columnDefType!=="group"&&O.getIsPinned(),j=(R==null?void 0:R.id)===O.id,H=(D==null?void 0:D.id)===O.id,{hovered:G,ref:J}=Aqe(),[re,ie]=A.useState(!1),te=(y||F.enableColumnActions)&&F.enableColumnActions!==!1,ae=!S||re||G&&!c.getVisibleFlatColumns().find($e=>$e.getIsResizing()),_e=v!==!1&&F.enableColumnDragging!==!1&&(v||_&&F.enableColumnOrdering!==!1||x&&F.enableGrouping!==!1&&!$.includes(O.id))&&ae,ce=A.useMemo(()=>{let $e=0;return O.getCanSort()&&$e++,ae&&($e+=1.75),_e&&($e+=1.25),$e},[ae,_e]),ze=$e=>{x&&(D==null?void 0:D.id)==="drop-zone"&&P(null),_&&R&&U!=="group"&&P(F.enableColumnOrdering!==!1?O:null)},Oe=(F==null?void 0:F.Header)instanceof Function?(n=F==null?void 0:F.Header)===null||n===void 0?void 0:n.call(F,{column:O,header:l,table:c}):(r=F==null?void 0:F.Header)!==null&&r!==void 0?r:F.header;return b.jsxs(Gx,Object.assign({colSpan:l.colSpan,"data-column-pinned":q||void 0,"data-dragging-column":j||void 0,"data-first-right-pinned":q==="right"&&O.getIsFirstColumn(q)||void 0,"data-hovered-column-target":H||void 0,"data-index":u,"data-last-left-pinned":q==="left"&&O.getIsLastColumn(q)||void 0,"data-resizing":g==="onChange"&&(L==null?void 0:L.isResizingColumn)===O.id&&m||void 0},M,{__vars:{"--mrt-table-cell-left":q==="left"?`${O.getStart(q)}`:void 0,"--mrt-table-cell-right":q==="right"?`${O.getAfter(q)}`:void 0},align:U==="group"?"center":f.dir==="rtl"?"right":"left",className:dt(oo.root,(T==null?void 0:T.startsWith("grid"))&&oo["root-grid"],E&&O.getCanSort()&&oo["root-no-select"],a&&oo["root-virtualized"],M==null?void 0:M.className),onDragEnter:ze,ref:$e=>{var Ne;$e&&(k.current[O.id]=$e,J.current=$e,U!=="group"&&((Ne=a==null?void 0:a.measureElement)===null||Ne===void 0||Ne.call(a,$e)))},style:$e=>Object.assign(Object.assign({},z),mt(M==null?void 0:M.style,$e)),children:[l.isPlaceholder?null:(i=M.children)!==null&&i!==void 0?i:b.jsxs(Et,{className:dt("mrt-table-head-cell-content",oo.content,(U==="group"||(M==null?void 0:M.align)==="center")&&oo["content-center"],(M==null?void 0:M.align)==="right"&&oo["content-right"],O.getCanResize()&&oo["content-spaced"]),children:[b.jsxs(Et,{__vars:{"--mrt-table-head-cell-labels-padding-left":`${ce}`},className:dt("mrt-table-head-cell-labels",oo.labels,O.getCanSort()&&U!=="group"&&oo["labels-sortable"],(M==null?void 0:M.align)==="right"?oo["labels-right"]:(M==null?void 0:M.align)==="center"&&oo["labels-center"],U==="data"&&oo["labels-data"]),onClick:O.getToggleSortingHandler(),children:[b.jsx(Et,{className:dt("mrt-table-head-cell-content-wrapper",oo["content-wrapper"],U==="data"&&oo["content-wrapper-hidden-overflow"],((o=(s=F.header)===null||s===void 0?void 0:s.length)!==null&&o!==void 0?o:0)<20&&oo["content-wrapper-nowrap"]),children:Oe}),O.getCanFilter()&&(O.getIsFiltered()||ae)&&b.jsx(EVt,{header:l,table:c}),O.getCanSort()&&(O.getIsSorted()||ae)&&b.jsx(CVt,{header:l,table:c})]}),U!=="group"&&b.jsxs(Et,{className:dt("mrt-table-head-cell-content-actions",oo["content-actions"]),children:[_e&&b.jsx(SVt,{column:O,table:c,tableHeadCellRef:{current:k.current[O.id]}}),te&&ae&&b.jsx(AVt,{header:l,table:c,opened:re,onChange:ie})]}),O.getCanResize()&&b.jsx(TVt,{header:l,table:c})]}),p==="subheader"&&O.getCanFilter()&&b.jsx(mFe,{header:l,table:c})]}))},kVt=e=>{var{columnVirtualizer:t,headerGroup:n,table:r}=e,i=Qt(e,["columnVirtualizer","headerGroup","table"]);const{getState:s,options:{enableStickyHeader:o,layoutMode:a,mantineTableHeadRowProps:l}}=r,{isFullScreen:u}=s(),{virtualColumns:c,virtualPaddingLeft:d,virtualPaddingRight:f}=t??{},h=Object.assign(Object.assign({},mt(l,{headerGroup:n,table:r})),i);return b.jsxs(mm,Object.assign({},h,{className:dt(vz.root,(o||u)&&vz.sticky,(a==null?void 0:a.startsWith("grid"))&&vz["layout-mode-grid"],h==null?void 0:h.className),children:[d?b.jsx(ge,{component:"th",display:"flex",w:d}):null,(c??n.headers).map((p,m)=>{let g=p;return t&&(m=p.index,g=n.headers[m]),b.jsx(IVt,{columnVirtualizer:t,header:g,renderedHeaderIndex:m,table:r},g.id)}),f?b.jsx(ge,{component:"th",display:"flex",w:f}):null]}))};var Q_={alert:"MRT_ToolbarAlertBanner-module_alert__PAhUK","alert-stacked":"MRT_ToolbarAlertBanner-module_alert-stacked__HR7Nq","alert-bottom":"MRT_ToolbarAlertBanner-module_alert-bottom__u9L-S","alert-badge":"MRT_ToolbarAlertBanner-module_alert-badge__GwDmX","toolbar-alert":"MRT_ToolbarAlertBanner-module_toolbar-alert__3sJGU","head-overlay":"MRT_ToolbarAlertBanner-module_head-overlay__Hw7jK"};const une=e=>{var t,n,r,{stackAlertBanner:i,table:s}=e,o=Qt(e,["stackAlertBanner","table"]);const{getFilteredSelectedRowModel:a,getPrePaginationRowModel:l,getState:u,options:{enableRowSelection:c,enableSelectAll:d,icons:{IconX:f},localization:h,mantineToolbarAlertBannerBadgeProps:p,mantineToolbarAlertBannerProps:m,manualPagination:g,positionToolbarAlertBanner:y,renderToolbarAlertBannerContent:v,rowCount:_}}=s,{density:w,grouping:x,rowSelection:S,showAlertBanner:E}=u(),T=Object.assign(Object.assign({},mt(m,{table:s})),o),I=mt(p,{table:s}),k=_??l().flatRows.length,P=A.useMemo(()=>g?Object.values(S).filter(Boolean).length:a().rows.length,[S,k,g]),L=P?b.jsxs(Et,{align:"center",gap:"sm",children:[(n=(t=h.selectedCountOfRowCountRowsSelected)===null||t===void 0?void 0:t.replace("{selectedCount}",P.toString()))===null||n===void 0?void 0:n.replace("{rowCount}",k.toString()),b.jsx(rn,{onClick:$=>QLe({table:s})($,!1,!0),size:"compact-xs",variant:"subtle",children:h.clearSelection})]}):null,R=x.length>0?b.jsxs(Et,{children:[h.groupedBy," ",x.map(($,D)=>b.jsxs(A.Fragment,{children:[D>0?h.thenBy:"",b.jsxs(pm,Object.assign({className:Q_["alert-badge"],rightSection:b.jsx(In,{color:"white",onClick:()=>s.getColumn($).toggleGrouping(),size:"xs",variant:"subtle",children:b.jsx(f,{style:{transform:"scale(0.8)"}})}),variant:"filled"},I,{children:[s.getColumn($).columnDef.header," "]}))]},`${D}-${$}`))]}):null;return b.jsx(qb,{in:E||!!L||!!R,transitionDuration:i?200:0,children:b.jsx(lS,Object.assign({color:"blue",icon:!1},T,{className:dt(Q_.alert,i&&!y&&Q_["alert-stacked"],!i&&y==="bottom"&&Q_["alert-bottom"],T==null?void 0:T.className),children:(r=v==null?void 0:v({groupedAlert:R,selectedAlert:L,table:s}))!==null&&r!==void 0?r:b.jsxs(Et,{className:dt(Q_["toolbar-alert"],y==="head-overlay"&&Q_["head-overlay"],w),children:[c&&d&&y==="head-overlay"&&b.jsx(Gq,{table:s}),b.jsxs(Gr,{children:[T==null?void 0:T.children,L,R]})]})}))})},RVt=e=>{var{columnVirtualizer:t,table:n}=e,r=Qt(e,["columnVirtualizer","table"]);const{getHeaderGroups:i,getSelectedRowModel:s,getState:o,options:{enableStickyHeader:a,layoutMode:l,mantineTableHeadProps:u,positionToolbarAlertBanner:c},refs:{tableHeadRef:d}}=n,{isFullScreen:f,showAlertBanner:h}=o(),p=Object.assign(Object.assign({},mt(u,{table:n})),r),m=a||f;return b.jsx(bX,Object.assign({},p,{className:dt($g.root,l!=null&&l.startsWith("grid")?$g["root-grid"]:$g["root-table-row-group"],m&&$g["root-sticky"],p==null?void 0:p.className),pos:m&&(l!=null&&l.startsWith("grid"))?"sticky":"relative",ref:g=>{d.current=g,p!=null&&p.ref&&(p.ref.current=g)},children:c==="head-overlay"&&(h||s().rows.length>0)?b.jsx(mm,{className:dt($g["banner-tr"],(l==null?void 0:l.startsWith("grid"))&&$g.grid),children:b.jsx(Gx,{className:dt($g["banner-th"],(l==null?void 0:l.startsWith("grid"))&&$g.grid),colSpan:n.getVisibleLeafColumns().length,children:b.jsx(une,{table:n})})}):i().map(g=>b.jsx(kVt,{columnVirtualizer:t,headerGroup:g,table:n},g.id))}))},PVt=e=>{var{table:t}=e,n=Qt(e,["table"]);const{getFlatHeaders:r,getState:i,options:{columns:s,enableTableFooter:o,enableTableHead:a,layoutMode:l,mantineTableProps:u,memoMode:c}}=t,{columnSizing:d,columnSizingInfo:f,columnVisibility:h,density:p}=i(),m=Object.assign(Object.assign({highlightOnHover:!0,horizontalSpacing:p,verticalSpacing:p},mt(u,{table:t})),n),g=A.useMemo(()=>{const x=r(),S={};for(let E=0;E<x.length;E++){const T=x[E],I=T.getSize();S[`--header-${Zd(T.id)}-size`]=I,S[`--col-${Zd(T.column.id)}-size`]=I}return S},[s,d,f,h]),v={columnVirtualizer:ZUt(t),table:t},{colorScheme:_}=AWe(),{stripedColor:w}=m;return b.jsxs(Wn,Object.assign({className:dt("mrt-table",C0e.root,(l==null?void 0:l.startsWith("grid"))&&C0e["root-grid"],m.className)},m,{__vars:Object.assign(Object.assign(Object.assign({},g),{"--mrt-striped-row-background-color":w,"--mrt-striped-row-hover-background-color":w?_==="dark"?CWe(w,.08):OC(w,.12):void 0}),m.__vars),children:[a&&b.jsx(RVt,Object.assign({},v)),c==="table-body"||f.isResizingColumn?b.jsx(lVt,Object.assign({},v,{tableProps:m})):b.jsx(hFe,Object.assign({},v,{tableProps:m})),o&&b.jsx(dVt,Object.assign({},v))]}))},NVt=e=>{var t,{open:n,table:r}=e,i=Qt(e,["open","table"]);const{getState:s,options:{mantineCreateRowModalProps:o,mantineEditRowModalProps:a,onCreatingRowCancel:l,onEditingRowCancel:u,renderCreateRowModalContent:c,renderEditRowModalContent:d},setCreatingRow:f,setEditingRow:h}=r,{creatingRow:p,editingRow:m}=s(),g=p??m,y={row:g,table:r},v=Object.assign(Object.assign(Object.assign({},mt(a,y)),p&&mt(o,y)),i),_=g.getAllCells().filter(x=>x.column.columnDef.columnDefType==="data").map(x=>b.jsx(dFe,{cell:x,table:r},x.id)),w=()=>{var x;p?(l==null||l({row:g,table:r}),f(null)):(u==null||u({row:g,table:r}),h(null)),g._valuesCache={},(x=v.onClose)===null||x===void 0||x.call(v)};return A.createElement(as,Object.assign({opened:n,withCloseButton:!1},v,{key:g.id,onClose:w}),(t=p&&(c==null?void 0:c({internalEditComponents:_,row:g,table:r}))||(d==null?void 0:d({internalEditComponents:_,row:g,table:r})))!==null&&t!==void 0?t:b.jsxs(b.Fragment,{children:[b.jsx("form",{onSubmit:x=>x.preventDefault(),children:b.jsx(Gr,{gap:"lg",pb:24,pt:16,children:_})}),b.jsx(Et,{justify:"flex-end",children:b.jsx(aFe,{row:g,table:r,variant:"text"})})]}))},OVt=typeof window<"u"?A.useLayoutEffect:A.useEffect,DVt=e=>{var{table:t}=e,n=Qt(e,["table"]);const{getState:r,options:{createDisplayMode:i,editDisplayMode:s,enableStickyHeader:o,mantineLoadingOverlayProps:a,mantineTableContainerProps:l},refs:{bottomToolbarRef:u,tableContainerRef:c,topToolbarRef:d}}=t,{creatingRow:f,editingRow:h,isFullScreen:p,isLoading:m,showLoadingOverlay:g}=r(),[y,v]=A.useState(0),_=Object.assign(Object.assign({},mt(l,{table:t})),n),w=mt(a,{table:t});OVt(()=>{var E,T,I,k;const P=typeof document<"u"&&(T=(E=d.current)===null||E===void 0?void 0:E.offsetHeight)!==null&&T!==void 0?T:0,L=typeof document<"u"&&(k=(I=u==null?void 0:u.current)===null||I===void 0?void 0:I.offsetHeight)!==null&&k!==void 0?k:0;v(P+L)});const x=i==="modal"&&f,S=s==="modal"&&h;return b.jsxs(ge,Object.assign({},_,{__vars:Object.assign({"--mrt-top-toolbar-height":`${y}`},_==null?void 0:_.__vars),className:dt("mrt-table-container",fz.root,o&&fz["root-sticky"],p&&fz["root-fullscreen"],_==null?void 0:_.className),ref:E=>{E&&(c.current=E,_!=null&&_.ref&&(_.ref.current=E))},children:[b.jsx(Gl,Object.assign({visible:m||g,zIndex:2},w)),b.jsx(PVt,{table:t}),(x||S)&&b.jsx(NVt,{open:!0,table:t})]}))};var uC={root:"MRT_BottomToolbar-module_root__VDeWo","root-fullscreen":"MRT_BottomToolbar-module_root-fullscreen__esE15","custom-toolbar-container":"MRT_BottomToolbar-module_custom-toolbar-container__XcDRF","paginator-container":"MRT_BottomToolbar-module_paginator-container__A3eWY","paginator-container-alert-banner":"MRT_BottomToolbar-module_paginator-container-alert-banner__gyqtO"},gFe={"common-toolbar-styles":"common-styles-module_common-toolbar-styles__DnjR8"},N0e={collapse:"MRT_ProgressBar-module_collapse__rOLJH","collapse-top":"MRT_ProgressBar-module_collapse-top__oCi0h"};const yFe=e=>{var{isTopToolbar:t,table:n}=e,r=Qt(e,["isTopToolbar","table"]);const{getState:i,options:{mantineProgressProps:s}}=n,{isSaving:o,showProgressBars:a}=i(),l=Object.assign(Object.assign({},mt(s,{isTopToolbar:t,table:n})),r);return b.jsx(qb,{className:dt(N0e.collapse,t&&N0e["collapse-top"]),in:o||a,children:b.jsx(Yb,Object.assign({animated:!0,"aria-busy":"true","aria-label":"Loading",radius:0,value:100},l))})};var wz={root:"MRT_TablePagination-module_root__yZ8pm",pagesize:"MRT_TablePagination-module_pagesize__-vmTn","with-top-margin":"MRT_TablePagination-module_with-top-margin__aM5-m"};const O0e=[5,10,15,20,25,30,50,100].map(e=>e.toString()),vFe=e=>{var t,{position:n="bottom",table:r}=e,i=Qt(e,["position","table"]);const{getPrePaginationRowModel:s,getState:o,options:{enableToolbarInternalActions:a,icons:{IconChevronLeft:l,IconChevronLeftPipe:u,IconChevronRight:c,IconChevronRightPipe:d},localization:f,mantinePaginationProps:h,paginationDisplayMode:p,rowCount:m},setPageIndex:g,setPageSize:y}=r,{pagination:{pageIndex:v=0,pageSize:_=10},showGlobalFilter:w}=o(),x=Object.assign(Object.assign({},mt(h,{table:r})),i),S=m??s().rows.length,E=Math.ceil(S/_),T=E>2,I=v*_,k=Math.min(v*_+_,S),P=x??{},{rowsPerPageOptions:L=O0e,showRowsPerPage:R=!0,withEdges:$=T}=P,D=Qt(P,["rowsPerPageOptions","showRowsPerPage","withEdges"]),O=n==="top"&&a&&!w;return b.jsxs(ge,{className:dt("mrt-table-pagination",wz.root,O&&wz["with-top-margin"]),children:[(x==null?void 0:x.showRowsPerPage)!==!1&&b.jsxs(gn,{gap:"xs",children:[b.jsx(Xe,{id:"rpp-label",children:f.rowsPerPage}),b.jsx(zl,{allowDeselect:!1,"aria-labelledby":"rpp-label",className:wz.pagesize,data:(t=x==null?void 0:x.rowsPerPageOptions)!==null&&t!==void 0?t:O0e,onChange:F=>y(+F),value:_.toString()})]}),p==="pages"?b.jsx(_f,Object.assign({firstIcon:u,lastIcon:d,nextIcon:c,onChange:F=>g(F-1),previousIcon:l,total:E,value:v+1,withEdges:$},D)):p==="default"?b.jsxs(b.Fragment,{children:[b.jsx(Xe,{children:`${k===0?0:(I+1).toLocaleString()}-${k.toLocaleString()} ${f.of} ${S.toLocaleString()}`}),b.jsxs(gn,{gap:6,children:[$&&b.jsx(In,{"aria-label":f.goToFirstPage,color:"gray",disabled:v<=0,onClick:()=>g(0),variant:"subtle",children:b.jsx(u,{})}),b.jsx(In,{"aria-label":f.goToPreviousPage,color:"gray",disabled:v<=0,onClick:()=>g(v-1),variant:"subtle",children:b.jsx(l,{})}),b.jsx(In,{"aria-label":f.goToNextPage,color:"gray",disabled:k>=S,onClick:()=>g(v+1),variant:"subtle",children:b.jsx(c,{})}),$&&b.jsx(In,{"aria-label":f.goToLastPage,color:"gray",disabled:k>=S,onClick:()=>g(E-1),variant:"subtle",children:b.jsx(d,{})})]})]}):null]})};var D0e={root:"MRT_ToolbarDropZone-module_root__eGTXb",hovered:"MRT_ToolbarDropZone-module_hovered__g7PeJ"};const bFe=e=>{var{table:t}=e,n=Qt(e,["table"]);const{getState:r,options:{enableGrouping:i,localization:s},setHoveredColumn:o,setShowToolbarDropZone:a}=t,{draggingColumn:l,grouping:u,hoveredColumn:c,showToolbarDropZone:d}=r(),f=h=>{o({id:"drop-zone"})};return A.useEffect(()=>{var h;((h=t.options.state)===null||h===void 0?void 0:h.showToolbarDropZone)!==void 0&&a(!!i&&!!l&&l.columnDef.enableGrouping!==!1&&!u.includes(l.id))},[i,l,u]),b.jsx(vf,{mounted:d,transition:"fade",children:()=>{var h,p;return b.jsx(Et,Object.assign({className:dt("mrt-toolbar-dropzone",D0e.root,(c==null?void 0:c.id)==="drop-zone"&&D0e.hovered),onDragEnter:f},n,{children:b.jsx(Xe,{children:s.dropToGroupBy.replace("{column}",(p=(h=l==null?void 0:l.columnDef)===null||h===void 0?void 0:h.header)!==null&&p!==void 0?p:"")})}))}})},MVt=e=>{var{table:t}=e,n=Qt(e,["table"]);const{getState:r,options:{enablePagination:i,mantineBottomToolbarProps:s,positionPagination:o,positionToolbarAlertBanner:a,positionToolbarDropZone:l,renderBottomToolbarCustomActions:u},refs:{bottomToolbarRef:c}}=t,{isFullScreen:d}=r(),f=KA("(max-width: 720px)"),h=Object.assign(Object.assign({},mt(s,{table:t})),n),p=f||!!u;return b.jsxs(ge,Object.assign({},h,{className:dt("mrt-bottom-toolbar",uC.root,gFe["common-toolbar-styles"],d&&uC["root-fullscreen"],h==null?void 0:h.className),ref:m=>{m&&(c.current=m,h!=null&&h.ref&&(h.ref.current=m))},children:[b.jsx(yFe,{isTopToolbar:!1,table:t}),a==="bottom"&&b.jsx(une,{stackAlertBanner:p,table:t}),["both","bottom"].includes(l??"")&&b.jsx(bFe,{table:t}),b.jsxs(ge,{className:uC["custom-toolbar-container"],children:[u?u({table:t}):b.jsx("span",{}),b.jsx(ge,{className:dt(uC["paginator-container"],p&&uC["paginator-container-alert-banner"]),children:i&&["both","bottom"].includes(o??"")&&b.jsx(vFe,{position:"bottom",table:t})})]})]}))};var yO={root:"MRT_TopToolbar-module_root__r4-V9","root-fullscreen":"MRT_TopToolbar-module_root-fullscreen__3itT8","actions-container":"MRT_TopToolbar-module_actions-container__-uL0u","actions-container-stack-alert":"MRT_TopToolbar-module_actions-container-stack-alert__OYDL6"},$Vt={root:"MRT_ToolbarInternalButtons-module_root__NKoUG"},M0e={root:"MRT_ShowHideColumnsMenu-module_root__2UWak",content:"MRT_ShowHideColumnsMenu-module_content__ehkWQ"},J_={root:"MRT_ShowHideColumnsMenuItems-module_root__wYgv-",menu:"MRT_ShowHideColumnsMenuItems-module_menu__CeATR",grab:"MRT_ShowHideColumnsMenuItems-module_grab__a-d-y",pin:"MRT_ShowHideColumnsMenuItems-module_pin__P437b",switch:"MRT_ShowHideColumnsMenuItems-module_switch__tMsdt",header:"MRT_ShowHideColumnsMenuItems-module_header__xVkKb"},xz={root:"MRT_ColumnPinningButtons-module_root__scTtW",left:"MRT_ColumnPinningButtons-module_left__W6Aog",right:"MRT_ColumnPinningButtons-module_right__7AJE3"};const LVt=({column:e,table:t})=>{const{options:{icons:{IconPinned:n,IconPinnedOff:r},localization:i}}=t;return b.jsx(Et,{className:dt("mrt-column-pinning-buttons",xz.root),children:e.getIsPinned()?b.jsx(Xt,{label:i.unpin,withinPortal:!0,children:b.jsx(In,{color:"gray",onClick:()=>e.pin(!1),size:"md",variant:"subtle",children:b.jsx(r,{})})}):b.jsxs(b.Fragment,{children:[b.jsx(Xt,{label:i.pinToLeft,withinPortal:!0,children:b.jsx(In,{color:"gray",onClick:()=>e.pin("left"),size:"md",variant:"subtle",children:b.jsx(n,{className:xz.left})})}),b.jsx(Xt,{label:i.pinToRight,withinPortal:!0,children:b.jsx(In,{color:"gray",onClick:()=>e.pin("right"),size:"md",variant:"subtle",children:b.jsx(n,{className:xz.right})})})]})})},_Fe=({allColumns:e,column:t,hoveredColumn:n,setHoveredColumn:r,table:i})=>{var s;const o=ds(),{getState:a,options:{enableColumnOrdering:l,enableColumnPinning:u,enableHiding:c,localization:d},setColumnOrder:f}=i,{columnOrder:h}=a(),{columnDef:p}=t,{columnDefType:m}=p,g=m!=="group"&&t.getIsVisible()||m==="group"&&t.getLeafColumns().some(T=>T.getIsVisible()),y=T=>{var I,k;m==="group"?(k=(I=T==null?void 0:T.columns)===null||I===void 0?void 0:I.forEach)===null||k===void 0||k.call(I,P=>{P.toggleVisibility(!g)}):T.toggleVisibility()},v=A.useRef(null),[_,w]=A.useState(!1),x=T=>{w(!0),T.dataTransfer.setDragImage(v.current,0,0)},S=T=>{w(!1),r(null),n&&f(VLe(t,n,h))},E=T=>{!_&&p.enableColumnOrdering!==!1&&r(t)};return!p.header||p.visibleInShowHideMenu===!1?null:b.jsxs(b.Fragment,{children:[b.jsx(tn.Item,Object.assign({className:J_.root,component:"span",onDragEnter:E,ref:v,style:{"--_column-depth":`${(t.depth+.5)*2}rem`,"--_hover-color":RUt(o)}},sL("dragging",_),sL("order-hovered",(n==null?void 0:n.id)===t.id),{children:b.jsxs(ge,{className:J_.menu,children:[m!=="group"&&l&&!e.some(T=>T.columnDef.columnDefType==="group")&&(p.enableColumnOrdering!==!1?b.jsx(lne,{onDragEnd:S,onDragStart:x,table:i}):b.jsx(ge,{className:J_.grab})),u&&(t.getCanPin()?b.jsx(LVt,{column:t,table:i}):b.jsx(ge,{className:J_.pin})),c?b.jsx(Xt,{label:d.toggleVisibility,openDelay:1e3,withinPortal:!0,children:b.jsx($0,{checked:g,className:J_.switch,disabled:!t.getCanHide(),label:p.header,onChange:()=>y(t)})}):b.jsx(Xe,{className:J_.header,children:p.header})]})})),(s=t.columns)===null||s===void 0?void 0:s.map((T,I)=>b.jsx(_Fe,{allColumns:e,column:T,hoveredColumn:n,setHoveredColumn:r,table:i},`${I}-${T.id}`))]})},FVt=({table:e})=>{const{getAllColumns:t,getAllLeafColumns:n,getCenterLeafColumns:r,getIsAllColumnsVisible:i,getIsSomeColumnsPinned:s,getIsSomeColumnsVisible:o,getLeftLeafColumns:a,getRightLeafColumns:l,getState:u,options:{enableColumnOrdering:c,enableColumnPinning:d,enableHiding:f,localization:h}}=e,{columnOrder:p,columnPinning:m}=u(),g=w=>{n().filter(x=>x.columnDef.enableHiding!==!1).forEach(x=>x.toggleVisibility(w))},y=A.useMemo(()=>{const w=t();return p.length>0&&!w.some(x=>x.columnDef.columnDefType==="group")?[...a(),...Array.from(new Set(p)).map(x=>r().find(S=>(S==null?void 0:S.id)===x)),...l()].filter(Boolean):w},[p,m,t(),r(),a(),l()]),[v,_]=A.useState(null);return b.jsxs(tn.Dropdown,{className:dt("mrt-show-hide-columns-menu",M0e.root),children:[b.jsxs(Et,{className:M0e.content,children:[f&&b.jsx(rn,{disabled:!o(),onClick:()=>g(!1),variant:"subtle",children:h.hideAll}),c&&b.jsx(rn,{onClick:()=>e.setColumnOrder(ine(e.options)),variant:"subtle",children:h.resetOrder}),d&&b.jsx(rn,{disabled:!s(),onClick:()=>e.resetColumnPinning(!0),variant:"subtle",children:h.unpinAll}),f&&b.jsx(rn,{disabled:i(),onClick:()=>g(!0),variant:"subtle",children:h.showAll})]}),b.jsx(tn.Divider,{}),y.map((w,x)=>b.jsx(_Fe,{allColumns:y,column:w,hoveredColumn:v,setHoveredColumn:_,table:e},`${x}-${w.id}`))]})},jVt=e=>{var{table:t,title:n}=e,r=Qt(e,["table","title"]);const{icons:{IconColumns:i},localization:{showHideColumns:s}}=t.options;return b.jsxs(tn,{closeOnItemClick:!1,withinPortal:!0,children:[b.jsx(Xt,{label:n??s,withinPortal:!0,children:b.jsx(tn.Target,{children:b.jsx(In,Object.assign({"aria-label":n??s,color:"gray",size:"lg",variant:"subtle"},r,{children:b.jsx(i,{})}))})}),b.jsx(FVt,{table:t})]})},BVt={md:"xs",xl:"md",xs:"xl"},zVt=e=>{var{table:{getState:t,options:{icons:{IconBaselineDensityLarge:n,IconBaselineDensityMedium:r,IconBaselineDensitySmall:i},localization:{toggleDensity:s}},setDensity:o},title:a}=e,l=Qt(e,["table","title"]);const{density:u}=t();return b.jsx(Xt,{label:a??s,withinPortal:!0,children:b.jsx(In,Object.assign({"aria-label":a??s,color:"gray",onClick:()=>o(c=>BVt[c]),size:"lg",variant:"subtle"},l,{children:u==="xs"?b.jsx(i,{}):u==="md"?b.jsx(r,{}):b.jsx(n,{})}))})},UVt=e=>{var{table:{getState:t,options:{icons:{IconFilter:n,IconFilterOff:r},localization:{showHideFilters:i}},setShowColumnFilters:s},title:o}=e,a=Qt(e,["table","title"]);const{showColumnFilters:l}=t();return b.jsx(Xt,{label:o??i,withinPortal:!0,children:b.jsx(In,Object.assign({"aria-label":o??i,color:"gray",onClick:()=>s(u=>!u),size:"lg",variant:"subtle"},a,{children:l?b.jsx(r,{}):b.jsx(n,{})}))})},VVt=e=>{var{table:{getState:t,options:{icons:{IconMaximize:n,IconMinimize:r},localization:{toggleFullScreen:i}},setIsFullScreen:s},title:o}=e,a=Qt(e,["table","title"]);const{isFullScreen:l}=t(),[u,c]=A.useState(!1),d=()=>{c(!1),s(f=>!f)};return b.jsx(Xt,{label:o??i,opened:u,withinPortal:!0,children:b.jsx(In,Object.assign({"aria-label":o??i,color:"gray",onClick:d,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),size:"lg",variant:"subtle"},a,{children:l?b.jsx(r,{}):b.jsx(n,{})}))})},HVt=e=>{var{table:{getState:t,options:{icons:{IconSearch:n,IconSearchOff:r},localization:{showHideSearch:i}},refs:{searchInputRef:s},setShowGlobalFilter:o},title:a}=e,l=Qt(e,["table","title"]);const{globalFilter:u,showGlobalFilter:c}=t(),d=()=>{o(!c),setTimeout(()=>{var f;return(f=s.current)===null||f===void 0?void 0:f.focus()},100)};return b.jsx(Xt,{label:a??i,withinPortal:!0,children:b.jsx(In,Object.assign({"aria-label":a??i,color:"gray",disabled:!!u,onClick:d,size:"lg",variant:"subtle"},l,{children:c?b.jsx(r,{}):b.jsx(n,{})}))})},qVt=e=>{var t,{table:n}=e,r=Qt(e,["table"]);const{options:{columnFilterDisplayMode:i,enableColumnFilters:s,enableColumnOrdering:o,enableColumnPinning:a,enableDensityToggle:l,enableFilters:u,enableFullScreenToggle:c,enableGlobalFilter:d,enableHiding:f,initialState:h,renderToolbarInternalActions:p}}=n;return b.jsx(Et,Object.assign({},r,{className:dt("mrt-toolbar-internal-buttons",$Vt.root,r==null?void 0:r.className),children:(t=p==null?void 0:p({table:n}))!==null&&t!==void 0?t:b.jsxs(b.Fragment,{children:[u&&d&&!(h!=null&&h.showGlobalFilter)&&b.jsx(HVt,{table:n}),u&&s&&i!=="popover"&&b.jsx(UVt,{table:n}),(f||o||a)&&b.jsx(jVt,{table:n}),l&&b.jsx(zVt,{table:n}),c&&b.jsx(VVt,{table:n})]})}))};var $0e={root:"MRT_GlobalFilterTextInput-module_root__Xmcpv",collapse:"MRT_GlobalFilterTextInput-module_collapse__v311d"};const Ez=e=>{var{table:t}=e,n=Qt(e,["table"]);const{getState:r,options:{enableGlobalFilterModes:i,icons:{IconSearch:s,IconX:o},localization:a,mantineSearchTextInputProps:l,manualFiltering:u},refs:{searchInputRef:c},setGlobalFilter:d}=t,{globalFilter:f,showGlobalFilter:h}=r(),p=Object.assign(Object.assign({},mt(l,{table:t})),n),m=A.useRef(!1),[g,y]=A.useState(f??""),[v]=exe(g,u?500:250);A.useEffect(()=>{d(v||void 0)},[v]);const _=()=>{y(""),d(void 0)};return A.useEffect(()=>{m.current&&(f===void 0?_():y(f)),m.current=!0},[f]),b.jsxs(qb,{className:$0e.collapse,in:h,children:[i&&b.jsxs(tn,{withinPortal:!0,children:[b.jsx(tn.Target,{children:b.jsx(In,{"aria-label":a.changeSearchMode,color:"gray",size:"sm",variant:"transparent",children:b.jsx(s,{})})}),b.jsx(pFe,{onSelect:_,table:t})]}),b.jsx(qd,Object.assign({leftSection:!i&&b.jsx(s,{}),mt:0,mx:"sm",onChange:w=>y(w.target.value),placeholder:a.search,rightSection:g?b.jsx(In,{"aria-label":a.clearSearch,color:"gray",disabled:!(g!=null&&g.length),onClick:_,size:"sm",variant:"transparent",children:b.jsx(Xt,{label:a.clearSearch,withinPortal:!0,children:b.jsx(o,{})})}):null,value:g??"",variant:"filled"},p,{className:dt("mrt-global-filter-text-input",$0e.root,p==null?void 0:p.className),ref:w=>{w&&(c.current=w,p!=null&&p.ref&&(p.ref=w))}}))]})},WVt=e=>{var t,{table:n}=e,r=Qt(e,["table"]);const{getState:i,options:{enableGlobalFilter:s,enablePagination:o,enableToolbarInternalActions:a,mantineTopToolbarProps:l,positionGlobalFilter:u,positionPagination:c,positionToolbarAlertBanner:d,positionToolbarDropZone:f,renderTopToolbarCustomActions:h},refs:{topToolbarRef:p}}=n,{isFullScreen:m,showGlobalFilter:g}=i(),y=KA("(max-width:720px)"),v=KA("(max-width:1024px)"),_=Object.assign(Object.assign({},mt(l,{table:n})),r),w=y||!!h||g&&v,x={style:v?void 0:{zIndex:3},table:n};return b.jsxs(ge,Object.assign({},_,{className:dt(gFe["common-toolbar-styles"],yO.root,m&&yO["root-fullscreen"],_==null?void 0:_.className),ref:S=>{S&&(p.current=S,_!=null&&_.ref&&(_.ref.current=S))},children:[d==="top"&&b.jsx(une,{stackAlertBanner:w,table:n}),["both","top"].includes(f??"")&&b.jsx(bFe,{table:n}),b.jsxs(Et,{className:dt(yO["actions-container"],w&&yO["actions-container-stack-alert"]),children:[s&&u==="left"&&b.jsx(Ez,Object.assign({},x)),(t=h==null?void 0:h({table:n}))!==null&&t!==void 0?t:b.jsx("span",{}),a?b.jsxs(Et,{justify:"end",wrap:"wrap-reverse",children:[s&&u==="right"&&b.jsx(Ez,Object.assign({},x)),b.jsx(qVt,{table:n})]}):s&&u==="right"&&b.jsx(Ez,Object.assign({},x))]}),o&&["both","top"].includes(c??"")&&b.jsx(Et,{justify:"end",children:b.jsx(vFe,{position:"top",table:n})}),b.jsx(yFe,{isTopToolbar:!0,table:n})]}))},GVt=e=>{var t,n,{table:r}=e,i=Qt(e,["table"]);const{getState:s,options:{enableBottomToolbar:o,enableTopToolbar:a,mantinePaperProps:l,renderBottomToolbar:u,renderTopToolbar:c},refs:{tablePaperRef:d}}=r,{isFullScreen:f}=s(),h=Object.assign(Object.assign({},mt(l,{table:r})),i);return b.jsxs(Mk,Object.assign({shadow:"xs",withBorder:!0},h,{className:dt("mrt-table-paper",nVt.root,f&&"mrt-table-paper-fullscreen",h==null?void 0:h.className),ref:p=>{d.current=p,h!=null&&h.ref&&(h.ref.current=p)},style:p=>Object.assign(Object.assign({zIndex:f?200:void 0},mt(h==null?void 0:h.style,p)),f?{border:0,borderRadius:0,bottom:0,height:"100vh",left:0,margin:0,maxHeight:"100vh",maxWidth:"100vw",padding:0,position:"fixed",right:0,top:0,width:"100vw"}:null),children:[a&&((t=mt(c,{table:r}))!==null&&t!==void 0?t:b.jsx(WVt,{table:r})),b.jsx(DVt,{table:r}),o&&((n=mt(u,{table:r}))!==null&&n!==void 0?n:b.jsx(MVt,{table:r}))]}))},YVt=e=>e.table!==void 0,KVt=e=>{let t;return YVt(e)?t=e.table:t=uFe(e),b.jsx(GVt,{table:t})};function L0e(e){const t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return n==="60"?`${t+1}:00`:`${t}:${+n<10?"0":""}${n}`}async function XVt(e,t,n,r){return e&&t&&n&&r?await e.getEditedTranscript(t,r,n):null}async function Sz(e,t){return e?await e.getTags(t):[]}async function QVt(e){return e?await e.getAllParticipantAndTaskTags():{}}function JVt({completed:e,studyConfig:t}){const{storageEngine:n}=pi(),[r,i]=A.useState(null),s=A.useMemo(()=>hQ(t.sequence).map(R=>R.componentName),[t.sequence]),o=pp(),{value:a,execute:l}=Md(Sz,[n,"text"]),{value:u,execute:c}=Md(Sz,[n,"task"]),{value:d,execute:f}=Md(Sz,[n,"participant"]),{value:h,execute:p}=Md(QVt,[n]),[m,g]=A.useState([]),[y,v]=A.useState([]),[_,w]=A.useState([]),[x,S]=A.useState(150),E=A.useMemo(()=>{if(!r)return null;const R=nh(m.map($=>$.tasks[r].wordCount||0));return Ba([0,x]).domain(R)},[r,m,x]),T=A.useMemo(()=>{if(!r){const $=nh(m.map(D=>D.interactionCount||0));return Ba([0,x]).domain($)}const R=nh(m.map($=>$.tasks[r].interactionCount||0));return Ba([0,x]).domain(R)},[r,m,x]),I=A.useMemo(()=>{if(!r){const $=nh(m.map(D=>D.timeSpent||0));return Ba([0,x]).domain($)}const R=nh(m.map($=>$.tasks[r].timeSpent||0));return Ba([0,x]).domain(R)},[r,m,x]),k=A.useCallback((R,$)=>{n&&n.saveTags(R,$).then(()=>{p(n),l(n,"text"),c(n,"task"),f(n,"participant")})},[f,p,c,l,n]);A.useEffect(()=>{if(!o||!n)return;const R=e.map($=>{const D=Object.values($.answers),O=nh(D.map(V=>[V.startTime,V.endTime]).flat()),F=hI(D.map(V=>V.provenanceGraph?Object.keys(V.provenanceGraph.nodes).length-1:0)),U={};return Object.entries($.answers).forEach(V=>{const[M,z]=V,q=M.slice(0,M.lastIndexOf("_"));U[q]={interactionCount:z.provenanceGraph?Object.keys(z.provenanceGraph.nodes).length-1:0,wordCount:null,timeSpent:z.endTime-z.startTime,tags:[]}}),{timeSpent:O[1]-O[0],wordCount:null,interactionCount:F,id:$.participantId,tasks:U}});g(R)},[o,e,n]),A.useEffect(()=>{if(r&&o.user.user){const R=[...m];Promise.all(m.map(($,D)=>{var O;return XVt(n,$.id,r,(O=o.user.user)==null?void 0:O.email).then(F=>{if(F&&F.length>0){const U=hI(F.map(M=>M.text.length)),V=F.map(M=>M.selectedTags.map(z=>({...z,startTime:M.transcriptMappingStart}))).flat();R[D].tasks[r].tags=V,R[D].tasks[r].wordCount=U}else R[D].tasks[r].wordCount=0})})).then(()=>g(R))}},[o.user.user,r,n]),A.useEffect(()=>{if(_.length===0){v(m);return}v(m.filter(R=>{if(h&&h[R.id]){if(h[R.id].partTags.find(D=>!!_.find(O=>O===D.name)))return!0;if(r){const D=h[R.id].taskTags[r];if(D&&D.find(O=>!!_.find(F=>F===O.name)))return!0}}return!!(r&&R.tasks[r].tags.find($=>!!_.find(D=>D===$.name)))}))},[r,_,m,h]);const P=A.useMemo(()=>r===null?[{accessorKey:"id",header:"Participant Id"},{accessorKey:"timeSpent",header:"Time Spent",id:"timeSpent",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:R})=>R.getValue()===null||R.getValue()===void 0?b.jsx(is,{}):b.jsxs("svg",{style:{width:R.column.getSize(),height:"60px"},children:[b.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:I(R.getValue())}),b.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:L0e(R.getValue())})]}),size:150},{accessorKey:"interactionCount",header:"Interaction Count",id:"interactionCount",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:R})=>R.getValue()===null||R.getValue()===void 0?b.jsx(is,{}):b.jsxs("svg",{style:{width:R.column.getSize(),height:"60px"},children:[b.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:T(R.getValue())}),b.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:R.getValue()})]}),size:150},{accessorKey:"id",id:"participantTags",header:"Participant Tags",renderColumnActionsMenuItems({internalColumnMenuItems:R}){return b.jsxs(b.Fragment,{children:[R,b.jsx(tI,{closeMenuOnClick:!1,children:b.jsx(hq,{tags:d||[],createTagCallback:$=>{k([...d||[],$],"participant")},editTagCallback:()=>null})})]})},Cell:({cell:R})=>b.jsx(pA,{tags:d||[],onSelectTags:$=>{if(n&&h){const D=Ah(h);D[R.getValue()]||(D[R.getValue()]={partTags:[],taskTags:{}}),D[R.getValue()].partTags=$,n.saveAllParticipantAndTaskTags(D).then(()=>{p(n)})}},selectedTags:h&&h[R.getValue()]?h[R.getValue()].partTags:[]}),size:150}]:[{accessorKey:"id",id:"id",header:"Participant Id",Cell:({cell:R})=>b.jsx(Hy,{size:"12px",component:OX,target:"_blank",to:`${Qu}ThinkAloud/analysis/${R.getValue()}/reviewer-${r}`,children:R.getValue()}),size:150},{accessorKey:`tasks.${r}.timeSpent`,header:"Time Spent",id:"timeSpent",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:R})=>R.getValue()===null||R.getValue()===void 0?b.jsx(is,{}):b.jsxs("svg",{style:{width:R.column.getSize(),height:"60px"},children:[b.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:I(R.getValue())}),b.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:L0e(R.getValue())})]}),size:150},{accessorKey:`tasks.${r}.wordCount`,header:"Word Count",id:"wordCount",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:R})=>R.getValue()===null||R.getValue()===void 0?b.jsx(is,{}):b.jsxs("svg",{style:{width:R.column.getSize(),height:"60px"},children:[b.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:E?E(R.getValue()):0}),b.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:R.getValue()})]}),size:150},{accessorKey:`tasks.${r}.interactionCount`,header:"Interaction Count",id:"interactionCount",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:R})=>R.getValue()===null||R.getValue()===void 0?b.jsx(is,{}):b.jsxs("svg",{style:{width:R.column.getSize(),height:"60px"},children:[b.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:T(R.getValue())}),b.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:R.getValue()})]}),size:150},{accessorKey:`tasks.${r}.tags`,header:"Tags",Cell:({cell:R,row:$})=>b.jsx(Wb,{type:"auto",h:40,children:b.jsx(gn,{gap:2,children:b.jsx(aMe,{size:"xs",selectedTags:R.getValue().filter(D=>_.length>0?!!_.find(O=>O===D.name):!0),currentTask:r,isLink:!0,participantId:$.getValue("id")})})}),size:150},{accessorKey:"id",id:"taskTags",header:"Task Tags",renderColumnActionsMenuItems({internalColumnMenuItems:R}){return b.jsxs(b.Fragment,{children:[R,b.jsx(tI,{closeMenuOnClick:!1,children:b.jsx(hq,{tags:u||[],createTagCallback:$=>{k([...u||[],$],"task")},editTagCallback:()=>null})})]})},Cell:({cell:R})=>b.jsx(pA,{tags:u||[],onSelectTags:$=>{if(n&&h){const D=Ah(h);D[R.getValue()]||(D[R.getValue()]={partTags:[],taskTags:{}}),D[R.getValue()].taskTags[r]=$,n.saveAllParticipantAndTaskTags(D).then(()=>{p(n)})}},selectedTags:h&&h[R.getValue()]?h[R.getValue()].taskTags[r]||[]:[]}),size:150}],[d,r,_,T,h,p,k,n,u,I,E]),L=uFe({columns:P,data:y,enableMultiSort:!0,enableDensityToggle:!1,enablePagination:!1,enableRowVirtualization:!0,initialState:{density:"xs"},mantineTableContainerProps:{style:{maxHeight:"77dvh"}},renderTopToolbarCustomActions:()=>b.jsxs(gn,{gap:"xl",children:[b.jsxs(gn,{children:[b.jsx(li,{order:5,children:"Select Task"}),b.jsx(zl,{clearable:!0,value:r,onChange:i,data:s}),b.jsx(rn,{children:"Download all"})]}),b.jsxs(gn,{children:[b.jsx(li,{order:5,children:"Filter by tags"}),a&&u&&d&&a.length>0?b.jsx(pA,{tags:a,onSelectTags:R=>w(R.map($=>$.name)),selectedTags:[...a.filter(R=>_.includes(R.name)),...u.filter(R=>_.includes(R.name)),...d.filter(R=>_.includes(R.name))],partTags:d||[],taskTags:u||[]}):b.jsx(is,{})]})]})});return b.jsx(ge,{px:"sm",style:{height:"100%"},children:b.jsx(KVt,{table:L})})}function ZVt(e){const{globalConfig:t}=e,{studyId:n}=Lc(),[r,i]=A.useState([]),[s,o]=A.useState(void 0),[a,l]=A.useState(!1),{storageEngine:u}=pi(),c=Zc(),{tab:d}=Lc(),{user:f}=pp(),h=A.useCallback(async()=>{if(l(!0),n){const y=await nj(n,t);if(!y||!u)return;await u.initializeStudyDb(n,y);const v=await u.getAllParticipantsData();i(v),o(y),l(!1)}},[t,u,n]);A.useEffect(()=>{h()},[t,u,n,h]);const[p,m,g]=A.useMemo(()=>{const y=r.filter(w=>!w.rejected&&w.completed),v=r.filter(w=>!w.rejected&&!w.completed),_=r.filter(w=>w.rejected);return[y,v,_]},[r]);return b.jsxs(Ar,{style:{height:"100%"},children:[b.jsx(wA,{studyIds:e.globalConfig.configsList}),b.jsx(Ar.Main,{children:b.jsxs(ge,{p:"sm",style:{height:"100%",minHeight:"100%",width:"100%"},children:[b.jsx(Gl,{visible:a}),b.jsxs(Et,{direction:"row",align:"center",children:[b.jsx(li,{order:5,children:n}),b.jsx(sLe,{completed:p.length,inProgress:m.length,rejected:g.length})]}),b.jsx(kc,{h:"xs"}),b.jsxs(ho,{variant:"outline",value:d,onChange:y=>c(`./../${y}`),style:{height:"100%"},children:[b.jsxs(ho.List,{children:[b.jsx(ho.Tab,{value:"table",leftSection:b.jsx(Ynt,{size:16}),children:"Table View"}),b.jsx(Xt,{label:"Coming soon",position:"bottom",children:b.jsx(ho.Tab,{value:"stats",leftSection:b.jsx(mnt,{size:16}),disabled:!0,children:"Trial Stats"})}),b.jsx(Xt,{label:"Coming soon",position:"bottom",children:b.jsx(ho.Tab,{value:"replay",leftSection:b.jsx(jue,{size:16}),disabled:!0,children:"Participant Replay"})}),b.jsx(ho.Tab,{value:"thinkAloud",leftSection:b.jsx(jue,{size:16}),children:"Think Aloud"}),b.jsx(ho.Tab,{value:"manage",leftSection:b.jsx(GSe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),b.jsx(ho.Panel,{value:"table",pt:"xs",children:s&&b.jsx(Z9t,{completed:p,inProgress:m,studyConfig:s,refresh:h})}),b.jsx(ho.Panel,{value:"stats",pt:"xs",children:"statsboard"}),b.jsx(ho.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),b.jsx(ho.Panel,{value:"thinkAloud",pt:"xs",children:s&&b.jsx(JVt,{completed:p,studyConfig:s})}),b.jsx(ho.Panel,{value:"manage",pt:"xs",children:n&&f.isAdmin?b.jsx(nzt,{studyId:n,refresh:h}):b.jsx(bf,{mt:20,children:b.jsx(lS,{title:"Unauthorized Access",variant:"light",color:"red",icon:b.jsx(Mnt,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function F0e({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=pp(),{storageEngine:o}=pi(),[a,l]=A.useState(!1),u=Lc();return A.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&u[t]){const d=await n(u[t]);d&&l(d)}else l(!0);if(a)try{r&&await i(r)||s()}catch(d){s(),console.warn(d)}})()},[r.isAdmin,a]),r.determiningStatus||!o?b.jsx(Gl,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?b.jsx(NX,{to:"/login"}):b.jsx(b.Fragment,{children:e})}async function wFe(e,t,n){if(e instanceof mc){t(!0);const r=new em,i=K3();try{await y6t(i,r,QMe)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function eHt(){const{user:e}=pp(),[t,n]=A.useState(null),[r,i]=A.useState(!1),{storageEngine:s}=pi();return A.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?b.jsx(NX,{to:"/"}):b.jsx(bf,{children:b.jsx(Gb,{padding:"lg",children:b.jsxs(Et,{align:"center",direction:"column",justify:"center",children:[b.jsx(Wy,{maw:200,mt:50,mb:100,src:`${Qu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),b.jsxs(b.Fragment,{children:[b.jsx(Xe,{mb:20,children:"To access admin settings, please sign in using your Google account."}),b.jsx(rn,{onClick:()=>wFe(s,i,n),leftSection:b.jsx(Knt,{}),variant:"filled",children:"Sign In With Google"})]}),t?b.jsx(pm,{size:"lg",color:"red",mt:30,children:t}):null,b.jsx(Gl,{visible:r})]})})})}var xFe={exports:{}},tHt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",nHt=tHt,rHt=nHt;function EFe(){}function SFe(){}SFe.resetWarningCache=EFe;var iHt=function(){function e(r,i,s,o,a,l){if(l!==rHt){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:SFe,resetWarningCache:EFe};return n.PropTypes=n,n};xFe.exports=iHt();var sHt=xFe.exports;const j0e=rl(sHt),B0e={};function Kq(e,t){e===void 0&&(e=B0e),t===void 0&&(t=B0e);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var oHt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),aHt=Object.prototype.hasOwnProperty;function Xq(e,t){return aHt.call(e,t)}function Qq(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Xq(e,i)&&r.push(i);return r}function Au(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Jq(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function i1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function TFe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Zq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Zq(e[t]))return!0}else if(typeof e=="object"){for(var r=Qq(e),i=r.length,s=0;s<i;s++)if(Zq(e[r[s]]))return!0}}return!1}function z0e(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var CFe=function(e){oHt(t,e);function t(n,r,i,s,o){var a=this.constructor,l=e.call(this,z0e(n,{name:r,index:i,operation:s,tree:o}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=z0e(n,{name:r,index:i,operation:s,tree:o}),l}return t}(Error),Fi=CFe,lHt=Au,Gw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=oL(n,this.path);r&&(r=Au(r));var i=H1(n,{op:"remove",path:this.from}).removed;return H1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=oL(n,this.from);return H1(n,{op:"add",path:this.path,value:Au(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:ok(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},uHt={add:function(e,t,n){return Jq(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Gw.move,copy:Gw.copy,test:Gw.test,_get:Gw._get};function oL(e,t){if(t=="")return e;var n={op:"_get",path:t};return H1(e,n),n.value}function H1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):aL(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=oL(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=ok(e,t.value),o.test===!1)throw new Fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Fi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Au(e));var a=t.path||"",l=a.split("/"),u=e,c=1,d=l.length,f=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=aL;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=TFe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(u[h]===void 0?f=l.slice(0,c).join("/"):c==d-1&&(f=t.path),f!==void 0&&p(t,0,e,f)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!Jq(h))throw new Fi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);Jq(h)&&(h=~~h)}if(c>=d){if(n&&t.op==="add"&&h>u.length)throw new Fi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=uHt[t.op].call(t,u,h,e);if(o.test===!1)throw new Fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=d){var o=Gw[t.op].call(t,u,h,e);if(o.test===!1)throw new Fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(u=u[h],n&&c<d&&(!u||typeof u!="object"))throw new Fi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function bj(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Fi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Au(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=H1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function cHt(e,t,n){var r=H1(e,t);if(r.test===!1)throw new Fi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function aL(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Fi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Gw[e.op]){if(typeof e.path!="string")throw new Fi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Fi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Fi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Fi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Zq(e.value))throw new Fi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Fi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Fi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=AFe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Fi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Fi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function AFe(e,t,n){try{if(!Array.isArray(e))throw new Fi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)bj(Au(t),Au(e),n||!0);else{n=n||aL;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Fi)return i;throw i}}function ok(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!ok(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!ok(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const dHt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Fi,_areEquals:ok,applyOperation:H1,applyPatch:bj,applyReducer:cHt,deepClone:lHt,getValueByPointer:oL,validate:AFe,validator:aL},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var cne=new WeakMap,fHt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),hHt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function pHt(e){return cne.get(e)}function mHt(e,t){return e.observers.get(t)}function gHt(e,t){e.observers.delete(t.callback)}function yHt(e,t){t.unobserve()}function vHt(e,t){var n=[],r,i=pHt(e);if(!i)i=new fHt(e),cne.set(e,i);else{var s=mHt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Au(e),t){r.callback=t,r.next=null;var o=function(){eW(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){eW(r),clearTimeout(r.next),gHt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new hHt(t,r)),r}function eW(e,t){t===void 0&&(t=!1);var n=cne.get(e.object);dne(n.value,e.object,e.patches,"",t),e.patches.length&&bj(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function dne(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=Qq(t),o=Qq(e),a=!1,l=o.length-1;l>=0;l--){var u=o[l],c=e[u];if(Xq(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?dne(c,d,n,r+"/"+i1(u),i):c!==d&&(i&&n.push({op:"test",path:r+"/"+i1(u),value:Au(c)}),n.push({op:"replace",path:r+"/"+i1(u),value:Au(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+i1(u),value:Au(c)}),n.push({op:"remove",path:r+"/"+i1(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var l=0;l<s.length;l++){var u=s[l];!Xq(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+i1(u),value:Au(t[u])})}}}function bHt(e,t,n){n===void 0&&(n=!1);var r=[];return dne(e,t,r,"",n),r}const _Ht=Object.freeze(Object.defineProperty({__proto__:null,compare:bHt,generate:eW,observe:vHt,unobserve:yHt},Symbol.toStringTag,{value:"Module"}));Object.assign({},dHt,_Ht,{JsonPatchError:CFe,deepClone:Au,escapePathComponent:i1,unescapePathComponent:TFe});var wHt=/("(?:[^\\"]|\\.)*")|[:,]/g,xHt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,l,u){var c,d,f,h,p,m,g,y,v,_,w,x;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-l.length-u,w.length<=g&&(v=w.replace(wHt,function(S,E){return E||S+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=l+r,f=[],d=0,Array.isArray(a))for(_="[",c="]",g=a.length;d<g;d++)f.push(o(a[d],y,d===g-1?0:1)||"null");else for(_="{",c="}",m=Object.keys(a),g=m.length;d<g;d++)h=m[d],p=JSON.stringify(h)+": ",x=o(a[h],y,p.length+(d===g-1?0:1)),x!==void 0&&f.push(p+x);if(f.length>0)return[_,r+f.join(`,
`+y),c].join(`
`+l)}return w}(t,"",0)};const Tz=rl(xHt);function ou(e,t,n){return e.fields=t||[],e.fname=n,e}function Gi(e){return e==null?null:e.fname}function ha(e){return e==null?null:e.fields}function IFe(e){return e.length===1?EHt(e[0]):SHt(e)}const EHt=e=>function(t){return t[e]},SHt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Le(e){throw Error(e)}function mp(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,l;e=e+"";function u(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(l=e[a],l==="\\")s+=e.substring(o,a++),o=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;o===i&&l==='"'||o===i&&l==="'"?(o=a+1,r=l):l==="."&&!i?a>o?u():o=a+1:l==="["?(a>o&&u(),i=o=a+1):l==="]"&&(i||Le("Access path missing open bracket: "+e),i>0&&u(),i=0,o=a+1)}return i&&Le("Access path missing closing bracket: "+e),r&&Le("Access path missing closing quote: "+e),a>o&&(a++,u()),t}function Vc(e,t,n){const r=mp(e);return e=r.length===1?r[0]:e,ou((n&&n.get||IFe)(r),[e],t||e)}const KR=Vc("id"),_a=ou(e=>e,[],"identity"),d0=ou(()=>0,[],"zero"),JS=ou(()=>1,[],"one"),Hc=ou(()=>!0,[],"true"),Vg=ou(()=>!1,[],"false");function THt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const kFe=0,fne=1,hne=2,RFe=3,PFe=4;function pne(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:THt,r=e||kFe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=fne&&n(t||"error","ERROR",arguments),this},warn(){return r>=hne&&n(t||"warn","WARN",arguments),this},info(){return r>=RFe&&n(t||"log","INFO",arguments),this},debug(){return r>=PFe&&n(t||"log","DEBUG",arguments),this}}}var Be=Array.isArray;function pt(e){return e===Object(e)}const U0e=e=>e!=="__proto__";function ZS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=CHt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;eT(r,s,i[s],o)}return r},{})}function eT(e,t,n,r){if(!U0e(t))return;let i,s;if(pt(n)&&!Be(n)){s=pt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?eT(s,i,n[i]):U0e(i)&&(s[i]=n[i])}else e[t]=n}function CHt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Xn(e){return e[e.length-1]}function da(e){return e==null||e===""?null:+e}const NFe=e=>t=>e*Math.exp(t),OFe=e=>t=>Math.log(e*t),DFe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),MFe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,lL=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function _j(e,t,n,r){const i=n(e[0]),s=n(Xn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function $Fe(e,t){return _j(e,t,da,_a)}function LFe(e,t){var n=Math.sign(e[0]);return _j(e,t,OFe(n),NFe(n))}function FFe(e,t,n){return _j(e,t,lL(n),lL(1/n))}function jFe(e,t,n){return _j(e,t,DFe(n),MFe(n))}function wj(e,t,n,r,i){const s=r(e[0]),o=r(Xn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function mne(e,t,n){return wj(e,t,n,da,_a)}function gne(e,t,n){const r=Math.sign(e[0]);return wj(e,t,n,OFe(r),NFe(r))}function uL(e,t,n,r){return wj(e,t,n,lL(r),lL(1/r))}function yne(e,t,n,r){return wj(e,t,n,DFe(r),MFe(r))}function BFe(e){return 1+~~(new Date(e).getMonth()/3)}function zFe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function gt(e){return e!=null?Be(e)?e:[e]:[]}function UFe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function En(e){return typeof e=="function"}const AHt="descending";function vne(e,t,n){n=n||{},t=gt(t)||[];const r=[],i=[],s={},o=n.comparator||IHt;return gt(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===AHt?-1:1),i.push(a=En(a)?a:Vc(a,null,n)),(ha(a)||[]).forEach(u=>s[u]=1))}),i.length===0?null:ou(o(i,r),Object.keys(s))}const xj=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),IHt=(e,t)=>e.length===1?kHt(e[0],t[0]):RHt(e,t,e.length),kHt=(e,t)=>function(n,r){return xj(e(n),e(r))*t},RHt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=xj(s(r),s(i));return o*t[a]});function wa(e){return En(e)?e:()=>e}function bne(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function xn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Xh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function VFe(e,t){const n=e.length;let r=-1,i,s,o,a,l;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}return[a,l]}const PHt=Object.prototype.hasOwnProperty;function bt(e,t){return PHt.call(e,t)}const vO={};function tT(e){let t={},n;function r(s){return bt(t,s)&&t[s]!==vO}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===vO&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=vO),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const l=t[a];l!==vO&&(!n||!n(l))&&(s[a]=l,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function HFe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],l=Xn(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const c=Math.abs(l-t);return u<c&&u<=o?r:c<=o?i:s}function lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),xn(r,n)}function Yw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function av(e){return typeof e=="boolean"}function G0(e){return Object.prototype.toString.call(e)==="[object Date]"}function qFe(e){return e&&En(e[Symbol.iterator])}function hr(e){return typeof e=="number"}function WFe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function yt(e){return typeof e=="string"}function _ne(e,t,n){e&&(e=t?gt(e).map(a=>a.replace(/\\(.)/g,"$1")):gt(e));const r=e&&e.length,i=n&&n.get||IFe,s=a=>i(t?[a]:mp(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(l){return""+a(l)}}else{const a=e.map(s);o=function(l){let u=""+a[0](l),c=0;for(;++c<r;)u+="|"+a[c](l);return u}}return ou(o,e,"key")}function GFe(e,t){const n=e[0],r=Xn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const NHt=1e4;function YFe(e){e=+e||NHt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>bt(t,o)||bt(n,o),get:o=>bt(t,o)?t[o]:bt(n,o)?s(o,n[o]):void 0,set:(o,a)=>bt(t,o)?t[o]=a:s(o,a)}}function KFe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,l=0,u=0;for(;a<i&&l<s;++u)o[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)o[u]=t[a];for(;l<s;++l,++u)o[u]=n[l];return o}function h2(e,t){let n="";for(;--t>=0;)n+=e;return n}function XFe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?h2(i,o)+s:r==="center"?h2(i,~~(o/2))+s+h2(i,Math.ceil(o/2)):s+h2(i,o)}function XR(e){return e&&Xn(e)-e[0]||0}function st(e){return Be(e)?"["+e.map(st)+"]":pt(e)||yt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function wne(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const OHt=e=>hr(e)||G0(e)?e:Date.parse(e);function xne(e,t){return t=t||OHt,e==null||e===""?null:t(e)}function Ene(e){return e==null||e===""?null:e+""}function cf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function QFe(e,t,n,r){const i=r??"…",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Qg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function DHt(e){return e}function MHt(e){if(e==null)return DHt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,l){l||(t=n=0);var u=2,c=a.length,d=new Array(c);for(d[0]=(t+=a[0])*r+s,d[1]=(n+=a[1])*i+o;u<c;)d[u]=a[u],++u;return d}}function $Ht(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function LHt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return V0e(e,n)})}:V0e(e,t)}function V0e(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=JFe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function JFe(e,t){var n=MHt(e.transform),r=e.arcs;function i(c,d){d.length&&d.pop();for(var f=r[c<0?~c:c],h=0,p=f.length;h<p;++h)d.push(n(f[h],h));c<0&&$Ht(d,p)}function s(c){return n(c)}function o(c){for(var d=[],f=0,h=c.length;f<h;++f)i(c[f],d);return d.length<2&&d.push(d[0]),d}function a(c){for(var d=o(c);d.length<4;)d.push(d[0]);return d}function l(c){return c.map(a)}function u(c){var d=c.type,f;switch(d){case"GeometryCollection":return{type:d,geometries:c.geometries.map(u)};case"Point":f=s(c.coordinates);break;case"MultiPoint":f=c.coordinates.map(s);break;case"LineString":f=o(c.arcs);break;case"MultiLineString":f=c.arcs.map(o);break;case"Polygon":f=l(c.arcs);break;case"MultiPolygon":f=c.arcs.map(l);break;default:return null}return{type:d,coordinates:f}}return u(t)}function FHt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(u,c){var d=e.arcs[u<0?~u:u],f;d.length<3&&!d[1][0]&&!d[1][1]&&(f=t[++o],t[o]=u,t[c]=f)}),t.forEach(function(u){var c=a(u),d=c[0],f=c[1],h,p;if(h=i[d])if(delete i[h.end],h.push(u),h.end=f,p=r[f]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[f])if(delete r[h.start],h.unshift(u),h.start=d,p=i[d]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=d]=i[h.end=f]=h});function a(u){var c=e.arcs[u<0?~u:u],d=c[0],f;return e.transform?(f=[0,0],c.forEach(function(h){f[0]+=h[0],f[1]+=h[1]})):f=c[c.length-1],u<0?[f,d]:[d,f]}function l(u,c){for(var d in u){var f=u[d];delete c[f.start],delete f.start,delete f.end,f.forEach(function(h){n[h<0?~h:h]=1}),s.push(f)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||s.push([u])}),s}function jHt(e){return JFe(e,BHt.apply(this,arguments))}function BHt(e,t,n){var r,i,s;if(arguments.length>1)r=zHt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:FHt(e,r)}}function zHt(e,t,n){var r=[],i=[],s;function o(d){var f=d<0?~d:d;(i[f]||(i[f]=[])).push({i:d,g:s})}function a(d){d.forEach(o)}function l(d){d.forEach(a)}function u(d){d.forEach(l)}function c(d){switch(s=d,d.type){case"GeometryCollection":d.geometries.forEach(c);break;case"LineString":a(d.arcs);break;case"MultiLineString":case"Polygon":l(d.arcs);break;case"MultiPolygon":u(d.arcs);break}}return c(t),i.forEach(n==null?function(d){r.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&r.push(d[0].i)}),r}const Ao="year",Jl="quarter",pa="month",Ps="week",Zl="date",ca="day",Qh="dayofyear",qu="hours",Wu="minutes",qc="seconds",df="milliseconds",Sne=[Ao,Jl,pa,Ps,Zl,ca,Qh,qu,Wu,qc,df],Cz=Sne.reduce((e,t,n)=>(e[t]=1+n,e),{});function Tne(e){const t=gt(e).slice(),n={};return t.length||Le("Missing time unit."),t.forEach(i=>{bt(Cz,i)?n[i]=1:Le(`Invalid time unit: ${i}.`)}),(n[Ps]||n[ca]?1:0)+(n[Jl]||n[pa]||n[Zl]?1:0)+(n[Qh]?1:0)>1&&Le(`Incompatible time units: ${e}`),t.sort((i,s)=>Cz[i]-Cz[s]),t}const UHt={[Ao]:"%Y ",[Jl]:"Q%q ",[pa]:"%b ",[Zl]:"%d ",[Ps]:"W%U ",[ca]:"%a ",[Qh]:"%j ",[qu]:"%H:00",[Wu]:"00:%M",[qc]:":%S",[df]:".%L",[`${Ao}-${pa}`]:"%Y-%m ",[`${Ao}-${pa}-${Zl}`]:"%Y-%m-%d ",[`${qu}-${Wu}`]:"%H:%M"};function ZFe(e,t){const n=xn({},UHt,t),r=Tne(e),i=r.length;let s="",o=0,a,l;for(o=0;o<i;)for(a=r.length;a>o;--a)if(l=r.slice(o,a).join("-"),n[l]!=null){s+=n[l],o=a;break}return s.trim()}const g1=new Date;function Cne(e){return g1.setFullYear(e),g1.setMonth(0),g1.setDate(1),g1.setHours(0,0,0,0),g1}function e6e(e){return n6e(new Date(e))}function t6e(e){return tW(new Date(e))}function n6e(e){return _m.count(Cne(e.getFullYear())-1,e)}function tW(e){return kS.count(Cne(e.getFullYear())-1,e)}function nW(e){return Cne(e).getDay()}function VHt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function r6e(e){return s6e(new Date(e))}function i6e(e){return rW(new Date(e))}function s6e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return B0.count(t-1,e)}function rW(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return RS.count(t-1,e)}function iW(e){return g1.setTime(Date.UTC(e,0,1)),g1.getUTCDay()}function HHt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function o6e(e,t,n,r,i){const s=t||1,o=Xn(e),a=(y,v,_)=>(_=_||y,qHt(n[_],r[_],y===o&&s,v)),l=new Date,u=cf(e),c=u[Ao]?a(Ao):wa(2012),d=u[pa]?a(pa):u[Jl]?a(Jl):d0,f=u[Ps]&&u[ca]?a(ca,1,Ps+ca):u[Ps]?a(Ps,1):u[ca]?a(ca,1):u[Zl]?a(Zl,1):u[Qh]?a(Qh,1):JS,h=u[qu]?a(qu):d0,p=u[Wu]?a(Wu):d0,m=u[qc]?a(qc):d0,g=u[df]?a(df):d0;return function(y){l.setTime(+y);const v=c(l);return i(v,d(l),f(l,v),h(l),p(l),m(l),g(l))}}function qHt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function IE(e,t,n){return t+e*7-(n+6)%7}const WHt={[Ao]:e=>e.getFullYear(),[Jl]:e=>Math.floor(e.getMonth()/3),[pa]:e=>e.getMonth(),[Zl]:e=>e.getDate(),[qu]:e=>e.getHours(),[Wu]:e=>e.getMinutes(),[qc]:e=>e.getSeconds(),[df]:e=>e.getMilliseconds(),[Qh]:e=>n6e(e),[Ps]:e=>tW(e),[Ps+ca]:(e,t)=>IE(tW(e),e.getDay(),nW(t)),[ca]:(e,t)=>IE(1,e.getDay(),nW(t))},GHt={[Jl]:e=>3*e,[Ps]:(e,t)=>IE(e,0,nW(t))};function a6e(e,t){return o6e(e,t||1,WHt,GHt,VHt)}const YHt={[Ao]:e=>e.getUTCFullYear(),[Jl]:e=>Math.floor(e.getUTCMonth()/3),[pa]:e=>e.getUTCMonth(),[Zl]:e=>e.getUTCDate(),[qu]:e=>e.getUTCHours(),[Wu]:e=>e.getUTCMinutes(),[qc]:e=>e.getUTCSeconds(),[df]:e=>e.getUTCMilliseconds(),[Qh]:e=>s6e(e),[Ps]:e=>rW(e),[ca]:(e,t)=>IE(1,e.getUTCDay(),iW(t)),[Ps+ca]:(e,t)=>IE(rW(e),e.getUTCDay(),iW(t))},KHt={[Jl]:e=>3*e,[Ps]:(e,t)=>IE(e,0,iW(t))};function l6e(e,t){return o6e(e,t||1,YHt,KHt,HHt)}const XHt={[Ao]:Uh,[Jl]:SI.every(3),[pa]:SI,[Ps]:kS,[Zl]:_m,[ca]:_m,[Qh]:_m,[qu]:J6,[Wu]:X6,[qc]:om,[df]:oE},QHt={[Ao]:Vh,[Jl]:TI.every(3),[pa]:TI,[Ps]:RS,[Zl]:B0,[ca]:B0,[Qh]:B0,[qu]:Z6,[Wu]:Q6,[qc]:om,[df]:oE};function nT(e){return XHt[e]}function rT(e){return QHt[e]}function u6e(e,t,n){return e?e.offset(t,n):void 0}function c6e(e,t,n){return u6e(nT(e),t,n)}function d6e(e,t,n){return u6e(rT(e),t,n)}function f6e(e,t,n,r){return e?e.range(t,n,r):void 0}function h6e(e,t,n,r){return f6e(nT(e),t,n,r)}function p6e(e,t,n,r){return f6e(rT(e),t,n,r)}const p2=1e3,m2=p2*60,g2=m2*60,Ej=g2*24,JHt=Ej*7,H0e=Ej*30,sW=Ej*365,m6e=[Ao,pa,Zl,qu,Wu,qc,df],y2=m6e.slice(0,-1),v2=y2.slice(0,-1),b2=v2.slice(0,-1),ZHt=b2.slice(0,-1),eqt=[Ao,Ps],q0e=[Ao,pa],g6e=[Ao],cC=[[y2,1,p2],[y2,5,5*p2],[y2,15,15*p2],[y2,30,30*p2],[v2,1,m2],[v2,5,5*m2],[v2,15,15*m2],[v2,30,30*m2],[b2,1,g2],[b2,3,3*g2],[b2,6,6*g2],[b2,12,12*g2],[ZHt,1,Ej],[eqt,1,JHt],[q0e,1,H0e],[q0e,3,3*H0e],[g6e,1,sW]];function y6e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(XR(t))/n;let i=SS(a=>a[2]).right(cC,r),s,o;return i===cC.length?(s=g6e,o=sy(t[0]/sW,t[1]/sW,n)):i?(i=cC[r/cC[i-1][2]<cC[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=m6e,o=Math.max(sy(t[0],t[1],n),1)),{units:s,step:o}}function _2(e){const t={};return n=>t[n]||(t[n]=e(n))}function tqt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=nqt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function nqt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function v6e(e){const t=_2(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=db(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return tqt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=db(o??",f");const a=sy(r,i,s),l=Math.max(Math.abs(r),Math.abs(i));let u;if(o.precision==null)switch(o.type){case"s":return isNaN(u=LIe(a,l))||(o.precision=u),n(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=FIe(a,l))||(o.precision=u-(o.type==="e"));break}case"f":case"%":{isNaN(u=$Ie(a))||(o.precision=u-(o.type==="%")*2);break}}return t(o)}}}let oW;b6e();function b6e(){return oW=v6e({format:CS,formatPrefix:NJ})}function _6e(e){return v6e(MIe(e))}function cL(e){return arguments.length?oW=_6e(e):oW}function W0e(e,t,n){n=n||{},pt(n)||Le(`Invalid time multi-format specifier: ${n}`);const r=t(qc),i=t(Wu),s=t(qu),o=t(Zl),a=t(Ps),l=t(pa),u=t(Jl),c=t(Ao),d=e(n[df]||".%L"),f=e(n[qc]||":%S"),h=e(n[Wu]||"%I:%M"),p=e(n[qu]||"%I %p"),m=e(n[Zl]||n[ca]||"%a %d"),g=e(n[Ps]||"%b %d"),y=e(n[pa]||"%B"),v=e(n[Jl]||"%B"),_=e(n[Ao]||"%Y");return w=>(r(w)<w?d:i(w)<w?f:s(w)<w?h:o(w)<w?p:l(w)<w?a(w)<w?m:g:c(w)<w?u(w)<w?y:v:_)(w)}function w6e(e){const t=_2(e.format),n=_2(e.utcFormat);return{timeFormat:r=>yt(r)?t(r):W0e(t,nT,r),utcFormat:r=>yt(r)?n(r):W0e(n,rT,r),timeParse:_2(e.parse),utcParse:_2(e.utcParse)}}let aW;x6e();function x6e(){return aW=w6e({format:WJ,parse:Xke,utcFormat:e4,utcParse:Qke})}function E6e(e){return w6e(qke(e))}function ak(e){return arguments.length?aW=E6e(e):aW}const lW=(e,t)=>xn({},e,t);function S6e(e,t){const n=e?_6e(e):cL(),r=t?E6e(t):ak();return lW(n,r)}function Ane(e,t){const n=arguments.length;return n&&n!==2&&Le("defaultLocale expects either zero or two arguments."),n?lW(cL(e),ak(t)):lW(cL(),ak())}function rqt(){return b6e(),x6e(),Ane()}const iqt=/^(data:|([A-Za-z]+:)?\/\/)/,sqt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,oqt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,G0e="file://";function aqt(e,t){return n=>({options:n||{},sanitize:uqt,load:lqt,fileAccess:!!t,file:cqt(t),http:fqt(e)})}async function lqt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function uqt(e,t){t=xn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=sqt.test(e.replace(oqt,""));(e==null||typeof e!="string"||!a)&&Le("Sanitize failure, invalid URI: "+st(e));const l=iqt.test(e);return(o=t.baseURL)&&!l&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(G0e))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(G0e.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function cqt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):dqt}async function dqt(){Le("No file system access.")}function fqt(e){return e?async function(t,n){const r=xn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?En(s[i])?s[i]():s.text():Le(s.status+""+s.statusText)}:hqt}async function hqt(){Le("No HTTP fetch method available.")}const pqt=e=>e!=null&&e===e,mqt=e=>e==="true"||e==="false"||e===!0||e===!1,gqt=e=>!Number.isNaN(Date.parse(e)),T6e=e=>!Number.isNaN(+e)&&!(e instanceof Date),yqt=e=>T6e(e)&&Number.isInteger(+e),uW={boolean:wne,integer:da,number:da,date:xne,string:Ene,unknown:_a},bO=[mqt,yqt,T6e,gqt],vqt=["boolean","integer","number","date"];function C6e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=bO.length,i=bO.map((s,o)=>o+1);for(let s=0,o=0,a,l;s<n;++s)for(l=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&pqt(l)&&!bO[a](l)&&(i[a]=0,++o,o===bO.length))return"string";return vqt[i.reduce((s,o)=>s===0?o:s,0)-1]}function A6e(e,t){return t.reduce((n,r)=>(n[r]=C6e(e,r),n),{})}function Y0e(e){const t=function(n,r){const i={delimiter:e};return Ine(n,r?xn(r,i):i)};return t.responseType="text",t}function Ine(e,t){return t.header&&(e=t.header.map(st).join(t.delimiter)+`
`+e),NIe(t.delimiter).parse(e+"")}Ine.responseType="text";function bqt(e){return typeof Buffer=="function"&&En(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function kne(e,t){const n=t&&t.property?Vc(t.property):_a;return pt(e)&&!bqt(e)?_qt(n(e),t):n(JSON.parse(e))}kne.responseType="json";function _qt(e,t){return!Be(e)&&qFe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const wqt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function I6e(e,t){let n,r,i,s;return e=kne(e,t),t&&t.feature?(n=LHt,i=t.feature):t&&t.mesh?(n=jHt,i=t.mesh,s=wqt[t.filter]):Le("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Le("Invalid TopoJSON object: "+i),r&&r.features||[r]}I6e.responseType="json";const YD={dsv:Ine,csv:Y0e(","),tsv:Y0e("	"),json:kne,topojson:I6e};function Rne(e,t){return arguments.length>1?(YD[e]=t,this):bt(YD,e)?YD[e]:null}function k6e(e){const t=Rne(e);return t&&t.responseType||"text"}function R6e(e,t,n,r){t=t||{};const i=Rne(t.type||"json");return i||Le("Unknown data format type: "+t.type),e=i(e,t),t.parse&&xqt(e,t.parse,n,r),bt(e,"columns")&&delete e.columns,e}function xqt(e,t,n,r){if(!e.length)return;const i=ak();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,l,u,c,d;t==="auto"&&(t=A6e(e,s)),s=Object.keys(t);const f=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!uW[p])throw Error("Illegal format pattern: "+h+":"+p);return uW[p]});for(l=0,c=e.length,d=s.length;l<c;++l)for(o=e[l],u=0;u<d;++u)a=s[u],o[a]=f[u](o[a])}const Sj=aqt(typeof fetch<"u"&&fetch,null);function Tj(e){const t=e||_a,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function KD(e,t){try{await t(e)}catch(n){e.error(n)}}const P6e=Symbol("vega_id");let Eqt=1;function Cj(e){return!!(e&&$t(e))}function $t(e){return e[P6e]}function N6e(e,t){return e[P6e]=t,e}function vr(e){const t=e===Object(e)?e:{data:e};return $t(t)?t:N6e(t,Eqt++)}function Pne(e){return Aj(e,vr({}))}function Aj(e,t){for(const n in e)t[n]=e[n];return t}function O6e(e,t){return N6e(t,$t(e))}function u_(e,t){return e?t?(n,r)=>e(n,r)||$t(t(n))-$t(t(r)):(n,r)=>e(n,r)||$t(n)-$t(r):null}function D6e(e){return e&&e.constructor===c_}function c_(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:c_,insert(a){const l=gt(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){const l=En(a)?r:t,u=gt(a),c=u.length;for(let d=0;d<c;++d)l.push(u[d]);return this},modify(a,l,u){const c={field:l,value:wa(u)};return En(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return En(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,l){const u={},c={};let d,f,h,p,m,g;for(d=0,f=l.length;d<f;++d)u[$t(l[d])]=1;for(d=0,f=t.length;d<f;++d)m=t[d],u[$t(m)]=-1;for(d=0,f=r.length;d<f;++d)p=r[d],l.forEach(v=>{p(v)&&(u[$t(v)]=-1)});for(d=0,f=e.length;d<f;++d)m=e[d],g=$t(m),u[g]?u[g]=1:a.add.push(vr(e[d]));for(d=0,f=l.length;d<f;++d)m=l[d],u[$t(m)]<0&&a.rem.push(m);function y(v,_,w){w?v[_]=w(v):a.encode=_,o||(c[$t(v)]=v)}for(d=0,f=n.length;d<f;++d)h=n[d],m=h.tuple,p=h.field,g=u[$t(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(d=0,f=i.length;d<f;++d)h=i[d],p=h.filter,l.forEach(v=>{p(v)&&u[$t(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?l.filter(v=>u[$t(v)]>0):l.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const XD="_:mod:_";function Ij(){Object.defineProperty(this,XD,{writable:!0,value:{}})}Ij.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[XD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Be(n)?1+n.length:-1),i},modified(e,t){const n=this[XD];if(arguments.length){if(Be(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[XD]={},this}};let Sqt=0;const Tqt="pulse",Cqt=new Ij,Aqt=1,Iqt=2;function Yr(e,t,n,r){this.id=++Sqt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function K0e(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Yr.prototype={targets(){return this._targets||(this._targets=Tj(KR))},set(e){return this.value!==e?(this.value=e,1):0},skip:K0e(Aqt),modified:K0e(Iqt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new Ij,i=this._argops=this._argops||[],s=[];let o,a,l,u;const c=(d,f,h)=>{h instanceof Yr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:d,index:f})):r.set(d,f,h)};for(o in e)if(a=e[o],o===Tqt)gt(a).forEach(d=>{d instanceof Yr?d!==this&&(d.targets().add(this),s.push(d)):Le("Pulse parameters must be operator instances.")}),this.source=a;else if(Be(a))for(r.set(o,-1,Array(l=a.length)),u=0;u<l;++u)c(o,u,a[u]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||Cqt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function kqt(e,t,n,r){let i=1,s;return e instanceof Yr?s=e:e&&e.prototype instanceof Yr?s=new e:En(e)?s=new Yr(null,e):(i=0,s=new Yr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function Rqt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let Pqt=0;function kj(e,t,n){this.id=++Pqt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Hg(e,t,n){return new kj(e,t,n)}kj.prototype={_filter:Hc,_apply:_a,targets(){return this._targets||(this._targets=Tj(KR))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Hg(e);return this.targets().add(t),t},apply(e){const t=Hg(null,e);return this.targets().add(t),t},merge(){const e=Hg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Hg();return this.targets().add(Hg(null,null,bne(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Hg(null,null,()=>n=!0)),t.targets().add(Hg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Hc,this._targets=null}};function Nqt(e,t,n,r){const i=this,s=Hg(n,r),o=function(u){u.dataflow=i;try{s.receive(u)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=gt(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,o);return s}function Oqt(e,t){const n=this.locale();return R6e(e,t,n.timeParse,n.utcParse)}function Dqt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function Mqt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:k6e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function $qt(e,t,n){const r=this,i=r._pending||Lqt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Hc).insert(s.data||[])),i.done(),s}function Lqt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Fqt={skip:!0};function jqt(e,t,n,r,i){return(e instanceof Yr?zqt:Bqt)(this,e,t,n,r,i),this}function Bqt(e,t,n,r,i,s){const o=xn({},s,Fqt);let a,l;En(n)||(n=wa(n)),r===void 0?a=u=>e.touch(n(u)):En(r)?(l=new Yr(null,r,i,!1),a=u=>{l.evaluate(u);const c=n(u),d=l.value;D6e(d)?e.pulse(c,d,s):e.update(c,d,o)}):a=u=>e.update(n(u),r,o),t.apply(a)}function zqt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Yr(null,Uqt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function Uqt(e,t){return t=En(t)?t:wa(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function Vqt(e){e.rank=++this._rank}function Hqt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Le("Cycle detected in dataflow graph.")}const dL={},eh=1,Jg=2,Hp=4,qqt=eh|Jg,X0e=eh|Hp,Z_=eh|Jg|Hp,Q0e=8,dC=16,J0e=32,Z0e=64;function Y0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Az(e,t){const n=[];return Qg(e,t,r=>n.push(r)),n}function eye(e,t){const n={};return e.visit(t,r=>{n[$t(r)]=1}),r=>n[$t(r)]?null:r}function _O(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Y0.prototype={StopPropagation:dL,ADD:eh,REM:Jg,MOD:Hp,ADD_REM:qqt,ADD_MOD:X0e,ALL:Z_,REFLOW:Q0e,SOURCE:dC,NO_SOURCE:J0e,NO_FIELDS:Z0e,fork(e){return new Y0(this.dataflow).init(this,e)},clone(){const e=this.fork(Z_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Z_|dC)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Y0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Z0e)&&(n.fields=e.fields),t&eh?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Jg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Hp?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&J0e?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Z_;return t&eh&&this.add.length||t&Jg&&this.rem.length||t&Hp&&this.mod.length},reflow(e){if(e)return this.fork(Z_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Hp,eye(this,eh))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Be(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Be(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&eh&&(n.addF=_O(n.addF,t)),e&Jg&&(n.remF=_O(n.remF,t)),e&Hp&&(n.modF=_O(n.modF,t)),e&dC&&(n.srcF=_O(n.srcF,t)),n},materialize(e){e=e||Z_;const t=this;return e&eh&&t.addF&&(t.add=Az(t.add,t.addF),t.addF=null),e&Jg&&t.remF&&(t.rem=Az(t.rem,t.remF),t.remF=null),e&Hp&&t.modF&&(t.mod=Az(t.mod,t.modF),t.modF=null),e&dC&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&dC)return Qg(n.source,n.srcF,r),n;e&eh&&Qg(n.add,n.addF,r),e&Jg&&Qg(n.rem,n.remF,r),e&Hp&&Qg(n.mod,n.modF,r);const i=n.source;if(e&Q0e&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Qg(i,eye(n,X0e),r):Qg(i,n.srcF,r))}return n}};function Nne(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const l in o.fields)a[l]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}lt(Nne,Y0,{fork(e){const t=new Y0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Be(e)?e.some(r=>n[r]):n[e]:0},filter(){Le("MultiPulse does not support filtering.")},materialize(){Le("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function Wqt(e,t,n){const r=this,i=[];if(r._pulse)return M6e(r);if(r._pending&&await r._pending,t&&await KD(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new Y0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=Tj(KR);let o=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=dL),l!==dL&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),u=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const c=r._postrun.sort((d,f)=>f.priority-d.priority);r._postrun=[];for(let d=0;d<c.length;++d)await KD(r,c[d].callback)}return n&&await KD(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(d=>{try{d(r)}catch(f){r.error(f)}})})),r}async function Gqt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function Yqt(e,t,n){return this._pulse?M6e(this):(this.evaluate(e,t,n),this)}function Kqt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function M6e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Xqt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Qqt(e,t){const n=e.source,r=this._clock;return n&&Be(n)?new Nne(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Jqt(this._pulse,n&&n.pulse)}function Jqt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==dL&&(e.source=t.source),e)}const One={skip:!1,force:!1};function Zqt(e,t){const n=t||One;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function eWt(e,t,n){const r=n||One;return(e.set(t)||r.force)&&this.touch(e,r),this}function tWt(e,t,n){this.touch(e,n||One);const r=new Y0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function nWt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),$6e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,rWt(t,0,e)):r=n,r}}}function $6e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function rWt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,$6e(e,r,t,n)}function Ix(){this.logger(pne()),this.logLevel(fne),this._clock=0,this._rank=0,this._locale=Ane();try{this._loader=Sj()}catch{}this._touched=Tj(KR),this._input={},this._pulse=null,this._heap=nWt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function fC(e){return function(){return this._log[e].apply(this,arguments)}}Ix.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:fC("error"),warn:fC("warn"),info:fC("info"),debug:fC("debug"),logLevel:fC("level"),cleanThreshold:1e4,add:kqt,connect:Rqt,rank:Vqt,rerank:Hqt,pulse:tWt,touch:Zqt,update:eWt,changeset:c_,ingest:Dqt,parse:Oqt,preload:$qt,request:Mqt,events:Nqt,on:jqt,evaluate:Wqt,run:Yqt,runAsync:Gqt,runAfter:Kqt,_enqueue:Xqt,_getPulse:Qqt};function ke(e,t){Yr.call(this,e,null,t)}lt(ke,Yr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const kE={};function L6e(e){const t=F6e(e);return t&&t.Definition||null}function F6e(e){return e=e&&e.toLowerCase(),bt(kE,e)?kE[e]:null}function*j6e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Dne(e,t,n){const r=Float64Array.from(j6e(e,n));return r.sort(vm),t.map(i=>MAe(r,i))}function Mne(e,t){return Dne(e,[.25,.5,.75],t)}function $ne(e,t){const n=e.length,r=Qvt(e,t),i=Mne(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function B6e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,l,u,c,d,f;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,d=0,f=e.steps.length;d<f&&e.steps[d]<c;++d);a=e.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>t;)a*=n;for(d=0,f=i.length;d<f;++d)c=a/i[d],c>=u&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Wc=Math.random;function iWt(e){Wc=e}function z6e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(j6e(e,r)),s=i.length,o=t;let a,l,u,c;for(u=0,c=Array(o);u<o;++u){for(a=0,l=0;l<s;++l)a+=i[~~(Wc()*s)];c[u]=a/s}return c.sort(vm),[$V(c,n/2),$V(c,1-n/2)]}function U6e(e,t,n,r){r=r||(f=>f);const i=e.length,s=new Float64Array(i);let o=0,a=1,l=r(e[0]),u=l,c=l+t,d;for(;a<i;++a){if(d=r(e[a]),d>=c){for(u=(l+u)/2;o<a;++o)s[o]=u;c=d+t,l=d}u=d}for(u=(l+u)/2;o<a;++o)s[o]=u;return n?sWt(s,t+t/4):s}function sWt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function oWt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function aWt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Wc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const V6e=Math.sqrt(2*Math.PI),lWt=Math.SQRT2;let hC=NaN;function Rj(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(hC===hC)n=hC,hC=NaN;else{do n=Wc()*2-1,r=Wc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,hC=r*s}return e+n*t}function Lne(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*V6e)}function Pj(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function Nj(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*lWt*uWt(2*e-1)}function uWt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Fne(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Rj(n,r),pdf:s=>Lne(s,n,r),cdf:s=>Pj(s,n,r),icdf:s=>Nj(s,n,r)};return i.mean(e).stdev(t)}function jne(e,t){const n=Fne();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=$ne(e)),i):t},sample(){return e[~~(Wc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Bne(e,t){return e=e||0,t=t??1,Math.exp(e+Rj()*t)}function zne(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*V6e*e)}function Une(e,t,n){return Pj(Math.log(e),t,n)}function Vne(e,t,n){return Math.exp(Nj(e,t,n))}function H6e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Bne(n,r),pdf:s=>zne(s,n,r),cdf:s=>Une(s,n,r),icdf:s=>Vne(s,n,r)};return i.mean(e).stdev(t)}function q6e(e,t){let n=0,r;function i(o){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=o[u]==null?1:+o[u];for(u=0;u<n;++u)a[u]/=l;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Wc();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(o<l){a=e[u];break}return a.sample()},pdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(o);return a},cdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Hne(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Wc()}function qne(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Wne(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Gne(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function W6e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Hne(n,r),pdf:s=>qne(s,n,r),cdf:s=>Wne(s,n,r),icdf:s=>Gne(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Yne(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function QR(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function Oj(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,l=0,u=0,c,d,f;for(f of e)s[a]=c=+t(f),o[a]=d=+n(f),++a,l+=(c-l)/a,u+=(d-u)/a;for(a=0;a<i;++a)s[a]-=l,o[a]-=u;return[s,o,l,u]}function JR(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function iT(e,t,n,r,i){let s=0,o=0;return JR(e,t,n,(a,l)=>{const u=l-i(a),c=l-r;s+=u*u,o+=c*c}),1-s/o}function Kne(e,t,n){let r=0,i=0,s=0,o=0,a=0;JR(e,t,n,(c,d)=>{++a,r+=(c-r)/a,i+=(d-i)/a,s+=(c*d-s)/a,o+=(c*c-o)/a});const l=QR(r,i,s,o),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:iT(e,t,n,i,u)}}function G6e(e,t,n){let r=0,i=0,s=0,o=0,a=0;JR(e,t,n,(c,d)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(d-i)/a,s+=(c*d-s)/a,o+=(c*c-o)/a});const l=QR(r,i,s,o),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:iT(e,t,n,i,u)}}function Y6e(e,t,n){const[r,i,s,o]=Oj(e,t,n);let a=0,l=0,u=0,c=0,d=0,f,h,p;JR(e,t,n,(v,_)=>{f=r[d++],h=Math.log(_),p=f*_,a+=(_*h-a)/d,l+=(p-l)/d,u+=(p*h-u)/d,c+=(f*p-c)/d});const[m,g]=QR(l/o,a/o,u/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:iT(e,t,n,o,y)}}function K6e(e,t,n){let r=0,i=0,s=0,o=0,a=0,l=0;JR(e,t,n,(d,f)=>{const h=Math.log(d),p=Math.log(f);++l,r+=(h-r)/l,i+=(p-i)/l,s+=(h*p-s)/l,o+=(h*h-o)/l,a+=(f-a)/l});const u=QR(r,i,s,o),c=d=>u[0]*Math.pow(d,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:iT(e,t,n,a,c)}}function Xne(e,t,n){const[r,i,s,o]=Oj(e,t,n),a=r.length;let l=0,u=0,c=0,d=0,f=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,l+=(g-l)/h,u+=(g*p-u)/h,c+=(g*g-c)/h,d+=(p*m-d)/h,f+=(g*m-f)/h;const y=c-l*l,v=l*y-u*u,_=(f*l-d*u)/v,w=(d*y-f*u)/v,x=-_*l,S=E=>(E=E-s,_*E*E+w*E+x+o);return{coef:[x-w*s+_*s*s+o,w-2*_*s,_],predict:S,rSquared:iT(e,t,n,o,S)}}function X6e(e,t,n,r){if(r===0)return Yne(e,t,n);if(r===1)return Kne(e,t,n);if(r===2)return Xne(e,t,n);const[i,s,o,a]=Oj(e,t,n),l=i.length,u=[],c=[],d=r+1;let f,h,p,m,g;for(f=0;f<d;++f){for(p=0,m=0;p<l;++p)m+=Math.pow(i[p],f)*s[p];for(u.push(m),g=new Float64Array(d),h=0;h<d;++h){for(p=0,m=0;p<l;++p)m+=Math.pow(i[p],f+h);g[h]=m}c.push(g)}c.push(u);const y=dWt(c),v=_=>{_-=o;let w=a+y[0]+y[1]*_+y[2]*_*_;for(f=3;f<d;++f)w+=y[f]*Math.pow(_,f);return w};return{coef:cWt(d,y,-o,a),predict:v,rSquared:iT(e,t,n,a,v)}}function cWt(e,t,n,r){const i=Array(e);let s,o,a,l;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],l=1,i[s]+=a,o=1;o<=s;++o)l*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*l;return i[0]+=r,i}function dWt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const tye=2,nye=1e-12;function Q6e(e,t,n,r){const[i,s,o,a]=Oj(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),d=new Float64Array(l),f=new Float64Array(l).fill(1);for(let h=-1;++h<=tye;){const p=[0,u-1];for(let g=0;g<l;++g){const y=i[g],v=p[0],_=p[1],w=y-i[v]>i[_]-y?v:_;let x=0,S=0,E=0,T=0,I=0;const k=1/Math.abs(i[w]-y||1);for(let R=v;R<=_;++R){const $=i[R],D=s[R],O=fWt(Math.abs(y-$)*k)*f[R],F=$*O;x+=O,S+=F,E+=D*O,T+=D*F,I+=$*F}const[P,L]=QR(S/x,E/x,T/x,I/x);c[g]=P+L*y,d[g]=Math.abs(s[g]-c[g]),hWt(i,g+1,p)}if(h===tye)break;const m=LAe(d);if(Math.abs(m)<nye)break;for(let g=0,y,v;g<l;++g)y=d[g]/(6*m),f[g]=y>=1?nye:(v=1-y*y)*v}return pWt(i,c,o,a)}function fWt(e){return(e=1-e*e*e)*e*e}function hWt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function pWt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,l=[],u;for(;o<i;++o)u=e[o]+n,l[0]===u?l[1]+=(t[o]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[o]],s.push(l));return l[1]+=r,s}const mWt=.5*Math.PI/180;function Dj(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,l=a/r,u=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)u.push(i(s+m/n*a));return u.push(i(o)),u}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let d=u[0],f=c[c.length-1];const h=1/a,p=gWt(d[1],c);for(;f;){const m=i((d[0]+f[0])/2);m[0]-d[0]>=l&&yWt(d,m,f,h,p)>mWt?c.push(m):(d=f,u.push(f),c.pop()),f=c[c.length-1]}return u}function gWt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function yWt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function vWt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function cW(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:vWt(e)}function J6e(e,t,n){return n||e+(t?"_"+t:"")}const Iz=()=>{},bWt={init:Iz,add:Iz,rem:Iz,idx:0},lk={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},ZR=Object.keys(lk).filter(e=>e!=="__count__");function _Wt(e,t){return(n,r)=>xn({name:e,aggregate_param:r,out:n||e},bWt,t)}[...ZR,"__count__"].forEach(e=>{lk[e]=_Wt(e,lk[e])});function Z6e(e,t,n){return lk[e](n,t)}function e4e(e,t){return e.idx-t.idx}function wWt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=lk[i]())})};return e.forEach(n),Object.values(t).sort(e4e)}function xWt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function EWt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function SWt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function TWt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function t4e(e,t){const n=t||_a,r=wWt(e),i=e.slice().sort(e4e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=xWt,s.prototype.add=EWt,s.prototype.rem=SWt,s.prototype.set=TWt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Qne(e){this._key=e?Vc(e):$t,this.reset()}const $o=Qne.prototype;$o.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};$o.add=function(e){this._add.push(e)};$o.rem=function(e){this._rem.push(e)};$o.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,l,u;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,l=0;a<r;++a)o[n(u=e[a])]?o[n(u)]=0:s[l++]=u;return this._rem=[],this._add=s};$o.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",bt(n,s)||(n[s]=1,++i);return i};$o.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=VFe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};$o.argmin=function(e){return this.extent(e)[0]||{}};$o.argmax=function(e){return this.extent(e)[1]||{}};$o.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};$o.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};$o.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Mne(this.values(),e),this._get=e),this._q};$o.q1=function(e){return this.quartile(e)[0]};$o.q2=function(e){return this.quartile(e)[1]};$o.q3=function(e){return this.quartile(e)[2]};$o.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=z6e(this.values(),1e3,.05,e),this._get=e),this._ci};$o.ci0=function(e){return this.ci(e)[0]};$o.ci1=function(e){return this.ci(e)[1]};function Ty(e){ke.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Ty.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:ZR},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};lt(Ty,ke,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let l,u,c,d;for(l in a)for(c=a[l].tuple,u=0;u<i;++u)r[u][d=c[n[u]]]=d}s(e._prev),s(t);function o(a,l,u){const c=n[u],d=r[u++];for(const f in d){const h=a?a+"|"+f:f;l[c]=d[f],u<i?o(h,l,u):t[h]||e.cell(h,l)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const _=gt(ha(v)),w=_.length;let x=0,S;for(;x<w;++x)r[S=_[x]]||(r[S]=1,t.push(S))}this._dims=gt(e.groupby),this._dnames=this._dims.map(v=>{const _=Gi(v);return i(v),n.push(_),_}),this.cellkey=e.key?e.key:cW(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=s.length,c={};let d,f,h,p,m,g,y;for(u!==o.length&&Le("Unmatched number of fields and aggregate ops."),y=0;y<u;++y){if(d=s[y],f=o[y],h=a[y]||null,d==null&&f!=="count"&&Le("Null aggregate field specified."),m=Gi(d),g=J6e(f,m,l[y]),n.push(g),f==="count"){this._counts.push(g);continue}p=c[m],p||(i(d),p=c[m]=[],p.field=d,this._measures.push(p)),f!=="count"&&(this._countOnly=!1),p.push(Z6e(f,h,g))}return this._measures=this._measures.map(v=>t4e(v,v.field)),Object.create(null)},cellkey:cW(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Qne),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?O6e(t.tuple,s):vr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let l,u,c,d;if(r)for(u in r)l=r[u],(!i||l.num)&&o.push(l.tuple);for(c=0,d=this._alen;c<d;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,d=this._mlen;c<d;++c)l=n[c],(l.num===0&&i?o:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const CWt=1e-14;function Jne(e){ke.call(this,null,e)}Jne.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};lt(Jne,ke,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],l=o[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(ha(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const d=r(c);c[a]=d,c[l]=d==null?null:i+s*(1+(d-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=B6e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const l=function(u){let c=da(t(u));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(CWt+(c-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=ou(l,ha(t),e.name||"bin_"+Gi(t))}});function n4e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:l=>s.push(l),remove:l=>o[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),u&&l&&i.sort(l),s.length&&(i=l?KFe(l,i,s.sort(l)):i.concat(s),s=[]),i)}}function Zne(e){ke.call(this,[],e)}Zne.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};lt(Zne,ke,{transform(e,t){const n=t.fork(t.ALL),r=n4e($t,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(u_(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function r4e(e){Yr.call(this,null,AWt,e)}lt(r4e,Yr);function AWt(e){return this.value&&!e.modified()?this.value:vne(e.fields,e.orders)}function ere(e){ke.call(this,null,e)}ere.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function IWt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}lt(ere,ke,{transform(e,t){const n=d=>f=>{for(var h=IWt(a(f),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||d(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,l=e.as||["text","count"],u=n(d=>i[d]=1+(i[d]||0)),c=n(d=>i[d]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=vr({}),l[i]=a,l[s]=u,o.add.push(l)):u===0?(l&&o.rem.push(l),n[a]=null,r[a]=null):l[s]!==u&&(l[s]=u,o.mod.push(l));return o.modifies(t)}});function tre(e){ke.call(this,null,e)}tre.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};lt(tre,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=kWt(a,i,s,e.filter||Hc)):n.mod=a,n.source=this.value,n.modifies(r)}});function kWt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,l,u;a<o;++a)for(s[t]=u=e[a],l=0;l<o;++l)s[n]=e[l],r(s)&&(i.push(vr(s)),s={},s[t]=u);return i}const rye={kde:jne,mixture:q6e,normal:Fne,lognormal:H6e,uniform:W6e},RWt="distributions",iye="function",PWt="field";function i4e(e,t){const n=e[iye];bt(rye,n)||Le("Unknown distribution function: "+n);const r=rye[n]();for(const i in e)i===PWt?r.data((e.from||t()).map(e[i])):i===RWt?r[i](e[i].map(s=>i4e(s,t))):typeof r[i]===iye&&r[i](e[i]);return r}function nre(e){ke.call(this,null,e)}const s4e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],NWt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:s4e},{name:"weights",type:"number",array:!0}]};nre.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:s4e.concat(NWt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(nre,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=i4e(e.distribution,OWt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Le("Invalid density method: "+o),!e.extent&&!r.data&&Le("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],l=e.extent||Xh(r.data()),u=Dj(o,l,i,s).map(c=>{const d={};return d[a[0]]=c[0],d[a[1]]=c[1],vr(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function OWt(e){return()=>e.materialize(e.SOURCE).source}function o4e(e,t){return e?e.map((n,r)=>t[r]||Gi(n)):null}function rre(e,t,n){const r=[],i=d=>d(l);let s,o,a,l,u,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)l=e[o],u=t.map(i),c=s[u],c||(s[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}const a4e="bin";function ire(e){ke.call(this,null,e)}ire.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:a4e}]};const DWt=(e,t)=>XR(Xh(e,t))/30;lt(ire,ke,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=rre(t.source,e.groupby,_a),i=e.smooth||!1,s=e.field,o=e.step||DWt(n,s),a=u_((p,m)=>s(p)-s(m)),l=e.as||a4e,u=r.length;let c=1/0,d=-1/0,f=0,h;for(;f<u;++f){const p=r[f].sort(a);h=-1;for(const m of U6e(p,o,i,s))m<c&&(c=m),m>d&&(d=m),p[++h][l]=m}return this.value={start:c,stop:d,step:o},t.reflow(!0).modifies(l)}});function l4e(e){Yr.call(this,null,MWt,e),this.modified(!0)}lt(l4e,Yr);function MWt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ou(n=>t(n,e),ha(t),Gi(t))}function sre(e){ke.call(this,[void 0,void 0],e)}sre.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};lt(sre,ke,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=da(r(a));l!=null&&(l<s&&(s=l),l>o&&(o=l))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Gi(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function ore(e,t){Yr.call(this,e),this.parent=t,this.count=0}lt(ore,Yr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Mj(e){ke.call(this,{},e),this._keys=tT();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}lt(Mj,ke,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=bt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new ore(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=$t(l),c=s.get(u);c!==void 0&&(s.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);s.set($t(l),u),a(u).add(l)}),o||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=$t(l),c=s.get(u),d=r(l);c===d?a(d).mod(l):(s.set(u,d),a(c).rem(l),a(d).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(s.get($t(l))).mod(l)}),o&&t.visit(t.REFLOW,l=>{const u=$t(l),c=s.get(u),d=r(l);c!==d&&(s.set(u,d),a(c).rem(l),a(d).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function u4e(e){Yr.call(this,null,$Wt,e)}lt(u4e,Yr);function $Wt(e){return this.value&&!e.modified()?this.value:Be(e.name)?gt(e.name).map(t=>Vc(t)):Vc(e.name,e.as)}function are(e){ke.call(this,tT(),e)}are.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};lt(are,ke,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,d=>{const f=$t(d);r.has(f)?r.delete(f):o.push(d)}),t.visit(t.ADD,d=>{l(d,e)?s.push(d):r.set($t(d),1)});function c(d){const f=$t(d),h=l(d,e),p=r.get(f);h&&p?(r.delete(f),s.push(d)):!h&&!p?(r.set(f,1),o.push(d)):u&&h&&!p&&a.push(d)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function lre(e){ke.call(this,[],e)}lre.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};lt(lre,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=o4e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(p=>p(a)),u=l.reduce((p,m)=>Math.max(p,m.length),0);let c=0,d,f,h;for(;c<u;++c){for(f=Pne(a),d=0;d<o;++d)f[i[d]]=(h=l[d][c])==null?null:h;s&&(f[s]=c),n.add.push(f)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function ure(e){ke.call(this,[],e)}ure.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};lt(ure,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Gi),s=e.as||["key","value"],o=s[0],a=s[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,d;c<l;++c)d=Pne(u),d[o]=i[c],d[a]=r[c](u),n.add.push(d)}),this.value=n.source=n.add,n.modifies(s)}});function cre(e){ke.call(this,null,e)}cre.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};lt(cre,ke,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function c4e(e){ke.call(this,[],e)}lt(c4e,ke,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,l;if(s>0){for(o=[];--s>=0;)o.push(l=vr(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const wO={value:"value",median:LAe,mean:$Ae,min:MV,max:Pc},LWt=[];function dre(e){ke.call(this,[],e)}dre.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function FWt(e){var t=e.method||wO.value,n;if(wO[t]==null)Le("Unrecognized imputation method: "+t);else return t===wO.value?(n=e.value!==void 0?e.value:0,()=>n):wO[t]}function jWt(e){const t=e.field;return n=>n?t(n):NaN}lt(dre,ke,{transform(e,t){var n=t.fork(t.ALL),r=FWt(e),i=jWt(e),s=Gi(e.field),o=Gi(e.key),a=(e.groupby||[]).map(Gi),l=BWt(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,d=l.domain.length,f,h,p,m,g,y,v,_,w,x;for(g=0,_=l.length;g<_;++g)for(f=l[g],p=f.values,h=NaN,v=0;v<d;++v)if(f[v]==null){for(m=l.domain[v],x={_impute:!0},y=0,w=p.length;y<w;++y)x[a[y]]=p[y];x[o]=m,x[s]=Number.isNaN(h)?h=r(f,i):h,u.push(vr(x))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function BWt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},l={},u,c,d,f,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),f=0,m=e.length;f<m;++f)g=e[f],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(u=t?t.map(i):LWt)+"",(d=l[c])||(d=l[c]=[],s.push(d),d.values=u),d[h-1]=g;return s.domain=o,s}function fre(e){Ty.call(this,e)}fre.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:ZR},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};lt(fre,Ty,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{xn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function hre(e){ke.call(this,null,e)}hre.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(hre,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=rre(r,e.groupby,e.field),s=(e.groupby||[]).map(Gi),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,d=e.steps||e.minsteps||25,f=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Le("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Xh(r,e.field)),d=f=e.steps||f),i.forEach(h=>{const p=jne(h,o)[a],m=e.counts?h.length:1,g=c||Xh(h);Dj(p,g,d,f).forEach(y=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=h.dims[_];v[l[0]]=y[0],v[l[1]]=y[1]*m,u.push(vr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function d4e(e){Yr.call(this,null,zWt,e)}lt(d4e,Yr);function zWt(e){return this.value&&!e.modified()?this.value:_ne(e.fields,e.flat)}function f4e(e){ke.call(this,[],e),this._pending=null}lt(f4e,ke,{transform(e,t){const n=t.dataflow;return this._pending?kz(this,t,this._pending):UWt(e)?t.StopPropagation:e.values?kz(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=gt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>kz(this,t,gt(r.data)))}});function UWt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function kz(e,t,n){n.forEach(vr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function pre(e){ke.call(this,{},e)}pre.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};lt(pre,ke,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let l=o?t.SOURCE:t.ADD,u=t,c=e.as,d,f,h;return i?(f=i.length,a>1&&!c&&Le('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*f&&Le('The "as" parameter has too few output field names.'),c=c||i.map(Gi),d=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<f;++y,++g)p[c[g]]=s;else for(y=0;y<f;++y,++g)p[c[g]]=i[y](v)}):(c||Le("Missing output field names."),d=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,d),u.modifies(c)}});function h4e(e){Yr.call(this,null,VWt,e)}lt(h4e,Yr);function VWt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function p4e(e){Yr.call(this,null,HWt,e)}lt(p4e,Yr);function HWt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function m4e(e){ke.call(this,null,e)}lt(m4e,ke,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function mre(e){Ty.call(this,e)}mre.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:ZR,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};lt(mre,Ty,{_transform:Ty.prototype.transform,transform(e,t){return this._transform(qWt(e,t),t)}});function qWt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=ha(n).concat(ha(r)),o=GWt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>WWt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function WWt(e,t,n,r){return ou(i=>t(i)===e?n(i):NaN,r,e+"")}function GWt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(xj),t?i.slice(0,t):i}function g4e(e){Mj.call(this,e)}lt(g4e,Mj,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow($t(s),n,t,s);return(e.modified("field")||r&&t.modified(ha(r)))&&Le("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(vr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function gre(e){ke.call(this,null,e)}gre.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};lt(gre,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=o4e(e.fields,e.as||[]),s=r?(a,l)=>YWt(a,l,r,i):Aj;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const l=$t(a);n.rem.push(o[l]),o[l]=null}),t.visit(t.ADD,a=>{const l=s(a,vr({}));o[$t(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[$t(a)]))}),n}});function YWt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function y4e(e){ke.call(this,null,e)}lt(y4e,ke,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function yre(e){ke.call(this,null,e)}yre.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const KWt=1e-14;lt(yre,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=rre(i,e.groupby,e.field),o=(e.groupby||[]).map(Gi),a=[],l=e.step||.01,u=e.probs||Ol(l/2,1-KWt,l),c=u.length;return s.forEach(d=>{const f=Dne(d,u);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=d.dims[m];p[r[0]]=u[h],p[r[1]]=f[h],a.push(vr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function v4e(e){ke.call(this,null,e)}lt(v4e,ke,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=$t(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=Pne(i);r[$t(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[$t(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function vre(e){ke.call(this,[],e),this.count=0}vre.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};lt(vre,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,d)=>(c[$t(d)]=1,c),{});let o=this.value,a=this.count,l=0;function u(c){let d,f;o.length<i?o.push(c):(f=~~((a+1)*Wc()),f<o.length&&f>=l&&(d=o[f],s[$t(d)]&&n.rem.push(d),o[f]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const d=$t(c);s[d]&&(s[d]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[$t(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(l=a=o.length,t.visit(t.SOURCE,c=>{s[$t(c)]||u(c)}),l=-1),r&&o.length>i){const c=o.length-i;for(let d=0;d<c;++d)s[$t(o[d])]=-1,n.rem.push(o[d]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[$t(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=o.filter(c=>!s[$t(c)])),this.count=a,this.value=n.source=o,n}});function bre(e){ke.call(this,null,e)}bre.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};lt(bre,ke,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ol(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,vr(s)}),n.add=t.add.concat(this.value),n}});function b4e(e){ke.call(this,null,e),this.modified(!0)}lt(b4e,ke,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function _re(e){ke.call(this,null,e)}const _4e=["unit0","unit1"];_re.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Sne,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:_4e}]};lt(_re,ke,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?rT:nT)(s.unit).offset,a=e.as||_4e,l=a[0],u=a[1],c=s.step;let d=s.start||1/0,f=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ha(n)))&&(t=t.reflow(!0),h=t.SOURCE,d=1/0,f=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[l]=null,r&&(p[u]=null)):(p[l]=g=y=s(m),r&&(p[u]=y=o(g,c)),g<d&&(d=g),y>f&&(f=y))}),s.start=d,s.stop=f,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:y6e({extent:e.extent||Xh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=Tne(r),o=this.value||{},a=(n?l6e:a6e)(s,i);return a.unit=Xn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function w4e(e){ke.call(this,tT(),e)}lt(w4e,ke,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function x4e(e){ke.call(this,null,e)}lt(x4e,ke,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(u_(e.sort)):t.source).map(e.field))}});function XWt(e,t,n,r){const i=uk[e](t,n);return{init:i.init||d0,update:function(s,o){o[r]=i.next(s)}}}const uk={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=uk.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Le("ntile num must be greater than zero.");const n=uk.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Le("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=QWt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function QWt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const JWt=Object.keys(uk);function E4e(e){const t=gt(e.ops),n=gt(e.fields),r=gt(e.params),i=gt(e.aggregate_params),s=gt(e.as),o=this.outputs=[],a=this.windows=[],l={},u={},c=[],d=[];let f=!0;function h(p){gt(ha(p)).forEach(m=>l[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,_=Gi(g),w=J6e(p,_,s[m]);if(h(g),o.push(w),bt(uk,p))a.push(XWt(p,g,y,w));else{if(g==null&&p!=="count"&&Le("Null aggregate field specified."),p==="count"){c.push(w);return}f=!1;let x=u[_];x||(x=u[_]=[],x.field=g,d.push(x)),x.push(Z6e(p,v,w))}}),(c.length||d.length)&&(this.cell=ZWt(d,c,f)),this.inputs=Object.keys(l)}const S4e=E4e.prototype;S4e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};S4e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function ZWt(e,t,n){e=e.map(l=>t4e(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Qne;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)s[u].add(s[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)s[u].rem(s[u].get(l),l)}},r.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=r.num;if(!n)for(u=0,c=s.length;u<c;++u)s[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)s[l].init()},r}function wre(e){ke.call(this,{},e),this._mlen=0,this._mods=[]}wre.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:JWt.concat(ZR)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};lt(wre,ke,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=u_(e.sort),i=cW(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new E4e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)eGt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=n4e($t),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function eGt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),l=a.length,u=s?SS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||wa(-1)};t.init();for(let d=0;d<l;++d)tGt(c,o,d,l),s&&nGt(c,u),t.update(c,a[d])}function tGt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function nGt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const rGt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Ty,bin:Jne,collect:Zne,compare:r4e,countpattern:ere,cross:tre,density:nre,dotbin:ire,expression:l4e,extent:sre,facet:Mj,field:u4e,filter:are,flatten:lre,fold:ure,formula:cre,generate:c4e,impute:dre,joinaggregate:fre,kde:hre,key:d4e,load:f4e,lookup:pre,multiextent:h4e,multivalues:p4e,params:m4e,pivot:mre,prefacet:g4e,project:gre,proxy:y4e,quantile:yre,relay:v4e,sample:vre,sequence:bre,sieve:b4e,subflow:ore,timeunit:_re,tupleindex:w4e,values:x4e,window:wre},Symbol.toStringTag,{value:"Module"}));function K0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const iGt=()=>typeof Image<"u"?Image:null;function xre(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const sGt="identity",RE="linear",eg="log",eP="pow",tP="sqrt",$j="symlog",Sb="time",Tb="utc",Lh="sequential",sT="diverging",PE="quantile",Lj="quantize",Fj="threshold",Ere="ordinal",dW="point",T4e="band",Sre="bin-ordinal",zs="continuous",nP="discrete",rP="discretizing",rd="interpolating",Tre="temporal";function oGt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function aGt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),o=l);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Cre(){const e=IS().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,l=0,u=.5;delete e.unknown;function c(){const d=t().length,f=r[1]<r[0],h=r[1-f],p=xre(d,a,l);let m=r[f-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(d-a))*u,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Ol(d).map(y=>m+i*y);return n(f?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),c()):t()},e.range=function(d){return arguments.length?(r=[+d[0],+d[1]],c()):r.slice()},e.rangeRound=function(d){return r=[+d[0],+d[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(d){return arguments.length?(o=!!d,c()):o},e.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),a=l,c()):a},e.paddingInner=function(d){return arguments.length?(a=Math.max(0,Math.min(1,d)),c()):a},e.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),c()):l},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),c()):u},e.invertRange=function(d){if(d[0]==null||d[1]==null)return;const f=r[1]<r[0],h=f?n().reverse():n(),p=h.length-1;let m=+d[0],g=+d[1],y,v,_;if(!(m!==m||g!==g)&&(g<m&&(_=m,m=g,g=_),!(g<h[0]||m>r[1-f])))return y=Math.max(0,iy(h,m)-1),v=m===g?y:iy(h,g)-1,m-h[y]>s+1e-10&&++y,f&&(_=y,y=p-v,v=p-_),y>v?void 0:t().slice(y,v+1)},e.invert=function(d){const f=e.invertRange([d,d]);return f&&f[0]},e.copy=function(){return Cre().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(l).align(u)},c()}function C4e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return C4e(t())},e}function lGt(){return C4e(Cre().paddingInner(1))}var uGt=Array.prototype.map;function cGt(e){return uGt.call(e,da)}const dGt=Array.prototype.slice;function A4e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(iy(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=cGt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=dGt.call(r),n):t.slice()},n.tickFormat=function(r,i){return Mke(e[0],Xn(e),r??10,i)},n.copy=function(){return A4e().domain(n.domain()).range(n.range())},n}const fL=new Map,I4e=Symbol("vega_scale");function k4e(e){return e[I4e]=!0,e}function fGt(e){return e&&e[I4e]===!0}function hGt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?oGt(s):s.invertExtent?aGt(s):void 0),s.type=e,k4e(s)};return r.metadata=cf(gt(n)),r}function pr(e,t,n){return arguments.length>1?(fL.set(e,hGt(e,t,n)),this):R4e(e)?fL.get(e):void 0}pr(sGt,$ke);pr(RE,Ba,zs);pr(eg,Fke,[zs,eg]);pr(eP,HJ,zs);pr(tP,DTt,zs);pr($j,jke,zs);pr(Sb,Jke,[zs,Tre]);pr(Tb,KCt,[zs,Tre]);pr(Lh,YJ,[zs,rd]);pr(`${Lh}-${RE}`,YJ,[zs,rd]);pr(`${Lh}-${eg}`,Zke,[zs,rd,eg]);pr(`${Lh}-${eP}`,KJ,[zs,rd]);pr(`${Lh}-${tP}`,XCt,[zs,rd]);pr(`${Lh}-${$j}`,eRe,[zs,rd]);pr(`${sT}-${RE}`,tRe,[zs,rd]);pr(`${sT}-${eg}`,nRe,[zs,rd,eg]);pr(`${sT}-${eP}`,XJ,[zs,rd]);pr(`${sT}-${tP}`,QCt,[zs,rd]);pr(`${sT}-${$j}`,rRe,[zs,rd]);pr(PE,Bke,[rP,PE]);pr(Lj,zke,rP);pr(Fj,Uke,rP);pr(Sre,A4e,[nP,rP]);pr(Ere,IS,nP);pr(T4e,Cre,nP);pr(dW,lGt,nP);function R4e(e){return fL.has(e)}function d_(e,t){const n=fL.get(e);return n&&n.metadata[t]}function Are(e){return d_(e,zs)}function NE(e){return d_(e,nP)}function fW(e){return d_(e,rP)}function P4e(e){return d_(e,eg)}function pGt(e){return d_(e,Tre)}function N4e(e){return d_(e,rd)}function O4e(e){return d_(e,PE)}const mGt=["clamp","base","constant","exponent"];function D4e(e,t){const n=t[0],r=Xn(t)-n;return function(i){return e(n+i*r)}}function jj(e,t,n){return xJ(Ire(t||"rgb",n),e)}function M4e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function $4e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?wa(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=pr(s)().domain([t,n]).range([0,1]),mGt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function Ire(e,t){const n=A_t[gGt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function gGt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const yGt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},vGt={accent:ZCt,category10:JCt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:e2t,observable10:t2t,paired:n2t,pastel1:r2t,pastel2:i2t,set1:s2t,set2:o2t,set3:a2t,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function L4e(e){if(Be(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function F4e(e,t){for(const n in e)kre(n,t(e[n]))}const sye={};F4e(vGt,L4e);F4e(yGt,e=>jj(L4e(e)));function kre(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(sye[e]=t,this):sye[e]}const QD="symbol",bGt="discrete",_Gt="gradient",wGt=e=>Be(e)?e.map(t=>String(t)):String(e),xGt=(e,t)=>e[1]-t[1],EGt=(e,t)=>t[1]-e[1];function Rre(e,t,n){let r;return hr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(XR(e.domain())/n||1)+1))),pt(t)&&(r=t.step,t=t.interval),yt(t)&&(t=e.type===Sb?nT(t):e.type==Tb?rT(t):Le("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function j4e(e,t,n){let r=e.range(),i=r[0],s=Xn(r),o=xGt;if(i>s&&(r=s,s=i,i=r,o=EGt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Xn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function Pre(e,t){return e.bins?j4e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function B4e(e,t,n,r,i,s){const o=t.type;let a=wGt;if(o===Sb||i===Sb)a=e.timeFormat(r);else if(o===Tb||i===Tb)a=e.utcFormat(r);else if(P4e(o)){const l=e.formatFloat(r);if(s||t.bins)a=l;else{const u=z4e(t,n,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function z4e(e,t,n){const r=Pre(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/s));return u*i<i-.5&&(u*=i),u<=o};return n?r.filter(a):a}const hW={[PE]:"quantiles",[Lj]:"thresholds",[Fj]:"domain"},U4e={[PE]:"quantiles",[Lj]:"domain"};function V4e(e,t){return e.bins?CGt(e.bins):e.type===eg?z4e(e,t,!0):hW[e.type]?TGt(e[hW[e.type]]()):Pre(e,t)}function SGt(e,t,n){const r=t[U4e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function TGt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function CGt(e){const t=e.slice(0,-1);return t.max=Xn(e),t}const AGt=e=>hW[e.type]||e.bins;function H4e(e,t,n,r,i,s,o){const a=U4e[t.type]&&s!==Sb&&s!==Tb?SGt(e,t,i):B4e(e,t,n,i,s,o);return r===QD&&AGt(t)?IGt(a):r===bGt?kGt(a):RGt(a)}const IGt=e=>(t,n,r)=>{const i=oye(r[n+1],oye(r.max,1/0)),s=aye(t,e),o=aye(i,e);return s&&o?s+" – "+o:o?"< "+o:"≥ "+s},oye=(e,t)=>e??t,kGt=e=>(t,n)=>n?e(t):null,RGt=e=>t=>e(t),aye=(e,t)=>Number.isFinite(e)?t(e):null;function PGt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Xn(t),s=i-r;if(e.type===Fj){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function NGt(e,t,n,r){const i=r||t.type;return yt(n)&&pGt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Sb?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Tb?e.utcFormat("%A, %d %B %Y, %X UTC"):H4e(e,t,5,null,n,r,!0)}function q4e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=NGt(e,t,n.format,n.formatType);if(fW(t.type)){const s=V4e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(NE(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Xn(s))}`}}let W4e=0;function OGt(){W4e=0}const hL="p_";function Nre(e){return e&&e.gradient}function G4e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?hL:"";return i||(i=e.id="gradient_"+W4e++,r==="radial"?(e.x1=Uf(e.x1,.5),e.y1=Uf(e.y1,.5),e.r1=Uf(e.r1,0),e.x2=Uf(e.x2,.5),e.y2=Uf(e.y2,.5),e.r2=Uf(e.r2,.5),s=hL):(e.x1=Uf(e.x1,0),e.y1=Uf(e.y1,0),e.x2=Uf(e.x2,1),e.y2=Uf(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Uf(e,t){return e??t}function Y4e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const lye={basis:{curve:wH},"basis-closed":{curve:b2t},"basis-open":{curve:_2t},bundle:{curve:w2t,tension:"beta",value:.85},cardinal:{curve:x2t,tension:"tension",value:0},"cardinal-open":{curve:S2t,tension:"tension",value:0},"cardinal-closed":{curve:E2t,tension:"tension",value:0},"catmull-rom":{curve:T2t,tension:"alpha",value:.5},"catmull-rom-closed":{curve:C2t,tension:"alpha",value:.5},"catmull-rom-open":{curve:A2t,tension:"alpha",value:.5},linear:{curve:QJ},"linear-closed":{curve:I2t},monotone:{horizontal:R2t,vertical:k2t},natural:{curve:P2t},step:{curve:N2t},"step-after":{curve:D2t},"step-before":{curve:O2t}};function Ore(e,t,n){var r=bt(lye,e)&&lye[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const DGt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},MGt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,$Gt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,LGt=/^((\s+,?\s*)|(,\s*))/,FGt=/^[01]/;function OE(e){const t=[];return(e.match(MGt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=DGt[s],a=jGt(s,o,r.slice(1).trim()),l=a.length;if(l<o||l&&l%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),l!==o){s==="m"&&(i=i==="M"?"L":"l");for(let u=o;u<l;u+=o)t.push([i,...a.slice(u,u+o)])}}),t}function jGt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?FGt:$Gt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(LGt);l!==null&&(i+=l[0].length)}return r}const Cy=Math.PI/180,BGt=1e-14,y1=Math.PI/2,mh=Math.PI*2,ew=Math.sqrt(3)/2;var Rz={},Pz={},K4e=[].join;function zGt(e,t,n,r,i,s,o,a,l){const u=K4e.call(arguments);if(Rz[u])return Rz[u];const c=o*Cy,d=Math.sin(c),f=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=f*(a-e)*.5+d*(l-t)*.5,p=f*(l-t)*.5-d*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=f/n,y=d/n,v=-d/r,_=f/r,w=g*a+y*l,x=v*a+_*l,S=g*e+y*t,E=v*e+_*t;let I=1/((S-w)*(S-w)+(E-x)*(E-x))-.25;I<0&&(I=0);let k=Math.sqrt(I);s==i&&(k=-k);const P=.5*(w+S)-k*(E-x),L=.5*(x+E)+k*(S-w),R=Math.atan2(x-L,w-P);let D=Math.atan2(E-L,S-P)-R;D<0&&s===1?D+=mh:D>0&&s===0&&(D-=mh);const O=Math.ceil(Math.abs(D/(y1+.001))),F=[];for(let U=0;U<O;++U){const V=R+U*D/O,M=R+(U+1)*D/O;F[U]=[P,L,V,M,n,r,d,f]}return Rz[u]=F}function UGt(e){const t=K4e.call(e);if(Pz[t])return Pz[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7];const c=u*o,d=-l*a,f=l*o,h=u*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),_=Math.sin(v*.5),w=8/3*_*_/Math.sin(v),x=n+p-w*m,S=r+m+w*p,E=n+g,T=r+y,I=E+w*y,k=T-w*g;return Pz[t]=[c*x+d*S,f*x+h*S,c*I+d*k,f*I+h*k,c*E+d*T,f*E+h*T]}const ic=["l",0,0,0,0,0,0,0];function VGt(e,t,n){const r=ic[0]=e[0];if(r==="a"||r==="A")ic[1]=t*e[1],ic[2]=n*e[2],ic[3]=e[3],ic[4]=e[4],ic[5]=e[5],ic[6]=t*e[6],ic[7]=n*e[7];else if(r==="h"||r==="H")ic[1]=t*e[1];else if(r==="v"||r==="V")ic[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)ic[i]=(i%2==1?t:n)*e[i];return ic}function ck(e,t,n,r,i,s){var o,a=null,l=0,u=0,c=0,d=0,f,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,_=t.length;v<_;++v){switch(o=t[v],(i!==1||s!==1)&&(o=VGt(o,i,s)),o[0]){case"l":l+=o[1],u+=o[2],e.lineTo(l+n,u+r);break;case"L":l=o[1],u=o[2],e.lineTo(l+n,u+r);break;case"h":l+=o[1],e.lineTo(l+n,u+r);break;case"H":l=o[1],e.lineTo(l+n,u+r);break;case"v":u+=o[1],e.lineTo(l+n,u+r);break;case"V":u=o[1],e.lineTo(l+n,u+r);break;case"m":l+=o[1],u+=o[2],g=l,y=u,e.moveTo(l+n,u+r);break;case"M":l=o[1],u=o[2],g=l,y=u,e.moveTo(l+n,u+r);break;case"c":f=l+o[5],h=u+o[6],c=l+o[3],d=u+o[4],e.bezierCurveTo(l+o[1]+n,u+o[2]+r,c+n,d+r,f+n,h+r),l=f,u=h;break;case"C":l=o[5],u=o[6],c=o[3],d=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,d+r,l+n,u+r);break;case"s":f=l+o[3],h=u+o[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+r,l+o[1]+n,u+o[2]+r,f+n,h+r),c=l+o[1],d=u+o[2],l=f,u=h;break;case"S":f=o[3],h=o[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+r,o[1]+n,o[2]+r,f+n,h+r),l=f,u=h,c=o[1],d=o[2];break;case"q":f=l+o[3],h=u+o[4],c=l+o[1],d=u+o[2],e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h;break;case"Q":f=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,f+n,h+r),l=f,u=h,c=o[1],d=o[2];break;case"t":f=l+o[1],h=u+o[2],a[0].match(/[QqTt]/)===null?(c=l,d=u):a[0]==="t"?(c=2*l-p,d=2*u-m):a[0]==="q"&&(c=2*l-c,d=2*u-d),p=c,m=d,e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h,c=l+o[1],d=u+o[2];break;case"T":f=o[1],h=o[2],c=2*l-c,d=2*u-d,e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h;break;case"a":uye(e,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+l+n,o[7]+u+r]),l+=o[6],u+=o[7];break;case"A":uye(e,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),l=o[6],u=o[7];break;case"z":case"Z":l=g,u=y,e.closePath();break}a=o}}function uye(e,t,n,r){const i=zGt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=UGt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const cye=.5773502691896257,dye={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,mh)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=ew*n,i=r-n*cye,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=ew*n,i=r-n*cye;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ew*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ew*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ew*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ew*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function X4e(e){return bt(dye,e)?dye[e]:HGt(e)}var Nz={};function HGt(e){if(!bt(Nz,e)){const t=OE(e);Nz[e]={draw:function(n,r){ck(n,t,0,0,Math.sqrt(r)/2)}}}return Nz[e]}const Lg=.448084975506;function qGt(e){return e.x}function WGt(e){return e.y}function GGt(e){return e.width}function YGt(e){return e.height}function Mp(e){return typeof e=="function"?e:()=>+e}function xO(e,t,n){return Math.max(t,Math.min(e,n))}function Q4e(){var e=qGt,t=WGt,n=GGt,r=YGt,i=Mp(0),s=i,o=i,a=i,l=null;function u(c,d,f){var h,p=d??+e.call(this,c),m=f??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,_=xO(+i.call(this,c),0,v),w=xO(+s.call(this,c),0,v),x=xO(+o.call(this,c),0,v),S=xO(+a.call(this,c),0,v);if(l||(l=h=V6()),_<=0&&w<=0&&x<=0&&S<=0)l.rect(p,m,g,y);else{var E=p+g,T=m+y;l.moveTo(p+_,m),l.lineTo(E-w,m),l.bezierCurveTo(E-Lg*w,m,E,m+Lg*w,E,m+w),l.lineTo(E,T-S),l.bezierCurveTo(E,T-Lg*S,E-Lg*S,T,E-S,T),l.lineTo(p+x,T),l.bezierCurveTo(p+Lg*x,T,p,T-Lg*x,p,T-x),l.lineTo(p,m+_),l.bezierCurveTo(p,m+Lg*_,p+Lg*_,m,p+_,m),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=Mp(c),u):e},u.y=function(c){return arguments.length?(t=Mp(c),u):t},u.width=function(c){return arguments.length?(n=Mp(c),u):n},u.height=function(c){return arguments.length?(r=Mp(c),u):r},u.cornerRadius=function(c,d,f,h){return arguments.length?(i=Mp(c),s=d!=null?Mp(d):i,a=f!=null?Mp(f):i,o=h!=null?Mp(h):s,u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function J4e(){var e,t,n,r,i=null,s,o,a,l;function u(d,f,h){const p=h/2;if(s){var m=a-f,g=d-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*l,_=(g/=y)*l,w=Math.atan2(g,m);i.moveTo(o-v,a-_),i.lineTo(d-m*p,f-g*p),i.arc(d,f,p,w-Math.PI,w),i.lineTo(o+v,a+_),i.arc(o,a,l,w,w+Math.PI)}else i.arc(d,f,p,0,mh);i.closePath()}else s=1;o=d,a=f,l=p}function c(d){var f,h=d.length,p,m=!1,g;for(i==null&&(i=g=V6()),f=0;f<=h;++f)!(f<h&&r(p=d[f],f,d))===m&&(m=!m)&&(s=0),m&&u(+e(p,f,d),+t(p,f,d),+n(p,f,d));if(g)return i=null,g+""||null}return c.x=function(d){return arguments.length?(e=d,c):e},c.y=function(d){return arguments.length?(t=d,c):t},c.size=function(d){return arguments.length?(n=d,c):n},c.defined=function(d){return arguments.length?(r=d,c):r},c.context=function(d){return arguments.length?(d==null?i=null:i=d,c):i},c}function iP(e,t){return e??t}const sP=e=>e.x||0,oP=e=>e.y||0,KGt=e=>e.width||0,XGt=e=>e.height||0,QGt=e=>(e.x||0)+(e.width||0),JGt=e=>(e.y||0)+(e.height||0),ZGt=e=>e.startAngle||0,eYt=e=>e.endAngle||0,tYt=e=>e.padAngle||0,nYt=e=>e.innerRadius||0,rYt=e=>e.outerRadius||0,iYt=e=>e.cornerRadius||0,sYt=e=>iP(e.cornerRadiusTopLeft,e.cornerRadius)||0,oYt=e=>iP(e.cornerRadiusTopRight,e.cornerRadius)||0,aYt=e=>iP(e.cornerRadiusBottomRight,e.cornerRadius)||0,lYt=e=>iP(e.cornerRadiusBottomLeft,e.cornerRadius)||0,uYt=e=>iP(e.size,64),cYt=e=>e.size||1,Bj=e=>e.defined!==!1,dYt=e=>X4e(e.shape||"circle"),fYt=g2t().startAngle(ZGt).endAngle(eYt).padAngle(tYt).innerRadius(nYt).outerRadius(rYt).cornerRadius(iYt),hYt=cRe().x(sP).y1(oP).y0(JGt).defined(Bj),pYt=cRe().y(oP).x1(sP).x0(QGt).defined(Bj),mYt=t3().x(sP).y(oP).defined(Bj),gYt=Q4e().x(sP).y(oP).width(KGt).height(XGt).cornerRadius(sYt,oYt,aYt,lYt),yYt=v2t().type(dYt).size(uYt),vYt=J4e().x(sP).y(oP).defined(Bj).size(cYt);function Dre(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function bYt(e,t){return fYt.context(e)(t)}function _Yt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?pYt:hYt).curve(Ore(r,n.orient,n.tension)).context(e)(t)}function wYt(e,t){const n=t[0],r=n.interpolate||"linear";return mYt.curve(Ore(r,n.orient,n.tension)).context(e)(t)}function oT(e,t,n,r){return gYt.context(e)(t,n,r)}function xYt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function EYt(e,t){return yYt.context(e)(t)}function SYt(e,t){return vYt.context(e)(t)}var Z4e=1;function eje(){Z4e=1}function Mre(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+Z4e++),o=i.clipping[s]||(i.clipping[s]={id:s});return En(r)?o.path=r(null):Dre(n)?o.path=oT(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function vs(e){this.clear(),e&&this.union(e)}vs.prototype={clone(){return new vs(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,c=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+c,a*r-l*o+u,l*r+a*o+c,a*s-l*i+u,l*s+a*i+c,a*s-l*o+u,l*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function zj(e){this.mark=e,this.bounds=this.bounds||new vs}function Uj(e){zj.call(this,e),this.items=this.items||[]}lt(Uj,zj);class tje{constructor(t){this._pending=0,this._loader=t||Sj()}pending(){return this._pending}sanitizeURL(t){const n=this;return fye(n),n._loader.sanitize(t,{context:"href"}).then(r=>(pC(n),r)).catch(()=>(pC(n),null))}loadImage(t){const n=this,r=iGt();return fye(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=bt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>pC(n),o.onerror=()=>pC(n),o.src=s,o}).catch(i=>(pC(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function fye(e){e._pending+=1}function pC(e){e._pending-=1}function gg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?TYt(t,r):0))}return e}function TYt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const CYt=mh-1e-8;let Vj,JD,ZD,D1,pW,eM,mW,gW;const _0=(e,t)=>Vj.add(e,t),tM=(e,t)=>_0(JD=e,ZD=t),hye=e=>_0(e,Vj.y1),pye=e=>_0(Vj.x1,e),v1=(e,t)=>pW*e+mW*t,b1=(e,t)=>eM*e+gW*t,Oz=(e,t)=>_0(v1(e,t),b1(e,t)),Dz=(e,t)=>tM(v1(e,t),b1(e,t));function aP(e,t){return Vj=e,t?(D1=t*Cy,pW=gW=Math.cos(D1),eM=Math.sin(D1),mW=-eM):(pW=gW=1,D1=eM=mW=0),AYt}const AYt={beginPath(){},closePath(){},moveTo:Dz,lineTo:Dz,rect(e,t,n,r){D1?(Oz(e+n,t),Oz(e+n,t+r),Oz(e,t+r),Dz(e,t)):(_0(e+n,t+r),tM(e,t))},quadraticCurveTo(e,t,n,r){const i=v1(e,t),s=b1(e,t),o=v1(n,r),a=b1(n,r);mye(JD,i,o,hye),mye(ZD,s,a,pye),tM(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=v1(e,t),a=b1(e,t),l=v1(n,r),u=b1(n,r),c=v1(i,s),d=b1(i,s);gye(JD,o,l,c,hye),gye(ZD,a,u,d,pye),tM(c,d)},arc(e,t,n,r,i,s){if(r+=D1,i+=D1,JD=n*Math.cos(i)+e,ZD=n*Math.sin(i)+t,Math.abs(i-r)>CYt)_0(e-n,t-n),_0(e+n,t+n);else{const o=u=>_0(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(o(r),o(i),i!==r)if(r=r%mh,r<0&&(r+=mh),i=i%mh,i<0&&(i+=mh),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=mh,a=r-r%y1,l=0;l<4&&a>i;++l,a-=y1)o(a);else for(a=r-r%y1+y1,l=0;l<4&&a<i;++l,a=a+y1)o(a)}}};function mye(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function gye(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let l=0,u=0,c;Math.abs(s)>BGt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),l=(-o+c)/s,u=(-o-c)/s)):l=.5*a/o,0<l&&l<1&&i(yye(l,e,t,n,r)),0<u&&u<1&&i(yye(u,e,t,n,r))}function yye(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var X0=(X0=K0(1,1))?X0.getContext("2d"):null;const yW=new vs;function $re(e){return function(t,n){if(!X0)return!0;e(X0,t),yW.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=yW;for(let a=i;a<=o;++a)for(let l=r;l<=s;++l)if(X0.isPointInPath(l,a))return!0;return!1}}function Lre(e,t){return t.contains(e.x||0,e.y||0)}function nje(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(yW.set(n,r,n+i,r+s))}function rje(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Kw(t,n,r,i,s)}function Kw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:l}=e,u=r-t,c=i-n;let d=0,f=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-u,p=-(s-t)),g===1&&(h=u,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>f)return!1;m>d&&(d=m)}else if(h>0){if(m<d)return!1;m<f&&(f=m)}}return!0}function DE(e,t){e.globalCompositeOperation=t.blend||"source-over"}function gd(e,t){return e??t}function vye(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function IYt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+gd(t.x1,.5)*r,n.y1+gd(t.y1,.5)*i,Math.max(r,i)*gd(t.r1,0),n.x1+gd(t.x2,.5)*r,n.y1+gd(t.y2,.5)*i,Math.max(r,i)*gd(t.r2,.5));else{const o=gd(t.x1,0),a=gd(t.y1,0),l=gd(t.x2,1),u=gd(t.y2,0);if(o===l||a===u||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const c=K0(Math.ceil(r),Math.ceil(i)),d=c.getContext("2d");return d.scale(r,i),d.fillStyle=vye(d.createLinearGradient(o,a,l,u),t.stops),d.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return vye(s,t.stops)}function ije(e,t,n){return Nre(n)?IYt(e,n,t.bounds):n}function pL(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=ije(e,t,t.fill),!0):!1}var kYt=[];function ME(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=ije(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||kYt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function RYt(e,t){return e.zindex-t.zindex||e.index-t.index}function Fre(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(RYt)}function ff(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Fre(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function mL(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Fre(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function jre(e){return function(t,n,r){ff(n,i=>{(!r||r.intersects(i.bounds))&&sje(e,t,i,i)})}}function PYt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&sje(e,t,n.items[0],n.items)}}function sje(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(DE(t,n),n.fill&&pL(t,n,i)&&t.fill(),n.stroke&&ME(t,n,i)&&t.stroke()))}function Hj(e){return e=e||Hc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,mL(n,a=>{const l=a.bounds;if(!(l&&!l.contains(s,o)||!l)&&e(t,a,r,i,s,o))return a})}}function lP(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,l=o.stroke&&n.isPointInStroke,u,c;return l&&(u=o.strokeWidth,c=o.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||l&&n.isPointInStroke(i,s)}}function Bre(e){return Hj(lP(e))}function q1(e,t){return"translate("+e+","+t+")"}function zre(e){return"rotate("+e+")"}function NYt(e,t){return"scale("+e+","+t+")"}function oje(e){return q1(e.x||0,e.y||0)}function OYt(e){return q1(e.x||0,e.y||0)+(e.angle?" "+zre(e.angle):"")}function DYt(e){return q1(e.x||0,e.y||0)+(e.angle?" "+zre(e.angle):"")+(e.scaleX||e.scaleY?" "+NYt(e.scaleX||1,e.scaleY||1):"")}function Ure(e,t,n){function r(o,a){o("transform",OYt(a)),o("d",t(null,a))}function i(o,a){return t(aP(o,a.angle),a),gg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var l=a.x||0,u=a.y||0,c=a.angle||0;o.translate(l,u),c&&o.rotate(c*=Cy),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:jre(s),pick:Bre(s),isect:n||$re(s)}}var MYt=Ure("arc",bYt);function $Yt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function LYt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function FYt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Vre(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(aP(l),c),gg(l,c[0]))}function s(l,u){l.beginPath(),t(l,u)}const o=lP(s);function a(l,u,c,d,f,h){var p=u.items,m=u.bounds;return!p||!p.length||m&&!m.contains(f,h)?null:(c*=l.pixelRatio,d*=l.pixelRatio,o(l,p,c,d)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:PYt(s),pick:a,isect:Lre,tip:n}}var jYt=Vre("area",_Yt,$Yt);function BYt(e,t){var n=t.clip;e.save(),En(n)?(e.beginPath(),n(e),e.clip()):aje(e,t.group)}function aje(e,t){e.beginPath(),Dre(t)?oT(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function lje(e){const t=gd(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function zYt(e,t){e("transform",oje(t))}function uje(e,t){const n=lje(t);e("d",oT(null,t,n,n))}function UYt(e,t){e("class","background"),e("aria-hidden",!0),uje(e,t)}function VYt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?uje(e,t):e("d","")}function HYt(e,t,n){const r=t.clip?Mre(n,t,t):null;e("clip-path",r)}function qYt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),gg(e,t),e.translate(t.x||0,t.y||0)}function dk(e,t,n,r){const i=lje(t);e.beginPath(),oT(e,t,(n||0)+i,(r||0)+i)}const WYt=lP(dk),GYt=lP(dk,!1),YYt=lP(dk,!0);function KYt(e,t,n,r){ff(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(dk(e,i,s,o),DE(e,i),i.fill&&pL(e,i,l)&&e.fill(),i.stroke&&!a&&ME(e,i,l)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&aje(e,i),n&&n.translate(-s,-o),ff(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&l&&(dk(e,i,s,o),DE(e,i),ME(e,i,l)&&e.stroke())})}function XYt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return mL(t,l=>{let u,c,d;const f=l.bounds;if(f&&!f.contains(i,s))return;c=l.x||0,d=l.y||0;const h=c+(l.width||0),p=d+(l.height||0),m=l.clip;if(m&&(i<c||i>h||s<d||s>p))return;if(e.save(),e.translate(c,d),c=i-c,d=s-d,m&&Dre(l)&&!YYt(e,l,o,a))return e.restore(),null;const g=l.strokeForeground,y=t.interactive!==!1;return y&&g&&l.stroke&&GYt(e,l,o,a)?(e.restore(),l):(u=mL(l,v=>QYt(v,c,d)?this.pick(v,n,r,c,d):null),!u&&y&&(l.fill||!g&&l.stroke)&&WYt(e,l,o,a)&&(u=l),e.restore(),u||null)})}function QYt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var JYt={type:"group",tag:"g",nested:!1,attr:zYt,bound:qYt,draw:KYt,pick:XYt,isect:nje,content:HYt,background:UYt,foreground:VYt},fk={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Hre(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function qre(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Wre(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function qj(e,t){return e==="center"?t/2:e==="right"?t:0}function Wj(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function ZYt(e,t,n){const r=Hre(t,n),i=qre(t,r),s=Wre(t,r),o=(t.x||0)-qj(t.align,i),a=(t.y||0)-Wj(t.baseline,s),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,fk["xmlns:xlink"],"xlink:href"),e("transform",q1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function eKt(e,t){const n=t.image,r=qre(t,n),i=Wre(t,n),s=(t.x||0)-qj(t.align,r),o=(t.y||0)-Wj(t.baseline,i);return e.set(s,o,s+r,o+i)}function tKt(e,t,n){ff(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Hre(r,this);let s=qre(r,i),o=Wre(r,i);if(s===0||o===0)return;let a=(r.x||0)-qj(r.align,s),l=(r.y||0)-Wj(r.baseline,o),u,c,d,f;r.aspect!==!1&&(c=i.width/i.height,d=r.width/r.height,c===c&&d===d&&c!==d&&(d<c?(f=s/c,l+=(o-f)/2,o=f):(f=o*c,a+=(s-f)/2,s=f))),(i.complete||i.toDataURL)&&(DE(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,s,o))})}var nKt={type:"image",tag:"image",nested:!1,attr:ZYt,bound:eKt,draw:tKt,pick:Hj(),isect:Hc,get:Hre,xOffset:qj,yOffset:Wj},rKt=Vre("line",wYt,LYt);function iKt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",DYt(t)),e("d",t.path)}function nM(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Cy,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=OE(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),ck(e,l,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):ck(e,l,r,i,s,o)}function sKt(e,t){return nM(aP(e,t.angle),t)?e.set(0,0,0,0):gg(e,t,!0)}var oKt={type:"path",tag:"path",nested:!1,attr:iKt,bound:sKt,draw:jre(nM),pick:Bre(nM),isect:$re(nM)};function aKt(e,t){e("d",oT(null,t))}function lKt(e,t){var n,r;return gg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function bye(e,t){e.beginPath(),oT(e,t)}var uKt={type:"rect",tag:"path",nested:!1,attr:aKt,bound:lKt,draw:jre(bye),pick:Bre(bye),isect:nje};function cKt(e,t){e("transform",oje(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function dKt(e,t){var n,r;return gg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function cje(e,t,n){var r,i,s,o;return t.stroke&&ME(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function fKt(e,t,n){ff(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&cje(e,r,i)&&(DE(e,r),e.stroke())}})}function hKt(e,t,n,r){return e.isPointInStroke?cje(e,t,1)&&e.isPointInStroke(n,r):!1}var pKt={type:"rule",tag:"line",nested:!1,attr:cKt,bound:dKt,draw:fKt,pick:Hj(hKt),isect:rje},mKt=Ure("shape",xYt),gKt=Ure("symbol",EYt,Lre);const _ye=YFe();var Ru={height:gp,measureWidth:Gre,estimateWidth:gL,width:gL,canvas:dje};dje(!0);function dje(e){Ru.width=e&&X0?Gre:gL}function gL(e,t){return fje(Iy(e,t),gp(e))}function fje(e,t){return~~(.8*e.length*t)}function Gre(e,t){return gp(e)<=0||!(t=Iy(e,t))?0:hje(t,Gj(e))}function hje(e,t){const n=`(${t}) ${e}`;let r=_ye.get(n);return r===void 0&&(X0.font=t,r=X0.measureText(e).width,_ye.set(n,r)),r}function gp(e){return e.fontSize!=null?+e.fontSize||0:11}function Ay(e){return e.lineHeight!=null?e.lineHeight:gp(e)+2}function yKt(e){return Be(e)?e.length>1?e:e[0]:e}function uP(e){return yKt(e.lineBreak&&e.text&&!Be(e.text)?e.text.split(e.lineBreak):e.text)}function Yre(e){const t=uP(e);return(Be(t)?t.length-1:0)*Ay(e)}function Iy(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?bKt(e,n):n}function vKt(e){if(Ru.width===Gre){const t=Gj(e);return n=>hje(n,t)}else if(Ru.width===gL){const t=gp(e);return n=>fje(n,t)}else return t=>Ru.width(e,t)}function bKt(e,t){var n=+e.limit,r=vKt(e);if(r(t)<n)return t;var i=e.ellipsis||"…",s=e.dir==="rtl",o=0,a=t.length,l;if(n-=r(i),s){for(;o<a;)l=o+a>>>1,r(t.slice(l))>n?o=l+1:a=l;return i+t.slice(o)}else{for(;o<a;)l=1+(o+a>>>1),r(t.slice(0,l))<n?o=l:a=l-1;return t.slice(0,o)+i}}function cP(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Gj(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+gp(e)+"px "+cP(e,t)}function Kre(e){var t=e.baseline,n=gp(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Ay(e):t==="line-bottom"?.29*n-.5*Ay(e):0)}const _Kt={left:"start",center:"middle",right:"end"},EA=new vs;function Yj(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-y1,t+=r*Math.cos(i),n+=r*Math.sin(i)),EA.x1=t,EA.y1=n,EA}function wKt(e,t){var n=t.dx||0,r=(t.dy||0)+Kre(t),i=Yj(t),s=i.x1,o=i.y1,a=t.angle||0,l;e("text-anchor",_Kt[t.align]||"start"),a?(l=q1(s,o)+" "+zre(a),(n||r)&&(l+=" "+q1(n,r))):l=q1(s+n,o+r),e("transform",l)}function Xre(e,t,n){var r=Ru.height(t),i=t.align,s=Yj(t),o=s.x1,a=s.y1,l=t.dx||0,u=(t.dy||0)+Kre(t)-Math.round(.8*r),c=uP(t),d;if(Be(c)?(r+=Ay(t)*(c.length-1),d=c.reduce((f,h)=>Math.max(f,Ru.width(t,h)),0)):d=Ru.width(t,c),i==="center"?l-=d/2:i==="right"&&(l-=d),e.set(l+=o,u+=a,l+d,u+r),t.angle&&!n)e.rotate(t.angle*Cy,o,a);else if(n===2)return e.rotatedPoints(t.angle*Cy,o,a);return e}function xKt(e,t,n){ff(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,l,u,c,d;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=Gj(r),e.textAlign=r.align||"left",s=Yj(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Cy),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Kre(r),c=uP(r),DE(e,r),Be(c))for(u=Ay(r),l=0;l<c.length;++l)d=Iy(r,c[l]),r.fill&&pL(e,r,i)&&e.fillText(d,o,a),r.stroke&&ME(e,r,i)&&e.strokeText(d,o,a),a+=u;else d=Iy(r,c),r.fill&&pL(e,r,i)&&e.fillText(d,o,a),r.stroke&&ME(e,r,i)&&e.strokeText(d,o,a);r.angle&&e.restore()}})}function EKt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Yj(t),a=o.x1,l=o.y1,u=Xre(EA,t,1),c=-t.angle*Cy,d=Math.cos(c),f=Math.sin(c),h=d*i-f*s+(a-d*a+f*l),p=f*i+d*s+(l-f*a-d*l);return u.contains(h,p)}function SKt(e,t){const n=Xre(EA,e,2);return Kw(t,n[0],n[1],n[2],n[3])||Kw(t,n[0],n[1],n[4],n[5])||Kw(t,n[4],n[5],n[6],n[7])||Kw(t,n[2],n[3],n[6],n[7])}var TKt={type:"text",tag:"text",nested:!1,attr:wKt,bound:Xre,draw:xKt,pick:Hj(EKt),isect:SKt},CKt=Vre("trail",SYt,FYt),Gu={arc:MYt,area:jYt,group:JYt,image:nKt,line:rKt,path:oKt,rect:uKt,rule:pKt,shape:mKt,symbol:gKt,text:TKt,trail:CKt};function vW(e,t,n){var r=Gu[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new vs),e,n)}var wye={mark:null};function pje(e,t,n){var r=Gu[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,l,u,c;if(r.nested)return o?u=s[0]:(wye.mark=e,u=wye),c=vW(u,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new vs,o)for(a=0,l=s.length;a<l;++a)t.union(vW(s[a],i,n));return e.bounds=t}const AKt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function mje(e,t){return JSON.stringify(e,AKt,t)}function gje(e){const t=typeof e=="string"?JSON.parse(e):e;return yje(t)}function yje(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&yje(n[i]);return t&&pje(e),e}class vje{constructor(t){arguments.length?this.root=gje(t):(this.root=xye({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Uj(this.root)])}toJSON(t){return mje(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=xye(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function xye(e,t){const n={bounds:new vs,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function w0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Qre(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function ks(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=w0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function gc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function bje(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Kj(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function IKt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Gu[i.marktype]).tip){for(o=Kj(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Jre=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||Sj(),this._tooltip=n||kKt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=w0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=IKt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let l=s.x1+i[0]+r.left,u=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:o,height:a,left:l,top:u,right:l+o,bottom:u+a}}};function kKt(e,t,n,r){e.element().setAttribute("title",r||"")}class dP{constructor(t){this._el=null,this._bgcolor=null,this._loader=new tje(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const RKt="keydown",PKt="keypress",NKt="keyup",_je="dragenter",rM="dragleave",wje="dragover",bW="pointerdown",OKt="pointerup",yL="pointermove",iM="pointerout",xje="pointerover",_W="mousedown",DKt="mouseup",Eje="mousemove",vL="mouseout",Sje="mouseover",bL="click",MKt="dblclick",$Kt="wheel",Tje="mousewheel",_L="touchstart",wL="touchmove",xL="touchend",LKt=[RKt,PKt,NKt,_je,rM,wje,bW,OKt,yL,iM,xje,_W,DKt,Eje,vL,Sje,bL,MKt,$Kt,Tje,_L,wL,xL],wW=yL,SA=vL,xW=bL;class fP extends Jre{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=LKt,this.pointermove=Sye([yL,Eje],[xje,Sje],[iM,vL]),this.dragover=Sye([wje],[_je],[rM]),this.pointerout=Tye([iM,vL]),this.dragleave=Tye([rM])}initialize(t,n,r){return this._canvas=t&&Qre(t,"canvas"),[bL,_W,bW,yL,iM,rM].forEach(i=>Eye(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(Tje,t)}pointerdown(t){this._down=this._active,this.fire(bW,t)}mousedown(t){this._down=this._active,this.fire(_W,t)}click(t){this._down===this._active&&(this.fire(bL,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(_L,t,!0)}touchmove(t){this.fire(wL,t,!0)}touchend(t){this.fire(xL,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===xW&&i&&i.href?this.handleHref(n,i,i.href):(t===wW||t===SA)&&this.handleTooltip(n,i,t!==SA),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Eye(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=Kj(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Gu[t.marktype].pick.call(this,o,t,n,r,i,s)}}const FKt=e=>e===_L||e===wL||e===xL?[_L,wL,xL]:[e];function Eye(e,t){FKt(t).forEach(n=>jKt(e,n))}function jKt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function w2(e,t,n){t.forEach(r=>e.fire(r,n))}function Sye(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?w2(this,e,r):((!i||!i.exit)&&w2(this,n,r),this._active=s,w2(this,t,r),w2(this,e,r))}}function Tye(e){return function(t){w2(this,e,t),this._active=null}}function BKt(){return typeof window<"u"&&window.devicePixelRatio||1}function zKt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=o?BKt():i;e.width=t*l,e.height=n*l;for(const u in s)a[u]=s[u];return o&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class EL extends dP{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new vs,this._tempb=new vs}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:K0(1,1,this._options.type),t&&this._canvas&&(gc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)zKt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Le("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,l=UKt(i,s,o);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):VKt(r,l.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Gu[n.marktype];n.clip&&BYt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const UKt=(e,t,n)=>new vs().set(0,0,t,n).translate(-e[0],-e[1]);function VKt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class Cje extends Jre{constructor(t,n){super(t,n);const r=this;r._hrefHandler=Mz(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=Mz(r,(i,s)=>{r.handleTooltip(i,s,i.type!==SA)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(xW,this._hrefHandler),i.removeEventListener(wW,this._tooltipHandler),i.removeEventListener(SA,this._tooltipHandler)),this._svg=i=t&&Qre(t,"svg"),i&&(i.addEventListener(xW,this._hrefHandler),i.addEventListener(wW,this._tooltipHandler),i.addEventListener(SA,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:Mz(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const Mz=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},Aje="aria-hidden",Zre="aria-label",eie="role",tie="aria-roledescription",Ije="graphics-object",nie="graphics-symbol",kje=(e,t,n)=>({[eie]:e,[tie]:t,[Zre]:n||void 0}),HKt=cf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Cye={axis:{desc:"axis",caption:GKt},legend:{desc:"legend",caption:YKt},"title-text":{desc:"title",caption:e=>`Title text '${Iye(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Iye(e)}'`}},Aye={ariaRole:eie,ariaRoleDescription:tie,description:Zre};function Rje(e,t){const n=t.aria===!1;if(e(Aje,n||void 0),n||t.description==null)for(const r in Aye)e(Aye[r],void 0);else{const r=t.mark.marktype;e(Zre,t.description),e(eie,t.ariaRole||(r==="group"?Ije:nie)),e(tie,t.ariaRoleDescription||`${r} mark`)}}function Pje(e){return e.aria===!1?{[Aje]:!0}:HKt[e.role]?null:Cye[e.role]?WKt(e,Cye[e.role]):qKt(e)}function qKt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return kje(n?Ije:nie,`${t} mark container`,e.description)}function WKt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return kje(t.role||nie,t.desc,n.description||r(n))}catch{return null}}function Iye(e){return gt(e.text).join(" ")}function GKt(e){const t=e.datum,n=e.orient,r=t.title?Nje(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${NE(a)?"discrete":a} scale with ${q4e(o,s,e)}`}function YKt(e){const t=e.datum,n=t.title?Nje(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,l=o.dataflow.locale();return XKt(r)+(n?` titled '${n}'`:"")+` for ${KKt(s)} with ${q4e(l,a,e)}`}function Nje(e){try{return gt(Xn(e.items).items[0].text).join(" ")}catch{return null}}function KKt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Xn(e)}function XKt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const Oje=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),QKt=e=>Oje(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function rie(){let e="",t="",n="";const r=[],i=()=>t=n="",s=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},o=(l,u)=>(u!=null&&(t+=` ${l}="${QKt(u)}"`),a),a={open(l){s(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),d=1;d<u;d++)c[d-1]=arguments[d];for(const f of c)for(const h in f)o(h,f[h]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:o,text:l=>(n+=Oje(l),a),toString:()=>e};return a}const Dje=e=>Mje(rie(),e)+"";function Mje(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):Mje(e,r)}return e.close()}const SL={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},TL={blend:"mix-blend-mode"},$je={fill:"none","stroke-miterlimit":10},mC=0,kye="http://www.w3.org/2000/xmlns/",Cs=fk.xmlns;class iie extends dP{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=ks(t,0,"svg",Cs),this._svg.setAttributeNS(kye,"xmlns",Cs),this._svg.setAttributeNS(kye,"xmlns:xlink",fk["xmlns:xlink"]),this._svg.setAttribute("version",fk.version),this._svg.setAttribute("class","marks"),gc(t,1),this._root=ks(this._svg,mC,"g",Cs),x0(this._root,$je),gc(this._svg,mC+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(x0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=ks(t,mC,"rect",Cs),x0(r,{width:this._width,height:this._height,fill:n}));const i=Dje(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),gc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Gu[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Rye(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(o,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Rye(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Gu[o],l=n.interactive===!1?"none":null,u=a.tag==="g",c=Pye(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return gc(c,0),n._svg;c.setAttribute("class",bje(n));const d=Pje(n);for(const m in d)Pa(c,m,d[m]);u||Pa(c,"pointer-events",l),Pa(c,"clip-path",n.clip?Mre(this,n,n.group):null);let f=null,h=0;const p=m=>{const g=this.isDirty(m),y=Pye(m,c,f,a.tag,s);g&&(this._update(a,y,m),u&&eXt(this,y,m,i)),f=y,++h};return a.nested?n.items.length&&p(n.items[0]):ff(n,p),gc(c,h),c}_update(t,n,r){cm=n,ta=n.__values__,Rje(TA,r),t.attr(TA,r,this);const i=nXt[t.type];i&&i.call(this,t,n,r),cm&&this.style(cm,r)}style(t,n){if(n!=null){for(const r in SL){let i=r==="font"?cP(n):n[r];if(i===ta[r])continue;const s=SL[r];i==null?t.removeAttribute(s):(Nre(i)&&(i=G4e(i,this._defs.gradient,Lje())),t.setAttribute(s,i+"")),ta[r]=i}for(const r in TL)sM(t,TL[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=ks(t,mC+1,"defs",Cs)),i=JKt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=ks(t,mC+1,"defs",Cs)),i=ZKt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):gc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Rye(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function JKt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=ks(e,n++,"pattern",Cs);x0(o,{id:hL+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=ks(o,0,"rect",Cs),x0(o,{width:1,height:1,fill:`url(${Lje()}#${t.id})`}),e=ks(e,n++,"radialGradient",Cs),x0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ks(e,n++,"linearGradient",Cs),x0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=ks(e,r,"stop",Cs),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return gc(e,r),n}function ZKt(e,t,n){let r;return e=ks(e,n,"clipPath",Cs),e.setAttribute("id",t.id),t.path?(r=ks(e,0,"path",Cs),r.setAttribute("d",t.path)):(r=ks(e,0,"rect",Cs),x0(r,{x:0,y:0,width:t.width,height:t.height})),gc(e,1),n+1}function eXt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;ff(n,o=>{i=e.mark(t,o,i,r),++s}),gc(t,1+s)}function Pye(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=w0(o,r,Cs),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=w0(o,"path",Cs);s.appendChild(a),a.__data__=e;const l=w0(o,"g",Cs);s.appendChild(l),l.__data__=e;const u=w0(o,"path",Cs);s.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(s.ownerSVGElement!==i||tXt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function tXt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let cm=null,ta=null;const nXt={group(e,t,n){const r=cm=t.childNodes[2];ta=r.__values__,e.foreground(TA,n,this),ta=t.__values__,cm=t.childNodes[1],e.content(TA,n,this);const i=cm=t.childNodes[0];e.background(TA,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==ta.events&&(Pa(r,"pointer-events",s),Pa(i,"pointer-events",s),ta.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Pa(r,"display",null),this.style(i,n),Pa(i,"stroke",null),o&&(n.fill=null),ta=r.__values__,this.style(r,n),o&&(n.fill=o),cm=null}else Pa(r,"display","none")},image(e,t,n){n.smooth===!1?(sM(t,"image-rendering","optimizeSpeed"),sM(t,"image-rendering","pixelated")):sM(t,"image-rendering",null)},text(e,t,n){const r=uP(n);let i,s,o,a;Be(r)?(s=r.map(l=>Iy(n,l)),i=s.join(`
`),i!==ta.text&&(gc(t,0),o=t.ownerDocument,a=Ay(n),s.forEach((l,u)=>{const c=w0(o,"tspan",Cs);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ta.text=i)):(s=Iy(n,r),s!==ta.text&&(t.textContent=s,ta.text=s)),Pa(t,"font-family",cP(n)),Pa(t,"font-size",gp(n)+"px"),Pa(t,"font-style",n.fontStyle),Pa(t,"font-variant",n.fontVariant),Pa(t,"font-weight",n.fontWeight)}};function TA(e,t,n){t!==ta[e]&&(n?rXt(cm,e,t,n):Pa(cm,e,t),ta[e]=t)}function sM(e,t,n){n!==ta[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ta[t]=n)}function x0(e,t){for(const n in t)Pa(e,n,t[n])}function Pa(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function rXt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function Lje(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class Fje extends dP{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=rie();n.open("svg",xn({},fk,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",$je,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Gu[n.marktype],i=r.tag,s=[Rje,r.attr];t.open("g",{class:bje(n),"clip-path":n.clip?Mre(this,n,n.group):null},Pje(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const u=uP(a);if(Be(u)){const c={x:0,dy:Ay(a)};for(let d=0;d<u.length;++d)t.open("tspan",d?c:null).text(Iy(a,u[d])).close()}else t.text(Iy(a,u))}else if(i==="g"){const u=a.strokeForeground,c=a.fill,d=a.stroke;u&&d&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),ff(a,f=>this.mark(t,f)),t.close(),u&&d?(c&&(a.fill=null),a.stroke=d,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):ff(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,l,u,c)=>{s[c||a]=l};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&iXt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:hL+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function iXt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=cP(t),e["font-size"]=gp(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in SL){let a=t[o];const l=SL[o];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(Nre(a)&&(a=G4e(a,i.gradient,"")),e[l]=a)}for(const o in TL){const a=t[o];a!=null&&(s=s||[],s.push(`${TL[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Ed={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function sXt(e){Ed.svgMarkTypes=e.svgMarkTypes??["text"],Ed.svgOnTop=e.svgOnTop??!0,Ed.debug=e.debug??!1}class EW extends dP{constructor(t){super(t),this._svgRenderer=new iie(t),this._canvasRenderer=new EL(t)}initialize(t,n,r,i,s){this._root_el=ks(t,0,"div");const o=ks(this._root_el,0,"div"),a=ks(this._root_el,1,"div");return this._root_el.style.position="relative",Ed.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Ed.svgOnTop?a:o,this._canvasEl=Ed.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Ed.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Ed.svgMarkTypes.includes(s));this._svgRenderer.render(t,Ed.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Ed.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class jje extends fP{constructor(t,n){super(t,n)}initialize(t,n,r){const i=ks(ks(t,0,"div"),Ed.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const Bje="canvas",zje="hybrid",Uje="png",Vje="svg",Hje="none",E0={Canvas:Bje,PNG:Uje,SVG:Vje,Hybrid:zje,None:Hje},Cb={};Cb[Bje]=Cb[Uje]={renderer:EL,headless:EL,handler:fP};Cb[Vje]={renderer:iie,headless:Fje,handler:Cje};Cb[zje]={renderer:EW,headless:EW,handler:jje};Cb[Hje]={};function Xj(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Cb[e]=t,this):Cb[e]}function qje(e,t,n){const r=[],i=new vs().union(t),s=e.marktype;return s?Wje(e,i,n,r):s==="group"?Gje(e,i,n,r):Le("Intersect scene must be mark node or group item.")}function Wje(e,t,n,r){if(oXt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)Gje(i[a],t,n,r);else for(const l=Gu[s].isect;a<o;++a){const u=i[a];Yje(u,t,l)&&r.push(u)}}return r}function oXt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function Gje(e,t,n,r){n&&n(e.mark)&&Yje(e,t,Gu.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let l=0;l<s;++l)Wje(i[l],t,n,r);t.translate(o,a)}return r}function Yje(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const $z=new vs;function Kje(e){const t=e.clip;if(En(t))t(aP($z.clear()));else if(t)$z.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect($z)}const aXt=1e-9;function sie(e,t,n){return e===t?!0:n==="path"?Xje(e,t):e instanceof Date&&t instanceof Date?+e==+t:hr(e)&&hr(t)?Math.abs(e-t)<=aXt:!e||!t||!pt(e)&&!pt(t)?e==t:lXt(e,t)}function Xje(e,t){return sie(OE(e),OE(t))}function lXt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!sie(e[i],t[i],i))return!1;return typeof e==typeof t}function uXt(){eje(),OGt()}const $E="top",Od="left",Fd="right",ky="bottom",cXt="top-left",dXt="top-right",fXt="bottom-left",hXt="bottom-right",oie="start",SW="middle",Ma="end",pXt="x",mXt="y",Qj="group",aie="axis",lie="title",gXt="frame",yXt="scope",uie="legend",Qje="row-header",Jje="row-footer",Zje="row-title",e5e="column-header",t5e="column-footer",n5e="column-title",vXt="padding",bXt="symbol",r5e="fit",i5e="fit-x",s5e="fit-y",_Xt="pad",cie="none",EO="all",TW="each",die="flush",S0="column",T0="row";function o5e(e){ke.call(this,null,e)}lt(o5e,ke,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Gu[i],o=s.bound;let a=r.bounds,l;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=SO(r,o),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===Qj||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(SO(u,o))),r.role){case aie:case uie:case lie:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(SO(u,o))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(SO(u,o))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return Kje(r),t.modifies("bounds")}});function SO(e,t,n){return t(e.bounds.clear(),e,n)}const Nye=":vega_identifier:";function fie(e){ke.call(this,0,e)}fie.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};lt(fie,ke,{transform(e,t){const n=wXt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function wXt(e){return e._signals[Nye]||(e._signals[Nye]=e.add(0))}function a5e(e){ke.call(this,null,e)}lt(a5e,ke,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,xXt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===Qj?Uj:zj;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function xXt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function l5e(e){ke.call(this,null,e)}const Oye={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!u5e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},u5e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Dye=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(u5e(i,s=e[n].bounds,t))return!0},EXt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},SXt=(e,t,n)=>{var r=e.range(),i=new vs;return t===$E||t===ky?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Mye=e=>(e.forEach(t=>t.opacity=1),e),$ye=(e,t)=>e.reflow(t.modified()).modifies("opacity");lt(l5e,ke,{transform(e,t){const n=Oye[e.method]||Oye.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Mye(i),t=$ye(t,e)),t;if(i=i.filter(EXt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Mye(i),t=$ye(t,e),s.length>=3&&Dye(s,r)){do s=n(s,r);while(s.length>=3&&Dye(s,r));s.length<3&&!Xn(i).opacity&&(s.length>1&&(Xn(s).opacity=0),Xn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=SXt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{o(l)||(l.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function c5e(e){ke.call(this,null,e)}lt(c5e,ke,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Zo=new vs;function Xw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function TXt(e){var t=e.items[0].orient;return t===Od||t===Fd}function CXt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function AXt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,l=CXt(s),u=i.range,c=i.offset,d=i.position,f=i.minExtent,h=i.maxExtent,p=s.title&&i.items[l[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Yre(p),v=0,_=0,w,x;switch(Zo.clear().union(g),g.clear(),(w=l[0])>-1&&g.union(i.items[w].bounds),(w=l[1])>-1&&g.union(i.items[w].bounds),a){case $E:v=d||0,_=-c,x=Math.max(f,Math.min(h,-g.y1)),g.add(0,-x).add(u,0),p&&TO(e,p,x,m,y,0,-1,g);break;case Od:v=-c,_=d||0,x=Math.max(f,Math.min(h,-g.x1)),g.add(-x,0).add(0,u),p&&TO(e,p,x,m,y,1,-1,g);break;case Fd:v=n+c,_=d||0,x=Math.max(f,Math.min(h,g.x2)),g.add(0,0).add(x,u),p&&TO(e,p,x,m,y,1,1,g);break;case ky:v=d||0,_=r+c,x=Math.max(f,Math.min(h,g.y2)),g.add(0,0).add(u,x),p&&TO(e,p,x,m,0,0,1,g);break;default:v=i.x,_=i.y}return gg(g.translate(v,_),i),Xw(i,"x",v+o)|Xw(i,"y",_+o)&&(i.bounds=Zo,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function TO(e,t,n,r,i,s,o,a){const l=t.bounds;if(t.auto){const u=o*(n+i+r);let c=0,d=0;e.dirty(t),s?c=(t.x||0)-(t.x=u):d=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-d)),e.dirty(t)}a.union(l)}const Lye=(e,t)=>Math.floor(Math.min(e,t)),Fye=(e,t)=>Math.ceil(Math.max(e,t));function IXt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===Qj)switch(i.role){case aie:case uie:case lie:break;case Qje:o.rowheaders.push(...s);break;case Jje:o.rowfooters.push(...s);break;case e5e:o.colheaders.push(...s);break;case t5e:o.colfooters.push(...s);break;case Zje:o.rowtitle=s[0];break;case n5e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function kXt(e){return new vs().set(0,0,e.width||0,e.height||0)}function RXt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function vi(e,t,n){const r=pt(e)?e[t]:e;return r??(n!==void 0?n:0)}function jye(e){return e<0?Math.ceil(-e):0}function d5e(e,t,n){var r=!n.nodirty,i=n.bounds===die?kXt:RXt,s=Zo.set(0,0,0,0),o=vi(n.align,S0),a=vi(n.align,T0),l=vi(n.padding,S0),u=vi(n.padding,T0),c=n.columns||t.length,d=c<=0?1:Math.ceil(t.length/c),f=t.length,h=Array(f),p=Array(c),m=0,g=Array(f),y=Array(d),v=0,_=Array(f),w=Array(f),x=Array(f),S,E,T,I,k,P,L,R,$,D,O;for(E=0;E<c;++E)p[E]=0;for(E=0;E<d;++E)y[E]=0;for(E=0;E<f;++E)P=t[E],k=x[E]=i(P),P.x=P.x||0,_[E]=0,P.y=P.y||0,w[E]=0,T=E%c,I=~~(E/c),m=Math.max(m,L=Math.ceil(k.x2)),v=Math.max(v,R=Math.ceil(k.y2)),p[T]=Math.max(p[T],L),y[I]=Math.max(y[I],R),h[E]=l+jye(k.x1),g[E]=u+jye(k.y1),r&&e.dirty(t[E]);for(E=0;E<f;++E)E%c===0&&(h[E]=0),E<c&&(g[E]=0);if(o===TW)for(T=1;T<c;++T){for(O=0,E=T;E<f;E+=c)O<h[E]&&(O=h[E]);for(E=T;E<f;E+=c)h[E]=O+p[T-1]}else if(o===EO){for(O=0,E=0;E<f;++E)E%c&&O<h[E]&&(O=h[E]);for(E=0;E<f;++E)E%c&&(h[E]=O+m)}else for(o=!1,T=1;T<c;++T)for(E=T;E<f;E+=c)h[E]+=p[T-1];if(a===TW)for(I=1;I<d;++I){for(O=0,E=I*c,S=E+c;E<S;++E)O<g[E]&&(O=g[E]);for(E=I*c;E<S;++E)g[E]=O+y[I-1]}else if(a===EO){for(O=0,E=c;E<f;++E)O<g[E]&&(O=g[E]);for(E=c;E<f;++E)g[E]=O+v}else for(a=!1,I=1;I<d;++I)for(E=I*c,S=E+c;E<S;++E)g[E]+=y[I-1];for($=0,E=0;E<f;++E)$=h[E]+(E%c?$:0),_[E]+=$-t[E].x;for(T=0;T<c;++T)for(D=0,E=T;E<f;E+=c)D+=g[E],w[E]+=D-t[E].y;if(o&&vi(n.center,S0)&&d>1)for(E=0;E<f;++E)k=o===EO?m:p[E%c],$=k-x[E].x2-t[E].x-_[E],$>0&&(_[E]+=$/2);if(a&&vi(n.center,T0)&&c!==1)for(E=0;E<f;++E)k=a===EO?v:y[~~(E/c)],D=k-x[E].y2-t[E].y-w[E],D>0&&(w[E]+=D/2);for(E=0;E<f;++E)s.union(x[E].translate(_[E],w[E]));switch($=vi(n.anchor,pXt),D=vi(n.anchor,mXt),vi(n.anchor,S0)){case Ma:$-=s.width();break;case SW:$-=s.width()/2}switch(vi(n.anchor,T0)){case Ma:D-=s.height();break;case SW:D-=s.height()/2}for($=Math.round($),D=Math.round(D),s.clear(),E=0;E<f;++E)t[E].mark.bounds.clear();for(E=0;E<f;++E)P=t[E],P.x+=_[E]+=$,P.y+=w[E]+=D,s.union(P.mark.bounds.union(P.bounds.translate(_[E],w[E]))),r&&e.dirty(P);return s}function PXt(e,t,n){var r=IXt(t),i=r.marks,s=n.bounds===die?NXt:OXt,o=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,c,d,f,h,p,m,g;const y=d5e(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=vi(n.headerBand,T0,null),c=CO(e,r.rowheaders,i,a,l,-vi(o,"rowHeader"),Lye,0,s,"x1",0,a,1,m)),r.colheaders&&(m=vi(n.headerBand,S0,null),d=CO(e,r.colheaders,i,a,a,-vi(o,"columnHeader"),Lye,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=vi(n.footerBand,T0,null),f=CO(e,r.rowfooters,i,a,l,vi(o,"rowFooter"),Fye,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=vi(n.footerBand,S0,null),h=CO(e,r.colfooters,i,a,a,vi(o,"columnFooter"),Fye,1,s,"y2",u-a,1,a,m)),r.rowtitle&&(p=vi(n.titleAnchor,T0),g=vi(o,"rowTitle"),g=p===Ma?f+g:c-g,m=vi(n.titleBand,T0,.5),Bye(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=vi(n.titleAnchor,S0),g=vi(o,"columnTitle"),g=p===Ma?h+g:d-g,m=vi(n.titleBand,S0,.5),Bye(e,r.coltitle,g,1,y,m))}function NXt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function OXt(e,t){return e.bounds[t]}function CO(e,t,n,r,i,s,o,a,l,u,c,d,f,h){var p=n.length,m=0,g=0,y,v,_,w,x,S,E,T,I;if(!p)return m;for(y=c;y<p;y+=d)n[y]&&(m=o(m,l(n[y],u)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=d){for(S=t[v],x=S.mark.bounds,_=y;_>=0&&(E=n[_])==null;_-=f);a?(T=h==null?E.x:Math.round(E.bounds.x1+h*E.bounds.width()),I=m):(T=m,I=h==null?E.y:Math.round(E.bounds.y1+h*E.bounds.height())),x.union(S.bounds.translate(T-(S.x||0),I-(S.y||0))),S.x=T,S.y=I,e.dirty(S),g=o(g,x[u])}return g}function Bye(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function DXt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function MXt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function $Xt(e,t,n,r,i,s,o){const a=DXt(n,t),l=MXt(e,a("offset",0)),u=a("anchor",oie),c=u===Ma?1:u===SW?.5:0,d={align:TW,bounds:a("bounds",die),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Od:d.anchor={x:Math.floor(r.x1)-l,column:Ma,y:c*(o||r.height()+2*r.y1),row:u};break;case Fd:d.anchor={x:Math.ceil(r.x2)+l,y:c*(o||r.height()+2*r.y1),row:u};break;case $E:d.anchor={y:Math.floor(i.y1)-l,row:Ma,x:c*(s||i.width()+2*i.x1),column:u};break;case ky:d.anchor={y:Math.ceil(i.y2)+l,x:c*(s||i.width()+2*i.x1),column:u};break;case cXt:d.anchor={x:l,y:l};break;case dXt:d.anchor={x:s-l,y:l,column:Ma};break;case fXt:d.anchor={x:l,y:o-l,row:Ma};break;case hXt:d.anchor={x:s-l,y:o-l,column:Ma,row:Ma};break}return d}function LXt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),jXt(e,n,n.items[0].items[0]),s=FXt(n,s),l=2*n.padding,u=2*n.padding,s.empty()||(l=Math.ceil(s.width()+l),u=Math.ceil(s.height()+u)),r.type===bXt&&BXt(n.items[0].items[0].items[0].items),i!==cie&&(n.x=o=0,n.y=a=0),n.width=l,n.height=u,gg(s.set(o,a,o+l,a+u),n),n.mark.bounds.clear().union(s),n}function FXt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function jXt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&gC(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,l=t.titlePadding||0,u=r-o.x,c=r-o.y;switch(o.orient){case Od:i+=Math.ceil(o.bounds.width())+l;break;case Fd:case ky:break;default:s+=o.bounds.height()+l}switch((i||s)&&gC(e,n,i,s),o.orient){case Od:c+=tw(t,n,o,a,1,1);break;case Fd:u+=tw(t,n,o,Ma,0,0)+l,c+=tw(t,n,o,a,1,1);break;case ky:u+=tw(t,n,o,a,0,0),c+=tw(t,n,o,Ma,-1,0,1)+l;break;default:u+=tw(t,n,o,a,0,0)}(u||c)&&gC(e,o,u,c),(u=Math.round(o.bounds.x1-r))<0&&(gC(e,n,-u,0),gC(e,o,-u,0))}}function tw(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(s||!l)&&!o?t.items[0]:t,c=u.bounds[i?"y2":"x2"]-e.padding,d=l&&s?c:0,f=l&&s?0:c,h=i<=0?0:Yre(n);return Math.round(r===oie?d:r===Ma?f-h:.5*(c-h))}function gC(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function BXt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function zXt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,l=s.anchor,u=s.offset,c=s.padding,d=s.items[0].items[0],f=s.items[1]&&s.items[1].items[0],h=a===Od||a===Fd?r:n,p=0,m=0,g=0,y=0,v=0,_;if(o!==Qj?a===Od?(p=i.y2,h=i.y1):a===Fd?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Od&&(p=r,h=0),_=l===oie?p:l===Ma?h:(p+h)/2,f&&f.text){switch(a){case $E:case ky:v=d.bounds.height()+c;break;case Od:y=d.bounds.width()+c;break;case Fd:y=-d.bounds.width()-c;break}Zo.clear().union(f.bounds),Zo.translate(y-(f.x||0),v-(f.y||0)),Xw(f,"x",y)|Xw(f,"y",v)&&(e.dirty(f),f.bounds.clear().union(Zo),f.mark.bounds.clear().union(Zo),e.dirty(f)),Zo.clear().union(f.bounds)}else Zo.clear();switch(Zo.union(d.bounds),a){case $E:m=_,g=i.y1-Zo.height()-u;break;case Od:m=i.x1-Zo.width()-u,g=_;break;case Fd:m=i.x2+Zo.width()+u,g=_;break;case ky:m=_,g=i.y2+u;break;default:m=s.x,g=s.y}return Xw(s,"x",m)|Xw(s,"y",g)&&(Zo.translate(m,g),e.dirty(s),s.bounds.clear().union(Zo),t.bounds.clear().union(Zo),e.dirty(s)),s.bounds}function f5e(e){ke.call(this,null,e)}lt(f5e,ke,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&PXt(n,r,e.layout),VXt(n,r,e)}),UXt(e.mark.group)?t.reflow():t}});function UXt(e){return e&&e.mark.role!=="legend-entry"}function VXt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new vs().set(0,0,i,s),a=o.clone(),l=o.clone(),u=[],c,d,f,h,p,m;for(p=0,m=r.length;p<m;++p)switch(d=r[p],d.role){case aie:h=TXt(d)?a:l,h.union(AXt(e,d,i,s));break;case lie:c=d;break;case uie:u.push(LXt(e,d));break;case gXt:case yXt:case Qje:case Jje:case Zje:case e5e:case t5e:case n5e:a.union(d.bounds),l.union(d.bounds);break;default:o.union(d.bounds)}if(u.length){const g={};u.forEach(y=>{f=y.orient||Fd,f!==cie&&(g[f]||(g[f]=[])).push(y)});for(const y in g){const v=g[y];d5e(e,v,$Xt(v,y,n.legends,a,l,i,s))}u.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===r5e||n.autosize.type===i5e||n.autosize.type===s5e))switch(y.orient){case Od:case Fd:o.add(v.x1,0).add(v.x2,0);break;case $E:case ky:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(l),c&&o.union(zXt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),HXt(e,t,o,n)}function HXt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const f=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===vXt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===cie?(u=0,d=0,l=o,c=a):s===r5e?(l=Math.max(0,o-u-f),c=Math.max(0,a-d-h)):s===i5e?(l=Math.max(0,o-u-f),a=c+d+h):s===s5e?(o=l+u+f,c=Math.max(0,a-d-h)):s===_Xt&&(o=l+u+f,a=c+d+h),e._resizeView(o,a,l,c,[u,d],i.resize)}const qXt=Object.freeze(Object.defineProperty({__proto__:null,bound:o5e,identifier:fie,mark:a5e,overlap:l5e,render:c5e,viewlayout:f5e},Symbol.toStringTag,{value:"Module"}));function h5e(e){ke.call(this,null,e)}lt(h5e,ke,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Rre(s,o,e.minstep),l=e.format||B4e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?j4e(s,e.values,a):Pre(s,a);return i&&(r.rem=i),i=u.map((c,d)=>vr({index:d/(u.length-1||1),value:c,label:l(c)})),e.extra&&i.length&&i.push(vr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function p5e(e){ke.call(this,null,e)}function WXt(){return vr({})}function GXt(e){const t=tT().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}lt(p5e,ke,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||WXt,s=e.key||$t,o=this.value;return Be(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Le("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=GXt(s)),t.visit(t.ADD,a=>{const l=s(a);let u=o.get(l);u?u.exit?(o.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),o.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=s(a),u=o.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=s(a),u=o.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function m5e(e){ke.call(this,null,e)}lt(m5e,ke,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Be(s))if(n.changed()||s.every(d=>i[d]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Vg,l=i.enter||Vg,u=i.exit||Vg,c=(s&&!o?i[s]:a)||Vg;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{l(d,e),a(d,e)}),n.modifies(l.output),n.modifies(a.output),c!==Vg&&c!==a&&(t.visit(t.ADD,d=>{c(d,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==Vg&&(t.visit(t.REM,d=>{u(d,e)}),n.modifies(u.output)),o||c!==Vg){const d=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(d,f=>{const h=l(f,e)||r;(c(f,e)||h)&&n.mod.push(f)}),n.mod.length&&n.modifies(l.output)):t.visit(d,f=>{(c(f,e)||r)&&n.mod.push(f)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function g5e(e){ke.call(this,[],e)}lt(g5e,ke,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||QD,o=e.scale,a=+e.limit,l=Rre(o,e.count==null?5:e.count,e.minstep),u=!!e.values||s===QD,c=e.format||H4e(n,o,l,s,e.formatSpecifier,e.formatType,u),d=e.values||V4e(o,l),f,h,p,m,g;return i&&(r.rem=i),s===QD?(a&&d.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=d.slice(0,a-1),g=!0):i=d,En(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=wa(m=p||8),i=i.map((y,v)=>vr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=d[i.length],i.push(vr({index:i.length,label:`…${d.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===_Gt?(f=o.domain(),h=$4e(o,f[0],Xn(f)),d.length<3&&!e.values&&f[0]!==Xn(f)&&(d=[f[0],Xn(f)]),i=d.map((y,v)=>vr({index:v,label:c(y,v,d),value:y,perc:h(y)}))):(p=d.length-1,h=PGt(o),i=d.map((y,v)=>vr({index:v,label:c(y,v,d),value:y,perc:v?h(y):0,perc2:v===p?1:h(d[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const YXt=e=>e.source.x,KXt=e=>e.source.y,XXt=e=>e.target.x,QXt=e=>e.target.y;function hie(e){ke.call(this,{},e)}hie.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};lt(hie,ke,{transform(e,t){var n=e.sourceX||YXt,r=e.sourceY||KXt,i=e.targetX||XXt,s=e.targetY||QXt,o=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=zye.get(l+"-"+a)||zye.get(l);return u||Le("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=u(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const y5e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,JXt=(e,t,n,r)=>y5e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),v5e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},ZXt=(e,t,n,r)=>v5e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),b5e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},eQt=(e,t,n,r)=>b5e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),tQt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,nQt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,rQt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},iQt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},sQt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},oQt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*s+"C"+l*i+","+l*s+" "+l*o+","+l*a+" "+r*o+","+r*a},zye=tT({line:y5e,"line-radial":JXt,arc:v5e,"arc-radial":ZXt,curve:b5e,"curve-radial":eQt,"orthogonal-horizontal":tQt,"orthogonal-vertical":nQt,"orthogonal-radial":rQt,"diagonal-horizontal":iQt,"diagonal-vertical":sQt,"diagonal-radial":oQt});function pie(e){ke.call(this,null,e)}pie.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};lt(pie,ke,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||JS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(s),c=u.length,d=o,f=(a-o)/hI(u),h=Ol(c),p,m,g;for(e.sort&&h.sort((y,v)=>u[y]-u[v]),p=0;p<c;++p)g=u[h[p]],m=l[h[p]],m[r]=d,m[i]=d+=g*f;return this.value=u,t.reflow(e.modified()).modifies(n)}});const aQt=5;function lQt(e){const t=e.type;return!e.bins&&(t===RE||t===eP||t===tP)}function _5e(e){return Are(e)&&e!==Lh}const uQt=cf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function w5e(e){ke.call(this,null,e),this.modified(!0)}lt(w5e,ke,{transform(e,t){var n=t.dataflow,r=this.value,i=cQt(e);(!r||i!==r.type)&&(this.value=r=pr(i)());for(i in e)if(!uQt[i]){if(i==="padding"&&_5e(r.type))continue;En(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return gQt(r,e,mQt(r,e,fQt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function cQt(e){var t=e.type,n="",r;return t===Lh?Lh+"-"+RE:(dQt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Lh+"-":r===3?sT+"-":""),(n+t||RE).toLowerCase())}function dQt(e){const t=e.type;return Are(t)&&t!==Sb&&t!==Tb&&(e.scheme||e.range&&e.range.length&&e.range.every(yt))}function fQt(e,t,n){const r=hQt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&lQt(e),a,l;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return _5e(s)&&t.padding&&i[0]!==Xn(i)&&(i=pQt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(x5e(s,i,n)),s===Ere&&e.unknown(t.domainImplicit?vH:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Rre(e,t.nice)||null),i.length}function hQt(e,t,n){return t?(e.domain(x5e(e.type,t,n)),t.length):-1}function pQt(e,t,n,r,i,s){var o=Math.abs(Xn(n)-n[0]),a=o/(o-2*r),l=e===eg?gne(t,null,a):e===tP?uL(t,null,a,.5):e===eP?uL(t,null,a,i||1):e===$j?yne(t,null,a,s||1):mne(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function x5e(e,t,n){if(P4e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+st(t))}return t}function mQt(e,t,n){let r=t.bins;if(r&&!Be(r)){const i=e.domain(),s=i[0],o=Xn(i),a=r.step;let l=r.start==null?s:r.start,u=r.stop==null?o:r.stop;a||Le("Scale bins parameter missing step property."),l<s&&(l=a*Math.ceil(s/a)),u>o&&(u=a*Math.floor(o/a)),r=Ol(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Sre&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function gQt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=yQt(r,t,n);else if(t.scheme&&(s=vQt(r,t,n),En(s))){if(e.interpolator)return e.interpolator(s);Le(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&N4e(r))return e.interpolator(jj(CW(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(Ire(t.interpolate,t.interpolateGamma)):En(e.round)?e.round(i):En(e.rangeRound)&&e.interpolate(i?dR:ug),s&&e.range(CW(s,t.reverse))}function yQt(e,t,n){e!==T4e&&e!==dW&&Le("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===dW?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*xre(n,i,r)]}function vQt(e,t,n){var r=t.schemeExtent,i,s;return Be(t.scheme)?s=jj(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=kre(i),s||Le(`Unrecognized scheme name: ${t.scheme}`)),n=e===Fj?n+1:e===Sre?n-1:e===PE||e===Lj?+t.schemeCount||aQt:n,N4e(e)?Uye(s,r,t.reverse):En(s)?M4e(Uye(s,r),n):e===Ere?s:s.slice(0,n)}function Uye(e,t,n){return En(e)&&(t||n)?D4e(e,CW(t||[0,1],n)):e}function CW(e,t){return t?e.slice().reverse():e}function E5e(e){ke.call(this,null,e)}lt(E5e,ke,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(u_(e.sort)),this.modified(n),t}});const Vye="zero",S5e="center",T5e="normalize",C5e=["y0","y1"];function mie(e){ke.call(this,null,e)}mie.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Vye,values:[Vye,S5e,T5e]},{name:"as",type:"string",array:!0,length:2,default:C5e}]};lt(mie,ke,{transform(e,t){var n=e.as||C5e,r=n[0],i=n[1],s=u_(e.sort),o=e.field||JS,a=e.offset===S5e?bQt:e.offset===T5e?_Qt:wQt,l,u,c,d;for(l=xQt(t.source,e.groupby,s,o),u=0,c=l.length,d=l.max;u<c;++u)a(l[u],d,o,r,i);return t.reflow(e.modified()).modifies(n)}});function bQt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,l;a<o;++a)l=e[a],l[r]=s,l[i]=s+=Math.abs(n(l))}function _Qt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,l=0,u=0,c;l<a;++l)c=e[l],c[r]=o,c[i]=o=s*(u+=Math.abs(n(c)))}function wQt(e,t,n,r,i){for(var s=0,o=0,a=e.length,l=0,u,c;l<a;++l)c=e[l],u=+n(c),u<0?(c[r]=o,c[i]=o+=u):(c[r]=s,c[i]=s+=u)}function xQt(e,t,n,r){var i=[],s=m=>m(c),o,a,l,u,c,d,f,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,l=e.length;a<l;++a)c=e[a],d=t.map(s),f=o[d],f||(o[d]=f=[],i.push(f)),f.push(c);for(d=0,p=0,u=i.length;d<u;++d){for(f=i[d],a=0,h=0,l=f.length;a<l;++a)h+=Math.abs(r(f[a]));f.sum=h,h>p&&(p=h),n&&f.sort(n)}return i.max=p,i}const EQt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:h5e,datajoin:p5e,encode:m5e,legendentries:g5e,linkpath:hie,pie,scale:w5e,sortitems:E5e,stack:mie},Symbol.toStringTag,{value:"Module"}));var SQt=Math.abs,AW=Math.cos,CL=Math.sin,TQt=1e-6,A5e=Math.PI,IW=A5e/2,Hye=CQt(2);function qye(e){return e>1?IW:e<-1?-IW:Math.asin(e)}function CQt(e){return e>0?Math.sqrt(e):0}function AQt(e,t){var n=e*CL(t),r=30,i;do t-=i=(t+CL(t)-n)/(1+AW(t));while(SQt(i)>TQt&&--r>0);return t/2}function IQt(e,t,n){function r(i,s){return[e*i*AW(s=AQt(n,s)),t*CL(s)]}return r.invert=function(i,s){return s=qye(s/t),[i/(e*AW(s)),qye((2*s+CL(2*s))/n)]},r}var kQt=IQt(Hye/IW,Hye,A5e);function RQt(){return cp(kQt).scale(169.529)}const PQt=hke(),kW=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function NQt(e,t){return function n(){const r=t();return r.type=e,r.path=hke().projection(r),r.copy=r.copy||function(){const i=n();return kW.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},k4e(r)}}function gie(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(AL[e]=NQt(e,t),this):AL[e]||null}function I5e(e){return e&&e.path||PQt}const AL={albers:mke,albersusa:oSt,azimuthalequalarea:aSt,azimuthalequidistant:lSt,conicconformal:dSt,conicequalarea:K$,conicequidistant:pSt,equalEarth:gSt,equirectangular:fSt,gnomonic:ySt,identity:vSt,mercator:uSt,mollweide:RQt,naturalEarth1:bSt,orthographic:_St,stereographic:wSt,transversemercator:xSt};for(const e in AL)gie(e,AL[e]);function OQt(){}const $p=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function k5e(){var e=1,t=1,n=a;function r(l,u){return u.map(c=>i(l,c))}function i(l,u){var c=[],d=[];return s(l,u,f=>{n(f,l,u),DQt(f)>0?c.push([f]):d.push(f)}),d.forEach(f=>{for(var h=0,p=c.length,m;h<p;++h)if(MQt((m=c[h])[0],f)!==-1){m.push(f);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function s(l,u,c){var d=[],f=[],h,p,m,g,y,v;for(h=p=-1,g=l[0]>=u,$p[g<<1].forEach(_);++h<e-1;)m=g,g=l[h+1]>=u,$p[m|g<<1].forEach(_);for($p[g<<0].forEach(_);++p<t-1;){for(h=-1,g=l[p*e+e]>=u,y=l[p*e]>=u,$p[g<<1|y<<2].forEach(_);++h<e-1;)m=g,g=l[p*e+e+h+1]>=u,v=y,y=l[p*e+h+1]>=u,$p[m|g<<1|y<<2|v<<3].forEach(_);$p[g|y<<3].forEach(_)}for(h=-1,y=l[p*e]>=u,$p[y<<2].forEach(_);++h<e-1;)v=y,y=l[p*e+h+1]>=u,$p[y<<2|v<<3].forEach(_);$p[y<<3].forEach(_);function _(w){var x=[w[0][0]+h,w[0][1]+p],S=[w[1][0]+h,w[1][1]+p],E=o(x),T=o(S),I,k;(I=f[E])?(k=d[T])?(delete f[I.end],delete d[k.start],I===k?(I.ring.push(S),c(I.ring)):d[I.start]=f[k.end]={start:I.start,end:k.end,ring:I.ring.concat(k.ring)}):(delete f[I.end],I.ring.push(S),f[I.end=T]=I):(I=d[T])?(k=f[E])?(delete d[I.start],delete f[k.end],I===k?(I.ring.push(S),c(I.ring)):d[k.start]=f[I.end]={start:k.start,end:I.end,ring:k.ring.concat(I.ring)}):(delete d[I.start],I.ring.unshift(x),d[I.start=E]=I):d[E]=f[T]={start:E,end:T,ring:[x,S]}}}function o(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,c){l.forEach(d=>{var f=d[0],h=d[1],p=f|0,m=h|0,g,y=u[m*e+p];f>0&&f<e&&p===f&&(g=u[m*e+p-1],d[0]=f+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=u[(m-1)*e+p],d[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||Le("invalid size"),e=u,t=c,r},r.smooth=function(l){return arguments.length?(n=l?a:OQt,r):n===a},r}function DQt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function MQt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=$Qt(e,t[n]))return i;return 0}function $Qt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],u=l[0],c=l[1],d=e[a],f=d[0],h=d[1];if(LQt(l,d,t))return 0;c>r!=h>r&&n<(f-u)*(r-c)/(h-c)+u&&(i=-i)}return i}function LQt(e,t,n){var r;return FQt(e,t,n)&&jQt(e[r=+(e[0]===t[0])],n[r],t[r])}function FQt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function jQt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function R5e(e,t,n){return function(r){var i=Xh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,l=t?sy(s,o,e):a/(e+1);return Ol(s+l,o,l)}}function yie(e){ke.call(this,null,e)}yie.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};lt(yie,ke,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||_a,s=k5e().smooth(e.smooth!==!1),o=e.thresholds||BQt(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const c=i(u),d=s.size([c.width,c.height])(c.values,Be(o)?o:o(c.values));zQt(d,c,u,e),d.forEach(f=>{l.push(Aj(u,vr(a!=null?{[a]:f}:f)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function BQt(e,t,n){const r=R5e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Pc(t(i).values)))}function zQt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(En(i)&&(i=i(n,r)),En(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(hr(i)?i:i[0])||1,a=(hr(i)?i:i[1])||1,l=s&&s[0]||0,u=s&&s[1]||0;e.forEach(P5e(t,o,a,l,u))}function P5e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function l(d){d.forEach(u)}function u(d){a&&d.reverse(),d.forEach(c)}function c(d){d[0]=(d[0]-s)*t+r,d[1]=(d[1]-o)*n+i}return function(d){return d.coordinates.forEach(l),d}}function Wye(e,t,n){const r=e>=0?e:$ne(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function Lz(e){return En(e)?e:wa(+e)}function N5e(){var e=l=>l[0],t=l=>l[1],n=JS,r=[-1,-1],i=960,s=500,o=2;function a(l,u){const c=Wye(r[0],l,e)>>o,d=Wye(r[1],l,t)>>o,f=c?c+2:0,h=d?d+2:0,p=2*f+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;l.forEach(w=>{const x=f+(+e(w)>>o),S=h+(+t(w)>>o);x>=0&&x<p&&S>=0&&S<m&&(g[x+S*p]+=+n(w))}),c>0&&d>0?(nw(p,m,g,y,c),rw(p,m,y,g,d),nw(p,m,g,y,c),rw(p,m,y,g,d),nw(p,m,g,y,c),rw(p,m,y,g,d)):c>0?(nw(p,m,g,y,c),nw(p,m,y,g,c),nw(p,m,g,y,c),v=y):d>0&&(rw(p,m,g,y,d),rw(p,m,y,g,d),rw(p,m,g,y,d),v=y);const _=u?Math.pow(2,-2*o):1/hI(v);for(let w=0,x=p*m;w<x;++w)v[w]*=_;return{values:v,scale:1<<o,width:p,height:m,x1:f,y1:h,x2:f+(i>>o),y2:h+(s>>o)}}return a.x=function(l){return arguments.length?(e=Lz(l),a):e},a.y=function(l){return arguments.length?(t=Lz(l),a):t},a.weight=function(l){return arguments.length?(n=Lz(l),a):n},a.size=function(l){if(!arguments.length)return[i,s];var u=+l[0],c=+l[1];return u>=0&&c>=0||Le("invalid size"),i=u,s=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||Le("invalid cell size"),o=Math.floor(Math.log(l)/Math.LN2),a):1<<o},a.bandwidth=function(l){return arguments.length?(l=gt(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&Le("invalid bandwidth"),r=l,a):r},a}function nw(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+o*e]),a>=i&&(a>=s&&(l-=n[a-s+o*e]),r[a-i+o*e]=l/Math.min(a+1,e-1+s-a,s))}function rw(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[o+a*e]),a>=i&&(a>=s&&(l-=n[o+(a-s)*e]),r[o+(a-i)*e]=l/Math.min(a+1,t-1+s-a,s))}function vie(e){ke.call(this,null,e)}vie.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const UQt=["x","y","weight","size","cellSize","bandwidth"];function O5e(e,t){return UQt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}lt(vie,ke,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=VQt(r,e.groupby),s=(e.groupby||[]).map(Gi),o=O5e(N5e(),e),a=e.as||"grid",l=[];function u(c,d){for(let f=0;f<s.length;++f)c[s[f]]=d[f];return c}return l=i.map(c=>vr(u({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function VQt(e,t){var n=[],r=c=>c(a),i,s,o,a,l,u;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function bie(e){ke.call(this,null,e)}bie.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};lt(bie,ke,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=k5e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||R5e(e.count||10,e.nice,!!i),o=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=O5e(N5e(),e)(i,!0),l=P5e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Be(s)?s:s(i),i=r.size(o)(i,s),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(vr),n}});const RW="Feature",_ie="FeatureCollection",HQt="MultiPoint";function wie(e){ke.call(this,null,e)}wie.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};lt(wie,ke,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&_a,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(ha(a))||s&&t.modified(ha(s))||o&&t.modified(ha(o)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,c=>n.push(a(c))),s&&o&&(t.visit(l,c=>{var d=s(c),f=o(c);d!=null&&f!=null&&(d=+d)===d&&(f=+f)===f&&r.push([d,f])}),n=n.concat({type:RW,geometry:{type:HQt,coordinates:r}})),this.value={type:_ie,features:n}}});function xie(e){ke.call(this,null,e)}xie.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};lt(xie,ke,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||_a,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=I5e(e.projection),n.materialize().reflow()):o=i===_a||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=qQt(r,e.pointRadius);return n.visit(o,l=>l[s]=r(i(l))),r.pointRadius(a),n.modifies(s)}});function qQt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Eie(e){ke.call(this,null,e)}Eie.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};lt(Eie,ke,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],l;function u(c){const d=n([r(c),i(c)]);d?(c[o]=d[0],c[a]=d[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(s)}});function Sie(e){ke.call(this,null,e)}Sie.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};lt(Sie,ke,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=WQt(I5e(e.projection),e.field||Vc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function WQt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Tie(e){ke.call(this,[],e),this.generator=jEt()}Tie.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};lt(Tie,ke,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)En(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(O6e(n[0],i)):t.add.push(vr(i)),n[0]=i,t}});function Cie(e){ke.call(this,null,e)}Cie.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};lt(Cie,ke,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||_a,s=YQt(e.opacity,e),o=GQt(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?Pc(n.map(u=>Pc(i(u).values))):0};return n.forEach(u=>{const c=i(u),d=xn({},u,l);r||(d.$max=Pc(c.values||[])),u[a]=KQt(c,d,o.dep?o:wa(o(d)),s.dep?s:wa(s(d)))}),t.reflow(!0).modifies(a)}});function GQt(e,t){let n;return En(e)?(n=r=>oy(e(r,t)),n.dep=D5e(e)):n=wa(oy(e||"#888")),n}function YQt(e,t){let n;return En(e)?(n=r=>e(r,t),n.dep=D5e(e)):e?n=wa(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function D5e(e){if(!En(e))return!1;const t=cf(ha(e));return t.$x||t.$y||t.$value||t.$max}function KQt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||s,c=e.values,d=c?g=>c[g]:d0,f=K0(l-o,u-a),h=f.getContext("2d"),p=h.getImageData(0,0,l-o,u-a),m=p.data;for(let g=a,y=0;g<u;++g){t.$y=g-a;for(let v=o,_=g*i;v<l;++v,y+=4){t.$x=v-o,t.$value=d(v+_);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),f}function M5e(e){ke.call(this,null,e),this.modified(!0)}lt(M5e,ke,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=QQt(e.type),kW.forEach(r=>{e[r]!=null&&Gye(n,r,e[r])})):kW.forEach(r=>{e.modified(r)&&Gye(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&XQt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function XQt(e,t){const n=JQt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function QQt(e){const t=gie((e||"mercator").toLowerCase());return t||Le("Unrecognized projection type: "+e),t()}function Gye(e,t,n){En(e[t])&&e[t](n)}function JQt(e){return e=gt(e),e.length===1?e[0]:{type:_ie,features:e.reduce((t,n)=>t.concat(ZQt(n)),[])}}function ZQt(e){return e.type===_ie?e.features:gt(e).filter(t=>t!=null).map(t=>t.type===RW?t:{type:RW,geometry:t})}const eJt=Object.freeze(Object.defineProperty({__proto__:null,contour:bie,geojson:wie,geopath:xie,geopoint:Eie,geoshape:Sie,graticule:Tie,heatmap:Cie,isocontour:yie,kde2d:vie,projection:M5e},Symbol.toStringTag,{value:"Module"})),Yye={center:kxt,collide:Yxt,nbody:sEt,link:Xxt,x:oEt,y:aEt},x2="forces",PW=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],tJt=["static","iterations"],$5e=["x","y","vx","vy"];function Aie(e){ke.call(this,null,e)}Aie.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:$5e}]};lt(Aie,ke,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(PW),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&L5e(n,e,0,t)):(this.value=n=rJt(t.source,e),n.on("tick",nJt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(tJt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==x2||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies($5e)}});function nJt(e,t){return()=>e.touch(t).run()}function rJt(e,t){const n=iEt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),L5e(n,t,!0).on("end",()=>s=!0)}function L5e(e,t,n,r){var i=gt(t.forces),s,o,a,l;for(s=0,o=PW.length;s<o;++s)a=PW[s],a!==x2&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)l=x2+s,a=n||t.modified(x2,s)?sJt(i[s]):r&&iJt(i[s],r)?e.force(l):null,a&&e.force(l,a);for(o=e.numForces||0;s<o;++s)e.force(x2+s,null);return e.numForces=i.length,e}function iJt(e,t){var n,r;for(n in e)if(En(r=e[n])&&t.modified(ha(r)))return 1;return 0}function sJt(e){var t,n;bt(Yye,e.force)||Le("Unrecognized force: "+e.force),t=Yye[e.force]();for(n in e)En(t[n])&&oJt(t[n],e[n],e);return t}function oJt(e,t,n){e(En(t)?r=>t(r,n):t)}const aJt=Object.freeze(Object.defineProperty({__proto__:null,force:Aie},Symbol.toStringTag,{value:"Module"}));function NW(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Iie(e){ke.call(this,null,e)}Iie.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const lJt=e=>e.values;lt(Iie,ke,{transform(e,t){t.source||Le("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&Cj(o.data)&&i.rem.push(o.data)}),this.value=s=BJ({values:gt(e.keys).reduce((o,a)=>(o.key(a),o),uJt()).entries(i.source)},lJt),n&&s.each(o=>{o.children&&(o=vr(o.data),i.add.push(o),i.source.push(o))}),NW(s,$t,$t)),i.source.root=s,i}});function uJt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],l={},u={};let c=-1,d,f,h;for(;++c<o;)d=a(f=i[c])+"",(h=l[d])?h.push(f):l[d]=[f];for(d in l)u[d]=n(l[d],s);return u}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function yg(e){ke.call(this,null,e)}const cJt=(e,t)=>e.parent===t.parent?1:2;lt(yg,ke,{transform(e,t){(!t.source||!t.source.root)&&Le(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(u_(e.sort,o=>o.data)),dJt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?cJt:JS);try{this.value=n(i)}catch(o){Le(o)}return i.each(o=>fJt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function dJt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function fJt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const OW=["x","y","r","depth","children"];function kie(e){yg.call(this,e)}kie.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:OW.length,default:OW}]};lt(kie,yg,{layout:aTt,params:["radius","size","padding"],fields:OW});const DW=["x0","y0","x1","y1","depth","children"];function Rie(e){yg.call(this,e)}Rie.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:DW.length,default:DW}]};lt(Rie,yg,{layout:lTt,params:["size","round","padding"],fields:DW});function Pie(e){ke.call(this,null,e)}Pie.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};lt(Pie,ke,{transform(e,t){t.source||Le("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?NW(Ehe().id(e.key).parentId(e.parentKey)(i.source),e.key,Hc):NW(Ehe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Kye={tidy:vTt,cluster:RSt},MW=["x","y","depth","children"];function Nie(e){yg.call(this,e)}Nie.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:MW.length,default:MW}]};lt(Nie,yg,{layout(e){const t=e||"tidy";if(bt(Kye,t))return Kye[t]();Le("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:MW});function Oie(e){ke.call(this,[],e)}Oie.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};lt(Oie,ke,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Le("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[$t(o)]=1),r.each(o=>{const a=o.data,l=o.parent&&o.parent.data;l&&s[$t(a)]&&s[$t(l)]&&i.add.push(vr({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[$t(o)]=1),n.forEach(o=>{(s[$t(o.source)]||s[$t(o.target)])&&i.mod.push(o)})),i}});const Xye={binary:_Tt,dice:mR,slice:G6,slicedice:wTt,squarify:Oke,resquarify:xTt},$W=["x0","y0","x1","y1","depth","children"];function Die(e){yg.call(this,e)}Die.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:$W.length,default:$W}]};lt(Die,yg,{layout(){const e=bTt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{bt(Xye,t)?e.tile(Xye[t]):Le("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:$W});const hJt=Object.freeze(Object.defineProperty({__proto__:null,nest:Iie,pack:kie,partition:Rie,stratify:Pie,tree:Nie,treelinks:Oie,treemap:Die},Symbol.toStringTag,{value:"Module"})),Fz=4278190080;function pJt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function mJt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,l=K0(s,o).getContext("2d"),u=K0(s,o).getContext("2d"),c=a&&K0(s,o).getContext("2d");n.forEach(T=>oM(l,T,!1)),oM(u,t,!1),a&&oM(c,t,!0);const d=jz(l,s,o),f=jz(u,s,o),h=a&&jz(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,_,w,x,S,E;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,x=d[w]&Fz,E=f[w]&Fz,S=a&&h[w]&Fz,(x||S||E)&&(v=e(g),_=e(y),!i&&(x||E)&&p.set(v,_),a&&(x||S)&&m.set(v,_));return[p,m]}function jz(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function oM(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>oM(e,s.items,n))}):Gu[r].draw(e,{items:n?t.map(gJt):t})}function gJt(e){const t=Aj(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Lp=5,Ra=31,hk=32,Zg=new Uint32Array(hk+1),Ad=new Uint32Array(hk+1);Ad[0]=0;Zg[0]=~Ad[0];for(let e=1;e<=hk;++e)Ad[e]=Ad[e-1]<<1|1,Zg[e]=~Ad[e];function yJt(e,t){const n=new Uint32Array(~~((e*t+hk)/hk));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Lp]&1<<(a&Ra)},set:(s,o)=>{const a=o*e+s;r(a>>>Lp,1<<(a&Ra))},clear:(s,o)=>{const a=o*e+s;i(a>>>Lp,~(1<<(a&Ra)))},getRange:(s,o,a,l)=>{let u=l,c,d,f,h;for(;u>=o;--u)if(c=u*e+s,d=u*e+a,f=c>>>Lp,h=d>>>Lp,f===h){if(n[f]&Zg[c&Ra]&Ad[(d&Ra)+1])return!0}else{if(n[f]&Zg[c&Ra]||n[h]&Ad[(d&Ra)+1])return!0;for(let p=f+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,l)=>{let u,c,d,f,h;for(;o<=l;++o)if(u=o*e+s,c=o*e+a,d=u>>>Lp,f=c>>>Lp,d===f)r(d,Zg[u&Ra]&Ad[(c&Ra)+1]);else for(r(d,Zg[u&Ra]),r(f,Ad[(c&Ra)+1]),h=d+1;h<f;++h)r(h,4294967295)},clearRange:(s,o,a,l)=>{let u,c,d,f,h;for(;o<=l;++o)if(u=o*e+s,c=o*e+a,d=u>>>Lp,f=c>>>Lp,d===f)i(d,Ad[u&Ra]|Zg[(c&Ra)+1]);else for(i(d,Ad[u&Ra]),i(f,Zg[(c&Ra)+1]),h=d+1;h<f;++h)i(h,0)},outOfBounds:(s,o,a,l)=>s<0||o<0||l>=t||a>=e}}function vJt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>yJt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function bJt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,l=a.length,u=o.datum.fontSize,c=Ru.width(o.datum,o.datum.text);let d=0,f,h,p,m,g,y,v;for(let _=0;_<l;++_)f=a[_].x,p=a[_].y,h=a[_].x2===void 0?f:a[_].x2,m=a[_].y2===void 0?p:a[_].y2,g=(f+h)/2,y=(p+m)/2,v=Math.abs(h-f+m-p),v>=d&&(d=v,o.x=g,o.y=y);return g=c/2,y=u/2,f=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",f<0&&h<=i?o.align="left":0<=f&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function IL(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function C0(e,t,n,r,i,s,o,a){const l=i*s/(r*2),u=e(t-l),c=e(t+l),d=e(n-(s=s/2)),f=e(n+s);return o.outOfBounds(u,d,c,f)||o.getRange(u,d,c,f)||a&&a.getRange(u,d,c,f)}function _Jt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function l(u,c,d,f,h){const p=e.invert(u),m=e.invert(c);let g=d,y=s,v;if(!IL(p,m,f,h,i,s)&&!C0(e,p,m,h,f,g,o,a)&&!C0(e,p,m,h,f,h,o,null)){for(;y-g>=1;)v=(g+y)/2,C0(e,p,m,h,f,v,o,a)?y=v:g=v;if(g>d)return[p,m,g,!0]}}return function(u){const c=u.datum.datum.items[r].items,d=c.length,f=u.datum.fontSize,h=Ru.width(u.datum,u.datum.text);let p=n?f:0,m=!1,g=!1,y=0,v,_,w,x,S,E,T,I,k,P,L,R,$,D,O,F,U;for(let V=0;V<d;++V){for(v=c[V].x,w=c[V].y,_=c[V].x2===void 0?v:c[V].x2,x=c[V].y2===void 0?w:c[V].y2,v>_&&(U=v,v=_,_=U),w>x&&(U=w,w=x,x=U),k=e(v),L=e(_),P=~~((k+L)/2),R=e(w),D=e(x),$=~~((R+D)/2),T=P;T>=k;--T)for(I=$;I>=R;--I)F=l(T,I,p,h,f),F&&([u.x,u.y,p,m]=F);for(T=P;T<=L;++T)for(I=$;I<=D;++I)F=l(T,I,p,h,f),F&&([u.x,u.y,p,m]=F);!m&&!n&&(O=Math.abs(_-v+x-w),S=(v+_)/2,E=(w+x)/2,O>=y&&!IL(S,E,h,f,i,s)&&!C0(e,S,E,f,h,f,o,null)&&(y=O,u.x=S,u.y=E,g=!0))}return m||g?(S=h/2,E=f/2,o.setRange(e(u.x-S),e(u.y-E),e(u.x+S),e(u.y+E)),u.align="center",u.baseline="middle",!0):!1}}const wJt=[-1,-1,1,1],xJt=[-1,1,-1,1];function EJt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[r].items,d=c.length,f=u.datum.fontSize,h=Ru.width(u.datum,u.datum.text),p=[];let m=n?f:0,g=!1,y=!1,v=0,_,w,x,S,E,T,I,k,P,L,R,$;for(let D=0;D<d;++D){for(_=c[D].x,x=c[D].y,w=c[D].x2===void 0?_:c[D].x2,S=c[D].y2===void 0?x:c[D].y2,p.push([e((_+w)/2),e((x+S)/2)]);p.length;)if([I,k]=p.pop(),!(o.get(I,k)||a.get(I,k)||l.get(I,k))){l.set(I,k);for(let O=0;O<4;++O)E=I+wJt[O],T=k+xJt[O],l.outOfBounds(E,T,E,T)||p.push([E,T]);if(E=e.invert(I),T=e.invert(k),P=m,L=s,!IL(E,T,h,f,i,s)&&!C0(e,E,T,f,h,P,o,a)&&!C0(e,E,T,f,h,f,o,null)){for(;L-P>=1;)R=(P+L)/2,C0(e,E,T,f,h,R,o,a)?L=R:P=R;P>m&&(u.x=E,u.y=T,m=P,g=!0)}}!g&&!n&&($=Math.abs(w-_+S-x),E=(_+w)/2,T=(x+S)/2,$>=v&&!IL(E,T,h,f,i,s)&&!C0(e,E,T,f,h,f,o,null)&&(v=$,u.x=E,u.y=T,y=!0))}return g||y?(E=h/2,T=f/2,o.setRange(e(u.x-E),e(u.y-T),e(u.x+E),e(u.y+T)),u.align="center",u.baseline="middle",!0):!1}}const SJt=["right","center","left"],TJt=["bottom","middle","top"];function CJt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],l=r.length;return function(u){const c=u.boundary,d=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let f=u.textWidth??0,h,p,m,g,y,v,_,w,x,S,E,T,I,k,P;for(let L=0;L<l;++L){if(h=(n[L]&3)-1,p=(n[L]>>>2&3)-1,m=h===0&&p===0||r[L]<0,g=h&&p?Math.SQRT1_2:1,y=r[L]<0?-1:1,v=c[1+h]+r[L]*h*g,E=c[4+p]+y*d*p/2+r[L]*p*g,w=E-d/2,x=E+d/2,T=e(v),k=e(w),P=e(x),!f)if(Qye(T,T,k,P,o,a,v,v,w,x,c,m))f=Ru.width(u.datum,u.datum.text);else continue;if(S=v+y*f*h/2,v=S-f/2,_=S+f/2,T=e(v),I=e(_),Qye(T,I,k,P,o,a,v,_,w,x,c,m))return u.x=h?h*y<0?_:v:S,u.y=p?p*y<0?x:w:E,u.align=SJt[h*y+1],u.baseline=TJt[p*y+1],o.setRange(T,k,I,P),!0}return!1}}function Qye(e,t,n,r,i,s,o,a,l,u,c,d){return!(i.outOfBounds(e,n,t,r)||(d&&s||i).getRange(e,n,t,r))}const Bz=0,zz=4,Uz=8,Vz=0,Hz=1,qz=2,AJt={"top-left":Bz+Vz,top:Bz+Hz,"top-right":Bz+qz,left:zz+Vz,middle:zz+Hz,right:zz+qz,"bottom-left":Uz+Vz,bottom:Uz+Hz,"bottom-right":Uz+qz},IJt={naive:bJt,"reduced-search":_Jt,floodfill:EJt};function kJt(e,t,n,r,i,s,o,a,l,u,c){if(!e.length)return e;const d=Math.max(r.length,i.length),f=RJt(r,d),h=PJt(i,d),p=NJt(e[0].datum),m=p==="group"&&e[0].datum.items[l].marktype,g=m==="area",y=OJt(p,m,a,l),v=u===null||u===1/0,_=g&&c==="naive";let w=-1,x=-1;const S=e.map(k=>{const P=v?Ru.width(k,k.text):void 0;return w=Math.max(w,P),x=Math.max(x,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:P}});u=u===null||u===1/0?Math.max(w,x)+Math.max(...r):u;const E=vJt(t[0],t[1],u);let T;if(!_){n&&S.sort((L,R)=>n(L.datum,R.datum));let k=!1;for(let L=0;L<h.length&&!k;++L)k=h[L]===5||f[L]<0;const P=(p&&o||g)&&e.map(L=>L.datum);T=s.length||P?mJt(E,P||[],s,k,g):pJt(E,o&&S)}const I=g?IJt[c](E,T,o,l):CJt(E,T,h,f);return S.forEach(k=>k.opacity=+I(k)),S}function RJt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function PJt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=AJt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function NJt(e){return e&&e.mark&&e.mark.marktype}function OJt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const LW=["x","y","opacity","align","baseline"],F5e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Mie(e){ke.call(this,null,e)}Mie.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:F5e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:LW.length,default:LW}]};lt(Mie,ke,{transform(e,t){function n(s){const o=e[s];return En(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Le("Size parameter should be specified as a [width, height] array.");const i=e.as||LW;return kJt(t.materialize(t.SOURCE).source||[],e.size,e.sort,gt(e.offset==null?1:e.offset),gt(e.anchor||F5e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const DJt=Object.freeze(Object.defineProperty({__proto__:null,label:Mie},Symbol.toStringTag,{value:"Module"}));function j5e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,l,u;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function $ie(e){ke.call(this,null,e)}$ie.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};lt($ie,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=j5e(r,e.groupby),s=(e.groupby||[]).map(Gi),o=s.length,a=e.as||[Gi(e.x),Gi(e.y)],l=[];i.forEach(u=>{Q6e(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const d={};for(let f=0;f<o;++f)d[s[f]]=u.dims[f];d[a[0]]=c[0],d[a[1]]=c[1],l.push(vr(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const FW={constant:Yne,linear:Kne,log:G6e,exp:Y6e,pow:K6e,quad:Xne,poly:X6e},MJt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Lie(e){ke.call(this,null,e)}Lie.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(FW)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};lt(Lie,ke,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=j5e(r,e.groupby),s=(e.groupby||[]).map(Gi),o=e.method||"linear",a=e.order==null?3:e.order,l=MJt(o,a),u=e.as||[Gi(e.x),Gi(e.y)],c=FW[o],d=[];let f=e.extent;bt(FW,o)||Le("Invalid regression method: "+o),f!=null&&o==="log"&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){d.push(vr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=f||Xh(h,e.x),y=v=>{const _={};for(let w=0;w<s.length;++w)_[s[w]]=h.dims[w];_[u[0]]=v[0],_[u[1]]=v[1],d.push(vr(_))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):Dj(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const $Jt=Object.freeze(Object.defineProperty({__proto__:null,loess:$ie,regression:Lie},Symbol.toStringTag,{value:"Module"}));function Fie(e){ke.call(this,null,e)}Fie.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const LJt=[-1e5,-1e5,1e5,1e5];lt(Fie,ke,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:LJt;const s=this.value=IJ.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const l=s.cellPolygon(o);r[o][n]=l&&!jJt(l)?FJt(l):null}return t.reflow(e.modified()).modifies(n)}});function FJt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function jJt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const BJt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Fie},Symbol.toStringTag,{value:"Module"}));var Wz=Math.PI/180,E2=64,aM=2048;function zJt(){var e=[256,256],t,n,r,i,s,o,a,l=B5e,u=[],c=Math.random,d={};d.layout=function(){for(var p=f(K0()),m=GJt((e[0]>>5)*e[1]),g=null,y=u.length,v=-1,_=[],w=u.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,E)=>E.size-S.size);++v<y;){var x=w[v];x.x=e[0]*(c()+.5)>>1,x.y=e[1]*(c()+.5)>>1,UJt(p,x,w,v),x.hasText&&h(m,x,g)&&(_.push(x),g?HJt(g,x):g=[{x:x.x+x.x0,y:x.y+x.y0},{x:x.x+x.x1,y:x.y+x.y1}],x.x-=e[0]>>1,x.y-=e[1]>>1)}return _};function f(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(E2<<5)/m,p.height=aM/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,_=Math.hypot(e[0],e[1]),w=l(e),x=c()<.5?1:-1,S=-x,E,T,I;(E=w(S+=x))&&(T=~~E[0],I=~~E[1],!(Math.min(Math.abs(T),Math.abs(I))>=_));)if(m.x=y+T,m.y=v+I,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!VJt(m,p,e[0]))&&(!g||qJt(m,g))){for(var k=m.sprite,P=m.width>>5,L=e[0]>>5,R=m.x-(P<<4),$=R&127,D=32-$,O=m.y1-m.y0,F=(m.y+m.y0)*L+(R>>5),U,V=0;V<O;V++){U=0;for(var M=0;M<=P;M++)p[F+M]|=U<<D|(M<P?(U=k[V*P+M])>>>$:0);F+=L}return m.sprite=null,!0}return!1}return d.words=function(p){return arguments.length?(u=p,d):u},d.size=function(p){return arguments.length?(e=[+p[0],+p[1]],d):e},d.font=function(p){return arguments.length?(n=Mv(p),d):n},d.fontStyle=function(p){return arguments.length?(i=Mv(p),d):i},d.fontWeight=function(p){return arguments.length?(s=Mv(p),d):s},d.rotate=function(p){return arguments.length?(o=Mv(p),d):o},d.text=function(p){return arguments.length?(t=Mv(p),d):t},d.spiral=function(p){return arguments.length?(l=YJt[p]||p,d):l},d.fontSize=function(p){return arguments.length?(r=Mv(p),d):r},d.padding=function(p){return arguments.length?(a=Mv(p),d):a},d.random=function(p){return arguments.length?(c=p,d):c},d}function UJt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(E2<<5)/s,aM/s);var o=0,a=0,l=0,u=n.length,c,d,f,h,p;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,f=t.size<<1,t.rotate){var m=Math.sin(t.rotate*Wz),g=Math.cos(t.rotate*Wz),y=c*g,v=c*m,_=f*g,w=f*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,f=~~Math.max(Math.abs(v+_),Math.abs(v-_))}else c=c+31>>5<<5;if(f>l&&(l=f),o+c>=E2<<5&&(o=0,a+=l,l=0),a+f>=aM)break;i.translate((o+(c>>1))/s,(a+(f>>1))/s),t.rotate&&i.rotate(t.rotate*Wz),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=f,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var x=i.getImageData(0,0,(E2<<5)/s,aM/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,d=c>>5,f=t.y1-t.y0,h=0;h<f*d;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var E=0,T=-1;for(p=0;p<f;p++){for(h=0;h<c;h++){var I=d*p+(h>>5),k=x[(a+p)*(E2<<5)+(o+h)<<2]?1<<31-h%32:0;S[I]|=k,E|=k}E?T=p:(t.y0++,f--,p--,a++)}t.y1=t.y0+T,t.sprite=S.slice(0,(t.y1-t.y0)*d)}}}function VJt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,l=e.y1-e.y0,u=(e.y+e.y0)*n+(s>>5),c,d=0;d<l;d++){c=0;for(var f=0;f<=i;f++)if((c<<a|(f<i?(c=r[d*i+f])>>>o:0))&t[u+f])return!0;u+=n}return!1}function HJt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function qJt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function B5e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function WJt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function GJt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Mv(e){return typeof e=="function"?e:function(){return e}}var YJt={archimedean:B5e,rectangular:WJt};const z5e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],KJt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function jie(e){ke.call(this,zJt(),e)}jie.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:z5e}]};lt(jie,ke,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Le("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return En(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||KJt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||z5e;let a=e.fontSize||14,l;if(En(a)?l=e.fontSizeRange:a=wa(a),l){const p=a,m=pr("sqrt")().domain(Xh(i,p)).range(l);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const u=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Wc).layout(),c=s.size(),d=c[0]>>1,f=c[1]>>1,h=u.length;for(let p=0,m,g;p<h;++p)m=u[p],g=m.datum,g[o[0]]=m.x+d,g[o[1]]=m.y+f,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const XJt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:jie},Symbol.toStringTag,{value:"Module"})),QJt=e=>new Uint8Array(e),JJt=e=>new Uint16Array(e),CA=e=>new Uint32Array(e);function ZJt(){let e=8,t=[],n=CA(0),r=AO(0,e),i=AO(0,e);return{data:()=>t,seen:()=>n=eZt(n,t.length),add(s){for(let o=0,a=t.length,l=s.length,u;o<l;++o)u=s[o],u._index=a++,t.push(u)},remove(s,o){const a=t.length,l=Array(a-s),u=t;let c,d,f;for(d=0;!o[d]&&d<a;++d)l[d]=t[d],u[d]=d;for(f=d;d<a;++d)c=t[d],o[d]?u[d]=-1:(u[d]=f,r[f]=r[d],i[f]=i[d],l[f]=c,c._index=f++),r[d]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=AO(s,e,r),i=AO(s,e))}}}function eZt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function AO(e,t,n){const r=(t<257?QJt:t<65537?JJt:CA)(e);return n&&r.set(n),r}function Jye(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),l=i.index,u=a[0],c=a[1],d=l.length;let f;for(f=0;f<u;++f)s[l[f]]|=r;for(f=c;f<d;++f)s[l[f]]|=r;return o}}}function Zye(){let e=CA(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const c=n,d=l.length,f=CA(d);let h=Array(d),p,m,g;for(g=0;g<d;++g)h[g]=a(l[g]),f[g]=g;if(h=tZt(h,f),c)p=t,m=e,t=Array(c+d),e=CA(c+d),nZt(u,p,m,c,h,f,d,t,e);else{if(u>0)for(g=0;g<d;++g)f[g]+=u;t=h,e=f}return n=c+d,{index:f,value:h}}function i(a,l){const u=n;let c,d,f;for(d=0;!l[e[d]]&&d<u;++d);for(f=d;d<u;++d)l[c=e[d]]||(e[f]=c,t[f]=t[d],++f);n=u-a}function s(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function o(a,l){let u;return l?u=l.length:(l=t,u=n),[Kvt(l,a[0],0,u),iy(l,a[1],0,u)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function tZt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Jvt(e,t)}function nZt(e,t,n,r,i,s,o,a,l){let u=0,c=0,d;for(d=0;u<r&&c<o;++d)t[u]<i[c]?(a[d]=t[u],l[d]=n[u++]):(a[d]=i[c],l[d]=s[c++]+e);for(;u<r;++u,++d)a[d]=t[u],l[d]=n[u];for(;c<o;++c,++d)a[d]=i[c],l[d]=s[c]+e}function Bie(e){ke.call(this,ZJt(),e),this._indices=null,this._dims=null}Bie.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};lt(Bie,ke,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,l,u;for(;a<o;++a)l=n[a].fname,u=i[l]||(i[l]=Zye()),s.push(Jye(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),d=n.rem=n.add,f=n.mod,h=i.length,p={};let m,g,y,v,_,w,x,S,E;if(u.set(l),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,x=0,S=v.length;x<S;++x)w[v[x]._index]=1;for(x=0;x<h;++x)E=r[x],(!o[x]||e.modified("fields",x)||t.modified(E.fields))&&(y=E.fname,(m=p[y])||(s[y]=g=Zye(),p[y]=m=g.insert(E,t.source,0)),o[x]=Jye(g,x,i[x]).onAdd(m,l));for(x=0,S=a.data().length;x<S;++x)_[x]||(u[x]!==l[x]?d.push(x):w[x]&&l[x]!==c&&f.push(x));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,l={},u=n.add,c=i.size()+r.length,d=s.length;let f=i.size(),h,p,m;i.resize(c,d),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<d;++h)p=a[h].fname,m=l[p]||(l[p]=o[p].insert(a[h],r,f)),s[h].onAdd(m,g);for(;f<c;++f)y[f]=v,g[f]!==v&&u.push(f)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,l,u;for(a=0,l=o.length;a<l;++a)u=o[a]._index,i[u]!==s&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),l={},u=n.rem,c=t.rem;let d,f,h,p;for(d=0,f=c.length;d<f;++d)h=c[d]._index,l[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&u.push(h);for(h in r)r[h].remove(f,l);return this.reindex(t,f,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,l,u;for(n.filters=0,u=0;u<o;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<o;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),d=c[0],f=c[1],h=u[0],p=u[1],m=e.one;let g,y,v;if(d<h)for(g=d,y=Math.min(h,f);g<y;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d>h)for(g=h,y=Math.min(d,p);g<y;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(f>p)for(g=Math.max(d,p),y=f;g<y;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f<p)for(g=Math.max(h,f),y=p;g<y;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],d=a[0],f=a[1],h=e.one;let p,m,g;if(u<d)for(p=u,m=Math.min(d,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(u>d)for(p=d,m=Math.min(u,f);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>f)for(p=Math.max(u,f),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<f)for(p=Math.max(d,c),m=f;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function zie(e){ke.call(this,null,e)}zie.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};lt(zie,ke,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),l=r.prev(),u=c=>a[c]&n?null:o[c];return s.filter(s.MOD,u),i&i-1?(s.filter(s.ADD,c=>{const d=a[c]&n;return!d&&d^l[c]&n?o[c]:null}),s.filter(s.REM,c=>{const d=a[c]&n;return d&&!(d^(d^l[c]&n))?o[c]:null})):(s.filter(s.ADD,u),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>u(c._index))}});const rZt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Bie,resolvefilter:zie},Symbol.toStringTag,{value:"Module"})),iZt="RawCode",Ab="Literal",sZt="Property",oZt="Identifier",aZt="ArrayExpression",lZt="BinaryExpression",U5e="CallExpression",uZt="ConditionalExpression",cZt="LogicalExpression",dZt="MemberExpression",fZt="ObjectExpression",hZt="UnaryExpression";function Cf(e){this.type=e}Cf.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=pZt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function pZt(e){switch(e.type){case aZt:return e.elements;case lZt:case cZt:return[e.left,e.right];case U5e:return[e.callee].concat(e.arguments);case uZt:return[e.test,e.consequent,e.alternate];case dZt:return[e.object,e.property];case fZt:return e.properties;case sZt:return[e.key,e.value];case hZt:return[e.argument];case oZt:case Ab:case iZt:default:return[]}}var yp,kt,Me,ma,Ir,Jj=1,hP=2,Ib=3,lv=4,Zj=5,f_=6,Tl=7,pP=8,mZt=9;yp={};yp[Jj]="Boolean";yp[hP]="<end>";yp[Ib]="Identifier";yp[lv]="Keyword";yp[Zj]="Null";yp[f_]="Numeric";yp[Tl]="Punctuator";yp[pP]="String";yp[mZt]="RegularExpression";var gZt="ArrayExpression",yZt="BinaryExpression",vZt="CallExpression",bZt="ConditionalExpression",V5e="Identifier",_Zt="Literal",wZt="LogicalExpression",xZt="MemberExpression",EZt="ObjectExpression",SZt="Property",TZt="UnaryExpression",Xs="Unexpected token %0",CZt="Unexpected number",AZt="Unexpected string",IZt="Unexpected identifier",kZt="Unexpected reserved word",RZt="Unexpected end of input",jW="Invalid regular expression",Gz="Invalid regular expression: missing /",H5e="Octal literals are not allowed in strict mode.",PZt="Duplicate data property in object literal not allowed in strict mode",So="ILLEGAL",pk="Disabled.",NZt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),OZt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function e5(e,t){if(!e)throw new Error("ASSERT: "+t)}function Yp(e){return e>=48&&e<=57}function Uie(e){return"0123456789abcdefABCDEF".includes(e)}function AA(e){return"01234567".includes(e)}function DZt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function mk(e){return e===10||e===13||e===8232||e===8233}function mP(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&NZt.test(String.fromCharCode(e))}function kL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&OZt.test(String.fromCharCode(e))}const MZt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function q5e(){for(;Me<ma;){const e=kt.charCodeAt(Me);if(DZt(e)||mk(e))++Me;else break}}function BW(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Me<ma&&Uie(kt[Me])?(r=kt[Me++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):dr({},Xs,So);return String.fromCharCode(i)}function $Zt(){var e,t,n,r;for(e=kt[Me],t=0,e==="}"&&dr({},Xs,So);Me<ma&&(e=kt[Me++],!!Uie(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&dr({},Xs,So),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function W5e(){var e,t;for(e=kt.charCodeAt(Me++),t=String.fromCharCode(e),e===92&&(kt.charCodeAt(Me)!==117&&dr({},Xs,So),++Me,e=BW("u"),(!e||e==="\\"||!mP(e.charCodeAt(0)))&&dr({},Xs,So),t=e);Me<ma&&(e=kt.charCodeAt(Me),!!kL(e));)++Me,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),kt.charCodeAt(Me)!==117&&dr({},Xs,So),++Me,e=BW("u"),(!e||e==="\\"||!kL(e.charCodeAt(0)))&&dr({},Xs,So),t+=e);return t}function LZt(){var e,t;for(e=Me++;Me<ma;){if(t=kt.charCodeAt(Me),t===92)return Me=e,W5e();if(kL(t))++Me;else break}return kt.slice(e,Me)}function FZt(){var e,t,n;return e=Me,t=kt.charCodeAt(Me)===92?W5e():LZt(),t.length===1?n=Ib:MZt.hasOwnProperty(t)?n=lv:t==="null"?n=Zj:t==="true"||t==="false"?n=Jj:n=Ib,{type:n,value:t,start:e,end:Me}}function Yz(){var e=Me,t=kt.charCodeAt(Me),n,r=kt[Me],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Me,{type:Tl,value:String.fromCharCode(t),start:e,end:Me};default:if(n=kt.charCodeAt(Me+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Me+=2,{type:Tl,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Me};case 33:case 61:return Me+=2,kt.charCodeAt(Me)===61&&++Me,{type:Tl,value:kt.slice(e,Me),start:e,end:Me}}}if(o=kt.substr(Me,4),o===">>>=")return Me+=4,{type:Tl,value:o,start:e,end:Me};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Me+=3,{type:Tl,value:s,start:e,end:Me};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return Me+=2,{type:Tl,value:i,start:e,end:Me};if(i==="//"&&dr({},Xs,So),"<>=!+-*%&|^/".includes(r))return++Me,{type:Tl,value:r,start:e,end:Me};dr({},Xs,So)}function jZt(e){let t="";for(;Me<ma&&Uie(kt[Me]);)t+=kt[Me++];return t.length===0&&dr({},Xs,So),mP(kt.charCodeAt(Me))&&dr({},Xs,So),{type:f_,value:parseInt("0x"+t,16),start:e,end:Me}}function BZt(e){let t="0"+kt[Me++];for(;Me<ma&&AA(kt[Me]);)t+=kt[Me++];return(mP(kt.charCodeAt(Me))||Yp(kt.charCodeAt(Me)))&&dr({},Xs,So),{type:f_,value:parseInt(t,8),octal:!0,start:e,end:Me}}function eve(){var e,t,n;if(n=kt[Me],e5(Yp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Me,e="",n!=="."){if(e=kt[Me++],n=kt[Me],e==="0"){if(n==="x"||n==="X")return++Me,jZt(t);if(AA(n))return BZt(t);n&&Yp(n.charCodeAt(0))&&dr({},Xs,So)}for(;Yp(kt.charCodeAt(Me));)e+=kt[Me++];n=kt[Me]}if(n==="."){for(e+=kt[Me++];Yp(kt.charCodeAt(Me));)e+=kt[Me++];n=kt[Me]}if(n==="e"||n==="E")if(e+=kt[Me++],n=kt[Me],(n==="+"||n==="-")&&(e+=kt[Me++]),Yp(kt.charCodeAt(Me)))for(;Yp(kt.charCodeAt(Me));)e+=kt[Me++];else dr({},Xs,So);return mP(kt.charCodeAt(Me))&&dr({},Xs,So),{type:f_,value:parseFloat(e),start:t,end:Me}}function zZt(){var e="",t,n,r,i,s=!1;for(t=kt[Me],e5(t==="'"||t==='"',"String literal must starts with a quote"),n=Me,++Me;Me<ma;)if(r=kt[Me++],r===t){t="";break}else if(r==="\\")if(r=kt[Me++],!r||!mk(r.charCodeAt(0)))switch(r){case"u":case"x":kt[Me]==="{"?(++Me,e+=$Zt()):e+=BW(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:AA(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Me<ma&&AA(kt[Me])&&(s=!0,i=i*8+"01234567".indexOf(kt[Me++]),"0123".includes(r)&&Me<ma&&AA(kt[Me])&&(i=i*8+"01234567".indexOf(kt[Me++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&kt[Me]===`
`&&++Me;else{if(mk(r.charCodeAt(0)))break;e+=r}return t!==""&&dr({},Xs,So),{type:pP,value:e,octal:s,start:n,end:Me}}function UZt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";dr({},jW)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{dr({},jW)}try{return new RegExp(e,t)}catch{return null}}function VZt(){var e,t,n,r,i;for(e=kt[Me],e5(e==="/","Regular expression literal must start with a slash"),t=kt[Me++],n=!1,r=!1;Me<ma;)if(e=kt[Me++],t+=e,e==="\\")e=kt[Me++],mk(e.charCodeAt(0))&&dr({},Gz),t+=e;else if(mk(e.charCodeAt(0)))dr({},Gz);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||dr({},Gz),i=t.substr(1,t.length-2),{value:i,literal:t}}function HZt(){var e,t,n;for(t="",n="";Me<ma&&(e=kt[Me],!!kL(e.charCodeAt(0)));)++Me,e==="\\"&&Me<ma?dr({},Xs,So):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&dr({},jW,n),{value:n,literal:t}}function qZt(){var e,t,n,r;return Ir=null,q5e(),e=Me,t=VZt(),n=HZt(),r=UZt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Me}}function WZt(e){return e.type===Ib||e.type===lv||e.type===Jj||e.type===Zj}function G5e(){if(q5e(),Me>=ma)return{type:hP,start:Me,end:Me};const e=kt.charCodeAt(Me);return mP(e)?FZt():e===40||e===41||e===59?Yz():e===39||e===34?zZt():e===46?Yp(kt.charCodeAt(Me+1))?eve():Yz():Yp(e)?eve():Yz()}function Pl(){const e=Ir;return Me=e.end,Ir=G5e(),Me=e.end,e}function Y5e(){const e=Me;Ir=G5e(),Me=e}function GZt(e){const t=new Cf(gZt);return t.elements=e,t}function tve(e,t,n){const r=new Cf(e==="||"||e==="&&"?wZt:yZt);return r.operator=e,r.left=t,r.right=n,r}function YZt(e,t){const n=new Cf(vZt);return n.callee=e,n.arguments=t,n}function KZt(e,t,n){const r=new Cf(bZt);return r.test=e,r.consequent=t,r.alternate=n,r}function Vie(e){const t=new Cf(V5e);return t.name=e,t}function S2(e){const t=new Cf(_Zt);return t.value=e.value,t.raw=kt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function nve(e,t,n){const r=new Cf(xZt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function XZt(e){const t=new Cf(EZt);return t.properties=e,t}function rve(e,t,n){const r=new Cf(SZt);return r.key=t,r.value=n,r.kind=e,r}function QZt(e,t){const n=new Cf(TZt);return n.operator=e,n.argument=t,n.prefix=!0,n}function dr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(e5(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=Me,n.description=i,n}function t5(e){e.type===hP&&dr(e,RZt),e.type===f_&&dr(e,CZt),e.type===pP&&dr(e,AZt),e.type===Ib&&dr(e,IZt),e.type===lv&&dr(e,kZt),dr(e,Xs,e.value)}function ga(e){const t=Pl();(t.type!==Tl||t.value!==e)&&t5(t)}function di(e){return Ir.type===Tl&&Ir.value===e}function Kz(e){return Ir.type===lv&&Ir.value===e}function JZt(){const e=[];for(Me=Ir.start,ga("[");!di("]");)di(",")?(Pl(),e.push(null)):(e.push(kb()),di("]")||ga(","));return Pl(),GZt(e)}function ive(){Me=Ir.start;const e=Pl();return e.type===pP||e.type===f_?(e.octal&&dr(e,H5e),S2(e)):Vie(e.value)}function ZZt(){var e,t,n,r;if(Me=Ir.start,e=Ir,e.type===Ib)return n=ive(),ga(":"),r=kb(),rve("init",n,r);if(e.type===hP||e.type===Tl)t5(e);else return t=ive(),ga(":"),r=kb(),rve("init",t,r)}function een(){var e=[],t,n,r,i={},s=String;for(Me=Ir.start,ga("{");!di("}");)t=ZZt(),t.key.type===V5e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?dr({},PZt):i[r]=!0,e.push(t),di("}")||ga(",");return ga("}"),XZt(e)}function ten(){ga("(");const e=Hie();return ga(")"),e}const nen={if:1};function ren(){var e,t,n;if(di("("))return ten();if(di("["))return JZt();if(di("{"))return een();if(e=Ir.type,Me=Ir.start,e===Ib||nen[Ir.value])n=Vie(Pl().value);else if(e===pP||e===f_)Ir.octal&&dr(Ir,H5e),n=S2(Pl());else{if(e===lv)throw new Error(pk);e===Jj?(t=Pl(),t.value=t.value==="true",n=S2(t)):e===Zj?(t=Pl(),t.value=null,n=S2(t)):di("/")||di("/=")?(n=S2(qZt()),Y5e()):t5(Pl())}return n}function ien(){const e=[];if(ga("("),!di(")"))for(;Me<ma&&(e.push(kb()),!di(")"));)ga(",");return ga(")"),e}function sen(){Me=Ir.start;const e=Pl();return WZt(e)||t5(e),Vie(e.value)}function oen(){return ga("."),sen()}function aen(){ga("[");const e=Hie();return ga("]"),e}function len(){var e,t,n;for(e=ren();;)if(di("."))n=oen(),e=nve(".",e,n);else if(di("("))t=ien(),e=YZt(e,t);else if(di("["))n=aen(),e=nve("[",e,n);else break;return e}function sve(){const e=len();if(Ir.type===Tl&&(di("++")||di("--")))throw new Error(pk);return e}function lM(){var e,t;if(Ir.type!==Tl&&Ir.type!==lv)t=sve();else{if(di("++")||di("--"))throw new Error(pk);if(di("+")||di("-")||di("~")||di("!"))e=Pl(),t=lM(),t=QZt(e.value,t);else{if(Kz("delete")||Kz("void")||Kz("typeof"))throw new Error(pk);t=sve()}}return t}function ove(e){let t=0;if(e.type!==Tl&&e.type!==lv)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function uen(){var e,t,n,r,i,s,o,a,l,u;if(e=Ir,l=lM(),r=Ir,i=ove(r),i===0)return l;for(r.prec=i,Pl(),t=[e,Ir],o=lM(),s=[l,r,o];(i=ove(Ir))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),t.pop(),n=tve(a,l,o),s.push(n);r=Pl(),r.prec=i,s.push(r),t.push(Ir),n=lM(),s.push(n)}for(u=s.length-1,n=s[u],t.pop();u>1;)t.pop(),n=tve(s[u-1].value,s[u-2],n),u-=2;return n}function kb(){var e,t,n;return e=uen(),di("?")&&(Pl(),t=kb(),ga(":"),n=kb(),e=KZt(e,t,n)),e}function Hie(){const e=kb();if(di(","))throw new Error(pk);return e}function qie(e){kt=e,Me=0,ma=kt.length,Ir=null,Y5e();const t=Hie();if(Ir.type!==hP)throw new Error("Unexpect token after expression.");return t}var K5e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function X5e(e){function t(o,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,l){return u=>t(o,u,a,l)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Le("Missing arguments to clamp function."),o.length>3&&Le("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Le("Missing arguments to if function."),o.length>3&&Le("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function cen(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function Q5e(e){e=e||{};const t=e.allowed?cf(e.allowed):{},n=e.forbidden?cf(e.forbidden):{},r=e.constants||K5e,i=(e.functions||X5e)(d),s=e.globalvar,o=e.fieldvar,a=En(s)?s:p=>`${s}["${p}"]`;let l={},u={},c=0;function d(p){if(yt(p))return p;const m=f[p.type];return m==null&&Le("Unsupported type: "+p.type),m(p)}const f={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:bt(n,m)?Le("Illegal identifier: "+m):bt(r,m)?r[m]:bt(t,m)?m:(l[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=d(p.object);m&&(c+=1);const y=d(p.property);return g===o&&(u[cen(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Le("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=bt(i,m)&&i[m];return y||Le("Unrecognized function: "+m),En(y)?y(g):y+"("+g.map(d).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(d).join(",")+"]",BinaryExpression:p=>"("+d(p.left)+" "+p.operator+" "+d(p.right)+")",UnaryExpression:p=>"("+p.operator+d(p.argument)+")",ConditionalExpression:p=>"("+d(p.test)+"?"+d(p.consequent)+":"+d(p.alternate)+")",LogicalExpression:p=>"("+d(p.left)+p.operator+d(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(d).join(",")+"}",Property:p=>{c+=1;const m=d(p.key);return c-=1,m+":"+d(p.value)}};function h(p){const m={code:d(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},m}return h.functions=i,h.constants=r,h}const ave=Symbol("vega_selection_getter");function J5e(e){return(!e.getter||!e.getter[ave])&&(e.getter=Vc(e.field),e.getter[ave]=!0),e.getter}const Wie="intersect",lve="union",den="vlMulti",fen="vlPoint",uve="or",hen="and",rh="_vgsid_",gk=Vc(rh),pen="E",men="R",gen="R-E",yen="R-LE",ven="R-RE",RL="index:unit";function cve(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=J5e(a)(e),G0(o)&&(o=da(o)),G0(r[s])&&(r[s]=da(r[s])),Be(r[s])&&G0(r[s][0])&&(r[s]=r[s].map(da)),a.type===pen){if(Be(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===men){if(!Yw(o,r[s]))return!1}else if(a.type===ven){if(!Yw(o,r[s],!0,!1))return!1}else if(a.type===gen){if(!Yw(o,r[s],!1,!1))return!1}else if(a.type===yen&&!Yw(o,r[s],!1,!0))return!1;return!0}function ben(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[RL]&&r[RL].value:void 0,o=n===Wie,a=i.length,l=0,u,c,d,f,h;l<a;++l)if(u=i[l],s&&o){if(c=c||{},d=c[f=u.unit]||0,d===-1)continue;if(h=cve(t,u),c[f]=h?-1:++d,h&&s.size===1)return!0;if(!h&&d===s.get(f).count)return!1}else if(h=cve(t,u),o^h)return h;return a&&o}const Z5e=SS(gk),_en=Z5e.left,wen=Z5e.right;function xen(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[RL]&&r[RL].value:void 0,o=n===Wie,a=gk(t),l=_en(i,a);if(l===i.length||gk(i[l])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(wen(i,a)-l<s.size)return!1}return!0}function Een(e,t){return e.map(n=>xn(t.fields?{values:t.fields.map(r=>J5e(r)(n.datum))}:{[rh]:gk(n.datum)},t))}function Sen(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},l={},u,c,d,f,h,p,m,g,y,v,_=s.length,w=0,x,S;w<_;++w)if(u=s[w],f=u.unit,c=u.fields,d=u.values,c&&d){for(x=0,S=c.length;x<S;++x)h=c[x],m=o[h.field]||(o[h.field]={}),g=m[f]||(m[f]=[]),l[h.field]=y=h.type.charAt(0),v=Xz[`${y}_union`],m[f]=v(g,gt(d[x]));n&&(g=a[f]||(a[f]=[]),g.push(gt(d).reduce((E,T,I)=>(E[c[I].field]=T,E),{})))}else h=rh,p=gk(u),m=o[h]||(o[h]={}),g=m[f]||(m[f]=[]),g.push(p),n&&(g=a[f]||(a[f]=[]),g.push({[rh]:p}));if(t=t||lve,o[rh]?o[rh]=Xz[`${rh}_${t}`](...Object.values(o[rh])):Object.keys(o).forEach(E=>{o[E]=Object.keys(o[E]).map(T=>o[E][T]).reduce((T,I)=>T===void 0?I:Xz[`${l[E]}_${t}`](T,I))}),s=Object.keys(a),n&&s.length){const E=r?fen:den;o[E]=t===lve?{[uve]:s.reduce((T,I)=>(T.push(...a[I]),T),[])}:{[hen]:s.map(T=>({[uve]:a[T]}))}}return o}var Xz={[`${rh}_union`]:o1t,[`${rh}_intersect`]:i1t,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=da(t[0]),r=da(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=da(t[0]),r=da(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const Ten=":",Cen="@";function Gie(e,t,n,r){t[0].type!==Ab&&Le("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Xn(t).value,o="unit",a=Cen+o,l=Ten+i;s===Wie&&!bt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),bt(r,l)||(r[l]=n.getData(i).tuplesRef())}function e8e(e){const t=this.context.data[e];return t?t.values.value:[]}function Aen(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function Ien(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Hc).insert(t)),1}function ken(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const gP=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},Ren=gP("format"),t8e=gP("timeFormat"),Pen=gP("utcFormat"),Nen=gP("timeParse"),Oen=gP("utcParse"),IO=new Date(2e3,0,1);function n5(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(IO.setYear(2e3),IO.setMonth(e),IO.setDate(t),t8e.call(this,IO,n))}function Den(e){return n5.call(this,e,1,"%B")}function Men(e){return n5.call(this,e,1,"%b")}function $en(e){return n5.call(this,0,2+e,"%A")}function Len(e){return n5.call(this,0,2+e,"%a")}const Fen=":",jen="@",zW="%",n8e="$";function Yie(e,t,n,r){t[0].type!==Ab&&Le("First argument to data functions must be a string literal.");const i=t[0].value,s=Fen+i;if(!bt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function Ben(e,t,n,r){t[0].type!==Ab&&Le("First argument to indata must be a string literal."),t[1].type!==Ab&&Le("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=jen+s;bt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ga(e,t,n,r){if(t[0].type===Ab)dve(n,r,t[0].value);else for(e in n.scales)dve(n,r,e)}function dve(e,t,n){const r=zW+n;if(!bt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function vp(e,t){if(En(e))return e;if(yt(e)){const n=t.scales[e];return n&&fGt(n.value)?n.value:void 0}}function zen(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ga,n._range=Ga,n._scale=Ga;const r=i=>"_["+(i.type===Ab?st(zW+i.value):st(zW)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Kie(e,t){return function(n,r,i){if(n){const s=vp(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const Uen=Kie("area",vEt),Ven=Kie("bounds",xEt),Hen=Kie("centroid",IEt);function qen(e,t){const n=vp(e,(t||this).context);return n&&n.scale()}function Wen(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Xie(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Gen(){return Xie(this.context.dataflow,"warn",arguments)}function Yen(){return Xie(this.context.dataflow,"info",arguments)}function Ken(){return Xie(this.context.dataflow,"debug",arguments)}function Qz(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function UW(e){const t=oy(e),n=Qz(t.r),r=Qz(t.g),i=Qz(t.b);return .2126*n+.7152*r+.0722*i}function Xen(e,t){const n=UW(e),r=UW(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function Qen(){const e=[].slice.call(arguments);return e.unshift({}),xn(...e)}function r8e(e,t){return e===t||e!==e&&t!==t?!0:Be(e)?Be(t)&&e.length===t.length?Jen(e,t):!1:pt(e)&&pt(t)?i8e(e,t):!1}function Jen(e,t){for(let n=0,r=e.length;n<r;++n)if(!r8e(e[n],t[n]))return!1;return!0}function i8e(e,t){for(const n in e)if(!r8e(e[n],t[n]))return!1;return!0}function fve(e){return t=>i8e(e,t)}function Zen(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],l=a.input,u=o.stamp();let c=a.changes,d,f;if(o._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(a.changes=c=o.changeset(),c.stamp=u,o.runAfter(()=>{a.modified=!0,o.pulse(l,c).run()},!0,1)),n&&(d=n===!0?Hc:Be(n)||Cj(n)?n:fve(n),c.remove(d)),t&&c.insert(t),r&&(d=fve(r),l.value.some(d)?c.remove(d):c.insert(r)),i)for(f in s)c.modify(i,f,s[f]);return 1}function etn(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function ttn(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const hve={};function ntn(e,t){const n=hve[t]||(hve[t]=Vc(t));return Be(e)?e.map(n):n(e)}function Qie(e){return Be(e)||ArrayBuffer.isView(e)?e:null}function Jie(e){return Qie(e)||(yt(e)?e:null)}function rtn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Qie(e).join(...n)}function itn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Jie(e).indexOf(...n)}function stn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Jie(e).lastIndexOf(...n)}function otn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Jie(e).slice(...n)}function atn(e,t,n){return En(n)&&Le("Function argument passed to replace."),String(e).replace(t,n)}function ltn(e){return Qie(e).slice().reverse()}function utn(e,t,n){return xre(e||0,t||0,n||0)}function ctn(e,t){const n=vp(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function dtn(e,t){const n=vp(e,(t||this).context);return n?n.copy():void 0}function ftn(e,t){const n=vp(e,(t||this).context);return n?n.domain():[]}function htn(e,t,n){const r=vp(e,(n||this).context);return r?Be(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function ptn(e,t){const n=vp(e,(t||this).context);return n&&n.range?n.range():[]}function mtn(e,t,n){const r=vp(e,(n||this).context);return r?r(t):void 0}function gtn(e,t,n,r,i){e=vp(e,(i||this).context);const s=Y4e(t,n);let o=e.domain(),a=o[0],l=Xn(o),u=_a;return l-a?u=$4e(e,a,l):e=(e.interpolator?pr("sequential")().interpolator(e.interpolator()):pr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),l!==Xn(o)&&o.push(l)),o.forEach(c=>s.stop(u(c),e(c))),s}function ytn(e,t,n){const r=vp(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function vtn(e){let t=null;return function(n){return n?ck(n,t=t||OE(e)):e}}const s8e=e=>e.data;function o8e(e,t){const n=e8e.call(t,e);return n.root&&n.root.lookup||{}}function btn(e,t,n){const r=o8e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(s8e):void 0}function _tn(e,t){const n=o8e(e,this)[t];return n?n.ancestors().map(s8e):void 0}const a8e=()=>typeof window<"u"&&window||null;function wtn(){const e=a8e();return e?e.screen:{}}function xtn(){const e=a8e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Etn(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function l8e(e,t,n){if(!e)return[];const[r,i]=e,s=new vs().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return qje(o,s,Stn(t))}function Stn(e){let t=null;if(e){const n=gt(e.marktype),r=gt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Ttn(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=gt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Ctn(e){return gt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function Atn(e,t,n){const{x:r,y:i,mark:s}=n,o=new vs().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<o.x1&&(o.x1=l),l>o.x2&&(o.x2=l),u<o.y1&&(o.y1=u),u>o.y2&&(o.y2=u);return o.translate(r,i),l8e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(l=>Itn(l.x,l.y,t))}function Itn(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[l,u]=n[i];u>t!=a>t&&e<(o-l)*(t-u)/(a-u)+l&&r++}return r&1}const yk={random(){return Wc()},cumulativeNormal:Pj,cumulativeLogNormal:Une,cumulativeUniform:Wne,densityNormal:Lne,densityLogNormal:zne,densityUniform:qne,quantileNormal:Nj,quantileLogNormal:Vne,quantileUniform:Gne,sampleNormal:Rj,sampleLogNormal:Bne,sampleUniform:Hne,isArray:Be,isBoolean:av,isDate:G0,isDefined(e){return e!==void 0},isNumber:hr,isObject:pt,isRegExp:WFe,isString:yt,isTuple:Cj,isValid(e){return e!=null&&e===e},toBoolean:wne,toDate(e){return xne(e)},toNumber:da,toString:Ene,indexof:itn,join:rtn,lastindexof:stn,replace:atn,reverse:ltn,slice:otn,flush:HFe,lerp:GFe,merge:Qen,pad:XFe,peek:Xn,pluck:ntn,span:XR,inrange:Yw,truncate:QFe,rgb:oy,lab:x$,hcl:E$,hsl:mI,luminance:UW,contrast:Xen,sequence:Ol,format:Ren,utcFormat:Pen,utcParse:Oen,utcOffset:d6e,utcSequence:p6e,timeFormat:t8e,timeParse:Nen,timeOffset:c6e,timeSequence:h6e,timeUnitSpecifier:ZFe,monthFormat:Den,monthAbbrevFormat:Men,dayFormat:$en,dayAbbrevFormat:Len,quarter:BFe,utcquarter:zFe,week:t6e,utcweek:i6e,dayofyear:e6e,utcdayofyear:r6e,warn:Gen,info:Yen,debug:Ken,extent(e){return Xh(e)},inScope:Wen,intersect:l8e,clampRange:UFe,pinchDistance:etn,pinchAngle:ttn,screen:wtn,containerSize:Etn,windowSize:xtn,bandspace:utn,setdata:Ien,pathShape:vtn,panLinear:$Fe,panLog:LFe,panPow:FFe,panSymlog:jFe,zoomLinear:mne,zoomLog:gne,zoomPow:uL,zoomSymlog:yne,encode:ken,modify:Zen,lassoAppend:Ttn,lassoPath:Ctn,intersectLasso:Atn},ktn=["view","item","group","xy","x","y"],Rtn="event.vega.",u8e="this.",Zie={},c8e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${st(n8e+e)}]`,functions:Ptn,constants:K5e,visitors:Zie},VW=Q5e(c8e);function Ptn(e){const t=X5e(e);ktn.forEach(n=>t[n]=Rtn+n);for(const n in yk)t[n]=u8e+n;return xn(t,zen(e,yk,Zie)),t}function fs(e,t,n){return arguments.length===1?yk[e]:(yk[e]=t,n&&(Zie[e]=n),VW&&(VW.functions[e]=u8e+e),this)}fs("bandwidth",ctn,Ga);fs("copy",dtn,Ga);fs("domain",ftn,Ga);fs("range",ptn,Ga);fs("invert",htn,Ga);fs("scale",mtn,Ga);fs("gradient",gtn,Ga);fs("geoArea",Uen,Ga);fs("geoBounds",Ven,Ga);fs("geoCentroid",Hen,Ga);fs("geoShape",ytn,Ga);fs("geoScale",qen,Ga);fs("indata",Aen,Ben);fs("data",e8e,Yie);fs("treePath",btn,Yie);fs("treeAncestors",_tn,Yie);fs("vlSelectionTest",ben,Gie);fs("vlSelectionIdTest",xen,Gie);fs("vlSelectionResolve",Sen,Gie);fs("vlSelectionTuples",Een);function Jh(e,t){const n={};let r;try{e=yt(e)?e:st(e)+"",r=qie(e)}catch{Le("Expression parse error: "+e)}r.visit(s=>{if(s.type!==U5e)return;const o=s.callee.name,a=c8e.visitors[o];a&&a(o,s.arguments,t,n)});const i=VW(r);return i.globals.forEach(s=>{const o=n8e+s;!bt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:xn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Ntn(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Otn=cf(["rule"]),pve=cf(["group","image","rect"]);function Dtn(e,t){let n="";return Otn[t]||(e.x2&&(e.x?(pve[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(pve[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function ese(e){return(e+"").toLowerCase()}function Mtn(e){return ese(e)==="operator"}function $tn(e){return ese(e)==="collect"}function yC(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function Ltn(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var Ftn={operator:(e,t)=>yC(e,["_"],t.code),parameter:(e,t)=>yC(e,["datum","_"],t.code),event:(e,t)=>yC(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return yC(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+st(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Dtn(r,n),i+="return m;",yC(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(st).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let l,u;return s.path?(l=`a${s.path}`,u=`b${s.path}`):((n=n||{})["f"+o]=s,l=`this.f${o}(a)`,u=`this.f${o}(b)`),Ltn(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function jtn(e){const t=this;Mtn(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Btn(e){const t=this;if(e.params){const n=t.get(e.id);n||Le("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function ztn(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Be(i)?i.map(s=>mve(s,n,t)):mve(i,n,t)}return t}function mve(e,t,n){if(!e||!pt(e))return e;for(let r=0,i=gve.length,s;r<i;++r)if(s=gve[r],bt(e,s.key))return s.parse(e,t,n);return e}var gve=[{key:"$ref",parse:Utn},{key:"$key",parse:Htn},{key:"$expr",parse:Vtn},{key:"$field",parse:qtn},{key:"$encode",parse:Gtn},{key:"$compare",parse:Wtn},{key:"$context",parse:Ytn},{key:"$subflow",parse:Ktn},{key:"$tupleid",parse:Xtn}];function Utn(e,t){return t.get(e.$ref)||Le("Operator not defined: "+e.$ref)}function Vtn(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=ou(t.parameterExpression(e.$expr),e.$fields))}function Htn(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=_ne(e.$key,e.$flat,t.expr.codegen))}function qtn(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Vc(e.$field,e.$name,t.expr.codegen))}function Wtn(e,t){const n="c:"+e.$compare+"_"+e.$order,r=gt(e.$compare).map(i=>i&&i.$tupleid?$t:i);return t.fn[n]||(t.fn[n]=vne(r,e.$order,t.expr.codegen))}function Gtn(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=ou(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function Ytn(e,t){return t}function Ktn(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),l=o.signals.parent;return l&&l.set(s),a.detachSubflow=()=>t.detach(o),a}}function Xtn(){return $t}function Qtn(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Le("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Jtn(e){var t=this,n=pt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Le("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const Ztn={skip:!0};function enn(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function tnn(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],Ztn)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Hc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function d8e(e,t,n,r){return new f8e(e,t,n,r)}function f8e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||Ftn,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function yve(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}f8e.prototype=yve.prototype={fork(){const e=new yve(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),$tn(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[ese(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Ntn,parseOperator:jtn,parseOperatorParameters:Btn,parseParameters:ztn,parseStream:Qtn,parseUpdate:Jtn,getState:enn,setState:tnn};function nnn(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),h8e(t,e.description()))}function h8e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function rnn(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const Jz="default";function inn(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:Jz,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?yt(i)?i:i.user:Jz,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return yt(r)||(i=r.item,r=r.user),HW(e,r&&r!==Jz?r:i||r),i},{cursor:t})}function HW(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function PL(e,t){var n=e._runtime.data;return bt(n,t)||Le("Unrecognized data set: "+t),n[t]}function snn(e,t){return arguments.length<2?PL(this,e).values.value:r5.call(this,e,c_().remove(Hc).insert(t))}function r5(e,t){D6e(t)||Le("Second argument to changes must be a changeset.");const n=PL(this,e);return n.modified=!0,this.pulse(n.input,t)}function onn(e,t){return r5.call(this,e,c_().insert(t))}function ann(e,t){return r5.call(this,e,c_().remove(t))}function p8e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function m8e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function i5(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function lnn(e){var t=i5(e),n=p8e(e),r=m8e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function unn(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=i5(e),o=t.changedTouches?t.changedTouches[0]:t,s=Kj(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=cnn(e,n,s),t}function cnn(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,l;if(o){for(l=t;l;l=l.mark.group)if(l.mark.name===o){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;yt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:wa(e),item:wa(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const vve="view",dnn="timer",fnn="window",hnn={trap:!1};function pnn(e){const t=xn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Be(r[s])&&(r[s]=cf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function g8e(e,t,n,r){e._eventListeners.push({type:n,sources:gt(t),handler:r})}function mnn(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function kO(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||pt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function gnn(e,t,n){var r=this,i=new kj(n),s=function(u,c){r.runAsync(null,()=>{e===vve&&mnn(r,t)&&u.preventDefault(),i.receive(unn(r,u,c))})},o;if(e===dnn)kO(r,"timer",t)&&r.timer(s,t);else if(e===vve)kO(r,"view",t)&&r.addEventListener(t,s,hnn);else if(e===fnn?kO(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&kO(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=o.length;a<l;++a)o[a].addEventListener(t,s);g8e(r,o,t,s)}return i}function bve(e){return e.item}function _ve(e){return e.item.mark.source}function wve(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function ynn(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",bve),_ve,wve(e)),this.on(this.events("view","pointerout",bve),_ve,wve(t)),this}function vnn(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function Pu(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const bnn="vega-bind",_nn="vega-bind-name",wnn="vega-bind-radio";function xnn(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=bne(r.debounce,i.update))),(r.input==null&&r.element?Enn:Tnn)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Enn(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),g8e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(Snn(i))}}function Snn(e){return typeof Event<"u"?new Event(e):{type:e}}function Tnn(e,t,n,r){const i=r.signal(n.signal),s=Pu("div",{class:bnn}),o=n.input==="radio"?s:s.appendChild(Pu("label"));o.appendChild(Pu("span",{class:_nn},n.name||n.signal)),t.appendChild(s);let a=Cnn;switch(n.input){case"checkbox":a=Ann;break;case"select":a=Inn;break;case"radio":a=knn;break;case"range":a=Rnn;break}a(e,o,n,i)}function Cnn(e,t,n,r){const i=Pu("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function Ann(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Pu("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function Inn(e,t,n,r){const i=Pu("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const l={value:o};NL(o,r)&&(l.selected=!0),i.appendChild(Pu("option",l,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,l=n.options.length;a<l;++a)if(NL(n.options[a],o)){i.selectedIndex=a;return}}}function knn(e,t,n,r){const i=Pu("span",{class:wnn}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const l={type:"radio",name:n.signal,value:o};NL(o,r)&&(l.checked=!0);const u=Pu("input",l);u.addEventListener("change",()=>e.update(o));const c=Pu("label",{},(s[a]||o)+"");return c.prepend(u),i.appendChild(c),u}),e.set=o=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)NL(a[u].value,o)&&(a[u].checked=!0)}}function Rnn(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||sy(s,i,100),a=Pu("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const l=Pu("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function NL(e,t){return e===t||e+""==t+""}function y8e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,p8e(e),m8e(e),i5(e),i,s).background(e.background())}function tse(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Pnn(e,t,n,r){const i=new r(e.loader(),tse(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,i5(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Nnn(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=Xj(r);e=n._el=e?Zz(n,e,!0):null,nnn(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||fP,a=e?s.renderer:s.headless;return n._renderer=a?y8e(n,n._renderer,e,a):null,n._handler=Pnn(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=Zz(n,t,!0):e.appendChild(Pu("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=Zz(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{xnn(n,l.element||t,l)})),n}function Zz(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const vC=e=>+e||0,Onn=e=>({top:e,bottom:e,left:e,right:e});function xve(e){return pt(e)?{top:vC(e.top),bottom:vC(e.bottom),left:vC(e.left),right:vC(e.right)}:Onn(vC(e))}async function nse(e,t,n,r){const i=Xj(t),s=i&&i.headless;return s||Le("Unrecognized renderer type: "+t),await e.runAsync(),y8e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function Dnn(e,t){e!==E0.Canvas&&e!==E0.SVG&&e!==E0.PNG&&Le("Unrecognized image type: "+e);const n=await nse(this,e,t);return e===E0.SVG?Mnn(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Mnn(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function $nn(e,t){return(await nse(this,E0.Canvas,e,t)).canvas()}async function Lnn(e){return(await nse(this,E0.SVG,e)).svg()}function Fnn(e,t,n){return d8e(e,kE,yk,n).parse(t)}function jnn(e){var t=this._runtime.scales;return bt(t,e)||Le("Unrecognized scale or projection: "+e),t[e].value}var v8e="width",b8e="height",rse="padding",Eve={skip:!0};function _8e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===rse?r.left+r.right:0)}function w8e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===rse?r.top+r.bottom:0)}function Bnn(e){var t=e._signals,n=t[v8e],r=t[b8e],i=t[rse];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=_8e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=w8e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function znn(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(v8e,n,Eve),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(b8e,r,Eve),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(l=>l.resize())},!1,1)}function Unn(e){return this._runtime.getState(e||{data:Vnn,signals:Hnn,recurse:!0})}function Vnn(e,t){return t.modified&&Be(t.input.value)&&!e.startsWith("_:vega:_")}function Hnn(e,t){return!(e==="parent"||t instanceof kE.proxy)}function qnn(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Wnn(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(N_t(n,t))}function Gnn(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Ynn(r))}function Ynn(e){return e==null?"":Be(e)?x8e(e):pt(e)&&!G0(e)?Knn(e):e+""}function Knn(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Be(n)?x8e(n):E8e(n))}).join(`
`)}function x8e(e){return"["+e.map(E8e).join(", ")+"]"}function E8e(e){return Be(e)?"[…]":pt(e)&&!G0(e)?"{…}":e}function Xnn(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function S8e(e,t){const n=this;if(t=t||{},Ix.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=xn({},e.locale,t.locale);n.locale(S6e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||E0.Canvas,n._scenegraph=new vje;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Gnn,n._redraw=!0,n._handler=new fP().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=pnn(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Fnn(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:xn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=_8e(n,n._width),n._viewHeight=w8e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Bnn(n),rnn(n),inn(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function RO(e,t){return bt(e._signals,t)?e._signals[t]:Le("Unrecognized signal name: "+st(t))}function T8e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Sve(e,t,n,r){let i=T8e(n,r);return i||(i=tse(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Tve(e,t,n){const r=T8e(t,n);return r&&t._targets.remove(r),e}lt(S8e,Ix,{async evaluate(e,t,n){if(await Ix.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,lnn(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&KD(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&h8e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=RO(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",xve(e)):xve(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Xj(e)||Le("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Ix.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(RO(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:znn,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=tse(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Sve(this,e,RO(this,e),t)},removeSignalListener(e,t){return Tve(this,RO(this,e),t)},addDataListener(e,t){return Sve(this,e,PL(this,e).values,t)},removeDataListener(e,t){return Tve(this,PL(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=HW(this,null);this._globalCursor=!!e,t&&HW(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Wnn,events:gnn,finalize:vnn,hover:ynn,data:snn,change:r5,insert:onn,remove:ann,scale:jnn,initialize:Nnn,toImageURL:Dnn,toCanvas:$nn,toSVG:Lnn,getState:Unn,setState:qnn,_watchPixelRatio:Xnn});const Qnn="view",OL="[",DL="]",C8e="{",A8e="}",Jnn=":",I8e=",",Znn="@",ern=">",trn=/[[\]{}]/,nrn={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let k8e,R8e;function uv(e,t,n){return k8e=t||Qnn,R8e=n||nrn,P8e(e.trim()).map(qW)}function rrn(e){return R8e[e]}function IA(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function P8e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=IA(e,i,I8e,OL+C8e,DL+A8e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function qW(e){return e[0]==="["?irn(e):srn(e)}function irn(e){const t=e.length;let n=1,r;if(n=IA(e,n,DL,OL,DL),n===t)throw"Empty between selector: "+e;if(r=P8e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==ern)throw"Expected '>' after between selector: "+e;r=r.map(qW);const i=qW(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function srn(e){const t={source:k8e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,l,u;if(e[o-1]===A8e){if(a=e.lastIndexOf(C8e),a>=0){try{r=orn(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===Znn&&(i=++a),l=IA(e,a,Jnn),l<o&&(n.push(e.substring(s,l).trim()),s=a=++l),a=IA(e,a,OL),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),u=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=IA(e,a,DL),a===o)throw"Unmatched left bracket: "+e;if(u.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==OL)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||trn.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):rrn(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function orn(e){const t=e.split(I8e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function arn(e){return pt(e)?e:{type:e||"pad"}}const bC=e=>+e||0,lrn=e=>({top:e,bottom:e,left:e,right:e});function urn(e){return pt(e)?e.signal?e:{top:bC(e.top),bottom:bC(e.bottom),left:bC(e.left),right:bC(e.right)}:lrn(bC(e))}const Qs=e=>pt(e)&&!Be(e)?xn({},e):{value:e};function Cve(e,t,n,r){return n!=null?(pt(n)&&!Be(n)||Be(n)&&n.length&&pt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Oo(e,t,n){for(const r in t)Cve(e,r,t[r]);for(const r in n)Cve(e,r,n[r],"update")}function aT(e,t,n){for(const r in t)n&&bt(n,r)||(e[r]=xn(e[r]||{},t[r]));return e}function Tw(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const ise="mark",sse="frame",ose="scope",crn="axis",drn="axis-domain",frn="axis-grid",hrn="axis-label",prn="axis-tick",mrn="axis-title",grn="legend",yrn="legend-band",vrn="legend-entry",brn="legend-gradient",N8e="legend-label",_rn="legend-symbol",wrn="legend-title",xrn="title",Ern="title-text",Srn="title-subtitle";function Trn(e,t,n,r,i){const s={},o={};let a,l,u,c;l="lineBreak",t==="text"&&i[l]!=null&&!Tw(l,e)&&e7(s,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===sse?i.group:n===ise?xn({},i.mark,i[t]):null;for(l in c)u=Tw(l,e)||(l==="fill"||l==="stroke")&&(Tw("fill",e)||Tw("stroke",e)),u||e7(s,l,c[l]);gt(r).forEach(d=>{const f=i.style&&i.style[d];for(const h in f)Tw(h,e)||e7(s,h,f[h])}),e=xn({},e);for(l in s)c=s[l],c.signal?(a=a||{})[l]=c:o[l]=c;return e.enter=xn(o,e.enter),a&&(e.update=xn(a,e.update)),e}function e7(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const O8e=e=>yt(e)?st(e):e.signal?`(${e.signal})`:D8e(e);function s5(e){if(e.gradient!=null)return Arn(e);let t=e.signal?`(${e.signal})`:e.color?Crn(e.color):e.field!=null?D8e(e.field):e.value!==void 0?st(e.value):void 0;return e.scale!=null&&(t=Irn(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${uM(e.exponent)})`),e.mult!=null&&(t+=`*${uM(e.mult)}`),e.offset!=null&&(t+=`+${uM(e.offset)}`),e.round&&(t=`round(${t})`),t}const PO=(e,t,n,r)=>`(${e}(${[t,n,r].map(s5).join(",")})+'')`;function Crn(e){return e.c?PO("hcl",e.h,e.c,e.l):e.h||e.s?PO("hsl",e.h,e.s,e.l):e.l||e.a?PO("lab",e.l,e.a,e.b):e.r||e.g||e.b?PO("rgb",e.r,e.g,e.b):null}function Arn(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:st(n));for(;t.length&&Xn(t)==null;)t.pop();return t.unshift(O8e(e.gradient)),`gradient(${t.join(",")})`}function uM(e){return pt(e)?"("+s5(e)+")":e}function D8e(e){return M8e(pt(e)?e:{datum:e})}function M8e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Le("Invalid field reference: "+st(e));return e.signal||(r=yt(r)?mp(r).map(st).join("]["):M8e(r)),t+"["+r+"]"}function Irn(e,t){const n=O8e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+uM(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function krn(e){let t="";return e.forEach(n=>{const r=s5(n);t+=n.test?`(${n.test})?${r}:`:r}),Xn(t)===":"&&(t+="null"),t}function $8e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=Trn(e,t,n,r,i.config);for(const a in e)o[a]=Rrn(e[a],t,s,i);return s}function Rrn(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=Nrn(Prn(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function Prn(e){return Be(e)?krn(e):s5(e)}function Nrn(e,t,n,r){const i=Jh(e,t);return i.$fields.forEach(s=>r[s]=1),xn(n,i.$params),i.$expr}const Orn="outer",Drn=["value","update","init","react","bind"];function Ave(e,t){Le(e+' for "outer" push: '+st(t))}function L8e(e,t){const n=e.name;if(e.push===Orn)t.signals[n]||Ave("No prior signal definition",n),Drn.forEach(r=>{e[r]!==void 0&&Ave("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function WW(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function o5(e,t,n,r){return new WW(e,t,n,r)}function ML(e,t){return o5("operator",e,t)}function Mt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function vk(e,t){return t?{$field:e,$name:t}:{$field:e}}const GW=vk("key");function Ive(e,t){return{$compare:e,$order:t}}function Mrn(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const $rn="ascending",Lrn="descending";function Frn(e){return pt(e)?(e.order===Lrn?"-":"+")+a5(e.op,e.field):""}function a5(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const ase="scope",YW="view";function Ls(e){return e&&e.signal}function jrn(e){return e&&e.expr}function cM(e){if(Ls(e))return!0;if(pt(e)){for(const t in e)if(cM(e[t]))return!0}return!1}function Sd(e,t){return e??t}function W1(e){return e&&e.signal||e}const kve="timer";function bk(e,t){return(e.merge?zrn:e.stream?Urn:e.type?Vrn:Le("Invalid stream specification: "+st(e)))(e,t)}function Brn(e){return e===ase?YW:e||YW}function zrn(e,t){const n=e.merge.map(i=>bk(i,t)),r=lse({merge:n},e,t);return t.addStream(r).id}function Urn(e,t){const n=bk(e.stream,t),r=lse({stream:n},e,t);return t.addStream(r).id}function Vrn(e,t){let n;e.type===kve?(n=t.event(kve,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Brn(e.source),e.type);const r=lse({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function lse(e,t,n){let r=t.between;return r&&(r.length!==2&&Le('Stream "between" parameter must have 2 entries: '+st(t)),e.between=[bk(r[0],n),bk(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Hrn(t.marktype,t.markname,t.markrole)),t.source===ase&&r.push("inScope(event.item)"),r.length&&(e.filter=Jh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Hrn(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const qrn={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Wrn(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Le("Signal update missing events specification."),yt(s)&&(s=uv(s,t.isSubscope()?ase:YW)),s=gt(s).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[Yrn(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Le("Signal encode and update are mutually exclusive."),o="encode(item(),"+st(r)+")"),i.update=yt(o)?Jh(o,t):o.expr!=null?Jh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:qrn,$params:{$value:t.signalRef(o.signal)}}:Le("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(xn(Grn(l,t),i)))}function Grn(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):bk(e,t)}}function Yrn(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Krn(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Le("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Jh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Wrn(i,t,n.id))}const jr=e=>(t,n,r)=>o5(e,n,t||void 0,r),F8e=jr("aggregate"),Xrn=jr("axisticks"),j8e=jr("bound"),Af=jr("collect"),Rve=jr("compare"),Qrn=jr("datajoin"),B8e=jr("encode"),Jrn=jr("expression"),Zrn=jr("facet"),ein=jr("field"),tin=jr("key"),nin=jr("legendentries"),rin=jr("load"),iin=jr("mark"),sin=jr("multiextent"),oin=jr("multivalues"),ain=jr("overlap"),lin=jr("params"),z8e=jr("prefacet"),uin=jr("projection"),cin=jr("proxy"),din=jr("relay"),U8e=jr("render"),fin=jr("scale"),h_=jr("sieve"),hin=jr("sortitems"),V8e=jr("viewlayout"),pin=jr("values");let min=0;const H8e={min:"min",max:"max",count:"sum"};function gin(e,t){const n=e.type||"linear";R4e(n)||Le("Unrecognized scale type: "+st(n)),t.addScale(e.name,{type:n,domain:void 0})}function yin(e,t){const n=t.getScale(e.name).params;let r;n.domain=q8e(e.domain,e,t),e.range!=null&&(n.range=G8e(e,t,n)),e.interpolate!=null&&Ain(e.interpolate,n),e.nice!=null&&(n.nice=Cin(e.nice,t)),e.bins!=null&&(n.bins=Tin(e.bins,t));for(r in e)bt(n,r)||r==="name"||(n[r]=Tc(e[r],t))}function Tc(e,t){return pt(e)?e.signal?t.signalRef(e.signal):Le("Unsupported object: "+st(e)):e}function dM(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Tc(n,t))}function l5(e){Le("Can not find data set: "+st(e))}function q8e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Le("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Be(e)?vin:e.fields?_in:bin)(e,t,n)}function vin(e,t,n){return e.map(r=>Tc(r,n))}function bin(e,t,n){const r=n.getData(e.data);return r||l5(e.data),NE(t.type)?r.valuesRef(n,e.field,W8e(e.sort,!1)):O4e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function _in(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=yt(o)?{data:r,field:o}:Be(o)||o.signal?win(o,n):o,s.push(o),s),[]);return(NE(t.type)?xin:O4e(t.type)?Ein:Sin)(e,n,i)}function win(e,t){const n="_:vega:_"+min++,r=Af({});if(Be(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+st(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,h_({})]),{data:n,field:"data"}}function xin(e,t,n){const r=W8e(e.sort,!0);let i,s;const o=n.map(u=>{const c=t.getData(u.data);return c||l5(u.data),c.countsRef(t,u.field,r)}),a={groupby:GW,pulse:o};r&&(i=r.op||"count",s=r.field?a5(i,r.field):"count",a.ops=[H8e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(F8e(a));const l=t.add(Af({pulse:Mt(i)}));return s=t.add(pin({field:GW,sort:t.sortRef(r),pulse:Mt(l)})),Mt(s)}function W8e(e,t){return e&&(!e.field&&!e.op?pt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Le("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!H8e[e.op]&&Le("Multiple domain scales can not be sorted using "+e.op)),e}function Ein(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||l5(i.data),s.domainRef(t,i.field)});return Mt(t.add(oin({values:r})))}function Sin(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||l5(i.data),s.extentRef(t,i.field)});return Mt(t.add(sin({extents:r})))}function Tin(e,t){return e.signal||Be(e)?dM(e,t):t.objectProperty(e)}function Cin(e,t){return e.signal?t.signalRef(e.signal):pt(e)?{interval:Tc(e.interval),step:Tc(e.step)}:Tc(e)}function Ain(e,t){t.interpolate=Tc(e.type||e),e.gamma!=null&&(t.interpolateGamma=Tc(e.gamma))}function G8e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(yt(i)){if(r&&bt(r,i))return e=xn({},e,{range:r[i]}),G8e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=NE(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Le("Unrecognized scale range value: "+st(i))}else if(i.scheme){n.scheme=Be(i.scheme)?dM(i.scheme,t):Tc(i.scheme,t),i.extent&&(n.schemeExtent=dM(i.extent,t)),i.count&&(n.schemeCount=Tc(i.count,t));return}else if(i.step){n.rangeStep=Tc(i.step,t);return}else{if(NE(e.type)&&!Be(i))return q8e(i,e,t);Be(i)||Le("Unsupported range type: "+st(i))}return i.map(s=>(Be(s)?dM:Tc)(s,t))}function Iin(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=KW(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=KW(n[i],i,t));t.addProjection(e.name,r)}function KW(e,t,n){return Be(e)?e.map(r=>KW(r,t,n)):pt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Le("Unsupported parameter object: "+st(e)):e}const If="top",lT="left",uT="right",Ry="bottom",Y8e="center",kin="vertical",Rin="start",Pin="middle",Nin="end",XW="index",use="label",Oin="offset",LE="perc",Din="perc2",Nc="value",yP="guide-label",cse="guide-title",Min="group-title",$in="group-subtitle",Pve="symbol",fM="gradient",QW="discrete",JW="size",Lin="shape",Fin="fill",jin="stroke",Bin="strokeWidth",zin="strokeDash",Uin="opacity",dse=[JW,Lin,Fin,jin,Bin,zin,Uin],vP={name:1,style:1,interactive:1},er={value:0},Oc={value:1},u5="group",K8e="rect",fse="rule",Vin="symbol",p_="text";function _k(e){return e.type=u5,e.interactive=e.interactive||!1,e}function au(e,t){const n=(r,i)=>Sd(e[r],Sd(t[r],i));return n.isVertical=r=>kin===Sd(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Sd(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Sd(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Sd(e.columns,Sd(t.columns,+n.isVertical(!0))),n}function X8e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Hin(e,t,n){const r=t.config.style[n];return r&&r[e]}function c5(e,t,n){return`item.anchor === '${Rin}' ? ${e} : item.anchor === '${Nin}' ? ${t} : ${n}`}const hse=c5(st(lT),st(uT),st(Y8e));function qin(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},pt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function Q8e(e,t){return t?e?pt(e)?Object.assign({},e,{offset:Q8e(e.offset,t)}):{value:e,offset:t}:t:e}function Yu(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=aT(e.encode,t,vP)):e.interactive=!1,e}function Win(e,t,n,r){const i=au(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let l,u,c,d,f;s?(u=[0,1],c=[0,0],d=o,f=a):(u=[0,0],c=[1,0],d=a,f=o);const h={enter:l={opacity:er,x:er,y:er,width:Qs(d),height:Qs(f)},update:xn({},l,{opacity:Oc,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:er}};return Oo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Yu({type:K8e,role:brn,encode:h},r)}function Gin(e,t,n,r,i){const s=au(e,n),o=s.isVertical(),a=s.gradientThickness(),l=s.gradientLength();let u,c,d,f,h="";o?(u="y",d="y2",c="x",f="width",h="1-"):(u="x",d="x2",c="y",f="height");const p={opacity:er,fill:{scale:t,field:Nc}};p[u]={signal:h+"datum."+LE,mult:l},p[c]=er,p[d]={signal:h+"datum."+Din,mult:l},p[f]=Qs(a);const m={enter:p,update:xn({},p,{opacity:Oc}),exit:{opacity:er}};return Oo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Yu({type:K8e,role:yrn,key:Nc,from:i,encode:m},r)}const Yin=`datum.${LE}<=0?"${lT}":datum.${LE}>=1?"${uT}":"${Y8e}"`,Kin=`datum.${LE}<=0?"${Ry}":datum.${LE}>=1?"${If}":"${Pin}"`;function Nve(e,t,n,r){const i=au(e,t),s=i.isVertical(),o=Qs(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,c,d,f,h="";const p={enter:u={opacity:er},update:c={opacity:Oc,text:{field:use}},exit:{opacity:er}};return Oo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Sd(e.labelLimit,t.gradientLabelLimit)}),s?(u.align={value:"left"},u.baseline=c.baseline={signal:Kin},d="y",f="x",h="1-"):(u.align=c.align={signal:Yin},u.baseline={value:"top"},d="x",f="y"),u[d]=c[d]={signal:h+"datum."+LE,mult:a},u[f]=c[f]=o,o.offset=Sd(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+XW}:void 0,Yu({type:p_,role:N8e,style:yP,key:Nc,from:r,encode:p,overlap:l},n)}function Xin(e,t,n,r,i){const s=au(e,t),o=n.entries,a=!!(o&&o.interactive),l=o?o.name:void 0,u=s("clipHeight"),c=s("symbolOffset"),d={data:"value"},f=`(${i}) ? datum.${Oin} : datum.${JW}`,h=u?Qs(u):{field:JW},p=`datum.${XW}`,m=`max(1, ${i})`;let g,y,v,_,w;h.mult=.5,g={enter:y={opacity:er,x:{signal:f,mult:.5,offset:c},y:h},update:v={opacity:Oc,x:y.x,y:y.y},exit:{opacity:er}};let x=null,S=null;e.fill||(x=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),Oo(g,{fill:s("symbolFillColor",x),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),dse.forEach(k=>{e[k]&&(v[k]=y[k]={scale:e[k],field:Nc})});const E=Yu({type:Vin,role:_rn,key:Nc,from:d,clip:u?!0:void 0,encode:g},n.symbols),T=Qs(c);T.offset=s("labelOffset"),g={enter:y={opacity:er,x:{signal:f,offset:T},y:h},update:v={opacity:Oc,text:{field:use},x:y.x,y:y.y},exit:{opacity:er}},Oo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const I=Yu({type:p_,role:N8e,style:yP,key:Nc,from:d,encode:g},n.labels);return g={enter:{noBound:{value:!u},width:er,height:u?Qs(u):er,opacity:er},exit:{opacity:er},update:v={opacity:Oc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${_}`,v.column.signal=`floor(${p} / ${_})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:XW}},_k({role:ose,from:r,encode:aT(g,o,vP),marks:[E,I],name:l,interactive:a,sort:w})}function Qin(e,t){const n=au(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const pse='item.orient === "left"',mse='item.orient === "right"',d5=`(${pse} || ${mse})`,Jin=`datum.vgrad && ${d5}`,Zin=c5('"top"','"bottom"','"middle"'),esn=c5('"right"','"left"','"center"'),tsn=`datum.vgrad && ${mse} ? (${esn}) : (${d5} && !(datum.vgrad && ${pse})) ? "left" : ${hse}`,nsn=`item._anchor || (${d5} ? "middle" : "start")`,rsn=`${Jin} ? (${pse} ? -90 : 90) : 0`,isn=`${d5} ? (datum.vgrad ? (${mse} ? "bottom" : "top") : ${Zin}) : "top"`;function ssn(e,t,n,r){const i=au(e,t),s={enter:{opacity:er},update:{opacity:Oc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:er}};return Oo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:nsn},angle:{signal:rsn},align:{signal:tsn},baseline:{signal:isn},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Yu({type:p_,role:wrn,style:cse,from:r,encode:s},n)}function osn(e,t){let n;return pt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Ove(e.path)+")":e.sphere&&(n="geoShape("+Ove(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Ove(e){return pt(e)&&e.signal?e.signal:st(e)}function J8e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===u5?ose:t||ise}function asn(e){return{marktype:e.type,name:e.name||void 0,role:e.role||J8e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function lsn(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function gse(e,t){const n=L6e(e.type);n||Le("Unrecognized transform type: "+st(e.type));const r=o5(n.type.toLowerCase(),null,Z8e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Z8e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=usn(o,t,n)}return r}function usn(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return csn(e,t,n);if(i===void 0){e.required&&Le("Missing required "+st(t.type)+" parameter: "+st(e.name));return}else{if(r==="param")return dsn(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Ls(i)?i.map(s=>Dve(e,s,n)):Dve(e,i,n)}function Dve(e,t,n){const r=e.type;if(Ls(t))return $ve(r)?Le("Expression references can not be signals."):t7(r)?n.fieldRef(t):Lve(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||t7(r);return i&&fsn(t)?n.exprRef(t.expr,t.as):i&&hsn(t)?vk(t.field,t.as):$ve(r)?Jh(t,n):psn(r)?Mt(n.getData(t).values):t7(r)?vk(t):Lve(r)?n.compareRef(t):t}}function csn(e,t,n){return yt(t.from)||Le('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function dsn(e,t,n){const r=t[e.name];return e.array?(Be(r)||Le("Expected an array of sub-parameters. Instead: "+st(r)),r.map(i=>Mve(e,i,n))):Mve(e,r,n)}function Mve(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Le("Unsupported parameter: "+st(t));const s=xn(Z8e(i,t,n),i.key);return Mt(n.add(lin(s)))}const fsn=e=>e&&e.expr,hsn=e=>e&&e.field,psn=e=>e==="data",$ve=e=>e==="expr",t7=e=>e==="field",Lve=e=>e==="compare";function msn(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Le("Only group marks can be faceted."),r.field!=null?o=a=hM(r,n):(e.data?a=Mt(n.getData(e.data).aggregate):(s=gse(xn({type:"aggregate",groupby:gt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=hM(r,n),o=a=Mt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Mt(n.add(Af(null,[{}]))),o||(o=hM(e,n)),{key:i,pulse:o,parent:a}}function hM(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Mt(t.getData(e.data).output)}function Rb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Rb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Mt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new Rb(e,s,i,r,o)};function eBe(e){return yt(e)?e:null}function Fve(e,t,n){const r=a5(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function _C(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),l=Frn(s);let u=eBe(i),c,d;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=a[u]),!c){const f=s?{field:GW,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Mt(t.output)};l&&(f.sort=e.sortRef(s)),d=e.add(o5(r,void 0,f)),o&&(t.index[i]=d),c=Mt(d),u!=null&&(a[u]=c)}return c}Rb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=eBe(t);let o,a,l;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Fve(e,o.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Mt(r.output)},n&&n.field&&Fve(e,l,n),a=e.add(F8e(l)),o=e.add(Af({pulse:Mt(a)})),o={agg:a,ref:Mt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Mt(this.values)},extentRef(e,t){return _C(e,this,"extent","extent",t,!1)},domainRef(e,t){return _C(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return _C(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return _C(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return _C(e,this,"indata","tupleindex",t,!0,!0)}};function gsn(e,t,n){const r=e.from.facet,i=r.name,s=hM(r,t);let o;r.name||Le("Facet must have a name: "+st(r)),r.data||Le("Facet must reference a data set: "+st(r)),r.field?o=t.add(z8e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(Zrn({key:t.keyRef(r.groupby),group:Mt(t.proxy(n.parent)),pulse:s})):Le("Facet must specify groupby or field: "+st(r));const a=t.fork(),l=a.add(Af()),u=a.add(h_({pulse:Mt(l)}));a.addData(i,new Rb(a,l,l,u)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function ysn(e,t,n){const r=t.add(z8e({pulse:n.pulse})),i=t.fork();i.add(h_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function tBe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,l=t.add(ML()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(d=>d??"null").join(",")+"),0)",c=Jh(u,t);l.update=c.$expr,l.params=c.$params}function f5(e,t){const n=J8e(e),r=e.type===u5,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===ose||n===sse,a,l,u,c,d,f,h;const p=n===ise||o||i,m=msn(e.from,r,t);l=t.add(Qrn({key:m.key||(e.key?vk(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Mt(l);l=u=t.add(Af({pulse:g})),l=t.add(iin({markdef:asn(e),interactive:lsn(e.interactive,t),clip:osn(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Mt(l)}));const y=Mt(l);l=c=t.add(B8e($8e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const E=gse(S,t),T=E.metadata;(T.generates||T.changes)&&Le("Mark transforms should not generate new data."),T.nomod||(c.params.mod=!0),E.params.pulse=Mt(l),t.add(l=E)}),e.sort&&(l=t.add(hin({sort:t.compareRef(e.sort),pulse:Mt(l)})));const v=Mt(l);(i||o)&&(o=t.add(V8e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),f=Mt(o));const _=t.add(j8e({mark:y,pulse:f||v}));h=Mt(_),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,f||h,g),i?gsn(e,t,m):p?ysn(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(_))),s&&(h=vsn(s,h,t));const w=t.add(U8e({pulse:h})),x=t.add(h_({pulse:Mt(w)},void 0,t.parent()));e.name!=null&&(d=e.name,t.addData(d,new Rb(t,u,w,x)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&Le("Marks only support modify triggers."),tBe(S,t,d)}))}function vsn(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Ls(s)?n.signalRef(s.signal):s,method:Ls(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Ls(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Mt(n.add(ain(o)))}function bsn(e,t){const n=t.config.legend,r=e.encode||{},i=au(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,l=s.style,u={};let c=0,d,f,h;dse.forEach(_=>e[_]?(u[_]=e[_],c=c||e[_]):0),c||Le("Missing valid scale for legend.");const p=_sn(e,t.scaleType(c)),m={title:e.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Mt(t.add(Af(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Mt(t.add(nin(f={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===fM?(h=[Win(e,c,n,r.gradient),Nve(e,n,r.labels,v)],f.count=f.count||t.signalRef(`max(2,2*floor((${W1(i.gradientLength())})/100))`)):p===QW?h=[Gin(e,c,n,r.gradient,v),Nve(e,n,r.labels,v)]:(d=Qin(e,n),h=[Xin(e,n,r,v,W1(d.columns))],f.size=Esn(e,t,h[0].marks)),h=[_k({role:vrn,from:g,encode:y,marks:h,layout:d,interactive:a})],m.title&&h.push(ssn(e,n,r.title,g)),f5(_k({role:grn,from:g,encode:aT(xsn(i,e,n),s,vP),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:l}),t)}function _sn(e,t){let n=e.type||Pve;return!e.type&&wsn(e)===1&&(e.fill||e.stroke)&&(n=Are(t)?fM:fW(t)?QW:Pve),n!==fM?n:fW(t)?QW:fM}function wsn(e){return dse.reduce((t,n)=>t+(e[n]?1:0),0)}function xsn(e,t,n){const r={enter:{},update:{}};return Oo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function Esn(e,t,n){const r=W1(jve("size",e,n)),i=W1(jve("strokeWidth",e,n)),s=W1(Ssn(n[1].encode,t,yP));return Jh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function jve(e,t,n){return t[e]?`scale("${t[e]}",datum)`:X8e(e,n[0].encode)}function Ssn(e,t,n){return X8e("fontSize",e)||Hin("fontSize",t,n)}const Tsn=`item.orient==="${lT}"?-90:item.orient==="${uT}"?90:0`;function Csn(e,t){e=yt(e)?{text:e}:e;const n=au(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,l=[],u={},c=Mt(t.add(Af(null,[u])));return l.push(ksn(e,n,Asn(e),c)),e.subtitle&&l.push(Rsn(e,n,r.subtitle,c)),f5(_k({role:xrn,from:c,encode:Isn(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function Asn(e){const t=e.encode;return t&&t.title||xn({name:e.name,interactive:e.interactive,style:e.style},t)}function Isn(e,t){const n={enter:{},update:{}};return Oo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:hse},angle:{signal:Tsn},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),aT(n,t,vP)}function ksn(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Oo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Yu({type:p_,role:Ern,style:Min,from:r,encode:o},n)}function Rsn(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Oo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Yu({type:p_,role:Srn,style:$in,from:r,encode:o},n)}function Psn(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(gse(r,t))}),e.on&&e.on.forEach(r=>{tBe(r,t,e.name)}),t.addDataPipeline(e.name,Nsn(e,t,n))}function Nsn(e,t,n){const r=[];let i=null,s=!1,o=!1,a,l,u,c,d;for(e.values?Ls(e.values)||cM(e.format)?(r.push(Bve(t,e)),r.push(i=$v())):r.push(i=$v({$ingest:e.values,$format:e.format})):e.url?cM(e.url)||cM(e.format)?(r.push(Bve(t,e)),r.push(i=$v())):r.push(i=$v({$request:e.url,$format:e.format})):e.source&&(i=a=gt(e.source).map(f=>Mt(t.getData(f).output)),r.push(null)),l=0,u=n.length;l<u;++l)c=n[l],d=c.metadata,!i&&!d.source&&r.push(i=$v()),r.push(c),d.generates&&(o=!0),d.modifies&&!o&&(s=!0),d.source?i=c:d.changes&&(i=null);return a&&(u=a.length-1,r[0]=din({derive:s,pulse:u?a:a[0]}),(s||u)&&r.splice(1,0,$v())),i||r.push($v()),r.push(h_({})),r}function $v(e){const t=Af({},e);return t.metadata={source:!0},t}function Bve(e,t){return rin({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const nBe=e=>e===Ry||e===If,h5=(e,t,n)=>Ls(e)?$sn(e.signal,t,n):e===lT||e===If?t:n,Js=(e,t,n)=>Ls(e)?Dsn(e.signal,t,n):nBe(e)?t:n,ef=(e,t,n)=>Ls(e)?Msn(e.signal,t,n):nBe(e)?n:t,rBe=(e,t,n)=>Ls(e)?Lsn(e.signal,t,n):e===If?{value:t}:{value:n},Osn=(e,t,n)=>Ls(e)?Fsn(e.signal,t,n):e===uT?{value:t}:{value:n},Dsn=(e,t,n)=>iBe(`${e} === '${If}' || ${e} === '${Ry}'`,t,n),Msn=(e,t,n)=>iBe(`${e} !== '${If}' && ${e} !== '${Ry}'`,t,n),$sn=(e,t,n)=>yse(`${e} === '${lT}' || ${e} === '${If}'`,t,n),Lsn=(e,t,n)=>yse(`${e} === '${If}'`,t,n),Fsn=(e,t,n)=>yse(`${e} === '${uT}'`,t,n),iBe=(e,t,n)=>(t=t!=null?Qs(t):t,n=n!=null?Qs(n):n,zve(t)&&zve(n)?(t=t?t.signal||st(t.value):null,n=n?n.signal||st(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[xn({test:e},t)].concat(n||[])),zve=e=>e==null||Object.keys(e).length===1,yse=(e,t,n)=>({signal:`${e} ? (${Qw(t)}) : (${Qw(n)})`}),jsn=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${lT}' ? (${Qw(r)}) : `:"")+(n!=null?`${e} === '${Ry}' ? (${Qw(n)}) : `:"")+(i!=null?`${e} === '${uT}' ? (${Qw(i)}) : `:"")+(t!=null?`${e} === '${If}' ? (${Qw(t)}) : `:"")+"(null)"}),Qw=e=>Ls(e)?e.signal:e==null?null:st(e),Bsn=(e,t)=>t===0?0:Ls(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},kx=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function iw(e,t,n,r){let i;if(t&&bt(t,e))return t[e];if(bt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[cse][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[yP][i]}return null}function Uve(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function zsn(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,l,u;if(Ls(o)){const d=Uve([n.axisX,n.axisY]),f=Uve([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of d)a[u]=Js(o,iw(u,n.axisX,i,r),iw(u,n.axisY,i,r));l={};for(u of f)l[u]=jsn(o.signal,iw(u,n.axisTop,i,r),iw(u,n.axisBottom,i,r),iw(u,n.axisLeft,i,r),iw(u,n.axisRight,i,r))}else a=o===If||o===Ry?n.axisX:n.axisY,l=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||l||s?xn({},i,a,l,s):i}function Usn(e,t,n,r){const i=au(e,t),s=e.orient;let o,a;const l={enter:o={opacity:er},update:a={opacity:Oc},exit:{opacity:er}};Oo(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=Vve(e,0),c=Vve(e,1);return o.x=a.x=Js(s,u,er),o.x2=a.x2=Js(s,c),o.y=a.y=ef(s,u,er),o.y2=a.y2=ef(s,c),Yu({type:fse,role:drn,from:r,encode:l},n)}function Vve(e,t){return{scale:e.scale,range:t}}function Vsn(e,t,n,r,i){const s=au(e,t),o=e.orient,a=e.gridScale,l=h5(o,1,-1),u=Hsn(e.offset,l);let c,d,f;const h={enter:c={opacity:er},update:f={opacity:Oc},exit:d={opacity:er}};Oo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Nc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=Js(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:xn(m,{mult:l,offset:u});return c.x=f.x=Js(o,p,g),c.y=f.y=ef(o,p,g),c.x2=f.x2=ef(o,y),c.y2=f.y2=Js(o,y),d.x=Js(o,p),d.y=ef(o,p),Yu({type:fse,role:frn,key:Nc,from:r,encode:h},n)}function Hsn(e,t){if(t!==1)if(!pt(e))e=Ls(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=xn({},e);for(;n.mult!=null;)if(pt(n.mult))n=n.mult=xn({},n.mult);else return n.mult=Ls(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function qsn(e,t,n,r,i,s){const o=au(e,t),a=e.orient,l=h5(a,-1,1);let u,c,d;const f={enter:u={opacity:er},update:d={opacity:Oc},exit:c={opacity:er}};Oo(f,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Qs(i);h.mult=l;const p={scale:e.scale,field:Nc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return d.y=u.y=Js(a,er,p),d.y2=u.y2=Js(a,h),c.x=Js(a,p),d.x=u.x=ef(a,er,p),d.x2=u.x2=ef(a,h),c.y=ef(a,p),Yu({type:fse,role:prn,key:Nc,from:r,encode:f},n)}function n7(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Wsn(e,t,n,r,i,s){const o=au(e,t),a=e.orient,l=e.scale,u=h5(a,-1,1),c=W1(o("labelFlush")),d=W1(o("labelFlushOffset")),f=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=Qs(i);g.mult=u,g.offset=Qs(o("labelPadding")||0),g.offset.mult=u;const y={scale:l,field:Nc,band:.5,offset:Q8e(s.offset,o("labelOffset"))},v=Js(a,p?n7(l,c,'"left"','"right"','"center"'):{value:"center"},Osn(a,"left","right")),_=Js(a,rBe(a,"bottom","top"),p?n7(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=n7(l,c,`-(${d})`,d,0);p=p&&d;const x={opacity:er,x:Js(a,y,g),y:ef(a,y,g)},S={enter:x,update:m={opacity:Oc,text:{field:use},x:x.x,y:x.y,align:v,baseline:_},exit:{opacity:er,x:x.x,y:x.y}};Oo(S,{dx:!f&&p?Js(a,w):null,dy:!h&&p?ef(a,w):null}),Oo(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:f,baseline:h});const E=o("labelBound");let T=o("labelOverlap");return T=T||E?{separation:o("labelSeparation"),method:T,order:"datum.index",bound:E?{scale:l,orient:a,tolerance:E}:null}:void 0,m.align!==v&&(m.align=kx(m.align,v)),m.baseline!==_&&(m.baseline=kx(m.baseline,_)),Yu({type:p_,role:hrn,style:yP,key:Nc,from:r,encode:S,overlap:T},n)}function Gsn(e,t,n,r){const i=au(e,t),s=e.orient,o=h5(s,-1,1);let a,l;const u={enter:a={opacity:er,anchor:Qs(i("titleAnchor",null)),align:{signal:hse}},update:l=xn({},a,{opacity:Oc,text:Qs(e.title)}),exit:{opacity:er}},c={signal:`lerp(range("${e.scale}"), ${c5(0,1,.5)})`};return l.x=Js(s,c),l.y=ef(s,c),a.angle=Js(s,er,Bsn(o,90)),a.baseline=Js(s,rBe(s,Ry,If),{value:Ry}),l.angle=a.angle,l.baseline=a.baseline,Oo(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Ysn(i,s,u,n),u.update.align=kx(u.update.align,a.align),u.update.angle=kx(u.update.angle,a.angle),u.update.baseline=kx(u.update.baseline,a.baseline),Yu({type:p_,role:mrn,style:cse,from:r,encode:u},n)}function Ysn(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=kx(Qs(a),n.update[l]),!1):!Tw(l,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Qs(o):Js(t,Qs(o),Qs(s))}function Ksn(e,t){const n=zsn(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,l=au(e,n),u=qin(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},d=Mt(t.add(Af({},[c]))),f=Mt(t.add(Xrn({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(Vsn(e,n,r.grid,f,u)),c.ticks&&(p=l("tickSize"),h.push(qsn(e,n,r.ticks,f,p,u))),c.labels&&(p=c.ticks?p:0,h.push(Wsn(e,n,r.labels,f,p,u))),c.domain&&h.push(Usn(e,n,r.domain,d)),c.title&&h.push(Gsn(e,n,r.title,d)),f5(_k({role:crn,from:d,encode:aT(Xsn(l,e),i,vP),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:o,style:a}),t)}function Xsn(e,t){const n={enter:{},update:{}};return Oo(n,{orient:e("orient"),offset:e("offset")||0,position:Sd(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function sBe(e,t,n){const r=gt(e.signals),i=gt(e.scales);return n||r.forEach(s=>L8e(s,t)),gt(e.projections).forEach(s=>Iin(s,t)),i.forEach(s=>gin(s,t)),gt(e.data).forEach(s=>Psn(s,t)),i.forEach(s=>yin(s,t)),(n||r).forEach(s=>Krn(s,t)),gt(e.axes).forEach(s=>Ksn(s,t)),gt(e.marks).forEach(s=>f5(s,t)),gt(e.legends).forEach(s=>bsn(s,t)),e.title&&Csn(e.title,t),t.parseLambdas(),t}const Qsn=e=>aT({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Jsn(e,t){const n=t.config,r=Mt(t.root=t.add(ML())),i=Zsn(e,n);i.forEach(u=>L8e(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Af()),o=t.add(B8e($8e(Qsn(e.encode),u5,sse,e.style,t,{pulse:Mt(s)}))),a=t.add(V8e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Mt(o)}));t.operators.pop(),t.pushState(Mt(o),Mt(a),null),sBe(e,t,i),t.operators.push(a);let l=t.add(j8e({mark:r,pulse:Mt(a)}));return l=t.add(U8e({pulse:Mt(l)})),l=t.add(h_({pulse:Mt(l)})),t.addData("root",new Rb(t,s,s,l)),t}function wC(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Zsn(e,t){const n=o=>Sd(e[o],t[o]),r=[wC("background",n("background")),wC("autosize",arn(n("autosize"))),wC("padding",urn(n("padding"))),wC("width",n("width")||0),wC("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return gt(e.signals).forEach(o=>{bt(i,o.name)?o=xn(i[o.name],o):r.push(o),s[o.name]=o}),gt(t.signals).forEach(o=>{!bt(s,o.name)&&!bt(i,o.name)&&r.push(o)}),r}function oBe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Hve(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}oBe.prototype=Hve.prototype={parse(e){return sBe(e,this)},fork(){return new Hve(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof WW?Mt(e):e;return this.add(cin({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Mt(this.add(h_({pulse:e})))),this._parent.push(t),this._lookup.push(n?Mt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Xn(this._parent)},encode(){return Xn(this._encode)},lookup(){return Xn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(yt(e))return vk(e,t);e.signal||Le("Unsupported field reference: "+st(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Mt(this.add(ein(i)))}return r},compareRef(e){let t=!1;const n=s=>Ls(s)?(t=!0,this.signalRef(s.signal)):jrn(s)?(t=!0,this.exprRef(s.expr)):s,r=gt(e.field).map(n),i=gt(e.order).map(n);return t?Mt(this.add(Rve({fields:r,orders:i}))):Ive(r,i)},keyRef(e,t){let n=!1;const r=s=>Ls(s)?(n=!0,Mt(i[s.signal])):s,i=this.signals;return e=gt(e).map(r),n?Mt(this.add(tin({fields:e,flat:t}))):Mrn(e,t)},sortRef(e){if(!e)return e;const t=a5(e.op,e.field),n=e.order||$rn;return n.signal?Mt(this.add(Rve({fields:t,orders:this.signalRef(n.signal)}))):Ive(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return bt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Le("Duplicate signal name: "+st(e));const n=t instanceof WW?t:this.add(ML(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Le("Unrecognized signal name: "+st(e)),this.signals[e]},signalRef(e){return this.signals[e]?Mt(this.signals[e]):(bt(this.lambdas,e)||(this.lambdas[e]=this.add(ML(null))),Mt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Jh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!pt(e)?e:this.signalRef(e.signal||vse(e))},exprRef(e,t){const n={expr:Jh(e,this)};return t&&(n.expr.$name=t),Mt(this.add(Jrn(n)))},addBinding(e,t){this.bindings||Le("Nested signals do not support binding: "+st(e)),this.bindings.push(xn({signal:e},t))},addScaleProj(e,t){bt(this.scales,e)&&Le("Duplicate scale or projection name: "+st(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,fin(t))},addProjection(e,t){this.addScaleProj(e,uin(t))},getScale(e){return this.scales[e]||Le("Unrecognized scale name: "+st(e)),this.scales[e]},scaleRef(e){return Mt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return bt(this.data,e)&&Le("Duplicate data set name: "+st(e)),this.data[e]=t},getData(e){return this.data[e]||Le("Undefined data set name: "+st(e)),this.data[e]},addDataPipeline(e,t){return bt(this.data,e)&&Le("Duplicate data set name: "+st(e)),this.addData(e,Rb.fromEntries(this,t))}};function vse(e){return(Be(e)?eon:ton)(e)}function eon(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(pt(i)?i.signal||vse(i):st(i))}return n+"]"}function ton(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+st(r)+":"+(pt(i)?i.signal||vse(i):st(i));return t+"}"}function non(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function ron(e,t,n){return pt(e)||Le("Input Vega specification must be an object."),t=ZS(non(),t,e.config),Jsn(e,new oBe(t,n)).toRuntime()}var ion="5.30.0";xn(kE,rGt,qXt,EQt,eJt,aJt,DJt,hJt,$Jt,BJt,XJt,rZt);const son=Object.freeze(Object.defineProperty({__proto__:null,Bounds:vs,CanvasHandler:fP,CanvasRenderer:EL,DATE:Zl,DAY:ca,DAYOFYEAR:Qh,Dataflow:Ix,Debug:PFe,Error:fne,EventStream:kj,Gradient:Y4e,GroupItem:Uj,HOURS:qu,Handler:Jre,HybridHandler:jje,HybridRenderer:EW,Info:RFe,Item:zj,MILLISECONDS:df,MINUTES:Wu,MONTH:pa,Marks:Gu,MultiPulse:Nne,None:kFe,Operator:Yr,Parameters:Ij,Pulse:Y0,QUARTER:Jl,RenderType:E0,Renderer:dP,ResourceLoader:tje,SECONDS:qc,SVGHandler:Cje,SVGRenderer:iie,SVGStringRenderer:Fje,Scenegraph:vje,TIME_UNITS:Sne,Transform:ke,View:S8e,WEEK:Ps,Warn:hne,YEAR:Ao,accessor:ou,accessorFields:ha,accessorName:Gi,array:gt,ascending:xj,bandwidthNRD:$ne,bin:B6e,bootstrapCI:z6e,boundClip:Kje,boundContext:aP,boundItem:vW,boundMark:pje,boundStroke:gg,changeset:c_,clampRange:UFe,codegenExpression:Q5e,compare:vne,constant:wa,cumulativeLogNormal:Une,cumulativeNormal:Pj,cumulativeUniform:Wne,dayofyear:e6e,debounce:bne,defaultLocale:Ane,definition:L6e,densityLogNormal:zne,densityNormal:Lne,densityUniform:qne,domChild:ks,domClear:gc,domCreate:w0,domFind:Qre,dotbin:U6e,error:Le,expressionFunction:fs,extend:xn,extent:Xh,extentIndex:VFe,falsy:Vg,fastmap:tT,field:Vc,flush:HFe,font:Gj,fontFamily:cP,fontSize:gp,format:YD,formatLocale:cL,formats:Rne,hasOwnProperty:bt,id:KR,identity:_a,inferType:C6e,inferTypes:A6e,ingest:vr,inherits:lt,inrange:Yw,interpolate:Ire,interpolateColors:jj,interpolateRange:D4e,intersect:qje,intersectBoxLine:Kw,intersectPath:$re,intersectPoint:Lre,intersectRule:rje,isArray:Be,isBoolean:av,isDate:G0,isFunction:En,isIterable:qFe,isNumber:hr,isObject:pt,isRegExp:WFe,isString:yt,isTuple:Cj,key:_ne,lerp:GFe,lineHeight:Ay,loader:Sj,locale:S6e,logger:pne,lruCache:YFe,markup:rie,merge:KFe,mergeConfig:ZS,multiLineOffset:Yre,one:JS,pad:XFe,panLinear:$Fe,panLog:LFe,panPow:FFe,panSymlog:jFe,parse:ron,parseExpression:qie,parseSelector:uv,path:V6,pathCurves:Ore,pathEqual:Xje,pathParse:OE,pathRectangle:Q4e,pathRender:ck,pathSymbols:X4e,pathTrail:J4e,peek:Xn,point:Kj,projection:gie,quantileLogNormal:Vne,quantileNormal:Nj,quantileUniform:Gne,quantiles:Dne,quantizeInterpolator:M4e,quarter:BFe,quartiles:Mne,get random(){return Wc},randomInteger:aWt,randomKDE:jne,randomLCG:oWt,randomLogNormal:H6e,randomMixture:q6e,randomNormal:Fne,randomUniform:W6e,read:R6e,regressionConstant:Yne,regressionExp:Y6e,regressionLinear:Kne,regressionLoess:Q6e,regressionLog:G6e,regressionPoly:X6e,regressionPow:K6e,regressionQuad:Xne,renderModule:Xj,repeat:h2,resetDefaultLocale:rqt,resetSVGClipId:eje,resetSVGDefIds:uXt,responseType:k6e,runtimeContext:d8e,sampleCurve:Dj,sampleLogNormal:Bne,sampleNormal:Rj,sampleUniform:Hne,scale:pr,sceneEqual:sie,sceneFromJSON:gje,scenePickVisit:mL,sceneToJSON:mje,sceneVisit:ff,sceneZOrder:Fre,scheme:kre,serializeXML:Dje,setHybridRendererOptions:sXt,setRandom:iWt,span:XR,splitAccessPath:mp,stringValue:st,textMetrics:Ru,timeBin:y6e,timeFloor:a6e,timeFormatLocale:ak,timeInterval:nT,timeOffset:c6e,timeSequence:h6e,timeUnitSpecifier:ZFe,timeUnits:Tne,toBoolean:wne,toDate:xne,toNumber:da,toSet:cf,toString:Ene,transform:F6e,transforms:kE,truncate:QFe,truthy:Hc,tupleid:$t,typeParsers:uW,utcFloor:l6e,utcInterval:rT,utcOffset:d6e,utcSequence:p6e,utcdayofyear:r6e,utcquarter:zFe,utcweek:i6e,version:ion,visitArray:Qg,week:t6e,writeConfig:eT,zero:d0,zoomLinear:mne,zoomLog:gne,zoomPow:uL,zoomSymlog:yne},Symbol.toStringTag,{value:"Module"}));function oon(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var aon={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},lon={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},uon={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const con=Array.prototype.slice,Lv=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,con.call(t,1))},don=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var fon={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:don,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Lv("join",arguments)},indexof:function(){return Lv("indexOf",arguments)},lastindexof:function(){return Lv("lastIndexOf",arguments)},slice:function(){return Lv("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Lv("substring",arguments,String)},split:function(){return Lv("split",arguments,String)},replace:function(){return Lv("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const hon=["view","item","group","xy","x","y"],ZW=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&ZW.add(setImmediate);const pon={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:aon[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),ZW.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||fon[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>lon[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>uon[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,ZW.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function xC(e,t,n,r,i,s){const o=a=>pon[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,hon.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var mon={operator(e,t){const n=t.ast,r=e.functions;return i=>xC(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>xC(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>xC(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return xC(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const l=o.datum;let u=0,c;for(const d in r)c=xC(r[d].ast,i,a,l,void 0,o),o[d]!==c&&(o[d]=c,u=1);return n!=="rule"&&oon(o,r,s),u}}};const gon="vega-lite",yon='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',von="5.21.0",bon=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],_on="https://vega.github.io/vega-lite/",won="Vega-Lite is a concise high-level language for interactive visualization.",xon=["vega","chart","visualization"],Eon="build/vega-lite.js",Son="build/vega-lite.min.js",Ton="build/vega-lite.min.js",Con="build/src/index",Aon="build/src/index.d.ts",Ion={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},kon=["bin","build","src","vega-lite*","tsconfig.json"],Ron={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Pon={type:"git",url:"https://github.com/vega/vega-lite.git"},Non="BSD-3-Clause",Oon={url:"https://github.com/vega/vega-lite/issues"},Don={"@babel/core":"^7.24.9","@babel/preset-env":"^7.25.0","@babel/preset-typescript":"^7.24.7","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^26.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.6.0",rollup:"^4.19.1","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.3","ts-jest":"^29.2.3","ts-json-schema-generator":"^2.3.0",typescript:"~5.5.4","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.26.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},Mon={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.3","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},$on={vega:"^5.24.0"},Lon={node:">=18"},Fon="yarn@1.22.19",jon={name:gon,author:yon,version:von,collaborators:bon,homepage:_on,description:won,keywords:xon,main:Eon,unpkg:Son,jsdelivr:Ton,module:Con,types:Aon,bin:Ion,files:kon,scripts:Ron,repository:Pon,license:Non,bugs:Oon,devDependencies:Don,dependencies:Mon,peerDependencies:$on,engines:Lon,packageManager:Fon};function bse(e){return Je(e,"or")}function _se(e){return Je(e,"and")}function wse(e){return Je(e,"not")}function pM(e,t){if(wse(e))pM(e.not,t);else if(_se(e))for(const n of e.and)pM(n,t);else if(bse(e))for(const n of e.or)pM(n,t);else t(e)}function Rx(e,t){return wse(e)?{not:Rx(e.not,t)}:_se(e)?{and:e.and.map(n=>Rx(n,t))}:bse(e)?{or:e.or.map(n=>Rx(n,t))}:t(e)}const on=structuredClone;function aBe(e){throw new Error(e)}function FE(e,t){const n={};for(const r of t)bt(e,r)&&(n[r]=e[r]);return n}function Hl(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Fr(e)).join(",")})`};function Un(e){if(hr(e))return e;const t=yt(e)?e:Fr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function eG(e){return e===!1||e===null}function Ln(e,t){return e.includes(t)}function jE(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function xse(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function lBe(e,...t){for(const n of t)Bon(e,n??{});return e}function Bon(e,t){for(const n of Ke(t))eT(e,n,t[n],!0)}function xh(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function zon(e,t){const n=Ke(e),r=Ke(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function uBe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Ese(e,t){for(const n of e)if(t.has(n))return!0;return!1}function tG(e){const t=new Set;for(const n of e){const i=mp(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Sse(e,t){return e===void 0||t===void 0?!0:Ese(tG(e),tG(t))}function Lr(e){return Ke(e).length===0}const Ke=Object.keys,Io=Object.values,Py=Object.entries;function wk(e){return e===!0||e===!1}function xi(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function kA(e,t){return wse(e)?`!(${kA(e.not,t)})`:_se(e)?`(${e.and.map(n=>kA(n,t)).join(") && (")})`:bse(e)?`(${e.or.map(n=>kA(n,t)).join(") || (")})`:t(e)}function $L(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&$L(e[n],t)&&delete e[n],Lr(e)}function bP(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Tse(e,t="datum"){const n=mp(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(st).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function cBe(e,t="datum"){return`${t}[${st(mp(e).join("."))}]`}function Uon(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Gc(e){return`${mp(e).map(Uon).join("\\.")}`}function Pb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function cT(e){return`${mp(e).join(".")}`}function BE(e){return e?mp(e).length:0}function us(...e){return e.find(t=>t!==void 0)}let dBe=42;function fBe(e){const t=++dBe;return e?String(e)+t:t}function Von(){dBe=42}function hBe(e){return pBe(e)?e:`__${e}`}function pBe(e){return e.startsWith("__")}function xk(e){if(e!==void 0)return(e%360+360)%360}function p5(e){return hr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const qve=Object.getPrototypeOf(structuredClone({}));function Iu(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Iu(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;for(const s of e.entries())if(!Iu(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==qve.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==qve.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Iu(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Fr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(s&&(s+=","),s+=JSON.stringify(l)+":"+u)}return t.splice(o,1),`{${s}}`}(e)}function Je(e,t){return pt(e)&&bt(e,t)&&e[t]!==void 0}const Em="row",Sm="column",m5="facet",Ei="x",ro="y",kf="x2",bp="y2",cv="xOffset",dT="yOffset",Rf="radius",vg="radius2",id="theta",bg="theta2",Pf="latitude",Nf="longitude",Of="latitude2",Yc="longitude2",eu="color",_p="fill",wp="stroke",tu="shape",_g="size",m_="angle",wg="opacity",dv="fillOpacity",fv="strokeOpacity",hv="strokeWidth",pv="strokeDash",_P="text",zE="order",wP="detail",g5="key",Nb="tooltip",y5="href",v5="url",b5="description",Hon={x:1,y:1,x2:1,y2:1},mBe={theta:1,theta2:1,radius:1,radius2:1};function gBe(e){return bt(mBe,e)}const Cse={longitude:1,longitude2:1,latitude:1,latitude2:1};function yBe(e){switch(e){case Pf:return"y";case Of:return"y2";case Nf:return"x";case Yc:return"x2"}}function vBe(e){return bt(Cse,e)}const qon=Ke(Cse),Ase={...Hon,...mBe,...Cse,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Px(e){return e===eu||e===_p||e===wp}const bBe={row:1,column:1,facet:1},Cc=Ke(bBe),Ise={...Ase,...bBe},Won=Ke(Ise),{order:gyn,detail:yyn,tooltip:vyn,...Gon}=Ise,{row:byn,column:_yn,facet:wyn,...Yon}=Gon;function Kon(e){return bt(Yon,e)}function _Be(e){return bt(Ise,e)}const Xon=[kf,bp,Of,Yc,bg,vg];function wBe(e){return g_(e)!==e}function g_(e){switch(e){case kf:return Ei;case bp:return ro;case Of:return Pf;case Yc:return Nf;case bg:return id;case vg:return Rf}return e}function Ny(e){if(gBe(e))switch(e){case id:return"startAngle";case bg:return"endAngle";case Rf:return"outerRadius";case vg:return"innerRadius"}return e}function xp(e){switch(e){case Ei:return kf;case ro:return bp;case Pf:return Of;case Nf:return Yc;case id:return bg;case Rf:return vg}}function nu(e){switch(e){case Ei:case kf:return"width";case ro:case bp:return"height"}}function xBe(e){switch(e){case Ei:return"xOffset";case ro:return"yOffset";case kf:return"x2Offset";case bp:return"y2Offset";case id:return"thetaOffset";case Rf:return"radiusOffset";case bg:return"theta2Offset";case vg:return"radius2Offset"}}function kse(e){switch(e){case Ei:return"xOffset";case ro:return"yOffset"}}function Qon(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Jon=Ke(Ase),{x:xyn,y:Eyn,x2:Syn,y2:Tyn,xOffset:Cyn,yOffset:Ayn,latitude:Iyn,longitude:kyn,latitude2:Ryn,longitude2:Pyn,theta:Nyn,theta2:Oyn,radius:Dyn,radius2:Myn,...Rse}=Ase,Zon=Ke(Rse),Pse={x:1,y:1},xg=Ke(Pse);function cs(e){return bt(Pse,e)}const Nse={theta:1,radius:1},ean=Ke(Nse);function _5(e){return e==="width"?Ei:ro}const EBe={xOffset:1,yOffset:1};function xP(e){return bt(EBe,e)}const{text:$yn,tooltip:Lyn,href:Fyn,url:jyn,description:Byn,detail:zyn,key:Uyn,order:Vyn,...SBe}=Rse,tan=Ke(SBe);function nan(e){return bt(Rse,e)}function ran(e){switch(e){case eu:case _p:case wp:case _g:case tu:case wg:case hv:case pv:return!0;case dv:case fv:case m_:return!1}}const TBe={...Pse,...Nse,...EBe,...SBe},Ose=Ke(TBe);function Ep(e){return bt(TBe,e)}function ian(e,t){return oan(e)[t]}const CBe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Hyn,...san}=CBe;function oan(e){switch(e){case eu:case _p:case wp:case b5:case wP:case g5:case Nb:case y5:case zE:case wg:case dv:case fv:case hv:case m5:case Em:case Sm:return CBe;case Ei:case ro:case cv:case dT:case Pf:case Nf:return san;case kf:case bp:case Of:case Yc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case _g:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case pv:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case tu:return{point:"always",geoshape:"always"};case _P:return{text:"always"};case m_:return{point:"always",square:"always",text:"always"};case v5:return{image:"always"};case id:return{text:"always",arc:"always"};case Rf:return{text:"always",arc:"always"};case bg:case vg:return{arc:"always"}}}function r7(e){switch(e){case Ei:case ro:case id:case Rf:case cv:case dT:case _g:case m_:case hv:case wg:case dv:case fv:case kf:case bp:case bg:case vg:return;case m5:case Em:case Sm:case tu:case pv:case _P:case Nb:case y5:case v5:case b5:return"discrete";case eu:case _p:case wp:return"flexible";case Pf:case Nf:case Of:case Yc:case wP:case g5:case zE:return}}const aan={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},lan={count:1,min:1,max:1};function tg(e){return Je(e,"argmin")}function mv(e){return Je(e,"argmax")}function Dse(e){return yt(e)&&bt(aan,e)}const uan=new Set(["count","valid","missing","distinct"]);function w5(e){return yt(e)&&uan.has(e)}function can(e){return yt(e)&&Ln(["min","max"],e)}const dan=new Set(["count","sum","distinct","valid","missing"]),fan=new Set(["mean","average","median","q1","q3","min","max"]);function ABe(e){return av(e)&&(e=O5(e,void 0)),"bin"+Ke(e).map(t=>x5(e[t])?xi(`_${t}_${Py(e[t])}`):xi(`_${t}_${e[t]}`)).join("")}function ri(e){return e===!0||y_(e)&&!e.binned}function yo(e){return e==="binned"||y_(e)&&e.binned===!0}function y_(e){return pt(e)}function x5(e){return Je(e,"param")}function Wve(e){switch(e){case Em:case Sm:case _g:case eu:case _p:case wp:case hv:case wg:case dv:case fv:case tu:return 6;case pv:return 4;default:return 10}}function EP(e){return Je(e,"expr")}function vo(e,{level:t}={level:0}){const n=Ke(e||{}),r={};for(const i of n)r[i]=t===0?_u(e[i]):vo(e[i],{level:t-1});return r}function IBe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:d,subtitleFontWeight:f,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...d?{subtitleFontStyle:d}:{},...f?{subtitleFontWeight:f}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=FE(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:_,nonMarkTitleProperties:y,subtitle:v}}function e0(e){return yt(e)||Be(e)&&yt(e[0])}function Rt(e){return Je(e,"signal")}function v_(e){return Je(e,"step")}function han(e){return Be(e)?!1:Je(e,"fields")&&!Je(e,"data")}function pan(e){return Be(e)?!1:Je(e,"fields")&&Je(e,"data")}function dm(e){return Be(e)?!1:Je(e,"field")&&Je(e,"data")}const man={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},gan=Ke(man),yan={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},nG=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function kBe(e){const t=Be(e.condition)?e.condition.map(Gve):Gve(e.condition);return{..._u(e),condition:t}}function _u(e){if(EP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Gve(e){if(EP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function fi(e){if(EP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Rt(e)?e:e!==void 0?{value:e}:void 0}function van(e){return Rt(e)?e.signal:st(e)}function Yve(e){return Rt(e)?e.signal:st(e.value)}function jd(e){return Rt(e)?e.signal:e==null?null:st(e)}function ban(e,t,n){for(const r of n){const i=Zh(r,t.markDef,t.config);i!==void 0&&(e[r]=fi(i))}return e}function RBe(e){return[].concat(e.type,e.style??[])}function Mr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&Je(t,i)?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Zh(e,t,n,r)}function Zh(e,t,n,{vgChannel:r}={}){const i=rG(e,t,n.style);return us(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function rG(e,t,n){return PBe(e,RBe(t),n)}function PBe(e,t,n){t=gt(t);let r;for(const i of t){const s=n[i];Je(s,e)&&(r=s[e])}return r}function NBe(e,t){return gt(e).reduce((n,r)=>(n.field.push(ut(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function OBe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Iu(i,r))return;n.push(r)}),n}function DBe(e,t){return Iu(e,t)||!t?e:e?[...gt(e),...gt(t)].join(", "):t}function MBe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((e0(n)||Rt(n))&&(e0(r)||Rt(r)))return{explicit:e.explicit,value:DBe(n,r)};if(e0(n)||Rt(n))return{explicit:e.explicit,value:n};if(e0(r)||Rt(r))return{explicit:e.explicit,value:r};if(!e0(n)&&!Rt(n)&&!e0(r)&&!Rt(r))return{explicit:e.explicit,value:OBe(n,r)};throw new Error("It should never reach here")}function Mse(e){return`Invalid specification ${Fr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const _an='Autosize "fit" only works for single views and layered views.';function Kve(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Xve(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Qve(e){return e?`Dropping "fit-${e}" because spec has discrete ${nu(e)}.`:'Dropping "fit" because spec has discrete size.'}function $se(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Jve(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function wan(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function xan(e){return`The "nearest" transform is not supported for ${e} marks.`}function $Be(e){return`Selection not supported for ${e} yet.`}function Ean(e){return`Cannot find a selection named "${e}".`}const San="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Tan="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Can="Legend bindings are only supported for selections over an individual field or encoding channel.";function Aan(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Ian(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const kan="The same selection must be used to override scale domains in a layered view.",Ran='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Pan(e){return`Unknown repeated value "${e}".`}function Zve(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Nan="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Oan(e){return`Unrecognized parse "${e}".`}function e1e(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Dan="Attempt to add the same child twice.";function Man(e){return`Ignoring an invalid transform: ${Fr(e)}.`}const $an='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function t1e(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Lan(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Fr(t)} is overridden by a child projection ${Fr(n)}.`}const Fan="Arc marks uses theta channel rather than angle, replacing angle with theta.";function jan(e){return`${e}Offset dropped because ${e} is continuous`}function Ban(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Fr(n)}}.`}function LBe(e){return`Invalid field type "${e}".`}function zan(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Uan(e){return`Invalid aggregation operator "${e}".`}function FBe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Van(e){return`Position range does not support relative band size for ${e}.`}function iG(e,t){return`Dropping ${Fr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Han="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function E5(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function qan(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Wan(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Gan(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Yan(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function i7(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Kan(e){return`The ${e} for range marks cannot be an expression`}function Xan(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Qan(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Jan(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Zan(e){return`Cannot use the relative band size with ${e} scale.`}function eln(e){return`Using unaggregated domain with raw field has no effect (${Fr(e)}).`}function tln(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function nln(e){return`Unaggregated domain is currently unsupported for log scale (${Fr(e)}).`}function rln(e){return`Cannot apply size to non-oriented mark "${e}".`}function iln(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function sln(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function jBe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function BBe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function oln(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fr(n)} and ${Fr(r)}). Using ${Fr(n)}.`}function aln(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fr(n)} and ${Fr(r)}). Using the union of the two domains.`}function lln(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function uln(e){return`Dropping sort property ${Fr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const n1e="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",cln="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",dln="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",fln="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function hln(e){return`Cannot stack "${e}" if there is already "${e}2".`}function pln(e){return`Stack is applied to a non-linear scale (${e}).`}function mln(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function LL(e,t){return`Invalid ${e}: ${Fr(t)}.`}function gln(e){return`Dropping day from datetime ${Fr(e)} as day cannot be combined with other units.`}function yln(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function vln(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function bln(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function r1e(e){return`1D error band does not support ${e}.`}function zBe(e){return`Channel ${e} is required for "binned" bin.`}function _ln(e){return`Channel ${e} should not be used with "binned" bin.`}function wln(e){return`Domain for ${e} is required for threshold scale.`}const UBe=pne(hne);let UE=UBe;function xln(e){return UE=e,UE}function Eln(){return UE=UBe,UE}function tt(...e){UE.warn(...e)}function Sln(...e){UE.debug(...e)}function b_(e){if(e&&pt(e)){for(const t of Fse)if(Je(e,t))return!0}return!1}const VBe=["january","february","march","april","may","june","july","august","september","october","november","december"],Tln=VBe.map(e=>e.substr(0,3)),HBe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Cln=HBe.map(e=>e.substr(0,3));function Aln(e){if(p5(e)&&(e=+e),hr(e))return e>4&&tt(LL("quarter",e)),e-1;throw new Error(LL("quarter",e))}function Iln(e){if(p5(e)&&(e=+e),hr(e))return e-1;{const t=e.toLowerCase(),n=VBe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Tln.indexOf(r);if(i!==-1)return i;throw new Error(LL("month",e))}}function kln(e){if(p5(e)&&(e=+e),hr(e))return e%7;{const t=e.toLowerCase(),n=HBe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Cln.indexOf(r);if(i!==-1)return i;throw new Error(LL("day",e))}}function Lse(e,t){const n=[];if(t&&e.day!==void 0&&Ke(e).length>1&&(tt(gln(e)),e=on(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Iln(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Aln(e.quarter):e.quarter;n.push(hr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?kln(e.day):e.day;n.push(hr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Ob(e){const n=Lse(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Rln(e){const n=Lse(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Pln(e){const t=Lse(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const qBe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Fse=Ke(qBe);function Nln(e){return bt(qBe,e)}function __(e){return pt(e)?e.binned:WBe(e)}function WBe(e){return e&&e.startsWith("binned")}function jse(e){return e.startsWith("utc")}function Oln(e){return e.substring(3)}const Dln={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function S5(e){return Fse.filter(t=>YBe(e,t))}function GBe(e){const t=S5(e);return t[t.length-1]}function YBe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Mln(e,t,{end:n}={end:!1}){const r=Tse(t),i=jse(e)?"utc":"";function s(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let o;const a={};for(const l of Fse)YBe(e,l)&&(a[l]=s(l),o=l);return n&&(a[o]+="+1"),Rln(a)}function KBe(e){if(!e)return;const t=S5(e);return`timeUnitSpecifier(${Fr(t)}, ${Fr(Dln)})`}function $ln(e,t,n){if(!e)return;const r=KBe(e);return`${n||jse(e)?"utc":"time"}Format(${t}, ${r})`}function eo(e){if(!e)return;let t;return yt(e)?WBe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:pt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),jse(t.unit)&&(t.utc=!0,t.unit=Oln(t.unit)),t}function Lln(e){const{utc:t,...n}=eo(e);return n.unit?(t?"utc":"")+Ke(n).map(r=>xi(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ke(n).map(r=>xi(`_${r}_${n[r]}`)).join("")}function XBe(e,t=n=>n){const n=eo(e),r=GBe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=QBe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(Ob(a))} - ${t(Ob(i))}`}}const Fln={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function jln(e){return bt(Fln,e)}function QBe(e,t=1){if(jln(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Bln(e){return Je(e,"param")}function Bse(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function zse(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Use(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Vse(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Hse(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function qse(e){if(e!=null&&e.field){if(Be(e.range)&&e.range.length===2)return!0;if(Rt(e.range))return!0}return!1}function Wse(e){return!!(e!=null&&e.field)&&(Be(e.oneOf)||Be(e.in))}function zln(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function JBe(e){return Wse(e)||Bse(e)||qse(e)||zse(e)||Vse(e)||Use(e)||Hse(e)}function Hf(e,t){return D5(e,{timeUnit:t,wrapTime:!0})}function Uln(e,t){return e.map(n=>Hf(n,t))}function ZBe(e,t=!0){const{field:n}=e,r=eo(e.timeUnit),{unit:i,binned:s}=r||{},o=ut(e,{expr:"datum"}),a=i?`time(${s?o:Mln(i,n)})`:o;if(Bse(e))return`${a}===${Hf(e.equal,i)}`;if(zse(e)){const l=e.lt;return`${a}<${Hf(l,i)}`}else if(Vse(e)){const l=e.gt;return`${a}>${Hf(l,i)}`}else if(Use(e)){const l=e.lte;return`${a}<=${Hf(l,i)}`}else if(Hse(e)){const l=e.gte;return`${a}>=${Hf(l,i)}`}else{if(Wse(e))return`indexof([${Uln(e.oneOf,i).join(",")}], ${a}) !== -1`;if(zln(e))return T5(a,e.valid);if(qse(e)){const{range:l}=vo(e),u=Rt(l)?{signal:`${l.signal}[0]`}:l[0],c=Rt(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&t)return"inrange("+a+", ["+Hf(u,i)+", "+Hf(c,i)+"])";const d=[];return u!==null&&d.push(`${a} >= ${Hf(u,i)}`),c!==null&&d.push(`${a} <= ${Hf(c,i)}`),d.length>0?d.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Fr(e)}`)}function T5(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Vln(e){return JBe(e)&&e.timeUnit?{...e,timeUnit:eo(e.timeUnit)}:e}const SP={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Hln(e){return e==="quantitative"||e==="temporal"}function e9e(e){return e==="ordinal"||e==="nominal"}const Db=SP.quantitative,Gse=SP.ordinal,VE=SP.temporal,Yse=SP.nominal,fT=SP.geojson;function qln(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Db:return"quantitative";case"t":case VE:return"temporal";case"o":case Gse:return"ordinal";case"n":case Yse:return"nominal";case fT:return"geojson"}}const _o={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},sG={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Wln(e,t){const n=sG[e],r=sG[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Gln={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function i1e(e){return Gln[e]}const t9e=new Set(["linear","log","pow","sqrt","symlog"]),n9e=new Set([...t9e,"time","utc"]);function r9e(e){return t9e.has(e)}const i9e=new Set(["quantile","quantize","threshold"]),Yln=new Set([...n9e,...i9e,"sequential","identity"]),Kln=new Set(["ordinal","bin-ordinal","point","band"]);function to(e){return Kln.has(e)}function hf(e){return Yln.has(e)}function Eh(e){return n9e.has(e)}function HE(e){return i9e.has(e)}const Xln={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function Qln(e){return!yt(e)&&Je(e,"name")}function s9e(e){return Je(e,"param")}function Jln(e){return Je(e,"unionWith")}function Zln(e){return pt(e)&&"field"in e}const eun={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:qyn,domain:Wyn,range:Gyn,rangeMax:Yyn,rangeMin:Kyn,scheme:Xyn,...tun}=eun,nun=Ke(tun);function oG(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Eh(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Eh(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Eh(e);case"nice":return Eh(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return hf(e)&&!Ln(["log","time","utc","threshold","quantile"],e)}}function o9e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Px(e)?void 0:Jan(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function run(e,t){return Ln([Gse,Yse],t)?e===void 0||to(e):t===VE?Ln([_o.TIME,_o.UTC,void 0],e):t===Db?r9e(e)||HE(e)||e===void 0:!0}function iun(e,t,n=!1){if(!Ep(e))return!1;switch(e){case Ei:case ro:case cv:case dT:case id:case Rf:return Eh(t)||t==="band"?!0:t==="point"?!n:!1;case _g:case hv:case wg:case dv:case fv:case m_:return Eh(t)||HE(t)||Ln(["band","point","ordinal"],t);case eu:case _p:case wp:return t!=="band";case pv:case tu:return t==="ordinal"||HE(t)}}function sun(e){return pt(e)&&"value"in e}const cl={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},a9e=cl.arc,C5=cl.area,A5=cl.bar,oun=cl.image,I5=cl.line,k5=cl.point,aun=cl.rect,FL=cl.rule,l9e=cl.text,Kse=cl.tick,lun=cl.trail,Xse=cl.circle,Qse=cl.square,u9e=cl.geoshape;function gv(e){return["line","area","trail"].includes(e)}function Ek(e){return["rect","bar","image","arc","tick"].includes(e)}const uun=new Set(Ke(cl));function ep(e){return Je(e,"type")}const cun=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],dun=["fill","fillOpacity"],fun=[...cun,...dun],hun={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},s1e=Ke(hun),s7=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],pun={area:["line","point"],bar:s7,rect:s7,line:["point"],tick:["bandSize","thickness",...s7]},mun={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},gun={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},c9e=Ke(gun);function Mb(e){return Je(e,"band")}const yun={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},vun=5,Jse={binSpacing:0,continuousBandSize:vun,minBandSize:.25,timeUnitBandPosition:.5},bun={...Jse,binSpacing:1},_un={...Jse,thickness:1};function wun(e){return ep(e)?e.type:e}function d9e(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function Zse({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!hf(r)||i)return"always-valid";const s=d9e(Mr("invalid",e,t),{isPath:gv(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":s}function xun(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function f9e({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function h9e({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var c;const o=n==null?void 0:n.get("type"),a=mf(t),l=w5(a==null?void 0:a.aggregate),u=Zse({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:l});if(a&&u==="show"){const d=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:T5(ut(a,{expr:"datum"}),!1),...Eun(d,n,r)}}}function Eun(e,t,n){if(sun(e)){const{value:r}=e;return Rt(r)?{signal:r.signal}:{value:r}}return f9e({scale:t,scaleName:n,mode:"zeroOrMin"})}function eoe(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=g_(t),l=toe(e),u=h9e({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return u!==void 0?[u,l]:l}function Sun(e){const{datum:t}=e;return b_(t)?Ob(t):`${Fr(t)}`}function G1(e,t,n,r){const i={};if(t&&(i.scale=t),Sp(e)){const{datum:s}=e;b_(s)?i.signal=Ob(s):Rt(s)?i.signal=s.signal:EP(s)?i.signal=s.expr:i.value=s}else i.field=ut(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function jL({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Rt(o)&&0<o&&o<1?"datum":void 0,l=ut(t,{expr:a,suffix:i}),u=n!==void 0?ut(n,{expr:a}):ut(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const d=o===0?l:u;c.field=d}else{const d=Rt(o)?`(1-${o.signal}) * ${l} + ${o.signal} * ${u}`:`${1-o} * ${l} + ${o} * ${u}`;c.signal=`scale("${e}", ${d})`}return r&&(c.offset=r),c}function Tun({scaleName:e,fieldDef:t}){const n=ut(t,{expr:"datum"}),r=ut(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function toe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(t){if(fn(t)){const d=o==null?void 0:o.get("type");if(nl(t)){c??(c=Oy({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:f,timeUnit:h,type:p}=t;if(ri(f)||c&&h&&p===VE)return a!=null&&a.impute?G1(t,s,{binSuffix:"mid"},{offset:l}):c&&!to(d)?jL({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:l}):G1(t,s,kP(t,e)?{binSuffix:"range"}:{},{offset:l});if(yo(f)){if(nt(n))return jL({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});tt(zBe(e===Ei?kf:bp))}}return G1(t,s,to(d)?{binSuffix:"range"}:{},{offset:l,band:d==="band"?c??t.bandPosition??.5:void 0})}else if(pf(t)){const d=t.value,f=l?{offset:l}:{};return{...RA(e,d),...f}}}return En(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function RA(e,t){return Ln(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ln(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:fi(t)}function $b(e){return e&&e!=="number"&&e!=="time"}function p9e(e,t,n){return`${e}(${t}${n?`, ${Fr(n)}`:""})`}const Cun=" – ";function noe({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var l,u;if($b(n))return Bd({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=m9e(e,r,i),a=qE(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Bd({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Bd({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&nt(e)&&e.timeUnit===void 0)return Bd({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(GE(e)){const c=Iun({field:o,timeUnit:nt(e)?(l=eo(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:w_(e)&&((u=e.scale)==null?void 0:u.type)===_o.UTC});return c?{signal:c}:void 0}if(t=aG({type:a,specifiedFormat:t,config:s,normalizeStack:i}),nt(e)&&ri(e.bin)){const c=ut(e,{expr:r,binSuffix:"end"});return{signal:TP(o,c,t,n,s)}}else return t||qE(e)==="quantitative"?{signal:`${v9e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function m9e(e,t,n){return nt(e)?n?`${ut(e,{expr:t,suffix:"end"})}-${ut(e,{expr:t,suffix:"start"})}`:ut(e,{expr:t}):Sun(e)}function Bd({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=m9e(e,r,i)),o!=="datum.value"&&nt(e)&&ri(e.bin)){const a=ut(e,{expr:r,binSuffix:"end"});return{signal:TP(o,a,t,n,s)}}return{signal:p9e(n,o,t)}}function g9e(e,t,n,r,i,s){var o;if(!(yt(r)&&$b(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&qE(e)==="quantitative"&&(i.normalizedNumberFormatType&&WE(e)&&e.stack==="normalize"||i.numberFormatType))){if(WE(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return aG({type:"quantitative",config:i,normalizeStack:!0});if(GE(e)){const a=nt(e)?(o=eo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:Aun({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return aG({type:t,specifiedFormat:n,config:i})}}function y9e(e,t,n){var r;if(e&&(Rt(e)||e==="number"||e==="time"))return e;if(GE(t)&&n!=="time"&&n!=="utc")return nt(t)&&((r=eo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function aG({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(yt(t))return t;if(e===Db)return r?n.normalizedNumberFormat:n.numberFormat}function Aun({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:KBe(t)}:r?void 0:n.timeFormat)}function v9e(e,t){return`format(${e}, "${t||""}")`}function o1e(e,t,n,r){return $b(n)?p9e(n,e,t):v9e(e,(yt(t)?t:void 0)??r.numberFormat)}function TP(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return TP(e,t,i.numberFormat,i.numberFormatType,i);const s=o1e(e,n,r,i),o=o1e(t,n,r,i);return`${T5(e,!1)} ? "null" : ${s} + "${Cun}" + ${o}`}function Iun({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=yt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):$ln(t,e,s)}const R5="min",kun={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function a1e(e){return bt(kun,e)}function Run(e){return Je(e,"encoding")}function Tm(e){return e&&(e.op==="count"||Je(e,"field"))}function b9e(e){return e&&Be(e)}function CP(e){return Je(e,"row")||Je(e,"column")}function roe(e){return Je(e,"header")}function P5(e){return Je(e,"facet")}function Pun(e){return Je(e,"param")}function Nun(e){return!yt(e)&&Je(e,"repeat")}function l1e(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function ioe(e){return Je(e,"sort")}function Oy({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(fn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(nt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Zh("timeUnitBandPosition",n,r);if(ri(s))return .5}}function _9e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var u,c,d;const a=nu(e),l=Mr(o?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(nt(t)){const{timeUnit:f,bin:h}=t;if(f&&!n)return{band:Zh("timeUnitBandSize",r,i)};if(ri(h)&&!to(s))return{band:1}}if(Ek(r.type))return s?to(s)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(d=i[r.type])==null?void 0:d.discreteBandSize}function w9e(e,t,n,r){return ri(e.bin)||e.timeUnit&&nl(e)&&e.type==="temporal"?Oy({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function x9e(e){return Je(e,"sort")&&!Je(e,"field")}function AP(e){return Je(e,"condition")}function N5(e){const t=e==null?void 0:e.condition;return!!t&&!Be(t)&&nt(t)}function IP(e){const t=e==null?void 0:e.condition;return!!t&&!Be(t)&&fn(t)}function Oun(e){const t=e==null?void 0:e.condition;return!!t&&(Be(t)||pf(t))}function nt(e){return Je(e,"field")||(e==null?void 0:e.aggregate)==="count"}function qE(e){return e==null?void 0:e.type}function Sp(e){return Je(e,"datum")}function A0(e){return nl(e)&&!zL(e)||BL(e)}function u1e(e){return nl(e)&&e.type==="quantitative"&&!e.bin||BL(e)}function BL(e){return Sp(e)&&hr(e.datum)}function fn(e){return nt(e)||Sp(e)}function nl(e){return e&&(Je(e,"field")||e.aggregate==="count")&&Je(e,"type")}function pf(e){return Je(e,"value")}function w_(e){return Je(e,"scale")||Je(e,"sort")}function WE(e){return Je(e,"axis")||Je(e,"stack")||Je(e,"impute")}function E9e(e){return Je(e,"legend")}function S9e(e){return Je(e,"format")||Je(e,"formatType")}function Dun(e){return Hl(e,["legend","axis","header","scale"])}function Mun(e){return Je(e,"op")}function ut(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(Lun(e))n=hBe("count");else{let o;if(!t.nofn)if(Mun(e))o=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;ri(a)?(o=ABe(a),i=(t.binSuffix??"")+(t.suffix??"")):l?mv(l)?(s=`["${n}"]`,n=`argmax_${l.argmax}`):tg(l)?(s=`["${n}"]`,n=`argmin_${l.argmin}`):o=String(l):u&&!__(u)&&(o=Lln(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?cT(n):t.expr?cBe(n,t.expr)+s:Gc(n)+s}function zL(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return nt(e)&&!!e.bin;case"temporal":return!1}throw new Error(LBe(e.type))}function $un(e){var t;return w_(e)&&HE((t=e.scale)==null?void 0:t.type)}function Lun(e){return e.aggregate==="count"}function Fun(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ri(r))return`${n} (binned)`;if(i&&!__(i)){const a=(o=eo(i))==null?void 0:o.unit;if(a)return`${n} (${S5(a).join("-")})`}else if(s)return mv(s)?`${n} for max ${s.argmax}`:tg(s)?`${n} for min ${s.argmin}`:`${bP(s)} of ${n}`;return n}function jun(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(mv(t))return`${i} for argmax(${t.argmax})`;if(tg(t))return`${i} for argmin(${t.argmin})`;const s=r&&!__(r)?eo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ri(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const T9e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return jun(e);default:return Fun(e,t)}};let C9e=T9e;function A9e(e){C9e=e}function Bun(){A9e(T9e)}function Nx(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=soe(e))==null?void 0:a.title;if(!nt(e))return i??e.title;const s=e,o=r?ooe(s,t):void 0;return n?us(i,s.title,o):i??s.title??o}function soe(e){if(WE(e)&&e.axis)return e.axis;if(E9e(e)&&e.legend)return e.legend;if(roe(e)&&e.header)return e.header}function ooe(e,t){return C9e(e,t)}function UL(e){if(S9e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=soe(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function zun(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(ioe(e)&&Be(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!mv(n)&&!tg(n))return"quantitative";if(w_(e)&&((s=e.scale)!=null&&s.type))switch(sG[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function mf(e){if(nt(e))return e;if(N5(e))return e.condition}function Ns(e){if(fn(e))return e;if(IP(e))return e.condition}function I9e(e,t,n,r={}){if(yt(e)||hr(e)||av(e)){const i=yt(e)?"string":hr(e)?"number":"boolean";return tt(Ban(t,i,e)),{value:e}}return fn(e)?VL(e,t,n,r):IP(e)?{...e,condition:VL(e.condition,t,n,r)}:e}function VL(e,t,n,r){if(S9e(e)){const{format:i,formatType:s,...o}=e;if($b(s)&&!n.customFormatTypes)return tt(t1e(t)),VL(o,t,n,r)}else{const i=WE(e)?"axis":E9e(e)?"legend":roe(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if($b(o)&&!n.customFormatTypes)return tt(t1e(t)),VL({...e,[i]:a},t,n,r)}}return nt(e)?aoe(e,t,r):Uun(e)}function Uun(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=hr(n)?"quantitative":yt(n)?"nominal":b_(n)?"temporal":void 0,{...e,type:t}}function aoe(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Dse(r)&&!mv(r)&&!tg(r)&&(tt(Uan(r)),delete a.aggregate),i&&(a.timeUnit=eo(i)),o&&(a.field=`${o}`),ri(s)&&(a.bin=O5(s,t)),yo(s)&&!cs(t)&&tt(_ln(t)),nl(a)){const{type:l}=a,u=qln(l);l!==u&&(a.type=u),l!=="quantitative"&&w5(r)&&(tt(zan(l,r)),a.type="quantitative")}else if(!wBe(t)){const l=zun(a,t);a.type=l}if(nl(a)){const{compatible:l,warning:u}=Vun(a,t)||{};l===!1&&tt(u)}if(ioe(a)&&yt(a.sort)){const{sort:l}=a;if(a1e(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&a1e(u))return{...a,sort:{encoding:u,order:"descending"}}}if(roe(a)){const{header:l}=a;if(l){const{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function O5(e,t){return av(e)?{maxbins:Wve(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Wve(t)}:e}const sw={compatible:!0};function Vun(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Em:case Sm:case m5:return zL(e)?sw:{compatible:!1,warning:Wan(t)};case Ei:case ro:case cv:case dT:case eu:case _p:case wp:case _P:case wP:case g5:case Nb:case y5:case v5:case m_:case id:case Rf:case b5:return sw;case Nf:case Yc:case Pf:case Of:return n!==Db?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:sw;case wg:case dv:case fv:case hv:case _g:case bg:case vg:case kf:case bp:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:sw;case tu:case pv:return!zL(e)&&!$un(e)?{compatible:!1,warning:Gan(t)}:sw;case zE:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:sw}}function GE(e){const{formatType:t}=UL(e);return t==="time"||!t&&Hun(e)}function Hun(e){return e&&(e.type==="temporal"||nt(e)&&!!e.timeUnit)}function D5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const s=t&&((l=eo(t))==null?void 0:l.unit);let o=s||n==="temporal",a;return EP(e)?a=e.expr:Rt(e)?a=e.signal:b_(e)?(o=!0,a=Ob(e)):(yt(e)||hr(e))&&o&&(a=`datetime(${Fr(e)})`,Nln(s)&&(hr(e)&&e<1e4||yt(e)&&isNaN(Date.parse(e)))&&(a=Ob({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Fr(e)}function k9e(e,t){const{type:n}=e;return t.map(r=>{const i=nt(e)&&!__(e.timeUnit)?e.timeUnit:void 0,s=D5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function kP(e,t){return ri(e.bin)?Ep(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const c1e={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function RP(e){return e==null?void 0:e.condition}const R9e=["domain","grid","labels","ticks","title"],qun={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},P9e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Wun={...P9e,style:1,labelExpr:1,encoding:1};function d1e(e){return bt(Wun,e)}const Gun={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},N9e=Ke(Gun);function Eg(e){return Je(e,"mark")}class M5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Eg(t)?wun(t.mark)===this.name:!1}}function Y1(e,t){const n=e&&e[t];return n?Be(n)?jE(n,r=>!!r.field):nt(n)||N5(n):!1}function O9e(e,t){const n=e&&e[t];return n?Be(n)?jE(n,r=>!!r.field):nt(n)||Sp(n)||IP(n):!1}function D9e(e,t){if(cs(t)){const n=e[t];if((nt(n)||Sp(n))&&(e9e(n.type)||nt(n)&&n.timeUnit)){const r=kse(t);return O9e(e,r)}}return!1}function M9e(e){return jE(Won,t=>{if(Y1(e,t)){const n=e[t];if(Be(n))return jE(n,r=>!!r.aggregate);{const r=mf(n);return r&&!!r.aggregate}}return!1})}function $9e(e,t){const n=[],r=[],i=[],s=[],o={};return loe(e,(a,l)=>{if(nt(a)){const{field:u,aggregate:c,bin:d,timeUnit:f,...h}=a;if(c||f||d){const p=soe(a),m=p==null?void 0:p.title;let g=ut(a,{forAs:!0});const y={...m?[]:{title:Nx(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(mv(c)?(v="argmax",g=ut({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${u}`):tg(c)?(v="argmin",g=ut({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const _={op:v,as:g};u&&(_.field=u),s.push(_)}}else if(n.push(g),nl(a)&&ri(d)){if(r.push({bin:d,field:u,as:g}),n.push(ut(a,{binSuffix:"end"})),kP(a,l)&&n.push(ut(a,{binSuffix:"range"})),cs(l)){const v={field:`${g}_end`};o[`${l}2`]=v}y.bin="binned",wBe(l)||(y.type=Db)}else if(f&&!__(f)){i.push({timeUnit:f,field:u,as:g});const v=nl(a)&&a.type!==VE&&"time";v&&(l===_P||l===Nb?y.formatType=v:nan(l)?y.legend={formatType:v,...y.legend}:cs(l)&&(y.axis={formatType:v,...y.axis}))}o[l]=y}else n.push(u),o[l]=e[l]}else o[l]=e[l]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function Yun(e,t,n){const r=ian(t,n);if(r){if(r==="binned"){const i=e[t===kf?Ei:ro];return!!(nt(i)&&nt(e[t])&&yo(i.bin))}}else return!1;return!0}function Kun(e,t,n,r){const i={};for(const s of Ke(e))_Be(s)||tt(qan(s));for(let s of Jon){if(!e[s])continue;const o=e[s];if(xP(s)){const a=Qon(s),l=i[a];if(nt(l)&&Hln(l.type)&&nt(o)&&!l.timeUnit){tt(jan(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(tt(Fan),s=id),!Yun(e,s,t)){tt(E5(s,t));continue}if(s===_g&&t==="line"){const a=mf(e[s]);if(a!=null&&a.aggregate){tt(Han);continue}}if(s===eu&&(n?"fill"in e:"stroke"in e)){tt(FBe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===wP||s===zE&&!Be(o)&&!pf(o)||s===Nb&&Be(o)){if(o){if(s===zE){const a=e[s];if(x9e(a)){i[s]=a;continue}}i[s]=gt(o).reduce((a,l)=>(nt(l)?a.push(aoe(l,s)):tt(iG(l,s)),a),[])}}else{if(s===Nb&&o===null)i[s]=null;else if(!nt(o)&&!Sp(o)&&!pf(o)&&!AP(o)&&!Rt(o)){tt(iG(o,s));continue}i[s]=I9e(o,s,r)}}return i}function $5(e,t){const n={};for(const r of Ke(e)){const i=I9e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Xun(e){const t=[];for(const n of Ke(e))if(Y1(e,n)){const r=e[n],i=gt(r);for(const s of i)nt(s)?t.push(s):N5(s)&&t.push(s.condition)}return t}function loe(e,t,n){if(e)for(const r of Ke(e)){const i=e[r];if(Be(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function Qun(e,t,n,r){return e?Ke(e).reduce((i,s)=>{const o=e[s];return Be(o)?o.reduce((a,l)=>t.call(r,a,l,s),i):t.call(r,i,o,s)},n):n}function L9e(e,t){return Ke(t).reduce((n,r)=>{switch(r){case Ei:case ro:case y5:case b5:case v5:case kf:case bp:case cv:case dT:case id:case bg:case Rf:case vg:case Pf:case Nf:case Of:case Yc:case _P:case tu:case m_:case Nb:return n;case zE:if(e==="line"||e==="trail")return n;case wP:case g5:{const i=t[r];if(Be(i)||nt(i))for(const s of gt(i))s.aggregate||n.push(ut(s,{}));return n}case _g:if(e==="trail")return n;case eu:case _p:case wp:case wg:case dv:case fv:case pv:case hv:{const i=mf(t[r]);return i&&!i.aggregate&&n.push(ut(i,{})),n}}},[])}function Jun(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Be(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Be(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function lG(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const l=r?` of ${uoe(t)}`:"";return{field:o+t.field,type:t.type,title:Rt(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),s=Xun(n).map(Dun);return{tooltip:[...i,...xh(s,Un)]}}function uoe(e){const{title:t,field:n}=e;return us(t,n)}function coe(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:d={}})=>{const f=uoe(n);return F9e(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...f!==void 0?{title:f}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...yt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...d}})}}function F9e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...ep(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...av(e[t])?{}:e[t]}}]:[]}function j9e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:NO(s,n),continuousAxisChannelDef2:NO(o,n),continuousAxisChannelDefError:NO(a,n),continuousAxisChannelDefError2:NO(l,n),continuousAxis:i}}function NO(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&tt(bln(n,t)),r}else return e}function B9e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(ep(n)&&n.orient)return n.orient;if(A0(i)){if(A0(s)){const o=nt(i)&&i.aggregate,a=nt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return GE(s)&&!GE(i)?"horizontal":"vertical"}return"horizontal"}else{if(A0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const HL="boxplot",Zun=["box","median","outliers","rule","ticks"],ecn=new M5(HL,U9e);function z9e(e){return hr(e)?"tukey":e}function U9e(e,{config:t}){e={...e,encoding:$5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=ep(n)?n:{type:n};i&&tt($Be("boxplot"));const l=a.extent??t.boxplot.extent,u=Mr("size",a,t),c=a.invalid,d=z9e(l),{bins:f,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:x,customTooltipWithoutAggregatedField:S}=tcn(e,l,t),E=cT(m.field),{color:T,size:I,...k}=_,P=ue=>coe(a,g,m,ue,t.boxplot),L=P(k),R=P(_),$=(pt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",D=P({...k,...I?{size:I}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...T||{value:$}}}}),O=lG([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),F={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=d==="min-max"?O:lG([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),V=[...L({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...L({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...L({partName:"ticks",mark:F,positionPrefix:"lower_whisker",extraEncoding:U}),...L({partName:"ticks",mark:F,positionPrefix:"upper_whisker",extraEncoding:U})],M=[...d!=="tukey"?V:[],...R({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:x,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:O}),...D({partName:"median",mark:{type:"tick",invalid:c,...pt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:O})];if(d==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:M};const z=`datum["lower_box_${m.field}"]`,q=`datum["upper_box_${m.field}"]`,j=`(${q} - ${z})`,H=`${z} - ${l} * ${j}`,G=`${q} + ${l} * ${j}`,J=`datum["${m.field}"]`,re={joinaggregate:V9e(m.field),groupby:y},ie={transform:[{filter:`(${H} <= ${J}) && (${J} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${E}`},{op:"max",field:m.field,as:`upper_whisker_${E}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${E}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${E}`},...v],groupby:y}],layer:V},{tooltip:te,...ae}=k,{scale:_e,axis:ce}=m,ze=uoe(m),Oe=Hl(ce,["title"]),$e=F9e(a,"outliers",t.boxplot,{transform:[{filter:`(${J} < ${H}) || (${J} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...ze!==void 0?{title:ze}:{},..._e!==void 0?{scale:_e}:{},...Lr(Oe)?{}:{axis:Oe}},...ae,...T?{color:T}:{},...S?{tooltip:S}:{}}})[0];let Ne;const pe=[...f,...h,re];return $e?Ne={transform:pe,layer:[$e,ie]}:(Ne=ie,Ne.transform.unshift(...pe)),{...o,layer:[Ne,{transform:p,layer:M}]}}function V9e(e){const t=cT(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function tcn(e,t,n){const r=B9e(e,HL),{continuousAxisChannelDef:i,continuousAxis:s}=j9e(e,r,HL),o=i.field,a=cT(o),l=z9e(t),u=[...V9e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:d,...f}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=Jun(f),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:_}=$9e(p,n),w=r==="vertical"?"horizontal":"vertical",x=r,S=[...m,...g,{aggregate:[...y,...u],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:x,customTooltipWithoutAggregatedField:h}}const doe="errorbar",ncn=["ticks","rule"],rcn=new M5(doe,H9e);function H9e(e,{config:t}){e={...e,encoding:$5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:l,tooltipEncoding:u}=q9e(e,doe,t);delete s.size;const c=coe(a,i,r,s,t.errorbar),d=a.thickness,f=a.size,h={type:"tick",orient:o,aria:!1,...d!==void 0?{thickness:d}:{},...f!==void 0?{size:f}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...d!==void 0?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function icn(e,t){const{encoding:n}=e;if(scn(n))return{orient:B9e(e,t),inputType:"raw"};const r=ocn(n),i=acn(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(fn(a)&&fn(l))throw new Error(`${t} cannot have both x2 and y2`);if(fn(a)){if(A0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(fn(l)){if(A0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(fn(l)&&!fn(a))throw new Error(`${t} cannot have xError2 without xError`);if(fn(c)&&!fn(u))throw new Error(`${t} cannot have yError2 without yError`);if(fn(a)&&fn(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(fn(a)){if(A0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(fn(u)){if(A0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function scn(e){return(fn(e.x)||fn(e.y))&&!fn(e.x2)&&!fn(e.y2)&&!fn(e.xError)&&!fn(e.xError2)&&!fn(e.yError)&&!fn(e.yError2)}function ocn(e){return fn(e.x2)||fn(e.y2)}function acn(e){return fn(e.xError)||fn(e.xError2)||fn(e.yError)||fn(e.yError2)}function q9e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,l=ep(r)?r:{type:r};s&&tt($Be(t));const{orient:u,inputType:c}=icn(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:f,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=j9e(e,u,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:_}=lcn(l,d,f,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:x,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:E,...T}=i,{bins:I,timeUnits:k,aggregate:P,groupby:L,encoding:R}=$9e(T,n),$=[...P,...g],D=c!=="raw"?[]:L,O=lG(v,d,R,_);return{transform:[...a.transform??[],...I,...k,...$.length===0?[]:[{aggregate:$,groupby:D}],...y],groupby:D,continuousAxisChannelDef:d,continuousAxis:m,encodingWithoutContinuousAxis:R,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:O}}function lcn(e,t,n,r,i,s,o,a){let l=[],u=[];const c=t.field;let d,f=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&tt(vln(h,p,o)),p==="stderr"||p==="stdev")l=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],d=[{fieldPrefix:"center_",titlePrefix:bP(h)},{fieldPrefix:"upper_",titlePrefix:f1e(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:f1e(h,p,"-")}],f=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),l=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],d=[{fieldPrefix:"upper_",titlePrefix:Nx({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Nx({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Nx({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&tt(yln(e.center,e.extent)),s==="aggregated-upper-lower"?(d=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?u.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):u.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of u)d.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Pb(Pb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:f}}function f1e(e,t,n){return`${bP(e)} ${n} ${t}`}const foe="errorband",ucn=["band","borders"],ccn=new M5(foe,W9e);function W9e(e,{config:t}){e={...e,encoding:$5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:l}=q9e(e,foe,t),u=o,c=coe(u,i,r,s,t.errorband),d=e.encoding.x!==void 0&&e.encoding.y!==void 0;let f={type:d?"area":"rect"},h={type:d?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return d?(f={...f,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?tt(r1e("interpolate")):u.tension&&tt(r1e("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const G9e={};function hoe(e,t,n){const r=new M5(e,t);G9e[e]={normalizer:r,parts:n}}function dcn(){return Ke(G9e)}hoe(HL,U9e,Zun);hoe(doe,H9e,ncn);hoe(foe,W9e,ucn);const fcn=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Y9e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},K9e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},hcn=Ke(Y9e),pcn=Ke(K9e),mcn={header:1,headerRow:1,headerColumn:1,headerFacet:1},X9e=Ke(mcn),Q9e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],gcn={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},ycn={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},gf="_vgsid_",vcn={point:{on:"click",fields:[gf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function poe(e){return e==="legend"||!!(e!=null&&e.legend)}function o7(e){return poe(e)&&pt(e)}function moe(e){return!!(e!=null&&e.select)}function J9e(e){const t=[];for(const n of e||[]){if(moe(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function bcn(e){return L5(e)||yoe(e)||goe(e)}function goe(e){return Je(e,"concat")}function L5(e){return Je(e,"vconcat")}function yoe(e){return Je(e,"hconcat")}function Z9e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function tp(e){return Je(e,"step")}function h1e(e){return Je(e,"view")||Je(e,"width")||Je(e,"height")}const p1e=20,_cn={align:1,bounds:1,center:1,columns:1,spacing:1},wcn=Ke(_cn);function xcn(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(P5(e)&&!CP(e.facet)||goe(e))&&(i.columns=o),L5(e)&&(i.columns=1);for(const a of wcn)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=hr(l)?l:{row:l.row??s,column:l.column??s}}else i[a]=e[a];return i}function uG(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function cG(e,t){const n=qL(e,t);return tp(n)?n.step:eze}function qL(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return us(n,{step:e.step})}const eze=20,Ecn={continuousWidth:200,continuousHeight:200,step:eze},Scn={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Ecn,mark:mun,arc:{},area:{},bar:bun,circle:{},geoshape:{},image:{},line:{},point:{},rect:Jse,rule:{color:"black"},square:{},text:{color:"black"},tick:_un,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Xln,projection:{},legend:gcn,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:vcn,style:{},title:{},facet:{spacing:p1e},concat:{spacing:p1e},normalizedNumberFormat:".0%"},Fp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],m1e={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},g1e={blue:Fp[0],orange:Fp[1],red:Fp[2],teal:Fp[3],green:Fp[4],yellow:Fp[5],purple:Fp[6],pink:Fp[7],brown:Fp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Tcn(e={}){return{signals:[{name:"color",value:pt(e)?{...g1e,...e}:g1e}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Ccn(e){return{signals:[{name:"fontSize",value:pt(e)?{...m1e,...e}:m1e}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Acn(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function tze(e){const t=Ke(e||{}),n={};for(const r of t){const i=e[r];n[r]=RP(i)?kBe(i):_u(i)}return n}function Icn(e){const t=Ke(e),n={};for(const r of t)n[r]=tze(e[r]);return n}const kcn=[...c9e,...N9e,...X9e,"background","padding","legend","lineBreak","scale","style","title","view"];function nze(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=ZS({},on(Scn),n?Acn(n):{},t?Tcn(t):{},r?Ccn(r):{},s||{});i&&eT(o,"selection",i,!0);const a=Hl(o,kcn);for(const l of["background","lineBreak","padding"])o[l]&&(a[l]=_u(o[l]));for(const l of c9e)o[l]&&(a[l]=vo(o[l]));for(const l of N9e)o[l]&&(a[l]=tze(o[l]));for(const l of X9e)o[l]&&(a[l]=vo(o[l]));if(o.legend&&(a.legend=vo(o.legend)),o.scale){const{invalid:l,...u}=o.scale,c=vo(l,{level:1});a.scale={...vo(u),...Ke(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=Icn(o.style)),o.title&&(a.title=vo(o.title)),o.view&&(a.view=vo(o.view)),a}const Rcn=new Set(["view",...uun]),Pcn=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Ncn={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...pun};function Ocn(e){e=on(e);for(const t of Pcn)delete e[t];if(e.axis)for(const t in e.axis)RP(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of fcn)delete e.legend[t];if(e.mark){for(const t of s1e)delete e.mark[t];e.mark.tooltip&&pt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(J9e(e.params)),delete e.params);for(const t of Rcn){for(const r of s1e)delete e[t][r];const n=Ncn[t];if(n)for(const r of n)delete e[t][r];Mcn(e,t)}for(const t of dcn())delete e[t];Dcn(e);for(const t in e)pt(e[t])&&Lr(e[t])&&delete e[t];return Lr(e)?void 0:e}function Dcn(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=IBe(e.title);Lr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Lr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Lr(r)?delete e.title:e.title=r}function Mcn(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Lr(s)||(e.style[n??t]=s),delete e[t]}function F5(e){return Je(e,"layer")}function $cn(e){return Je(e,"repeat")}function Lcn(e){return!Be(e.repeat)&&Je(e.repeat,"layer")}class voe{map(t,n){return P5(t)?this.mapFacet(t,n):$cn(t)?this.mapRepeat(t,n):yoe(t)?this.mapHConcat(t,n):L5(t)?this.mapVConcat(t,n):goe(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(F5(t))return this.mapLayer(t,n);if(Eg(t))return this.mapUnit(t,n);throw new Error(Mse(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Fcn={zero:1,center:1,normalize:1};function jcn(e){return bt(Fcn,e)}const Bcn=new Set([a9e,A5,C5,FL,k5,Xse,Qse,I5,l9e,Kse]),zcn=new Set([A5,C5,a9e]);function ow(e){return nt(e)&&qE(e)==="quantitative"&&!e.bin}function y1e(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(nt(o)&&nt(a))if(ow(o)&&ow(a)){if(o.stack)return t;if(a.stack)return i;const l=nt(o)&&!!o.aggregate,u=nt(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(ow(o))return t;if(ow(a))return i}else{if(ow(o))return s&&n==="vertical"?void 0:t;if(ow(a))return s&&n==="horizontal"?void 0:i}}function Ucn(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function rze(e,t){var m,g;const n=ep(e)?e:{type:e},r=n.type;if(!Bcn.has(r))return null;const i=y1e(t,"x",n)||y1e(t,"theta",n);if(!i)return null;const s=t[i],o=nt(s)?ut(s,{}):void 0,a=Ucn(i),l=[],u=new Set;if(t[a]){const y=t[a],v=nt(y)?ut(y,{}):void 0;v&&v!==o&&(l.push(a),u.add(v))}const c=a==="x"?"xOffset":"yOffset",d=t[c],f=nt(d)?ut(d,{}):void 0;f&&f!==o&&(l.push(c),u.add(f));const h=Zon.reduce((y,v)=>{if(v!=="tooltip"&&Y1(t,v)){const _=t[v];for(const w of gt(_)){const x=mf(w);if(x.aggregate)continue;const S=ut(x,{});(!S||!u.has(S))&&y.push({channel:v,fieldDef:x})}}return y},[]);let p;return s.stack!==void 0?av(s.stack)?p=s.stack?"zero":null:p=s.stack:zcn.has(r)&&(p="zero"),!p||!jcn(p)||M9e(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==_o.LINEAR&&s!=null&&s.stack&&tt(pln(s.scale.type)),fn(t[xp(i)])?(s.stack!==void 0&&tt(hln(i)),null):(nt(s)&&s.aggregate&&!dan.has(s.aggregate)&&tt(mln(s.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:s.impute===null?!1:gv(r),stackBy:h,offset:p}))}function ize(e,t,n){const r=vo(e),i=Mr("orient",r,n);if(r.orient=Wcn(r.type,t,i),i!==void 0&&i!==r.orient&&tt(Qan(r.orient,i)),r.type==="bar"&&r.orient){const l=Mr("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:yun[r.orient];for(const c of u)r[c]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Mr("opacity",r,n),o=Mr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=Hcn(r.type,t)),Mr("cursor",r,n)===void 0&&(r.cursor=Vcn(r,t,n)),r}function Vcn(e,t,n){return t.href||e.href||Mr("href",e,n)?"pointer":e.cursor}function Hcn(e,t){if(Ln([k5,Kse,Xse,Qse],e)&&!M9e(t))return .7}function qcn(e,t,{graticule:n}){if(n)return!1;const r=Zh("filled",e,t),i=e.type;return us(r,i!==k5&&i!==I5&&i!==FL)}function Wcn(e,t,n){switch(e){case k5:case Xse:case Qse:case l9e:case aun:case oun:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case A5:if(nt(r)&&(yo(r.bin)||nt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(nt(i)&&(yo(i.bin)||nt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(nt(r)&&r.type===Db&&!ri(r.bin)||BL(r))&&nt(i)&&yo(i.bin)?"horizontal":"vertical";if(!o)return(nt(i)&&i.type===Db&&!ri(i.bin)||BL(i))&&nt(r)&&yo(r.bin)?"vertical":"horizontal"}case FL:if(s&&!(nt(r)&&yo(r.bin))&&o&&!(nt(i)&&yo(i.bin)))return;case C5:if(o)return nt(i)&&yo(i.bin)?"horizontal":"vertical";if(s)return nt(r)&&yo(r.bin)?"vertical":"horizontal";if(e===FL){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case I5:case Kse:{const a=u1e(r),l=u1e(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=nl(r)&&r.type===VE,c=nl(i)&&i.type===VE;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function Gcn(e){const{point:t,line:n,...r}=e;return Ke(r).length>1?r:r.type}function Ycn(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Hl(e[t],["point","line"])});return e}function a7(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?pt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?pt(t.point)?t.point:{}:void 0}function v1e(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Kcn{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Eg(t)){const{mark:r,encoding:i}=t,s=ep(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!a7(s,n[s.type],i);case"area":return!!a7(s,n[s.type],i)||!!v1e(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:l,encoding:u,...c}=t,d=$5(u,i),f=ep(a)?a:{type:a},h=a7(f,i[f.type],d),p=f.type==="area"&&v1e(f,i[f.type]),m=[{name:l,...s?{params:s}:{},mark:Gcn({...f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{},...f}),encoding:Hl(d,["shape"])}],g=rze(ize(f,d,i),d);let y=d;if(g){const{fieldChannel:v,offset:_}=g;y={...d,[v]:{...d[v],..._?{stack:_}:{}}}}return y=Hl(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...FE(f,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...FE(f,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:Ycn(i)})}}function Xcn(e,t){return t?CP(e)?oze(e,t):sze(e,t):e}function l7(e,t){return t?oze(e,t):e}function dG(e,t,n){const r=t[e];if(Nun(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};tt(Pan(r.repeat));return}return t}function sze(e,t){if(e=dG("field",e,t),e!==void 0){if(e===null)return null;if(ioe(e)&&Tm(e.sort)){const n=dG("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function b1e(e,t){if(nt(e))return sze(e,t);{const n=dG("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function _1e(e,t){if(fn(e)){const n=b1e(e,t);if(n)return n;if(AP(e))return{condition:e.condition}}else{if(IP(e)){const n=b1e(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function oze(e,t){const n={};for(const r in e)if(Je(e,r)){const i=e[r];if(Be(i))n[r]=i.map(s=>_1e(s,t)).filter(s=>s);else{const s=_1e(i,t);s!==void 0&&(n[r]=s)}}return n}class Qcn{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Eg(t)){const{encoding:n,mark:r}=t;if(r==="line"||ep(r)&&r.type==="line")for(const i of Xon){const s=g_(i),o=n[s];if(n[i]&&(nt(o)&&!yo(o.bin)||Sp(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return tt(Xan(!!i.x2,!!i.y2)),r({...t,mark:pt(s)?{...s,type:"rule"}:"rule"},n)}}class Jcn extends voe{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[ecn,rcn,ccn,new Kcn,new Qcn]}map(t,n){if(Eg(t)){const r=Y1(t.encoding,Em),i=Y1(t.encoding,Sm),s=Y1(t.encoding,m5);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=l7(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(o,n.config))return l.run(o,n,a);return o}mapRepeat(t,n){return Lcn(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:i}},n):{...s,layer:l.map(d=>{const f={...u,layer:d},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${xi(d)}`,p=this.mapLayerOrUnit(i,{...n,repeater:f,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Be(r)&&t.columns&&(t=Hl(t,["columns"]),tt(Zve("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!Be(r)&&r.row||[l?l.row:null],d=!Be(r)&&r.column||[l?l.column:null],f=Be(r)&&r||[l?l.repeat:null];for(const p of f)for(const m of c)for(const g of d){const y={repeat:p,row:m,column:g,layer:l.layer},v=(i.name?`${i.name}_`:"")+u+"child__"+(Be(r)?`${xi(p)}`:(r.row?`row_${xi(m)}`:"")+(r.column?`column_${xi(g)}`:"")),_=this.map(i,{...n,repeater:y,repeaterPrefix:v});_.name=v,a.push(Hl(_,["data"]))}const h=Be(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return CP(r)&&t.columns&&(t=Hl(t,["columns"]),tt(Zve("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,l=x1e({parentProjection:o,projection:i}),u=w1e({parentEncoding:s,encoding:l7(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:l,projection:u,height:c,view:d,params:f,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=l7(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...l?{width:l}:{},...c?{height:c}:{},...d?{view:d}:{},...u?{projection:u}:{},mark:a,encoding:y,...f?{params:f}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&tt(Yan([...r?[Em]:[],...i?[Sm]:[]]));const o={},a={};for(const l of[Em,Sm]){const u=t[l];if(u){const{align:c,center:d,spacing:f,columns:h,...p}=u;o[l]=p;for(const m of["align","center","spacing"])u[m]!==void 0&&(a[m]??(a[m]={}),a[m][l]=u[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:l,columns:u,...c}=s;return{facetMapping:Xcn(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,l={...i,parentEncoding:w1e({parentEncoding:n,encoding:s,layer:!0}),parentProjection:x1e({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function w1e({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ke(e),...Ke(t)]);for(const s of i){const o=t[s],a=e[s];if(fn(o)){const l={...a,...o};r[s]=l}else IP(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||pf(a)||Rt(a)||fn(a)||Be(a))&&(r[s]=a)}}else r=t;return!r||Lr(r)?void 0:r}function x1e(e){const{parentProjection:t,projection:n}=e;return t&&n&&tt(Lan({parentProjection:t,projection:n})),n??t}function boe(e){return Je(e,"filter")}function Zcn(e){return Je(e,"stop")}function aze(e){return Je(e,"lookup")}function edn(e){return Je(e,"data")}function tdn(e){return Je(e,"param")}function ndn(e){return Je(e,"pivot")}function rdn(e){return Je(e,"density")}function idn(e){return Je(e,"quantile")}function sdn(e){return Je(e,"regression")}function odn(e){return Je(e,"loess")}function adn(e){return Je(e,"sample")}function ldn(e){return Je(e,"window")}function udn(e){return Je(e,"joinaggregate")}function cdn(e){return Je(e,"flatten")}function ddn(e){return Je(e,"calculate")}function lze(e){return Je(e,"bin")}function fdn(e){return Je(e,"impute")}function hdn(e){return Je(e,"timeUnit")}function pdn(e){return Je(e,"aggregate")}function mdn(e){return Je(e,"stack")}function gdn(e){return Je(e,"fold")}function ydn(e){return Je(e,"extent")&&!Je(e,"density")&&!Je(e,"regression")}function vdn(e){return e.map(t=>boe(t)?{filter:Rx(t.filter,Vln)}:t)}class bdn extends voe{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=E1e(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=E1e(t,n),t.encoding){const r={};for(const[i,s]of Py(t.encoding))r[i]=uze(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Py(r).map(([s,o])=>{const{init:a,bind:l,empty:u,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=u!=="none";for(const d of Io(n.selectionPredicates[s]??{}))d.empty=u!=="none";return{name:s,value:a,select:c,bind:l}})}:t}}function E1e(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(boe(s))return{filter:fG(s,t)};if(lze(s)&&y_(s.bin))return{...s,bin:cze(s.bin)};if(aze(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function uze(e,t){var r,i;const n=on(e);if(nt(n)&&y_(n.bin)&&(n.bin=cze(n.bin)),w_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(AP(n))if(Be(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:l,...u}=s;return a?s:{...u,test:fG(s,t)}});else{const{selection:s,param:o,test:a,...l}=uze(n.condition,t);n.condition=o?n.condition:{...l,test:fG(n.condition,t)}}return n}function cze(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function fG(e,t){const n=r=>Rx(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Rx(e.test||e.filter,r=>r.selection?n(r.selection):r)}class hG extends voe{map(t,n){const r=n.selections??[];if(t.params&&!Eg(t)){const i=[];for(const s of t.params)moe(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(yt(a)&&(a===t.name||i.includes(a))||Be(a)&&a.map(l=>i.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=hG.prototype[e];hG.prototype[e]=function(n,r){return t.call(this,n,_dn(n,r))}}function _dn(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function dze(e,t){t===void 0&&(t=nze(e.config));const n=Sdn(e,t),{width:r,height:i}=e,s=Tdn(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const wdn=new Jcn,xdn=new bdn,Edn=new hG;function Sdn(e,t={}){const n={config:t};return Edn.map(wdn.map(xdn.map(e,n),n),n)}function S1e(e){return yt(e)?{type:e}:e??{}}function Tdn(e,t,n){let{width:r,height:i}=t;const s=Eg(e)||F5(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(tt(Kve("width")),r=void 0),i=="container"&&(tt(Kve("height")),i=void 0));const a={type:"pad",...o,...n?S1e(n.autosize):{},...S1e(e.autosize)};if(a.type==="fit"&&!s&&(tt(_an),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&tt(Xve("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&tt(Xve("height")),!Iu(a,{type:"pad"}))return a}function Cdn(e){return["fit","fit-x","fit-y"].includes(e)}function Adn(e){return e?`fit-${_5(e)}`:"fit"}const Idn=["background","padding"];function T1e(e,t){const n={};for(const r of Idn)e&&e[r]!==void 0&&(n[r]=_u(e[r]));return t&&(n.params=e.params),n}class Sg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Sg(on(this.explicit),on(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return us(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ke(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function th(e){return{explicit:!0,value:e}}function fu(e){return{explicit:!1,value:e}}function fze(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:j5(t,n,r,i)}}function j5(e,t,n,r){return e.explicit&&t.explicit&&tt(oln(n,r,e.value,t.value)),e}function Dy(e,t,n,r,i=j5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Iu(e.value,t.value)?e:i(e,t,n,r)}class kdn extends Sg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function YE(e){return Je(e,"url")}function Sk(e){return Je(e,"values")}function hze(e){return Je(e,"name")&&!YE(e)&&!Sk(e)&&!Q0(e)}function Q0(e){return e&&(pze(e)||mze(e)||_oe(e))}function pze(e){return Je(e,"sequence")}function mze(e){return Je(e,"sphere")}function _oe(e){return Je(e,"graticule")}var Wi;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Wi||(Wi={}));function gze({invalid:e,isPath:t}){switch(d9e(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function Rdn(e){const{marks:t,scales:n}=gze(e);return t===n?Wi.Main:n==="include-invalid-values"?Wi.PreFilterInvalid:Wi.PostFilterInvalid}function yze(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Gc(i.field),i}function Lb(e,t=!0,n=_a){if(Be(e)){const r=e.map(i=>Lb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(b_(e))return n(t?Ob(e):Pln(e));return t?n(Fr(e)):e}function Pdn(e,t){for(const n of Io(e.component.selection??{})){const r=n.name;let i=`${r}${My}, ${n.resolve==="global"?"true":`{unit: ${K1(e)}}`}`;for(const s of V5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+afn,on:[{events:{signal:n.name+My},update:`modify(${st(n.name+Fb)}, ${i})`}]})}return woe(t)}function Ndn(e,t){if(e.component.selection&&Ke(e.component.selection).length){const n=st(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:uv("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return woe(t)}function Odn(e,t){let n=!1;for(const r of Io(e.component.selection??{})){const i=r.name,s=st(i+Fb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${Mze}(${s}, ${st(a)}${l}`})}n=!0;for(const a of V5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),woe(t)}function Ddn(e,t){const n=[...t],r=K1(e,{escape:!1});for(const i of Io(e.component.selection??{})){const s={name:i.name+Fb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:gf}}]),i.init){const a=i.project.items.map(yze);s.values=i.project.hasSelectionId?i.init.map(l=>({unit:r,[gf]:Lb(l,!1)[0]})):i.init.map(l=>({unit:r,fields:a,values:Lb(l,!1)}))}n.filter(a=>a.name===i.name+Fb).length||n.push(s)}return n}function vze(e,t){for(const n of Io(e.component.selection??{}))for(const r of V5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Mdn(e,t){for(const n of e.children)Ai(n)&&(t=vze(n,t));return t}function $dn(e,t,n,r){const i=Bze(e,t.param,t);return{signal:hf(n.get("type"))&&Be(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function woe(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Nr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){tt(Dan);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class ql extends Nr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${fBe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function u7(e){return e.as!==void 0}function C1e(e){return`${e}_end`}class Fh extends Nr{clone(){return new Fh(null,on(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:l}=s;if(l){let u;if(__(l)){if(Ai(n)){const{mark:c,markDef:d,config:f}=n,h=Oy({fieldDef:s,markDef:d,config:f});(Ek(c)||h)&&(u={timeUnit:eo(l),field:a})}}else u={as:ut(s,{forAs:!0}),field:a,timeUnit:l};if(Ai(n)){const{mark:c,markDef:d,config:f}=n,h=Oy({fieldDef:s,markDef:d,config:f});Ek(c)&&cs(o)&&h!==.5&&(u.rectBandPosition=h)}u&&(i[Un(u)]=u)}return i},{});return Lr(r)?null:new Fh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=eo(r),o={...i,timeUnit:s};return new Fh(t,{[Un(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Py(this.timeUnits)){const s=u7(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Io(this.timeUnits).map(t=>u7(t)?t.as:C1e(t.field)))}dependentFields(){return new Set(Io(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Un(this.timeUnits)}`}assemble(){const t=[];for(const n of Io(this.timeUnits)){const{rectBandPosition:r}=n,i=eo(n.timeUnit);if(u7(n)){const{field:s,as:o}=n,{unit:a,utc:l,...u}=i,c=[o,`${o}_end`];t.push({field:Gc(s),type:"timeunit",...a?{units:S5(a)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...A1e(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=bze({timeUnit:i,field:o}),l=C1e(o);t.push({type:"formula",expr:a,as:l}),t.push(...A1e([o,l],r,i))}}return t}}const B5="offsetted_rect_start",z5="offsetted_rect_end";function bze({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=GBe(r),{part:o,step:a}=QBe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function A1e([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:I1e([bze({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${B5}`},{type:"formula",expr:I1e([i,s],n+.5),as:`${e}_${z5}`}]}return[]}function I1e([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const PP="_tuple_fields";class Ldn{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Fdn={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Ldn),s={},o={},a=new Set,l=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=xi(`${r}_${g}`);for(let v=1;a.has(y);v++)y=xi(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},u=t.type,c=e.config.selection[u],d=n.value!==void 0?gt(n.value):null;let{fields:f,encodings:h}=pt(n.select)?n.select:{};if(!f&&!h&&d){for(const p of d)if(pt(p))for(const m of Ke(p))Kon(m)?(h||(h=[])).push(m):u==="interval"?(tt(Ran),h=c.encodings):(f??(f=[])).push(m)}!f&&!h&&(h=c.encodings,"fields"in c&&(f=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){tt(wan(p,m.aggregate));continue}else if(!g){tt(Jve(p));continue}if(m.timeUnit&&!__(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Un(y)]=y}if(!s[g]){const y=u==="interval"&&Ep(p)&&hf(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...l(v,"data"),...l(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===gf,vBe(p)?(v.geoChannel=p,v.channel=yBe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else tt(Jve(p))}for(const p of f??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...l(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===gf}d&&(t.init=d.map(p=>i.items.map(m=>pt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Lr(o)||(i.timeUnit=new Fh(null,o))},signals:(e,t,n)=>{const r=t.name+PP;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(yze)})}},Cm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Ep(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&tt(Tan),!s||!hf(o)){tt(San);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||k1e(e)||r.length===0)return n;const i=n.find(o=>o.name===t.name);let s=i.update;if(s.includes(Mze))i.update=`{${r.map(o=>`${st(Gc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${st(Gc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!k1e(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function pG(e,t){return`domain(${st(e.scaleName(t))})`}function k1e(e){return e.parent&&yT(e.parent)&&!e.parent.parent}const Ox="_brush",_ze="_scale_trigger",EC="geo_interval_init_tick",wze="_init",jdn="_center",Bdn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...pt(n.select)?n.select:{}};i.fields=[gf],i.encodings||(i.encodings=n.value?Ke(n.value):[Nf,Pf]),n.select={type:"interval",...i}}if(t.translate&&!Cm.defined(t)){const i=`!event.item || event.item.mark.name !== ${st(t.name+Ox)}`;for(const s of t.events){if(!s.between){tt(`${s} is not an ordered event stream for interval selections.`);continue}const o=gt((r=s.between[0]).filter??(r.filter=[]));o.includes(i)||o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+My,s=Io(t.project.hasChannel).filter(a=>a.channel===Ei||a.channel===ro),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,l)=>a.concat(zdn(e,t,l,o&&o[l.index])),[])),e.hasProjection){const a=st(e.projectionName()),l=e.projectionName()+jdn,{x:u,y:c}=t.project.hasChannel,d=u&&u.signals.visual,f=c&&c.signals.visual,h=u?o&&o[u.index]:`${l}[0]`,p=c?o&&o[c.index]:`${l}[1]`,m=x=>e.getSizeSignalRef(x).signal,g=`[[${d?d+"[0]":"0"}, ${f?f+"[0]":"0"}],[${d?d+"[1]":m("width")}, ${f?f+"[1]":m("height")}]]`;o&&(n.unshift({name:r+wze,init:`[scale(${a}, [${u?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${c?p[1]:p}])]`}),(!u||!c)&&(n.find(S=>S.name===l)||n.unshift({name:l,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${st(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${K1(e)}}`,_=`vlSelectionTuples(${y}, ${v})`,w=s.map(x=>x.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:EC}]:[]],update:_}]})}else{if(!Cm.defined(t)){const u=r+_ze,c=s.map(d=>{const f=d.channel,{data:h,visual:p}=d.signals,m=st(e.scaleName(f)),g=e.getScaleComponent(f).get("type"),y=hf(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:s.map(d=>({scale:e.scaleName(d.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const a=s.map(u=>u.signals.data),l=`unit: ${K1(e)}, fields: ${r+PP}, values`;return n.concat({name:i,...o?{init:`{${l}: ${Lb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Ai(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===EC).length||n.unshift({name:EC,value:null,on:[{events:"timer{1}",update:`${EC} === null ? {} : ${EC}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,l=`data(${st(t.name+Fb)})`;if(Cm.defined(t)||!i&&!s)return n;const u={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ke(u))u[g]=[{test:`${l}.length && ${l}[0].unit === ${K1(e)}`,...u[g]},{value:0}];const{fill:c,fillOpacity:d,cursor:f,...h}=t.mark,p=Ke(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=f??(t.translate?"move":null);return[{name:`${r+Ox}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:d}},update:u}},...n,{name:r+Ox,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}};function zdn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=st(i?e.scaleName(s):e.projectionName()),l=f=>`scale(${a}, ${f})`,u=e.getSizeSignalRef(s===Ei?"width":"height").signal,c=`${s}(unit)`,d=t.events.reduce((f,h)=>[...f,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${u})]`}],[]);if(i){const f=n.signals.data,h=Cm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:Lb(r,!0,l)}:{value:[]};return d.push({events:{signal:t.name+_ze},update:hf(m)?`[${l(`${f}[0]`)}, ${l(`${f}[1]`)}]`:"[0, 0]"}),h?[{name:f,on:[]}]:[{name:o,...g,on:d},{name:f,...r?{init:Lb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const f=s===Ei?0:1,h=t.name+wze,p=r?{init:`[${h}[0][${f}], ${h}[1][${f}]]`}:{value:[]};return[{name:o,...p,on:d}]}}const Udn={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+PP,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Io(e.component.selection??{}).reduce((d,f)=>f.type==="interval"?d.concat(f.name+Ox):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${K1(e)}, `;if(t.project.hasSelectionId)u+=`${gf}: ${o}[${st(gf)}]`;else{const d=s.items.map(f=>{const h=e.fieldDef(f.channel);return h!=null&&h.bin?`[${o}[${st(e.vgField(f.channel,{}))}], ${o}[${st(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${o}[${st(f.field)}]`}).join(", ");u+=`fields: ${i}, values: [${d}]`}const c=t.events;return n.concat([{name:r+My,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}};function hT({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=AP(t)&&t.condition;let o=[];s&&(o=gt(s).map(u=>{const c=i(u);if(Pun(u)){const{param:d,empty:f}=u;return{test:jze(e,{param:d,empty:f}),...c}}else return{test:YL(e,u.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function xoe(e,t="text"){const n=e.encoding[t];return hT({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>U5(r,e.config),invalidValueRef:void 0})}function U5(e,t,n="datum"){if(e){if(pf(e))return fi(e.value);if(fn(e)){const{format:r,formatType:i}=UL(e);return noe({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function xze(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Be(o))return{tooltip:R1e({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return hT({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:u=>{const c=U5(u,i,a);if(c)return c;if(u===null)return;let d=Mr("tooltip",r,i);if(d===!0&&(d={content:"encoding"}),yt(d))return{value:d};if(pt(d))return Rt(d)?d:d.content==="encoding"?R1e(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function Eze(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s=new Set,o=r?"datum.datum":"datum",a=[];function l(c,d){const f=g_(d),h=nl(c)?c:{...c,type:e[f].type},p=h.title||ooe(h,i),m=gt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(cs(d)){const y=d==="x"?"x2":"y2",v=mf(e[y]);if(yo(h.bin)&&v){const _=ut(h,{expr:o}),w=ut(v,{expr:o}),{format:x,formatType:S}=UL(h);g=TP(_,w,x,S,i),s.add(y)}}if((cs(d)||d===id||d===Rf)&&t&&t.fieldChannel===d&&t.offset==="normalize"){const{format:y,formatType:v}=UL(h);g=noe({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=U5(h,i,o).signal),a.push({channel:d,key:m,value:g})}loe(e,(c,d)=>{nt(c)?l(c,d):N5(c)&&l(c.condition,d)});const u={};for(const{channel:c,key:d,value:f}of a)!s.has(c)&&!u[d]&&(u[d]=f);return u}function R1e(e,t,n,{reactiveGeom:r}={}){const i=Eze(e,t,n,{reactiveGeom:r}),s=Py(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Vdn(e){const{markDef:t,config:n}=e,r=Mr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Hdn(e),...qdn(e)}}function Hdn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Mr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:bt(yan,t)?{}:{ariaRoleDescription:{value:t}}}function qdn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return hT({model:e,channelDef:s,vgChannel:"description",mainRefFn:l=>U5(l,e.config),invalidValueRef:void 0});const o=Mr("description",n,r);if(o!=null)return{description:fi(o)};if(r.aria===!1)return{};const a=Eze(t,i,r);if(!Lr(a))return{description:{signal:Py(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function xo(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[e];a===void 0&&(l??(l=Mr(e,r,s,{vgChannel:o,ignoreVgConfig:!AP(u)})),l!==void 0&&(a=fi(l)));const c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},d=h9e({...c,scaleChannel:e,channelDef:u});return hT({model:t,channelDef:u,vgChannel:o??e,invalidValueRef:d,mainRefFn:h=>toe({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function Sze(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Mr("filled",n,i),a=Ln(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,l=Mr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,u=Mr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",d={...l?{fill:fi(l)}:{},...u?{stroke:fi(u)}:{}};return n.color&&(o?n.fill:n.stroke)&&tt(FBe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...xo("color",e,{vgChannel:c,defaultValue:o?l:u}),...xo("fill",e,{defaultValue:r.fill?l:void 0}),...xo("stroke",e,{defaultValue:r.stroke?u:void 0})}}function Wdn(e){const{encoding:t,mark:n}=e,r=t.order;return!gv(n)&&pf(r)?hT({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>fi(i.value),invalidValueRef:void 0}):{}}function KE({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:toe({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:fi(o),bandPosition:i})};const l=t[s];return l?{offsetType:"visual",offset:l}:{}}function Va(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,l=i[e],u=i[xp(e)],c=t.scaleName(e),d=t.getScaleComponent(e),{offset:f,offsetType:h}=KE({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Eoe({model:t,defaultPos:n,channel:e,scaleName:c,scale:d}),m=!l&&cs(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Gdn({channel:e,channelDef:l,channel2Def:u,markDef:s,config:o,scaleName:c,scale:d,stack:a,offset:f,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function Gdn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(fn(n)&&i&&t===i.fieldChannel){if(nt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return jL({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return G1(n,r,{suffix:"end"},{offset:s})}return eoe(e)}function Eoe({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=g_(n),l=Ny(n),u=Mr(n,s,o,{vgChannel:l});if(u!==void 0)return RA(n,u);switch(t){case"zeroOrMin":return P1e({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return P1e({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[nu(n)],mult:.5}}}}function P1e({mainChannel:e,config:t,...n}){const r=f9e(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const Ydn={left:"x",center:"xc",right:"x2"},Kdn={top:"y",middle:"yc",bottom:"y2"};function Tze(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Ny(e);const i=e==="x"?"align":"baseline",s=Mr(i,t,n);let o;return Rt(s)?(tt(Kan(i)),o=void 0):o=s,e==="x"?Ydn[o||(r==="top"?"left":"center")]:Kdn[o||r]}function WL(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Cze(e,t,{defaultPos:n,defaultPos2:r}):Va(e,t,{defaultPos:n})}function Cze(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=xp(e),a=nu(e),l=Xdn(t,r,o),u=l[a]?Tze(e,i,s):Ny(e);return{...Va(e,t,{defaultPos:n,vgChannel:u}),...l}}function Xdn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,l=g_(n),u=nu(n),c=Ny(n),d=r[l],f=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=n in r||n in s?KE({channel:n,markDef:s,encoding:r,model:e}):KE({channel:l,markDef:s,encoding:r,model:e});if(!d&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=nu(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=Qdn({channel:n,channelDef:d,channel2Def:r[n],markDef:s,config:a,scaleName:f,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:OO(n,s)||OO(n,{[n]:rG(n,s,a.style),[u]:rG(u,s,a.style)})||OO(n,a[i])||OO(n,a.mark)||{[c]:Eoe({model:e,defaultPos:t,channel:n,scaleName:f,scale:h})()}}function Qdn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u}){return fn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?G1(t,s,{suffix:"start"},{offset:l}):eoe({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function OO(e,t){const n=nu(e),r=Ny(e);if(t[r]!==void 0)return{[r]:RA(e,t[r])};if(t[e]!==void 0)return{[r]:RA(e,t[e])};if(t[n]){const i=t[n];if(Mb(i))tt(Van(n));else return{[n]:RA(e,i)}}}function ng(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=xp(t),a=nu(t),l=r[t],u=r[o],c=e.getScaleComponent(t),d=c?c.get("type"):void 0,f=i.orient,h=r[a]??r.size??Mr("size",i,n,{vgChannel:a}),p=xBe(t),m=s==="bar"&&(t==="x"?f==="vertical":f==="horizontal")||s==="tick"&&(t==="y"?f==="vertical":f==="horizontal");return nt(l)&&(ri(l.bin)||yo(l.bin)||l.timeUnit&&!u)&&!(h&&!Mb(h))&&!r[p]&&!to(d)?efn({fieldDef:l,fieldDef2:u,channel:t,model:e}):(fn(l)&&to(d)||m)&&!u?Zdn(l,t,e):Cze(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Jdn(e,t,n,r,i,s,o){if(Mb(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const c=Zh("minBandSize",{type:o},r);return{signal:c?`max(${jd(c)}, ${u})`:u}}else i.band!==1&&(tt(Zan(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Rt(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(v_(l)&&hr(l.step))return{value:l.step-2}}if(!s){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c,tickBandPaddingInner:d}=r.scale,f=us(l,o==="tick"?d:o==="bar"?u:c);if(Rt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(hr(f))return{signal:`${1-f} * ${e}`}}return{value:cG(r.view,e)-2}}function Zdn(e,t,n){var I,k;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=nu(t),d=xp(t),f=xBe(t),h=n.scaleName(f),p=n.getScaleComponent(kse(t)),m=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=xo("size",n,{vgChannel:c,defaultRef:fi(r.size)}):tt(rln(r.type)));const y=!!g,v=_9e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(I=u||p)==null?void 0:I.get("type"),useVlSizeChannel:m});g=g||{[c]:Jdn(c,h||l,p||u,s,v,!!e,r.type)};const _=((k=u||p)==null?void 0:k.get("type"))==="band"&&Mb(v)&&!y?"top":"middle",w=Tze(t,r,s,_),x=w==="xc"||w==="yc",{offset:S,offsetType:E}=KE({channel:t,markDef:r,encoding:i,model:n,bandPosition:x?.5:0}),T=eoe({channel:t,channelDef:e,markDef:r,config:s,scaleName:l,scale:u,stack:o,offset:S,defaultRef:Eoe({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:x?E==="encoding"?0:.5:Rt(v)?{signal:`(1-${v})/2`}:Mb(v)?(1-v.band)/2:0});if(c)return{[w]:T,...g};{const P=Ny(d),L=g[c],R=S?{...L,offset:S}:L;return{[w]:T,[P]:Be(T)?[T[0],{...T[1],offset:R}]:{...T,offset:R}}}}function N1e(e,t,n,r,i,s,o){if(gBe(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(Rt(n)||Rt(i)||Rt(r)||s){const u=jd(n),c=jd(i),d=jd(r),f=jd(s),p=s?`(${o} < ${f} ? ${a?"":"-"}0.5 * (${f} - (${o})) : ${l})`:l,m=d?`${d} + `:"",g=u?`(${u} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-l:+i+l)}function efn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,c=a.get("reverse"),d=_9e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:u}),f=(k=r.component.axes[n])==null?void 0:k[0],h=(f==null?void 0:f.get("translate"))??.5,p=cs(n)?Mr("binSpacing",s,i)??0:0,m=xp(n),g=Ny(n),y=Ny(m),v=Zh("minBandSize",s,i),{offset:_}=KE({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=KE({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),x=Tun({fieldDef:e,scaleName:l}),S=N1e(n,p,c,h,_,v,x),E=N1e(m,p,c,h,w??_,v,x),T=Rt(d)?{signal:`(1-${d.signal})/2`}:Mb(d)?(1-d.band)/2:.5,I=Oy({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ri(e.bin)||e.timeUnit){const P=e.timeUnit&&I!==.5;return{[y]:O1e({fieldDef:e,scaleName:l,bandPosition:T,offset:E,useRectOffsetField:P}),[g]:O1e({fieldDef:e,scaleName:l,bandPosition:Rt(T)?{signal:`1-${T.signal}`}:1-T,offset:S,useRectOffsetField:P})}}else if(yo(e.bin)){const P=G1(e,l,{},{offset:E});if(nt(t))return{[y]:P,[g]:G1(t,l,{},{offset:S})};if(y_(e.bin)&&e.bin.step)return{[y]:P,[g]:{signal:`scale("${l}", ${ut(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}tt(zBe(m))}function O1e({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return jL({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:B5,endSuffix:z5}:{}})}const tfn=new Set(["aria","width","height"]);function sd(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Sze(e):{};return{...nfn(e.markDef,t),...D1e("fill",n),...D1e("stroke",r),...xo("opacity",e),...xo("fillOpacity",e),...xo("strokeOpacity",e),...xo("strokeWidth",e),...xo("strokeDash",e),...Wdn(e),...xze(e),...xoe(e,"href"),...Vdn(e)}}function D1e(e,t){return t?{[e]:t}:{}}function nfn(e,t){return gan.reduce((n,r)=>(!tfn.has(r)&&Je(e,r)&&t[r]!=="ignore"&&(n[r]=fi(e[r])),n),{})}function Soe(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var u;let o;if(!Ep(s)||!(o=e.getScaleType(s)))return;const a=w5(i.aggregate),l=Zse({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(xun(l)){const c=e.vgField(s,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(s=>T5(s,!0)).join(" && ")}}}function M1e(e,t){if(t!==void 0)return{[e]:fi(t)}}const c7="voronoi",Aze={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(c7)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(gv(s))return tt(xan(s)),n;const o={name:e.getName(c7),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...xze(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{const d=u.name??"";d===e.component.mark[0].name?a=c:d.includes(c7)&&(l=!0)}),l||n.splice(a+1,0,o),n}},Ize={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!poe(e.bind),parse:(e,t,n)=>$ze(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=Aze.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const c=xi(`${r}_${l.field}`);n.filter(f=>f.name===c).length||n.unshift({name:c,...o?{init:Lb(o[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${st(l.field)}] : null`}]:[],bind:s[l.field]??s[l.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(u=>u.name===r+My),o=r+PP,a=i.items.map(u=>xi(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(s.update=`${l} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},GL="_toggle",kze={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+GL,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+My,r=t.name+GL;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${K1(e)}}, `)+`${r} ? ${n} : null`}},rfn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=yt(t.clear)?uv(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Ize.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===xi(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+My);r(i,"null"),kze.defined(t)&&(i=n.findIndex(s=>s.name===t.name+GL),r(i,"false"))}return n}},Rze={defined:e=>{const t=e.resolve==="global"&&e.bind&&poe(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==gf;return t&&!n&&tt(Can),t&&n},parse:(e,t,n)=>{const r=on(n);if(r.select=yt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},$ze(t,r),pt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=gt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=o7(t.bind)?t.bind.legend:"click",s=yt(i)?uv(i,"view"):gt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=o7(t.bind)&&t.bind.legend,s=o=>a=>{const l=on(a);return l.markname=o,l};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${xi(o.field)}_legend`,l=`${r}_${a}`;if(n.filter(c=>c.name===l).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(f=>f.name===r+My),o=r+PP,a=i.items.filter(f=>f.hasLegend).map(f=>xi(`${r}_${xi(f.field)}_legend`)),u=`${a.map(f=>`${f} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(f=>({signal:f})),update:u}):a.length>0&&(s.update=u,delete s.value,delete s.on);const c=n.find(f=>f.name===r+GL),d=o7(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:d}):c.on[0].events=d),n}};function ifn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Io(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&Rze.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const Pze="_translate_anchor",Nze="_translate_delta",sfn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Cm.defined(t),s=r+Pze,{x:o,y:a}=t.project.hasChannel;let l=uv(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+Ox,u))),n.push({name:s,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?pG(e,Ei):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?pG(e,ro):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+Nze,value:{},on:[{events:l,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&$1e(e,t,o,"width",n),a!==void 0&&$1e(e,t,a,"height",n),n}};function $1e(e,t,n,r,i){const s=t.name,o=s+Pze,a=s+Nze,l=n.channel,u=Cm.defined(t),c=i.find(x=>x.name===n.signals[u?"data":"visual"]),d=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(l),h=f&&f.get("type"),p=f&&f.get("reverse"),m=u?l===Ei?p?"":"-":p?"-":"":"",g=`${o}.extent_${l}`,y=`${m}${a}.${l} / ${u?`${d}`:`span(${g})`}`,v=!u||!f?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=u?h==="pow"?`, ${f.get("exponent")??1}`:h==="symlog"?`, ${f.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${_})`;c.on.push({events:{signal:a},update:u?w:`clampRange(${w}, 0, ${d})`})}const Oze="_zoom_anchor",Dze="_zoom_delta",ofn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Cm.defined(t),s=r+Dze,{x:o,y:a}=t.project.hasChannel,l=st(e.scaleName(Ei)),u=st(e.scaleName(ro));let c=uv(t.zoom,"scope");return i||(c=c.map(d=>(d.markname=r+Ox,d))),n.push({name:r+Oze,on:[{events:c,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(d=>d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&L1e(e,t,o,"width",n),a!==void 0&&L1e(e,t,a,"height",n),n}};function L1e(e,t,n,r,i){const s=t.name,o=n.channel,a=Cm.defined(t),l=i.find(v=>v.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),d=c&&c.get("type"),f=a?pG(e,o):l.name,h=s+Dze,p=`${s}${Oze}.${o}`,m=!a||!c?"zoomLinear":d==="log"?"zoomLog":d==="symlog"?"zoomSymlog":d==="pow"?"zoomPow":"zoomLinear",g=a?d==="pow"?`, ${c.get("exponent")??1}`:d==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${f}, ${p}, ${h}${g})`;l.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${u})`})}const Fb="_store",My="_tuple",afn="_modify",Mze="vlSelectionResolve",V5=[Udn,Bdn,Fdn,kze,Ize,Cm,Rze,rfn,sfn,ofn,Aze];function lfn(e){let t=e.parent;for(;t&&!Nu(t);)t=t.parent;return t}function K1(e,{escape:t}={escape:!0}){let n=t?st(e.name):e.name;const r=lfn(e);if(r){const{facet:i}=r;for(const s of Cc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${st(r.vgField(s))}])`)}return n}function Toe(e){return Io(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function $ze(e,t){(yt(t.select)||!t.select.on)&&delete e.events,(yt(t.select)||!t.select.clear)&&delete e.clear,(yt(t.select)||!t.select.toggle)&&delete e.toggle}function mG(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...mG(e.object)),t.push(...mG(e.property))),t)}function Lze(e){return e.object.type==="MemberExpression"?Lze(e.object):e.object.name==="datum"}function Fze(e){const t=qie(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&Lze(r)&&n.add(mG(r).slice(1).join("."))}),n}class pT extends Nr{clone(){return new pT(null,this.model,on(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=YL(this.model,this.filter,this),this._dependentFields=Fze(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function ufn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=xi(i.name),o=i.select,a=yt(o)?o:o.type,l=pt(o)?on(o):{type:a},u=r[a];for(const f in u)f==="fields"||f==="encodings"||(f==="mark"&&(l.mark={...u.mark,...l.mark}),(l[f]===void 0||l[f]===!0)&&(l[f]=on(u[f]??l[f])));const c=n[s]={...l,name:s,type:a,init:i.value,bind:i.bind,events:yt(l.on)?uv(l.on,"scope"):gt(on(l.on))},d=on(i);for(const f of V5)f.defined(c)&&f.parse&&f.parse(e,c,d)}return n}function jze(e,t,n,r="datum"){const i=yt(t)?t:t.param,s=xi(i),o=st(s+Fb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const f=n??e.component.data.raw,h=a.project.timeUnit.clone();f.parent?h.insertAsParentOf(f):f.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${st(a.resolve)})`,c=`${l}${o}, ${r}${u}`,d=`length(data(${o}))`;return t.empty===!1?`${d} && ${c}`:`!${d} || ${c}`}function Bze(e,t,n){const r=xi(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&tt(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${st(s)}.`);else if(i&&!s){const a=o.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,tt((a.length?"Multiple ":"No ")+`matching ${st(i)} encoding found for selection ${st(n.param)}. Using "field": ${st(s)}.`)):s=a[0].field}return`${o.name}[${st(Gc(s))}]`}function cfn(e,t){for(const[n,r]of Py(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new ql(new pT(t,e,{param:n}),i,Wi.Lookup,e.component.data.outputNodeRefCounts)}}function YL(e,t,n){return kA(t,r=>yt(r)?r:Bln(r)?jze(e,r,n):ZBe(r))}function dfn(e,t){if(e)return Be(e)&&!e0(e)?e.map(n=>ooe(n,t)).join(", "):e}function d7(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function T2(e,t,n,r={header:!1}){var d,f;const{disable:i,orient:s,scale:o,labelExpr:a,title:l,zindex:u,...c}=e.combine();if(!i){for(const h in c){const p=h,m=qun[p],g=c[p];if(m&&m!==t&&m!=="both")delete c[p];else if(RP(g)){const{condition:y,...v}=g,_=gt(y),w=c1e[p];if(w){const{vgProp:x,part:S}=w,E=[..._.map(T=>{const{test:I,...k}=T;return{test:YL(null,I),...k}}),v];d7(c,S,x,E),delete c[p]}else if(w===null){const x={signal:_.map(S=>{const{test:E,...T}=S;return`${YL(null,E)} ? ${Yve(T)} : `}).join("")+Yve(v)};c[p]=x}}else if(Rt(g)){const y=c1e[p];if(y){const{vgProp:v,part:_}=y;d7(c,_,v,g),delete c[p]}}Ln(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Lr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:us(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(f=(d=c.encode)==null?void 0:d.labels)!=null&&f.update&&Rt(c.encode.labels.update.text)&&(p=Pb(a,"datum.label",c.encode.labels.update.text.signal)),d7(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of R9e)e.hasAxisPart(p)||delete c.encode[p];Lr(c.encode)&&delete c.encode}const h=dfn(l,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:us(u,0)}}}}function zze(e){const{axes:t}=e.component,n=[];for(const r of xg)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function ffn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>T2(i,"grid",t)),...r.map(i=>T2(i,"grid",t)),...n.map(i=>T2(i,"main",t)),...r.map(i=>T2(i,"main",t))].filter(i=>i)}function F1e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...Ke(o),...Ke(a)]),u={};for(const c of l.values())u[c]={signal:`${r.signal} === "${s}" ? ${jd(o[c])} : ${jd(a[c])}`};return u}return t[i]})])}function hfn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:r9e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Rt(n)?"axisOrient":`axis${bP(n)}`,a=[...i,...i.map(u=>s+u.substr(4))],l=["axis",o,s];return{vlOnlyAxisConfig:F1e(a,r,e,n),vgAxisConfig:F1e(l,r,e,n),axisConfigStyle:pfn([...l,...a],r)}}function pfn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=gt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function gG(e,t,n,r={}){var s;const i=PBe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const j1e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??mfn(n,e),gridScale:({model:e,channel:t})=>gfn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Vze(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||Uze(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??vfn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??bfn(t.type,n,nt(t)&&!!t.timeUnit,nt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??wfn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:xfn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=Hze(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return OBe(i?[l1e(i)]:[],nt(o)?[l1e(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Efn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Sfn(n,t)};function mfn(e,t){return!to(e)&&nt(t)&&!ri(t==null?void 0:t.bin)&&!yo(t==null?void 0:t.bin)}function gfn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function yfn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Rt(s)?s:xk(s);{const{configValue:o}=gG("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?xk(o):n===Ei&&Ln([Yse,Gse],e.type)&&!(nt(e)&&e.timeUnit)?270:void 0}}function yG(e){return`(((${e.signal} % 360) + 360) % 360)`}function Uze(e,t,n,r){if(e!==void 0)if(n==="x"){if(Rt(e)){const i=yG(e),s=Rt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Rt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Rt(e)){const i=yG(e),s=Rt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Rt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Vze(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Rt(e)){const o=yG(e),a=Rt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Rt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function vfn(e,t){if(t==="x"&&Ln(["quantitative","temporal"],e))return!0}function bfn(e,t,n,r){if(n&&!pt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function _fn(e){return e==="x"?"bottom":"left"}function wfn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!to(t)&&t!=="log"){if(nt(e)){if(ri(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ln(["month","hours","day","quarter"],(i=eo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function xfn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(nt(t)){const{timeUnit:n}=t;if(n){const r=XBe(n);if(r)return{signal:r}}}}function Hze(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return DBe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Efn(e,t){const n=e.values;if(Be(n))return k9e(t,n);if(Rt(n))return n}function Sfn(e,t){return e==="rect"&&zL(t)?1:0}class XE extends Nr{clone(){return new XE(null,on(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=Fze(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(w_(r)&&b9e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,l=a.map((u,c)=>`${ZBe({field:s,timeUnit:o,equal:u})} ? ${c} : `).join("")+a.length;t=new XE(t,{calculate:l,as:QE(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Un(this.transform)}`}}function QE(e,t,n){return ut(e,{prefix:t,suffix:"sort_index",...n})}function H5(e,t){return Ln(["top","bottom"],t)?"column":Ln(["left","right"],t)||e==="row"?"row":"column"}function JE(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return us((t||{})[e],i[e],n.header[e])}function q5(e,t,n,r){const i={};for(const s of e){const o=JE(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Coe=["row","column"],Aoe=["header","footer"];function Tfn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=q5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=H5(t,a),u=xk(o);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Wze(u,l),...qze(l,u,s),...Gze(r,i,t,hcn,Y9e)}}}function qze(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Vze(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Wze(e,t){const n=Uze(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Cfn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Aoe)if(n[i])for(const s of n[i]){const o=Ifn(e,t,i,n,s);o!=null&&r.push(o)}return r}function Afn(e,t){const{sort:n}=e;return Tm(n)?{field:ut(n,{expr:"datum"}),order:n.order??"ascending"}:Be(n)?{field:QE(e,t,{expr:"datum"}),order:"ascending"}:{field:ut(e,{expr:"datum"}),order:n??"ascending"}}function vG(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:l}=q5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=noe({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=H5(t,a);return{text:{signal:l?Pb(Pb(l,"datum.label",u),"datum.value",ut(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Wze(s,c),...qze(c,s,o),...Gze(n,e,t,pcn,K9e)}}function Ifn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:d}=q5(["labelOrient"],o.header,a,t);(t==="row"&&!Ln(["top","bottom"],d)||t==="column"&&!Ln(["left","right"],d))&&(s=vG(o,t,a))}const l=Nu(e)&&!CP(e.facet),u=i.axes,c=(u==null?void 0:u.length)>0;if(s||c){const d=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Afn(o,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[d]:i.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const kfn={column:{start:0,end:1},row:{start:1,end:0}};function Rfn(e,t){return kfn[t][e]}function Pfn(e,t){const n={};for(const r of Cc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=q5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=H5(r,o),l=Rfn(s,a);l!==void 0&&(n[a]=l)}}return Lr(n)?void 0:n}function Gze(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=JE(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Ioe(e){return[...DO(e,"width"),...DO(e,"height"),...DO(e,"childWidth"),...DO(e,"childHeight")]}function DO(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(to(o)&&v_(a)){const l=e.scaleName(n);return Nu(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[B1e(l,a)]:[B1e(l,a),{name:i,update:Yze(l,s,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=uG(e.config.view,s?"width":"height"),l=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function B1e(e,t){const n=`${e}_step`;return Rt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Yze(e,t,n){const r=t.get("type"),i=t.get("padding"),s=us(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${jd(o)}, ${jd(s)}) * ${e}_step`}function Kze(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function Xze(e,t){return Ke(e).reduce((n,r)=>({...n,...hT({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>fi(i.value),invalidValueRef:void 0})}),{})}function Qze(e,t){if(Nu(t))return e==="theta"?"independent":"shared";if(yT(t))return"shared";if(Moe(t))return cs(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function koe(e,t){const n=e.scale[t],r=cs(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&tt(lln(t)),"independent"):e[r][t]||"shared"}const Nfn={...ycn,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Jze=Ke(Nfn);class Ofn extends Sg{}const z1e={symbols:Dfn,gradient:Mfn,labels:$fn,entries:Lfn};function Dfn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:l,mark:u}=n,c=o.filled&&u!=="trail";let d={...ban({},n,fun),...Sze(n,{filled:c})};const f=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,m=f===void 0?Zze(a.opacity)??o.opacity:void 0;if(d.fill){if(r==="fill"||c&&r===eu)delete d.fill;else if(Je(d.fill,"field"))h?delete d.fill:(d.fill=fi(l.legend.symbolBaseFillColor??"black"),d.fillOpacity=fi(m??1));else if(Be(d.fill)){const g=bG(a.fill??a.color)??o.fill??(c&&o.color);g&&(d.fill=fi(g))}}if(d.stroke){if(r==="stroke"||!c&&r===eu)delete d.stroke;else if(Je(d.stroke,"field")||p)delete d.stroke;else if(Be(d.stroke)){const g=us(bG(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(d.stroke={value:g})}}if(r!==wg){const g=nt(t)&&t7e(n,i,t);g?d.opacity=[{test:g,...fi(m??1)},fi(l.legend.unselectedOpacity)]:m&&(d.opacity=fi(m))}return d={...d,...e},Lr(d)?void 0:d}function Mfn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?Zze(o.opacity)||s.opacity:void 0;return u&&(a.opacity=fi(u)),a={...a,...e},Lr(a)?void 0:a}function $fn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=nt(t)?t7e(n,i,t):void 0,l=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=s;let d;$b(c)?d=Bd({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:o}):u===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?d=Bd({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&nt(t)&&t.timeUnit===void 0&&(d=Bd({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const f={...l?{opacity:l}:{},...d?{text:d}:{},...e};return Lr(f)?void 0:f}function Lfn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function Zze(e){return e7e(e,(t,n)=>Math.max(t,n.value))}function bG(e){return e7e(e,(t,n)=>us(t,n.value))}function e7e(e,t){if(Oun(e))return gt(e.condition).reduce(t,e.value);if(pf(e))return e.value}function t7e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=st(n.field);return r.map(s=>`(!length(data(${st(xi(s)+Fb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const U1e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return g9e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return y9e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Hfn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??qfn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??jfn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Nx(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Px(n)&&Eh(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Ffn(t,e)};function Ffn(e,t){const n=e.values;if(Be(n))return k9e(t,n);if(Rt(n))return n}function jfn(e,t,n,r){if(t!=="shape"){const i=bG(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Bfn(e){const{legend:t}=e;return us(t.type,zfn(e))}function zfn({channel:e,timeUnit:t,scaleType:n}){if(Px(e)){if(Ln(["quarter","month","day"],t))return"symbol";if(Eh(n))return"gradient"}return"symbol"}function Ufn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Vfn(n,t)}function Vfn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Hfn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(Eh(i))return n==="horizontal"?r==="top"||r==="bottom"?V1e(t,"width",o,s):o:V1e(t,"height",l,a)}function V1e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function qfn(e){if(Ln(["quantile","threshold","log","symlog"],e))return"greedy"}function n7e(e){const t=Ai(e)?Wfn(e):Xfn(e);return e.component.legends=t,t}function Wfn(e){const{encoding:t}=e,n={};for(const r of[eu,...Q9e]){const i=Ns(t[r]);!i||!e.getScaleComponent(r)||r===tu&&nt(i)&&i.type===fT||(n[r]=Kfn(e,r))}return n}function Gfn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Yfn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Kfn(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Ofn({},Gfn(e,t));ifn(e,t,a);const l=n!==void 0?!n:o.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),c=Ns(i[t]),d=nt(c)?(w=eo(c.timeUnit))==null?void 0:w.unit:void 0,f=n.orient||s.legend.orient||"right",h=Bfn({legend:n,channel:t,timeUnit:d,scaleType:u}),p=Ufn({legend:n,legendType:h,orient:f,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:u,orient:f,legendType:h,direction:p};for(const x of Jze){if(h==="gradient"&&x.startsWith("symbol")||h==="symbol"&&x.startsWith("gradient"))continue;const S=x in U1e?U1e[x](m):n[x];if(S!==void 0){const E=Yfn(S,x,n,e.fieldDef(t));(E||s.legend[x]===void 0)&&a.set(x,S,E)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const x of["labels","legend","title","symbols","gradient","entries"]){const S=Xze(g[x]??{},e),E=x in z1e?z1e[x](S,_):S;E!==void 0&&!Lr(E)&&(v[x]={...y!=null&&y.length&&nt(c)?{name:`${xi(c.field)}_legend_${x}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:E})}return Lr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Xfn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){n7e(r);for(const i of Ke(r.component.legends))n.legend[i]=koe(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=r7e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ke(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function r7e(e,t){var s,o,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of Jze){const c=Dy(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(d,f)=>{switch(u){case"symbolType":return Qfn(d,f);case"title":return MBe(d,f);case"type":return i=!0,fu("symbol")}return j5(d,f,u,"legend")});e.setWithExplicit(u,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&$L(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&$L(e.explicit,["encode","gradient"])),e}function Qfn(e,t){return t.value==="circle"?t:e}function Jfn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function i7e(e){const t=e.component.legends,n={};for(const i of Ke(t)){const s=e.getScaleComponent(i),o=Fr(s.get("domains"));if(n[o])for(const a of n[o])r7e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Io(n).flat().map(i=>Zfn(i,e.config)).filter(i=>i!==void 0)}function Zfn(e,t){var o,a,l;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const u=s.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!s.stroke&&(u.stroke={value:"transparent"});for(const c of Q9e)s[c]&&delete u[c]}if(s.title||delete s.title,r!==void 0){let u=r;(l=(a=s.encode)==null?void 0:a.labels)!=null&&l.update&&Rt(s.encode.labels.update.text)&&(u=Pb(r,"datum.label",s.encode.labels.update.text.signal)),Jfn(s,"labels","text",{signal:u})}return s}}function ehn(e){return yT(e)||Moe(e)?thn(e):s7e(e)}function thn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),s7e(e))}function s7e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const l=Rt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Ln(o,l)||o.push(l),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const nhn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class o7e extends Sg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function a7e(e){e.component.projection=Ai(e)?rhn(e):ohn(e)}function rhn(e){if(e.hasProjection){const t=vo(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?ihn(e):void 0,s=new o7e(e.projectionName(!0),{...vo(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function ihn(e){const t=[],{encoding:n}=e;for(const r of[[Nf,Pf],[Yc,Of]])(Ns(n[r[0]])||Ns(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(tu)&&e.typedFieldDef(tu).type===fT&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Wi.Main)),t}function shn(e,t){const n=xse(nhn,i=>!!(!bt(e.explicit,i)&&!bt(t.explicit,i)||bt(e.explicit,i)&&bt(t.explicit,i)&&Iu(e.get(i),t.get(i))));if(Iu(e.size,t.size)){if(n)return e;if(Iu(e.explicit,{}))return t;if(Iu(t.explicit,{}))return e}return null}function ohn(e){if(e.children.length===0)return;let t;for(const r of e.children)a7e(r);const n=xse(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=shn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new o7e(r,t.specifiedProjection,t.size,on(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function ahn(e,t,n,r){if(kP(t,n)){const i=Ai(e)?e.axis(n)??e.legend(n)??{}:{},s=ut(t,{expr:"datum"}),o=ut(t,{expr:"datum",binSuffix:"end"});return{formulaAs:ut(t,{binSuffix:"range",forAs:!0}),formula:TP(s,o,i.format,i.formatType,r)}}return{}}function l7e(e,t){return`${ABe(e)}_${t}`}function lhn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Roe(e,t,n){const r=O5(n,void 0)??{},i=l7e(r,t);return e.getName(`${i}_bins`)}function uhn(e){return"as"in e}function H1e(e,t,n){let r,i;uhn(e)?r=yt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[ut(e,{forAs:!0}),ut(e,{binSuffix:"end",forAs:!0})];const s={...O5(t,void 0)},o=l7e(s,e.field),{signal:a,extentSignal:l}=lhn(n,o);if(x5(s.extent)){const c=s.extent;i=Bze(n,c.param,c),delete s.extent}const u={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:o,binComponent:u}}class jh extends Nr{clone(){return new jh(null,on(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(nl(s)&&ri(s.bin)){const{key:a,binComponent:l}=H1e(s,s.bin,n);i[a]={...l,...i[a],...ahn(n,s,o,n.config)}}return i},{});return Lr(r)?null:new jh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=H1e(n,n.bin,r);return new jh(t,{[i]:s})}merge(t,n){for(const r of Ke(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=xh([...this.bins[r].as,...t.bins[r].as],Un)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Io(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Io(this.bins).map(t=>t.field))}hash(){return`Bin ${Un(this.bins)}`}assemble(){return Io(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Gc(t.field),as:r,signal:t.signal,...x5(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Gc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:ut({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function chn(e,t,n,r){var s;const i=Ai(r)?r.encoding[xp(t)]:void 0;if(nl(n)&&Ai(r)&&w9e(n,i,r.markDef,r.config)){e.add(ut(n,{})),e.add(ut(n,{suffix:"end"}));const{mark:o,markDef:a,config:l}=r,u=Oy({fieldDef:n,markDef:a,config:l});Ek(o)&&u!==.5&&cs(t)&&(e.add(ut(n,{suffix:B5})),e.add(ut(n,{suffix:z5}))),n.bin&&kP(n,t)&&e.add(ut(n,{binSuffix:"range"}))}else if(vBe(t)){const o=yBe(t);e.add(r.getName(o))}else e.add(ut(n));return w_(n)&&Zln((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function dhn(e,t){for(const n of Ke(t)){const r=t[n];for(const i of Ke(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class tf extends Nr{clone(){return new tf(null,new Set(this.dimensions),on(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:l,field:u}=o;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([ut(o,{forAs:!0})]);else{if(tg(l)||mv(l)){const c=tg(l)?"argmin":"argmax",d=l[c];i[d]??(i[d]={}),i[d][c]=new Set([ut({op:c,field:d},{forAs:!0})])}else i[u]??(i[u]={}),i[u][l]=new Set([ut(o,{forAs:!0})]);Ep(a)&&n.scaleDomain(a)==="unaggregated"&&(i[u]??(i[u]={}),i[u].min=new Set([ut({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([ut({field:u,aggregate:"max"},{forAs:!0})]))}else chn(s,a,o,n)}),s.size+Ke(i).length===0)?null:new tf(t,s,i)}static makeFromTransform(t,n){var r;const i=new Set,s={};for(const o of n.aggregate){const{op:a,field:l,as:u}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([u||ut(o,{forAs:!0})])):(s[l]??(s[l]={}),(r=s[l])[a]??(r[a]=new Set),s[l][a].add(u||ut(o,{forAs:!0}))))}for(const o of n.groupby??[])i.add(o);return i.size+Ke(s).length===0?null:new tf(t,i,s)}merge(t){return uBe(this.dimensions,t.dimensions)?(dhn(this.measures,t.measures),!0):(Sln("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ke(this.measures)])}producedFields(){const t=new Set;for(const n of Ke(this.measures))for(const r of Ke(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Un({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ke(this.measures))for(const o of Ke(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Gc(s));return{type:"aggregate",groupby:[...this.dimensions].map(Gc),ops:t,fields:n,as:r}}}class mT extends Nr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Cc){const o=n.facet[s];if(o){const{bin:a,sort:l}=o;this[s]={name:n.getName(`${s}_domain`),fields:[ut(o),...ri(a)?[ut(o,{binSuffix:"end"})]:[]],...Tm(l)?{sortField:l}:Be(l)?{sortIndexField:QE(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Cc)this[n]&&(t+=` ${n.charAt(0)}:${Un(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Cc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Cc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of xg){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(to(i)&&v_(s)){const o=W5(this.childModel,n),a=Doe(o);a?t[n]=a:tt($se(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=R5,field:d}=l;s.push(d),o.push(c),a.push(ut(l,{forAs:!0}))}else u&&(s.push(u),o.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const u of Coe){for(const c of Aoe){const d=(r[u]&&r[u][c])??[];for(const f of d)if(((l=f.axes)==null?void 0:l.length)>0){s[u]=!0;break}}if(s[u]){const c=`length(data("${this.facet.name}"))`,d=u==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[Sm,Em])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function q1e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function fhn(e,t){const n=Tse(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=q1e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=q1e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return tt(Oan(t)),null}function hhn(e){const t={};return pM(e.filter,n=>{if(JBe(n)){let r=null;Bse(n)?r=_u(n.equal):Use(n)?r=_u(n.lte):zse(n)?r=_u(n.lt):Vse(n)?r=_u(n.gt):Hse(n)?r=_u(n.gte):qse(n)?r=n.range[0]:Wse(n)&&(r=(n.oneOf??n.in)[0]),r&&(b_(r)?t[n.field]="date":hr(r)?t[n.field]="number":yt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function phn(e){const t={};function n(r){GE(r)?t[r.field]="date":r.type==="quantitative"&&can(r.aggregate)?t[r.field]="number":BE(r.field)>1?r.field in t||(t[r.field]="flatten"):w_(r)&&Tm(r.sort)&&BE(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Ai(e)||Nu(e))&&e.forEachFieldDef((r,i)=>{if(nl(r))n(r);else{const s=g_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Ai(e)){const{mark:r,markDef:i,encoding:s}=e;if(gv(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];nt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function mhn(e){const t={};if(Ai(e)&&e.component.selection)for(const n of Ke(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&BE(i.field)>1&&(t[i.field]="flatten")}return t}class fa extends Nr{clone(){return new fa(null,on(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Un(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!Q0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ke(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:tt(e1e(a,r[a],l.value)))}for(const a of Ke(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:tt(e1e(a,n[a],l)))}const s=new Sg(n,r);i.copyAll(s);const o={};for(const a of Ke(s.combine())){const l=s.get(a);l!==null&&(o[a]=l)}return Ke(o).length===0||i.parseNothing?null:new fa(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ke(this._parse)){const r=this._parse[n];BE(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ke(this._parse))}dependentFields(){return new Set(Ke(this._parse))}assembleTransforms(t=!1){return Ke(this._parse).filter(n=>t?BE(n)>1:!0).map(n=>{const r=fhn(n,this._parse[n]);return r?{type:"formula",expr:r,as:cT(n)}:null}).filter(n=>n!==null)}}class $y extends Nr{clone(){return new $y(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([gf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:gf}}}class NP extends Nr{clone(){return new NP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Un(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class OP extends Nr{clone(){return new OP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Un(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class jb extends Nr{constructor(t){super(null),t??(t={name:"source"});let n;if(Q0(t)||(n=t.format?{...Hl(t.format,["parse"])}:{}),Sk(t))this._data={values:t.values};else if(YE(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Ln(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else mze(t)?this._data={values:[{type:"Sphere"}]}:(hze(t)||Q0(t))&&(this._data={});this._generator=Q0(t),t.name&&(this._name=t.name),n&&!Lr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var W1e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ghn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},C2;function Poe(e){return e instanceof jb||e instanceof NP||e instanceof OP}class Noe{constructor(){C2.set(this,void 0),W1e(this,C2,!1,"f")}setModified(){W1e(this,C2,!0,"f")}get modifiedFlag(){return ghn(this,C2,"f")}}C2=new WeakMap;class x_ extends Noe{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Ooe extends Noe{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class yhn extends Ooe{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ke(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class vhn extends Ooe{constructor(t){super(),this.requiresSelectionId=t&&Toe(t)}run(t){t instanceof $y&&(this.requiresSelectionId&&(Poe(t.parent)||t.parent instanceof tf||t.parent instanceof fa)||(this.setModified(),t.remove()))}}class bhn extends Noe{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Fh&&(r=t.producedFields(),Ese(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class _hn extends Ooe{constructor(){super()}run(t){t instanceof ql&&!t.isRequired()&&(this.setModified(),t.remove())}}class whn extends x_{run(t){if(!Poe(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof fa)if(t instanceof fa)this.setModified(),t.merge(n);else{if(Sse(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class xhn extends x_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof fa);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const l of Ke(a))l in i?i[l]!==a[l]&&s.add(l):i[l]=a[l]}for(const o of s)delete i[o];if(!Lr(i)){this.setModified();const o=new fa(t,i);for(const a of n){if(a instanceof fa)for(const l of Ke(i))delete a.parse[l];t.removeChild(a),a.parent=o,a instanceof fa&&Ke(a.parse).length===0&&a.remove()}}}}}class Ehn extends x_{run(t){t instanceof ql||t.numChildren()>0||t instanceof mT||t instanceof jb||(this.setModified(),t.remove())}}class Shn extends x_{run(t){const n=t.children.filter(i=>i instanceof Fh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Thn extends x_{run(t){const n=t.children.filter(i=>i instanceof tf),r={};for(const i of n){const s=Un(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ke(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Chn extends x_{constructor(t){super(),this.model=t}run(t){const n=!(Poe(t)||t instanceof pT||t instanceof fa||t instanceof $y),r=[],i=[];for(const s of t.children)s instanceof jh&&(n&&!Sse(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof jh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Ahn extends x_{run(t){const n=[...t.children];if(!jE(n,o=>o instanceof ql)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof ql){let a=o;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof ql)a=l;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class E_ extends Nr{clone(){return new E_(null,on(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??ut(t)}hash(){return`JoinAggregateTransform ${Un(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class ZE extends Nr{clone(){return new ZE(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const l=n.reduceFieldDef((u,c,d)=>{const f=Ep(d)&&n.getScaleComponent(d);if(f){const h=f.get("type"),{aggregate:p}=c,m=Zse({scaleChannel:d,markDef:s,config:i,scaleType:h,isCountAggregate:w5(p)});m!=="show"&&m!=="always-valid"&&(u[c.field]=c)}return u},{});return Ke(l).length?new ZE(t,l):null}dependentFields(){return new Set(Ke(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Un(this.filter)}`}assemble(){const t=Ke(this.filter).reduce((n,r)=>{const i=this.filter[r],s=ut(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${_G(s)}))`):i.type==="quantitative"&&n.push(_G(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function _G(e){return`isValid(${e}) && isFinite(+${e})`}function Ihn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=ut(r);return i&&t.push(i),t},[])}function khn(e){return Be(e)&&e.every(t=>yt(t))&&e.length>1}class Am extends Nr{clone(){return new Am(null,on(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const d of n.sort)a.push(d.field),l.push(us(d.order,"ascending"));const u={field:a,order:l};let c;return khn(s)?c=s:yt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Am(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:l}=r,u=s.map(h=>{const p=i[h];return mf(p)}).filter(h=>!!h),c=Ihn(n),d=n.encoding.order;let f;if(Be(d)||nt(d))f=NBe(d);else{const h=x9e(d)?d.sort:o==="y"?"descending":"ascending";f=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new Am(t,{dimensionFieldDefs:u,stackField:n.vgField(o),facetby:[],stackby:c,sort:f,offset:a,impute:l,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Un(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[ut(i,{binSuffix:"mid"})]:[ut(i,{}),ut(i,{binSuffix:"end"})]:[ut(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:l,as:u}=this._stack;if(l)for(const c of r){const{bandPosition:d=.5,bin:f}=c;if(f){const h=ut(c,{expr:"datum"}),p=ut(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${_G(h)} ? ${d}*${h}+${1-d}*${p} : ${h}`,as:ut(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:ut(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:u,offset:a}),t}}class gT extends Nr{clone(){return new gT(null,on(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??ut(t)}hash(){return`WindowTransform ${Un(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const d of this.transform.window)n.push(d.op),r.push(this.getDefaultName(d)),i.push(d.param===void 0?null:d.param),t.push(d.field===void 0?null:d.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(d=>Dse(d)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)a.push(d.field),l.push(d.order??"ascending");const u={field:a,order:l},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:u,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Rhn(e){function t(n){if(!(n instanceof mT)){const r=n.clone();if(r instanceof ql){const i=xG+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof tf||r instanceof Am||r instanceof gT||r instanceof E_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function wG(e){if(e instanceof mT)if(e.numChildren()===1&&!(e.children[0]instanceof ql)){const t=e.children[0];(t instanceof tf||t instanceof Am||t instanceof gT||t instanceof E_)&&t.addDimensions(e.fields),t.swapWithParent(),wG(e)}else{const t=e.model.component.data.main;u7e(t);const n=Rhn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(wG)}function u7e(e){if(e instanceof ql&&e.type===Wi.Main&&e.numChildren()===1){const t=e.children[0];t instanceof mT||(t.swapWithParent(),u7e(e))}}const xG="scale_",MO=5;function EG(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!EG(t.children))return!1}return!0}function fd(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function G1e(e,t,n){let r=e.sources,i=!1;return i=fd(new _hn,r)||i,i=fd(new vhn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=fd(new Ehn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=fd(new whn,r)||i,i=fd(new Chn(t),r)||i,i=fd(new bhn,r)||i,i=fd(new xhn,r)||i,i=fd(new Thn,r)||i,i=fd(new Shn,r)||i,i=fd(new yhn,r)||i,i=fd(new Ahn,r)||i),e.sources=r,i}function Phn(e,t){EG(e.sources);let n=0,r=0;for(let i=0;i<MO&&G1e(e,t,!0);i++)n++;e.sources.map(wG);for(let i=0;i<MO&&G1e(e,t,!1);i++)r++;EG(e.sources),Math.max(n,r)===MO&&tt(`Maximum optimization runs(${MO}) reached.`)}class Ws{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Ws(()=>t(n))}}function c7e(e){Ai(e)?Nhn(e):Ohn(e)}function Nhn(e){const t=e.component.scales;for(const n of Ke(t)){const r=Mhn(e,n);if(t[n].setWithExplicit("domains",r),Lhn(e,n),e.component.data.isFaceted){let s=e;for(;!Nu(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)dm(a)&&(a.data=xG+a.data.replace(xG,""))}}}function Ohn(e){for(const n of e.children)c7e(n);const t=e.component.scales;for(const n of Ke(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=Dy(r,o.getWithExplicit("domains"),"domains","scale",SG);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&tt(kan),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Dhn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Y1e(t,n);if(!i){tt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Y1e(t,n);if(i)return"unaggregated"}return e}function Mhn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Dhn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Ns(r.x2)?Ns(r.x)?Dy(qg(n,i,e,"x"),qg(n,i,e,"x2"),"domain","scale",SG):qg(n,i,e,"x2"):t==="y"&&Ns(r.y2)?Ns(r.y)?Dy(qg(n,i,e,"y"),qg(n,i,e,"y2"),"domain","scale",SG):qg(n,i,e,"y2"):qg(n,i,e,t)}function $hn(e,t,n){return e.map(r=>({signal:`{data: ${D5(r,{timeUnit:n,type:t})}}`}))}function f7(e,t,n){var i;const r=(i=eo(n))==null?void 0:i.unit;return t==="temporal"||r?$hn(e,t,r):[e]}function qg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:l}=n,u=Ns(i[r]),{type:c}=u,d=u.timeUnit,f=Rdn({invalid:Zh("invalid",s,a),isPath:gv(o)});if(Jln(t)){const m=qg(e,void 0,n,r),g=f7(t.unionWith,c,d);return th([...g,...m.value])}else{if(Rt(t))return th([t]);if(t&&t!=="unaggregated"&&!s9e(t))return th(f7(t,c,d))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return fu([[0,1]]);const m=n.requestDataName(f);return fu([{data:m,field:n.vgField(r,{suffix:"start"})},{data:m,field:n.vgField(r,{suffix:"end"})}])}const h=Ep(r)&&nt(u)?Fhn(n,r,e):void 0;if(Sp(u)){const m=f7([u.datum],c,d);return fu(m)}const p=u;if(t==="unaggregated"){const{field:m}=u;return fu([{data:n.requestDataName(f),field:ut({field:m,aggregate:"min"})},{data:n.requestDataName(f),field:ut({field:m,aggregate:"max"})}])}else if(ri(p.bin)){if(to(e))return fu(e==="bin-ordinal"?[]:[{data:wk(h)?n.requestDataName(f):n.requestDataName(Wi.Raw),field:n.vgField(r,kP(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!pt(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:m}=p;if(ri(m)){const g=Roe(n,p.field,m);return fu([new Ws(()=>{const y=n.getSignalName(g);return`[${y}.start, ${y}.stop]`})])}else return fu([{data:n.requestDataName(f),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Ln(["time","utc"],e)){const m=i[xp(r)];if(w9e(p,m,s,a)){const g=n.requestDataName(f),y=Oy({fieldDef:p,fieldDef2:m,markDef:s,config:a}),v=Ek(o)&&y!==.5&&cs(r);return fu([{data:g,field:n.vgField(r,v?{suffix:B5}:{})},{data:g,field:n.vgField(r,{suffix:v?z5:"end"})}])}}return fu(h?[{data:wk(h)?n.requestDataName(f):n.requestDataName(Wi.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(f),field:n.vgField(r)}])}function h7(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":R5),...r?{field:Gc(r)}:{},...i?{order:i}:{}}}function Lhn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=s9e(r)?r:void 0,o=y_(i)&&x5(i.extent)?i.extent:void 0;(s||o)&&n.set("selectionExtent",s??o,!0)}function Fhn(e,t,n){if(!to(n))return;const r=e.fieldDef(t),i=r.sort;if(b9e(i))return{op:"min",field:QE(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Tm(i)){const a=s&&!o.has(i.field);return h7(i,a)}else if(Run(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:c,field:d}=u,f=s&&!o.has(d);if(tg(c)||mv(c))return h7({field:ut(u),order:l},f);if(Dse(c)||!c)return h7({op:c,field:d,order:l},f)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ln(["ascending",void 0],i))return!0}}function Y1e(e,t){const{aggregate:n,type:r}=e;return n?yt(n)&&!fan.has(n)?{valid:!1,reason:tln(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:nln(e)}:{valid:!0}:{valid:!1,reason:eln(e)}}function SG(e,t,n,r){return e.explicit&&t.explicit&&tt(aln(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function jhn(e){const t=xh(e.map(o=>{if(dm(o)){const{sort:a,...l}=o;return l}return o}),Un),n=xh(e.map(o=>{if(dm(o)){const a=o.sort;return a!==void 0&&!wk(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Un);if(t.length===0)return;if(t.length===1){const o=e[0];if(dm(o)&&n.length>0){let a=n[0];if(n.length>1){tt(n1e);const l=n.filter(u=>pt(u)&&"op"in u&&u.op!=="min");n.every(u=>pt(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(pt(a)&&"field"in a){const l=a.field;o.field===l&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=xh(n.map(o=>wk(o)||!("op"in o)||yt(o.op)&&bt(lan,o.op)?o:(tt(uln(o)),!0)),Un);let i;r.length===1?i=r[0]:r.length>1&&(tt(n1e),i=!0);const s=xh(e.map(o=>dm(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Doe(e){if(dm(e)&&yt(e.field))return e.field;if(han(e)){let t;for(const n of e.fields)if(dm(n)&&yt(n.field)){if(!t)t=n.field;else if(t!==n.field)return tt(cln),t}return tt(dln),t}else if(pan(e)){tt(fln);const t=e.fields[0];return yt(t)?t:void 0}}function W5(e,t){const r=e.component.scales[t].get("domains").map(i=>(dm(i)&&(i.data=e.lookupDataSource(i.data)),i));return jhn(r)}function d7e(e){return yT(e)||Moe(e)?e.children.reduce((t,n)=>t.concat(d7e(n)),K1e(e)):K1e(e)}function K1e(e){return Ke(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:l,range:u,reverse:c,...d}=i,f=Bhn(i.range,s,n,e),h=W5(e,n),p=a?$dn(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:f,...c!==void 0?{reverse:c}:{},...d}),t},[])}function Bhn(e,t,n,r){if(cs(n)){if(v_(e))return{step:{signal:`${t}_step`}}}else if(pt(e)&&dm(e))return{...e,data:r.lookupDataSource(e.data)};return e}class f7e extends Sg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Ln([_o.LOG,_o.TIME,_o.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Ln([_o.LINEAR,_o.SQRT,_o.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(Be(a)){const l=a[0],u=a[a.length-1];if(hr(l)&&hr(u))if(l<=0&&u>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const zhn=["range","scheme"];function Uhn(e){const t=e.component.scales;for(const n of Ose){const r=t[n];if(!r)continue;const i=Vhn(n,e);r.setWithExplicit("range",i)}}function X1e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=nu(t),o=e.getName(s);if(pt(r)&&r.binned&&r.step!==void 0)return new Ws(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${l})`});if(ri(r)){const a=Roe(e,i,r);return new Ws(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(o)} / (${u})`})}}}function Vhn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const d of zhn)if(n[d]!==void 0){const f=oG(s,d),h=o9e(e,d);if(!f)tt(jBe(s,d,e));else if(h)tt(h);else switch(d){case"range":{const p=n.range;if(Be(p)){if(cs(e))return th(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Ws.fromName(y,g)}return m}))}else if(pt(p))return th({data:t.requestDataName(Wi.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return th(p)}case"scheme":return th(Hhn(n[d]))}}const o=e===Ei||e==="xOffset"?"width":"height",a=r[o];if(tp(a)){if(cs(e))if(to(s)){const d=p7e(a,t,e);if(d)return th({step:d})}else tt(BBe(o));else if(xP(e)){const d=e===cv?"x":"y";if(t.getScaleComponent(d).get("type")==="band"){const p=m7e(a,s);if(p)return th(p)}}}const{rangeMin:l,rangeMax:u}=n,c=qhn(e,t);return(l!==void 0||u!==void 0)&&oG(s,"rangeMin")&&Be(c)&&c.length===2?th([l??c[0],u??c[1]]):fu(c)}function Hhn(e){return Qln(e)?{scheme:e.name,...Hl(e,["name"])}:{scheme:e}}function h7e(e,t,n,{center:r}={}){const i=nu(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===ro&&hf(n)?r?[Ws.fromName(a=>`${o(a)}/2`,s),Ws.fromName(a=>`-${o(a)}/2`,s)]:[Ws.fromName(o,s),0]:r?[Ws.fromName(a=>`-${o(a)}/2`,s),Ws.fromName(a=>`${o(a)}/2`,s)]:[0,Ws.fromName(o,s)]}function qhn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Ns(s[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case Ei:case ro:{if(Ln(["point","band"],l)){const d=g7e(e,n,r.view);if(tp(d))return{step:p7e(d,t,e)}}return h7e(e,t,l)}case cv:case dT:return Whn(e,t,l);case _g:{const d=Khn(i,r),f=Xhn(i,n,t,r);return HE(l)?Yhn(d,f,Ghn(l,r,u,e)):[d,f]}case id:return[0,Math.PI*2];case m_:return[0,360];case Rf:return[0,new Ws(()=>{const d=t.getSignalName(Nu(t.parent)?"child_width":"width"),f=t.getSignalName(Nu(t.parent)?"child_height":"height");return`min(${d},${f})/2`})];case hv:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case pv:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case tu:return"symbol";case eu:case _p:case wp:return l==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case wg:case dv:case fv:return[r.scale.minOpacity,r.scale.maxOpacity]}}function p7e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=kse(n),o=r[s];if(Z9e({step:e,offsetIsDiscrete:fn(o)&&e9e(o.type)})==="offset"&&O9e(r,s)){const l=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(l.get("type")==="band"){const f=l.get("paddingInner")??l.get("padding")??0,h=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${f}, ${h})`}const d=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${van(d)})`}}else return e.step}function m7e(e,t){if(Z9e({step:e,offsetIsDiscrete:to(t)})==="offset")return{step:e.step}}function Whn(e,t,n){const r=e===cv?"x":"y",i=t.getScaleComponent(r);if(!i)return h7e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:l}=t;if(s==="band"){const u=g7e(r,t.size,t.config.view);if(tp(u)){const c=m7e(u,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const u=t.encoding[r];if(nt(u)&&u.timeUnit){const c=XBe(u.timeUnit,p=>`scale('${o}', ${p})`),d=t.config.scale.bandWithNestedOffsetPaddingInner,f=Oy({fieldDef:u,markDef:a,config:l})-.5,h=f!==0?` + ${f}`:"";if(d){const p=Rt(d)?`${d.signal}/2`+h:`${d/2+f}`,m=Rt(d)?`(1 - ${d.signal}/2)`+h:`${1-d/2+f}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return aBe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function g7e(e,t,n){const r=e===Ei?"width":"height",i=t[r];return i||qL(n,r)}function Ghn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Be(n)?n.length+1:(tt(wln(r)),3)}}function Yhn(e,t,n){const r=()=>{const i=jd(t),s=jd(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Rt(t)?new Ws(r):{signal:r()}}function Khn(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(E5("size",e))}const Q1e=.95;function Xhn(e,t,n,r){const i={x:X1e(n,"x"),y:X1e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=J1e(t,i,r.view);return hr(s)?s-1:new Ws(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=J1e(t,i,r.view);return hr(s)?Math.pow(Q1e*s,2):new Ws(()=>`pow(${Q1e} * ${s.signal}, 2)`)}}throw new Error(E5("size",e))}function J1e(e,t,n){const r=tp(e.width)?e.width.step:cG(n,"width"),i=tp(e.height)?e.height.step:cG(n,"height");return t.x||t.y?new Ws(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function y7e(e,t){Ai(e)?Qhn(e,t):b7e(e,t)}function Qhn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ke(n)){const l=o[a],u=n[a],c=e.getScaleComponent(a),d=Ns(i[a]),f=l[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=oG(h,t),y=o9e(a,t);if(f!==void 0&&(g?y&&tt(y):tt(jBe(h,t,a))),g&&y===void 0)if(f!==void 0){const v=d.timeUnit,_=d.type;switch(t){case"domainMax":case"domainMin":b_(l[t])||_==="temporal"||v?u.set(t,{signal:D5(l[t],{type:_,timeUnit:v})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const v=Je(Z1e,t)?Z1e[t]({model:e,channel:a,fieldOrDatumDef:d,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:s,config:r,hasNestedOffsetScale:D9e(i,a),hasSecondaryRangeChannel:!!i[xp(a)]}):r.scale[t];v!==void 0&&u.set(t,v,!1)}}}const Z1e={bins:({model:e,fieldOrDatumDef:t})=>nt(t)?Jhn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Zhn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>epn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>tpn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>npn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>rpn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=nt(e)?e.sort:void 0;return ipn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>spn(e,t,n,r,i,s.scale,o)};function v7e(e){Ai(e)?Uhn(e):b7e(e,"range")}function b7e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?v7e(r):y7e(r,t);for(const r of Ke(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=Dy(i,a,t,"scale",fze((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Jhn(e,t){const n=t.bin;if(ri(n)){const r=Roe(e,t.field,n);return new Ws(()=>e.getSignalName(r))}else if(yo(n)&&y_(n)&&n.step!==void 0)return{step:n.step}}function Zhn(e,t){if(Ln([eu,_p,wp],e)&&t!=="nominal")return"hcl"}function epn(e,t,n,r,i,s){var o;if(!((o=mf(s))!=null&&o.bin||Be(n)||i!=null||r!=null||Ln([_o.TIME,_o.UTC],e)))return cs(t)?!0:void 0}function tpn(e,t,n,r,i,s){if(cs(e)){if(Eh(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(nt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===_o.POINT)return n.pointPadding}}function npn(e,t,n,r,i,s=!1){if(e===void 0){if(cs(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:c}=i;return s?c:us(o,n==="bar"?a:n==="tick"?u:l)}else if(xP(t)&&r===_o.BAND)return i.offsetBandPaddingInner}}function rpn(e,t,n,r,i,s=!1){if(e===void 0){if(cs(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===_o.BAND)return us(o,Rt(r)?{signal:`${r.signal}/2`}:r/2)}else if(xP(t)){if(n===_o.POINT)return .5;if(n===_o.BAND)return i.offsetBandPaddingOuter}}}function ipn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return hf(e)&&t==="descending"?Rt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(hf(e)&&t==="descending")return!0}function spn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&hf(i)){if(Be(n)){const l=n[0],u=n[n.length-1];if(hr(l)&&l<=0&&hr(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!HE(i))return!0;if(!(nt(t)&&t.bin)&&Ln([...xg,...ean],e)){const{orient:l,type:u}=r;return Ln(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Ln(["bar","area"],u)&&!o?!0:s==null?void 0:s.zero}return!1}function opn(e,t,n,r,i=!1){const s=apn(t,n,r,i),{type:o}=e;return Ep(t)?o!==void 0?iun(t,o)?nt(n)&&!run(o,n.type)?(tt(sln(o,s)),s):o:(tt(iln(t,o,s)),s):s:null}function apn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Px(e)||r7(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&tt(i7(e,"ordinal")),"ordinal";if(cs(e)||xP(e)){if(Ln(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Nse)return"band";const s=n[nu(e)];return Mb(s)||WE(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Px(e)?"time":r7(e)==="discrete"?(tt(i7(e,"temporal")),"ordinal"):nt(t)&&t.timeUnit&&eo(t.timeUnit).utc?"utc":"time";case"quantitative":return Px(e)?nt(t)&&ri(t.bin)?"bin-ordinal":"linear":r7(e)==="discrete"?(tt(i7(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(LBe(t.type))}function lpn(e,{ignoreRange:t}={}){_7e(e),c7e(e);for(const n of nun)y7e(e,n);t||v7e(e)}function _7e(e){Ai(e)?e.component.scales=upn(e):e.component.scales=dpn(e)}function upn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of Ose){const o=Ns(t[s]);if(o&&n===u9e&&s===tu&&o.type===fT)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const l=D9e(t,s),u=opn(a,s,o,r,l);i[s]=new f7e(e.scaleName(`${s}`,!0),{value:u,explicit:a.type===u})}}return i}const cpn=fze((e,t)=>i1e(e)-i1e(t));function dpn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){_7e(s);for(const o of Ke(s.component.scales))if((t=i.scale)[o]??(t[o]=Qze(o,e)),i.scale[o]==="shared"){const a=r[o],l=s.component.scales[o].getWithExplicit("type");a?Wln(a.value,l.value)?r[o]=Dy(a,l,"type","scale",cpn):(i.scale[o]="independent",delete r[o]):r[o]=l}}for(const s of Ke(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new f7e(o,a);for(const l of e.children){const u=l.component.scales[s];u&&(l.renameScale(u.get("name"),o),u.merged=!0)}}return n}class p7{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Ai(e){return(e==null?void 0:e.type)==="unit"}function Nu(e){return(e==null?void 0:e.type)==="facet"}function Moe(e){return(e==null?void 0:e.type)==="concat"}function yT(e){return(e==null?void 0:e.type)==="layer"}class $oe{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=l=>{var u,c,d;return(u=l.from)!=null&&u.data&&(l.from.data=this.lookupDataSource(l.from.data)),(d=(c=l.from)==null?void 0:c.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l},this.parent=r,this.config=s,this.view=vo(a),this.name=t.name??i,this.title=e0(t.title)?{text:t.title}:t.title?vo(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new p7,this.projectionNameMap=r?r.projectionNameMap:new p7,this.signalNameMap=r?r.signalNameMap:new p7,this.data=t.data,this.description=t.description,this.transforms=vdn(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:xcn(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:P5(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Sg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?on(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){lpn(this)}parseProjection(){a7e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){n7e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ke(r)){const o=r[s];o!==void 0&&(i[s]=fi(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=fi(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Lr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=Pfn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Cc)t[r].title&&n.push(Tfn(this,r));for(const r of Coe)n=n.concat(Cfn(this,r));return n}assembleAxes(){return ffn(this.component.axes,this.config)}assembleLegends(){return i7e(this)}assembleProjections(){return ehn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...IBe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Ln(["unit","layer"],this.type)?Ln(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Lr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Nu(this.parent)?d7e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return xi((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Wi[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Nu(this.parent)){const n=Kze(t),r=_5(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(to(s)&&v_(o)){const a=i.get("name"),l=W5(this,r),u=Doe(l);if(u){const c=ut({aggregate:"distinct",field:u},{expr:"datum"});return{signal:Yze(a,i,c)}}else return tt($se(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(_Be(t)&&Ep(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Ean(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class w7e extends $oe{vgField(t,n={}){const r=this.fieldDef(t);if(r)return ut(r,n)}reduceFieldDef(t,n){return Qun(this.getMapping(),(r,i,s)=>{const o=mf(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){loe(this.getMapping(),(r,i)=>{const s=mf(r);s&&t(s,i)},n)}}class G5 extends Nr{clone(){return new G5(null,on(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=on(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Un(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class Y5 extends Nr{clone(){return new Y5(null,on(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=on(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Un(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class K5 extends Nr{clone(){return new K5(this.parent,on(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=on(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Un(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class X5 extends Nr{clone(){return new X5(null,on(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=on(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Un(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Dx extends Nr{clone(){return new Dx(null,on(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Nf,Pf],[Yc,Of]]){const s=i.map(o=>{const a=Ns(n.encoding[o]);return nt(a)?a.field:Sp(a)?{expr:`${a.datum}`}:pf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Dx(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(tu)){const i=n.typedFieldDef(tu);i.type===fT&&(t=new Dx(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(yt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Un(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Tk extends Nr{clone(){return new Tk(null,this.projection,on(this.fields),on(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Nf,Pf],[Yc,Of]]){const i=r.map(o=>{const a=Ns(n.encoding[o]);return nt(a)?a.field:Sp(a)?{expr:`${a.datum}`}:pf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Yc?"2":"";(i[0]||i[1])&&(t=new Tk(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(yt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Un(this.fields)} ${Un(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class X1 extends Nr{clone(){return new X1(null,on(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new X1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(nt(i)&&nt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:l,value:u,frame:c,keyvals:d}=o.impute,f=L9e(n.mark,r);return new X1(t,{impute:o.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...d!==void 0?{keyvals:d}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${Un(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:Zcn(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}class Q5 extends Nr{clone(){return new Q5(null,on(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=on(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Un(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class Ck extends Nr{clone(){return new Ck(null,on(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(edn(o)){let l=S7e(o.data,s);l||(l=new jb(o.data),s.push(l));const u=n.getName(`lookup_${i}`);a=new ql(l,u,Wi.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(tdn(o)){const l=o.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(xi(l),l)}catch{throw new Error(Aan(l))}if(a=u.materialized,!a)throw new Error(Ian(l))}return new Ck(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?gt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Un({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:gt(this.transform.as)}:{}};else{let n=this.transform.as;yt(n)||(tt($an),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class J5 extends Nr{clone(){return new J5(null,on(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=on(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Un(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class Z5 extends Nr{clone(){return new Z5(null,on(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=on(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Un(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class e8 extends Nr{clone(){return new e8(null,on(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=xh((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Un(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class t8 extends Nr{clone(){return new t8(null,on(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Un(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function x7e(e){let t=0;function n(r,i){if(r instanceof jb&&!r.isGenerator&&!YE(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof fa&&(r.parent instanceof jb&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof mT){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof NP||r instanceof OP||r instanceof ZE||r instanceof pT||r instanceof XE||r instanceof Tk||r instanceof tf||r instanceof Ck||r instanceof gT||r instanceof E_||r instanceof X5||r instanceof K5||r instanceof G5||r instanceof Q5||r instanceof J5||r instanceof Z5||r instanceof $y||r instanceof t8||r instanceof e8||r instanceof Y5)&&i.transform.push(r.assemble()),(r instanceof jh||r instanceof Fh||r instanceof X1||r instanceof Am||r instanceof Dx)&&i.transform.push(...r.assemble()),r instanceof ql&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof ql?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof ql&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function fpn(e){const t=[],n=x7e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function hpn(e,t){const n=[],r=x7e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function ppn(e){return e==="top"||e==="left"||Rt(e)?"header":"footer"}function mpn(e){for(const t of Cc)gpn(e,t);ebe(e,"x"),ebe(e,"y")}function gpn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],l=JE("title",null,r,t);let u=Nx(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=Be(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=JE("labelOrient",a.header,r,t),d=a.header!==null?us((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,f=Ln(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[f]:t==="facet"?[]:[E7e(e,t,d)]}}}function E7e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function ebe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=koe(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const l=ppn(a.get("orient"));o[l]??(o[l]=[E7e(e,s,!1)]);const u=T2(a,"main",e.config,{header:!0});u&&o[l][0].axes.push(u),a.mainExtracted=!0}}}}function ypn(e){Loe(e),KL(e,"width"),KL(e,"height")}function vpn(e){Loe(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";KL(e,t),KL(e,n)}function Loe(e){for(const t of e.children)t.parseLayoutSize()}function KL(e,t){const n=Kze(t),r=_5(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??Qze(r,e);if(u==="independent"&&l.value==="step"){o=void 0;break}if(o){if(u==="independent"&&o.value!==l.value){o=void 0;break}o=Dy(o,l,n,"")}else o=l}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function bpn(e){const{size:t,component:n}=e;for(const r of xg){const i=nu(r);if(t[i]){const s=t[i];n.layoutSize.set(i,tp(s)?"step":s,!0)}else{const s=_pn(e,i);n.layoutSize.set(i,s,!1)}}}function _pn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(to(s)){const a=qL(r.view,t);return v_(o)||tp(a)?"step":a}else return uG(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return uG(r.view,t);{const s=qL(r.view,t);return tp(s)?s.step:s}}}function TG(e,t,n){return ut(t,{suffix:`by_${ut(e)}`,...n})}class PA extends w7e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Uoe(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!CP(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ke(t),r={};for(const i of n){if(![Em,Sm].includes(i)){tt(E5(i,"facet"));break}const s=t[i];if(s.field===void 0){tt(iG(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=aoe(t,n);return r.header?r.header=vo(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return Je(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=n8(this),this.child.parseData()}parseLayoutSize(){Loe(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),mpn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Cc)for(const r of Aoe){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=JE("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const l=H5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof PA))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof PA?{...this.channelHasField("column")?{encode:{update:{columns:{field:ut(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof PA){if(this.child.channelHasField("column")){const i=ut(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of xg){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(to(o)&&v_(a)){const l=W5(this.child,i),u=Doe(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):tt($se(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of Cc){const d=this.facet[c];if(d){l.push(ut(d));const{bin:f,sort:h}=d;if(ri(f)&&l.push(ut(d,{binSuffix:"end"})),Tm(h)){const{field:p,op:m=R5}=h,g=TG(d,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Be(h)){const p=QE(d,c);s.push(p),o.push("max"),a.push(p)}}}const u=!!r&&!!i;return{name:t,data:n,groupby:l,...u||s.length>0?{aggregate:{...u?{cross:u}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Tm(r.sort)?[TG(r,r.sort,{expr:"datum"})]:Be(r.sort)?[QE(r,t,{expr:"datum"})]:[ut(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Tm(i)?i.order:!Be(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return vG(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Coe)if(t[s]){const o=JE("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return vG(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=fpn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Cc.map(l=>this.facetSortFields(l)).flat(),order:Cc.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Ndn(this,[]))}]}getMapping(){return this.facet}}function wpn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Tm(s.sort)){const{field:o,op:a=R5}=s.sort;e=i=new E_(e,{joinaggregate:[{op:a,field:o,as:TG(s,s.sort,{forAs:!0})}],groupby:[ut(s)]})}return i}return null}function S7e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||u)&&c!==u)continue;const d=(s=a.format)==null?void 0:s.mesh;if(!((l||d)&&l!==d)){if(Sk(e)&&Sk(a)){if(Iu(e.values,a.values))return o}else if(YE(e)&&YE(a)){if(e.url===a.url)return o}else if(hze(e)&&e.name===o.dataName)return o}}return null}function xpn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new jb({values:[]});return t.push(r),r}const n=S7e(e.data,t);if(n)return Q0(e.data)||(n.data.format=lBe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new jb(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Epn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(ddn(i))o=e=new XE(e,i),s="derived";else if(boe(i)){const a=hhn(i);o=e=fa.makeWithAncestors(e,{},a,n)??e,e=new pT(e,t,i.filter)}else if(lze(i))o=e=jh.makeFromTransform(e,i,t),s="number";else if(hdn(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new fa(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Fh.makeFromTransform(e,i);else if(pdn(i))o=e=tf.makeFromTransform(e,i),s="number",Toe(t)&&(e=new $y(e));else if(aze(i))o=e=Ck.make(e,t,i,r++),s="derived";else if(ldn(i))o=e=new gT(e,i),s="number";else if(udn(i))o=e=new E_(e,i),s="number";else if(mdn(i))o=e=Am.makeFromTransform(e,i),s="derived";else if(gdn(i))o=e=new X5(e,i),s="derived";else if(ydn(i))o=e=new Y5(e,i),s="derived";else if(cdn(i))o=e=new K5(e,i),s="derived";else if(ndn(i))o=e=new e8(e,i),s="derived";else if(adn(i))e=new t8(e,i);else if(fdn(i))o=e=X1.makeFromTransform(e,i),s="derived";else if(rdn(i))o=e=new G5(e,i),s="derived";else if(idn(i))o=e=new J5(e,i),s="derived";else if(sdn(i))o=e=new Z5(e,i),s="derived";else if(odn(i))o=e=new Q5(e,i),s="derived";else{tt(Man(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function n8(e){var g;let t=xpn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(Q0(i)||YE(i)||Sk(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new kdn;Q0(i)?(pze(i)?t=new OP(t,i.sequence):_oe(i)&&(t=new NP(t,i.graticule)),o.parseNothing=!0):((g=i==null?void 0:i.format)==null?void 0:g.parse)===null&&(o.parseNothing=!0),t=fa.makeExplicit(t,e,o)??t,t=new $y(t);const a=e.parent&&yT(e.parent);(Ai(e)||Nu(e))&&a&&(t=jh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Epn(t,e,o));const l=mhn(e),u=phn(e);t=fa.makeWithAncestors(t,{},{...l,...u},o)??t,Ai(e)&&(t=Dx.parseAll(t,e),t=Tk.parseAll(t,e)),(Ai(e)||Nu(e))&&(a||(t=jh.makeFromEncoding(t,e)??t),t=Fh.makeFromEncoding(t,e)??t,t=XE.parseAllForSortIndex(t,e));const c=t=$O(Wi.Raw,e,t);if(Ai(e)){const y=tf.makeFromEncoding(t,e);y&&(t=y,Toe(e)&&(t=new $y(t))),t=X1.makeFromEncoding(t,e)??t,t=Am.makeFromEncoding(t,e)??t}let d,f;if(Ai(e)){const{markDef:y,mark:v,config:_}=e,w=Mr("invalid",y,_),{marks:x,scales:S}=f=gze({invalid:w,isPath:gv(v)});x!==S&&S==="include-invalid-values"&&(d=t=$O(Wi.PreFilterInvalid,e,t)),x==="exclude-invalid-values"&&(t=ZE.make(t,e,f)??t)}const h=t=$O(Wi.Main,e,t);let p;if(Ai(e)&&f){const{marks:y,scales:v}=f;y==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=ZE.make(t,e,f)??t,p=t=$O(Wi.PostFilterInvalid,e,t))}Ai(e)&&cfn(e,h);let m=null;if(Nu(e)){const y=e.getName("facet");t=wpn(t,e.facet)??t,m=new mT(t,e,y,h.getSource()),n[y]=m}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:m,ancestorParse:o,preFilterInvalid:d,postFilterInvalid:p}}function $O(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new ql(n,s,e,i);return r[s]=o,o}class Spn extends $oe{constructor(t,n,r,i){var s,o,a,l;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((l=(a=t.resolve)==null?void 0:a.axis)==null?void 0:l.y)==="shared")&&tt(Nan),this.children=this.getChildren(t).map((u,c)=>Uoe(u,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=n8(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ke(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return L5(t)?t.vconcat:yoe(t)?t.hconcat:t.concat}parseLayoutSize(){vpn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Ioe(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Tpn(e){return e===!1||e===null}const Cpn={disable:1,gridScale:1,scale:1,...P9e,labelExpr:1,encode:1},T7e=Ke(Cpn);class Foe extends Sg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Foe(on(this.explicit),on(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Tpn(this.get(t))}hasOrientSignalRef(){return Rt(this.explicit.orient)}}function Apn(e,t,n){const{encoding:r,config:i}=e,s=Ns(r[t])??Ns(r[xp(t)]),o=e.axis(t)||{},{format:a,formatType:l}=o;if($b(l))return{text:Bd({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(qE(s)==="quantitative"){if(WE(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Bd({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Bd({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(qE(s)==="temporal"&&i.timeFormatType&&nt(s)&&!s.timeUnit)return{text:Bd({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Ipn(e){return xg.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Mpn(n,e)]),t),{})}const kpn={bottom:"top",top:"bottom",left:"right",right:"left"};function Rpn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ke(i.component.axes))n.axis[s]=koe(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Ppn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of xg){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:l}=o.getWithExplicit("orient");if(!Rt(a)){if(r[a]>0&&!l){const u=kpn[a];r[a]>r[u]&&o.set("orient",u,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Ppn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Npn(i,s)}}}else return t.map(n=>n.clone());return e}function Npn(e,t){for(const n of T7e){const r=Dy(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return MBe(i,s);case"gridScale":return{explicit:i.explicit,value:us(i.value,s.value)}}return j5(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Opn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Rt(n.labelAngle)?n.labelAngle:xk(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Hze(r,i))return!0}return e===n[t]}const Dpn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Mpn(e,t){var y,v;let n=t.axis(e);const r=new Foe,i=Ns(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||_fn(e),l=t.getScaleComponent(e).get("type"),u=hfn(e,l,a,t.config),c=n!==void 0?!n:gG("disable",o.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const d=yfn(i,n,e,o.style,u),f=y9e(n.formatType,i,l),h=g9e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:d,format:h,formatType:f,mark:s,config:o};for(const _ of T7e){const w=_ in j1e?j1e[_](p):d1e(_)?n[_]:void 0,x=w!==void 0,S=Opn(w,_,n,t,e);if(x&&S)r.set(_,w,S);else{const{configValue:E=void 0,configFrom:T=void 0}=d1e(_)&&_!=="values"?gG(_,o.style,n.style,u):{},I=E!==void 0;x&&!I?r.set(_,w,S):(T!=="vgAxisConfig"||Dpn.has(_)&&I||RP(E)||Rt(E))&&r.set(_,E,!1)}}const m=n.encoding??{},g=R9e.reduce((_,w)=>{if(!r.hasAxisPart(w))return _;const x=Xze(m[w]??{},t),S=w==="labels"?Apn(t,e,x):x;return S!==void 0&&!Lr(S)&&(_[w]={update:S}),_},{});return Lr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function $pn({encoding:e,size:t}){for(const n of xg){const r=nu(n);tp(t[r])&&A0(e[n])&&(delete t[r],tt(BBe(r)))}return t}const Lpn={vgMark:"arc",encodeEntry:e=>({...sd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Va("x",e,{defaultPos:"mid"}),...Va("y",e,{defaultPos:"mid"}),...ng(e,"radius"),...ng(e,"theta")})},Fpn={vgMark:"area",encodeEntry:e=>({...sd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...WL("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...WL("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Soe(e)})},jpn={vgMark:"rect",encodeEntry:e=>({...sd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ng(e,"x"),...ng(e,"y")})},Bpn={vgMark:"shape",encodeEntry:e=>({...sd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&nt(n)&&n.type===fT?{field:ut(n,{expr:"datum"})}:{}}]}},zpn={vgMark:"image",encodeEntry:e=>({...sd(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...ng(e,"x"),...ng(e,"y"),...xoe(e,"url")})},Upn={vgMark:"line",encodeEntry:e=>({...sd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Va("x",e,{defaultPos:"mid"}),...Va("y",e,{defaultPos:"mid"}),...xo("size",e,{vgChannel:"strokeWidth"}),...Soe(e)})},Vpn={vgMark:"trail",encodeEntry:e=>({...sd(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Va("x",e,{defaultPos:"mid"}),...Va("y",e,{defaultPos:"mid"}),...xo("size",e),...Soe(e)})};function joe(e,t){const{config:n}=e;return{...sd(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Va("x",e,{defaultPos:"mid"}),...Va("y",e,{defaultPos:"mid"}),...xo("size",e),...xo("angle",e),...Hpn(e,n,t)}}function Hpn(e,t,n){return n?{shape:{value:n}}:xo("shape",e)}const qpn={vgMark:"symbol",encodeEntry:e=>joe(e)},Wpn={vgMark:"symbol",encodeEntry:e=>joe(e,"circle")},Gpn={vgMark:"symbol",encodeEntry:e=>joe(e,"square")},Ypn={vgMark:"rect",encodeEntry:e=>({...sd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ng(e,"x"),...ng(e,"y")})},Kpn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...sd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...WL("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...WL("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...xo("size",e,{vgChannel:"strokeWidth"})}}},Xpn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...sd(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Va("x",e,{defaultPos:"mid"}),...Va("y",e,{defaultPos:"mid"}),...xoe(e),...xo("size",e,{vgChannel:"fontSize"}),...xo("angle",e),...M1e("align",Qpn(e.markDef,n,t)),...M1e("baseline",Jpn(e.markDef,n,t)),...Va("radius",e,{defaultPos:null}),...Va("theta",e,{defaultPos:null})}}};function Qpn(e,t,n){if(Mr("align",e,n)===void 0)return"center"}function Jpn(e,t,n){if(Mr("baseline",e,n)===void 0)return"middle"}const Zpn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",o=r==="horizontal"?"height":"width";return{...sd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ng(e,i),...Va(s,e,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:fi(Mr("thickness",n,t))}}},LO={arc:Lpn,area:Fpn,bar:jpn,circle:Wpn,geoshape:Bpn,image:zpn,line:Upn,point:qpn,rect:Ypn,rule:Kpn,square:Gpn,text:Xpn,tick:Zpn,trail:Vpn};function emn(e){if(Ln([I5,C5,lun],e.mark)){const t=L9e(e.mark,e.encoding);if(t.length>0)return tmn(e,t)}else if(e.mark===A5){const t=nG.some(n=>Mr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return nmn(e)}return Boe(e)}const tbe="faceted_path_";function tmn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:tbe+e.requestDataName(Wi.Main),data:e.requestDataName(Wi.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Boe(e,{fromPrefix:tbe})}]}const nbe="stack_group_";function nmn(e){var u;const[t]=Boe(e,{fromPrefix:nbe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,d)=>{const f=[r({prefix:"min",suffix:"start",expr:d}),r({prefix:"max",suffix:"start",expr:d}),r({prefix:"min",suffix:"end",expr:d}),r({prefix:"max",suffix:"end",expr:d})];return`${c}(${f.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...FE(t.encode.update,["y","yc","y2","height",...nG]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Hl(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...FE(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Hl(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of nG){const d=Zh(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):d&&(s[c]=fi(d)),d&&(t.encode.update[c]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const c of e.stack.groupbyChannels){const d=e.fieldDef(c),f=ut(d);f&&a.push(f),(d!=null&&d.bin||d!=null&&d.timeUnit)&&a.push(ut(d,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,d)=>{if(t.encode.update[d])return{...c,[d]:t.encode.update[d]};{const f=Zh(d,e.markDef,e.config);return f!==void 0?{...c,[d]:fi(f)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Wi.Main),name:nbe+e.requestDataName(Wi.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function rmn(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Be(o)&&pf(o)&&eG(o.value)||!o&&eG(Mr("order",i,s)))){if((Be(o)||nt(o))&&!n)return NBe(o,{expr:"datum"});if(gv(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(nt(l))return{field:a}}}}function Boe(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=us(r.clip,imn(e),smn(e)),a=RBe(r),l=i.key,u=rmn(e),c=omn(e),d=Mr("aria",r,s),f=LO[n].postEncodingTransform?LO[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:LO[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...d===!1?{aria:d}:{},from:{data:t.fromPrefix+e.requestDataName(Wi.Main)},encode:{update:LO[n].encodeEntry(e)},...f?{transform:f}:{}}]}function imn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function smn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function omn(e){if(!e.component.selection)return null;const t=Ke(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ke(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class C7e extends w7e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,h1e(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=ep(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=qcn(o,s,{graticule:t.data&&_oe(t.data)}));const l=this.encoding=Kun(t.encoding||{},a,o.filled,s);this.markDef=ize(o,l,s),this.size=$pn({encoding:l,size:h1e(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=rze(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>moe(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===u9e,r=t&&qon.some(i=>fn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return Ose.reduce((r,i)=>{const s=Ns(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=vo(t);return Be(n)&&(i.domain=n.map(_u)),Be(r)&&(i.range=r.map(_u)),i}initAxes(t){return xg.reduce((n,r)=>{const i=t[r];if(fn(i)||r===Ei&&fn(t.x2)||r===ro&&fn(t.y2)){const s=fn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ke(t),r={};for(const i of n){const s=t[i];r[i]=RP(s)?kBe(s):_u(s)}return r}initLegends(t){return tan.reduce((n,r)=>{const i=Ns(t[r]);if(i&&ran(r)){const s=i.legend;n[r]=s&&vo(s)}return n},{})}parseData(){this.component.data=n8(this)}parseLayoutSize(){bpn(this)}parseSelections(){this.component.selection=ufn(this,this.selection)}parseMarkGroup(){this.component.mark=emn(this)}parseAxesAndHeaders(){this.component.axes=Ipn(this)}assembleSelectionTopLevelSignals(t){return Odn(this,t)}assembleSignals(){return[...zze(this),...Pdn(this,[])]}assembleSelectionData(t){return Ddn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Ioe(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!yT(this.parent))&&(t=vze(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Y1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return mf(n)}typedFieldDef(t){const n=this.fieldDef(t);return nl(n)?n:null}}class zoe extends $oe{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(F5(a))return new zoe(a,this,this.getName(`layer_${l}`),o,s);if(Eg(a))return new C7e(a,this,this.getName(`layer_${l}`),o,s);throw new Error(Mse(a))})}parseData(){this.component.data=n8(this);for(const t of this.children)t.parseData()}parseLayoutSize(){ypn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ke(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Rpn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),zze(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Ioe(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of gt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Mdn(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),i7e(this))}}function Uoe(e,t,n,r,i){if(P5(e))return new PA(e,t,n,i);if(F5(e))return new zoe(e,t,n,r,i);if(Eg(e))return new C7e(e,t,n,r,i);if(bcn(e))return new Spn(e,t,n,i);throw new Error(Mse(e))}function amn(e,t={}){t.logger&&xln(t.logger),t.fieldTitle&&A9e(t.fieldTitle);try{const n=nze(ZS(t.config,e.config)),r=dze(e,n),i=Uoe(r,null,"",void 0,n);return i.parse(),Phn(i.component.data,i),{spec:umn(i,lmn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Eln(),t.fieldTitle&&Bun()}}function lmn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):yt(t)&&(t={type:t}),i&&s&&Cdn(t.type)){if(i==="step"&&s==="step")tt(Qve()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";tt(Qve(_5(o)));const a=o==="width"?"height":"width";t.type=Adn(a)}}return{...Ke(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...T1e(n,!1),...T1e(e,!0)}}function umn(e,t,n={},r){const i=e.config?Ocn(e.config):void 0,s=[].concat(e.assembleSelectionData([]),hpn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:d,...f}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...f,...a?{title:a}:{},...l?{style:l}:{},...u?{encode:{update:u}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...J9e(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const cmn=jon.version,dmn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:BE,accessPathWithDatum:Tse,compile:amn,contains:Ln,deepEqual:Iu,deleteNestedProperty:$L,duplicate:on,entries:Py,every:xse,fieldIntersection:Sse,flatAccessWithDatum:cBe,getFirstDefined:us,hasIntersection:Ese,hasProperty:Je,hash:Un,internalField:hBe,isBoolean:wk,isEmpty:Lr,isEqual:zon,isInternalField:pBe,isNullOrFalse:eG,isNumeric:p5,keys:Ke,logicalExpr:kA,mergeDeep:lBe,never:aBe,normalize:dze,normalizeAngle:xk,omit:Hl,pick:FE,prefixGenerator:tG,removePathFromField:cT,replaceAll:Pb,replacePathInField:Gc,resetIdCounter:Von,setEqual:uBe,some:jE,stringify:Fr,titleCase:bP,unique:xh,uniqueId:fBe,vals:Io,varName:xi,version:cmn},Symbol.toStringTag,{value:"Module"}));function A7e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var fmn="vega-themes",hmn="2.15.0",pmn="Themes for stylized Vega and Vega-Lite visualizations.",mmn=["vega","vega-lite","themes","style"],gmn="BSD-3-Clause",ymn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},vmn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],bmn="build/vega-themes.js",Voe="build/vega-themes.module.js",_mn="build/vega-themes.min.js",wmn="build/vega-themes.min.js",xmn="build/vega-themes.module.d.ts",Emn={type:"git",url:"https://github.com/vega/vega-themes.git"},Smn=["src","build"],Tmn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Cmn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Amn={vega:"*","vega-lite":"*"},Imn={},kmn={name:fmn,version:hmn,description:pmn,keywords:mmn,license:gmn,author:ymn,contributors:vmn,main:bmn,module:Voe,unpkg:_mn,jsdelivr:wmn,types:xmn,repository:Emn,files:Smn,scripts:Tmn,devDependencies:Cmn,peerDependencies:Amn,dependencies:Imn};const aw="#fff",rbe="#888",Rmn={background:"#333",view:{stroke:rbe},title:{color:aw,subtitleColor:aw},style:{"guide-label":{fill:aw},"guide-title":{fill:aw}},axis:{domainColor:aw,gridColor:rbe,tickColor:aw}},Fv="#4572a7",Pmn={background:"#fff",arc:{fill:Fv},area:{fill:Fv},line:{stroke:Fv,strokeWidth:2},path:{stroke:Fv},rect:{fill:Fv},shape:{stroke:Fv},symbol:{fill:Fv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},jv="#30a2da",m7="#cbcbcb",Nmn="#999",Omn="#333",ibe="#f0f0f0",sbe="#333",Dmn={arc:{fill:jv},area:{fill:jv},axis:{domainColor:m7,grid:!0,gridColor:m7,gridWidth:1,labelColor:Nmn,labelFontSize:10,titleColor:Omn,tickColor:m7,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:ibe,group:{fill:ibe},legend:{labelColor:sbe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:sbe,titleFontSize:14,titlePadding:10},line:{stroke:jv,strokeWidth:2},path:{stroke:jv,strokeWidth:.5},rect:{fill:jv},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:jv},bar:{binSpacing:2,fill:jv,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Bv="#000",Mmn={group:{fill:"#e5e5e5"},arc:{fill:Bv},area:{fill:Bv},line:{stroke:Bv},path:{stroke:Bv},rect:{fill:Bv},shape:{stroke:Bv},symbol:{fill:Bv,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},$mn=22,Lmn="normal",obe="Benton Gothic, sans-serif",abe=11.5,Fmn="normal",zv="#82c6df",g7="Benton Gothic Bold, sans-serif",lbe="normal",ube=13,SC={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},jmn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:g7,fontSize:$mn,fontWeight:Lmn},arc:{fill:zv},area:{fill:zv},line:{stroke:zv,strokeWidth:2},path:{stroke:zv},rect:{fill:zv},shape:{stroke:zv},symbol:{fill:zv,size:30},axis:{labelFont:obe,labelFontSize:abe,labelFontWeight:Fmn,titleFont:g7,titleFontSize:ube,titleFontWeight:lbe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:obe,labelFontSize:abe,symbolType:"square",titleFont:g7,titleFontSize:ube,titleFontWeight:lbe},range:{category:SC["category-6"],diverging:SC["fireandice-6"],heatmap:SC["fire-7"],ordinal:SC["fire-7"],ramp:SC["fire-7"]}},Uv="#ab5787",FO="#979797",Bmn={background:"#f9f9f9",arc:{fill:Uv},area:{fill:Uv},line:{stroke:Uv},path:{stroke:Uv},rect:{fill:Uv},shape:{stroke:Uv},symbol:{fill:Uv,size:30},axis:{domainColor:FO,domainWidth:.5,gridWidth:.2,labelColor:FO,tickColor:FO,tickWidth:.2,titleColor:FO},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Vv="#3e5c69",zmn={background:"#fff",arc:{fill:Vv},area:{fill:Vv},line:{stroke:Vv},path:{stroke:Vv},rect:{fill:Vv},shape:{stroke:Vv},symbol:{fill:Vv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},sc="#1696d2",cbe="#000000",Umn="#FFFFFF",jO="Lato",y7="Lato",Vmn="Lato",Hmn="#DEDDDD",qmn=18,TC={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Wmn={background:Umn,title:{anchor:"start",fontSize:qmn,font:jO},axisX:{domain:!0,domainColor:cbe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:y7,labelAngle:0,tickColor:cbe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:jO},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Hmn,gridWidth:1,labelFontSize:12,labelFont:y7,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:jO,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:y7,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:jO,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:TC["six-groups-cat-1"],diverging:TC["diverging-colors"],heatmap:TC["diverging-colors"],ordinal:TC["six-groups-seq"],ramp:TC["shades-blue"]},area:{fill:sc},rect:{fill:sc},line:{color:sc,stroke:sc,strokeWidth:5},trail:{color:sc,stroke:sc,strokeWidth:0,size:1},path:{stroke:sc,strokeWidth:.5},point:{filled:!0},text:{font:Vmn,color:sc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:sc,stroke:null}},arc:{fill:sc},shape:{stroke:sc},symbol:{fill:sc,size:30}},Hv="#3366CC",dbe="#ccc",BO="Arial, sans-serif",Gmn={arc:{fill:Hv},area:{fill:Hv},path:{stroke:Hv},rect:{fill:Hv},shape:{stroke:Hv},symbol:{stroke:Hv},circle:{fill:Hv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:BO,fontSize:12},"guide-title":{font:BO,fontSize:12},"group-title":{font:BO,fontSize:12}},title:{font:BO,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:dbe,tickColor:dbe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Hoe=e=>e*(1/3+1),fbe=Hoe(9),hbe=Hoe(10),pbe=Hoe(12),CC="Segoe UI",mbe="wf_standard-font, helvetica, arial, sans-serif",gbe="#252423",AC="#605E5C",ybe="transparent",Ymn="#C8C6C4",yd="#118DFF",Kmn="#12239E",Xmn="#E66C37",Qmn="#6B007B",Jmn="#E044A7",Zmn="#744EC2",egn="#D9B300",tgn="#D64550",I7e=yd,k7e="#DEEFFF",vbe=[k7e,I7e],ngn=[k7e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",I7e],rgn={view:{stroke:ybe},background:ybe,font:CC,header:{titleFont:mbe,titleFontSize:pbe,titleColor:gbe,labelFont:CC,labelFontSize:hbe,labelColor:AC},axis:{ticks:!1,grid:!1,domain:!1,labelColor:AC,labelFontSize:fbe,titleFont:mbe,titleColor:gbe,titleFontSize:pbe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Ymn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:yd},line:{stroke:yd,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:CC,fontSize:fbe,fill:AC},arc:{fill:yd},area:{fill:yd,line:!0,opacity:.6},path:{stroke:yd},rect:{fill:yd},point:{fill:yd,filled:!0,size:75},shape:{stroke:yd},symbol:{fill:yd,strokeWidth:1.5,size:50},legend:{titleFont:CC,titleFontWeight:"bold",titleColor:AC,labelFont:CC,labelFontSize:hbe,labelColor:AC,symbolType:"circle",symbolSize:75},range:{category:[yd,Kmn,Xmn,Qmn,Jmn,Zmn,egn,tgn],diverging:vbe,heatmap:vbe,ordinal:ngn}},v7='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',ign='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',b7=400,zO={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},sgn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],ogn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function r8({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=zO.gridBg[e],i=zO.textPrimary[e],s=zO.textSecondary[e],o=n==="dark"?sgn:ogn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:v7,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:ign,labelFontWeight:b7,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:zO.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:v7,fill:s,fontWeight:b7},"guide-title":{font:v7,fill:s,fontWeight:b7}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const agn=r8({theme:"white",background:"#ffffff"}),lgn=r8({theme:"g10",background:"#f4f4f4"}),ugn=r8({theme:"g90",background:"#262626"}),cgn=r8({theme:"g100",background:"#161616"}),dgn=kmn.version,fgn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:lgn,carbong100:cgn,carbong90:ugn,carbonwhite:agn,dark:Rmn,excel:Pmn,fivethirtyeight:Dmn,ggplot2:Mmn,googlecharts:Gmn,latimes:jmn,powerbi:rgn,quartz:Bmn,urbaninstitute:Wmn,version:dgn,vox:zmn},Symbol.toStringTag,{value:"Module"}));function hgn(e,t,n,r){if(Be(e))return`[${e.map(i=>t(yt(i)?i:bbe(i,n))).join(", ")}]`;if(pt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let c=a[u];c!==void 0&&(pt(c)&&(c=bbe(c,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function pgn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function bbe(e,t){return JSON.stringify(e,pgn(t))}var mgn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const R7e="vg-tooltip-element",ggn={offsetX:10,offsetY:10,id:R7e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:ygn,maxDepth:2,formatTooltip:hgn,baseURL:""};function ygn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function vgn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return mgn.toString().replace(R7e,e)}function bgn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class _gn{constructor(t){this.options={...ggn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=vgn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=bgn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var _7={};function wgn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class xgn{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}}var Egn=xgn;const Sgn=Object.freeze({loose:!0}),Tgn=Object.freeze({}),Cgn=e=>e?typeof e!="object"?Sgn:e:Tgn;var qoe=Cgn,CG={exports:{}};const Agn="2.0.0",P7e=256,Ign=Number.MAX_SAFE_INTEGER||9007199254740991,kgn=16,Rgn=P7e-6,Pgn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Woe={MAX_LENGTH:P7e,MAX_SAFE_COMPONENT_LENGTH:kgn,MAX_SAFE_BUILD_LENGTH:Rgn,MAX_SAFE_INTEGER:Ign,RELEASE_TYPES:Pgn,SEMVER_SPEC_VERSION:Agn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Ngn=typeof process=="object"&&_7&&_7.NODE_DEBUG&&/\bsemver\b/i.test(_7.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var i8=Ngn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Woe,s=i8;t=e.exports={};const o=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let c=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[d,r]],h=m=>{for(const[g,y]of f)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),_=c++;s(m,_,g),u[m]=_,l[_]=g,o[_]=new RegExp(g,y?"g":void 0),a[_]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(CG,CG.exports);var Goe=CG.exports;const _be=/^[0-9]+$/,N7e=(e,t)=>{const n=_be.test(e),r=_be.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Ogn=(e,t)=>N7e(t,e);var Dgn={compareIdentifiers:N7e,rcompareIdentifiers:Ogn};const UO=i8,{MAX_LENGTH:wbe,MAX_SAFE_INTEGER:VO}=Woe,{safeRe:xbe,t:Ebe}=Goe,Mgn=qoe,{compareIdentifiers:lw}=Dgn;let $gn=class qf{constructor(t,n){if(n=Mgn(n),t instanceof qf){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>wbe)throw new TypeError(`version is longer than ${wbe} characters`);UO("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?xbe[Ebe.LOOSE]:xbe[Ebe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>VO||this.major<0)throw new TypeError("Invalid major version");if(this.minor>VO||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>VO||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<VO)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(UO("SemVer.compare",this.version,this.options,t),!(t instanceof qf)){if(typeof t=="string"&&t===this.version)return 0;t=new qf(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof qf||(t=new qf(t,this.options)),lw(this.major,t.major)||lw(this.minor,t.minor)||lw(this.patch,t.patch)}comparePre(t){if(t instanceof qf||(t=new qf(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(UO("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return lw(r,i)}while(++n)}compareBuild(t){t instanceof qf||(t=new qf(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(UO("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return lw(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),lw(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Yoe=$gn;const Sbe=Yoe,Lgn=(e,t,n)=>new Sbe(e,n).compare(new Sbe(t,n));var vT=Lgn;const Fgn=vT,jgn=(e,t,n)=>Fgn(e,t,n)===0;var Bgn=jgn;const zgn=vT,Ugn=(e,t,n)=>zgn(e,t,n)!==0;var Vgn=Ugn;const Hgn=vT,qgn=(e,t,n)=>Hgn(e,t,n)>0;var Wgn=qgn;const Ggn=vT,Ygn=(e,t,n)=>Ggn(e,t,n)>=0;var Kgn=Ygn;const Xgn=vT,Qgn=(e,t,n)=>Xgn(e,t,n)<0;var Jgn=Qgn;const Zgn=vT,e0n=(e,t,n)=>Zgn(e,t,n)<=0;var t0n=e0n;const n0n=Bgn,r0n=Vgn,i0n=Wgn,s0n=Kgn,o0n=Jgn,a0n=t0n,l0n=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return n0n(e,n,r);case"!=":return r0n(e,n,r);case">":return i0n(e,n,r);case">=":return s0n(e,n,r);case"<":return o0n(e,n,r);case"<=":return a0n(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var u0n=l0n,w7,Tbe;function c0n(){if(Tbe)return w7;Tbe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,d){if(d=n(d),c instanceof t){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const d=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],f=c.match(d);if(!f)throw new TypeError(`Invalid comparator: ${c}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new a(f[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,d).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,d).test(c.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}w7=t;const n=qoe,{safeRe:r,t:i}=Goe,s=u0n,o=i8,a=Yoe,l=O7e();return w7}var x7,Cbe;function O7e(){if(Cbe)return x7;Cbe=1;class e{constructor($,D){if(D=r(D),$ instanceof e)return $.loose===!!D.loose&&$.includePrerelease===!!D.includePrerelease?$:new e($.raw,D);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=D,this.loose=!!D.loose,this.includePrerelease=!!D.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(O=>this.parseRange(O.trim())).filter(O=>O.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const O=this.set[0];if(this.set=this.set.filter(F=>!p(F[0])),this.set.length===0)this.set=[O];else if(this.set.length>1){for(const F of this.set)if(F.length===1&&m(F[0])){this.set=[F];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const O=((this.options.includePrerelease&&f)|(this.options.loose&&h))+":"+$,F=n.get(O);if(F)return F;const U=this.options.loose,V=U?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];$=$.replace(V,P(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[l.COMPARATORTRIM],u),s("comparator trim",$),$=$.replace(a[l.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[l.CARETTRIM],d),s("caret trim",$);let M=$.split(" ").map(H=>y(H,this.options)).join(" ").split(/\s+/).map(H=>k(H,this.options));U&&(M=M.filter(H=>(s("loose invalid filter",H,this.options),!!H.match(a[l.COMPARATORLOOSE])))),s("range list",M);const z=new Map,q=M.map(H=>new i(H,this.options));for(const H of q){if(p(H))return[H];z.set(H.value,H)}z.size>1&&z.has("")&&z.delete("");const j=[...z.values()];return n.set(O,j),j}intersects($,D){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(O=>g(O,D)&&$.set.some(F=>g(F,D)&&O.every(U=>F.every(V=>U.intersects(V,D)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let D=0;D<this.set.length;D++)if(L(this.set[D],$,this.options))return!0;return!1}}x7=e;const t=Egn,n=new t,r=qoe,i=c0n(),s=i8,o=Yoe,{safeRe:a,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:d}=Goe,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:h}=Woe,p=R=>R.value==="<0.0.0-0",m=R=>R.value==="",g=(R,$)=>{let D=!0;const O=R.slice();let F=O.pop();for(;D&&O.length;)D=O.every(U=>F.intersects(U,$)),F=O.pop();return D},y=(R,$)=>(s("comp",R,$),R=x(R,$),s("caret",R),R=_(R,$),s("tildes",R),R=E(R,$),s("xrange",R),R=I(R,$),s("stars",R),R),v=R=>!R||R.toLowerCase()==="x"||R==="*",_=(R,$)=>R.trim().split(/\s+/).map(D=>w(D,$)).join(" "),w=(R,$)=>{const D=$.loose?a[l.TILDELOOSE]:a[l.TILDE];return R.replace(D,(O,F,U,V,M)=>{s("tilde",R,O,F,U,V,M);let z;return v(F)?z="":v(U)?z=`>=${F}.0.0 <${+F+1}.0.0-0`:v(V)?z=`>=${F}.${U}.0 <${F}.${+U+1}.0-0`:M?(s("replaceTilde pr",M),z=`>=${F}.${U}.${V}-${M} <${F}.${+U+1}.0-0`):z=`>=${F}.${U}.${V} <${F}.${+U+1}.0-0`,s("tilde return",z),z})},x=(R,$)=>R.trim().split(/\s+/).map(D=>S(D,$)).join(" "),S=(R,$)=>{s("caret",R,$);const D=$.loose?a[l.CARETLOOSE]:a[l.CARET],O=$.includePrerelease?"-0":"";return R.replace(D,(F,U,V,M,z)=>{s("caret",R,F,U,V,M,z);let q;return v(U)?q="":v(V)?q=`>=${U}.0.0${O} <${+U+1}.0.0-0`:v(M)?U==="0"?q=`>=${U}.${V}.0${O} <${U}.${+V+1}.0-0`:q=`>=${U}.${V}.0${O} <${+U+1}.0.0-0`:z?(s("replaceCaret pr",z),U==="0"?V==="0"?q=`>=${U}.${V}.${M}-${z} <${U}.${V}.${+M+1}-0`:q=`>=${U}.${V}.${M}-${z} <${U}.${+V+1}.0-0`:q=`>=${U}.${V}.${M}-${z} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?V==="0"?q=`>=${U}.${V}.${M}${O} <${U}.${V}.${+M+1}-0`:q=`>=${U}.${V}.${M}${O} <${U}.${+V+1}.0-0`:q=`>=${U}.${V}.${M} <${+U+1}.0.0-0`),s("caret return",q),q})},E=(R,$)=>(s("replaceXRanges",R,$),R.split(/\s+/).map(D=>T(D,$)).join(" ")),T=(R,$)=>{R=R.trim();const D=$.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return R.replace(D,(O,F,U,V,M,z)=>{s("xRange",R,O,F,U,V,M,z);const q=v(U),j=q||v(V),H=j||v(M),G=H;return F==="="&&G&&(F=""),z=$.includePrerelease?"-0":"",q?F===">"||F==="<"?O="<0.0.0-0":O="*":F&&G?(j&&(V=0),M=0,F===">"?(F=">=",j?(U=+U+1,V=0,M=0):(V=+V+1,M=0)):F==="<="&&(F="<",j?U=+U+1:V=+V+1),F==="<"&&(z="-0"),O=`${F+U}.${V}.${M}${z}`):j?O=`>=${U}.0.0${z} <${+U+1}.0.0-0`:H&&(O=`>=${U}.${V}.0${z} <${U}.${+V+1}.0-0`),s("xRange return",O),O})},I=(R,$)=>(s("replaceStars",R,$),R.trim().replace(a[l.STAR],"")),k=(R,$)=>(s("replaceGTE0",R,$),R.trim().replace(a[$.includePrerelease?l.GTE0PRE:l.GTE0],"")),P=R=>($,D,O,F,U,V,M,z,q,j,H,G)=>(v(O)?D="":v(F)?D=`>=${O}.0.0${R?"-0":""}`:v(U)?D=`>=${O}.${F}.0${R?"-0":""}`:V?D=`>=${D}`:D=`>=${D}${R?"-0":""}`,v(q)?z="":v(j)?z=`<${+q+1}.0.0-0`:v(H)?z=`<${q}.${+j+1}.0-0`:G?z=`<=${q}.${j}.${H}-${G}`:R?z=`<${q}.${j}.${+H+1}-0`:z=`<=${z}`,`${D} ${z}`.trim()),L=(R,$,D)=>{for(let O=0;O<R.length;O++)if(!R[O].test($))return!1;if($.prerelease.length&&!D.includePrerelease){for(let O=0;O<R.length;O++)if(s(R[O].semver),R[O].semver!==i.ANY&&R[O].semver.prerelease.length>0){const F=R[O].semver;if(F.major===$.major&&F.minor===$.minor&&F.patch===$.patch)return!0}return!1}return!0};return x7}const d0n=O7e(),f0n=(e,t,n)=>{try{t=new d0n(t,n)}catch{return!1}return t.test(e)};var h0n=f0n,D7e=wgn(h0n);function p0n(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function l(c){c.source===r&&(a=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){a<=0||(r.postMessage(n,o),setTimeout(u,s),a-=1)}setTimeout(u,s)}var m0n=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function M7e(e,...t){for(const n of t)g0n(e,n);return e}function g0n(e,t){for(const n of Object.keys(t))eT(e,n,t[n],!0)}const _d=son;let Ak=dmn;const HO=typeof window<"u"?window:void 0;var Pbe;Ak===void 0&&((Pbe=HO==null?void 0:HO.vl)!=null&&Pbe.compile)&&(Ak=HO.vl);const y0n={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},v0n={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},A2={vega:"Vega","vega-lite":"Vega-Lite"},XL={vega:_d.version,"vega-lite":Ak?Ak.version:"not available"},b0n={vega:e=>e,"vega-lite":(e,t)=>Ak.compile(e,{config:t}).spec},_0n=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,w0n="chart-wrapper";function x0n(e){return typeof e=="function"}function Abe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${A2[r]} JSON Source`}function E0n(e,t){if(e.$schema){const n=A7e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${A2[n.library]}, but mode argument sets ${A2[t]??t}.`);const r=n.library;return D7e(XL[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${A2[r]} ${n.version}, but the current version of ${A2[r]} is v${XL[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function $7e(e){return!!(e&&"load"in e)}function Ibe(e){return $7e(e)?e:_d.loader(e)}function S0n(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return yt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function T0n(e,t,n={}){let r,i;yt(t)?(i=Ibe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=S0n(r),o=s.loader;(!i||o)&&(i=Ibe(n.loader??o));const a=await kbe(s,i),l=await kbe(n,i),u={...M7e(l,a),config:ZS(l.config??{},a.config??{})};return await A0n(e,r,u,i)}async function kbe(e,t){const n=yt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=yt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function C0n(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function A0n(e,t,n={},r){const i=n.theme?ZS(fgn[n.theme],n.config??{}):n.config,s=av(n.actions)?n.actions:M7e({},y0n,n.actions??{}),o={...v0n,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??_d.Warn,u=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const x="vega-embed-style",{root:S,rootContainer:E}=C0n(c);if(!S.getElementById(x)){const T=document.createElement("style");T.id=x,T.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?m0n.toString():n.defaultStyle,E.appendChild(T)}}const d=E0n(t,n.mode);let f=b0n[d](t,i);if(d==="vega-lite"&&f.$schema){const x=A7e(f.$schema);D7e(XL.vega,`^${x.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${x.version}, but current version is v${XL.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const x=document.createElement("div");x.classList.add(w0n),c.appendChild(x),h=x}const p=n.patch;if(p&&(f=p instanceof Function?p(f):bj(f,p,!0,!1).newDocument),n.formatLocale&&_d.formatLocale(n.formatLocale),n.timeFormatLocale&&_d.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const x in n.expressionFunctions){const S=n.expressionFunctions[x];"fn"in S?_d.expressionFunction(x,S.fn,S.visitor):S instanceof Function&&_d.expressionFunction(x,S)}const{ast:m}=n,g=_d.parse(f,d==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||_d.View)(g,{loader:r,logLevel:l,renderer:a,...m?{expr:_d.expressionInterpreter??n.expr??mon}:{}});if(y.addSignalListener("autosize",(x,S)=>{const{type:E}=S;E=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):E=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):E=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:x,tooltip:S}=n,E=x&&!$7e(x)?x==null?void 0:x.baseURL:void 0,T=x0n(S)?S:new _gn({baseURL:E,...S===!0?{}:S}).call;y.tooltip(T)}let{hover:v}=n;if(v===void 0&&(v=d==="vega"),v){const{hoverSet:x,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(x,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let _;if(s!==!1){let x=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const E=document.createElement("details");E.title=o.CLICK_TO_VIEW_ACTIONS,c.append(E),x=E;const T=document.createElement("summary");T.innerHTML=_0n,E.append(T),_=I=>{E.contains(I.target)||E.removeAttribute("open")},document.addEventListener("click",_)}const S=document.createElement("div");if(x.append(S),S.classList.add("vega-actions"),s===!0||s.export!==!1){for(const E of["svg","png"])if(s===!0||s.export===!0||s.export[E]){const T=o[`${E.toUpperCase()}_ACTION`],I=document.createElement("a"),k=pt(n.scaleFactor)?n.scaleFactor[E]:n.scaleFactor;I.text=T,I.href="#",I.target="_blank",I.download=`${u}.${E}`,I.addEventListener("mousedown",async function(P){P.preventDefault();const L=await y.toImageURL(E,k);this.href=L}),S.append(I)}}if(s===!0||s.source!==!1){const E=document.createElement("a");E.text=o.SOURCE_ACTION,E.href="#",E.addEventListener("click",function(T){Abe(Tz(t),n.sourceHeader??"",n.sourceFooter??"",d),T.preventDefault()}),S.append(E)}if(d==="vega-lite"&&(s===!0||s.compiled!==!1)){const E=document.createElement("a");E.text=o.COMPILED_ACTION,E.href="#",E.addEventListener("click",function(T){Abe(Tz(f),n.sourceHeader??"",n.sourceFooter??"","vega"),T.preventDefault()}),S.append(E)}if(s===!0||s.editor!==!1){const E=n.editorUrl??"https://vega.github.io/editor/",T=document.createElement("a");T.text=o.EDITOR_ACTION,T.href="#",T.addEventListener("click",function(I){p0n(window,E,{config:i,mode:p?"vega":d,renderer:a,spec:Tz(p?f:t)}),I.preventDefault()}),S.append(T)}}function w(){_&&document.removeEventListener("click",_),y.finalize()}return{view:y,spec:t,vgSpec:f,finalize:w,embedOptions:n}}function I0n(e){return!!e&&{}.toString.call(e)==="[object Function]"}function k0n(e,t,n){n&&(I0n(n)?n(e.data(t)):e.change(t,_d.changeset().remove(()=>!0).insert(n)))}function R0n(e,t){Object.keys(t).forEach(n=>{k0n(e,n,t[n])})}function L7e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const F7e=()=>{};function E7(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function P0n(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=L7e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!$C(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function Rbe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function S7(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function I2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class j7e extends Vi.PureComponent{constructor(){super(...arguments),I2(this,"containerRef",Vi.createRef()),I2(this,"resultPromise",void 0),I2(this,"handleError",t=>{const{onError:n=F7e}=this.props;n(t,this.containerRef.current),console.warn(t)}),I2(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=L7e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=P0n(S7(this.props),S7(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!Kq(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&Rbe(a,s),i&&E7(a,i)),a.run()})}else Kq(i,s)||this.modifyView(o=>{s&&Rbe(o,s),i&&E7(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=S7(this.props);this.resultPromise=T0n(this.containerRef.current,a,o).then(l=>{if(l){const{view:u}=l;E7(u,r)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Vi.createElement("div",{ref:this.containerRef,className:t,style:n})}}I2(j7e,"propTypes",{className:j0e.string,onError:j0e.func});function AG(){return AG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AG.apply(this,arguments)}function IG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const N0n={};class B7e extends Vi.PureComponent{constructor(){super(...arguments),IG(this,"vegaEmbed",Vi.createRef()),IG(this,"handleNewView",t=>{this.update();const{onNewView:n=F7e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){Kq(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{R0n(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Vi.createElement(j7e,AG({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}IG(B7e,"defaultProps",{data:N0n});function kG(){return kG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kG.apply(this,arguments)}function O0n(e){return Vi.createElement(B7e,kG({},e,{mode:"vega-lite"}))}function D0n(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function M0n(e){const{studyId:t,allParticipants:n,config:r}=e,i=Zc(),[s,o]=Vd(),a=n.filter(_=>_.completed).map(_=>Math.max(...Object.values(_.answers).map(w=>w.endTime).filter(w=>w!==void 0))).filter(_=>Number.isFinite(_)),[l,u]=A.useState([new Date(new Date(Math.min(...a.length>0?a:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...a.length>0?a:[new Date().getTime()])).setHours(24,0,0,0))]),[c,d,f,h]=A.useMemo(()=>{const _=n.filter(S=>!S.rejected&&S.completed),w=n.filter(S=>!S.rejected&&!S.completed),x=n.filter(S=>S.rejected);return[_,w,x,_.filter(S=>D0n(S.answers,l))]},[n,l]),p=A.useMemo(()=>{var _,w;return h.length>0?[{Date:(_=l[0])==null?void 0:_.getTime(),Participants:0},...h.map(x=>Math.max(...Object.values(x.answers).map(S=>S.endTime).flat())).sort((x,S)=>x-S).map((x,S)=>({Date:x,Participants:S})),{Date:(w=l[1])==null?void 0:w.getTime(),Participants:h.length}]:[]},[h,l]),m=A.useMemo(()=>{var _,w;return{width:o.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(_=l[0])==null?void 0:_.getTime(),(w=l[1])==null?void 0:w.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:p}}},[o.width,l,p]),[g,{close:y,open:v}]=B2(!1);return b.jsx(bf,{children:b.jsxs(Gb,{ref:s,padding:"lg",shadow:"md",withBorder:!0,children:[b.jsxs(Et,{align:"center",mb:"xs",justify:"space-between",children:[b.jsxs(Et,{direction:"row",align:"center",children:[b.jsx(li,{order:5,children:t}),b.jsx(sLe,{completed:c.length,inProgress:d.length,rejected:f.length,filteredCompleted:h.length})]}),b.jsxs(gn,{children:[b.jsx(iLe,{allParticipants:n,studyId:t}),b.jsxs(Tn,{opened:g,children:[b.jsx(Tn.Target,{children:b.jsx(rn,{onClick:()=>i(`/analysis/stats/${t}`),onMouseEnter:v,onMouseLeave:y,px:4,children:b.jsx(gnt,{})})}),b.jsx(Tn.Dropdown,{children:b.jsx(Xe,{children:"Analyze and manage study data"})})]})]})]}),b.jsx(tne,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:l,onChange:u}),p.length>0?b.jsxs(b.Fragment,{children:[b.jsx(Xe,{mt:16,children:"Finished Participants"}),b.jsx(O0n,{spec:m,actions:!1})]}):b.jsx(ge,{h:293.4,children:b.jsx(Ya,{style:{height:"100%"},children:b.jsx(Xe,{children:"Not enough participants for chart"})})})]})})}function $0n(e){const{globalConfig:t}=e,[n,r]=A.useState(!1),[i,s]=A.useState({}),[o,a]=A.useState({}),[l,u]=A.useState({}),{storageEngine:c}=pi(),{user:d}=pp();A.useEffect(()=>{(async()=>{r(!0);const p={},m={},g={},y=async _=>{const w=await nj(_,t);if(c){if(p[_]=await c.getAllParticipantsDataByStudy(_),w===null)return;if(m[_]=w,c instanceof mc){const x=await c.getModes(_);g[_]=x.analyticsInterfacePubliclyAccessible}}};await(async()=>{const _=t.configsList.map(w=>y(w));try{await Promise.all(_),s(p),a(m),u(g)}catch(w){console.error("Error fetching data:",w)}finally{r(!1)}})()})()},[t,c]);const f=t.configsList.map(h=>i[h]&&(l[h]||d.isAdmin?b.jsx(xc.Col,{span:{md:12,xl:6},children:b.jsx(M0n,{studyId:h,allParticipants:i[h],config:o[h]})},`${h}-panel`):null));return b.jsxs(ge,{children:[b.jsx(li,{mb:20,order:4,children:"Your Studies:"}),b.jsxs(xc,{children:[f.length>0?f:b.jsx(bf,{mt:100,children:b.jsx(Xe,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),b.jsx(Gl,{visible:n})]})]})}function L0n({globalConfig:e}){return b.jsxs(Ar,{children:[b.jsx(wA,{studyIds:e.configsList}),b.jsx(Ar.Main,{children:b.jsx(bf,{fluid:!0,children:b.jsx($0n,{globalConfig:e})})})]})}function F0n(){const{user:e,triggerAuth:t}=pp(),{storageEngine:n}=pi(),[r,i]=A.useState(!1),[s,o]=A.useState([]),[a,l]=A.useState(!1),[u,c]=A.useState(!1),[d,f]=A.useState(!1),[h,p]=A.useState(!1),[m,g]=A.useState(""),[y,v]=A.useState(null),_=vAe({initialValues:{email:""},validate:{email:hvt("Invalid email")}});A.useEffect(()=>{(async()=>{if(l(!0),n instanceof mc){const P=await(n==null?void 0:n.getUserManagementData("authentication"));i(P==null?void 0:P.isEnabled);const L=await(n==null?void 0:n.getUserManagementData("adminUsers"));L&&L.adminUsersList&&o(L==null?void 0:L.adminUsersList.map(R=>R.email))}else i(!1);l(!1)})()},[n]);const w=async()=>{if(l(!0),n instanceof mc){const k=await wFe(n,l);k&&k.email&&v({email:k.email,uid:k.uid}),p(!0)}l(!1)},x=async k=>{l(!0),n instanceof mc&&k&&(await n.changeAuth(!0),await n.addAdminUser(k),o([k.email]),i(!0),t()),p(!1),l(!1)},S=async()=>{if(l(!0),n instanceof mc){await n.addAdminUser({email:_.values.email,uid:null});const k=await n.getUserManagementData("adminUsers");o(k==null?void 0:k.adminUsersList.map(P=>P.email))}l(!1),c(!1),_.setValues({email:""})},E=k=>{f(!0),g(k)},T=async()=>{if(l(!0),n instanceof mc){await n.removeAdminUser(m);const k=await n.getUserManagementData("adminUsers");o(k==null?void 0:k.adminUsersList.map(P=>P.email))}f(!1),l(!1)},I=A.useMemo(()=>n instanceof mc,[n]);return b.jsxs(b.Fragment,{children:[b.jsx(bf,{children:b.jsxs(Gb,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[b.jsx(li,{mb:20,order:3,children:"Authentication"}),r?b.jsx(Et,{children:b.jsx(Xe,{children:"Authentication is enabled."})}):b.jsxs(Et,{justify:"space-between",children:[b.jsx(ge,{children:b.jsx(Xe,{children:"Authentication is currently disabled."})}),b.jsx(Xt,{label:"You can only enable auth when using Firebase",disabled:I,children:b.jsx(rn,{onClick:k=>I?w():k.preventDefault(),color:"green","data-disabled":I?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?b.jsxs(Et,{mt:40,direction:"column",children:[b.jsxs(Et,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[b.jsx(li,{order:6,children:"Enabled Users"}),b.jsx(XSe,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(k=>{var P;return b.jsxs(Et,{justify:"space-between",mb:10,children:[b.jsx(Xe,{children:k}),k===((P=e.user)==null?void 0:P.email)?b.jsx(Xe,{color:"blue",size:"xs",children:"You"}):b.jsx(In,{variant:"subtle",onClick:()=>E(k),children:b.jsx(KSe,{color:"red"})})]},k)}):null]}):null]})}),b.jsx(as,{opened:u,onClose:()=>c(!1),title:"Add Admin User",children:b.jsxs(ge,{component:"form",onSubmit:_.onSubmit(()=>S()),children:[b.jsx(qd,{leftSection:b.jsx(unt,{}),placeholder:"User Gmail Account",..._.getInputProps("email")}),b.jsxs(Et,{mt:30,justify:"right",children:[b.jsx(rn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),b.jsx(rn,{type:"submit",children:"Save"})]})]})}),b.jsxs(as,{opened:d,size:"large",onClose:()=>f(!1),title:b.jsxs(Xe,{fw:700,children:["Remove",m,"?"]}),children:[b.jsxs(Xe,{mt:40,children:["Are you sure you want to remove",b.jsx("b",{children:m})," ","as an administrator?"]}),b.jsxs(Et,{mt:40,justify:"right",children:[b.jsx(rn,{mr:5,variant:"subtle",color:"red",onClick:()=>f(!1),children:"Cancel"}),b.jsx(rn,{onClick:()=>T(),children:"Yes, I'm sure."})]})]}),b.jsxs(as,{opened:h,size:"md",onClose:()=>f(!1),title:b.jsx(Xe,{fw:700,children:"Enable Authentication?"}),children:[b.jsxs(Xe,{mt:40,children:["User"," ",b.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),b.jsxs(Et,{mt:40,justify:"right",children:[b.jsx(rn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),b.jsx(rn,{onClick:()=>x(y),children:"Yes, I'm sure."})]})]}),b.jsx(Gl,{visible:a})]})}class j0n extends J3e{constructor(){super("localStorage");gl(this,"studyDatabase");gl(this,"studyId")}saveAllParticipantAndTaskTags(n){throw new Error("Method not implemented.")}getAllParticipantAndTaskTags(){throw new Error("Method not implemented.")}saveTags(n){throw new Error("Method not implemented.")}getTags(){throw new Error("Method not implemented.")}getEditedTranscript(n){throw new Error("Method not implemented.")}saveEditedTranscript(n,r,i,s){throw new Error("Method not implemented.")}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}getTranscription(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await Sw.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await nL(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var d;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const l=await this.getModes(n),u=await nL(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:u,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return l.dataCollectionEnabled&&await((d=this.studyDatabase)==null?void 0:d.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await Sw.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=VI();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=Sw.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=VI();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await Sw.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await Sw.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function B0n(){let e,t=!1;{const n=new mc;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new j0n;await n.connect(),e=n}return e}async function z0n(){const t=await(await fetch(`${Qu}global.json`)).text();return zyt(t)}function U0n(){const[e,t]=A.useState(null),[n,r]=A.useState({});A.useEffect(()=>{async function a(){e&&r(await Y9t(e))}a()},[e]),A.useEffect(()=>{e||z0n().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=pi();A.useEffect(()=>{if(i!==void 0)return;async function a(){const l=await B0n();s(l)}a()},[s,i]);const o=async a=>i instanceof mc?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?b.jsx(Gtt,{basename:Qu,children:b.jsx(w9t,{children:b.jsx(nnt,{children:b.jsx(Ar,{padding:"md",header:{height:70},children:b.jsxs(jtt,{children:[b.jsx(jp,{path:"/",element:b.jsxs(b.Fragment,{children:[b.jsx(wA,{studyIds:e.configsList}),b.jsx(Mct,{globalConfig:e,studyConfigs:n})]})}),b.jsx(jp,{path:"/:studyId/*",element:b.jsx(X9t,{globalConfig:e})}),b.jsx(jp,{path:"/analysis/dashboard",element:b.jsx(L0n,{globalConfig:e})}),b.jsx(jp,{path:"/analysis",element:b.jsx(zq,{to:"/analysis/dashboard"})}),b.jsx(jp,{path:"/analysis/stats/:studyId/:tab",element:b.jsx(F0e,{paramToCheck:"studyId",paramCallback:o,children:b.jsx(ZVt,{globalConfig:e})})}),b.jsx(jp,{path:"/analysis/stats/:studyId",element:b.jsx(zq,{to:"./table",replace:!0})}),b.jsx(jp,{path:"/settings",element:b.jsx(Ar,{children:b.jsxs(F0e,{children:[b.jsx(wA,{studyIds:e.configsList}),b.jsx(Ar.Main,{children:b.jsx(F0n,{})})]})})}),b.jsx(jp,{path:"/login",element:b.jsxs(Ar,{children:[b.jsx(wA,{studyIds:e.configsList}),b.jsx(Ar.Main,{children:b.jsx(eHt,{})})]})})]})})})})}):null}T7.createRoot(document.getElementById("root")).render(b.jsx(Vi.StrictMode,{children:b.jsx(Xet,{children:b.jsx(hxe,{children:b.jsx(U0n,{})})})}))});export default V0n();
